{"version":3,"file":"_prepareConfig-56d87958.js","sources":["../src/version.ts","../src/schema/types/slug.ts","../src/schema/types/geopoint.ts","../src/schema/types/imageCrop.ts","../src/schema/types/imageHotspot.ts","../src/schema/types/assetSourceData.ts","../src/schema/types/imageAsset.ts","../src/schema/types/imagePalette.ts","../src/schema/types/imagePaletteSwatch.ts","../src/schema/types/imageDimensions.ts","../src/schema/types/imageMetadata.ts","../src/schema/types/fileAsset.ts","../src/schema/createSchema.ts","../src/datastores/cors/CorsOriginError.ts","../src/util/useUnique.ts","../src/util/createHookFromObservableFactory.ts","../src/util/isNonNullable.ts","../src/util/draftUtils.ts","../src/util/isRecord.ts","../src/util/isString.ts","../src/util/resizeObserver.ts","../src/util/schemaUtils.ts","../src/util/searchUtils.ts","../src/util/useLoadable.ts","../src/util/useThrottledCallback.ts","../src/datastores/authStore/storage.ts","../src/datastores/authStore/createBroadcastChannel.ts","../src/datastores/authStore/sessionId.ts","../src/datastores/authStore/providerLogos.tsx","../src/datastores/authStore/createLoginComponent.tsx","../src/datastores/authStore/createAuthStore.ts","../src/datastores/connection-status/utils/catchWithCount.ts","../src/datastores/connection-status/connection-status-store.ts","../src/datastores/crossProjectToken.ts","../src/components/collapseMenu/CollapseOverflowMenu.tsx","../src/components/collapseMenu/ObserveElement.tsx","../src/components/collapseMenu/CollapseMenuDivider.tsx","../src/components/collapseMenu/CollapseMenu.tsx","../src/components/collapseMenu/CollapseMenuButton.tsx","../src/components/rovingFocus/useRovingFocus.ts","../src/studio/colorScheme.tsx","../src/router/RouterContext.ts","../src/router/useRouter.ts","../src/router/useLink.ts","../src/router/useIntentLink.ts","../src/router/IntentLink.tsx","../src/router/Link.tsx","../src/router/utils/hasOwn.ts","../src/router/utils/isEmpty.ts","../src/router/RouteScope.tsx","../src/router/RouterProvider.tsx","../src/router/useStateLink.ts","../src/router/StateLink.tsx","../src/router/_parseRoute.ts","../src/router/utils/debug.ts","../src/router/utils/arrayify.ts","../src/router/_resolveStateFromPath.ts","../src/router/_findMatchingRoutes.ts","../src/router/_resolvePathFromState.ts","../src/router/utils/jsonParamsEncoding.ts","../src/router/utils/paramsEncoding.ts","../src/router/route.ts","../src/router/useRouterState.ts","../src/router/withRouter.tsx","../src/studio/components/navbar/tools/ToolLink.tsx","../src/studio/components/navbar/tools/ToolCollapseMenu.tsx","../src/studio/components/navbar/tools/ToolVerticalMenu.tsx","../src/studio/components/navbar/tools/ToolMenu.tsx","../src/user-color/context.ts","../src/user-color/hooks.ts","../src/user-color/manager.ts","../src/user-color/provider.tsx","../src/datastores/createMultiKeyWeakMap.ts","../src/datastores/ResourceCacheProvider.tsx","../src/studio/activeWorkspaceMatcher/ActiveWorkspaceMatcherContext.ts","../src/studio/workspaces/WorkspacesContext.ts","../src/studio/workspaces/useWorkspaces.ts","../src/studio/workspaces/WorkspacesProvider.tsx","../src/studio/activeWorkspaceMatcher/matchWorkspace.ts","../src/studio/activeWorkspaceMatcher/ActiveWorkspaceMatcher.tsx","../src/studio/activeWorkspaceMatcher/useActiveWorkspace.ts","../src/studio/StudioThemeProvider.tsx","../src/util/globalScope.ts","../src/studio/screens/LoadingScreen.tsx","../src/studio/screens/schemaErrors/SchemaProblemGroups.tsx","../src/studio/screens/schemaErrors/utils.ts","../src/studio/screens/schemaErrors/reportWarnings.ts","../src/studio/screens/schemaErrors/SchemaErrorsScreen.tsx","../src/studio/screens/NotFoundScreen.tsx","../src/studio/components/navbar/workspace/WorkspacePreview.tsx","../src/studio/components/navbar/workspace/hooks/useWorkspaceAuthStates.ts","../src/studio/components/navbar/workspace/constants.ts","../src/studio/components/navbar/workspace/WorkspaceAuth/Layout.tsx","../src/studio/components/navbar/workspace/WorkspaceAuth/WorkspaceAuth.tsx","../src/studio/components/navbar/workspace/WorkspaceMenuButton.tsx","../src/studio/screens/AuthenticateScreen.tsx","../src/studio/screens/ConfigErrorsScreen.tsx","../src/datastores/authStore/providerTitle.ts","../src/studio/screens/NotAuthenticatedScreen.tsx","../src/studio/screens/CorsOriginErrorScreen.tsx","../src/studio/StudioErrorBoundary.tsx","../src/studio/workspaceLoader/ErrorMessage.tsx","../src/studio/router/router.ts","../src/studio/router/util/getOrderedTools.ts","../src/studio/router/helpers.ts","../src/studio/router/routerEvent.ts","../src/studio/workspace.tsx","../src/studio/source.tsx","../src/studio/workspaceLoader/WorkspaceLoader.tsx","../src/studio/AuthBoundary.tsx","../src/studio/constants.ts","../src/studio/StudioProvider.tsx","../src/environment/index.ts","../src/components/UserAvatar.tsx","../src/studio/components/navbar/userMenu/LoginProviderLogo.tsx","../src/studio/components/navbar/userMenu/UserMenu.tsx","../src/components/previews/constants.ts","../src/components/previews/_common/Media.styled.ts","../src/components/previews/_common/Media.tsx","../src/components/previews/helpers.tsx","../src/components/previews/general/DefaultPreview.tsx","../src/components/previews/general/DetailPreview.styled.ts","../src/components/previews/general/DetailPreview.tsx","../src/components/progress/CircularProgress.tsx","../src/components/progress/LinearProgress.tsx","../src/components/previews/general/MediaPreview.styled.ts","../src/components/previews/general/MediaPreview.tsx","../src/components/previews/portableText/BlockImagePreview.styled.tsx","../src/components/previews/portableText/BlockImagePreview.tsx","../src/components/previews/portableText/BlockPreview.tsx","../src/components/previews/portableText/InlinePreview.styled.tsx","../src/components/previews/portableText/InlinePreview.tsx","../src/components/previews/template/TemplatePreview.tsx","../src/components/InsufficientPermissionsMessage.tsx","../src/studio/components/navbar/NewDocumentButton.tsx","../src/studio/components/StatusButton.tsx","../src/studio/components/navbar/presence/PresenceMenuItem.tsx","../src/studio/components/navbar/presence/PresenceMenu.tsx","../src/studio/components/navbar/NavDrawer.tsx","../src/search/common/utils.ts","../src/search/common/tokenize.ts","../src/search/weighted/applyWeights.ts","../src/search/weighted/createWeightedSearch.ts","../src/search/search.ts","../src/studioClient.ts","../src/search/useDocumentSearchResults.ts","../src/studio/components/navbar/search/SearchFullscreenContent.tsx","../src/components/PreviewCard.tsx","../src/presence/DocumentPreviewPresence.tsx","../src/presence/constants.ts","../src/presence/utils.ts","../src/presence/FieldPresence.styled.tsx","../src/presence/context.tsx","../src/presence/PresenceTooltip.tsx","../src/components/react-track-elements/createUseReporter.tsx","../src/components/react-track-elements/createStore.ts","../src/components/react-track-elements/createScope.tsx","../src/presence/overlay/tracker.ts","../src/presence/FieldPresence.tsx","../src/presence/overlay/intersectionObserver.ts","../src/presence/overlay/WithIntersection.tsx","../src/presence/overlay/RegionsWithIntersections.styled.tsx","../src/presence/overlay/RegionsWithIntersections.tsx","../src/presence/overlay/StickyOverlay.tsx","../src/presence/overlay/PresenceOverlay.tsx","../src/preview/components/_extractUploadState.ts","../src/preview/components/_previewComponents.ts","../src/preview/components/SanityDefaultPreview.tsx","../src/preview/useDocumentPreview.ts","../src/preview/streams/resize.ts","../src/preview/streams/scroll.ts","../src/preview/streams/orientationChange.ts","../src/preview/streams/intersectionObservableFor.ts","../src/preview/streams/visibilityChange.ts","../src/preview/useVisibility.ts","../src/preview/components/_constants.ts","../src/preview/components/_resolvePreviewComponent.ts","../src/preview/components/SanityPreview.tsx","../src/preview/utils/getPreviewPaths.ts","../src/preview/constants.tsx","../src/preview/utils/portableText.ts","../src/preview/utils/keysOf.ts","../src/preview/utils/prepareForPreview.ts","../src/preview/utils/props.ts","../src/preview/createPathObserver.ts","../src/preview/createPreviewObserver.ts","../src/preview/utils/debounceCollect.ts","../src/preview/utils/optimizeQuery.ts","../src/preview/utils/hasEqualFields.ts","../src/preview/utils/isUniqueBy.ts","../src/preview/observeFields.ts","../src/preview/availability.ts","../src/preview/documentPair.ts","../src/preview/documentPreviewStore.ts","../src/studio/components/navbar/search/SearchItem.tsx","../src/studio/components/navbar/search/SearchPopoverContent.tsx","../src/studio/components/navbar/search/SearchField.tsx","../src/studio/components/navbar/changelog/portableTextContent/listStyles.tsx","../src/studio/components/navbar/changelog/portableTextContent/PortableTextContent.styles.ts","../src/studio/components/navbar/changelog/portableTextContent/PortableTextContent.tsx","../src/studio/components/navbar/changelog/ChangelogItem.tsx","../src/studio/components/navbar/changelog/ChangelogList.tsx","../src/studio/components/navbar/changelog/ChangelogDialog.tsx","../src/module-status/moduleStatus.ts","../src/module-status/hooks.ts","../src/studio/components/navbar/changelog/ChangelogAccordion.tsx","../src/studio/components/navbar/changelog/ChangelogButton.tsx","../src/studio/components/navbar/configIssues/ConfigIssuesButton.tsx","../src/studio/components/navbar/Navbar.tsx","../src/studio/screens/NoToolsScreen.tsx","../src/studio/screens/ToolNotFoundScreen.tsx","../src/studio/StudioLayout.tsx","../src/hooks/useClient.ts","../src/hooks/useDataset.ts","../src/hooks/useProjectId.ts","../src/hooks/useSchema.ts","../src/hooks/useTemplates.ts","../src/hooks/useTimeAgo.ts","../src/hooks/useConnectionState.ts","../src/hooks/useDocumentOperation.ts","../src/hooks/useDocumentOperationEvent.ts","../src/hooks/useEditState.ts","../src/hooks/useSyncState.ts","../src/hooks/useValidationStatus.ts","../src/datastores/document/buffered-doc/createObservableBufferedDocument.ts","../src/datastores/document/buffered-doc/createBufferedDocument.ts","../src/datastores/document/getPairListener.ts","../src/datastores/document/document-pair/checkoutPair.ts","../src/datastores/document/utils/createMemoizer.ts","../src/datastores/document/document-pair/memoizedPair.ts","../src/datastores/document/document-pair/snapshotPair.ts","../src/datastores/document/document-pair/operationArgs.ts","../src/datastores/document/document-pair/utils/isLiveEditEnabled.ts","../src/datastores/document/document-pair/editState.ts","../src/datastores/document/document-pair/operations/delete.ts","../src/datastores/document/document-pair/operations/publish.ts","../src/datastores/document/document-pair/operations/patch.ts","../src/datastores/document/document-pair/operations/commit.ts","../src/datastores/document/document-pair/operations/discardChanges.ts","../src/datastores/document/document-pair/operations/unpublish.ts","../src/datastores/document/document-pair/operations/duplicate.ts","../src/datastores/document/document-pair/operations/restore.ts","../src/datastores/document/document-pair/consistencyStatus.ts","../src/datastores/document/document-pair/operationEvents.ts","../src/datastores/document/document-pair/operations/index.ts","../src/datastores/document/document-pair/remoteSnapshots.ts","../src/datastores/document/document-pair/validation.ts","../src/datastores/document/document-pair/documentEvents.ts","../src/datastores/document/document-pair/editOperations.ts","../src/datastores/document/listenQuery.ts","../src/datastores/document/resolveTypeForDocument.ts","../src/templates/util/isRecord.ts","../src/templates/validate.ts","../src/templates/util/deepAssign.ts","../src/templates/resolve.ts","../src/datastores/document/initialValue/initialValue.ts","../src/datastores/document/document-store.ts","../src/datastores/document/hooks/useDocumentType.ts","../src/datastores/document/hooks/useDocumentValues.ts","../src/datastores/user/hooks.ts","../src/datastores/user/userStore.ts","../src/datastores/document/useInitialValue.ts","../src/datastores/document/useResolveInitialValueForType.ts","../src/datastores/grants/documentPairPermissions.ts","../src/datastores/grants/documentValuePermissions.ts","../src/datastores/grants/templatePermissions.ts","../src/datastores/debugParams/debugParams.ts","../src/datastores/grants/debug/exampleGrants.ts","../src/datastores/grants/debug/roleGrants.ts","../src/datastores/grants/grantsStore.ts","../src/datastores/history/history/getJsonStream.ts","../src/datastores/history/history/Aligner.ts","../src/datastores/history/history/Reconstruction.ts","../src/datastores/history/history/TimelineController.ts","../src/datastores/history/history/utils.ts","../src/datastores/history/history/diffValue.ts","../src/datastores/history/history/TwoEndedArray.ts","../src/datastores/history/history/chunker.ts","../src/datastores/history/history/Timeline.ts","../src/datastores/history/createHistoryStore.ts","../src/datastores/presence/mock-events.ts","../src/datastores/presence/message-transports/bifurTransport.ts","../src/datastores/presence/presence-store.ts","../src/datastores/presence/useGlobalPresence.tsx","../src/datastores/presence/useDocumentPresence.tsx","../src/datastores/project/projectStore.ts","../src/datastores/settings/backends/localStorage.ts","../src/datastores/settings/backends/memory.ts","../src/datastores/settings/backends/resolve.ts","../src/datastores/settings/settingsStore.ts","../src/datastores/datastores.ts","../src/form/components/FullscreenSpinner.tsx","../src/components/WithReferringDocuments.tsx","../src/form/components/SpinnerWithText.tsx","../src/form/studio/DefaultAssetSource/DocumentList.tsx","../src/form/studio/DefaultAssetSource/ConfirmMessage.tsx","../src/form/studio/DefaultAssetSource/AssetUsageDialog.tsx","../src/form/studio/DefaultAssetSource/AssetMenu.tsx","../src/form/studio/DefaultAssetSource/AssetThumb.tsx","../src/form/studio/DefaultAssetSource/prettyBytes.ts","../src/form/studio/DefaultAssetSource/utils/mimeType.ts","../src/form/studio/DefaultAssetSource/AssetRow.tsx","../src/form/studio/DefaultAssetSource/TableList.tsx","../src/form/studio/DefaultAssetSource/DefaultSource.tsx","../src/form/studio/DefaultAssetSource/index.ts","../src/form/defaults.ts","../src/studio/workspaces/WorkspaceValidationError.ts","../src/studio/workspaces/validateWorkspaces.ts","../src/desk/actions/actionId.ts","../src/desk/actions/HookStateContainer.ts","../src/desk/actions/requestIdleCallback.ts","../src/desk/actions/GetHookCollectionState.tsx","../src/desk/actions/RenderActionCollectionState.tsx","../src/desk/components/pane/PaneContextMenuButton.tsx","../src/components/transitional/ImperativeToast.ts","../src/components/zOffsets/defaults.ts","../src/components/zOffsets/ZIndexContext.ts","../src/components/zOffsets/useZIndex.ts","../src/components/transitional/LegacyLayerProvider.tsx","../src/desk/components/pane/constants.ts","../src/desk/components/pane/PaneContext.ts","../src/desk/components/pane/PaneLayoutContext.ts","../src/desk/components/pane/usePaneLayout.ts","../src/desk/components/pane/PaneDivider.tsx","../src/desk/components/pane/Pane.tsx","../src/desk/components/pane/usePane.ts","../src/desk/components/pane/PaneContent.styles.tsx","../src/desk/components/pane/PaneContent.tsx","../src/desk/components/pane/PaneFooter.styles.tsx","../src/desk/components/pane/PaneFooter.tsx","../src/desk/components/pane/PaneHeader.styles.tsx","../src/desk/components/pane/PaneHeader.tsx","../src/desk/components/pane/PaneLayout.styles.tsx","../src/desk/components/pane/helpers/_calcPaneResize.ts","../src/desk/components/pane/helpers/_getDOMPath.ts","../src/desk/components/pane/helpers/_sortElements.ts","../src/desk/components/pane/paneLayoutController.ts","../src/desk/components/pane/PaneLayout.tsx","../src/desk/components/IntentButton.tsx","../src/desk/components/paneHeaderActions/InsufficientPermissionsMessageTooltip.tsx","../src/desk/components/paneHeaderActions/PaneHeaderCreateButton.tsx","../src/desk/components/paneHeaderActions/PaneHeaderActions.tsx","../src/desk/DeskToolContext.ts","../src/desk/structureBuilder/SerializeError.ts","../src/desk/structureBuilder/util/getExtendedProjection.ts","../src/desk/structureBuilder/Sort.ts","../src/desk/structureBuilder/MenuItem.ts","../src/desk/structureBuilder/MenuItemGroup.ts","../src/desk/structureBuilder/util/validateId.ts","../src/desk/structureBuilder/views/View.ts","../src/desk/structureBuilder/views/ComponentView.ts","../src/desk/structureBuilder/views/FormView.ts","../src/desk/structureBuilder/views/index.ts","../src/desk/structureBuilder/Document.ts","../src/desk/structureBuilder/Layout.ts","../src/desk/structureBuilder/Intent.ts","../src/desk/structureBuilder/InitialValueTemplateItem.ts","../src/desk/structureBuilder/GenericList.ts","../src/desk/structureBuilder/DocumentList.ts","../src/desk/constants.ts","../src/desk/structureResolvers/PaneResolutionError.ts","../src/desk/structureResolvers/assignId.ts","../src/desk/structureResolvers/memoBind.ts","../src/desk/structureResolvers/createPaneResolver.ts","../src/desk/useDeskTool.ts","../src/desk/structureResolvers/createResolvedPaneNodeStream.ts","../src/desk/structureResolvers/useResolvedPanes.ts","../src/desk/components/Delay.tsx","../src/desk/components/deskTool/StructureError.tsx","../src/desk/components/paneRouter/PaneRouterContext.tsx","../src/desk/components/paneRouter/BackLink.tsx","../src/desk/components/paneRouter/ChildLink.tsx","../src/desk/components/paneRouter/ReferenceChildLink.tsx","../src/desk/components/paneRouter/ParameterizedLink.tsx","../src/desk/components/paneRouter/PaneRouterProvider.tsx","../src/desk/components/paneRouter/usePaneRouter.ts","../src/desk/panes/unknown/UnknownPaneType.tsx","../src/desk/panes/loading/getWaitMessages.ts","../src/desk/panes/loading/LoadingPane.tsx","../src/desk/panes/DeskToolPane.tsx","../src/desk/panes/error/ErrorPane.tsx","../src/components/changeIndicators/constants.ts","../src/components/changeIndicators/tracker.tsx","../src/components/changeIndicators/ConnectorContext.ts","../src/components/changeIndicators/ChangeFieldWrapper.tsx","../src/form/utils/empty.ts","../src/components/changeIndicators/ElementWithChangeBar.styled.tsx","../src/components/changeIndicators/ElementWithChangeBar.tsx","../src/components/changeIndicators/ChangeIndicator.tsx","../src/components/changeIndicators/ChangeIndicatorContext.ts","../src/components/scroll/scrollContext.ts","../src/components/scroll/hooks.ts","../src/components/scroll/scrollContainer.tsx","../src/components/scroll/scrollMonitor.tsx","../src/components/changeIndicators/helpers/findMostSpecificTarget.ts","../src/components/changeIndicators/helpers/isChangeBar.ts","../src/components/changeIndicators/helpers/scrollUtils.ts","../src/components/changeIndicators/helpers/scrollIntoView.ts","../src/components/changeIndicators/helpers/getOffsetsTo.ts","../src/components/changeIndicators/overlay/connectorPath.ts","../src/components/changeIndicators/overlay/mapConnectorToLine.ts","../src/components/changeIndicators/overlay/ClampedRect.tsx","../src/components/changeIndicators/overlay/Connector.styled.tsx","../src/components/changeIndicators/overlay/Connector.tsx","../src/components/changeIndicators/overlay/useResizeObserver.ts","../src/components/changeIndicators/overlay/ConnectorsOverlay.styled.tsx","../src/components/changeIndicators/overlay/ConnectorsOverlay.tsx","../src/components/changeIndicators/overlay/ChangeConnectorRoot.tsx","../src/form/studio/contexts/reviewChanges/ReviewChangesContext.ts","../src/form/studio/contexts/ReferenceInputOptions.tsx","../src/form/patch/PatchChannel.ts","../src/form/patch/patch.ts","../src/form/patch/PatchEvent.ts","../src/form/FormBuilderContext.ts","../src/form/useFormBuilder.ts","../src/form/inputs/arrays/common/ArrayFunctions.tsx","../src/form/inputs/PortableText/_legacyDefaultParts/Markers.tsx","../src/form/inputs/PortableText/_legacyDefaultParts/CustomMarkers.tsx","../src/form/studio/contexts/FormCallbacks.tsx","../src/form/studio/contexts/Presence.tsx","../src/form/studio/contexts/Validation.tsx","../src/form/FormBuilderProvider.tsx","../src/form/studio/StudioFormBuilderProvider.tsx","../src/form/studio/StudioFormBuilder.tsx","../src/form/utils/path.ts","../src/form/members/fields/asserters.ts","../src/field/paths/helpers.ts","../src/form/components/ActivateOnFocus/ActivateOnFocus.styles.tsx","../src/form/components/ActivateOnFocus/ActivateOnFocus.tsx","../src/form/utils/asserters.ts","../src/form/hooks/usePrevious.ts","../src/form/hooks/useDidUpdate.ts","../src/form/inputs/arrays/common/randomKey.ts","../src/form/utils/ensureKey.ts","../src/form/members/fields/ArrayOfObjectsField.tsx","../src/form/members/fields/PrimitiveField.tsx","../src/form/utils/createProtoValue.ts","../src/form/members/fields/ObjectField.tsx","../src/form/members/fields/ArrayOfPrimitivesField.tsx","../src/form/members/MemberField.tsx","../src/form/components/Alert.tsx","../src/form/components/Details.tsx","../src/form/inputs/InvalidValueInput/converters.ts","../src/form/inputs/InvalidValueInput/UntypedValueInput.tsx","../src/form/inputs/InvalidValueInput/InvalidValueInput.tsx","../src/form/components/formField/FormFieldValidationStatus.tsx","../src/form/components/formField/FormFieldHeaderText.tsx","../src/form/components/formField/FormFieldHeader.tsx","../src/form/components/formField/FormField.tsx","../src/form/components/formField/styles.ts","../src/form/components/formField/FormFieldSetLegend.tsx","../src/form/components/formField/FormFieldSet.tsx","../src/form/components/formField/FormFieldStatus.tsx","../src/form/inputs/arrays/errors/MissingKeysAlert.tsx","../src/form/inputs/arrays/errors/DuplicateKeysAlert.tsx","../src/form/members/MemberFieldError.tsx","../src/form/members/MemberFieldset.tsx","../src/form/inputs/arrays/ArrayOfObjectsInput/item/constants.ts","../src/form/inputs/arrays/ArrayOfObjectsInput/item/helpers.ts","../src/form/members/items/ArrayOfObjectsItem.tsx","../src/form/inputs/arrays/ArrayOfPrimitivesInput/getEmptyValue.ts","../src/form/members/items/ArrayOfPrimitivesItem.tsx","../src/form/inputs/arrays/ArrayOfObjectsInput/item/ItemWithMissingType.tsx","../src/form/members/MemberItemError.tsx","../src/form/members/ObjectMembers.tsx","../src/form/FormInput.tsx","../src/form/inputs/PortableText/callbacks/insertCallback.ts","../src/form/inputs/PortableText/callbacks/setCallback.ts","../src/form/inputs/PortableText/callbacks/unsetCallback.ts","../src/form/inputs/PortableText/BlockActions.tsx","../src/form/inputs/PortableText/_common/ReviewChangesHighlightBlock.tsx","../src/form/inputs/PortableText/_common/StyledChangeIndicatorWithProvidedFullPath.tsx","../src/form/inputs/PortableText/_helpers.ts","../src/form/inputs/PortableText/hooks/useMemberValidation.tsx","../src/form/inputs/PortableText/contexts/PortableTextMarkers.tsx","../src/form/inputs/PortableText/hooks/usePortableTextMarkers.tsx","../src/form/inputs/PortableText/contexts/PortableTextMembers.tsx","../src/form/inputs/PortableText/hooks/usePortableTextMembers.tsx","../src/form/utils/is.ts","../src/form/inputs/PortableText/object/BlockObjectPreview.tsx","../src/form/inputs/PortableText/object/BlockObject.styles.ts","../src/form/inputs/PortableText/object/BlockObject.tsx","../src/form/inputs/PortableText/object/InlineObjectToolbarPopover.tsx","../src/form/inputs/PortableText/object/InlineObject.tsx","../src/form/inputs/PortableText/text/AnnotationToolbarPopover.tsx","../src/form/inputs/PortableText/text/Annotation.tsx","../src/form/inputs/PortableText/text/constants.ts","../src/form/inputs/PortableText/text/Decorator.tsx","../src/form/inputs/PortableText/text/helpers.ts","../src/form/inputs/PortableText/text/TextBlock.styles.ts","../src/form/inputs/PortableText/text/textStyles.tsx","../src/form/inputs/PortableText/text/TextBlock.tsx","../src/form/inputs/PortableText/toolbar/CustomIcon.tsx","../src/form/inputs/PortableText/toolbar/helpers.tsx","../src/form/inputs/PortableText/toolbar/hooks.ts","../src/form/inputs/PortableText/toolbar/ActionMenu.tsx","../src/form/inputs/PortableText/toolbar/BlockStyleSelect.tsx","../src/form/inputs/PortableText/toolbar/InsertMenu.tsx","../src/form/inputs/PortableText/toolbar/Toolbar.tsx","../src/form/inputs/PortableText/Editor.styles.tsx","../src/form/inputs/PortableText/hooks/useSpellCheck.tsx","../src/form/inputs/PortableText/hooks/useScrollSelectionIntoView.tsx","../src/form/inputs/PortableText/Editor.tsx","../src/form/components/withFocusRing/helpers.ts","../src/form/inputs/PortableText/Compositor.styles.tsx","../src/form/inputs/PortableText/hooks/useHotKeys.tsx","../src/form/inputs/PortableText/object/helpers.ts","../src/form/inputs/PortableText/object/renderers/DefaultEditDialog.tsx","../src/form/inputs/PortableText/object/renderers/debug.ts","../src/form/inputs/PortableText/object/renderers/PopoverEditDialog.tsx","../src/form/inputs/PortableText/object/renderers/ObjectEditModal.tsx","../src/form/inputs/PortableText/hooks/useScrollToOpenedMember.tsx","../src/form/inputs/PortableText/Compositor.tsx","../src/form/inputs/PortableText/InvalidValue.tsx","../src/form/inputs/PortableText/usePatches.ts","../src/form/inputs/PortableText/VisibleOnFocusButton.tsx","../src/form/inputs/PortableText/PortableTextInput.tsx","../src/form/types/asserters.ts","../src/form/store/conditional-property/resolveConditionalProperty.ts","../src/form/store/constants.ts","../src/form/store/utils/getItemType.ts","../src/form/store/utils/getCollapsibleOptions.ts","../src/form/studio/inputResolver/helpers.ts","../src/form/store/formState.ts","../src/form/store/utils/immutableReconcile.ts","../src/form/store/useFormState.ts","../src/form/useFormValue.ts","../src/form/utils/mutationPatch.ts","../src/field/diff/annotations/helpers.ts","../src/field/diff/annotations/hooks.ts","../src/conditional-property/utils.tsx","../src/conditional-property/useConditionalProperty.tsx","../src/field/diff/contexts/DiffContext.tsx","../src/field/validation/index.ts","../src/field/schema/helpers.ts","../src/field/types/portableText/diff/symbols.ts","../src/field/types/portableText/diff/helpers.ts","../src/field/TODO.ts","../src/field/types/boolean/preview/BooleanPreview.tsx","../src/field/types/boolean/diff/BooleanFieldDiff.tsx","../src/field/diff/contexts/DocumentChangeContext.tsx","../src/field/diff/hooks/useDocumentChange.ts","../src/field/diff/hooks/useRefValue.ts","../src/field/types/file/diff/helpers.ts","../src/field/types/file/diff/FileFieldDiff.tsx","../src/field/types/image/diff/helpers.ts","../src/field/types/image/diff/HotspotCropSVG.tsx","../src/field/types/image/diff/ImagePreview.tsx","../src/field/types/image/diff/ImageFieldDiff.tsx","../src/field/types/number/preview/NumberPreview.tsx","../src/field/types/number/diff/NumberFieldDiff.tsx","../src/field/types/portableText/diff/components/Blockquote.tsx","../src/field/types/portableText/diff/components/Header.tsx","../src/field/types/portableText/diff/components/Paragraph.tsx","../src/field/types/portableText/diff/components/Block.tsx","../src/field/types/portableText/diff/components/styledComponents.tsx","../src/field/types/portableText/diff/components/Annotation.tsx","../src/field/types/portableText/diff/components/Decorator.tsx","../src/field/types/portableText/diff/components/InlineObject.tsx","../src/field/types/portableText/diff/components/Text.tsx","../src/field/types/portableText/diff/components/PortableText.tsx","../src/field/types/portableText/diff/PTDiff.tsx","../src/field/types/reference/preview/ReferencePreview.tsx","../src/field/types/reference/diff/ReferenceFieldDiff.tsx","../src/field/types/string/preview/StringPreview.tsx","../src/field/types/string/diff/StringFieldDiff.tsx","../src/field/diff/resolve/defaultComponents.ts","../src/field/diff/resolve/resolveDiffComponent.ts","../src/field/diff/helpers.ts","../src/field/diff/changes/buildChangeList.ts","../src/field/diff/changes/helpers.ts","../src/field/diff/changes/undoChange.ts","../src/conditional-property/conditionalReadOnly/ConditionalReadOnlyContext.ts","../src/conditional-property/conditionalReadOnly/useConditionalReadOnly.ts","../src/field/diff/components/DiffTooltip.tsx","../src/field/diff/components/DiffCard.tsx","../src/field/diff/components/ChangeTitleSegment.tsx","../src/field/diff/components/ChangeBreadcrumb.tsx","../src/field/diff/components/DiffErrorBoundary.tsx","../src/field/diff/components/FromToArrow.tsx","../src/field/diff/components/DiffInspectWrapper.tsx","../src/field/diff/components/FromTo.tsx","../src/field/diff/components/DiffFromTo.tsx","../src/field/diff/components/FallbackDiff.tsx","../src/field/diff/components/RevertChangesButton.tsx","../src/field/diff/components/ValueError.tsx","../src/field/diff/components/FieldChange.styled.tsx","../src/field/diff/components/FieldChange.tsx","../src/field/utils/useHover.ts","../src/field/diff/components/GroupChange.styled.tsx","../src/field/diff/components/GroupChange.tsx","../src/field/diff/components/ChangeResolver.tsx","../src/field/diff/components/NoChanges.tsx","../src/field/diff/components/ChangeList.styled.tsx","../src/field/diff/components/ChangeList.tsx","../src/field/diff/components/DiffString.tsx","../src/field/diff/components/MetaInfo.tsx","../src/field/types/datetime/preview/DatetimePreview.tsx","../src/field/types/slug/preview/SlugPreview.tsx","../src/desk/panes/document/timeline/constants.ts","../src/desk/panes/document/timeline/helpers.ts","../src/desk/panes/document/timeline/userAvatarStack.tsx","../src/desk/panes/document/timeline/timelineItem.styled.tsx","../src/desk/panes/document/timeline/timelineItem.tsx","../src/desk/panes/document/timeline/timeline.styled.tsx","../src/desk/panes/document/timeline/timeline.tsx","../src/desk/panes/document/DocumentPaneContext.ts","../src/desk/panes/document/useDocumentPane.tsx","../src/desk/panes/document/timeline/timelineMenu.tsx","../src/desk/panes/document/changesPanel/helpers.ts","../src/desk/panes/document/changesPanel/content/LoadingContent.tsx","../src/desk/panes/document/changesPanel/ChangesPanel.tsx","../src/desk/useDeskToolSetting.ts","../src/desk/panes/document/inspectDialog/constants.ts","../src/desk/panes/document/inspectDialog/helpers.ts","../src/desk/panes/document/inspectDialog/InspectDialog.styles.tsx","../src/desk/panes/document/inspectDialog/Search.tsx","../src/desk/panes/document/inspectDialog/InspectDialog.tsx","../src/desk/panes/document/documentPanel/ReferenceChangedBanner.tsx","../src/desk/panes/document/documentPanel/PermissionCheckBanner.tsx","../src/desk/panes/document/documentPanel/documentViews/FormView.tsx","../src/desk/panes/document/documentPanel/header/DocumentHeaderTabs.tsx","../src/components/validation/listItem.tsx","../src/components/validation/validationList.tsx","../src/desk/panes/document/documentPanel/header/ValidationMenu.tsx","../src/desk/panes/document/documentPanel/header/DocumentHeaderTitle.tsx","../src/desk/panes/document/documentPanel/header/DocumentPanelHeader.tsx","../src/desk/panes/document/documentPanel/DocumentPanel.tsx","../src/desk/panes/document/DocumentOperationResults.tsx","../src/desk/panes/document/statusBar/dialogs/constants.ts","../src/desk/panes/document/statusBar/dialogs/ConfirmDialog.tsx","../src/desk/panes/document/statusBar/dialogs/ModalDialog.tsx","../src/desk/panes/document/statusBar/dialogs/PopoverDialog.tsx","../src/desk/panes/document/statusBar/ActionStateDialog.tsx","../src/desk/panes/document/statusBar/ActionMenuButton.tsx","../src/desk/panes/document/statusBar/DocumentStatusBarActions.tsx","../src/desk/badges/RenderBadgeCollectionState.tsx","../src/desk/badges/documentBadges/LiveEditBadge.ts","../src/desk/panes/document/statusBar/sparkline/DocumentBadges.tsx","../src/desk/panes/document/statusBar/sparkline/PublishStatus.tsx","../src/desk/panes/document/statusBar/sparkline/ReviewChangesButton/AnimatedStatusIcon.tsx","../src/desk/panes/document/statusBar/sparkline/ReviewChangesButton/ReviewChangesButton.tsx","../src/desk/panes/document/statusBar/sparkline/DocumentSparkline.tsx","../src/desk/panes/document/statusBar/DocumentStatusBar.tsx","../src/desk/panes/document/keyboardShortcuts/DocumentActionShortcuts.tsx","../src/form/store/stateTreeHelper.ts","../src/form/store/utils/getExpandOperations.ts","../src/desk/panes/document/menuItems.ts","../src/desk/panes/document/usePreviewUrl.ts","../src/desk/panes/document/getInitialValueTemplateOpts.ts","../src/desk/panes/document/DocumentPaneProvider.tsx","../src/desk/panes/document/DocumentPane.tsx","../src/desk/components/deskTool/NoDocumentTypesScreen.tsx","../src/desk/components/deskTool/DeskTool.tsx","../src/desk/components/DocTitle.tsx","../src/desk/components/confirmDeleteDialog/useReferringDocuments.ts","../src/components/TextWithTone.tsx","../src/desk/components/TimeAgo.tsx","../src/desk/components/PublishedStatus.tsx","../src/desk/components/DraftStatus.tsx","../src/desk/components/paneItem/helpers.tsx","../src/desk/components/paneItem/PaneItemPreview.tsx","../src/desk/components/confirmDeleteDialog/ReferencePreviewLink.tsx","../src/desk/components/confirmDeleteDialog/ConfirmDeleteDialogBody.styles.tsx","../src/desk/components/confirmDeleteDialog/ConfirmDeleteDialogBody.tsx","../src/desk/components/confirmDeleteDialog/ConfirmDeleteDialog.tsx","../src/desk/components/confirmDeleteDialog/index.tsx","../src/desk/actions/documentActions/DeleteAction.tsx","../src/desk/actions/documentActions/DiscardChangesAction.tsx","../src/desk/actions/documentActions/DuplicateAction.tsx","../src/desk/actions/documentActions/HistoryRestoreAction.tsx","../src/desk/actions/documentActions/PublishAction.tsx","../src/desk/actions/documentActions/UnpublishAction.tsx","../src/config/configPropertyReducers.ts","../src/config/ConfigPropertyError.ts","../src/config/resolveConfigProperty.ts","../src/config/ConfigResolutionError.ts","../src/config/SchemaError.ts","../src/config/createDefaultIcon.tsx","../src/form/studio/inputs/client-adapters/reference.ts","../src/form/utils/isNonNullable.ts","../src/form/components/AlertStrip.tsx","../src/form/hooks/useOnClickOutside.ts","../src/form/inputs/ReferenceInput/useReferenceInfo.ts","../src/form/inputs/ReferenceInput/utils/TimeAgo.tsx","../src/form/inputs/ReferenceInput/ReferencePreview.tsx","../src/form/inputs/ReferenceInput/OptionPreview.tsx","../src/form/inputs/ReferenceInput/PreviewReferenceValue.tsx","../src/form/inputs/ReferenceInput/CreateButton.tsx","../src/form/inputs/ReferenceInput/ReferenceAutocomplete.tsx","../src/form/inputs/ReferenceInput/AutocompleteContainer.tsx","../src/form/inputs/ReferenceInput/ReferenceInput.tsx","../src/form/studio/inputs/reference/StudioReferenceInput.tsx","../src/form/studio/inputResolver/resolveReferenceInput.ts","../src/form/inputs/arrays/common/sortable.tsx","../src/form/inputs/arrays/common/list.tsx","../src/form/inputs/arrays/OptionsArrayInput/legacyOptionsSupport.tsx","../src/form/inputs/arrays/OptionsArrayInput/OptionsArrayInput.tsx","../src/form/components/tagInput/styles.ts","../src/form/components/tagInput/tagInput.tsx","../src/form/inputs/TagsArrayInput.tsx","../src/form/studio/utils/withMaxConcurrency.ts","../src/form/studio/inputs/client-adapters/assets.ts","../src/form/studio/uploads/image/readExif.ts","../src/form/studio/uploads/image/orient.ts","../src/form/studio/uploads/image/rotateImage.ts","../src/form/studio/uploads/constants.ts","../src/form/studio/uploads/utils.ts","../src/form/studio/uploads/uploadImage.ts","../src/form/studio/uploads/uploadFile.ts","../src/form/studio/uploads/uploaders.ts","../src/form/studio/uploads/accepts.ts","../src/form/studio/uploads/resolveUploader.ts","../src/schema/helpers.ts","../src/form/patch/arrayInsert.ts","../src/form/patch/array.ts","../src/form/patch/object.ts","../src/form/patch/primitive.ts","../src/form/patch/string.ts","../src/form/patch/applyPatch.ts","../src/form/components/withFocusRing/withFocusRing.ts","../src/form/inputs/common/fileTarget/utils/extractFiles.ts","../src/form/inputs/common/fileTarget/utils/imageUrlToBlob.ts","../src/form/inputs/common/fileTarget/fileTarget.tsx","../src/form/inputs/files/common/DropMessage.tsx","../src/form/inputs/arrays/ArrayOfObjectsInput/uploadTarget/styles.ts","../src/form/inputs/arrays/ArrayOfObjectsInput/uploadTarget/uploadTarget.tsx","../src/form/hooks/useScrollIntoViewOnFocusWithin.ts","../src/form/inputs/arrays/common/DragHandle.tsx","../src/form/inputs/arrays/ArrayOfObjectsInput/InsertMenu.tsx","../src/form/inputs/arrays/ArrayOfObjectsInput/item/components/RowWrapper.tsx","../src/form/inputs/arrays/ArrayOfObjectsInput/item/RowItem.tsx","../src/form/inputs/arrays/ArrayOfObjectsInput/item/CellItem.tsx","../src/form/inputs/arrays/ArrayOfObjectsInput/item/ArrayItem.tsx","../src/form/inputs/arrays/ArrayOfObjectsInput/ArrayInput.tsx","../src/form/inputs/arrays/ArrayOfPrimitivesInput/utils/nearestIndex.ts","../src/form/inputs/arrays/ArrayOfPrimitivesInput/ItemRow.tsx","../src/form/inputs/arrays/ArrayOfPrimitivesInput/ArrayOfPrimitivesFunctions.tsx","../src/form/inputs/arrays/ArrayOfPrimitivesInput/ArrayOfPrimitivesInput.tsx","../src/form/studio/inputs/StudioArrayInput.tsx","../src/form/studio/inputResolver/resolveArrayInput.ts","../src/form/inputs/SelectInput.tsx","../src/form/inputs/StringInput.tsx","../src/form/studio/inputResolver/resolveStringInput.ts","../src/form/utils/getValidationRule.ts","../src/form/inputs/NumberInput.tsx","../src/form/studio/inputResolver/resolveNumberInput.ts","../src/form/inputs/BooleanInput.tsx","../src/form/inputs/EmailInput.tsx","../src/form/inputs/ObjectInput/UnknownFields.tsx","../src/form/inputs/ObjectInput/ObjectInput.styled.tsx","../src/form/inputs/ObjectInput/fieldGroups/GroupTab.tsx","../src/form/inputs/ObjectInput/fieldGroups/FieldGroupTabs.tsx","../src/form/inputs/ObjectInput/ObjectInput.tsx","../src/form/inputs/DateInputs/base/calendar/CalendarDay.tsx","../src/form/inputs/DateInputs/base/calendar/constants.ts","../src/form/inputs/DateInputs/base/calendar/utils.ts","../src/form/inputs/DateInputs/base/calendar/CalendarMonth.tsx","../src/form/inputs/DateInputs/base/calendar/features.ts","../src/form/inputs/DateInputs/base/LazyTextInput.tsx","../src/form/inputs/DateInputs/base/calendar/YearInput.tsx","../src/form/inputs/DateInputs/base/calendar/Calendar.tsx","../src/form/inputs/DateInputs/base/DatePicker.tsx","../src/form/inputs/DateInputs/base/DateTimeInput.tsx","../src/form/inputs/DateInputs/CommonDateTimeInput.tsx","../src/form/inputs/DateInputs/utils.ts","../src/form/inputs/DateInputs/DateTimeInput.tsx","../src/form/inputs/DateInputs/DateInput.tsx","../src/form/inputs/TextInput.tsx","../src/form/inputs/UrlInput.tsx","../src/form/inputs/Slug/utils/slugify.ts","../src/form/inputs/Slug/utils/useAsync.tsx","../src/form/inputs/Slug/SlugInput.tsx","../src/form/inputs/files/common/FileInputButton/styles.ts","../src/form/inputs/files/common/FileInputButton/FileInputButton.tsx","../src/form/inputs/files/common/PlaceholderText.tsx","../src/form/inputs/files/common/UploadPlaceholder.tsx","../src/form/utils/WithReferencedAsset.tsx","../src/form/inputs/files/common/styles.ts","../src/form/inputs/files/common/UploadProgress.styled.tsx","../src/form/inputs/files/common/UploadProgress.tsx","../src/form/inputs/files/ImageInput/utils/image.ts","../src/form/inputs/files/common/assetSource.ts","../src/form/inputs/files/common/FileInputMenuItem/FileInputMenuItem.styled.tsx","../src/form/inputs/files/common/FileInputMenuItem/FileInputMenuItem.tsx","../src/form/inputs/files/common/ActionsMenu.tsx","../src/form/inputs/files/common/UploadWarning.tsx","../src/form/inputs/files/common/RatioBox.tsx","../src/form/inputs/files/ImageToolInput/imagetool/ImageLoader.tsx","../src/form/inputs/files/ImageToolInput/imagetool/getBackingStoreRatio.ts","../src/form/inputs/files/ImageToolInput/imagetool/2d/utils.ts","../src/form/inputs/files/ImageToolInput/imagetool/2d/shapes.ts","../src/form/inputs/files/ImageToolInput/imagetool/makeDragAware.tsx","../src/form/inputs/files/ImageToolInput/imagetool/ToolCanvas.styles.tsx","../src/form/inputs/files/ImageToolInput/imagetool/cursors.ts","../src/form/inputs/files/ImageToolInput/imagetool/constants.ts","../src/form/inputs/files/ImageToolInput/imagetool/ToolCanvas.tsx","../src/form/inputs/files/ImageToolInput/imagetool/Resize.tsx","../src/form/inputs/files/ImageToolInput/imagetool/ImageTool.tsx","../src/form/inputs/files/ImageToolInput/imagetool/calculateStyles.ts","../src/form/inputs/files/ImageToolInput/imagetool/HotspotImage.styles.tsx","../src/form/inputs/files/ImageToolInput/imagetool/HotspotImage.tsx","../src/form/inputs/files/ImageToolInput/useLoadImage.ts","../src/form/inputs/files/ImageToolInput/ImageToolInput.tsx","../src/form/inputs/files/ImageInput/ImageActionsMenu.styled.tsx","../src/form/inputs/files/ImageInput/ImageActionsMenu.tsx","../src/form/inputs/files/ImageInput/ImagePreview.styled.tsx","../src/form/inputs/files/ImageInput/ImagePreview.tsx","../src/form/inputs/files/ImageInput/InvalidImageWarning.tsx","../src/form/inputs/files/ImageInput/ImageInput.tsx","../src/form/studio/inputs/StudioImageInput.tsx","../src/form/inputs/files/FileInput/styles.ts","../src/form/inputs/common/helper.ts","../src/form/inputs/files/FileInput/FileDetails.tsx","../src/form/inputs/files/FileInput/FileSkeleton.tsx","../src/form/inputs/files/FileInput/InvalidFileWarning.tsx","../src/form/inputs/files/FileInput/FileInput.tsx","../src/form/studio/inputs/StudioFileInput.tsx","../src/form/inputs/CrossDatasetReferenceInput/useReferenceInfo.ts","../src/form/inputs/CrossDatasetReferenceInput/CrossDatasetReferencePreview.tsx","../src/form/inputs/CrossDatasetReferenceInput/OptionPreview.tsx","../src/form/inputs/CrossDatasetReferenceInput/PreviewReferenceValue.tsx","../src/form/inputs/CrossDatasetReferenceInput/ReferenceAutocomplete.tsx","../src/form/inputs/CrossDatasetReferenceInput/PreviewCard.tsx","../src/form/inputs/CrossDatasetReferenceInput/CrossDatasetReferenceInput.tsx","../src/form/studio/inputs/crossDatasetReference/datastores/search.ts","../src/form/studio/inputs/crossDatasetReference/datastores/getReferenceInfo.ts","../src/form/studio/inputs/crossDatasetReference/datastores/useCrossProjectToken.ts","../src/form/studio/inputs/crossDatasetReference/StudioCrossDatasetReferenceInput.tsx","../src/form/studio/inputResolver/defaultInputs.ts","../src/form/studio/inputResolver/inputResolver.tsx","../src/form/studio/defaults.ts","../src/config/form/_renderField.ts","../src/config/form/_renderInput.ts","../src/config/form/_renderItem.ts","../src/config/form/_renderPreview.ts","../src/config/prepareConfig.ts"],"sourcesContent":["// This string is overwritten by prepublish script with `.version` from package.json\n// The version you see here is only read in monorepo development\nexport const SANITY_VERSION = '0.0.0-development' as string\n","export default {\n  title: 'Slug',\n  name: 'slug',\n  type: 'object',\n  fields: [\n    {\n      name: 'current',\n      title: 'Current slug',\n      type: 'string',\n    },\n    {\n      // The source field is deprecated/unused, but leaving it included and hidden\n      // to prevent rendering \"Unknown field\" warnings on legacy data\n      name: 'source',\n      title: 'Source field',\n      type: 'string',\n      hidden: true,\n    },\n  ],\n}\n","export default {\n  title: 'Geographical Point',\n  name: 'geopoint',\n  type: 'object',\n  fields: [\n    {\n      name: 'lat',\n      type: 'number',\n      title: 'Latitude',\n    },\n    {\n      name: 'lng',\n      type: 'number',\n      title: 'Longitude',\n    },\n    {\n      name: 'alt',\n      type: 'number',\n      title: 'Altitude',\n    },\n  ],\n}\n","export default {\n  name: 'sanity.imageCrop',\n  title: 'Image crop',\n  type: 'object',\n  fields: [\n    {\n      name: 'top',\n      type: 'number',\n    },\n    {\n      name: 'bottom',\n      type: 'number',\n    },\n    {\n      name: 'left',\n      type: 'number',\n    },\n    {\n      name: 'right',\n      type: 'number',\n    },\n  ],\n}\n","export default {\n  name: 'sanity.imageHotspot',\n  title: 'Image hotspot',\n  type: 'object',\n  fields: [\n    {\n      name: 'x',\n      type: 'number',\n    },\n    {\n      name: 'y',\n      type: 'number',\n    },\n    {\n      name: 'height',\n      type: 'number',\n    },\n    {\n      name: 'width',\n      type: 'number',\n    },\n  ],\n}\n","export default {\n  name: 'sanity.assetSourceData',\n  title: 'Asset Source Data',\n  type: 'object',\n  fields: [\n    {\n      name: 'name',\n      title: 'Source name',\n      description: 'A canonical name for the source this asset is originating from',\n      type: 'string',\n    },\n    {\n      name: 'id',\n      title: 'Asset Source ID',\n      description:\n        'The unique ID for the asset within the originating source so you can programatically find back to it',\n      type: 'string',\n    },\n    {\n      name: 'url',\n      title: 'Asset information URL',\n      description: 'A URL to find more information about this asset in the originating source',\n      type: 'string',\n    },\n  ],\n}\n","import {SanityDocument} from '@sanity/types'\n\nexport default {\n  name: 'sanity.imageAsset',\n  title: 'Image',\n  type: 'document',\n  fieldsets: [\n    {\n      name: 'system',\n      title: 'System fields',\n      description: 'These fields are managed by the system and not editable',\n    },\n  ],\n  fields: [\n    {\n      name: 'originalFilename',\n      type: 'string',\n      title: 'Original file name',\n      readOnly: true,\n    },\n    {\n      name: 'label',\n      type: 'string',\n      title: 'Label',\n    },\n    {\n      name: 'title',\n      type: 'string',\n      title: 'Title',\n    },\n    {\n      name: 'description',\n      type: 'string',\n      title: 'Description',\n    },\n    {\n      name: 'altText',\n      type: 'string',\n      title: 'Alternative text',\n    },\n    {\n      name: 'sha1hash',\n      type: 'string',\n      title: 'SHA1 hash',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'extension',\n      type: 'string',\n      readOnly: true,\n      title: 'File extension',\n      fieldset: 'system',\n    },\n    {\n      name: 'mimeType',\n      type: 'string',\n      readOnly: true,\n      title: 'Mime type',\n      fieldset: 'system',\n    },\n    {\n      name: 'size',\n      type: 'number',\n      title: 'File size in bytes',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'assetId',\n      type: 'string',\n      title: 'Asset ID',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'uploadId',\n      type: 'string',\n      readOnly: true,\n      hidden: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'path',\n      type: 'string',\n      title: 'Path',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'url',\n      type: 'string',\n      title: 'Url',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'metadata',\n      type: 'sanity.imageMetadata',\n      title: 'Metadata',\n    },\n    {\n      name: 'source',\n      type: 'sanity.assetSourceData',\n      title: 'Source',\n      readOnly: true,\n      fieldset: 'system',\n    },\n  ],\n  preview: {\n    select: {\n      id: '_id',\n      title: 'originalFilename',\n      mimeType: 'mimeType',\n      size: 'size',\n    },\n    prepare(doc: Partial<SanityDocument>) {\n      return {\n        title: doc.title || (typeof doc.path === 'string' && doc.path.split('/').slice(-1)[0]),\n        media: {asset: {_ref: doc.id}},\n        subtitle: `${doc.mimeType} (${(Number(doc.size) / 1024 / 1024).toFixed(2)} MB)`,\n      }\n    },\n  },\n  orderings: [\n    {\n      title: 'File size',\n      name: 'fileSizeDesc',\n      by: [{field: 'size', direction: 'desc'}],\n    },\n  ],\n}\n","export default {\n  name: 'sanity.imagePalette',\n  title: 'Image palette',\n  type: 'object',\n  fields: [\n    {name: 'darkMuted', type: 'sanity.imagePaletteSwatch', title: 'Dark Muted'},\n    {name: 'lightVibrant', type: 'sanity.imagePaletteSwatch', title: 'Light Vibrant'},\n    {name: 'darkVibrant', type: 'sanity.imagePaletteSwatch', title: 'Dark Vibrant'},\n    {name: 'vibrant', type: 'sanity.imagePaletteSwatch', title: 'Vibrant'},\n    {name: 'dominant', type: 'sanity.imagePaletteSwatch', title: 'Dominant'},\n    {name: 'lightMuted', type: 'sanity.imagePaletteSwatch', title: 'Light Muted'},\n    {name: 'muted', type: 'sanity.imagePaletteSwatch', title: 'Muted'},\n  ],\n}\n","export default {\n  name: 'sanity.imagePaletteSwatch',\n  title: 'Image palette swatch',\n  type: 'object',\n  fields: [\n    {name: 'background', type: 'string', title: 'Background', readOnly: true},\n    {name: 'foreground', type: 'string', title: 'Foreground', readOnly: true},\n    {name: 'population', type: 'number', title: 'Population', readOnly: true},\n    {name: 'title', type: 'string', title: 'String', readOnly: true},\n  ],\n}\n","export default {\n  name: 'sanity.imageDimensions',\n  type: 'object',\n  title: 'Image dimensions',\n  fields: [\n    {name: 'height', type: 'number', title: 'Height', readOnly: true},\n    {name: 'width', type: 'number', title: 'Width', readOnly: true},\n    {name: 'aspectRatio', type: 'number', title: 'Aspect ratio', readOnly: true},\n  ],\n}\n","export default {\n  name: 'sanity.imageMetadata',\n  title: 'Image metadata',\n  type: 'object',\n  fieldsets: [\n    {\n      name: 'extra',\n      title: 'Extra metadata…',\n      options: {\n        collapsable: true,\n      },\n    },\n  ],\n  fields: [\n    {\n      name: 'location',\n      type: 'geopoint',\n    },\n    {\n      name: 'dimensions',\n      title: 'Dimensions',\n      type: 'sanity.imageDimensions',\n      fieldset: 'extra',\n    },\n    {\n      name: 'palette',\n      type: 'sanity.imagePalette',\n      title: 'Palette',\n      fieldset: 'extra',\n    },\n    {\n      name: 'lqip',\n      title: 'LQIP (Low-Quality Image Placeholder)',\n      type: 'string',\n      readOnly: true,\n    },\n    {\n      name: 'blurHash',\n      title: 'BlurHash',\n      type: 'string',\n      readOnly: true,\n    },\n    {\n      name: 'hasAlpha',\n      title: 'Has alpha channel',\n      type: 'boolean',\n      readOnly: true,\n    },\n    {\n      name: 'isOpaque',\n      title: 'Is opaque',\n      type: 'boolean',\n      readOnly: true,\n    },\n  ],\n}\n","import {SanityDocument} from '@sanity/client'\n\nexport default {\n  name: 'sanity.fileAsset',\n  title: 'File',\n  type: 'document',\n  fieldsets: [\n    {\n      name: 'system',\n      title: 'System fields',\n      description: 'These fields are managed by the system and not editable',\n    },\n  ],\n  fields: [\n    {\n      name: 'originalFilename',\n      type: 'string',\n      title: 'Original file name',\n      readOnly: true,\n    },\n    {\n      name: 'label',\n      type: 'string',\n      title: 'Label',\n    },\n    {\n      name: 'title',\n      type: 'string',\n      title: 'Title',\n    },\n    {\n      name: 'description',\n      type: 'string',\n      title: 'Description',\n    },\n    {\n      name: 'altText',\n      type: 'string',\n      title: 'Alternative text',\n    },\n    {\n      name: 'sha1hash',\n      type: 'string',\n      title: 'SHA1 hash',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'extension',\n      type: 'string',\n      title: 'File extension',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'mimeType',\n      type: 'string',\n      title: 'Mime type',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'size',\n      type: 'number',\n      title: 'File size in bytes',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'assetId',\n      type: 'string',\n      title: 'Asset ID',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'path',\n      type: 'string',\n      title: 'Path',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'url',\n      type: 'string',\n      title: 'Url',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'source',\n      type: 'sanity.assetSourceData',\n      title: 'Source',\n      readOnly: true,\n      fieldset: 'system',\n    },\n  ],\n  preview: {\n    select: {\n      title: 'originalFilename',\n      path: 'path',\n      mimeType: 'mimeType',\n      size: 'size',\n    },\n    prepare(doc: Partial<SanityDocument>) {\n      return {\n        title: doc.title || doc.path.split('/').slice(-1)[0],\n        subtitle: `${doc.mimeType} (${(doc.size / 1024 / 1024).toFixed(2)} MB)`,\n      }\n    },\n  },\n  orderings: [\n    {\n      title: 'File size',\n      name: 'fileSizeDesc',\n      by: [{field: 'size', direction: 'desc'}],\n    },\n  ],\n}\n","import SchemaBuilder, {type SchemaValidationResult} from '@sanity/schema'\nimport {validateSchema, groupProblems} from '@sanity/schema/_internal'\nimport {Schema} from '@sanity/types'\nimport {inferFromSchema as inferValidation} from '@sanity/validation'\nimport slug from './types/slug'\nimport geopoint from './types/geopoint'\nimport imageCrop from './types/imageCrop'\nimport imageHotspot from './types/imageHotspot'\nimport assetSourceData from './types/assetSourceData'\nimport imageAsset from './types/imageAsset'\nimport imagePalette from './types/imagePalette'\nimport imagePaletteSwatch from './types/imagePaletteSwatch'\nimport imageDimensions from './types/imageDimensions'\nimport imageMetadata from './types/imageMetadata'\nimport fileAsset from './types/fileAsset'\n\nconst isError = (problem: SchemaValidationResult) => problem.severity === 'error'\n\nconst builtinTypes = [\n  assetSourceData,\n  slug,\n  geopoint,\n  // legacyRichDate,\n  imageAsset,\n  fileAsset,\n  imageCrop,\n  imageHotspot,\n  imageMetadata,\n  imageDimensions,\n  imagePalette,\n  imagePaletteSwatch,\n]\n\nexport function createSchema(schemaDef: {name: string; types: any[]}): Schema {\n  const validated = validateSchema(schemaDef.types).getTypes()\n  const validation = groupProblems(validated)\n  const hasErrors = validation.some((group) => group.problems.some(isError))\n\n  const compiled = SchemaBuilder.compile({\n    name: schemaDef.name,\n    types: hasErrors ? [] : [...schemaDef.types, ...builtinTypes].filter(Boolean),\n  })\n\n  // ;(compiled as any)._source = schemaDef\n  ;(compiled as any)._validation = validation\n\n  return inferValidation(compiled as Schema)\n}\n","export interface CorsOriginErrorOptions {\n  projectId?: string\n}\n\nexport class CorsOriginError extends Error {\n  projectId?: string\n\n  constructor({projectId}: CorsOriginErrorOptions) {\n    super('CorsOriginError')\n    this.projectId = projectId\n  }\n}\n","import {isEqual} from 'lodash'\nimport {useRef} from 'react'\n\n/**\n * This React hook should be considered an escape hatch – to make sure that a value is the same\n * on every render. SHOULD NOT BE USED IN MOST CASES.\n *\n * @internal\n */\nexport function useUnique<ValueType>(value: ValueType): ValueType {\n  const valueRef = useRef<ValueType>(value)\n\n  if (!isEqual(valueRef.current, value)) {\n    valueRef.current = value\n  }\n\n  return valueRef.current\n}\n","import {useAsObservable, useObservable} from 'react-rx'\nimport {concat, Observable, of} from 'rxjs'\nimport {catchError, distinctUntilChanged, map, scan, switchMap} from 'rxjs/operators'\nimport shallowEquals from 'shallow-equals'\nimport {useUnique} from './useUnique'\n\nexport type LoadingTuple<T> = [T, boolean]\n\ntype ReactHook<TArgs extends unknown[], TResult> = (...args: TArgs) => TResult\n\ninterface CreateHookFromObservableFactoryOptions<T, TArgs extends unknown[]> {\n  /**\n   * Optionally provide an initial value that will show up initially if the\n   * observable resolves asynchronously. Prevents `undefined` as the initial\n   * value.\n   */\n  initialValue: T\n  /**\n   * Optionally provide a comparison function passed into `distinctUntilEqual`\n   * used for args comparison. The default function shallowly compares each\n   * argument.\n   */\n  argsAreEqual?: (prev: TArgs, next: TArgs) => boolean\n}\n\nfunction defaultArgsAreEqual<TArgs extends unknown[]>(prev: TArgs, next: TArgs) {\n  if (prev.length !== next.length) return false\n\n  for (let i = 0; i < next.length; i++) {\n    if (!shallowEquals(prev[i], next[i])) return false\n  }\n  return true\n}\n\n// overloads to handle types where an initial value is passed\nexport function createHookFromObservableFactory<T, TArgs extends unknown[]>(\n  observableFactory: (...args: TArgs) => Observable<T>,\n  options: CreateHookFromObservableFactoryOptions<T, TArgs>\n): ReactHook<TArgs, LoadingTuple<T>>\nexport function createHookFromObservableFactory<T, TArgs extends unknown[]>(\n  observableFactory: (...args: TArgs) => Observable<T>,\n  options: CreateHookFromObservableFactoryOptions<T | undefined, TArgs>\n): ReactHook<TArgs, LoadingTuple<T | undefined>>\nexport function createHookFromObservableFactory<T, TArgs extends unknown[]>(\n  observableFactory: (...args: TArgs) => Observable<T>,\n  options?: CreateHookFromObservableFactoryOptions<T | undefined, TArgs>\n): ReactHook<TArgs, LoadingTuple<T | undefined>>\n\n/**\n * A function that will create a hook from a function that returns an\n * observable. The parameters of the hook will be the parameters of the function\n * and the return of the hook will be a loading tuple with the value of the\n * observable at the first index and a boolean with the loading state as the\n * second index.\n *\n * The loading state will become true as soon as new incoming args are given and\n * will flip to false when the observable from the function emits the next\n * value.\n */\nexport function createHookFromObservableFactory<T, TArgs extends unknown[]>(\n  observableFactory: (...args: TArgs) => Observable<T>,\n  options?: CreateHookFromObservableFactoryOptions<T | undefined, TArgs>\n): ReactHook<TArgs, LoadingTuple<T | undefined>> {\n  const {initialValue, argsAreEqual = defaultArgsAreEqual} = options || {}\n  const initialLoadingTuple: LoadingTuple<T | undefined> = [initialValue, true]\n\n  const asLoadingTuple = (args$: Observable<TArgs>) =>\n    args$.pipe(\n      distinctUntilChanged(argsAreEqual),\n      switchMap((distinctArgs) =>\n        concat(\n          of({type: 'loading'} as const),\n          observableFactory(...distinctArgs).pipe(map((value) => ({type: 'value', value} as const)))\n        )\n      ),\n      scan(([prevValue], next): LoadingTuple<T | undefined> => {\n        if (next.type === 'loading') return [prevValue, true]\n        return [next.value, false]\n      }, initialLoadingTuple),\n      distinctUntilChanged(([prevValue, prevIsLoading], [nextValue, nextIsLoading]) => {\n        if (prevValue !== nextValue) return false\n        if (prevIsLoading !== nextIsLoading) return false\n        return true\n      }),\n      map((tuple) => ({type: 'tuple', tuple} as const)),\n      catchError((error) => of({type: 'error', error} as const))\n    )\n\n  return function useLoadableFromCreateLoadable(...args) {\n    const _args = useUnique(args)\n    const tuple$ = useAsObservable(_args, asLoadingTuple)\n    const result = useObservable(tuple$, {type: 'tuple', tuple: initialLoadingTuple})\n\n    if (result.type === 'error') throw result.error\n\n    return result.tuple\n  }\n}\n","/**\n * @internal\n */\nexport function isNonNullable<T>(value: T): value is NonNullable<T> {\n  return value !== null && value !== undefined\n}\n","import {SanityDocument} from '@sanity/types'\nimport {isNonNullable} from './isNonNullable'\n\n// nominal/opaque type hack\nexport type Opaque<T, K> = T & {__opaqueId__: K}\n\nexport type DraftId = Opaque<string, 'draftId'>\nexport type PublishedId = Opaque<string, 'publishedId'>\n\nexport const DRAFTS_FOLDER = 'drafts'\nconst DRAFTS_PREFIX = `${DRAFTS_FOLDER}.`\n\nexport function isDraft(document: SanityDocument): boolean {\n  return isDraftId(document._id)\n}\n\nexport function isDraftId(id: string): id is DraftId {\n  return id.startsWith(DRAFTS_PREFIX)\n}\n\nexport function getIdPair(id: string): {draftId: DraftId; publishedId: PublishedId} {\n  return {\n    draftId: getDraftId(id),\n    publishedId: getPublishedId(id),\n  }\n}\n\nexport function isPublishedId(id: string): id is PublishedId {\n  return !isDraftId(id)\n}\n\nexport function getDraftId(id: string): DraftId {\n  return isDraftId(id) ? id : ((DRAFTS_PREFIX + id) as DraftId)\n}\n\nexport function getPublishedId(id: string): PublishedId {\n  return (isDraftId(id) ? id.slice(DRAFTS_PREFIX.length) : id) as PublishedId\n}\n\nexport function createDraftFrom(document: SanityDocument): SanityDocument {\n  return {\n    ...document,\n    _id: getDraftId(document._id),\n  }\n}\n\nexport function newDraftFrom(document: SanityDocument): SanityDocument {\n  return {\n    ...document,\n    _id: DRAFTS_PREFIX,\n  }\n}\n\nexport function createPublishedFrom(document: SanityDocument): SanityDocument {\n  return {\n    ...document,\n    _id: getPublishedId(document._id),\n  }\n}\n\n/**\n * Takes a list of documents and collates draft/published pairs into single entries\n * `{id: <published id>, draft?: <draft document>, published?: <published document>}`\n *\n * Note: because Map is ordered by insertion key the resulting array will be ordered by whichever\n * version appeared first\n */\nexport interface CollatedHit<T extends {_id: string} = {_id: string}> {\n  id: string\n  type: string\n  draft?: T\n  published?: T\n}\n\nexport function collate<T extends {_id: string; _type: string}>(documents: T[]): CollatedHit<T>[] {\n  const byId = documents.reduce((res, doc) => {\n    const publishedId = getPublishedId(doc._id)\n    let entry = res.get(publishedId)\n    if (!entry) {\n      entry = {id: publishedId, type: doc._type, published: undefined, draft: undefined}\n      res.set(publishedId, entry)\n    }\n\n    entry[publishedId === doc._id ? 'published' : 'draft'] = doc\n    return res\n  }, new Map())\n\n  return Array.from(byId.values())\n}\n\n// Removes published documents that also has a draft\nexport function removeDupes(documents: SanityDocument[]): SanityDocument[] {\n  return collate(documents)\n    .map((entry) => entry.draft || entry.published)\n    .filter(isNonNullable)\n}\n","/**\n * @internal\n */\nexport function isRecord(value: unknown): value is Record<string, unknown> {\n  return Boolean(value) && typeof value === 'object' && !Array.isArray(value)\n}\n","export function isString(value: unknown): value is string {\n  return typeof value === 'string'\n}\n","import {ResizeObserver as Polyfill, ResizeObserverEntry} from '@juggle/resize-observer'\nimport createPubSub, {Subscriber} from 'nano-pubsub'\n\nconst ResizeObserver: typeof Polyfill =\n  typeof document === 'object' && typeof window === 'object' && window.ResizeObserver\n    ? window.ResizeObserver\n    : Polyfill\n\nexport interface SharedResizeObserver {\n  observe: (\n    element: Element,\n    observer: Subscriber<ResizeObserverEntry>,\n    options?: ResizeObserverOptions\n  ) => () => void\n}\n\nexport const createSharedResizeObserver = (): SharedResizeObserver => {\n  const event = createPubSub<ResizeObserverEntry[]>()\n\n  const resizeObserver = new ResizeObserver((entries: ResizeObserverEntry[]) =>\n    event.publish(entries)\n  )\n\n  return {\n    observe: (\n      element: Element,\n      observer: Subscriber<ResizeObserverEntry>,\n      options?: ResizeObserverOptions\n    ) => {\n      const unsubscribe = event.subscribe((entries) => {\n        const entry = entries.find((e) => e.target === element)\n        if (entry) {\n          observer(entry)\n        }\n      })\n\n      resizeObserver.observe(element, options)\n\n      return () => {\n        unsubscribe()\n        resizeObserver.unobserve(element)\n      }\n    },\n  }\n}\n\nexport const resizeObserver = createSharedResizeObserver()\n","import {Schema} from '@sanity/types'\n\nconst BUNDLED_DOC_TYPES = ['sanity.imageAsset', 'sanity.fileAsset']\n\n/**\n * @internal\n */\nexport function _isSanityDocumentTypeDefinition(\n  def: Schema.TypeDefinition\n): def is Schema.TypeDefinition<'document'> {\n  return def.type === 'document' && BUNDLED_DOC_TYPES.includes(def.name)\n}\n\n/**\n * @internal\n */\nexport function _isCustomDocumentTypeDefinition(\n  def: Schema.TypeDefinition\n): def is Schema.TypeDefinition<'document'> {\n  return def.type === 'document' && !_isSanityDocumentTypeDefinition(def)\n}\n","type SearchPathSegment = string | []\n\nconst GROQ_KEYWORDS = ['match', 'in', 'asc', 'desc', 'true', 'false', 'null']\nconst VALID_FIELD = /^[a-zA-Z_][a-zA-Z0-9_]*$/\n\nexport const fieldNeedsEscape = (fieldName: string): boolean =>\n  !VALID_FIELD.test(fieldName) || GROQ_KEYWORDS.includes(fieldName)\n\nexport const escapeField = (fieldName: string): string => `[\"${fieldName}\"]`\n\nconst escapeFirst = (fieldName: string): string => `@${escapeField(fieldName)}`\n\nconst isEmptyArray = (value: unknown): value is [] => Array.isArray(value) && value.length === 0\n\nexport const joinPath = (pathArray: SearchPathSegment[]): string => {\n  let path = ''\n  for (let i = 0; i < pathArray.length; i++) {\n    const pathSegment = pathArray[i]\n    if (isEmptyArray(pathSegment)) {\n      path += `[]`\n      continue\n    }\n\n    const isFirst = i === 0\n    const needsEscape = fieldNeedsEscape(pathSegment)\n\n    if (needsEscape) {\n      path = isFirst ? escapeFirst(pathSegment) : `${path}${escapeField(pathSegment)}`\n    } else {\n      path = isFirst ? pathSegment : `${path}.${pathSegment}`\n    }\n  }\n\n  return path\n}\n","import {useMemoObservable} from 'react-rx'\nimport {Observable, of, OperatorFunction} from 'rxjs'\nimport {catchError, map} from 'rxjs/operators'\n\nexport type LoadableState<T> = LoadingState | LoadedState<T> | ErrorState\n\nexport interface LoadingState {\n  value: undefined\n  error: null\n  isLoading: true\n}\n\nexport interface LoadedState<T> {\n  value: T\n  error: null\n  isLoading: false\n}\n\nexport interface ErrorState {\n  value: undefined\n  error: Error\n  isLoading: false\n}\n\nconst LOADING_STATE: LoadingState = {\n  isLoading: true,\n  value: undefined,\n  error: null,\n}\n\nexport function useLoadable<T>(value$: Observable<T>): LoadableState<T | undefined>\nexport function useLoadable<T>(value$: Observable<T>, initialValue: T): LoadableState<T>\nexport function useLoadable<T>(\n  value$: Observable<T>,\n  initialValue?: T\n): LoadableState<T | undefined> {\n  const initial: LoadableState<T> =\n    typeof initialValue === 'undefined'\n      ? LOADING_STATE\n      : {isLoading: false, value: initialValue, error: null}\n\n  return useMemoObservable(() => value$.pipe(asLoadable()), [value$], initial)\n}\n\nexport function asLoadable<T>(): OperatorFunction<T, LoadableState<T>> {\n  return (value$: Observable<T>) =>\n    value$.pipe(\n      map((value) => ({isLoading: false, value, error: null} as const)),\n      catchError((error): Observable<ErrorState> => of({isLoading: false, value: undefined, error}))\n    )\n}\n","import {throttle} from 'lodash'\nimport type {ThrottleSettings} from 'lodash'\nimport {useEffect, useMemo} from 'react'\n\n/**\n * @internal\n *\n * @example\n * ```tsx\n * // First create a callback using React’s `useCallback` hook\n * const myCallback = useCallback(() => {\n *   // this is not throttled\n * }, [])\n *\n * // Then make a throttled version using the `useThrottledCallback` hook\n * const myThrottledCallback = useThrottledCallback(myCallback, 100)\n *\n * // Call the throttled callback\n * <Button onClick={myThrottledCallback} />\n * ```\n */\nexport function useThrottledCallback(\n  callback: (...args: any[]) => any,\n  wait: number,\n  options: ThrottleSettings\n): (...args: any[]) => any {\n  const throttledCallback = useMemo(\n    () => throttle(callback, wait, options),\n    [callback, options, wait]\n  )\n\n  useEffect(\n    () => () => {\n      // cleanup: invoke the last value\n      throttledCallback.flush()\n    },\n    [throttledCallback]\n  )\n\n  return throttledCallback\n}\n","const supportsLocalStorage = (() => {\n  const key = '__tmp_supports_local_storage'\n\n  try {\n    if (typeof localStorage === 'undefined') {\n      return false\n    }\n\n    localStorage.setItem(key, '---')\n    localStorage.removeItem(key)\n    return true\n  } catch (err) {\n    return false\n  }\n})()\n\nconst memStore: Record<string, string> = {}\n\nexport function setItem(key: string, value: string): void {\n  if (supportsLocalStorage) {\n    localStorage[key] = value\n  } else {\n    memStore[key] = value\n  }\n}\n\nexport function getItem(key: string): string | undefined {\n  return supportsLocalStorage ? localStorage[key] : memStore[key]\n}\n\nexport function removeItem(key: string): void {\n  if (supportsLocalStorage) {\n    localStorage.removeItem(key)\n  } else {\n    delete memStore[key]\n  }\n}\n","import {fromEvent, merge, Observable, of, Subject} from 'rxjs'\nimport {filter, map, shareReplay} from 'rxjs/operators'\nimport {isNonNullable} from '../../util'\nimport * as storage from './storage'\n\nexport interface BroadcastChannel<T> {\n  messages: Observable<T>\n  broadcast: (message: T) => void\n}\n\nexport function createBroadcastChannel<T>(namespace: string): BroadcastChannel<T> {\n  const storageEvents$ =\n    typeof window === 'undefined'\n      ? of<StorageEvent>() // No storage events in non-browser environments\n      : fromEvent<StorageEvent>(window, 'storage')\n\n  const storageKey = `__studio_local_storage_messaging_${namespace}`\n\n  // note: the the `storageEvents$` stream does not emit for the current\n  // window/tab. this subject is used to re-broadcast messages broadcast outward\n  // to itself\n  const broadcastedMessages$ = new Subject<T>()\n\n  const messages$ = merge(\n    broadcastedMessages$,\n    storageEvents$.pipe(\n      filter((event) => event.key === storageKey),\n      map((event) => event.newValue),\n      filter(isNonNullable),\n      map((newValue) => JSON.parse(newValue))\n    )\n  ).pipe(\n    // this is important to ensure all new subscribers get a message on subscribe\n    shareReplay(1)\n  )\n\n  function broadcast(message: T) {\n    try {\n      storage.setItem(storageKey, JSON.stringify(message))\n      // clear the value afterwards so that next message will still emit a\n      // new event even if it's identical to the previous one\n      storage.removeItem(storageKey)\n\n      broadcastedMessages$.next(message)\n    } catch (err) {\n      // intentional noop\n    }\n  }\n\n  return {messages: messages$, broadcast}\n}\n","const sidPattern = /sid=[^&]{20,}/\n\nfunction consumeSessionId(): string | null {\n  // Are we in a browser-like environment?\n  if (typeof window === 'undefined' || typeof window.location !== 'object') {\n    return null\n  }\n\n  // Does the hash contain a valid session ID?\n  const hash = window.location.hash\n  const [sidParam] = hash.match(sidPattern) || []\n  if (!sidParam) {\n    return null\n  }\n\n  // Extract just the sid from the hash\n  const sid = sidParam.slice(sidParam.indexOf('=') + 1)\n\n  // Remove the parameter from the URL\n  const newHash = hash.replace(sidPattern, '')\n  const newUrl = new URL(window.location.href)\n  newUrl.hash = newHash.length > 1 ? newHash : ''\n  history.replaceState(null, '', newUrl)\n\n  return sid\n}\n\n// this module consumes the session ID as a side-effect as soon as its loaded\n// to remove the session ID from the history (vs waiting to remove the sid hash\n// until react mounts)\nexport const sessionId = consumeSessionId()\n","import {Theme} from '@sanity/ui'\nimport React from 'react'\nimport styled, {css} from 'styled-components'\nimport {AuthProvider} from './createAuthStore'\n\nconst GithubRoot = styled.svg(({theme}: {theme: Theme}) => {\n  const {fg} = theme.sanity.color.base\n\n  return css`\n    fill: ${fg};\n  `\n})\n\nconst GithubLogo = () => (\n  <GithubRoot\n    // data-sanity-icon=\"google-logo\"\n    width=\"1em\"\n    height=\"1em\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 438.55 438.55\"\n  >\n    <path d=\"M409.13 114.57a218.32 218.32 0 0 0-79.8-79.8Q278.94 5.36 219.27 5.36T109.21 34.77a218.29 218.29 0 0 0-79.8 79.8Q0 165 0 224.63q0 71.67 41.83 128.91t108.06 79.23q7.71 1.43 11.42-2a11.17 11.17 0 0 0 3.69-8.57q0-.86-.14-15.42t-.14-25.41l-6.57 1.14a83.77 83.77 0 0 1-15.85 1 120.73 120.73 0 0 1-19.84-2 44.34 44.34 0 0 1-19.11-8.51 36.23 36.23 0 0 1-12.56-17.6l-2.86-6.57a71.34 71.34 0 0 0-9-14.56q-6.14-8-12.42-10.85l-2-1.43a21 21 0 0 1-3.71-3.43 15.66 15.66 0 0 1-2.57-4q-.86-2 1.43-3.29C61.2 310.42 64 310 68 310l5.71.85q5.71 1.14 14.13 6.85a46.08 46.08 0 0 1 13.85 14.84q6.57 11.71 15.85 17.85t18.7 6.14a81.19 81.19 0 0 0 16.27-1.42 56.78 56.78 0 0 0 12.85-4.29q2.57-19.14 14-29.41a195.49 195.49 0 0 1-29.36-5.13 116.52 116.52 0 0 1-26.83-11.14 76.86 76.86 0 0 1-23-19.13q-9.14-11.42-15-30t-5.8-42.81q0-34.55 22.56-58.82-10.57-26 2-58.24 8.28-2.57 24.55 3.85t23.84 11q7.57 4.56 12.13 7.71a206.2 206.2 0 0 1 109.64 0l10.85-6.85a153.65 153.65 0 0 1 26.26-12.56q15.13-5.71 23.13-3.14 12.84 32.26 2.28 58.24 22.55 24.27 22.56 58.82 0 24.27-5.85 43t-15.12 30a79.82 79.82 0 0 1-23.13 19 116.74 116.74 0 0 1-26.84 11.14 195.29 195.29 0 0 1-29.23 5.07q14.8 12.84 14.81 40.58v60.2a11.37 11.37 0 0 0 3.57 8.56q3.57 3.42 11.28 2 66.24-22 108.07-79.23t41.83-128.91q-.03-59.62-29.43-110.05z\" />\n  </GithubRoot>\n)\n\nconst GoogleLogo = () => (\n  <svg\n    // data-sanity-icon=\"google-logo\"\n    width=\"1em\"\n    height=\"1em\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 48 48\"\n  >\n    <path\n      d=\"M11 24a13 13 0 0 1 .66-4.08l-7.4-5.66a22.18 22.18 0 0 0 0 19.49l7.4-5.67A13 13 0 0 1 11 24z\"\n      fill=\"#fbbc05\"\n    />\n    <path\n      d=\"M24 11a12.72 12.72 0 0 1 8.1 2.9l6.4-6.4a22 22 0 0 0-34.24 6.75l7.4 5.66A13 13 0 0 1 24 11z\"\n      fill=\"#ea4335\"\n    />\n    <path\n      d=\"M24 37a13 13 0 0 1-12.34-8.92l-7.4 5.66A21.93 21.93 0 0 0 24 46a21 21 0 0 0 14.33-5.48l-7-5.44A13.59 13.59 0 0 1 24 37zm-12.35-8.93l-7.4 5.67 7.4-5.66z\"\n      fill=\"#34a853\"\n    />\n    <path\n      d=\"M44.5 20H24v8.5h11.8a9.91 9.91 0 0 1-4.49 6.58l7 5.44C42.37 36.76 45 31.17 45 24a18.25 18.25 0 0 0-.5-4z\"\n      fill=\"#4285f4\"\n    />\n  </svg>\n)\n\nfunction CustomLogo(props: {provider: AuthProvider}) {\n  const {provider} = props\n\n  return (\n    provider.logo ? <img src={provider.logo} alt={`Logo for ${provider.name}`} /> : undefined\n  ) as any\n}\n\nexport const providerLogos: Record<string, React.ComponentType<{provider: AuthProvider}>> = {\n  google: GoogleLogo,\n  github: GithubLogo,\n  custom: CustomLogo,\n  // sanity: () => <SanityMonogram data-sanity-icon=\"\" />,\n}\n","import {SanityClient} from '@sanity/client'\nimport {Button, Flex, Heading, Spinner, Stack, Text} from '@sanity/ui'\nimport React, {useEffect, useState} from 'react'\nimport {Observable} from 'rxjs'\nimport {createHookFromObservableFactory} from '../../util'\nimport {providerLogos} from './providerLogos'\nimport {LoginComponentProps} from './types'\n\ninterface GetProvidersOptions {\n  client: SanityClient\n  mode?: 'append' | 'replace'\n  providers?: Array<{\n    name: string\n    title: string\n    url: string\n    logo?: string\n  }>\n}\n\ninterface ProvidersResponse {\n  thirdPartyLogin?: boolean\n  sso?: {\n    saml?: boolean\n  }\n  providers: Provider[]\n}\n\ninterface Provider {\n  name: string\n  title: string\n  url: string\n}\n\nasync function getProviders({client, mode, providers: customProviders = []}: GetProvidersOptions) {\n  const {providers, thirdPartyLogin, sso} = await client.request<ProvidersResponse>({\n    uri: '/auth/providers',\n  })\n\n  if (!customProviders.length) return providers\n\n  const custom = customProviders.map((provider) => {\n    // taken from here:\n    // https://github.com/sanity-io/sanity/blob/795637999b67c23de1657a3701091a337383f632/packages/%40sanity/default-login/src/util/getProviders.js#L19\n    // A user may want to remove certain login options (eg GitHub) and thus\n    // provide \"official\" login options through the config. These shouldn't be\n    // treated as custom login providers which require the third-party login\n    // feature, but as the official provider\n    const isOfficial = providers.some((official) => official.url === provider.url)\n    const isSupported = isOfficial || thirdPartyLogin || (sso && Object.values(sso).some(Boolean))\n    return {...provider, custom: !isOfficial, supported: isSupported}\n  })\n\n  if (mode === 'replace') return custom\n\n  // Append to the list of official providers, but replace any provider that has\n  // the same URL with the custom one (allows customizing the title, name)\n  return providers\n    .filter((official) => custom.some((provider) => provider.url !== official.url))\n    .concat(custom)\n}\n\ninterface CreateLoginComponentOptions {\n  getClient: () => Observable<SanityClient>\n  loginMethod: 'dual' | 'cookie'\n  mode?: 'append' | 'replace'\n  redirectOnSingle?: boolean\n  providers?: Array<{\n    name: string\n    title: string\n    url: string\n    logo?: string\n  }>\n}\n\ninterface CreateHrefForProviderOptions {\n  projectId: string\n  loginMethod: 'dual' | 'cookie'\n  url: string\n  basePath: string\n}\n\nfunction createHrefForProvider({\n  loginMethod,\n  projectId,\n  url,\n  basePath,\n}: CreateHrefForProviderOptions) {\n  const params = new URLSearchParams()\n  params.set('origin', `${window.location.origin}${basePath}`)\n  params.set('projectId', projectId)\n  params.set('type', loginMethod)\n  return `${url}?${params}`\n}\n\nexport function createLoginComponent({\n  getClient,\n  loginMethod,\n  redirectOnSingle,\n  ...providerOptions\n}: CreateLoginComponentOptions) {\n  const useClient = createHookFromObservableFactory(getClient)\n\n  function LoginComponent({projectId, basePath}: LoginComponentProps) {\n    const [providers, setProviders] = useState<Provider[] | null>(null)\n    const [error, setError] = useState<unknown>(null)\n    if (error) throw error\n\n    const [client] = useClient()\n\n    useEffect(() => {\n      if (!client) return\n\n      getProviders({client, ...providerOptions})\n        .then(setProviders)\n        .catch(setError)\n    }, [client])\n\n    // only create a direct URL if `redirectOnSingle` is true and there is only\n    // one provider available\n    const redirectUrl =\n      redirectOnSingle &&\n      providers?.length === 1 &&\n      providers?.[0] &&\n      createHrefForProvider({\n        loginMethod,\n        projectId,\n        url: providers[0].url,\n        basePath,\n      })\n\n    const loading = !providers || redirectUrl\n\n    useEffect(() => {\n      if (redirectUrl) {\n        window.location.href = redirectUrl\n      }\n    }, [redirectUrl])\n\n    if (loading) {\n      return (\n        <Flex\n          align=\"center\"\n          direction=\"column\"\n          gap={4}\n          justify=\"center\"\n          padding={6}\n          sizing=\"border\"\n        >\n          <Text muted>Loading…</Text>\n          <Spinner muted />\n        </Flex>\n      )\n    }\n\n    return (\n      <Stack space={4}>\n        <Heading align=\"center\" size={1}>\n          Choose login provider\n        </Heading>\n\n        <Stack space={2}>\n          {providers.map((provider, index) => (\n            <Button\n              // eslint-disable-next-line react/no-array-index-key\n              icon={providerLogos[provider.name]}\n              key={`${provider.url}_${index}`}\n              as=\"a\"\n              href={createHrefForProvider({\n                loginMethod,\n                projectId,\n                url: provider.url,\n                basePath,\n              })}\n              mode=\"ghost\"\n              text={provider.title}\n            />\n          ))}\n        </Stack>\n      </Stack>\n    )\n  }\n\n  return LoginComponent\n}\n","import createClient, {SanityClient} from '@sanity/client'\nimport {defer} from 'rxjs'\nimport {map, shareReplay, startWith, switchMap} from 'rxjs/operators'\nimport {memoize} from 'lodash'\nimport {CorsOriginError} from '../cors'\nimport {AuthState, AuthStore} from './types'\nimport {createBroadcastChannel} from './createBroadcastChannel'\nimport {sessionId} from './sessionId'\nimport * as storage from './storage'\nimport {createLoginComponent} from './createLoginComponent'\n\nexport interface AuthProvider {\n  name: string\n  title: string\n  url: string\n  logo?: string\n}\n\nexport interface AuthStoreOptions {\n  projectId: string\n  dataset: string\n  /**\n   * Login method to use for the studio the studio. Can be one of:\n   * - `dual` (default) - attempt to use cookies where possible, falling back to\n   *   storing authentication token in `localStorage` otherwise\n   * - `cookie` - explicitly disable `localStorage` method, relying only on\n   *   cookies\n   */\n  loginMethod?: 'dual' | 'cookie'\n  /**\n   * Append the custom providers to the default providers or replace them.\n   */\n  mode?: 'append' | 'replace'\n  /**\n   * If true, don't show the choose provider logo screen, automatically redirect\n   * to the single provider login\n   */\n  redirectOnSingle?: boolean\n  /**\n   * The custom provider implementations\n   */\n  providers?: AuthProvider[]\n}\n\nconst getStorageKey = (projectId: string) => {\n  // Project ID is part of the localStorage key so that different projects can\n  // store their separate tokens, and it's easier to do book keeping.\n  if (!projectId) throw new Error('Invalid project id')\n  return `__studio_auth_token_${projectId}`\n}\n\nconst getToken = (projectId: string): string | null => {\n  try {\n    const item = storage.getItem(getStorageKey(projectId))\n    if (item) {\n      const {token} = JSON.parse(item) as {token: string}\n      if (token && typeof token === 'string') {\n        return token\n      }\n    }\n  } catch (err) {\n    console.error(err)\n  }\n  return null\n}\n\nconst clearToken = (projectId: string): void => {\n  try {\n    storage.removeItem(getStorageKey(projectId))\n  } catch (err) {\n    console.error(err)\n  }\n}\n\nconst saveToken = ({token, projectId}: {token: string; projectId: string}): void => {\n  try {\n    storage.setItem(\n      getStorageKey(projectId),\n      JSON.stringify({token, time: new Date().toISOString()})\n    )\n  } catch (err) {\n    console.error(err)\n  }\n}\n\nconst getCurrentUser = async (\n  client: SanityClient,\n  broadcastToken: (token: string | null) => void\n) => {\n  try {\n    const user = await client.request({\n      uri: '/users/me',\n      withCredentials: true,\n      tag: 'users.get-current',\n    })\n\n    // if the user came back with an id, assume it's a full CurrentUser\n    return typeof user?.id === 'string' ? user : null\n  } catch (err) {\n    // 401 means the user had some kind of credentials, but failed to authenticate,\n    // we should clear any local token in this case and treat it as if the used was\n    // logged out\n    if (err.statusCode === 401) {\n      clearToken(client.config().projectId || '')\n      broadcastToken(null)\n      return null\n    }\n\n    // Request failed for a non-auth reason, see if this was a CORS-error by\n    // checking the `/ping` endpoint, which allows all origins\n    const invalidCorsConfig = await client\n      .request({uri: '/ping', withCredentials: false, tag: 'cors-check'})\n      .then(\n        () => true, // Request succeeded, so likely the CORS origin is disallowed\n        () => false // Request failed, so likely a network error of some kind\n      )\n\n    if (invalidCorsConfig) {\n      // Throw a specific error on CORS-errors, to allow us to show a customized dialog\n      throw new CorsOriginError({projectId: client.config()?.projectId})\n    }\n\n    // Some non-CORS error - is it one of those undefinable network errors?\n    if (err.isNetworkError && !err.message && err.request && err.request.url) {\n      const host = new URL(err.request.url).host\n      throw new Error(`Unknown network error attempting to reach ${host}`)\n    }\n\n    // Some other error, just throw it\n    throw err\n  }\n}\n\n/**\n * @internal\n */\nexport function _createAuthStore({\n  projectId,\n  dataset,\n  loginMethod = 'dual',\n  ...providerOptions\n}: AuthStoreOptions): AuthStore {\n  // this broadcast channel receives either a token as a `string` or `null`.\n  // a new client will be created from it, otherwise, it'll only trigger a retry\n  // for cookie-based auth\n  const {broadcast, messages} = createBroadcastChannel<string | null>(`dual_mode_auth_${projectId}`)\n\n  // // TODO: there is currently a bug where the AuthBoundary flashes the\n  // // `NotAuthenticatedComponent` on the first load after a login with\n  // // cookieless mode. A potential solution to fix this bug is to delay\n  // // emitting `state$` until the session ID has been converted to a token\n  // const firstMessage = messages.pipe(first())\n\n  const token$ = messages.pipe(startWith(loginMethod === 'dual' ? getToken(projectId) : null))\n\n  const state$ = token$.pipe(\n    // // see above\n    // debounce(() => firstMessage),\n    map((token) =>\n      createClient({\n        projectId,\n        dataset,\n        apiVersion: '2021-06-07',\n        useCdn: false,\n        ...(token && {token}),\n        withCredentials: true,\n        requestTagPrefix: 'sanity.studio',\n        ignoreBrowserTokenWarning: true,\n        allowReconfigure: false,\n      })\n    ),\n    switchMap((client) =>\n      defer(async (): Promise<AuthState> => {\n        const currentUser = await getCurrentUser(client, broadcast)\n\n        return {\n          currentUser,\n          client,\n          authenticated: !!currentUser,\n        }\n      })\n    ),\n    shareReplay(1)\n  )\n\n  async function handleCallbackUrl() {\n    if (sessionId && loginMethod === 'dual') {\n      const requestClient = createClient({\n        projectId,\n        dataset,\n        useCdn: true,\n        withCredentials: true,\n        apiVersion: '2021-06-07',\n        requestTagPrefix: 'sanity.studio',\n      })\n\n      // try to get the current user by using the cookie credentials\n      const currentUser = await getCurrentUser(requestClient, broadcast)\n\n      if (currentUser) {\n        // if that worked, then we don't need to fetch a token\n        broadcast(null)\n      } else {\n        // if that didn't work, then we need to trade the session ID for a token\n        const {token} = await requestClient.request<{token: string}>({\n          method: 'GET',\n          uri: `/auth/fetch`,\n          query: {sid: sessionId},\n          tag: 'auth.fetch-token',\n        })\n\n        saveToken({token, projectId})\n        broadcast(token)\n      }\n    } else {\n      broadcast(loginMethod === 'dual' ? getToken(projectId) : null)\n    }\n  }\n\n  async function logout() {\n    const requestClient = createClient({\n      projectId,\n      dataset,\n      useCdn: true,\n      withCredentials: true,\n      apiVersion: '2021-06-07',\n      requestTagPrefix: 'sanity.studio',\n    })\n\n    clearToken(projectId)\n    await requestClient.auth.logout()\n    broadcast(null)\n  }\n\n  const LoginComponent = createLoginComponent({\n    ...providerOptions,\n    getClient: () => state$.pipe(map((state) => state.client)),\n    loginMethod,\n  })\n\n  return {\n    handleCallbackUrl,\n    token: token$,\n    state: state$,\n    LoginComponent,\n    logout,\n  }\n}\n\nfunction hash(value: unknown): string {\n  if (typeof value !== 'object' || value === null) return `${value}`\n\n  // note: this code path works for arrays as well as objects\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(value)\n        .sort(([a], [b]) => a.localeCompare(b, 'en'))\n        .map(([k, v]) => [k, hash(v)])\n    )\n  )\n}\n\n/**\n * @public\n */\nconst createAuthStore = memoize(_createAuthStore, hash)\n\nexport {createAuthStore}\n","import {Observable, OperatorFunction} from 'rxjs'\nimport {catchError, tap} from 'rxjs/operators'\n\ntype Selector<T, K> = (error: any, attemptNo: number, caught: Observable<T>) => Observable<K>\n\nexport function catchWithCount<T, K = T>(selector: Selector<T, K>): OperatorFunction<T, K>\n\nexport function catchWithCount<T, K = T>(selector: Selector<T, K>) {\n  return (input$: Observable<T>) => {\n    let errors: any[] = []\n\n    const errorOp: OperatorFunction<any, any> = catchError((err, caught: Observable<T>) => {\n      errors.push(err)\n      return selector(err, errors.length, caught).pipe(errorOp)\n    })\n    return input$.pipe(\n      tap(() => {\n        errors = []\n      }),\n      errorOp\n    )\n  }\n}\n","import {BifurClient} from '@sanity/bifur-client'\nimport {observableCallback} from 'observable-callback'\nimport {map, mergeMapTo, startWith, take, takeUntil} from 'rxjs/operators'\nimport {concat, fromEvent, merge, NEVER, Observable, of, throwError, timer} from 'rxjs'\nimport {catchWithCount} from './utils/catchWithCount'\n\nexport interface ConnectionStatusStore {\n  connectionStatus$: Observable<ConnectionStatus>\n}\n\nconst onOnline$ = typeof window === 'undefined' ? of({}) : fromEvent(window, 'online')\nconst onOffline$ = typeof window === 'undefined' ? of({}) : fromEvent(window, 'offline')\n\nconst expBackoff = (retryCount: number) => Math.pow(2, retryCount) * 100\n\nexport type ConnectingStatus = {\n  type: 'connecting'\n}\n\nexport type ErrorStatus = {\n  type: 'error'\n  error: Error\n  attemptNo: number\n  isOffline: boolean\n  retryAt: Date\n}\n\nexport type RetryingStatus = {\n  type: 'retrying'\n}\n\nexport type ConnectedStatus = {type: 'connected'; lastHeartbeat: Date}\n\nexport const CONNECTING: ConnectingStatus = {type: 'connecting'}\n\nexport type ConnectionStatus = ConnectingStatus | ErrorStatus | ConnectedStatus | RetryingStatus\n\nconst [onRetry$, onRetry] = observableCallback()\n\nexport {onRetry}\n\nconst createErrorStatus = ({\n  error,\n  isOffline,\n  attemptNo,\n  retryAt,\n}: {\n  error: Error\n  isOffline: boolean\n  attemptNo: number\n  retryAt: Date\n}): ErrorStatus => ({\n  type: 'error',\n  error,\n  attemptNo,\n  isOffline,\n  retryAt,\n})\n\nexport interface ConnectionStatusStoreOptions {\n  bifur: BifurClient\n}\n/**\n * This is the beginning of what should be the data store tracking connection status in the Sanity studio.\n */\n\nexport function createConnectionStatusStore({\n  bifur,\n}: ConnectionStatusStoreOptions): ConnectionStatusStore {\n  const connectionStatus$: Observable<ConnectionStatus> = merge(\n    bifur.heartbeats,\n    onOffline$.pipe(mergeMapTo(throwError(new Error('The browser went offline'))))\n  ).pipe(\n    map((ts): ConnectionStatus => ({type: 'connected', lastHeartbeat: ts})),\n    catchWithCount((error, successiveErrorsCount, caught) => {\n      const timeUntilRetry = Math.min(1000 * 240, expBackoff(successiveErrorsCount))\n      const retryAt = new Date(new Date().getTime() + timeUntilRetry)\n      const expiry$ = timer(retryAt)\n      const isOffline = !navigator.onLine\n      const initialErrorStatus = createErrorStatus({\n        error,\n        retryAt,\n        isOffline,\n        attemptNo: successiveErrorsCount,\n      })\n\n      const triggerRetry$ = NEVER.pipe(\n        takeUntil(isOffline ? onOnline$ : merge(expiry$, onOnline$, onRetry$))\n      )\n\n      return concat(of(initialErrorStatus), triggerRetry$.pipe(take(1)), caught)\n    }),\n    startWith(CONNECTING)\n  )\n\n  return {connectionStatus$}\n}\n","import {from, Observable, of} from 'rxjs'\nimport {filter, map, mergeMap, toArray} from 'rxjs/operators'\nimport {SanityClient} from '@sanity/client'\n\nexport interface CrossProjectTokenStore {\n  getTokenDocumentId: ({tokenId, projectId}: {tokenId?: string; projectId: string}) => string\n  getProjectIdFromTokenDocumentId: (id: string) => null | string\n  fetchCrossProjectToken: (\n    client: SanityClient,\n    {projectId, tokenId}: {projectId: string; tokenId?: string}\n  ) => Observable<string | undefined>\n  fetchAllCrossProjectTokens: () => Observable<\n    {\n      projectId: string\n      token: string\n    }[]\n  >\n}\n\nconst TOKEN_DOCUMENT_ID_BASE = `secrets.sanity.sharedContent`\n\nfunction isNonNullable<T>(value: T): value is NonNullable<T> {\n  return value !== null\n}\n\nexport interface CrossProjectTokenStoreOptions {\n  client: SanityClient\n}\n\n// eslint-disable-next-line camelcase\nexport function __tmp_wrap_crossProjectToken({\n  client: _client,\n}: CrossProjectTokenStoreOptions): CrossProjectTokenStore {\n  const versionedClient = _client.withConfig({apiVersion: '1'})\n\n  function fetchTokenDocument(client: SanityClient, id: string) {\n    return client.observable.fetch(`*[_id == $id]{_id, _type, _updatedAt, token}[0]`, {\n      id,\n    })\n  }\n\n  return {\n    getTokenDocumentId,\n    getProjectIdFromTokenDocumentId,\n    fetchCrossProjectToken,\n    fetchAllCrossProjectTokens,\n  }\n\n  // export\n  function getTokenDocumentId({tokenId, projectId}: {tokenId?: string; projectId: string}) {\n    return [TOKEN_DOCUMENT_ID_BASE, projectId, tokenId].filter(Boolean).join('.')\n  }\n\n  // export\n  function getProjectIdFromTokenDocumentId(id: string): null | string {\n    if (!id.startsWith(TOKEN_DOCUMENT_ID_BASE)) {\n      return null\n    }\n    //prettier-ignore\n    const [/*secrets*/, /*sanity*/, /*sharedContent*/, projectId] = id.split('.')\n    return projectId\n  }\n\n  // export\n  function fetchCrossProjectToken(\n    client: SanityClient,\n    {projectId, tokenId}: {projectId: string; tokenId?: string}\n  ): Observable<string | undefined> {\n    if (client.config().projectId === projectId) {\n      return of(undefined)\n    }\n    return fetchTokenDocument(client, getTokenDocumentId({projectId, tokenId})).pipe(\n      map((tokenDoc) => tokenDoc.token)\n    )\n  }\n\n  // export\n  function fetchAllCrossProjectTokens(): Observable<\n    {\n      projectId: string\n      token: string\n    }[]\n  > {\n    return versionedClient.observable\n      .fetch(`*[_id in path(\"${TOKEN_DOCUMENT_ID_BASE}.**\")]{_id, _type, _updatedAt, token}`)\n      .pipe(\n        mergeMap((tokenDocs: {_id: string; token: string}[]) => from(tokenDocs)),\n        map((doc) => {\n          const projectId = getProjectIdFromTokenDocumentId(doc._id)\n          return projectId ? {projectId, token: doc.token} : null\n        }),\n        filter(isNonNullable),\n        toArray()\n      )\n  }\n}\n","import {Menu, MenuButton, MenuButtonProps, MenuDivider, MenuItem} from '@sanity/ui'\nimport React from 'react'\nimport {CollapseMenuProps} from './CollapseMenu'\n\nconst MENU_BUTTON_POPOVER_PROPS: MenuButtonProps['popover'] = {\n  portal: true,\n  constrainSize: true,\n}\n\nexport function CollapseOverflowMenu(\n  props: Pick<\n    CollapseMenuProps,\n    'disableRestoreFocusOnClose' | 'menuButtonProps' | 'onMenuClose'\n  > & {menuOptionsArray: React.ReactElement[]; menuButton: React.ReactElement}\n) {\n  const {disableRestoreFocusOnClose, menuButton, menuButtonProps, menuOptionsArray, onMenuClose} =\n    props\n\n  return (\n    <MenuButton\n      __unstable_disableRestoreFocusOnClose={disableRestoreFocusOnClose}\n      id=\"menu-button\"\n      onClose={onMenuClose}\n      popover={MENU_BUTTON_POPOVER_PROPS}\n      {...menuButtonProps}\n      button={menuButton}\n      menu={\n        <Menu>\n          {menuOptionsArray.map((c, index) => {\n            const {\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              collapsedProps = {},\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              expandedProps = {},\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              tooltipProps = {},\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              tooltipText,\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              dividerBefore,\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              fontSize,\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              padding,\n              text,\n              icon,\n              selected,\n              ...rest\n            } = c.props\n\n            return (\n              <React.Fragment key={c.key}>\n                {dividerBefore && index !== 0 && <MenuDivider />}\n                <MenuItem text={text} icon={icon} pressed={selected} {...rest} />\n              </React.Fragment>\n            )\n          })}\n        </Menu>\n      }\n    />\n  )\n}\n","import {Flex} from '@sanity/ui'\nimport React, {useEffect, useState} from 'react'\n\ninterface ObserveElementProps {\n  children: React.ReactElement\n  options?: IntersectionObserverInit\n  callback: IntersectionObserverCallback\n}\n\nexport function ObserveElement(props: ObserveElementProps) {\n  const {callback, children, options, ...rest} = props\n  const [el, setEl] = useState<HTMLDivElement | null>(null)\n\n  useEffect(() => {\n    if (!el) return undefined\n\n    const io = new IntersectionObserver(callback, options)\n    io.observe(el)\n\n    return () => {\n      io.unobserve(el)\n      io.disconnect()\n    }\n  }, [el, callback, options])\n\n  return (\n    <Flex ref={setEl} {...rest}>\n      {children}\n    </Flex>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst DividerDiv = styled.div`\n  border-right: 1px solid var(--card-border-color);\n  height: auto;\n\n  &[data-hidden] {\n    opacity: 0;\n  }\n`\n\ninterface CollapseMenuDividerProps {\n  hidden?: boolean\n}\n\nexport function CollapseMenuDivider(props: CollapseMenuDividerProps) {\n  const {hidden, ...rest} = props\n\n  return (\n    <DividerDiv data-ui=\"CollapseMenuDivider\" data-hidden={hidden ? '' : undefined} {...rest} />\n  )\n}\n","import {EllipsisVerticalIcon} from '@sanity/icons'\nimport {Box, Button, Flex, MenuButtonProps, Text, Tooltip, useElementRect} from '@sanity/ui'\nimport React, {cloneElement, forwardRef, useCallback, useMemo, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport {CollapseOverflowMenu} from './CollapseOverflowMenu'\nimport {ObserveElement} from './ObserveElement'\nimport {CollapseMenuDivider} from './CollapseMenuDivider'\n\nexport interface CollapseMenuProps {\n  children: React.ReactNode\n  collapsed?: boolean\n  collapseText?: boolean\n  disableRestoreFocusOnClose?: boolean\n  gap?: number | number[]\n  menuButtonProps?: Omit<MenuButtonProps, 'id' | 'menu' | 'button'> & {\n    id?: string\n    button?: React.ReactElement\n  }\n  onMenuClose?: () => void\n}\n\nconst FOCUS_RING_PADDING = 3\n\nconst OPTION_STYLE = css`\n  list-style: none;\n  display: flex;\n  white-space: nowrap;\n\n  &[data-hidden='true'] {\n    opacity: 0;\n    visibility: hidden;\n  }\n`\n\nconst OuterFlex = styled(Flex)`\n  padding: ${FOCUS_RING_PADDING}px;\n  margin: -${FOCUS_RING_PADDING}px;\n  box-sizing: border-box;\n`\n\nconst RootFlex = styled(Flex)`\n  border-radius: inherit;\n  position: relative;\n`\n\nconst RowFlex = styled(Flex)`\n  width: max-content;\n\n  &[data-hidden='true'] {\n    height: 0px;\n    visibility: hidden;\n  }\n`\n\nconst OptionObserveElement = styled(ObserveElement)`\n  ${OPTION_STYLE}\n`\n\nconst OptionHiddenFlex = styled(Flex)`\n  ${OPTION_STYLE}\n`\n\nfunction _isReactElement(node: unknown): node is React.ReactElement {\n  return Boolean(node)\n}\n\nexport const CollapseMenu = forwardRef(function CollapseMenu(\n  props: CollapseMenuProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {\n    children: childrenProp,\n    collapsed,\n    collapseText = true,\n    disableRestoreFocusOnClose,\n    gap,\n    menuButtonProps,\n    onMenuClose,\n  } = props\n  const [rootEl, setRootEl] = useState<HTMLDivElement | null>(null)\n  const [hiddenRowEl, setHiddenRowEl] = useState<HTMLDivElement | null>(null)\n  const rootRect = useElementRect(rootEl)\n  const [menuOptions, setMenuOptions] = useState<React.ReactElement[]>([])\n\n  const hasOverflow = useMemo(() => {\n    if (rootRect && rootEl && hiddenRowEl) {\n      return rootRect.width < hiddenRowEl.scrollWidth\n    }\n    return false\n  }, [hiddenRowEl, rootEl, rootRect])\n\n  const menuButton = useMemo(\n    () => menuButtonProps?.button || <Button icon={EllipsisVerticalIcon} mode=\"bleed\" />,\n    [menuButtonProps]\n  )\n\n  const intersectionOptions = useMemo(\n    () => ({\n      root: rootEl,\n      threshold: 1,\n      rootMargin: '2px',\n    }),\n    [rootEl]\n  )\n\n  const children = useMemo(\n    () => React.Children.toArray(childrenProp).filter(_isReactElement),\n    [childrenProp]\n  )\n\n  const menuOptionsArray = useMemo(\n    // eslint-disable-next-line max-nested-callbacks\n    () => children.filter(({key}) => menuOptions.find((o: React.ReactElement) => o.key === key)),\n    [children, menuOptions]\n  )\n\n  const menuIsVisible = useMemo(\n    () => collapsed || menuOptionsArray.length > 0,\n    [collapsed, menuOptionsArray.length]\n  )\n\n  const isInMenu = useCallback(\n    (childKey) => menuOptionsArray.some((o) => o.key === childKey),\n    [menuOptionsArray]\n  )\n\n  const handleIntersection = useCallback(\n    (e: IntersectionObserverEntry, child: React.ReactElement) => {\n      const exists = isInMenu(child.key)\n\n      if (!e.isIntersecting && !exists) {\n        setMenuOptions((prev) => [child, ...prev])\n      }\n\n      if (e.isIntersecting && exists) {\n        const updatedOptions = menuOptionsArray.filter(({key}) => key !== child.key)\n\n        setMenuOptions(updatedOptions)\n      }\n    },\n    [isInMenu, menuOptionsArray]\n  )\n\n  const items = useMemo(\n    () =>\n      children.map((child) => {\n        const {collapsedProps, expandedProps} = child.props\n        const modeProps = hasOverflow ? collapsedProps : expandedProps\n        const text = hasOverflow && collapseText ? undefined : child.props.text\n\n        return cloneElement(child, {\n          ...modeProps,\n          text: text,\n        })\n      }),\n    [children, collapseText, hasOverflow]\n  )\n\n  if (collapsed) {\n    return (\n      <CollapseOverflowMenu\n        disableRestoreFocusOnClose={disableRestoreFocusOnClose}\n        menuButton={menuButton}\n        menuButtonProps={menuButtonProps}\n        menuOptionsArray={children}\n        onMenuClose={onMenuClose}\n      />\n    )\n  }\n\n  return (\n    <OuterFlex align=\"center\" data-ui=\"CollapseMenu\" overflow=\"hidden\" sizing=\"border\" ref={ref}>\n      <RootFlex direction=\"column\" flex={1} justify=\"center\" ref={setRootEl}>\n        {/* Content */}\n        <RowFlex gap={gap}>\n          {items.map((child, index) => {\n            const {dividerBefore, tooltipText = '', tooltipProps = {}} = child.props\n            const hidden = isInMenu(child.key)\n\n            return (\n              <React.Fragment key={child.key}>\n                {dividerBefore && index !== 0 && <CollapseMenuDivider hidden={hidden} />}\n\n                <OptionObserveElement\n                  options={intersectionOptions}\n                  // eslint-disable-next-line react/jsx-no-bind\n                  callback={(e) => handleIntersection(e[0], child)}\n                  aria-hidden={hidden}\n                  data-hidden={hidden}\n                >\n                  <Tooltip\n                    portal\n                    disabled={!tooltipText}\n                    content={\n                      <Box padding={2} sizing=\"border\">\n                        <Text size={1}>{tooltipText}</Text>\n                      </Box>\n                    }\n                    {...tooltipProps}\n                  >\n                    <Flex>\n                      {cloneElement(child, {\n                        disabled: child.props.disabled || hidden,\n                        'aria-hidden': hidden,\n                      })}\n                    </Flex>\n                  </Tooltip>\n                </OptionObserveElement>\n              </React.Fragment>\n            )\n          })}\n        </RowFlex>\n\n        {/* Hidden row used to detect when to collapse/collapse the layout  */}\n        <RowFlex data-hidden aria-hidden=\"true\" gap={gap} ref={setHiddenRowEl}>\n          {children.map((child, index) => {\n            const {dividerBefore} = child.props\n\n            return (\n              <React.Fragment key={child.key}>\n                {dividerBefore && index !== 0 && <CollapseMenuDivider />}\n                <OptionHiddenFlex key={child.key}>\n                  {cloneElement(child, {\n                    disabled: true,\n                    'aria-hidden': true,\n                  })}\n                </OptionHiddenFlex>\n              </React.Fragment>\n            )\n          })}\n        </RowFlex>\n      </RootFlex>\n\n      {menuIsVisible && (\n        <Flex marginLeft={gap}>\n          <CollapseOverflowMenu\n            disableRestoreFocusOnClose={disableRestoreFocusOnClose}\n            menuButton={menuButton}\n            menuButtonProps={menuButtonProps}\n            menuOptionsArray={menuOptionsArray}\n            onMenuClose={onMenuClose}\n          />\n        </Flex>\n      )}\n    </OuterFlex>\n  )\n})\n","import {Button, ButtonProps, TooltipProps} from '@sanity/ui'\nimport React, {forwardRef} from 'react'\n\nexport interface CommonProps extends Omit<ButtonProps, 'text' | 'icon' | 'iconRight'> {\n  as?: React.ElementType | keyof JSX.IntrinsicElements\n  dividerBefore?: boolean\n  focused?: boolean\n  tooltipProps?: TooltipProps\n  tooltipText?: React.ReactNode\n  icon?: React.ReactNode\n}\nexport interface CollapseMenuButtonProps extends CommonProps {\n  collapsedProps?: Omit<CommonProps, 'text'>\n  expandedProps?: CommonProps\n  icon: React.ReactNode\n  text: React.ReactNode\n}\n\nexport const CollapseMenuButton = forwardRef(function CollapseMenuButton(\n  props: CollapseMenuButtonProps & Omit<React.HTMLProps<HTMLButtonElement>, 'as'>,\n  ref: React.ForwardedRef<HTMLButtonElement>\n) {\n  const {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    collapsedProps = {},\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    expandedProps = {},\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    tooltipProps = {},\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    tooltipText,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    dividerBefore,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ...rest\n  } = props\n\n  return <Button data-ui=\"CollapseMenuButton\" {...rest} ref={ref} />\n})\n","import {useCallback, useEffect, useState} from 'react'\nimport {RovingFocusProps} from './types'\n\nconst MUTATION_ATTRIBUTE_FILTER = ['aria-hidden', 'disabled', 'href']\n\nconst FOCUSABLE =\n  'a[href], button, input, textarea, select, details, [tabindex]:not([tabindex=\"-1\"])'\n\nfunction getFocusableElements(element: HTMLElement) {\n  return [...(element.querySelectorAll(FOCUSABLE) as any)].filter(\n    (el) => !el.hasAttribute('disabled') && el.getAttribute('aria-hidden') !== 'true'\n  ) as HTMLElement[]\n}\n\n/**\n * This hook handles focus with the keyboard arrows.\n *\n * @see {@link https://a11y-solutions.stevenwoodson.com/solutions/focus/roving-focus/ | Roving focus definition}\n *\n * @example\n * ```tsx\n * function MyComponent() {\n *   const [rootElement, setRootElement] = setRootElement(null)\n *\n *   useRovingFocus({\n *     rootElement: rootElement,\n *   })\n *\n *   return (\n *     <div ref={setRootElement}>\n *       <button>Button</button>\n *       <button>Button</button>\n *       <button>Button</button>\n *     </div>\n *   )\n * }\n * ```\n */\nexport function useRovingFocus(props: RovingFocusProps): undefined {\n  const {\n    direction = 'horizontal',\n    initialFocus,\n    loop = true,\n    navigation = ['arrows'],\n    pause = false,\n    rootElement,\n  } = props\n  const [focusedIndex, setFocusedIndex] = useState<number>(-1)\n  const [focusableElements, setFocusableElements] = useState<HTMLElement[]>([])\n\n  const focusableLen = focusableElements.length\n  const lastFocusableIndex = focusableLen - 1\n\n  /**\n   * Determine what keys to listen to depending on direction\n   */\n  const nextKey = direction === 'horizontal' ? 'ArrowRight' : 'ArrowDown'\n  const prevKey = direction === 'horizontal' ? 'ArrowLeft' : 'ArrowUp'\n\n  /**\n   * Set focusable elements in state\n   */\n  const handleSetElements = useCallback(() => {\n    if (rootElement) {\n      const els = getFocusableElements(rootElement)\n\n      setFocusableElements(els)\n    }\n  }, [rootElement])\n\n  /**\n   * Set focused index\n   */\n  const handleFocus = useCallback((index: number) => {\n    setFocusedIndex(index)\n  }, [])\n\n  /**\n   * Handle increment/decrement of focusedIndex\n   */\n  const handleKeyDown = useCallback(\n    (event) => {\n      if (pause) {\n        return\n      }\n\n      const focusPrev = () => {\n        event.preventDefault()\n        setFocusedIndex((prevIndex) => {\n          const next = (prevIndex + lastFocusableIndex) % focusableLen\n\n          if (!loop && next === lastFocusableIndex) {\n            return prevIndex\n          }\n\n          return next\n        })\n      }\n\n      const focusNext = () => {\n        event.preventDefault()\n        setFocusedIndex((prevIndex) => {\n          const next = (prevIndex + 1) % focusableLen\n\n          if (!loop && next === 0) {\n            return prevIndex\n          }\n\n          return next\n        })\n      }\n\n      if (event.key === 'Tab' && navigation.includes('tab')) {\n        if (event.shiftKey) {\n          focusPrev()\n        } else {\n          focusNext()\n        }\n      }\n\n      if (navigation.includes('arrows')) {\n        if (event.key === prevKey) {\n          focusPrev()\n        }\n\n        if (event.key === nextKey) {\n          focusNext()\n        }\n      }\n    },\n    [pause, prevKey, navigation, nextKey, lastFocusableIndex, focusableLen, loop]\n  )\n\n  /**\n   * Set focusable elements on mount\n   */\n  useEffect(() => {\n    handleSetElements()\n  }, [handleSetElements, initialFocus, direction])\n\n  /**\n   * Listen to DOM mutations to update focusableElements with latest state\n   */\n  useEffect(() => {\n    const mo = new MutationObserver(handleSetElements)\n\n    if (rootElement) {\n      mo.observe(rootElement, {\n        childList: true,\n        subtree: true,\n        attributeFilter: MUTATION_ATTRIBUTE_FILTER,\n      })\n    }\n\n    return () => {\n      mo.disconnect()\n    }\n  }, [focusableElements, handleSetElements, rootElement])\n\n  /**\n   * Set focus on elements in focusableElements depending on focusedIndex\n   */\n  useEffect(() => {\n    focusableElements.forEach((el, index) => {\n      if (index === focusedIndex) {\n        el.setAttribute('tabIndex', '0')\n        el.setAttribute('aria-selected', 'true')\n        el.focus()\n        el.onfocus = () => handleFocus(index)\n        el.onblur = () => handleFocus(-1)\n      } else {\n        el.setAttribute('tabIndex', '-1')\n        el.setAttribute('aria-selected', 'false')\n        el.onfocus = () => handleFocus(index)\n      }\n    })\n\n    if (focusedIndex === -1 && focusableElements) {\n      const initialIndex = initialFocus === 'last' ? lastFocusableIndex : 0\n      focusableElements[initialIndex]?.setAttribute('tabIndex', '0')\n    }\n  }, [focusableElements, focusedIndex, handleFocus, initialFocus, lastFocusableIndex])\n\n  /**\n   * Listen to key down events on rootElement\n   */\n  useEffect(() => {\n    rootElement?.addEventListener('keydown', handleKeyDown)\n\n    return () => {\n      rootElement?.removeEventListener('keydown', handleKeyDown)\n    }\n  }, [handleKeyDown, rootElement])\n\n  return undefined\n}\n","import React, {createContext, useContext, useEffect, useMemo, useState} from 'react'\nimport {studioTheme, ThemeColorSchemeKey, ThemeProvider, usePrefersDark} from '@sanity/ui'\n\nconst ColorSchemeContext = createContext<{\n  scheme: ThemeColorSchemeKey\n  setScheme: (colorScheme: ThemeColorSchemeKey) => void\n} | null>(null)\n\ninterface ColorSchemeProviderProps {\n  children: React.ReactNode\n  onSchemeChange?: (nextScheme: ThemeColorSchemeKey) => void\n  scheme?: ThemeColorSchemeKey\n}\n\nexport function ColorSchemeProvider({\n  children,\n  onSchemeChange,\n  scheme: schemeProp,\n}: ColorSchemeProviderProps) {\n  const prefersDark = usePrefersDark()\n  const [scheme, setScheme] = useState<ThemeColorSchemeKey>(schemeProp || 'light')\n\n  // if the preferred color scheme changes, then react to this change\n  useEffect(() => {\n    const nextScheme = prefersDark ? 'dark' : 'light'\n    setScheme(nextScheme)\n    onSchemeChange?.(nextScheme)\n  }, [onSchemeChange, prefersDark])\n\n  const colorScheme = useMemo(() => ({scheme, setScheme}), [scheme])\n\n  return (\n    <ColorSchemeContext.Provider value={colorScheme}>\n      {/* Note: this is a fallback ThemeProvider that is for any components */}\n      {/* that may render before the StudioThemeProvider renders. this is */}\n      {/* required because the StudioThemeProvider has a dependence on the */}\n      {/* active workspace provided via the ActiveWorkspaceMatcher */}\n      <ThemeProvider scheme={scheme} theme={studioTheme}>\n        {children}\n      </ThemeProvider>\n    </ColorSchemeContext.Provider>\n  )\n}\n\nexport function useColorScheme() {\n  const value = useContext(ColorSchemeContext)\n  if (!value) throw new Error('Could not find `colorScheme` context')\n  return value\n}\n","import React from 'react'\nimport {RouterContextValue} from './types'\n\n/**\n * @internal\n */\nexport const RouterContext = React.createContext<RouterContextValue | null>(null)\n","import {useContext} from 'react'\nimport {RouterContext} from './RouterContext'\nimport {RouterContextValue} from './types'\n\n/**\n * @public\n */\nexport function useRouter(): RouterContextValue {\n  const router = useContext(RouterContext)\n\n  if (!router) {\n    throw new Error('Router: missing context value')\n  }\n\n  return router\n}\n","import {useCallback} from 'react'\nimport {useRouter} from './useRouter'\n\nfunction isLeftClickEvent(event: React.MouseEvent) {\n  return event.button === 0\n}\n\nfunction isModifiedEvent(event: React.MouseEvent) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey)\n}\n\n/**\n * @public\n */\nexport function useLink(props: {\n  href?: string\n  onClick?: React.MouseEventHandler<HTMLElement>\n  replace?: boolean\n  target?: string\n}): {onClick: React.MouseEventHandler<HTMLElement>} {\n  const {onClick: onClickProp, href, target, replace = false} = props\n  const {navigateUrl} = useRouter()\n\n  const onClick = useCallback(\n    (event: React.MouseEvent<HTMLElement>): void => {\n      if (event.isDefaultPrevented()) {\n        return\n      }\n\n      if (!href) return\n\n      if (onClickProp) {\n        onClickProp(event)\n      }\n\n      if (isModifiedEvent(event) || !isLeftClickEvent(event)) {\n        return\n      }\n\n      // If target prop is set (e.g. to \"_blank\") let browser handle link.\n      if (target) {\n        return\n      }\n\n      event.preventDefault()\n\n      navigateUrl({path: href, replace})\n    },\n    [href, navigateUrl, onClickProp, replace, target]\n  )\n\n  return {onClick: onClick}\n}\n","import {IntentParameters} from './types'\nimport {useLink} from './useLink'\nimport {useRouter} from './useRouter'\n\n/**\n *\n * @example\n * ```tsx\n * import {useIntentLink} from 'sanity'\n *\n * const {onClick, href} = useIntentLink({\n *   intent: 'edit',\n *   params: {id: 'foo'}\n * })\n *\n * <a href={href} onClick={onClick}>Link to \"foo\" editor</a>\n * ```\n *\n * @public\n */\nexport function useIntentLink(props: {\n  intent: string\n  onClick?: React.MouseEventHandler<HTMLElement>\n  params?: IntentParameters\n  replace?: boolean\n  target?: string\n}): {\n  onClick: React.MouseEventHandler<HTMLElement>\n  href: string\n} {\n  const {intent, onClick: onClickProp, params, replace, target} = props\n  const {resolveIntentLink} = useRouter()\n  const href = resolveIntentLink(intent, params)\n  const {onClick} = useLink({href, onClick: onClickProp, replace, target})\n\n  return {onClick, href}\n}\n","import React, {ForwardedRef, forwardRef} from 'react'\nimport {IntentParameters} from './types'\nimport {useIntentLink} from './useIntentLink'\n\n/**\n * @public\n */\nexport interface IntentLinkProps {\n  intent: string\n  params?: IntentParameters\n  replace?: boolean\n}\n\n/**\n * @public\n */\nexport const IntentLink = forwardRef(function IntentLink(\n  props: IntentLinkProps & React.HTMLProps<HTMLAnchorElement>,\n  ref: ForwardedRef<HTMLAnchorElement>\n) {\n  const {intent, params, target, ...restProps} = props\n  const {onClick, href} = useIntentLink({\n    intent,\n    params,\n    target,\n    onClick: props.onClick,\n  })\n\n  return <a {...restProps} href={href} onClick={onClick} ref={ref} target={target} />\n})\n","import React, {forwardRef} from 'react'\nimport {useLink} from './useLink'\n\n/**\n * @public\n */\nexport interface LinkProps {\n  replace?: boolean\n}\n\n/**\n * @public\n */\nexport const Link = forwardRef(function Link(\n  props: LinkProps & React.HTMLProps<HTMLAnchorElement>,\n  ref: React.ForwardedRef<HTMLAnchorElement>\n) {\n  const {onClick: onClickProp, href, target, replace, ...restProps} = props\n  const {onClick} = useLink({onClick: onClickProp, href, target, replace})\n\n  return <a {...restProps} onClick={onClick} href={href} target={target} ref={ref} />\n})\n","const _hasOWn = Object.prototype.hasOwnProperty\n\nexport const hasOwn = _hasOWn.call.bind(_hasOWn)\n","import {hasOwn} from './hasOwn'\n\nexport function isEmpty(object: Record<string, unknown>): boolean {\n  for (const key in object) {\n    if (hasOwn(object, key)) {\n      return false\n    }\n  }\n\n  return true\n}\n","/* eslint-disable camelcase */\n\nimport React, {useCallback, useMemo} from 'react'\nimport {isEmpty} from './utils/isEmpty'\nimport {RouterContext} from './RouterContext'\nimport {NavigateOptions, RouterContextValue} from './types'\nimport {useRouter} from './useRouter'\n\nfunction addScope(\n  routerState: Record<string, any>,\n  scope: string,\n  scopedState: Record<string, any>\n) {\n  return (\n    scopedState && {\n      ...routerState,\n      [scope]: scopedState,\n    }\n  )\n}\n\n/**\n * @public\n */\nexport interface RouteScopeProps {\n  scope: string\n  children: React.ReactNode\n}\n\n/**\n * @public\n */\nexport function RouteScope(props: RouteScopeProps): React.ReactElement {\n  const {children, scope} = props\n  const parent = useRouter()\n  const {resolvePathFromState: parent_resolvePathFromState, navigate: parent_navigate} = parent\n\n  const resolvePathFromState = useCallback(\n    (nextState: Record<string, any>): string => {\n      const nextStateScoped: Record<string, any> = isEmpty(nextState)\n        ? {}\n        : addScope(parent.state, scope, nextState)\n\n      return parent_resolvePathFromState(nextStateScoped)\n    },\n    [parent_resolvePathFromState, parent.state, scope]\n  )\n\n  const navigate = useCallback(\n    (nextState: Record<string, any>, options?: NavigateOptions): void => {\n      const nextScopedState = addScope(parent.state, scope, nextState)\n      parent_navigate(nextScopedState, options)\n    },\n    [parent_navigate, parent.state, scope]\n  )\n\n  const scopedRouter: RouterContextValue = useMemo(\n    () => ({\n      ...parent,\n      navigate,\n      resolvePathFromState,\n      state: parent.state[scope] as any,\n    }),\n    [navigate, parent, resolvePathFromState, scope]\n  )\n\n  return <RouterContext.Provider value={scopedRouter}>{children}</RouterContext.Provider>\n}\n","import {isEqual} from 'lodash'\nimport React, {useCallback, useEffect, useMemo, useRef, useState} from 'react'\nimport {RouterContext} from './RouterContext'\nimport {IntentParameters, RouterContextValue, NavigateOptions, Router, RouterState} from './types'\n\n/**\n * @public\n */\nexport interface RouterProviderProps {\n  onNavigate: (opts: {path: string; replace?: boolean}) => void\n  router: Router\n  state: RouterState\n  children: React.ReactNode\n}\n\n/**\n * @example\n * ```tsx\n * import {\n *   NavigateOptions,\n *   route,\n *   RouterProvider,\n *   RouterState\n * } from 'sanity'\n * import {useCallback, useMemo} from 'react'\n *\n * function Root() {\n *   const router = useMemo(() => route.create('/'), [])\n *\n *   const [state, setState] = useState<RouterState>({})\n *\n *   const handleNavigate = useCallback((\n *     path: string,\n *     options?: NavigateOptions\n *   ) => {\n *     console.log('navigate', path, options)\n *\n *     setState(router.decode(path))\n *   }, [router])\n *\n *   return (\n *     <RouterProvider\n *       onNavigate={handleNavigate}\n *       router={router}\n *       state={state}\n *     >\n *       <div>This is a routed application</div>\n *     </RouterProvider>\n *   )\n * }\n * ```\n *\n * @public\n */\nexport function RouterProvider(props: RouterProviderProps): React.ReactElement {\n  // TODO: can we do nested routes?\n  const {onNavigate, router: routerProp, state: stateProp} = props\n  const [state, setState] = useState<RouterState>(stateProp)\n  const stateRef = useRef(state)\n\n  const navigateUrl = useCallback(\n    (opts: {path: string; replace?: boolean}) => {\n      onNavigate(opts)\n    },\n    [onNavigate]\n  )\n\n  const resolveIntentLink = useCallback(\n    (intentName: string, parameters?: IntentParameters): string => {\n      const [params, payload] = Array.isArray(parameters) ? parameters : [parameters]\n      return routerProp.encode({intent: intentName, params, payload})\n    },\n    [routerProp]\n  )\n\n  const resolvePathFromState = useCallback(\n    (nextState: Record<string, unknown>): string => {\n      return routerProp.encode(nextState)\n    },\n    [routerProp]\n  )\n\n  const navigate = useCallback(\n    (nextState: Record<string, unknown>, options: NavigateOptions = {}) => {\n      navigateUrl({path: resolvePathFromState(nextState), replace: options.replace})\n    },\n    [navigateUrl, resolvePathFromState]\n  )\n\n  const navigateIntent = useCallback(\n    (intentName: string, params?: IntentParameters, options: NavigateOptions = {}) => {\n      navigateUrl({path: resolveIntentLink(intentName, params), replace: options.replace})\n    },\n    [navigateUrl, resolveIntentLink]\n  )\n\n  const router: RouterContextValue = useMemo(\n    () => ({\n      navigate,\n      navigateIntent,\n      navigateUrl,\n      resolveIntentLink,\n      resolvePathFromState,\n      state,\n    }),\n    [navigate, navigateIntent, navigateUrl, resolveIntentLink, resolvePathFromState, state]\n  )\n\n  // Update state as new `state` prop comes in\n  useEffect(() => {\n    const prevState = stateRef.current\n    const nextState = stateProp\n\n    if (!isEqual(nextState, prevState)) {\n      setState(nextState)\n    }\n  }, [stateProp])\n\n  return <RouterContext.Provider value={router}>{props.children}</RouterContext.Provider>\n}\n","import React, {useMemo} from 'react'\nimport {useRouter} from './useRouter'\nimport {useLink} from './useLink'\n\nconst EMPTY_STATE = {}\n\n/**\n * @public\n */\nexport function useStateLink(props: {\n  onClick?: React.MouseEventHandler<HTMLElement>\n  replace?: boolean\n  state?: Record<string, unknown>\n  target?: string\n  toIndex?: boolean\n}): {\n  onClick: React.MouseEventHandler<HTMLElement>\n  href: string\n} {\n  const {onClick: onClickProp, replace, state, target, toIndex = false} = props\n\n  if (state && toIndex) {\n    throw new Error('Passing both `state` and `toIndex={true}` as props to StateLink is invalid')\n  }\n\n  if (!state && !toIndex) {\n    // eslint-disable-next-line no-console\n    console.error(\n      new Error(\n        'No state passed to StateLink. If you want to link to an empty state, its better to use the the `toIndex` property'\n      )\n    )\n  }\n\n  const {resolvePathFromState} = useRouter()\n\n  const href = useMemo(\n    () => resolvePathFromState(toIndex ? EMPTY_STATE : state || EMPTY_STATE),\n    [resolvePathFromState, state, toIndex]\n  )\n\n  const {onClick} = useLink({href, onClick: onClickProp, replace, target})\n\n  return {onClick, href}\n}\n","import React, {forwardRef} from 'react'\nimport {useStateLink} from './useStateLink'\n\n/**\n * @public\n */\nexport interface StateLinkProps {\n  replace?: boolean\n  state?: Record<string, unknown>\n  toIndex?: boolean\n}\n\n/**\n * @public\n */\nexport const StateLink = forwardRef(function StateLink(\n  props: StateLinkProps & Omit<React.HTMLProps<HTMLAnchorElement>, 'href'>,\n  ref: React.ForwardedRef<HTMLAnchorElement>\n) {\n  const {onClick: onClickProp, replace, state, target, toIndex = false, ...restProps} = props\n  const {onClick, href} = useStateLink({\n    onClick: onClickProp,\n    replace,\n    state,\n    target,\n    toIndex,\n  })\n\n  return <a {...restProps} href={href} onClick={onClick} ref={ref} />\n})\n","import {Route, RouteSegment} from './types'\n\nconst VALID_PARAM_SEGMENT = /^[a-zA-Z0-9_-]+$/\n\nfunction createSegment(segment: string): RouteSegment | null {\n  if (!segment) {\n    return null\n  }\n\n  if (segment.startsWith(':')) {\n    const paramName = segment.substring(1)\n\n    if (!VALID_PARAM_SEGMENT.test(paramName)) {\n      const addendum = segment.includes('*')\n        ? ' Splats are not supported. Consider using child routes instead'\n        : ''\n      // eslint-disable-next-line no-console\n      console.error(\n        new Error(`Warning: Param segments \"${segment}\" includes invalid characters.${addendum}`)\n      )\n    }\n\n    return {type: 'param', name: paramName}\n  }\n\n  return {type: 'dir', name: segment}\n}\n\n/** @internal */\nexport function _parseRoute(route: string): Route {\n  const [pathname] = route.split('?')\n\n  const segments = pathname.split('/').map(createSegment).filter(Boolean) as RouteSegment[]\n\n  return {\n    raw: route,\n    segments: segments,\n  }\n}\n","import Debug from 'debug'\n\nexport const debug = Debug('state-router')\n","export function arrayify<T>(val: Array<T> | T): Array<T> {\n  if (Array.isArray(val)) {\n    return val\n  }\n\n  return val ? [val] : []\n}\n","import {RouterNode} from './types'\nimport {debug} from './utils/debug'\nimport {arrayify} from './utils/arrayify'\n\nfunction matchPath(node: RouterNode, path: string): Record<string, string> | null {\n  const parts = path.split('/').filter(Boolean)\n  const segmentsLength = node.route.segments.length\n\n  if (parts.length < segmentsLength) {\n    return null\n  }\n\n  const state: Record<string, unknown> = {}\n  const isMatching = node.route.segments.every((segment, i) => {\n    if (segment.type === 'dir') {\n      return segment.name === parts[i]\n    }\n\n    const transform = node.transform && node.transform[segment.name]\n\n    state[segment.name] = transform ? transform.toState(parts[i]) : parts[i]\n\n    return true\n  })\n\n  if (!isMatching) {\n    return null\n  }\n\n  const rest = parts.slice(segmentsLength)\n\n  let childState: {\n    [key: string]: string\n  } | null = null\n\n  const children =\n    typeof node.children === 'function' ? arrayify(node.children(state)) : node.children\n\n  children.some((childNode) => {\n    // console.log('----childNode')\n    // console.log(childNode)\n    // console.log('----childNode')\n\n    if (childNode) {\n      childState = matchPath(childNode, rest.join('/'))\n\n      return childState\n    }\n\n    return undefined\n  })\n\n  if (rest.length > 0 && !childState) {\n    return null\n  }\n\n  const mergedState = {...state, ...(childState || {})}\n\n  return node.scope ? {[node.scope]: mergedState} : mergedState\n}\n\n/**\n * @internal\n */\nexport function _resolveStateFromPath(node: RouterNode, path: string): Record<string, any> | null {\n  debug('resolving state from path %s', path)\n\n  const pathMatch = matchPath(node, path.split('?')[0])\n\n  debug('resolved: %o', pathMatch || null)\n\n  return pathMatch || null\n}\n","import {difference, intersection, pick} from 'lodash'\nimport {isRecord} from '../util'\nimport {RouterNode, MatchResult} from './types'\nimport {arrayify} from './utils/arrayify'\n\nfunction createMatchResult(\n  nodes: RouterNode[],\n  missing: string[],\n  remaining: string[]\n): MatchResult {\n  return {nodes, missing, remaining}\n}\n\n/** @internal */\nexport function _findMatchingRoutes(\n  node: RouterNode,\n  _state?: Record<string, unknown>\n): MatchResult {\n  if (!_state) {\n    return createMatchResult([], [], [])\n  }\n\n  const state = node.scope ? _state[node.scope] : _state\n\n  const requiredParams = node.route.segments\n    .filter((seg) => seg.type === 'param')\n    .map((seg) => seg.name)\n\n  const stateKeys = isRecord(state) ? Object.keys(state) : []\n\n  const consumedParams = intersection(stateKeys, requiredParams)\n  const missingParams = difference(requiredParams, consumedParams)\n  const remainingParams = difference(stateKeys, consumedParams)\n\n  if (missingParams.length > 0) {\n    return createMatchResult([], missingParams, [])\n  }\n\n  if (remainingParams.length === 0) {\n    return createMatchResult([node], [], [])\n  }\n\n  const children = arrayify(\n    (typeof node.children === 'function'\n      ? node.children(isRecord(state) ? state : {})\n      : node.children) || []\n  )\n\n  if (remainingParams.length > 0 && children.length === 0) {\n    return createMatchResult([], remainingParams, [])\n  }\n\n  const remainingState = pick(state, remainingParams)\n\n  let matchingChild: MatchResult = {nodes: [], remaining: [], missing: []}\n\n  arrayify(children).some((childNode) => {\n    matchingChild = _findMatchingRoutes(childNode, remainingState)\n    return matchingChild.nodes.length > 0\n  })\n\n  if (matchingChild.nodes.length === 0) {\n    return createMatchResult([], missingParams, remainingParams)\n  }\n\n  return createMatchResult(\n    [node, ...matchingChild.nodes],\n    matchingChild.missing,\n    matchingChild.remaining\n  )\n}\n","import {flatten} from 'lodash'\nimport {_findMatchingRoutes} from './_findMatchingRoutes'\nimport {RouterNode, MatchResult} from './types'\nimport {debug} from './utils/debug'\n\n/** @internal */\nexport function _resolvePathFromState(node: RouterNode, state: Record<string, unknown>): string {\n  debug('Resolving path from state %o', state)\n\n  const match: MatchResult = _findMatchingRoutes(node, state)\n\n  if (match.remaining.length > 0) {\n    const remaining = match.remaining\n    throw new Error(\n      `Unable to find matching route for state. Could not map the following state key${\n        remaining.length == 1 ? '' : 's'\n      } to a valid url: ${remaining.join(', ')}`\n    )\n  }\n\n  if (match.nodes.length === 0) {\n    throw new Error(`Unable to resolve path from given state: ${JSON.stringify(state)}`)\n  }\n\n  let scopedState: Record<string, unknown> = state\n\n  const relative = flatten(\n    match.nodes.map((matchNode) => {\n      if (matchNode.scope && matchNode.scope in scopedState) {\n        scopedState = scopedState[matchNode.scope] as Record<string, unknown>\n      }\n\n      return matchNode.route.segments.map((segment) => {\n        if (segment.type === 'dir') {\n          return segment.name\n        }\n\n        const transform = matchNode.transform && matchNode.transform[segment.name]\n\n        return transform\n          ? transform.toPath(scopedState[segment.name] as any)\n          : scopedState[segment.name]\n      })\n    })\n  ).join('/')\n\n  debug('Resolved to /%s', relative)\n\n  return `/${relative}`\n}\n","export function decodeJsonParams(pathsegment = ''): Record<string, unknown> {\n  const segment = decodeURIComponent(pathsegment)\n\n  if (!segment) {\n    return {}\n  }\n\n  try {\n    return JSON.parse(atob(segment))\n  } catch (err) {\n    // Maybe try the old format (non-base64 encoded)\n  }\n\n  try {\n    return JSON.parse(segment)\n  } catch (err) {\n    console.warn('Failed to parse JSON parameters')\n  }\n\n  return {}\n}\n\nexport function encodeJsonParams(params?: Record<string, unknown>): string {\n  return params ? btoa(JSON.stringify(params)) : ''\n}\n","export function decodeParams(pathSegment: string): Record<string, string> {\n  return pathSegment.split(';').reduce<Record<string, string>>((params, pair) => {\n    const [key, value] = pair.split('=')\n\n    params[decodeURIComponent(key)] = decodeURIComponent(value)\n\n    return params\n  }, {})\n}\n\nexport function encodeParams(params: Record<string, string | undefined | null>): string {\n  return Object.entries(params)\n    .filter(([, value]) => value !== undefined && value !== null)\n    .map(([key, value]) => `${encodeURIComponent(key)}=${encodeURIComponent(value as string)}`)\n    .join(';')\n}\n","import {_parseRoute} from './_parseRoute'\nimport {_resolveStateFromPath} from './_resolveStateFromPath'\nimport {_resolvePathFromState} from './_resolvePathFromState'\nimport {RouteTransform, Router, RouteChildren} from './types'\nimport {decodeJsonParams, encodeJsonParams} from './utils/jsonParamsEncoding'\nimport {decodeParams, encodeParams} from './utils/paramsEncoding'\n\n/**\n * @public\n */\nexport type NodeOptions = {\n  path?: string\n  children?: RouteChildren\n  transform?: {\n    [key: string]: RouteTransform<any>\n  }\n  scope?: string\n}\n\n/**\n * @public\n */\nexport const route: {\n  create: (\n    routeOrOpts: NodeOptions | string,\n    childrenOrOpts?: NodeOptions | RouteChildren | null,\n    children?: Router | RouteChildren\n  ) => Router\n  intents: (base: string) => Router\n  scope: (scopeName: string, ...rest: any[]) => Router\n} = {create: createRoute, scope: routeScope, intents: routeIntents}\n\nfunction normalizeChildren(children: any): RouteChildren {\n  if (Array.isArray(children) || typeof children === 'function') {\n    return children\n  }\n  return children ? [children] : []\n}\n\nfunction isRoute(val?: NodeOptions | Router | RouteChildren) {\n  return val && '_isRoute' in val\n}\n\nfunction normalizeArgs(...args: any[]): NodeOptions\nfunction normalizeArgs(\n  path: string | NodeOptions,\n  childrenOrOpts?: NodeOptions | Router | RouteChildren,\n  children?: Router | RouteChildren\n): NodeOptions {\n  if (typeof path === 'object') {\n    return path\n  }\n\n  if (\n    Array.isArray(childrenOrOpts) ||\n    typeof childrenOrOpts === 'function' ||\n    isRoute(childrenOrOpts)\n  ) {\n    return {path, children: normalizeChildren(childrenOrOpts)}\n  }\n\n  if (children) {\n    return {path, ...childrenOrOpts, children: normalizeChildren(children)}\n  }\n\n  return {path, ...childrenOrOpts}\n}\n\nfunction createRoute(\n  routeOrOpts: NodeOptions | string,\n  childrenOrOpts?: NodeOptions | RouteChildren | null,\n  children?: Router | RouteChildren\n): Router {\n  return createNode(normalizeArgs(routeOrOpts, childrenOrOpts, children))\n}\n\nfunction routeScope(scopeName: string, ...rest: any[]): Router {\n  const options = normalizeArgs(...rest)\n\n  return createNode({\n    ...options,\n    scope: scopeName,\n  })\n}\n\nfunction normalize(...paths: string[]) {\n  return paths.reduce<string[]>((acc, path) => acc.concat(path.split('/')), []).filter(Boolean)\n}\n\nfunction routeIntents(base: string): Router {\n  const basePath = normalize(base).join('/')\n\n  return route.create(`${basePath}/:intent`, [\n    route.create(\n      ':params',\n      {\n        transform: {\n          params: {\n            toState: decodeParams,\n            toPath: encodeParams,\n          },\n        },\n      },\n      [\n        route.create(':payload', {\n          transform: {\n            payload: {\n              toState: decodeJsonParams,\n              toPath: encodeJsonParams,\n            },\n          },\n        }),\n      ]\n    ),\n  ])\n}\n\nconst EMPTY_STATE = {}\n\nfunction isRoot(pathname: string): boolean {\n  // it is the root if every segment is an empty string\n  return pathname.split('/').every((segment) => !segment)\n}\n\nfunction createNode(options: NodeOptions): Router {\n  const {path, scope, transform, children} = options\n\n  if (!path) {\n    throw new TypeError('Missing path')\n  }\n\n  const parsedRoute = _parseRoute(path)\n\n  return {\n    _isRoute: true, // todo: make a Router class instead\n    scope,\n    route: parsedRoute,\n    children: children || [],\n    transform,\n    encode(state) {\n      return _resolvePathFromState(this, state)\n    },\n    decode(_path) {\n      return _resolveStateFromPath(this, _path)\n    },\n    isRoot: isRoot,\n    isNotFound(pathname: string): boolean {\n      return this.decode(pathname) === null\n    },\n    getBasePath(): string {\n      return this.encode(EMPTY_STATE)\n    },\n    getRedirectBase(pathname: string): string | null {\n      if (isRoot(pathname)) {\n        const basePath = this.getBasePath()\n        // Check if basepath is something different than given\n        if (pathname !== basePath) {\n          return basePath\n        }\n      }\n      return null\n    },\n  }\n}\n","import {identity} from 'lodash'\nimport {useEffect, useState} from 'react'\nimport {RouterState} from './types'\nimport {useRouter} from './useRouter'\n\n/**\n * @public\n */\nexport function useRouterState<R = RouterState>(selector: (routerState: RouterState) => R): R\n\n/**\n * @public\n */\nexport function useRouterState(): RouterState\n\n/**\n * @public\n */\nexport function useRouterState(\n  selector: (routerState: RouterState) => unknown = identity\n): unknown {\n  const {state} = useRouter()\n  const [selectedState, setState] = useState(() => selector(state))\n\n  // reset the state when the `selector` prop changes\n  useEffect(() => setState(selector(state)), [selector, state])\n\n  return selectedState\n}\n","import React, {ComponentType, FunctionComponent} from 'react'\nimport {RouterContextValue} from './types'\nimport {useRouter} from './useRouter'\n\n/**\n * @public\n */\nexport function withRouter<Props extends {router: RouterContextValue}>(\n  Component: ComponentType<Props>\n): FunctionComponent<Omit<Props, 'router'>> {\n  function WithRouter(props: Omit<Props, 'router'>) {\n    const router = useRouter()\n\n    return <Component {...(props as Props)} router={router} />\n  }\n\n  WithRouter.displayName = `withRouter(${Component.displayName || Component.name})`\n\n  return WithRouter\n}\n\n/**\n * @public\n */\nexport interface WithRouterProps {\n  router: RouterContextValue\n  children: (router: RouterContextValue) => React.ReactElement\n}\n\n/**\n * @public\n */\nexport const WithRouter = withRouter((props: WithRouterProps) => props.children(props.router))\n","import React, {forwardRef, useMemo} from 'react'\nimport {StateLink, useRouterState} from '../../../../router'\n\nexport interface ToolLinkProps {\n  children: React.ReactNode\n  name: string\n}\n\nexport const ToolLink = forwardRef(function ToolLink(\n  props: ToolLinkProps & Omit<React.HTMLProps<HTMLAnchorElement>, 'href' | 'name'>,\n  ref: React.ForwardedRef<HTMLAnchorElement>\n) {\n  const {name, ...rest} = props\n  const routerState = useRouterState()\n\n  const state = useMemo(\n    () => ({...routerState, tool: name, [name]: undefined}),\n    [routerState, name]\n  )\n\n  return <StateLink state={state} {...rest} ref={ref} />\n})\n","import {UnknownIcon} from '@sanity/icons'\nimport React, {forwardRef, useMemo, useState} from 'react'\nimport {startCase} from 'lodash'\nimport {CollapseMenu, CollapseMenuButton} from '../../../../components/collapseMenu'\nimport {useRovingFocus} from '../../../../components/rovingFocus'\nimport {useColorScheme} from '../../../colorScheme'\nimport {Tool} from '../../../../config'\nimport {ToolLink, ToolLinkProps} from './ToolLink'\n\ninterface ToolCollapseMenuProps {\n  activeToolName?: string\n  tools: Tool[]\n}\n\nexport function ToolCollapseMenu(props: ToolCollapseMenuProps) {\n  const {activeToolName, tools} = props\n  const {scheme} = useColorScheme()\n  const [collapseMenuEl, setCollapseMenuEl] = useState<HTMLDivElement | null>(null)\n\n  useRovingFocus({\n    rootElement: collapseMenuEl,\n    navigation: ['arrows'],\n  })\n\n  const menuButtonProps = useMemo(\n    () => ({\n      popover: {\n        constrainSize: true,\n        portal: true,\n        scheme: scheme,\n      },\n    }),\n    [scheme]\n  )\n\n  const children = useMemo(\n    () =>\n      tools.map((tool, index) => {\n        const title = tool?.title || startCase(tool.name) || undefined\n\n        const Link = forwardRef(function Link(\n          linkProps: ToolLinkProps,\n          ref: React.Ref<HTMLAnchorElement>\n        ) {\n          return <ToolLink {...linkProps} ref={ref} name={tool.name} />\n        })\n\n        return (\n          <CollapseMenuButton\n            as={Link}\n            collapsedProps={{tooltipText: tool.title}}\n            icon={tool.icon || UnknownIcon}\n            // eslint-disable-next-line react/no-array-index-key\n            key={`${tool.name}-${index}`}\n            mode=\"bleed\"\n            selected={activeToolName === tool.name}\n            text={title}\n            tooltipProps={{scheme: scheme}}\n          />\n        )\n      }),\n    [activeToolName, scheme, tools]\n  )\n\n  return (\n    <CollapseMenu gap={1} menuButtonProps={menuButtonProps} ref={setCollapseMenuEl}>\n      {children}\n    </CollapseMenu>\n  )\n}\n","import React, {forwardRef, useMemo} from 'react'\nimport {Button, Stack} from '@sanity/ui'\nimport {PlugIcon} from '@sanity/icons'\nimport {startCase} from 'lodash'\nimport {Tool} from '../../../../config'\nimport {ToolLinkProps, ToolLink} from './ToolLink'\n\ninterface ToolVerticalMenuProps {\n  activeToolName?: string\n  isVisible: boolean\n  tools: Tool[]\n}\n\nexport function ToolVerticalMenu(props: ToolVerticalMenuProps) {\n  const {activeToolName, isVisible, tools} = props\n\n  return useMemo(\n    () => (\n      <Stack as=\"ul\" space={[1, 2]}>\n        {tools.map((tool) => {\n          const title = tool?.title || startCase(tool.name) || undefined\n\n          const Link = forwardRef(function Link(\n            linkProps: ToolLinkProps,\n            ref: React.Ref<HTMLAnchorElement>\n          ) {\n            return <ToolLink {...linkProps} ref={ref} name={tool.name} />\n          })\n\n          return (\n            <Stack as=\"li\" key={tool.name}>\n              <Button\n                as={Link}\n                icon={tool.icon || PlugIcon}\n                justify=\"flex-start\"\n                mode=\"bleed\"\n                selected={activeToolName === tool.name}\n                tabIndex={isVisible ? 0 : -1}\n                text={title}\n              />\n            </Stack>\n          )\n        })}\n      </Stack>\n    ),\n    [activeToolName, isVisible, tools]\n  )\n}\n","import React from 'react'\nimport {Tool} from '../../../../config'\nimport {ToolCollapseMenu} from './ToolCollapseMenu'\nimport {ToolVerticalMenu} from './ToolVerticalMenu'\n\nexport interface ToolMenuProps {\n  activeToolName?: string\n  context: 'drawer' | 'topbar'\n  isDrawerOpen: boolean\n  tools: Tool[]\n  closeDrawer: () => void\n}\n\nexport function ToolMenu(props: ToolMenuProps) {\n  const {context, isDrawerOpen, ...restProps} = props\n\n  if (context === 'drawer') {\n    return <ToolVerticalMenu isVisible={isDrawerOpen} {...restProps} />\n  }\n\n  return <ToolCollapseMenu {...restProps} />\n}\n","import {createContext} from 'react'\nimport {UserColorManager} from './types'\n\nexport const UserColorManagerContext = createContext<UserColorManager | null>(null)\n","import {useContext} from 'react'\nimport {empty} from 'rxjs'\nimport {useMemoObservable} from 'react-rx'\nimport {UserColorManagerContext} from './context'\nimport {UserColor, UserColorManager} from './types'\n\nexport function useUserColorManager(): UserColorManager {\n  const userColorManager = useContext(UserColorManagerContext)\n\n  if (!userColorManager) {\n    throw new Error('UserColorManager: missing context value')\n  }\n\n  return userColorManager\n}\n\nexport function useUserColor(userId: string | null): UserColor {\n  const manager = useUserColorManager()\n\n  return useMemoObservable(userId ? manager.listen(userId) : empty(), [userId], manager.get(null))\n}\n","import {Observable} from 'rxjs'\nimport {shareReplay} from 'rxjs/operators'\nimport {hues, ColorHueKey, COLOR_HUES} from '@sanity/color'\nimport {UserColorHue, UserColorManager, UserColor, UserId} from './types'\n\nexport interface UserColorManagerOptions {\n  anonymousColor?: UserColor\n  userStore?: {me: Observable<{id: string} | null>}\n  colors?: Record<UserColorHue, UserColor>\n  currentUserColor?: UserColorHue\n}\n\nconst defaultCurrentUserHue: ColorHueKey = 'purple'\n\n// Exclude green and red because they can be confused with \"add\" and \"remove\"\n// Exclude gray because it looks like \"color not found\"\nconst USER_COLOR_EXCLUDE_HUES = ['green', 'red', 'gray']\n\nconst defaultHues: ColorHueKey[] = COLOR_HUES.filter(\n  (hue) => !USER_COLOR_EXCLUDE_HUES.includes(hue)\n)\n\nconst defaultColors = defaultHues.reduce((colors, hue) => {\n  colors[hue] = {\n    name: hue,\n    background: hues[hue][100].hex,\n    border: hues[hue][300].hex,\n    text: hues[hue][700].hex,\n    tints: hues[hue],\n  }\n  return colors\n}, {} as Record<ColorHueKey, UserColor>)\n\nconst defaultAnonymousColor: UserColor = {\n  name: 'gray',\n  background: hues.gray[100].hex,\n  border: hues.gray[300].hex,\n  text: hues.gray[700].hex,\n  tints: hues.gray,\n}\n\nexport function createUserColorManager(options?: UserColorManagerOptions): UserColorManager {\n  const userColors = (options && options.colors) || defaultColors\n  const anonymousColor = options?.anonymousColor || defaultAnonymousColor\n  const currentUserColor = (options && options.currentUserColor) || defaultCurrentUserHue\n\n  if (!userColors.hasOwnProperty(currentUserColor)) {\n    throw new Error(`'colors' must contain 'currentUserColor' (${currentUserColor})`)\n  }\n\n  const userColorKeys: UserColorHue[] = Object.keys(userColors)\n  const subscriptions = new Map<UserId, Observable<UserColor>>()\n  const previouslyAssigned = new Map<UserId, UserColorHue>()\n  const assignedCounts: Record<UserColorHue, number> = userColorKeys.reduce((counts, color) => {\n    counts[color] = 0\n    return counts\n  }, {} as Record<UserColorHue, number>)\n\n  // This isn't really needed because we're reusing subscriptions,\n  // but is useful for debugging and poses a minimal overhead\n  const assigned = new Map<UserId, UserColorHue>()\n\n  let currentUserId: UserId | null\n\n  if (options?.userStore) {\n    options.userStore.me.subscribe((user) => setCurrentUser(user ? user.id : null))\n  }\n\n  return {get, listen}\n\n  function get(userId: UserId | null): UserColor {\n    if (!userId) {\n      return anonymousColor\n    }\n\n    return userColors[getUserHue(userId)]\n  }\n\n  function getUserHue(userId: UserId): UserColorHue {\n    if (userId === currentUserId) {\n      return currentUserColor\n    }\n\n    const assignedHue = assigned.get(userId)\n    if (assignedHue) {\n      return assignedHue\n    }\n\n    // Prefer to reuse the color previously assigned, BUT:\n    // ONLY if it's unused -or- there are no other unused colors\n    const prevHue = previouslyAssigned.get(userId)\n    if (prevHue && (assignedCounts[prevHue] === 0 || !hasUnusedColor())) {\n      return assignHue(userId, prevHue)\n    }\n\n    // Prefer \"static\" color based on user ID if unused\n    const preferredHue = getPreferredHue(userId)\n    if (assignedCounts[preferredHue] === 0) {\n      return assignHue(userId, preferredHue)\n    }\n\n    // Fall back to least used color, with a preference on the previous\n    // used color if there are ties for least used\n    return assignHue(userId, getLeastUsedHue(prevHue))\n  }\n\n  function listen(userId: string): Observable<UserColor> {\n    let subscription = subscriptions.get(userId)\n    if (subscription) {\n      return subscription\n    }\n\n    const hue = getUserHue(userId)\n    subscription = getObservableColor(userId, hue)\n    subscriptions.set(userId, subscription)\n    return subscription\n  }\n\n  function assignHue(userId: string, hue: UserColorHue): UserColorHue {\n    assigned.set(userId, hue)\n    previouslyAssigned.set(userId, hue)\n    assignedCounts[hue]++\n    return hue\n  }\n\n  function unassignHue(userId: string, hue: UserColorHue) {\n    assigned.delete(userId)\n    assignedCounts[hue]--\n  }\n\n  function getUnusedColor(): UserColorHue | undefined {\n    return userColorKeys.find((colorHue) => assignedCounts[colorHue] === 0)\n  }\n\n  function hasUnusedColor(): boolean {\n    return Boolean(getUnusedColor())\n  }\n\n  function getLeastUsedHue(tieBreakerPreference?: UserColorHue): UserColorHue {\n    let leastUses = +Infinity\n    let leastUsed: UserColorHue[] = []\n\n    userColorKeys.forEach((colorHue) => {\n      const uses = assignedCounts[colorHue]\n      if (uses === leastUses) {\n        leastUsed.push(colorHue)\n      } else if (uses < leastUses) {\n        leastUses = uses\n        leastUsed = [colorHue]\n      }\n    })\n\n    return tieBreakerPreference && leastUsed.includes(tieBreakerPreference)\n      ? tieBreakerPreference\n      : leastUsed[0]\n  }\n\n  function getObservableColor(userId: string, hue: UserColorHue): Observable<UserColor> {\n    return new Observable<UserColor>((subscriber) => {\n      const userColor = userColors[hue]\n      subscriber.next(userColor)\n      return () => {\n        subscriptions.delete(userId)\n        unassignHue(userId, hue)\n      }\n    }).pipe(shareReplay({refCount: true}))\n  }\n\n  function setCurrentUser(userId: string | null) {\n    currentUserId = userId\n    assignedCounts[currentUserColor] += userId ? 1 : -1\n  }\n\n  function getPreferredHue(userId: string): UserColorHue {\n    let hash = 0\n    for (let i = 0; i < userId.length; i++) {\n      // eslint-disable-next-line no-bitwise\n      hash = ((hash << 5) - hash + userId.charCodeAt(i)) | 0\n    }\n    return userColorKeys[Math.abs(hash) % userColorKeys.length]\n  }\n}\n","import React, {useMemo} from 'react'\nimport {UserColorManagerContext} from './context'\nimport {UserColorManager} from './types'\nimport {createUserColorManager} from './manager'\n\nexport interface UserColorManagerProviderProps {\n  children: React.ReactNode\n  manager?: UserColorManager\n}\n\nexport function UserColorManagerProvider({\n  children,\n  manager: managerFromProps,\n}: UserColorManagerProviderProps): React.ReactElement {\n  const manager = useMemo(() => {\n    return managerFromProps || createUserColorManager()\n  }, [managerFromProps])\n\n  return (\n    <UserColorManagerContext.Provider value={manager}>{children}</UserColorManagerContext.Provider>\n  )\n}\n","interface MultiKeyWeakMapNode {\n  type: 'multi-key-weak-map-node'\n  value: unknown\n  next: WeakMap<object, MultiKeyWeakMapNode>\n}\n\nexport interface MultiKeyWeakMap {\n  get<T>(keys: object[]): T | undefined\n  get(keys: object[]): unknown\n\n  set(keys: object[], value: unknown): void\n}\n\nexport function createMultiKeyWeakMap(): MultiKeyWeakMap {\n  const rootMap = new WeakMap<object, MultiKeyWeakMapNode>()\n  const idCache = new WeakMap<object, string>()\n\n  function randomId() {\n    return Array.from({length: 10})\n      .map(() =>\n        Math.floor(Math.random() * 255)\n          .toString(16)\n          .padStart(2, '0')\n      )\n      .join('')\n  }\n\n  function assignId(key: object) {\n    const cachedId = idCache.get(key)\n    if (cachedId) return cachedId\n    const id = randomId()\n    idCache.set(key, id)\n    return id\n  }\n\n  function arrangeKeys(keys: object[]) {\n    return Array.from(new Set(keys))\n      .map((key) => [assignId(key), key] as const)\n      .sort(([a], [b]) => a.localeCompare(b, 'en'))\n      .map(([, key]) => key)\n  }\n\n  function getDeep(keys: object[], map: WeakMap<object, MultiKeyWeakMapNode>): unknown {\n    if (!keys.length) return undefined\n    const [firstKey, ...restOfKeys] = keys\n    const node = map.get(firstKey)\n\n    if (!node) return undefined\n    if (!restOfKeys.length) return node.value\n    return getDeep(restOfKeys, node.next)\n  }\n\n  function setDeep(\n    keys: object[],\n    map: WeakMap<object, MultiKeyWeakMapNode>,\n    value: unknown\n  ): void {\n    if (!keys.length) return\n\n    const [firstKey, ...restOfKeys] = keys\n    const node = map.get(firstKey) || {\n      type: 'multi-key-weak-map-node',\n      value: undefined,\n      next: new WeakMap(),\n    }\n    map.set(firstKey, node)\n\n    if (!restOfKeys.length) {\n      node.value = value\n      return\n    }\n\n    setDeep(restOfKeys, node.next, value)\n  }\n\n  function get<T>(keys: object[]): T | undefined\n  function get(keys: object[]) {\n    return getDeep(arrangeKeys(keys), rootMap)\n  }\n\n  function set(keys: object[], value: unknown) {\n    setDeep(arrangeKeys(keys), rootMap, value)\n  }\n\n  return {get, set}\n}\n","import React, {createContext, useContext, useMemo} from 'react'\nimport {createMultiKeyWeakMap, MultiKeyWeakMap} from './createMultiKeyWeakMap'\n\ninterface ResourceCache {\n  get<T = unknown>(options: {namespace: string; dependencies: (object | null)[]}): T | undefined\n  set(options: {namespace: string; dependencies: (object | null)[]; value: unknown}): void\n}\n\nconst ResourceCacheContext = createContext<ResourceCache | null>(null)\n\ninterface CacheProviderProps {\n  children: React.ReactNode\n}\n\nexport function ResourceCacheProvider({children}: CacheProviderProps) {\n  const resourceCache = useMemo((): ResourceCache => {\n    const namespaces = new Map<string, MultiKeyWeakMap>()\n\n    // this is used to replace the `null` values in any `dependencies` so that\n    // they can be used in the `MultiKeyWeakMap` which doesn't accept null\n    const nullReplacer = {}\n\n    return {\n      get: ({namespace, dependencies}) => {\n        const dependenciesWithoutNull = dependencies.map((dep) =>\n          dep === null ? nullReplacer : dep\n        )\n        const namespaceMap = namespaces.get(namespace)\n        return namespaceMap?.get(dependenciesWithoutNull)\n      },\n\n      set: ({namespace, dependencies, value}) => {\n        const namespaceMap = namespaces.get(namespace) || createMultiKeyWeakMap()\n        const dependenciesWithoutNull = dependencies.map((dep) =>\n          dep === null ? nullReplacer : dep\n        )\n        namespaces.set(namespace, namespaceMap)\n        namespaceMap.set(dependenciesWithoutNull, value)\n      },\n    }\n  }, [])\n\n  return (\n    <ResourceCacheContext.Provider value={resourceCache}>{children}</ResourceCacheContext.Provider>\n  )\n}\n\nexport function useResourceCache() {\n  const cache = useContext(ResourceCacheContext)\n  if (!cache) throw new Error('Could not find `cache` context')\n  return cache\n}\n","import {createContext} from 'react'\nimport {History} from 'history'\nimport {WorkspaceSummary} from '../../config'\n\nexport interface ActiveWorkspaceMatcherContextValue {\n  activeWorkspace: WorkspaceSummary\n  setActiveWorkspace: (workspaceName: string) => void\n  /**\n   * @deprecated internal use only\n   */\n  __internal: {\n    history: History\n  }\n}\n\nexport const ActiveWorkspaceMatcherContext =\n  createContext<ActiveWorkspaceMatcherContextValue | null>(null)\n","import {createContext} from 'react'\nimport {WorkspaceSummary} from '../../config'\n\nexport type WorkspacesContextValue = WorkspaceSummary[]\n\nexport const WorkspacesContext = createContext<WorkspacesContextValue | null>(null)\n","import {useContext} from 'react'\nimport {WorkspaceSummary} from '../../config'\nimport {WorkspacesContext} from './WorkspacesContext'\n\nexport function useWorkspaces(): WorkspaceSummary[] {\n  const workspaces = useContext(WorkspacesContext)\n  if (!workspaces) throw new Error('Could not find `workspaces` context')\n  return workspaces\n}\n","import React, {useMemo} from 'react'\nimport {Config, prepareConfig} from '../../config'\nimport {WorkspacesContext} from './WorkspacesContext'\n\ninterface WorkspaceProviderProps {\n  config: Config\n  children: React.ReactNode\n}\n\nexport function WorkspacesProvider({config, children}: WorkspaceProviderProps) {\n  const {workspaces} = useMemo(() => prepareConfig(config), [config])\n  return <WorkspacesContext.Provider value={workspaces}>{children}</WorkspacesContext.Provider>\n}\n","import {escapeRegExp} from 'lodash'\nimport {WorkspaceLike} from '../workspaces'\n\ninterface MatchWorkspaceOptions<TWorkspace extends WorkspaceLike> {\n  workspaces: TWorkspace[]\n  pathname: string\n}\n\ntype MatchWorkspaceResult<TWorkspace extends WorkspaceLike> =\n  | {type: 'match'; workspace: TWorkspace}\n  | {type: 'redirect'; pathname: string}\n  | {type: 'not-found'}\n\n/**\n * Given a pathname and a list of workspaces, returns either a workspace match,\n * a redirect, or not-found.\n *\n * Throws if the workspace `basePaths` could result in ambiguous matches.\n */\nexport function matchWorkspace<TWorkspace extends WorkspaceLike>({\n  pathname,\n  workspaces,\n}: MatchWorkspaceOptions<TWorkspace>): MatchWorkspaceResult<TWorkspace> {\n  const normalized = workspaces.map((workspace) => ({\n    workspace,\n    name: workspace.name,\n    basePath: workspace.basePath || '/',\n  }))\n\n  const [firstWorkspace] = normalized\n  for (const {workspace, basePath} of normalized) {\n    // this regex ends with a `(\\\\/|$)` (forward slash or end) to prevent false\n    // matches where the pathname is a false subset of the current pathname.\n    // e.g. if the `workspace.basePath` is `/base/foobar` and the current\n    // pathname is `/base/foo`, then that should not be a match\n    if (new RegExp(`^${escapeRegExp(basePath)}(\\\\/|$)`, 'i').test(pathname) || basePath === '/') {\n      return {type: 'match', workspace}\n    }\n  }\n\n  const workspaceSegments = normalized.map((workspace) =>\n    // gets the segments from the basePath\n    workspace.basePath\n      // removes the leading `/`\n      .substring(1)\n      .split('/')\n  )\n\n  // if the pathname is only a leading slash, then return a redirect\n  if (pathname === '/') {\n    return {type: 'redirect', pathname: firstWorkspace.basePath}\n  }\n\n  // this common base path is used to check if we should redirect. it's the base\n  // path that is common between all the workspaces.\n  const commonBasePath = workspaceSegments.reduce((commonSegments, segments) => {\n    for (let i = 0; i < commonSegments.length; i++) {\n      const commonSegment = commonSegments[i]\n      const segment = segments[i].toLowerCase()\n\n      if (commonSegment !== segment) {\n        return commonSegments.slice(0, i)\n      }\n    }\n\n    return commonSegments\n  })\n\n  // recursively creates a matching expression\n  // `/foo/bar/baz` becomes `(\\/foo(\\/bar(\\/baz(\\/|$))?(\\/|$))?(\\/|$))?`\n  function createCommonBasePathRegex([first, ...rest]: string[]): string {\n    if (!first) return ''\n    return `(\\\\/${escapeRegExp(first)}${createCommonBasePathRegex(rest)}(\\\\/|$))?`\n  }\n\n  if (new RegExp(`^${createCommonBasePathRegex(commonBasePath)}$`, 'i').test(pathname)) {\n    // redirect to the first workspace configured\n    return {type: 'redirect', pathname: firstWorkspace.basePath}\n  }\n\n  // if the pathname was not a subset of the common base path, then the route\n  // the user is looking for is not present and we should show some sort of 404\n  // screen\n  return {type: 'not-found'}\n}\n","import React, {useCallback, useEffect, useMemo, useState} from 'react'\nimport {History, createBrowserHistory, createMemoryHistory} from 'history'\nimport {Observable} from 'rxjs'\nimport {map} from 'rxjs/operators'\nimport {useWorkspaces} from '../workspaces'\nimport {WorkspaceSummary} from '../../config'\nimport {\n  ActiveWorkspaceMatcherContext,\n  ActiveWorkspaceMatcherContextValue,\n} from './ActiveWorkspaceMatcherContext'\nimport {matchWorkspace} from './matchWorkspace'\n\ninterface ActiveWorkspaceMatcherProps {\n  children?: React.ReactChild\n  unstable_history?: History\n  NotFoundComponent: React.ComponentType<{onNavigateToDefaultWorkspace: () => void}>\n  LoadingComponent: React.ComponentType\n}\n\nconst createHistory = () =>\n  typeof document === 'undefined' ? createMemoryHistory() : createBrowserHistory()\n\nexport function ActiveWorkspaceMatcher({\n  children,\n  LoadingComponent,\n  NotFoundComponent,\n  unstable_history: historyProp,\n}: ActiveWorkspaceMatcherProps) {\n  const [error, setError] = useState<unknown>(null)\n\n  // Throw error to closest error boundary\n  if (error) throw error\n\n  const workspaces = useWorkspaces()\n\n  const [activeWorkspace, setActiveWorkspace] = useState<WorkspaceSummary | null>(null)\n  const [notFound, setNotFound] = useState(false)\n\n  const history = useMemo(() => historyProp || createHistory(), [historyProp])\n\n  useEffect(() => {\n    const pathname$ = new Observable<string>((observer) => {\n      const unlisten = history.listen((location) => observer.next(location.pathname))\n\n      // Emit initial pathname\n      observer.next(history.location.pathname || '/')\n\n      return unlisten\n    })\n\n    const subscription = pathname$\n      .pipe(map((pathname) => matchWorkspace({pathname, workspaces})))\n      .subscribe({\n        error: setError,\n        next: (result) => {\n          if (result.type === 'match') {\n            setNotFound(false)\n            setActiveWorkspace(result.workspace)\n          }\n\n          if (result.type === 'redirect') {\n            history.replace(result.pathname)\n          }\n\n          if (result.type === 'not-found') {\n            setNotFound(true)\n          }\n        },\n      })\n\n    return () => subscription.unsubscribe()\n  }, [history, workspaces])\n\n  const setActiveWorkspaceName = useCallback(\n    (workspaceName: string) => {\n      const foundWorkspace = workspaces.find((workspace) => workspace.name === workspaceName)\n      if (foundWorkspace) {\n        history.push(foundWorkspace.basePath)\n      }\n    },\n    [history, workspaces]\n  )\n\n  const defaultWorkspaceName = workspaces[0].name\n  const handleNavigateToDefaultWorkspace = useCallback(() => {\n    setActiveWorkspaceName(defaultWorkspaceName)\n  }, [setActiveWorkspaceName, defaultWorkspaceName])\n\n  const value = useMemo(\n    () => ({\n      __internal: {history},\n      activeWorkspace,\n      setActiveWorkspace: setActiveWorkspaceName,\n    }),\n    [history, activeWorkspace, setActiveWorkspaceName]\n  )\n\n  if (notFound) {\n    return <NotFoundComponent onNavigateToDefaultWorkspace={handleNavigateToDefaultWorkspace} />\n  }\n\n  if (!value.activeWorkspace) {\n    return <LoadingComponent />\n  }\n\n  return (\n    <ActiveWorkspaceMatcherContext.Provider value={value as ActiveWorkspaceMatcherContextValue}>\n      {children}\n    </ActiveWorkspaceMatcherContext.Provider>\n  )\n}\n","import {useContext} from 'react'\nimport {\n  ActiveWorkspaceMatcherContext,\n  ActiveWorkspaceMatcherContextValue,\n} from './ActiveWorkspaceMatcherContext'\n\nexport function useActiveWorkspace(): ActiveWorkspaceMatcherContextValue {\n  const value = useContext(ActiveWorkspaceMatcherContext)\n  if (!value) throw new Error('Could not find `ActiveWorkspaceMatcher` context')\n  return value\n}\n","import React from 'react'\nimport {ThemeProvider, LayerProvider} from '@sanity/ui'\nimport {useActiveWorkspace} from './activeWorkspaceMatcher'\nimport {useColorScheme} from './colorScheme'\n\ninterface StudioThemeProviderProps {\n  children: React.ReactChild\n}\n\nexport function StudioThemeProvider({children}: StudioThemeProviderProps) {\n  const theme = useActiveWorkspace().activeWorkspace.theme\n  const {scheme} = useColorScheme()\n\n  return (\n    <ThemeProvider scheme={scheme} theme={theme}>\n      <LayerProvider>{children}</LayerProvider>\n    </ThemeProvider>\n  )\n}\n","import type {GlobalErrorChannel} from '../components/globalErrorHandler'\n\n/**\n * Gets the global scope instance in a given environment.\n *\n * The strategy is to return the most modern, and if not, the most common:\n * - The `globalThis` variable is the modern approach to accessing the global scope\n * - The `window` variable is the global scope in a web browser\n * - The `self` variable is the global scope in workers and others\n * - The `global` variable is the global scope in Node.js\n */\nfunction getGlobalScope(): typeof globalThis & {__sanityErrorChannel?: GlobalErrorChannel} {\n  if (typeof globalThis !== 'undefined') return globalThis\n  if (typeof window !== 'undefined') return window\n  if (typeof self !== 'undefined') return self\n  if (typeof global !== 'undefined') return global\n\n  throw new Error('@sanity/ui: could not locate global scope')\n}\n\nexport const globalScope = getGlobalScope()\n","import React from 'react'\nimport {Flex, Spinner, Card, Text} from '@sanity/ui'\n\nexport function LoadingScreen() {\n  return (\n    // TODO: improve the design of this\n    // think about having it load in the `_document` too\n    <Flex\n      // TODO: currently this card is here to accommodate dark mode vs light\n      // mode backgrounds, however that logic should probably exist globally\n      as={Card}\n      justify=\"center\"\n      align=\"center\"\n      height=\"fill\"\n      direction=\"column\"\n      gap={4}\n    >\n      <Text muted>Loading…</Text>\n      <Spinner muted />\n    </Flex>\n  )\n}\n","import {ErrorOutlineIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Breadcrumbs, Card, Flex, Stack, Text, ThemeColorToneKey} from '@sanity/ui'\nimport {generateHelpUrl} from '@sanity/generate-help-url'\nimport {SchemaValidationProblemGroup} from '@sanity/types'\nimport React, {useMemo} from 'react'\nimport styled from 'styled-components'\nimport {capitalize} from 'lodash'\n\nconst TONES: Record<'error' | 'warning', ThemeColorToneKey> = {\n  error: 'critical',\n  warning: 'caution',\n}\n\nconst SegmentSpan = styled.code`\n  && {\n    background: none;\n    color: inherit;\n  }\n`\n\nconst ErrorMessageText = styled(Text)`\n  white-space: pre-line;\n`\n\nexport function SchemaProblemGroups(props: {problemGroups: SchemaValidationProblemGroup[]}) {\n  const {problemGroups} = props\n\n  const items = useMemo(() => {\n    const ret = []\n\n    for (const problemGroup of problemGroups) {\n      for (const problem of problemGroup.problems) {\n        ret.push({group: problemGroup, problem})\n      }\n    }\n\n    return ret\n  }, [problemGroups])\n\n  return (\n    <Stack as=\"ul\" space={4}>\n      {items.map(({group, problem}, i) => {\n        const isError = problem.severity === 'error'\n        const isWarning = problem.severity === 'warning'\n        const schemaType = getTypeInfo(group)\n        return (\n          <Card border key={i} padding={4} radius={2} tone={TONES[problem.severity]}>\n            <Flex>\n              <Box marginRight={3}>\n                <Text muted size={1}>\n                  {isError && <ErrorOutlineIcon />}\n                  {isWarning && <WarningOutlineIcon />}\n                </Text>\n              </Box>\n\n              <Box flex={1}>\n                <Text size={1} weight=\"semibold\">\n                  {schemaType ? (\n                    <>\n                      {capitalize(schemaType.type)} type \"{schemaType.name}\"\n                    </>\n                  ) : null}\n                </Text>\n              </Box>\n            </Flex>\n            <Box marginTop={4}>\n              <Card border overflow=\"auto\" padding={2} tone=\"inherit\">\n                <Breadcrumbs\n                  separator={\n                    <Text muted size={1}>\n                      &rarr;\n                    </Text>\n                  }\n                >\n                  {group.path.map((segment, j) => {\n                    if (segment.kind === 'type') {\n                      return (\n                        <Text key={j} size={1}>\n                          <SegmentSpan>{`${_renderSegmentName(segment.name)}:${\n                            segment.type\n                          }`}</SegmentSpan>\n                        </Text>\n                      )\n                    }\n\n                    if (segment.kind === 'property') {\n                      return (\n                        <Text key={j} size={1}>\n                          <SegmentSpan>{segment.name}</SegmentSpan>\n                        </Text>\n                      )\n                    }\n\n                    return null\n                  })}\n                </Breadcrumbs>\n              </Card>\n            </Box>\n\n            <Box as=\"ul\" marginTop={4}>\n              <Box as=\"li\">\n                <Stack space={3}>\n                  <ErrorMessageText muted size={1}>\n                    {problem.message}\n                  </ErrorMessageText>\n\n                  {problem.helpId && (\n                    <Text muted size={1}>\n                      <a\n                        href={generateHelpUrl(problem.helpId)}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        View documentation &rarr;\n                      </a>\n                    </Text>\n                  )}\n                </Stack>\n              </Box>\n            </Box>\n          </Card>\n        )\n      })}\n    </Stack>\n  )\n}\n\nfunction getTypeInfo(problem: SchemaValidationProblemGroup): {name: string; type: string} | null {\n  // note: unsure if the first segment here can ever be anything else than a type\n  // a possible API improvement is to add schemaType info to the problem group interface itself\n  const first = problem.path[0]\n  if (first.kind === 'type') {\n    return {name: first.name, type: first.type}\n  }\n  return null\n}\n\nfunction _renderSegmentName(str: string) {\n  if (str.startsWith('<unnamed_type_@_index')) {\n    const parts = str.slice(1, -1).split('_')\n\n    return `[${parts[4]}]`\n  }\n\n  return str\n}\n","import {SchemaValidationProblemPath} from '@sanity/types'\n\nexport function renderPath(path: SchemaValidationProblemPath) {\n  return path\n    .map((segment) => {\n      if (segment.kind === 'type') {\n        return `${segment.name || '<unnamed>'}(${segment.type})`\n      }\n\n      if (segment.kind === 'property') {\n        return segment.name\n      }\n\n      return null\n    })\n    .filter(Boolean)\n    .join(' > ')\n}\n","import {Schema} from '@sanity/types'\nimport {renderPath} from './utils'\n\nexport function reportWarnings(schema: Schema) {\n  /* eslint-disable no-console */\n  const problemGroups = schema._validation\n\n  const groupsWithWarnings = problemGroups?.filter((group) =>\n    group.problems.some((problem) => problem.severity === 'warning')\n  )\n  if (groupsWithWarnings?.length === 0) {\n    return\n  }\n  console.groupCollapsed(`⚠️ Schema has ${groupsWithWarnings?.length} warnings`)\n  groupsWithWarnings?.forEach((group) => {\n    const path = renderPath(group.path)\n\n    console.group(`%cAt ${path}`, 'color: #FF7636')\n\n    group.problems.forEach((problem) => {\n      console.log(problem.message)\n    })\n\n    console.groupEnd()\n  })\n  console.groupEnd()\n  /* eslint-enable no-console */\n}\n","import {Schema} from '@sanity/types'\nimport {Card, Container, Heading, Stack} from '@sanity/ui'\nimport React, {useEffect} from 'react'\nimport {SchemaProblemGroups} from './SchemaProblemGroups'\nimport {reportWarnings} from './reportWarnings'\n\ninterface SchemaErrorsScreenProps {\n  schema: Schema\n}\n\nexport function SchemaErrorsScreen({schema}: SchemaErrorsScreenProps) {\n  const groupsWithErrors =\n    schema._validation?.filter((group) =>\n      group.problems.some((problem) => problem.severity === 'error')\n    ) || []\n\n  useEffect(() => reportWarnings(schema), [schema])\n\n  return (\n    <Card height=\"fill\" overflow=\"auto\" paddingY={[4, 5, 6, 7]} paddingX={4} sizing=\"border\">\n      <Container width={1}>\n        <Stack space={5}>\n          <Heading as=\"h1\">Schema errors</Heading>\n          <SchemaProblemGroups problemGroups={groupsWithErrors} />\n        </Stack>\n      </Container>\n    </Card>\n  )\n}\n","import {Button, Card, Flex, Heading, Inline, Stack} from '@sanity/ui'\nimport React from 'react'\n\nexport function NotFoundScreen(props: {onNavigateToDefaultWorkspace: () => void}) {\n  return (\n    <Card height=\"fill\" sizing=\"border\" tone=\"caution\" display=\"flex\">\n      <Flex direction=\"row\" justify=\"center\" flex={1} align=\"center\">\n        <Stack space={4}>\n          <Heading as=\"h1\">Workspace not found</Heading>\n          <Inline>\n            <Button\n              text=\"Go to default workspace\"\n              onClick={props.onNavigateToDefaultWorkspace}\n              mode=\"ghost\"\n            />\n          </Inline>\n        </Stack>\n      </Flex>\n    </Card>\n  )\n}\n","import {CheckmarkIcon} from '@sanity/icons'\nimport {Flex, Stack, Box, Text, Card} from '@sanity/ui'\nimport React, {createElement, isValidElement, useMemo} from 'react'\nimport {isValidElementType} from 'react-is'\nimport styled from 'styled-components'\n\nconst STATE_TITLES = {\n  'logged-in': '',\n  'logged-out': 'Signed out',\n  'no-access': '',\n}\n\nexport const MediaCard = styled(Card)`\n  width: 35px;\n  height: 35px;\n\n  svg {\n    width: 100%;\n    height: 100%;\n  }\n`\n\nconst createIcon = (icon: React.ComponentType | React.ReactNode) => {\n  if (isValidElementType(icon)) return createElement(icon)\n  if (isValidElement(icon)) return icon\n  return undefined\n}\n\nexport interface WorkspacePreviewProps {\n  icon?: React.ComponentType | React.ReactNode\n  iconRight?: React.ComponentType | React.ReactNode\n  selected?: boolean\n  state?: 'logged-in' | 'logged-out' | 'no-access'\n  subtitle?: string\n  title: string\n}\n\nexport function WorkspacePreview(props: WorkspacePreviewProps) {\n  const {state, subtitle, selected, title, icon, iconRight} = props\n\n  const iconComponent = useMemo(() => createIcon(icon), [icon])\n  const iconRightComponent = useMemo(() => createIcon(iconRight), [iconRight])\n\n  return (\n    <Flex align=\"center\" flex=\"none\" gap={3}>\n      <MediaCard radius={2} tone=\"transparent\">\n        {iconComponent}\n      </MediaCard>\n\n      <Stack flex={1} space={2}>\n        <Text textOverflow=\"ellipsis\" weight=\"medium\">\n          {title}\n        </Text>\n\n        {subtitle && (\n          <Text muted size={1} textOverflow=\"ellipsis\">\n            {subtitle}\n          </Text>\n        )}\n      </Stack>\n\n      {state && STATE_TITLES[state] && (\n        <Box paddingLeft={1}>\n          <Text size={1} muted textOverflow=\"ellipsis\">\n            {STATE_TITLES[state]}\n          </Text>\n        </Box>\n      )}\n\n      {(selected || iconRightComponent) && (\n        <Flex align=\"center\" gap={4} paddingLeft={3} paddingRight={2}>\n          {selected && (\n            <Text size={1} muted>\n              <CheckmarkIcon />\n            </Text>\n          )}\n\n          {iconRightComponent && (\n            <Text size={1} muted>\n              {iconRightComponent}\n            </Text>\n          )}\n        </Flex>\n      )}\n    </Flex>\n  )\n}\n","import {map} from 'rxjs/operators'\nimport {combineLatest} from 'rxjs'\nimport {WorkspaceSummary} from '../../../../../config'\nimport {createHookFromObservableFactory} from '../../../../../util'\n\nexport const useWorkspaceAuthStates = createHookFromObservableFactory(\n  (workspaces: WorkspaceSummary[]) =>\n    combineLatest(\n      workspaces.map((workspace) =>\n        // eslint-disable-next-line max-nested-callbacks\n        workspace.auth.state.pipe(map((state) => [workspace.name, state] as const))\n      )\n    ).pipe(map((entries) => Object.fromEntries(entries)))\n)\n","export const workspacesDocsUrl = 'https://beta.sanity.io/docs/platform/studio/workspaces'\n","import {SanityLogo} from '@sanity/logos'\nimport {Box, Card, Flex, Heading, Stack, Text} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\nconst LINKS = [\n  {\n    url: 'https://slack.sanity.io/',\n    title: 'Community',\n  },\n  {\n    url: 'https://www.sanity.io/docs',\n    title: 'Docs',\n  },\n  {\n    url: 'https://www.sanity.io/legal/privacy',\n    title: 'Privacy',\n  },\n  {\n    url: 'https://www.sanity.io',\n    title: 'sanity.io',\n  },\n]\n\nconst StyledText = styled(Text)`\n  a {\n    color: inherit;\n  }\n`\n\ninterface LayoutProps {\n  header?: React.ReactNode\n  children: React.ReactNode\n  footer?: React.ReactNode\n}\n\nexport function Layout(props: LayoutProps) {\n  const {children, footer, header} = props\n\n  return (\n    <Stack space={6}>\n      <Card border radius={3} overflow=\"auto\">\n        <Stack>\n          {typeof header === 'object' && <Box>{header}</Box>}\n          {typeof header === 'string' && (\n            <Box paddingY={4}>\n              <Heading align=\"center\" size={1}>\n                {header}\n              </Heading>\n            </Box>\n          )}\n\n          <Box paddingX={1}>\n            <Card borderTop={Boolean(header)} borderBottom={Boolean(footer)}>\n              {children}\n            </Card>\n          </Box>\n\n          {footer && <Box>{footer}</Box>}\n        </Stack>\n      </Card>\n\n      <Flex direction=\"column\" gap={4} justify=\"center\" align=\"center\">\n        <Text size={3}>\n          <SanityLogo />\n        </Text>\n\n        <Flex align=\"center\" gap={2}>\n          {LINKS.map((link, index) => (\n            <React.Fragment key={link.title}>\n              <StyledText muted size={1}>\n                <a href={link.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                  {link.title}\n                </a>\n              </StyledText>\n\n              {index < LINKS.length - 1 && (\n                <Text size={1} muted>\n                  •\n                </Text>\n              )}\n            </React.Fragment>\n          ))}\n        </Flex>\n      </Flex>\n    </Stack>\n  )\n}\n","import {Box, Button, Card, Flex, Stack} from '@sanity/ui'\nimport React, {useCallback, useState} from 'react'\nimport {omit} from 'lodash'\nimport {AddIcon, ArrowLeftIcon, ChevronRightIcon} from '@sanity/icons'\nimport {useActiveWorkspace} from '../../../../activeWorkspaceMatcher'\nimport {useWorkspaces} from '../../../../workspaces'\nimport {WorkspacePreview} from '../WorkspacePreview'\nimport {useWorkspaceAuthStates} from '../hooks'\nimport {LoadingScreen} from '../../../../screens'\nimport {workspacesDocsUrl} from '../constants'\nimport {Layout} from './Layout'\n\nexport function WorkspaceAuth() {\n  const workspaces = useWorkspaces()\n  const {activeWorkspace, setActiveWorkspace} = useActiveWorkspace()\n  const [authStates] = useWorkspaceAuthStates(workspaces)\n  const [selectedWorkspaceName, setSelectedWorkspaceName] = useState<string | null>(\n    activeWorkspace?.name || null\n  )\n  const selectedWorkspace =\n    workspaces.length === 1\n      ? workspaces[0]\n      : workspaces.find((workspace) => workspace.name === selectedWorkspaceName)\n  const LoginComponent = selectedWorkspace?.auth?.LoginComponent\n\n  const handleBack = useCallback(() => setSelectedWorkspaceName(null), [])\n\n  if (!authStates) return <LoadingScreen />\n\n  if (LoginComponent && selectedWorkspace) {\n    return (\n      <Stack space={2}>\n        {workspaces.length > 1 && (\n          <Flex>\n            <Button\n              fontSize={1}\n              icon={ArrowLeftIcon}\n              mode=\"bleed\"\n              onClick={handleBack}\n              padding={2}\n              text=\"Choose another workspace\"\n            />\n          </Flex>\n        )}\n\n        <Layout\n          header={\n            <Box padding={3}>\n              <WorkspacePreview\n                icon={selectedWorkspace.icon}\n                title={selectedWorkspace.title}\n                subtitle={selectedWorkspace.dataset}\n              />\n            </Box>\n          }\n        >\n          <Stack padding={2} paddingBottom={3} paddingTop={4}>\n            <LoginComponent\n              {...omit(selectedWorkspace, ['type', '__internal'])}\n              key={selectedWorkspaceName}\n            />\n          </Stack>\n        </Layout>\n      </Stack>\n    )\n  }\n\n  return (\n    <Layout\n      header=\"Choose your workspace\"\n      footer={\n        <Stack padding={1}>\n          <Button\n            as=\"a\"\n            href={workspacesDocsUrl}\n            icon={AddIcon}\n            justify=\"flex-start\"\n            mode=\"bleed\"\n            rel=\"noopener noreferrer\"\n            target=\"__blank\"\n            text=\"Add workspace\"\n          />\n        </Stack>\n      }\n    >\n      <Stack space={1} paddingX={1} paddingY={2}>\n        {workspaces.map((workspace) => {\n          const authState = authStates[workspace.name]\n          // eslint-disable-next-line no-nested-ternary\n          const state = authState.authenticated\n            ? 'logged-in'\n            : workspace.auth.LoginComponent\n            ? 'logged-out'\n            : 'no-access'\n\n          const handleSelectWorkspace = () => {\n            if (state === 'logged-in' && workspace.name !== activeWorkspace.name) {\n              setActiveWorkspace(workspace.name)\n            }\n\n            if (state === 'logged-out') {\n              setSelectedWorkspaceName(workspace.name)\n            }\n          }\n\n          return (\n            <Card\n              as=\"button\"\n              radius={2}\n              key={workspace.name}\n              padding={2}\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={handleSelectWorkspace}\n            >\n              <WorkspacePreview\n                icon={workspace?.icon}\n                iconRight={ChevronRightIcon}\n                state={state}\n                subtitle={workspace.dataset}\n                title={workspace?.title || workspace.name}\n              />\n            </Card>\n          )\n        })}\n      </Stack>\n    </Layout>\n  )\n}\n","import {AddIcon, SelectIcon} from '@sanity/icons'\nimport {\n  Button,\n  MenuButton,\n  MenuItem,\n  Menu,\n  MenuButtonProps,\n  ButtonProps,\n  Box,\n  Card,\n  Label,\n} from '@sanity/ui'\nimport React, {useMemo} from 'react'\nimport styled from 'styled-components'\nimport {useActiveWorkspace} from '../../..'\nimport {useRouter} from '../../../../router'\nimport {useColorScheme} from '../../../colorScheme'\nimport {useWorkspaces} from '../../../workspaces'\nimport {workspacesDocsUrl} from './constants'\nimport {useWorkspaceAuthStates} from './hooks'\nimport {WorkspacePreview} from './WorkspacePreview'\n\nconst StyledMenu = styled(Menu)`\n  max-width: 350px;\n  min-width: 250px;\n`\n\nconst FooterCard = styled(Card)`\n  position: sticky;\n  bottom: 0;\n`\n\nexport function WorkspaceMenuButton(props: ButtonProps) {\n  const {scheme} = useColorScheme()\n  const workspaces = useWorkspaces()\n  const {activeWorkspace, setActiveWorkspace} = useActiveWorkspace()\n  const [authStates] = useWorkspaceAuthStates(workspaces)\n  const {navigateUrl} = useRouter()\n\n  const popoverProps: MenuButtonProps['popover'] = useMemo(\n    () => ({constrainSize: true, scheme, portal: true}),\n    [scheme]\n  )\n\n  return (\n    <MenuButton\n      button={<Button icon={SelectIcon} mode=\"bleed\" {...props} disabled={!authStates} />}\n      id=\"workspace-menu\"\n      menu={\n        <StyledMenu paddingBottom={0}>\n          <Box paddingX={3} paddingY={3}>\n            <Label size={1} muted>\n              Workspaces\n            </Label>\n          </Box>\n\n          {authStates &&\n            workspaces.map((workspace) => {\n              const authState = authStates[workspace.name]\n\n              // eslint-disable-next-line no-nested-ternary\n              const state = authState.authenticated\n                ? 'logged-in'\n                : workspace.auth.LoginComponent\n                ? 'logged-out'\n                : 'no-access'\n\n              const handleSelectWorkspace = () => {\n                if (state === 'logged-in' && workspace.name !== activeWorkspace.name) {\n                  setActiveWorkspace(workspace.name)\n                }\n\n                // Navigate to the base path of the workspace to authenticate\n                if (state === 'logged-out') {\n                  navigateUrl({path: workspace.basePath})\n                }\n              }\n\n              return (\n                <MenuItem\n                  key={workspace.name}\n                  // eslint-disable-next-line react/jsx-no-bind\n                  onClick={handleSelectWorkspace}\n                  padding={2}\n                  pressed={workspace.name === activeWorkspace.name}\n                >\n                  <WorkspacePreview\n                    icon={workspace?.icon}\n                    selected={workspace.name === activeWorkspace.name}\n                    state={state}\n                    subtitle={workspace.dataset}\n                    title={workspace?.title || workspace.name}\n                  />\n                </MenuItem>\n              )\n            })}\n\n          <FooterCard borderTop paddingY={1}>\n            <MenuItem\n              as=\"a\"\n              href={workspacesDocsUrl}\n              icon={AddIcon}\n              rel=\"noopener noreferrer\"\n              target=\"__blank\"\n              text=\"Add workspace\"\n            />\n          </FooterCard>\n        </StyledMenu>\n      }\n      popover={popoverProps}\n    />\n  )\n}\n","import {Flex, Card, Container} from '@sanity/ui'\nimport React from 'react'\nimport {WorkspaceAuth} from '../components/navbar/workspace'\n\nexport function AuthenticateScreen() {\n  return (\n    <Card height=\"fill\">\n      <Flex align=\"center\" justify=\"center\" height=\"fill\">\n        <Container width={0}>\n          <WorkspaceAuth />\n        </Container>\n      </Flex>\n    </Card>\n  )\n}\n","import React from 'react'\n\n// const Root = styled(Card).attrs({height: 'fill', overflow: 'auto'})``\n// const Content = styled(Box).attrs({padding: 4})`\n//   margin: auto;\n//   width: 640px;\n//   max-width: 100%;\n// `\n\nexport function ConfigErrorsScreen() {\n  return <>TODO: implement config errors screen</>\n  // return (\n  //   <Root forwardedAs={Flex}>\n  //     <Content forwardedAs={Flex} direction=\"column\" gap={4}>\n  //       <Flex direction=\"column\" gap={2}>\n  //         <Box>\n  //           <Heading as=\"h1\">Configuration Error</Heading>\n  //         </Box>\n  //         <Box muted>\n  //           <Text>An error occurred while trying to resolve your Studio's configuration.</Text>\n  //         </Box>\n  //         <Box>\n  //           <Text size={1} muted>\n  //             Note: the design of this page may change.\n  //           </Text>\n  //         </Box>\n  //       </Flex>\n  //       <Card shadow={1}>\n  //         {errors.map((errorInfo, index) => (\n  //           // eslint-disable-next-line react/no-array-index-key\n  //           <ErrorMessage key={index} {...errorInfo} />\n  //         ))}\n  //       </Card>\n  //       <Button\n  //         tone=\"primary\"\n  //         // eslint-disable-next-line react/jsx-no-bind\n  //         onClick={() => window.location.reload()}\n  //         type=\"button\"\n  //         text=\"Retry\"\n  //       />\n  //     </Content>\n  //   </Root>\n  // )\n}\n","export const getProviderTitle = (provider?: string): string | undefined => {\n  if (provider === 'google') {\n    return 'Google'\n  }\n\n  if (provider === 'github') {\n    return 'GitHub'\n  }\n\n  if (provider === 'sanity') {\n    return 'Sanity'\n  }\n\n  if (provider?.startsWith('saml-')) {\n    return 'SAML/SSO'\n  }\n\n  return undefined\n}\n","import {CurrentUser} from '@sanity/types'\nimport {Button, Card, Dialog, Stack, Text} from '@sanity/ui'\nimport React, {useCallback, useEffect, useState} from 'react'\nimport {getProviderTitle} from '../../datastores/authStore/providerTitle'\nimport {useActiveWorkspace} from '../activeWorkspaceMatcher'\n\nexport function NotAuthenticatedScreen() {\n  const [currentUser, setCurrentUser] = useState<CurrentUser | null>(null)\n  const [error, handleError] = useState<unknown>(null)\n\n  if (error) throw error\n\n  const {activeWorkspace} = useActiveWorkspace()\n\n  const handleLogout = useCallback(() => {\n    activeWorkspace.auth.logout?.()\n  }, [activeWorkspace])\n\n  useEffect(() => {\n    const subscription = activeWorkspace.auth.state.subscribe({\n      next: ({currentUser: user}) => {\n        setCurrentUser(user)\n      },\n      error: handleError,\n    })\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [activeWorkspace])\n\n  const providerTitle = getProviderTitle(currentUser?.provider)\n  const providerHelp = providerTitle ? ` through ${providerTitle}` : ''\n\n  return (\n    <Card height=\"fill\">\n      <Dialog\n        id=\"not-authorized-dialog\"\n        header=\"Not authorized\"\n        width={1}\n        footer={\n          <Stack paddingX={3} paddingY={2}>\n            <Button text=\"Sign out\" onClick={handleLogout} />\n          </Stack>\n        }\n      >\n        <Stack paddingX={4} paddingY={5} space={4}>\n          <Text>\n            You are not authorized to access this studio. Maybe you could ask someone to invite you\n            to collaborate on this project?\n          </Text>\n\n          <Text>\n            If you think this is an error, verify that you are signed in with the correct account.\n            You are currently signed in as{' '}\n            <strong>\n              {currentUser?.name} ({currentUser?.email})\n            </strong>\n            {providerHelp}.\n          </Text>\n        </Stack>\n      </Dialog>\n    </Card>\n  )\n}\n","import {Card, Dialog, Stack, Button, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\n\ninterface CorsOriginErrorScreenProps {\n  projectId?: string\n}\n\nexport function CorsOriginErrorScreen(props: CorsOriginErrorScreenProps) {\n  const {projectId} = props\n\n  const corsUrl = `https://sanity.io/manage/project/${projectId}/settings/api`\n  const origin = window.location.origin\n\n  const handleRetry = useCallback(() => {\n    window.location.reload()\n  }, [])\n\n  return (\n    <Card height=\"fill\">\n      <Dialog\n        id=\"cors-error-dialog\"\n        header=\"Error\"\n        width={1}\n        footer={\n          <Stack paddingX={3} paddingY={2}>\n            <Button text=\"Retry\" onClick={handleRetry} />\n          </Stack>\n        }\n      >\n        <Stack paddingX={4} paddingY={5} space={4}>\n          <Text>\n            It looks like the error is being caused by the current origin (<code>{origin}</code>)\n            not being allowed for this project.\n          </Text>\n\n          <Text>\n            If you are a project administrator or developer, you can head to{' '}\n            <a rel=\"noopener noreferrer\" target=\"_blank\" href={corsUrl}>\n              the project management\n            </a>{' '}\n            interface to configure CORS origins for this project.\n          </Text>\n\n          <Text>\n            <a\n              href=\"https://www.sanity.io/docs/front-ends/cors\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Read more about CORS Origins\n            </a>\n            .\n          </Text>\n        </Stack>\n      </Dialog>\n    </Card>\n  )\n}\n","import React, {useCallback, useEffect, useState} from 'react'\nimport {Button, Card, Code, Container, ErrorBoundary, Heading, Stack, useToast} from '@sanity/ui'\nimport {useHotModuleReload} from 'use-hot-module-reload'\nimport {SchemaError} from '../config'\nimport {isRecord} from '../util'\nimport {globalScope} from '../util/globalScope'\nimport {CorsOriginError} from '../datastores'\nimport {CorsOriginErrorScreen, SchemaErrorsScreen} from './screens'\n\ninterface StudioErrorBoundaryProps {\n  children: React.ReactNode\n}\n\nconst errorChannel = globalScope.__sanityErrorChannel\n\nfunction isKnownError(err: Error): boolean {\n  if (err instanceof SchemaError) {\n    return true\n  }\n\n  if (err instanceof CorsOriginError) {\n    return true\n  }\n\n  return false\n}\n\nexport function StudioErrorBoundary({children}: StudioErrorBoundaryProps) {\n  const [{error}, setError] = useState<{error: unknown}>({error: null})\n  const {push: pushToast} = useToast()\n\n  const message = isRecord(error) && typeof error.message === 'string' && error.message\n  const stack = isRecord(error) && typeof error.stack === 'string' && error.stack\n\n  const handleResetError = useCallback(() => setError({error: null}), [setError])\n\n  useHotModuleReload(handleResetError)\n\n  useEffect(() => {\n    if (!errorChannel) return undefined\n\n    return errorChannel.subscribe((msg) => {\n      // NOTE: Certain errors (such as the `ResizeObserver loop limit exceeded` error) is thrown\n      // by the browser, and does not include an `error` property. We ignore these errors.\n      if (!msg.error) {\n        return\n      }\n\n      // For errors that we \"expect\", eg have specific error screens for, do not push a toast\n      if (isKnownError(msg.error)) {\n        return\n      }\n\n      console.error(msg.error)\n\n      pushToast({\n        closable: true,\n        description: msg.error.message,\n        duration: 5000,\n        title: 'Uncaught error',\n        status: 'error',\n      })\n    })\n  }, [pushToast])\n\n  if (error instanceof CorsOriginError) {\n    return <CorsOriginErrorScreen projectId={error?.projectId} />\n  }\n\n  if (error instanceof SchemaError) {\n    return <SchemaErrorsScreen schema={error.schema} />\n  }\n\n  if (error) {\n    return (\n      <Card\n        height=\"fill\"\n        overflow=\"auto\"\n        paddingY={[4, 5, 6, 7]}\n        paddingX={4}\n        sizing=\"border\"\n        tone=\"critical\"\n      >\n        <Container width={3}>\n          <Stack space={4}>\n            {/* TODO: better error boundary */}\n\n            <Heading>An error occurred</Heading>\n\n            <div>\n              <Button onClick={handleResetError} text=\"Retry\" tone=\"default\" />\n            </div>\n\n            <Card border radius={2} overflow=\"auto\" padding={4} tone=\"inherit\">\n              <Stack space={4}>\n                {message && (\n                  <Code size={1}>\n                    <strong>Error: {message}</strong>\n                  </Code>\n                )}\n                {stack && <Code size={1}>{stack}</Code>}\n              </Stack>\n            </Card>\n          </Stack>\n        </Container>\n      </Card>\n    )\n  }\n\n  return <ErrorBoundary onCatch={setError}>{children}</ErrorBoundary>\n}\n","import React, {useEffect} from 'react'\nimport {Flex, Box, Card, Code, Text} from '@sanity/ui'\nimport {startCase} from 'lodash'\nimport styled from 'styled-components'\n\nconst ListItem = styled(Flex)``\n\nconst ErrorMessageRoot = styled(Box).attrs({padding: 4})``\n\nexport interface ErrorMessageProps {\n  message: string\n  stack?: string\n  error: unknown\n  path: Array<{name: string; type: string}>\n}\n\nexport function ErrorMessage({error, message, path, stack}: ErrorMessageProps) {\n  useEffect(() => {\n    console.error(error)\n  }, [error])\n\n  const last = path[path.length - 1]\n\n  return (\n    <ErrorMessageRoot forwardedAs={Flex} direction=\"column\" gap={4}>\n      <Flex direction=\"column\" gap={2}>\n        <Text weight=\"semibold\" size={3}>\n          {startCase(last.type)} Error\n        </Text>\n      </Flex>\n\n      <Card tone=\"critical\" overflow=\"auto\" padding={4}>\n        <Code>{message}</Code>\n      </Card>\n\n      <Flex as=\"ul\" direction=\"column\" gap={2}>\n        {path.map(({name, type}, index) => (\n          <ListItem forwardedAs=\"li\" gap={2} align=\"center\" key={index}>\n            <Box>\n              <Code>{name}</Code>\n            </Box>\n            <Box>\n              <Text muted size={1}>\n                {type}\n              </Text>\n            </Box>\n          </ListItem>\n        ))}\n      </Flex>\n\n      {stack && (\n        <details>\n          <Text as=\"summary\">Stack Trace</Text>\n\n          <Box overflow=\"auto\" marginTop={4}>\n            <Code>{stack}</Code>\n          </Box>\n        </details>\n      )}\n    </ErrorMessageRoot>\n  )\n}\n","import {Tool} from '../../config'\nimport {route, Router} from '../../router'\n\nexport function createRouter(opts: {basePath?: string; tools: Tool[]}): Router {\n  const {basePath = '/', tools} = opts\n\n  const toolRoute = route.create('/:tool', (toolParams) => {\n    const tool = tools.find((current) => current.name === toolParams.tool)\n    return tool ? route.scope(tool.name, '/', tool.router) : route.create('/')\n  })\n\n  return route.create(basePath, [route.intents('/intent'), toolRoute])\n}\n","import {Tool} from '../../../config'\n\nexport function getOrderedTools(tools: Tool[]): Tool[] {\n  const pluginConfig: {toolSwitcher?: {order?: string[]; hidden?: string[]}} = {}\n  const config = pluginConfig.toolSwitcher || {}\n  const order = config.order || []\n  const hidden = config.hidden || []\n\n  if (!order.length && !hidden.length) {\n    return tools\n  }\n\n  const keyed = tools.reduce<Record<string, {index: number; tool: Tool}>>((target, tool) => {\n    const title = tool.title || '<unknown>'\n\n    if (!tool.name) {\n      console.warn(`Tool \"${title}\" does not have the required \"name\" property`)\n      return target\n    }\n\n    if (target[tool.name]) {\n      const existing = target[tool.name].tool.title\n      console.warn(`Tools with duplicate name \"${tool.name}\" found (\"${title}\" and \"${existing}\")`)\n      return target\n    }\n\n    const toolIndex = order.indexOf(tool.name)\n\n    target[tool.name] = {\n      tool: tool,\n      index: toolIndex === -1 ? +Infinity : toolIndex,\n    }\n\n    return target\n  }, {})\n\n  const isVisible = (tool: Tool) => hidden.indexOf(tool.name) === -1\n\n  const ret = tools.filter(isVisible)\n\n  ret.sort((tool1, tool2) => {\n    const toolA = keyed[tool1.name]\n    const toolB = keyed[tool2.name]\n\n    const indexA = toolA ? toolA.index : +Infinity\n    const indexB = toolB ? toolB.index : +Infinity\n\n    if (indexA === indexB) {\n      return 0\n    }\n\n    return indexA - indexB\n  })\n\n  return ret\n}\n","import {Tool} from '../../config'\nimport {RouterState, Router} from '../../router'\nimport {isRecord} from '../../util/isRecord'\nimport {RouterEvent, RouterStateEvent} from './types'\nimport {getOrderedTools} from './util/getOrderedTools'\n\nfunction resolveUrlStateWithDefaultTool(tools: Tool[], state: Record<string, unknown> | null) {\n  const orderedTools = getOrderedTools(tools)\n  const defaultTool = orderedTools[0]\n\n  if (!state || state.tool || !defaultTool) {\n    return state\n  }\n\n  return Object.assign({}, state, {\n    tool: defaultTool.name,\n  })\n}\n\nfunction makeBackwardsCompatible(\n  tools: Tool[],\n  state: Record<string, unknown> | null\n): Record<string, unknown> | null {\n  if (!state) {\n    return state\n  }\n\n  if (getOrderedTools(tools).find((tool) => tool.name === state.space)) {\n    return {...state, tool: state.space, space: undefined}\n  }\n\n  return state\n}\n\nexport function resolveDefaultState(\n  tools: Tool[],\n  state: Record<string, unknown> | null\n): RouterState | null {\n  const urlStateWithDefaultTool = resolveUrlStateWithDefaultTool(\n    tools,\n    makeBackwardsCompatible(tools, state)\n  )\n\n  return urlStateWithDefaultTool\n}\n\nexport function resolveIntentState(\n  tools: Tool[],\n  currentState: RouterState | null,\n  intentState: RouterState\n): RouterEvent {\n  const {intent, params, payload} = intentState\n\n  if (typeof intent !== 'string') {\n    throw new Error('intent must be a string')\n  }\n\n  if (!isRecord(params)) {\n    throw new Error('intent params must be a string')\n  }\n\n  const orderedTools = getOrderedTools(tools)\n\n  const currentTool = currentState?.tool\n    ? orderedTools.find((tool) => tool.name === currentState.tool)\n    : null\n\n  // If current tool can handle intent and if so, give it precedence\n  const matchingTool = (currentTool ? [currentTool, ...orderedTools] : orderedTools).find(\n    (tool) =>\n      tool &&\n      typeof tool.canHandleIntent === 'function' &&\n      tool.canHandleIntent(intent, params, currentState && currentState[tool.name])\n  )\n\n  if (matchingTool?.getIntentState) {\n    const toolState = matchingTool.getIntentState(\n      intent,\n      params as any,\n      currentState && (currentState[matchingTool.name] as any),\n      payload\n    )\n\n    return {\n      type: 'state',\n      isNotFound: false,\n      state: {\n        ...currentState,\n        tool: matchingTool.name,\n        [matchingTool.name]: toolState,\n      },\n    }\n  }\n\n  return {\n    type: 'intent',\n    isNotFound: true,\n    intent: {name: intent, params},\n  }\n}\n\nexport function decodeUrlState(rootRouter: Router, pathname: string): RouterStateEvent {\n  return {\n    type: 'state',\n    state: rootRouter.decode(pathname) || {},\n    isNotFound: rootRouter.isNotFound(pathname),\n  }\n}\n\nexport function isNonNullable<T>(value: T): value is NonNullable<T> {\n  return value !== null && value !== undefined\n}\n","import {escapeRegExp, isEqual} from 'lodash'\nimport {EMPTY, Observable, of} from 'rxjs'\nimport {distinctUntilChanged, filter, map, mergeScan, shareReplay} from 'rxjs/operators'\nimport {History, Location} from 'history'\nimport {Tool} from '../../config'\nimport {Router} from '../../router'\nimport {decodeUrlState, isNonNullable, resolveDefaultState, resolveIntentState} from './helpers'\nimport {RouterEvent} from './types'\n\ninterface RouterEventStreamOptions {\n  unstable_history: History\n  router: Router\n  tools: Tool[]\n}\n\n/**\n * @internal\n */\nexport function createRouterEventStream({\n  unstable_history: history,\n  router,\n  tools,\n}: RouterEventStreamOptions): Observable<RouterEvent> {\n  function maybeHandleIntent(\n    prevEvent: RouterEvent | null,\n    currentEvent: RouterEvent\n  ): Observable<RouterEvent> {\n    if (currentEvent?.type === 'state' && currentEvent.state?.intent) {\n      const redirectState = resolveIntentState(\n        tools,\n        prevEvent?.type === 'state' ? prevEvent.state : {},\n        currentEvent.state\n      )\n\n      if (redirectState?.type === 'state') {\n        history.replace(router.encode(redirectState.state))\n        // This will not push anything downstream and preserve the prevEvent for the next received value\n        // Since we are calling history.replace here, a new event will be received immediately\n        return EMPTY\n      }\n    }\n\n    return of(currentEvent)\n  }\n\n  function maybeRedirectDefaultState(event: RouterEvent) {\n    if (event.type === 'state') {\n      const defaultState = resolveDefaultState(tools, event.state)\n\n      if (defaultState && defaultState !== event.state) {\n        history.replace(router.encode(defaultState))\n        return null\n      }\n    }\n\n    return event\n  }\n\n  const routerBasePath = router.getBasePath()\n\n  const state$: Observable<RouterEvent> = new Observable<Location>((observer) => {\n    const unlisten = history.listen((location) => observer.next(location))\n\n    // emit on mount\n    observer.next(history.location)\n    return unlisten\n  }).pipe(\n    // this is necessary to prevent emissions intended for other workspaces.\n    //\n    // this regex ends with a `(\\\\/|$)` (forward slash or end) to prevent false\n    // matches where the pathname is a false subset of the current pathname.\n    filter(({pathname}) =>\n      routerBasePath === '/'\n        ? true\n        : new RegExp(`^${escapeRegExp(routerBasePath)}(\\\\/|$)`, 'i').test(pathname)\n    ),\n    map(({pathname}) => decodeUrlState(router, pathname)),\n    mergeScan(maybeHandleIntent, null),\n    filter(isNonNullable),\n    map(maybeRedirectDefaultState),\n    filter(isNonNullable),\n    distinctUntilChanged(isEqual),\n    shareReplay(1)\n  )\n\n  return state$\n}\n","import React, {createContext, useContext} from 'react'\nimport {Workspace} from '../config'\n\nexport interface WorkspaceProviderProps {\n  workspace: Workspace\n  children?: React.ReactChild\n}\nconst WorkspaceContext = createContext<Workspace | null>(null)\nexport function WorkspaceProvider({children, workspace}: WorkspaceProviderProps) {\n  return <WorkspaceContext.Provider value={workspace}>{children}</WorkspaceContext.Provider>\n}\nexport function useWorkspace() {\n  const workspace = useContext(WorkspaceContext)\n  if (!workspace) throw new Error('Could not find `workspace` context')\n  return workspace\n}\n","import React, {createContext, useContext} from 'react'\nimport {Source} from '../config'\nimport {useWorkspace} from './workspace'\n\nexport type SourceProviderProps =\n  | {source: Source; children?: React.ReactNode}\n  | {name: string; children?: React.ReactNode}\n\nconst SourceContext = createContext<Source | null>(null)\n\nexport function SourceProvider({children, ...props}: SourceProviderProps) {\n  const parentSource = useContext(SourceContext)\n  const {unstable_sources: sources} = useWorkspace()\n\n  if ('source' in props) {\n    const {source} = props\n    return <SourceContext.Provider value={source}>{children}</SourceContext.Provider>\n  }\n\n  if ('name' in props) {\n    const {name} = props\n    const source = sources.find((s) => s.name === name)\n    if (!source) {\n      throw new Error(`Could not find source with name \\`${name}\\` in current workspace`)\n    }\n    if (parentSource === source) return <>{children}</>\n    return <SourceContext.Provider value={source}>{children}</SourceContext.Provider>\n  }\n\n  throw new Error(\n    'Invalid props passed into SourceProvider. A `name` or a `source` object is required.'\n  )\n}\n\n/**\n * @internal\n * @deprecated INTERNAL USE ONLY\n */\nexport function useSource(): Source {\n  const source = useContext(SourceContext)\n  if (!source) throw new Error('Could not find `source` context')\n  return source\n}\n","import React, {useCallback, useEffect, useMemo, useState} from 'react'\nimport {map, filter, scan, catchError} from 'rxjs/operators'\nimport {combineLatest, of} from 'rxjs'\nimport {History} from 'history'\nimport {ErrorBoundary} from '@sanity/ui'\nimport {createHookFromObservableFactory} from '../../util'\nimport {ConfigResolutionError, Tool, Source, Workspace} from '../../config'\nimport {Router, RouterProvider, RouterState} from '../../router'\nimport {createRouter, createRouterEventStream} from '../router'\nimport {useActiveWorkspace} from '../activeWorkspaceMatcher'\nimport {WorkspaceProvider} from '../workspace'\nimport {SourceProvider} from '../source'\n// TODO: work on error handler\n// import {flattenErrors} from './flattenErrors'\n\nconst isStateEvent = <T extends {type: string}>(e: T): e is Extract<T, {type: 'state'}> =>\n  e.type === 'state'\n\nconst initialState: StudioRouterState = {isNotFound: true, state: {}}\n\ninterface StudioRouterState {\n  isNotFound: boolean\n  state: RouterState\n}\n\ninterface UseRouterStateOptions {\n  unstable_history: History\n  router: Router | undefined\n  tools: Tool[] | undefined\n}\n\nconst useRouterState = createHookFromObservableFactory(\n  ({tools, unstable_history, router}: UseRouterStateOptions) => {\n    if (!router || !tools) return of(initialState)\n\n    return createRouterEventStream({\n      unstable_history,\n      router,\n      tools,\n    }).pipe(\n      filter(isStateEvent),\n      scan((prevState, event) => {\n        return {\n          ...prevState,\n          isNotFound: event.isNotFound,\n          state: event.state,\n        }\n      }, initialState)\n    )\n  },\n  {initialValue: initialState}\n)\n\ninterface WorkspaceLoaderProps {\n  children: React.ReactNode\n  ConfigErrorsComponent: React.ComponentType\n  LoadingComponent: React.ComponentType\n}\n\nfunction WorkspaceLoader({\n  children,\n  LoadingComponent,\n}: Omit<WorkspaceLoaderProps, 'ConfigErrorsComponent'>) {\n  const [error, handleError] = useState<unknown>(null)\n  if (error) throw error\n\n  const {\n    activeWorkspace,\n    __internal: {history},\n  } = useActiveWorkspace()\n  const [workspace, setWorkspace] = useState<Workspace | null>(null)\n\n  const handleNavigate = useCallback(\n    (opts: {path: string; replace?: boolean}) => {\n      if (opts.replace) {\n        history.replace(opts.path)\n      } else {\n        history.push(opts.path)\n      }\n    },\n    [history]\n  )\n\n  useEffect(() => {\n    const subscription = combineLatest(\n      activeWorkspace.__internal.sources.map(({source}) =>\n        source.pipe(\n          catchError((err) => {\n            if (err instanceof ConfigResolutionError) return of(err)\n            throw err\n          })\n        )\n      )\n    )\n      .pipe(\n        map((results): Source[] => {\n          const errors = results.filter((result) => result instanceof ConfigResolutionError)\n          if (errors.length) {\n            throw new ConfigResolutionError({\n              name: activeWorkspace.name,\n              causes: errors,\n              type: 'workspace',\n            })\n          }\n\n          return results as Source[]\n        }),\n        map(\n          ([rootSource, ...restOfSources]): Workspace => ({\n            ...activeWorkspace,\n            ...rootSource,\n            unstable_sources: [rootSource, ...restOfSources],\n            type: 'workspace',\n          })\n        )\n      )\n      .subscribe({\n        next: setWorkspace,\n        error: handleError,\n      })\n\n    return () => subscription.unsubscribe()\n  }, [activeWorkspace])\n\n  const tools = workspace?.tools\n  const router = useMemo(() => {\n    if (!workspace) return undefined\n    return createRouter(workspace)\n  }, [workspace])\n\n  const [routerState] = useRouterState({unstable_history: history, router, tools})\n  if (!router || !workspace) return <LoadingComponent />\n\n  // TODO: may need a screen if one of the sources is not logged in. e.g. it\n  // is currently possible for the user to be logged into the current workspace\n  // but not all of its nested sources.\n  // if (!allSourcesLoggedIn) return <NotAllSourcesAuthenticatedComponent />\n\n  return (\n    <WorkspaceProvider workspace={workspace}>\n      <SourceProvider\n        // the first source is always the root source and is always present\n        source={workspace.unstable_sources[0]}\n      >\n        <RouterProvider onNavigate={handleNavigate} router={router} state={routerState.state}>\n          {children}\n        </RouterProvider>\n      </SourceProvider>\n    </WorkspaceProvider>\n  )\n}\n\nfunction WorkspaceLoaderBoundary({ConfigErrorsComponent, ...props}: WorkspaceLoaderProps) {\n  const [{error}, setError] = useState<{error: unknown}>({error: null})\n\n  // TODO: implement this\n  // const errors = useMemo(() => flattenErrors(error, []), [error])\n\n  if (error instanceof ConfigResolutionError) return <ConfigErrorsComponent />\n\n  // otherwise hand off to other boundaries\n  if (error) throw error\n\n  return (\n    <ErrorBoundary onCatch={setError}>\n      <WorkspaceLoader {...props} />\n    </ErrorBoundary>\n  )\n}\n\nexport {WorkspaceLoaderBoundary as WorkspaceLoader}\n","import React, {useEffect, useState} from 'react'\nimport {LoadingScreen, AuthenticateScreen, NotAuthenticatedScreen} from './screens'\nimport {useActiveWorkspace} from './activeWorkspaceMatcher'\n\ninterface AuthBoundaryProps {\n  children: React.ReactNode\n  AuthenticateComponent?: React.ComponentType\n  LoadingComponent?: React.ComponentType\n  NotAuthenticatedComponent?: React.ComponentType\n}\n\nexport function AuthBoundary({\n  children,\n  AuthenticateComponent = AuthenticateScreen,\n  LoadingComponent = LoadingScreen,\n  NotAuthenticatedComponent = NotAuthenticatedScreen,\n}: AuthBoundaryProps) {\n  const [error, handleError] = useState<unknown>(null)\n  if (error) throw error\n\n  const [loggedIn, setLoggedIn] = useState<'logged-in' | 'logged-out' | 'loading' | 'unauthorized'>(\n    'loading'\n  )\n  const {activeWorkspace} = useActiveWorkspace()\n\n  useEffect(() => {\n    activeWorkspace.auth.handleCallbackUrl?.().catch(handleError)\n  }, [activeWorkspace.auth])\n\n  useEffect(() => {\n    const subscription = activeWorkspace.auth.state.subscribe({\n      next: ({authenticated, currentUser}) => {\n        if (currentUser?.roles?.length === 0) {\n          setLoggedIn('unauthorized')\n\n          return\n        }\n\n        setLoggedIn(authenticated ? 'logged-in' : 'logged-out')\n      },\n      error: handleError,\n    })\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [activeWorkspace])\n\n  if (loggedIn === 'loading') return <LoadingComponent />\n\n  if (loggedIn === 'unauthorized') return <NotAuthenticatedComponent />\n\n  // NOTE: there is currently a bug where the `AuthenticateComponent` will\n  // flash after the first login with cookieless mode. See `createAuthStore`\n  // for details\n  if (loggedIn === 'logged-out') return <AuthenticateComponent />\n\n  return <>{children}</>\n}\n","export const Z_OFFSET = {\n  toast: [100, 11000],\n}\n","import React, {Fragment, useMemo} from 'react'\nimport Refractor from 'react-refractor'\nimport bash from 'refractor/lang/bash'\nimport javascript from 'refractor/lang/javascript'\nimport json from 'refractor/lang/json'\nimport jsx from 'refractor/lang/jsx'\nimport typescript from 'refractor/lang/typescript'\nimport {History} from 'history'\nimport {ThemeColorSchemeKey, ToastProvider} from '@sanity/ui'\nimport {Config} from '../config'\nimport {UserColorManagerProvider} from '../user-color'\nimport {ResourceCacheProvider} from '../datastores/ResourceCacheProvider'\nimport {ColorSchemeProvider} from './colorScheme'\nimport {ActiveWorkspaceMatcher} from './activeWorkspaceMatcher'\nimport {StudioThemeProvider} from './StudioThemeProvider'\nimport {StudioErrorBoundary} from './StudioErrorBoundary'\nimport {WorkspaceLoader} from './workspaceLoader'\nimport {\n  ConfigErrorsScreen,\n  LoadingScreen,\n  AuthenticateScreen,\n  NotFoundScreen,\n  NotAuthenticatedScreen,\n} from './screens'\nimport {WorkspacesProvider} from './workspaces'\nimport {AuthBoundary} from './AuthBoundary'\nimport {Z_OFFSET} from './constants'\n\nRefractor.registerLanguage(bash)\nRefractor.registerLanguage(javascript)\nRefractor.registerLanguage(json)\nRefractor.registerLanguage(jsx)\nRefractor.registerLanguage(typescript)\n\nexport interface StudioProviderProps {\n  children: React.ReactNode\n  config: Config\n  onSchemeChange?: (nextScheme: ThemeColorSchemeKey) => void\n  scheme?: ThemeColorSchemeKey\n  unstable_history?: History\n  unstable_noAuthBoundary?: boolean\n}\n\nexport function StudioProvider({\n  children,\n  config,\n  onSchemeChange,\n  scheme,\n  unstable_history: history,\n  unstable_noAuthBoundary: noAuthBoundary,\n}: StudioProviderProps) {\n  const ConditionalAuthBoundary = useMemo(\n    () => (noAuthBoundary ? Fragment : AuthBoundary),\n    [noAuthBoundary]\n  )\n\n  return (\n    <ColorSchemeProvider onSchemeChange={onSchemeChange} scheme={scheme}>\n      <ToastProvider paddingY={7} zOffset={Z_OFFSET.toast}>\n        <StudioErrorBoundary>\n          <WorkspacesProvider config={config}>\n            <ActiveWorkspaceMatcher\n              unstable_history={history}\n              NotFoundComponent={NotFoundScreen}\n              LoadingComponent={LoadingScreen}\n            >\n              <StudioThemeProvider>\n                <UserColorManagerProvider>\n                  <ConditionalAuthBoundary\n                    LoadingComponent={LoadingScreen}\n                    AuthenticateComponent={AuthenticateScreen}\n                    NotAuthenticatedComponent={NotAuthenticatedScreen}\n                  >\n                    <WorkspaceLoader\n                      LoadingComponent={LoadingScreen}\n                      ConfigErrorsComponent={ConfigErrorsScreen}\n                    >\n                      <ResourceCacheProvider>{children}</ResourceCacheProvider>\n                    </WorkspaceLoader>\n                  </ConditionalAuthBoundary>\n                </UserColorManagerProvider>\n              </StudioThemeProvider>\n            </ActiveWorkspaceMatcher>\n          </WorkspacesProvider>\n        </StudioErrorBoundary>\n      </ToastProvider>\n    </ColorSchemeProvider>\n  )\n}\n","// eslint-disable-next-line no-process-env\nexport const isDev = process.env.NODE_ENV !== 'production'\nexport const isProd = !isDev\n","import {Avatar, AvatarPosition, AvatarSize, AvatarStatus, Box, Text, Tooltip} from '@sanity/ui'\nimport React, {forwardRef, useState} from 'react'\nimport type {User} from '@sanity/types'\nimport {useUser} from '../datastores'\nimport {useUserColor} from '../user-color'\nimport {isRecord} from '../util'\n\nexport interface UserAvatarProps {\n  animateArrowFrom?: AvatarPosition\n  position?: AvatarPosition\n  size?: AvatarSize\n  status?: AvatarStatus\n  tone?: 'navbar'\n  user: User | string\n  withTooltip?: boolean\n}\n\nconst symbols = /[^\\p{Alpha}\\p{White_Space}]/gu\nconst whitespace = /\\p{White_Space}+/u\n\nconst LEGACY_TO_UI_AVATAR_SIZES: {[key: string]: AvatarSize | undefined} = {\n  small: 0,\n  medium: 1,\n  large: 2,\n}\n\nfunction nameToInitials(fullName: string) {\n  const namesArray = fullName.replace(symbols, '').split(whitespace)\n\n  if (namesArray.length === 1) {\n    return `${namesArray[0].charAt(0)}`.toUpperCase()\n  }\n\n  return `${namesArray[0].charAt(0)}${namesArray[namesArray.length - 1].charAt(0)}`\n}\n\nexport function UserAvatar(props: UserAvatarProps) {\n  const {user, ...restProps} = props\n\n  if (isRecord(user)) {\n    if (restProps.withTooltip) {\n      return <TooltipUserAvatar {...restProps} user={user as User} />\n    }\n\n    return <StaticUserAvatar {...restProps} user={user as User} />\n  }\n\n  return <UserAvatarLoader {...props} user={user as string} />\n}\n\nfunction TooltipUserAvatar(props: Omit<UserAvatarProps, 'user'> & {user: User}) {\n  const {\n    user: {displayName},\n  } = props\n\n  return (\n    <Tooltip\n      content={\n        <Box padding={2}>\n          <Text size={1}>{displayName}</Text>\n        </Box>\n      }\n      placement=\"top\"\n      portal\n    >\n      <div style={{display: 'inline-block'}}>\n        <StaticUserAvatar {...props} />\n      </div>\n    </Tooltip>\n  )\n}\n\nconst StaticUserAvatar = forwardRef(function StaticUserAvatar(\n  props: Omit<UserAvatarProps, 'user'> & {user: User},\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {user, animateArrowFrom, position, size, status, tone} = props\n  const [imageLoadError, setImageLoadError] = useState<null | Error>(null)\n  const userColor = useUserColor(user.id)\n  const imageUrl = imageLoadError ? undefined : user?.imageUrl\n\n  return (\n    <Avatar\n      animateArrowFrom={animateArrowFrom}\n      arrowPosition={position}\n      color={userColor.name}\n      data-legacy-tone={tone}\n      initials={user?.displayName && nameToInitials(user.displayName)}\n      src={imageUrl}\n      onImageLoadError={setImageLoadError}\n      ref={ref}\n      size={typeof size === 'string' ? LEGACY_TO_UI_AVATAR_SIZES[size] : size}\n      status={status}\n    />\n  )\n})\n\nfunction UserAvatarLoader({user, ...loadedProps}: Omit<UserAvatarProps, 'user'> & {user: string}) {\n  const [value] = useUser(user)\n\n  if (!value) {\n    // @todo How do we handle this?\n    return null\n  }\n\n  return <UserAvatar {...loadedProps} user={value} />\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {SanityMonogram} from '@sanity/logos'\n\nconst Root = styled.div`\n  position: absolute;\n  width: 18px;\n  height: 18px;\n  background: var(--card-bg-color);\n  bottom: -4px;\n  right: -4px;\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 1px solid var(--card-bg-color);\n  box-sizing: content-box;\n\n  svg {\n    box-sizing: content-box;\n    border: 1px solid var(--card-hairline-soft-color);\n    border-radius: 50%;\n    padding: 2px;\n    width: 12px;\n    height: 12px;\n  }\n\n  &[data-logo='github'] {\n    svg {\n      path {\n        fill: var(--card-fg-color);\n      }\n    }\n  }\n\n  &[data-logo='saml'] {\n    svg {\n      path {\n        fill: var(--card-fg-color);\n      }\n    }\n  }\n`\n\nconst Google = (\n  <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g clipPath=\"url(#clip0)\">\n      <path\n        d=\"M12 6.13764C12 5.72977 11.9663 5.31971 11.8943 4.91846H6.12036V7.22895H9.42684C9.28963 7.97412 8.84876 8.63332 8.20322 9.05221V10.5514H10.1759C11.3342 9.50637 12 7.9631 12 6.13764Z\"\n        fill=\"#4285F4\"\n      />\n      <path\n        d=\"M6.12019 12.0002C7.77118 12.0002 9.16349 11.4688 10.1779 10.5517L8.20529 9.05253C7.65646 9.41851 6.94793 9.62574 6.12244 9.62574C4.52544 9.62574 3.17136 8.56971 2.68552 7.1499H0.649902V8.69537C1.68908 10.7215 3.80567 12.0002 6.12019 12.0002V12.0002Z\"\n        fill=\"#34A853\"\n      />\n      <path\n        d=\"M2.68332 7.14986C2.4269 6.40469 2.4269 5.59778 2.68332 4.8526V3.30713H0.649951C-0.218278 5.00252 -0.218278 6.99995 0.649951 8.69533L2.68332 7.14986V7.14986Z\"\n        fill=\"#FBBC04\"\n      />\n      <path\n        d=\"M6.12019 2.37483C6.99291 2.3616 7.8364 2.68348 8.46845 3.27433L10.2161 1.56131C9.1095 0.542752 7.64071 -0.017233 6.12019 0.000404333C3.80566 0.000404333 1.68908 1.27911 0.649902 3.3074L2.68326 4.85288C3.16686 3.43087 4.52319 2.37483 6.12019 2.37483V2.37483Z\"\n        fill=\"#EA4335\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0\">\n        <rect width=\"12\" height=\"12\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n)\n\nconst GitHub = (\n  <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g clipPath=\"url(#clip0)\">\n      <path\n        d=\"M11.195 3.13503C10.6711 2.22838 9.91808 1.47537 9.01144 0.951471C8.09222 0.414976 7.08837 0.146729 5.99987 0.146729C4.91137 0.146729 3.90752 0.414976 2.98831 0.951471C2.08163 1.47534 1.32862 2.22836 0.804744 3.13503C0.268248 4.05497 0 5.05883 0 6.14659C0 7.45399 0.381531 8.62978 1.14459 9.67394C1.90765 10.7181 2.89327 11.4408 4.10143 11.8419C4.24208 11.868 4.34624 11.8497 4.41392 11.7872C4.44666 11.7577 4.47263 11.7215 4.49006 11.681C4.50749 11.6405 4.51595 11.5967 4.51488 11.5527C4.51488 11.537 4.51361 11.3963 4.51105 11.1307C4.5085 10.8651 4.50722 10.6334 4.50722 10.4355L4.32745 10.4666C4.18407 10.4895 4.03885 10.4986 3.89375 10.494C3.71159 10.4908 3.53001 10.4725 3.35087 10.4393C3.16049 10.4045 2.98119 10.3246 2.82796 10.2064C2.66705 10.0846 2.54715 9.91661 2.48428 9.72484L2.40602 9.54506C2.34022 9.40286 2.25754 9.2691 2.15976 9.14666C2.04775 9.00072 1.93447 8.90176 1.81991 8.84977L1.76518 8.81064C1.72769 8.78356 1.6936 8.75205 1.66367 8.71679C1.63479 8.6841 1.61108 8.64719 1.59334 8.60734C1.57766 8.57085 1.5907 8.54085 1.63247 8.51731C1.67461 8.49405 1.75123 8.48256 1.86068 8.48256L2.01692 8.50582C2.12108 8.52662 2.24996 8.5891 2.40356 8.69326C2.5585 8.79876 2.68797 8.93748 2.78254 9.09932C2.90239 9.31294 3.04695 9.47575 3.21624 9.58775C3.38552 9.69976 3.55609 9.75576 3.72793 9.75576C3.87725 9.7578 4.02641 9.74479 4.17312 9.7169C4.29459 9.69195 4.41264 9.65254 4.52473 9.59952C4.57162 9.25037 4.69931 8.98212 4.90782 8.79477C4.63684 8.76849 4.36827 8.72157 4.10444 8.6544C3.84797 8.58382 3.60133 8.48141 3.37029 8.34958C3.12825 8.218 2.91442 8.04015 2.74095 7.82613C2.57421 7.6178 2.4374 7.34417 2.3305 7.00524C2.2236 6.6663 2.1707 6.27584 2.1718 5.83383C2.1718 5.20357 2.37757 4.66708 2.7891 4.22435C2.59629 3.75006 2.61453 3.21885 2.84383 2.63073C2.99487 2.58385 3.21879 2.61897 3.51559 2.73608C3.81239 2.85319 4.02983 2.95352 4.16792 3.03707C4.30601 3.12025 4.41665 3.19058 4.49983 3.24804C5.48153 2.9773 6.51821 2.9773 7.49991 3.24804L7.79679 3.0606C8.0249 2.92356 8.26549 2.80849 8.51535 2.71693C8.79135 2.61276 9.00231 2.58412 9.14825 2.63101C9.38248 3.21949 9.40327 3.7507 9.21064 4.22462C9.62199 4.66735 9.82776 5.20385 9.82795 5.83411C9.82795 6.27684 9.77459 6.66904 9.66787 7.01071C9.56116 7.35238 9.42325 7.62601 9.25415 7.8316C9.07785 8.04326 8.86311 8.21966 8.62124 8.35149C8.39008 8.48329 8.14337 8.5857 7.88682 8.65632C7.62412 8.72277 7.35674 8.76915 7.087 8.79505C7.35698 9.02927 7.49206 9.3994 7.49225 9.90543V11.5527C7.49115 11.5964 7.49929 11.6398 7.51612 11.6802C7.53295 11.7206 7.5581 11.7569 7.58993 11.7869C7.65505 11.8493 7.75794 11.8675 7.89858 11.8416C9.10693 11.4403 10.0926 10.7177 10.8557 9.67367C11.6188 8.62968 12.0003 7.4539 12.0003 6.14632C11.9997 5.05873 11.7313 4.05497 11.195 3.13503V3.13503Z\"\n        fill=\"black\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0\">\n        <rect width=\"12\" height=\"12\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n)\n\nconst Saml = (\n  <svg width=\"17\" height=\"9\" viewBox=\"0 0 17 9\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M0.0691681 5.98162C0.115833 7.24157 1.07247 8.00221 2.59841 8.00221C4.17102 8.00221 5.12299 7.19957 5.12299 5.86962C5.12299 4.83832 4.55367 4.25501 3.25172 3.96569L2.56108 3.80703C1.8331 3.64837 1.53445 3.38704 1.53445 2.91106C1.53445 2.40708 1.94977 2.09442 2.61708 2.09442C3.27505 2.09442 3.6997 2.43508 3.75103 2.99039H5.00166C4.95966 1.78643 4.01236 0.997795 2.60308 0.997795C1.14713 0.997795 0.218496 1.79577 0.218496 3.05105C0.218496 4.04968 0.815808 4.69366 2.03376 4.96898L2.73374 5.13231C3.51304 5.30497 3.8117 5.54763 3.8117 6.00495C3.8117 6.55093 3.34972 6.90092 2.62174 6.90092C1.85644 6.90092 1.38045 6.56493 1.31979 5.98162H0.0691681Z\" />\n    <path d=\"M5.97695 5.98162C6.02362 7.24157 6.98025 8.00221 8.5062 8.00221C10.0788 8.00221 11.0308 7.19957 11.0308 5.86962C11.0308 4.83832 10.4615 4.25501 9.15951 3.96569L8.46886 3.80703C7.74089 3.64837 7.44223 3.38704 7.44223 2.91106C7.44223 2.40708 7.85755 2.09442 8.52486 2.09442C9.18284 2.09442 9.60749 2.43508 9.65882 2.99039H10.9094C10.8674 1.78643 9.92015 0.997795 8.51086 0.997795C7.05492 0.997795 6.12628 1.79577 6.12628 3.05105C6.12628 4.04968 6.72359 4.69366 7.94155 4.96898L8.64153 5.13231C9.42083 5.30497 9.71949 5.54763 9.71949 6.00495C9.71949 6.55093 9.2575 6.90092 8.52953 6.90092C7.76422 6.90092 7.28824 6.56493 7.22758 5.98162H5.97695Z\" />\n    <path d=\"M16.9852 5.01565V3.98435C16.9852 2.11309 16.0099 0.997795 14.3953 0.997795C12.7807 0.997795 11.8054 2.11309 11.8054 3.98435V5.01565C11.8054 6.88692 12.7807 8.00221 14.3953 8.00221C16.0099 8.00221 16.9852 6.88692 16.9852 5.01565ZM14.3953 6.82625C13.5833 6.82625 13.154 6.21494 13.154 5.00165V3.99835C13.154 2.78506 13.5833 2.17375 14.3953 2.17375C15.2073 2.17375 15.6366 2.78506 15.6366 3.99835V5.00165C15.6366 6.21494 15.2073 6.82625 14.3953 6.82625Z\" />\n  </svg>\n)\n\ninterface Props {\n  provider: string | undefined\n}\n\nexport const LoginProviderLogo = ({provider}: Props) => {\n  const isSaml = provider?.startsWith('saml-')\n  const logoName = isSaml ? 'saml' : provider\n\n  return (\n    <Root data-logo={logoName}>\n      {provider === 'google' && Google}\n      {provider === 'github' && GitHub}\n      {provider === 'sanity' && <SanityMonogram />}\n      {isSaml && Saml}\n    </Root>\n  )\n}\n","import {SunIcon, MoonIcon, LeaveIcon, ChevronDownIcon, CogIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Card,\n  Flex,\n  Label,\n  Menu,\n  MenuButton,\n  MenuButtonProps,\n  MenuDivider,\n  MenuItem,\n  Stack,\n  Text,\n  Tooltip,\n} from '@sanity/ui'\nimport React, {useCallback, useMemo} from 'react'\nimport styled from 'styled-components'\nimport {UserAvatar} from '../../../../components/UserAvatar'\nimport {getProviderTitle} from '../../../../datastores/authStore/providerTitle'\nimport {useColorScheme} from '../../../colorScheme'\nimport {useWorkspace} from '../../../workspace'\nimport {LoginProviderLogo} from './LoginProviderLogo'\n\nconst StyledMenu = styled(Menu)`\n  min-width: 125px;\n  max-width: 350px;\n`\n\nconst AvatarBox = styled(Box)`\n  position: relative;\n`\n\nexport function UserMenu() {\n  const {currentUser, projectId, auth} = useWorkspace()\n  const {scheme, setScheme} = useColorScheme()\n\n  const providerTitle = getProviderTitle(currentUser?.provider)\n\n  const popoverProps: MenuButtonProps['popover'] = useMemo(\n    () => ({\n      placement: 'bottom-end',\n      portal: true,\n      preventOverflow: true,\n      scheme: scheme,\n    }),\n    [scheme]\n  )\n\n  const handleToggleScheme = useCallback(() => {\n    setScheme(scheme === 'dark' ? 'light' : 'dark')\n  }, [scheme, setScheme])\n\n  return (\n    <MenuButton\n      button={\n        <Button mode=\"bleed\" padding={0} paddingX={1}>\n          <Flex align=\"center\" gap={1}>\n            <UserAvatar user=\"me\" size={1} />\n            <Text size={1} muted>\n              <ChevronDownIcon />\n            </Text>\n          </Flex>\n        </Button>\n      }\n      id=\"user-menu\"\n      menu={\n        <StyledMenu>\n          <Card padding={2}>\n            <Box marginBottom={3}>\n              <Label size={1} muted>\n                Signed in as\n              </Label>\n            </Box>\n\n            <Flex align=\"center\">\n              <Tooltip\n                disabled={!providerTitle}\n                portal\n                content={\n                  providerTitle && (\n                    <Box padding={2}>\n                      <Text size={1}>Signed in with {providerTitle}</Text>\n                    </Box>\n                  )\n                }\n              >\n                <AvatarBox marginRight={3}>\n                  <UserAvatar size={1} user=\"me\" />\n                  {currentUser?.provider && <LoginProviderLogo provider={currentUser.provider} />}\n                </AvatarBox>\n              </Tooltip>\n\n              <Stack space={2} flex={1}>\n                <Text size={1} weight=\"semibold\" textOverflow=\"ellipsis\">\n                  {currentUser?.name}\n                </Text>\n\n                <Text size={1} muted textOverflow=\"ellipsis\">\n                  {currentUser?.email}\n                </Text>\n              </Stack>\n            </Flex>\n          </Card>\n\n          <MenuDivider />\n\n          <MenuItem\n            icon={scheme === 'dark' ? SunIcon : MoonIcon}\n            onClick={handleToggleScheme}\n            text={scheme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode'}\n          />\n\n          <MenuDivider />\n\n          <MenuItem\n            as=\"a\"\n            href={`https://sanity.io/manage/project/${projectId}`}\n            target=\"_blank\"\n            text=\"Manage project\"\n            icon={CogIcon}\n          />\n\n          {auth.logout && (\n            <>\n              <MenuDivider />\n              <MenuItem\n                iconRight={LeaveIcon}\n                text=\"Sign out\"\n                disabled={!auth.logout}\n                {...(auth.logout && {onClick: auth.logout})}\n              />\n            </>\n          )}\n        </StyledMenu>\n      }\n      popover={popoverProps}\n    />\n  )\n}\n","import {PreviewLayoutKey} from './types'\n\nexport const PREVIEW_MEDIA_SIZE: Record<PreviewLayoutKey, {width: number; height: number}> = {\n  block: {width: 33, height: 33},\n  blockImage: {width: 600, height: 400},\n  default: {width: 35, height: 35},\n  detail: {width: 75, height: 75},\n  inline: {width: 15, height: 15},\n  media: {width: 160, height: 160},\n}\n\nexport const PREVIEW_ICON_SIZE: Record<PreviewLayoutKey, number | undefined> = {\n  block: 31,\n  blockImage: 45,\n  default: 33,\n  detail: 45,\n  inline: 15,\n  media: 45,\n}\n","import {rem} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {PREVIEW_ICON_SIZE} from '../constants'\nimport {PreviewLayoutKey, PreviewMediaDimensions} from '../types'\n\nexport const MediaWrapper = styled.span<{\n  $dimensions: PreviewMediaDimensions\n  $layout: PreviewLayoutKey\n  $radius: number\n  $responsive: boolean\n}>((props) => {\n  const {$dimensions, $layout, $radius, $responsive} = props\n  const width = $dimensions.width || 0\n  const height = $dimensions.width || 0\n  const iconSize = PREVIEW_ICON_SIZE[$layout]\n\n  return css`\n    position: relative;\n    width: ${$responsive ? '100%' : rem(width)};\n    height: ${$responsive ? '100%' : rem(height)};\n    min-width: ${$responsive ? undefined : rem(width)};\n    border-radius: ${({theme}) => rem(theme.sanity.radius[$radius])};\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    & img {\n      position: absolute;\n      left: 0;\n      top: 0;\n      width: 100%;\n      height: 100%;\n      object-fit: contain;\n      border-radius: inherit;\n    }\n\n    & svg {\n      display: block;\n      font-size: calc(21 / 16 * 1em);\n    }\n\n    & [data-sanity-icon] {\n      display: block;\n      font-size: calc(${iconSize} / 16 * 1em);\n    }\n\n    /*\n      NOTE on why we can’t use the \":after\" pseudo-element:\n      The thing is we only want the shadow when then <MediaWrapper> contains\n      something else than <svg> – icons should not have the shadow.\n      This is why we use the \"*:not(svg) + span\" selector to target only that\n      situation to render the shadow.\n    */\n    & *:not(svg) + span {\n      display: block;\n      position: absolute;\n      left: 0;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      box-shadow: inset 0 0 0 1px var(--card-fg-color);\n      opacity: 0.2;\n      border-radius: inherit;\n    }\n  `\n})\n\nMediaWrapper.displayName = 'MediaWrapper'\n","import {Text} from '@sanity/ui'\nimport React, {createElement, isValidElement} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {PreviewMediaDimensions, PreviewLayoutKey, PreviewProps} from '../types'\nimport {MediaWrapper} from './Media.styled'\n\nexport interface MediaProps {\n  border?: boolean\n  dimensions: PreviewMediaDimensions\n  layout: PreviewLayoutKey\n  media: PreviewProps['media']\n  radius?: number\n  responsive?: boolean\n  styles?: {\n    media?: string\n    mediaString?: string\n  }\n}\n\nexport function Media(props: MediaProps) {\n  const {border = true, dimensions, layout, media, radius = 1, responsive = false, styles} = props\n\n  return (\n    <MediaWrapper\n      $dimensions={dimensions}\n      $layout={layout}\n      $radius={radius}\n      $responsive={responsive}\n      className={styles?.media}\n      data-testid=\"Media\"\n    >\n      {renderMedia({dimensions, layout, media})}\n      {border && <span />}\n    </MediaWrapper>\n  )\n}\n\nfunction renderMedia(props: {\n  dimensions: PreviewMediaDimensions\n  layout: PreviewLayoutKey\n  media: PreviewProps['media']\n  styles?: {\n    media?: string\n    mediaString?: string\n  }\n}) {\n  const {dimensions, layout, media, styles} = props\n\n  if (isValidElementType(media)) {\n    return createElement(media, {dimensions, layout})\n  }\n\n  if (typeof media === 'string') {\n    return (\n      <Text as=\"span\" className={styles?.mediaString}>\n        {media}\n      </Text>\n    )\n  }\n\n  if (isValidElement(media)) {\n    return media\n  }\n\n  return null\n}\n","import React, {createElement} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {PreviewLayoutKey, PreviewMediaDimensions} from './types'\n\nexport function renderPreviewMedia<Layout = PreviewLayoutKey>(\n  value:\n    | React.ReactNode\n    | React.ComponentType<{layout: Layout; dimensions: PreviewMediaDimensions}>,\n  layout: Layout,\n  dimensions: PreviewMediaDimensions\n) {\n  if (isValidElementType(value)) {\n    return createElement(value, {layout, dimensions})\n  }\n\n  if (typeof value === 'string') {\n    return <div>{value}</div>\n  }\n\n  return value\n}\n\nexport function renderPreviewNode<Layout = PreviewLayoutKey>(\n  value: React.ReactNode | React.ComponentType<{layout: Layout}>,\n  layout: Layout,\n  fallbackNode?: React.ReactNode\n) {\n  if (typeof value === 'string') {\n    return value\n  }\n\n  if (isValidElementType(value)) {\n    return createElement(value, {layout})\n  }\n\n  return value || fallbackNode\n}\n","import React from 'react'\nimport {Box, Flex, Stack, Text, Skeleton, TextSkeleton, rem} from '@sanity/ui'\nimport classNames from 'classnames'\nimport styled from 'styled-components'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {renderPreviewNode} from '../helpers'\n\nexport interface DefaultPreviewProps extends Omit<PreviewProps<'default'>, 'schemaType'> {\n  styles?: {\n    root?: string\n    placeholder?: string\n    media?: string\n    heading?: string\n    title?: string\n    subtitle?: string\n    hasSubtitle?: string\n    mediaString?: string\n    status?: string\n    children?: string\n  }\n}\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.default,\n  aspect: 1,\n  fit: 'crop',\n  dpr: getDevicePixelRatio(),\n}\n\nconst Root = styled(Flex)`\n  height: ${rem(PREVIEW_MEDIA_SIZE.default.height)};\n`\n\nconst TitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1})`\n  max-width: ${rem(160)};\n  width: 80%;\n`\n\nconst SubtitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1, size: 1})`\n  max-width: ${rem(120)};\n  width: 60%;\n`\n\nexport function DefaultPreview(props: DefaultPreviewProps) {\n  const {title, subtitle, media, status, isPlaceholder, children, styles} = props\n  const rootClassName = classNames(styles?.root, Boolean(subtitle) && styles?.hasSubtitle)\n\n  const statusNode = status && (\n    <Box\n      className={styles?.status}\n      data-testid=\"default-preview__status\"\n      paddingLeft={3}\n      paddingRight={1}\n    >\n      {renderPreviewNode(status, 'default')}\n    </Box>\n  )\n\n  if (isPlaceholder) {\n    return (\n      <Root align=\"center\" className={styles?.placeholder} data-testid=\"default-preview\">\n        {media !== false && (\n          <Skeleton animated marginRight={2} radius={2} style={PREVIEW_MEDIA_SIZE.default} />\n        )}\n\n        <Stack\n          data-testid=\"default-preview__heading\"\n          flex={1}\n          paddingLeft={media === false ? 1 : 2}\n          paddingRight={status ? 0 : 1}\n          space={2}\n        >\n          <TitleSkeleton />\n          <SubtitleSkeleton />\n        </Stack>\n\n        {statusNode}\n      </Root>\n    )\n  }\n\n  return (\n    <Root align=\"center\" className={rootClassName} data-testid=\"default-preview\">\n      {media !== false && media !== undefined && (\n        <Media\n          dimensions={DEFAULT_MEDIA_DIMENSIONS}\n          layout=\"default\"\n          media={media}\n          styles={styles}\n        />\n      )}\n\n      <Stack\n        className={styles?.heading}\n        data-testid=\"default-preview__header\"\n        flex={1}\n        paddingLeft={media ? 2 : 1}\n        paddingRight={status ? 0 : 1}\n        space={2}\n      >\n        <Text className={styles?.title} style={{color: 'inherit'}} textOverflow=\"ellipsis\">\n          {title && renderPreviewNode(title, 'default')}\n          {!title && <span style={{color: 'var(--card-muted-fg-color)'}}>Untitled</span>}\n        </Text>\n\n        {subtitle && (\n          <Text muted size={1} textOverflow=\"ellipsis\" className={styles?.subtitle}>\n            {renderPreviewNode(subtitle, 'default')}\n          </Text>\n        )}\n\n        {children && <div className={styles?.children}>{children}</div>}\n      </Stack>\n\n      {statusNode}\n    </Root>\n  )\n}\n","import {Box, Flex, rem, Skeleton, Text, TextSkeleton} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\n\nexport const RootFlex = styled(Flex).attrs({align: 'center'})`\n  height: ${rem(PREVIEW_MEDIA_SIZE.detail.height)};\n`\n\nexport const StatusBox = styled(Box)`\n  white-space: nowrap;\n`\n\nexport const MediaSkeleton = styled(Skeleton).attrs({animated: true, radius: 2})`\n  width: ${rem(PREVIEW_MEDIA_SIZE.detail.width)};\n  height: ${rem(PREVIEW_MEDIA_SIZE.detail.height)};\n`\n\nexport const TitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1})`\n  max-width: ${rem(160)}; /* 80% of 200px */\n  width: 80%;\n`\n\nexport const SubtitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1, size: 1})`\n  max-width: ${rem(120)}; /* 60% of 200px */\n  width: 60%;\n`\n\nexport const DescriptionSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1, size: 1})`\n  max-width: ${rem(180)}; /* 90% of 200px */\n  width: 90%;\n`\n\nexport const DescriptionText = styled(Text)(({theme}) => {\n  const {fonts} = theme.sanity\n  const textSize1 = fonts.text.sizes[1]\n  const maxLines = 2\n  const maxHeight = textSize1.lineHeight * maxLines\n\n  return css`\n    & > span {\n      max-height: ${rem(maxHeight)};\n\n      /* Multi-line text overflow */\n      display: -webkit-box;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      -webkit-line-clamp: ${maxLines};\n      -webkit-box-orient: vertical;\n    }\n  `\n})\n","import React from 'react'\nimport {Box, Flex, Stack, Text} from '@sanity/ui'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {renderPreviewNode} from '../helpers'\nimport {\n  DescriptionSkeleton,\n  DescriptionText,\n  MediaSkeleton,\n  RootFlex,\n  StatusBox,\n  SubtitleSkeleton,\n  TitleSkeleton,\n} from './DetailPreview.styled'\n\nexport type DetailPreviewProps = PreviewProps<'detail'>\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.detail,\n  fit: 'crop',\n  aspect: 1,\n  dpr: getDevicePixelRatio(),\n}\n\nexport function DetailPreview(props: DetailPreviewProps) {\n  const {\n    title,\n    subtitle,\n    description,\n    mediaDimensions = DEFAULT_MEDIA_DIMENSIONS,\n    media,\n    status,\n    children,\n    isPlaceholder,\n  } = props\n\n  const statusNode = status && (\n    <StatusBox marginLeft={3} paddingRight={1}>\n      {renderPreviewNode(status, 'detail')}\n    </StatusBox>\n  )\n\n  if (isPlaceholder) {\n    return (\n      <RootFlex data-testid=\"detail-preview\">\n        {media !== false && <MediaSkeleton data-testid=\"detail-preview__media\" />}\n\n        <Box flex={1} paddingLeft={media === false ? 1 : 2}>\n          <Flex align=\"center\" data-testid=\"detail-preview__header\">\n            <Stack flex={1} space={2}>\n              <TitleSkeleton />\n              <SubtitleSkeleton />\n            </Stack>\n\n            {statusNode}\n          </Flex>\n\n          {description && (\n            <Box marginTop={3}>\n              <DescriptionSkeleton />\n            </Box>\n          )}\n        </Box>\n      </RootFlex>\n    )\n  }\n\n  return (\n    <RootFlex data-testid=\"detail-preview\">\n      {media !== false && <Media dimensions={mediaDimensions} layout=\"detail\" media={media} />}\n\n      <Box flex={1} paddingLeft={media === false ? 1 : 2}>\n        <Flex align=\"center\" data-testid=\"detail-preview__header\">\n          <Stack flex={1} space={2}>\n            <Text textOverflow=\"ellipsis\" style={{color: 'inherit'}}>\n              {title && renderPreviewNode(title, 'detail')}\n              {!title && <>Untitled</>}\n            </Text>\n\n            {subtitle && (\n              <Text muted size={1} textOverflow=\"ellipsis\">\n                {renderPreviewNode(subtitle, 'detail')}\n              </Text>\n            )}\n          </Stack>\n\n          {statusNode}\n        </Flex>\n\n        {description && (\n          <Box marginTop={3}>\n            <DescriptionText muted size={1}>\n              {renderPreviewNode(description, 'detail')}\n            </DescriptionText>\n          </Box>\n        )}\n      </Box>\n\n      {children}\n    </RootFlex>\n  )\n}\n","import {hues} from '@sanity/color'\nimport {Theme} from '@sanity/ui'\nimport React from 'react'\nimport styled, {css} from 'styled-components'\n\nconst SIZE = 43\nconst STROKE_WIDTH = 3\n\nconst Root = styled.svg`\n  width: ${SIZE}px;\n  height: ${SIZE}px;\n  transform: rotate(-90deg);\n`\n\nconst BgCircle = styled.circle(({theme}: {theme: Theme}) => {\n  const {color} = theme.sanity\n\n  return css`\n    fill: none;\n    stroke: ${hues.gray[color.dark ? 900 : 100].hex};\n    stroke-width: ${STROKE_WIDTH}px;\n  `\n})\n\nconst ProgressCircle = styled.circle(({theme}: {theme: Theme}) => {\n  const {color} = theme.sanity\n\n  return css`\n    fill: none;\n    stroke: ${hues.blue[color.dark ? 400 : 500].hex};\n    stroke-width: ${STROKE_WIDTH}px;\n    transition: stroke-dashoffset 75ms;\n  `\n})\n\nexport function CircularProgress(props: {\n  /** Percentage */\n  value: number\n}) {\n  const {value: valueProp} = props\n  const value = Math.min(Math.max(valueProp, 0), 100)\n  const radius = SIZE / 2 - STROKE_WIDTH / 2\n  const circ = 2 * Math.PI * radius\n  const offset = ((100 - value) / 100) * circ\n  const viewBox = `${SIZE / 2} ${SIZE / 2} ${SIZE} ${SIZE}`\n\n  return (\n    <Root viewBox={viewBox}>\n      <BgCircle cx={SIZE} cy={SIZE} r={radius} />\n      <ProgressCircle\n        cx={SIZE}\n        cy={SIZE}\n        r={radius}\n        style={{\n          strokeDasharray: circ,\n          strokeDashoffset: `${offset}px`,\n        }}\n      />\n    </Root>\n  )\n}\n","import {hues} from '@sanity/color'\nimport {Theme, Card} from '@sanity/ui'\nimport React from 'react'\nimport styled, {css} from 'styled-components'\n\nconst STROKE_WIDTH = 0.5\n\nconst Root = styled(Card)`\n  overflow: hidden;\n`\n\nconst Bar = styled(Card)(({theme}: {theme: Theme}) => {\n  const {color} = theme.sanity\n\n  return css`\n    height: ${STROKE_WIDTH}rem;\n    background: ${hues.blue[color.dark ? 400 : 500].hex};\n    transition: transform 75ms;\n  `\n})\n\nexport function LinearProgress(props: {\n  /** Percentage */\n  value: number\n}) {\n  const {value} = props\n\n  return (\n    <Root radius={5}>\n      <Bar radius={5} style={{transform: `translate3d(${value - 100}%, 0, 0)`}} />\n    </Root>\n  )\n}\n","import {Box, Flex, rem, Skeleton, Stack} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const RootBox = styled(Box)`\n  position: relative;\n`\n\nexport const MediaFlex = styled(Flex).attrs({align: 'center', justify: 'center'})`\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n`\n\nexport const MediaSkeleton = styled(Skeleton).attrs({animated: true, radius: 2})`\n  width: 100%;\n  height: 100%;\n`\n\nexport const ProgressFlex = styled(Flex).attrs({align: 'center', justify: 'center'})`\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n\n  &:before {\n    background-color: var(--card-bg-color);\n    opacity: 0.75;\n    content: '';\n    display: block;\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n  }\n\n  > svg {\n    position: relative;\n    z-index: 2;\n  }\n`\n\nexport const TooltipContentStack = styled(Stack).attrs({padding: 2, space: 2})`\n  max-width: ${rem(200)};\n`\n","import React, {useMemo} from 'react'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {Text, Tooltip} from '@sanity/ui'\nimport {CircularProgress} from '../../progress'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {renderPreviewNode} from '../helpers'\nimport {\n  MediaSkeleton,\n  MediaFlex,\n  ProgressFlex,\n  RootBox,\n  TooltipContentStack,\n} from './MediaPreview.styled'\n\nexport type MediaPreviewProps = PreviewProps<'media'>\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.media,\n  aspect: 1,\n  fit: 'crop',\n  dpr: getDevicePixelRatio(),\n}\n\nexport function MediaPreview(props: MediaPreviewProps) {\n  const {\n    media,\n    mediaDimensions = DEFAULT_MEDIA_DIMENSIONS,\n    children,\n    isPlaceholder,\n    progress = -1,\n    subtitle,\n    title,\n    withBorder = true,\n    withRadius = true,\n  } = props\n\n  const aspect = mediaDimensions.aspect || 1\n\n  const STYLES_PADDER = useMemo(() => ({paddingBottom: `${100 / aspect}%`}), [aspect])\n\n  const tooltipContent = useMemo(() => {\n    if (!title || !subtitle) {\n      return null\n    }\n\n    return (\n      <TooltipContentStack>\n        {title && (\n          <Text align=\"center\" size={1} weight=\"semibold\">\n            {renderPreviewNode(title, 'media')}\n          </Text>\n        )}\n\n        {subtitle && (\n          <Text align=\"center\" muted size={1}>\n            {renderPreviewNode(subtitle, 'media')}\n          </Text>\n        )}\n      </TooltipContentStack>\n    )\n  }, [subtitle, title])\n\n  return (\n    <RootBox data-testid=\"media-preview\" overflow=\"hidden\" flex={1}>\n      <div style={STYLES_PADDER} />\n\n      <Tooltip content={tooltipContent} disabled={!tooltipContent} placement=\"top\" portal>\n        <MediaFlex>\n          {isPlaceholder ? (\n            <MediaSkeleton />\n          ) : (\n            <Media\n              border={withBorder}\n              dimensions={mediaDimensions}\n              layout=\"media\"\n              media={media}\n              radius={withRadius ? 1 : 0}\n              responsive\n            />\n          )}\n\n          {typeof progress === 'number' && progress > -1 && (\n            <ProgressFlex>\n              <CircularProgress value={progress} />\n            </ProgressFlex>\n          )}\n        </MediaFlex>\n      </Tooltip>\n\n      {children}\n    </RootBox>\n  )\n}\n","import {Box, Card, Flex, rem} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\n\nexport const HeaderFlex = styled(Flex).attrs({align: 'center'})`\n  box-shadow: 0 0 0 1px var(--card-border-color);\n  height: ${rem(PREVIEW_MEDIA_SIZE.block.height)};\n  white-space: nowrap;\n  position: relative;\n  z-index: 1;\n`\n\nexport const MediaCard = styled(Card)<{$ratio: number}>`\n  position: relative;\n  padding-bottom: ${({$ratio}) => $ratio}%;\n\n  & > span {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n`\n\nexport const RootBox = styled(Box).attrs({overflow: 'hidden'})`\n  border-radius: ${({theme}) => theme.sanity.radius[1]}px;\n`\n","import {Box, Flex, Stack, Text} from '@sanity/ui'\nimport React from 'react'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {renderPreviewNode} from '../helpers'\nimport {HeaderFlex, MediaCard, RootBox} from './BlockImagePreview.styled'\n\nexport type BlockImagePreviewProps = PreviewProps<'blockImage'>\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.blockImage,\n  fit: 'fillmax',\n  dpr: getDevicePixelRatio(),\n}\n\nconst getRatio = (dimensions: PreviewMediaDimensions) => {\n  const {height, width} = dimensions\n\n  if (!height || !width) {\n    return 1\n  }\n\n  return (height / width) * 100\n}\n\nexport function BlockImagePreview(props: BlockImagePreviewProps) {\n  const {\n    actions,\n    title,\n    subtitle,\n    description,\n    fallbackTitle = 'Untitled',\n    mediaDimensions = DEFAULT_MEDIA_DIMENSIONS,\n    media,\n    children,\n    status,\n  } = props\n\n  return (\n    <RootBox>\n      <Stack>\n        <HeaderFlex paddingLeft={2} paddingRight={1} paddingY={1}>\n          <Stack flex={1} space={2}>\n            <Text size={1} textOverflow=\"ellipsis\" weight=\"semibold\">\n              {title || fallbackTitle}\n            </Text>\n\n            {subtitle && (\n              <Text muted size={1} textOverflow=\"ellipsis\">\n                {renderPreviewNode(subtitle, 'block')}\n              </Text>\n            )}\n          </Stack>\n\n          <Flex gap={1} paddingLeft={1}>\n            {status && (\n              <Box paddingX={2} paddingY={3}>\n                {renderPreviewNode(status, 'block')}\n              </Box>\n            )}\n\n            {actions}\n          </Flex>\n        </HeaderFlex>\n\n        <MediaCard\n          $ratio={getRatio(mediaDimensions)}\n          __unstable_checkered\n          display=\"flex\"\n          sizing=\"border\"\n          tone=\"inherit\"\n        >\n          <Media\n            border={false}\n            dimensions={mediaDimensions}\n            layout=\"blockImage\"\n            media={media}\n            radius={0}\n            responsive\n          />\n        </MediaCard>\n      </Stack>\n\n      {description && (\n        <Box paddingX={2} paddingY={3}>\n          <Text muted size={1}>\n            {renderPreviewNode(description, 'block')}\n          </Text>\n        </Box>\n      )}\n\n      {children && <div>{children}</div>}\n    </RootBox>\n  )\n}\n","import {Box, Flex, rem, Stack, Text} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {renderPreviewNode} from '../helpers'\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.block,\n  aspect: 1,\n  fit: 'crop',\n  dpr: getDevicePixelRatio(),\n}\n\nconst HeaderFlex = styled(Flex).attrs({align: 'center'})`\n  min-height: ${rem(PREVIEW_MEDIA_SIZE.block.height)};\n`\n\nexport function BlockPreview(props: PreviewProps<'block'>) {\n  const {\n    actions,\n    title,\n    subtitle,\n    description,\n    mediaDimensions = DEFAULT_MEDIA_DIMENSIONS,\n    media,\n    status,\n    children,\n  } = props\n\n  return (\n    <Stack data-testid=\"block-preview\" space={1}>\n      <HeaderFlex data-testid=\"block-preview__header\">\n        {media && <Media dimensions={mediaDimensions} layout=\"block\" media={media} />}\n\n        <Box flex={1} paddingLeft={media ? 2 : 1}>\n          <Text size={1} textOverflow=\"ellipsis\" weight=\"semibold\">\n            {title && renderPreviewNode(title, 'block')}\n            {!title && <>Untitled</>}\n          </Text>\n\n          {subtitle && (\n            <Box marginTop={2}>\n              <Text muted size={1} textOverflow=\"ellipsis\">\n                {renderPreviewNode(subtitle, 'block')}\n              </Text>\n            </Box>\n          )}\n\n          {description && (\n            <Box marginTop={3}>\n              <Text muted size={1} textOverflow=\"ellipsis\">\n                {renderPreviewNode(description, 'block')}\n              </Text>\n            </Box>\n          )}\n        </Box>\n\n        <Flex gap={1} paddingLeft={1}>\n          {status && (\n            <Box paddingX={2} paddingY={3}>\n              {renderPreviewNode(status, 'block')}\n            </Box>\n          )}\n\n          {actions}\n        </Flex>\n      </HeaderFlex>\n\n      {children && <div data-testid=\"block-preview__children\">{children}</div>}\n    </Stack>\n  )\n}\n","import {rem, Text, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const RootSpan = styled.span`\n  display: inline-flex;\n  align-items: center;\n  vertical-align: top;\n  height: calc(1em - 1px);\n  max-width: 100%;\n`\n\nexport const MediaSpan = styled.span`\n  position: relative;\n  display: inline-block;\n  width: calc(1em - 1px);\n  height: calc(1em - 1px);\n  min-width: calc(1em - 1px);\n\n  & img {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    border-radius: ${({theme}) => rem(theme.sanity.radius[1])};\n  }\n\n  & img + span {\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    box-shadow: inset 0 0 0 1px var(--card-fg-color);\n    opacity: 0.2;\n    border-radius: ${({theme}) => rem(theme.sanity.radius[1])};\n  }\n\n  & svg {\n    display: block;\n    font-size: calc(14 / 16 * 1em);\n    margin: 1px 0;\n\n    &[data-sanity-icon] {\n      font-size: calc(18 / 16 * 1em);\n      margin: calc(1px + (2 / 18 * -1em)) 0;\n    }\n  }\n`\n\nexport const TextSpan = styled(Text).attrs({forwardedAs: 'span'})(({theme}: {theme: Theme}) => {\n  const textFont = theme.sanity.fonts.text\n  const textSize = textFont.sizes[1]\n\n  return css`\n    font-size: calc(${textSize.fontSize} / 16 * 1em);\n    font-weight: ${textFont.weights.medium};\n    box-sizing: border-box;\n    display: inline-block;\n    vertical-align: top;\n    line-height: ${textSize.lineHeight / textSize.fontSize};\n    padding-left: 0.5em;\n    padding-right: calc(0.5em - 2px);\n    min-width: 0;\n\n    & > span {\n      display: block;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n  `\n})\n","import React from 'react'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {renderPreviewMedia, renderPreviewNode} from '../helpers'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {RootSpan, MediaSpan, TextSpan} from './InlinePreview.styled'\n\nexport type InlinePreviewProps = PreviewProps<'inline'>\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.inline,\n  fit: 'crop',\n  aspect: 1,\n  dpr: getDevicePixelRatio(),\n}\n\nexport function InlinePreview(props: InlinePreviewProps) {\n  const {\n    title,\n    fallbackTitle = 'Untitled',\n    media,\n    mediaDimensions = DEFAULT_MEDIA_DIMENSIONS,\n  } = props\n\n  return (\n    <RootSpan data-testid=\"inline-preview\">\n      {media && (\n        <MediaSpan data-testid=\"inline-preview-media\">\n          {renderPreviewMedia(media, 'inline', mediaDimensions)}\n          <span />\n        </MediaSpan>\n      )}\n\n      <TextSpan data-testid=\"inline-preview-title\" size={1}>\n        {renderPreviewNode(title, 'inline', fallbackTitle)}\n      </TextSpan>\n    </RootSpan>\n  )\n}\n","import React from 'react'\nimport {Box, Flex, rem, Stack, Text, TextSkeleton} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {PreviewMediaDimensions} from '../types'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\n\nexport interface TemplatePreviewProps {\n  description?: React.ReactNode | React.FunctionComponent<unknown>\n  isPlaceholder?: boolean\n  media?: React.ReactNode | React.FunctionComponent<unknown>\n  mediaDimensions?: PreviewMediaDimensions\n  subtitle?: React.ReactNode | React.FunctionComponent<{layout: 'default'}>\n  title?: React.ReactNode | React.FunctionComponent<unknown>\n}\n\nconst DEFAULT_MEDIA_DIMENSION: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.default,\n  aspect: 1,\n  fit: 'crop',\n  dpr: getDevicePixelRatio(),\n}\n\nconst Root = styled(Box)`\n  height: 100%;\n\n  a {\n    color: currentColor;\n    text-decoration: none;\n  }\n\n  svg[data-sanity-icon] {\n    margin: 0;\n  }\n`\n\nconst HeaderFlex = styled(Flex).attrs({align: 'center'})`\n  height: ${rem(PREVIEW_MEDIA_SIZE.default.height)};\n`\n\nconst TitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1})`\n  max-width: ${rem(160)};\n  width: 80%;\n`\n\nconst SubtitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1, size: 1})`\n  max-width: ${rem(120)};\n  width: 60%;\n`\n\nexport function TemplatePreview(props: TemplatePreviewProps) {\n  const {\n    description,\n    isPlaceholder,\n    media,\n    mediaDimensions = DEFAULT_MEDIA_DIMENSION,\n    subtitle,\n    title = 'Untitled',\n  } = props\n\n  if (isPlaceholder) {\n    return (\n      <Root>\n        <HeaderFlex>\n          <Stack flex={1} space={2}>\n            <TitleSkeleton />\n            <SubtitleSkeleton />\n          </Stack>\n        </HeaderFlex>\n      </Root>\n    )\n  }\n\n  return (\n    <Root>\n      <HeaderFlex>\n        <Stack flex={1} space={2}>\n          <Text textOverflow=\"ellipsis\">\n            {typeof title !== 'function' && title}\n            {typeof title === 'function' && title({layout: 'default'})}\n          </Text>\n\n          {subtitle && (\n            <Text muted size={1} textOverflow=\"ellipsis\">\n              {(typeof subtitle === 'function' && subtitle({layout: 'default'})) || subtitle}\n            </Text>\n          )}\n        </Stack>\n\n        {media && (\n          <Flex align=\"flex-start\" paddingLeft={2}>\n            <Media dimensions={mediaDimensions} layout=\"default\" media={media} />\n          </Flex>\n        )}\n      </HeaderFlex>\n\n      {description && (\n        <Box marginTop={3}>\n          <Text muted size={1} style={{whiteSpace: 'break-spaces'}}>\n            {description}\n          </Text>\n        </Box>\n      )}\n    </Root>\n  )\n}\n","import {AccessDeniedIcon} from '@sanity/icons'\nimport {CurrentUser} from '@sanity/types'\nimport {Text, Inline, Box} from '@sanity/ui'\nimport React from 'react'\n\nexport interface InsufficientPermissionsMessageProps {\n  title?: string\n  operationLabel?: string\n  currentUser?: CurrentUser | null\n}\n\nexport function InsufficientPermissionsMessage(props: InsufficientPermissionsMessageProps) {\n  const {\n    currentUser,\n    title = 'Insufficient permissions',\n    operationLabel = 'access this feature',\n  } = props\n\n  const roles = currentUser?.roles || []\n  const plural = roles.length !== 1\n\n  return (\n    <Box padding={2}>\n      <Inline space={2}>\n        <Text size={1}>\n          <AccessDeniedIcon />\n        </Text>\n        <Text weight=\"semibold\">{title}</Text>\n      </Inline>\n      <Inline marginTop={4}>\n        <Text size={1}>\n          {roles.length === 0 ? (\n            <>You have no role that grants you permission to {operationLabel}</>\n          ) : (\n            <>\n              Your role{plural && 's'}{' '}\n              {join(\n                roles.map((r) => <code key={r.name}>{r.title}</code>),\n                <>, </>\n              )}{' '}\n              do{plural || 'es'} not have permissions to {operationLabel}\n            </>\n          )}\n        </Text>\n      </Inline>\n    </Box>\n  )\n}\n\nfunction join(array: React.ReactElement[], sep: React.ReactElement) {\n  return array.reduce<React.ReactElement[] | null>(\n    (result, item) => (result === null ? [item] : [...result, sep, item]),\n    null\n  )\n}\n","import React, {useCallback, useMemo, useState} from 'react'\nimport {Dialog, Grid, Button, Flex, Box, Tooltip, Spinner, Text} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {ComposeIcon} from '@sanity/icons'\nimport {DefaultPreview} from '../../../components/previews'\nimport {InsufficientPermissionsMessage} from '../../../components/InsufficientPermissionsMessage'\nimport {TemplatePermissionsResult, useTemplatePermissions} from '../../../datastores'\nimport {IntentLink} from '../../../router'\nimport {useSource} from '../../source'\nimport {useColorScheme} from '../../colorScheme'\n\nconst DocumentButton = styled(Button)`\n  text-decoration: none;\n`\n\nconst TooltipContentBox = styled(Box)`\n  max-width: 300px;\n`\n\nconst DisabledButtonWrapper = styled.div`\n  & > * {\n    width: 100%;\n  }\n`\n\nexport function NewDocumentButton() {\n  const [newDocumentButtonEl, setNewDocumentButtonEl] = useState<HTMLButtonElement | null>(null)\n  const [open, setOpen] = useState<boolean>(false)\n\n  const {scheme} = useColorScheme()\n\n  const {\n    __internal: {staticInitialValueTemplateItems},\n    currentUser,\n  } = useSource()\n\n  const [permissions, loading] = useTemplatePermissions({\n    templateItems: staticInitialValueTemplateItems,\n  })\n\n  const keyedPermissions = useMemo(() => {\n    if (!permissions) return {}\n    return permissions.reduce<Record<string, TemplatePermissionsResult>>((acc, next) => {\n      acc[next.id] = next\n      return acc\n    }, {})\n  }, [permissions])\n\n  const hasNewDocumentOptions = staticInitialValueTemplateItems.length > 0\n\n  const canCreateDocument = staticInitialValueTemplateItems.some(\n    (t) => keyedPermissions[t.id]?.granted\n  )\n\n  const tooltipContent = useMemo(() => {\n    if (!hasNewDocumentOptions) {\n      return <Text size={1}>No document types</Text>\n    }\n\n    if (canCreateDocument) {\n      return <Text size={1}>New document...</Text>\n    }\n\n    return (\n      <InsufficientPermissionsMessage\n        currentUser={currentUser}\n        operationLabel=\"create any document\"\n      />\n    )\n  }, [canCreateDocument, currentUser, hasNewDocumentOptions])\n\n  const handleOpen = useCallback(() => {\n    setOpen(true)\n  }, [])\n\n  const handleClose = useCallback(() => {\n    setOpen(false)\n    newDocumentButtonEl?.focus()\n  }, [newDocumentButtonEl])\n\n  const handleLinkClick = useCallback(() => {\n    setOpen(false)\n  }, [])\n\n  return (\n    <>\n      <Tooltip\n        content={<TooltipContentBox padding={2}>{tooltipContent}</TooltipContentBox>}\n        disabled={loading}\n        placement=\"bottom\"\n        portal\n        scheme={scheme}\n      >\n        <Box>\n          <Button\n            aria-label=\"New document…\"\n            disabled={!canCreateDocument || !hasNewDocumentOptions || loading}\n            icon={ComposeIcon}\n            mode=\"bleed\"\n            onClick={handleOpen}\n            ref={setNewDocumentButtonEl}\n            style={{\n              cursor: !canCreateDocument || !hasNewDocumentOptions ? 'not-allowed' : undefined,\n            }}\n          />\n        </Box>\n      </Tooltip>\n\n      {open && (\n        <Dialog\n          header=\"New document\"\n          id=\"new-document-dialog\"\n          onClickOutside={handleClose}\n          onClose={handleClose}\n          scheme={scheme}\n          width={2}\n        >\n          {loading && (\n            <Flex padding={4} align=\"center\" justify=\"center\">\n              <Spinner muted aria-label=\"Loading…\" />\n            </Flex>\n          )}\n\n          {!loading && (\n            <Grid padding={4} columns={[1, 1, 2, 3]} gap={3}>\n              {staticInitialValueTemplateItems.map((template) => {\n                if (keyedPermissions[template.id]?.granted) {\n                  return (\n                    <DocumentButton\n                      forwardedAs={IntentLink}\n                      intent=\"create\"\n                      key={template.id}\n                      mode=\"ghost\"\n                      onClick={handleLinkClick}\n                      padding={2}\n                      params={{template: template.templateId, type: template.schemaType}}\n                    >\n                      <DefaultPreview\n                        media={template.icon}\n                        subtitle={template.subtitle}\n                        title={template.title}\n                      />\n                    </DocumentButton>\n                  )\n                }\n\n                return (\n                  <Tooltip\n                    key={template.id}\n                    content={\n                      <TooltipContentBox padding={2}>\n                        <InsufficientPermissionsMessage\n                          currentUser={currentUser}\n                          operationLabel=\"create this document\"\n                        />\n                      </TooltipContentBox>\n                    }\n                  >\n                    {/* this wrapper is required for the tooltip to show up */}\n                    <DisabledButtonWrapper>\n                      <DocumentButton key={template.id} mode=\"ghost\" padding={2} disabled>\n                        <DefaultPreview\n                          media={template.icon}\n                          subtitle={template.subtitle}\n                          title={template.title}\n                        />\n                      </DocumentButton>\n                    </DisabledButtonWrapper>\n                  </Tooltip>\n                )\n              })}\n            </Grid>\n          )}\n        </Dialog>\n      )}\n    </>\n  )\n}\n","import {Button, ButtonTone, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nconst dot = css`\n  &:after {\n    content: '';\n    width: 6px;\n    height: 6px;\n    background-color: var(--status-button-dot-bg);\n    position: absolute;\n    top: 0;\n    right: 0;\n    border-radius: 50%;\n    transform: translate(-7px, 7px);\n    border: 1px solid var(--card-bg-color);\n  }\n`\n\nexport const StatusButton = styled(Button)(\n  ({theme, active, statusTone}: {theme: Theme; active: boolean; statusTone: ButtonTone}) => {\n    const {color} = theme.sanity\n\n    const tone = color.selectable && color.selectable[statusTone].selected.bg\n    const showDot = active && tone\n\n    return css`\n      position: relative;\n      --status-button-dot-bg: ${tone};\n\n      ${showDot && dot}\n    `\n  }\n)\n","import React, {forwardRef, memo, useMemo} from 'react'\nimport {orderBy} from 'lodash'\nimport * as PathUtils from '@sanity/util/paths'\nimport {Box, Card, Flex, MenuItem, Text} from '@sanity/ui'\nimport {LinkIcon} from '@sanity/icons'\nimport styled from 'styled-components'\nimport {UserAvatar} from '../../../../components/UserAvatar'\nimport {GlobalPresence} from '../../../../datastores'\nimport {IntentLink} from '../../../../router'\n\nconst AvatarCard = styled(Card)`\n  background: transparent;\n  margin: calc((-35px + 11px) / 2);\n`\n\ninterface PresenceListRowProps {\n  presence: GlobalPresence\n}\n\nexport const PresenceMenuItem = memo(function PresenceMenuItem({presence}: PresenceListRowProps) {\n  const lastActiveLocation = orderBy(presence.locations || [], ['lastActiveAt'], ['desc']).find(\n    (location) => location.documentId\n  )\n  const hasLink = Boolean(lastActiveLocation?.documentId)\n\n  const LinkComponent = useMemo(\n    () =>\n      // eslint-disable-next-line @typescript-eslint/no-shadow\n      forwardRef(function LinkComponent(linkProps, ref: React.ForwardedRef<HTMLAnchorElement>) {\n        if (!lastActiveLocation?.path) return null\n\n        return (\n          <IntentLink\n            {...linkProps}\n            intent=\"edit\"\n            params={{\n              id: lastActiveLocation?.documentId,\n              path: PathUtils.toString(lastActiveLocation?.path),\n            }}\n            ref={ref}\n          />\n        )\n      }),\n    [lastActiveLocation]\n  )\n\n  return (\n    <MenuItem\n      as={lastActiveLocation ? LinkComponent : 'div'}\n      data-as={lastActiveLocation ? 'a' : 'div'}\n      padding={4}\n      paddingRight={3}\n    >\n      <Flex align=\"center\">\n        <AvatarCard>\n          <UserAvatar size={1} key={presence.user.id} user={presence.user} />\n        </AvatarCard>\n\n        <Box flex={1} marginLeft={4}>\n          <Text textOverflow=\"ellipsis\">{presence.user.displayName}</Text>\n        </Box>\n\n        {hasLink && (\n          <Box marginLeft={3}>\n            <Text>\n              <LinkIcon />\n            </Text>\n          </Box>\n        )}\n      </Flex>\n    </MenuItem>\n  )\n})\n","import {CogIcon, UsersIcon} from '@sanity/icons'\nimport {\n  AvatarStack,\n  Box,\n  Button,\n  Card,\n  Menu,\n  MenuButton,\n  MenuDivider,\n  MenuItem,\n  Stack,\n  Text,\n} from '@sanity/ui'\nimport React, {useMemo} from 'react'\nimport styled from 'styled-components'\nimport {UserAvatar} from '../../../../components/UserAvatar'\nimport {useGlobalPresence} from '../../../../datastores'\nimport {useColorScheme} from '../../../colorScheme'\nimport {useWorkspace} from '../../../workspace'\nimport {StatusButton} from '../../StatusButton'\nimport {PresenceMenuItem} from './PresenceMenuItem'\n\nconst MAX_AVATARS = 4\n\nconst AvatarStackCard = styled(Card)`\n  background: transparent;\n`\n\nconst StyledMenu = styled(Menu)`\n  max-width: 350px;\n  min-width: 250px;\n`\n\nconst FooterStack = styled(Stack)`\n  position: sticky;\n  bottom: 0;\n`\n\ninterface PresenceMenuProps {\n  collapse?: boolean\n}\n\nexport function PresenceMenu(props: PresenceMenuProps) {\n  const {collapse} = props\n  const presence = useGlobalPresence()\n  const {projectId} = useWorkspace()\n  const hasPresence = presence.length > 0\n  const {scheme} = useColorScheme()\n\n  const button = useMemo(() => {\n    if (collapse) {\n      return (\n        <StatusButton icon={UsersIcon} mode=\"bleed\" active={hasPresence} statusTone=\"positive\" />\n      )\n    }\n\n    return (\n      <Button mode=\"bleed\" padding={1}>\n        <AvatarStackCard>\n          <AvatarStack maxLength={MAX_AVATARS}>\n            {presence.map((item) => (\n              <UserAvatar key={item.user.id} user={item.user} />\n            ))}\n          </AvatarStack>\n        </AvatarStackCard>\n      </Button>\n    )\n  }, [collapse, hasPresence, presence])\n\n  const popoverProps = useMemo(\n    () => ({\n      constrainSize: true,\n      portal: true,\n      scheme: scheme,\n    }),\n    [scheme]\n  )\n\n  return (\n    <MenuButton\n      id=\"global-presence-menu\"\n      button={button}\n      menu={\n        <StyledMenu padding={1}>\n          {hasPresence && (\n            <Stack space={2}>\n              {presence.map((item) => (\n                <PresenceMenuItem key={item.user.id} presence={item} />\n              ))}\n            </Stack>\n          )}\n\n          {!hasPresence && (\n            <Box paddingX={3} paddingY={4}>\n              <Stack space={3}>\n                <Text weight=\"semibold\" size={2}>\n                  No one else is here\n                </Text>\n\n                <Text size={1} muted>\n                  Invite people to the project to see their online status.\n                </Text>\n              </Stack>\n            </Box>\n          )}\n\n          <FooterStack space={1}>\n            <MenuDivider />\n\n            <MenuItem\n              as=\"a\"\n              href={`https://sanity.io/manage/project/${projectId}`}\n              iconRight={CogIcon}\n              paddingY={4}\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n              text=\"Manage members\"\n            />\n          </FooterStack>\n        </StyledMenu>\n      }\n      popover={popoverProps}\n    />\n  )\n}\n","import {Layer, Card, Flex, Text, Box, Button, Stack, useGlobalKeyDown} from '@sanity/ui'\nimport {CloseIcon, LeaveIcon} from '@sanity/icons'\nimport React, {memo, useEffect, useState} from 'react'\nimport styled from 'styled-components'\nimport {UserAvatar} from '../../../components/UserAvatar'\nimport {useWorkspace} from '../../workspace'\nimport {useRovingFocus} from '../../../components/rovingFocus'\nimport {Tool} from '../../../config'\nimport {ToolMenu as DefaultToolMenu} from './tools/ToolMenu'\nimport {WorkspaceMenuButton} from './workspace'\n\nconst Root = styled(Layer)`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n`\n\nconst Backdrop = styled(Card)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: var(--card-shadow-penumbra-color);\n  transition: 200ms opacity ease-in-out;\n  pointer-events: none;\n  opacity: 0;\n\n  &[data-open='true'] {\n    opacity: 1;\n    pointer-events: all;\n  }\n`\n\nconst InnerCard = styled(Card)`\n  position: relative;\n  pointer-events: all;\n  flex-direction: column;\n  min-width: 200px;\n  max-width: 280px;\n  transition: 200ms transform ease-in-out;\n  transform: translate3d(calc(-100% - 1px), 0, 0);\n\n  &[data-open='true'] {\n    transform: translate3d(0, 0, 0);\n  }\n`\n\ninterface NavDrawerProps {\n  activeToolName?: string\n  isOpen: boolean\n  onClose: () => void\n  tools: Tool[]\n}\n\nexport const NavDrawer = memo(function NavDrawer(props: NavDrawerProps) {\n  const {activeToolName, isOpen, onClose, tools} = props\n  const [closeButtonElement, setCloseButtonElement] = useState<HTMLButtonElement | null>(null)\n  const [innerCardElement, setInnerCardElement] = useState<HTMLDivElement | null>(null)\n  const tabIndex = isOpen ? 0 : -1\n\n  const {currentUser, navbar, auth} = useWorkspace()\n\n  const {ToolMenu = DefaultToolMenu} = navbar?.components || {}\n\n  useRovingFocus({\n    rootElement: innerCardElement,\n    navigation: ['tab'],\n  })\n\n  useGlobalKeyDown((e: KeyboardEvent) => {\n    if (e.key === 'Escape' && isOpen) {\n      onClose()\n    }\n  })\n\n  useEffect(() => {\n    if (isOpen) {\n      closeButtonElement?.focus()\n    }\n  }, [closeButtonElement, isOpen])\n\n  return (\n    <Root>\n      <Backdrop data-open={isOpen} onClick={onClose} />\n\n      <InnerCard\n        display=\"flex\"\n        height=\"fill\"\n        data-open={isOpen}\n        shadow={1}\n        ref={setInnerCardElement}\n      >\n        <Card borderBottom>\n          <Stack space={3} padding={[3, 3, 4]}>\n            <Flex align=\"center\">\n              <Flex flex={1} align=\"center\" paddingRight={2}>\n                <Flex flex={1} align=\"center\">\n                  <Box>\n                    <UserAvatar size={1} user=\"me\" />\n                  </Box>\n\n                  <Box flex={1} marginLeft={2} title={currentUser?.name || currentUser?.email}>\n                    <Text textOverflow=\"ellipsis\">{currentUser?.name || currentUser?.email}</Text>\n                  </Box>\n                </Flex>\n              </Flex>\n\n              <Box>\n                <Button\n                  icon={CloseIcon}\n                  mode=\"bleed\"\n                  onClick={onClose}\n                  ref={setCloseButtonElement}\n                  tabIndex={tabIndex}\n                  title=\"Close menu\"\n                />\n              </Box>\n            </Flex>\n\n            <WorkspaceMenuButton text=\"Select workspace\" justify=\"flex-start\" />\n          </Stack>\n        </Card>\n\n        <Box flex=\"auto\" overflow=\"auto\" padding={[3, 3, 4]}>\n          <ToolMenu\n            activeToolName={activeToolName}\n            closeDrawer={onClose}\n            context=\"drawer\"\n            isDrawerOpen={isOpen}\n            tools={tools}\n          />\n        </Box>\n\n        {auth.logout && (\n          <Card flex=\"none\" padding={[3, 3, 4]} borderTop>\n            <Stack>\n              <Button\n                iconRight={LeaveIcon}\n                justify=\"flex-start\"\n                mode=\"bleed\"\n                // eslint-disable-next-line react/jsx-handler-names\n                onClick={auth.logout}\n                tabIndex={tabIndex}\n                text=\"Sign out\"\n              />\n            </Stack>\n          </Card>\n        )}\n      </InnerCard>\n    </Root>\n  )\n})\n","import {ObjectSchemaType, Schema, SchemaType} from '@sanity/types'\nimport {isNonNullable} from '../../util/isNonNullable'\n\nconst isDocumentType = (type: SchemaType): type is ObjectSchemaType =>\n  Boolean(type.type && type.type.name === 'document')\n\nconst isSanityType = (type: SchemaType): boolean => type.name.startsWith('sanity.')\n\nexport const getSearchableTypes = (\n  schema: Schema\n  // eslint-disable-next-line camelcase\n): {name: string; __experimental_search?: ObjectSchemaType['__experimental_search']}[] =>\n  schema\n    .getTypeNames()\n    .map((typeName) => schema.get(typeName))\n    .filter(isNonNullable)\n    .filter((schemaType) => isDocumentType(schemaType))\n    .filter((type) => !isSanityType(type)) as ObjectSchemaType[]\n","const SPECIAL_CHARS = /([^!@#$%^&*(),\\\\/?\";:{}|[\\]+<>\\s-])+/g\nconst STRIP_EDGE_CHARS = /(^[.]+)|([.]+$)/\n\nexport function tokenize(string: string): string[] {\n  return (string.match(SPECIAL_CHARS) || []).map((token) => token.replace(STRIP_EDGE_CHARS, ''))\n}\n","import {words, uniq, compact, union, intersection, keyBy, toLower} from 'lodash'\nimport {SearchHit, WeightedHit, SearchSpec} from './types'\n\n// takes a set of terms and a value and returns a [score, story] pair where score is a value between 0, 1 and story is the explanation\nexport const calculateScore = (searchTerms: string[], value: string): [number, string] => {\n  const uniqueValueTerms = uniq(compact(words(toLower(value))))\n  const uniqueSearchTerms = uniq(searchTerms.map(toLower))\n  const matches = intersection(uniqueSearchTerms, uniqueValueTerms)\n  const all = union(uniqueValueTerms, uniqueSearchTerms)\n  const fieldScore = matches.length / all.length\n  return fieldScore === 1\n    ? [1, 'Exact match']\n    : [fieldScore / 2, `Matched ${matches.length} of ${all.length} terms: [${matches.join(', ')}]`]\n}\n\nconst stringify = (value: unknown): string =>\n  typeof value === 'string' ? value : JSON.stringify(value)\n\nexport function applyWeights(\n  searchSpec: SearchSpec[],\n  hits: SearchHit[],\n  terms: string[] = []\n): WeightedHit[] {\n  const specByType = keyBy(searchSpec, (spec) => spec.typeName)\n  return hits.map((hit, index) => {\n    const typeSpec = specByType[hit._type]\n    const stories =\n      typeSpec.paths?.map((pathSpec, idx) => {\n        const value = stringify(hit[`w${idx}`])\n        if (!value) {\n          return {path: pathSpec.path, score: 0, why: 'No match'}\n        }\n        const [score, why] = calculateScore(terms, value)\n        return {\n          path: pathSpec.path,\n          score: score * pathSpec.weight,\n          why: `${why} (*${pathSpec.weight})`,\n        }\n      }) || []\n\n    const totalScore = stories.reduce((acc, rank) => acc + rank.score, 0)\n\n    return {hit, resultIndex: hits.length - index, score: totalScore, stories: stories}\n  })\n}\n","/* eslint-disable import/prefer-default-export */\nimport type {SanityClient} from '@sanity/client'\nimport type {ObjectSchemaType} from '@sanity/types'\nimport type {Observable} from 'rxjs'\nimport {compact, toLower, flatten, uniq, flow, sortBy, union} from 'lodash'\nimport {map, tap} from 'rxjs/operators'\nimport {joinPath} from '../../util/searchUtils'\nimport {tokenize} from '../common/tokenize'\nimport {removeDupes} from '../../util/draftUtils'\nimport {applyWeights} from './applyWeights'\nimport {\n  WeightedHit,\n  WeightedSearchOptions,\n  SearchOptions,\n  SearchPath,\n  SearchHit,\n  SearchSpec,\n} from './types'\n\nconst combinePaths = flow([flatten, union, compact])\n\nconst toGroqParams = (terms: string[]): Record<string, string> => {\n  const params: Record<string, string> = {}\n  return terms.reduce((acc, term, i) => {\n    acc[`t${i}`] = `${term}*` // \"t\" is short for term\n    return acc\n  }, params)\n}\n\nconst pathWithMapper = ({mapWith, path}: SearchPath): string =>\n  mapWith ? `${mapWith}(${path})` : path\n\nexport function createWeightedSearch(\n  // eslint-disable-next-line camelcase\n  types: {name: string; __experimental_search?: ObjectSchemaType['__experimental_search']}[],\n  client: SanityClient,\n  options: WeightedSearchOptions = {}\n): (query: string, opts?: SearchOptions) => Observable<WeightedHit[]> {\n  if (!types) {\n    throw new Error('missing types')\n  }\n\n  const {filter, params, tag} = options\n  const searchSpec: SearchSpec[] = types.map((type) => ({\n    typeName: type.name,\n    paths: type.__experimental_search?.map((config) => ({\n      weight: config.weight,\n      path: joinPath(config.path),\n      mapWith: config.mapWith,\n    })),\n  }))\n\n  const combinedSearchPaths = combinePaths(\n    searchSpec.map((configForType) => configForType.paths?.map((opt) => pathWithMapper(opt)))\n  )\n\n  const selections = searchSpec.map((spec) => {\n    const constraint = `_type == \"${spec.typeName}\" => `\n    const selection = `{ ${spec.paths?.map((cfg, i) => `\"w${i}\": ${pathWithMapper(cfg)}`)} }`\n    return `${constraint}${selection}`\n  })\n\n  // this is the actual search function that takes the search string and returns the hits\n  return function search(queryString: string, searchOpts: SearchOptions = {}) {\n    const terms = uniq(compact(tokenize(toLower(queryString))))\n    const constraints = terms\n      .map((term, i) => combinedSearchPaths.map((joinedPath: any) => `${joinedPath} match $t${i}`))\n      .filter((constraint) => constraint.length > 0)\n\n    const filters = [\n      '_type in $__types',\n      searchOpts.includeDrafts === false && `!(_id in path('drafts.**'))`,\n      ...constraints.map((constraint) => `(${constraint.join('||')})`),\n      filter ? `(${filter})` : '',\n    ].filter(Boolean)\n\n    const selection = selections.length > 0 ? `...select(${selections.join(',\\n')})` : ''\n    const query = `*[${filters.join('&&')}][0...$__limit]{_type, _id, ${selection}}`\n\n    return client.observable\n      .fetch(\n        query,\n        {\n          ...toGroqParams(terms),\n          __types: searchSpec.map((spec) => spec.typeName),\n          __limit: searchOpts.limit ?? 1000,\n          ...(params || {}),\n        },\n        {tag}\n      )\n      .pipe(\n        options.unique ? map(removeDupes) : tap(),\n        map((hits: SearchHit[]) => applyWeights(searchSpec, hits, terms)),\n        map((hits) => sortBy(hits, (hit) => -hit.score))\n      )\n  }\n}\n","import {SanityClient} from '@sanity/client'\nimport {Schema} from '@sanity/types'\nimport {Observable} from 'rxjs'\nimport {getSearchableTypes} from './common/utils'\nimport {createWeightedSearch} from './weighted/createWeightedSearch'\nimport {SearchOptions, WeightedHit} from './weighted/types'\n\nexport function createSearch(\n  client: SanityClient,\n  schema: Schema\n): (query: string, opts?: SearchOptions) => Observable<WeightedHit[]> {\n  const searchClient = client.withConfig({\n    // Use >= 2021-03-25 for pt::text() support\n    apiVersion: '2021-03-25',\n  })\n\n  return createWeightedSearch(getSearchableTypes(schema), searchClient, {\n    unique: true,\n    tag: 'search.global',\n  })\n}\n","import type {SourceClientOptions} from './config'\n\n/**\n * Unless otherwise specified, this is the API version we use for controlled\n * requests on internal studio APIs. The user should always ask for a specific\n * API version when using the client - this way we can upgrade which version we\n * use internally without having the users code break unexpectedly. It also\n * means the user can easily upgrade to newer versions of GROQ when it arrives.\n *\n * @internal\n */\nexport const DEFAULT_STUDIO_CLIENT_OPTIONS: SourceClientOptions = {\n  apiVersion: '2022-09-09',\n}\n","import {useEffect, useMemo, useState} from 'react'\nimport {concat, EMPTY, Observable, of, Subject, timer} from 'rxjs'\nimport {\n  catchError,\n  distinctUntilChanged,\n  filter,\n  map,\n  mergeMapTo,\n  share,\n  switchMap,\n} from 'rxjs/operators'\nimport {useClient, useSchema} from '../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../studioClient'\nimport {isNonNullable} from '../util'\nimport {createSearch} from './search'\nimport {WeightedHit} from './weighted/types'\n\nexport interface DocumentSearchParams {\n  options: {includeDrafts: boolean; limit: number}\n  query: string\n}\n\nexport interface DocumentSearchResultsState {\n  loading: boolean\n  error: Error | null\n  value: WeightedHit[]\n}\n\nconst EMPTY_STATE: DocumentSearchResultsState = {\n  loading: false,\n  error: null,\n  value: [],\n}\n\nconst LOADING_STATE: DocumentSearchResultsState = {\n  loading: true,\n  error: null,\n  value: [],\n}\n\n// This value is used to improve performance by minimizing the number\n// of API requests, as well as improving the user experience by waiting\n// to display the search results until the user has finished typing.\nconst DEBOUNCE_VALUE = 400\n\nexport function useDocumentSearchResults(props: {\n  includeDrafts?: boolean\n  limit?: number\n  query: string\n}): DocumentSearchResultsState {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const schema = useSchema()\n  const {includeDrafts = false, limit = 1000, query: queryProp} = props\n  const [state, setState] = useState<DocumentSearchResultsState>(EMPTY_STATE)\n  const paramsSubject = useMemo(() => new Subject<DocumentSearchParams>(), [])\n\n  const search = useMemo(() => createSearch(client, schema), [client, schema])\n\n  const state$ = useMemo(\n    () =>\n      paramsSubject.asObservable().pipe(\n        share(),\n        distinctUntilChanged(),\n        filter(isNonNullable),\n        switchMap(\n          ({query, options}): Observable<DocumentSearchResultsState> =>\n            query\n              ? concat(\n                  of(LOADING_STATE),\n                  timer(DEBOUNCE_VALUE).pipe(mergeMapTo(EMPTY)),\n                  search(query, options).pipe(\n                    map((results) => ({loading: false, error: null, value: results})),\n                    catchError((error) => {\n                      return of({loading: false, error, value: []})\n                    })\n                  )\n                )\n              : of(EMPTY_STATE)\n        )\n      ),\n    [paramsSubject, search]\n  )\n\n  useEffect(() => {\n    paramsSubject.next({\n      options: {includeDrafts, limit},\n      query: queryProp,\n    })\n  }, [includeDrafts, limit, queryProp, paramsSubject])\n\n  useEffect(() => {\n    const sub = state$.subscribe(setState)\n\n    return () => {\n      sub.unsubscribe()\n    }\n  }, [state$])\n\n  return state\n}\n","import {Card, CardProps, Portal} from '@sanity/ui'\nimport React, {forwardRef} from 'react'\nimport styled from 'styled-components'\nimport {useColorScheme} from '../../../colorScheme'\n\nconst StyledCard = styled(Card)`\n  flex-direction: column;\n`\n\nexport const SearchFullscreenContent = forwardRef(function SearchFullscreenContent(\n  props: CardProps & {children: React.ReactNode; hidden?: boolean},\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {scheme} = useColorScheme()\n\n  return (\n    <Portal>\n      <StyledCard display=\"flex\" flex={1} ref={ref} scheme={scheme} {...props} />\n    </Portal>\n  )\n})\n","import {Card, CardProps} from '@sanity/ui'\nimport React, {createContext, forwardRef, useContext} from 'react'\nimport styled, {css} from 'styled-components'\n\nexport const StyledCard = styled(Card)(() => {\n  return css`\n    /* TextWithTone uses its own logic to set color, and we therefore need */\n    /* to override this logic in order to set the correct color in different states */\n    &[data-selected],\n    &[data-pressed],\n    &:active {\n      [data-ui='TextWithTone'] {\n        color: inherit;\n      }\n    }\n  `\n})\n\nexport interface PreviewCardContextValue {\n  selected?: boolean\n}\n\nconst PreviewCardContext = createContext<PreviewCardContextValue>({selected: false})\n\nexport function usePreviewCard(): PreviewCardContextValue {\n  const context = useContext(PreviewCardContext)\n\n  if (!context) {\n    throw new Error('PreviewCard: missing context value')\n  }\n\n  return context\n}\n\nexport const PreviewCard = forwardRef(function PreviewCard(\n  props: CardProps & Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'height'>,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {children, selected, as, ...rest} = props\n\n  return (\n    <StyledCard data-ui=\"PreviewCard\" {...rest} forwardedAs={as} selected={selected} ref={ref}>\n      <PreviewCardContext.Provider value={{selected}}>{children}</PreviewCardContext.Provider>\n    </StyledCard>\n  )\n})\n","import {AvatarStack, Box, Card, Text, Theme, Tooltip, TooltipProps} from '@sanity/ui'\nimport React, {useMemo} from 'react'\nimport styled, {css, useTheme} from 'styled-components'\nimport {usePreviewCard} from '../components/PreviewCard'\nimport {UserAvatar} from '../components/UserAvatar'\nimport {DocumentPresence} from '../datastores'\nimport {isNonNullable} from '../util/isNonNullable'\n\nexport interface DocumentPreviewPresenceProps {\n  presence: Omit<DocumentPresence, 'path'>[]\n}\n\nconst PRESENCE_MENU_POPOVER_PROPS: TooltipProps = {\n  portal: true,\n}\n\nconst AvatarStackCard = styled(Card)(({theme, $selected}: {theme: Theme; $selected?: boolean}) => {\n  const {color} = theme.sanity\n\n  return css`\n    --card-bg-color: inherit;\n    --card-fg-color: inherit;\n    --card-hairline-hard-color: ${$selected ? color.selectable?.default.pressed.border : undefined};\n  `\n})\n\nconst TooltipContentBox = styled(Box)`\n  max-width: 150px;\n`\n\nconst getTooltipText = (presence: Omit<DocumentPresence, 'path'>[]) => {\n  if (presence.length === 1) {\n    return `${presence[0].user.displayName} is editing this document`\n  }\n\n  if (presence.length > 1) {\n    return `${presence.length} people are editing this document right now`\n  }\n\n  return undefined\n}\n\nexport function DocumentPreviewPresence(props: DocumentPreviewPresenceProps) {\n  const {presence} = props\n  const {color} = useTheme().sanity\n  const invertedScheme = color.dark ? 'light' : 'dark'\n  const {selected} = usePreviewCard()\n\n  const uniqueUsers = useMemo(\n    () =>\n      Array.from(new Set(presence.map((a) => a.user.id)))\n        .map((id) => {\n          return presence.find((a) => a.user.id === id)\n        })\n        .filter(isNonNullable),\n    [presence]\n  )\n\n  const tooltipContent = useMemo(() => {\n    return (\n      <TooltipContentBox padding={2}>\n        <Text align=\"center\" size={1}>\n          {getTooltipText(uniqueUsers)}\n        </Text>\n      </TooltipContentBox>\n    )\n  }, [uniqueUsers])\n\n  return (\n    <Tooltip content={tooltipContent} {...PRESENCE_MENU_POPOVER_PROPS}>\n      <AvatarStackCard scheme={selected ? invertedScheme : undefined} $selected={selected}>\n        <AvatarStack maxLength={2}>\n          {uniqueUsers.map((item) => (\n            <UserAvatar key={item.user.id} user={item.user} />\n          ))}\n        </AvatarStack>\n      </AvatarStackCard>\n    </Tooltip>\n  )\n}\n","// disable overlay rendering entirely and only display presence in fields\nexport const DISABLE_OVERLAY = false\n\n// number of avatars to display on each fields (will be stacked and have a counter if more than 3 users in a field)\nexport const MAX_AVATARS_DOCK = 3\nexport const MAX_AVATARS_GLOBAL = 3\nexport const DEFAULT_MAX_AVATARS_FIELDS = 3\n\n// distance between avatars in pixels (negative number means overlap)\nexport const AVATAR_DISTANCE = -4\n\n// height/width of the avatars in pixels\nexport const AVATAR_SIZE = 23\n\nexport const AVATAR_ARROW_HEIGHT = 4\n\n// these are the thresholds in which the intersection observers will notify about regions going in/out of viewport\n// these will affect the thresholds below, so make sure to coordinate edits\nexport const INTERSECTION_THRESHOLDS = [0, 0.25, 0.75, 1]\n\n// The elements that reports intersection changes are padded top+bottom in order to detect when entering leaving\nexport const INTERSECTION_ELEMENT_PADDING = 23\n\n// Make the avatars snap to the top dock when they are closer than this from the top\nexport const SNAP_TO_DOCK_DISTANCE_TOP = 8\n\n// Make the avatars snap to the bottom dock when they are closer than this from the bottom\nexport const SNAP_TO_DOCK_DISTANCE_BOTTOM = 8\n\n// The avatar will move to the right when this close (in pixels) to the top\nexport const SLIDE_RIGHT_THRESHOLD_TOP = 20\n\n// The avatar will move to the right when this close (in pixels) to the bottom\nexport const SLIDE_RIGHT_THRESHOLD_BOTTOM = 20\n\n// Switch on debug mode (will display regions)\nexport const DEBUG = false\n","export const splitRight = <T>(array: T[], max: number): [T[], T[]] => {\n  const indexFromMax = array.length > max ? max - 1 : max\n  const idx = Math.max(0, array.length - indexFromMax)\n  return [array.slice(0, idx), array.slice(idx)]\n}\n\n// export const splitRight = <T>(array: T[], index: number): [T[], T[]] => {\n//   const idx = Math.max(0, array.length - index)\n//   return [array.slice(0, idx), array.slice(idx)]\n// }\n//\nexport const split = <T>(array: T[], index: number): [T[], T[]] => {\n  const idx = Math.max(0, index)\n  return [array.slice(0, idx), array.slice(idx)]\n}\n","import styled from 'styled-components'\nimport {Flex} from '@sanity/ui'\n\nexport const FlexWrapper = styled(Flex)`\n  & > div:first-child {\n    flex: 1;\n    min-width: 0;\n  }\n`\n\nexport const InnerBox = styled(Flex)`\n  height: 23px;\n  min-width: 23px;\n  vertical-align: top;\n`\n","import React from 'react'\nimport {FormFieldPresence} from './types'\n\nexport const FormFieldPresenceContext = React.createContext<FormFieldPresence[]>([])\n","import React, {useMemo} from 'react'\nimport {Box, Flex, Stack, Text, Tooltip} from '@sanity/ui'\nimport {UserAvatar} from '../components/UserAvatar'\nimport {NodePresence} from '../form'\n\ninterface PresenceTooltipProps {\n  children?: React.ReactElement\n  items: NodePresence[]\n}\n\n/**\n * The \"documentScrollElement\" is being passed to the PortalProvider in DocumentPanel.\n * The default portal element provided by the PortalProvider causes some layout issues with the Tooltip.\n * Therefore, another portal element (i.e. the \"documentScrollElement\") is being used to solve this.\n */\n\nexport function PresenceTooltip(props: PresenceTooltipProps) {\n  const {children, items} = props\n\n  const content = useMemo(\n    () => (\n      <Stack padding={1}>\n        {items.map((item) => (\n          <Flex align=\"center\" gap={2} padding={1} key={item.user.id}>\n            <div>\n              <UserAvatar user={item.user} status=\"online\" />\n            </div>\n\n            <Text size={1}>{item.user.displayName}</Text>\n          </Flex>\n        ))}\n      </Stack>\n    ),\n    [items]\n  )\n\n  return (\n    <Tooltip content={content} placement=\"top\" portal=\"documentScrollElement\">\n      {children}\n    </Tooltip>\n  )\n}\n","import React from 'react'\nimport {TrackerContext} from './types'\n\nexport type ReporterHook<Payload> = (\n  id: string | null,\n  value: Payload | (() => Payload),\n  isEqual?: (a: Payload, b: Payload) => boolean\n) => void\n\nfunction isFunc<T>(value: T | (() => T)): value is () => T {\n  return typeof value === 'function'\n}\n\nfunction read<T>(value: T | (() => T)): T {\n  return isFunc(value) ? value() : value\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst noop = () => undefined\n\nexport type IsEqualFunction<Value> = (a: Value, b: Value) => boolean\n\nexport function createUseReporter<Value>(\n  Context: React.Context<TrackerContext<Value>>\n): ReporterHook<Value> {\n  return function useReporter(\n    // No reporting will happen if id=null\n    id: string | null,\n    value: Value | (() => Value),\n    isEqual: IsEqualFunction<Value> = Object.is\n  ) {\n    const {add, update, remove} = React.useContext(Context)\n    const previous = React.useRef<Value>()\n\n    React.useLayoutEffect(() => {\n      if (id === null) {\n        return noop\n      }\n      const current = read(value)\n      add(id, current)\n      previous.current = current\n      return () => {\n        remove(id)\n      }\n    }, [add, id, remove, value])\n\n    React.useLayoutEffect(() => {\n      const current = read(value)\n      if (\n        typeof previous.current !== 'undefined' &&\n        !isEqual(previous.current, current) &&\n        id !== null\n      ) {\n        update(id, current)\n      }\n      previous.current = current\n    })\n  }\n}\n","import {debounce} from 'lodash'\nimport createPubsub from 'nano-pubsub'\nimport {Reported} from './types'\n\nexport function createStore<Value>() {\n  const reportedValues = new Map<string, Value>()\n  const {publish, subscribe} = createPubsub<Reported<Value>[]>()\n\n  const debouncedPublish = debounce(publish, 10, {trailing: true})\n  const read = () => Array.from(reportedValues.entries())\n\n  function add(id: string, value: Value) {\n    if (reportedValues.has(id)) {\n      // eslint-disable-next-line no-console\n      // console.error(\n      //   new Error(\n      //     `Invalid call to useReporter(${id}): A component reporting on \"${id}\" is already mounted in the subtree. Make sure that all reporters within the same <Tracker> subtree have unique ids.`\n      //   )\n      // )\n    }\n    reportedValues.set(id, value)\n    debouncedPublish(read())\n  }\n\n  function update(id: string, value: Value) {\n    if (!reportedValues.has(id)) {\n      // throw new Error(`A reporter with id \"${id}\" is not known.`)\n    }\n    reportedValues.set(id, value)\n    debouncedPublish(read())\n  }\n\n  function remove(id: string) {\n    if (!reportedValues.has(id)) {\n      // throw new Error(`A reporter with id \"${id}\" is not known`)\n    }\n    reportedValues.delete(id)\n    debouncedPublish(read())\n  }\n\n  return {\n    add,\n    remove,\n    update,\n    read,\n    subscribe,\n  }\n}\n","import React from 'react'\nimport {Reported, TrackerContext} from './types'\nimport {createUseReporter, IsEqualFunction} from './createUseReporter'\nimport {createStore} from './createStore'\n\n// Todo: consider memozing individual functions or move the context assertion/guard to a separate step.\nlet didWarn = false\nconst useReporterGuard = (id: string): void => {\n  if (!didWarn) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      new Error(\n        `No context provided for reporter. Make sure that the component calling \"useReporter(${id}, ...)\", is wrapped in a <Tracker> element`\n      )\n    )\n  }\n  didWarn = true\n}\n\nfunction useReportedValueGuard(): Reported<unknown>[] {\n  if (!didWarn) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      new Error(\n        'No context provided for reporter. Make sure that the component calling \"useReportedValues()\", is wrapped inside a <Tracker> element'\n      )\n    )\n  }\n  didWarn = true\n  return []\n}\n\nconst useSubscribeGuard = () => {\n  if (!didWarn) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      new Error(\n        'No context provided for reporter. Make sure that the component calling \"useReportedValues()\", is wrapped inside a <Tracker> element'\n      )\n    )\n  }\n  didWarn = true\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  return () => {}\n}\n\nconst DEFAULT_CONTEXT: TrackerContext<unknown> = {\n  add: useReporterGuard,\n  update: useReporterGuard,\n  remove: useReporterGuard,\n  subscribe: useSubscribeGuard,\n  read: useReportedValueGuard,\n}\n\nlet id = 0\nconst getNextId = () => ++id\n\nexport function createScope<Value>() {\n  const Context = React.createContext(DEFAULT_CONTEXT as TrackerContext<Value>)\n\n  function useReportedValues() {\n    const context = React.useContext(Context)\n    const [values, setValues] = React.useState(context.read())\n    React.useLayoutEffect(() => {\n      setValues(context.read())\n      return context.subscribe(setValues)\n    }, [context])\n    return values\n  }\n\n  function Tracker(props: {children: React.ReactNode}) {\n    const store = React.useMemo(() => createStore<Value>(), [])\n    return <Context.Provider value={store}>{props.children}</Context.Provider>\n  }\n\n  const useReporter = createUseReporter(Context)\n\n  return {\n    Tracker,\n    useReportedValues,\n    useReporter,\n    useAutoIdReporter: (\n      value: Value | (() => Value),\n      isEqual: IsEqualFunction<Value> = Object.is\n    ) => useReporter(`element-${React.useRef(getNextId()).current}`, value, isEqual),\n  }\n}\n","import {createScope, Reported} from '../../components/react-track-elements'\nimport {FieldPresenceData} from '../types'\nexport type ReportedPresenceData = Reported<FieldPresenceData>\n\nconst {Tracker, useReporter, useReportedValues} = createScope<FieldPresenceData>()\n\nexport {Tracker, useReporter, useReportedValues}\n","import React, {memo, useContext} from 'react'\nimport {sortBy, uniqBy} from 'lodash'\nimport {AvatarCounter, AvatarPosition} from '@sanity/ui'\nimport {useId} from '@reach/auto-id'\nimport {UserAvatar} from '../components/UserAvatar'\nimport {NodePresence} from '../form'\nimport {\n  AVATAR_DISTANCE,\n  AVATAR_SIZE,\n  DEFAULT_MAX_AVATARS_FIELDS,\n  DISABLE_OVERLAY,\n} from './constants'\nimport {splitRight} from './utils'\nimport {FlexWrapper, InnerBox} from './FieldPresence.styled'\nimport {FormFieldPresenceContext} from './context'\nimport {PresenceTooltip} from './PresenceTooltip'\nimport {useReporter} from './overlay/tracker'\n\nexport interface FieldPresenceProps {\n  presence: NodePresence[]\n  maxAvatars: number\n}\n\nexport const FieldPresence = DISABLE_OVERLAY\n  ? FieldPresenceWithoutOverlay\n  : FieldPresenceWithOverlay\n\nexport function FieldPresenceWithOverlay(props: FieldPresenceProps) {\n  const contextPresence = useContext(FormFieldPresenceContext)\n  const {presence = contextPresence, maxAvatars = DEFAULT_MAX_AVATARS_FIELDS} = props\n  const ref = React.useRef(null)\n\n  useReporter(useId() || '', () => ({presence, element: ref.current!, maxAvatars: maxAvatars}))\n\n  const minWidth = -AVATAR_DISTANCE + (AVATAR_SIZE + AVATAR_DISTANCE) * props.maxAvatars\n\n  return (\n    <FlexWrapper\n      justify=\"flex-end\"\n      ref={ref}\n      style={{minWidth: minWidth, minHeight: AVATAR_SIZE}}\n    />\n  )\n}\n\nexport function FieldPresenceWithoutOverlay(props: FieldPresenceProps) {\n  const contextPresence = useContext(FormFieldPresenceContext)\n  const {presence = contextPresence, maxAvatars = DEFAULT_MAX_AVATARS_FIELDS} = props\n\n  if (!presence.length) {\n    return null\n  }\n\n  return <FieldPresenceInner presence={presence} maxAvatars={maxAvatars} />\n}\n\nexport interface FieldPresenceInnerProps {\n  maxAvatars?: number\n  presence: NodePresence[]\n  stack?: boolean\n  position?: AvatarPosition\n  animateArrowFrom?: AvatarPosition\n}\n\nfunction calcAvatarStackWidth(len: number) {\n  return -AVATAR_DISTANCE + (AVATAR_SIZE + AVATAR_DISTANCE) * len\n}\n\nexport const FieldPresenceInner = memo(function FieldPresenceInner({\n  presence,\n  position = 'inside',\n  animateArrowFrom = 'inside',\n  maxAvatars = DEFAULT_MAX_AVATARS_FIELDS,\n  stack = true,\n}: FieldPresenceInnerProps) {\n  const uniquePresence = uniqBy(presence || [], (item) => item.user.id)\n  const sorted = sortBy(uniquePresence, (_presence) => _presence.lastActiveAt)\n  const [hidden, visible] = stack ? splitRight(sorted, maxAvatars) : [[], sorted]\n\n  const avatars = [\n    ...visible.reverse().map((_visible) => ({\n      key: _visible.user.id,\n      element: (\n        <UserAvatar\n          animateArrowFrom={animateArrowFrom}\n          position={position}\n          status=\"online\"\n          user={_visible.user}\n        />\n      ),\n    })),\n    hidden.length >= 2\n      ? {\n          key: 'counter',\n          element: <AvatarCounter count={hidden.length} />,\n        }\n      : null,\n  ].filter(Boolean)\n\n  const maxWidth = calcAvatarStackWidth(maxAvatars)\n  const currWidth = Math.min(calcAvatarStackWidth(uniquePresence.length), maxWidth)\n\n  return (\n    <FlexWrapper justify=\"flex-end\" style={{width: maxWidth}}>\n      <div />\n\n      <PresenceTooltip items={uniquePresence}>\n        <InnerBox direction=\"row-reverse\" style={{width: currWidth}}>\n          {avatars.map(\n            (av, i) =>\n              av && (\n                <div\n                  key={av.key}\n                  style={{\n                    position: 'absolute',\n                    transform: `translate3d(${-i * (AVATAR_SIZE + AVATAR_DISTANCE)}px, 0px, 0px)`,\n                    transitionProperty: 'transform',\n                    transitionDuration: '200ms',\n                    transitionTimingFunction: 'cubic-bezier(0.85, 0, 0.15, 1)',\n                    zIndex: 100 - i,\n                  }}\n                >\n                  {av.element}\n                </div>\n              )\n          )}\n        </InnerBox>\n      </PresenceTooltip>\n    </FlexWrapper>\n  )\n})\n","import {Subject, Observable} from 'rxjs'\nimport {filter} from 'rxjs/operators'\n\nexport interface ObservableIntersectionObserver {\n  observe: (element: Element) => Observable<IntersectionObserverEntry>\n}\n\nexport const createIntersectionObserver = (\n  options?: IntersectionObserverInit\n): ObservableIntersectionObserver => {\n  const entries$ = new Subject<IntersectionObserverEntry>()\n  const intersectionObserver = new IntersectionObserver((entries) => {\n    entries.forEach((entry) => {\n      entries$.next(entry)\n    })\n  }, options)\n  return {\n    observe: (element: Element) => {\n      return new Observable<IntersectionObserverEntry>((subscriber) => {\n        const subscription = entries$\n          .pipe(filter((entry) => entry.target === element))\n          .subscribe(subscriber)\n        intersectionObserver.observe(element)\n        return () => {\n          subscription.unsubscribe()\n          intersectionObserver.unobserve(element)\n        }\n      })\n    },\n  }\n}\n","import React from 'react'\nimport {tap} from 'rxjs/operators'\nimport type {ObservableIntersectionObserver} from './intersectionObserver'\n\nexport interface WithIntersectionProps {\n  onIntersection: (id: string, entry: IntersectionObserverEntry) => void\n  io: ObservableIntersectionObserver\n  id: string\n}\n\nexport const WithIntersection = (\n  props: WithIntersectionProps & React.HTMLProps<HTMLDivElement>\n) => {\n  const {onIntersection, io, id, ...rest} = props\n  const element = React.useRef<HTMLDivElement | null>(null)\n  React.useEffect(() => {\n    const el = element.current\n    if (!el) return undefined\n    const subscription = io\n      .observe(el)\n      .pipe(tap((entry) => onIntersection(id, entry)))\n      .subscribe()\n    return () => subscription.unsubscribe()\n  }, [io, id, onIntersection])\n  return <div ref={element} {...rest} />\n}\n","import styled, {css} from 'styled-components'\nimport {WithIntersection} from './WithIntersection'\n\ninterface StyleProps {\n  $debug: boolean\n  margins?: [number, number, number, number]\n}\n\nexport const RootWrapper = styled.div`\n  position: relative;\n`\n\nexport const OverlayWrapper = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  pointer-events: none;\n  z-index: 13;\n`\n\nexport const RegionWrapper = css`\n  overflow: hidden;\n  pointer-events: none;\n  position: absolute;\n`\n\nexport const TopRegionWrapper = styled(WithIntersection)(({$debug, margins}: StyleProps) => {\n  return css`\n    ${RegionWrapper}\n\n    z-index: 100;\n    position: sticky;\n    height: 1px;\n    top: ${margins ? `${margins[0] - 1}px` : undefined};\n    background-color: ${$debug ? 'red' : 'none'};\n  `\n})\n\nexport const MiddleRegionWrapper = styled(WithIntersection)(({$debug}: StyleProps) => {\n  return css`\n    ${RegionWrapper}\n\n    visibility: none;\n\n    ${$debug &&\n    css`\n      background: rgba(255, 0, 0, 0.25);\n      outline: 1px solid #00b;\n      visibility: visible;\n    `}\n  `\n})\n\nexport const BottomRegionWrapper = styled(WithIntersection)(({$debug}: StyleProps) => {\n  return css`\n    ${RegionWrapper}\n\n    position: sticky;\n    bottom: -1px;\n    height: 1px;\n    background-color: ${$debug ? 'blue' : 'transparent'};\n  `\n})\n","import React, {forwardRef, useCallback, useMemo, useRef, useState} from 'react'\nimport {\n  SNAP_TO_DOCK_DISTANCE_BOTTOM,\n  SNAP_TO_DOCK_DISTANCE_TOP,\n  DEBUG,\n  INTERSECTION_ELEMENT_PADDING,\n  INTERSECTION_THRESHOLDS,\n} from '../constants'\nimport {ReportedRegionWithRect, RegionWithIntersectionDetails, FieldPresenceData} from '../types'\nimport {createIntersectionObserver} from './intersectionObserver'\n\nimport {\n  RootWrapper,\n  OverlayWrapper,\n  TopRegionWrapper,\n  MiddleRegionWrapper,\n  BottomRegionWrapper,\n} from './RegionsWithIntersections.styled'\n\ninterface RegionsWithIntersectionsProps {\n  regions: ReportedRegionWithRect<FieldPresenceData>[]\n  render: (\n    regionsWithIntersectionDetails: RegionWithIntersectionDetails[],\n    containerWidth: number\n  ) => React.ReactNode | null\n  children: React.ReactNode\n  margins: [number, number, number, number]\n}\n\nconst toPx = (num: number) => `${num}px`\nconst negate = (num: number) => 0 - num\n\nexport const RegionsWithIntersections = forwardRef(function RegionsWithIntersections(\n  props: RegionsWithIntersectionsProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {regions, render, children, margins: marginsProp} = props\n\n  const overlayRef = useRef<HTMLDivElement | null>(null)\n\n  // Make sure `margins` is memoized\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const margins = useMemo(() => marginsProp, [JSON.stringify(marginsProp)])\n\n  const io = useMemo(\n    () =>\n      createIntersectionObserver({\n        rootMargin: margins.map(negate).map(toPx).join(' '),\n        threshold: INTERSECTION_THRESHOLDS,\n      }),\n    [margins]\n  )\n\n  const [intersections, setIntersections] = useState<\n    Record<\n      string,\n      | {\n          boundingClientRect: {top: number; bottom: number}\n          isIntersecting: boolean\n          intersectionRect: {top: number; bottom: number}\n        }\n      | undefined\n    >\n  >({})\n\n  const onIntersection = useCallback((id, entry) => {\n    setIntersections((current) => ({...current, [id]: entry}))\n  }, [])\n\n  const top = intersections['::top']\n  const bottom = intersections['::bottom']\n  const regionsWithIntersectionDetails: RegionWithIntersectionDetails[] = useMemo(\n    () =>\n      (top && bottom\n        ? regions\n            .filter((region) => region.presence?.length > 0)\n            .map((region): RegionWithIntersectionDetails | null => {\n              const intersection = intersections[region.id]\n\n              if (!intersection) {\n                return null\n              }\n\n              const {bottom: boundsBottom, top: boundsTop} = intersection.boundingClientRect\n\n              const aboveTop = intersection.boundingClientRect.top < top.boundingClientRect.bottom\n              const belowBottom =\n                intersection.boundingClientRect.top < bottom.boundingClientRect.top\n\n              // eslint-disable-next-line no-nested-ternary\n              const distanceTop = intersection.isIntersecting\n                ? boundsTop - (intersection.intersectionRect.top - INTERSECTION_ELEMENT_PADDING)\n                : aboveTop\n                ? -top.boundingClientRect.bottom\n                : bottom.boundingClientRect.top\n\n              // eslint-disable-next-line no-nested-ternary\n              const distanceBottom = intersection.isIntersecting\n                ? -(\n                    boundsBottom -\n                    (intersection.intersectionRect.bottom + INTERSECTION_ELEMENT_PADDING)\n                  )\n                : belowBottom\n                ? bottom.boundingClientRect.top\n                : -top.boundingClientRect.bottom\n\n              const position =\n                // eslint-disable-next-line no-nested-ternary\n                distanceTop <= SNAP_TO_DOCK_DISTANCE_TOP\n                  ? 'top'\n                  : distanceBottom <= SNAP_TO_DOCK_DISTANCE_BOTTOM\n                  ? 'bottom'\n                  : 'inside'\n\n              return {\n                distanceTop,\n                distanceBottom,\n                region,\n                position,\n              }\n            })\n            .filter(Boolean)\n        : []) as RegionWithIntersectionDetails[],\n    [bottom, intersections, regions, top]\n  )\n\n  return (\n    <RootWrapper ref={ref}>\n      <TopRegionWrapper\n        $debug={DEBUG}\n        io={io}\n        id=\"::top\"\n        onIntersection={onIntersection}\n        margins={margins}\n      />\n      <div>{children}</div>\n      <OverlayWrapper ref={overlayRef}>\n        {overlayRef.current &&\n          render(regionsWithIntersectionDetails, overlayRef.current.offsetWidth)}\n      </OverlayWrapper>\n      {regions.map((region) => {\n        const forceWidth = region.rect.width === 0\n        return (\n          <MiddleRegionWrapper\n            $debug={DEBUG}\n            io={io}\n            onIntersection={onIntersection}\n            key={region.id}\n            id={region.id}\n            style={{\n              width: forceWidth ? 1 : region.rect.width,\n              left: region.rect.left - (forceWidth ? 1 : 0),\n              top: region.rect.top - INTERSECTION_ELEMENT_PADDING,\n              height: region.rect.height + INTERSECTION_ELEMENT_PADDING * 2,\n            }}\n          />\n        )\n      })}\n      <BottomRegionWrapper $debug={DEBUG} id=\"::bottom\" io={io} onIntersection={onIntersection} />\n    </RootWrapper>\n  )\n})\n","/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport React, {memo, useMemo} from 'react'\nimport {flatten, groupBy, orderBy, sortBy} from 'lodash'\nimport {\n  AVATAR_ARROW_HEIGHT,\n  AVATAR_DISTANCE,\n  AVATAR_SIZE,\n  DEBUG,\n  MAX_AVATARS_DOCK,\n  SLIDE_RIGHT_THRESHOLD_BOTTOM,\n  SLIDE_RIGHT_THRESHOLD_TOP,\n} from '../constants'\nimport {\n  FieldPresenceData,\n  Rect,\n  ReportedRegionWithRect,\n  RegionWithIntersectionDetails,\n} from '../types'\nimport {FieldPresenceInner} from '../FieldPresence'\n\nimport {RegionsWithIntersections} from './RegionsWithIntersections'\nimport {ReportedPresenceData, useReportedValues} from './tracker'\n\nconst ITEM_TRANSITION: React.CSSProperties = {\n  transitionProperty: 'transform',\n  transitionDuration: '200ms',\n  transitionTimingFunction: 'cubic-bezier(0.85, 0, 0.15, 1)',\n}\n\nconst bottom = (rect: {top: number; height: number}) => rect.top + rect.height\n\ntype RegionWithSpacerHeight = RegionWithIntersectionDetails & {\n  spacerHeight: number\n}\n\nfunction withSpacerHeight(\n  regionsWithIntersectionDetails: RegionWithIntersectionDetails[]\n): RegionWithSpacerHeight[] {\n  return regionsWithIntersectionDetails.map(\n    (withIntersection, idx, _regionsWithIntersectionDetails) => {\n      const prevRect = _regionsWithIntersectionDetails[idx - 1]?.region.rect\n      const prevBottom = prevRect ? bottom(prevRect) : 0\n      return {...withIntersection, spacerHeight: withIntersection.region.rect.top - prevBottom}\n    }\n  )\n}\n\nconst orderByTop = (regionsWithIntersectionDetails: RegionWithIntersectionDetails[]) =>\n  orderBy(regionsWithIntersectionDetails, (withIntersection) => withIntersection.region.rect.top)\n\nconst plus = (a: number, b: number) => a + b\nconst sum = (array: number[]) => array.reduce(plus, 0)\n\ntype Margins = [number, number, number, number]\ntype RegionWithSpacerHeightAndIndent = RegionWithSpacerHeight & {indent: number}\n\nfunction group(regionsWithIntersectionDetails: RegionWithIntersectionDetails[]): {\n  top: RegionWithSpacerHeightAndIndent[]\n  inside: RegionWithSpacerHeightAndIndent[]\n  bottom: RegionWithSpacerHeightAndIndent[]\n} {\n  const regionsWithSpacerHeight = withSpacerHeight(orderByTop(regionsWithIntersectionDetails))\n  const grouped: {\n    top: RegionWithSpacerHeight[]\n    inside: RegionWithSpacerHeight[]\n    bottom: RegionWithSpacerHeight[]\n  } = {\n    top: [],\n    inside: [],\n    bottom: [],\n    ...groupBy(regionsWithSpacerHeight, (_withSpacerHeight) => _withSpacerHeight.position),\n  }\n\n  return {\n    top: orderByTop(grouped.top).map(\n      (withIntersection, i, grp): RegionWithSpacerHeightAndIndent => ({\n        ...(withIntersection as RegionWithSpacerHeight),\n        indent: grp\n          .slice(i + 1)\n          .reduce((w, _withIntersection) => w + _withIntersection.region.rect.width, 0),\n      })\n    ),\n    inside: orderByTop(grouped.inside).map(\n      (withIntersection): RegionWithSpacerHeightAndIndent => ({\n        ...(withIntersection as RegionWithSpacerHeight),\n        indent: 0,\n      })\n    ),\n    bottom: orderByTop(grouped.bottom).map(\n      (withIntersection, i, grp): RegionWithSpacerHeightAndIndent => ({\n        ...(withIntersection as RegionWithSpacerHeight),\n        indent: grp\n          .slice(0, i)\n          .reduce((w, _withIntersection) => w + _withIntersection.region.rect.width, 0),\n      })\n    ),\n  }\n}\n\nconst Spacer = ({height, ...rest}: {height: number; style?: React.CSSProperties}) => (\n  <div style={{height: Math.max(0, height), ...rest?.style}} />\n)\n\nconst DEFAULT_MARGINS: Margins = [0, 0, 0, 0]\n\nconst getOffsetsTo = (source: HTMLElement, target: HTMLElement) => {\n  let el: HTMLElement | null = source\n  let top = -el.scrollTop\n  let left = 0\n  while (el && el !== target) {\n    top += el.offsetTop - el.scrollTop\n    left += el.offsetLeft\n    el = el.offsetParent instanceof HTMLElement ? el.offsetParent : null\n  }\n  return {top, left}\n}\n\nfunction getRelativeRect(element: HTMLElement, parent: HTMLElement): Rect {\n  return {\n    ...getOffsetsTo(element, parent),\n    width: element.offsetWidth,\n    height: element.offsetHeight,\n  }\n}\n\nfunction regionsWithComputedRects(\n  regions: ReportedPresenceData[],\n  parent: HTMLElement\n): ReportedRegionWithRect<FieldPresenceData>[] {\n  return regions.map(([id, region]) => ({\n    ...region,\n    id,\n    rect: getRelativeRect(region.element, parent),\n  }))\n}\n\ntype Props = {margins: Margins; children: React.ReactNode}\nexport function StickyOverlay(props: Props) {\n  const {children, margins = DEFAULT_MARGINS} = props\n  const reportedValues = useReportedValues()\n  const ref = React.useRef<HTMLDivElement | null>(null)\n  const regions = React.useMemo(\n    () => (ref.current ? regionsWithComputedRects(reportedValues, ref.current) : EMPTY_ARRAY),\n    [reportedValues]\n  )\n\n  const renderCallback = React.useCallback(\n    (regionsWithIntersectionDetails: RegionWithIntersectionDetails[], containerWidth) => {\n      const grouped = group(\n        regionsWithIntersectionDetails.filter((item) => item.region.presence.length > 0)\n      )\n      const topSpacing = sum(grouped.top.map((n) => n.region.rect.height + n.spacerHeight))\n      const bottomSpacing = sum(\n        [...grouped.inside, ...grouped.bottom].map((n) => n.region.rect.height + n.spacerHeight)\n      )\n\n      // todo: this needs cleaning up, should process all the needed layout data in one go\n      const counts = grouped.inside.reduce(\n        (_counts, withIntersection) => {\n          const {distanceTop, distanceBottom} = withIntersection\n\n          const nearTop = distanceTop <= SLIDE_RIGHT_THRESHOLD_TOP\n          const nearBottom = distanceBottom <= SLIDE_RIGHT_THRESHOLD_BOTTOM\n          return {\n            nearTop: _counts.nearTop + (nearTop ? withIntersection.region.presence.length : 0),\n            nearBottom:\n              _counts.nearBottom + (nearBottom ? withIntersection.region.presence.length : 0),\n          }\n        },\n        {nearTop: 0, nearBottom: 0}\n      )\n\n      return (\n        <>\n          <PresenceDock\n            closeCount={counts.nearTop}\n            margins={margins}\n            position=\"top\"\n            regionsWithIntersectionDetails={grouped.top}\n          />\n          <Spacer height={topSpacing} />\n          <PresenceInside\n            containerWidth={containerWidth}\n            regionsWithIntersectionDetails={grouped.inside}\n          />\n          <Spacer height={bottomSpacing} />\n          <PresenceDock\n            closeCount={counts.nearBottom}\n            margins={margins}\n            position=\"bottom\"\n            regionsWithIntersectionDetails={grouped.bottom}\n          />\n        </>\n      )\n    },\n    [margins]\n  )\n\n  return (\n    <RegionsWithIntersections ref={ref} margins={margins} regions={regions} render={renderCallback}>\n      {children}\n    </RegionsWithIntersections>\n  )\n}\n\nconst EMPTY_ARRAY: never[] = []\n\nconst PresenceDock = memo(function PresenceDock(props: {\n  closeCount: number\n  margins: Margins\n  position: 'top' | 'bottom'\n  regionsWithIntersectionDetails: RegionWithIntersectionDetails[]\n}) {\n  const {closeCount, margins, position, regionsWithIntersectionDetails} = props\n  const dir = position === 'top' ? 1 : -1\n  const allPresenceItems = useMemo(() => {\n    if (!regionsWithIntersectionDetails.length) {\n      return EMPTY_ARRAY\n    }\n\n    return flatten(\n      sortBy(regionsWithIntersectionDetails, (r) => r.region.rect.top * dir).map(\n        (withIntersection) => withIntersection.region.presence || EMPTY_ARRAY\n      )\n    )\n  }, [dir, regionsWithIntersectionDetails])\n  const [topMargin, rightMargin, bottomMargin, leftMargin] = margins\n  const leftOffset =\n    (leftMargin || 0) +\n    (allPresenceItems.length > 0 ? -closeCount * (AVATAR_SIZE + AVATAR_DISTANCE) : 0) -\n    rightMargin\n\n  const margin = position === 'top' ? topMargin : bottomMargin\n\n  const style: React.CSSProperties = useMemo(\n    () => ({\n      zIndex: 2,\n      position: 'sticky',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'flex-end',\n      ...ITEM_TRANSITION,\n      transform: `translate3d(${leftOffset}px, 0px, 0px)`,\n      top: AVATAR_ARROW_HEIGHT + 1 + margin,\n      bottom: AVATAR_ARROW_HEIGHT + 1 + margin,\n    }),\n    [leftOffset, margin]\n  )\n\n  return (\n    <div data-dock={position} key={`sticky-${position}`} style={style}>\n      <FieldPresenceInner\n        position={position}\n        maxAvatars={MAX_AVATARS_DOCK}\n        presence={allPresenceItems}\n      />\n    </div>\n  )\n})\n\nfunction PresenceInside(props: {\n  containerWidth: number\n  regionsWithIntersectionDetails: RegionWithSpacerHeight[]\n}) {\n  const {regionsWithIntersectionDetails, containerWidth} = props\n\n  return (\n    <>\n      {regionsWithIntersectionDetails.map((withIntersection) => {\n        const originalLeft = withIntersection.region.rect.left\n        const {distanceTop, distanceBottom} = withIntersection\n\n        const nearTop = distanceTop <= SLIDE_RIGHT_THRESHOLD_TOP\n        const nearBottom = distanceBottom <= SLIDE_RIGHT_THRESHOLD_BOTTOM\n\n        const diffRight = containerWidth - originalLeft - withIntersection.region.rect.width\n\n        const {presence, maxAvatars} = withIntersection.region\n        return (\n          <React.Fragment key={withIntersection.region.id}>\n            <div\n              style={{\n                zIndex: 2,\n                position: 'absolute',\n                pointerEvents: 'all',\n                ...ITEM_TRANSITION,\n                left: originalLeft,\n                transform: `translate3d(${nearTop || nearBottom ? diffRight : 0}px, 0px, 0px)`,\n                height: withIntersection.region.rect.height,\n                top: withIntersection.region.rect.top,\n              }}\n            >\n              <DebugValue value={() => `⤒${distanceTop} | ${distanceBottom}⤓`}>\n                <FieldPresenceInner\n                  stack={!nearTop && !nearBottom}\n                  // eslint-disable-next-line no-nested-ternary\n                  position={nearTop ? 'top' : nearBottom ? 'bottom' : 'inside'}\n                  maxAvatars={maxAvatars}\n                  presence={presence}\n                />\n              </DebugValue>\n            </div>\n          </React.Fragment>\n        )\n      })}\n    </>\n  )\n}\n\nconst PassThrough = (props: {children: React.ReactElement; [prop: string]: any}) => props.children\n\nconst DebugValue = DEBUG\n  ? function DebugValue(props: any) {\n      return (\n        <div style={{position: 'absolute'}}>\n          {props.children}\n          <span\n            style={{\n              top: 0,\n              left: -15,\n              fontSize: 11,\n              right: -15,\n              textAlign: 'center',\n              height: AVATAR_SIZE,\n              color: 'white',\n              backgroundColor: 'rgba(0, 0, 0, 0.8)',\n              position: 'absolute',\n              zIndex: 1000,\n            }}\n          >\n            {props.value()}\n          </span>\n        </div>\n      )\n    }\n  : PassThrough\n","import React from 'react'\nimport {DISABLE_OVERLAY} from '../constants'\nimport {Tracker} from './tracker'\nimport {StickyOverlay} from './StickyOverlay'\n\nexport interface PresenceOverlayProps {\n  children: React.ReactNode\n  margins?: [number, number, number, number]\n}\n\nconst DEFAULT_MARGINS: [number, number, number, number] = [0, 0, 0, 0]\n\nfunction OverlayEnabled({children, margins}: PresenceOverlayProps) {\n  return (\n    <Tracker>\n      <StickyOverlay margins={margins || DEFAULT_MARGINS}>{children}</StickyOverlay>\n    </Tracker>\n  )\n}\n\nexport function OverlayDisabled(props: PresenceOverlayProps) {\n  return props.children as JSX.Element\n}\n\nexport const PresenceOverlay = DISABLE_OVERLAY ? OverlayDisabled : OverlayEnabled\n","import {UploadState} from '@sanity/types'\nimport {isRecord, isString} from '../../util'\n\nexport function _extractUploadState(value: unknown): {\n  _upload?: UploadState\n  value: unknown\n} {\n  if (isRecord(value)) {\n    const {_upload, ...restValue} = value\n\n    return {\n      _upload: _resolveUploadValue(_upload),\n      value: restValue,\n    }\n  }\n\n  return {_upload: undefined, value}\n}\n\nfunction _resolveUploadValue(value: unknown): UploadState | undefined {\n  if (!isRecord(value)) return undefined\n\n  const progress = typeof value.progress === 'number' ? value.progress : undefined\n  const initiated = isString(value.initiated) ? value.initiated : undefined\n  const updated = isString(value.updated) ? value.updated : undefined\n  const fileName = isRecord(value.file) && isString(value.file.name) ? value.file.name : undefined\n  const fileType = isRecord(value.file) && isString(value.file.type) ? value.file.type : undefined\n  const previewImage = isString(value.previewImage) ? value.previewImage : undefined\n\n  if (progress && initiated && updated && fileName && fileType) {\n    return {\n      progress,\n      initiated,\n      updated,\n      file: {name: fileName, type: fileType},\n      previewImage,\n    }\n  }\n\n  return undefined\n}\n","import {ComponentType} from 'react'\nimport {\n  BlockImagePreview,\n  BlockPreview,\n  DefaultPreview,\n  DetailPreview,\n  InlinePreview,\n  MediaPreview,\n  PreviewLayoutKey,\n  PreviewProps,\n} from '../../components/previews'\n\nexport const _previewComponents: {\n  [TLayoutKey in PreviewLayoutKey]: ComponentType<PreviewProps<TLayoutKey>>\n} = {\n  default: DefaultPreview,\n  media: MediaPreview,\n  detail: DetailPreview,\n  inline: InlinePreview,\n  block: BlockPreview,\n  blockImage: BlockImagePreview,\n}\n","import {DocumentIcon} from '@sanity/icons'\nimport imageUrlBuilder from '@sanity/image-url'\nimport {ImageUrlFitMode, isImage, isReference} from '@sanity/types'\nimport React, {\n  ComponentType,\n  createElement,\n  isValidElement,\n  ReactElement,\n  useCallback,\n  useMemo,\n} from 'react'\nimport {PreviewProps} from '../../components/previews'\nimport {useClient} from '../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../studioClient'\nimport {isRecord, isString} from '../../util'\nimport {_extractUploadState} from './_extractUploadState'\nimport {_previewComponents} from './_previewComponents'\n\nfunction FallbackIcon() {\n  return <DocumentIcon className=\"sanity-studio__preview-fallback-icon\" />\n}\n\nexport interface SanityDefaultPreviewProps extends Omit<PreviewProps, 'value'> {\n  error?: Error | null\n  icon?: ComponentType | false\n  value?: unknown\n}\n\nexport function SanityDefaultPreview(props: SanityDefaultPreviewProps): ReactElement {\n  const {\n    description: descriptionProp,\n    icon,\n    layout,\n    media: mediaProp,\n    subtitle: subtitleProp,\n    title: titleProp,\n    value: valueProp,\n    ...restProps\n  } = props\n\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const imageBuilder = useMemo(() => imageUrlBuilder(client), [client])\n\n  const component = (_previewComponents[layout || 'default'] ||\n    _previewComponents.default) as ComponentType<PreviewProps>\n\n  const {_upload, value} = useMemo(() => {\n    return valueProp ? _extractUploadState(valueProp) : {_upload: undefined, value: undefined}\n  }, [valueProp])\n\n  const description: PreviewProps['description'] =\n    descriptionProp ||\n    (isRecord(value) && value?.description ? String(value?.description) : undefined)\n\n  const title: PreviewProps['title'] =\n    titleProp || (isRecord(value) && value?.title ? String(value?.title) : undefined)\n\n  const subtitle: PreviewProps['subtitle'] =\n    subtitleProp || (isRecord(value) && value?.subtitle ? String(value?.subtitle) : undefined)\n\n  // NOTE: This function exists because the previews provides options\n  // for the rendering of the media (dimensions)\n  const renderMedia = useCallback(\n    (options: {\n      dimensions: {width?: number; height?: number; fit: ImageUrlFitMode; dpr?: number}\n    }) => {\n      if (!isImage(mediaProp)) {\n        return null\n      }\n\n      const {dimensions} = options\n\n      // Handle sanity image\n      return (\n        <img\n          alt={isString(title) ? title : undefined}\n          referrerPolicy=\"strict-origin-when-cross-origin\"\n          src={\n            imageBuilder\n              .image(mediaProp)\n              .width(dimensions.width || 100)\n              .height(dimensions.height || 100)\n              .fit(dimensions.fit)\n              .dpr(dimensions.dpr || 1)\n              .url() || ''\n          }\n        />\n      )\n    },\n    [imageBuilder, mediaProp, title]\n  )\n\n  const renderIcon = useCallback(() => {\n    return createElement(icon || FallbackIcon)\n  }, [icon])\n\n  const media = useMemo(() => {\n    if (icon === false) {\n      // Explicitly disabled\n      return false\n    }\n\n    if (typeof mediaProp === 'function') {\n      return mediaProp\n    }\n\n    if (isValidElement(mediaProp)) {\n      return mediaProp\n    }\n\n    // If the asset is on media\n    if (isReference(mediaProp) && mediaProp._type === 'reference') {\n      return renderMedia\n    }\n\n    // Handle sanity image\n    if (isImage(mediaProp)) {\n      return renderMedia\n    }\n\n    // Render fallback icon\n    return renderIcon\n  }, [icon, mediaProp, renderIcon, renderMedia])\n\n  return createElement(component, {\n    imageUrl: _upload?.previewImage,\n    progress: _upload?.progress,\n    ...restProps,\n    media,\n    description,\n    title,\n    subtitle,\n    value,\n  })\n}\n","import {PreviewValue, SchemaType, SortOrdering} from '@sanity/types'\nimport {useEffect, useState} from 'react'\nimport {useDocumentPreviewStore} from '../datastores'\nimport {Previewable} from './types'\n\nexport {useDocumentPreview as unstable_useDocumentPreview}\n\n/**\n * @deprecated FOR INTERNAL USE.\n */\nfunction useDocumentPreview(props: {\n  enabled?: boolean\n  ordering?: SortOrdering\n  schemaType?: SchemaType\n  value: Previewable | undefined\n}): {error: Error | null; value: PreviewValue | null} {\n  const {enabled = true, ordering, schemaType, value: previewValue} = props || {}\n  const {observeForPreview} = useDocumentPreviewStore()\n  const [error, setError] = useState<Error | null>(null)\n  const [value, setValue] = useState<PreviewValue | null>(null)\n\n  useEffect(() => {\n    if (!enabled || !previewValue || !schemaType) return undefined\n\n    const snapshotEvent$ = observeForPreview(previewValue, schemaType, {ordering})\n\n    const sub = snapshotEvent$.subscribe({\n      error(nextError) {\n        setError(nextError)\n      },\n      next(nextValue) {\n        setValue(nextValue.snapshot || null)\n      },\n    })\n\n    return () => sub.unsubscribe()\n  }, [enabled, observeForPreview, ordering, schemaType, previewValue])\n\n  return {error, value}\n}\n","import {EMPTY, fromEvent} from 'rxjs'\nimport {shareReplay} from 'rxjs/operators'\n\nexport const resize$ =\n  typeof window === 'undefined' ? EMPTY : fromEvent(window, 'resize').pipe(shareReplay(1))\n","import {EMPTY, fromEvent} from 'rxjs'\nimport {shareReplay} from 'rxjs/operators'\n\nexport const scroll$ =\n  typeof window === 'undefined'\n    ? EMPTY\n    : fromEvent(window, 'scroll', {passive: true, capture: true}).pipe(shareReplay(1))\n","import {EMPTY, fromEvent} from 'rxjs'\nimport {shareReplay} from 'rxjs/operators'\n\nexport const orientationChange$ =\n  typeof window === 'undefined'\n    ? EMPTY\n    : fromEvent(window, 'orientationchange').pipe(shareReplay(1))\n","import {Subject, Observable, merge, of as observableOf} from 'rxjs'\nimport {map, mergeMap, filter} from 'rxjs/operators'\nimport {resize$} from './resize'\nimport {scroll$} from './scroll'\nimport {orientationChange$} from './orientationChange'\n\nconst ROOT_MARGIN_PX = 150\n\n/*\n  Adapted from the polyfill at https://github.com/WICG/IntersectionObserver\n*/\nfunction isIntersectionObserverSupported() {\n  if (\n    typeof window !== 'undefined' &&\n    'IntersectionObserver' in window &&\n    'IntersectionObserverEntry' in window &&\n    'intersectionRatio' in IntersectionObserverEntry.prototype\n  ) {\n    // Minimal polyfill for Edge 15's lack of `isIntersecting`\n    // See: https://github.com/WICG/IntersectionObserver/issues/211\n    if (!('isIntersecting' in IntersectionObserverEntry.prototype)) {\n      Object.defineProperty(IntersectionObserverEntry.prototype, 'isIntersecting', {\n        get() {\n          return this.intersectionRatio > 0\n        },\n      })\n    }\n    return true\n  }\n  return false\n}\n\ntype IntersectionEvent = {isIntersecting: boolean}\n\nexport const intersectionObservableFor = isIntersectionObserverSupported()\n  ? createIntersectionObserverBased()\n  : createLegacyBased()\n\ntype IntersectionObservableFor = (element: Element) => Observable<IntersectionEvent>\n\nfunction createIntersectionObserverBased(): IntersectionObservableFor {\n  const intersectionObserverEntriesSubject = new Subject<IntersectionObserverEntry>()\n\n  const intersectionObserver = new IntersectionObserver(\n    (entries) => {\n      entries.forEach((entry) => {\n        intersectionObserverEntriesSubject.next(entry)\n      })\n    },\n    {\n      threshold: 0,\n      rootMargin: `${ROOT_MARGIN_PX}px`,\n    }\n  )\n\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  return function intersectionObservableFor(element) {\n    return new Observable((observer) => {\n      intersectionObserver.observe(element)\n      observer.next()\n      return () => intersectionObserver.unobserve(element)\n    }).pipe(\n      mergeMap(() => intersectionObserverEntriesSubject.asObservable()),\n      filter((entry: IntersectionObserverEntry) => entry.target === element),\n      map((ev) => ({\n        isIntersecting: ev.isIntersecting,\n      }))\n    )\n  }\n}\n\n// This can be removed when intersection observer are supported by the browsers we support\nfunction createLegacyBased() {\n  function getViewport() {\n    return {\n      left: 0,\n      right: window.innerWidth,\n      top: 0,\n      bottom: window.innerHeight,\n    }\n  }\n\n  function intersects(\n    rect: DOMRect,\n    viewport: {left: number; right: number; top: number; bottom: number},\n    margin: number\n  ) {\n    return (\n      rect.left <= viewport.right + margin &&\n      rect.right >= viewport.left - margin &&\n      rect.top <= viewport.bottom + margin &&\n      rect.bottom >= viewport.top - margin\n    )\n  }\n\n  function inViewport(element: HTMLElement) {\n    return () => intersects(element.getBoundingClientRect(), getViewport(), ROOT_MARGIN_PX)\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  return function intersectionObservableFor(element: HTMLElement): Observable<IntersectionEvent> {\n    const isElementInViewport = inViewport(element)\n    return merge(observableOf(isElementInViewport()), resize$, scroll$, orientationChange$).pipe(\n      // @todo: consider \"faking\" more of the IntersectionObserverEntry api if possible\n      map(isElementInViewport),\n      map((isIntersecting) => ({isIntersecting}))\n    )\n  }\n}\n","import {EMPTY, fromEvent, Observable} from 'rxjs'\nimport {shareReplay} from 'rxjs/operators'\n\nexport const visibilityChange$: Observable<Event> =\n  typeof window === 'undefined'\n    ? EMPTY\n    : fromEvent(document, 'visibilitychange').pipe(shareReplay(1))\n","import {useEffect, useState} from 'react'\nimport {concat, of} from 'rxjs'\nimport {delay, distinctUntilChanged, map, switchMap} from 'rxjs/operators'\nimport {intersectionObservableFor} from './streams/intersectionObservableFor'\nimport {visibilityChange$} from './streams/visibilityChange'\n\nexport function useVisibility(props: {element: HTMLElement | null; hideDelay?: number}): boolean {\n  const {element, hideDelay = 0} = props\n  const [visible, setVisible] = useState(false)\n\n  useEffect(() => {\n    if (!element) {\n      return undefined\n    }\n\n    const isDocumentVisible$ = concat(\n      of(!document.hidden),\n      visibilityChange$.pipe(\n        map((event) => (event.target instanceof Document ? !event?.target?.hidden : false))\n      )\n    ).pipe(distinctUntilChanged())\n\n    const inViewport$ = intersectionObservableFor(element).pipe(\n      map((event) => event.isIntersecting)\n    )\n\n    const visible$ = isDocumentVisible$.pipe(\n      switchMap((isDocumentVisible) => (isDocumentVisible ? inViewport$ : of(false))),\n      switchMap((isVisible) => (isVisible ? of(true) : of(false).pipe(delay(hideDelay)))),\n      distinctUntilChanged()\n    )\n\n    const sub = visible$.subscribe(setVisible)\n\n    return () => sub.unsubscribe()\n  }, [element, hideDelay])\n\n  return visible\n}\n","export const _HIDE_DELAY = 1000 * 2 // 2 seconds\n","import {SchemaType} from '@sanity/types'\nimport {ComponentType} from 'react'\nimport {PreviewProps} from '../../components/previews'\nimport {SanityDefaultPreview} from './SanityDefaultPreview'\n\nexport function _resolvePreviewComponent(type: SchemaType): ComponentType<\n  PreviewProps & {\n    icon?: ComponentType\n    schemaType?: SchemaType\n  }\n> {\n  return type.components?.preview || SanityDefaultPreview\n}\n","import {isImage, SchemaType} from '@sanity/types'\nimport React, {createElement, CSSProperties, useCallback, useMemo, useState} from 'react'\nimport {PreviewProps} from '../../components/previews'\nimport {Previewable, SortOrdering} from '../types'\nimport {unstable_useDocumentPreview as useDocumentPreview} from '../useDocumentPreview'\nimport {useVisibility} from '../useVisibility'\nimport {_HIDE_DELAY} from './_constants'\nimport {_resolvePreviewComponent} from './_resolvePreviewComponent'\n\nexport interface SanityPreviewProps extends Omit<PreviewProps, 'value'> {\n  ordering?: SortOrdering\n  schemaType: SchemaType\n  value: Previewable\n}\n\nexport function SanityPreview(props: SanityPreviewProps & {style?: CSSProperties}) {\n  const {\n    layout = 'default',\n    ordering,\n    schemaType,\n    style: styleProp,\n    value: valueProp,\n    ...restProps\n  } = props\n  const component = _resolvePreviewComponent(schemaType)\n  const [element, setElement] = useState<HTMLDivElement | null>(null)\n  const isPTE = ['inline', 'block', 'blockImage'].includes(layout)\n\n  // Subscribe to visiblity\n  const visibility = useVisibility({\n    // NOTE: disable when PTE preview\n    element: isPTE ? null : element,\n    hideDelay: _HIDE_DELAY,\n  })\n\n  // Subscribe document preview value\n  const {error, value} = useDocumentPreview({\n    enabled: isPTE || visibility,\n    ordering,\n    schemaType,\n    value: valueProp,\n  })\n\n  const setRef = useCallback((refValue: HTMLDivElement | null) => {\n    setElement(refValue)\n  }, [])\n\n  const style: CSSProperties = useMemo(\n    () => ({\n      ...styleProp,\n      minWidth: styleProp?.minWidth || 1,\n      minHeight: styleProp?.minHeight || 1,\n    }),\n    [styleProp]\n  )\n\n  return (\n    <div ref={setRef} style={style}>\n      {createElement(component, {\n        ...restProps,\n        description: value?.description,\n        error,\n        isPlaceholder: !value,\n        layout,\n        media: isImage(valueProp) ? valueProp : value?.media,\n        schemaType,\n        subtitle: value?.subtitle,\n        title: value?.title,\n        value,\n      })}\n    </div>\n  )\n}\n","import {SchemaType} from '@sanity/types'\nimport {Path} from '../types'\n\nexport function getPreviewPaths(preview: SchemaType['preview']): Path[] | undefined {\n  const selection = preview?.select\n\n  if (!selection) return undefined\n\n  return Object.values(selection).map((value) => String(value).split('.'))\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport {PreviewValue} from '@sanity/types'\nimport React from 'react'\n\nexport const INCLUDE_FIELDS_QUERY = ['_id', '_rev', '_type']\nexport const INCLUDE_FIELDS = [...INCLUDE_FIELDS_QUERY, '_key']\n\nexport const AVAILABILITY_READABLE = {\n  available: true,\n  reason: 'READABLE',\n} as const\n\nexport const AVAILABILITY_PERMISSION_DENIED = {\n  available: false,\n  reason: 'PERMISSION_DENIED',\n} as const\n\nexport const AVAILABILITY_NOT_FOUND = {\n  available: false,\n  reason: 'NOT_FOUND',\n} as const\n\nexport const INVALID_PREVIEW_FALLBACK: PreviewValue = {\n  title: 'Invalid preview config',\n  subtitle: 'Check the error log in the console',\n  media: <WarningOutlineIcon />,\n}\n","import {Block, isBlock, isSpan} from '@sanity/types'\n\nexport function isPortableTextArray(blocks: unknown): blocks is Block[] {\n  return Array.isArray(blocks) && (blocks.length === 0 || blocks.some(isBlock))\n}\n\nexport function extractTextFromBlocks(blocks: Block[]): string {\n  const firstBlock = blocks.find(isBlock)\n  if (!firstBlock || !firstBlock.children) {\n    return ''\n  }\n\n  return firstBlock.children\n    .filter(isSpan)\n    .map((span) => span.text)\n    .join('')\n}\n","export function keysOf<T extends object>(value: T) {\n  return Object.keys(value) as (keyof T)[]\n}\n","import {isTitledListValue, PreviewValue, SchemaType, TitledListValue} from '@sanity/types'\nimport {debounce, flatten, get, isPlainObject, pick, uniqBy} from 'lodash'\nimport {INVALID_PREVIEW_FALLBACK} from '../constants'\nimport {isPortableTextArray, extractTextFromBlocks} from '../utils/portableText'\nimport {PrepareViewOptions, PreviewableType} from '../types'\nimport {isRecord} from '../../util/isRecord'\nimport {keysOf} from './keysOf'\n\nconst PRESERVE_KEYS = ['_id', '_type', '_upload', '_createdAt', '_updatedAt']\nconst EMPTY: never[] = []\n\ntype SelectedValue = Record<string, unknown>\n\nexport type PrepareInvocationResult = {\n  selectedValue?: SelectedValue\n  returnValue: null | PreviewValue\n  errors: Error[]\n}\n\nconst errorCollector = (() => {\n  let errorsByType: Record<string, {error: Error; type: SchemaType; value: SelectedValue}[]> = {}\n\n  return {\n    add: (type: SchemaType, value: SelectedValue, error: Error) => {\n      if (!errorsByType[type.name]) {\n        errorsByType[type.name] = []\n      }\n      errorsByType[type.name].push({error: error, type: type, value})\n    },\n    getAll() {\n      return errorsByType\n    },\n    clear() {\n      errorsByType = {}\n    },\n  }\n})()\n\nconst reportErrors = debounce(() => {\n  /* eslint-disable no-console */\n  const errorsByType = errorCollector.getAll()\n  const uniqueErrors = flatten(\n    Object.keys(errorsByType).map((typeName) => {\n      const entries = errorsByType[typeName]\n      return uniqBy(entries, (entry) => entry.error.message)\n    })\n  )\n  const errorCount = uniqueErrors.length\n  if (errorCount === 0) {\n    return\n  }\n\n  console.groupCollapsed(\n    `%cHeads up! Got ${\n      errorCount === 1 ? 'error' : `${errorCount} errors`\n    } while preparing data for preview. Click for details.`,\n    'color: #ff7e7c'\n  )\n\n  Object.keys(errorsByType).forEach((typeName) => {\n    const entries = errorsByType[typeName]\n    const first = entries[0]\n    console.group(`Check the preview config for schema type \"${typeName}\": %o`, first.type.preview)\n    const uniqued = uniqBy(entries, (entry) => entry.error.message)\n    uniqued.forEach((entry) => {\n      if ((entry.error as any).type === 'returnValueError') {\n        const hasPrepare = typeof entry.type.preview?.prepare === 'function'\n        const {value, error} = entry\n        console.log(\n          `Encountered an invalid ${\n            hasPrepare\n              ? 'return value when calling prepare(%o)'\n              : 'value targeted by preview.select'\n          }:`,\n          value\n        )\n        console.error(error)\n      }\n      if ((entry.error as any).type === 'prepareError') {\n        const {value, error} = entry\n        console.log('Encountered an error when calling prepare(%o):', value)\n        console.error(error)\n      }\n    })\n    console.groupEnd()\n  })\n  console.groupEnd()\n  errorCollector.clear()\n  /* eslint-enable no-console */\n}, 1000)\n\nconst isRenderable =\n  (fieldName: string) =>\n  (value: unknown): Error[] => {\n    const type = typeof value\n    if (\n      value === null ||\n      type === 'undefined' ||\n      type === 'string' ||\n      type === 'number' ||\n      type === 'boolean'\n    ) {\n      return EMPTY\n    }\n    return [\n      assignType(\n        'returnValueError',\n        new Error(\n          `The \"${fieldName}\" field should be a string, number, boolean, undefined or null, instead saw ${inspect(\n            value\n          )}`\n        )\n      ),\n    ]\n  }\nconst FIELD_NAME_VALIDATORS: Record<string, (value: unknown) => Error[]> = {\n  media: () => {\n    // not sure how to validate media as it would  possibly involve executing a function and check the\n    // return value\n    return EMPTY\n  },\n  title: isRenderable('title'),\n  subtitle: isRenderable('subtitle'),\n  description: isRenderable('description'),\n  imageUrl: isRenderable('imageUrl'),\n  date: isRenderable('date'),\n}\n\nfunction inspect(val: unknown, prefixType = true): string {\n  if (isRecord(val)) {\n    const keys = Object.keys(val)\n    const ellipse = keys.length > 3 ? '...' : ''\n    const prefix = `object with keys `\n    return `${prefixType ? prefix : ''}{${keys.slice(0, 3).join(', ')}${ellipse}}`\n  }\n  if (Array.isArray(val)) {\n    const ellipse = val.length > 3 ? '...' : ''\n    const prefix = `array with `\n    return `${prefixType ? prefix : ''}[${val.map((v) => inspect(v, false))}${ellipse}]`\n  }\n  return `the ${typeof val} ${val}`\n}\n\nfunction validateFieldValue(fieldName: string, fieldValue: unknown) {\n  if (typeof fieldValue === 'undefined') {\n    return EMPTY\n  }\n  const validator = FIELD_NAME_VALIDATORS[fieldName]\n  return (validator && validator(fieldValue)) || EMPTY\n}\n\nfunction assignType(type: string, error: Error) {\n  return Object.assign(error, {type})\n}\n\nfunction validatePreparedValue(preparedValue: PreviewValue | null) {\n  if (!isPlainObject(preparedValue) || preparedValue === null) {\n    return [\n      assignType(\n        'returnValueError',\n        new Error(\n          `Invalid return value. Expected a plain object with at least a 'title' field, instead saw ${inspect(\n            preparedValue\n          )}`\n        )\n      ),\n    ]\n  }\n\n  return Object.entries(preparedValue).reduce<Error[]>((acc, [fieldName, fieldValue]) => {\n    return [...acc, ...validateFieldValue(fieldName, fieldValue)]\n  }, EMPTY)\n}\n\nfunction validateReturnedPreview(result: PrepareInvocationResult) {\n  return {\n    ...result,\n    errors: [...(result.errors || []), ...validatePreparedValue(result.returnValue)],\n  }\n}\n\nfunction defaultPrepare(value: SelectedValue) {\n  return keysOf(value).reduce((acc: SelectedValue, fieldName: keyof SelectedValue) => {\n    const val = value[fieldName]\n    return {\n      ...acc,\n      [fieldName]: isPortableTextArray(val) ? extractTextFromBlocks(val) : value[fieldName],\n    }\n  }, {})\n}\n\nexport function invokePrepare(\n  type: PreviewableType,\n  value: SelectedValue,\n  viewOptions: PrepareViewOptions = {}\n): PrepareInvocationResult {\n  const prepare = type.preview?.prepare\n  try {\n    return {\n      returnValue: prepare\n        ? (prepare(value, viewOptions) as Record<string, unknown>)\n        : defaultPrepare(value),\n      errors: EMPTY,\n    }\n  } catch (error) {\n    return {\n      returnValue: null,\n      errors: [assignType('prepareError', error)],\n    }\n  }\n}\n\nfunction withErrors(\n  result: {errors: Error[]},\n  type: SchemaType,\n  selectedValue: SelectedValue\n): PreviewValue {\n  result.errors.forEach((error) => errorCollector.add(type, selectedValue, error))\n  reportErrors()\n\n  return INVALID_PREVIEW_FALLBACK\n}\n\ninterface EnumListOptions {\n  list: TitledListValue[] | unknown[]\n}\n\nfunction hasEnumListOptions(\n  type: SchemaType\n): type is SchemaType & {options: SchemaType['options'] & EnumListOptions} {\n  const options = type.options && typeof type.options === 'object' ? type.options : false\n  if (!options || !('list' in options)) {\n    return false\n  }\n\n  const listOptions = (options as EnumListOptions).list\n  return Array.isArray(listOptions)\n}\n\nfunction getListOptions(type: SchemaType): TitledListValue[] | undefined {\n  if (!hasEnumListOptions(type)) {\n    return undefined\n  }\n\n  const listOptions = type.options.list as EnumListOptions['list']\n  return listOptions.map((option) =>\n    isTitledListValue(option) ? option : ({title: option, value: option} as TitledListValue)\n  )\n}\n\nexport function prepareForPreview(\n  rawValue: unknown,\n  type: SchemaType,\n  viewOptions: PrepareViewOptions = {}\n): PreviewValue & {_createdAt?: string; _updatedAt?: string} {\n  const hasCustomPrepare = typeof type.preview?.prepare === 'function'\n  const selection: Record<string, string> = type.preview?.select || {}\n  const targetKeys = Object.keys(selection)\n\n  const selectedValue = targetKeys.reduce<Record<string, unknown>>((acc, key) => {\n    // Find the field the value belongs to\n    const typeWithFields = 'fields' in type ? type : null\n    const targetFieldName = selection[key]\n    const valueField = typeWithFields?.fields?.find((f) => f.name === targetFieldName)\n    const listOptions = valueField && getListOptions(valueField.type)\n\n    // If the user has _not_ specified a `prepare()` function for the preview, and the\n    // field type has an `options.list`, we want to use the title of the selected item\n    // as the preview value. If, however, there _is_ a custom `prepare()`, we leave this\n    // mapping up to the user to perform should they want to. This is both to maintain\n    // backwards compatiblity, but also to allow using the raw value for prepare operations\n    if (!hasCustomPrepare && listOptions) {\n      // Find the selected option that matches the raw value\n      const selectedOption =\n        listOptions && listOptions.find((opt) => opt.value === get(rawValue, selection[key]))\n      acc[key] = selectedOption ? selectedOption.value : get(rawValue, selection[key])\n    } else {\n      acc[key] = get(rawValue, selection[key])\n    }\n\n    return acc\n  }, {})\n\n  const prepareResult = invokePrepare(type, selectedValue, viewOptions)\n  if (prepareResult.errors.length > 0) {\n    return withErrors(prepareResult, type, selectedValue)\n  }\n\n  const returnValueResult = validateReturnedPreview(invokePrepare(type, selectedValue, viewOptions))\n  return returnValueResult.errors.length > 0\n    ? withErrors(returnValueResult, type, selectedValue)\n    : {...pick(rawValue, PRESERVE_KEYS), ...prepareResult.returnValue}\n}\n","import {Observable, of as observableOf, from as observableFrom, isObservable} from 'rxjs'\nimport {map, mergeAll, combineAll, switchMap, scan} from 'rxjs/operators'\nimport {keysOf} from './keysOf'\n\nfunction setKey(source: Record<string, unknown>, key: any, value: unknown) {\n  return {\n    ...source,\n    [key]: value,\n  }\n}\n\ntype Props<K extends keyof any, T> = {\n  [P in K]: T | Observable<T>\n}\n\nexport function props<K extends keyof any, T>(options: {wait?: boolean} = {}) {\n  return (source: Observable<Props<K, T>>) => {\n    return new Observable<Props<K, T>>((observer) => source.subscribe(observer)).pipe(\n      switchMap((object) => {\n        const keyObservables = keysOf(object).map((key) => {\n          const value = object[key]\n          return isObservable(value)\n            ? observableFrom(value).pipe(map((val) => [key, val]))\n            : observableOf([key, value])\n        })\n\n        return options.wait\n          ? observableFrom(keyObservables).pipe(\n              combineAll(),\n              map((pairs) => pairs.reduce((acc, [key, value]) => setKey(acc, key, value), {}))\n            )\n          : observableFrom(keyObservables).pipe(\n              mergeAll(),\n              scan((acc, [key, value]) => setKey(acc, key, value), {})\n            )\n      })\n    )\n  }\n}\n","import {isReference} from '@sanity/types'\nimport {isString, uniq} from 'lodash'\nimport {Observable, of as observableOf} from 'rxjs'\nimport {switchMap} from 'rxjs/operators'\nimport {isRecord} from '../util'\nimport {FieldName, Path, Previewable, ApiConfig} from './types'\nimport {props} from './utils/props'\n\nfunction createEmpty(fields: FieldName[]) {\n  return fields.reduce((result: Record<string, undefined>, field) => {\n    result[field] = undefined\n    return result\n  }, {})\n}\n\nfunction resolveMissingHeads(value: Record<string, unknown>, paths: string[][]) {\n  return paths.filter((path) => !(path[0] in value))\n}\n\ntype ObserveFieldsFn = (\n  id: string,\n  fields: FieldName[],\n  apiConfig?: ApiConfig\n) => Observable<Record<string, unknown> | null>\n\nfunction observePaths(\n  value: Previewable,\n  paths: Path[],\n  observeFields: ObserveFieldsFn,\n  apiConfig?: ApiConfig\n): Observable<Record<string, unknown> | null> {\n  if (!value || typeof value !== 'object') {\n    // Reached a leaf. Return as is\n    return observableOf(value as null) // @todo\n  }\n\n  const id: string | undefined = isReference(value) ? value._ref : value._id\n\n  const currentValue: Record<string, unknown> = {...value, _id: id}\n\n  if (currentValue._type === 'reference') {\n    delete currentValue._type\n    delete currentValue._ref\n    delete currentValue._weak\n    delete currentValue._dataset\n    delete currentValue._projectId\n    delete currentValue._strengthenOnPublish\n  }\n\n  const pathsWithMissingHeads = resolveMissingHeads(currentValue, paths)\n\n  if (id && pathsWithMissingHeads.length > 0) {\n    // Reached a node that is either a document (with _id), or a reference (with _ref) that\n    // needs to be \"materialized\"\n\n    const nextHeads: string[] = uniq(pathsWithMissingHeads.map((path: string[]) => path[0]))\n\n    const dataset = isRecord(value) && isString(value._dataset) ? value._dataset : undefined\n    const projectId = isRecord(value) && isString(value._projectId) ? value._projectId : undefined\n\n    const refApiConfig =\n      // if it's a cross dataset reference we want to use it's `_projectId` + `_dataset`\n      // attributes as api config\n      dataset && projectId ? {projectId: projectId, dataset: dataset} : apiConfig\n\n    return observeFields(id, nextHeads, refApiConfig).pipe(\n      switchMap((snapshot) => {\n        if (snapshot === null) {\n          return observableOf(null)\n        }\n\n        return observePaths(\n          {\n            ...createEmpty(nextHeads),\n            ...(isReference(value) ? {...value, ...refApiConfig} : value),\n            ...snapshot,\n          } as Previewable,\n          paths,\n          observeFields,\n          refApiConfig\n        )\n      })\n    )\n  }\n\n  // We have all the fields needed already present on value\n  const leads: Record<string, string[][]> = {}\n  paths.forEach((path) => {\n    const [head, ...tail] = path\n    if (!leads[head]) {\n      leads[head] = []\n    }\n    leads[head].push(tail)\n  })\n\n  const next = Object.keys(leads).reduce((res: Record<string, unknown>, head) => {\n    const tails = leads[head].filter((tail) => tail.length > 0)\n    if (tails.length === 0) {\n      res[head] = isRecord(value) ? value[head] : undefined\n    } else {\n      res[head] = observePaths((value as any)[head], tails, observeFields, apiConfig)\n    }\n    return res\n  }, currentValue)\n\n  return observableOf(next).pipe(props({wait: true}))\n}\n\n// Normalizes path arguments so it supports both dot-paths and array paths, e.g.\n// - ['propA.propB', 'propA.propC']\n// - [['propA', 'propB'], ['propA', 'propC']]\nfunction normalizePaths(path: (FieldName | Path)[]): Path[] {\n  return path.map((segment: FieldName | Path) =>\n    typeof segment === 'string' ? segment.split('.') : segment\n  )\n}\n\nexport function createPathObserver(context: {observeFields: ObserveFieldsFn}) {\n  const {observeFields} = context\n\n  return {\n    observePaths(\n      value: Previewable,\n      paths: (FieldName | Path)[],\n      apiConfig?: ApiConfig\n    ): Observable<Record<string, unknown> | null> {\n      return observePaths(value, normalizePaths(paths), observeFields, apiConfig)\n    },\n  }\n}\n","import {Observable, of as observableOf} from 'rxjs'\nimport {map, switchMap} from 'rxjs/operators'\nimport {\n  isCrossDatasetReference,\n  isCrossDatasetReferenceSchemaType,\n  isReferenceSchemaType,\n} from '@sanity/types'\nimport {isPlainObject} from 'lodash'\nimport {invokePrepare, prepareForPreview} from './utils/prepareForPreview'\nimport type {ApiConfig, Path, PreparedSnapshot, PrepareViewOptions} from './types'\nimport {getPreviewPaths} from './utils/getPreviewPaths'\nimport {Previewable, PreviewableType} from './types'\n\nexport function isRecord(value: unknown): value is Record<string, unknown> {\n  return isPlainObject(value)\n}\n\nexport function isReference(value: unknown): value is {_ref: string} {\n  return isPlainObject(value)\n}\n\n// Takes a value and its type and prepares a snapshot for it that can be passed to a preview component\nexport function createPreviewObserver(context: {\n  observeDocumentTypeFromId: (id: string, apiConfig?: ApiConfig) => Observable<string | undefined>\n  observePaths: (value: Previewable, paths: Path[], apiConfig?: ApiConfig) => any\n}): (\n  value: Previewable,\n  type: PreviewableType,\n  viewOptions?: PrepareViewOptions,\n  apiConfig?: ApiConfig\n) => Observable<PreparedSnapshot> {\n  const {observeDocumentTypeFromId, observePaths} = context\n\n  return function observeForPreview(\n    value: Previewable,\n    type: PreviewableType,\n    viewOptions?: PrepareViewOptions,\n    apiConfig?: ApiConfig\n  ): Observable<PreparedSnapshot> {\n    if (isCrossDatasetReferenceSchemaType(type)) {\n      // if the value is of type crossDatasetReference, but has no _ref property, we cannot prepare any value for the preview\n      // and the most appropriate thing to do is to return `undefined` for snapshot\n      if (!isCrossDatasetReference(value)) {\n        return observableOf({snapshot: undefined})\n      }\n\n      const refApiConfig = {projectId: value._projectId, dataset: value._dataset}\n\n      return observeDocumentTypeFromId(value._ref, refApiConfig).pipe(\n        switchMap((typeName) => {\n          if (typeName) {\n            const refType = type.to.find((toType) => toType.type === typeName)\n            return observeForPreview(value, refType as any, {}, refApiConfig)\n          }\n          return observableOf({snapshot: undefined})\n        })\n      )\n    }\n    if (isReferenceSchemaType(type)) {\n      // if the value is of type reference, but has no _ref property, we cannot prepare any value for the preview\n      // and the most appropriate thing to do is to return `undefined` for snapshot\n      if (!isReference(value)) {\n        return observableOf({snapshot: undefined})\n      }\n      // Previewing references actually means getting the referenced value,\n      // and preview using the preview config of its type\n      // todo: We need a way of knowing the type of the referenced value by looking at the reference record alone\n      return observeDocumentTypeFromId(value._ref).pipe(\n        switchMap((typeName) => {\n          if (typeName) {\n            const refType = type.to.find((toType) => toType.name === typeName)\n            return observeForPreview(value, refType as any)\n          }\n          // todo: in case we can't read the document type, we can figure out the reason why e.g. whether it's because\n          //  the document doesn't exist or it's not readable due to lack of permission.\n          //  We can use the \"observeDocumentAvailability\" function\n          //  for this, but currently not sure if needed\n          return observableOf({snapshot: undefined})\n        })\n      )\n    }\n    const paths = getPreviewPaths(type.preview)\n    if (paths) {\n      return observePaths(value, paths, apiConfig).pipe(\n        map((snapshot) => ({\n          type: type,\n          snapshot: snapshot && prepareForPreview(snapshot, type as any, viewOptions),\n        }))\n      )\n    }\n\n    // Note: this case is typically rare (or non-existent) and occurs only if\n    // the SchemaType doesn't have a `select` field. The schema compiler\n    // provides a default `preview` implementation for `object`s, `image`s,\n    // `file`s, and `document`s\n    return observableOf({\n      type,\n      snapshot:\n        value && isRecord(value) ? invokePrepare(type, value, viewOptions).returnValue : null,\n    })\n  }\n}\n","import {Observable, Subscriber} from 'rxjs'\nimport {isNonNullable} from '../../util/isNonNullable'\n\ninterface QueueItem {\n  args: any[]\n  observer: Subscriber<any>\n  completed: boolean\n}\n\n// Takes an observable returning function and returns a debounced function that, when called\n// collects its passed arguments until wait time has passed without receiving new calls.\n// When wait period is over, calls the original function with the collected arguments\nexport function debounceCollect<Fn extends (...args: any[]) => Observable<any[]>>(\n  fn: Fn,\n  wait: number\n): Fn extends (collectedArgs: [...infer TArgs][]) => Observable<(infer TReturnValue)[]>\n  ? (...args: TArgs) => Observable<TReturnValue>\n  : never\nexport function debounceCollect(fn: any, wait: number) {\n  let timer: NodeJS.Timeout\n  let queue: Record<number | string, QueueItem | undefined> = {}\n  let idx = 0\n  return function debounced(...args: any[]) {\n    return new Observable((obs) => {\n      clearTimeout(timer)\n      timer = setTimeout(flush, wait)\n      const queueItem: QueueItem = {\n        args: args,\n        observer: obs,\n        completed: false,\n      }\n      const id = idx++\n      queue[id] = queueItem\n      return () => {\n        // console.log('completed', queueItem.args)\n        queueItem.completed = true\n      }\n    })\n  }\n\n  function flush() {\n    const currentlyFlushingQueue = queue\n    queue = {}\n\n    const queueItemIds = Object.keys(currentlyFlushingQueue) // Todo: use debug\n      // .map(id => {\n      //   if (currentlyFlushingQueue[id].completed) {\n      //     console.log('Dropped', currentlyFlushingQueue[id].args)\n      //   }\n      //   return id\n      // })\n      .filter((id) => {\n        const queueItem = currentlyFlushingQueue[id]\n\n        return queueItem && !queueItem.completed\n      })\n\n    if (queueItemIds.length === 0) {\n      // nothing to do\n      return\n    }\n    const collectedArgs = queueItemIds\n      .map((id) => {\n        const queueItem = currentlyFlushingQueue[id]\n\n        return queueItem && queueItem.args\n      })\n      .filter(isNonNullable)\n    fn(collectedArgs).subscribe({\n      next(results: any[]) {\n        results.forEach((result, i) => {\n          const queueItem = currentlyFlushingQueue[queueItemIds[i]]\n          if (queueItem && !queueItem.completed) {\n            queueItem.observer.next(results[i])\n          }\n        })\n      },\n      complete() {\n        queueItemIds.forEach((id) => {\n          const entry = currentlyFlushingQueue[id]\n          if (entry && !entry.completed) {\n            entry.observer.complete()\n          }\n        })\n      },\n      error(err: Error) {\n        queueItemIds.forEach((id) => {\n          const entry = currentlyFlushingQueue[id]\n          if (entry && !entry.completed) {\n            entry.observer.error(err)\n          }\n        })\n      },\n    })\n  }\n}\n","import {identity, sortBy, values} from 'lodash'\nimport {escapeField, fieldNeedsEscape} from '../../util/searchUtils'\nimport {FieldName, Id, Selection} from '../types'\nimport {INCLUDE_FIELDS_QUERY} from '../constants'\n\ntype CombinedSelection = {\n  ids: Id[]\n  fields: FieldName[]\n  map: number[]\n}\n\ntype Doc = {\n  _id: string\n}\n\ntype Result = Doc[]\n\nexport function combineSelections(selections: Selection[]): CombinedSelection[] {\n  return values(\n    selections.reduce((output: {[key: string]: any}, [id, fields], index) => {\n      const key = sortBy(fields.join(','), identity).join('.')\n      if (!output[key]) {\n        output[key] = {fields: fields, ids: [], map: []}\n      }\n      const idx = output[key].ids.length\n      output[key].ids[idx] = id\n      output[key].map[idx] = index\n      return output\n    }, {})\n  )\n}\n\nfunction stringifyId(id: string) {\n  return JSON.stringify(id)\n}\n\nconst maybeEscape = (fieldName: string) =>\n  fieldNeedsEscape(fieldName) ? `\"${fieldName}\": @${escapeField(fieldName)}` : fieldName\n\nfunction toSubQuery({ids, fields}: {ids: string[]; fields: string[]}) {\n  const allFields = [...INCLUDE_FIELDS_QUERY, ...fields]\n  return `*[_id in [${ids.map(stringifyId).join(',')}]][0...${ids.length}]{${allFields\n    .map(maybeEscape)\n    .join(',')}}`\n}\n\nexport function toQuery(combinedSelections: CombinedSelection[]): string {\n  return `[${combinedSelections.map(toSubQuery).join(',')}][0...${combinedSelections.length}]`\n}\n\nexport function reassemble(\n  queryResult: Result[],\n  combinedSelections: CombinedSelection[]\n): (Doc | null)[] {\n  return queryResult.reduce((reprojected: (Doc | null)[], subResult, index) => {\n    const map = combinedSelections[index].map\n    map.forEach((resultIdx, i) => {\n      const id = combinedSelections[index].ids[i]\n      const found = subResult.find((doc) => doc._id === id)\n      reprojected[resultIdx] = found || null\n    })\n    return reprojected\n  }, [])\n}\n","export function hasEqualFields(fields: string[]) {\n  return (object: Record<string, any> | null, otherObject: Record<string, any> | null) => {\n    if (object === otherObject) {\n      return true\n    }\n    if (!object || !otherObject) {\n      return false\n    }\n    if (typeof object !== 'object' || typeof otherObject !== 'object') {\n      return false\n    }\n    return fields.every((field) => object[field] === otherObject[field])\n  }\n}\n","const id = <T>(value: T): T => value\n\ntype ItemSelector<T> = (element: T) => any\n\n// Takes an array and checks if each item is unique,\n// optionally by specifying an itemSelector function that will be called with\n// each item, returning the value to compare for uniqueness\nexport function isUniqueBy<T>(array: Array<T>, itemSelector: ItemSelector<T> = id): boolean {\n  let prevItem\n  let currItem\n  for (let i = 0; i < array.length; i++) {\n    if (i === 0) {\n      prevItem = itemSelector(array[i])\n      continue\n    }\n    currItem = itemSelector(array[i])\n    if (prevItem !== currItem) {\n      return false\n    }\n    prevItem = currItem\n  }\n  return true\n}\n","import {\n  combineLatest,\n  concat,\n  defer,\n  EMPTY,\n  from,\n  fromEvent,\n  merge,\n  Observable,\n  of as observableOf,\n  timer,\n} from 'rxjs'\nimport {\n  distinctUntilChanged,\n  filter,\n  map,\n  mergeMap,\n  publishReplay,\n  refCount,\n  share,\n  startWith,\n  switchMap,\n  tap,\n} from 'rxjs/operators'\nimport {difference, flatten, memoize} from 'lodash'\nimport {SanityClient} from '@sanity/client'\nimport {CrossProjectTokenStore} from '../datastores/crossProjectToken'\nimport {debounceCollect} from './utils/debounceCollect'\nimport {combineSelections, reassemble, toQuery} from './utils/optimizeQuery'\nimport {ApiConfig, FieldName, Id, ObservePathsFn, Path, Selection} from './types'\nimport {INCLUDE_FIELDS} from './constants'\nimport {hasEqualFields} from './utils/hasEqualFields'\nimport {isUniqueBy} from './utils/isUniqueBy'\n\ninterface CrossProjectToken {\n  projectId: string\n  value: string\n}\n\ntype CachedFieldObserver = {\n  id: Id\n  fields: FieldName[]\n  changes$: Observable<any>\n}\n\ntype Cache = {\n  [id: string]: CachedFieldObserver[]\n}\n\nexport function create_preview_observeFields(context: {\n  crossProjectTokenStore: CrossProjectTokenStore\n  observePaths: ObservePathsFn\n  versionedClient: SanityClient\n}) {\n  const {crossProjectTokenStore, observePaths, versionedClient} = context\n\n  let _globalListener: any\n\n  const getGlobalEvents = () => {\n    if (!_globalListener) {\n      const allEvents$ = from(\n        versionedClient.listen(\n          '*[!(_id in path(\"_.**\"))]',\n          {},\n          {\n            events: ['welcome', 'mutation'],\n            includeResult: false,\n            visibility: 'query',\n            tag: 'preview.global',\n          }\n        )\n      ).pipe(share())\n\n      // This is a stream of welcome events from the server, each telling us that we have established listener connection\n      // We map these to snapshot fetch/sync. It is good to wait for the first welcome event before fetching any snapshots as, we may miss\n      // events that happens in the time period after initial fetch and before the listener is established.\n      const welcome$ = allEvents$.pipe(\n        filter((event: any) => event.type === 'welcome'),\n        publishReplay(1),\n        refCount()\n      )\n\n      // This will keep the listener active forever and in turn reduce the number of initial fetches\n      // as less 'welcome' events will be emitted.\n      // @todo: see if we can delay unsubscribing or connect with some globally defined shared listener\n      welcome$.subscribe()\n\n      const mutations$ = allEvents$.pipe(filter((event: any) => event.type === 'mutation'))\n\n      _globalListener = {\n        welcome$,\n        mutations$,\n      }\n    }\n\n    return _globalListener\n  }\n\n  function listen(id: Id) {\n    const globalEvents = getGlobalEvents()\n    return merge(\n      globalEvents.welcome$,\n      globalEvents.mutations$.pipe(filter((event: any) => event.documentId === id))\n    )\n  }\n\n  function fetchAllDocumentPathsWith(client: SanityClient, token?: CrossProjectToken) {\n    const headers = token ? {'sanity-project-tokens': `${token.projectId}=${token.value}`} : {}\n\n    return function fetchAllDocumentPath(selections: Selection[]) {\n      const combinedSelections = combineSelections(selections)\n      return client.observable\n        .fetch(toQuery(combinedSelections), {}, {tag: 'preview.document-paths', headers} as any)\n        .pipe(map((result: any) => reassemble(result, combinedSelections)))\n    }\n  }\n\n  const fetchDocumentPathsFast = debounceCollect(fetchAllDocumentPathsWith(versionedClient), 100)\n  const fetchDocumentPathsSlow = debounceCollect(fetchAllDocumentPathsWith(versionedClient), 1000)\n\n  function currentDatasetListenFields(id: Id, fields: Path[]) {\n    return listen(id).pipe(\n      switchMap((event: any) => {\n        if (event.type === 'welcome' || event.visibility === 'query') {\n          return fetchDocumentPathsFast(id, fields as any).pipe(\n            mergeMap((result) => {\n              return concat(\n                observableOf(result),\n                result === undefined // hack: if we get undefined as result here it can be because the document has\n                  ? // just been created and is not yet indexed. We therefore need to wait a bit\n                    // and then re-fetch.\n                    fetchDocumentPathsSlow(id, fields as any)\n                  : []\n              )\n            })\n          )\n        }\n        return fetchDocumentPathsSlow(id, fields as any)\n      })\n    )\n  }\n\n  // keep for debugging purposes for now\n  // function fetchDocumentPaths(id, selection) {\n  //   return client.observable.fetch(`*[_id==$id]{_id,_type,${selection.join(',')}}`, {id})\n  //     .map(result => result[0])\n  // }\n\n  const CACHE: Cache = {} // todo: use a LRU cache instead (e.g. hashlru or quick-lru)\n\n  const getBatchFetcherForDataset = memoize(\n    function getBatchFetcherForDataset(\n      apiConfig: ApiConfig,\n      token?: CrossProjectToken | undefined\n    ) {\n      const client = versionedClient.withConfig(apiConfig)\n      const fetchAll = fetchAllDocumentPathsWith(client, token)\n      return debounceCollect(fetchAll, 10)\n    },\n    (apiConfig) => apiConfig.dataset + apiConfig.projectId\n  )\n\n  const CROSS_DATASET_PREVIEW_POLL_INTERVAL = 10000\n  // We want to poll for changes in the other dataset, but only when window/tab is visible\n  // This sets up a shared stream that emits an event every `POLL_INTERVAL` milliseconds as long as the\n  // document is visible. It starts emitting immediately (if the page is visible)\n  const visiblePoll$ = fromEvent(document, 'visibilitychange').pipe(\n    startWith(0),\n    map(() => document.visibilityState === 'visible'),\n    switchMap((visible) => (visible ? timer(0, CROSS_DATASET_PREVIEW_POLL_INTERVAL) : EMPTY)),\n    share()\n  )\n\n  function crossDatasetListenFields(id: Id, fields: Path[], apiConfig: ApiConfig) {\n    const token$ = observePaths(\n      {\n        _type: 'reference',\n        _ref: crossProjectTokenStore.getTokenDocumentId({projectId: apiConfig.projectId}),\n      },\n      ['token']\n    ).pipe(map((document) => (document as any)?.token as string | undefined))\n    return combineLatest([token$, visiblePoll$.pipe(startWith(0))]).pipe(\n      switchMap(([token]) => {\n        const batchFetcher = getBatchFetcherForDataset(\n          apiConfig,\n          token\n            ? {\n                projectId: apiConfig.projectId,\n                value: token as any,\n              }\n            : undefined\n        )\n        return batchFetcher(id, fields as any)\n      })\n    )\n  }\n\n  function createCachedFieldObserver<T>(\n    id: any,\n    fields: any,\n    apiConfig: ApiConfig\n  ): CachedFieldObserver {\n    let latest: T | null = null\n    const changes$ = merge<T | null>(\n      defer(() => (latest === null ? EMPTY : observableOf(latest))),\n      (apiConfig\n        ? (crossDatasetListenFields(id, fields, apiConfig) as any)\n        : currentDatasetListenFields(id, fields)) as Observable<T>\n    ).pipe(\n      tap((v: T | null) => (latest = v)),\n      publishReplay(1),\n      refCount()\n    )\n\n    return {id, fields, changes$}\n  }\n\n  function cachedObserveFields(id: Id, fields: FieldName[], apiConfig?: ApiConfig) {\n    const cacheKey = apiConfig\n      ? `${apiConfig.projectId}:${apiConfig.dataset}:${id}`\n      : `$current$-${id}`\n\n    if (!(cacheKey in CACHE)) {\n      CACHE[cacheKey] = []\n    }\n\n    const existingObservers = CACHE[cacheKey]\n    const missingFields = difference(\n      fields,\n      flatten(existingObservers.map((cachedFieldObserver) => cachedFieldObserver.fields))\n    )\n\n    if (missingFields.length > 0) {\n      existingObservers.push(createCachedFieldObserver(id, fields, apiConfig as any))\n    }\n\n    const cachedFieldObservers = existingObservers\n      .filter((observer) => observer.fields.some((fieldName) => fields.includes(fieldName)))\n      .map((cached) => cached.changes$)\n\n    return combineLatest(cachedFieldObservers).pipe(\n      // in the event that a document gets deleted, the cached values will be updated to store `undefined`\n      // if this happens, we should not pick any fields from it, but rather just return null\n      map((snapshots) => snapshots.filter(Boolean)), // make sure all snapshots agree on same revision\n      filter((snapshots) => isUniqueBy(snapshots, (snapshot) => snapshot._rev)), // pass on value with the requested fields (or null if value is deleted)\n      map((snapshots) => (snapshots.length === 0 ? null : pickFrom(snapshots, fields))), // emit values only if changed\n      distinctUntilChanged(hasEqualFields(fields))\n    )\n  }\n\n  // API\n  return {observeFields: cachedObserveFields}\n\n  function pickFrom(objects: Record<string, any>[], fields: string[]) {\n    return [...INCLUDE_FIELDS, ...fields].reduce((result, fieldName) => {\n      const value = getFirstFieldValue(objects, fieldName)\n      if (value !== undefined) {\n        ;(result as any)[fieldName] = value\n      }\n      return result\n    }, {})\n  }\n\n  function getFirstFieldValue(objects: Record<string, any>[], fieldName: string) {\n    let value\n    objects.some((object) => {\n      if (fieldName in object) {\n        value = object[fieldName]\n        return true\n      }\n      return false\n    })\n    return value\n  }\n}\n","/* eslint-disable max-nested-callbacks */\n\nimport type {SanityClient} from '@sanity/client'\nimport {combineLatest, defer, from, Observable, of} from 'rxjs'\nimport {distinctUntilChanged, map, mergeMap, switchMap} from 'rxjs/operators'\nimport shallowEquals from 'shallow-equals'\nimport {flatten, keyBy} from 'lodash'\nimport {isRecord} from '../util/isRecord'\nimport {getDraftId, getPublishedId} from '../util/draftUtils'\nimport type {\n  AvailabilityResponse,\n  DocumentAvailability,\n  DraftsModelDocumentAvailability,\n  Previewable,\n} from './types'\nimport {debounceCollect} from './utils/debounceCollect'\nimport {\n  AVAILABILITY_NOT_FOUND,\n  AVAILABILITY_PERMISSION_DENIED,\n  AVAILABILITY_READABLE,\n} from './constants'\nimport {ObservePathsFn} from './types'\n\nconst MAX_DOCUMENT_ID_CHUNK_SIZE = 11164\n\n/**\n * Takes an array of document IDs and puts them into individual chunks.\n * Because document IDs can vary greatly in size, we want to chunk by the length of the\n * combined comma-separated ID set. We try to stay within 11164 bytes - this is about the\n * same length the Sanity client uses for max query size, and accounts for rather large\n * headers to be present - so this _should_ be safe.\n *\n * @param documentIds - Unique document IDs to chunk\n * @returns Array of document ID chunks\n */\nfunction chunkDocumentIds(documentIds: string[]): string[][] {\n  let chunk: string[] = []\n  let chunkSize = 0\n\n  const chunks: string[][] = []\n\n  for (const documentId of documentIds) {\n    // Reached the max length? start a new chunk\n    if (chunkSize + documentId.length + 1 >= MAX_DOCUMENT_ID_CHUNK_SIZE) {\n      chunks.push(chunk)\n      chunk = []\n      chunkSize = 0\n    }\n\n    chunkSize += documentId.length + 1 // +1 is to account for a comma between IDs\n    chunk.push(documentId)\n  }\n\n  if (!chunks.includes(chunk)) {\n    chunks.push(chunk)\n  }\n\n  return chunks\n}\n\nexport function create_preview_availability(\n  versionedClient: SanityClient,\n  observePaths: ObservePathsFn\n): {\n  observeDocumentPairAvailability(value: Previewable): Observable<DraftsModelDocumentAvailability>\n} {\n  /**\n   * Returns an observable of metadata for a given drafts model document\n   */\n  function observeDocumentPairAvailability(\n    value: Previewable\n  ): Observable<DraftsModelDocumentAvailability> {\n    const draftId = getDraftId('_id' in value ? value._id : value._ref)\n    const publishedId = getPublishedId('_id' in value ? value._id : value._ref)\n    return combineLatest([\n      observeDocumentAvailability({_type: 'reference', _ref: draftId}),\n      observeDocumentAvailability({_type: 'reference', _ref: publishedId}),\n    ]).pipe(\n      distinctUntilChanged(shallowEquals),\n      map(([draftReadability, publishedReadability]) => {\n        return {\n          draft: draftReadability,\n          published: publishedReadability,\n        }\n      })\n    )\n  }\n\n  /**\n   * Observable of metadata for the document with the given id\n   * If we can't read a document it is either because it's not readable or because it doesn't exist\n   *\n   * @internal\n   */\n  function observeDocumentAvailability(value: Previewable): Observable<DocumentAvailability> {\n    const id = '_id' in value ? value._id : value._ref\n\n    // check for existence\n    return observePaths(value, [['_rev']]).pipe(\n      map((res) => isRecord(res) && Boolean('_rev' in res && res?._rev)),\n      distinctUntilChanged(),\n      switchMap((hasRev) => {\n        return hasRev\n          ? // short circuit: if we can read the _rev field we know it both exists and is readable\n            of(AVAILABILITY_READABLE)\n          : // we can't read the _rev field for two possible reasons: 1) the document isn't readable or 2) the document doesn't exist\n            fetchDocumentReadability(id)\n      })\n    )\n  }\n\n  const fetchDocumentReadability = debounceCollect(function fetchDocumentReadability(\n    args: string[][]\n  ): Observable<DocumentAvailability[]> {\n    const uniqueIds = [...new Set(flatten(args))]\n    return from(chunkDocumentIds(uniqueIds)).pipe(\n      mergeMap(fetchDocumentReadabilityChunked, 10),\n      map((res) => args.map(([id]) => res[uniqueIds.indexOf(id)]))\n    )\n  },\n  1)\n\n  function fetchDocumentReadabilityChunked(ids: string[]): Observable<DocumentAvailability[]> {\n    return defer(() => {\n      const requestOptions = {\n        uri: versionedClient.getDataUrl('doc', ids.join(',')),\n        json: true,\n        query: {excludeContent: 'true'},\n        tag: 'preview.documents-availability',\n      }\n      return versionedClient.observable.request<AvailabilityResponse>(requestOptions).pipe(\n        map((response) => {\n          const omitted = keyBy(response.omitted || [], (entry) => entry.id)\n          return ids.map((id) => {\n            const omittedEntry = omitted[id]\n            if (!omittedEntry) {\n              // it's not omitted, so it exists and is readable\n              return AVAILABILITY_READABLE\n            }\n            if (omittedEntry.reason === 'existence') {\n              return AVAILABILITY_NOT_FOUND\n            }\n            if (omittedEntry.reason === 'permission') {\n              // it's not omitted, so it exists and is readable\n              return AVAILABILITY_PERMISSION_DENIED\n            }\n            throw new Error(`Unexpected reason for omission: \"${omittedEntry.reason}\"`)\n          })\n        })\n      )\n    })\n  }\n\n  return {observeDocumentPairAvailability}\n}\n","import {SanityClient} from '@sanity/client'\nimport {combineLatest, Observable, of} from 'rxjs'\nimport {map, switchMap} from 'rxjs/operators'\nimport {SanityDocument} from '@sanity/types'\nimport {getIdPair} from '../util/draftUtils'\nimport {isRecord} from '../util/isRecord'\nimport {DraftsModelDocument, ObservePathsFn, Path, Previewable} from './types'\nimport {create_preview_availability} from './availability'\n\nexport function create_preview_documentPair(\n  versionedClient: SanityClient,\n  observePaths: ObservePathsFn\n): {\n  observePathsDocumentPair: <T extends SanityDocument = SanityDocument>(\n    value: Previewable,\n    paths: Path[]\n  ) => Observable<DraftsModelDocument<T>>\n} {\n  const {observeDocumentPairAvailability} = create_preview_availability(\n    versionedClient,\n    observePaths\n  )\n\n  const ALWAYS_INCLUDED_SNAPSHOT_PATHS: Path[] = [['_updatedAt'], ['_createdAt'], ['_type']]\n\n  return {observePathsDocumentPair}\n\n  function observePathsDocumentPair<T extends SanityDocument = SanityDocument>(\n    value: Previewable,\n    paths: Path[]\n  ): Observable<DraftsModelDocument<T>> {\n    const {draftId, publishedId} = getIdPair('_id' in value ? value._id : value._ref)\n\n    return observeDocumentPairAvailability(value).pipe(\n      switchMap((availability) => {\n        if (!availability.draft.available && !availability.published.available) {\n          // short circuit, neither draft nor published is available so no point in trying to get a snapshot\n          return of({\n            id: publishedId,\n            type: null,\n            draft: {\n              availability: availability.draft,\n              snapshot: undefined,\n            },\n            published: {\n              availability: availability.published,\n              snapshot: undefined,\n            },\n          })\n        }\n\n        const snapshotPaths = [...paths, ...ALWAYS_INCLUDED_SNAPSHOT_PATHS]\n\n        return combineLatest([\n          observePaths({_type: 'reference', _ref: draftId}, snapshotPaths),\n          observePaths({_type: 'reference', _ref: publishedId}, snapshotPaths),\n        ]).pipe(\n          map(([draftSnapshot, publishedSnapshot]) => {\n            // note: assume type is always the same\n            const type =\n              (isRecord(draftSnapshot) && '_type' in draftSnapshot && draftSnapshot._type) ||\n              (isRecord(publishedSnapshot) &&\n                '_type' in publishedSnapshot &&\n                publishedSnapshot._type) ||\n              null\n\n            return {\n              id: publishedId,\n              type: typeof type === 'string' ? type : null,\n              draft: {\n                availability: availability.draft,\n                snapshot: draftSnapshot as T,\n              },\n              published: {\n                availability: availability.published,\n                snapshot: publishedSnapshot as T,\n              },\n            }\n          })\n        )\n      })\n    )\n  }\n}\n","import {Observable} from 'rxjs'\nimport {distinctUntilChanged, map} from 'rxjs/operators'\nimport {SanityClient} from '@sanity/client'\nimport {PrepareViewOptions, SanityDocument} from '@sanity/types'\nimport {isRecord} from '../util'\nimport {CrossProjectTokenStore} from '../datastores'\nimport {createPathObserver} from './createPathObserver'\nimport {createPreviewObserver} from './createPreviewObserver'\nimport {create_preview_observeFields} from './observeFields'\nimport {\n  ApiConfig,\n  DraftsModelDocument,\n  DraftsModelDocumentAvailability,\n  ObservePathsFn,\n  Path,\n  PreparedSnapshot,\n  Previewable,\n  PreviewableType,\n} from './types'\nimport {create_preview_availability} from './availability'\nimport {create_preview_documentPair} from './documentPair'\n\nexport type ObserveForPreviewFn = (\n  value: Previewable,\n  type: PreviewableType,\n  viewOptions?: PrepareViewOptions,\n  apiConfig?: ApiConfig\n) => Observable<PreparedSnapshot>\n\nexport interface DocumentPreviewStore {\n  observePaths: ObservePathsFn\n  observeForPreview: ObserveForPreviewFn\n  observeDocumentTypeFromId: (id: string, apiConfig?: ApiConfig) => Observable<string | undefined>\n\n  /**\n   * @beta\n   */\n  unstable_observeDocumentPairAvailability: (\n    id: Previewable\n  ) => Observable<DraftsModelDocumentAvailability>\n\n  unstable_observePathsDocumentPair: <T extends SanityDocument = SanityDocument>(\n    id: Previewable,\n    paths: Path[]\n  ) => Observable<DraftsModelDocument<T>>\n}\n\ninterface DocumentPreviewStoreOptions {\n  crossProjectTokenStore: CrossProjectTokenStore\n  client: SanityClient\n}\n\nexport function createDocumentPreviewStore({\n  crossProjectTokenStore,\n  client,\n}: DocumentPreviewStoreOptions): DocumentPreviewStore {\n  const versionedClient = client.withConfig({apiVersion: '1'})\n\n  // NOTE: this is workaroudn for circumventing a circular dependency between `observePaths` and\n  // `observeFields`.\n  // eslint-disable-next-line camelcase\n  const __proxy_observePaths: ObservePathsFn = (value, paths, apiConfig) => {\n    return observePaths(value, paths, apiConfig)\n  }\n\n  const {observeFields} = create_preview_observeFields({\n    crossProjectTokenStore,\n    observePaths: __proxy_observePaths,\n    versionedClient,\n  })\n\n  const {observePaths} = createPathObserver({observeFields})\n\n  function observeDocumentTypeFromId(\n    id: string,\n    apiConfig?: ApiConfig\n  ): Observable<string | undefined> {\n    return observePaths({_type: 'reference', _ref: id}, ['_type']).pipe(\n      map((res) => (isRecord(res) && typeof res._type === 'string' ? res._type : undefined)),\n      distinctUntilChanged()\n    )\n  }\n\n  // const {createPreviewObserver} = create_preview_createPreviewObserver(observeDocumentTypeFromId)\n  const observeForPreview = createPreviewObserver({observeDocumentTypeFromId, observePaths})\n  const {observeDocumentPairAvailability} = create_preview_availability(\n    versionedClient,\n    observePaths\n  )\n  const {observePathsDocumentPair} = create_preview_documentPair(versionedClient, observePaths)\n\n  // @todo: explain why the API is like this now, and that it should not be like this in the future!\n  return {\n    observePaths,\n    observeForPreview,\n    observeDocumentTypeFromId,\n\n    // eslint-disable-next-line camelcase\n    unstable_observeDocumentPairAvailability: observeDocumentPairAvailability,\n    unstable_observePathsDocumentPair: observePathsDocumentPair,\n  }\n}\n","import React, {forwardRef, useMemo} from 'react'\nimport {Inline, Label, ResponsivePaddingProps} from '@sanity/ui'\nimport {PreviewCard} from '../../../../components/PreviewCard'\nimport {useSchema} from '../../../../hooks'\nimport {DocumentPreviewPresence} from '../../../../presence'\nimport {IntentLink} from '../../../../router'\nimport {SanityPreview} from '../../../../preview'\nimport {useDocumentPresence} from '../../../../datastores'\nimport {getPublishedId} from '../../../../util'\n\ninterface SearchItemProps extends ResponsivePaddingProps {\n  onClick?: () => void\n  documentId: string\n  documentType: string\n}\n\nexport function SearchItem(props: SearchItemProps) {\n  const {documentId, documentType, onClick, ...restProps} = props\n  const documentPresence = useDocumentPresence(documentId)\n  const schema = useSchema()\n  const schemaType = schema.get(documentType)\n  const params = useMemo(\n    () => ({id: getPublishedId(documentId), type: documentType}),\n    [documentId, documentType]\n  )\n  const previewValue = useMemo(\n    () => ({_id: documentId, _type: documentType}),\n    [documentId, documentType]\n  )\n\n  const LinkComponent = useMemo(\n    () =>\n      // eslint-disable-next-line @typescript-eslint/no-shadow\n      forwardRef(function LinkComponent(linkProps, ref: React.ForwardedRef<HTMLAnchorElement>) {\n        return <IntentLink {...linkProps} intent=\"edit\" params={params} tabIndex={-1} ref={ref} />\n      }),\n    [params]\n  )\n\n  if (!schemaType) return null\n\n  return (\n    <PreviewCard data-as=\"a\" as={LinkComponent} onClick={onClick} {...restProps} radius={2}>\n      <SanityPreview\n        layout=\"default\"\n        schemaType={schemaType}\n        status={\n          <Inline space={3}>\n            {documentPresence && documentPresence.length > 0 && (\n              <DocumentPreviewPresence presence={documentPresence} />\n            )}\n\n            <Label size={0} muted>\n              {documentType || 'NONE'}\n            </Label>\n          </Inline>\n        }\n        value={previewValue}\n      />\n    </PreviewCard>\n  )\n}\n","import {Popover, PopoverProps} from '@sanity/ui'\nimport React, {forwardRef} from 'react'\nimport styled from 'styled-components'\nimport {useColorScheme} from '../../../colorScheme'\n\nconst ResultsPopover = styled(Popover)`\n  & > div {\n    min-height: 43px;\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n\n  &[data-popper-reference-hidden='true'] {\n    display: none;\n  }\n`\n\nexport const SearchPopoverContent = forwardRef(function SearchPopoverContent(\n  props: PopoverProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {scheme} = useColorScheme()\n\n  return (\n    <ResultsPopover\n      arrow={false}\n      constrainSize\n      matchReferenceWidth\n      placement=\"bottom\"\n      portal\n      radius={2}\n      ref={ref}\n      scheme={scheme}\n      {...props}\n    />\n  )\n})\n","import React, {useCallback, useMemo, useState} from 'react'\nimport {Text, Flex, Autocomplete, Box, PortalProvider} from '@sanity/ui'\nimport {SearchIcon} from '@sanity/icons'\nimport styled from 'styled-components'\nimport {useDocumentSearchResults} from '../../../../search'\nimport {getPublishedId} from '../../../../util'\nimport {SearchFullscreenContent} from './SearchFullscreenContent'\nimport {SearchItem} from './SearchItem'\nimport {SearchPopoverContent} from './SearchPopoverContent'\n\nconst StyledText = styled(Text)`\n  word-break: break-word;\n`\n\nconst filterOption = () => true\n\ninterface SearchFieldProps {\n  fullScreen: boolean\n  onSearchItemClick: () => void\n  portalElement: HTMLElement | null\n  setSearchInputElement: (el: HTMLInputElement | null) => void\n  relatedElements?: HTMLElement[]\n}\n\nexport function SearchField(props: SearchFieldProps) {\n  const {fullScreen, onSearchItemClick, portalElement, relatedElements, setSearchInputElement} =\n    props\n  const [query, setQuery] = useState<string | null>(null)\n\n  const results = useDocumentSearchResults({\n    includeDrafts: true,\n    query: query || '',\n  })\n\n  const handleClickItem = useCallback(() => {\n    if (fullScreen && onSearchItemClick) {\n      onSearchItemClick()\n    }\n  }, [fullScreen, onSearchItemClick])\n\n  const renderOption = useCallback(\n    (option) => {\n      const {data} = option.payload\n      const documentId = data.hit._id\n      const documentType = data.hit._type\n\n      return (\n        <SearchItem\n          key={documentId}\n          onClick={handleClickItem}\n          padding={2}\n          documentId={documentId}\n          documentType={documentType}\n        />\n      )\n    },\n    [handleClickItem]\n  )\n\n  const renderPopoverFullscreen = useCallback(\n    (popoverProps, ref) => {\n      if (!popoverProps.hidden && results.error) {\n        return (\n          <SearchFullscreenContent tone=\"critical\">\n            <Flex\n              align=\"center\"\n              flex={1}\n              height=\"fill\"\n              justify=\"center\"\n              padding={4}\n              sizing=\"border\"\n            >\n              <StyledText align=\"center\" muted>\n                {results?.error?.message || 'Something went wrong while searching'}\n              </StyledText>\n            </Flex>\n          </SearchFullscreenContent>\n        )\n      }\n\n      if (!popoverProps.hidden && query && !results.loading && results.value.length === 0) {\n        return (\n          <SearchFullscreenContent>\n            <Flex\n              align=\"center\"\n              flex={1}\n              height=\"fill\"\n              justify=\"center\"\n              padding={4}\n              sizing=\"border\"\n            >\n              <StyledText align=\"center\" muted>\n                No results for <strong>‘{query}’</strong>\n              </StyledText>\n            </Flex>\n          </SearchFullscreenContent>\n        )\n      }\n\n      if (!popoverProps.hidden && results.value.length > 0) {\n        return (\n          <SearchFullscreenContent hidden={popoverProps.hidden} ref={ref}>\n            {popoverProps.content}\n          </SearchFullscreenContent>\n        )\n      }\n\n      return undefined\n    },\n    [query, results]\n  )\n\n  const renderPopover = useCallback(\n    (popoverProps, ref) => {\n      if (!popoverProps.hidden && results.error) {\n        return (\n          <SearchPopoverContent\n            content={\n              <Box padding={4}>\n                <Flex align=\"center\" height=\"fill\" justify=\"center\">\n                  <StyledText align=\"center\" muted>\n                    {results?.error?.message || 'Something went wrong while searching'}\n                  </StyledText>\n                </Flex>\n              </Box>\n            }\n            open={!popoverProps.hidden}\n            ref={ref}\n            referenceElement={popoverProps.inputElement}\n          />\n        )\n      }\n\n      if (!popoverProps.hidden && query && !results.loading && results.value.length === 0) {\n        return (\n          <SearchPopoverContent\n            content={\n              <Box padding={4}>\n                <Flex align=\"center\" height=\"fill\" justify=\"center\">\n                  <StyledText align=\"center\" muted>\n                    No results for <strong>“{query}”</strong>\n                  </StyledText>\n                </Flex>\n              </Box>\n            }\n            open={!popoverProps.hidden}\n            ref={ref}\n            referenceElement={popoverProps.inputElement}\n          />\n        )\n      }\n\n      if (!popoverProps.hidden && results.value.length > 0) {\n        return (\n          <SearchPopoverContent\n            content={popoverProps.content}\n            open={!popoverProps.hidden}\n            ref={ref}\n            referenceElement={popoverProps.inputElement}\n          />\n        )\n      }\n\n      return undefined\n    },\n    [query, results]\n  )\n\n  const autoComplete = useMemo(\n    () => (\n      <Autocomplete\n        filterOption={filterOption}\n        icon={SearchIcon}\n        id=\"studio-search\"\n        key=\"studio-search\"\n        listBox={{padding: fullScreen ? 2 : 1}}\n        loading={results.loading}\n        onQueryChange={setQuery}\n        options={results.value.map((hit) => {\n          return {\n            value: hit.hit._id,\n            payload: {\n              data: hit,\n            },\n          }\n        })}\n        placeholder=\"Search\"\n        radius={2}\n        ref={setSearchInputElement}\n        relatedElements={relatedElements}\n        renderOption={renderOption}\n        renderPopover={fullScreen ? renderPopoverFullscreen : renderPopover}\n      />\n    ),\n    [\n      fullScreen,\n      relatedElements,\n      renderOption,\n      renderPopover,\n      renderPopoverFullscreen,\n      results.loading,\n      results.value,\n      setSearchInputElement,\n    ]\n  )\n\n  return <PortalProvider element={fullScreen ? portalElement : null}>{autoComplete}</PortalProvider>\n}\n","import {css} from 'styled-components'\n\nexport const listStyles = css`\n  --margin-top: ${({theme}) => theme.sanity.space[1]}px;\n\n  &:not([data-list-type='number']) {\n    counter-reset: section;\n  }\n\n  &[data-list-type='bullet'] {\n    --bullet-marker: '●';\n    margin-top: var(--margin-top);\n\n    [data-list-type='bullet'] {\n      --bullet-marker: '○';\n      margin-top: var(--margin-top);\n\n      [data-list-type='bullet'] {\n        --bullet-marker: '■';\n        margin-top: var(--margin-top);\n\n        [data-list-type='bullet'] {\n          --bullet-marker: '●';\n          margin-top: var(--margin-top);\n\n          [data-list-type='bullet'] {\n            --bullet-marker: '○';\n            margin-top: var(--margin-top);\n\n            [data-list-type='bullet'] {\n              --bullet-marker: '■';\n              margin-top: var(--margin-top);\n\n              [data-list-type='bullet'] {\n                --bullet-marker: '●';\n                margin-top: var(--margin-top);\n\n                [data-list-type='bullet'] {\n                  --bullet-marker: '○';\n                  margin-top: var(--margin-top);\n\n                  [data-list-type='bullet'] {\n                    --bullet-marker: '■';\n                    margin-top: var(--margin-top);\n\n                    [data-list-type='bullet'] {\n                      --bullet-marker: '●';\n                      margin-top: var(--margin-top);\n\n                      [data-list-type='bullet'] {\n                        --bullet-marker: '○';\n                        margin-top: var(--margin-top);\n\n                        [data-list-type='bullet'] {\n                          --bullet-marker: '■';\n                          margin-top: var(--margin-top);\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  &[data-list-type='number'] {\n    --bullet-marker: counter(section, number) '. ';\n    counter-reset: section;\n    margin-top: var(--margin-top);\n\n    [data-list-type='number'] {\n      --bullet-marker: counter(section, lower-alpha) '. ';\n      counter-reset: section;\n      margin-top: var(--margin-top);\n\n      [data-list-type='number'] {\n        --bullet-marker: counter(section, lower-roman) '. ';\n        counter-reset: section;\n        margin-top: var(--margin-top);\n\n        [data-list-type='number'] {\n          --bullet-marker: counter(section, number) '. ';\n          counter-reset: section;\n          margin-top: var(--margin-top);\n\n          [data-list-type='number'] {\n            --bullet-marker: counter(section, lower-alpha) '. ';\n            counter-reset: section;\n            margin-top: var(--margin-top);\n\n            [data-list-type='number'] {\n              --bullet-marker: counter(section, lower-roman) '. ';\n              counter-reset: section;\n              margin-top: var(--margin-top);\n\n              [data-list-type='number'] {\n                --bullet-marker: counter(section, number) '. ';\n                counter-reset: section;\n                margin-top: var(--margin-top);\n\n                [data-list-type='number'] {\n                  --bullet-marker: counter(section, lower-alpha) '. ';\n                  counter-reset: section;\n                  margin-top: var(--margin-top);\n\n                  [data-list-type='number'] {\n                    --bullet-marker: counter(section, lower-roman) '. ';\n                    counter-reset: section;\n                    margin-top: var(--margin-top);\n\n                    [data-list-type='number'] {\n                      --bullet-marker: counter(section, number) '. ';\n                      counter-reset: section;\n                      margin-top: var(--margin-top);\n\n                      [data-list-type='number'] {\n                        --bullet-marker: counter(section, lower-alpha) '. ';\n                        counter-reset: section;\n                        margin-top: var(--margin-top);\n\n                        [data-list-type='number'] {\n                          --bullet-marker: counter(section, lower-roman) '. ';\n                          counter-reset: section;\n                          margin-top: var(--margin-top);\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`\n","import {Box, Card} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {listStyles} from './listStyles'\n\nexport const SpaceBox = styled(Box)`\n  ${listStyles};\n`\n\nexport const RootBox = styled(Box)`\n  ${SpaceBox}:first-child {\n    &:not([data-list-type='number'], [data-list-type='bullet']) {\n      margin-top: 0;\n    }\n  }\n\n  ${SpaceBox}:last-child {\n    margin-bottom: 0;\n  }\n`\n\nexport const ListBoxOuter = styled(Box)`\n  line-height: 1;\n`\n\nexport const ListBox = styled(Box)(() => {\n  return css`\n    &:not([hidden]) {\n      position: relative;\n      padding-left: 2rem;\n      display: inline-flex;\n    }\n\n    & > [data-list-prefix] {\n      position: absolute;\n      width: 3rem;\n      left: -2rem;\n      text-align: right;\n\n      &[data-list-prefix='bullet'] {\n        top: -0.1875em;\n\n        & > span:before {\n          content: var(--bullet-marker);\n          font-size: 0.46666em;\n        }\n      }\n\n      &[data-list-prefix='number'] {\n        counter-increment: section;\n\n        & > span:before {\n          font-size: 1em;\n          content: var(--bullet-marker);\n        }\n      }\n    }\n  `\n})\n\nexport const ImageCard = styled(Card)<{$aspectRatio: number; $lqip?: string}>`\n  position: relative;\n  padding-bottom: ${({$aspectRatio}) => $aspectRatio}%;\n  background-image: ${({$lqip}) => `url(${$lqip})`};\n  background-size: cover;\n\n  img {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n`\n","import React from 'react'\nimport {PortableText, PortableTextComponents} from '@portabletext/react'\nimport {Box, Card, Code, Heading, Stack, Text} from '@sanity/ui'\nimport urlBuilder from '@sanity/image-url'\nimport {getProject} from '@sanity/asset-utils'\nimport {StudioBlockContent, MaterializedImage, CodeBlock} from '../../../../../module-status'\nimport {ImageCard, ListBox, ListBoxOuter, RootBox, SpaceBox} from './PortableTextContent.styles'\n\ninterface PortableTextContentProps {\n  value: StudioBlockContent[]\n}\n\nfunction Image({value}: {value: MaterializedImage}) {\n  if (!value?.asset) {\n    return null\n  }\n\n  const project = getProject(value.asset)\n  const url = urlBuilder(project).image(value).fit('max').auto('format').url()\n\n  const {asset, alt, caption} = value\n  const {dimensions, lqip} = asset?.metadata || {}\n  const aspectRatio = (dimensions.height / dimensions.width) * 100\n\n  return (\n    <SpaceBox marginY={4}>\n      <Stack space={3} as=\"figure\">\n        <ImageCard radius={1} shadow={1} overflow=\"hidden\" $aspectRatio={aspectRatio} $lqip={lqip}>\n          <img src={url} alt={alt || caption} referrerPolicy=\"strict-origin-when-cross-origin\" />\n        </ImageCard>\n        {caption && (\n          <Text align=\"center\" as=\"figcaption\" muted size={1}>\n            {value.caption}\n          </Text>\n        )}\n      </Stack>\n    </SpaceBox>\n  )\n}\n\nconst components: PortableTextComponents = {\n  types: {\n    image: ({value}) => <Image value={value} />,\n    code: ({value}: {value: CodeBlock}) => (\n      <SpaceBox marginY={4}>\n        <Card padding={3} tone=\"transparent\" radius={1} overflow=\"auto\">\n          <Code size={1} language={value?.language}>\n            {value?.code}\n          </Code>\n        </Card>\n      </SpaceBox>\n    ),\n  },\n  block: {\n    h1: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={5}>{children}</Heading>\n      </SpaceBox>\n    ),\n    h2: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={4}>{children}</Heading>\n      </SpaceBox>\n    ),\n    h3: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={3}>{children}</Heading>\n      </SpaceBox>\n    ),\n    h4: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={2}>{children}</Heading>\n      </SpaceBox>\n    ),\n    h5: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={1}>{children}</Heading>\n      </SpaceBox>\n    ),\n    h6: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={0}>{children}</Heading>\n      </SpaceBox>\n    ),\n    normal: ({children}) => (\n      <SpaceBox marginY={4}>\n        <Text as=\"p\" muted size={1}>\n          {children}\n        </Text>\n      </SpaceBox>\n    ),\n  },\n  list: {\n    bullet: ({children}) => (\n      <SpaceBox data-list-type=\"bullet\" marginBottom={4}>\n        <Box as=\"ul\">{children}</Box>\n      </SpaceBox>\n    ),\n    number: ({children}) => (\n      <SpaceBox data-list-type=\"number\" marginBottom={4}>\n        <Box as=\"ol\">{children}</Box>\n      </SpaceBox>\n    ),\n  },\n  listItem: {\n    bullet: ({children}) => (\n      <ListBoxOuter marginBottom={1} forwardedAs=\"li\">\n        <ListBox>\n          <Text muted size={1} data-list-prefix=\"bullet\" />\n          <Text muted size={1}>\n            {children}\n          </Text>\n        </ListBox>\n      </ListBoxOuter>\n    ),\n    number: ({children}) => (\n      <ListBoxOuter marginBottom={1} forwardedAs=\"li\">\n        <ListBox>\n          <Text muted data-list-prefix=\"number\" size={1} />\n          <Text muted size={1}>\n            {children}\n          </Text>\n        </ListBox>\n      </ListBoxOuter>\n    ),\n  },\n}\n\nexport function PortableTextContent(props: PortableTextContentProps) {\n  const {value} = props\n\n  return (\n    <RootBox>\n      <PortableText value={value} components={components} />\n    </RootBox>\n  )\n}\n","import {Card, Stack, Label, Heading} from '@sanity/ui'\nimport React from 'react'\nimport type {ChangelogItem as ChangeItem} from '../../../../module-status'\nimport {PortableTextContent} from './portableTextContent'\n\nconst LABELS: Record<'bugfix' | 'feature', string> = {\n  bugfix: 'Bugfixes',\n  feature: 'Feature',\n}\n\nexport function ChangelogItem(props: ChangeItem) {\n  const {changeType, description, title} = props\n  const label = LABELS[changeType]\n\n  return (\n    <Card padding={4} shadow={1} radius={2}>\n      <Stack space={title ? 4 : 3}>\n        {label && <Label size={1}>{label}</Label>}\n\n        <Stack space={3}>\n          {title && <Heading size={1}>{title}</Heading>}\n\n          {description && <PortableTextContent value={description} />}\n        </Stack>\n      </Stack>\n    </Card>\n  )\n}\n","import {Stack, Flex, Heading, Badge, Text} from '@sanity/ui'\nimport React from 'react'\nimport type {ChangelogItem as ChangeItem} from '../../../../module-status'\nimport {ChangelogItem} from './ChangelogItem'\n\ninterface ChangelogListProps {\n  changeItems: ChangeItem[]\n  isLatest: boolean\n  version: string\n}\n\nexport function ChangelogList(props: ChangelogListProps) {\n  const {changeItems, isLatest, version} = props\n\n  const features = changeItems.filter((c) => c.changeType === 'feature')\n  const bugfixes = changeItems.filter((c) => c.changeType === 'bugfix')\n  const bugFixesDescription = bugfixes.map(({description}) => description).flat()\n\n  return (\n    <Stack space={4}>\n      <Flex align=\"center\" gap={2}>\n        <Heading size={1}>v{version}</Heading>\n\n        {isLatest && <Badge tone=\"positive\">Latest</Badge>}\n      </Flex>\n\n      <Stack space={3}>\n        {features?.map((change) => (\n          <ChangelogItem\n            key={change.title}\n            changeType={change.changeType}\n            description={change?.description}\n            title={change.title}\n          />\n        ))}\n\n        {bugFixesDescription.length > 0 && (\n          <ChangelogItem changeType=\"bugfix\" description={bugFixesDescription} />\n        )}\n      </Stack>\n\n      <Flex justify=\"flex-end\">\n        <Text size={1}>\n          <a\n            href=\"https://github.com/sanity-io/sanity/releases\"\n            rel=\"noreferrer noopener\"\n            target=\"_blank\"\n          >\n            See full changelog on GitHub\n          </a>\n        </Text>\n      </Flex>\n    </Stack>\n  )\n}\n","import {Box, Card, Dialog, DialogProps, MenuDivider, Stack, Text} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport type {Changelog} from '../../../../module-status'\nimport {ChangelogList} from './ChangelogList'\n\nconst StickyBox = styled(Box)`\n  position: sticky;\n  top: 0;\n  z-index: 1;\n`\n\nconst EMPTY_ARRAY: [] = []\n\ninterface ChangelogDialogProps {\n  changelog: Changelog\n  currentVersion?: string\n  dialogProps?: Omit<DialogProps, 'id'>\n  latestVersion?: string\n}\n\nexport function ChangelogDialog(props: ChangelogDialogProps) {\n  const {changelog, currentVersion, dialogProps, latestVersion} = props\n\n  const changelogWithChangeItems = (changelog || EMPTY_ARRAY).filter(\n    (c) => (c?.changeItems || EMPTY_ARRAY)?.length > 0\n  )\n  const hasChangelog = changelogWithChangeItems.length > 0\n\n  return (\n    <Dialog header=\"Upgrade the Sanity Studio\" width={1} {...dialogProps} id=\"changelog-dialog\">\n      <>\n        <StickyBox>\n          <Card padding={4} borderBottom={hasChangelog}>\n            <Stack space={4}>\n              <Stack space={3}>\n                {hasChangelog && <Text weight=\"semibold\">Changelog</Text>}\n\n                {currentVersion && latestVersion && (\n                  <Text muted size={1}>\n                    Your Sanity Studio is version <code>{currentVersion}</code>. The latest version\n                    is <code>{latestVersion}</code>.\n                  </Text>\n                )}\n              </Stack>\n            </Stack>\n          </Card>\n        </StickyBox>\n\n        {hasChangelog && (\n          <Stack space={5} paddingY={4}>\n            {changelogWithChangeItems?.map((log, index) => {\n              const {changeItems, version} = log\n              const showDivider = index < changelogWithChangeItems.length - 1\n              const isLatest = version === latestVersion\n\n              return (\n                <React.Fragment key={version}>\n                  <Box paddingX={4}>\n                    <ChangelogList\n                      changeItems={changeItems || EMPTY_ARRAY}\n                      version={version}\n                      isLatest={isLatest}\n                    />\n                  </Box>\n\n                  {showDivider && <MenuDivider />}\n                </React.Fragment>\n              )\n            })}\n          </Stack>\n        )}\n      </>\n    </Dialog>\n  )\n}\n","import type {Observable} from 'rxjs'\nimport {map, shareReplay} from 'rxjs/operators'\nimport {SANITY_VERSION} from '../version'\nimport {CheckModuleVersionsOptions, VersionsResponse, ModuleStatusResponse} from './types'\n\nconst sanityModuleVersions = {sanity: SANITY_VERSION}\n\n// Used to keep track of lookups to prevent multiple requests\nconst CACHED_LOOKUPS = new Map<string, Observable<ModuleStatusResponse>>()\n\n/**\n * Retrieve whether or not the installed (or passed) `@sanity`-modules are up\n * to date and/or supported, and if they are outdated; which versions are is\n * the latest available on npm vs which ones are installed locally.\n *\n * @param options - Options to use for resolving module status\n * @internal Not a stable API yet\n */\nexport function checkModuleStatus(\n  options: CheckModuleVersionsOptions\n): Observable<ModuleStatusResponse> {\n  const {moduleVersions = getInstalledModules(), client} = options\n  const query = buildQueryString(moduleVersions)\n  const hash = hashQuery(query.m)\n\n  let request$ = CACHED_LOOKUPS.get(hash)\n  if (request$) {\n    return request$\n  }\n\n  request$ = client.observable\n    .request<VersionsResponse>({\n      url: '/versions',\n      query,\n      json: true,\n      tag: 'module.version-check',\n    })\n    .pipe(\n      map((result) => ({...result, installed: moduleVersions})),\n      shareReplay(1)\n    )\n\n  CACHED_LOOKUPS.set(hash, request$)\n  return request$\n}\n\n/**\n * Returns the currently installed version of the given module\n *\n * @param moduleName - Name of module to get version number for\n * @internal Not a stable API yet\n */\nexport function getInstalledModuleVersion(moduleName: string): string | undefined {\n  const versions = getInstalledModules()\n  return versions[moduleName]\n}\n\n/**\n * Builds to: `{m: ['sanity@3.0.2', '@sanity/vision@3.14.3']}`\n * Serializes to: `?m=sanity@3.0.2&m=@sanity/vision@3.14.3`\n */\nfunction buildQueryString(versions: Record<string, string>): {m: string[]} {\n  return {\n    m: Object.keys(versions)\n      .sort()\n      .filter((pkg) => versions[pkg])\n      .map((pkg) => `${pkg}@${versions[pkg]}`),\n  }\n}\n\n/**\n * Returns an object of installed `@sanity`-modules and their installed version numbers\n */\nfunction getInstalledModules(): Record<string, string> {\n  // Ugly hack, but this allows for testing the version checker even when running\n  // the latest module versions, by pretending we're using an outdated module\n  const fakeOutdatedModule = false\n  if (fakeOutdatedModule) {\n    return {...sanityModuleVersions, '@sanity/vision': '1.118.0'}\n  }\n\n  return sanityModuleVersions\n}\n\n/**\n * Reduce the module array string by stripping sanity-prefixes and joining them together\n */\nfunction hashQuery(items: string[]): string {\n  return items.join(',').replace(/@?sanity[/-]/g, '')\n}\n","import {useMemo} from 'react'\nimport {LoadableState, useLoadable} from '../util/useLoadable'\nimport {checkModuleStatus} from './moduleStatus'\nimport {CheckModuleVersionsOptions, ModuleStatusResponse} from './types'\n\n/**\n * Retrieve whether or not the installed (or passed) `@sanity`-modules are up\n * to date and/or supported, and if they are outdated; which versions are is\n * the latest available on npm vs which ones are installed locally.\n *\n * @param options Options to use for resolving module status\n * @internal Not a stable API yet\n */\nexport function useModuleStatus(\n  options: CheckModuleVersionsOptions\n): LoadableState<ModuleStatusResponse | undefined> {\n  const moduleStatus$ = useMemo(() => checkModuleStatus(options), [options])\n\n  return useLoadable(moduleStatus$)\n}\n","import {ToggleArrowRightIcon} from '@sanity/icons'\nimport {Card, Stack, Button, Text, Code, Box} from '@sanity/ui'\nimport React, {useCallback, useState} from 'react'\nimport styled from 'styled-components'\n\nconst COMMANDS = ['npm i @sanity/cli -g', 'sanity upgrade']\n\nconst Icon = styled(ToggleArrowRightIcon)`\n  &[data-rotate='true'] {\n    transform: rotate(90deg);\n  }\n`\n\ninterface ChangelogAccordionProps {\n  defaultOpen: boolean\n}\n\nexport function ChangelogAccordion(props: ChangelogAccordionProps) {\n  const {defaultOpen} = props\n  const [open, setOpen] = useState<boolean>(defaultOpen)\n\n  const handleClick = useCallback(() => setOpen((v) => !v), [])\n\n  return (\n    <Card overflow=\"hidden\">\n      <Stack>\n        <Button\n          aria-controls=\"upgrade-commands\"\n          icon={<Icon data-rotate={open} />}\n          justify=\"flex-start\"\n          mode=\"bleed\"\n          onClick={handleClick}\n          padding={4}\n          radius={0}\n          space={2}\n          text=\"How to upgrade\"\n        />\n      </Stack>\n\n      <Card\n        aria-hidden={!open}\n        hidden={!open}\n        id=\"upgrade-commands\"\n        overflow=\"auto\"\n        paddingX={4}\n        paddingY={2}\n        role=\"region\"\n        tone=\"inherit\"\n      >\n        <Stack space={2}>\n          <Card tone=\"transparent\" padding={3} radius={2}>\n            <Stack space={3}>\n              <Code language=\"bash\" size={1}>\n                {[`# Run these commands to upgrade`, ...COMMANDS].join('\\n')}\n              </Code>\n            </Stack>\n          </Card>\n\n          <Box paddingX={2} paddingY={3}>\n            <Text size={1} muted>\n              If you have problems upgrading, please get in touch with us in the{' '}\n              <a href=\"https://slack.sanity.io/\" rel=\"noopener noreferrer\" target=\"_blank\">\n                Sanity Community\n              </a>\n              .\n            </Text>\n          </Box>\n        </Stack>\n      </Card>\n    </Card>\n  )\n}\n","import React, {useCallback, useMemo, useState} from 'react'\nimport {PackageIcon} from '@sanity/icons'\nimport {DialogProps} from '@sanity/ui'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../studioClient'\nimport {useModuleStatus} from '../../../../module-status'\nimport {StatusButton} from '../../StatusButton'\nimport {isDev} from '../../../../environment'\nimport {useClient} from '../../../../hooks'\nimport {useColorScheme} from '../../../colorScheme'\nimport {ChangelogDialog} from './ChangelogDialog'\nimport {ChangelogAccordion} from './ChangelogAccordion'\n\nconst EMPTY_ARRAY: [] = []\n\nexport function ChangelogButton() {\n  const [open, setOpen] = useState<boolean>(false)\n  const [buttonElement, setButtonElement] = useState<HTMLButtonElement | null>(null)\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const versionedClient = useMemo(\n    () =>\n      client.withConfig({\n        apiVersion: '1',\n      }),\n    [client]\n  )\n\n  // get root scheme\n  const {scheme} = useColorScheme()\n\n  const {value, error, isLoading} = useModuleStatus({\n    client: versionedClient,\n  })\n\n  const {changelog, currentVersion, latestVersion, isUpToDate} = value || {}\n\n  const handleOpen = useCallback(() => setOpen(true), [])\n\n  const handleClose = useCallback(() => {\n    setOpen(false)\n\n    if (buttonElement) {\n      buttonElement.focus()\n    }\n  }, [buttonElement])\n\n  const dialogProps: Omit<DialogProps, 'id'> = useMemo(\n    () => ({\n      footer: <ChangelogAccordion defaultOpen={isDev} />,\n      onClickOutside: handleClose,\n      onClose: handleClose,\n      // force root scheme here to \"break out\" of the navbar's dark scheme\n      scheme,\n    }),\n    [handleClose, scheme]\n  )\n\n  if (error || isLoading || isUpToDate) {\n    return null\n  }\n\n  return (\n    <>\n      <StatusButton\n        active\n        icon={PackageIcon}\n        mode=\"bleed\"\n        onClick={handleOpen}\n        ref={setButtonElement}\n        selected={open}\n        statusTone=\"primary\"\n      />\n\n      {open && (\n        <ChangelogDialog\n          changelog={changelog || EMPTY_ARRAY}\n          currentVersion={currentVersion}\n          dialogProps={dialogProps}\n          latestVersion={latestVersion}\n        />\n      )}\n    </>\n  )\n}\n","import React, {useCallback, useState} from 'react'\nimport {Box, Button, Dialog, Heading, Stack, Text, Tooltip} from '@sanity/ui'\nimport {WarningOutlineIcon} from '@sanity/icons'\nimport {useId} from '@reach/auto-id'\nimport {useSchema} from '../../../../hooks'\nimport {SchemaProblemGroups} from '../../../screens/schemaErrors/SchemaProblemGroups'\nimport {useColorScheme} from '../../../colorScheme'\n\nexport function ConfigIssuesButton() {\n  const schema = useSchema()\n  const groupsWithWarnings =\n    schema._validation?.filter((group) =>\n      group.problems.some((problem) => problem.severity === 'warning')\n    ) || []\n\n  // get root scheme\n  const {scheme} = useColorScheme()\n\n  const dialogId = useId() || 'config-issues-dialog'\n\n  const [isDialogOpen, setDialogOpen] = useState(false)\n  const [buttonElement, setButtonElement] = useState<HTMLButtonElement | null>(null)\n  const handleOpen = useCallback(() => setDialogOpen(true), [])\n\n  const handleClose = useCallback(() => {\n    setDialogOpen(false)\n\n    if (buttonElement) {\n      buttonElement.focus()\n    }\n  }, [buttonElement])\n\n  if (groupsWithWarnings.length === 0) {\n    return null\n  }\n\n  return (\n    <>\n      <Tooltip\n        content={\n          <Box padding={2}>\n            <Text size={1}>Found configuration issues</Text>\n          </Box>\n        }\n        placement=\"bottom\"\n        portal\n        scheme={scheme}\n      >\n        <Box>\n          <Button\n            icon={WarningOutlineIcon}\n            mode=\"bleed\"\n            tone=\"caution\"\n            onClick={handleOpen}\n            ref={setButtonElement}\n            selected={isDialogOpen}\n          />\n        </Box>\n      </Tooltip>\n\n      {isDialogOpen && (\n        <Dialog\n          header={\n            <Stack space={3}>\n              <Text weight=\"semibold\">Configuration issues</Text>\n              <Text muted size={1}>\n                Configuration checks are only performed during development and will not be visible\n                in production builds\n              </Text>\n            </Stack>\n          }\n          width={2}\n          onClickOutside={handleClose}\n          onClose={handleClose}\n          // force root scheme here to \"break out\" of the navbar's dark scheme\n          scheme={scheme}\n          id={dialogId}\n        >\n          <Stack space={4} padding={4}>\n            <Heading as=\"h2\" size={1}>\n              Found {groupsWithWarnings.length} schema warnings\n            </Heading>\n            <SchemaProblemGroups problemGroups={groupsWithWarnings} />\n          </Stack>\n        </Dialog>\n      )}\n    </>\n  )\n}\n","import {CloseIcon, MenuIcon, SearchIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Card,\n  Flex,\n  Layer,\n  Text,\n  Tooltip,\n  useGlobalKeyDown,\n  useMediaIndex,\n} from '@sanity/ui'\nimport React, {\n  createElement,\n  useCallback,\n  useState,\n  isValidElement,\n  useMemo,\n  useEffect,\n  useRef,\n} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {startCase} from 'lodash'\nimport styled from 'styled-components'\nimport {useWorkspace} from '../../workspace'\nimport {useColorScheme} from '../../colorScheme'\nimport {RouterState, useRouterState, useStateLink} from '../../../router'\nimport {useWorkspaces} from '../../workspaces'\nimport {isDev} from '../../../environment'\nimport {UserMenu} from './userMenu'\nimport {NewDocumentButton} from './NewDocumentButton'\nimport {PresenceMenu} from './presence'\nimport {NavDrawer} from './NavDrawer'\nimport {SearchField} from './search'\nimport {ToolMenu as DefaultToolMenu} from './tools/ToolMenu'\nimport {ChangelogButton} from './changelog'\nimport {WorkspaceMenuButton} from './workspace'\nimport {ConfigIssuesButton} from './configIssues/ConfigIssuesButton'\n\nconst RootLayer = styled(Layer)`\n  min-height: auto;\n  position: relative;\n\n  &[data-search-open='true'] {\n    top: 0;\n    position: sticky;\n  }\n`\n\nconst SearchCard = styled(Card)`\n  z-index: 1;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n\n  &[data-fullscreen='true'] {\n    position: absolute;\n  }\n\n  &[data-fullscreen='false'] {\n    min-width: 253px;\n    max-width: 350px;\n  }\n`\n\nconst LeftFlex = styled(Flex)`\n  width: max-content;\n`\n\ninterface NavbarProps {\n  onSearchOpenChange: (open: boolean) => void\n  fullscreenSearchPortalEl: HTMLElement | null\n}\n\nexport function Navbar(props: NavbarProps) {\n  const {fullscreenSearchPortalEl, onSearchOpenChange} = props\n  const {name, logo, navbar, tools, ...workspace} = useWorkspace()\n  const workspaces = useWorkspaces()\n  const routerState = useRouterState()\n  const ToolMenu = navbar?.components?.ToolMenu || DefaultToolMenu\n  const {scheme} = useColorScheme()\n  const {href: rootHref, onClick: handleRootClick} = useStateLink({state: {}})\n  const mediaIndex = useMediaIndex()\n  const activeToolName = typeof routerState.tool === 'string' ? routerState.tool : undefined\n\n  const [searchOpen, setSearchOpen] = useState<boolean>(false)\n  const [drawerOpen, setDrawerOpen] = useState<boolean>(false)\n\n  const routerStateRef = useRef<RouterState>(routerState)\n  const workspaceNameRef = useRef<string>(name)\n\n  // Close the NavDrawer when changing tool or workspace\n  useEffect(() => {\n    if (routerStateRef.current.tool !== routerState.tool || name !== workspaceNameRef.current) {\n      setDrawerOpen(false)\n    }\n\n    routerStateRef.current = routerState\n    workspaceNameRef.current = name\n  }, [name, routerState])\n\n  const [drawerButtonEl, setDrawerButtonEl] = useState<HTMLButtonElement | null>(null)\n  const [searchInputElement, setSearchInputElement] = useState<HTMLInputElement | null>(null)\n  const [searchOpenButtonEl, setSearchOpenButtonEl] = useState<HTMLButtonElement | null>(null)\n  const [searchCloseButtonEl, setSearchCloseButtonEl] = useState<HTMLButtonElement | null>(null)\n\n  const shouldRender = useMemo(\n    () => ({\n      brandingCenter: mediaIndex <= 1,\n      changelog: mediaIndex > 1,\n      collapsedPresenceMenu: mediaIndex <= 1,\n      loginStatus: mediaIndex > 1,\n      searchFullscreen: mediaIndex <= 1,\n      configIssues: mediaIndex > 1 && isDev,\n      workspaces: mediaIndex >= 3 && workspaces.length > 1,\n      tools: mediaIndex >= 3,\n    }),\n    [mediaIndex, workspaces.length]\n  )\n  const formattedName = typeof name === 'string' && name !== 'root' ? startCase(name) : null\n  const title = workspace.title || formattedName || 'Studio'\n\n  useEffect(() => {\n    onSearchOpenChange(searchOpen)\n    if (searchOpen) searchInputElement?.focus()\n  }, [searchOpen, searchInputElement, onSearchOpenChange])\n\n  useGlobalKeyDown((e) => {\n    if (e.key === 'Escape' && searchOpen) {\n      handleCloseSearch()\n    }\n  })\n\n  const handleOpenSearch = useCallback(() => {\n    setSearchOpen(true)\n  }, [])\n\n  const handleCloseSearch = useCallback(() => {\n    setSearchOpen(false)\n    searchOpenButtonEl?.focus()\n  }, [searchOpenButtonEl])\n\n  const handleCloseDrawer = useCallback(() => {\n    setDrawerOpen(false)\n    drawerButtonEl?.focus()\n  }, [drawerButtonEl])\n\n  const handleOpenDrawer = useCallback(() => {\n    setDrawerOpen(true)\n  }, [])\n\n  const rootLinkContent = (() => {\n    if (isValidElementType(logo)) return createElement(logo)\n    if (isValidElement(logo)) return logo\n    return <Text weight=\"bold\">{title}</Text>\n  })()\n\n  const brandingComponent = useMemo(\n    () => (\n      <Button\n        aria-label={title}\n        as=\"a\"\n        href={rootHref}\n        mode=\"bleed\"\n        onClick={handleRootClick}\n        padding={3}\n      >\n        {rootLinkContent}\n      </Button>\n    ),\n    [handleRootClick, rootHref, rootLinkContent, title]\n  )\n\n  // The HTML elements that are part of the search view (i.e. the \"close\" button that is visible\n  // when in fullscreen mode on narrow devices) needs to be passed to `<Autocomplete />` so it knows\n  // how to make the search experience work properly for non-sighted users.\n  // Specifically – without passing `relatedElements`, the listbox with results will close when you\n  // TAB to focus the \"close\" button, and that‘s not a good experience for anyone.\n  const searchRelatedElements = useMemo(\n    () => [searchCloseButtonEl].filter(Boolean) as HTMLElement[],\n    [searchCloseButtonEl]\n  )\n\n  return (\n    <RootLayer zOffset={100} data-search-open={searchOpen}>\n      <Card\n        scheme=\"dark\"\n        shadow={scheme === 'dark' ? 1 : undefined}\n        style={{lineHeight: 0}}\n        padding={2}\n        sizing=\"border\"\n        data-ui=\"Navbar\"\n      >\n        <Flex align=\"center\" justify=\"space-between\">\n          <LeftFlex align=\"center\" flex={shouldRender.brandingCenter ? undefined : 1}>\n            {!shouldRender.tools && (\n              <Box marginRight={1}>\n                <Button\n                  mode=\"bleed\"\n                  icon={MenuIcon}\n                  onClick={handleOpenDrawer}\n                  ref={setDrawerButtonEl}\n                />\n              </Box>\n            )}\n\n            {!shouldRender.brandingCenter && <Box marginRight={1}>{brandingComponent}</Box>}\n\n            {shouldRender.workspaces && (\n              <Box marginRight={2}>\n                <Tooltip\n                  content={\n                    <Box padding={2}>\n                      <Text size={1}>Select workspace</Text>\n                    </Box>\n                  }\n                  placement=\"bottom\"\n                  portal\n                  scheme={scheme}\n                >\n                  <Box>\n                    <WorkspaceMenuButton />\n                  </Box>\n                </Tooltip>\n              </Box>\n            )}\n\n            <Box marginRight={shouldRender.brandingCenter ? undefined : 2}>\n              <NewDocumentButton />\n            </Box>\n\n            {(searchOpen || !shouldRender.searchFullscreen) && (\n              <SearchCard\n                data-fullscreen={shouldRender.searchFullscreen}\n                data-ui=\"SearchRoot\"\n                flex={1}\n                padding={shouldRender.searchFullscreen ? 2 : undefined}\n                scheme={shouldRender.searchFullscreen ? 'light' : undefined}\n                shadow={shouldRender.searchFullscreen ? 1 : undefined}\n              >\n                <Flex>\n                  <Box flex={1} marginRight={shouldRender.tools ? undefined : [1, 1, 2]}>\n                    <SearchField\n                      fullScreen={shouldRender.searchFullscreen}\n                      onSearchItemClick={handleCloseSearch}\n                      portalElement={fullscreenSearchPortalEl}\n                      setSearchInputElement={setSearchInputElement}\n                      relatedElements={searchRelatedElements}\n                    />\n                  </Box>\n\n                  {shouldRender.searchFullscreen && (\n                    <Button\n                      aria-label=\"Close search\"\n                      icon={CloseIcon}\n                      mode=\"bleed\"\n                      onClick={handleCloseSearch}\n                      ref={setSearchCloseButtonEl}\n                    />\n                  )}\n                </Flex>\n              </SearchCard>\n            )}\n\n            {shouldRender.tools && (\n              <Card borderRight flex={1} marginX={2} overflow=\"visible\" paddingRight={1}>\n                <ToolMenu\n                  activeToolName={activeToolName}\n                  context=\"topbar\"\n                  isDrawerOpen={false}\n                  tools={tools}\n                  closeDrawer={handleCloseDrawer}\n                />\n              </Card>\n            )}\n          </LeftFlex>\n\n          {shouldRender.brandingCenter && <Box marginX={1}>{brandingComponent}</Box>}\n\n          <Flex align=\"center\">\n            <Box marginRight={1}>\n              <PresenceMenu collapse={shouldRender.collapsedPresenceMenu} />\n            </Box>\n\n            {shouldRender.changelog && (\n              <Box marginRight={1}>\n                <ChangelogButton />\n              </Box>\n            )}\n\n            {shouldRender.configIssues && (\n              <Box marginRight={2}>\n                <ConfigIssuesButton />\n              </Box>\n            )}\n\n            {shouldRender.tools && (\n              <Box>\n                <UserMenu />\n              </Box>\n            )}\n\n            {shouldRender.searchFullscreen && (\n              <Button\n                aria-label=\"Open search\"\n                icon={SearchIcon}\n                mode=\"bleed\"\n                onClick={handleOpenSearch}\n                ref={setSearchOpenButtonEl}\n              />\n            )}\n          </Flex>\n        </Flex>\n      </Card>\n\n      {!shouldRender.tools && (\n        <NavDrawer\n          activeToolName={activeToolName}\n          isOpen={drawerOpen}\n          onClose={handleCloseDrawer}\n          tools={tools}\n        />\n      )}\n    </RootLayer>\n  )\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Container, Flex, Stack, Text} from '@sanity/ui'\nimport React from 'react'\n\nexport function NoToolsScreen() {\n  return (\n    <Card height=\"fill\">\n      <Flex align=\"center\" height=\"fill\" justify=\"center\" padding={4} sizing=\"border\">\n        <Container width={0}>\n          <Card padding={4} radius={2} shadow={1} tone=\"caution\">\n            <Flex>\n              <Box>\n                <Text size={1}>\n                  <WarningOutlineIcon />\n                </Text>\n              </Box>\n              <Stack flex={1} marginLeft={3} space={3}>\n                <Text as=\"h1\" size={1} weight=\"bold\">\n                  No configured tools!\n                </Text>\n                <Text as=\"p\" muted size={1}>\n                  Please configure a tool in your Studio configuration.\n                </Text>\n                <Text as=\"p\" hidden muted size={1}>\n                  <a href=\"\">Learn how to add a tool &rarr;</a>\n                </Text>\n              </Stack>\n            </Flex>\n          </Card>\n        </Container>\n      </Flex>\n    </Card>\n  )\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Container, Flex, Stack, Text} from '@sanity/ui'\nimport React from 'react'\n\nexport function ToolNotFoundScreen(props: {toolName: string}) {\n  const {toolName} = props\n\n  return (\n    <Card height=\"fill\">\n      <Flex align=\"center\" height=\"fill\" justify=\"center\" padding={4} sizing=\"border\">\n        <Container width={0}>\n          <Card padding={4} radius={2} shadow={1} tone=\"caution\">\n            <Flex>\n              <Box>\n                <Text size={1}>\n                  <WarningOutlineIcon />\n                </Text>\n              </Box>\n              <Stack flex={1} marginLeft={3} space={3}>\n                <Text as=\"h1\" size={1} weight=\"bold\">\n                  Tool not found: <code>{toolName}</code>\n                </Text>\n              </Stack>\n            </Flex>\n          </Card>\n        </Container>\n      </Flex>\n    </Card>\n  )\n}\n","import {Box, Button, Card, Code, ErrorBoundary, Flex, Heading, Spinner} from '@sanity/ui'\nimport {startCase} from 'lodash'\nimport React, {createElement, Suspense, useCallback, useEffect, useMemo, useState} from 'react'\nimport styled from 'styled-components'\nimport {useHotModuleReload} from 'use-hot-module-reload'\nimport {RouteScope, useRouter} from '../router'\nimport {Navbar} from './components'\nimport {NoToolsScreen} from './screens/NoToolsScreen'\nimport {ToolNotFoundScreen} from './screens/ToolNotFoundScreen'\nimport {useWorkspace} from './workspace'\n\nconst SearchFullscreenPortalCard = styled(Card)`\n  display: flex;\n  flex-direction: column;\n  min-height: 100%;\n  flex: 1;\n`\n\nexport function StudioLayout() {\n  const {state: routerState} = useRouter()\n  const {name, title, tools} = useWorkspace()\n  const activeToolName = typeof routerState.tool === 'string' ? routerState.tool : undefined\n  const activeTool = tools.find((tool) => tool.name === activeToolName)\n  const [toolError, setToolError] = useState<{error: Error; info: React.ErrorInfo} | null>(null)\n  const [searchOpen, setSearchOpen] = useState<boolean>(false)\n  const [fullscreenSearchPortalEl, setFullscreenSearchPortalEl] = useState<HTMLDivElement | null>(\n    null\n  )\n\n  const documentTitle = useMemo(() => {\n    const mainTitle = title || startCase(name)\n\n    if (activeToolName) {\n      return `${mainTitle} – ${startCase(activeToolName)}`\n    }\n\n    return mainTitle\n  }, [activeToolName, name, title])\n\n  useEffect(() => {\n    document.title = documentTitle\n  }, [documentTitle])\n\n  const handleSearchOpenChange = useCallback((open: boolean) => {\n    setSearchOpen(open)\n  }, [])\n\n  const resetToolError = useCallback(() => setToolError(null), [setToolError])\n\n  useEffect(resetToolError, [activeToolName, resetToolError])\n  useHotModuleReload(resetToolError)\n\n  return (\n    <Flex data-ui=\"ToolScreen\" direction=\"column\" height=\"fill\">\n      <Navbar\n        onSearchOpenChange={handleSearchOpenChange}\n        fullscreenSearchPortalEl={fullscreenSearchPortalEl}\n      />\n\n      {tools.length === 0 && <NoToolsScreen />}\n\n      {tools.length > 0 && !activeTool && activeToolName && (\n        <ToolNotFoundScreen toolName={activeToolName} />\n      )}\n\n      {toolError && activeTool && (\n        <Card flex={1} overflow=\"auto\" padding={4}>\n          <Heading as=\"h1\">\n            The <code>{activeToolName}</code> tool crashed\n          </Heading>\n          <Box marginTop={4}>\n            <Button onClick={resetToolError} text=\"Retry\" />\n          </Box>\n          <Card marginTop={4} overflow=\"auto\" padding={3} tone=\"critical\">\n            <Code size={1}>{toolError.error.stack}</Code>\n          </Card>\n          <Card marginTop={4} overflow=\"auto\" padding={3} tone=\"critical\">\n            <Code size={1}>{toolError.info.componentStack}</Code>\n          </Card>\n        </Card>\n      )}\n\n      {searchOpen && (\n        <SearchFullscreenPortalCard ref={setFullscreenSearchPortalEl} overflow=\"auto\" />\n      )}\n\n      <Card flex={1} hidden={searchOpen}>\n        {!toolError && activeTool && activeToolName && (\n          <RouteScope scope={activeToolName}>\n            <ErrorBoundary onCatch={setToolError}>\n              <Suspense fallback={<LoadingTool />}>\n                {createElement(activeTool.component, {tool: activeTool})}\n              </Suspense>\n            </ErrorBoundary>\n          </RouteScope>\n        )}\n      </Card>\n    </Flex>\n  )\n}\n\nfunction LoadingTool() {\n  return (\n    <Flex align=\"center\" height=\"fill\" justify=\"center\">\n      <Spinner muted />\n    </Flex>\n  )\n}\n","import type {SanityClient} from '@sanity/client'\nimport type {SourceClientOptions} from '../config'\nimport {useSource} from '../studio'\n\n/**\n * @public\n */\nexport function useClient(clientOptions?: SourceClientOptions): SanityClient {\n  const source = useSource()\n  if (!clientOptions) {\n    console.warn(\n      'Calling `useClient()` without specifying an API version is deprecated and will stop working in the next dev-preview release - please migrate to use `useClient({apiVersion: \"2021-06-07\"})`.'\n    )\n    return source.getClient({apiVersion: '2021-06-07'})\n  }\n\n  return source.getClient(clientOptions)\n}\n","import {useSource} from '../studio'\n\n/**\n * @public\n */\nexport function useDataset(): string {\n  return useSource().dataset\n}\n","import {useSource} from '../studio'\n\n/**\n * @public\n */\nexport function useProjectId(): string {\n  return useSource().projectId\n}\n","import {Schema} from '@sanity/types'\nimport {useSource} from '../studio'\n\n/**\n * @public\n */\nexport function useSchema(): Schema {\n  return useSource().schema\n}\n","import {useSource} from '../studio'\nimport {Template} from '../templates'\n\n/**\n * @public\n */\nexport function useTemplates(): Template[] {\n  return useSource().templates\n}\n","import {useEffect, useState} from 'react'\nimport {\n  format,\n  differenceInSeconds,\n  differenceInMinutes,\n  differenceInHours,\n  differenceInDays,\n  differenceInWeeks,\n  differenceInMonths,\n  differenceInYears,\n} from 'date-fns'\nimport pluralize from 'pluralize-esm'\n\ninterface TimeSpec {\n  timestamp: string\n  refreshInterval: number\n}\n\nconst FIVE_SECONDS = 1000 * 5\nconst TWENTY_SECONDS = 1000 * 20\nconst ONE_MINUTE = 1000 * 60\nconst ONE_HOUR = ONE_MINUTE * 60\n\nexport interface TimeAgoOpts {\n  minimal?: boolean\n  agoSuffix?: boolean\n}\n\nexport function useTimeAgo(time: Date | string, {minimal, agoSuffix}: TimeAgoOpts = {}): string {\n  const [resolved, setResolved] = useState(() => formatRelativeTime(time, {minimal, agoSuffix}))\n\n  useEffect(() => {\n    setResolved(formatRelativeTime(time, {minimal, agoSuffix}))\n  }, [time, minimal, agoSuffix])\n\n  useEffect(() => {\n    const id: number | undefined = Number.isFinite(resolved.refreshInterval)\n      ? window.setInterval(\n          () => setResolved(formatRelativeTime(time, {minimal, agoSuffix})),\n          resolved.refreshInterval\n        )\n      : undefined\n\n    return () => clearInterval(id)\n  }, [time, minimal, resolved.refreshInterval, agoSuffix])\n\n  return resolved.timestamp\n}\n\nfunction formatRelativeTime(date: Date | string, opts: TimeAgoOpts = {}): TimeSpec {\n  const parsedDate = date instanceof Date ? date : new Date(date)\n\n  // Invalid date? Return empty timestamp and inifinite refresh interval, to save us from\n  // continuously trying to format an invalid date. The `useEffect` calls in the hook will\n  // trigger a re-evaluation of the timestamp when the date changes, so this is safe.\n  if (!parsedDate.getTime()) {\n    return {\n      timestamp: '',\n      refreshInterval: +Infinity,\n    }\n  }\n\n  const now = Date.now()\n  const diffMonths = differenceInMonths(now, parsedDate)\n  const diffYears = differenceInYears(now, parsedDate)\n\n  if (diffMonths || diffYears) {\n    if (opts.minimal && diffYears === 0) {\n      // same year\n      return {\n        timestamp: format(parsedDate, 'MMM d'),\n        refreshInterval: +Infinity,\n      }\n    }\n\n    if (opts.minimal) {\n      return {\n        timestamp: format(parsedDate, 'MMM d, yyyy'),\n        refreshInterval: +Infinity,\n      }\n    }\n\n    return {\n      timestamp: format(parsedDate, 'MMM d, yyyy, hh:mm a'),\n      refreshInterval: +Infinity,\n    }\n  }\n\n  const diffWeeks = differenceInWeeks(now, parsedDate)\n  const weekSuffix = pluralize('week', diffWeeks)\n\n  if (diffWeeks) {\n    if (opts.minimal) {\n      return {\n        timestamp: opts.agoSuffix ? `${diffWeeks}w ago` : `${diffWeeks}w`,\n        refreshInterval: ONE_HOUR,\n      }\n    }\n\n    return {\n      timestamp: opts.agoSuffix ? `${diffWeeks} ${weekSuffix} ago` : `${diffWeeks} ${weekSuffix}`,\n      refreshInterval: ONE_HOUR,\n    }\n  }\n\n  const diffDays = differenceInDays(now, parsedDate)\n  const daysSuffix = pluralize('days', diffDays)\n\n  if (diffDays) {\n    if (opts.minimal) {\n      const daysSince = opts.agoSuffix ? `${diffDays}d ago` : `${diffDays}d`\n      return {\n        timestamp: diffDays === 1 ? 'yesterday' : daysSince,\n        refreshInterval: ONE_HOUR,\n      }\n    }\n    const daysSince = opts.agoSuffix ? `${diffDays} ${daysSuffix} ago` : `${diffDays} ${daysSuffix}`\n    return {\n      timestamp: diffDays === 1 ? 'yesterday' : daysSince,\n      refreshInterval: ONE_HOUR,\n    }\n  }\n\n  const diffHours = differenceInHours(now, parsedDate)\n  const hoursSuffix = pluralize('hour', diffHours)\n\n  if (diffHours) {\n    if (opts.minimal) {\n      return {\n        timestamp: opts.agoSuffix ? `${diffHours}h ago` : `${diffHours}h`,\n        refreshInterval: ONE_MINUTE,\n      }\n    }\n\n    return {\n      timestamp: opts.agoSuffix ? `${diffHours} ${hoursSuffix} ago` : `${diffHours} ${hoursSuffix}`,\n      refreshInterval: ONE_MINUTE,\n    }\n  }\n\n  const diffMins = differenceInMinutes(now, parsedDate)\n  const minsSuffix = pluralize('minute', diffMins)\n\n  if (diffMins) {\n    if (opts.minimal) {\n      return {\n        timestamp: opts.agoSuffix ? `${diffMins}m ago` : `${diffMins}m`,\n        refreshInterval: TWENTY_SECONDS,\n      }\n    }\n    return {\n      timestamp: opts.agoSuffix ? `${diffMins} ${minsSuffix} ago` : `${diffMins} ${minsSuffix}`,\n      refreshInterval: TWENTY_SECONDS,\n    }\n  }\n\n  const diffSeconds = differenceInSeconds(now, parsedDate)\n  const secsSuffix = pluralize('second', diffSeconds)\n\n  if (diffSeconds > 10) {\n    if (opts.minimal) {\n      return {\n        timestamp: opts.agoSuffix ? `${diffSeconds}s ago` : `${diffSeconds}s`,\n        refreshInterval: FIVE_SECONDS,\n      }\n    }\n\n    return {\n      timestamp: opts.agoSuffix\n        ? `${diffSeconds} ${secsSuffix} ago`\n        : `${diffSeconds} ${secsSuffix}`,\n      refreshInterval: FIVE_SECONDS,\n    }\n  }\n\n  return {timestamp: 'just now', refreshInterval: FIVE_SECONDS}\n}\n","import {distinctUntilChanged, map, mapTo, startWith, switchMap} from 'rxjs/operators'\nimport {of, timer} from 'rxjs'\nimport {useMemoObservable} from 'react-rx'\nimport {useDocumentStore} from '../datastores'\n\nexport type ConnectionState = 'connecting' | 'reconnecting' | 'connected'\n\nconst INITIAL: ConnectionState = 'connecting'\n\nexport function useConnectionState(publishedDocId: string, docTypeName: string): ConnectionState {\n  const documentStore = useDocumentStore()\n\n  return useMemoObservable(\n    () =>\n      documentStore.pair.documentEvents(publishedDocId, docTypeName).pipe(\n        map((ev: {type: string}) => ev.type),\n        map((eventType) => eventType !== 'reconnect'),\n        switchMap((isConnected) =>\n          isConnected ? of('connected') : timer(200).pipe(mapTo('reconnecting'))\n        ),\n        startWith(INITIAL as any),\n        distinctUntilChanged()\n      ),\n    [publishedDocId, docTypeName],\n    INITIAL\n  )\n}\n","import {useMemo} from 'react'\nimport {useObservable} from 'react-rx'\nimport {useDocumentStore} from '../datastores'\nimport {OperationsAPI} from '../datastores/document/document-pair/operations'\n\nexport function useDocumentOperation(publishedDocId: string, docTypeName: string): OperationsAPI {\n  const documentStore = useDocumentStore()\n\n  const operations$ = useMemo(() => {\n    return documentStore.pair.editOperations(publishedDocId, docTypeName)\n  }, [documentStore, publishedDocId, docTypeName])\n\n  return useObservable(operations$)!\n}\n","import {useMemoObservable} from 'react-rx'\nimport {useDocumentStore} from '../datastores'\n\nexport function useDocumentOperationEvent(publishedDocId: string, docTypeName: string) {\n  const documentStore = useDocumentStore()\n\n  return useMemoObservable(\n    () => documentStore.pair.operationEvents(publishedDocId, docTypeName),\n    [publishedDocId, docTypeName]\n  )\n}\n","import {useMemoObservable} from 'react-rx'\nimport {useDocumentStore} from '../datastores'\nimport type {EditStateFor} from '../datastores/document/document-pair/editState'\n\nexport function useEditState(publishedDocId: string, docTypeName: string): EditStateFor {\n  const documentStore = useDocumentStore()\n\n  return useMemoObservable(\n    () => documentStore.pair.editState(publishedDocId, docTypeName),\n    [publishedDocId, docTypeName]\n  ) as EditStateFor\n}\n","import {useMemoObservable} from 'react-rx'\nimport {map} from 'rxjs/operators'\nimport {useDocumentStore} from '../datastores'\n\nexport interface SyncState {\n  isSyncing: boolean\n}\n\nconst SYNCING = {isSyncing: true}\nconst NOT_SYNCING = {isSyncing: false}\n\nexport function useSyncState(publishedDocId: string, documentType: string): SyncState {\n  const documentStore = useDocumentStore()\n\n  return useMemoObservable<SyncState>(\n    () =>\n      documentStore.pair\n        .consistencyStatus(publishedDocId, documentType)\n        .pipe(map((isConsistent) => (isConsistent ? NOT_SYNCING : SYNCING))),\n    [publishedDocId],\n    NOT_SYNCING\n  )\n}\n","import {ValidationMarker} from '@sanity/types'\nimport {useMemoObservable} from 'react-rx'\nimport {useDocumentStore} from '../datastores'\n\nexport interface ValidationStatus {\n  isValidating: boolean\n  validation: ValidationMarker[]\n}\n\nconst INITIAL: ValidationStatus = {validation: [], isValidating: false}\n\nexport function useValidationStatus(publishedDocId: string, docTypeName: string): ValidationStatus {\n  const documentStore = useDocumentStore()\n\n  return useMemoObservable(\n    () => documentStore.pair.validation(publishedDocId, docTypeName),\n    [publishedDocId, docTypeName],\n    INITIAL\n  )\n}\n","import {BufferedDocument, Mutation} from '@sanity/mutator'\nimport {SanityDocument} from '@sanity/types'\nimport {BehaviorSubject, EMPTY, merge, Observable, Subject} from 'rxjs'\nimport {\n  distinctUntilChanged,\n  filter,\n  map,\n  mergeMap,\n  mergeMapTo,\n  publishReplay,\n  refCount,\n  scan,\n  share,\n  take,\n  tap,\n  withLatestFrom,\n} from 'rxjs/operators'\nimport {ListenerEvent, MutationEvent} from '../getPairListener'\nimport {\n  CommitFunction,\n  DocumentMutationEvent,\n  DocumentRebaseEvent,\n  MutationPayload,\n  SnapshotEvent,\n  DocumentRemoteMutationEvent,\n  RemoteSnapshotEvent,\n} from './types'\n\ninterface MutationAction {\n  type: 'mutation'\n  mutations: MutationPayload[]\n}\n\ninterface CommitAction {\n  type: 'commit'\n}\n\ntype Action = MutationAction | CommitAction\n\n// BufferedDocument.LOCAL never updates its revision due to its internal consistency checks\n// but we sometimes we need the most current _rev on the document in UI land, e.g.\n// in order to do optimistic locking on the edited document to make sure we publish the document the user\n// actually are looking at, and not the one currently at the server\n// Also - the mutator is not setting _updatedAt on patches applied optimistically or\n// when they are received from server\nconst getUpdatedSnapshot = (bufferedDocument: BufferedDocument) => {\n  const LOCAL = bufferedDocument.LOCAL\n  const HEAD = bufferedDocument.document.HEAD\n  if (!LOCAL) {\n    return LOCAL\n  }\n\n  return {\n    ...LOCAL,\n    _type: (HEAD || LOCAL)._type,\n    _rev: (HEAD || LOCAL)._rev,\n    _updatedAt: new Date().toISOString(),\n  }\n}\n\nconst toSnapshotEvent = (document: SanityDocument): SnapshotEvent => ({type: 'snapshot', document})\nconst getDocument = <T extends {document: any}>(event: T): T['document'] => event.document\n\n// This is an observable interface for BufferedDocument in an attempt\n// to make it easier to work with the api provided by it\nexport const createObservableBufferedDocument = (\n  listenerEvent$: Observable<ListenerEvent>,\n  commitMutations: CommitFunction\n) => {\n  // Incoming local actions (e.g. a request to mutate, a request to commit pending changes, etc.)\n  const actions$ = new Subject<Action>()\n\n  // Stream of commit requests. Must be handled by a commit handler\n  const consistency$ = new BehaviorSubject<boolean>(true)\n\n  // Stream of mutations for this document\n  // NOTE: this will *not* include remote mutations received over the listener\n  // that has *already* applied locally/optimistically\n  const mutations$ = new Subject<DocumentMutationEvent>()\n\n  // a stream of rebase events emitted from the mutator\n  const rebase$ = new Subject<DocumentRebaseEvent>()\n\n  // a stream of remote mutations with effetcs\n  const remoteMutations = new Subject<DocumentRemoteMutationEvent>()\n\n  const createInitialBufferedDocument = (initialSnapshot: SanityDocument | null) => {\n    const bufferedDocument = new BufferedDocument(initialSnapshot)\n    bufferedDocument.onMutation = ({mutation, remote}: any) => {\n      // this is called after either when:\n      // 1) local mutations has been added, optimistically applied and queued for sending\n      // 2) remote mutations originating from another client has arrived and been applied\n      mutations$.next({\n        type: 'mutation',\n        document: getUpdatedSnapshot(bufferedDocument) as any,\n        mutations: mutation.mutations,\n        origin: remote ? 'remote' : 'local',\n      })\n    }\n    ;(bufferedDocument as any).onRemoteMutation = (mutation: any) => {\n      remoteMutations.next({\n        type: 'remoteMutation',\n        head: bufferedDocument.document.HEAD as any,\n        transactionId: mutation.transactionId,\n        timestamp: mutation.timestamp,\n        author: mutation.identity,\n        effects: mutation.effects,\n      })\n    }\n\n    bufferedDocument.onRebase = (edge: any, nextRemoteMutations: any, localMutations: any) => {\n      rebase$.next({\n        type: 'rebase',\n        document: edge,\n        remoteMutations: nextRemoteMutations,\n        localMutations,\n      })\n    }\n\n    bufferedDocument.onConsistencyChanged = (isConsistent) => {\n      consistency$.next(isConsistent)\n    }\n\n    bufferedDocument.commitHandler = (opts: {\n      success: () => void\n      failure: () => void\n      cancel: (error: Error) => void\n      mutation: Mutation\n    }) => {\n      const {resultRev, ...mutation} = opts.mutation.params\n      commitMutations(mutation).then(opts.success, (error) => {\n        const isBadRequest =\n          'statusCode' in error &&\n          typeof error.statusCode === 'number' &&\n          error.statusCode >= 400 &&\n          error.statusCode <= 500\n        if (isBadRequest) {\n          opts.cancel(error)\n        } else {\n          opts.failure()\n        }\n        return Promise.reject(error)\n      })\n    }\n    return bufferedDocument\n  }\n\n  const currentBufferedDocument$ = listenerEvent$.pipe(\n    scan((bufferedDocument: BufferedDocument | null, listenerEvent) => {\n      // consider renaming 'snapshot' to initial/welcome\n      if (listenerEvent.type === 'snapshot') {\n        if (bufferedDocument) {\n          // we received a new snapshot and already got an old one. When we receive a snapshot again\n          // it is usually because the connection has been down. Attempt to save pending changes (if any)\n          bufferedDocument.commit()\n        }\n        return createInitialBufferedDocument(listenerEvent.document || null)\n      }\n      if (bufferedDocument === null) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          'Ignoring event of type \"%s\" since buffered document has not yet been set up with snapshot',\n          listenerEvent.type\n        )\n        return null\n      }\n      return bufferedDocument\n    }, null),\n    distinctUntilChanged(),\n    publishReplay(1),\n    refCount()\n  )\n\n  // this is a stream of document snapshots where each new snapshot are emitted after listener mutations\n  // has been applied. Since the optimistic patches is not emitted on the mutation$ stream, we need this\n  // in order to update the document with a new _rev (and _updatedAt)\n  const snapshotAfterSync$ = listenerEvent$.pipe(\n    filter((ev): ev is MutationEvent => ev.type === 'mutation'),\n    withLatestFrom(currentBufferedDocument$),\n    map(([mutationEvent, bufferedDocument]) => {\n      bufferedDocument!.arrive(new Mutation(mutationEvent))\n      return getUpdatedSnapshot(bufferedDocument!)\n    })\n  )\n\n  // this is where the side effects mandated by local actions actually happens\n  const actionHandler$ = actions$.pipe(\n    withLatestFrom(currentBufferedDocument$),\n    tap(([action, bufferedDocument]) => {\n      if (action.type === 'mutation') {\n        bufferedDocument!.add(new Mutation({mutations: action.mutations}))\n      }\n      if (action.type === 'commit') {\n        bufferedDocument!.commit()\n      }\n    }),\n    // We subscribe to this only for the side effects\n    mergeMapTo(EMPTY),\n    share()\n  )\n\n  const emitAction = (action: any) => actions$.next(action)\n\n  const addMutations = (mutations: MutationPayload[]) => emitAction({type: 'mutation', mutations})\n  const addMutation = (mutation: MutationPayload) => addMutations([mutation])\n\n  const commit = () => {\n    return currentBufferedDocument$.pipe(\n      take(1),\n      mergeMap((bufferedDocument) => bufferedDocument!.commit()),\n      mergeMapTo(EMPTY)\n    )\n  }\n\n  // A stream of this document's snapshot\n  const snapshot$ = merge(\n    currentBufferedDocument$.pipe(map((bufferedDocument) => bufferedDocument!.LOCAL)),\n    mutations$.pipe(map(getDocument)),\n    rebase$.pipe(map(getDocument)),\n    snapshotAfterSync$\n  ).pipe(map(toSnapshotEvent as any), publishReplay(1), refCount())\n\n  const remoteSnapshot$: Observable<RemoteSnapshotEvent> = merge(\n    currentBufferedDocument$.pipe(\n      map((bufferedDocument) => bufferedDocument!.document.HEAD as any),\n      map(toSnapshotEvent)\n    ),\n    remoteMutations\n  ).pipe(publishReplay(1), refCount())\n\n  return {\n    updates$: merge(snapshot$, actionHandler$, mutations$, rebase$),\n    consistency$: consistency$.pipe(distinctUntilChanged(), publishReplay(1), refCount()),\n    remoteSnapshot$,\n    addMutation,\n    addMutations,\n    commit,\n  }\n}\n","import {SanityDocument} from '@sanity/types'\nimport {Observable} from 'rxjs'\nimport {ListenerEvent} from '../getPairListener'\nimport {Mutation} from '../types'\nimport {createObservableBufferedDocument} from './createObservableBufferedDocument'\nimport {\n  CommitFunction,\n  CommittedEvent,\n  DocumentMutationEvent,\n  DocumentRebaseEvent,\n  SnapshotEvent,\n  RemoteSnapshotEvent,\n} from './types'\n\nexport type BufferedDocumentEvent =\n  | SnapshotEvent\n  | DocumentRebaseEvent\n  | DocumentMutationEvent\n  | CommittedEvent\n\nconst prepare = (id: string) => (document: Partial<SanityDocument>) => {\n  const {_id, _rev, _updatedAt, ...rest} = document\n  return {_id: id, ...rest}\n}\n\nexport interface BufferedDocumentWrapper {\n  consistency$: Observable<boolean>\n  remoteSnapshot$: Observable<RemoteSnapshotEvent>\n  events: Observable<BufferedDocumentEvent>\n  // helper functions\n  patch: (patches: any[]) => Mutation[]\n  create: (document: Partial<SanityDocument>) => Mutation\n  createIfNotExists: (document: SanityDocument) => Mutation\n  createOrReplace: (document: SanityDocument) => Mutation\n  delete: () => Mutation\n\n  mutate: (mutations: Mutation[]) => void\n  commit: () => Observable<never>\n}\n\nexport const createBufferedDocument = (\n  documentId: string,\n  // consider naming it remoteEvent$\n  listenerEvent$: Observable<ListenerEvent>,\n  commitMutations: CommitFunction\n): BufferedDocumentWrapper => {\n  const bufferedDocument = createObservableBufferedDocument(listenerEvent$, commitMutations)\n\n  const prepareDoc = prepare(documentId)\n\n  const DELETE = {delete: {id: documentId}}\n\n  return {\n    events: bufferedDocument.updates$ as any,\n    consistency$: bufferedDocument.consistency$,\n    remoteSnapshot$: bufferedDocument.remoteSnapshot$,\n\n    patch: (patches) => patches.map((patch) => ({patch: {...patch, id: documentId}})),\n    create: (document) => ({create: prepareDoc(document)}),\n    createIfNotExists: (document) => ({createIfNotExists: prepareDoc(document)}),\n    createOrReplace: (document) => ({createOrReplace: prepareDoc(document)}),\n    delete: () => DELETE,\n\n    mutate: (mutations: Mutation[]) => bufferedDocument.addMutations(mutations),\n    commit: () => bufferedDocument.commit(),\n  }\n}\n","/* eslint-disable @typescript-eslint/no-use-before-define */\nimport type {SanityDocument} from '@sanity/types'\nimport {defer, of as observableOf, Observable} from 'rxjs'\nimport {concatMap, map} from 'rxjs/operators'\nimport type {IdPair, MutationEvent, ReconnectEvent, SanityClient, WelcomeEvent} from './types'\n\ninterface Snapshots {\n  draft: SanityDocument | null\n  published: SanityDocument | null\n}\n\nexport interface InitialSnapshotEvent {\n  type: 'snapshot'\n  documentId: string\n  document: SanityDocument | null\n}\n\nexport interface PairListenerOptions {\n  tag?: string\n}\n\nexport type {MutationEvent}\n\nexport type ListenerEvent = MutationEvent | ReconnectEvent | InitialSnapshotEvent\n\nexport function getPairListener(\n  client: SanityClient,\n  idPair: IdPair,\n  options: PairListenerOptions = {}\n): Observable<ListenerEvent> {\n  const {publishedId, draftId} = idPair\n  return defer(\n    () =>\n      client.observable.listen(\n        `*[_id == $publishedId || _id == $draftId]`,\n        {\n          publishedId,\n          draftId,\n        },\n        {\n          includeResult: false,\n          events: ['welcome', 'mutation', 'reconnect'],\n          effectFormat: 'mendoza',\n          tag: options.tag || 'document.pair-listener',\n        }\n      ) as Observable<WelcomeEvent | MutationEvent | ReconnectEvent>\n  ).pipe(\n    concatMap((event) =>\n      event.type === 'welcome'\n        ? fetchInitialDocumentSnapshots().pipe(\n            concatMap((snapshots) => [\n              createSnapshotEvent(draftId, snapshots.draft),\n              createSnapshotEvent(publishedId, snapshots.published),\n            ])\n          )\n        : observableOf(event)\n    )\n  )\n\n  function fetchInitialDocumentSnapshots(): Observable<Snapshots> {\n    return client.observable\n      .getDocuments<SanityDocument>([draftId, publishedId], {tag: 'document.snapshots'})\n      .pipe(\n        map(([draft, published]) => ({\n          draft,\n          published,\n        }))\n      )\n  }\n}\n\nfunction createSnapshotEvent(\n  documentId: string,\n  document: null | SanityDocument\n): InitialSnapshotEvent {\n  return {\n    type: 'snapshot',\n    documentId,\n    document,\n  }\n}\n","import {SanityClient} from '@sanity/client'\nimport {merge, Observable} from 'rxjs'\nimport {filter, map, share} from 'rxjs/operators'\nimport {SanityDocument} from '@sanity/types'\nimport {getPairListener, ListenerEvent} from '../getPairListener'\nimport {BufferedDocumentEvent, createBufferedDocument} from '../buffered-doc'\nimport {IdPair, Mutation, ReconnectEvent} from '../types'\nimport {RemoteSnapshotEvent} from '../buffered-doc/types'\n\nconst isEventForDocId =\n  (id: string) =>\n  (event: ListenerEvent): boolean =>\n    event.type !== 'reconnect' && event.documentId === id\n\nfunction commitMutations(client: SanityClient, mutations: any[]) {\n  return client.dataRequest('mutate', mutations, {\n    visibility: 'async',\n    returnDocuments: false,\n    tag: 'document.commit',\n  })\n}\n\nexport type WithVersion<T> = T & {version: 'published' | 'draft'}\n\nexport type DocumentVersionEvent = WithVersion<ReconnectEvent | BufferedDocumentEvent>\nexport type RemoteSnapshotVersionEvent = WithVersion<RemoteSnapshotEvent>\n\nexport interface DocumentVersion {\n  consistency$: Observable<boolean>\n  remoteSnapshot$: Observable<RemoteSnapshotVersionEvent>\n  events: Observable<DocumentVersionEvent>\n\n  patch: (patches: any[]) => Mutation[]\n  create: (document: Partial<SanityDocument>) => Mutation\n  createIfNotExists: (document: SanityDocument) => Mutation\n  createOrReplace: (document: SanityDocument) => Mutation\n  delete: () => Mutation\n\n  mutate: (mutations: Mutation[]) => void\n  commit: () => Observable<never>\n}\n\nexport interface Pair {\n  published: DocumentVersion\n  draft: DocumentVersion\n}\n\nfunction setVersion<T>(version: 'draft' | 'published') {\n  return (ev: T): T & {version: 'draft' | 'published'} => ({...ev, version})\n}\n\nexport function checkoutPair(client: SanityClient, idPair: IdPair): Pair {\n  const {publishedId, draftId} = idPair\n\n  const listenerEvents$ = getPairListener(client, idPair).pipe(share())\n\n  const reconnect$ = listenerEvents$.pipe(\n    filter((ev) => ev.type === 'reconnect')\n  ) as Observable<ReconnectEvent>\n\n  const draft = createBufferedDocument(\n    draftId,\n    listenerEvents$.pipe(filter(isEventForDocId(draftId))),\n    (mut: any) => commitMutations(client, mut)\n  )\n\n  const published = createBufferedDocument(\n    publishedId,\n    listenerEvents$.pipe(filter(isEventForDocId(publishedId))),\n    (mut: any) => commitMutations(client, mut)\n  )\n\n  return {\n    draft: {\n      ...draft,\n      events: merge(reconnect$, draft.events).pipe(map(setVersion('draft'))),\n      consistency$: draft.consistency$,\n      remoteSnapshot$: draft.remoteSnapshot$.pipe(map(setVersion('draft'))),\n    },\n    published: {\n      ...published,\n      events: merge(reconnect$, published.events).pipe(map(setVersion('published'))),\n      consistency$: published.consistency$,\n      remoteSnapshot$: published.remoteSnapshot$.pipe(map(setVersion('published'))),\n    },\n  }\n}\n","import {Observable} from 'rxjs'\n\nexport function memoize<T, Arg1>(\n  fn: (arg1: Arg1) => Observable<T>,\n  keyGen: (arg1: Arg1) => string\n): (arg1: Arg1) => Observable<T>\nexport function memoize<T, Arg1, Arg2>(\n  fn: (arg1: Arg1, arg2: Arg2) => Observable<T>,\n  keyGen: (arg1: Arg1, arg2: Arg2) => string\n): (arg1: Arg1, arg2: Arg2) => Observable<T>\n\nexport function memoize<T, Arg1, Arg2, Arg3>(\n  fn: (arg1: Arg1, arg2: Arg2, arg3: Arg3) => Observable<T>,\n  keyGen: (arg1: Arg1, arg2: Arg2, arg3: Arg3) => string\n): (arg1: Arg1, arg2: Arg2, arg3: Arg3) => Observable<T>\n\nexport function memoize<T, Arg1, Arg2, Arg3, Arg4>(\n  fn: (arg1: Arg1, arg2: Arg2, arg3: Arg3, arg4: Arg4) => Observable<T>,\n  keyGen: (arg1: Arg1, arg2: Arg2, arg3: Arg3, arg4: Arg4) => string\n): (arg1: Arg1, arg2: Arg2, arg3: Arg3, arg4: Arg4) => Observable<T>\n\nexport function memoize<T, Args>(\n  fn: (...args: Args[]) => Observable<T>,\n  keyGen: (...args: Args[]) => string\n) {\n  const MEMO: {[key: string]: Observable<T>} = Object.create(null)\n  return (...args: any[]) => {\n    const key = keyGen(...args)\n    if (!(key in MEMO)) {\n      MEMO[key] = fn(...args)\n    }\n    return MEMO[key]\n  }\n}\n","import {SanityClient} from '@sanity/client'\nimport {Observable} from 'rxjs'\nimport {publishReplay, refCount} from 'rxjs/operators'\nimport {IdPair} from '../types'\nimport {memoize} from '../utils/createMemoizer'\nimport {checkoutPair, Pair} from './checkoutPair'\n\nexport const memoizedPair: (\n  client: SanityClient,\n  idPair: IdPair,\n  _typeName?: string\n) => Observable<Pair> = memoize(\n  (client: SanityClient, idPair: IdPair, _typeName?: string): Observable<Pair> => {\n    return new Observable<Pair>((subscriber) => {\n      subscriber.next(checkoutPair(client, idPair))\n    }).pipe(publishReplay(1), refCount())\n  },\n  (_client, idPair) => idPair.publishedId\n)\n","import {SanityClient} from '@sanity/client'\nimport {SanityDocument} from '@sanity/types'\nimport {filter, map, publishReplay, refCount} from 'rxjs/operators'\nimport {Observable} from 'rxjs'\nimport {IdPair, Mutation, ReconnectEvent} from '../types'\nimport {BufferedDocumentEvent} from '../buffered-doc/createBufferedDocument'\nimport {SnapshotEvent} from '../buffered-doc/types'\nimport {memoize} from '../utils/createMemoizer'\nimport {memoizedPair} from './memoizedPair'\nimport {DocumentVersion} from './checkoutPair'\n\n// return true if the event comes with a document snapshot\nfunction isSnapshotEvent(event: BufferedDocumentEvent | ReconnectEvent): event is SnapshotEvent & {\n  version: 'published' | 'draft'\n} {\n  return event.type === 'snapshot'\n}\n\nfunction withSnapshots(pair: DocumentVersion): DocumentVersionSnapshots {\n  return {\n    snapshots$: pair.events.pipe(\n      filter(isSnapshotEvent),\n      map((event) => event.document),\n      publishReplay(1),\n      refCount()\n    ),\n\n    patch: pair.patch,\n    create: pair.create,\n    createIfNotExists: pair.createIfNotExists,\n    createOrReplace: pair.createOrReplace,\n    delete: pair.delete,\n\n    mutate: pair.mutate,\n    commit: pair.commit,\n  }\n}\nexport interface DocumentVersionSnapshots {\n  snapshots$: Observable<SanityDocument>\n\n  // helper functions\n  patch: (patches: any[]) => Mutation[]\n  create: (document: any) => Mutation\n  createIfNotExists: (document: any) => Mutation\n  createOrReplace: (document: any) => Mutation\n  delete: () => Mutation\n\n  mutate: (mutations: Mutation[]) => void\n  commit: () => Observable<never>\n}\n\nexport interface SnapshotPair {\n  draft: DocumentVersionSnapshots\n  published: DocumentVersionSnapshots\n}\n\nexport const snapshotPair = memoize(\n  (client: SanityClient, idPair: IdPair, typeName: string) => {\n    return memoizedPair(client, idPair, typeName).pipe(\n      map(({published, draft}): SnapshotPair => {\n        return {\n          published: withSnapshots(published),\n          draft: withSnapshots(draft),\n        }\n      }),\n      publishReplay(1),\n      refCount()\n    )\n  },\n  (_client, idPair, typeName) => idPair.publishedId + typeName\n)\n","/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport {SanityClient} from '@sanity/client'\nimport {Schema} from '@sanity/types'\nimport {combineLatest, Observable} from 'rxjs'\nimport {map, publishReplay, refCount, switchMap} from 'rxjs/operators'\nimport {HistoryStore} from '../../history'\nimport {IdPair, OperationArgs} from '../types'\nimport {memoize} from '../utils/createMemoizer'\nimport {snapshotPair} from './snapshotPair'\n\nexport const operationArgs = memoize(\n  (\n    ctx: {\n      client: SanityClient\n      historyStore: HistoryStore\n      schema: Schema\n    },\n    idPair: IdPair,\n    typeName: string\n  ): Observable<OperationArgs> => {\n    return snapshotPair(ctx.client, idPair, typeName).pipe(\n      switchMap((versions) =>\n        combineLatest([versions.draft.snapshots$, versions.published.snapshots$]).pipe(\n          map(\n            ([draft, published]): OperationArgs => ({\n              ...ctx,\n              idPair,\n              typeName: typeName,\n              snapshots: {draft, published},\n              draft: versions.draft,\n              published: versions.published,\n            })\n          )\n        )\n      ),\n      publishReplay(1),\n      refCount()\n    )\n  },\n  (_ctx, idPair, typeName) => idPair.publishedId + typeName\n)\n","import {Schema} from '@sanity/types'\n\nexport const isLiveEditEnabled = (schema: Schema, typeName: string): boolean =>\n  schema.get(typeName)?.liveEdit === true\n","import type {SanityClient} from '@sanity/client'\nimport {SanityDocument, Schema} from '@sanity/types'\nimport {Observable} from 'rxjs'\nimport {map, publishReplay, refCount, startWith} from 'rxjs/operators'\nimport {HistoryStore} from '../../history'\nimport {IdPair} from '../types'\nimport {operationArgs} from './operationArgs'\nimport {isLiveEditEnabled} from './utils/isLiveEditEnabled'\n\n// TODO: should we rename this?\nexport interface EditStateFor {\n  id: string\n  type: string\n  draft: SanityDocument | null\n  published: SanityDocument | null\n  liveEdit: boolean\n  ready: boolean\n}\n\nexport const editState = (\n  ctx: {\n    client: SanityClient\n    historyStore: HistoryStore\n    schema: Schema\n  },\n  idPair: IdPair,\n  typeName: string\n): Observable<EditStateFor> => {\n  const liveEdit = isLiveEditEnabled(ctx.schema, typeName)\n  return operationArgs(ctx, idPair, typeName).pipe(\n    map(({snapshots}) => ({\n      id: idPair.publishedId,\n      type: typeName,\n      draft: snapshots.draft,\n      published: snapshots.published,\n      liveEdit,\n      ready: true,\n    })),\n    startWith({\n      id: idPair.publishedId,\n      type: typeName,\n      draft: null,\n      published: null,\n      liveEdit,\n      ready: false,\n    }),\n    publishReplay(1),\n    refCount()\n  )\n}\n","import type {Observable} from 'rxjs'\nimport type {MultipleMutationResult} from '@sanity/client'\nimport type {OperationArgs} from '../../types'\nimport {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\n\nexport const del = {\n  disabled: ({snapshots}: OperationArgs): 'NOTHING_TO_DELETE' | false =>\n    snapshots.draft || snapshots.published ? false : 'NOTHING_TO_DELETE',\n  execute: ({\n    client,\n    idPair,\n    schema,\n    typeName,\n  }: OperationArgs): Observable<MultipleMutationResult> => {\n    const tx = client.observable.transaction().delete(idPair.publishedId)\n\n    if (isLiveEditEnabled(schema, typeName)) {\n      return tx.commit({tag: 'document.delete'})\n    }\n\n    return tx.delete(idPair.draftId).commit({\n      tag: 'document.delete',\n      visibility: 'async',\n      // this disables referential integrity for cross-dataset references. we\n      // have this set because we warn against deletes in the `ConfirmDeleteDialog`\n      // UI. This operation is run when \"delete anyway\" is clicked\n      skipCrossDatasetReferenceValidation: true,\n    })\n  },\n}\n","import {omit} from 'lodash'\nimport {isReference} from '@sanity/types'\nimport type {Observable} from 'rxjs'\nimport type {MultipleMutationResult} from '@sanity/client'\nimport type {OperationArgs} from '../../types'\nimport {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\n\nfunction strengthenOnPublish(obj: unknown): any {\n  if (isReference(obj)) {\n    if (obj._strengthenOnPublish) {\n      return omit(\n        obj,\n        ['_strengthenOnPublish'].concat(obj._strengthenOnPublish.weak ? [] : ['_weak'])\n      )\n    }\n    return obj\n  }\n  if (typeof obj !== 'object' || !obj) return obj\n  if (Array.isArray(obj)) return obj.map(strengthenOnPublish)\n  return Object.fromEntries(\n    Object.entries(obj).map(([key, value]) => [key, strengthenOnPublish(value)] as const)\n  )\n}\n\nexport const publish = {\n  disabled: ({\n    schema,\n    typeName,\n    snapshots,\n  }: OperationArgs): 'LIVE_EDIT_ENABLED' | 'ALREADY_PUBLISHED' | 'NO_CHANGES' | false => {\n    if (isLiveEditEnabled(schema, typeName)) {\n      return 'LIVE_EDIT_ENABLED'\n    }\n    if (!snapshots.draft) {\n      return snapshots.published ? 'ALREADY_PUBLISHED' : 'NO_CHANGES'\n    }\n    return false\n  },\n  execute: ({client, idPair, snapshots}: OperationArgs): Observable<MultipleMutationResult> => {\n    const tx = client.observable.transaction()\n\n    if (!snapshots.draft) {\n      throw new Error('cannot execute \"publish\" when draft is missing')\n    }\n\n    const value = strengthenOnPublish(omit(snapshots.draft, '_updatedAt'))\n\n    if (snapshots.published) {\n      // If it exists already, we only want to update it if the revision on the remote server\n      // matches what our local state thinks it's at\n      tx.patch(idPair.publishedId, {\n        // Hack until other mutations support revision locking\n        unset: ['_revision_lock_pseudo_field_'],\n        ifRevisionID: snapshots.published._rev,\n      })\n\n      tx.createOrReplace({\n        ...value,\n        _id: idPair.publishedId,\n        _type: snapshots.draft._type,\n      })\n    } else {\n      // If the document has not been published, we want to create it - if it suddenly exists\n      // before being created, we don't want to overwrite if, instead we want to yield an error\n      tx.create({\n        ...value,\n        _id: idPair.publishedId,\n        _type: snapshots.draft._type,\n      })\n    }\n\n    tx.delete(idPair.draftId)\n\n    return tx.commit({tag: 'document.publish', visibility: 'async'})\n  },\n}\n","import type {OperationArgs} from '../../types'\nimport {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\n\n// todo: we could also consider exposing 'mutate' directly\nexport const patch = {\n  disabled: (): false => false,\n  execute: (\n    {schema, snapshots, idPair, draft, published, typeName}: OperationArgs,\n    patches = [],\n    initialValue: any\n  ): void => {\n    if (isLiveEditEnabled(schema, typeName)) {\n      // No drafting, so patch and commit the published document\n      published.mutate([\n        published.createIfNotExists({\n          _type: typeName,\n          ...initialValue,\n        }),\n        ...published.patch(patches),\n      ])\n    } else {\n      draft.mutate([\n        draft.createIfNotExists({\n          ...initialValue,\n          ...snapshots.published,\n          _id: idPair.draftId,\n          _type: typeName,\n        }),\n        ...draft.patch(patches),\n      ])\n    }\n  },\n}\n","import {merge, Observable} from 'rxjs'\nimport type {OperationArgs} from '../../types'\n\nexport const commit = {\n  disabled: (): false => false,\n  execute: ({draft, published}: OperationArgs): Observable<never> => {\n    return merge(draft.commit(), published.commit())\n  },\n}\n","import type {Observable} from 'rxjs'\nimport type {MultipleMutationResult} from '@sanity/client'\nimport type {OperationArgs} from '../../types'\n\nexport const discardChanges = {\n  disabled: ({snapshots}: OperationArgs): 'NO_CHANGES' | 'NOT_PUBLISHED' | false => {\n    if (!snapshots.draft) {\n      return 'NO_CHANGES'\n    }\n    if (!snapshots.published) {\n      return 'NOT_PUBLISHED'\n    }\n    return false\n  },\n  execute: ({client, idPair}: OperationArgs): Observable<MultipleMutationResult> => {\n    return client.observable\n      .transaction()\n      .delete(idPair.draftId)\n      .commit({tag: 'document.discard-changes', visibility: 'async'})\n  },\n}\n","import {omit} from 'lodash'\nimport type {Observable} from 'rxjs'\nimport type {MultipleMutationResult} from '@sanity/client'\nimport type {OperationArgs} from '../../types'\nimport {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\n\nexport const unpublish = {\n  disabled: ({\n    schema,\n    snapshots,\n    typeName,\n  }: OperationArgs): 'LIVE_EDIT_ENABLED' | 'NOT_PUBLISHED' | false => {\n    if (isLiveEditEnabled(schema, typeName)) {\n      return 'LIVE_EDIT_ENABLED'\n    }\n    return snapshots.published ? false : 'NOT_PUBLISHED'\n  },\n  execute: ({client, idPair, snapshots}: OperationArgs): Observable<MultipleMutationResult> => {\n    let tx = client.observable.transaction().delete(idPair.publishedId)\n\n    if (snapshots.published) {\n      tx = tx.createIfNotExists({\n        ...omit(snapshots.published, '_updatedAt'),\n        _id: idPair.draftId,\n        _type: snapshots.published._type,\n      })\n    }\n\n    return tx.commit({\n      tag: 'document.unpublish',\n      visibility: 'async',\n      // this disables referential integrity for cross-dataset references. we\n      // have this set because we warn against unpublishes in the `ConfirmDeleteDialog`\n      // UI. This operation is run when \"unpublish anyway\" is clicked\n      skipCrossDatasetReferenceValidation: true,\n    })\n  },\n}\n","import {omit} from 'lodash'\nimport type {Observable} from 'rxjs'\nimport type {SanityDocument} from '@sanity/client'\nimport type {OperationArgs} from '../../types'\nimport {getDraftId} from '../../../../util/draftUtils'\nimport {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\n\nconst omitProps = ['_createdAt', '_updatedAt']\n\nexport const duplicate = {\n  disabled: ({snapshots}: OperationArgs): 'NOTHING_TO_DUPLICATE' | false => {\n    return snapshots.published || snapshots.draft ? false : 'NOTHING_TO_DUPLICATE'\n  },\n  execute: (\n    {client, schema, snapshots, typeName}: OperationArgs,\n    dupeId: string\n  ): Observable<SanityDocument> => {\n    const source = snapshots.draft || snapshots.published\n\n    if (!source) {\n      throw new Error('cannot execute on empty document')\n    }\n\n    return client.observable.create(\n      {\n        ...omit(source, omitProps),\n        _id: isLiveEditEnabled(schema, typeName) ? dupeId : getDraftId(dupeId),\n        _type: source._type,\n      },\n      {\n        visibility: 'async',\n        tag: 'document.duplicate',\n      }\n    )\n  },\n}\n","import type {SanityDocument} from '@sanity/client'\nimport type {Observable} from 'rxjs'\nimport type {OperationArgs} from '../../types'\nimport {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\n\nexport const restore = {\n  disabled: (): false => false,\n  execute: (\n    {historyStore, idPair, schema, typeName}: OperationArgs,\n    fromRevision: string\n  ): Observable<SanityDocument> => {\n    const targetId = isLiveEditEnabled(schema, typeName) ? idPair.publishedId : idPair.draftId\n    return historyStore.restore(idPair.publishedId, targetId, fromRevision)\n  },\n}\n","import {SanityClient} from '@sanity/client'\nimport {Observable, combineLatest} from 'rxjs'\nimport {distinctUntilChanged, map, publishReplay, refCount, switchMap} from 'rxjs/operators'\nimport {memoize} from '../utils/createMemoizer'\nimport {IdPair} from '../types'\nimport {memoizedPair} from './memoizedPair'\n\n// A stream of all events related to either published or draft, each event comes with a 'target'\n// that specifies which version (draft|published) the event is about\nexport const consistencyStatus: (\n  client: SanityClient,\n  idPair: IdPair,\n  typeName: string\n) => Observable<boolean> = memoize(\n  (client: SanityClient, idPair: IdPair, typeName: string) => {\n    return memoizedPair(client, idPair, typeName).pipe(\n      switchMap(({draft, published}) =>\n        combineLatest([draft.consistency$, published.consistency$])\n      ),\n      map(\n        ([draftIsConsistent, publishedIsConsistent]) => draftIsConsistent && publishedIsConsistent\n      ),\n      distinctUntilChanged(),\n      publishReplay(1),\n      refCount()\n    )\n  },\n  (_client, idPair, typeName) => idPair.publishedId + typeName\n)\n","import {SanityClient} from '@sanity/client'\nimport {defer, asyncScheduler, merge, Observable, of, Subject, EMPTY} from 'rxjs'\nimport {\n  catchError,\n  filter,\n  groupBy,\n  last,\n  map,\n  mergeMap,\n  mergeMapTo,\n  share,\n  switchMap,\n  take,\n  tap,\n  throttleTime,\n} from 'rxjs/operators'\nimport {Schema} from '@sanity/types'\nimport {IdPair, OperationArgs} from '../types'\nimport {HistoryStore} from '../../history'\nimport {OperationImpl, OperationsAPI} from './operations'\nimport {operationArgs} from './operationArgs'\nimport {del} from './operations/delete'\nimport {publish} from './operations/publish'\nimport {patch} from './operations/patch'\nimport {commit} from './operations/commit'\nimport {discardChanges} from './operations/discardChanges'\nimport {unpublish} from './operations/unpublish'\nimport {duplicate} from './operations/duplicate'\nimport {restore} from './operations/restore'\nimport {consistencyStatus} from './consistencyStatus'\n\ninterface ExecuteArgs {\n  operationName: keyof OperationsAPI\n  idPair: IdPair\n  typeName: string\n  extraArgs: any[]\n}\n\nfunction maybeObservable(v: void | Observable<any>) {\n  return typeof v === 'undefined' ? of(null) : v\n}\n\nconst operationImpls: {[name: string]: OperationImpl<any>} = {\n  del: del,\n  delete: del,\n  publish,\n  patch,\n  commit,\n  discardChanges,\n  unpublish,\n  duplicate,\n  restore,\n}\n\nconst execute = (\n  operationName: keyof typeof operationImpls,\n  operationArguments: OperationArgs,\n  extraArgs: any[]\n): Observable<any> => {\n  const operation = operationImpls[operationName]\n  return defer(() =>\n    merge(of(null), maybeObservable(operation.execute(operationArguments, ...extraArgs)))\n  ).pipe(last())\n}\n\nconst operationCalls$ = new Subject<ExecuteArgs>()\n\nexport function emitOperation(\n  operationName: keyof OperationsAPI,\n  idPair: IdPair,\n  typeName: string,\n  extraArgs: any[]\n): void {\n  operationCalls$.next({operationName, idPair, typeName, extraArgs})\n}\n\n// These are the operations that cannot be performed while the document is in an inconsistent state\nconst REQUIRES_CONSISTENCY = ['publish', 'unpublish', 'discardChanges', 'delete']\n\nexport interface OperationError {\n  type: 'error'\n  op: keyof OperationsAPI\n  id: string\n  error: Error\n}\n\nexport interface OperationSuccess {\n  type: 'success'\n  op: keyof OperationsAPI\n  id: string\n}\n\ninterface IntermediarySuccess {\n  type: 'success'\n  args: ExecuteArgs\n}\n\ninterface IntermediaryError {\n  type: 'error'\n  args: ExecuteArgs\n  error: any\n}\n\nexport type OperationEventsListener = (\n  idPair: IdPair,\n  typeName?: string\n) => Observable<OperationSuccess | OperationError>\n\nconst listenerCache = new Map<string, OperationEventsListener>()\n\nexport function getOperationEvents(ctx: {\n  client: SanityClient\n  historyStore: HistoryStore\n  schema: Schema\n}): OperationEventsListener {\n  const {dataset, projectId} = ctx.client.config()\n  const cacheKey = `${projectId}-${dataset}`\n  if (listenerCache.has(cacheKey)) {\n    return listenerCache.get(cacheKey)!\n  }\n\n  const result$: Observable<IntermediarySuccess | IntermediaryError> = operationCalls$.pipe(\n    groupBy((op) => op.idPair.publishedId),\n    mergeMap((groups$) =>\n      groups$.pipe(\n        // although it might look like a but, dropping pending async operations here is actually a feature\n        // E.g. if the user types `publish` which is async and then starts patching (sync) then the publish\n        // should be cancelled\n        switchMap((args) =>\n          operationArgs(ctx, args.idPair, args.typeName).pipe(\n            take(1),\n            switchMap((operationArguments) => {\n              const requiresConsistency = REQUIRES_CONSISTENCY.includes(args.operationName)\n              if (requiresConsistency) {\n                operationArguments.published.commit()\n                operationArguments.draft.commit()\n              }\n              const isConsistent$ = consistencyStatus(ctx.client, args.idPair, args.typeName).pipe(\n                filter(Boolean)\n              )\n              const ready$ = requiresConsistency ? isConsistent$.pipe(take(1)) : of(null)\n              return ready$.pipe(\n                // eslint-disable-next-line max-nested-callbacks\n                mergeMap(() => execute(args.operationName, operationArguments, args.extraArgs))\n              )\n            }),\n            map((): IntermediarySuccess => ({type: 'success', args})),\n            catchError(\n              (err): Observable<IntermediaryError> => of({type: 'error', args, error: err})\n            )\n          )\n        )\n      )\n    ),\n    share()\n  )\n\n  // this enables autocommit after patch operations\n  const AUTOCOMMIT_INTERVAL = 1000\n  const autoCommit$ = result$.pipe(\n    filter((result) => result.type === 'success' && result.args.operationName === 'patch'),\n    throttleTime(AUTOCOMMIT_INTERVAL, asyncScheduler, {leading: true, trailing: true}),\n    tap((result) => {\n      emitOperation('commit', result.args.idPair, result.args.typeName, [])\n    })\n  )\n\n  const cache = new Map<string, Observable<OperationSuccess | OperationError>>()\n\n  function listener(\n    idPair: IdPair,\n    typeName?: string\n  ): Observable<OperationSuccess | OperationError> {\n    const key = `${idPair.publishedId}:${typeName}`\n\n    let ret = cache.get(key)\n\n    if (!ret) {\n      ret = merge(result$, autoCommit$.pipe(mergeMapTo(EMPTY))).pipe(\n        filter((result) => result.args.idPair.publishedId === idPair.publishedId),\n        map((result): OperationSuccess | OperationError => {\n          const {operationName, idPair: documentIds} = result.args\n          return result.type === 'success'\n            ? {type: 'success', op: operationName, id: documentIds.publishedId}\n            : {type: 'error', op: operationName, id: documentIds.publishedId, error: result.error}\n        })\n      )\n\n      cache.set(key, ret)\n    }\n\n    return ret\n  }\n\n  listenerCache.set(cacheKey, listener)\n\n  return listener\n}\n","import {IdPair, OperationArgs} from '../../types'\nimport {emitOperation} from '../operationEvents'\nimport {del} from './delete'\nimport {publish} from './publish'\nimport {patch} from './patch'\nimport {commit} from './commit'\nimport {discardChanges} from './discardChanges'\nimport {unpublish} from './unpublish'\nimport {duplicate} from './duplicate'\nimport {restore} from './restore'\n\n/* Ok, this became a bit messy - sorry\n *  The important thing to consider here is the PublicOperations interface -\n *  as long as this is properly typed, how everything else is implemented doesn't matter\n *  */\n\nexport interface GuardedOperation {\n  disabled: 'NOT_READY'\n  execute: () => never\n}\n\nexport type WrappedOperation<ErrorStrings> = {\n  disabled: false | ErrorStrings\n  execute: () => void\n}\n\nexport type OperationImpl<ErrorStrings> = {\n  disabled: (args: OperationArgs) => false | ErrorStrings\n  execute(args: OperationArgs, ...extra: any[]): void\n}\n\nexport type Operation<DisabledReasons = false> =\n  | GuardedOperation\n  | WrappedOperation<DisabledReasons>\n\n// Note: Changing this interface in a backwards incompatible manner will be a breaking change\nexport interface OperationsAPI {\n  commit: Operation\n  delete: Operation<'NOTHING_TO_DELETE'>\n  del: Operation<'NOTHING_TO_DELETE'>\n  publish: Operation<'LIVE_EDIT_ENABLED' | 'ALREADY_PUBLISHED' | 'NO_CHANGES'>\n  patch: Operation<(patches: any[]) => void>\n  discardChanges: Operation<'NO_CHANGES' | 'NOT_PUBLISHED'>\n  unpublish: Operation<'LIVE_EDIT_ENABLED' | 'NOT_PUBLISHED'>\n  duplicate: Operation<'NOTHING_TO_DUPLICATE'>\n  restore: Operation<(revision: string) => Promise<void>>\n}\n\nfunction createOperationGuard(opName: string): GuardedOperation {\n  return {\n    disabled: 'NOT_READY',\n    execute: () => {\n      throw new Error(`Called ${opName} before it was ready.`)\n    },\n  }\n}\n\n// This creates a version of the operations api that will throw if called.\n// Most operations depend on having the \"current document state\" available locally and if an action gets called\n// before we have the state available, we throw an error to signal \"premature\" invocation before ready\nexport const GUARDED: OperationsAPI = {\n  commit: createOperationGuard('commit'),\n  delete: createOperationGuard('delete'),\n  del: createOperationGuard('del'),\n  publish: createOperationGuard('publish'),\n  patch: createOperationGuard('patch'),\n  discardChanges: createOperationGuard('discardChanges'),\n  unpublish: createOperationGuard('unpublish'),\n  duplicate: createOperationGuard('duplicate'),\n  restore: createOperationGuard('restore'),\n}\n\nconst createEmitter = (operationName: keyof OperationsAPI, idPair: IdPair, typeName: string) => {\n  return (...executeArgs: any[]) => {\n    return emitOperation(operationName, idPair, typeName, executeArgs)\n  }\n}\n\nfunction wrap<ErrorStrings>(\n  opName: keyof OperationsAPI,\n  op: OperationImpl<ErrorStrings>,\n  operationArgs: OperationArgs\n): WrappedOperation<ErrorStrings> {\n  const disabled = op.disabled(operationArgs)\n  return {\n    disabled,\n    execute: createEmitter(opName, operationArgs.idPair, operationArgs.typeName),\n  }\n}\n\nexport function createOperationsAPI(args: OperationArgs): OperationsAPI {\n  return {\n    commit: wrap('commit', commit, args),\n    delete: wrap('delete', del, args),\n    del: wrap('delete', del, args),\n    publish: wrap('publish', publish, args),\n    patch: wrap('patch', patch, args),\n    discardChanges: wrap('discardChanges', discardChanges, args),\n    unpublish: wrap('unpublish', unpublish, args),\n    duplicate: wrap('duplicate', duplicate, args),\n    restore: wrap('restore', restore, args),\n  }\n}\n","import {SanityClient} from '@sanity/client'\nimport {merge} from 'rxjs'\nimport {switchMap} from 'rxjs/operators'\nimport {IdPair} from '../types'\nimport {memoize} from '../utils/createMemoizer'\nimport {memoizedPair} from './memoizedPair'\n\nexport const remoteSnapshots = memoize(\n  (client: SanityClient, idPair: IdPair, typeName: string) => {\n    return memoizedPair(client, idPair, typeName).pipe(\n      switchMap(({published, draft}) => merge(published.remoteSnapshot$, draft.remoteSnapshot$))\n    )\n  },\n  (_client, idPair, typeName) => idPair.publishedId + typeName\n)\n","import type {SanityClient} from '@sanity/client'\nimport {concat, of, combineLatest, defer, from, Observable} from 'rxjs'\nimport {\n  map,\n  scan,\n  switchMap,\n  mergeMap,\n  publishReplay,\n  refCount,\n  share,\n  distinctUntilChanged,\n  debounceTime,\n  first,\n} from 'rxjs/operators'\nimport {validateDocument} from '@sanity/validation'\nimport {ValidationMarker, ValidationContext, isReference, Schema} from '@sanity/types'\nimport reduceJSON from 'json-reduce'\nimport {SourceClientOptions} from '../../../config'\nimport {memoize} from '../utils/createMemoizer'\nimport {IdPair} from '../types'\nimport {HistoryStore} from '../../history'\nimport {DocumentPreviewStore} from '../../../preview'\nimport {editState} from './editState'\n\nexport interface ValidationStatus {\n  isValidating: boolean\n  validation: ValidationMarker[]\n}\n\nconst INITIAL_VALIDATION_STATUS: ValidationStatus = {isValidating: true, validation: []}\n\nfunction findReferenceIds(obj: any): Set<string> {\n  return reduceJSON(\n    obj,\n    (acc, node) => {\n      if (isReference(node)) {\n        acc.add(node._ref)\n      }\n      return acc\n    },\n    new Set<string>()\n  )\n}\n\ntype GetDocumentExists = NonNullable<ValidationContext['getDocumentExists']>\n\nconst listenDocumentExists = (\n  previewStore: DocumentPreviewStore,\n  id: string\n): Observable<boolean> =>\n  previewStore\n    .unstable_observeDocumentPairAvailability({_type: 'reference', _ref: id})\n    .pipe(map(({published}) => published.available))\n\nexport const validation = memoize(\n  (\n    ctx: {\n      client: SanityClient\n      getClient: (options: SourceClientOptions) => SanityClient\n      documentPreviewStore: DocumentPreviewStore\n      historyStore: HistoryStore\n      schema: Schema\n    },\n    {draftId, publishedId}: IdPair,\n    typeName: string\n  ): Observable<ValidationStatus> => {\n    const getDocumentExists: GetDocumentExists = ({id}) =>\n      listenDocumentExists(ctx.documentPreviewStore, id).pipe(first()).toPromise()\n\n    const document$ = editState(ctx, {draftId, publishedId}, typeName).pipe(\n      map(({draft, published}) => draft || published),\n      // this debounce is needed for performance. it prevents the validation\n      // from being run on every keypress\n      debounceTime(300),\n      share()\n    )\n\n    const referenceIds$ = document$.pipe(\n      map((document) => findReferenceIds(document)),\n      distinctUntilChanged((curr, next) => {\n        if (curr.size !== next.size) return false\n        for (const item of curr) {\n          if (!next.has(item)) return false\n        }\n        return true\n      })\n    )\n\n    const referencedDocumentUpdate$ = referenceIds$.pipe(\n      switchMap((idSet) =>\n        from(idSet).pipe(\n          mergeMap((id) =>\n            listenDocumentExists(ctx.documentPreviewStore, id).pipe(\n              map(\n                // eslint-disable-next-line max-nested-callbacks\n                (result) => [id, result] as const\n              )\n            )\n          ),\n          // the `debounceTime` in the next stream removes multiple emissions\n          // caused by this scan\n          scan(\n            (acc, [id, result]) => ({\n              ...acc,\n              [id]: result,\n            }),\n            {} as Record<string, boolean>\n          )\n        )\n      ),\n      distinctUntilChanged((curr, next) => {\n        const currKeys = Object.keys(curr)\n        const nextKeys = Object.keys(next)\n        if (currKeys.length !== nextKeys.length) return false\n        for (const key of currKeys) {\n          if (curr[key] !== next[key]) return false\n        }\n        return true\n      })\n    )\n\n    return combineLatest([\n      // from document edits\n      document$,\n      // and from document dependency events\n      concat(\n        // note: that the `referencedDocumentUpdate$` may not pre-emit any\n        // events (unlike `editState` which includes `publishReplay(1)`), so\n        // we `concat` the stream with an empty emission so `combineLatest` will\n        // emit as soon as `editState` emits\n        //\n        // > Be aware that `combineLatest` will not emit an initial value until\n        // > each observable emits at least one value.\n        // https://www.learnrxjs.io/learn-rxjs/operators/combination/combinelatest#why-use-combinelatest\n        of(null),\n        referencedDocumentUpdate$\n      ).pipe(\n        // don't remove, see `debounceTime` comment above\n        debounceTime(50)\n      ),\n    ]).pipe(\n      map(([document]) => document),\n      switchMap((document) =>\n        concat(\n          of({isValidating: true}),\n          defer(async () => {\n            if (!document?._type) {\n              return {validation: [], isValidating: false}\n            }\n\n            // TODO: consider cancellation eventually\n            const markers = await validateDocument(ctx.getClient, document, ctx.schema, {\n              getDocumentExists,\n            })\n\n            return {validation: markers, isValidating: false}\n          })\n        )\n      ),\n      scan((acc, next) => ({...acc, ...next}), INITIAL_VALIDATION_STATUS),\n      publishReplay(1),\n      refCount()\n    )\n  },\n  (_ctx, idPair) => idPair.publishedId\n)\n","import {SanityClient} from '@sanity/client'\nimport {merge, Observable} from 'rxjs'\nimport {switchMap} from 'rxjs/operators'\nimport {IdPair} from '../types'\nimport {DocumentVersionEvent} from './checkoutPair'\nimport {memoizedPair} from './memoizedPair'\n\n// A stream of all events related to either published or draft, each event comes with a 'target'\n// that specifies which version (draft|published) the event is about\nexport function documentEvents(\n  client: SanityClient,\n  idPair: IdPair,\n  typeName?: string\n): Observable<DocumentVersionEvent> {\n  return memoizedPair(client, idPair).pipe(\n    switchMap(({draft, published}) => merge(draft.events, published.events))\n  )\n}\n","import {SanityClient} from '@sanity/client'\nimport {Schema} from '@sanity/types'\nimport {concat, merge, Observable, of, EMPTY} from 'rxjs'\nimport {map, publishReplay, refCount, mergeMapTo} from 'rxjs/operators'\nimport {HistoryStore} from '../../history'\nimport {IdPair} from '../types'\nimport {operationArgs} from './operationArgs'\nimport {getOperationEvents} from './operationEvents'\nimport {createOperationsAPI, GUARDED, OperationsAPI} from './operations'\n\nconst cache = new Map<string, Observable<OperationsAPI>>()\n\nexport const editOperations = (\n  ctx: {\n    client: SanityClient\n    historyStore: HistoryStore\n    schema: Schema\n  },\n  idPair: IdPair,\n  typeName: string\n): Observable<OperationsAPI> => {\n  const key = `${idPair.publishedId}:${typeName}`\n  let ret = cache.get(key)\n\n  if (!ret) {\n    const operationEvents = getOperationEvents(ctx)\n\n    // To makes sure we connect the stream that actually performs the operations\n    const operationResults$: Observable<never> = operationEvents(idPair, typeName).pipe(\n      mergeMapTo(EMPTY)\n    )\n\n    const operationArgs$ = operationArgs(ctx, idPair, typeName)\n\n    const operations$ = operationArgs$.pipe(map(createOperationsAPI))\n\n    ret = concat(of(GUARDED), merge(operationResults$, operations$)).pipe(\n      publishReplay(1),\n      refCount()\n    )\n\n    cache.set(key, ret)\n  }\n\n  return ret\n}\n","import {SanityClient} from '@sanity/client'\nimport {defer, partition, merge, of, throwError, asyncScheduler, Observable} from 'rxjs'\nimport {mergeMap, throttleTime, share, take, filter} from 'rxjs/operators'\nimport {exhaustMapToWithTrailing} from 'rxjs-exhaustmap-with-trailing'\nimport {ReconnectEvent, WelcomeEvent, MutationEvent} from './types'\n\nexport type ListenQueryParams = Record<string, string | number | boolean | string[]>\n\nexport interface ListenQueryOptions {\n  tag?: string\n  apiVersion?: string\n  throttleTime?: number\n  transitions?: ('update' | 'appear' | 'disappear')[]\n}\n\nconst fetch = (\n  client: SanityClient,\n  query: string,\n  params: ListenQueryParams,\n  options: ListenQueryOptions\n) =>\n  defer(() =>\n    // getVersionedClient(options.apiVersion)\n    client.observable.fetch(query, params, {\n      tag: options.tag,\n      filterResponse: true,\n    })\n  )\n\nconst listen = (\n  client: SanityClient,\n  query: string,\n  params: ListenQueryParams,\n  options: ListenQueryOptions\n) =>\n  defer(() =>\n    // getVersionedClient(options.apiVersion)\n    client.listen(query, params, {\n      events: ['welcome', 'mutation', 'reconnect'],\n      includeResult: false,\n      visibility: 'query',\n      tag: options.tag,\n    })\n  ) as Observable<ReconnectEvent | WelcomeEvent | MutationEvent>\n\nfunction isWelcomeEvent(\n  event: MutationEvent | ReconnectEvent | WelcomeEvent\n): event is WelcomeEvent {\n  return event.type === 'welcome'\n}\n\n// todo: promote as building block for better re-use\n// todo: optimize by patching collection in-place\nexport const listenQuery = (\n  client: SanityClient,\n  query: string | {fetch: string; listen: string},\n  params: ListenQueryParams = {},\n  options: ListenQueryOptions = {}\n) => {\n  const fetchQuery = typeof query === 'string' ? query : query.fetch\n  const listenerQuery = typeof query === 'string' ? query : query.listen\n\n  const fetchOnce$ = fetch(client, fetchQuery, params, options)\n\n  const events$ = listen(client, listenerQuery, params, options).pipe(\n    mergeMap((ev, i) => {\n      const isFirst = i === 0\n      if (isFirst && !isWelcomeEvent(ev)) {\n        // if the first event is not welcome, it is most likely a reconnect and\n        // if it's not a reconnect something is very wrong\n        return throwError(\n          new Error(\n            ev.type === 'reconnect'\n              ? 'Could not establish EventSource connection'\n              : `Received unexpected type of first event \"${ev.type}\"`\n          )\n        )\n      }\n      return of(ev)\n    }),\n    share()\n  )\n\n  const [welcome$, mutationAndReconnect$] = partition(events$, isWelcomeEvent)\n  const isRelevantEvent = (event: MutationEvent | ReconnectEvent | WelcomeEvent): boolean => {\n    if (!options.transitions || event.type !== 'mutation') {\n      return true\n    }\n\n    return options.transitions.includes(event.transition)\n  }\n\n  return merge(\n    welcome$.pipe(take(1)),\n    mutationAndReconnect$.pipe(\n      filter(isRelevantEvent),\n      throttleTime(options.throttleTime || 1000, asyncScheduler, {leading: true, trailing: true})\n    )\n  ).pipe(exhaustMapToWithTrailing(fetchOnce$))\n}\n","import {SanityClient} from '@sanity/client'\nimport type {Observable} from 'rxjs'\nimport {of} from 'rxjs'\nimport {map} from 'rxjs/operators'\nimport {getPublishedId, getDraftId} from '../../util/draftUtils'\n\nexport function resolveTypeForDocument(\n  client: SanityClient,\n  id: string,\n  specifiedType = '*'\n): Observable<string> {\n  // if is resolved document type\n  if (specifiedType && specifiedType !== '*') {\n    return of(specifiedType)\n  }\n\n  const query = '*[_id in [$documentId, $draftId]]._type'\n  const documentId = getPublishedId(id)\n  const draftId = getDraftId(documentId)\n\n  return client.observable.fetch(query, {documentId, draftId}).pipe(map((types) => types[0]))\n}\n","import {isPlainObject} from 'lodash'\n\nexport function isRecord(value: unknown): value is Record<string, unknown> {\n  return isPlainObject(value)\n}\n","import {toString as pathToString} from '@sanity/util/paths'\nimport {randomKey} from '@sanity/util/content'\nimport {Schema} from '@sanity/types'\nimport {TemplateParameter, Template} from './types'\nimport {isRecord} from './util/isRecord'\n\nconst ALLOWED_REF_PROPS = ['_key', '_ref', '_weak', '_type']\nconst REQUIRED_TEMPLATE_PROPS: (keyof Template)[] = ['id', 'title', 'schemaType', 'value']\n\nfunction templateId(template: Template, i: number) {\n  return quote(template.id || template.title) || (typeof i === 'number' && `at index ${i}`) || ''\n}\n\nfunction quote(str: string) {\n  return str && str.length > 0 ? `\"${str}\"` : str\n}\n\nexport function validateTemplates(schema: Schema, templates: Template[]): Template[] {\n  const idMap = new Map()\n\n  templates.forEach((template, i) => {\n    const id = templateId(template, i)\n\n    if (typeof (template as {[key: string]: any}).values !== 'undefined' && !template.value) {\n      throw new Error(`Template ${id} is missing \"value\" property, but contained \"values\". Typo?`)\n    }\n\n    const missing = REQUIRED_TEMPLATE_PROPS.filter((prop) => !template[prop])\n    if (missing.length > 0) {\n      throw new Error(`Template ${id} is missing required properties: ${missing.join(', ')}`)\n    }\n\n    if (typeof template.value !== 'function' && !isRecord(template.value)) {\n      throw new Error(\n        `Template ${id} has an invalid \"value\" property; should be a function or an object`\n      )\n    }\n\n    if (typeof template.parameters !== 'undefined') {\n      if (Array.isArray(template.parameters)) {\n        template.parameters.forEach((param, j) => validateParameter(schema, param, template, j))\n      } else {\n        throw new Error(`Template ${id} has an invalid \"parameters\" property; must be an array`)\n      }\n    }\n\n    if (idMap.has(template.id)) {\n      const dupeIndex = idMap.get(template.id)\n      const dupe = `${quote(templates[dupeIndex].title)} at index ${dupeIndex}`\n      throw new Error(\n        `Template \"${template.title}\" at index ${i} has the same ID (\"${template.id}\") as template ${dupe}`\n      )\n    }\n\n    idMap.set(template.id, i)\n  })\n\n  return templates\n}\n\nexport function validateInitialObjectValue<T extends Record<string, unknown>>(\n  value: T,\n  template: Template\n): T {\n  const contextError = (msg: string) => `Template \"${template.id}\" initial value: ${msg}`\n\n  if (!isRecord(value)) {\n    throw new Error(contextError(`resolved to a non-object`))\n  }\n\n  if (value._type && template.schemaType !== value._type) {\n    throw new Error(\n      contextError(\n        `includes \"_type\"-property (${value._type}) that does not match template (${template.schemaType})`\n      )\n    )\n  }\n\n  try {\n    return validateValue(value)\n  } catch (err) {\n    err.message = contextError(err.message)\n    throw err\n  }\n}\n\nfunction validateValue(value: unknown, path: (string | number)[] = [], parentIsArray = false): any {\n  if (Array.isArray(value)) {\n    return value.map((item, i) => {\n      if (Array.isArray(item)) {\n        throw new Error(\n          `multidimensional arrays are not supported (at path \"${pathToString(path)}\")`\n        )\n      }\n\n      return validateValue(item, path.concat(i), true)\n    })\n  }\n\n  if (!isRecord(value)) {\n    return value\n  }\n\n  // Apply missing keys is the parent is an array\n  const initial: {[key: string]: any} = parentIsArray && !value._key ? {_key: randomKey()} : {}\n\n  // Ensure non-root objects have _type\n  if (path.length > 0 && !value._type) {\n    if (value._ref) {\n      // In the case of references, we know what the type should be, so apply it\n      initial._type = 'reference'\n    } else {\n      // todo: consider if we need to re-instantiate this. It currently makes the valid case of having an initial object value for a field fail\n      // throw new Error(`missing \"_type\" property at path \"${pathToString(path)}\"`)\n    }\n  }\n\n  if (value._ref) {\n    validateReference(value, path)\n  }\n\n  // Validate deeply\n  return Object.keys(value).reduce((acc, key) => {\n    acc[key] = validateValue(value[key], path.concat([key]))\n    return acc\n  }, initial)\n}\n\nfunction validateParameter(\n  schema: Schema,\n  parameter: TemplateParameter,\n  template: Template,\n  index: number\n) {\n  // const schema = getDefaultSchema()\n\n  if (!parameter.name) {\n    throw new Error(\n      `Template ${template.id} has a parameter at index ${index} that is missing its \"name\"-property`\n    )\n  }\n\n  // I know, this is a weird one\n  if (parameter.name === 'template') {\n    throw new Error(\n      `Template parameters cannot be named \"template\", see parameter #${index} for template ${template.id}`\n    )\n  }\n\n  if (!schema.get(parameter.type)) {\n    throw new Error(\n      `Template parameter \"${parameter.name}\" has an invalid/unknown type: \"${parameter.type}\"`\n    )\n  }\n}\n\nfunction validateReference(\n  value: {_type?: unknown; type?: unknown},\n  path: (string | number)[] = []\n) {\n  if (!value._type && value.type) {\n    throw new Error(\n      `Reference is missing \"_type\", but has a \"type\" property at path \"${pathToString(path)}\"`\n    )\n  }\n\n  const disallowed = Object.keys(value).filter((key) => !ALLOWED_REF_PROPS.includes(key))\n  if (disallowed.length > 0) {\n    const plural = disallowed.length > 1 ? 'properties' : 'property'\n    throw new Error(\n      `Disallowed ${plural} found in reference: ${disallowed\n        .map(quote)\n        .join(', ')} at path \"${pathToString(path)}\"`\n    )\n  }\n}\n","import {isRecord} from './isRecord'\n\n// deep object assign for objects\n// note: doesn't mutate target\nexport default function deepAssign(\n  target: Record<string, unknown>,\n  source: Record<string, unknown>\n): Record<string, unknown> {\n  const result = {...target, ...source}\n\n  Object.keys(result).forEach((key) => {\n    const sourceVal = source[key]\n    const targetVal = target[key]\n    if (isRecord(sourceVal) && isRecord(targetVal)) {\n      result[key] = deepAssign(targetVal, sourceVal)\n    }\n  })\n  return result\n}\n","import {\n  ArraySchemaType,\n  InitialValueProperty,\n  InitialValueResolver,\n  InitialValueResolverContext,\n  isArraySchemaType,\n  isObjectSchemaType,\n  ObjectSchemaType,\n  Schema,\n  SchemaType,\n} from '@sanity/types'\nimport {isEmpty, randomKey, resolveTypeName} from '@sanity/util/content'\nimport {isRecord} from './util/isRecord'\nimport {Template} from './types'\nimport {validateInitialObjectValue} from './validate'\nimport deepAssign from './util/deepAssign'\n\ntype Serializeable<T> = {\n  serialize(): T\n}\n\nexport function isBuilder(template: unknown): template is Serializeable<Template> {\n  return isRecord(template) && typeof template.serialize === 'function'\n}\n\n// returns the \"resolved\" value from an initial value property (e.g. type.initialValue)\n// eslint-disable-next-line require-await\nexport async function resolveValue<Params, InitialValue>(\n  initialValueOpt: InitialValueProperty<Params, InitialValue>,\n  params: Params | undefined,\n  context: InitialValueResolverContext\n): Promise<InitialValue | undefined> {\n  return typeof initialValueOpt === 'function'\n    ? (initialValueOpt as InitialValueResolver<Params, InitialValue>)(params, context)\n    : initialValueOpt\n}\n\nexport async function resolveInitialValue(\n  schema: Schema,\n  template: Template,\n  params: {[key: string]: any} = {},\n  context: InitialValueResolverContext\n): Promise<{[key: string]: any}> {\n  // Template builder?\n  if (isBuilder(template)) {\n    return resolveInitialValue(schema, template.serialize(), params, context)\n  }\n\n  const {id, schemaType: schemaTypeName, value} = template\n  if (!value) {\n    throw new Error(`Template \"${id}\" has invalid \"value\" property`)\n  }\n\n  let resolvedValue = await resolveValue(value, params, context)\n\n  if (!isRecord(resolvedValue)) {\n    throw new Error(\n      `Template \"${id}\" has invalid \"value\" property - must be a plain object or a resolver function returning a plain object`\n    )\n  }\n\n  // validate default document initial values\n  resolvedValue = validateInitialObjectValue(resolvedValue, template)\n\n  // Get deep initial values from schema types (note: the initial value from template overrides the types)\n  const schemaType = schema.get(schemaTypeName)\n  if (!schemaType) {\n    throw new Error(`Could not find schema type with name \"${schemaTypeName}\".`)\n  }\n\n  const newValue = deepAssign(\n    (await resolveInitialValueForType(schemaType, params, DEFAULT_MAX_RECURSION_DEPTH, context)) ||\n      {},\n    resolvedValue as Record<string, unknown>\n  )\n\n  // revalidate and return new initial values\n  // todo: would be better to do validation as part of type resolution\n  return validateInitialObjectValue(newValue, template)\n}\n\nexport function getItemType(arrayType: ArraySchemaType, item: unknown): SchemaType | undefined {\n  const itemTypeName = resolveTypeName(item)\n\n  return itemTypeName === 'object' && arrayType.of.length === 1\n    ? arrayType.of[0]\n    : arrayType.of.find((memberType) => memberType.name === itemTypeName)\n}\n\nexport const DEFAULT_MAX_RECURSION_DEPTH = 10\n\n/**\n * Resolve initial value for the given schema type (recursively)\n */\nexport function resolveInitialValueForType<Params extends Record<string, unknown>>(\n  /**\n   * This is the name of the document.\n   */\n  type: SchemaType,\n  /**\n   * Params is a sanity context object passed to every initial value function.\n   */\n  params: Params,\n  /**\n   * Maximum recursion depth (default 9).\n   */\n  maxDepth = DEFAULT_MAX_RECURSION_DEPTH,\n  context: InitialValueResolverContext\n): Promise<any> {\n  if (maxDepth <= 0) {\n    return Promise.resolve(undefined)\n  }\n\n  if (isObjectSchemaType(type)) {\n    return resolveInitialObjectValue(type, params, maxDepth, context)\n  }\n\n  if (isArraySchemaType(type)) {\n    return resolveInitialArrayValue(type, params, maxDepth, context)\n  }\n\n  return resolveValue(type.initialValue, params, context)\n}\n\nasync function resolveInitialArrayValue<Params extends Record<string, unknown>>(\n  type: SchemaType,\n  params: Params,\n  maxDepth: number,\n  context: InitialValueResolverContext\n): Promise<any> {\n  const initialArray = await resolveValue(type.initialValue, undefined, context)\n\n  if (!Array.isArray(initialArray)) {\n    return undefined\n  }\n\n  return Promise.all(\n    initialArray.map(async (initialItem) => {\n      const itemType = getItemType(type as ArraySchemaType, initialItem)!\n      return isObjectSchemaType(itemType)\n        ? {\n            ...initialItem,\n            ...(await resolveInitialValueForType(itemType, params, maxDepth - 1, context)),\n            _key: randomKey(),\n          }\n        : initialItem\n    })\n  )\n}\n\nexport async function resolveInitialObjectValue<Params extends Record<string, unknown>>(\n  type: ObjectSchemaType,\n  params: Params,\n  maxDepth: number,\n  context: InitialValueResolverContext\n): Promise<any> {\n  const initialObject: Record<string, unknown> = {\n    ...((await resolveValue(type.initialValue, params, context)) || {}),\n  }\n\n  const fieldValues: Record<string, any> = {}\n  await Promise.all(\n    type.fields.map(async (field) => {\n      const initialFieldValue = await resolveInitialValueForType(\n        field.type,\n        params,\n        maxDepth - 1,\n        context\n      )\n      if (initialFieldValue !== undefined && initialFieldValue !== null) {\n        fieldValues[field.name] = initialFieldValue\n      }\n    })\n  )\n\n  const merged = deepAssign(fieldValues, initialObject)\n\n  if (isEmpty(merged)) {\n    return undefined\n  }\n\n  if (type.name !== 'object') {\n    merged._type = type.name\n  }\n\n  return merged\n}\n","import {InitialValueResolverContext, Schema} from '@sanity/types'\nimport {from, merge, Observable, of} from 'rxjs'\nimport {\n  map,\n  switchMap,\n  scan,\n  filter,\n  distinctUntilChanged,\n  catchError,\n  debounceTime,\n  startWith,\n} from 'rxjs/operators'\nimport {DocumentPreviewStore} from '../../../preview'\nimport {Template, resolveInitialValue} from '../../../templates'\nimport {getDraftId, getPublishedId} from '../../../util'\nimport {\n  InitialValueErrorMsg,\n  InitialValueLoadingMsg,\n  InitialValueSuccessMsg,\n  InitialValueMsg,\n} from './types'\n\nexport interface InitialValueOptions {\n  documentId: string\n  documentType: string\n  templateName?: string\n  templateParams?: Record<string, any>\n}\n\nconst LOADING_MSG: InitialValueLoadingMsg = {type: 'loading'}\n\n/**\n * @internal\n */\nexport function getInitialValueStream(\n  schema: Schema,\n  initialValueTemplates: Template[],\n  documentPreviewStore: DocumentPreviewStore,\n  opts: InitialValueOptions,\n  context: InitialValueResolverContext\n): Observable<InitialValueMsg> {\n  const draft$ = documentPreviewStore.observePaths(\n    {_type: 'reference', _ref: getDraftId(opts.documentId)},\n    ['_type']\n  )\n\n  const published$ = documentPreviewStore.observePaths(\n    {_type: 'reference', _ref: getPublishedId(opts.documentId)},\n    ['_type']\n  )\n\n  const value$ = merge(\n    draft$.pipe(map((draft) => ({draft}))),\n    published$.pipe(map((published) => ({published})))\n  ).pipe(\n    scan((prev, res) => ({...prev, ...res}), {}),\n    // Wait until we know the state of both draft and published\n    filter((res) => 'draft' in res && 'published' in res),\n    map((res: any) => res.draft || res.published),\n    // Only update if we didn't previously have a document but we now do\n    distinctUntilChanged((prev, next) => Boolean(prev) !== Boolean(next)),\n    // Prevent rapid re-resolving when transitioning between different templates\n    debounceTime(25)\n  )\n\n  return value$.pipe(\n    switchMap((document) => {\n      // Already exists, so no initial value is needed\n      if (document) {\n        return of({type: 'success', value: null})\n      }\n\n      if (!opts.templateName) {\n        // @todo: Make sure this is the correct behavior\n        return of({isResolving: false, initialValue: undefined})\n      }\n\n      const template = initialValueTemplates.find((t) => t.id === opts.templateName)\n\n      if (!template) {\n        // eslint-disable-next-line no-console\n        console.warn('Template \"%s\" not defined, using empty initial value', opts.templateName)\n        return of({isResolving: false, initialValue: undefined})\n      }\n\n      const initialValueWithParams$ = from(\n        resolveInitialValue(schema, template, opts.templateParams, context)\n      )\n        .pipe(map((initialValue) => ({isResolving: false, initialValue})))\n        .pipe(\n          catchError((resolveError) => {\n            /* eslint-disable no-console */\n            console.group('Failed to resolve initial value')\n            console.error(resolveError)\n            console.error('Template ID: %s', opts.templateName)\n            console.error('Parameters: %o', opts.templateParams)\n            console.groupEnd()\n            /* eslint-enable no-console */\n\n            const msg: InitialValueErrorMsg = {type: 'error', error: resolveError}\n\n            return of(msg)\n          })\n        )\n\n      return merge(of({isResolving: true}), initialValueWithParams$).pipe(\n        switchMap(({isResolving, initialValue, resolveError}: any) => {\n          if (resolveError) {\n            return of({type: 'error', message: 'Failed to resolve initial value'})\n          }\n\n          if (isResolving) {\n            return of(LOADING_MSG)\n          }\n\n          const msg: InitialValueSuccessMsg = {type: 'success', value: initialValue}\n\n          return of(msg)\n        })\n      )\n    }),\n\n    startWith(LOADING_MSG),\n    distinctUntilChanged()\n  ) as Observable<InitialValueMsg>\n}\n","import type {SanityClient} from '@sanity/client'\nimport type {InitialValueResolverContext, Schema} from '@sanity/types'\nimport type {Observable} from 'rxjs'\nimport type {SourceClientOptions} from '../../config'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../studioClient'\nimport {getDraftId, isDraftId} from '../../util'\nimport type {HistoryStore} from '../history'\nimport type {DocumentPreviewStore} from '../../preview'\nimport type {Template} from '../../templates'\nimport {checkoutPair, DocumentVersionEvent, Pair} from './document-pair/checkoutPair'\nimport {consistencyStatus} from './document-pair/consistencyStatus'\nimport {documentEvents} from './document-pair/documentEvents'\nimport {editOperations} from './document-pair/editOperations'\nimport {editState, EditStateFor} from './document-pair/editState'\nimport {getOperationEvents, OperationError, OperationSuccess} from './document-pair/operationEvents'\nimport {OperationsAPI} from './document-pair/operations'\nimport {validation, ValidationStatus} from './document-pair/validation'\nimport {listenQuery, ListenQueryOptions} from './listenQuery'\nimport {resolveTypeForDocument} from './resolveTypeForDocument'\nimport type {IdPair} from './types'\nimport {getInitialValueStream, InitialValueMsg, InitialValueOptions} from './initialValue'\n\nexport type QueryParams = Record<string, string | number | boolean | string[]>\n\nfunction getIdPairFromPublished(publishedId: string): IdPair {\n  if (isDraftId(publishedId)) {\n    throw new Error('editOpsOf does not expect a draft id.')\n  }\n\n  return {publishedId, draftId: getDraftId(publishedId)}\n}\n\nexport interface DocumentStore {\n  checkoutPair: (idPair: IdPair) => Pair\n  initialValue: (\n    opts: InitialValueOptions,\n    context: InitialValueResolverContext\n  ) => Observable<InitialValueMsg>\n  listenQuery: (\n    query: string | {fetch: string; listen: string},\n    params: QueryParams,\n    options: ListenQueryOptions\n  ) => Observable<any>\n  resolveTypeForDocument: (id: string, specifiedType?: string) => Observable<string>\n\n  pair: {\n    consistencyStatus: (publishedId: string, type: string) => Observable<boolean>\n    documentEvents: (publishedId: string, type: string) => Observable<DocumentVersionEvent>\n    editOperations: (publishedId: string, type: string) => Observable<OperationsAPI>\n    editState: (publishedId: string, type: string) => Observable<EditStateFor>\n    operationEvents: (\n      publishedId: string,\n      type: string\n    ) => Observable<OperationSuccess | OperationError>\n    validation: (publishedId: string, type: string) => Observable<ValidationStatus>\n  }\n}\n\nexport interface DocumentStoreOptions {\n  getClient: (options: SourceClientOptions) => SanityClient\n  documentPreviewStore: DocumentPreviewStore\n  historyStore: HistoryStore\n  schema: Schema\n  initialValueTemplates: Template[]\n}\n\nexport function createDocumentStore({\n  getClient,\n  documentPreviewStore,\n  historyStore,\n  initialValueTemplates,\n  schema,\n}: DocumentStoreOptions): DocumentStore {\n  // Note that we're both passing a shared `client` here which is used by the\n  // internal operations, and a `getClient` method that we expose to user-land\n  // for things like validations\n  const client = getClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const ctx = {client, getClient, documentPreviewStore, historyStore, schema}\n\n  const caches = {\n    pair: {\n      editOperations: new Map<string, Observable<OperationsAPI>>(),\n      editState: new Map<string, Observable<EditStateFor>>(),\n    },\n  }\n\n  const operationEvents = getOperationEvents(ctx)\n\n  return {\n    // Public API\n    checkoutPair(idPair) {\n      return checkoutPair(client, idPair)\n    },\n    initialValue(opts, context) {\n      return getInitialValueStream(\n        schema,\n        initialValueTemplates,\n        documentPreviewStore,\n        opts,\n        context\n      )\n    },\n    listenQuery(query, params, options) {\n      return listenQuery(client, query, params, options)\n    },\n    resolveTypeForDocument(id, specifiedType) {\n      return resolveTypeForDocument(client, id, specifiedType)\n    },\n    pair: {\n      consistencyStatus(publishedId, type) {\n        return consistencyStatus(ctx.client, getIdPairFromPublished(publishedId), type)\n      },\n      documentEvents(publishedId, type) {\n        return documentEvents(ctx.client, getIdPairFromPublished(publishedId), type)\n      },\n      editOperations(publishedId, type) {\n        const cache = caches.pair.editOperations\n        const key = `${publishedId}:${type}`\n        const cached = cache.get(key)\n        if (cached) {\n          return cached\n        }\n\n        const ops = editOperations(ctx, getIdPairFromPublished(publishedId), type)\n        cache.set(key, ops)\n        return ops\n      },\n      editState(publishedId, type) {\n        const cache = caches.pair.editState\n        const key = `${publishedId}:${type}`\n        const cached = cache.get(key)\n        if (cached) {\n          return cached\n        }\n\n        const state = editState(ctx, getIdPairFromPublished(publishedId), type)\n        cache.set(key, state)\n        return state\n      },\n      operationEvents(publishedId, type) {\n        return operationEvents(getIdPairFromPublished(publishedId), type)\n      },\n      validation(publishedId, type) {\n        return validation(ctx, getIdPairFromPublished(publishedId), type)\n      },\n    },\n  }\n}\n","import {useEffect, useMemo, useState} from 'react'\nimport {getPublishedId} from '../../../util/draftUtils'\nimport {useDocumentStore} from '../../datastores'\n\nexport interface DocumentTypeResolveState {\n  isLoaded: boolean\n  documentType: string | undefined\n}\n\nconst LOADING_STATE: DocumentTypeResolveState = {\n  isLoaded: false,\n  documentType: undefined,\n}\n\nexport function useDocumentType(documentId: string, specifiedType = '*'): DocumentTypeResolveState {\n  const documentStore = useDocumentStore()\n  const publishedId = getPublishedId(documentId)\n  const isResolved = Boolean(specifiedType && specifiedType !== '*')\n\n  // Memoize what a synchronously resolved state looks like (eg specified type is present),\n  // in order to return the same object each time. Note that this can be \"incorrect\", but\n  // that we won't be returning it in that case, eg: `{documentType: '*', isResolved: true}\n  const SYNC_RESOLVED_STATE = useMemo(\n    () => ({documentType: specifiedType, isLoaded: true}),\n    [specifiedType]\n  )\n\n  // Set up our state that we'll only use when we need to reach out to the API to find\n  // the document type for a given document. Otherwise we'll be using SYNC_RESOLVED_STATE.\n  // For consistency (between different document ids/types), we're setting the sync resolved\n  // state here as well, but it isn't strictly necessary for correct rendering.\n  const [resolvedState, setDocumentType] = useState<DocumentTypeResolveState>(\n    isResolved ? SYNC_RESOLVED_STATE : LOADING_STATE\n  )\n\n  // Reset documentType when documentId changes. Note that we're using the referentially\n  // stable LOADING_STATE in order to prevent double rendering on initial load.\n  useEffect(() => setDocumentType(LOADING_STATE), [publishedId, specifiedType])\n\n  // Load the documentType from Content Lake, unless we're already in a resolved state\n  useEffect(() => {\n    if (isResolved) {\n      return undefined\n    }\n\n    const sub = documentStore\n      .resolveTypeForDocument(publishedId, specifiedType)\n      .subscribe((documentType: string) => setDocumentType({documentType, isLoaded: true}))\n\n    return () => sub.unsubscribe()\n  }, [documentStore, publishedId, specifiedType, isResolved])\n\n  return isResolved\n    ? // `isResolved` is only true when we're _synchronously_ resolved\n      SYNC_RESOLVED_STATE\n    : // Using the document type resolved from the API\n      resolvedState\n}\n","import {useMemo} from 'react'\nimport {Observable, of} from 'rxjs'\nimport {LoadableState, useLoadable} from '../../../util'\nimport {useDocumentPreviewStore} from '../../datastores'\n\nexport function useDocumentValues<T = Record<string, unknown>>(\n  documentId: string,\n  paths: string[]\n): LoadableState<T | undefined> {\n  const documentPreviewStore = useDocumentPreviewStore()\n\n  const documentValues$ = useMemo(\n    () =>\n      documentId\n        ? (documentPreviewStore.observePaths(\n            {_type: 'reference', _ref: documentId},\n            paths\n          ) as Observable<T>)\n        : of(undefined),\n    [documentId, documentPreviewStore, paths]\n  )\n\n  return useLoadable(documentValues$)\n}\n","import {CurrentUser, User} from '@sanity/types'\nimport {from} from 'rxjs'\nimport {useSource} from '../../studio'\nimport {useUserStore} from '../datastores'\nimport {createHookFromObservableFactory, LoadingTuple} from '../../util'\nimport {UserStore} from './userStore'\n\nconst useUserViaUserStore = createHookFromObservableFactory(\n  (userStore: UserStore, userId: string) => from(userStore.getUser(userId))\n)\n\nexport function useUser(userId: string): LoadingTuple<User | null | undefined> {\n  const userStore = useUserStore()\n  return useUserViaUserStore(userStore, userId)\n}\n\nexport function useCurrentUser(): CurrentUser | null {\n  const {currentUser} = useSource()\n  return currentUser\n}\n","import {SanityClient} from '@sanity/client'\nimport {CurrentUser, User} from '@sanity/types'\nimport DataLoader from 'dataloader'\nimport raf from 'raf'\nimport {isRecord} from '../../util'\n\nexport interface UserStoreOptions {\n  client: SanityClient\n  currentUser: CurrentUser | null\n}\n\nexport interface UserStore {\n  getUser(userId: string): Promise<User | null>\n  getUsers(userIds: string[]): Promise<User[]>\n}\n\n/**\n * Given a `client` and a `currentUser` creates a datastore that handles\n * fetching, batch fetching, and caching users.\n */\nexport function createUserStore({client: _client, currentUser}: UserStoreOptions): UserStore {\n  const client = _client.withConfig({apiVersion: '2021-06-07'})\n\n  const userLoader = new DataLoader<string, User | null>(\n    async (userIds) => {\n      const value = await client.request<(User | null)[]>({\n        uri: `/users/${userIds.join(',')}`,\n        withCredentials: true,\n        tag: 'users.get',\n      })\n      const response = Array.isArray(value) ? value : [value]\n      const users = response.reduce((acc, next) => {\n        if (next?.id) {\n          acc[next.id] = next\n        }\n        return acc\n      }, {} as Record<string, User | null>)\n      return userIds.map((id) => users[id] || null)\n    },\n    {batchScheduleFn: (cb) => raf(cb)}\n  )\n\n  const userFromCurrentUser: User | null = currentUser && {\n    id: currentUser.id,\n    displayName: currentUser.name,\n    imageUrl: currentUser.profileImage,\n  }\n\n  userLoader.prime('me', userFromCurrentUser)\n\n  if (userFromCurrentUser?.id) {\n    userLoader.prime(userFromCurrentUser.id, userFromCurrentUser)\n  }\n\n  return {\n    getUser: (userId) => userLoader.load(userId),\n    getUsers: async (userIds) => {\n      const results = await userLoader.loadMany(userIds)\n      // remove `Error`s from the the results\n      return results.filter(\n        (result): result is User => isRecord(result) && typeof result.id === 'string'\n      )\n    },\n  }\n}\n","import {InitialValueResolverContext, SanityDocumentLike} from '@sanity/types'\nimport {useEffect, useMemo, useState} from 'react'\nimport {useSource} from '../../studio'\nimport {useUnique} from '../../util/useUnique'\nimport {useDocumentStore} from '../datastores'\nimport {useDataset, useProjectId, useSchema} from '../../hooks'\nimport {useCurrentUser} from '../user'\nimport {InitialValueState} from './initialValue/types'\n\n/**\n * @internal\n */\nexport function useInitialValue(props: {\n  documentId: string\n  documentType: string\n  templateName?: string\n  templateParams?: Record<string, unknown>\n}): InitialValueState {\n  const {documentId, documentType, templateName, templateParams: templateParamsRaw} = props\n  const templateParams = useUnique(templateParamsRaw)\n  const documentStore = useDocumentStore()\n  const context = useInitialValueResolverContext()\n\n  const defaultValue: SanityDocumentLike = useMemo(\n    () => ({_id: documentId, _type: documentType}),\n    [documentId, documentType]\n  )\n\n  const [state, setState] = useState<InitialValueState>({\n    loading: false,\n    error: null,\n    value: defaultValue,\n  })\n\n  useEffect(() => {\n    const initialValueOptions = {documentId, documentType, templateName, templateParams}\n\n    if (!templateName) {\n      setState({loading: true, error: null, value: defaultValue})\n      return undefined\n    }\n\n    const initialValueMsg$ = documentStore.initialValue(initialValueOptions, context)\n\n    const sub = initialValueMsg$.subscribe((msg) => {\n      if (msg.type === 'loading') {\n        setState({loading: true, error: null, value: defaultValue})\n      }\n\n      if (msg.type === 'success') {\n        setState({\n          loading: false,\n          error: null,\n          value: msg.value ? {...defaultValue, ...msg.value} : defaultValue,\n        })\n      }\n\n      if (msg.type === 'error') {\n        setState({loading: false, error: msg.error, value: defaultValue})\n      }\n    })\n\n    setState({loading: true, error: null, value: defaultValue})\n\n    return () => sub.unsubscribe()\n  }, [defaultValue, documentId, documentStore, documentType, templateName, templateParams, context])\n\n  return state\n}\n\n/**\n * @internal\n */\nexport function useInitialValueResolverContext(): InitialValueResolverContext {\n  const source = useSource()\n  const schema = useSchema()\n  const currentUser = useCurrentUser()\n  const projectId = useProjectId()\n  const dataset = useDataset()\n  const getClient = source.getClient\n\n  return useMemo(() => {\n    return {\n      projectId,\n      dataset,\n      getClient,\n      schema,\n      currentUser,\n    }\n  }, [getClient, schema, currentUser, projectId, dataset])\n}\n","import {SchemaType} from '@sanity/types'\nimport {useCallback} from 'react'\nimport {resolveInitialValueForType} from '../../templates'\nimport {DEFAULT_MAX_RECURSION_DEPTH} from '../../templates/resolve'\nimport {useInitialValueResolverContext} from './useInitialValue'\n\nexport function useResolveInitialValueForType<Params extends Record<string, unknown>>(): (\n  /**\n   * This is the name of the document.\n   */\n  type: SchemaType,\n  /**\n   * Params is a sanity context object passed to every initial value function.\n   */\n  params: Params\n) => Promise<any> {\n  const initialValueContext = useInitialValueResolverContext()\n\n  return useCallback(\n    (type: SchemaType, params: Params) => {\n      return resolveInitialValueForType(\n        type,\n        params,\n        DEFAULT_MAX_RECURSION_DEPTH,\n        initialValueContext\n      )\n    },\n    [initialValueContext]\n  )\n}\n","import {SanityClient} from '@sanity/client'\nimport {SanityDocument, Schema, SchemaType} from '@sanity/types'\nimport {Observable, combineLatest, of} from 'rxjs'\nimport {switchMap, map} from 'rxjs/operators'\nimport {createHookFromObservableFactory} from '../../util/createHookFromObservableFactory'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../studioClient'\nimport {snapshotPair} from '../document/document-pair/snapshotPair'\nimport {getDraftId, getPublishedId} from '../../util/draftUtils'\nimport {useGrantsStore} from '../datastores'\nimport {PartialExcept} from '../../util/PartialExcept'\nimport {useClient, useSchema} from '../../hooks'\nimport {GrantsStore, PermissionCheckResult} from './types'\n\nfunction getSchemaType(schema: Schema, typeName: string): SchemaType {\n  const type = schema.get(typeName)\n\n  if (!type) {\n    throw new Error(`No such schema type: ${typeName}`)\n  }\n\n  return type\n}\n\ninterface PairPermissionsOptions {\n  grantsStore: GrantsStore\n  permission: DocumentPermission\n  draft: SanityDocument | null\n  published: SanityDocument | null\n  liveEdit: boolean\n}\n\nfunction getPairPermissions({\n  grantsStore,\n  permission,\n  draft,\n  published,\n  liveEdit,\n}: PairPermissionsOptions): Array<[string, Observable<PermissionCheckResult>] | null> {\n  // this was introduced because we ran into a bug where a user with publish\n  // access was marked as not allowed to duplicate a document unless it had a\n  // draft variant. this would happen in non-live edit cases where the document\n  // pair only had a published variant with the draft variant being null.\n  //\n  // note: this should _not_ be used if the draft and published versions should\n  // be considered separately/explicitly in the permissions.\n  const effectiveVersion = draft || published\n  const effectiveVersionType = effectiveVersion === draft ? 'draft' : 'published'\n\n  const {checkDocumentPermission} = grantsStore\n\n  switch (permission) {\n    case 'delete': {\n      if (liveEdit) {\n        return [\n          ['delete published document (live-edit)', checkDocumentPermission('update', published)],\n        ]\n      }\n\n      return [\n        ['delete draft document', checkDocumentPermission('update', draft)],\n        ['delete published document', checkDocumentPermission('update', published)],\n      ]\n    }\n\n    case 'discardDraft': {\n      if (liveEdit) return []\n\n      return [['delete draft document', checkDocumentPermission('update', draft)]]\n    }\n\n    case 'publish': {\n      if (liveEdit) return []\n\n      return [\n        // precondition\n        [\n          'update published document at its current state',\n          checkDocumentPermission('update', published),\n        ],\n\n        // post condition\n        ['delete draft document', checkDocumentPermission('update', draft)],\n        [\n          'create published document from draft',\n          checkDocumentPermission('create', draft && {...draft, _id: getPublishedId(draft._id)}),\n        ],\n      ]\n    }\n\n    case 'unpublish': {\n      if (liveEdit) return []\n\n      return [\n        // precondition\n        ['update draft document at its current state', checkDocumentPermission('create', draft)],\n\n        // post condition\n        ['delete published document', checkDocumentPermission('update', published)],\n        [\n          'create draft document from published version',\n          checkDocumentPermission(\n            'create',\n            published && {...published, _id: getDraftId(published._id)}\n          ),\n        ],\n      ]\n    }\n\n    case 'update': {\n      if (liveEdit) {\n        return [\n          ['update published document (live-edit)', checkDocumentPermission('update', published)],\n        ]\n      }\n\n      return [\n        [\n          `update ${effectiveVersionType} document`,\n          checkDocumentPermission('update', effectiveVersion),\n        ],\n      ]\n    }\n\n    case 'duplicate': {\n      if (liveEdit) {\n        return [\n          [\n            'create new published document from existing document (live-edit)',\n            checkDocumentPermission('create', {...published, _id: 'dummy-id'}),\n          ],\n        ]\n      }\n\n      return [\n        [\n          `create new draft document from existing ${effectiveVersionType} document`,\n          checkDocumentPermission('create', {...effectiveVersion, _id: getDraftId('dummy-id')}),\n        ],\n      ]\n    }\n\n    default: {\n      throw new Error(`Could not match permission: ${permission}`)\n    }\n  }\n}\n\nexport type DocumentPermission =\n  | 'delete'\n  | 'discardDraft'\n  | 'publish'\n  | 'unpublish'\n  | 'update'\n  | 'duplicate'\n\nexport interface DocumentPairPermissionsOptions {\n  client: SanityClient\n  schema: Schema\n  grantsStore: GrantsStore\n  id: string\n  type: string\n  permission: DocumentPermission\n}\n\n/**\n * The observable version of `useDocumentPairPermissions`\n *\n * @see useDocumentPairPermissions\n */\nexport function getDocumentPairPermissions({\n  client,\n  grantsStore,\n  schema,\n  id,\n  permission,\n  type,\n}: DocumentPairPermissionsOptions): Observable<PermissionCheckResult> {\n  // this case was added to fix a crash that would occur if the `schemaType` was\n  // omitted from `S.documentList()`\n  //\n  // see `resolveTypeForDocument` which returns `'*'` if no type is provided\n  // https://github.com/sanity-io/sanity/blob/4d49b83a987d5097064d567f75d21b268a410cbf/packages/%40sanity/base/src/datastores/document/resolveTypeForDocument.ts#L7\n  if (type === '*') {\n    return of({granted: false, reason: 'Type specified was `*`'})\n  }\n\n  const liveEdit = Boolean(getSchemaType(schema, type).liveEdit)\n\n  return snapshotPair(\n    client,\n    {draftId: getDraftId(id), publishedId: getPublishedId(id)},\n    type\n  ).pipe(\n    switchMap((pair) =>\n      combineLatest([pair.draft.snapshots$, pair.published.snapshots$]).pipe(\n        map(([draft, published]) => ({draft, published}))\n      )\n    ),\n    switchMap(({draft, published}) => {\n      const pairPermissions = getPairPermissions({\n        grantsStore,\n        permission,\n        draft,\n        published,\n        liveEdit,\n      }).map(([label, observable]: any) =>\n        observable.pipe(\n          map(({granted, reason}: any) => ({\n            granted,\n            reason: granted ? '' : `not allowed to ${label}: ${reason}`,\n            label,\n            permission,\n          }))\n        )\n      )\n\n      if (!pairPermissions.length) return of({granted: true, reason: ''})\n\n      return combineLatest(pairPermissions).pipe(\n        map((permissionResults: any[]) => {\n          const granted = permissionResults.every((permissionResult) => permissionResult.granted)\n          const reason = granted\n            ? ''\n            : `Unable to ${permission}:\\n\\t${permissionResults\n                .filter((permissionResult) => !permissionResult.granted)\n                .map((permissionResult) => permissionResult.reason)\n                .join('\\n\\t')}`\n\n          return {granted, reason}\n        })\n      )\n    })\n  )\n}\n\n/**\n * Gets document pair permissions based on a document ID and a type.\n *\n * This permissions API is a high-level permissions API that is draft-model\n * aware. In order to determine whether or not the user has the given\n * permission, both the draft and published documents are pulled and run through\n * all of the user's grants. If any pre or post conditions fail a permissions\n * checks, the operations will not be granted.\n *\n * The operations this hook accepts are only relevant to document pairs. E.g.\n * `'create'` is not included as an operation because it's not possible to tell\n * if a document can be created by only using the initial ID and type because an\n * initial template value may not have a matching grant (e.g. locked-document\n * pattern `!locked`). In contrast, the operation `'duplicate'` is supported\n * because the draft value of the document can be live queried and checked for\n * matching grants.\n *\n * Note: for live-edit documents, non-applicable operations (e.g. publish) will\n * return as true.\n *\n * @see useDocumentValuePermissions\n */\nexport const useDocumentPairPermissionsFromHookFactory = createHookFromObservableFactory(\n  getDocumentPairPermissions\n)\n\nexport function useDocumentPairPermissions({\n  id,\n  type,\n  permission,\n  ...rest\n}: PartialExcept<DocumentPairPermissionsOptions, 'id' | 'type' | 'permission'>): ReturnType<\n  typeof useDocumentPairPermissionsFromHookFactory\n> {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const schema = useSchema()\n  const grantsStore = useGrantsStore()\n\n  return useDocumentPairPermissionsFromHookFactory({\n    client: rest.client || client,\n    grantsStore: rest.grantsStore || grantsStore,\n    schema: rest.schema || schema,\n    id,\n    permission,\n    type,\n  })\n}\n","import {Observable} from 'rxjs'\nimport {createHookFromObservableFactory} from '../../util/createHookFromObservableFactory'\nimport {PartialExcept} from '../../util/PartialExcept'\nimport {useGrantsStore} from '../datastores'\nimport {DocumentValuePermission, GrantsStore, PermissionCheckResult} from './types'\n\nexport interface DocumentValuePermissionsOptions {\n  grantsStore: GrantsStore\n  document: Record<string, unknown>\n  permission: DocumentValuePermission\n}\n\n/**\n * The observable version of `useDocumentValuePermissions`\n *\n * @see useDocumentValuePermissions\n */\nexport function getDocumentValuePermissions({\n  grantsStore,\n  document,\n  permission,\n}: DocumentValuePermissionsOptions): Observable<PermissionCheckResult> {\n  const {checkDocumentPermission} = grantsStore\n\n  return checkDocumentPermission(permission, document)\n}\n\n/**\n * Gets permissions based on the value of the document passed into the hook\n * (stateless).\n *\n * Note: this is a lower-level API (compared to `useDocumentPairPermissions`)\n * that is _not_ draft-model aware.\n *\n * As a consequence, the operations it accepts are also low-level. (e.g.\n * `'publish'` permissions can't be determined with this API). This is because\n * it's not possible to tell if a user can do high-level document pair\n * operations on document using only one document value.\n *\n * For example, in order to determine if a user can publish, the current value\n * of the published document needs to be pulled and checked against the user's\n * grants. If there are no matching grants, then it fails the pre-condition and\n * no operation is allowed regardless of the given document.\n *\n * @see useDocumentPairPermissions\n */\nexport const useDocumentValuePermissionsFromHookFactory = createHookFromObservableFactory(\n  getDocumentValuePermissions\n)\n\nexport function useDocumentValuePermissions({\n  document,\n  permission,\n  ...rest\n}: PartialExcept<DocumentValuePermissionsOptions, 'permission' | 'document'>): ReturnType<\n  typeof useDocumentValuePermissionsFromHookFactory\n> {\n  const grantsStore = useGrantsStore()\n\n  return useDocumentValuePermissionsFromHookFactory({\n    grantsStore: rest.grantsStore || grantsStore,\n    document,\n    permission,\n  })\n}\n\nexport type {DocumentValuePermission}\n","import {combineLatest, from, Observable, of} from 'rxjs'\nimport {map, switchMap} from 'rxjs/operators'\nimport {InitialValueResolverContext, Schema} from '@sanity/types'\nimport {useSchema, useTemplates} from '../../hooks'\nimport {InitialValueTemplateItem, resolveInitialValue, Template} from '../../templates'\nimport {createHookFromObservableFactory} from '../../util/createHookFromObservableFactory'\nimport {getDraftId, getPublishedId} from '../../util/draftUtils'\nimport {useGrantsStore} from '../datastores'\nimport {PartialExcept} from '../../util/PartialExcept'\nimport {useInitialValueResolverContext} from '../document'\nimport {GrantsStore, PermissionCheckResult} from './types'\nimport {getDocumentValuePermissions} from './documentValuePermissions'\n\nexport interface TemplatePermissionsResult<TInitialValue = Record<string, unknown>>\n  extends PermissionCheckResult,\n    InitialValueTemplateItem {\n  granted: boolean\n  reason: string\n  resolvedInitialValue: TInitialValue\n  subtitle?: string\n  template: Template\n}\n\ntype Serializable<T> = {serialize(): T}\n\nfunction serialize<T>(item: T | Serializable<T>): T {\n  if (item && 'serialize' in item) return serialize(item.serialize())\n  return item as T\n}\n\nexport interface TemplatePermissionsOptions {\n  grantsStore: GrantsStore\n  schema: Schema\n  templates: Template[]\n  templateItems: InitialValueTemplateItem[]\n  context: InitialValueResolverContext\n}\n\n/**\n * The observable version of `useTemplatePermissions`\n */\nexport function getTemplatePermissions({\n  grantsStore,\n  templateItems,\n  templates,\n  schema,\n  context,\n}: TemplatePermissionsOptions): Observable<\n  Array<TemplatePermissionsResult<Record<string, unknown>>>\n> {\n  if (!templateItems?.length) return of([])\n\n  return combineLatest(\n    templateItems\n      .map(serialize)\n      .map(async (item) => {\n        const template = templates.find((t) => t.id === item.templateId)\n\n        if (!template) {\n          throw new Error(`template not found: \"${item.templateId}\"`)\n        }\n\n        const resolvedInitialValue = await resolveInitialValue(\n          schema,\n          template,\n          item.parameters,\n          context\n        )\n\n        return {template, item, resolvedInitialValue}\n      })\n      .map((promise) =>\n        from(promise).pipe(\n          switchMap(({item, resolvedInitialValue, template}) => {\n            const schemaType = schema.get(template.schemaType)\n\n            if (!schemaType) {\n              throw new Error(`schema type not found: \"${template.schemaType}\"`)\n            }\n\n            const liveEdit = schemaType?.liveEdit\n            const {initialDocumentId = 'dummy-id'} = item\n\n            return getDocumentValuePermissions({\n              grantsStore,\n              permission: 'create',\n              document: {\n                _id: liveEdit ? getPublishedId(initialDocumentId) : getDraftId(initialDocumentId),\n                ...resolvedInitialValue,\n              },\n            }).pipe(\n              map(({granted, reason}) => {\n                const title = item.title || template.title\n                const result: TemplatePermissionsResult = {\n                  ...item,\n                  granted,\n                  reason,\n                  resolvedInitialValue,\n                  template,\n                  title,\n                  subtitle: schemaType.title === title ? undefined : schemaType.title,\n                  description: item.description || template.description,\n                  icon: item.icon || template.icon,\n                }\n\n                return result\n              })\n            )\n          })\n        )\n      )\n  )\n}\n\n/**\n * Takes in an array of initial template values and returns an object of\n * `TemplatePermissionsResult` keyed by the IDs of the initial template values\n * given.\n *\n * The `TemplatePermissionsResult` is an object that contains a `granted`\n * boolean per key and can be used to determine if a user has the ability to\n * create documents using the given initial value template items.\n *\n * For each initial template value item, the corresponding template is found and\n * resolved against the parameters in each the initial template value item. The\n * resolved value is then run through the document-value permissions. If there\n * are any matching grants for the resolved initial template value, the\n * `TemplatePermissionsResult` will include `granted: true`.\n */\nexport const useTemplatePermissionsFromHookFactory =\n  createHookFromObservableFactory(getTemplatePermissions)\n\nexport function useTemplatePermissions({\n  templateItems,\n  ...rest\n}: PartialExcept<TemplatePermissionsOptions, 'templateItems'>): ReturnType<\n  typeof useTemplatePermissionsFromHookFactory\n> {\n  const schema = useSchema()\n  const templates = useTemplates()\n  const grantsStore = useGrantsStore()\n  const initialValueContext = useInitialValueResolverContext()\n\n  return useTemplatePermissionsFromHookFactory({\n    templateItems,\n    grantsStore: rest.grantsStore || grantsStore,\n    schema: rest.schema || schema,\n    templates: rest.templates || templates,\n    context: initialValueContext,\n  })\n}\n","import {concat, of, fromEvent} from 'rxjs'\nimport {distinctUntilChanged, map} from 'rxjs/operators'\n\nconst DEBUG_PREFIX = '_debug_'\n\nconst hashchange$ = typeof window === 'undefined' ? of({}) : fromEvent(window, 'hashchange')\n\nexport const debugParams$ = concat(of(0), hashchange$).pipe(\n  map(() => (typeof document === 'undefined' ? '#' : document.location.hash)),\n  distinctUntilChanged(),\n  map((hash) =>\n    hash\n      .substring(1)\n      .split(';')\n      .filter((p) => p.toLowerCase().startsWith(DEBUG_PREFIX))\n      .map((param) => param.substring(DEBUG_PREFIX.length))\n  )\n)\n\nexport const debugRolesParam$ = debugParams$.pipe(\n  map((args) => args.find((arg) => arg.startsWith('roles='))),\n  map(\n    (arg) =>\n      arg\n        ?.split('roles=')[1]\n        .split(',')\n        .map((r) => r.trim()) || []\n  )\n)\n","// NOTE: these example grants are used in other test files.\n// if you change this file, check to see if other files need to be updated too\nimport {Grant} from '../types'\n\nexport const administrator: Grant[] = [\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read', 'create', 'history', 'update'],\n  },\n]\n\nexport const editor: Grant[] = [\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read', 'create', 'history', 'update'],\n  },\n]\n\nexport const developer: Grant[] = [\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read', 'create', 'history', 'update'],\n  },\n]\n\nexport const contributor: Grant[] = [\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read'],\n  },\n  {\n    filter: '_id in path(\"drafts.**\")',\n    permissions: ['create', 'history', 'update'],\n  },\n]\n\nexport const viewer: Grant[] = [\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read', 'history'],\n  },\n]\n\nexport const requiresApproval: Grant[] = [\n  {\n    filter: '!locked',\n    permissions: ['read', 'create', 'update'],\n  },\n]\n\nexport const restricted: Grant[] = [\n  {\n    filter:\n      '_id in path(\"drafts.**\") && _type in [\"stringsTest\", \"book\", \"author\", \"referenceTest\"]',\n    permissions: ['read', 'create', 'history', 'update'],\n  },\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read'],\n  },\n]\n","import {map} from 'rxjs/operators'\nimport {debugRolesParam$} from '../../debugParams'\nimport {Grant} from '../types'\nimport * as grants from './exampleGrants'\nimport {ExampleRoleName} from './exampleRoles'\n\nconst DEBUG_ROLE_GRANTS_MAP: Record<ExampleRoleName, Grant[]> = {\n  // basic\n  administrator: grants.administrator,\n  editor: grants.editor,\n  developer: grants.developer,\n  contributor: grants.contributor,\n  viewer: grants.viewer,\n\n  // custom\n  restricted: grants.restricted,\n  requiresApproval: grants.requiresApproval,\n\n  // legacy\n  read: grants.viewer,\n  write: grants.editor,\n}\n\n// todo: merge other resource keys(?)\nexport const debugGrants$ = debugRolesParam$.pipe(\n  map((roles) => {\n    if (!roles.length) return null\n\n    return roles\n      .filter((value) => Boolean(value) && value in DEBUG_ROLE_GRANTS_MAP)\n      .flatMap((roleName: ExampleRoleName) => DEBUG_ROLE_GRANTS_MAP[roleName] || [])\n  })\n)\n","import {SanityClient} from '@sanity/client'\nimport {CurrentUser, SanityDocument} from '@sanity/types'\nimport {evaluate, parse} from 'groq-js'\nimport {defer, of} from 'rxjs'\nimport {distinctUntilChanged, publishReplay, switchMap} from 'rxjs/operators'\nimport {refCountDelay} from 'rxjs-etc/operators'\nimport shallowEquals from 'shallow-equals'\nimport {debugGrants$} from './debug'\nimport {\n  GrantsStore,\n  DocumentValuePermission,\n  Grant,\n  PermissionCheckResult,\n  EvaluationParams,\n} from './types'\n\nasync function getDatasetGrants(\n  client: SanityClient,\n  projectId: string,\n  dataset: string\n): Promise<Grant[]> {\n  // `acl` stands for access control list and returns a list of grants\n  const grants: Grant[] = await client.request({\n    uri: `/projects/${projectId}/datasets/${dataset}/acl`,\n    tag: 'acl.get',\n    withCredentials: true,\n  })\n\n  return grants\n}\n\nfunction getParams(currentUser: CurrentUser | null): EvaluationParams {\n  const params: EvaluationParams = {}\n\n  if (currentUser !== null) {\n    params.identity = currentUser.id\n  }\n\n  return params\n}\n\nconst PARSED_FILTERS_MEMO = new Map()\nasync function matchesFilter(\n  currentUser: CurrentUser | null,\n  filter: string,\n  document: SanityDocument\n) {\n  if (!PARSED_FILTERS_MEMO.has(filter)) {\n    // note: it might be tempting to also memoize the result of the evaluation here,\n    // Currently these filters are typically evaluated whenever a document change, which means they will be evaluated\n    // quite frequently with different versions of the document. There might be some gains in finding out which subset of document\n    // properties to use as key (e.g. by looking at the parsed filter and see what properties the filter cares about)\n    // But as always, it's worth considering if the complexity/memory usage is worth the potential perf gain…\n    PARSED_FILTERS_MEMO.set(filter, parse(`*[${filter}]`))\n  }\n  const parsed = PARSED_FILTERS_MEMO.get(filter)\n\n  const params = getParams(currentUser)\n  const data = await (await evaluate(parsed, {dataset: [document], params})).get()\n  return data?.length === 1\n}\n\nexport interface GrantsStoreOptions {\n  client: SanityClient\n  currentUser: CurrentUser | null\n}\n\nexport function createGrantsStore({client, currentUser}: GrantsStoreOptions): GrantsStore {\n  const versionedClient = client.withConfig({apiVersion: '2021-06-07'})\n\n  const datasetGrants$ = defer(() => of(versionedClient.config())).pipe(\n    switchMap(({projectId, dataset}) => {\n      if (!projectId || !dataset) {\n        throw new Error('Missing projectId or dataset')\n      }\n      return getDatasetGrants(versionedClient, projectId, dataset)\n    })\n  )\n\n  const currentUserDatasetGrants = debugGrants$.pipe(\n    switchMap((debugGrants) => (debugGrants ? of(debugGrants) : datasetGrants$)),\n    publishReplay(1),\n    refCountDelay(1000)\n  )\n\n  return {\n    checkDocumentPermission(permission: DocumentValuePermission, document: SanityDocument) {\n      return currentUserDatasetGrants.pipe(\n        switchMap((grants) => grantsPermissionOn(currentUser, grants, permission, document)),\n        distinctUntilChanged(shallowEquals)\n      )\n    },\n  }\n}\n\n/**\n * takes a grants object, a permission and a document\n * checks whether the the permission is granted for the given document\n */\nasync function grantsPermissionOn(\n  currentUser: CurrentUser | null,\n  grants: Grant[],\n  permission: DocumentValuePermission,\n  document: SanityDocument | null\n): Promise<PermissionCheckResult> {\n  if (!document) {\n    // we say it's granted if null due to initial states\n    return {granted: true, reason: 'Null document, nothing to check'}\n  }\n\n  if (!grants.length) {\n    return {granted: false, reason: 'No document grants'}\n  }\n\n  const matchingGrants: Grant[] = []\n\n  for (const grant of grants) {\n    if (await matchesFilter(currentUser, grant.filter, document)) {\n      matchingGrants.push(grant)\n    }\n  }\n\n  const foundMatch = matchingGrants.some((grant) => grant.permissions.some((p) => p === permission))\n\n  return {\n    granted: foundMatch,\n    reason: foundMatch ? `Matching grant` : `No matching grants found`,\n  }\n}\n","import type {TransactionLogEventWithEffects} from '@sanity/types'\n\ntype StreamResult = TransactionLogEventWithEffects | {error: {description?: string; type: string}}\n\nexport async function getJsonStream(\n  url: string,\n  token: string | undefined\n): Promise<ReadableStream<StreamResult>> {\n  const options: RequestInit = token\n    ? {headers: {Authorization: `Bearer ${token}`}}\n    : {credentials: 'include'}\n  const response = await fetch(url, options)\n  return getStream(response)\n}\n\nfunction getStream(response: Response): ReadableStream<StreamResult> {\n  const body = response.body\n  if (!body) {\n    throw new Error('Failed to read body from response')\n  }\n\n  let reader: ReadableStreamDefaultReader<Uint8Array>\n  let cancelled = false\n\n  return new ReadableStream<TransactionLogEventWithEffects>({\n    start(controller): void | PromiseLike<void> {\n      reader = body.getReader()\n      const decoder = new TextDecoder()\n      let buffer = ''\n\n      reader\n        .read()\n        .then(function processResult(result): void | Promise<void> {\n          if (result.done) {\n            if (cancelled) {\n              return\n            }\n\n            buffer = buffer.trim()\n            if (buffer.length === 0) {\n              controller.close()\n              return\n            }\n\n            controller.enqueue(JSON.parse(buffer))\n            controller.close()\n            return\n          }\n\n          buffer += decoder.decode(result.value, {stream: true})\n          const lines = buffer.split('\\n')\n\n          for (let i = 0; i < lines.length - 1; ++i) {\n            const line = lines[i].trim()\n            if (line.length === 0) {\n              continue\n            }\n\n            try {\n              controller.enqueue(JSON.parse(line))\n            } catch (err) {\n              controller.error(err)\n              cancelled = true\n              reader.cancel()\n              return\n            }\n          }\n\n          buffer = lines[lines.length - 1]\n\n          // eslint-disable-next-line consistent-return\n          return reader\n            .read()\n            .then(processResult)\n            .catch((err) => controller.error(err))\n        })\n        .catch((err) => controller.error(err))\n    },\n\n    cancel(): void {\n      cancelled = true\n      reader.cancel()\n    },\n  })\n}\n","import type {SanityDocument, TransactionLogEventWithEffects} from '@sanity/types'\nimport {applyPatch} from 'mendoza'\nimport {RemoteSnapshotVersionEvent} from '../../document/document-pair/checkoutPair'\nimport {Timeline} from './Timeline'\nimport type {DocumentRemoteMutationVersionEvent, CombinedDocument} from './types'\n\ntype VersionState = {\n  id: string\n  hasAttrs: boolean\n  attrs: Record<string, unknown> | null\n  rev: string | null\n  events: Array<DocumentRemoteMutationVersionEvent>\n  aligned: boolean\n}\n\nfunction emptyVersionState(id: string): VersionState {\n  return {\n    id,\n    hasAttrs: false,\n    attrs: null,\n    rev: null,\n    events: [],\n    aligned: false,\n  }\n}\n\nfunction align(history: TransactionLogEventWithEffects, state: VersionState): number {\n  const idx = state.events.findIndex((evt) => history.id === evt.transactionId)\n  if (idx >= 0) {\n    // Return the next event as we don't want this to be included.\n    return idx + 1\n  }\n\n  if (state.rev) {\n    return state.rev === history.id ? 0 : -1\n  }\n\n  // At this point the document doesn't exist and we were not able to match\n  // it up with a received mutation. This is a bit unfortunate as we don't\n  // have a _reliably_ way of aligning it. For now we just always assume\n  // that it's consistent.\n\n  return 0\n}\n\nfunction startFromSnapshot(state: VersionState, doc: SanityDocument) {\n  state.hasAttrs = true\n\n  if (doc) {\n    state.attrs = {...doc}\n    if (typeof state.attrs._rev != 'string') throw new Error('snapshot has no _rev')\n    state.rev = state.attrs._rev\n    delete state.attrs._rev\n  } else {\n    state.attrs = null\n    state.rev = null\n  }\n\n  state.events = []\n}\n\n/**\n * The timeline consists of data from (1) the history, (2) live draft mutations, and\n * (3) live published mutations. It's critical for us that the chain of transactions\n * is complete and without holes. The following class can be used as a layer in front\n * of Timeline to ensure this:\n *\n * - Invoke `appendRemoteSnapshotEvent` when there's an incoming remote mutation.\n *   These mutations are buffered internally and _not_ passed to the timeline quite yet.\n *\n * - Once we've received snapshots for both draft and published, then `acceptsHistory`\n *   becomes true and the caller can fetch a chunk of the translog. The flag\n *   `earliestTransactionId` can be used to figure out where to fetch transactions from.\n *\n * - The caller invokes `prependHistoryEvent` for each of the events. These history events\n *   are always pushed to the timeline and it will become available immediately.\n *\n * - Internally this class will then try to align the history event to the received\n *   mutations and then dispatch to the timeline.\n *\n * - The aligner also maintains the latest version for both the draft and the published version.\n *\n *\n */\nexport class Aligner {\n  timeline: Timeline\n  earliestTransactionId: string | null = null\n\n  constructor(timeline: Timeline) {\n    this.timeline = timeline\n    this._states = {\n      draft: emptyVersionState(timeline.draftId),\n      published: emptyVersionState(timeline.publishedId),\n    }\n  }\n\n  private _states: {\n    draft: VersionState\n    published: VersionState\n  }\n\n  appendRemoteSnapshotEvent(evt: RemoteSnapshotVersionEvent): void {\n    const state = this._states[evt.version]\n\n    if (evt.type === 'snapshot') {\n      this._maybeInvalidateHistory()\n\n      startFromSnapshot(state, evt.document)\n      return\n    }\n\n    if (evt.type === 'remoteMutation') {\n      if (state.aligned) {\n        this._apply(state, evt)\n        this.timeline.addRemoteMutation(evt)\n      } else if (state.hasAttrs) {\n        state.events.push(evt)\n      } else {\n        startFromSnapshot(state, evt.head)\n      }\n    }\n  }\n\n  prependHistoryEvent(evt: TransactionLogEventWithEffects): void {\n    if (!this.acceptsHistory) throw new Error('cannot prepend history at this point')\n\n    for (const state of Object.values(this._states)) {\n      if (!state.aligned) {\n        const idx = align(evt, state)\n\n        if (idx >= 0) {\n          this._alignAtIndex(state, idx)\n        }\n      }\n    }\n\n    this.timeline.addTranslogEntry(evt)\n    this.earliestTransactionId = evt.id\n  }\n\n  didReachEarliestEntry(): void {\n    for (const state of Object.values(this._states)) {\n      if (!state.aligned) {\n        if (state.attrs !== null) throw new Error('unable to find translog entry to align to')\n        this._alignAtIndex(state, 0)\n      }\n    }\n    this.timeline.didReachEarliestEntry()\n  }\n\n  get isAligned(): boolean {\n    return Object.values(this._states).every((state) => state.aligned)\n  }\n\n  get acceptsHistory(): boolean {\n    return this._isComplete\n  }\n\n  get currentDocument(): CombinedDocument {\n    return {draft: this._states.draft.attrs, published: this._states.published.attrs}\n  }\n\n  private _alignAtIndex(state: VersionState, idx: number) {\n    // These we must only apply locally since they are present in the fetched translog.\n    for (const mutEvt of state.events.slice(0, idx)) {\n      this._apply(state, mutEvt)\n    }\n\n    // ... while these must also be pushed to the timeline:\n    for (const mutEvt of state.events.slice(idx)) {\n      this._apply(state, mutEvt)\n      this.timeline.addRemoteMutation(mutEvt)\n    }\n\n    state.events = []\n    state.aligned = true\n  }\n\n  private get _isComplete(): boolean {\n    return Object.values(this._states).every((state) => state.hasAttrs)\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  private _apply(state: VersionState, evt: DocumentRemoteMutationVersionEvent) {\n    state.attrs = applyPatch(state.attrs, evt.effects.apply as any)\n    state.rev = evt.transactionId\n  }\n\n  private _maybeInvalidateHistory() {\n    if (this._isComplete) {\n      for (const state of Object.values(this._states)) {\n        state.aligned = false\n      }\n      this.earliestTransactionId = null\n      this.timeline.reset()\n    }\n  }\n}\n","import {Diff} from '@sanity/diff'\nimport {Annotation} from '../../../field'\nimport {Timeline} from './Timeline'\nimport {CombinedDocument, Chunk} from './types'\n\n/**\n * A reconstruction represents a single reconstruction of a\n */\nexport class Reconstruction {\n  timeline: Timeline\n  start: Chunk | null\n  end: Chunk\n  doc: CombinedDocument\n\n  constructor(timeline: Timeline, doc: CombinedDocument, start: Chunk | null, end: Chunk) {\n    this.timeline = timeline\n    this.start = start\n    this.end = end\n    this.doc = doc\n  }\n\n  same(start: Chunk | null, end: Chunk): boolean {\n    return this.start === start && this.end === end\n  }\n\n  private _startDocument?: CombinedDocument\n  private _endDocument?: CombinedDocument\n  private _diff?: Diff<Annotation>\n\n  /** Returns the attributes as seen at the end of the range. */\n  endAttributes(): Record<string, unknown> | null {\n    return getAttrs(this.endDocument())\n  }\n\n  endDocument(): CombinedDocument {\n    if (!this._endDocument) {\n      this._endDocument = this.timeline.replayBackwardsUntil(this.end.end, this.doc)\n    }\n\n    return this._endDocument\n  }\n\n  /** Returns the attributes as seen at the end of the range. */\n  startAttributes(): Record<string, unknown> | null {\n    return getAttrs(this.startDocument())\n  }\n\n  startDocument(): CombinedDocument {\n    if (!this.start) throw new Error('start required')\n\n    if (!this._startDocument) {\n      this._startDocument = this.timeline.replayBackwardsBetween(\n        this.start.end,\n        this.end.end - 1,\n        this.endDocument()\n      )\n    }\n\n    return this._startDocument\n  }\n\n  diff(): Diff<Annotation> {\n    if (!this._diff) {\n      if (!this.start) throw new Error('start required')\n\n      this._diff = this.timeline.calculateDiff(\n        this.startDocument(),\n        this.endDocument(),\n        this.start.index + 1,\n        this.end.index\n      )\n    }\n\n    return this._diff\n  }\n}\n\nfunction getAttrs(doc: CombinedDocument) {\n  return doc.draft || doc.published\n}\n","import type {SanityClient} from '@sanity/client'\nimport {Diff, ObjectDiff} from '@sanity/diff'\nimport {Observable} from 'rxjs'\nimport {Annotation} from '../../../field'\nimport {RemoteSnapshotVersionEvent} from '../../document/document-pair/checkoutPair'\nimport {remoteSnapshots} from '../../document/document-pair/remoteSnapshots'\nimport {Timeline, ParsedTimeRef} from './Timeline'\nimport {getJsonStream} from './getJsonStream'\nimport {Chunk} from './types'\nimport {Aligner} from './Aligner'\nimport {Reconstruction} from './Reconstruction'\n\nconst TRANSLOG_ENTRY_LIMIT = 50\n\nexport type TimelineControllerOptions = {\n  timeline: Timeline\n  client: SanityClient\n  documentId: string\n  documentType: string\n  handler: (err: Error | null, controller: TimelineController) => void\n}\n\n/**\n * The controller is responsible for fetching information\n * about a document and maintaining a Timeline.\n */\nexport class TimelineController {\n  timeline: Timeline\n  client: SanityClient\n  handler: TimelineControllerOptions['handler']\n\n  version = 0\n\n  /**\n   * The selection state represents the  different states of the current selection:\n   * - inactive: No selection is active.\n   * - rev: A selection is active for a single revision.\n   * - range: A selection is active for a range and we have all the data needed to render it.\n   * - loading: A selection is active, but we don't have the entries yet.\n   * - invalid: The selection picked is invalid.\n   */\n  selectionState: 'inactive' | 'rev' | 'range' | 'loading' | 'invalid' = 'inactive'\n\n  constructor(options: TimelineControllerOptions) {\n    this.timeline = options.timeline\n    this.client = options.client\n    this.handler = options.handler\n    this._aligner = new Aligner(this.timeline)\n\n    this.markChange()\n  }\n\n  private _aligner: Aligner\n\n  private _fetchMore = false\n  private _fetchAtLeast = 0\n  private _isRunning = false\n  private _didErr = false\n\n  private _since: string | null = null\n  private _sinceTime: ParsedTimeRef | null = null\n  private _rev: string | null = null\n  private _revTime: ParsedTimeRef | null = null\n\n  private _reconstruction?: Reconstruction\n\n  clearRange(): void {\n    this.setRange(null, null)\n  }\n\n  setRange(since: string | null, rev: string | null): void {\n    if (rev !== this._rev) this.setRevTime(rev)\n    if (since !== this._since) this.setSinceTime(since)\n\n    let _fetchAtLeast = 10\n\n    if (this._sinceTime === 'loading' || this._revTime === 'loading' || !this._aligner.isAligned) {\n      this.selectionState = 'loading'\n    } else if (this._sinceTime === 'invalid' || this._revTime === 'invalid') {\n      this.selectionState = 'invalid'\n    } else if (this._sinceTime) {\n      this.selectionState = 'range'\n\n      const targetRev = this._revTime || this.timeline.lastChunk()\n\n      if (this._sinceTime.index > targetRev.index) {\n        this._revTime = 'invalid'\n        this.selectionState = 'invalid'\n      } else {\n        this.setReconstruction(this._sinceTime, targetRev)\n      }\n    } else if (this._revTime) {\n      this.selectionState = 'rev'\n      this.setReconstruction(null, this._revTime)\n    } else {\n      this.selectionState = 'inactive'\n      _fetchAtLeast = 0\n    }\n\n    this._fetchAtLeast = _fetchAtLeast\n\n    this.start()\n  }\n\n  setLoadMore(flag: boolean): void {\n    this._fetchMore = flag\n    this.start()\n  }\n\n  get sinceTime(): Chunk | null {\n    return this._sinceTime && typeof this._sinceTime === 'object' ? this._sinceTime : null\n  }\n\n  get revTime(): Chunk | null {\n    return this._revTime && typeof this._revTime === 'object' ? this._revTime : null\n  }\n\n  get realRevChunk(): Chunk {\n    return this.revTime || this.timeline.lastChunk()\n  }\n\n  /** Returns true when there's an older revision we want to render. */\n  onOlderRevision(): boolean {\n    return Boolean(this._rev) && (this.selectionState === 'range' || this.selectionState === 'rev')\n  }\n\n  /** Returns true when the changes panel should be active. */\n  changesPanelActive(): boolean {\n    return Boolean(this._since) && this.selectionState === 'range'\n  }\n\n  findRangeForNewRev(rev: Chunk): [string | null, string | null] {\n    const revTimeId = this.timeline.isLatestChunk(rev) ? null : this.timeline.createTimeId(rev)\n\n    if (!this._since) {\n      return [null, revTimeId]\n    }\n\n    const sinceChunk = this.sinceTime\n    if (sinceChunk && sinceChunk.index < rev.index) {\n      return [this._since, revTimeId]\n    }\n\n    return ['@lastPublished', revTimeId]\n  }\n\n  findRangeForNewSince(since: Chunk): [string, string | null] {\n    const revChunk = this.revTime\n\n    // If the the `since` timestamp is earlier than the `rev`, then we can\n    // accept it. Otherwise we'll move the current revision to the current draft.\n\n    if (revChunk && since.index < revChunk.index) {\n      return [this.timeline.createTimeId(since), this._rev]\n    }\n\n    return [this.timeline.createTimeId(since), null]\n  }\n\n  setRevTime(rev: string | null): void {\n    this._rev = rev\n    this._revTime = rev ? this.timeline.parseTimeId(rev) : null\n\n    if (this._since === '@lastPublished') {\n      // Make sure we invalidate it since this depends on the _rev.\n      this._since = null\n      this._sinceTime = null\n    }\n  }\n\n  setSinceTime(since: string | null): void {\n    if (since === '@lastPublished') {\n      if (typeof this._revTime === 'string') {\n        this._sinceTime = this._revTime\n      } else {\n        this._sinceTime = this.timeline.findLastPublishedBefore(this._revTime)\n      }\n    } else {\n      this._sinceTime = since ? this.timeline.parseTimeId(since) : null\n    }\n\n    this._since = since\n  }\n\n  sinceAttributes(): Record<string, unknown> | null {\n    return this._sinceTime && this._reconstruction ? this._reconstruction.startAttributes() : null\n  }\n\n  displayed(): Record<string, unknown> | null {\n    return this._revTime && this._reconstruction ? this._reconstruction.endAttributes() : null\n  }\n\n  setReconstruction(since: Chunk | null, rev: Chunk): void {\n    if (this._reconstruction && this._reconstruction.same(since, rev)) return\n    this._reconstruction = new Reconstruction(\n      this.timeline,\n      this._aligner.currentDocument,\n      since,\n      rev\n    )\n  }\n\n  currentDiff(): Diff<Annotation> | null {\n    return this._reconstruction ? this._reconstruction.diff() : null\n  }\n\n  currentObjectDiff(): ObjectDiff<Annotation> | null {\n    const diff = this.currentDiff()\n    if (diff) {\n      if (diff.type === 'null') return null\n      if (diff.type !== 'object') throw new Error(`ObjectDiff expected, got ${diff.type}`)\n    }\n\n    return diff as ObjectDiff<Annotation>\n  }\n\n  handleRemoteMutation(ev: RemoteSnapshotVersionEvent): void {\n    this._aligner.appendRemoteSnapshotEvent(ev)\n    this.markChange()\n\n    // Make sure we fetch history as soon as possible.\n    if (this._aligner.acceptsHistory) this.start()\n  }\n\n  start(): void {\n    if (this._didErr) return\n\n    if (!this._isRunning) {\n      this._isRunning = true\n\n      this.tick().then(() => {\n        this._isRunning = false\n      })\n    }\n  }\n\n  private async tick() {\n    const shouldFetchMore =\n      this._aligner.acceptsHistory &&\n      !this.timeline.reachedEarliestEntry &&\n      (this.selectionState === 'loading' ||\n        this._fetchMore ||\n        this.timeline.chunkCount <= this._fetchAtLeast)\n\n    if (!shouldFetchMore) {\n      return\n    }\n\n    try {\n      await this.fetchMoreTransactions()\n    } catch (err) {\n      this._didErr = true\n      this.handler(err, this)\n      return\n    }\n\n    await this.tick()\n  }\n\n  private async fetchMoreTransactions() {\n    const publishedId = this.timeline.publishedId\n    const draftId = this.timeline.draftId\n    const {dataset, token} = this.client.config()\n    const limit = TRANSLOG_ENTRY_LIMIT\n\n    let queryParams = `tag=sanity.studio.desk.history&effectFormat=mendoza&excludeContent=true&excludeMutations=true&includeIdentifiedDocumentsOnly=true&reverse=true&limit=${limit}`\n    let tid = this._aligner.earliestTransactionId\n    if (tid) {\n      queryParams += `&toTransaction=${tid}`\n    }\n\n    const url = `/data/history/${dataset}/transactions/${publishedId},${draftId}?${queryParams}`\n\n    const stream = await getJsonStream(this.client.getUrl(url), token)\n    const reader = stream.getReader()\n    let count = 0\n\n    for (;;) {\n      // eslint-disable-next-line no-await-in-loop\n      const result = await reader.read()\n      if (result.done) break\n\n      if ('error' in result.value) {\n        throw new Error(result.value.error.description || result.value.error.type)\n      }\n\n      count++\n\n      if (result.value.id === tid) {\n        // toTransaction is inclusive so we must ignore it when we fetch the next page\n        continue\n      }\n\n      // For some reason, the aligner is now interested in a different set of entries.\n      // This can happen if a new snapshot comes in as we're streaming the translog.\n      // In this case it's safe to abort, and the run-loop will re-schedule it correctly.\n      if (this._aligner.earliestTransactionId !== tid || !this._aligner.acceptsHistory) {\n        return\n      }\n\n      this._aligner.prependHistoryEvent(result.value)\n      tid = this._aligner.earliestTransactionId\n    }\n\n    // Same consistency checking here:\n    if (this._aligner.earliestTransactionId !== tid || !this._aligner.acceptsHistory) {\n      return\n    }\n\n    if (count < limit) {\n      this._aligner.didReachEarliestEntry()\n    }\n\n    this.markChange()\n  }\n\n  private markChange() {\n    this.timeline.updateChunks()\n\n    this.setRevTime(this._rev)\n    this.setSinceTime(this._rev)\n\n    this.version++\n    this.handler(null, this)\n  }\n}\n\nexport function createObservableController(\n  options: Omit<TimelineControllerOptions, 'handler'>\n): Observable<{historyController: TimelineController}> {\n  return new Observable((observer) => {\n    const controller = new TimelineController({\n      ...options,\n      handler: (err, innerController) => {\n        if (err) {\n          observer.error(err)\n        } else {\n          observer.next({historyController: innerController})\n        }\n      },\n    })\n\n    return remoteSnapshots(\n      options.client,\n      {\n        publishedId: options.documentId,\n        draftId: `drafts.${options.documentId}`,\n      },\n      options.documentType\n    ).subscribe((ev) => {\n      controller.handleRemoteMutation(ev)\n    })\n  })\n}\n","import {Annotation} from '../../../field'\nimport {CombinedDocument} from './types'\n\nexport function isSameAnnotation(a: Annotation, b: Annotation): boolean {\n  if (a && b) {\n    return a.author === b.author && a.chunk === b.chunk\n  }\n\n  if (!a && !b) {\n    return true\n  }\n\n  return false\n}\n\nexport function getAttrs(doc: CombinedDocument): Record<string, unknown> | null {\n  return doc.draft || doc.published\n}\n","import {incremental} from 'mendoza'\nimport {Input, ArrayInput, ObjectInput, StringInput, wrap, Diff, diffInput} from '@sanity/diff'\nimport {Chunk, Annotation} from '../../../field'\nimport {Timeline} from './Timeline'\nimport {isSameAnnotation} from './utils'\n\nexport type Meta = {chunk: Chunk; transactionIndex: number} | null\n\nexport type AnnotationExtractor = {\n  fromValue(value: incremental.Value<Meta>): Annotation\n  fromMeta(meta: Meta): Annotation\n}\n\nclass ArrayContentWrapper implements ArrayInput<Annotation> {\n  type: 'array' = 'array'\n  value: unknown[]\n  length: number\n  annotation: Annotation\n  extractor: AnnotationExtractor\n\n  private content: incremental.ArrayContent<Meta>\n  private elements: Input<Annotation>[] = []\n\n  constructor(\n    content: incremental.ArrayContent<Meta>,\n    value: unknown[],\n    annotation: Annotation,\n    extractor: AnnotationExtractor\n  ) {\n    this.content = content\n    this.value = value\n    this.annotation = annotation\n    this.extractor = extractor\n    this.length = content.elements.length\n  }\n\n  at(idx: number) {\n    if (idx >= this.length) throw new Error('out of bounds')\n    const input = this.elements[idx]\n    if (input) {\n      return input\n    }\n    return (this.elements[idx] = wrapValue(\n      this.content.elements[idx],\n      this.value[idx],\n      this.extractor\n    ))\n  }\n\n  annotationAt(idx: number): Annotation {\n    const meta = this.content.metas[idx]\n    return this.extractor.fromMeta(meta)\n  }\n}\n\nclass ObjectContentWrapper implements ObjectInput<Annotation> {\n  type: 'object' = 'object'\n  value: Record<string, unknown>\n  keys: string[]\n  annotation: Annotation\n  extractor: AnnotationExtractor\n\n  private content: incremental.ObjectContent<Meta>\n  private fields: Record<string, Input<Annotation>> = {}\n\n  constructor(\n    content: incremental.ObjectContent<Meta>,\n    value: Record<string, unknown>,\n    annotation: Annotation,\n    extractor: AnnotationExtractor\n  ) {\n    this.content = content\n    this.value = value\n    this.annotation = annotation\n    this.extractor = extractor\n    this.keys = Object.keys(content.fields)\n  }\n\n  get(key: string) {\n    const input = this.fields[key]\n    if (input) {\n      return input\n    }\n    const value = this.content.fields[key]\n    if (!value) return undefined\n    return (this.fields[key] = wrapValue(value, this.value[key], this.extractor))\n  }\n}\n\nclass StringContentWrapper implements StringInput<Annotation> {\n  type: 'string' = 'string'\n  value: string\n  annotation: Annotation\n  extractor: AnnotationExtractor\n\n  private content: incremental.StringContent<Meta>\n\n  constructor(\n    content: incremental.StringContent<Meta>,\n    value: string,\n    annotation: Annotation,\n    extractor: AnnotationExtractor\n  ) {\n    this.content = content\n    this.value = value\n    this.annotation = annotation\n    this.extractor = extractor\n  }\n\n  sliceAnnotation(start: number, end: number): {text: string; annotation: Annotation}[] {\n    const result: {text: string; annotation: Annotation}[] = []\n    let idx = 0\n\n    function push(text: string, annotation: Annotation) {\n      if (result.length > 0) {\n        const lst = result[result.length - 1]\n        if (isSameAnnotation(lst.annotation, annotation)) {\n          lst.text += text\n          return\n        }\n      }\n\n      result.push({text, annotation})\n    }\n\n    for (const part of this.content.parts) {\n      const length = part.value.length\n\n      const subStart = Math.max(0, start - idx)\n      if (subStart < length) {\n        // The start of the slice is inside this part somewhere.\n\n        // Figure out where the end is:\n        const subEnd = Math.min(length, end - idx)\n\n        // If the end of the slice is before this part, then we're guaranteed\n        // that there are no more parts.\n        if (subEnd <= 0) break\n\n        push(part.value.slice(subStart, subEnd), this.extractor.fromValue(part))\n      }\n\n      idx += length\n    }\n\n    return result\n  }\n}\n\nfunction wrapValue(\n  value: incremental.Value<Meta>,\n  raw: unknown,\n  extractor: AnnotationExtractor\n): Input<Annotation> {\n  const annotation = extractor.fromValue(value)\n\n  if (value.content) {\n    switch (value.content.type) {\n      case 'array':\n        return new ArrayContentWrapper(value.content, raw as unknown[], annotation, extractor)\n      case 'object':\n        return new ObjectContentWrapper(\n          value.content,\n          raw as Record<string, unknown>,\n          annotation,\n          extractor\n        )\n      case 'string':\n        return new StringContentWrapper(value.content, raw as string, annotation, extractor)\n      default:\n      // do nothing\n    }\n  }\n\n  return wrap(raw, annotation)\n}\n\nfunction extractAnnotationForFromInput(\n  timeline: Timeline,\n  firstChunk: Chunk | null,\n  meta: Meta\n): Annotation {\n  if (meta) {\n    // The next transaction is where it disappeared:\n    return annotationForTransactionIndex(timeline, meta.transactionIndex + 1, meta.chunk.index)\n  } else if (firstChunk) {\n    return annotationForTransactionIndex(timeline, firstChunk.start, firstChunk.index)\n  }\n\n  return null\n}\n\nfunction extractAnnotationForToInput(timeline: Timeline, meta: Meta): Annotation {\n  if (meta) {\n    return annotationForTransactionIndex(timeline, meta.transactionIndex, meta.chunk.index)\n  }\n\n  return null\n}\n\nfunction annotationForTransactionIndex(timeline: Timeline, idx: number, chunkIdx?: number) {\n  const tx = timeline.transactionByIndex(idx)\n  if (!tx) return null\n\n  const chunk = timeline.chunkByTransactionIndex(idx, chunkIdx)\n  if (!chunk) return null\n\n  return {\n    chunk,\n    timestamp: tx.timestamp,\n    author: tx.author,\n  }\n}\n\n// eslint-disable-next-line max-params\nexport function diffValue(\n  timeline: Timeline,\n  firstChunk: Chunk | null,\n  from: incremental.Value<Meta>,\n  fromRaw: unknown,\n  to: incremental.Value<Meta>,\n  toRaw: unknown\n): Diff<Annotation> {\n  const fromInput = wrapValue(from, fromRaw, {\n    fromValue(value) {\n      return extractAnnotationForFromInput(timeline, firstChunk, value.endMeta)\n    },\n    fromMeta(meta) {\n      return extractAnnotationForFromInput(timeline, firstChunk, meta)\n    },\n  })\n\n  const toInput = wrapValue(to, toRaw, {\n    fromValue(value) {\n      return extractAnnotationForToInput(timeline, value.startMeta)\n    },\n    fromMeta(meta) {\n      return extractAnnotationForToInput(timeline, meta)\n    },\n  })\n  return diffInput(fromInput, toInput)\n}\n","export type Merger<T> = (left: T, right: T) => T | [T, T]\n\n/**\n * The two ended array supports pushing both at the beginning and\n * at the end while preserving indicies.\n */\nexport class TwoEndedArray<T extends {index: number}> {\n  private _postive: T[] = []\n  private _negative: T[] = []\n\n  addToEnd(elem: T): void {\n    elem.index = this._postive.length\n    this._postive.push(elem)\n  }\n\n  addToBeginning(elem: T): void {\n    // Prefer to place things at the positive side if possible.\n    if (this.length == 0) {\n      this.addToEnd(elem)\n      return\n    }\n\n    elem.index = -(this._negative.length + 1)\n    this._negative.push(elem)\n  }\n\n  mergeAtEnd(value: T, merger: Merger<T>): void {\n    if (this.length === 0) {\n      this.addToEnd(value)\n      return\n    }\n\n    const idx = this.lastIdx\n    const result = merger(this.get(idx), value)\n    if (Array.isArray(result)) {\n      this.set(idx, result[0])\n      this.addToEnd(result[1])\n    } else {\n      this.set(idx, result)\n    }\n  }\n\n  mergeAtBeginning(value: T, merger: Merger<T>): void {\n    if (this.length === 0) {\n      this.addToEnd(value)\n      return\n    }\n\n    const idx = this.firstIdx\n    const result = merger(value, this.get(idx))\n    if (Array.isArray(result)) {\n      this.set(idx, result[1])\n      this.addToBeginning(result[0])\n    } else {\n      this.set(idx, result)\n    }\n  }\n\n  removeFromEnd(): void {\n    if (this._postive.length === 0) {\n      this._negative.shift()\n    } else {\n      this._postive.pop()\n    }\n  }\n\n  has(idx: number): boolean {\n    if (idx >= 0) {\n      return idx < this._postive.length\n    }\n\n    return -(idx + 1) < this._negative.length\n  }\n\n  get(idx: number): T {\n    if (idx >= 0) {\n      return this._postive[idx]\n    }\n\n    return this._negative[-(idx + 1)]\n  }\n\n  set(idx: number, value: T): void {\n    if (idx >= 0) {\n      value.index = idx\n      this._postive[idx] = value\n    } else {\n      value.index = idx\n      this._negative[-(idx + 1)] = value\n    }\n  }\n\n  get lastIdx(): number {\n    // Note: This also works correctly when _positive is empty (it returns -1)\n    return this._postive.length - 1\n  }\n\n  get last(): T {\n    return this.get(this.lastIdx)\n  }\n\n  get firstIdx(): number {\n    // Note: This also works correctly when _negative is empty (it returns 0)\n    return -this._negative.length\n  }\n\n  get first(): T {\n    return this.get(this.firstIdx)\n  }\n\n  get length(): number {\n    return this._postive.length + this._negative.length\n  }\n}\n","/* eslint-disable no-nested-ternary */\nimport type {MendozaEffectPair, MendozaPatch} from '@sanity/types'\nimport type {Transaction, ChunkType, Chunk} from './types'\n\nfunction canMergeEdit(type: ChunkType) {\n  return type === 'create' || type === 'editDraft'\n}\n\nconst CHUNK_WINDOW = 5 * 60 * 1000 // 5 minutes\n\nfunction isWithinMergeWindow(a: string, b: string) {\n  return Date.parse(b) - Date.parse(a) < CHUNK_WINDOW\n}\n\nexport function mergeChunk(left: Chunk, right: Chunk): Chunk | [Chunk, Chunk] {\n  if (left.end !== right.start) throw new Error('chunks are not next to each other')\n\n  // TODO: How to detect first squash/create\n\n  const draftState = combineState(left.draftState, right.draftState)\n  const publishedState = combineState(left.publishedState, right.publishedState)\n\n  if (left.type === 'delete' && right.type === 'editDraft') {\n    return [left, {...right, type: 'create', draftState, publishedState}]\n  }\n\n  // Convert deletes into either discardDraft or unpublish depending on what's been deleted.\n  if (right.type === 'delete') {\n    if (draftState === 'missing' && publishedState === 'present') {\n      return [left, {...right, type: 'discardDraft', draftState, publishedState}]\n    }\n\n    if (draftState === 'present' && publishedState === 'missing') {\n      return [left, {...right, type: 'unpublish', draftState, publishedState}]\n    }\n  }\n\n  if (\n    canMergeEdit(left.type) &&\n    right.type === 'editDraft' &&\n    isWithinMergeWindow(left.endTimestamp, right.startTimestamp)\n  ) {\n    const authors = new Set<string>()\n    for (const author of left.authors) authors.add(author)\n    for (const author of right.authors) authors.add(author)\n\n    return {\n      index: 0,\n      id: right.id,\n      type: left.type,\n      start: left.start,\n      end: right.end,\n      startTimestamp: left.startTimestamp,\n      endTimestamp: right.endTimestamp,\n      authors,\n      draftState,\n      publishedState,\n    }\n  }\n\n  return [left, {...right, draftState, publishedState}]\n}\n\ntype ChunkState = 'unedited' | 'deleted' | 'upsert'\nfunction getChunkState(effect?: MendozaEffectPair): ChunkState {\n  const modified = Boolean(effect)\n  const deleted = effect && isDeletePatch(effect?.apply)\n\n  if (deleted) {\n    return 'deleted'\n  }\n\n  if (modified) {\n    return 'upsert'\n  }\n\n  return 'unedited'\n}\n\n/*\n * getChunkType tries to determine what effect the given transaction had on the document\n * More information about the logic can be found here https://github.com/sanity-io/sanity/pull/2633#issuecomment-886461812\n *\n * |                    | draft unedited | draft deleted | draft upsert |\n * |--------------------|----------------|---------------|--------------|\n * | published unedited | X              | delete        | editDraft    |\n * | published deleted  | delete         | delete        | delete       |\n * | published upsert   | liveEdit       | publish       | liveEdit     |\n */\nfunction getChunkType(transaction: Transaction): ChunkType {\n  const draftState = getChunkState(transaction.draftEffect)\n  const publishedState = getChunkState(transaction.publishedEffect)\n\n  if (publishedState === 'unedited') {\n    if (draftState === 'deleted') {\n      return 'delete'\n    }\n\n    if (draftState === 'upsert') {\n      return 'editDraft'\n    }\n  }\n\n  if (publishedState === 'deleted') {\n    return 'delete'\n  }\n\n  if (publishedState === 'upsert') {\n    if (draftState === 'unedited') {\n      return 'editLive'\n    }\n\n    if (draftState === 'deleted') {\n      return 'publish'\n    }\n\n    if (draftState === 'upsert') {\n      return 'editLive'\n    }\n  }\n\n  return 'editLive'\n}\n\nexport function chunkFromTransaction(transaction: Transaction): Chunk {\n  const modifiedDraft = Boolean(transaction.draftEffect)\n  const modifiedPublished = Boolean(transaction.publishedEffect)\n\n  const draftDeleted = transaction.draftEffect && isDeletePatch(transaction.draftEffect.apply)\n  const publishedDeleted =\n    transaction.publishedEffect && isDeletePatch(transaction.publishedEffect.apply)\n\n  const type = getChunkType(transaction)\n\n  return {\n    index: 0,\n    id: transaction.id,\n    type,\n    start: transaction.index,\n    end: transaction.index + 1,\n    startTimestamp: transaction.timestamp,\n    endTimestamp: transaction.timestamp,\n    authors: new Set([transaction.author]),\n    draftState: modifiedDraft ? (draftDeleted ? 'missing' : 'present') : 'unknown',\n    publishedState: modifiedPublished ? (publishedDeleted ? 'missing' : 'present') : 'unknown',\n  }\n}\n\nfunction combineState(\n  left: 'present' | 'missing' | 'unknown',\n  right: 'present' | 'missing' | 'unknown'\n) {\n  return right === 'unknown' ? left : right\n}\n\nexport function isDeletePatch(patch: MendozaPatch): boolean {\n  return patch[0] === 0 && patch[1] === null\n}\n","import type {TransactionLogEventWithEffects} from '@sanity/types'\nimport {Diff} from '@sanity/diff'\nimport {applyPatch, incremental} from 'mendoza'\nimport {Chunk, Annotation} from '../../../field'\nimport {Transaction, DocumentRemoteMutationVersionEvent, CombinedDocument} from './types'\nimport {diffValue, Meta} from './diffValue'\nimport {TwoEndedArray} from './TwoEndedArray'\nimport {mergeChunk, chunkFromTransaction} from './chunker'\nimport {TraceEvent} from './replay'\nimport {getAttrs} from './utils'\n\nexport type ParsedTimeRef = Chunk | 'loading' | 'invalid'\n\nexport interface TimelineOptions {\n  publishedId: string\n  enableTrace?: boolean\n}\n\n/**\n * Timeline maintains information about the history of a document:\n * Grouping raw translog entries into sensible groups, replaying and\n * reconstructing different versions and abstract other details.\n *\n * Note that this class by itself is not capable of _fetching_ information,\n * but will only organize and structure the incoming translog entries.\n */\nexport class Timeline {\n  reachedEarliestEntry = false\n\n  publishedId: string\n  draftId: string\n  private _transactions = new TwoEndedArray<Transaction>()\n  private _chunks = new TwoEndedArray<Chunk>()\n\n  // These two properties are here to handle the case\n  private _possiblePendingTransactions = new Map<\n    string,\n    {\n      transaction: Transaction\n      idx: number\n    }\n  >()\n  private _recreateTransactionsFrom?: number\n  private _trace?: TraceEvent[]\n\n  constructor(opts: TimelineOptions) {\n    this.publishedId = opts.publishedId\n    this.draftId = `drafts.${opts.publishedId}`\n\n    if (opts.enableTrace) {\n      this._trace = []\n      this._trace.push({\n        type: 'initial',\n        publishedId: opts.publishedId,\n      })\n      ;(window as any).__sanityTimelineTrace = this._trace\n    }\n  }\n\n  get chunkCount(): number {\n    return this._chunks.length\n  }\n\n  /** Maps over the chunk from newest to oldest. */\n  mapChunks<T>(mapper: (chunk: Chunk, idx: number) => T): T[] {\n    const result: T[] = []\n\n    const firstIdx = this._chunks.firstIdx\n    const lastIdx = this._chunks.lastIdx\n\n    for (let idx = lastIdx; idx >= firstIdx; idx--) {\n      result.push(mapper(this._chunks.get(idx), idx))\n    }\n\n    return result\n  }\n\n  reset(): void {\n    this._transactions = new TwoEndedArray()\n    this._chunks = new TwoEndedArray()\n    this._possiblePendingTransactions = new Map()\n    this._recreateTransactionsFrom = undefined\n    this.reachedEarliestEntry = false\n  }\n\n  /**\n   * Adds a remote mutation to the timeline. This methods assumes that the remote mutations\n   * come in correct order for their respective version, but has no ordering requirements\n   * across draft/published.\n   *\n   * Example: [D1, D2, P1] (where D1 and P1 were mutations done to the draft and published\n   * version in the same transaction) is a valid input. [P1, D2, D1] is _not_ valid since\n   * the mutation for the draft is out of order.\n   */\n  addRemoteMutation(entry: DocumentRemoteMutationVersionEvent): void {\n    if (this._trace) this._trace.push({type: 'addRemoteMutation', event: entry})\n\n    const pending = this._possiblePendingTransactions.get(entry.transactionId)\n\n    const transaction: Transaction = pending\n      ? pending.transaction\n      : {\n          index: 0,\n          id: entry.transactionId,\n          timestamp: entry.timestamp.toISOString(),\n          author: entry.author,\n        }\n\n    if (entry.version === 'draft') {\n      transaction.draftEffect = entry.effects as any\n    } else {\n      transaction.publishedEffect = entry.effects as any\n    }\n\n    if (pending) {\n      this._possiblePendingTransactions.delete(entry.transactionId)\n      this._invalidateTransactionFrom(pending.idx)\n    } else {\n      this._transactions.addToEnd(transaction)\n      this._possiblePendingTransactions.set(entry.transactionId, {\n        transaction,\n        idx: this._transactions.lastIdx,\n      })\n    }\n  }\n\n  addTranslogEntry(event: TransactionLogEventWithEffects): void {\n    if (this._trace) this._trace.push({type: 'addTranslogEntry', event})\n\n    this._transactions.addToBeginning({\n      index: 0,\n      id: event.id,\n      author: event.author,\n      timestamp: event.timestamp,\n      draftEffect: event.effects[this.draftId],\n      publishedEffect: event.effects[this.publishedId],\n    })\n  }\n\n  /** Mark that we've reached the earliest entry. */\n  didReachEarliestEntry(): void {\n    if (this._trace) this._trace.push({type: 'didReachEarliestEntry'})\n\n    this.reachedEarliestEntry = true\n  }\n\n  /**\n   * updateChunks synchronizes the chunks to match the current state\n   * of the transactions array. After calling this method you need\n   * to invalidate all Chunks.\n   */\n  updateChunks(): void {\n    if (this._trace) this._trace.push({type: 'updateChunks'})\n\n    this._removeInvalidatedChunks()\n    this._addChunksFromTransactions()\n    this._createInitialChunk()\n  }\n\n  private _removeInvalidatedChunks() {\n    if (this._recreateTransactionsFrom) {\n      while (this._chunks.length > 0) {\n        const chunk = this._chunks.last\n        if (this._recreateTransactionsFrom < chunk.end) {\n          this._chunks.removeFromEnd()\n        } else {\n          break\n        }\n      }\n      this._recreateTransactionsFrom = undefined\n    }\n  }\n\n  private _addChunksFromTransactions() {\n    const firstIdx = this._transactions.firstIdx\n    const lastIdx = this._transactions.lastIdx\n\n    // Add transactions at the end:\n    const nextTransactionToChunk = this._chunks.length > 0 ? this._chunks.last.end : firstIdx\n    for (let idx = nextTransactionToChunk; idx <= lastIdx; idx++) {\n      const transaction = this._transactions.get(idx)\n      this._chunks.mergeAtEnd(chunkFromTransaction(transaction), mergeChunk)\n    }\n\n    // Add transactions at the beginning:\n    if (this._chunks.length == 0) return\n\n    const firstTransactionChunked = this._chunks.first.start\n\n    for (let idx = firstTransactionChunked - 1; idx >= firstIdx; idx--) {\n      const transaction = this._transactions.get(idx)\n      this._chunks.mergeAtBeginning(chunkFromTransaction(transaction), mergeChunk)\n    }\n  }\n\n  private _invalidateTransactionFrom(idx: number) {\n    if (this._recreateTransactionsFrom === undefined || idx < this._recreateTransactionsFrom) {\n      this._recreateTransactionsFrom = idx\n    }\n  }\n\n  private _createInitialChunk() {\n    if (this.reachedEarliestEntry) {\n      if (this._chunks.first?.type === 'initial') return\n\n      const firstTx = this._transactions.first\n      if (!firstTx) return\n      const initialChunk = chunkFromTransaction(firstTx)\n      initialChunk.type = 'initial'\n      initialChunk.id = '@initial'\n      initialChunk.end = initialChunk.start\n      this._chunks.addToBeginning(initialChunk)\n    }\n  }\n\n  /**\n   * Resolves a time reference.\n   *\n   * Note that the chunk returned is only valid if the timeline stays constant.\n   * Once the timeline is updated, you must re-parse all references.\n   */\n  parseTimeId(id: string): ParsedTimeRef {\n    if (this._chunks.length === 0) {\n      return this.reachedEarliestEntry ? 'invalid' : 'loading'\n    }\n\n    const [timestampStr, chunkId] = id.split('/', 3)\n    const timestamp = Number(timestampStr)\n\n    for (let idx = this._chunks.lastIdx; idx >= this._chunks.firstIdx; idx--) {\n      const chunk = this._chunks.get(idx)\n      if (chunk.id === chunkId) {\n        return chunk\n      }\n\n      if (Date.parse(chunk.endTimestamp) + 60 * 60 * 1000 < timestamp) {\n        // The chunk ended _before_ the timestamp we're asking for. This means that there\n        // is no point in looking further and the chunk is invalid.\n\n        // We add 1 hour to allow some slack since transactions are not guaranteed to be in order.\n        return 'invalid'\n      }\n    }\n\n    return this.reachedEarliestEntry ? 'invalid' : 'loading'\n  }\n\n  findLastPublishedBefore(chunk: Chunk | null): ParsedTimeRef {\n    for (\n      let chunkIdx = chunk ? chunk.index - 1 : this._chunks.lastIdx;\n      chunkIdx >= this._chunks.firstIdx;\n      chunkIdx--\n    ) {\n      const currentChunk = this._chunks.get(chunkIdx)\n      if (currentChunk.type === 'publish' || currentChunk.type === 'initial') {\n        return currentChunk\n      }\n    }\n\n    if (!this.reachedEarliestEntry) return 'loading'\n\n    return this._chunks.first\n  }\n\n  isLatestChunk(chunk: Chunk): boolean {\n    return chunk === this._chunks.last\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  createTimeId(chunk: Chunk): string {\n    return `${chunk.endTimestamp.valueOf()}/${chunk.id}`\n  }\n\n  lastChunk(): Chunk {\n    return this._chunks.last\n  }\n\n  transactionByIndex(idx: number): Transaction | null {\n    if (!this._transactions.has(idx)) return null\n    return this._transactions.get(idx)\n  }\n\n  chunkByTransactionIndex(idx: number, startChunkIdx = 0): Chunk {\n    let chunkIdx = startChunkIdx\n    for (;;) {\n      const chunk = this._chunks.get(chunkIdx)\n      if (!chunk) throw new Error('transaction does not belong in any chunk')\n\n      if (idx >= chunk.end) {\n        chunkIdx++\n      } else if (idx < chunk.start) {\n        chunkIdx--\n      } else {\n        return chunk\n      }\n    }\n  }\n\n  replayBackwardsBetween(\n    firstIdx: number,\n    lastIdx: number,\n    doc: CombinedDocument\n  ): CombinedDocument {\n    let draft = doc.draft\n    let published = doc.published\n\n    for (let idx = lastIdx; idx >= firstIdx; idx--) {\n      const transaction = this._transactions.get(idx)\n\n      if (transaction.draftEffect) {\n        draft = applyPatch(draft, transaction.draftEffect.revert)\n      }\n\n      if (transaction.publishedEffect) {\n        published = applyPatch(published, transaction.publishedEffect.revert)\n      }\n    }\n\n    return {draft, published}\n  }\n\n  replayBackwardsUntil(firstIdx: number, doc: CombinedDocument): CombinedDocument {\n    return this.replayBackwardsBetween(firstIdx, this._transactions.lastIdx, doc)\n  }\n\n  calculateDiff(\n    initialDoc: CombinedDocument,\n    finalDoc: CombinedDocument,\n    firstIdx: number,\n    lastIdx: number\n  ): Diff<Annotation> {\n    let draftValue = incremental.wrap<Meta>(initialDoc.draft, null)\n    let publishedValue = incremental.wrap<Meta>(initialDoc.published, null)\n\n    const initialValue = getValue(draftValue, publishedValue)\n    const initialAttributes = getAttrs(initialDoc)\n    let firstChunk: Chunk | null = null\n\n    // Loop over all of the chunks:\n    for (let chunkIdx = firstIdx; chunkIdx <= lastIdx; chunkIdx++) {\n      const chunk = this._chunks.get(chunkIdx)\n      if (!firstChunk) firstChunk = chunk\n\n      for (let idx = chunk.start; idx < chunk.end; idx++) {\n        const transaction = this._transactions.get(idx)\n\n        const meta = {\n          chunk,\n          transactionIndex: idx,\n        }\n\n        const preDraftValue = draftValue\n        const prePublishedValue = publishedValue\n\n        if (transaction.draftEffect) {\n          draftValue = incremental.applyPatch(draftValue, transaction.draftEffect.apply, meta)\n        }\n\n        if (transaction.publishedEffect) {\n          publishedValue = incremental.applyPatch(\n            publishedValue,\n            transaction.publishedEffect.apply,\n            meta\n          )\n        }\n\n        const didHaveDriaft = incremental.getType(preDraftValue) !== 'null'\n        const haveDraft = incremental.getType(draftValue) !== 'null'\n        const havePublished = incremental.getType(publishedValue) !== 'null'\n\n        if (havePublished && !haveDraft) {\n          publishedValue = incremental.rebaseValue(preDraftValue, publishedValue)\n        }\n\n        if (haveDraft && !didHaveDriaft) {\n          draftValue = incremental.rebaseValue(prePublishedValue, draftValue)\n        }\n      }\n    }\n\n    const finalValue = incremental.getType(draftValue) === 'null' ? publishedValue : draftValue\n    const finalAttributes = getAttrs(finalDoc)\n\n    return diffValue(this, firstChunk, initialValue, initialAttributes, finalValue, finalAttributes)\n  }\n}\n\nfunction getValue(draftValue: incremental.Value<Meta>, publishedValue: incremental.Value<Meta>) {\n  return incremental.getType(draftValue) === 'null' ? publishedValue : draftValue\n}\n","import type {SanityClient} from '@sanity/client'\nimport {\n  isReference,\n  Reference,\n  SanityDocument,\n  TransactionLogEventWithMutations,\n} from '@sanity/types'\nimport jsonReduce from 'json-reduce'\nimport {from, Observable} from 'rxjs'\nimport {map, mergeMap} from 'rxjs/operators'\nimport {getDraftId, getPublishedId, isRecord} from '../../util'\nimport {Timeline, TimelineController, createObservableController} from './history'\n\nexport interface HistoryStore {\n  getDocumentAtRevision: (\n    documentId: string,\n    revision: string\n  ) => Promise<SanityDocument | undefined>\n\n  getHistory: (\n    documentIds: string[],\n    options?: {time?: string; revision?: string}\n  ) => Promise<{documents: SanityDocument[]}>\n\n  getTransactions: (documentIds: string[]) => Promise<TransactionLogEventWithMutations[]>\n\n  restore: (id: string, targetId: string, rev: string) => Observable<SanityDocument>\n\n  getTimeline: (options: {publishedId: string; enableTrace?: boolean}) => Timeline\n\n  getTimelineController: (options: {\n    client: SanityClient\n    documentId: string\n    documentType: string\n    timeline: Timeline\n  }) => Observable<{historyController: TimelineController}>\n}\n\nconst documentRevisionCache: Record<string, Promise<SanityDocument | undefined> | undefined> =\n  Object.create(null)\n\nconst getHistory = (\n  client: SanityClient,\n  documentIds: string[],\n  options: {time?: string; revision?: string} = {}\n): Promise<{documents: SanityDocument[]}> => {\n  const ids = Array.isArray(documentIds) ? documentIds : [documentIds]\n  const {time, revision} = options\n\n  if (time && revision) {\n    throw new Error(`getHistory can't handle both time and revision parameters`)\n  }\n\n  const dataset = client.clientConfig.dataset\n  let url = `/data/history/${dataset}/documents/${ids.join(',')}`\n\n  if (revision) {\n    url = `${url}?revision=${revision}`\n  } else {\n    const timestamp = time || new Date().toISOString()\n\n    url = `${url}?time=${timestamp}`\n  }\n\n  return client.request({url})\n}\n\nconst getDocumentAtRevision = (\n  client: SanityClient,\n  documentId: string,\n  revision: string\n): Promise<SanityDocument | undefined> => {\n  const publishedId = getPublishedId(documentId)\n  const draftId = getDraftId(documentId)\n  const cacheKey = `${publishedId}@${revision}`\n  const cached = documentRevisionCache[cacheKey]\n  if (cached) {\n    return cached\n  }\n\n  const dataset = client.clientConfig.dataset\n  const url = `/data/history/${dataset}/documents/${publishedId},${draftId}?revision=${revision}`\n\n  const entry = client.request<{documents?: SanityDocument[]}>({url}).then((result) => {\n    const documents = result.documents || []\n    const published = documents.find((res) => res._id === publishedId)\n    const draft = documents.find((res) => res._id === draftId)\n    return draft || published\n  })\n\n  documentRevisionCache[cacheKey] = entry\n  return entry\n}\n\nconst getTransactions = async (\n  client: SanityClient,\n  documentIds: string | string[]\n): Promise<TransactionLogEventWithMutations[]> => {\n  const ids = Array.isArray(documentIds) ? documentIds : [documentIds]\n  const dataset = client.clientConfig.dataset\n  const query = {excludeContent: 'true', includeIdentifiedDocumentsOnly: 'true'}\n  const url = `/data/history/${dataset}/transactions/${ids.join(',')}`\n  const result = await client.request({url, query})\n  const transactions = result\n    .toString('utf8')\n    .split('\\n')\n    .filter(Boolean)\n    .map((line: string) => JSON.parse(line))\n\n  return transactions\n}\n\nconst getAllRefIds = (doc: SanityDocument): string[] =>\n  jsonReduce(\n    doc as any,\n    (acc: any, node) => (isReference(node) && !acc.includes(node._ref) ? [...acc, node._ref] : acc),\n    []\n  )\n\nfunction jsonMap(value: unknown, mapFn: any): any {\n  if (Array.isArray(value)) {\n    return mapFn(\n      value.map((item) => jsonMap(item, mapFn)).filter((item) => typeof item !== 'undefined')\n    )\n  }\n\n  if (isRecord(value)) {\n    return mapFn(\n      Object.keys(value).reduce<Record<string, unknown>>((res, key) => {\n        const mappedValue = jsonMap(value[key], mapFn)\n        if (typeof mappedValue !== 'undefined') {\n          res[key] = mappedValue\n        }\n\n        return res\n      }, {})\n    )\n  }\n\n  return mapFn(value)\n}\n\nconst mapRefNodes = (doc: SanityDocument, mapFn: (node: Reference) => Reference | undefined) =>\n  jsonMap(doc, (node: unknown) => (isReference(node) ? mapFn(node) : node))\n\nexport const removeMissingReferences = (\n  doc: SanityDocument,\n  existingIds: Record<string, boolean | undefined>\n): SanityDocument =>\n  mapRefNodes(doc, (refNode) => {\n    const documentExists = existingIds[refNode._ref]\n    return documentExists ? refNode : undefined\n  })\n\nfunction restore(client: SanityClient, documentId: string, targetDocumentId: string, rev: string) {\n  return from(getDocumentAtRevision(client, documentId, rev)).pipe(\n    mergeMap((documentAtRevision) => {\n      if (!documentAtRevision) {\n        throw new Error(`Unable to find document with ID ${documentId} at revision ${rev}`)\n      }\n\n      const existingIdsQuery = getAllRefIds(documentAtRevision)\n        .map((refId) => `\"${refId}\": defined(*[_id==\"${refId}\"]._id)`)\n        .join(',')\n\n      return client.observable\n        .fetch<Record<string, boolean | undefined>>(`{${existingIdsQuery}}`)\n        .pipe(map((existingIds) => removeMissingReferences(documentAtRevision, existingIds)))\n    }),\n    map((documentAtRevision) => {\n      // Remove _updatedAt and create a new draft from the document at given revision\n      const {_updatedAt, ...document} = documentAtRevision\n      return {...document, _id: targetDocumentId}\n    }),\n    mergeMap((restoredDraft) =>\n      client.observable.createOrReplace(restoredDraft, {visibility: 'async'})\n    )\n  )\n}\n\nexport interface HistoryStoreOptions {\n  client: SanityClient\n}\n\nexport function createHistoryStore({client}: HistoryStoreOptions): HistoryStore {\n  return {\n    getDocumentAtRevision: (documentId, revision) =>\n      getDocumentAtRevision(client, documentId, revision),\n\n    getHistory: (documentIds, options) => getHistory(client, documentIds, options),\n\n    getTransactions: (documentIds) => getTransactions(client, documentIds),\n\n    restore: (id, targetId, rev) => restore(client, id, targetId, rev),\n\n    getTimeline: (options: {publishedId: string; enableTrace?: boolean}) => new Timeline(options),\n\n    getTimelineController: (options: {\n      client: SanityClient\n      documentId: string\n      documentType: string\n      timeline: Timeline\n    }) => createObservableController(options),\n  }\n}\n","import {defer, timer} from 'rxjs'\nimport {map, mergeMapTo, shareReplay} from 'rxjs/operators'\nimport {sample} from 'lodash'\nimport {StateEvent} from './message-transports/transport'\n\nconst USERIDS = [\n  'pqSMwf6hH',\n  'pnLYqNfv5',\n  'priDVVmy8',\n  'p0NFOU0j8',\n  'pTDl2jw8d',\n  'pHMeQnTse',\n  'pDQYzJbyS',\n  'pZyoPHKUs',\n  'p4Tyi2Be5',\n  'pb9vii060',\n  'pE8yhOisw',\n  'p7Fd2C6Cj',\n  'p3exSgYCx',\n  'pbIQRYViC',\n  'p8GJaTEhN',\n  'p27ewL8aM',\n  'pYg97z75S',\n  'pdLr4quHv',\n  'pkJXiDgg6',\n  'pkl4UAKcA',\n\n  // Included to ensure we handle the case when a user profile cannot\n  // be fetched due to insufficient privileges or similar\n  'pNoExists',\n]\n\nconst PATHS = [\n  ['nested', 'first'],\n  ['nested', 'second'],\n  [\n    'nestedArray',\n    {_key: '565c867c8dac'},\n    'arrayNo1',\n    {_key: 'a645548a8f01'},\n    'arrayNo1',\n    {_key: '1685e372c40f'},\n    'fieldNo0',\n  ],\n  ['nestedArray', {_key: '565c867c8dac'}, 'fieldNo0'],\n  ['nestedArray', {_key: '565c867c8dac'}, 'arrayNo19', {_key: 'a02e7a93e2a2'}, 'fieldNo0'],\n  ['nestedArray', {_key: '565c867c8dac'}, 'arrayNo19', {_key: 'a02e7a93e2a2'}, 'fieldNo19'],\n  ['address', 'country'],\n  ['address', 'street'],\n  ['customInputWithDefaultPresence', 'row3', 'cell3'],\n]\n\nexport const mock$ = defer(() => timer(0, 10000)).pipe(\n  mergeMapTo(USERIDS),\n  map(\n    (id, n): StateEvent => ({\n      type: 'state',\n      userId: id,\n      sessionId: id + n,\n      timestamp: new Date().toISOString(),\n      locations: [\n        {\n          type: 'document',\n          documentId: 'presence-debug',\n          lastActiveAt: new Date().toISOString(),\n          path: sample(PATHS),\n        },\n      ] as any,\n    })\n  ),\n  shareReplay()\n)\n","import {Observable, EMPTY} from 'rxjs'\nimport {map, share} from 'rxjs/operators'\nimport {BifurClient} from '@sanity/bifur-client'\nimport {PresenceLocation} from '../types'\nimport {Transport, TransportEvent, TransportMessage} from './transport'\n\ntype BifurStateMessage = {\n  type: 'state'\n  i: string\n  m: {\n    sessionId: string\n    locations: PresenceLocation[]\n  }\n}\n\ntype BifurDisconnectMessage = {\n  type: 'disconnect'\n  i: string\n  m: {session: string}\n}\n\ntype RollCallEvent = {\n  type: 'rollCall'\n  i: string\n  session: string\n}\n\ntype IncomingBifurEvent<T> = RollCallEvent | BifurStateMessage | BifurDisconnectMessage\n\nconst handleIncomingMessage = (event: IncomingBifurEvent<Location[]>): TransportEvent => {\n  if (event.type === 'rollCall') {\n    return {\n      type: 'rollCall',\n      userId: event.i,\n      sessionId: event.session,\n    }\n  }\n  if (event.type === 'state') {\n    const {sessionId, locations} = event.m\n    return {\n      type: 'state',\n      userId: event.i,\n      sessionId: sessionId,\n      timestamp: new Date().toISOString(),\n      locations,\n    }\n  }\n\n  if (event.type === 'disconnect') {\n    return {\n      type: 'disconnect',\n      userId: event.i,\n      sessionId: event.m.session,\n      timestamp: new Date().toISOString(),\n    }\n  }\n\n  throw new Error(`Got unknown presence event: ${JSON.stringify(event)}`)\n}\n\nexport const createBifurTransport = (bifur: BifurClient, sessionId: string): Transport => {\n  const incomingEvents$: Observable<TransportEvent> = bifur\n    .request<IncomingBifurEvent<Location[]>>('presence')\n    .pipe(map(handleIncomingMessage))\n\n  const dispatchMessage = (message: TransportMessage): Observable<undefined> => {\n    if (message.type === 'rollCall') {\n      return bifur.request('presence_rollcall', {session: sessionId})\n    }\n\n    if (message.type === 'state') {\n      return bifur.request('presence_announce', {\n        data: {locations: message.locations, sessionId},\n      })\n    }\n\n    if (message.type === 'disconnect') {\n      return bifur.request('presence_disconnect', {session: sessionId})\n    }\n\n    return EMPTY\n  }\n\n  return [incomingEvents$.pipe(share()), dispatchMessage]\n}\n","/* eslint-disable camelcase */\n\nimport {BehaviorSubject, defer, EMPTY, from, fromEvent, merge, NEVER, Observable, timer} from 'rxjs'\nimport {\n  auditTime,\n  distinctUntilChanged,\n  filter,\n  flatMap,\n  map,\n  mergeMapTo,\n  scan,\n  share,\n  shareReplay,\n  switchMap,\n  switchMapTo,\n  takeUntil,\n  tap,\n  toArray,\n  withLatestFrom,\n} from 'rxjs/operators'\nimport {flatten, groupBy, omit, uniq} from 'lodash'\nimport {nanoid} from 'nanoid'\nimport {User} from '@sanity/types'\nimport {BifurClient} from '@sanity/bifur-client'\nimport {debugParams$} from '../debugParams'\nimport {ConnectionStatusStore} from '../connection-status/connection-status-store'\nimport {UserStore} from '../user'\nimport {\n  DisconnectEvent,\n  RollCallEvent,\n  StateEvent,\n  TransportEvent,\n} from './message-transports/transport'\nimport {mock$} from './mock-events'\nimport {createBifurTransport} from './message-transports/bifurTransport'\nimport {DocumentPresence, GlobalPresence, PresenceLocation, Session, UserSessionPair} from './types'\n\nexport interface PresenceStore {\n  /**\n   * @internal\n   */\n  documentPresence: (documentId: string) => Observable<DocumentPresence[]>\n\n  /**\n   * @internal\n   */\n  globalPresence$: Observable<GlobalPresence[]>\n\n  /**\n   * @internal\n   */\n  reportLocations: (locations: PresenceLocation[]) => Observable<void>\n\n  /**\n   * @internal\n   */\n  setLocation: (nextLocation: PresenceLocation[]) => void\n\n  /**\n   * @internal\n   */\n  debugPresenceParam$: Observable<string[]>\n}\n\nconst KEY = 'presence_session_id'\nconst generate = () => nanoid(16)\n\n// We're keeping the session id in sessionStorage as it will survive page reloads.\n// todo:\n//  There's a potential issue with window.open(...) here as it inherits the top level session storage and thus will\n//  re-use session ids:\n//    > Opening a page in a new tab or window creates a new session with the value of the top-level browsing context,\n//      which differs from how session cookies work.\n//      More at https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage\n//  This is _probably_ a quite marginal case and not going to be much of a issue in practice\nfunction getSessionId() {\n  try {\n    return window.sessionStorage.getItem(KEY)\n  } catch (err) {\n    // We don't want to fail hard if session storage can't be accessed for some reason\n  }\n  return null\n}\n\nfunction setSessionId(id: string) {\n  try {\n    window.sessionStorage.setItem(KEY, id)\n  } catch (err) {\n    // We don't want to fail hard if session storage can't be accessed for some reason\n  }\n  return id\n}\n\nexport const SESSION_ID = getSessionId() || setSessionId(generate())\n\nexport function __tmp_wrap_presenceStore(context: {\n  bifur: BifurClient\n  connectionStatusStore: ConnectionStatusStore\n  userStore: UserStore\n}): PresenceStore {\n  const {bifur, connectionStatusStore, userStore} = context\n\n  const [presenceEvents$, sendMessage] = createBifurTransport(bifur, SESSION_ID)\n\n  const currentLocation$ = new BehaviorSubject<PresenceLocation[]>([])\n  const locationChange$ = currentLocation$.pipe(distinctUntilChanged())\n\n  // export\n  const setLocation = (nextLocation: PresenceLocation[]) => {\n    currentLocation$.next(nextLocation)\n  }\n\n  // export\n  const reportLocations = (locations: PresenceLocation[]) =>\n    sendMessage({type: 'state', locations: locations})\n\n  const requestRollCall = () => sendMessage({type: 'rollCall'})\n\n  const rollCallRequests$ = presenceEvents$.pipe(\n    filter((event: TransportEvent): event is RollCallEvent => event.type === 'rollCall'),\n    // do not respond to my own rollcall requests\n    filter((event: RollCallEvent) => event.sessionId !== SESSION_ID)\n  )\n\n  const REPORT_MIN_INTERVAL = 30000\n\n  // Interval to report my own location at\n  const reportLocationInterval$ = timer(0, REPORT_MIN_INTERVAL)\n\n  const reportLocation$ = defer(() => merge(locationChange$, rollCallRequests$)).pipe(\n    switchMap(() => reportLocationInterval$),\n    withLatestFrom(currentLocation$),\n    map(([, locations]) => locations),\n    auditTime(200),\n    switchMap((locations) => reportLocations(locations)),\n    mergeMapTo(EMPTY),\n    share()\n  )\n\n  // This represents my rollcall request to other clients\n  // Note: We are requesting a rollcall whenever we (re)connect\n  const myRollCall$ = defer(() => requestRollCall()).pipe(mergeMapTo(EMPTY))\n\n  const connectionChange$ = connectionStatusStore.connectionStatus$.pipe(\n    map((status) => status.type),\n    filter((statusType) => statusType === 'connected' || statusType === 'error'),\n    distinctUntilChanged()\n  )\n\n  // export\n  const debugPresenceParam$ = debugParams$.pipe(\n    map((args) => args.find((arg) => arg.startsWith('presence='))),\n    map(\n      (arg) =>\n        arg\n          ?.split('presence=')[1]\n          .split(',')\n          .map((r) => r.trim()) || []\n    )\n  )\n\n  const useMock$ = debugPresenceParam$.pipe(\n    filter((args) => args.includes('fake_others')),\n    tap(() => {\n      // eslint-disable-next-line no-console\n      console.log(\n        'Faking other users present in the studio. They will hang out in the document with _type: \"presence\" and _id: \"presence-debug\"'\n      )\n    }),\n    switchMapTo(mock$)\n  )\n\n  const debugIntrospect$ = debugPresenceParam$.pipe(map((args) => args.includes('show_own')))\n\n  const syncEvent$ = merge(myRollCall$, presenceEvents$).pipe(\n    filter(\n      (event: TransportEvent): event is StateEvent | DisconnectEvent =>\n        event.type === 'state' || event.type === 'disconnect'\n    )\n  )\n\n  const stateEventToSession = (stateEvent: StateEvent): Session => {\n    return {\n      lastActiveAt: stateEvent.timestamp,\n      locations: stateEvent.locations,\n      sessionId: stateEvent.sessionId,\n      userId: stateEvent.userId,\n    }\n  }\n\n  const states$: Observable<{[sessionId: string]: Session}> = merge(syncEvent$, useMock$).pipe(\n    scan(\n      (keyed, event: StateEvent | DisconnectEvent): {[sessionId: string]: Session} =>\n        event.type === 'disconnect'\n          ? omit(keyed, event.sessionId)\n          : {...keyed, [event.sessionId]: stateEventToSession(event)},\n      {}\n    )\n  )\n\n  const allSessions$: Observable<UserSessionPair[]> = connectionChange$.pipe(\n    switchMap((status) => (status === 'connected' ? merge(states$, reportLocation$) : NEVER)),\n    map((keyedSessions) => Object.values(keyedSessions)),\n    switchMap((sessions) => {\n      const userIds = uniq(sessions.map((sess) => sess.userId))\n      return from(userStore.getUsers(userIds)).pipe(\n        map((users) =>\n          sessions\n            .map((session) => ({\n              // eslint-disable-next-line max-nested-callbacks\n              user: users.find((res) => res.id === session.userId),\n              session: session,\n            }))\n            // If we failed to find a user profile for a session, remove it\n            .filter(userSessionPairHasUser)\n        )\n      )\n    }),\n    takeUntil(\n      fromEvent(window, 'beforeunload').pipe(switchMap(() => sendMessage({type: 'disconnect'})))\n    ),\n    shareReplay({refCount: true, bufferSize: 1})\n  )\n\n  function userSessionPairHasUser(pair: Partial<UserSessionPair>): pair is UserSessionPair {\n    return Boolean(pair.user && pair.session)\n  }\n\n  // export\n  const globalPresence$: Observable<GlobalPresence[]> = allSessions$.pipe(\n    map((sessions): {user: User; sessions: Session[]}[] => {\n      const grouped = groupBy(\n        sessions.map((s) => s.session),\n        (e) => e.userId\n      )\n\n      return Object.keys(grouped).map((userId): {user: User; sessions: Session[]} => ({\n        user: sessions.find((s) => s.user.id === userId)?.user as User,\n        sessions: grouped[userId],\n      }))\n    }),\n    withLatestFrom(debugIntrospect$),\n    map(([userAndSessions, debugIntrospect]) =>\n      userAndSessions.filter((userAndSession) => {\n        if (debugIntrospect) {\n          return true\n        }\n\n        const isCurrent = userAndSession.sessions.some((sess) => sess.sessionId === SESSION_ID)\n\n        return !isCurrent\n      })\n    ),\n    map((userAndSessions) =>\n      userAndSessions.map((userAndSession) => ({\n        user: userAndSession.user,\n        status: 'online',\n        lastActiveAt: userAndSession.sessions.sort()[0]?.lastActiveAt,\n        locations: flatten(\n          (userAndSession.sessions || []).map((session) => session.locations || [])\n        )\n          .map((location) => ({\n            type: location.type,\n            documentId: location.documentId,\n            path: location.path,\n            lastActiveAt: location.lastActiveAt,\n          }))\n          .reduce((prev, curr) => prev.concat(curr), [] as PresenceLocation[]),\n      }))\n    )\n  )\n\n  // export\n  const documentPresence = (documentId: string): Observable<DocumentPresence[]> => {\n    return allSessions$.pipe(\n      withLatestFrom(debugIntrospect$),\n      switchMap(([userAndSessions, debugIntrospect]) =>\n        from(userAndSessions).pipe(\n          filter(\n            (userAndSession) => debugIntrospect || userAndSession.session.sessionId !== SESSION_ID\n          ),\n          flatMap((userAndSession) =>\n            (userAndSession.session.locations || [])\n              .filter((item) => item.documentId === documentId)\n              .map((location) => ({\n                user: userAndSession.user,\n                lastActiveAt: userAndSession.session.lastActiveAt,\n                path: location.path || [],\n                sessionId: userAndSession.session.sessionId,\n              }))\n          ),\n          toArray()\n        )\n      )\n    )\n  }\n\n  return {setLocation, reportLocations, debugPresenceParam$, globalPresence$, documentPresence}\n}\n","import {useState, useEffect} from 'react'\nimport {usePresenceStore} from '../datastores'\nimport {GlobalPresence} from './types'\n\nexport function useGlobalPresence(): GlobalPresence[] {\n  const [presence, setPresence] = useState<GlobalPresence[]>([])\n  const presenceStore = usePresenceStore()\n\n  useEffect(() => {\n    const subscription = presenceStore.globalPresence$.subscribe(setPresence)\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [presenceStore])\n\n  return presence\n}\n","import {useState, useEffect} from 'react'\nimport {usePresenceStore} from '../datastores'\nimport {DocumentPresence} from './types'\n\nexport function useDocumentPresence(documentId: string): DocumentPresence[] {\n  const presenceStore = usePresenceStore()\n  const [presence, setPresence] = useState<DocumentPresence[]>([])\n\n  useEffect(() => {\n    const subscription = presenceStore.documentPresence(documentId).subscribe(setPresence)\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [documentId, presenceStore])\n\n  return presence\n}\n","import {SanityClient} from '@sanity/client'\nimport {Observable} from 'rxjs'\nimport {ProjectData, ProjectStore} from './types'\n\nexport function createProjectStore(context: {client: SanityClient}): ProjectStore {\n  const {client} = context\n  const projectId = client.config().projectId\n  const versionedClient = client.withConfig({apiVersion: '2021-12-15'})\n\n  function get(): Observable<ProjectData> {\n    return versionedClient.observable.request({\n      url: `/projects/${projectId}`,\n    })\n  }\n\n  function getDatasets() {\n    return versionedClient.observable.request({\n      url: `/projects/${projectId}/datasets`,\n    })\n  }\n\n  return {get, getDatasets}\n}\n","import {Observable, of as observableOf} from 'rxjs'\nimport {Backend} from './types'\n\nconst tryParse = (val: string, defValue: unknown) => {\n  try {\n    return JSON.parse(val)\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(`Failed to parse settings: ${err.message}`)\n    return defValue\n  }\n}\n\nconst get = (key: string, defValue: unknown): Observable<unknown> => {\n  const val = localStorage.getItem(key)\n\n  return observableOf(val === null ? defValue : tryParse(val, defValue))\n}\n\nconst set = (key: string, nextValue: unknown): Observable<unknown> => {\n  // Can't stringify undefined, and nulls are what\n  // `getItem` returns when key does not exist\n  if (typeof nextValue === 'undefined' || nextValue === null) {\n    localStorage.removeItem(key)\n  } else {\n    localStorage.setItem(key, JSON.stringify(nextValue))\n  }\n\n  return observableOf(nextValue)\n}\n\nexport const localStorageBackend: Backend = {get, set}\n","import {Observable, of as observableOf} from 'rxjs'\nimport {Backend} from './types'\n\nconst DB = Object.create(null)\n\nconst get = (key: string, defValue: unknown): Observable<unknown> =>\n  observableOf(key in DB ? DB[key] : defValue)\n\nconst set = (key: string, nextValue: unknown): Observable<unknown> => {\n  if (typeof nextValue === 'undefined' || nextValue === null) {\n    delete DB[key]\n  } else {\n    DB[key] = nextValue\n  }\n\n  return observableOf(nextValue)\n}\n\nexport const memoryBackend: Backend = {get, set}\n","import {localStorageBackend} from './localStorage'\nimport {memoryBackend} from './memory'\nimport {Backend} from './types'\n\nlet isSupported: boolean | null = null\nfunction supportsLocalStorage() {\n  if (isSupported !== null) {\n    return isSupported\n  }\n\n  const testKey = '__test__'\n  try {\n    localStorage.setItem(testKey, testKey)\n    localStorage.removeItem(testKey)\n    isSupported = true\n  } catch (evt) {\n    isSupported = false\n  }\n\n  return isSupported\n}\n\nexport function resolveBackend(): Backend {\n  return supportsLocalStorage() ? localStorageBackend : memoryBackend\n}\n","import {merge, Observable, Subject} from 'rxjs'\nimport {filter, map, switchMap} from 'rxjs/operators'\nimport {resolveBackend} from './backends/resolve'\nimport {Settings, SettingsStore} from './types'\n\nexport function createSettingsStore(): SettingsStore {\n  const storageBackend = resolveBackend()\n\n  const set$ = new Subject<{key: string; value: unknown}>()\n\n  const prefixNamespace = (ns: string, key: string) => `${ns}::${key}`\n\n  const updates$ = set$.pipe(\n    switchMap((event) =>\n      storageBackend.set(event.key, event.value).pipe(\n        map((nextValue) => ({\n          key: event.key,\n          value: nextValue,\n        }))\n      )\n    )\n  )\n\n  const listen = (key: string, defValue: unknown): Observable<unknown> => {\n    return merge(\n      storageBackend.get(key, defValue),\n      updates$.pipe(\n        filter((update) => update.key === key),\n        map((update) => update.value)\n      )\n    )\n  }\n\n  const set = (key: string, value: unknown) => {\n    set$.next({key, value})\n  }\n\n  const forNamespace = (ns: string): Settings => {\n    return {\n      forKey: (key: string) => {\n        const namespacedKey = prefixNamespace(ns, key)\n\n        return {\n          listen: (defaultValue: unknown) => listen(namespacedKey, defaultValue),\n          set: (value: unknown) => set(namespacedKey, value),\n          del: () => set(namespacedKey, undefined),\n        }\n      },\n      listen: (key: string, defaultValue: unknown) => {\n        return listen(prefixNamespace(ns, key), defaultValue)\n      },\n      set: (key: string, value: unknown) => {\n        return set(prefixNamespace(ns, key), value)\n      },\n      del: (key: string) => {\n        return set(prefixNamespace(ns, key), undefined)\n      },\n      forNamespace: (sub: string) => {\n        return forNamespace(prefixNamespace(ns, sub))\n      },\n    }\n  }\n\n  return {forNamespace}\n}\n","/* eslint-disable camelcase */\n\nimport {useMemo} from 'react'\nimport {useClient, useSchema, useTemplates} from '../hooks'\nimport {useSource, useWorkspace} from '../studio'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../studioClient'\nimport {createDocumentPreviewStore, DocumentPreviewStore} from '../preview'\nimport {\n  ConnectionStatusStore,\n  createConnectionStatusStore,\n} from './connection-status/connection-status-store'\nimport {CrossProjectTokenStore, __tmp_wrap_crossProjectToken} from './crossProjectToken'\nimport {createDocumentStore, DocumentStore} from './document'\nimport {createGrantsStore, GrantsStore} from './grants'\nimport {createHistoryStore, HistoryStore} from './history'\nimport {PresenceStore, __tmp_wrap_presenceStore} from './presence'\nimport {createProjectStore, ProjectStore} from './project'\nimport {useResourceCache} from './ResourceCacheProvider'\nimport {createSettingsStore, SettingsStore} from './settings'\nimport {createUserStore, useCurrentUser, UserStore} from './user'\n\nexport function useUserStore(): UserStore {\n  const {getClient, currentUser} = useSource()\n  const resourceCache = useResourceCache()\n  const client = getClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  return useMemo(() => {\n    const userStore =\n      resourceCache.get<UserStore>({\n        namespace: 'userStore',\n        dependencies: [client, currentUser],\n      }) || createUserStore({client, currentUser})\n\n    resourceCache.set({\n      namespace: 'userStore',\n      dependencies: [client, currentUser],\n      value: userStore,\n    })\n\n    return userStore\n  }, [client, currentUser, resourceCache])\n}\n\nexport function useGrantsStore(): GrantsStore {\n  const {getClient} = useSource()\n  const client = getClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const currentUser = useCurrentUser()\n  const resourceCache = useResourceCache()\n\n  return useMemo(() => {\n    const grantsStore =\n      resourceCache.get<GrantsStore>({\n        namespace: 'grantsStore',\n        dependencies: [client, currentUser],\n      }) || createGrantsStore({client, currentUser})\n\n    resourceCache.set({\n      namespace: 'grantsStore',\n      dependencies: [client, currentUser],\n      value: grantsStore,\n    })\n\n    return grantsStore\n  }, [client, currentUser, resourceCache])\n}\n\nexport function useHistoryStore(): HistoryStore {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const resourceCache = useResourceCache()\n\n  return useMemo(() => {\n    const historyStore =\n      resourceCache.get<HistoryStore>({\n        namespace: 'historyStore',\n        dependencies: [client],\n      }) || createHistoryStore({client})\n\n    resourceCache.set({\n      namespace: 'historyStore',\n      dependencies: [client],\n      value: historyStore,\n    })\n\n    return historyStore\n  }, [client, resourceCache])\n}\n\nexport function useDocumentPreviewStore(): DocumentPreviewStore {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const resourceCache = useResourceCache()\n  const crossProjectTokenStore = useCrossProjectTokenStore()\n\n  return useMemo(() => {\n    const documentPreviewStore =\n      resourceCache.get<DocumentPreviewStore>({\n        namespace: 'documentPreviewStore',\n        dependencies: [client, crossProjectTokenStore],\n      }) || createDocumentPreviewStore({client, crossProjectTokenStore})\n\n    resourceCache.set({\n      namespace: 'documentPreviewStore',\n      dependencies: [client, crossProjectTokenStore],\n      value: documentPreviewStore,\n    })\n\n    return documentPreviewStore\n  }, [client, resourceCache, crossProjectTokenStore])\n}\n\nexport function useCrossProjectTokenStore() {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const resourceCache = useResourceCache()\n\n  return useMemo(() => {\n    const crossProjectTokenStore =\n      resourceCache.get<CrossProjectTokenStore>({\n        namespace: 'crossProjectTokenStore',\n        dependencies: [client],\n      }) || __tmp_wrap_crossProjectToken({client})\n\n    resourceCache.set({\n      namespace: 'crossProjectTokenStore',\n      dependencies: [client],\n      value: crossProjectTokenStore,\n    })\n\n    return crossProjectTokenStore\n  }, [client, resourceCache])\n}\n\nexport function useDocumentStore(): DocumentStore {\n  const getClient = useSource().getClient\n  const schema = useSchema()\n  const templates = useTemplates()\n  const resourceCache = useResourceCache()\n  const historyStore = useHistoryStore()\n  const documentPreviewStore = useDocumentPreviewStore()\n\n  return useMemo(() => {\n    const documentStore =\n      resourceCache.get<DocumentStore>({\n        namespace: 'documentStore',\n        dependencies: [getClient, documentPreviewStore, historyStore, schema],\n      }) ||\n      createDocumentStore({\n        getClient,\n        documentPreviewStore,\n        historyStore,\n        initialValueTemplates: templates,\n        schema,\n      })\n\n    resourceCache.set({\n      namespace: 'documentStore',\n      dependencies: [getClient, documentPreviewStore, historyStore, schema],\n      value: documentStore,\n    })\n\n    return documentStore\n  }, [getClient, documentPreviewStore, historyStore, resourceCache, schema, templates])\n}\n\nexport function useConnectionStatusStore(): ConnectionStatusStore {\n  const {bifur} = useSource().__internal\n  const resourceCache = useResourceCache()\n\n  return useMemo(() => {\n    const connectionStatusStore =\n      resourceCache.get<ConnectionStatusStore>({\n        namespace: 'connectionStatusStore',\n        dependencies: [bifur],\n      }) || createConnectionStatusStore({bifur})\n\n    resourceCache.set({\n      namespace: 'connectionStatusStore',\n      dependencies: [bifur],\n      value: connectionStatusStore,\n    })\n\n    return connectionStatusStore\n  }, [bifur, resourceCache])\n}\n\nexport function usePresenceStore(): PresenceStore {\n  const {\n    __internal: {bifur},\n  } = useSource()\n  const resourceCache = useResourceCache()\n  const userStore = useUserStore()\n  const connectionStatusStore = useConnectionStatusStore()\n\n  return useMemo(() => {\n    const presenceStore =\n      resourceCache.get<PresenceStore>({\n        namespace: 'presenceStore',\n        dependencies: [bifur, connectionStatusStore, userStore],\n      }) || __tmp_wrap_presenceStore({bifur, connectionStatusStore, userStore})\n\n    resourceCache.set({\n      namespace: 'presenceStore',\n      dependencies: [bifur, connectionStatusStore, userStore],\n      value: presenceStore,\n    })\n\n    return presenceStore\n  }, [bifur, connectionStatusStore, resourceCache, userStore])\n}\n\nexport function useProjectStore(): ProjectStore {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const resourceCache = useResourceCache()\n\n  return useMemo(() => {\n    const projectStore =\n      resourceCache.get<ProjectStore>({\n        namespace: 'projectStore',\n        dependencies: [client],\n      }) || createProjectStore({client})\n\n    resourceCache.set({\n      namespace: 'projectStore',\n      dependencies: [client],\n      value: projectStore,\n    })\n\n    return projectStore\n  }, [client, resourceCache])\n}\n\nexport function useSettingsStore(): SettingsStore {\n  const resourceCache = useResourceCache()\n  const workspace = useWorkspace()\n\n  return useMemo(() => {\n    const settingsStore =\n      resourceCache.get<SettingsStore>({\n        dependencies: [workspace],\n        namespace: 'settingsStore',\n      }) || createSettingsStore()\n\n    resourceCache.set({\n      dependencies: [workspace],\n      namespace: 'settingsStore',\n      value: settingsStore,\n    })\n\n    return settingsStore\n  }, [resourceCache, workspace])\n}\n","import {Flex, Layer, Spinner} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\nconst FullscreenLayer = styled(Layer)`\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n`\n\nexport function FullscreenSpinner() {\n  return (\n    <FullscreenLayer>\n      <Flex height=\"fill\" align=\"center\" justify=\"center\">\n        <Spinner />\n      </Flex>\n    </FullscreenLayer>\n  )\n}\n","import {SanityDocument} from '@sanity/types'\nimport {withPropsStream} from 'react-props-stream'\nimport {concat, Observable, of} from 'rxjs'\nimport {distinctUntilChanged, map, switchMap} from 'rxjs/operators'\nimport {DocumentStore} from '../datastores'\n\nexport const WithReferringDocuments = withPropsStream(\n  connect,\n  function _WithReferringDocuments({children, ...props}) {\n    return children(props)\n  }\n)\n\nfunction connect(\n  receivedProps$: Observable<{\n    children: (props: {\n      documentStore: DocumentStore\n      id: string\n      isLoading: boolean\n      referringDocuments: SanityDocument[]\n    }) => React.ReactElement\n    documentStore: DocumentStore\n    id: string\n  }>\n) {\n  return receivedProps$.pipe(\n    distinctUntilChanged((prev, next) => prev.id === next.id),\n    switchMap((receivedProps) =>\n      concat(\n        of({...receivedProps, referringDocuments: [], isLoading: true}),\n        receivedProps.documentStore\n          .listenQuery(\n            '*[references($docId)] [0...101]',\n            {docId: receivedProps.id},\n            {tag: 'with-referring-documents'}\n          )\n          .pipe(\n            map((docs: any[]) => ({\n              ...receivedProps,\n              referringDocuments: docs,\n              isLoading: false,\n            }))\n          )\n      )\n    )\n  )\n}\n","import {Box, Flex, Spinner, Text} from '@sanity/ui'\nimport React from 'react'\n\nexport function SpinnerWithText(props: {text: string}) {\n  const {text} = props\n\n  return (\n    <Flex direction=\"row\" justify=\"center\" align=\"center\">\n      <Spinner />\n      <Box marginLeft={2}>\n        <Text>{text}</Text>\n      </Box>\n    </Flex>\n  )\n}\n","import React, {useCallback} from 'react'\nimport {Card, Text, Flex} from '@sanity/ui'\nimport {Asset as AssetType, SanityDocument} from '@sanity/types'\nimport {SanityPreview} from '../../../preview'\nimport {IntentLink} from '../../../router'\nimport {useSchema} from '../../../hooks'\n\nexport const DocumentList = ({\n  asset,\n  assetType,\n  referringDocuments,\n}: {\n  asset: AssetType\n  assetType: 'image' | 'file'\n  referringDocuments: SanityDocument[]\n}) => {\n  const count = referringDocuments.length\n  const hasResults = count > 0\n  const filenamePlaceholder = asset.originalFilename ? (\n    <strong>{asset.originalFilename}</strong>\n  ) : (\n    `this ${assetType}`\n  )\n\n  if (!hasResults) {\n    return (\n      <Text size={[1, 1, 2, 2]} as=\"h2\" weight=\"regular\">\n        No documents are using {filenamePlaceholder}\n      </Text>\n    )\n  }\n\n  return (\n    <>\n      <Card borderBottom marginTop={2} paddingBottom={2} marginBottom={1}>\n        <Text as=\"h2\" size={[1, 1, 2, 2]} weight=\"regular\" textOverflow=\"ellipsis\">\n          {count} {count === 1 ? `document is` : `documents are`} using {filenamePlaceholder}\n        </Text>\n      </Card>\n      {referringDocuments.map((document: SanityDocument) => (\n        <DocumentLink key={document._id} document={document} />\n      ))}\n    </>\n  )\n}\n\nconst DocumentLink = ({document}: {document: SanityDocument}) => {\n  const schema = useSchema()\n\n  const LinkComponent = useCallback(\n    (linkProps: Omit<React.HTMLProps<HTMLAnchorElement>, 'ref'>) => (\n      <IntentLink {...linkProps} params={{id: document._id, type: document._type}} intent=\"edit\" />\n    ),\n\n    [document]\n  )\n\n  return (\n    <Card\n      as={LinkComponent}\n      paddingY={2}\n      paddingX={1}\n      radius={2}\n      key={document._id}\n      data-as=\"a\"\n      tabIndex={0}\n    >\n      <Flex align=\"center\" gap={2}>\n        <SanityPreview\n          layout=\"default\"\n          value={{_type: 'reference', _ref: document._id}}\n          schemaType={schema.get(document._type)!}\n        />\n      </Flex>\n    </Card>\n  )\n}\n","import React, {CSSProperties} from 'react'\nimport {WarningOutlineIcon} from '@sanity/icons'\nimport {Card, Text, Grid, Flex} from '@sanity/ui'\nimport {UsageDialogProps} from './AssetUsageDialog'\n\ntype ConfirmMessageProps = Omit<UsageDialogProps, 'onClose' | 'onDelete'> & {\n  hasResults?: boolean\n}\n\nconst STYLE_ASSET_IMAGE: CSSProperties = {\n  maxWidth: '100%',\n  height: '120px',\n  objectFit: 'contain',\n  objectPosition: 'center',\n}\nconst STYLE_CONFIRM_CARD: CSSProperties = {\n  gridColumn: 'span 1',\n  overflow: 'hidden',\n  display: 'flex',\n  alignSelf: 'center',\n  justifyContent: 'center',\n}\nconst STYLE_IMAGE_WRAPPER: CSSProperties = {height: '100%'}\n\nexport const ConfirmMessage = ({asset, assetType, hasResults = false}: ConfirmMessageProps) => {\n  const isImage = assetType === 'image'\n  const filenamePlaceholder = asset.originalFilename ? (\n    <>\n      The {assetType} <strong>{asset.originalFilename}</strong>\n    </>\n  ) : (\n    `this ${assetType}`\n  )\n\n  if (hasResults) {\n    return (\n      <Card tone=\"caution\" padding={[3, 3, 4]} border radius={2} marginBottom={3}>\n        <Grid columns={3} gap={[2, 3, 4]}>\n          <Flex gap={[3, 4]} align=\"center\" style={{gridColumn: isImage ? 'span 2' : 'span 3'}}>\n            <Text>\n              <WarningOutlineIcon />\n            </Text>\n            <Text size={1}>\n              {filenamePlaceholder} cannot be deleted because it's being used. In order to delete\n              the {assetType} you need the remove all uses of it.\n            </Text>\n          </Flex>\n          {isImage && (\n            <Card __unstable_checkered border radius={1} style={STYLE_CONFIRM_CARD}>\n              <Flex align=\"center\" justify=\"center\" style={STYLE_IMAGE_WRAPPER}>\n                <img\n                  src={`${asset.url}?w=200`}\n                  style={STYLE_ASSET_IMAGE}\n                  alt=\"Preview of image\"\n                  referrerPolicy=\"strict-origin-when-cross-origin\"\n                />\n              </Flex>\n            </Card>\n          )}\n        </Grid>\n      </Card>\n    )\n  }\n\n  return (\n    <Card paddingX={[2, 3, 4]} paddingY={[3, 3, 3, 4]}>\n      <Grid columns={3} gap={3}>\n        <Flex style={{gridColumn: isImage ? 'span 2' : 'span 3'}} align=\"center\">\n          <Text>\n            You are about to delete the {assetType}\n            {asset.originalFilename && (\n              <>\n                {' '}\n                <strong>{asset.originalFilename}</strong>\n              </>\n            )}{' '}\n            and its metadata.\n            <br />\n            <br />\n            Are you sure?\n          </Text>\n        </Flex>\n        {isImage && (\n          <Card __unstable_checkered border radius={1} style={STYLE_CONFIRM_CARD}>\n            <Flex align=\"center\" justify=\"center\" style={STYLE_IMAGE_WRAPPER}>\n              <img\n                src={`${asset.url}?w=200`}\n                style={STYLE_ASSET_IMAGE}\n                alt=\"Preview of image\"\n                referrerPolicy=\"strict-origin-when-cross-origin\"\n              />\n            </Flex>\n          </Card>\n        )}\n      </Grid>\n    </Card>\n  )\n}\n","import React, {useEffect, useState} from 'react'\nimport {TrashIcon} from '@sanity/icons'\nimport {Box, Dialog, Grid, Button, Stack} from '@sanity/ui'\nimport {Asset as AssetType, SanityDocument} from '@sanity/types'\nimport {WithReferringDocuments} from '../../../components/WithReferringDocuments'\nimport {useDocumentStore} from '../../../datastores'\nimport {SpinnerWithText} from '../../components/SpinnerWithText'\nimport {DocumentList} from './DocumentList'\nimport {ConfirmMessage} from './ConfirmMessage'\n\nexport interface UsageDialogProps {\n  assetType?: 'file' | 'image'\n  mode?: 'listUsage' | 'confirmDelete'\n  asset: AssetType\n  isDeleting?: boolean\n  assetIsLoading?: boolean\n  referringDocuments?: SanityDocument[]\n  onClose: () => void\n  onDelete: () => void\n}\n\nconst MODE_CONFIRM_DELETE = 'confirmDelete'\nconst MODE_LIST_USAGE = 'listUsage'\n\nexport function AssetUsageDialog(props: UsageDialogProps) {\n  const documentStore = useDocumentStore()\n\n  return (\n    <WithReferringDocuments documentStore={documentStore} id={props.asset._id}>\n      {({isLoading, referringDocuments}) => (\n        <InnerAssetUsageDialog\n          {...props}\n          assetIsLoading={isLoading}\n          referringDocuments={referringDocuments}\n        />\n      )}\n    </WithReferringDocuments>\n  )\n}\n\nconst InnerAssetUsageDialog = ({\n  asset,\n  assetType = 'image',\n  mode = MODE_LIST_USAGE,\n  isDeleting = false,\n  assetIsLoading = false,\n  referringDocuments = [],\n  onClose,\n  onDelete,\n}: UsageDialogProps) => {\n  const isListMode = mode === MODE_LIST_USAGE\n  const defaultHeaderTitle = isListMode ? `Documents using ${assetType}` : `Delete ${assetType}`\n  const [canDelete, setCanDelete] = useState(false)\n  const [isLoadingParent, setIsLoadingParent] = useState(true)\n  const [publishedDocuments, setPublishedDocuments] = useState<SanityDocument[]>([])\n  const showActionFooter = mode === MODE_CONFIRM_DELETE\n  const hasResults = publishedDocuments.length > 0\n  const showDocumentList = mode === MODE_LIST_USAGE || hasResults\n  const noPaddingOnStack = mode === MODE_CONFIRM_DELETE && !hasResults\n  const footer = showActionFooter ? (\n    <Grid padding={2} gap={2} columns={2}>\n      <Button mode=\"bleed\" text=\"Cancel\" onClick={onClose} />\n      <Button\n        text=\"Delete\"\n        tone=\"critical\"\n        icon={TrashIcon}\n        onClick={onDelete}\n        loading={isDeleting}\n        disabled={!canDelete}\n      />\n    </Grid>\n  ) : undefined\n  useEffect(() => {\n    const drafts = referringDocuments.reduce<string[]>(\n      (acc, doc) => (doc._id.startsWith('drafts.') ? acc.concat(doc._id.slice(7)) : acc),\n      []\n    )\n\n    const documentsWithoutDrafts = referringDocuments.filter((doc) => !drafts.includes(doc._id))\n\n    setPublishedDocuments(documentsWithoutDrafts)\n    setCanDelete(documentsWithoutDrafts.length === 0 && !assetIsLoading)\n    setIsLoadingParent(assetIsLoading)\n  }, [assetIsLoading, referringDocuments])\n\n  return (\n    <Dialog\n      id=\"asset-dialog\"\n      header={defaultHeaderTitle}\n      width={1}\n      onClose={onClose}\n      footer={footer}\n      __unstable_autoFocus={!isLoadingParent}\n    >\n      {isLoadingParent && (\n        <Box padding={4}>\n          <SpinnerWithText text=\"Loading...\" />\n        </Box>\n      )}\n\n      {!isLoadingParent && (\n        <Stack\n          paddingX={noPaddingOnStack ? 0 : [2, 3, 4]}\n          paddingY={noPaddingOnStack ? 0 : [3, 3, 3, 4]}\n          space={1}\n        >\n          {mode === MODE_CONFIRM_DELETE && (\n            <ConfirmMessage asset={asset} assetType={assetType} hasResults={hasResults} />\n          )}\n\n          {showDocumentList && (\n            <DocumentList\n              asset={asset}\n              referringDocuments={publishedDocuments}\n              assetType={assetType}\n            />\n          )}\n        </Stack>\n      )}\n    </Dialog>\n  )\n}\n","import React from 'react'\nimport {LinkIcon, EllipsisVerticalIcon, TrashIcon} from '@sanity/icons'\nimport {Button, Menu, MenuItem, MenuButton} from '@sanity/ui'\nimport {AssetMenuAction} from './types'\n\nexport function AssetMenu({\n  isSelected,\n  border = true,\n  onAction,\n}: {\n  isSelected: boolean\n  border?: boolean\n  onAction: (action: AssetMenuAction) => void\n}) {\n  const triggerButtonMode = isSelected ? 'default' : 'bleed'\n  const triggerButtonTone = isSelected ? 'primary' : 'default'\n\n  return (\n    <MenuButton\n      button={\n        <Button\n          padding={2}\n          mode={border ? 'ghost' : triggerButtonMode}\n          icon={EllipsisVerticalIcon}\n          tone={border ? 'default' : triggerButtonTone}\n        />\n      }\n      id=\"asset-menu\"\n      portal\n      menu={\n        <Menu>\n          <MenuItem\n            text=\"Show uses\"\n            icon={LinkIcon}\n            onClick={() => {\n              onAction({type: 'showUsage'})\n            }}\n          />\n          <MenuItem\n            text=\"Delete\"\n            icon={TrashIcon}\n            tone=\"critical\"\n            onClick={() => {\n              onAction({type: 'delete'})\n            }}\n          />\n        </Menu>\n      }\n      placement=\"right\"\n    />\n  )\n}\n","import type {Subscription} from 'rxjs'\nimport React, {useState, useEffect, useRef, useCallback} from 'react'\nimport styled from 'styled-components'\nimport {Button, Card, useToast} from '@sanity/ui'\nimport {Asset as AssetType} from '@sanity/types'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {useClient} from '../../../hooks'\nimport {FullscreenSpinner} from '../../components/FullscreenSpinner'\nimport {AssetUsageDialog} from './AssetUsageDialog'\nimport {AssetMenu} from './AssetMenu'\nimport {AssetMenuAction} from './types'\n\ninterface AssetProps {\n  asset: AssetType\n  isSelected: boolean\n  onClick?: (...args: any[]) => any\n  onKeyPress?: (...args: any[]) => any\n  onDeleteFinished: (...args: any[]) => any\n}\n\n// Get pixel density of the current device\nconst DPI =\n  typeof window === 'undefined' || !window.devicePixelRatio\n    ? 1\n    : Math.round(window.devicePixelRatio)\n\nconst Image = styled.img`\n  position: absolute;\n  z-index: 1;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: block;\n  object-fit: contain;\n`\n\nconst Container = styled(Card)`\n  position: relative;\n  z-index: 1;\n  padding-bottom: 100%;\n`\n\nconst Root = styled.div`\n  position: relative;\n  display: inherit;\n`\n\nconst MenuContainer = styled.div`\n  box-sizing: border-box;\n  position: absolute;\n  z-index: 2;\n  display: none;\n  top: 3px;\n  right: 3px;\n\n  ${Root}:hover & {\n    display: block;\n  }\n`\n\nexport const AssetThumb = React.memo(function AssetThumb(props: AssetProps) {\n  const versionedClient = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const toast = useToast()\n  const deleteRef$ = useRef<Subscription>()\n  const {asset, onClick, onKeyPress, onDeleteFinished, isSelected} = props\n  const [showUsageDialog, setShowUsageDialog] = useState(false)\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false)\n  const [isDeleting, setIsDeleting] = useState(false)\n\n  useEffect(() => {\n    return () => {\n      if (deleteRef$.current) {\n        deleteRef$.current.unsubscribe()\n      }\n    }\n  }, [])\n\n  const handleConfirmDelete = useCallback(() => {\n    setShowDeleteDialog(true)\n  }, [setShowDeleteDialog])\n\n  const handleDialogClose = useCallback(() => {\n    setShowUsageDialog(false)\n    setShowDeleteDialog(false)\n  }, [setShowUsageDialog, setShowDeleteDialog])\n\n  const handleToggleUsageDialog = useCallback(() => {\n    setShowUsageDialog(true)\n  }, [setShowUsageDialog])\n\n  const handleDeleteError = useCallback(\n    (error) => {\n      toast.push({\n        closable: true,\n        status: 'error',\n        title: 'Image could not be deleted',\n        description: error.message,\n      })\n    },\n    [toast]\n  )\n\n  const handleDeleteSuccess = useCallback(() => {\n    toast.push({\n      status: 'success',\n      title: 'Image was deleted',\n    })\n  }, [toast])\n\n  const handleDeleteAsset = useCallback(() => {\n    setIsDeleting(true)\n\n    deleteRef$.current = versionedClient.observable.delete(asset._id).subscribe({\n      next: () => {\n        setIsDeleting(false)\n        onDeleteFinished(asset._id)\n        setShowDeleteDialog(false)\n        handleDeleteSuccess()\n      },\n      error: (err: Error) => {\n        setIsDeleting(false)\n        handleDeleteError(err)\n        // eslint-disable-next-line no-console\n        console.error('Could not delete asset', err)\n      },\n    })\n  }, [asset._id, handleDeleteError, handleDeleteSuccess, onDeleteFinished])\n\n  const handleMenuAction = useCallback(\n    (action: AssetMenuAction) => {\n      if (action.type === 'delete') {\n        handleConfirmDelete()\n      }\n\n      if (action.type === 'showUsage') {\n        handleToggleUsageDialog()\n      }\n    },\n    [handleConfirmDelete, handleToggleUsageDialog]\n  )\n\n  // const {asset, onClick, onKeyPress, isSelected} = props\n  const {originalFilename, _id, url} = asset\n  const imgH = 200 * Math.max(1, DPI)\n\n  // Mead can't convert gifs, so we might end up with large gifs that will cause the source window to use a lot of CPU\n  // We instead force them to display as jpgs\n  const imageUrl = url.includes('.gif')\n    ? `${url}?h=${imgH}&fit=max&fm=jpg`\n    : `${url}?h=${imgH}&fit=max`\n\n  return (\n    <Root>\n      <Button\n        tone=\"primary\"\n        selected={isSelected}\n        tabIndex={0}\n        data-id={_id}\n        mode=\"ghost\"\n        onKeyPress={onKeyPress}\n        padding={0}\n        style={{padding: 2}}\n      >\n        <Container __unstable_checkered>\n          <Image alt={originalFilename} src={imageUrl} onClick={onClick} data-id={_id} />\n          {isDeleting && <FullscreenSpinner />}\n        </Container>\n      </Button>\n      <MenuContainer>\n        <AssetMenu isSelected={isSelected} onAction={handleMenuAction} />\n      </MenuContainer>\n      {(showUsageDialog || showDeleteDialog) && (\n        <AssetUsageDialog\n          asset={asset}\n          mode={showDeleteDialog ? 'confirmDelete' : 'listUsage'}\n          onClose={handleDialogClose}\n          onDelete={handleDeleteAsset}\n          isDeleting={isDeleting}\n        />\n      )}\n    </Root>\n  )\n})\n","const BYTE_UNITS = ['B', 'kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\nconst BIBYTE_UNITS = ['B', 'kiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB']\nconst BIT_UNITS = ['b', 'kbit', 'Mbit', 'Gbit', 'Tbit', 'Pbit', 'Ebit', 'Zbit', 'Ybit']\nconst BIBIT_UNITS = ['b', 'kibit', 'Mibit', 'Gibit', 'Tibit', 'Pibit', 'Eibit', 'Zibit', 'Yibit']\n\n/**\n * Formats the given number using `Number#toLocaleString`.\n * - If locale is a string, the value is expected to be a locale-key (for example: `de`).\n * - If locale is true, the system default locale is used for translation.\n * - If no value for locale is specified, the number is returned unmodified.\n */\nconst toLocaleString = (\n  number: string | number,\n  locale: string | string[] | undefined | boolean,\n  options: Intl.NumberFormatOptions | undefined\n) => {\n  let result = number\n  if (typeof locale === 'string' || Array.isArray(locale)) {\n    result = number.toLocaleString(locale, options)\n  } else if (locale === true || options !== undefined) {\n    result = number.toLocaleString(undefined, options)\n  }\n\n  return result\n}\n\ninterface PrettyBytesOptions {\n  /**\n   * Include plus sign for positive numbers. If the difference is exactly zero a\n   * space character will be prepended instead for better alignment.\n   */\n  signed?: boolean\n  /**\n   * Format the number as bits instead of bytes. This can be useful when, for\n   * example, referring to bit rate.\n   */\n  bits?: boolean\n  /**\n   * Format the number using the Binary Prefix instead of the SI Prefix. This\n   * can be useful for presenting memory amounts. However, this should not be used for presenting file sizes.\n   */\n  binary?: boolean\n  /**\n   * Important: Only the number and decimal separator are localized. The unit\n   * title is not and will not be localized.\n   */\n  locale?: boolean | string | string[]\n  /**\n   * The minimum number of fraction digits to display.\n   *\n   * If neither minimumFractionDigits or maximumFractionDigits are set, the\n   * default behavior is to round to 3 significant digits.\n   */\n  minimumFractionDigits?: number\n  /**\n   * The maximum number of fraction digits to display.\n   *\n   * If neither minimumFractionDigits or maximumFractionDigits are set, the\n   * default behavior is to round to 3 significant digits.\n   */\n  maximumFractionDigits?: number\n}\n\n/**\n * Taken from here:\n * https://github.com/sindresorhus/pretty-bytes/blob/a0335ab397a1bc88831f317e4d6d46b7e03ea6be/index.js\n */\nexport function prettyBytes(\n  input: number,\n  {\n    bits = false,\n    binary = false,\n    signed = false,\n    minimumFractionDigits,\n    maximumFractionDigits,\n    locale,\n  }: PrettyBytesOptions = {}\n): string {\n  let number: string | number = input\n\n  if (!Number.isFinite(number)) {\n    throw new TypeError(`Expected a finite number, got ${typeof number}: ${number}`)\n  }\n\n  // eslint-disable-next-line no-nested-ternary\n  const UNITS = bits ? (binary ? BIBIT_UNITS : BIT_UNITS) : binary ? BIBYTE_UNITS : BYTE_UNITS\n\n  if (signed && number === 0) {\n    return ` 0 ${UNITS[0]}`\n  }\n\n  const isNegative = number < 0\n  // eslint-disable-next-line no-nested-ternary\n  const prefix = isNegative ? '-' : signed ? '+' : ''\n\n  if (isNegative) {\n    number = -number\n  }\n\n  let localeOptions: Intl.NumberFormatOptions | undefined\n\n  if (minimumFractionDigits !== undefined) {\n    localeOptions = {minimumFractionDigits}\n  }\n\n  if (maximumFractionDigits !== undefined) {\n    localeOptions = {maximumFractionDigits, ...localeOptions}\n  }\n\n  if (number < 1) {\n    const numberString = toLocaleString(number, locale, localeOptions)\n    return `${prefix + numberString} ${UNITS[0]}`\n  }\n\n  const exponent = Math.min(\n    Math.floor(binary ? Math.log(number) / Math.log(1024) : Math.log10(number) / 3),\n    UNITS.length - 1\n  )\n  number /= (binary ? 1024 : 1000) ** exponent\n\n  if (!localeOptions) {\n    number = number.toPrecision(3)\n  }\n\n  const numberString = toLocaleString(Number(number), locale, localeOptions)\n\n  const unit = UNITS[exponent]\n\n  return `${prefix + numberString} ${unit}`\n}\n","interface MimeTypeInfo {\n  title: string\n}\n\nconst MIME_TYPES: Record<string, MimeTypeInfo> = {\n  // Images\n  'image/bmp': {\n    title: 'Bitmap Image',\n  },\n  'image/jpeg': {\n    title: 'JPEG Image',\n  },\n  'image/gif': {\n    title: 'GIF Image',\n  },\n  'image/vnd.microsoft.icon': {\n    title: 'Icon',\n  },\n  'image/png': {\n    title: 'PNG Image',\n  },\n  'image/svg+xml': {\n    title: 'SVG Image',\n  },\n  'image/webp': {\n    title: 'WebP Image',\n  },\n  'image/tiff': {\n    title: 'TIFF Image',\n  },\n  'image/heic': {\n    title: 'HEIC Image',\n  },\n  // Audio\n  'audio/midi': {\n    title: 'MIDI Audio',\n  },\n  'audio/midi-x': {\n    title: 'MIDI Audio',\n  },\n  'audio/mpeg': {\n    title: 'MP3 Audio',\n  },\n  'audio/ogg': {\n    title: 'OGG Audio',\n  },\n  'audio/wav': {\n    title: 'WAV Audio',\n  },\n  'audio/webm': {\n    title: 'WebM Audio',\n  },\n  'audio/aac': {\n    title: 'AAC Audio',\n  },\n  // Video\n  'video/x-msvideo': {\n    title: 'AVI Video',\n  },\n  'video/mp4': {\n    title: 'MP4 Video',\n  },\n  'video/mpeg': {\n    title: 'MPEG Video',\n  },\n  'video/ogg': {\n    title: 'OGG Video',\n  },\n  'video/webm': {\n    title: 'WebM Video',\n  },\n  'video/quicktime': {\n    title: 'QuickTime Video',\n  },\n  // Documents\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': {\n    title: 'Excel Spreadsheet',\n  },\n  'application/vnd.ms-excel': {\n    title: 'Excel Spreadsheet',\n  },\n  'text/plain': {\n    title: 'Text',\n  },\n  'text/javascript': {\n    title: 'JavaScript',\n  },\n  'text/markdown': {\n    title: 'Markdown',\n  },\n  'text/csv': {\n    title: 'CSV',\n  },\n  'text/css': {\n    title: 'CSS',\n  },\n  'application/pdf': {\n    title: 'PDF Document',\n  },\n  'application/xml': {\n    title: 'XML Document',\n  },\n  'text/xml': {\n    title: 'XML Document',\n  },\n  'application/zip': {\n    title: 'ZIP Archive',\n  },\n  'application/vnd.rar': {\n    title: 'RAR Archive',\n  },\n  'application/x-7z-compressed': {\n    title: '7-zip Archive',\n  },\n  'application/octet-stream': {\n    title: 'Binary',\n  },\n}\n\nfunction convertMimeTypeToSomethingNice(mimeType: string): string {\n  const part = mimeType.replace('x-', '').split('/')[1]\n\n  return part.charAt(0).toUpperCase() + part.slice(1)\n}\n\nexport function formatMimeType(mimeType: string): string {\n  if (MIME_TYPES?.[mimeType]) {\n    return MIME_TYPES[mimeType].title\n  }\n\n  return convertMimeTypeToSomethingNice(mimeType)\n}\n","import type {Subscription} from 'rxjs'\nimport React, {useRef, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport {Button, Box, Card, Flex, Stack, Label, Text, Tooltip, Grid, useToast} from '@sanity/ui'\nimport {DocumentIcon, ChevronUpIcon, ChevronDownIcon, LinkIcon, TrashIcon} from '@sanity/icons'\nimport {Asset as AssetType} from '@sanity/types'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {useClient, useTimeAgo} from '../../../hooks'\nimport {FIXME} from '../../types'\nimport {prettyBytes} from './prettyBytes'\nimport {AssetUsageDialog} from './AssetUsageDialog'\nimport {AssetMenu} from './AssetMenu'\nimport {AssetMenuAction} from './types'\nimport {formatMimeType} from './utils/mimeType'\n\ninterface RowProps {\n  isMobile?: boolean\n  asset: AssetType\n  isSelected?: boolean\n  onClick?: (...args: any[]) => any\n  onKeyPress?: (...args: any[]) => any\n  onDeleteFinished?: (...args: any[]) => any\n}\n\nconst CardIconWrapper = styled.span`\n  background-color: transparent;\n  flex-shrink: 0;\n`\n\n// These are here because using vanilla UI components caused a type issue inside of styled-components\nconst CustomFlex = styled(Flex)``\nconst CustomText = styled(Text)``\nconst CustomCard = styled(Card)<RowProps>`\n  &:hover-within ${CustomText} {\n    --card-muted-fg-color: var(--card-muted-fg-color);\n    --card-fg-color: var(--card-fg-color);\n  }\n\n  ${(props) =>\n    props.isSelected &&\n    css`\n      --card-muted-fg-color: var(--card-bg-color);\n      --card-fg-color: var(--card-bg-color);\n    `}\n`\n\nconst RowButton = styled(Button)<RowProps>`\n  box-shadow: none;\n  min-width: 0;\n  cursor: pointer;\n  position: initial;\n\n  &:before,\n  &:after {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 2;\n  }\n\n  &:before {\n    z-index: 0;\n    pointer-events: none;\n    border-radius: 0.1875rem;\n  }\n\n  ${(props) =>\n    props.isSelected &&\n    css`\n      --card-muted-fg-color: var(--card-bg-color);\n      --card-fg-color: var(--card-bg-color);\n\n      &:before {\n        background-color: var(--card-focus-ring-color);\n      }\n\n      ${CardIconWrapper} {\n        --card-muted-fg-color: var(--card-bg-color);\n      }\n\n      ${CustomFlex} {\n        --card-muted-fg-color: var(--card-bg-color);\n        --card-fg-color: var(--card-bg-color);\n      }\n    `}\n\n  ${(props) =>\n    !props.isSelected &&\n    css`\n      &:hover:before {\n        background-color: var(--card-bg-color);\n      }\n\n      &:focus:before {\n        background-color: var(--card-code-bg-color);\n      }\n\n      &:focus-within:before {\n        background-color: var(--card-bg-color);\n      }\n    `}\n`\n\nconst STYLES_ROW_CARD = {position: 'relative' as FIXME}\nconst STYLES_ICON_CARD = {flexShrink: 0}\nconst STYLES_BUTTON_TEXT = {minWidth: 0}\nconst STYLES_ASSETMENU_WRAPPER = {\n  zIndex: 3,\n  marginTop: '-0.5rem',\n  marginBottom: '-0.5rem',\n}\n\nconst DISABLED_DELETE_TITLE = 'Cannot delete current file'\n\nexport const AssetRow = (props: RowProps) => {\n  const versionedClient = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const toast = useToast()\n  const deleteRef$ = useRef<Subscription>()\n  const [showUsageDialog, setShowUsageDialog] = useState(false)\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false)\n  const [isDeleting, setIsDeleting] = useState(false)\n  const [isOpen, setIsOpen] = useState(false)\n  const {asset, onClick, onKeyPress, onDeleteFinished, isSelected, isMobile} = props\n  const {originalFilename, _id, mimeType, size, _createdAt} = asset\n  const formattedTime = useTimeAgo(_createdAt, {agoSuffix: true})\n  const formattedMimeType = formatMimeType(mimeType)\n  const formattedSize = prettyBytes(size)\n  const showTooltip = (originalFilename || '').length > 37\n\n  const handleConfirmDelete = () => {\n    setShowDeleteDialog(true)\n  }\n\n  const handleDeleteError = (error: Error) => {\n    toast.push({\n      closable: true,\n      status: 'error',\n      title: 'File could not be deleted',\n      description: error.message,\n    })\n  }\n\n  const handleDeleteSuccess = () => {\n    toast.push({\n      status: 'success',\n      title: 'File was deleted',\n    })\n  }\n\n  const handleDeleteAsset = () => {\n    setIsDeleting(true)\n\n    deleteRef$.current = versionedClient.observable.delete(asset._id).subscribe({\n      next: () => {\n        setIsDeleting(false)\n        onDeleteFinished?.(asset._id)\n        setShowDeleteDialog(false)\n        handleDeleteSuccess()\n      },\n      error: (err: Error) => {\n        setIsDeleting(false)\n        handleDeleteError(err)\n        // eslint-disable-next-line no-console\n        console.error('Could not delete asset', err)\n      },\n    })\n  }\n\n  const handleDialogClose = () => {\n    setShowUsageDialog(false)\n    setShowDeleteDialog(false)\n  }\n\n  const handleToggleUsageDialog = () => {\n    setShowUsageDialog(true)\n  }\n\n  const handleToggleOpen = () => {\n    setIsOpen(!isOpen)\n  }\n\n  const handleMenuAction = (action: AssetMenuAction) => {\n    if (action.type === 'delete') {\n      handleConfirmDelete()\n    }\n\n    if (action.type === 'showUsage') {\n      handleToggleUsageDialog()\n    }\n  }\n\n  if (isMobile) {\n    return (\n      <Card paddingBottom={2} style={STYLES_ROW_CARD}>\n        <Grid\n          columns={4}\n          gap={1}\n          style={{\n            position: 'relative',\n            gridTemplateColumns: '1fr 30px',\n            opacity: isDeleting ? 0.5 : 1,\n          }}\n        >\n          <RowButton\n            asset={asset}\n            mode=\"bleed\"\n            padding={0}\n            data-id={_id}\n            onClick={onClick}\n            paddingY={1}\n          >\n            <Flex gap={2} flex={2} align=\"center\">\n              <Card as={CardIconWrapper} padding={2} tone=\"transparent\" radius={2}>\n                <Text muted size={2} style={STYLES_ICON_CARD}>\n                  <DocumentIcon />\n                </Text>\n              </Card>\n              <Text size={1} align=\"left\" textOverflow=\"ellipsis\" style={STYLES_BUTTON_TEXT}>\n                {originalFilename}\n              </Text>\n            </Flex>\n          </RowButton>\n          <Flex justify=\"flex-end\" align=\"center\" paddingRight={1} style={STYLES_ASSETMENU_WRAPPER}>\n            <Button\n              mode=\"bleed\"\n              fontSize={1}\n              padding={2}\n              onClick={handleToggleOpen}\n              icon={isOpen ? ChevronUpIcon : ChevronDownIcon}\n            />\n          </Flex>\n        </Grid>\n        {isOpen && (\n          <>\n            <Grid marginTop={3} columns={3} gap={1}>\n              <Stack space={2}>\n                <Label size={1} muted>\n                  Size\n                </Label>\n                <Text size={1} muted>\n                  {formattedSize}\n                </Text>\n              </Stack>\n              <Stack space={2}>\n                <Label size={1} muted>\n                  Type\n                </Label>\n                <Text size={1} muted>\n                  {formattedMimeType}\n                </Text>\n              </Stack>\n              <Stack space={2}>\n                <Label size={1} muted>\n                  Date added\n                </Label>\n                <Text size={1} muted>\n                  {formattedTime}\n                </Text>\n              </Stack>\n            </Grid>\n            <Stack space={2} marginTop={3}>\n              <Button\n                fontSize={1}\n                tone=\"default\"\n                mode=\"ghost\"\n                text=\"Show uses\"\n                onClick={handleToggleUsageDialog}\n                icon={LinkIcon}\n              />\n\n              <Button\n                fontSize={1}\n                tone=\"critical\"\n                mode=\"ghost\"\n                text=\"Delete\"\n                icon={TrashIcon}\n                disabled={isSelected}\n                title={isSelected ? DISABLED_DELETE_TITLE : 'Delete file'}\n                onClick={handleConfirmDelete}\n              />\n            </Stack>\n          </>\n        )}\n\n        {(showUsageDialog || showDeleteDialog) && (\n          <AssetUsageDialog\n            assetType=\"file\"\n            asset={asset}\n            mode={showDeleteDialog ? 'confirmDelete' : 'listUsage'}\n            onClose={handleDialogClose}\n            onDelete={handleDeleteAsset}\n            isDeleting={isDeleting}\n          />\n        )}\n      </Card>\n    )\n  }\n\n  return (\n    <CustomCard\n      asset={asset}\n      paddingBottom={1}\n      style={STYLES_ROW_CARD}\n      radius={0}\n      overflow={'hidden'}\n      isSelected={isSelected}\n      aria-selected=\"true\"\n    >\n      <Grid\n        columns={4}\n        gap={1}\n        data-id={_id}\n        paddingY={1}\n        style={{\n          position: 'relative',\n          gridTemplateColumns: '3fr 1fr 1fr 2fr 30px',\n          opacity: isDeleting ? 0.5 : 1,\n        }}\n      >\n        <RowButton\n          asset={asset}\n          mode=\"bleed\"\n          data-id={_id}\n          onClick={onClick}\n          padding={0}\n          onKeyPress={onKeyPress}\n          title={`Select the file ${originalFilename}`}\n          isSelected={isSelected}\n        >\n          <CustomFlex\n            gap={2}\n            flex={2}\n            paddingRight={1}\n            align=\"center\"\n            onClick={onClick}\n            onKeyPress={onKeyPress}\n            data-id={_id}\n            title={`Select the file ${originalFilename}`}\n          >\n            <Card\n              as={CardIconWrapper}\n              padding={2}\n              tone=\"transparent\"\n              radius={2}\n              style={STYLES_ICON_CARD}\n            >\n              <Text muted size={2}>\n                <DocumentIcon />\n              </Text>\n            </Card>\n            {showTooltip && (\n              <Tooltip\n                content={\n                  <Box padding={2}>\n                    <Text size={1}>{originalFilename}</Text>\n                  </Box>\n                }\n                fallbackPlacements={['right', 'left']}\n                placement=\"top\"\n                portal\n              >\n                <Text size={1} align=\"left\" textOverflow=\"ellipsis\" style={STYLES_BUTTON_TEXT}>\n                  {originalFilename}\n                </Text>\n              </Tooltip>\n            )}\n\n            {!showTooltip && (\n              <Text size={1} align=\"left\" textOverflow=\"ellipsis\" style={STYLES_BUTTON_TEXT}>\n                {originalFilename}\n              </Text>\n            )}\n          </CustomFlex>\n        </RowButton>\n        <CustomFlex align=\"center\">\n          <Text size={1} muted>\n            {formattedSize}\n          </Text>\n        </CustomFlex>\n        <CustomFlex align=\"center\">\n          <Text size={1} muted>\n            {formattedMimeType}\n          </Text>\n        </CustomFlex>\n        <CustomFlex align=\"center\">\n          <Text as=\"time\" size={1} muted dateTime={_createdAt}>\n            {formattedTime}\n          </Text>\n        </CustomFlex>\n        <CustomFlex\n          justify=\"flex-end\"\n          align=\"center\"\n          paddingX={1}\n          paddingY={1}\n          style={STYLES_ASSETMENU_WRAPPER}\n        >\n          <AssetMenu border={false} isSelected={false} onAction={handleMenuAction} />\n        </CustomFlex>\n      </Grid>\n      {(showUsageDialog || showDeleteDialog) && (\n        <AssetUsageDialog\n          assetType=\"file\"\n          asset={asset}\n          mode={showDeleteDialog ? 'confirmDelete' : 'listUsage'}\n          onClose={handleDialogClose}\n          onDelete={handleDeleteAsset}\n          isDeleting={isDeleting}\n        />\n      )}\n    </CustomCard>\n  )\n}\n","import React from 'react'\nimport {Box, Card, Flex, Grid, Label, Spinner, Stack, useMediaIndex} from '@sanity/ui'\nimport {Asset as AssetType} from '@sanity/types'\nimport {AssetRow} from './AssetRow'\n\ninterface Props {\n  onClick?: (...args: any[]) => any\n  onKeyPress?: (...args: any[]) => any\n  onDeleteFinished: (...args: any[]) => any\n  assets: AssetType[]\n  isLoading?: boolean\n  selectedAssets: AssetType[]\n}\n\nconst STYLES_FILENAME = {paddingLeft: '2.2rem'}\nconst STYLES_GRID = {gridTemplateColumns: '3fr 1fr 1fr 2fr 30px'}\n\nexport function TableList(props: Props) {\n  const mediaIndex = useMediaIndex()\n  const isMobile = mediaIndex < 2\n  const {assets, onClick, onKeyPress, onDeleteFinished, selectedAssets, isLoading} = props\n\n  return (\n    <Box padding={4}>\n      <Card borderBottom paddingBottom={2} marginBottom={1}>\n        {isMobile ? (\n          <Grid style={STYLES_GRID}>\n            <Box flex={2} paddingLeft={5}>\n              <Label muted size={1}>\n                Filename\n              </Label>\n            </Box>\n          </Grid>\n        ) : (\n          <Grid gap={1} style={STYLES_GRID}>\n            <Box flex={2} style={STYLES_FILENAME}>\n              <Label muted size={1}>\n                Filename\n              </Label>\n            </Box>\n            <Box flex={1}>\n              <Label muted size={1}>\n                Size\n              </Label>\n            </Box>\n            <Box flex={1}>\n              <Label muted size={1}>\n                Type\n              </Label>\n            </Box>\n            <Box flex={1}>\n              <Label muted size={1}>\n                Date added\n              </Label>\n            </Box>\n          </Grid>\n        )}\n      </Card>\n      <Stack>\n        {isLoading && assets.length === 0 && (\n          <Box paddingTop={4} paddingBottom={2}>\n            <Flex justify=\"center\">\n              <Spinner muted />\n            </Flex>\n          </Box>\n        )}\n        {assets.map((asset) => (\n          <AssetRow\n            key={asset._id}\n            asset={asset}\n            isMobile={isMobile}\n            isSelected={selectedAssets.some((selected) => selected._id === asset._id)}\n            onClick={onClick}\n            onKeyPress={onKeyPress}\n            onDeleteFinished={onDeleteFinished}\n          />\n        ))}\n      </Stack>\n    </Box>\n  )\n}\n","import type {Subscription} from 'rxjs'\nimport React, {useState, useRef, useCallback, useMemo, useEffect} from 'react'\nimport {DownloadIcon} from '@sanity/icons'\nimport {Box, Button, Card, Dialog, Flex, Grid, Spinner, Text} from '@sanity/ui'\nimport {Asset as AssetType, AssetFromSource, AssetSourceComponentProps} from '@sanity/types'\nimport {uniqueId} from 'lodash'\nimport styled from 'styled-components'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {useClient} from '../../../hooks'\nimport {AssetThumb} from './AssetThumb'\nimport {TableList} from './TableList'\n\nconst PER_PAGE = 200\nconst ASSET_TYPE_IMAGE = 'sanity.imageAsset'\nconst ASSET_TYPE_FILE = 'sanity.fileAsset'\n\nconst buildQuery = (start = 0, end = PER_PAGE, assetType = ASSET_TYPE_IMAGE) => `\n  *[_type == \"${assetType}\"] | order(_updatedAt desc) [${start}...${end}] {\n    _id,\n    _updatedAt,\n    _createdAt,\n    url,\n    originalFilename,\n    mimeType,\n    extension,\n    size,\n    metadata {dimensions}\n  }\n`\n\nconst ThumbGrid = styled(Grid)`\n  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n`\n\nconst CardLoadMore = styled(Card)`\n  border-top: 1px solid var(--card-border-color);\n  position: sticky;\n  bottom: 0;\n  z-index: 200;\n`\n\nconst DefaultAssetSource = function DefaultAssetSource(\n  props: AssetSourceComponentProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const versionedClient = useMemo(() => client.withConfig({apiVersion: '1'}), [client])\n  const _elementId = useRef(`default-asset-source-${uniqueId()}`)\n  const currentPageNumber = useRef(0)\n  const fetch$ = useRef<Subscription>()\n  const [assets, setAssets] = useState<AssetType[]>([])\n  const [isLastPage, setIsLastPage] = useState(false)\n  const [hasResetAutoFocus, setHasResetFocus] = useState(false)\n  const [isLoading, setIsLoading] = useState(true)\n  const {\n    selectedAssets,\n    assetType = 'image',\n    dialogHeaderTitle = 'Select image',\n    onClose,\n    onSelect,\n  } = props\n\n  const fetchPage = useCallback(\n    (pageNumber: number) => {\n      const start = pageNumber * PER_PAGE\n      const end = start + PER_PAGE\n      const isImageAssetType = assetType === 'image'\n      const tag = isImageAssetType ? 'asset.image-list' : 'asset.file-list'\n      const assetTypeParam = isImageAssetType ? ASSET_TYPE_IMAGE : ASSET_TYPE_FILE\n\n      setIsLoading(true)\n\n      fetch$.current = versionedClient.observable\n        .fetch(buildQuery(start, end, assetTypeParam), {}, {tag})\n        .subscribe((result) => {\n          setIsLastPage(result.length < PER_PAGE)\n          // eslint-disable-next-line max-nested-callbacks\n          setAssets((prevState) => prevState.concat(result))\n          setIsLoading(false)\n        })\n    },\n    [assetType, setIsLoading, setAssets, setIsLastPage, versionedClient]\n  )\n\n  const handleDeleteFinished = useCallback(\n    (id) => {\n      // eslint-disable-next-line max-nested-callbacks\n      setAssets((prevState) => prevState.filter((asset) => asset._id !== id))\n    },\n    [setAssets]\n  )\n\n  const select = useCallback(\n    (id) => {\n      const selected = assets.find((doc) => doc._id === id)\n\n      if (selected) {\n        const selectedSource: AssetFromSource[] = [{kind: 'assetDocumentId', value: id}]\n\n        onSelect(selectedSource)\n      }\n    },\n    [assets, onSelect]\n  )\n\n  const handleItemClick = useCallback(\n    (event: React.MouseEvent) => {\n      event.preventDefault()\n\n      select(event.currentTarget.getAttribute('data-id'))\n    },\n    [select]\n  )\n\n  const handleItemKeyPress = useCallback(\n    (event: React.KeyboardEvent) => {\n      if (event.key === 'Enter') {\n        event.preventDefault()\n        select(event.currentTarget.getAttribute('data-id'))\n      }\n    },\n    [select]\n  )\n\n  const handleClose = useCallback(() => {\n    if (onClose) {\n      onClose()\n    }\n  }, [onClose])\n\n  const handleFetchNextPage = useCallback(\n    (event) => {\n      event.preventDefault()\n      fetchPage(++currentPageNumber.current)\n    },\n    [fetchPage]\n  )\n\n  useEffect(() => {\n    fetchPage(currentPageNumber.current)\n\n    return () => {\n      if (fetch$.current) {\n        fetch$.current.unsubscribe()\n      }\n    }\n  }, [fetchPage])\n\n  useEffect(() => {\n    // We focus on the first item after we're doing loading, but only on initial load, as\n    // this will reset the scroll position to the top if we do it on the second page\n    if (!isLoading && (!currentPageNumber.current || currentPageNumber.current === 0)) {\n      setHasResetFocus(true)\n    }\n  }, [isLoading])\n\n  const renderedThumbView = useMemo(() => {\n    return (\n      <Box padding={4}>\n        <ThumbGrid gap={2}>\n          {assets.map((asset) => (\n            <AssetThumb\n              key={asset._id}\n              asset={asset}\n              isSelected={selectedAssets.some((selected) => selected._id === asset._id)}\n              onClick={handleItemClick}\n              onKeyPress={handleItemKeyPress}\n              onDeleteFinished={handleDeleteFinished}\n            />\n          ))}\n        </ThumbGrid>\n\n        {isLoading && assets.length === 0 && (\n          <Flex justify=\"center\">\n            <Spinner muted />\n          </Flex>\n        )}\n\n        {!isLoading && assets.length === 0 && (\n          <Text align=\"center\" muted>\n            No images\n          </Text>\n        )}\n      </Box>\n    )\n  }, [assets, handleDeleteFinished, handleItemClick, handleItemKeyPress, isLoading, selectedAssets])\n\n  const renderedTableView = useMemo(() => {\n    return (\n      <TableList\n        isLoading={isLoading}\n        assets={assets}\n        selectedAssets={selectedAssets}\n        onClick={handleItemClick}\n        onKeyPress={handleItemKeyPress}\n        onDeleteFinished={handleDeleteFinished}\n      />\n    )\n  }, [isLoading, assets, selectedAssets, handleItemClick, handleItemKeyPress, handleDeleteFinished])\n\n  return (\n    <Dialog\n      ref={ref}\n      id={_elementId.current}\n      header={dialogHeaderTitle}\n      width={2}\n      onClose={handleClose}\n      __unstable_autoFocus={hasResetAutoFocus}\n    >\n      {assetType === 'image' && renderedThumbView}\n      {assetType === 'file' && renderedTableView}\n      {assets.length > 0 && !isLastPage && (\n        <CardLoadMore tone=\"default\" padding={4}>\n          <Flex direction=\"column\">\n            <Button\n              type=\"button\"\n              icon={DownloadIcon}\n              loading={isLoading}\n              onClick={handleFetchNextPage}\n              text=\"Load more\"\n              tone=\"primary\"\n            />\n          </Flex>\n        </CardLoadMore>\n      )}\n    </Dialog>\n  )\n}\n\nexport const DefaultSource = React.memo(React.forwardRef(DefaultAssetSource))\n","import {ImageIcon, DocumentsIcon} from '@sanity/icons'\nimport {AssetSource} from '@sanity/types'\nimport {FIXME} from '../../types'\nimport {DefaultSource} from './DefaultSource'\n\nexport const ImageSource: AssetSource = {\n  name: 'sanity-default',\n  title: 'Uploaded images',\n  component: DefaultSource as FIXME,\n  icon: ImageIcon as FIXME,\n}\n\nexport const FileSource: AssetSource = {\n  name: 'sanity-default',\n  title: 'Uploaded files',\n  component: DefaultSource as FIXME,\n  icon: DocumentsIcon as FIXME,\n}\n","import {FileSource, ImageSource} from './studio/DefaultAssetSource'\n\nexport const defaultFileAssetSources = [FileSource]\nexport const defaultImageAssetSources = [ImageSource]\n","import type {WorkspaceLike} from './types'\nimport {getWorkspaceIdentifier} from './validateWorkspaces'\n\nexport interface WorkspaceValidationErrorOptions {\n  workspace: WorkspaceLike\n  index: number\n}\n\n/**\n * Thrown on workspace validation errors. Includes an identifier that is either the name of\n * the workspace, or in the case of a missing or invalid name, an index and a potential title\n */\nexport class WorkspaceValidationError extends Error {\n  index?: number\n  identifier?: string\n\n  constructor(message: string, options?: WorkspaceValidationErrorOptions) {\n    super(message)\n    this.index = options?.index\n    this.identifier = options?.workspace && getWorkspaceIdentifier(options.workspace, options.index)\n  }\n}\n","import type {WorkspaceLike} from './types'\nimport {WorkspaceValidationError} from './WorkspaceValidationError'\n\ninterface ValidateWorkspaceOptions {\n  workspaces: WorkspaceLike[]\n}\n\nexport const getWorkspaceIdentifier = getIdentifier\n\n/**\n * Validates workspace configuration, throwing if:\n *\n * - Workspaces do not all have base paths and names (if multiple given)\n * - Base paths or names are invalid\n * - Base paths or names are not unique\n */\nexport function validateWorkspaces({workspaces}: ValidateWorkspaceOptions): void {\n  if (workspaces.length === 0) {\n    throw new WorkspaceValidationError('At least one workspace is required.')\n  }\n\n  validateNames(workspaces)\n  validateBasePaths(workspaces)\n}\n\n/**\n * Validates the workspace names of every workspace\n * Only exported for testing purposes\n *\n * @param workspaces - An array of workspaces\n * @internal\n */\nexport function validateNames(workspaces: WorkspaceLike[]): void {\n  const isSingleWorkspace = workspaces.length === 1\n  const names = new Map<string, {index: number; workspace: WorkspaceLike}>()\n  workspaces.forEach((workspace, index) => {\n    const {name: rawName, title} = workspace\n    const thisIdentifier = getNamelessIdentifier(title, index)\n\n    if (!rawName && !isSingleWorkspace) {\n      throw new WorkspaceValidationError(\n        'All workspaces must have a `name`, unless only a single workspace is defined. ' +\n          `Workspace ${thisIdentifier} did not define a \\`name\\`.`,\n        {workspace, index}\n      )\n    }\n\n    const name = isSingleWorkspace && typeof rawName === 'undefined' ? 'default' : rawName\n\n    if (typeof name !== 'string') {\n      throw new WorkspaceValidationError(\n        `Workspace at index ${index} defined an invalid \\`name\\` - must be a string.`,\n        {workspace, index}\n      )\n    }\n\n    const normalized = name.toLowerCase()\n    const existingWorkspace = names.get(normalized)\n\n    if (existingWorkspace) {\n      const prevIdentifier = getNamelessIdentifier(\n        existingWorkspace.workspace.title,\n        existingWorkspace.index\n      )\n      throw new WorkspaceValidationError(\n        `\\`name\\`s must be unique. Workspace ${prevIdentifier} and ` +\n          `workspace ${thisIdentifier} both have the \\`name\\` \\`${name}\\``,\n        {workspace, index}\n      )\n    }\n\n    names.set(normalized, {index, workspace})\n\n    if (!/^[a-z0-9][a-z0-9_-]*$/i.test(name)) {\n      throw new WorkspaceValidationError(\n        `All workspace \\`name\\`s must consist of only a-z, 0-9, underscore and dashes, ` +\n          `and cannot begin with an underscore or dash. ` +\n          `Workspace ${thisIdentifier} has the invalid name \\`${name}\\``,\n        {workspace, index}\n      )\n    }\n  })\n}\n\n/**\n * Validates the base paths of every workspace\n * Only exported for testing purposes\n *\n * @param workspaces - An array of workspaces\n * @internal\n */\nexport function validateBasePaths(workspaces: WorkspaceLike[]): void {\n  // If we have more than a single workspace, every workspace needs a basepath\n  if (workspaces.length > 1) {\n    workspaces.every(hasBasePath) // Throws on missing basePath\n  }\n\n  workspaces.every(validateBasePath)\n\n  const [firstWorkspace, ...restOfWorkspaces] = workspaces\n  const firstWorkspaceSegmentCount = (firstWorkspace.basePath || '/')\n    // remove starting slash before splitting\n    .substring(1)\n    .split('/').length\n\n  restOfWorkspaces.forEach((workspace, index) => {\n    const workspaceSegmentCount = (workspace.basePath || '/')\n      // remove starting slash before splitting\n      .substring(1)\n      .split('/').length\n\n    if (firstWorkspaceSegmentCount !== workspaceSegmentCount) {\n      throw new WorkspaceValidationError(\n        `All workspace \\`basePath\\`s must have the same amount of segments. Workspace \\`${getIdentifier(\n          firstWorkspace,\n          index\n        )}\\` had ${firstWorkspaceSegmentCount} segment${\n          firstWorkspaceSegmentCount === 1 ? '' : 's'\n        } \\`${firstWorkspace.basePath}\\` but workspace \\`${getIdentifier(\n          workspace,\n          index\n        )}\\` had ${workspaceSegmentCount} segment${workspaceSegmentCount === 1 ? '' : 's'} \\`${\n          workspace.basePath\n        }\\``,\n        {workspace, index}\n      )\n    }\n  })\n\n  const basePaths = new Map<string, string>()\n  workspaces.forEach((workspace, index) => {\n    const basePath = (workspace.basePath || '').toLowerCase()\n\n    const existingWorkspace = basePaths.get(basePath)\n    if (existingWorkspace) {\n      throw new WorkspaceValidationError(\n        `\\`basePath\\`s must be unique. Workspaces \\`${existingWorkspace}\\` and ` +\n          `\\`${getIdentifier(workspace, index)}\\` both have the \\`basePath\\` \\`${basePath}\\``,\n        {workspace, index}\n      )\n    }\n\n    basePaths.set(basePath, getIdentifier(workspace, index))\n  })\n}\n\nfunction hasBasePath(workspace: WorkspaceLike, index: number) {\n  const {name, basePath} = workspace\n  if (basePath && typeof basePath === 'string') {\n    return true\n  }\n\n  if (typeof basePath === 'undefined') {\n    throw new WorkspaceValidationError(\n      `If more than one workspace is defined, every workspace must have a \\`basePath\\` defined. ` +\n        `Workspace \\`${name}\\` is missing a \\`basePath\\``,\n      {workspace, index}\n    )\n  }\n\n  throw new WorkspaceValidationError(\n    `If more than one workspace is defined, every workspace must have a \\`basePath\\` defined. ` +\n      `Workspace \\`${name}\\` has an invalid \\`basePath\\` (must be a non-empty string)`,\n    {workspace, index}\n  )\n}\n\nfunction validateBasePath(workspace: WorkspaceLike, index: number) {\n  const {name, basePath} = workspace\n\n  // Empty base paths are okay (we're validating uniqueness and presence on more\n  // than a single workspace in `validateBasePaths`)\n  if (!basePath || basePath === '/') {\n    return\n  }\n\n  if (!/^\\/[a-z0-9/_-]*[a-z0-9_-]+$/i.test(basePath)) {\n    throw new WorkspaceValidationError(\n      `All workspace \\`basePath\\`s must start with a leading \\`/\\`, ` +\n        `consist of only URL safe characters, ` +\n        `and cannot end with a trailing \\`/\\`. ` +\n        `Workspace \\`${name}\\`'s basePath is \\`${basePath}\\``,\n      {workspace, index}\n    )\n  }\n}\n\n/**\n * Gets a printable identifer for the workspace - either the name, or the index\n * and any potential title set for it\n *\n * @param workspace - The workspace to get the indentifier for\n * @param index - The index at which the workspace appeared in the source array\n * @returns Printable string (eg `intranet`, or `at index 5 (titled \"Intranet\")`)\n * @internal\n */\nfunction getIdentifier({name, title}: WorkspaceLike, index: number): string {\n  if (typeof name === 'string' && name.trim().length > 0) {\n    return name\n  }\n\n  return getNamelessIdentifier(title, index)\n}\n\nfunction getNamelessIdentifier(title: string | undefined, index: number): string {\n  const withTitle =\n    typeof title === 'string' && title.trim().length > 0 ? ` (titled \"${title}\")` : ''\n  return `at index ${index}${withTitle}`\n}\n","import {ActionHook} from './types'\n\nconst actionIds = new WeakMap<ActionHook<any, any>, string>()\n\nlet counter = 0\n\nexport function getHookId<T, K>(actionHook: ActionHook<T, K>): string {\n  const cachedId = actionIds.get(actionHook)\n\n  if (cachedId) return cachedId\n\n  const id = `${actionHook.name || (actionHook as any).displayName || '<anonymous>'}-${counter++}`\n\n  actionIds.set(actionHook, id)\n\n  return id\n}\n","import React, {memo, useEffect, useRef} from 'react'\nimport shallowEquals from 'shallow-equals'\n\nfunction useShallowCompareMemoize<T>(value: T): Array<T | undefined> {\n  const ref = useRef<T | undefined>(undefined)\n\n  if (!shallowEquals(value, ref.current)) {\n    ref.current = value\n  }\n\n  return [ref.current]\n}\n\nfunction useShallowCompareEffect(callback: React.EffectCallback, dependencies: any) {\n  useEffect(callback, useShallowCompareMemoize(dependencies))\n}\n\nexport const HookStateContainer = memo(\n  function HookStateContainer(props: any) {\n    const {hook, args, id, onNext, onReset, onRequestUpdate} = props\n\n    const hookState = hook({\n      ...args,\n      onComplete: () => {\n        onReset(id)\n      },\n    })\n\n    useShallowCompareEffect(() => {\n      onNext(id, hookState)\n      onRequestUpdate()\n      return () => {\n        onNext(id, null)\n        onRequestUpdate()\n      }\n    }, hookState)\n\n    return null\n  },\n  (prev, next) => prev.args === next.args\n)\n","const requestIdleCallbackShim: Window['requestIdleCallback'] = (callback) => {\n  const start = Date.now()\n\n  return setTimeout(() => {\n    callback({\n      didTimeout: false,\n      timeRemaining() {\n        return Math.max(0, Date.now() - start)\n      },\n    })\n  }, 1) as unknown as ReturnType<Window['requestIdleCallback']>\n}\n\nconst cancelIdleCallbackShim: Window['cancelIdleCallback'] = (handle: unknown) => {\n  return clearTimeout(handle as any)\n}\n\nconst _requestIdleCallback =\n  typeof requestIdleCallback === 'undefined' ? requestIdleCallbackShim : requestIdleCallback\nconst _cancelIdleCallback =\n  typeof cancelIdleCallback === 'undefined' ? cancelIdleCallbackShim : cancelIdleCallbackShim\n\nexport {_requestIdleCallback as requestIdleCallback}\nexport {_cancelIdleCallback as cancelIdleCallback}\n","import React, {useCallback, useEffect, useMemo, useRef, useState} from 'react'\nimport {isNonNullable} from '../../util/isNonNullable'\nimport {useThrottledCallback} from '../../util/useThrottledCallback'\nimport {getHookId} from './actionId'\nimport {HookStateContainer} from './HookStateContainer'\nimport {cancelIdleCallback, requestIdleCallback} from './requestIdleCallback'\nimport {ActionHook} from './types'\n\ninterface GetHookCollectionStateProps<T, K> {\n  args: T\n  children: (props: {states: K[]}) => React.ReactNode\n  hooks: ActionHook<T, K>[]\n  onReset?: () => void\n}\n\nexport function GetHookCollectionState<T, K>(props: GetHookCollectionStateProps<T, K>) {\n  const {hooks, args, children, onReset} = props\n\n  const statesRef = useRef<Record<string, {value: K}>>({})\n  const [tickId, setTick] = useState(0)\n\n  const [keys, setKeys] = useState<Record<string, number>>({})\n  const mountedRef = useRef(true)\n\n  useEffect(() => {\n    return () => {\n      mountedRef.current = false\n    }\n  }, [])\n\n  const ricHandle = useRef<number | null>(null)\n\n  const handleRequestUpdate = useCallback(() => {\n    if (ricHandle.current) {\n      cancelIdleCallback(ricHandle.current)\n    }\n\n    ricHandle.current = requestIdleCallback(() => {\n      ricHandle.current = null\n\n      if (mountedRef.current) {\n        setTick((tick) => tick + 1)\n      }\n    })\n  }, [])\n\n  const handleRequestUpdateThrottled = useThrottledCallback(handleRequestUpdate, 60, {\n    trailing: true,\n  })\n\n  const handleNext = useCallback((id, hookState) => {\n    if (hookState === null) {\n      delete statesRef.current[id]\n    } else {\n      const current = statesRef.current[id]\n      statesRef.current[id] = {...current, value: hookState}\n    }\n  }, [])\n\n  const handleReset = useCallback(\n    (id) => {\n      setKeys((currentKeys) => ({...currentKeys, [id]: (currentKeys[id] || 0) + 1}))\n\n      if (onReset) {\n        onReset()\n      }\n    },\n    [onReset]\n  )\n\n  const hookIds = useMemo(() => hooks.map((hook) => getHookId(hook)), [hooks])\n\n  const states = useMemo(\n    () => hookIds.map((id) => statesRef.current[id]?.value).filter(isNonNullable),\n    [hookIds, tickId]\n  )\n\n  return (\n    <>\n      {hooks.map((hook) => {\n        const id = getHookId(hook)\n        const key = keys[id] || 0\n\n        return (\n          <HookStateContainer\n            key={`${id}-${key}`}\n            hook={hook}\n            id={id}\n            args={args}\n            onNext={handleNext}\n            onRequestUpdate={handleRequestUpdateThrottled}\n            onReset={handleReset}\n          />\n        )\n      })}\n\n      {children({states})}\n    </>\n  )\n}\n","import React from 'react'\nimport {DocumentActionDescription, DocumentActionProps} from './types'\nimport {GetHookCollectionState} from './GetHookCollectionState'\n\ninterface Action<Args, Description> {\n  (args: Args): Description | null\n}\n\ninterface RenderActionCollectionProps {\n  actions: Action<DocumentActionProps, DocumentActionDescription>[]\n  actionProps: DocumentActionProps\n  children: (props: {states: DocumentActionDescription[]}) => React.ReactNode\n  onActionComplete?: () => void\n}\n\nexport const RenderActionCollectionState = (props: RenderActionCollectionProps) => {\n  const {actions, children, actionProps, onActionComplete} = props\n\n  return (\n    <GetHookCollectionState onReset={onActionComplete} hooks={actions} args={actionProps}>\n      {children}\n    </GetHookCollectionState>\n  )\n}\n","import {useId} from '@reach/auto-id'\nimport {EllipsisVerticalIcon} from '@sanity/icons'\nimport {Box, Button, Label, Menu, MenuButton, MenuDivider, MenuItem, PopoverProps} from '@sanity/ui'\nimport React, {forwardRef, Fragment, useCallback, useMemo} from 'react'\nimport {IntentLink} from '../../../router'\nimport {PaneMenuItem, PaneMenuItemGroup} from '../../types'\n\ninterface PaneContextMenuButtonProps {\n  items: PaneMenuItem[]\n  itemGroups?: PaneMenuItemGroup[]\n  onAction: (action: PaneMenuItem) => void\n}\n\ninterface MenuItemGroup {\n  id: string\n  title?: React.ReactNode\n  items: PaneMenuItem[]\n}\n\nconst CONTEXT_MENU_POPOVER_PROPS: PopoverProps = {\n  constrainSize: true,\n  placement: 'bottom',\n  portal: true,\n}\n\n/**\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\nexport function PaneContextMenuButton(props: PaneContextMenuButtonProps) {\n  const {items, itemGroups, onAction} = props\n  const id = useId() || ''\n\n  const groups = useMemo(() => {\n    if (!itemGroups || itemGroups.length === 0) {\n      return [{id: '$default', items}]\n    }\n\n    const defaultGroup: MenuItemGroup = {id: '$default', items: []}\n\n    const groupMap = itemGroups.reduce((acc: Record<string, MenuItemGroup>, group) => {\n      acc[group.id] = {id: group.id, title: group.title, items: []}\n      return acc\n    }, {})\n\n    for (const item of items) {\n      const group = groupMap[item.group || '$default'] || defaultGroup\n\n      group.items.push(item)\n    }\n\n    return Object.values(groupMap)\n      .concat([defaultGroup])\n      .filter((g) => g.items.length > 0)\n  }, [items, itemGroups])\n\n  return (\n    <MenuButton\n      button={<Button icon={EllipsisVerticalIcon} mode=\"bleed\" padding={3} title=\"Show menu\" />}\n      id={id}\n      menu={\n        <Menu>\n          {groups.map((group, groupIndex) => (\n            // eslint-disable-next-line react/no-array-index-key\n            <Fragment key={groupIndex}>\n              {groupIndex > 0 && <MenuDivider />}\n              {group.title && (\n                <Box paddingX={3} paddingTop={3} paddingBottom={2}>\n                  <Label muted>{group.title}</Label>\n                </Box>\n              )}\n              {group.items.map((item, itemIndex) => (\n                <PaneContextMenuItem\n                  item={item}\n                  // eslint-disable-next-line react/no-array-index-key\n                  key={`${itemIndex}-${item.title}`}\n                  onAction={onAction}\n                />\n              ))}\n            </Fragment>\n          ))}\n        </Menu>\n      }\n      popover={CONTEXT_MENU_POPOVER_PROPS}\n      portal\n    />\n  )\n}\n\nfunction PaneContextMenuItem(props: {\n  item: PaneMenuItem\n  onAction: (action: PaneMenuItem) => void\n}) {\n  const {item, onAction} = props\n\n  const handleClick = useCallback(() => {\n    onAction(item)\n  }, [item, onAction])\n\n  const hotkeys = useMemo(() => {\n    if (!item.shortcut) return undefined\n\n    return item.shortcut.split('+')\n  }, [item])\n\n  const IntentButtonOrActionButton = forwardRef((linkProps, linkRef: React.ForwardedRef<never>) =>\n    item.intent ? (\n      <IntentLink\n        {...linkProps}\n        intent={item.intent.type}\n        params={item.intent.params}\n        ref={linkRef}\n      />\n    ) : (\n      <button type=\"button\" {...linkProps} />\n    )\n  )\n\n  IntentButtonOrActionButton.displayName = 'Link'\n\n  return (\n    <MenuItem\n      as={IntentButtonOrActionButton}\n      data-as={item.intent ? 'a' : 'button'}\n      hotkeys={hotkeys}\n      icon={item.icon}\n      onClick={handleClick}\n      text={item.title}\n    />\n  )\n}\n","import {useToast} from '@sanity/ui'\nimport React, {forwardRef, useImperativeHandle} from 'react'\n\nexport interface ToastParams {\n  closable?: boolean\n  description?: React.ReactNode\n  duration?: number\n  onClose?: () => void\n  title?: React.ReactNode\n  status?: 'error' | 'warning' | 'success' | 'info'\n}\n\nexport const ImperativeToast = forwardRef((_, ref) => {\n  const {push} = useToast()\n\n  useImperativeHandle(ref, () => ({push}))\n\n  return null\n})\n\nImperativeToast.displayName = 'ImperativeToast'\n","import {ZIndexContextValue} from './types'\n\n/**\n * @internal\n */\nexport const defaults: ZIndexContextValue = {\n  navbar: 200,\n  navbarPopover: 500000,\n  navbarDialog: 500001,\n\n  // pane\n  pane: 100,\n  paneHeader: [110, 15000],\n  paneFooter: [120, 20000],\n  paneResizer: [130, 25000],\n\n  //\n  popover: 200,\n  modal: 200,\n  movingItem: 10000,\n  drawershade: 1000000,\n  drawer: 1000001,\n  fullscreen: 1200000,\n  toast: [100, 11000],\n\n  // NOT IN USE\n  portal: 200,\n  dropdown: 200,\n  navbarFixed: 1010,\n  fullscreenEdit: 1050,\n  popoverBackground: 1060,\n  tooltip: 200,\n  modalBackground: 2000,\n  spinner: 3000,\n}\n","import {createContext} from 'react'\nimport {ZIndexContextValue} from './types'\nimport {defaults} from './defaults'\n\n/**\n * @todo: Rename to `ZOffsetsContext`\n *\n * @internal\n */\nexport const ZIndexContext = createContext<ZIndexContextValue>(defaults)\n","import {useContext} from 'react'\nimport {ZIndexContextValue} from './types'\nimport {ZIndexContext} from './ZIndexContext'\n\n/**\n * @todo: Rename to `useZOffsets`\n *\n * @internal\n */\nexport function useZIndex(): ZIndexContextValue {\n  return useContext(ZIndexContext)\n}\n","import {LayerProvider} from '@sanity/ui'\nimport React from 'react'\nimport {useZIndex} from '../zOffsets/useZIndex'\nimport {ZIndexContextValue} from '../zOffsets/types'\n\nexport type ZIndexContextValueKey = keyof ZIndexContextValue\n\n/**\n * This component should only be used by core Sanity packages.\n * @internal\n */\nexport function LegacyLayerProvider({\n  children,\n  zOffset: zOffsetKey,\n}: {\n  children: React.ReactNode\n  zOffset: ZIndexContextValueKey\n}) {\n  const zIndex = useZIndex()\n  const zOffset = zIndex[zOffsetKey]\n\n  return <LayerProvider zOffset={zOffset}>{children}</LayerProvider>\n}\n","/**\n * @internal\n */\nexport const PANE_DEBUG = false\n\n/**\n * @internal\n */\nexport const PANE_COLLAPSED_WIDTH = 51\n\n/**\n * @internal\n */\nexport const PANE_DEFAULT_MIN_WIDTH = PANE_COLLAPSED_WIDTH * 4\n","import {createContext} from 'react'\nimport {PaneContextValue} from './types'\n\n/**\n * @internal\n */\nexport const PaneContext = createContext<PaneContextValue | null>(null)\n","import {createContext} from 'react'\nimport {PaneLayoutContextValue} from './types'\n\n/**\n * @internal\n */\nexport const PaneLayoutContext = createContext<PaneLayoutContextValue | null>(null)\n","import {useContext} from 'react'\nimport {PaneLayoutContext} from './PaneLayoutContext'\nimport {PaneLayoutContextValue} from './types'\n\n/**\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\nexport function usePaneLayout(): PaneLayoutContextValue {\n  const pane = useContext(PaneLayoutContext)\n\n  if (!pane) {\n    throw new Error('PaneLayout: missing context value')\n  }\n\n  return pane\n}\n","import {Layer} from '@sanity/ui'\nimport React, {useCallback, useState} from 'react'\nimport styled from 'styled-components'\nimport {usePaneLayout} from './usePaneLayout'\n\nconst Root = styled(Layer)`\n  position: relative;\n  width: 1px;\n  min-width: 1px;\n\n  &:before {\n    content: '';\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    width: 1px;\n    background-color: var(--card-border-color);\n  }\n\n  &:not([data-disabled]) {\n    cursor: ew-resize;\n    width: 9px;\n    min-width: 9px;\n    margin: 0 -4px;\n\n    &:before {\n      left: 4px;\n    }\n\n    &:after {\n      content: '';\n      display: block;\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 9px;\n      bottom: 0;\n      background-color: var(--card-border-color);\n      opacity: 0;\n      transition: opacity 150ms;\n    }\n\n    &[data-dragging]:after,\n    &:hover:after {\n      opacity: 0.2;\n    }\n  }\n`\n\n/**\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\nexport function PaneDivider({\n  disabled,\n  element,\n}: {\n  disabled?: boolean\n  element: HTMLElement | null\n}) {\n  const {resize} = usePaneLayout()\n  const [dragging, setDragging] = useState(false)\n\n  const handleMouseDown = useCallback(\n    (event) => {\n      if (!element) return\n\n      setDragging(true)\n\n      event.preventDefault()\n\n      const startX = event.pageX\n\n      resize('start', element, 0)\n\n      const handleMouseMove = (e: MouseEvent) => {\n        e.preventDefault()\n\n        const deltaX = e.pageX - startX\n\n        resize('move', element, deltaX)\n      }\n\n      const handleMouseUp = (e: MouseEvent) => {\n        e.preventDefault()\n\n        setDragging(false)\n\n        window.removeEventListener('mousemove', handleMouseMove)\n        window.removeEventListener('mouseup', handleMouseUp)\n\n        resize('end', element, 0)\n      }\n\n      window.addEventListener('mousemove', handleMouseMove)\n      window.addEventListener('mouseup', handleMouseUp)\n    },\n    [element, resize]\n  )\n\n  return (\n    <Root\n      data-disabled={disabled ? '' : undefined}\n      data-dragging={dragging ? '' : undefined}\n      onMouseDown={handleMouseDown}\n    />\n  )\n}\n","import {BoundaryElementProvider, Card, CardProps, Code, Flex, useForwardedRef} from '@sanity/ui'\nimport React, {forwardRef, useMemo, useState, useCallback, useEffect} from 'react'\nimport styled from 'styled-components'\nimport {LegacyLayerProvider} from '../../../components/transitional'\nimport {PANE_COLLAPSED_WIDTH, PANE_DEBUG, PANE_DEFAULT_MIN_WIDTH} from './constants'\nimport {PaneContext} from './PaneContext'\nimport {PaneDivider} from './PaneDivider'\nimport {usePaneLayout} from './usePaneLayout'\n\ninterface PaneProps {\n  children?: React.ReactNode\n  currentMinWidth?: number\n  currentMaxWidth?: number\n  flex?: number\n  id: string\n  minWidth?: number\n  maxWidth?: number\n  selected?: boolean\n}\n\nconst Root = styled(Card)`\n  outline: none;\n\n  // NOTE: This will render a border to the right side of each pane\n  // without taking up physical space.\n  box-shadow: 1px 0 0 var(--card-border-color);\n`\n\n/**\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\n// eslint-disable-next-line complexity\nexport const Pane = forwardRef(function Pane(\n  props: PaneProps &\n    Omit<CardProps, 'as' | 'overflow'> &\n    Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'height' | 'hidden' | 'id' | 'style'>,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {\n    children,\n    currentMinWidth: currentMinWidthProp,\n    currentMaxWidth: currentMaxWidthProp,\n    flex: flexProp = 1,\n    id,\n    minWidth: minWidthProp,\n    maxWidth: maxWidthProp,\n    selected = false,\n    ...restProps\n  } = props\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n  const {\n    collapse,\n    collapsed: layoutCollapsed,\n    expand,\n    expandedElement,\n    mount,\n    panes,\n  } = usePaneLayout()\n  const pane = panes.find((p) => p.element === rootElement)\n  const paneIndex = pane && panes.indexOf(pane)\n  const nextPane = typeof paneIndex === 'number' ? panes[paneIndex + 1] : undefined\n  const isLast = paneIndex === panes.length - 1\n  const expanded = expandedElement === rootElement\n  const collapsed = layoutCollapsed ? false : pane?.collapsed || false\n  const nextCollapsed = nextPane?.collapsed || false\n  const forwardedRef = useForwardedRef(ref)\n  const flex = pane?.flex ?? flexProp\n  const currentMinWidth = pane?.currentMinWidth ?? currentMinWidthProp\n  const currentMaxWidth = pane?.currentMaxWidth ?? currentMaxWidthProp\n\n  const setRef = useCallback(\n    (refValue: HTMLDivElement | null) => {\n      setRootElement(refValue)\n      forwardedRef.current = refValue\n    },\n    [forwardedRef]\n  )\n\n  useEffect(() => {\n    if (!rootElement) return undefined\n    return mount(rootElement, {\n      currentMinWidth: currentMinWidthProp,\n      currentMaxWidth: currentMaxWidthProp,\n      flex: flexProp,\n      id,\n      minWidth: minWidthProp,\n      maxWidth: maxWidthProp,\n    })\n  }, [\n    currentMinWidthProp,\n    currentMaxWidthProp,\n    flexProp,\n    id,\n    minWidthProp,\n    maxWidthProp,\n    mount,\n    rootElement,\n  ])\n\n  const handleCollapse = useCallback(() => {\n    if (!rootElement) return\n    collapse(rootElement)\n  }, [collapse, rootElement])\n\n  const handleExpand = useCallback(() => {\n    if (!rootElement) return\n    expand(rootElement)\n  }, [expand, rootElement])\n\n  const contextValue = useMemo(\n    () => ({\n      collapse: handleCollapse,\n      collapsed: layoutCollapsed ? false : collapsed,\n      expand: handleExpand,\n      index: paneIndex,\n      isLast,\n      rootElement,\n    }),\n    [collapsed, handleCollapse, handleExpand, isLast, layoutCollapsed, paneIndex, rootElement]\n  )\n\n  const minWidth = useMemo(() => {\n    if (layoutCollapsed) {\n      return undefined\n    }\n\n    if (collapsed) return PANE_COLLAPSED_WIDTH\n\n    if (currentMinWidth === 0) {\n      return minWidthProp || PANE_DEFAULT_MIN_WIDTH\n    }\n\n    if (isLast) {\n      return minWidthProp || PANE_DEFAULT_MIN_WIDTH\n    }\n\n    return currentMinWidth || minWidthProp || PANE_DEFAULT_MIN_WIDTH\n  }, [collapsed, currentMinWidth, isLast, layoutCollapsed, minWidthProp])\n\n  const maxWidth = useMemo(() => {\n    if (collapsed) return PANE_COLLAPSED_WIDTH\n\n    if (layoutCollapsed && isLast) {\n      return undefined\n    }\n\n    if (isLast) {\n      if (maxWidthProp) {\n        return currentMaxWidth ?? maxWidthProp\n      }\n\n      return undefined\n    }\n\n    return currentMaxWidth ?? maxWidthProp\n  }, [collapsed, currentMaxWidth, isLast, layoutCollapsed, maxWidthProp])\n\n  const hidden = layoutCollapsed && !isLast\n\n  const divider = useMemo(\n    () =>\n      !isLast &&\n      !layoutCollapsed && (\n        <LegacyLayerProvider zOffset=\"paneResizer\">\n          <PaneDivider disabled={collapsed || nextCollapsed} element={rootElement} />\n        </LegacyLayerProvider>\n      ),\n    [collapsed, isLast, layoutCollapsed, nextCollapsed, rootElement]\n  )\n\n  const style = useMemo(\n    () => ({\n      flex,\n      minWidth,\n      maxWidth: maxWidth === Infinity ? undefined : maxWidth,\n    }),\n    [flex, minWidth, maxWidth]\n  )\n\n  return (\n    <>\n      <LegacyLayerProvider zOffset=\"pane\">\n        <PaneContext.Provider value={contextValue}>\n          <Root\n            data-testid=\"pane\"\n            tone=\"inherit\"\n            hidden={hidden}\n            id={id}\n            overflow={layoutCollapsed ? undefined : 'hidden'}\n            {...restProps}\n            data-pane-collapsed={collapsed ? '' : undefined}\n            data-pane-index={paneIndex}\n            data-pane-selected={selected ? '' : undefined}\n            ref={setRef}\n            style={style}\n          >\n            {PANE_DEBUG && (\n              <Card padding={4} tone={expanded ? 'primary' : 'caution'}>\n                <Code size={1}>\n                  {[\n                    `#${paneIndex}`,\n                    `collapsed=${collapsed}`,\n                    `currentMinWidth=${currentMinWidth}`,\n                    `currentMaxWidth=${currentMaxWidth}`,\n                    `flex=${flex}`,\n                    `minWidth=${minWidth}`,\n                    `maxWidth=${maxWidth}`,\n                  ].join('\\n')}\n                </Code>\n              </Card>\n            )}\n\n            <BoundaryElementProvider element={rootElement}>\n              {!hidden && (\n                <Flex direction=\"column\" height=\"fill\">\n                  {children}\n                </Flex>\n              )}\n            </BoundaryElementProvider>\n          </Root>\n        </PaneContext.Provider>\n      </LegacyLayerProvider>\n\n      {divider}\n    </>\n  )\n})\n","import {useContext} from 'react'\nimport {PaneContext} from './PaneContext'\nimport {PaneContextValue} from './types'\n\n/**\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\nexport function usePane(): PaneContextValue {\n  const pane = useContext(PaneContext)\n\n  if (!pane) {\n    throw new Error('Pane: missing context value')\n  }\n\n  return pane\n}\n","import {Card} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const Root = styled(Card)`\n  position: relative;\n  outline: none;\n`\n\nRoot.displayName = 'PaneContent__root'\n","import {BoxOverflow} from '@sanity/ui'\nimport React, {forwardRef} from 'react'\nimport {usePane} from './usePane'\nimport {usePaneLayout} from './usePaneLayout'\nimport {Root} from './PaneContent.styles'\n\ninterface PaneContentProps {\n  as?: React.ElementType | keyof JSX.IntrinsicElements\n  overflow?: BoxOverflow\n  padding?: number | number[]\n}\n\n/**\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\nexport const PaneContent = forwardRef(function PaneContent(\n  props: PaneContentProps & Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'height' | 'ref'>,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {as, children, overflow, padding, ...restProps} = props\n  const {collapsed} = usePane()\n  const {collapsed: layoutCollapsed} = usePaneLayout()\n\n  return (\n    <Root\n      data-testid=\"pane-content\"\n      forwardedAs={as}\n      {...restProps}\n      flex={1}\n      hidden={collapsed}\n      overflow={layoutCollapsed ? undefined : overflow}\n      padding={padding}\n      ref={ref}\n      tone=\"inherit\"\n    >\n      {children}\n    </Root>\n  )\n})\n","import {Card, Layer} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const Root = styled(Layer)`\n  position: sticky;\n  bottom: 0;\n\n  &:before {\n    content: '';\n    display: block;\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: -1px;\n    border-bottom: 1px solid var(--card-shadow-outline-color);\n  }\n`\n\nexport const RootCard = styled(Card)`\n  padding-bottom: env(safe-area-inset-bottom);\n`\n","import {Box} from '@sanity/ui'\nimport React, {forwardRef} from 'react'\nimport {LegacyLayerProvider} from '../../../components/transitional'\nimport {usePane} from './usePane'\nimport {Root, RootCard} from './PaneFooter.styles'\n\ninterface PaneFooterProps {\n  children?: React.ReactNode\n  padding?: number | number[]\n}\n\n/**\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\nexport const PaneFooter = forwardRef(function PaneFooter(\n  props: PaneFooterProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {children, padding} = props\n  const {collapsed} = usePane()\n\n  return (\n    <LegacyLayerProvider zOffset=\"paneFooter\">\n      <Root data-testid=\"pane-footer\" hidden={collapsed} ref={ref}>\n        <RootCard tone=\"inherit\">\n          <Box padding={padding}>{children}</Box>\n        </RootCard>\n      </Root>\n    </LegacyLayerProvider>\n  )\n})\n","import {Box, Flex, Layer, rgba, TextSkeleton, Text, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const Root = styled(Layer)`\n  line-height: 0;\n  position: sticky;\n  top: 0;\n\n  &:not([data-collapsed]):after {\n    content: '';\n    display: block;\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: -1px;\n    border-bottom: 1px solid var(--card-shadow-outline-color);\n  }\n`\n\nexport const Layout = styled(Flex)`\n  transform-origin: calc(51px / 2);\n\n  [data-collapsed] > div > & {\n    transform: rotate(90deg);\n  }\n`\n\nexport const TitleBox = styled(Box)``\n\nexport const TitleTextSkeleton = styled(TextSkeleton)`\n  width: 66%;\n  max-width: 175px;\n`\n\nexport const TitleText = styled(Text)`\n  cursor: default;\n  outline: none;\n`\n\nconst TABS_SCROLL_PADDING = 100\n\nexport const TabsBox = styled(Box)(({theme}: {theme: Theme}) => {\n  const {color, space} = theme.sanity\n\n  return css`\n    margin: -${space[2]}px 0 -${space[2]}px -${space[3]}px;\n    overflow: hidden;\n    position: relative;\n\n    & > div {\n      white-space: nowrap;\n      padding: ${space[2]}px 0 calc(${TABS_SCROLL_PADDING}px + ${space[2]}px) ${space[3]}px;\n      margin-bottom: ${0 - TABS_SCROLL_PADDING}px;\n      overflow: auto;\n\n      /* right padding */\n      & > div:after {\n        content: '';\n        display: inline-block;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        width: ${space[3]}px;\n        height: 1px;\n      }\n    }\n\n    /* Gradient that makes it look like tabs disappear into nothing (looks nicer) */\n    &:after {\n      content: '';\n      display: block;\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      background: linear-gradient(to right, ${rgba(color.base.bg, 0)}, var(--card-bg-color));\n      width: ${space[3]}px;\n      pointer-events: none;\n    }\n  `\n})\n","import {useElementRect, Box, Card, Flex, LayerProvider} from '@sanity/ui'\nimport React, {useMemo, useCallback, forwardRef} from 'react'\nimport {LegacyLayerProvider} from '../../../components/transitional'\nimport {usePane} from './usePane'\nimport {Layout, Root, TabsBox, TitleBox, TitleTextSkeleton, TitleText} from './PaneHeader.styles'\n\ninterface PaneHeaderProps {\n  actions?: React.ReactNode\n  backButton?: React.ReactNode\n  loading?: boolean\n  subActions?: React.ReactNode\n  tabs?: React.ReactNode\n  title: React.ReactNode\n}\n\n/**\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\nexport const PaneHeader = forwardRef(function PaneHeader(\n  props: PaneHeaderProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {actions, backButton, loading, subActions, tabs, title} = props\n  const {collapse, collapsed, expand, rootElement: paneElement} = usePane()\n  const paneRect = useElementRect(paneElement || null)\n\n  const layoutStyle = useMemo(\n    () => ({\n      width: collapsed ? paneRect?.height || window.innerHeight : undefined,\n    }),\n    [collapsed, paneRect]\n  )\n\n  const handleTitleClick = useCallback(() => {\n    if (collapsed) return\n    collapse()\n  }, [collapse, collapsed])\n\n  const handleLayoutClick = useCallback(() => {\n    if (!collapsed) return\n    expand()\n  }, [collapsed, expand])\n\n  return (\n    <LayerProvider zOffset={100}>\n      <Root data-collapsed={collapsed ? '' : undefined} data-testid=\"pane-header\" ref={ref}>\n        <LegacyLayerProvider zOffset=\"paneHeader\">\n          <Card data-collapsed={collapsed ? '' : undefined} tone=\"inherit\">\n            <Layout\n              onClick={handleLayoutClick}\n              padding={2}\n              paddingBottom={tabs || subActions ? 1 : 2}\n              sizing=\"border\"\n              style={layoutStyle}\n            >\n              {backButton}\n\n              <TitleBox\n                flex={1}\n                onClick={handleTitleClick}\n                paddingY={3}\n                paddingLeft={backButton ? 1 : 3}\n              >\n                {loading && <TitleTextSkeleton animated radius={1} />}\n                {!loading && (\n                  <TitleText tabIndex={0} textOverflow=\"ellipsis\" weight=\"semibold\">\n                    {title}\n                  </TitleText>\n                )}\n              </TitleBox>\n\n              {actions && (\n                <Box hidden={collapsed} paddingLeft={1}>\n                  <LegacyLayerProvider zOffset=\"paneHeader\">{actions}</LegacyLayerProvider>\n                </Box>\n              )}\n            </Layout>\n\n            {(tabs || subActions) && (\n              <Flex\n                align=\"center\"\n                hidden={collapsed}\n                paddingTop={0}\n                paddingRight={2}\n                paddingBottom={2}\n                paddingLeft={3}\n                overflow=\"auto\"\n              >\n                <TabsBox flex={1} marginRight={subActions ? 3 : 0}>\n                  <div>{tabs}</div>\n                </TabsBox>\n\n                {subActions && <Box>{subActions}</Box>}\n              </Flex>\n            )}\n          </Card>\n        </LegacyLayerProvider>\n      </Root>\n    </LayerProvider>\n  )\n})\n","import {Card} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const Root = styled(Card)`\n  transition: opacity 200ms;\n  position: relative;\n  z-index: 1;\n  padding-left: env(safe-area-inset-left);\n  padding-right: env(safe-area-inset-right);\n  opacity: 0;\n\n  &:not([hidden]) {\n    display: flex;\n  }\n\n  &:not([data-collapsed]) {\n    overflow: auto;\n  }\n\n  &[data-mounted] {\n    opacity: 1;\n  }\n\n  &[data-resizing] {\n    pointer-events: none;\n  }\n`\n","import {PANE_DEFAULT_MIN_WIDTH} from '../constants'\nimport {PaneConfigOpts, PaneResizeCache} from '../types'\n\nexport function _calcPaneResize(\n  cache: PaneResizeCache,\n  left: PaneConfigOpts,\n  right: PaneConfigOpts,\n  deltaX: number\n): {leftFlex: number; leftW: number; rightFlex: number; rightW: number} {\n  const sum = {\n    flex: cache.left.flex + cache.right.flex,\n    width: cache.left.width + cache.right.width,\n  }\n\n  const leftMinWidth = left.minWidth ?? PANE_DEFAULT_MIN_WIDTH\n  const rightMinWidth = right.minWidth ?? PANE_DEFAULT_MIN_WIDTH\n\n  const leftMaxWidth = Math.min(left.maxWidth || Infinity, sum.width - rightMinWidth)\n  const rightMaxWidth = Math.min(right.maxWidth || Infinity, sum.width - leftMinWidth)\n\n  // Get min. delta X\n  let minDeltaX = leftMinWidth - cache.left.width\n  const rightMinDeltaX = cache.right.width - rightMaxWidth\n  if (minDeltaX < rightMinDeltaX) {\n    minDeltaX = rightMinDeltaX\n  }\n\n  // Get max. delta X\n  let maxDeltaX = cache.right.width - rightMinWidth\n  const leftMaxDeltaX = leftMaxWidth - cache.left.width\n  if (maxDeltaX > leftMaxDeltaX) {\n    maxDeltaX = leftMaxDeltaX\n  }\n\n  const _deltaX = Math.min(Math.max(deltaX, minDeltaX), maxDeltaX)\n\n  const leftW = cache.left.width + _deltaX\n  const rightW = cache.right.width - _deltaX\n\n  const leftFlex = (leftW / sum.width) * sum.flex\n  const rightFlex = (rightW / sum.width) * sum.flex\n\n  return {leftFlex, leftW, rightFlex, rightW}\n}\n","/**\n * @internal\n */\nexport function _getDOMPath(rootElement: HTMLElement, el: HTMLElement): number[] {\n  const path: number[] = []\n\n  let e = el\n\n  while (e !== rootElement) {\n    const parentElement = e.parentElement\n\n    if (!parentElement) return path\n\n    const children = Array.from(parentElement.childNodes)\n    const index = children.indexOf(e)\n\n    path.unshift(index)\n\n    if (parentElement === rootElement) {\n      return path\n    }\n\n    e = parentElement\n  }\n\n  return path\n}\n","import {_getDOMPath} from './_getDOMPath'\n\nconst EMPTY_PATH: number[] = []\n\n/**\n * @internal\n */\nexport function _sortElements(rootElement: HTMLElement, elements: HTMLElement[]): void {\n  // Create a map containing the DOM path of each pane element.\n  // The DOM path is relative to the `rootElement`, and is used in the next step for sorting.\n  const map = new WeakMap<HTMLElement, number[]>()\n\n  for (const element of elements) {\n    map.set(element, _getDOMPath(rootElement, element))\n  }\n\n  const _sortByElementPath = (a: HTMLElement, b: HTMLElement) => {\n    const _a = map.get(a) || EMPTY_PATH\n    const _b = map.get(b) || EMPTY_PATH\n\n    const len = Math.max(_a.length, _b.length)\n\n    // Loop until there are different indexes\n    for (let i = 0; i < len; i += 1) {\n      const aIndex = _a[i] || -1\n      const bIndex = _b[i] || -1\n\n      if (aIndex !== bIndex) {\n        return aIndex - bIndex\n      }\n    }\n\n    return 0\n  }\n\n  elements.sort(_sortByElementPath)\n}\n","import {PANE_COLLAPSED_WIDTH, PANE_DEFAULT_MIN_WIDTH} from './constants'\nimport {_calcPaneResize, _sortElements} from './helpers'\nimport {PaneConfigOpts, PaneData, PaneResizeCache, PaneResizeData} from './types'\n\nexport interface PaneLayoutState {\n  expandedElement: HTMLElement | null\n  panes: PaneData[]\n  resizing: boolean\n}\n\nexport type PaneLayoutStateObserver = (state: PaneLayoutState) => void\n\nexport interface PaneLayoutController {\n  collapse: (element: HTMLElement) => void\n  expand: (element: HTMLElement) => void\n  mount: (element: HTMLElement, options: PaneConfigOpts) => () => void\n  resize: (type: 'start' | 'move' | 'end', leftElement: HTMLElement, deltaX: number) => void\n  setRootElement: (nextRootElement: HTMLElement | null) => void\n  setRootWidth: (nextRootWidth: number) => void\n  subscribe: (observer: PaneLayoutStateObserver) => () => void\n}\n\nexport function createPaneLayoutController(): PaneLayoutController {\n  const observers: PaneLayoutStateObserver[] = []\n  const elements: HTMLElement[] = []\n  const optionsMap = new WeakMap<HTMLElement, PaneConfigOpts & {original: PaneConfigOpts}>()\n  const userCollapsedElementSet = new Set<HTMLElement>()\n  const cache: Partial<PaneResizeCache> = {}\n\n  // Mutable internal state\n  let rootElement: HTMLElement | null = null\n  let rootWidth = 0\n  let expandedElement: HTMLElement | null = null\n  let resizeDataMap = new Map<HTMLElement, PaneResizeData>()\n  let resizing = false\n\n  function collapse(element: HTMLElement) {\n    userCollapsedElementSet.add(element)\n\n    if (expandedElement === element) {\n      expandedElement = null\n    }\n\n    _notifyObservers()\n  }\n\n  function expand(element: HTMLElement) {\n    userCollapsedElementSet.delete(element)\n\n    expandedElement = element\n\n    _notifyObservers()\n  }\n\n  function mount(element: HTMLElement, options: PaneConfigOpts) {\n    optionsMap.set(element, {...options, original: options})\n\n    elements.push(element)\n\n    if (rootElement) {\n      _sortElements(rootElement, elements)\n    }\n\n    expand(element)\n\n    return () => {\n      const idx = elements.indexOf(element)\n\n      if (idx > -1) {\n        elements.splice(idx, 1)\n      }\n\n      optionsMap.delete(element)\n\n      _notifyObservers()\n    }\n  }\n\n  // eslint-disable-next-line complexity\n  function resize(type: 'start' | 'move' | 'end', leftElement: HTMLElement, deltaX: number) {\n    const leftIndex = elements.indexOf(leftElement)\n    const leftOptions = optionsMap.get(leftElement)\n\n    if (!leftOptions) return\n\n    const rightElement = elements[leftIndex + 1]\n    const rightOptions = optionsMap.get(rightElement)\n\n    if (!rightOptions) return\n\n    if (type === 'start') {\n      resizing = true\n\n      cache.left = {\n        element: leftElement,\n        flex: leftOptions.flex || 1,\n        width: leftElement.offsetWidth,\n      }\n\n      cache.right = {\n        element: rightElement,\n        flex: rightOptions.flex || 1,\n        width: rightElement.offsetWidth,\n      }\n\n      _notifyObservers()\n    }\n\n    if (type === 'move' && cache.left && cache.right) {\n      resizeDataMap = new Map<HTMLElement, PaneResizeData>()\n\n      const {leftW, rightW, leftFlex, rightFlex} = _calcPaneResize(\n        cache as PaneResizeCache,\n        leftOptions,\n        rightOptions,\n        deltaX\n      )\n\n      // update resize cache\n      resizeDataMap.set(leftElement, {flex: leftFlex, width: leftW})\n      resizeDataMap.set(rightElement, {flex: rightFlex, width: rightW})\n\n      _notifyObservers()\n    }\n\n    if (type === 'end') {\n      resizing = false\n\n      const leftResizeData = resizeDataMap.get(leftElement)\n      const rightResizeData = resizeDataMap.get(rightElement)\n\n      // Update left options\n      optionsMap.set(leftElement, {\n        ...leftOptions,\n        currentMinWidth: 0,\n        currentMaxWidth: leftOptions.maxWidth ?? Infinity,\n        flex: leftResizeData?.flex ?? leftOptions.flex,\n      })\n\n      // Update right options\n      optionsMap.set(rightElement, {\n        ...rightOptions,\n        currentMinWidth: 0,\n        currentMaxWidth: leftOptions.maxWidth ?? Infinity,\n        flex: rightResizeData?.flex ?? rightOptions.flex,\n      })\n\n      // Reset resize data map\n      resizeDataMap = new Map()\n\n      // Reset cache\n      delete cache.left\n      delete cache.right\n\n      _notifyObservers()\n    }\n  }\n\n  function setRootElement(nextRootElement: HTMLElement | null) {\n    rootElement = nextRootElement\n  }\n\n  function setRootWidth(nextRootWidth: number) {\n    rootWidth = nextRootWidth\n    _notifyObservers()\n  }\n\n  function subscribe(observer: PaneLayoutStateObserver) {\n    observers.push(observer)\n\n    return () => {\n      const idx = observers.push(observer)\n\n      if (idx > -1) {\n        observers.splice(idx, 1)\n      }\n    }\n  }\n\n  return {collapse, expand, mount, resize, setRootElement, setRootWidth, subscribe}\n\n  // eslint-disable-next-line complexity\n  function _notifyObservers() {\n    if (!rootWidth) return\n\n    // Create a reversed array of pane elements, so we can loop over them backwards.\n    // Place the expanded element first (so it has the least chance of being collapsed).\n    const _elements: HTMLElement[] = []\n    for (const element of elements) {\n      if (element !== expandedElement) {\n        _elements.unshift(element)\n      }\n    }\n    if (expandedElement) {\n      _elements.unshift(expandedElement)\n    }\n\n    const dataMap = new WeakMap<HTMLElement, PaneData>()\n    const len = _elements.length\n    const lastElement = _elements[0]\n    const collapsedWidth = (len - 1) * PANE_COLLAPSED_WIDTH\n\n    let remaingWidth = rootWidth - collapsedWidth\n\n    for (const element of _elements) {\n      const options = optionsMap.get(element)\n\n      if (!options) {\n        continue\n      }\n\n      const minWidth = options.currentMinWidth || options.minWidth || PANE_DEFAULT_MIN_WIDTH\n      const isLast = element === lastElement\n\n      // A pane is collapsed if:\n      // - it’s explictly collapsed by the user\n      const userCollapsed = userCollapsedElementSet.has(element)\n      // - it’s minimum width is larger than the remaining width\n      const sizeCollapsed = minWidth > remaingWidth\n      // - if the element is not the last (expanded pane)\n      const collapsed = isLast ? false : userCollapsed || sizeCollapsed\n\n      const resizeData = resizeDataMap.get(element)\n\n      // Collect pane data\n      dataMap.set(element, {\n        element: element,\n        collapsed: collapsed,\n        currentMinWidth: resizeData?.width ?? options.currentMinWidth,\n        currentMaxWidth: resizeData?.width ?? options.currentMaxWidth,\n        flex: resizeData?.flex ?? options.flex ?? 1,\n      })\n\n      // Update remaining width\n      if (collapsed) {\n        remaingWidth -= PANE_COLLAPSED_WIDTH\n      } else {\n        remaingWidth -= minWidth - PANE_COLLAPSED_WIDTH\n      }\n    }\n\n    const panes: PaneData[] = []\n\n    for (const element of elements) {\n      const data = dataMap.get(element)\n\n      if (data) panes.push(data)\n    }\n\n    for (const observer of observers) {\n      observer({\n        expandedElement: expandedElement || elements[elements.length - 1] || null,\n        panes,\n        resizing,\n      })\n    }\n  }\n}\n","import {CardProps, useElementRect} from '@sanity/ui'\nimport React, {useMemo, useState, useEffect} from 'react'\nimport {PaneLayoutContext} from './PaneLayoutContext'\nimport {PaneLayoutContextValue} from './types'\nimport {Root} from './PaneLayout.styles'\nimport {createPaneLayoutController, PaneLayoutState} from './paneLayoutController'\n\n/**\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\nexport interface PaneLayoutProps {\n  minWidth?: number\n  onCollapse?: () => void\n  onExpand?: () => void\n}\n\n/**\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\nexport function PaneLayout(\n  props: PaneLayoutProps &\n    CardProps &\n    Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'height' | 'ref' | 'wrap'>\n) {\n  const {children, minWidth, onCollapse, onExpand, ...restProps} = props\n  const controller = useMemo(() => createPaneLayoutController(), [])\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n  const rootRect = useElementRect(rootElement)\n  const width = rootRect?.width || 0\n  const collapsed = width === undefined || !minWidth ? undefined : width < minWidth\n  const [state, setState] = useState<PaneLayoutState>({\n    expandedElement: null,\n    panes: [],\n    resizing: false,\n  })\n\n  // Set root element\n  useEffect(() => controller.setRootElement(rootElement), [controller, rootElement])\n\n  // Set root size\n  useEffect(() => controller.setRootWidth(width), [controller, width])\n\n  // Subscribe to state changes\n  useEffect(() => controller.subscribe(setState), [controller])\n\n  // Call the `onCollapse` and `onExpand` callbacks as the `collapsed` boolean changes\n  useEffect(() => {\n    if (collapsed === undefined) return\n    if (collapsed && onCollapse) onCollapse()\n    if (!collapsed && onExpand) onExpand()\n  }, [collapsed, onCollapse, onExpand])\n\n  // This is the context value that gives each pane the information they need\n  const paneLayout: PaneLayoutContextValue = useMemo(\n    () => ({\n      collapse: controller.collapse,\n      collapsed,\n      expand: controller.expand,\n      expandedElement: state.expandedElement,\n      mount: controller.mount,\n      panes: state.panes,\n      resize: controller.resize,\n      resizing: state.resizing,\n    }),\n    [collapsed, controller, state.expandedElement, state.panes, state.resizing]\n  )\n\n  return (\n    <PaneLayoutContext.Provider value={paneLayout}>\n      <Root\n        data-ui=\"PaneLayout\"\n        {...restProps}\n        data-collapsed={collapsed ? '' : undefined}\n        // The `data-resizing` attribute is used to improve cursor behavior\n        data-resizing={state.resizing ? '' : undefined}\n        // The `data-mounted` attribute is used to fade in the layout and prevent flash of\n        // non-collapsed panes\n        data-mounted={width ? '' : undefined}\n        ref={setRootElement}\n      >\n        {children}\n      </Root>\n    </PaneLayoutContext.Provider>\n  )\n}\n","import {Button} from '@sanity/ui'\nimport React, {forwardRef, useMemo} from 'react'\nimport {IntentLink} from '../../router'\nimport {PaneMenuItem} from '../types'\n\ntype RouterIntent = NonNullable<PaneMenuItem['intent']>\n\nexport const IntentButton = forwardRef(function IntentButton(\n  props: {intent: RouterIntent} & Omit<React.ComponentProps<typeof Button>, 'as' | 'href' | 'type'>,\n  ref: React.ForwardedRef<HTMLAnchorElement>\n) {\n  const {intent, ...restProps} = props\n\n  const Link = useMemo(\n    () =>\n      // eslint-disable-next-line @typescript-eslint/no-shadow\n      forwardRef(function Link(\n        linkProps: {children: React.ReactNode},\n        linkRef: React.ForwardedRef<HTMLAnchorElement>\n      ) {\n        return (\n          <IntentLink {...linkProps} intent={intent.type} params={intent.params} ref={linkRef} />\n        )\n      }),\n    [intent]\n  )\n\n  return props.disabled ? (\n    <Button {...props} as=\"a\" role=\"link\" aria-disabled=\"true\" />\n  ) : (\n    <Button\n      {...restProps}\n      as={Link}\n      data-as=\"a\"\n      ref={ref as React.ForwardedRef<HTMLButtonElement>}\n    />\n  )\n})\n","import {Tooltip, Text, Box} from '@sanity/ui'\nimport React from 'react'\nimport {InsufficientPermissionsMessage} from '../../../components/InsufficientPermissionsMessage'\nimport {useCurrentUser} from '../../../datastores'\n\ninterface InsufficientPermissionsMessageTooltipProps {\n  reveal: boolean\n  loading: boolean\n  children: React.ReactNode\n}\n\nexport function InsufficientPermissionsMessageTooltip({\n  reveal,\n  loading,\n  children,\n}: InsufficientPermissionsMessageTooltipProps) {\n  const currentUser = useCurrentUser()\n\n  if (!reveal) {\n    return <>{children}</>\n  }\n\n  return (\n    <Tooltip\n      content={\n        loading ? (\n          <Box padding={2}>\n            <Text>Loading…</Text>\n          </Box>\n        ) : (\n          <InsufficientPermissionsMessage currentUser={currentUser} />\n        )\n      }\n      portal\n    >\n      {/* this wrapping div is to allow mouse events */}\n      {/* while the child element is disabled */}\n      <div>{children}</div>\n    </Tooltip>\n  )\n}\n","import {ComposeIcon} from '@sanity/icons'\nimport React, {useMemo, forwardRef} from 'react'\nimport {Box, Button, Label, Menu, MenuButton, MenuItem, PopoverProps} from '@sanity/ui'\nimport {Schema} from '@sanity/types'\nimport {IntentButton} from '../IntentButton'\nimport {useTemplatePermissions, TemplatePermissionsResult} from '../../../datastores'\nimport {IntentLink} from '../../../router'\nimport {Template, InitialValueTemplateItem} from '../../../templates'\nimport {useSchema, useTemplates} from '../../../hooks'\nimport {InsufficientPermissionsMessageTooltip} from './InsufficientPermissionsMessageTooltip'\n\nexport type PaneHeaderIntentProps = React.ComponentProps<typeof IntentButton>['intent']\n\nconst POPOVER_PROPS: PopoverProps = {\n  constrainSize: true,\n  placement: 'bottom',\n  portal: true,\n}\n\nconst getIntent = (\n  schema: Schema,\n  templates: Template[],\n  item: InitialValueTemplateItem\n): PaneHeaderIntentProps | null => {\n  const typeName = templates.find((t) => t.id === item.templateId)?.schemaType\n  if (!typeName) return null\n\n  const baseParams = {\n    template: item.templateId,\n    type: typeName,\n    id: item.initialDocumentId,\n  }\n\n  return {\n    type: 'create',\n    params: item.parameters ? [baseParams, item.parameters] : baseParams,\n  }\n}\n\ninterface PaneHeaderCreateButtonProps {\n  templateItems: InitialValueTemplateItem[]\n}\n\nexport function PaneHeaderCreateButton({templateItems}: PaneHeaderCreateButtonProps) {\n  const schema = useSchema()\n  const templates = useTemplates()\n\n  const [templatePermissions, isTemplatePermissionsLoading] = useTemplatePermissions({\n    templateItems,\n  })\n\n  const nothingGranted = useMemo(() => {\n    return (\n      !isTemplatePermissionsLoading &&\n      templatePermissions?.every((permission) => !permission.granted)\n    )\n  }, [isTemplatePermissionsLoading, templatePermissions])\n\n  const permissionsById = useMemo(() => {\n    if (!templatePermissions) return {}\n    return templatePermissions.reduce<Record<string, TemplatePermissionsResult | undefined>>(\n      (acc, permission) => {\n        acc[permission.id] = permission\n        return acc\n      },\n      {}\n    )\n  }, [templatePermissions])\n\n  if (nothingGranted) {\n    return (\n      <InsufficientPermissionsMessageTooltip reveal loading={isTemplatePermissionsLoading}>\n        <Button\n          aria-label=\"Insufficient permissions\"\n          icon={ComposeIcon}\n          mode=\"bleed\"\n          disabled\n          data-testid=\"action-intent-button\"\n        />\n      </InsufficientPermissionsMessageTooltip>\n    )\n  }\n\n  if (templateItems.length === 1) {\n    const firstItem = templateItems[0]\n    const permissions = permissionsById[firstItem.id]\n    const disabled = !permissions?.granted\n    const intent = getIntent(schema, templates, firstItem)\n    if (!intent) return null\n\n    return (\n      <InsufficientPermissionsMessageTooltip\n        reveal={disabled}\n        loading={isTemplatePermissionsLoading}\n      >\n        <IntentButton\n          aria-label={firstItem.title}\n          icon={firstItem.icon || ComposeIcon}\n          intent={intent}\n          mode=\"bleed\"\n          disabled={disabled}\n          data-testid=\"action-intent-button\"\n        />\n      </InsufficientPermissionsMessageTooltip>\n    )\n  }\n\n  return (\n    <MenuButton\n      button={\n        <Button\n          icon={ComposeIcon}\n          mode=\"bleed\"\n          padding={3}\n          data-testid=\"multi-action-intent-button\"\n        />\n      }\n      id=\"create-menu\"\n      menu={\n        <Menu>\n          <Box paddingX={3} paddingTop={3} paddingBottom={2}>\n            <Label muted>Create</Label>\n          </Box>\n\n          {templateItems.map((item, itemIndex) => {\n            const permissions = permissionsById[item.id]\n            const disabled = !permissions?.granted\n            const intent = getIntent(schema, templates, item)\n            const template = templates.find((t) => t.id === item.templateId)\n            if (!template || !intent) return null\n\n            const Link = forwardRef((linkProps, linkRef: React.ForwardedRef<never>) =>\n              disabled ? (\n                <button type=\"button\" disabled {...linkProps} ref={linkRef} />\n              ) : (\n                <IntentLink\n                  {...linkProps}\n                  intent={intent.type}\n                  params={intent.params}\n                  ref={linkRef}\n                />\n              )\n            )\n\n            Link.displayName = 'Link'\n\n            return (\n              <InsufficientPermissionsMessageTooltip\n                key={item.id}\n                reveal={disabled}\n                loading={isTemplatePermissionsLoading}\n              >\n                <MenuItem\n                  as={Link}\n                  data-as={disabled ? 'button' : 'a'}\n                  text={item.title || template.title}\n                  aria-label={disabled ? 'Insufficient permissions' : item.title || template.title}\n                  disabled={disabled}\n                  data-testid={`action-intent-button-${itemIndex}`}\n                />\n              </InsufficientPermissionsMessageTooltip>\n            )\n          })}\n        </Menu>\n      }\n      popover={POPOVER_PROPS}\n    />\n  )\n}\n","import {UnknownIcon} from '@sanity/icons'\nimport {Box, Button, Inline, Text, Tooltip} from '@sanity/ui'\nimport {partition, uniqBy} from 'lodash'\nimport React, {memo, useCallback, useMemo} from 'react'\nimport {useTemplates} from '../../../hooks'\nimport {InitialValueTemplateItem} from '../../../templates'\nimport {DeskToolPaneActionHandler, PaneMenuItem, PaneMenuItemGroup} from '../../types'\nimport {IntentButton} from '../IntentButton'\nimport {PaneContextMenuButton} from '../pane/PaneContextMenuButton'\nimport {PaneHeaderCreateButton} from './PaneHeaderCreateButton'\n\n// to preserve memory references\nconst emptyArray: never[] = []\nconst emptyObject = {}\n\nfunction isNonNullable<T>(value: T): value is NonNullable<T> {\n  return value !== null && value !== undefined\n}\n\n/**\n * hashes an object to a string where the order of the keys don't matter\n */\nconst hashObject = (value: unknown) => {\n  const sortObject = (v: unknown): unknown => {\n    if (typeof v !== 'object' || !v) return v\n    if (Array.isArray(v)) return v.map(sortObject)\n    return Object.entries(v).sort(([keyA], [keyB]) => keyA.localeCompare(keyB, 'en'))\n  }\n\n  const normalize = (v: unknown) => JSON.parse(JSON.stringify(v))\n\n  return JSON.stringify(sortObject(normalize(value)))\n}\n\ninterface PaneHeaderActionsProps {\n  initialValueTemplateItems?: InitialValueTemplateItem[]\n  menuItems?: PaneMenuItem[]\n  menuItemGroups?: PaneMenuItemGroup[]\n  actionHandlers?: Record<string, DeskToolPaneActionHandler>\n}\n\nexport const PaneHeaderActions = memo(\n  ({\n    initialValueTemplateItems: initialValueTemplateItemsFromStructure = emptyArray,\n    menuItems = emptyArray,\n    menuItemGroups = emptyArray,\n    actionHandlers = emptyObject,\n  }: PaneHeaderActionsProps) => {\n    const templates = useTemplates()\n\n    const handleAction = useCallback(\n      (item: PaneMenuItem) => {\n        if (typeof item.action === 'string' && !(item.action in actionHandlers)) {\n          console.warn('No handler for action:', item.action)\n          return false\n        }\n\n        const handler =\n          // eslint-disable-next-line no-nested-ternary\n          typeof item.action === 'function'\n            ? item.action\n            : typeof item.action === 'string'\n            ? actionHandlers[item.action]\n            : null\n\n        if (handler) {\n          handler(item.params as Record<string, string>)\n          return true\n        }\n\n        return false\n      },\n      [actionHandlers]\n    )\n\n    const [actionMenuItems, contextMenuItems] = useMemo(() => {\n      const nonCreateMenuItem = menuItems\n        // remove items with `create` intents because those will get combined\n        // into one action button later\n        .filter((item) => item.intent?.type !== 'create')\n\n      return partition(nonCreateMenuItem, (item) => item.showAsAction)\n    }, [menuItems])\n\n    const initialValueTemplateItemFromMenuItems = useMemo(() => {\n      return menuItems\n        .map((item, menuItemIndex) => {\n          if (item.intent?.type !== 'create') return null\n\n          const {params} = item.intent\n          if (!params) return null\n\n          const intentParams = Array.isArray(params) ? params[0] : params\n          const templateParams = Array.isArray(params) ? params[1] : undefined\n\n          // fallback to the schema type name as the template ID.\n          // by default, the initial template values are populated from every\n          // document type in the schema\n          const templateId = intentParams.template || intentParams.type\n          if (!templateId) return null\n\n          // eslint-disable-next-line max-nested-callbacks\n          const template = templates.find((t) => t.id === templateId)\n          // the template doesn't exist then the action might be disabled\n          if (!template) return null\n\n          const initialDocumentId = intentParams.id\n\n          return {\n            item,\n            template,\n            templateParams,\n            menuItemIndex,\n            initialDocumentId,\n          }\n        })\n        .filter(isNonNullable)\n        .map(({initialDocumentId, item, template, menuItemIndex, templateParams}) => {\n          const initialValueTemplateItem: InitialValueTemplateItem = {\n            id: `menuItem${menuItemIndex}`,\n            initialDocumentId,\n            templateId: template.id,\n            type: 'initialValueTemplateItem',\n            title: item.title || template.title,\n            icon: item.icon as InitialValueTemplateItem['icon'],\n            description: template.description,\n            parameters: templateParams,\n            schemaType: template.schemaType,\n          }\n\n          return initialValueTemplateItem\n        })\n    }, [menuItems, templates])\n\n    const combinedInitialValueTemplates = useMemo(() => {\n      // this de-dupes create actions\n      return uniqBy(\n        [...initialValueTemplateItemFromMenuItems, ...initialValueTemplateItemsFromStructure],\n        (item) => hashObject([item.initialDocumentId, item.templateId, item.parameters])\n      )\n    }, [initialValueTemplateItemFromMenuItems, initialValueTemplateItemsFromStructure])\n\n    return (\n      <Inline space={1}>\n        {[\n          Boolean(combinedInitialValueTemplates.length) && (\n            <PaneHeaderCreateButton\n              key=\"$CreateMenuButton\"\n              templateItems={combinedInitialValueTemplates}\n            />\n          ),\n          //\n          ...actionMenuItems.map((actionItem, actionIndex) => {\n            return (\n              <Tooltip\n                content={\n                  <Box padding={2}>\n                    <Text size={1}>{actionItem.title}</Text>\n                  </Box>\n                }\n                // eslint-disable-next-line react/no-array-index-key\n                key={`${actionIndex}-${actionItem.title}`}\n                placement=\"bottom\"\n              >\n                {actionItem.intent ? (\n                  <IntentButton\n                    intent={actionItem.intent}\n                    aria-label={actionItem.title}\n                    icon={actionItem.icon || UnknownIcon}\n                    mode=\"bleed\"\n                  />\n                ) : (\n                  <Button\n                    aria-label={actionItem.title}\n                    icon={actionItem.icon || UnknownIcon}\n                    mode=\"bleed\"\n                    // eslint-disable-next-line react/jsx-no-bind\n                    onClick={() => handleAction(actionItem)}\n                  />\n                )}\n              </Tooltip>\n            )\n          }),\n          //\n          Boolean(contextMenuItems.length) && (\n            <PaneContextMenuButton\n              items={contextMenuItems}\n              itemGroups={menuItemGroups}\n              key=\"$ContextMenu\"\n              onAction={handleAction}\n            />\n          ),\n        ]}\n      </Inline>\n    )\n  }\n)\n\nPaneHeaderActions.displayName = 'PaneHeaderActions'\n","import {createContext} from 'react'\nimport {DeskToolContextValue} from './types'\n\nexport const DeskToolContext = createContext<DeskToolContextValue | null>(null)\n","import {SerializePath} from './StructureNodes'\n\nexport class SerializeError extends Error {\n  public readonly path: SerializePath\n  public helpId?: HELP_URL\n\n  constructor(\n    message: string,\n    parentPath: SerializePath,\n    pathSegment: string | number | undefined,\n    hint?: string\n  ) {\n    super(message)\n    const segment = typeof pathSegment === 'undefined' ? '<unknown>' : `${pathSegment}`\n    this.path = (parentPath || []).concat(hint ? `${segment} (${hint})` : segment)\n  }\n\n  withHelpUrl(id: HELP_URL): SerializeError {\n    this.helpId = id\n    return this\n  }\n}\n\nexport enum HELP_URL {\n  ID_REQUIRED = 'structure-node-id-required',\n  TITLE_REQUIRED = 'structure-title-required',\n  FILTER_REQUIRED = 'structure-filter-required',\n  INVALID_LIST_ITEM = 'structure-invalid-list-item',\n  COMPONENT_REQUIRED = 'structure-view-component-required',\n  DOCUMENT_ID_REQUIRED = 'structure-document-id-required',\n  DOCUMENT_TYPE_REQUIRED = 'structure-document-type-required',\n  SCHEMA_TYPE_REQUIRED = 'structure-schema-type-required',\n  SCHEMA_TYPE_NOT_FOUND = 'structure-schema-type-not-found',\n  LIST_ITEMS_MUST_BE_ARRAY = 'structure-list-items-must-be-array',\n  QUERY_PROVIDED_FOR_FILTER = 'structure-query-provided-for-filter',\n  ACTION_OR_INTENT_REQUIRED = 'structure-action-or-intent-required',\n  LIST_ITEM_IDS_MUST_BE_UNIQUE = 'structure-list-item-ids-must-be-unique',\n  ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE = 'structure-action-and-intent-mutually-exclusive',\n}\n","import {SchemaType, SortOrderingItem} from '@sanity/types'\n\nconst IMPLICIT_FIELDS = ['_id', '_type', '_createdAt', '_updatedAt', '_rev']\n\n// Takes a path array and a schema type and builds a GROQ join every time it enters a reference field\nfunction joinReferences(schemaType: SchemaType, path: string[]): string {\n  const [head, ...tail] = path\n\n  if (!('fields' in schemaType)) {\n    return ''\n  }\n\n  const schemaField = schemaType.fields.find((field) => field.name === head)\n  if (!schemaField) {\n    if (!IMPLICIT_FIELDS.includes(head)) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        'The current ordering config targeted the nonexistent field \"%s\" on schema type \"%s\". It should be one of %o',\n        head,\n        schemaType.name,\n        schemaType.fields.map((field) => field.name)\n      )\n    }\n    return ''\n  }\n\n  if ('to' in schemaField.type && schemaField.type.name === 'reference') {\n    const refTypes = schemaField.type.to\n    return `${head}->{${refTypes.map((refType) => joinReferences(refType, tail)).join(',')}}`\n  }\n\n  const tailFields = tail.length > 0 && joinReferences(schemaField.type, tail)\n  const tailWrapper = tailFields ? `{${tailFields}}` : ''\n  return tail.length > 0 ? `${head}${tailWrapper}` : head\n}\n\nexport function getExtendedProjection(schemaType: SchemaType, orderBy: SortOrderingItem[]): string {\n  return orderBy.map((ordering) => joinReferences(schemaType, ordering.field.split('.'))).join(', ')\n}\n","import {SortOrdering} from '@sanity/types'\n\nexport const ORDER_BY_UPDATED_AT: SortOrdering = {\n  title: 'Last edited',\n  name: 'lastEditedDesc',\n  by: [{field: '_updatedAt', direction: 'desc'}],\n}\n\nexport const ORDER_BY_CREATED_AT: SortOrdering = {\n  title: 'Created',\n  name: 'lastCreatedDesc',\n  by: [{field: '_createdAt', direction: 'desc'}],\n}\n\nexport const DEFAULT_SELECTED_ORDERING_OPTION = ORDER_BY_UPDATED_AT\n\nexport const DEFAULT_ORDERING_OPTIONS: SortOrdering[] = [\n  ORDER_BY_UPDATED_AT, // _updatedAt\n  ORDER_BY_CREATED_AT, // _createdAt\n]\n","import {SchemaType, SortOrdering, SortOrderingItem} from '@sanity/types'\nimport {SortIcon} from '@sanity/icons'\nimport {getExtendedProjection} from './util/getExtendedProjection'\nimport {Intent} from './Intent'\nimport {DEFAULT_ORDERING_OPTIONS} from './Sort'\nimport {SerializeOptions, Serializable, SerializePath} from './StructureNodes'\nimport {SerializeError, HELP_URL} from './SerializeError'\nimport {StructureContext} from './types'\n\nexport function maybeSerializeMenuItem(\n  item: MenuItem | MenuItemBuilder,\n  index: number,\n  path: SerializePath\n): MenuItem {\n  return item instanceof MenuItemBuilder ? item.serialize({path, index}) : item\n}\n\nexport type MenuItemActionType =\n  | string\n  | ((params: Record<string, string> | undefined, scope?: any) => void)\n\nexport type MenuItemParamsType = Record<string, string | unknown | undefined>\n\nexport interface MenuItem {\n  title: string\n  action?: MenuItemActionType\n  intent?: Intent\n  group?: string\n  // TODO: align these with TemplateResponse['icon']\n  icon?: React.ComponentType | React.ReactNode\n  params?: MenuItemParamsType\n  showAsAction?: boolean\n}\n\nexport type PartialMenuItem = Partial<MenuItem>\n\nexport class MenuItemBuilder implements Serializable<MenuItem> {\n  protected spec: PartialMenuItem\n\n  constructor(protected _context: StructureContext, spec?: MenuItem) {\n    this.spec = spec ? spec : {}\n  }\n\n  action(action: MenuItemActionType): MenuItemBuilder {\n    return this.clone({action})\n  }\n\n  getAction(): PartialMenuItem['action'] {\n    return this.spec.action\n  }\n\n  intent(intent: Intent): MenuItemBuilder {\n    return this.clone({intent})\n  }\n\n  getIntent(): PartialMenuItem['intent'] {\n    return this.spec.intent\n  }\n\n  title(title: string): MenuItemBuilder {\n    return this.clone({title})\n  }\n\n  getTitle(): string | undefined {\n    return this.spec.title\n  }\n\n  group(group: string): MenuItemBuilder {\n    return this.clone({group})\n  }\n\n  getGroup(): PartialMenuItem['group'] {\n    return this.spec.group\n  }\n\n  icon(icon: React.ComponentType | React.ReactNode): MenuItemBuilder {\n    return this.clone({icon})\n  }\n\n  getIcon(): PartialMenuItem['icon'] {\n    return this.spec.icon\n  }\n\n  params(params: MenuItemParamsType): MenuItemBuilder {\n    return this.clone({params})\n  }\n\n  getParams(): PartialMenuItem['params'] {\n    return this.spec.params\n  }\n\n  showAsAction(showAsAction = true): MenuItemBuilder {\n    return this.clone({showAsAction: Boolean(showAsAction)})\n  }\n\n  getShowAsAction(): PartialMenuItem['showAsAction'] {\n    return this.spec.showAsAction\n  }\n\n  serialize(options: SerializeOptions = {path: []}): MenuItem {\n    const {title, action, intent} = this.spec\n    if (!title) {\n      const hint = typeof action === 'string' ? `action: \"${action}\"` : undefined\n      throw new SerializeError(\n        '`title` is required for menu item',\n        options.path,\n        options.index,\n        hint\n      ).withHelpUrl(HELP_URL.TITLE_REQUIRED)\n    }\n\n    if (!action && !intent) {\n      throw new SerializeError(\n        `\\`action\\` or \\`intent\\` required for menu item with title ${this.spec.title}`,\n        options.path,\n        options.index,\n        `\"${title}\"`\n      ).withHelpUrl(HELP_URL.ACTION_OR_INTENT_REQUIRED)\n    }\n\n    if (intent && action) {\n      throw new SerializeError(\n        'cannot set both `action` AND `intent`',\n        options.path,\n        options.index,\n        `\"${title}\"`\n      ).withHelpUrl(HELP_URL.ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE)\n    }\n\n    return {...this.spec, title}\n  }\n\n  clone(withSpec?: PartialMenuItem): MenuItemBuilder {\n    const builder = new MenuItemBuilder(this._context)\n    builder.spec = {...this.spec, ...(withSpec || {})}\n    return builder\n  }\n}\n\nexport interface SortMenuItem extends MenuItem {\n  params: {\n    by: SortOrderingItem[]\n  }\n}\n\nexport function getOrderingMenuItem(\n  context: StructureContext,\n  ordering: SortOrdering,\n  extendedProjection?: string\n): MenuItemBuilder {\n  return new MenuItemBuilder(context)\n    .group('sorting')\n    .title(`Sort by ${ordering.title}`)\n    .icon(SortIcon)\n    .action('setSortOrder')\n    .params({by: ordering.by, extendedProjection})\n}\n\nexport function getOrderingMenuItemsForSchemaType(\n  context: StructureContext,\n  typeName: SchemaType | string\n): MenuItemBuilder[] {\n  const {schema} = context\n  const type = typeof typeName === 'string' ? schema.get(typeName) : typeName\n  if (!type || !('orderings' in type)) {\n    return []\n  }\n\n  return (\n    type.orderings ? type.orderings.concat(DEFAULT_ORDERING_OPTIONS) : DEFAULT_ORDERING_OPTIONS\n  ).map((ordering: SortOrdering) =>\n    getOrderingMenuItem(context, ordering, getExtendedProjection(type, ordering.by))\n  )\n}\n","import {SerializeOptions, Serializable, SerializePath} from './StructureNodes'\nimport {SerializeError, HELP_URL} from './SerializeError'\nimport {StructureContext} from './types'\n\nexport function maybeSerializeMenuItemGroup(\n  item: MenuItemGroup | MenuItemGroupBuilder,\n  index: number,\n  path: SerializePath\n): MenuItemGroup {\n  return item instanceof MenuItemGroupBuilder ? item.serialize({path, index}) : item\n}\n\nexport interface MenuItemGroup {\n  id: string\n  title: string\n}\n\nexport class MenuItemGroupBuilder implements Serializable<MenuItemGroup> {\n  protected _id: string\n  protected _title: string\n\n  constructor(protected _context: StructureContext, spec?: MenuItemGroup) {\n    this._id = spec ? spec.id : ''\n    this._title = spec ? spec.title : ''\n  }\n\n  id(id: string): MenuItemGroupBuilder {\n    return new MenuItemGroupBuilder(this._context, {id, title: this._title})\n  }\n\n  getId(): string {\n    return this._id\n  }\n\n  title(title: string): MenuItemGroupBuilder {\n    return new MenuItemGroupBuilder(this._context, {id: this._id, title})\n  }\n\n  getTitle(): string {\n    return this._title\n  }\n\n  serialize(options: SerializeOptions = {path: []}): MenuItemGroup {\n    const {_id, _title} = this\n    if (!_id) {\n      throw new SerializeError(\n        '`id` is required for a menu item group',\n        options.path,\n        options.index,\n        _title\n      ).withHelpUrl(HELP_URL.ID_REQUIRED)\n    }\n\n    if (!_title) {\n      throw new SerializeError(\n        '`title` is required for a menu item group',\n        options.path,\n        _id\n      ).withHelpUrl(HELP_URL.TITLE_REQUIRED)\n    }\n\n    return {\n      id: _id,\n      title: _title,\n    }\n  }\n}\n","import {SerializeError} from '../SerializeError'\nimport {SerializePath} from '../StructureNodes'\n\nconst disallowedPattern = /([^A-Za-z0-9-_.])/\n\nexport function validateId(\n  id: string,\n  parentPath: SerializePath,\n  pathSegment: string | number | undefined\n): string {\n  if (typeof id !== 'string') {\n    throw new SerializeError(\n      `Structure node id must be of type string, got ${typeof id}`,\n      parentPath,\n      pathSegment\n    )\n  }\n\n  const [disallowedChar] = id.match(disallowedPattern) || []\n  if (disallowedChar) {\n    throw new SerializeError(\n      `Structure node id cannot contain character \"${disallowedChar}\"`,\n      parentPath,\n      pathSegment\n    )\n  }\n\n  if (id.startsWith('__edit__')) {\n    throw new SerializeError(\n      `Structure node id cannot start with __edit__`,\n      parentPath,\n      pathSegment\n    )\n  }\n\n  return id\n}\n","import {kebabCase} from 'lodash'\nimport {Serializable, SerializeOptions, SerializePath} from '../StructureNodes'\nimport {HELP_URL, SerializeError} from '../SerializeError'\nimport {validateId} from '../util/validateId'\nimport {ComponentViewBuilder} from './ComponentView'\nimport {FormViewBuilder} from './FormView'\nimport {View} from '../types'\n\nexport interface BaseView {\n  id: string\n  title: string\n  icon?: React.ComponentType | React.ReactNode\n}\n\nexport abstract class GenericViewBuilder<TView extends Partial<BaseView>, ConcreteImpl>\n  implements Serializable<BaseView>\n{\n  protected spec: TView = {} as TView\n\n  id(id: string): ConcreteImpl {\n    return this.clone({id})\n  }\n\n  getId(): TView['id'] {\n    return this.spec.id\n  }\n\n  title(title: string): ConcreteImpl {\n    return this.clone({title, id: this.spec.id || kebabCase(title)})\n  }\n\n  getTitle(): TView['title'] {\n    return this.spec.title\n  }\n\n  icon(icon: React.ComponentType | React.ReactNode): ConcreteImpl {\n    return this.clone({icon})\n  }\n\n  getIcon(): TView['icon'] {\n    return this.spec.icon\n  }\n\n  serialize(options: SerializeOptions = {path: []}): BaseView {\n    const {id, title, icon} = this.spec\n    if (!id) {\n      throw new SerializeError(\n        '`id` is required for view item',\n        options.path,\n        options.index\n      ).withHelpUrl(HELP_URL.ID_REQUIRED)\n    }\n\n    if (!title) {\n      throw new SerializeError(\n        '`title` is required for view item',\n        options.path,\n        options.index\n      ).withHelpUrl(HELP_URL.TITLE_REQUIRED)\n    }\n\n    return {\n      id: validateId(id, options.path, options.index),\n      title,\n      icon,\n    }\n  }\n\n  abstract clone(withSpec?: Partial<BaseView>): ConcreteImpl\n}\n\nfunction isSerializable(view: BaseView | Serializable<BaseView>): view is Serializable<BaseView> {\n  return typeof (view as Serializable<BaseView>).serialize === 'function'\n}\n\nexport function maybeSerializeView(\n  item: View | Serializable<View>,\n  index: number,\n  path: SerializePath\n): View {\n  return isSerializable(item) ? item.serialize({path, index}) : item\n}\n\nexport type ViewBuilder = ComponentViewBuilder | FormViewBuilder\n","import {SerializeOptions} from '../StructureNodes'\nimport {SerializeError, HELP_URL} from '../SerializeError'\nimport {isRecord} from '../../../util'\nimport type {UserViewComponent} from '../types'\nimport {BaseView, GenericViewBuilder} from './View'\n\nexport interface ComponentView<TOptions = Record<string, any>> extends BaseView {\n  type: 'component'\n  component: UserViewComponent\n  options: TOptions\n}\n\nconst isComponentSpec = (spec: unknown): spec is ComponentView =>\n  isRecord(spec) && spec.type === 'component'\n\nexport class ComponentViewBuilder extends GenericViewBuilder<\n  Partial<ComponentView>,\n  ComponentViewBuilder\n> {\n  protected spec: Partial<ComponentView>\n\n  constructor(componentOrSpec?: UserViewComponent | Partial<ComponentView>) {\n    const spec = isComponentSpec(componentOrSpec) ? {...componentOrSpec} : {options: {}}\n\n    super()\n    this.spec = spec\n\n    const userComponent =\n      typeof componentOrSpec === 'function' ? componentOrSpec : this.spec.component\n\n    if (userComponent) {\n      // Because we're cloning, this'll return a new instance, so grab the spec from it\n      this.spec = this.component(userComponent).spec\n    }\n  }\n\n  component(component: UserViewComponent): ComponentViewBuilder {\n    return this.clone({component})\n  }\n\n  getComponent(): Partial<ComponentView>['component'] {\n    return this.spec.component\n  }\n\n  options(options: {[key: string]: any}): ComponentViewBuilder {\n    return this.clone({options})\n  }\n\n  getOptions(): ComponentView['options'] {\n    return this.spec.options || {}\n  }\n\n  serialize(options: SerializeOptions = {path: []}): ComponentView {\n    const base = super.serialize(options)\n\n    const component = this.spec.component\n    if (typeof component !== 'function') {\n      throw new SerializeError(\n        '`component` is required and must be a function for `component()` view item',\n        options.path,\n        options.index\n      ).withHelpUrl(HELP_URL.COMPONENT_REQUIRED)\n    }\n\n    return {\n      ...base,\n      component,\n      options: this.spec.options || {},\n      type: 'component',\n    }\n  }\n\n  clone(withSpec?: Partial<ComponentView>): ComponentViewBuilder {\n    const builder = new ComponentViewBuilder()\n    builder.spec = {...this.spec, ...(withSpec || {})}\n    return builder\n  }\n}\n","import {SerializeOptions} from '../StructureNodes'\nimport {BaseView, GenericViewBuilder} from './View'\n\nexport interface FormView extends BaseView {\n  type: 'form'\n}\n\nexport class FormViewBuilder extends GenericViewBuilder<Partial<BaseView>, FormViewBuilder> {\n  protected spec: Partial<FormView>\n\n  constructor(spec?: Partial<FormView>) {\n    super()\n    this.spec = {id: 'editor', title: 'Editor', ...(spec ? spec : {})}\n  }\n\n  serialize(options: SerializeOptions = {path: []}): FormView {\n    return {\n      ...super.serialize(options),\n      type: 'form',\n    }\n  }\n\n  clone(withSpec?: Partial<FormView>): FormViewBuilder {\n    const builder = new FormViewBuilder()\n    builder.spec = {...this.spec, ...(withSpec || {})}\n    return builder\n  }\n}\n","import type {UserViewComponent} from '../types'\nimport {ComponentView, ComponentViewBuilder} from './ComponentView'\nimport {FormView, FormViewBuilder} from './FormView'\n\nexport * from './FormView'\nexport * from './ComponentView'\nexport * from './View'\n\nexport const form = (spec?: Partial<FormView>): FormViewBuilder => new FormViewBuilder(spec)\nexport const component = (\n  componentOrSpec?: UserViewComponent | Partial<ComponentView>\n): ComponentViewBuilder => new ComponentViewBuilder(componentOrSpec)\n","import {uniq, camelCase} from 'lodash'\nimport {SchemaType} from '@sanity/types'\nimport {ChildResolver} from './ChildResolver'\nimport {SerializeOptions, Serializable, Child, DocumentNode, EditorNode} from './StructureNodes'\nimport {SerializeError, HELP_URL} from './SerializeError'\nimport {validateId} from './util/validateId'\nimport {ViewBuilder, maybeSerializeView} from './views/View'\nimport {form} from './views'\nimport type {StructureContext, View} from './types'\n\nconst createDocumentChildResolver =\n  ({resolveDocumentNode}: StructureContext): ChildResolver =>\n  (itemId, {params, path}) => {\n    const {type} = params\n\n    const parentPath = path.slice(0, path.length - 1)\n    const currentSegment = path[path.length - 1]\n\n    if (!type) {\n      throw new SerializeError(\n        `Invalid link. Your link must contain a \\`type\\`.`,\n        parentPath,\n        currentSegment\n      )\n    }\n\n    return resolveDocumentNode({documentId: itemId, schemaType: type})\n  }\n\nexport interface DocumentOptions {\n  id: string\n  type: string\n  template?: string\n  templateParameters?: Record<string, unknown>\n}\n\nexport type PartialDocumentNode = {\n  id?: string\n  title?: string\n  child?: Child\n  views?: (View | ViewBuilder)[]\n  options?: Partial<DocumentOptions>\n}\n\nexport class DocumentBuilder implements Serializable<DocumentNode> {\n  protected spec: PartialDocumentNode\n\n  constructor(protected _context: StructureContext, spec?: PartialDocumentNode) {\n    this.spec = spec ? spec : {}\n  }\n\n  id(id: string): DocumentBuilder {\n    return this.clone({id})\n  }\n\n  getId(): PartialDocumentNode['id'] {\n    return this.spec.id\n  }\n\n  title(title: string): DocumentBuilder {\n    return this.clone({title, id: this.spec.id || camelCase(title)})\n  }\n\n  getTitle(): PartialDocumentNode['title'] {\n    return this.spec.title\n  }\n\n  child(child: Child): DocumentBuilder {\n    return this.clone({child})\n  }\n\n  getChild(): PartialDocumentNode['child'] {\n    return this.spec.child\n  }\n\n  documentId(documentId: string): DocumentBuilder {\n    // Let's try to be a bit helpful and assign an ID from document ID if none is specified\n    const paneId = this.spec.id || documentId\n    return this.clone({\n      id: paneId,\n      options: {\n        ...(this.spec.options || {}),\n        id: documentId,\n      },\n    })\n  }\n\n  getDocumentId(): Partial<DocumentOptions>['id'] {\n    return this.spec.options?.id\n  }\n\n  schemaType(documentType: SchemaType | string): DocumentBuilder {\n    return this.clone({\n      options: {\n        ...(this.spec.options || {}),\n        type: typeof documentType === 'string' ? documentType : documentType.name,\n      },\n    })\n  }\n\n  getSchemaType(): Partial<DocumentOptions>['type'] {\n    return this.spec.options?.type\n  }\n\n  initialValueTemplate(templateId: string, parameters?: Record<string, unknown>): DocumentBuilder {\n    return this.clone({\n      options: {\n        ...(this.spec.options || {}),\n        template: templateId,\n        templateParameters: parameters,\n      },\n    })\n  }\n\n  getInitialValueTemplate(): Partial<DocumentOptions>['template'] {\n    return this.spec.options?.template\n  }\n\n  getInitialValueTemplateParameters(): Partial<DocumentOptions>['templateParameters'] {\n    return this.spec.options?.templateParameters\n  }\n\n  views(views: (View | ViewBuilder)[]): DocumentBuilder {\n    return this.clone({views})\n  }\n\n  getViews(): (View | ViewBuilder)[] {\n    return this.spec.views || []\n  }\n\n  serialize({path = [], index, hint}: SerializeOptions = {path: []}): DocumentNode {\n    const urlId = path[index || path.length - 1]\n\n    // Try to grab document ID / editor ID from URL if not defined\n    const id = this.spec.id || (urlId && `${urlId}`) || ''\n    const options: Partial<DocumentOptions> = {\n      id,\n      type: undefined,\n      template: undefined,\n      templateParameters: undefined,\n      ...this.spec.options,\n    }\n\n    if (typeof id !== 'string' || !id) {\n      throw new SerializeError(\n        '`id` is required for document nodes',\n        path,\n        index,\n        hint\n      ).withHelpUrl(HELP_URL.ID_REQUIRED)\n    }\n\n    if (!options || !options.id) {\n      throw new SerializeError(\n        'document id (`id`) is required for document nodes',\n        path,\n        id,\n        hint\n      ).withHelpUrl(HELP_URL.DOCUMENT_ID_REQUIRED)\n    }\n\n    if (!options || !options.type) {\n      throw new SerializeError(\n        'document type (`schemaType`) is required for document nodes',\n        path,\n        id,\n        hint\n      )\n    }\n\n    const views = (this.spec.views && this.spec.views.length > 0 ? this.spec.views : [form()]).map(\n      (item, i) => maybeSerializeView(item, i, path)\n    )\n\n    const viewIds = views.map((view) => view.id)\n    const dupes = uniq(viewIds.filter((viewId, i) => viewIds.includes(viewId, i + 1)))\n    if (dupes.length > 0) {\n      throw new SerializeError(\n        `document node has views with duplicate IDs: ${dupes.join(',  ')}`,\n        path,\n        id,\n        hint\n      )\n    }\n\n    return {\n      ...this.spec,\n      child: this.spec.child || createDocumentChildResolver(this._context),\n      id: validateId(id, path, index),\n      type: 'document',\n      options: getDocumentOptions(options),\n      views,\n    }\n  }\n\n  clone(withSpec: PartialDocumentNode = {}): DocumentBuilder {\n    const builder = new DocumentBuilder(this._context)\n    const options = {...(this.spec.options || {}), ...(withSpec.options || {})}\n    builder.spec = {...this.spec, ...withSpec, options}\n    return builder\n  }\n}\n\nfunction getDocumentOptions(spec: Partial<DocumentOptions>): DocumentOptions {\n  const opts: DocumentOptions = {\n    id: spec.id || '',\n    type: spec.type || '*',\n  }\n\n  if (spec.template) {\n    opts.template = spec.template\n  }\n\n  if (spec.templateParameters) {\n    opts.templateParameters = spec.templateParameters\n  }\n\n  return opts\n}\n\nexport function documentFromEditor(context: StructureContext, spec?: EditorNode): DocumentBuilder {\n  let doc = spec?.type\n    ? // Use user-defined document fragment as base if possible\n      context.resolveDocumentNode({schemaType: spec.type})\n    : // Fall back to plain old document builder\n      new DocumentBuilder(context)\n\n  if (!spec) return doc\n\n  const {id, type, template, templateParameters} = spec.options\n  doc = doc.id(spec.id).documentId(id)\n\n  if (type) {\n    doc = doc.schemaType(type)\n  }\n  if (template) {\n    doc = doc.initialValueTemplate(template, templateParameters)\n  }\n  if (spec.child) {\n    doc = doc.child(spec.child)\n  }\n\n  return doc\n}\n\nexport function documentFromEditorWithInitialValue(\n  {resolveDocumentNode, templates}: StructureContext,\n  templateId: string,\n  parameters?: Record<string, unknown>\n): DocumentBuilder {\n  const template = templates.find((t) => t.id === templateId)\n\n  if (!template) {\n    throw new Error(`Template with ID \"${templateId}\" not defined`)\n  }\n\n  return resolveDocumentNode({schemaType: template.schemaType}).initialValueTemplate(\n    templateId,\n    parameters\n  )\n}\n","export const layoutOptions = ['default', 'card', 'media', 'detail', 'block']\n","import {PartialDocumentList, getTypeNamesFromFilter} from './DocumentList'\nimport {StructureNode} from './StructureNodes'\n\nexport type IntentJsonParams = {[key: string]: any}\n\nexport type BaseIntentParams = {\n  type?: string\n  id?: string\n  template?: string\n}\n\nexport const DEFAULT_INTENT_HANDLER = Symbol('Document type list canHandleIntent')\n\nexport type IntentParams = BaseIntentParams | [BaseIntentParams, IntentJsonParams]\n\n// TODO: intents should be unified somewhere\nexport interface Intent {\n  type: string\n  params?: IntentParams\n}\n\nexport interface IntentChecker {\n  (\n    intentName: string,\n    params: {[key: string]: any},\n    context: {pane: StructureNode; index: number}\n  ): boolean\n  identity?: symbol\n}\n\nexport const defaultIntentChecker: IntentChecker = (intentName, params, {pane}): boolean => {\n  const isEdit = intentName === 'edit'\n  const isCreate = intentName === 'create'\n  const typedSpec = pane as PartialDocumentList\n  const paneFilter = typedSpec.options?.filter || ''\n  const paneParams = typedSpec.options?.params || {}\n  const typeNames = typedSpec.schemaTypeName\n    ? [typedSpec.schemaTypeName]\n    : getTypeNamesFromFilter(paneFilter, paneParams)\n\n  const initialValueTemplates = typedSpec.initialValueTemplates || []\n\n  if (isCreate && params.template) {\n    return initialValueTemplates.some((tpl) => tpl.templateId === params.template)\n  }\n\n  return (\n    (isEdit && params.id && typeNames.includes(params.type)) ||\n    (isCreate && typeNames.includes(params.type))\n  )\n}\n\ndefaultIntentChecker.identity = DEFAULT_INTENT_HANDLER\n","import {pickBy} from 'lodash'\nimport {ComposeIcon} from '@sanity/icons'\nimport {InitialValueTemplateItem} from '../../templates'\nimport {HELP_URL, SerializeError} from './SerializeError'\nimport {Serializable, SerializeOptions, SerializePath} from './StructureNodes'\nimport {MenuItemBuilder, MenuItem} from './MenuItem'\nimport {IntentParams} from './Intent'\nimport {StructureContext} from './types'\n\nexport class InitialValueTemplateItemBuilder implements Serializable<InitialValueTemplateItem> {\n  protected spec: Partial<InitialValueTemplateItem>\n\n  constructor(protected _context: StructureContext, spec?: Partial<InitialValueTemplateItem>) {\n    this.spec = spec ? spec : {}\n  }\n\n  id(id: string): InitialValueTemplateItemBuilder {\n    return this.clone({id})\n  }\n\n  getId(): Partial<InitialValueTemplateItem>['id'] {\n    return this.spec.id\n  }\n\n  title(title: string): InitialValueTemplateItemBuilder {\n    return this.clone({title})\n  }\n\n  getTitle(): Partial<InitialValueTemplateItem>['title'] {\n    return this.spec.title\n  }\n\n  description(description: string): InitialValueTemplateItemBuilder {\n    return this.clone({description})\n  }\n\n  getDescription(): Partial<InitialValueTemplateItem>['description'] {\n    return this.spec.description\n  }\n\n  templateId(templateId: string): InitialValueTemplateItemBuilder {\n    // Let's try to be a bit helpful and assign an ID from template ID if none is specified\n    const paneId = this.spec.id || templateId\n    return this.clone({\n      id: paneId,\n      templateId,\n    })\n  }\n\n  getTemplateId(): Partial<InitialValueTemplateItem>['templateId'] {\n    return this.spec.templateId\n  }\n\n  parameters(parameters: {[key: string]: any}): InitialValueTemplateItemBuilder {\n    return this.clone({parameters})\n  }\n\n  getParameters(): Partial<InitialValueTemplateItem>['parameters'] {\n    return this.spec.parameters\n  }\n\n  serialize({path = [], index, hint}: SerializeOptions = {path: []}): InitialValueTemplateItem {\n    const {spec, _context} = this\n    const {templates} = _context\n\n    if (typeof spec.id !== 'string' || !spec.id) {\n      throw new SerializeError(\n        '`id` is required for initial value template item nodes',\n        path,\n        index,\n        hint\n      ).withHelpUrl(HELP_URL.ID_REQUIRED)\n    }\n\n    if (!spec.templateId) {\n      throw new SerializeError(\n        'template id (`templateId`) is required for initial value template item nodes',\n        path,\n        spec.id,\n        hint\n      ).withHelpUrl(HELP_URL.ID_REQUIRED)\n    }\n\n    const template = templates.find((t) => t.id === spec.templateId)\n\n    if (!template) {\n      throw new SerializeError(\n        'template id (`templateId`) is required for initial value template item nodes',\n        path,\n        spec.id,\n        hint\n      ).withHelpUrl(HELP_URL.ID_REQUIRED)\n    }\n\n    return {\n      id: spec.id,\n      templateId: spec.id,\n      schemaType: template.schemaType,\n      type: 'initialValueTemplateItem',\n      description: spec.description || template.description,\n      title: spec.title || template.title,\n      subtitle: spec.subtitle,\n      icon: spec.icon || template.icon,\n      initialDocumentId: spec.initialDocumentId,\n      parameters: spec.parameters,\n    }\n  }\n\n  clone(withSpec: Partial<InitialValueTemplateItem> = {}): InitialValueTemplateItemBuilder {\n    const builder = new InitialValueTemplateItemBuilder(this._context)\n    builder.spec = {...this.spec, ...withSpec}\n    return builder\n  }\n}\n\nexport function defaultInitialValueTemplateItems(\n  context: StructureContext\n): InitialValueTemplateItemBuilder[] {\n  const {schema, getStructureBuilder, templates} = context\n\n  // Sort templates by their schema type, in order or definition\n  const typeNames = schema.getTypeNames()\n  const ordered = templates\n    // Don't list templates that require parameters\n    // TODO: this should use the new-document template items instead maybe?\n    .filter((tpl) => !tpl.parameters?.length)\n    .sort((a, b) => typeNames.indexOf(a.schemaType) - typeNames.indexOf(b.schemaType))\n\n  // Create actual template items out of the templates\n  return ordered.map((tpl) => getStructureBuilder().initialValueTemplateItem(tpl.id))\n}\n\nexport function maybeSerializeInitialValueTemplateItem(\n  item: InitialValueTemplateItem | InitialValueTemplateItemBuilder,\n  index: number,\n  path: SerializePath\n): InitialValueTemplateItem {\n  return item instanceof InitialValueTemplateItemBuilder ? item.serialize({path, index}) : item\n}\n\nexport function menuItemsFromInitialValueTemplateItems(\n  context: StructureContext,\n  templateItems: InitialValueTemplateItem[]\n): MenuItem[] {\n  const {schema, templates} = context\n  return templateItems.map((item) => {\n    const template = templates.find((t) => t.id === item.templateId)\n    const title = item.title || template?.title || 'Create new'\n    const params = pickBy(\n      {type: template && template.schemaType, template: item.templateId},\n      Boolean\n    )\n    const intentParams: IntentParams = item.parameters ? [params, item.parameters] : params\n    const schemaType = template && schema.get(template.schemaType)\n\n    return new MenuItemBuilder(context)\n      .title(title)\n      .icon((template && template.icon) || schemaType?.icon || ComposeIcon)\n      .intent({type: 'create', params: intentParams})\n      .serialize()\n  })\n}\n","import {camelCase} from 'lodash'\nimport {InitialValueTemplateItem} from '../../templates'\nimport {StructureNode, SerializeOptions, Serializable, Child} from './StructureNodes'\nimport {layoutOptions} from './Layout'\nimport {MenuItem, MenuItemBuilder, maybeSerializeMenuItem} from './MenuItem'\nimport {MenuItemGroup, MenuItemGroupBuilder, maybeSerializeMenuItemGroup} from './MenuItemGroup'\nimport {IntentChecker, defaultIntentChecker} from './Intent'\nimport {SerializeError} from './SerializeError'\nimport {\n  InitialValueTemplateItemBuilder,\n  maybeSerializeInitialValueTemplateItem,\n} from './InitialValueTemplateItem'\nimport {validateId} from './util/validateId'\nimport {PreviewLayoutKey} from '../../components/previews'\n\nfunction noChildResolver() {\n  return undefined\n}\n\nexport const shallowIntentChecker: IntentChecker = (intentName, params, {pane, index}): boolean => {\n  return index <= 1 && defaultIntentChecker(intentName, params, {pane, index})\n}\n\nexport interface ListDisplayOptions {\n  showIcons?: boolean\n}\n\nexport interface BaseGenericList extends StructureNode {\n  defaultLayout?: PreviewLayoutKey\n  canHandleIntent?: IntentChecker\n  displayOptions?: ListDisplayOptions\n  child: Child\n  initialValueTemplates?: (InitialValueTemplateItem | InitialValueTemplateItemBuilder)[]\n}\n\n// \"POJO\"/verbatim-version - end result\nexport interface GenericList extends BaseGenericList {\n  type: string\n  menuItems: MenuItem[]\n  menuItemGroups: MenuItemGroup[]\n}\n\n// Used internally in builder classes to make everything optional\nexport interface BuildableGenericList extends Partial<BaseGenericList> {\n  menuItems?: (MenuItem | MenuItemBuilder)[]\n  menuItemGroups?: (MenuItemGroup | MenuItemGroupBuilder)[]\n}\n\n// Input version, allows builders and only requires things not inferrable\nexport interface GenericListInput extends StructureNode {\n  id: string\n  title: string\n  menuItems?: (MenuItem | MenuItemBuilder)[]\n  menuItemGroups?: (MenuItemGroup | MenuItemGroupBuilder)[]\n  initialValueTemplates?: (InitialValueTemplateItem | InitialValueTemplateItemBuilder)[]\n  defaultLayout?: PreviewLayoutKey\n  canHandleIntent?: IntentChecker\n  child?: Child\n}\n\nexport abstract class GenericListBuilder<TList extends BuildableGenericList, ConcreteImpl>\n  implements Serializable<GenericList>\n{\n  protected initialValueTemplatesSpecified = false\n  protected spec: TList = {} as TList\n\n  id(id: string): ConcreteImpl {\n    return this.clone({id})\n  }\n\n  getId(): TList['id'] {\n    return this.spec.id\n  }\n\n  title(title: string): ConcreteImpl {\n    return this.clone({title, id: this.spec.id || camelCase(title)})\n  }\n\n  getTitle(): TList['title'] {\n    return this.spec.title\n  }\n\n  defaultLayout(defaultLayout: PreviewLayoutKey): ConcreteImpl {\n    return this.clone({defaultLayout})\n  }\n\n  getDefaultLayout(): TList['defaultLayout'] {\n    return this.spec.defaultLayout\n  }\n\n  menuItems(menuItems: (MenuItem | MenuItemBuilder)[] | undefined): ConcreteImpl {\n    return this.clone({menuItems})\n  }\n\n  getMenuItems(): TList['menuItems'] {\n    return this.spec.menuItems\n  }\n\n  menuItemGroups(menuItemGroups: (MenuItemGroup | MenuItemGroupBuilder)[]): ConcreteImpl {\n    return this.clone({menuItemGroups})\n  }\n\n  getMenuItemGroups(): TList['menuItemGroups'] {\n    return this.spec.menuItemGroups\n  }\n\n  child(child: Child): ConcreteImpl {\n    return this.clone({child})\n  }\n\n  getChild(): TList['child'] {\n    return this.spec.child\n  }\n\n  canHandleIntent(canHandleIntent: IntentChecker): ConcreteImpl {\n    return this.clone({canHandleIntent})\n  }\n\n  getCanHandleIntent(): TList['canHandleIntent'] {\n    return this.spec.canHandleIntent\n  }\n\n  showIcons(enabled = true): ConcreteImpl {\n    return this.clone({\n      displayOptions: {...(this.spec.displayOptions || {}), showIcons: enabled},\n    })\n  }\n\n  getShowIcons(): boolean | undefined {\n    return this.spec.displayOptions ? this.spec.displayOptions.showIcons : undefined\n  }\n\n  initialValueTemplates(\n    templates:\n      | InitialValueTemplateItem\n      | InitialValueTemplateItemBuilder\n      | Array<InitialValueTemplateItem | InitialValueTemplateItemBuilder>\n  ): ConcreteImpl {\n    this.initialValueTemplatesSpecified = true\n    return this.clone({initialValueTemplates: Array.isArray(templates) ? templates : [templates]})\n  }\n\n  getInitialValueTemplates(): TList['initialValueTemplates'] {\n    return this.spec.initialValueTemplates\n  }\n\n  serialize(options: SerializeOptions = {path: []}): GenericList {\n    const id = this.spec.id || ''\n    const path = options.path\n\n    const defaultLayout = this.spec.defaultLayout\n    if (defaultLayout && !layoutOptions.includes(defaultLayout)) {\n      throw new SerializeError(\n        `\\`layout\\` must be one of ${layoutOptions.map((item) => `\"${item}\"`).join(', ')}`,\n        path,\n        id || options.index,\n        this.spec.title\n      )\n    }\n\n    const initialValueTemplates = (this.spec.initialValueTemplates || []).map((item, i) =>\n      maybeSerializeInitialValueTemplateItem(item, i, path)\n    )\n\n    return {\n      id: validateId(id, options.path, id || options.index),\n      title: this.spec.title,\n      type: 'genericList',\n      defaultLayout,\n      child: this.spec.child || noChildResolver,\n      canHandleIntent: this.spec.canHandleIntent || shallowIntentChecker,\n      displayOptions: this.spec.displayOptions,\n      initialValueTemplates,\n      menuItems: (this.spec.menuItems || []).map((item, i) =>\n        maybeSerializeMenuItem(item, i, path)\n      ),\n      menuItemGroups: (this.spec.menuItemGroups || []).map((item, i) =>\n        maybeSerializeMenuItemGroup(item, i, path)\n      ),\n    }\n  }\n\n  abstract clone(_withSpec?: object): ConcreteImpl\n}\n","import {SchemaType, SortOrderingItem} from '@sanity/types'\nimport {SanityClient} from '@sanity/client'\nimport {ComposeIcon} from '@sanity/icons'\nimport type {SourceClientOptions} from '../../config'\nimport {InitialValueTemplateItem} from '../../templates'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../studioClient'\nimport {SerializeError, HELP_URL} from './SerializeError'\nimport {SerializeOptions, Child} from './StructureNodes'\nimport {ChildResolver, ChildResolverOptions, ItemChild} from './ChildResolver'\nimport {\n  GenericListBuilder,\n  BuildableGenericList,\n  GenericList,\n  GenericListInput,\n} from './GenericList'\nimport {DocumentBuilder} from './Document'\nimport {StructureContext} from './types'\n\nconst resolveTypeForDocument = async (\n  getClient: (options: SourceClientOptions) => SanityClient,\n  id: string\n): Promise<string | undefined> => {\n  const query = '*[_id in [$documentId, $draftId]]._type'\n  const documentId = id.replace(/^drafts\\./, '')\n  const draftId = `drafts.${documentId}`\n\n  const types = await getClient(DEFAULT_STUDIO_CLIENT_OPTIONS).fetch(\n    query,\n    {documentId, draftId},\n    {tag: 'structure.resolve-type'}\n  )\n\n  return types[0]\n}\n\nconst validateFilter = (spec: PartialDocumentList, options: SerializeOptions) => {\n  const filter = spec.options?.filter.trim() || ''\n\n  if (['*', '{'].includes(filter[0])) {\n    throw new SerializeError(\n      `\\`filter\\` cannot start with \\`${filter[0]}\\` - looks like you are providing a query, not a filter`,\n      options.path,\n      spec.id,\n      spec.title\n    ).withHelpUrl(HELP_URL.QUERY_PROVIDED_FOR_FILTER)\n  }\n\n  return filter\n}\n\nconst createDocumentChildResolverForItem =\n  (context: StructureContext): ChildResolver =>\n  (itemId: string, options: ChildResolverOptions): ItemChild | Promise<ItemChild> | undefined => {\n    const parentItem = options.parent as DocumentList\n    const template = options.params?.template\n      ? context.templates.find((tpl) => tpl.id === options.params.template)\n      : undefined\n    const type = template\n      ? template.schemaType\n      : parentItem.schemaTypeName || resolveTypeForDocument(context.getClient, itemId)\n\n    return Promise.resolve(type).then((schemaType) =>\n      schemaType\n        ? context.resolveDocumentNode({schemaType, documentId: itemId})\n        : new DocumentBuilder(context).id('editor').documentId(itemId).schemaType('')\n    )\n  }\n\nexport interface PartialDocumentList extends BuildableGenericList {\n  options?: DocumentListOptions\n  schemaTypeName?: string\n}\n\nexport interface DocumentListInput extends GenericListInput {\n  options: DocumentListOptions\n}\n\nexport interface DocumentList extends GenericList {\n  type: 'documentList'\n  options: DocumentListOptions\n  child: Child\n  schemaTypeName?: string\n}\n\nexport interface DocumentListOptions {\n  filter: string\n  params?: Record<string, unknown>\n  apiVersion?: string\n  defaultOrdering?: SortOrderingItem[]\n}\n\nexport class DocumentListBuilder extends GenericListBuilder<\n  PartialDocumentList,\n  DocumentListBuilder\n> {\n  protected spec: PartialDocumentList\n\n  constructor(protected _context: StructureContext, spec?: DocumentListInput) {\n    super()\n    this.spec = spec || {}\n    this.initialValueTemplatesSpecified = Boolean(spec?.initialValueTemplates)\n  }\n\n  apiVersion(apiVersion: string): DocumentListBuilder {\n    return this.clone({options: {...(this.spec.options || {filter: ''}), apiVersion}})\n  }\n\n  getApiVersion(): string | undefined {\n    return this.spec.options?.apiVersion\n  }\n\n  filter(filter: string): DocumentListBuilder {\n    return this.clone({options: {...(this.spec.options || {}), filter}})\n  }\n\n  getFilter(): string | undefined {\n    return this.spec.options?.filter\n  }\n\n  schemaType(type: SchemaType | string): DocumentListBuilder {\n    const schemaTypeName = typeof type === 'string' ? type : type.name\n    return this.clone({schemaTypeName})\n  }\n\n  getSchemaType(): string | undefined {\n    return this.spec.schemaTypeName\n  }\n\n  params(params: Record<string, unknown>): DocumentListBuilder {\n    return this.clone({\n      options: {...(this.spec.options || {filter: ''}), params},\n    })\n  }\n\n  getParams(): Record<string, unknown> | undefined {\n    return this.spec.options?.params\n  }\n\n  defaultOrdering(ordering: SortOrderingItem[]): DocumentListBuilder {\n    if (!Array.isArray(ordering)) {\n      throw new Error('`defaultOrdering` must be an array of order clauses')\n    }\n\n    return this.clone({\n      options: {...(this.spec.options || {filter: ''}), defaultOrdering: ordering},\n    })\n  }\n\n  getDefaultOrdering(): SortOrderingItem[] | undefined {\n    return this.spec.options?.defaultOrdering\n  }\n\n  serialize(options: SerializeOptions = {path: []}): DocumentList {\n    if (typeof this.spec.id !== 'string' || !this.spec.id) {\n      throw new SerializeError(\n        '`id` is required for document lists',\n        options.path,\n        options.index,\n        this.spec.title\n      ).withHelpUrl(HELP_URL.ID_REQUIRED)\n    }\n\n    if (!this.spec.options || !this.spec.options.filter) {\n      throw new SerializeError(\n        '`filter` is required for document lists',\n        options.path,\n        this.spec.id,\n        this.spec.title\n      ).withHelpUrl(HELP_URL.FILTER_REQUIRED)\n    }\n\n    return {\n      ...super.serialize(options),\n      type: 'documentList',\n      schemaTypeName: this.spec.schemaTypeName,\n      child: this.spec.child || createDocumentChildResolverForItem(this._context),\n      options: {\n        ...this.spec.options,\n        apiVersion:\n          this.spec.options.apiVersion ||\n          // If this is a simple type filter, use modern API version - otherwise default to v1\n          (this.spec.options?.filter === '_type == $type' ? '2021-06-07' : '1'),\n        filter: validateFilter(this.spec, options),\n      },\n    }\n  }\n\n  clone(withSpec?: PartialDocumentList): DocumentListBuilder {\n    const builder = new DocumentListBuilder(this._context)\n    builder.spec = {...this.spec, ...(withSpec || {})}\n\n    if (!this.initialValueTemplatesSpecified) {\n      builder.spec.initialValueTemplates = inferInitialValueTemplates(this._context, builder.spec)\n    }\n\n    if (!builder.spec.schemaTypeName) {\n      builder.spec.schemaTypeName = inferTypeName(builder.spec)\n    }\n\n    return builder\n  }\n\n  getSpec(): PartialDocumentList {\n    return this.spec\n  }\n}\n\nfunction inferInitialValueTemplates(\n  context: StructureContext,\n  spec: PartialDocumentList\n): InitialValueTemplateItem[] | undefined {\n  const {document} = context\n  const {schemaTypeName, options} = spec\n  const {filter, params} = options || {filter: '', params: {}}\n  const typeNames = schemaTypeName\n    ? [schemaTypeName]\n    : Array.from(new Set(getTypeNamesFromFilter(filter, params)))\n\n  if (typeNames.length === 0) {\n    return undefined\n  }\n\n  return typeNames\n    .flatMap((schemaType) =>\n      document.resolveNewDocumentOptions({\n        type: 'structure',\n        schemaType,\n      })\n    )\n    .map((option) => ({...option, icon: ComposeIcon}))\n}\n\nfunction inferTypeName(spec: PartialDocumentList): string | undefined {\n  const {options} = spec\n  const {filter, params} = options || {filter: '', params: {}}\n  const typeNames = getTypeNamesFromFilter(filter, params)\n  return typeNames.length === 1 ? typeNames[0] : undefined\n}\n\nexport function getTypeNamesFromFilter(\n  filter: string,\n  params: Record<string, unknown> = {}\n): string[] {\n  let typeNames = getTypeNamesFromEqualityFilter(filter, params)\n\n  if (typeNames.length === 0) {\n    typeNames = getTypeNamesFromInTypesFilter(filter, params)\n  }\n\n  return typeNames\n}\n\n// From _type == \"movie\" || _type == $otherType\nfunction getTypeNamesFromEqualityFilter(\n  filter: string,\n  params: Record<string, unknown> = {}\n): string[] {\n  const pattern =\n    /\\b_type\\s*==\\s*(['\"].*?['\"]|\\$.*?(?:\\s|$))|\\B(['\"].*?['\"]|\\$.*?(?:\\s|$))\\s*==\\s*_type/g\n  const matches: string[] = []\n  let match\n  while ((match = pattern.exec(filter)) !== null) {\n    matches.push(match[1] || match[2])\n  }\n\n  return matches\n    .map((candidate) => {\n      const typeName = candidate[0] === '$' ? params[candidate.slice(1)] : candidate\n      const normalized = ((typeName as string) || '').trim().replace(/^[\"']|[\"']$/g, '')\n      return normalized\n    })\n    .filter(Boolean)\n}\n\n// From _type in [\"dog\", \"cat\", $otherSpecies]\nfunction getTypeNamesFromInTypesFilter(\n  filter: string,\n  params: Record<string, unknown> = {}\n): string[] {\n  const pattern = /\\b_type\\s+in\\s+\\[(.*?)\\]/\n  const matches = filter.match(pattern)\n  if (!matches) {\n    return []\n  }\n\n  return matches[1]\n    .split(/,\\s*/)\n    .map((match) => match.trim().replace(/^[\"']+|[\"']+$/g, ''))\n    .map((item) => (item[0] === '$' ? params[item.slice(1)] : item))\n    .filter(Boolean) as string[]\n}\n","/**\n * @internal\n */\nexport const _DEBUG = false\n\nexport const EMPTY_PARAMS = {}\nexport const LOADING_PANE = Symbol('LOADING_PANE')\n","import {RouterPaneSiblingContext} from '../types'\n\nexport interface PaneResolutionErrorOptions {\n  message: string\n  context?: RouterPaneSiblingContext\n  helpId?: string\n  cause?: Error\n}\n\n/**\n * An error thrown during pane resolving. This error is meant to be bubbled up\n * through react and handled in an error boundary. It includes a `cause`\n * property which is the original error caught\n */\nexport class PaneResolutionError extends Error {\n  cause: Error | undefined\n  context: RouterPaneSiblingContext | undefined\n  helpId: string | undefined\n\n  constructor({message, context, helpId, cause}: PaneResolutionErrorOptions) {\n    super(message)\n    this.context = context\n    this.helpId = helpId\n    this.cause = cause\n  }\n}\n","import {nanoid} from 'nanoid'\n\n// `WeakMap`s require the first type param to extend `object`\n// eslint-disable-next-line @typescript-eslint/ban-types\nconst randomIdCache = new WeakMap<object, string>()\n\n/**\n * given an object, this function randomly generates an ID and returns it. this\n * result is then saved in a WeakMap so subsequent requests for the same object\n * will receive the same ID\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function assignId(obj: object): string {\n  const cachedValue = randomIdCache.get(obj)\n  if (cachedValue) return cachedValue\n\n  const id = nanoid()\n  randomIdCache.set(obj, id)\n  return id\n}\n","/* eslint-disable @typescript-eslint/ban-types */\n\n// `WeakMap`s require the first type param to extend `object`\nconst bindCache = new WeakMap<object, Map<string, Function>>()\n\n/**\n * An alternative to `obj.method.bind(obj)` that utilizes a weakmap to return\n * the same memory reference for sequent binds.\n */\nexport function memoBind<\n  T extends object,\n  K extends keyof {[P in keyof T]: T[P] extends Function ? T[P] : never}\n>(obj: T, methodKey: K): T[K]\nexport function memoBind(obj: Record<string, unknown>, methodKey: string): Function {\n  const boundMethods = bindCache.get(obj) || new Map<string, Function>()\n  if (boundMethods) {\n    const bound = boundMethods.get(methodKey)\n    if (bound) return bound\n  }\n\n  const method = obj[methodKey]\n\n  if (typeof method !== 'function') {\n    throw new Error(\n      `Expected property \\`${methodKey}\\` to be a function but got ${typeof method} instead.`\n    )\n  }\n\n  const bound = method.bind(obj)\n  boundMethods.set(methodKey, bound)\n  bindCache.set(obj, boundMethods)\n\n  return bound\n}\n","import {Observable, of as observableOf, from as observableFrom, Subscribable} from 'rxjs'\nimport {publishReplay, refCount, switchMap} from 'rxjs/operators'\nimport {isRecord} from '../../util'\nimport {PaneNode, RouterPaneSiblingContext, UnresolvedPaneNode} from '../types'\nimport {PaneResolutionError} from './PaneResolutionError'\n\ninterface Serializable {\n  serialize: (...args: never[]) => unknown\n}\n\nconst isSubscribable = (thing: unknown): thing is Subscribable<unknown> | PromiseLike<unknown> => {\n  if (!isRecord(thing)) return false\n  return typeof thing.subscribe === 'function' || typeof thing.then === 'function'\n}\n\nconst isSerializable = (thing: unknown): thing is Serializable => {\n  if (!isRecord(thing)) return false\n  return typeof thing.serialize === 'function'\n}\n\n/**\n * The signature of the function used to take an `UnresolvedPaneNode` and turn\n * it into an `Observable<PaneNode>`.\n */\nexport type PaneResolver = (\n  unresolvedPane: UnresolvedPaneNode | undefined,\n  context: RouterPaneSiblingContext,\n  flatIndex: number\n) => Observable<PaneNode>\n\nexport type PaneResolverMiddleware = (paneResolveFn: PaneResolver) => PaneResolver\n\nconst rethrowWithPaneResolutionErrors: PaneResolverMiddleware =\n  (next) => (unresolvedPane, context, flatIndex) => {\n    try {\n      return next(unresolvedPane, context, flatIndex)\n    } catch (e) {\n      // re-throw errors that are already `PaneResolutionError`s\n      if (e instanceof PaneResolutionError) {\n        throw e\n      }\n\n      // anything else, wrap with `PaneResolutionError` and set the underlying\n      // error as a the `cause`\n      throw new PaneResolutionError({\n        message: typeof e?.message === 'string' ? e.message : '',\n        context,\n        cause: e,\n      })\n    }\n  }\n\nconst wrapWithPublishReplay: PaneResolverMiddleware =\n  (next) =>\n  (...args) => {\n    return next(...args).pipe(\n      // need to add publishReplay + refCount to ensure new subscribers always\n      // get an emission. without this, memoized observables may get stuck\n      // waiting for their first emissions resulting in a loading pane\n      publishReplay(1),\n      refCount()\n    )\n  }\n\nexport function createPaneResolver(middleware: PaneResolverMiddleware): PaneResolver {\n  // note: this API includes a middleware/wrapper function because the function\n  // is recursive. we want to call the wrapped version of the function always\n  // (even inside of nested calls) so the identifier invoked for the recursion\n  // should be the wrapped version\n  const resolvePane = rethrowWithPaneResolutionErrors(\n    wrapWithPublishReplay(\n      middleware((unresolvedPane, context, flatIndex) => {\n        if (!unresolvedPane) {\n          throw new PaneResolutionError({\n            message: 'Pane returned no child',\n            context,\n            helpId: 'structure-item-returned-no-child',\n          })\n        }\n\n        if (isSubscribable(unresolvedPane)) {\n          return observableFrom(unresolvedPane).pipe(\n            switchMap((result) => resolvePane(result, context, flatIndex))\n          )\n        }\n\n        if (isSerializable(unresolvedPane)) {\n          return resolvePane(unresolvedPane.serialize(context), context, flatIndex)\n        }\n\n        if (typeof unresolvedPane === 'function') {\n          return resolvePane(unresolvedPane(context.id, context), context, flatIndex)\n        }\n\n        return observableOf(unresolvedPane)\n      })\n    )\n  )\n\n  return resolvePane\n}\n","import {useContext} from 'react'\nimport {DeskToolContext} from './DeskToolContext'\nimport {DeskToolContextValue} from './types'\n\nexport function useDeskTool(): DeskToolContextValue {\n  const deskTool = useContext(DeskToolContext)\n\n  if (!deskTool) throw new Error(`DeskTool: missing context value`)\n\n  return deskTool\n}\n","import {generateHelpUrl} from '@sanity/generate-help-url'\nimport {isEqual} from 'lodash'\nimport {Observable, NEVER, of as observableOf, concat} from 'rxjs'\nimport {switchMap, map, scan, distinctUntilChanged, pairwise, startWith} from 'rxjs/operators'\nimport {\n  DocumentPaneNode,\n  PaneNode,\n  RouterPaneSiblingContext,\n  RouterPanes,\n  RouterPaneSibling,\n  PaneNodeResolver,\n  UnresolvedPaneNode,\n} from '../types'\nimport {StructureContext} from '../structureBuilder'\nimport {assignId} from './assignId'\nimport {createPaneResolver, PaneResolver, PaneResolverMiddleware} from './createPaneResolver'\nimport {memoBind} from './memoBind'\nimport {PaneResolutionError} from './PaneResolutionError'\n\n/**\n * the fallback editor child that is implicitly inserted into the structure tree\n * if the id starts with `__edit__`\n */\nconst fallbackEditorChild: PaneNodeResolver = (nodeId, context): DocumentPaneNode => {\n  const id = nodeId.replace(/^__edit__/, '')\n  const {\n    params,\n    payload,\n    structureContext: {resolveDocumentNode},\n  } = context\n  const {type, template} = params\n\n  if (!type) {\n    throw new Error(\n      `Document type for document with ID ${id} was not provided in the router params.`\n    )\n  }\n\n  let defaultDocumentBuilder = resolveDocumentNode({schemaType: type, documentId: id})\n\n  defaultDocumentBuilder = defaultDocumentBuilder.id('editor').title('Editor')\n\n  if (template) {\n    defaultDocumentBuilder = defaultDocumentBuilder.initialValueTemplate(\n      template,\n      payload as {[key: string]: unknown}\n    )\n  }\n\n  return defaultDocumentBuilder.serialize() as DocumentPaneNode\n}\n\n/**\n * takes in a `RouterPaneSiblingContext` and returns a normalized string\n * representation that can be used for comparisons\n */\nfunction hashContext(context: RouterPaneSiblingContext): string {\n  return `contextHash(${JSON.stringify({\n    id: context.id,\n    parentId: parent && assignId(parent),\n    path: context.path,\n    index: context.index,\n    splitIndex: context.splitIndex,\n    serializeOptionsIndex: context.serializeOptions?.index,\n    serializeOptionsPath: context.serializeOptions?.path,\n  })})`\n}\n\n/**\n * takes in `ResolvedPaneMeta` and returns a normalized string representation\n * that can be used for comparisons\n */\nconst hashResolvedPaneMeta = (meta: ResolvedPaneMeta): string => {\n  const normalized = {\n    type: meta.type,\n    id: meta.routerPaneSibling.id,\n    params: meta.routerPaneSibling.params || {},\n    payload: meta.routerPaneSibling.payload || null,\n    flatIndex: meta.flatIndex,\n    groupIndex: meta.groupIndex,\n    siblingIndex: meta.siblingIndex,\n    path: meta.path,\n    paneNode: meta.type === 'resolvedMeta' ? assignId(meta.paneNode) : null,\n  }\n\n  return `metaHash(${JSON.stringify(normalized)})`\n}\n\n/**\n * Represents one flattened \"router pane\", including the source group and\n * sibling indexes.\n *\n * @see RouterPanes\n */\ninterface FlattenedRouterPane {\n  routerPaneSibling: RouterPaneSibling\n  flatIndex: number\n  groupIndex: number\n  siblingIndex: number\n}\n\n/**\n * The state of the accumulator used to store and manage memo cache state\n */\ninterface CacheState {\n  /**\n   * Holds the memoization results keyed by a combination of `assignId` and a\n   * context hash.\n   */\n  resolvedPaneCache: Map<string, Observable<PaneNode>>\n  /**\n   * Acts as a dictionary that stores cache keys by their flat index. This is\n   * used to clean up the cache between different branches in the pane\n   * structure.\n   *\n   * @see createResolvedPaneNodeStream look inside the `scan` where `wrapFn` is\n   * defined\n   */\n  cacheKeysByFlatIndex: Array<Set<string>>\n  /**\n   * The resulting memoized `PaneResolver` function. This function closes over\n   * the `resolvedPaneCache`.\n   */\n  resolvePane: PaneResolver\n  flattenedRouterPanes: FlattenedRouterPane[]\n}\n\nexport interface CreateResolvedPaneNodeStreamOptions {\n  /**\n   * an input stream of `RouterPanes`\n   * @see RouterPanes\n   */\n  routerPanesStream: Observable<RouterPanes>\n  /**\n   * any `UnresolvedPaneNode` (could be an observable, promise, pane resolver etc)\n   */\n  rootPaneNode: UnresolvedPaneNode\n  /** used primarily for testing */\n  initialCacheState?: CacheState\n\n  structureContext: StructureContext\n}\n\n/**\n * The result of pane resolving\n */\nexport type ResolvedPaneMeta = {\n  groupIndex: number\n  siblingIndex: number\n  flatIndex: number\n  routerPaneSibling: RouterPaneSibling\n  path: string[]\n} & ({type: 'loading'; paneNode: null} | {type: 'resolvedMeta'; paneNode: PaneNode})\n\ninterface ResolvePaneTreeOptions {\n  resolvePane: PaneResolver\n  flattenedRouterPanes: FlattenedRouterPane[]\n  unresolvedPane: UnresolvedPaneNode | undefined\n  parent: PaneNode | null\n  path: string[]\n  structureContext: StructureContext\n}\n\n/**\n * A recursive pane resolving function. Starts at one unresolved pane node and\n * continues until there is no more flattened router panes that can be used as\n * input to the unresolved panes.\n */\nfunction resolvePaneTree({\n  unresolvedPane,\n  flattenedRouterPanes,\n  parent,\n  path,\n  resolvePane,\n  structureContext,\n}: ResolvePaneTreeOptions): Observable<ResolvedPaneMeta[]> {\n  const [current, ...rest] = flattenedRouterPanes\n  const next = rest[0] as FlattenedRouterPane | undefined\n\n  const context: RouterPaneSiblingContext = {\n    id: current.routerPaneSibling.id,\n    splitIndex: current.siblingIndex,\n    parent,\n    path: [...path, current.routerPaneSibling.id],\n    index: current.flatIndex,\n    params: current.routerPaneSibling.params || {},\n    payload: current.routerPaneSibling.payload,\n    structureContext,\n  }\n\n  try {\n    return resolvePane(unresolvedPane, context, current.flatIndex).pipe(\n      // this switch map receives a resolved pane\n      switchMap((paneNode) => {\n        // we can create a `resolvedMeta` type using it\n        const resolvedPaneMeta: ResolvedPaneMeta = {\n          type: 'resolvedMeta',\n          ...current,\n          paneNode: paneNode,\n          path: context.path,\n        }\n\n        // for the other unresolved panes, we can create \"loading panes\"\n        const loadingPanes = rest.map((i, restIndex) => {\n          const loadingPanePath = [\n            ...context.path,\n            ...rest.slice(restIndex).map((_, currentIndex) => `[${i.flatIndex + currentIndex}]`),\n          ]\n\n          const loadingPane: ResolvedPaneMeta = {\n            type: 'loading',\n            path: loadingPanePath,\n            paneNode: null,\n            ...i,\n          }\n\n          return loadingPane\n        })\n\n        if (!rest.length) {\n          return observableOf([resolvedPaneMeta])\n        }\n\n        let nextStream\n\n        if (\n          // the fallback editor case\n          next?.routerPaneSibling.id.startsWith('__edit__')\n        ) {\n          nextStream = resolvePaneTree({\n            unresolvedPane: fallbackEditorChild,\n            flattenedRouterPanes: rest,\n            parent,\n            path: context.path,\n            resolvePane,\n            structureContext,\n          })\n        } else if (current.groupIndex === next?.groupIndex) {\n          // if the next flattened router pane has the same group index as the\n          // current flattened router pane, then the next flattened router pane\n          // belongs to the same group (i.e. it is a split pane)\n          nextStream = resolvePaneTree({\n            unresolvedPane,\n            flattenedRouterPanes: rest,\n            parent,\n            path,\n            resolvePane,\n            structureContext,\n          })\n        } else {\n          // normal children resolving\n          nextStream = resolvePaneTree({\n            unresolvedPane:\n              typeof paneNode.child === 'function'\n                ? (memoBind(paneNode, 'child') as PaneNodeResolver)\n                : paneNode.child,\n            flattenedRouterPanes: rest,\n            parent: paneNode,\n            path: context.path,\n            resolvePane,\n            structureContext,\n          })\n        }\n\n        return concat(\n          // we emit the loading panes first in a concat (this emits immediately)\n          observableOf([resolvedPaneMeta, ...loadingPanes]),\n          // then whenever the next stream is done, the results will be combined.\n          nextStream.pipe(map((nextResolvedPanes) => [resolvedPaneMeta, ...nextResolvedPanes]))\n        )\n      })\n    )\n  } catch (e) {\n    if (e instanceof PaneResolutionError) {\n      if (e.context) {\n        console.warn(\n          `Pane resolution error at index ${e.context.index}${\n            e.context.splitIndex > 0 ? ` for split pane index ${e.context.splitIndex}` : ''\n          }: ${e.message}${e.helpId ? ` - see ${generateHelpUrl(e.helpId)}` : ''}`,\n          e\n        )\n      }\n\n      if (e.helpId === 'structure-item-returned-no-child') {\n        // returning an observable of an empty array will remove loading panes\n        // note: this one intentionally does not throw\n        return observableOf([])\n      }\n    }\n\n    throw e\n  }\n}\n\n/**\n * Takes in a stream of `RouterPanes` and an unresolved root pane and returns\n * a stream of `ResolvedPaneMeta`\n */\nexport function createResolvedPaneNodeStream({\n  routerPanesStream,\n  rootPaneNode,\n  initialCacheState = {\n    cacheKeysByFlatIndex: [],\n    flattenedRouterPanes: [],\n    resolvedPaneCache: new Map(),\n    resolvePane: () => NEVER,\n  },\n  structureContext,\n}: CreateResolvedPaneNodeStreamOptions): Observable<ResolvedPaneMeta[]> {\n  const resolvedPanes$ = routerPanesStream.pipe(\n    // add in implicit \"root\" router pane\n    map((rawRouterPanes) => [[{id: 'root'}], ...rawRouterPanes]),\n    // create flattened router panes\n    map((routerPanes) => {\n      const flattenedRouterPanes: FlattenedRouterPane[] = routerPanes\n        .flatMap((routerPaneGroup, groupIndex) =>\n          routerPaneGroup.map((routerPaneSibling, siblingIndex) => ({\n            routerPaneSibling,\n            groupIndex,\n            siblingIndex,\n          }))\n        )\n        // add in the flat index\n        .map((i, index) => ({...i, flatIndex: index}))\n\n      return flattenedRouterPanes\n    }),\n    // calculate a \"diffIndex\" used for clearing the memo cache\n    startWith([] as FlattenedRouterPane[]),\n    pairwise(),\n    map(([prev, curr]) => {\n      for (let i = 0; i < curr.length; i++) {\n        const prevValue = prev[i]\n        const currValue = curr[i]\n\n        if (!isEqual(prevValue, currValue)) {\n          return {\n            flattenedRouterPanes: curr,\n            diffIndex: i,\n          }\n        }\n      }\n\n      return {\n        flattenedRouterPanes: curr,\n        diffIndex: curr.length,\n      }\n    }),\n    // create the memoized `resolvePane` function and manage the memo cache\n    scan((acc, next) => {\n      const {cacheKeysByFlatIndex, resolvedPaneCache} = acc\n      const {flattenedRouterPanes, diffIndex} = next\n\n      // use the `cacheKeysByFlatIndex` like a dictionary to find cache keys to\n      // and cache keys to delete\n      const beforeDiffIndex = cacheKeysByFlatIndex.slice(0, diffIndex + 1)\n      const afterDiffIndex = cacheKeysByFlatIndex.slice(diffIndex + 1)\n\n      const keysToKeep = new Set(beforeDiffIndex.flatMap((keySet) => Array.from(keySet)))\n      const keysToDelete = afterDiffIndex\n        .flatMap((keySet) => Array.from(keySet))\n        .filter((key) => !keysToKeep.has(key))\n\n      for (const key of keysToDelete) {\n        resolvedPaneCache.delete(key)\n      }\n\n      // create a memoizing pane resolver middleware that utilizes the cache\n      // maintained above. this keeps the cache from growing indefinitely\n      const memoize: PaneResolverMiddleware = (nextFn) => (unresolvedPane, context, flatIndex) => {\n        const key = unresolvedPane && `${assignId(unresolvedPane)}-${hashContext(context)}`\n        const cachedResolvedPane = key && resolvedPaneCache.get(key)\n        if (cachedResolvedPane) return cachedResolvedPane\n\n        const result = nextFn(unresolvedPane, context, flatIndex)\n        if (!key) return result\n\n        const cacheKeySet = cacheKeysByFlatIndex[flatIndex] || new Set()\n        cacheKeySet.add(key)\n        cacheKeysByFlatIndex[flatIndex] = cacheKeySet\n        resolvedPaneCache.set(key, result)\n        return result\n      }\n\n      return {\n        flattenedRouterPanes,\n        cacheKeysByFlatIndex,\n        resolvedPaneCache,\n        resolvePane: createPaneResolver(memoize),\n      }\n    }, initialCacheState),\n    // run the memoized, recursive resolving\n    switchMap(({flattenedRouterPanes, resolvePane}) =>\n      resolvePaneTree({\n        unresolvedPane: rootPaneNode,\n        flattenedRouterPanes,\n        parent: null,\n        path: [],\n        resolvePane,\n        structureContext,\n      })\n    )\n  )\n\n  // after we've created a stream of `ResolvedPaneMeta[]`, we need to clean up\n  // the results to remove unwanted loading panes and prevent unnecessary\n  // emissions\n  return resolvedPanes$.pipe(\n    // this diffs the previous emission with the current one. if there is a new\n    // loading pane at the same position where a previous pane already had a\n    // resolved value (looking at the IDs to compare), then return the previous\n    // pane instead of the loading pane\n    scan(\n      (prev, next) =>\n        next.map((nextPane, index) => {\n          const prevPane = prev[index] as ResolvedPaneMeta | undefined\n          if (!prevPane) return nextPane\n          if (nextPane.type !== 'loading') return nextPane\n\n          if (prevPane.routerPaneSibling.id === nextPane.routerPaneSibling.id) {\n            return prevPane\n          }\n          return nextPane\n        }),\n      [] as ResolvedPaneMeta[]\n    ),\n    // this prevents duplicate emissions\n    distinctUntilChanged((prev, next) => {\n      if (prev.length !== next.length) return false\n\n      for (let i = 0; i < next.length; i++) {\n        const prevValue = prev[i]\n        const nextValue = next[i]\n        if (hashResolvedPaneMeta(prevValue) !== hashResolvedPaneMeta(nextValue)) {\n          return false\n        }\n      }\n\n      return true\n    })\n  )\n}\n","import {useEffect, useMemo, useState} from 'react'\nimport {ReplaySubject} from 'rxjs'\nimport {map} from 'rxjs/operators'\nimport {RouterState, useRouter} from '../../router'\nimport {LOADING_PANE} from '../constants'\nimport {RouterPanes, PaneNode, RouterPaneGroup} from '../types'\nimport {useDeskTool} from '../useDeskTool'\nimport {createResolvedPaneNodeStream} from './createResolvedPaneNodeStream'\n\ninterface PaneData {\n  active: boolean\n  childItemId: string | null\n  groupIndex: number\n  index: number\n  itemId: string\n  key: string\n  pane: PaneNode | typeof LOADING_PANE\n  params: Record<string, string | undefined>\n  path: string\n  payload: unknown\n  selected: boolean\n  siblingIndex: number\n}\n\ninterface Panes {\n  paneDataItems: PaneData[]\n  routerPanes: RouterPanes\n  resolvedPanes: (PaneNode | typeof LOADING_PANE)[]\n}\n\nfunction useRouterPanesStream() {\n  const routerStateSubject = useMemo(() => new ReplaySubject<RouterState>(1), [])\n  const routerPanes$ = useMemo(\n    () =>\n      routerStateSubject\n        .asObservable()\n        .pipe(map((_routerState) => (_routerState?.panes || []) as RouterPanes)),\n    [routerStateSubject]\n  )\n  const {state: routerState} = useRouter()\n  useEffect(() => {\n    routerStateSubject.next(routerState)\n  }, [routerState, routerStateSubject])\n\n  return routerPanes$\n}\n\nexport function useResolvedPanes(): Panes {\n  // used to propagate errors from async effect. throwing inside of the render\n  // will bubble the error to react where it can be picked up by standard error\n  // boundaries\n  const [error, setError] = useState<unknown>()\n  if (error) throw error\n\n  const {structureContext, rootPaneNode} = useDeskTool()\n\n  const [data, setData] = useState<Panes>({\n    paneDataItems: [],\n    resolvedPanes: [],\n    routerPanes: [],\n  })\n\n  const routerPanesStream = useRouterPanesStream()\n\n  useEffect(() => {\n    const resolvedPanes$ = createResolvedPaneNodeStream({\n      rootPaneNode,\n      routerPanesStream,\n      structureContext,\n    }).pipe(\n      map((resolvedPanes) => {\n        const routerPanes = resolvedPanes.reduce<RouterPanes>((acc, next) => {\n          const currentGroup = acc[next.groupIndex] || []\n          currentGroup[next.siblingIndex] = next.routerPaneSibling\n          acc[next.groupIndex] = currentGroup\n          return acc\n        }, [])\n\n        const groupsLen = routerPanes.length\n\n        const paneDataItems = resolvedPanes.map((pane) => {\n          const {groupIndex, flatIndex, siblingIndex, routerPaneSibling, path} = pane\n          const itemId = routerPaneSibling.id\n          const nextGroup = routerPanes[groupIndex + 1] as RouterPaneGroup | undefined\n\n          const paneDataItem: PaneData = {\n            active: groupIndex === groupsLen - 2,\n            childItemId: nextGroup?.[0].id ?? null,\n            index: flatIndex,\n            itemId: routerPaneSibling.id,\n            groupIndex,\n            key: `${\n              pane.type === 'loading' ? 'unknown' : pane.paneNode.id\n            }-${itemId}-${siblingIndex}`,\n            pane: pane.type === 'loading' ? LOADING_PANE : pane.paneNode,\n            params: routerPaneSibling.params || {},\n            path: path.join(';'),\n            payload: routerPaneSibling.payload,\n            selected: flatIndex === resolvedPanes.length - 1,\n            siblingIndex,\n          }\n\n          return paneDataItem\n        })\n\n        return {\n          paneDataItems,\n          routerPanes,\n          resolvedPanes: paneDataItems.map((pane) => pane.pane),\n        }\n      })\n    )\n\n    const subscription = resolvedPanes$.subscribe({\n      next: (result) => setData(result),\n      error: (e) => setError(e),\n    })\n\n    return () => subscription.unsubscribe()\n  }, [rootPaneNode, routerPanesStream, structureContext])\n\n  return data\n}\n","import React, {useEffect, useState} from 'react'\n\nexport function Delay({\n  children,\n  ms = 0,\n}: {\n  children?: React.ReactElement | (() => React.ReactElement)\n  ms?: number\n}): React.ReactElement {\n  const [ready, setReady] = useState(ms <= 0)\n\n  useEffect(() => {\n    if (ms <= 0) {\n      return undefined\n    }\n\n    const timeoutId = setTimeout(() => setReady(true), ms)\n\n    return () => {\n      clearTimeout(timeoutId)\n    }\n  }, [ms])\n\n  if (!ready || !children) {\n    return <></>\n  }\n\n  return typeof children === 'function' ? children() : children\n}\n","import {generateHelpUrl} from '@sanity/generate-help-url'\nimport {Box, Button, Card, Code, Container, Heading, Label, Stack, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport styled from 'styled-components'\nimport {SyncIcon} from '@sanity/icons'\nimport {SerializeError} from '../../structureBuilder'\nimport {PaneResolutionError} from '../../structureResolvers'\n\nconst PathSegment = styled.span`\n  &:not(:last-child)::after {\n    content: ' ➝ ';\n    opacity: 0.5;\n  }\n`\n\nfunction formatStack(stack: string) {\n  return (\n    stack\n      // Prettify builder functions\n      .replace(/\\(\\.\\.\\.\\)\\./g, '(...)\\n  .')\n      // Remove webpack cruft from function names\n      .replace(/__WEBPACK_IMPORTED_MODULE_\\d+_+/g, '')\n      // Remove default export postfix from function names\n      .replace(/___default\\./g, '.')\n      // Replace full host path, leave only path to JS-file\n      .replace(new RegExp(` \\\\(https?:\\\\/\\\\/${window.location.host}`, 'g'), ' (')\n  )\n}\n\ninterface StructureErrorProps {\n  error: unknown\n}\n\nexport function StructureError({error}: StructureErrorProps) {\n  if (!(error instanceof PaneResolutionError)) {\n    throw error\n  }\n  const {cause} = error\n\n  // Serialize errors are well-formatted and should be readable, in these cases a stack trace is\n  // usually not helpful. Build errors in dev (with HMR) usually also contains a bunch of garbage\n  // instead of an actual error message, so make sure we show the message in these cases as well\n  const stack = cause?.stack || error.stack\n  const showStack =\n    stack && !(cause instanceof SerializeError) && !error.message.includes('Module build failed:')\n\n  const path = cause instanceof SerializeError ? cause.path : []\n  const helpId = (cause instanceof SerializeError && cause.helpId) || error.helpId\n\n  const handleReload = useCallback(() => {\n    window.location.reload()\n  }, [])\n\n  return (\n    <Card height=\"fill\" overflow=\"auto\" padding={4} sizing=\"border\" tone=\"critical\">\n      <Container>\n        <Heading as=\"h2\">Encountered an error while reading structure</Heading>\n\n        <Card marginTop={4} padding={4} radius={2} overflow=\"auto\" shadow={1} tone=\"inherit\">\n          {path.length > 0 && (\n            <Stack space={2}>\n              <Label>Structure path</Label>\n              <Code>\n                {/* TODO: it seems like the path is off by one and includes */}\n                {/* `root` twice  */}\n                {path.slice(1).map((segment, i) => (\n                  // eslint-disable-next-line react/no-array-index-key\n                  <PathSegment key={`${segment}-${i}`}>{segment}</PathSegment>\n                ))}\n              </Code>\n            </Stack>\n          )}\n\n          <Stack marginTop={4} space={2}>\n            <Label>Error</Label>\n            <Code>{showStack ? formatStack(stack) : error.message}</Code>\n          </Stack>\n\n          {helpId && (\n            <Box marginTop={4}>\n              <Text>\n                <a href={generateHelpUrl(helpId)} rel=\"noopener noreferrer\" target=\"_blank\">\n                  View documentation\n                </a>\n              </Text>\n            </Box>\n          )}\n\n          <Box marginTop={4}>\n            <Button text=\"Reload\" icon={SyncIcon} tone=\"primary\" onClick={handleReload} />\n          </Box>\n        </Card>\n      </Container>\n    </Card>\n  )\n}\n","import {createContext} from 'react'\nimport {PaneRouterContextValue} from './types'\n\nfunction missingContext<T = unknown>(): T {\n  throw new Error('Pane is missing router context')\n}\n\n/**\n * @public\n */\nexport const PaneRouterContext = createContext<PaneRouterContextValue>({\n  index: 0,\n  groupIndex: 0,\n  siblingIndex: 0,\n  payload: undefined,\n  params: {},\n  hasGroupSiblings: false,\n  groupLength: 0,\n  routerPanesState: [],\n  BackLink: () => missingContext(),\n  ChildLink: () => missingContext(),\n  ReferenceChildLink: () => missingContext(),\n  handleEditReference: () => missingContext(),\n  ParameterizedLink: () => missingContext(),\n  replaceCurrent: () => missingContext(),\n  closeCurrent: () => missingContext(),\n  duplicateCurrent: () => missingContext(),\n  setView: () => missingContext(),\n  setParams: () => missingContext(),\n  setPayload: () => missingContext(),\n  navigateIntent: () => missingContext(),\n})\n","import React, {forwardRef, useContext, useMemo} from 'react'\nimport {StateLink} from '../../../router'\nimport {PaneRouterContext} from './PaneRouterContext'\nimport {BackLinkProps} from './types'\n\n/**\n * @internal\n */\nexport const BackLink = forwardRef(function BackLink(\n  props: BackLinkProps,\n  ref: React.ForwardedRef<HTMLAnchorElement>\n) {\n  const {routerPanesState, groupIndex} = useContext(PaneRouterContext)\n  const panes = useMemo(() => routerPanesState.slice(0, groupIndex), [groupIndex, routerPanesState])\n  const state = useMemo(() => ({panes}), [panes])\n\n  return <StateLink {...props} ref={ref} state={state} />\n}) as React.ComponentType<BackLinkProps>\n","import React, {forwardRef, useContext} from 'react'\nimport {StateLink} from '../../../router'\nimport {PaneRouterContext} from './PaneRouterContext'\nimport {ChildLinkProps} from './types'\n\n/**\n * @internal\n */\nexport const ChildLink = forwardRef(function ChildLink(\n  props: ChildLinkProps,\n  ref: React.ForwardedRef<HTMLAnchorElement>\n) {\n  const {childId, childPayload, childParameters, ...rest} = props\n  const {routerPanesState, groupIndex} = useContext(PaneRouterContext)\n\n  return (\n    <StateLink\n      {...rest}\n      ref={ref}\n      state={{\n        panes: [\n          ...routerPanesState.slice(0, groupIndex + 1),\n          [{id: childId, params: childParameters, payload: childPayload}],\n        ],\n      }}\n    />\n  )\n})\n","import React, {forwardRef} from 'react'\nimport {toString as pathToString} from '@sanity/util/paths'\nimport {ChildLink} from './ChildLink'\nimport {ReferenceChildLinkProps} from './types'\n\nexport const ReferenceChildLink = forwardRef(function ReferenceChildLink(\n  {documentId, documentType, parentRefPath, children, template, ...rest}: ReferenceChildLinkProps,\n  ref: React.ForwardedRef<HTMLAnchorElement>\n) {\n  return (\n    <ChildLink\n      {...rest}\n      ref={ref}\n      childId={documentId}\n      childPayload={template?.params}\n      childParameters={{\n        type: documentType,\n        parentRefPath: pathToString(parentRefPath),\n        ...(template && {template: template?.id}),\n      }}\n    >\n      {children}\n    </ChildLink>\n  )\n})\n","import React, {forwardRef, useContext, useMemo} from 'react'\nimport {StateLink} from '../../../router'\nimport {useUnique} from '../../../util'\nimport {PaneRouterContext} from './PaneRouterContext'\n\ninterface ParameterizedLinkProps {\n  params?: Record<string, string>\n  payload?: unknown\n  children?: React.ReactNode\n}\n\n/**\n * @internal\n */\nexport const ParameterizedLink = forwardRef(function ParameterizedLink(\n  props: ParameterizedLinkProps,\n  ref: React.ForwardedRef<HTMLAnchorElement>\n) {\n  const {routerPanesState: currentPanes, groupIndex, siblingIndex} = useContext(PaneRouterContext)\n  const {params, payload, ...rest} = props\n  const nextParams = useUnique(params)\n  const nextPayload = useUnique(payload)\n\n  const nextState = useMemo(() => {\n    const currentGroup = currentPanes[groupIndex]\n    const currentSibling = currentGroup[siblingIndex]\n\n    const nextSibling = {\n      ...currentSibling,\n      params: nextParams ?? currentSibling.params,\n      payload: nextPayload ?? currentSibling.payload,\n    }\n\n    const nextGroup = [\n      ...currentGroup.slice(0, siblingIndex),\n      nextSibling,\n      ...currentGroup.slice(siblingIndex + 1),\n    ]\n\n    const nextPanes = [\n      ...currentPanes.slice(0, groupIndex),\n      nextGroup,\n      ...currentPanes.slice(groupIndex + 1),\n    ]\n\n    return {panes: nextPanes}\n  }, [currentPanes, groupIndex, nextParams, nextPayload, siblingIndex])\n\n  return <StateLink ref={ref} {...rest} state={nextState} />\n})\n","import {omit} from 'lodash'\nimport React, {useCallback, useMemo} from 'react'\nimport {toString as pathToString} from '@sanity/util/paths'\nimport {RouterPaneGroup, RouterPanes, RouterPaneSibling} from '../../types'\nimport {useRouter, useRouterState} from '../../../router'\nimport {ChildLink} from './ChildLink'\nimport {BackLink} from './BackLink'\nimport {ReferenceChildLink} from './ReferenceChildLink'\nimport {PaneRouterContext} from './PaneRouterContext'\nimport {ParameterizedLink} from './ParameterizedLink'\nimport {PaneRouterContextValue} from './types'\n\nconst emptyArray: never[] = []\n\n/**\n * @internal\n */\nexport function PaneRouterProvider(props: {\n  children: React.ReactNode\n  flatIndex: number\n  index: number\n  params: Record<string, string | undefined>\n  payload: unknown\n  siblingIndex: number\n}) {\n  const {children, flatIndex, index, params, payload, siblingIndex} = props\n  const {navigate, navigateIntent} = useRouter()\n  const routerState = useRouterState()\n  const routerPaneGroups: RouterPaneGroup[] = useMemo(\n    () => (routerState?.panes || emptyArray) as RouterPanes,\n    [routerState?.panes]\n  )\n\n  const groupIndex = index - 1\n\n  const modifyCurrentGroup = useCallback(\n    (modifier: (siblings: RouterPaneGroup, item: RouterPaneSibling) => RouterPaneGroup) => {\n      const currentGroup = routerPaneGroups[groupIndex] || []\n      const currentItem = currentGroup[siblingIndex]\n      const nextGroup = modifier(currentGroup, currentItem)\n      const nextPanes = [\n        ...routerPaneGroups.slice(0, groupIndex),\n        nextGroup,\n        ...routerPaneGroups.slice(groupIndex + 1),\n      ]\n      const nextRouterState = {...(routerState || {}), panes: nextPanes}\n\n      setTimeout(() => navigate(nextRouterState), 0)\n\n      return nextRouterState\n    },\n    [groupIndex, navigate, routerPaneGroups, routerState, siblingIndex]\n  )\n\n  const setPayload: PaneRouterContextValue['setPayload'] = useCallback(\n    (nextPayload) => {\n      modifyCurrentGroup((siblings, item) => [\n        ...siblings.slice(0, siblingIndex),\n        {...item, payload: nextPayload},\n        ...siblings.slice(siblingIndex + 1),\n      ])\n    },\n    [modifyCurrentGroup, siblingIndex]\n  )\n\n  const setParams: PaneRouterContextValue['setParams'] = useCallback(\n    (nextParams) => {\n      modifyCurrentGroup((siblings, item) => [\n        ...siblings.slice(0, siblingIndex),\n        {...item, params: nextParams},\n        ...siblings.slice(siblingIndex + 1),\n      ])\n    },\n    [modifyCurrentGroup, siblingIndex]\n  )\n\n  const handleEditReference: PaneRouterContextValue['handleEditReference'] = useCallback(\n    ({id, parentRefPath, type, template}) => {\n      navigate({\n        panes: [\n          ...routerPaneGroups.slice(0, groupIndex + 1),\n          [\n            {\n              id,\n              params: {template: template.id, parentRefPath: pathToString(parentRefPath), type},\n              payload: template.params,\n            },\n          ],\n        ],\n      })\n    },\n    [groupIndex, navigate, routerPaneGroups]\n  )\n\n  const ctx: PaneRouterContextValue = useMemo(\n    () => ({\n      // Zero-based index (position) of pane, visually\n      index: flatIndex,\n\n      // Zero-based index of pane group (within URL structure)\n      groupIndex,\n\n      // Zero-based index of pane within sibling group\n      siblingIndex,\n\n      // Payload of the current pane\n      payload,\n\n      // Params of the current pane\n      params,\n\n      // Whether or not the pane has any siblings (within the same group)\n      hasGroupSiblings: routerPaneGroups[groupIndex]\n        ? routerPaneGroups[groupIndex].length > 1\n        : false,\n\n      // The length of the current group\n      groupLength: routerPaneGroups[groupIndex] ? routerPaneGroups[groupIndex].length : 0,\n\n      // Current router state for the \"panes\" property\n      routerPanesState: routerPaneGroups,\n\n      // Curried StateLink that passes the correct state automatically\n      ChildLink,\n\n      // Curried StateLink that pops off the last pane group\n      BackLink,\n\n      // A specialized `ChildLink` that takes in the needed props to open a\n      // referenced document to the right\n      ReferenceChildLink,\n\n      // Similar to `ReferenceChildLink` expect without the wrapping component\n      handleEditReference,\n\n      // Curried StateLink that passed the correct state, but merges params/payload\n      ParameterizedLink,\n\n      // Replaces the current pane with a new one\n      replaceCurrent: (opts = {}): void => {\n        modifyCurrentGroup(() => [\n          {id: opts.id || '', payload: opts.payload, params: opts.params || {}},\n        ])\n      },\n\n      // Removes the current pane from the group\n      closeCurrent: (): void => {\n        modifyCurrentGroup((siblings, item) =>\n          siblings.length > 1 ? siblings.filter((sibling) => sibling !== item) : siblings\n        )\n      },\n\n      // Duplicate the current pane, with optional overrides for payload, parameters\n      duplicateCurrent: (options): void => {\n        modifyCurrentGroup((siblings, item) => {\n          const duplicatedItem = {\n            ...item,\n            payload: options?.payload || item.payload,\n            params: options?.params || item.params,\n          }\n\n          return [\n            ...siblings.slice(0, siblingIndex),\n            duplicatedItem,\n            ...siblings.slice(siblingIndex),\n          ]\n        })\n      },\n\n      // Set the view for the current pane\n      setView: (viewId) => {\n        const restParams = omit(params, 'view')\n        return setParams(viewId ? {...restParams, view: viewId} : restParams)\n      },\n\n      // Set the parameters for the current pane\n      setParams,\n\n      // Set the payload for the current pane\n      setPayload,\n\n      // Proxied navigation to a given intent. Consider just exposing `router` instead?\n      navigateIntent,\n    }),\n    [\n      flatIndex,\n      groupIndex,\n      handleEditReference,\n      modifyCurrentGroup,\n      navigateIntent,\n      params,\n      payload,\n      routerPaneGroups,\n      setParams,\n      setPayload,\n      siblingIndex,\n    ]\n  )\n\n  return <PaneRouterContext.Provider value={ctx}>{children}</PaneRouterContext.Provider>\n}\n","import {useContext} from 'react'\nimport {PaneRouterContext} from './PaneRouterContext'\nimport {PaneRouterContextValue} from './types'\n\n/**\n * @public\n */\nexport function usePaneRouter(): PaneRouterContextValue {\n  return useContext(PaneRouterContext)\n}\n","import {Box, Text} from '@sanity/ui'\nimport React from 'react'\nimport {isRecord} from '../../../util'\nimport {Pane, PaneContent, PaneHeader} from '../../components/pane'\n\ninterface UnknownPaneProps {\n  isSelected: boolean\n  pane: unknown\n  paneKey: string\n}\n\n/**\n * @internal\n */\nexport function UnknownPane(props: UnknownPaneProps) {\n  const {isSelected, pane, paneKey} = props\n  const type = (isRecord(pane) && pane.type) || null\n\n  return (\n    <Pane id={paneKey} selected={isSelected}>\n      <PaneHeader title=\"Unknown pane type\" />\n      <PaneContent>\n        <Box padding={4}>\n          {typeof type === 'string' ? (\n            <Text as=\"p\" muted>\n              Structure item of type <code>{type}</code> is not a known entity.\n            </Text>\n          ) : (\n            <Text as=\"p\" muted>\n              Structure item is missing required <code>type</code> property.\n            </Text>\n          )}\n        </Box>\n      </PaneContent>\n    </Pane>\n  )\n}\n","import {Observable, of, merge} from 'rxjs'\nimport {mapTo, delay} from 'rxjs/operators'\nimport {isDev} from '../../../environment'\n\n/**\n * @internal\n */\nexport function getWaitMessages(path: string[]): Observable<string> {\n  const thresholds = [\n    {ms: 300, message: 'Loading…'},\n    {ms: 5000, message: 'Still loading…'},\n  ]\n\n  if (isDev) {\n    const message = [\n      'Check console for errors?',\n      'Is your observable/promise resolving?',\n      path.length > 0 ? `Structure path: ${path.join(' ➝ ')}` : '',\n    ]\n\n    thresholds.push({\n      ms: 10000,\n      message: message.join('\\n'),\n    })\n  }\n\n  const src = of(null)\n\n  return merge(...thresholds.map(({ms, message}) => src.pipe(mapTo(message), delay(ms))))\n}\n","import {Box, CardTone, Flex, Spinner, Text, _raf2} from '@sanity/ui'\nimport React, {memo, useMemo, useState, useEffect} from 'react'\nimport {Observable} from 'rxjs'\nimport styled from 'styled-components'\nimport {Delay} from '../../components/Delay'\nimport {Pane, PaneContent} from '../../components/pane'\nimport {getWaitMessages} from './getWaitMessages'\n\ninterface LoadingPaneProps {\n  delay?: number\n  flex?: number\n  message?: string | ((p: string[]) => string | Observable<string>)\n  minWidth?: number\n  paneKey: string\n  path?: string\n  selected?: boolean\n  title?: string\n  tone?: CardTone\n}\n\nconst DELAY = false\nconst DEFAULT_MESSAGE = 'Loading…'\n\nconst Content = styled(Flex)`\n  opacity: 0;\n  transition: opacity 200ms;\n\n  &[data-mounted] {\n    opacity: 1;\n  }\n`\n\n/**\n * @internal\n */\nexport const LoadingPane = memo((props: LoadingPaneProps) => {\n  const {\n    delay = 300,\n    flex,\n    message: messageProp = getWaitMessages,\n    minWidth,\n    paneKey,\n    path,\n    selected,\n    title,\n    tone,\n  } = props\n\n  const resolvedMessage = useMemo(() => {\n    if (typeof messageProp === 'function') {\n      return messageProp(path ? path.split(';') : [])\n    }\n\n    return messageProp\n  }, [messageProp, path])\n\n  const [currentMessage, setCurrentMessage] = useState<string | null>(() => {\n    if (typeof resolvedMessage === 'string') return resolvedMessage\n    return DEFAULT_MESSAGE\n  })\n\n  useEffect(() => {\n    if (typeof resolvedMessage !== 'object') return undefined\n    if (typeof resolvedMessage.subscribe === 'function') return undefined\n\n    const sub = resolvedMessage.subscribe(setCurrentMessage)\n\n    return () => sub.unsubscribe()\n  }, [resolvedMessage])\n\n  const [contentElement, setContentElement] = useState<HTMLDivElement | null>(null)\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => {\n    if (!contentElement) return undefined\n    return _raf2(() => setMounted(true))\n  }, [contentElement])\n\n  const content = (\n    <Content\n      align=\"center\"\n      data-mounted={mounted ? '' : undefined}\n      direction=\"column\"\n      height=\"fill\"\n      justify=\"center\"\n      ref={setContentElement}\n    >\n      <Spinner muted />\n\n      {(title || currentMessage) && (\n        <Box marginTop={3}>\n          <Text align=\"center\" muted size={1}>\n            {title || currentMessage}\n          </Text>\n        </Box>\n      )}\n    </Content>\n  )\n\n  return (\n    <Pane flex={flex} id={paneKey} minWidth={minWidth} selected={selected} tone={tone}>\n      <PaneContent>{DELAY ? <Delay ms={delay}>{content}</Delay> : content}</PaneContent>\n    </Pane>\n  )\n})\n\nLoadingPane.displayName = 'LoadingPane'\n","import React, {memo, lazy, Suspense} from 'react'\nimport {isEqual} from 'lodash'\nimport {PaneNode} from '../types'\nimport {PaneRouterProvider} from '../components/paneRouter'\nimport {UnknownPane} from './unknown'\nimport {LoadingPane} from './loading'\n\ninterface DeskToolPaneProps {\n  active: boolean\n  childItemId: string | null\n  groupIndex: number\n  index: number\n  itemId: string\n  pane: PaneNode\n  paneKey: string\n  params: Record<string, string | undefined>\n  payload: unknown\n  selected: boolean\n  siblingIndex: number\n}\n\n// TODO: audit this creates separate chunks\nconst paneMap = {\n  component: lazy(() => import('./userComponent')),\n  document: lazy(() => import('./document')),\n  documentList: lazy(() => import('./documentList')),\n  list: lazy(() => import('./list')),\n}\n\n/**\n * NOTE: The same pane might appear multiple times (split pane), so use index as tiebreaker\n *\n * @internal\n */\nexport const DeskToolPane = memo(\n  function DeskToolPane(props: DeskToolPaneProps) {\n    const {\n      active,\n      childItemId,\n      groupIndex,\n      index,\n      itemId,\n      pane,\n      paneKey,\n      params,\n      payload,\n      selected,\n      siblingIndex,\n    } = props\n\n    const PaneComponent = paneMap[pane.type] || UnknownPane\n\n    return (\n      <PaneRouterProvider\n        flatIndex={index}\n        index={groupIndex}\n        params={params}\n        payload={payload}\n        siblingIndex={siblingIndex}\n      >\n        <Suspense fallback={<LoadingPane paneKey={paneKey} />}>\n          <PaneComponent\n            childItemId={childItemId || ''}\n            index={index}\n            itemId={itemId}\n            isActive={active}\n            isSelected={selected}\n            paneKey={paneKey}\n            // @ts-expect-error TS doesn't know how to handle this intersection\n            pane={pane}\n          />\n        </Suspense>\n      </PaneRouterProvider>\n    )\n  },\n  (\n    {params: prevParams = {}, payload: prevPayload = null, ...prev},\n    {params: nextParams = {}, payload: nextPayload = null, ...next}\n  ) => {\n    // deeply compare these objects (it's okay, they're small)\n    if (!isEqual(prevParams, nextParams)) return false\n    if (!isEqual(prevPayload, nextPayload)) return false\n\n    const keys = new Set([...Object.keys(prev), ...Object.keys(next)]) as Set<\n      keyof typeof next | keyof typeof prev\n    >\n\n    // then shallow equal the rest\n    for (const key of keys) {\n      if (prev[key] !== next[key]) return false\n    }\n\n    return true\n  }\n)\n","import React from 'react'\nimport {Box, CardTone} from '@sanity/ui'\nimport {Pane, PaneContent, PaneHeader} from '../../components/pane'\n\n/**\n * @internal\n */\nexport function ErrorPane(props: {\n  children?: React.ReactNode\n  flex?: number\n  minWidth?: number\n  paneKey: string\n  title?: React.ReactNode\n  tone?: CardTone\n}) {\n  const {children, flex, minWidth, paneKey, title = 'Error', tone = 'critical'} = props\n\n  return (\n    <Pane flex={flex} id={paneKey} minWidth={minWidth} tone={tone}>\n      <PaneHeader title={title} />\n      <PaneContent overflow=\"auto\">\n        <Box paddingX={4} paddingY={5}>\n          {children}\n        </Box>\n      </PaneContent>\n    </Pane>\n  )\n}\n","// Toggle tracking of change indicator DOM positions and connectors overlay rendering\nexport const ENABLED = true\n\nexport const CORNER_RADIUS = 4\n\nexport const INTERACTIVE_STROKE_WIDTH = 16\n\nexport const CONNECTOR_MARGIN = 8\nexport const ARROW_MARGIN_X = 8\nexport const ARROW_MARGIN_Y = 2\nexport const ARROW_SIZE = 4\nexport const ARROW_THRESHOLD = 12\nexport const STROKE_WIDTH = 2\n\nexport const DEBUG = false\nexport const DEBUG_LAYER_BOUNDS = DEBUG || false\n","import {Path} from '@sanity/types'\nimport {createScope} from '../react-track-elements'\nimport {ENABLED} from './constants'\nimport {createNoopTracker} from './noop-tracker'\n\nexport interface TrackedChange {\n  element: HTMLElement\n  path: Path\n  isChanged: boolean\n  hasFocus: boolean\n  hasHover: boolean\n  hasRevertHover: boolean\n  zIndex: number\n}\n\nexport interface TrackedArea {\n  element: HTMLElement\n}\n\nconst {Tracker, useReportedValues, useReporter} = ENABLED\n  ? createScope<TrackedChange | TrackedArea>()\n  : createNoopTracker<TrackedChange | TrackedArea>()\n\nexport {Tracker, useReportedValues, useReporter}\n","import {createContext} from 'react'\nimport {Path} from '@sanity/types'\n\nexport interface ConnectorContextValue {\n  isReviewChangesOpen: boolean\n  onOpenReviewChanges: () => void | undefined\n  onSetFocus: (nextPath: Path) => void | undefined\n}\n\nexport const ConnectorContext = createContext<ConnectorContextValue>({\n  isReviewChangesOpen: false,\n  onOpenReviewChanges: () => undefined,\n  onSetFocus: () => undefined,\n} as ConnectorContextValue)\n","import * as PathUtils from '@sanity/util/paths'\nimport React, {SyntheticEvent, useCallback} from 'react'\nimport {Path} from '@sanity/types'\nimport deepCompare from 'react-fast-compare'\nimport {useReporter} from './tracker'\nimport {ConnectorContext} from './ConnectorContext'\n\n/**\n * This is used to draw the bar that wraps the diff components in the changes panel\n */\nexport const ChangeFieldWrapper = (props: {\n  path: Path\n  children: React.ReactNode\n  hasHover: boolean\n}) => {\n  const ref = React.useRef<HTMLDivElement>(null)\n  const {onSetFocus} = React.useContext(ConnectorContext)\n  const [isHover, setHover] = React.useState(false)\n\n  const onMouseEnter = React.useCallback(() => {\n    setHover(true)\n  }, [])\n\n  const onMouseLeave = React.useCallback(() => {\n    setHover(false)\n  }, [])\n\n  useReporter(\n    `change-${PathUtils.toString(props.path)}`,\n    () => ({\n      element: ref.current!,\n      path: props.path,\n      isChanged: true,\n      hasFocus: false,\n      hasHover: isHover,\n      hasRevertHover: props.hasHover,\n    }),\n    // note: deepCompare should be ok here since we're not comparing deep values\n    deepCompare\n  )\n\n  const handleClick = useCallback(\n    (event: SyntheticEvent) => {\n      setFocusWithStopPropagation(event, onSetFocus, props.path)\n    },\n    [onSetFocus, props.path]\n  )\n\n  return (\n    <div ref={ref} onClick={handleClick} onMouseLeave={onMouseLeave} onMouseEnter={onMouseEnter}>\n      {props.children}\n    </div>\n  )\n}\n\n// Stop the propagation here, or it will trigger the parent diff component's onClick.\nfunction setFocusWithStopPropagation(\n  event: React.SyntheticEvent,\n  onSetFocus: (toPath: Path) => void,\n  path: Path\n): void {\n  event.stopPropagation()\n  onSetFocus(path)\n}\n","export const EMPTY_OBJECT: Record<string, unknown> = Object.freeze({})\nexport const EMPTY_ARRAY: never[] = Object.freeze([]) as never[]\n","import styled, {css} from 'styled-components'\nimport {Theme} from '@sanity/ui'\n\ninterface ThemeContext {\n  theme: Theme\n}\n\ninterface RootProps {\n  focus: boolean\n  hover: boolean\n  changed?: boolean\n  isReviewChangeOpen: boolean\n  disabled?: boolean\n  $withHoverEffect?: boolean\n}\n\nconst animationSpeed = 250\n\nexport const ChangeBarWrapper = styled.div(({changed, disabled, isReviewChangeOpen}: RootProps) => {\n  if (disabled)\n    return css`\n      ${ChangeBar} {\n        display: none;\n      }\n    `\n\n  return css`\n    --change-bar-offset: 2px;\n\n    display: flex;\n    position: relative;\n\n    @media (hover: hover) {\n      &:hover {\n        z-index: 10;\n      }\n    }\n\n    /* hide when field is not changed */\n    ${!changed &&\n    css`\n      ${ChangeBar} {\n        opacity: 0;\n        pointer-events: none;\n      }\n    `}\n\n    /* hide hover effect when review changes is open */\n    ${isReviewChangeOpen &&\n    css`\n      ${ChangeBarButton} {\n        opacity: 0;\n      }\n    `}\n  `\n})\n\nexport const FieldWrapper = styled.div`\n  flex-grow: 1;\n  min-width: 0;\n`\n\nexport const ChangeBar = styled.div<{$zIndex: number}>`\n  position: relative;\n  opacity: 1;\n  transition: opacity 100ms;\n  z-index: ${({$zIndex}) => $zIndex};\n`\n\nexport const ChangeBarMarker = styled.div(({theme}: ThemeContext) => {\n  /* these colours aren't freely available on the current theme */\n  const notSelectedColor = theme.sanity.color.spot.yellow\n  const screenMedium = theme.sanity.media[0]\n\n  return css`\n    position: absolute;\n    top: 0;\n    left: var(--change-bar-offset);\n    width: 2px;\n    bottom: 0;\n    background-color: ${notSelectedColor};\n    border-radius: 1px;\n\n    @media (min-width: ${screenMedium}px) {\n      display: unset;\n    }\n  `\n})\n\nexport const ChangeBarButton = styled.button(\n  ({theme, $withHoverEffect}: {theme: Theme; $withHoverEffect?: boolean}) => {\n    /* these colours aren't freely available on the current theme */\n    const notSelectedColor = theme.sanity.color.spot.yellow\n\n    return css`\n      appearance: none;\n      border: 0;\n      outline: 0;\n      display: block;\n      padding: 0;\n      background: transparent;\n      opacity: 0;\n      position: absolute;\n      height: 100%;\n      cursor: pointer;\n      pointer-events: all;\n      left: calc(-0.25rem + var(--change-bar-offset));\n      width: 1rem;\n      transition: opacity ${animationSpeed}ms;\n\n      &:focus {\n        border: 0;\n        outline: 0;\n      }\n\n      &:after {\n        content: '';\n        width: 16px;\n        height: calc(100% + 14px);\n        display: block;\n        position: absolute;\n        top: -7px;\n        left: -3px;\n        border-radius: 8px;\n        background: ${notSelectedColor};\n      }\n\n      &:focus {\n        border: 0;\n        outline: 0;\n      }\n\n      ${$withHoverEffect &&\n      css`\n        @media (hover: hover) {\n          &:hover {\n            opacity: 0.2;\n          }\n        }\n      `}\n    `\n  }\n)\n","import {useLayer} from '@sanity/ui'\nimport React, {useCallback, useMemo, useState} from 'react'\nimport {ConnectorContext} from './ConnectorContext'\nimport {\n  ChangeBarWrapper,\n  FieldWrapper,\n  ChangeBar,\n  ChangeBarMarker,\n  ChangeBarButton,\n} from './ElementWithChangeBar.styled'\n\nexport function ElementWithChangeBar(props: {\n  children: React.ReactNode\n  disabled?: boolean\n  hasFocus: boolean\n  isChanged?: boolean\n  withHoverEffect?: boolean\n}) {\n  const {children, disabled, hasFocus, isChanged, withHoverEffect = true} = props\n\n  const [hover, setHover] = useState(false)\n  const {onOpenReviewChanges, isReviewChangesOpen} = React.useContext(ConnectorContext)\n  const {zIndex} = useLayer()\n\n  const handleMouseEnter = useCallback(() => setHover(true), [])\n  const handleMouseLeave = useCallback(() => setHover(false), [])\n\n  const changeBar = useMemo(\n    () =>\n      disabled || !isChanged ? null : (\n        <ChangeBar data-testid=\"change-bar\" $zIndex={zIndex}>\n          <ChangeBarMarker data-testid=\"change-bar__marker\" />\n\n          <ChangeBarButton\n            aria-label=\"Review changes\"\n            data-testid=\"change-bar__button\"\n            onClick={isReviewChangesOpen ? undefined : onOpenReviewChanges}\n            onMouseEnter={handleMouseEnter}\n            onMouseLeave={handleMouseLeave}\n            tabIndex={-1}\n            type=\"button\"\n            $withHoverEffect={withHoverEffect}\n          />\n        </ChangeBar>\n      ),\n    [\n      disabled,\n      isChanged,\n      zIndex,\n      isReviewChangesOpen,\n      onOpenReviewChanges,\n      handleMouseEnter,\n      handleMouseLeave,\n      withHoverEffect,\n    ]\n  )\n\n  return (\n    <ChangeBarWrapper\n      changed={isChanged}\n      data-testid=\"change-bar-wrapper\"\n      disabled={disabled}\n      focus={hasFocus}\n      hover={hover}\n      isReviewChangeOpen={isReviewChangesOpen}\n    >\n      <FieldWrapper data-testid=\"change-bar__field-wrapper\">{children}</FieldWrapper>\n      {changeBar}\n    </ChangeBarWrapper>\n  )\n}\n","import {useLayer} from '@sanity/ui'\nimport React, {memo} from 'react'\nimport deepCompare from 'react-fast-compare'\nimport * as PathUtils from '@sanity/util/paths'\nimport {Path} from '@sanity/types'\nimport {EMPTY_ARRAY} from '../../form/utils/empty'\nimport {useReporter} from './tracker'\nimport {ElementWithChangeBar} from './ElementWithChangeBar'\n\nconst ChangeBarWrapper = memo(function ChangeBarWrapper(\n  props: Omit<React.ComponentProps<'div'>, 'onChange'> & {\n    disabled?: boolean\n    path: Path\n    hasFocus: boolean\n    isChanged?: boolean\n    withHoverEffect?: boolean\n  }\n) {\n  const {\n    children,\n    className,\n    disabled,\n    hasFocus,\n    isChanged,\n    path = EMPTY_ARRAY,\n    withHoverEffect,\n  } = props\n  const layer = useLayer()\n  const [hasHover, setHover] = React.useState(false)\n  const onMouseEnter = React.useCallback(() => setHover(true), [])\n  const onMouseLeave = React.useCallback(() => setHover(false), [])\n  const ref = React.useRef<HTMLDivElement | null>(null)\n  useReporter(\n    disabled ? null : `field-${PathUtils.toString(path)}`,\n    () => ({\n      element: ref.current!,\n      path: path,\n      isChanged: isChanged,\n      hasFocus: hasFocus,\n      hasHover: hasHover,\n      zIndex: layer.zIndex,\n    }),\n    deepCompare // note: deepCompare should be ok here since we're not comparing deep values\n  )\n\n  return (\n    <div ref={ref} className={className} onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave}>\n      <ElementWithChangeBar\n        hasFocus={hasFocus}\n        isChanged={isChanged}\n        disabled={disabled}\n        withHoverEffect={withHoverEffect}\n      >\n        {children}\n      </ElementWithChangeBar>\n    </div>\n  )\n})\n\nexport interface ChangeIndicatorProps {\n  children?: React.ReactNode\n  className?: string\n  disabled?: boolean\n  path: Path\n  hasFocus: boolean\n  isChanged: boolean\n  withHoverEffect?: boolean\n}\n\nexport function ChangeIndicator(props: ChangeIndicatorProps) {\n  const {children, className, disabled, hasFocus, isChanged, path, withHoverEffect} = props\n  return (\n    <ChangeBarWrapper\n      className={className}\n      disabled={disabled}\n      path={path}\n      hasFocus={hasFocus}\n      isChanged={isChanged}\n      withHoverEffect={withHoverEffect}\n    >\n      {children}\n    </ChangeBarWrapper>\n  )\n}\n","import React from 'react'\nimport {Path} from '@sanity/types'\n\nexport interface ChangeIndicatorContextValue {\n  value?: unknown\n  focusPath: Path\n  path: Path\n  fullPath: Path\n  isChanged: boolean\n}\n\nexport const ChangeIndicatorContext: React.Context<ChangeIndicatorContextValue> =\n  React.createContext({\n    path: [],\n    fullPath: [],\n    focusPath: [],\n    isChanged: false,\n  } as ChangeIndicatorContextValue)\n","import React from 'react'\nimport {PubSub} from 'nano-pubsub'\n\nexport const ScrollContext = React.createContext<null | PubSub<Event>>(null)\n","import React from 'react'\nimport {ScrollContext} from './scrollContext'\nimport {Subscriber} from 'nano-pubsub'\n\nexport function useOnScroll(callback: Subscriber<Event>) {\n  const parentContext = React.useContext(ScrollContext)\n  React.useEffect(() => {\n    return parentContext?.subscribe(callback)\n  }, [callback])\n}\n","import {useForwardedRef} from '@sanity/ui'\nimport createPubSub from 'nano-pubsub'\nimport React, {useContext, useEffect, useMemo} from 'react'\nimport {ScrollContext} from './scrollContext'\n\nexport interface ScrollContainerProps<T extends React.ElementType>\n  extends Omit<React.HTMLProps<T>, 'as' | 'onScroll'> {\n  as?: React.ElementType | keyof JSX.IntrinsicElements\n  onScroll?: (event: Event) => () => void\n}\n\nconst noop = () => undefined\n\n/**\n * This provides a utility function for use within Sanity Studios to create scrollable containers\n * It also provides a way for components inside a scrollable container to track onScroll on their first parent scroll container\n * Note: this is used by different studio utilities to track positions of elements on screen\n * Note: It will call any given `onScroll` callback with a Native DOM Event, and not a React Synthetic event\n * Note: It will not make sure the element is actually scrollable, this still needs to be done with css as usual\n */\nexport const ScrollContainer = React.forwardRef(function ScrollContainer<\n  T extends React.ElementType = 'div'\n>(props: ScrollContainerProps<T>, ref: React.ForwardedRef<HTMLDivElement>) {\n  const {as = 'div', onScroll, ...rest} = props\n  const forwardedRef = useForwardedRef(ref)\n\n  // const selfRef = useRef<HTMLElement | null>(null)\n  const parentContext = useContext(ScrollContext)\n  const childContext = useMemo(() => createPubSub<Event>(), [])\n\n  useEffect(() => {\n    if (onScroll) {\n      // emit scroll events from children\n      return childContext.subscribe(onScroll)\n    }\n    return noop\n  }, [childContext, onScroll])\n\n  useEffect(() => {\n    // let events bubble up\n    if (parentContext) {\n      return childContext.subscribe(parentContext.publish)\n    }\n    return noop\n  }, [parentContext, childContext])\n\n  useEffect(() => {\n    const handleScroll = (event: Event) => {\n      childContext.publish(event)\n    }\n\n    const el = forwardedRef.current\n\n    if (!el) {\n      return undefined\n    }\n\n    el.addEventListener('scroll', handleScroll, {\n      passive: true,\n      capture: true,\n    })\n\n    return () => {\n      el.removeEventListener('scroll', handleScroll)\n    }\n  }, [childContext, forwardedRef])\n\n  return (\n    <ScrollContext.Provider value={childContext}>\n      {React.createElement(as, {ref: forwardedRef, 'data-testid': 'scroll-container', ...rest})}\n    </ScrollContext.Provider>\n  )\n})\n","import React from 'react'\nimport {useOnScroll} from './hooks'\nimport {ScrollEventHandler} from './types'\n\nexport interface ScrollMonitorProps {\n  onScroll: ScrollEventHandler\n  children?: React.ReactNode\n}\n\nexport function ScrollMonitor({onScroll, children}: ScrollMonitorProps) {\n  useOnScroll(onScroll)\n  return <>{children}</>\n}\n","import {isKeyedObject} from '@sanity/types'\nimport * as PathUtils from '@sanity/util/paths'\nimport {TrackedChange, TrackedArea} from '../tracker'\n\nexport function findMostSpecificTarget(\n  targetType: 'change' | 'field',\n  id: string,\n  values: Map<string, TrackedChange | TrackedArea>\n): TrackedChange | undefined {\n  const pathString = id.slice(id.indexOf('-') + 1) || '[]'\n  const path = PathUtils.fromString(pathString)\n  const exactId = `${targetType}-${PathUtils.toString(path)}`\n  if (values.has(exactId)) {\n    return values.get(exactId) as TrackedChange\n  }\n\n  let mostSpecific: TrackedChange | undefined\n  for (const [targetId, target] of values) {\n    if (!('path' in target) || !targetId.startsWith(targetType)) {\n      continue\n    }\n\n    const numEqual = PathUtils.numEqualSegments(path, target.path)\n    const lastPathSegment = target.path[target.path.length - 1]\n    const pathOnlyDiffersByKey =\n      numEqual === target.path.length - 1 && isKeyedObject(lastPathSegment)\n\n    if (numEqual === 0) {\n      continue\n    } else if (numEqual !== target.path.length && !pathOnlyDiffersByKey) {\n      /*\n       * We only allow matching to shorter paths if the last element in the path is a keyed object.\n       * `foo.bar.portableTextField[_key=abc123]` should resolve to `foo.bar.portableTextField`.\n       *\n       * Otherwise we'll only get a connector line when you add new elements to a portable text\n       * field and not when you alter an existing part.\n       */\n      continue\n    }\n\n    mostSpecific = target\n\n    if (numEqual === path.length) {\n      // On exact match, return early\n      break\n    }\n  }\n\n  // if (!mostSpecific) {\n  //   throw new Error(`target not found: \"${id}\"`)\n  // }\n\n  return mostSpecific\n}\n","import {Reported} from '../../react-track-elements'\nimport {TrackedArea, TrackedChange} from '../tracker'\n\nexport function isChangeBar(\n  v: Reported<TrackedArea | TrackedChange>\n): v is Reported<TrackedChange> {\n  return v[0] !== 'changePanel'\n}\n","export function hasOverflowScroll(el: HTMLElement): boolean {\n  const overflow = getComputedStyle(el).overflow\n\n  return overflow.includes('auto') || overflow.includes('scroll')\n}\n\n// Check whether an element is currently scrollable (meaning it must both have overflow scroll *and* content overflowing)\nexport function isScrollable(el: HTMLElement): boolean {\n  const scrollableContent = el.scrollHeight !== el.offsetHeight || el.scrollWidth !== el.offsetWidth\n\n  return scrollableContent && hasOverflowScroll(el)\n}\n","import {Rect} from '../overlay/types'\nimport {isScrollable} from './scrollUtils'\n\nconst SCROLL_INTO_VIEW_TOP_PADDING = -15\n\nexport function scrollIntoView(field: {element: HTMLElement; rect: Rect; bounds: Rect}): void {\n  const element = field.element\n\n  /*\n   * Start at current element and check the parent for a scroll\n   * bar until a scrollable element has been found.\n   */\n  let parentElementWithScroll: HTMLElement | null = element\n\n  while (!isScrollable(parentElementWithScroll)) {\n    parentElementWithScroll = parentElementWithScroll.parentElement\n\n    /*\n     * If the parent element is null it means we are at the root\n     * element, which has no parent. Since no scroll bar has\n     * been found so far it does not make sense to scroll.\n     */\n    if (!parentElementWithScroll) {\n      return\n    }\n  }\n\n  parentElementWithScroll.scroll({\n    top:\n      parentElementWithScroll.scrollTop +\n      field.rect.top -\n      field.bounds.top +\n      SCROLL_INTO_VIEW_TOP_PADDING,\n    left: 0,\n    behavior: 'smooth',\n  })\n}\n","import {Rect} from '../overlay/types'\nimport {hasOverflowScroll} from './scrollUtils'\n\nexport const getOffsetsTo = (\n  source: HTMLElement,\n  target: HTMLElement\n): {rect: Rect; bounds: Rect} => {\n  const bounds: Rect = {\n    top: 0,\n    left: 0,\n    height: target.offsetHeight,\n    width: target.offsetWidth,\n  }\n\n  const rect: Rect = {\n    top: 0,\n    left: 0,\n    height: source.offsetHeight,\n    width: source.offsetWidth,\n  }\n\n  let foundScrollContainer = false\n  let el: HTMLElement | null = source\n\n  while (el && el !== target && target.contains(el)) {\n    if (foundScrollContainer) {\n      bounds.top += el.offsetTop\n      bounds.left += el.offsetLeft\n    }\n\n    if (hasOverflowScroll(el)) {\n      bounds.top = el.offsetTop\n      bounds.height = el.offsetHeight\n      bounds.left = el.offsetLeft\n      bounds.width = el.offsetWidth\n\n      foundScrollContainer = true\n    }\n\n    rect.top += el.offsetTop - el.scrollTop\n    rect.left += el.offsetLeft - el.scrollLeft\n\n    el = el.offsetParent as HTMLElement\n  }\n\n  return {rect, bounds}\n}\n","import {\n  ARROW_MARGIN_X,\n  ARROW_MARGIN_Y,\n  ARROW_SIZE,\n  ARROW_THRESHOLD,\n  CORNER_RADIUS,\n} from '../constants'\nimport {ConnectorLine} from './types'\n\nexport function arrowPath(x: number, y: number, dir: number): string {\n  return [\n    `M ${x - ARROW_SIZE} ${y - ARROW_SIZE * dir} `,\n    `L ${x} ${y}`,\n    `L ${x + ARROW_SIZE} ${y - ARROW_SIZE * dir}`,\n  ].join('')\n}\n\nfunction moveTo(x: number, y: number) {\n  return `M${x} ${y}`\n}\n\nfunction lineTo(x: number, y: number) {\n  return `L${x} ${y}`\n}\n\nfunction join(strings: string[], delim = '') {\n  return strings.join(delim)\n}\n\nfunction quadCurve(x1: number, y1: number, x: number, y: number) {\n  return `Q${x1} ${y1} ${x} ${y}`\n}\n\nexport function generateConnectorPath(line: ConnectorLine): string {\n  const {from, to} = line\n  const {left: fromX, top: fromY} = from\n  const {left: toX, top: toY} = to\n\n  const cmds: string[] = []\n\n  // Calculate maximum corner radius\n  const r1 = Math.min(CORNER_RADIUS, Math.abs(fromY - toY) / 2)\n\n  // FROM\n  if (from.isAbove) {\n    cmds.push(\n      moveTo(fromX + ARROW_MARGIN_X, fromY - ARROW_THRESHOLD + ARROW_MARGIN_Y),\n      lineTo(fromX + ARROW_MARGIN_X, fromY - CORNER_RADIUS),\n      quadCurve(fromX + ARROW_MARGIN_X, fromY, fromX + ARROW_MARGIN_X + CORNER_RADIUS, fromY)\n    )\n  } else if (from.isBelow) {\n    cmds.push(\n      moveTo(fromX + ARROW_MARGIN_X, fromY + ARROW_THRESHOLD - ARROW_MARGIN_Y),\n      lineTo(fromX + ARROW_MARGIN_X, fromY + CORNER_RADIUS),\n      quadCurve(fromX + ARROW_MARGIN_X, fromY, fromX + ARROW_MARGIN_X + CORNER_RADIUS, fromY)\n    )\n  } else {\n    cmds.push(moveTo(fromX, fromY))\n  }\n\n  // TO\n  if (to.isAbove) {\n    if (fromY < to.bounds.top) {\n      cmds.push(\n        lineTo(to.bounds.left - 8 - r1, fromY),\n        quadCurve(to.bounds.left - 8, fromY, to.bounds.left - 8, fromY + r1),\n        lineTo(to.bounds.left - 8, toY - r1),\n        quadCurve(to.bounds.left - 8, toY, to.bounds.left - 8 + r1, toY),\n        lineTo(to.bounds.left + ARROW_MARGIN_X - CORNER_RADIUS, toY),\n        quadCurve(\n          to.bounds.left + ARROW_MARGIN_X,\n          toY,\n          to.bounds.left + ARROW_MARGIN_X,\n          toY - CORNER_RADIUS\n        ),\n        lineTo(to.bounds.left + ARROW_MARGIN_X, toY - ARROW_THRESHOLD + ARROW_MARGIN_Y)\n      )\n    } else {\n      cmds.push(\n        lineTo(to.bounds.left + ARROW_MARGIN_X - CORNER_RADIUS, fromY),\n        quadCurve(\n          to.bounds.left + ARROW_MARGIN_X,\n          fromY,\n          to.bounds.left + ARROW_MARGIN_X,\n          fromY - CORNER_RADIUS\n        ),\n        lineTo(to.bounds.left + ARROW_MARGIN_X, toY - ARROW_THRESHOLD + ARROW_MARGIN_Y)\n      )\n    }\n  } else if (to.isBelow) {\n    if (fromY > to.bounds.top + to.bounds.height) {\n      // curl around\n      cmds.push(\n        lineTo(to.bounds.left - ARROW_MARGIN_X - r1, fromY),\n        quadCurve(\n          to.bounds.left - ARROW_MARGIN_X,\n          fromY,\n          to.bounds.left - ARROW_MARGIN_X,\n          fromY - r1\n        ),\n        lineTo(to.bounds.left - ARROW_MARGIN_X, toY + r1),\n        quadCurve(to.bounds.left - ARROW_MARGIN_X, toY, to.bounds.left - ARROW_MARGIN_X + r1, toY),\n        lineTo(to.bounds.left + ARROW_MARGIN_X - CORNER_RADIUS, toY),\n        quadCurve(\n          to.bounds.left + ARROW_MARGIN_X,\n          toY,\n          to.bounds.left + ARROW_MARGIN_X,\n          toY + CORNER_RADIUS\n        ),\n        lineTo(to.bounds.left + ARROW_MARGIN_X, toY + ARROW_THRESHOLD - ARROW_MARGIN_Y)\n      )\n    } else {\n      cmds.push(\n        lineTo(to.bounds.left + ARROW_MARGIN_X - CORNER_RADIUS, fromY),\n        quadCurve(\n          to.bounds.left + ARROW_MARGIN_X,\n          fromY,\n          to.bounds.left + ARROW_MARGIN_X,\n          fromY + CORNER_RADIUS\n        ),\n        lineTo(to.bounds.left + ARROW_MARGIN_X, toY + ARROW_THRESHOLD - ARROW_MARGIN_Y)\n      )\n    }\n  } else if (fromY < toY) {\n    cmds.push(\n      lineTo(to.bounds.left + ARROW_MARGIN_X - r1, fromY),\n      quadCurve(\n        to.bounds.left + ARROW_MARGIN_X,\n        fromY,\n        to.bounds.left + ARROW_MARGIN_X,\n        fromY + r1\n      ),\n      lineTo(to.bounds.left + ARROW_MARGIN_X, toY - r1),\n      quadCurve(to.bounds.left + ARROW_MARGIN_X, toY, to.bounds.left + ARROW_MARGIN_X + r1, toY),\n      lineTo(toX, toY)\n    )\n  } else {\n    cmds.push(\n      lineTo(to.bounds.left + ARROW_MARGIN_X - r1, fromY),\n      quadCurve(\n        to.bounds.left + ARROW_MARGIN_X,\n        fromY,\n        to.bounds.left + ARROW_MARGIN_X,\n        fromY - r1\n      ),\n      lineTo(to.bounds.left + ARROW_MARGIN_X, toY + r1),\n      quadCurve(to.bounds.left + ARROW_MARGIN_X, toY, to.bounds.left + ARROW_MARGIN_X + r1, toY),\n      lineTo(toX, toY)\n    )\n  }\n\n  return join(cmds)\n}\n","import {ARROW_MARGIN_Y, ARROW_THRESHOLD, CONNECTOR_MARGIN} from '../constants'\nimport {ConnectorLinePoint, Rect} from './types'\n\nfunction getConnectorLinePoint(rect: Rect, bounds: Rect): ConnectorLinePoint {\n  const centerY = rect.top + rect.height / 2\n  const isAbove = rect.top + rect.height < bounds.top + ARROW_MARGIN_Y\n  const isBelow = rect.top > bounds.top + bounds.height - ARROW_MARGIN_Y\n\n  return {\n    bounds: bounds,\n    left: rect.left,\n    top: centerY,\n    centerY,\n    startY: rect.top + CONNECTOR_MARGIN,\n    endY: rect.top + rect.height - CONNECTOR_MARGIN,\n    isAbove,\n    isBelow,\n    outOfBounds: isAbove || isBelow,\n  }\n}\n\ninterface Connector {\n  from: {rect: Rect; bounds: Rect}\n  to: {rect: Rect; bounds: Rect}\n}\n\nexport function mapConnectorToLine(connector: Connector): {\n  from: ConnectorLinePoint\n  to: ConnectorLinePoint\n} {\n  const fromBounds = {\n    top: connector.from.bounds.top + ARROW_THRESHOLD,\n    bottom: connector.from.bounds.top + connector.from.bounds.height - ARROW_THRESHOLD,\n    left: connector.from.bounds.left,\n    right: connector.from.bounds.left + connector.from.bounds.width,\n    width: connector.from.bounds.width,\n    height: connector.from.bounds.height - ARROW_THRESHOLD * 2,\n  }\n\n  const from = getConnectorLinePoint(connector.from.rect, fromBounds)\n  from.left = connector.from.rect.left + connector.from.rect.width + 1\n\n  const toBounds = {\n    top: connector.to.bounds.top + ARROW_THRESHOLD,\n    bottom: connector.to.bounds.top + connector.to.bounds.height - ARROW_THRESHOLD,\n    left: connector.to.bounds.left,\n    right: connector.to.bounds.left + connector.to.bounds.width,\n    width: connector.to.bounds.width,\n    height: connector.to.bounds.height - ARROW_THRESHOLD * 2,\n  }\n\n  const to = getConnectorLinePoint(connector.to.rect, toBounds)\n\n  const maxStartY = Math.max(to.startY, from.startY)\n\n  // Align from <-> to vertically\n  from.top = Math.min(maxStartY, from.endY)\n  if (from.top < toBounds.top) {\n    from.top = Math.min(toBounds.top, from.endY)\n  } else if (from.top > toBounds.bottom) {\n    from.top = Math.max(toBounds.bottom, from.startY)\n  }\n  to.top = Math.min(maxStartY, to.endY)\n  if (to.top < fromBounds.top) {\n    to.top = Math.min(fromBounds.top, to.endY)\n  } else if (to.top > fromBounds.bottom) {\n    to.top = Math.max(fromBounds.bottom, to.startY)\n  }\n\n  // Keep within bounds\n  from.top = Math.min(Math.max(from.top, fromBounds.top), fromBounds.bottom)\n  to.top = Math.min(Math.max(to.top, toBounds.top), toBounds.bottom)\n\n  return {from, to}\n}\n","import React from 'react'\nimport {Rect} from './types'\n\nexport function ClampedRect(\n  props: {top: number; left: number; height: number; width: number; bounds: Rect} & Omit<\n    React.ComponentProps<'rect'>,\n    'top' | 'left' | 'height' | 'width'\n  >\n) {\n  const {bounds, ...rest} = props\n  const x = Math.max(bounds.left, props.left)\n  const y = Math.max(props.top, bounds.top)\n  const height = Math.max(0, props.height - (y - props.top))\n  const width = Math.max(0, props.width - (x - props.left))\n\n  return <rect {...rest} x={x} y={y} height={height} width={width} />\n}\n","import {Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {ClampedRect} from './ClampedRect'\n\ninterface PathProps {\n  theme: Theme\n}\n\nexport const DebugRect = styled.rect`\n  stroke: #ccc;\n  fill: none;\n  pointer-events: none;\n  stroke-linecap: round;\n`\n\nexport const ConnectorPath = styled.path(({theme}: PathProps) => {\n  /* these colours aren't freely available on the current theme */\n  const strokeColor = theme.sanity.color.spot.yellow\n\n  return css`\n    fill: none;\n    pointer-events: none;\n    stroke-linecap: round;\n    stroke-linejoin: round;\n    stroke: ${strokeColor};\n  `\n})\n\nexport const InteractivePath = styled.path(({theme}: PathProps) => {\n  /* these colours aren't freely available on the current theme */\n  const strokeColor = theme.sanity.color.spot.yellow\n\n  return css`\n    fill: none;\n    pointer-events: stroke;\n    stroke: ${strokeColor};\n    cursor: pointer;\n    stroke-linecap: round;\n    stroke-linejoin: round;\n    opacity: 0;\n\n    &:hover {\n      opacity: 0.2;\n    }\n  `\n})\n\nexport const RightBarWrapper = styled(ClampedRect)(({theme}: PathProps) => {\n  /* these colours aren't freely available on the current theme */\n  const strokeColor = theme.sanity.color.spot.yellow\n\n  return css`\n    stroke: none;\n    pointer-events: none;\n    fill: ${strokeColor};\n  `\n})\n","import React, {memo} from 'react'\nimport {\n  ARROW_MARGIN_X,\n  ARROW_MARGIN_Y,\n  ARROW_THRESHOLD,\n  DEBUG,\n  INTERACTIVE_STROKE_WIDTH,\n  STROKE_WIDTH,\n} from '../constants'\nimport {arrowPath, generateConnectorPath} from './connectorPath'\nimport {mapConnectorToLine} from './mapConnectorToLine'\nimport {Rect} from './types'\nimport {DebugRect, ConnectorPath, InteractivePath, RightBarWrapper} from './Connector.styled'\n\ninterface Props {\n  from: {rect: Rect; bounds: Rect}\n  to: {rect: Rect; bounds: Rect}\n}\n\nexport const Connector = memo(function Connector({from, to}: Props) {\n  const line = mapConnectorToLine({from, to})\n\n  // If both ends of the connector are out of bounds, then do not render\n  if (line.from.outOfBounds && line.to.outOfBounds) {\n    return null\n  }\n\n  const linePathDescription = generateConnectorPath(line)\n\n  return (\n    <>\n      <InteractivePath d={linePathDescription} strokeWidth={INTERACTIVE_STROKE_WIDTH} />\n\n      <ConnectorPath d={linePathDescription} strokeWidth={STROKE_WIDTH} />\n      <RightBarWrapper\n        top={to.rect.top}\n        left={to.rect.left}\n        height={to.rect.height}\n        width={STROKE_WIDTH}\n        bounds={to.bounds}\n      />\n\n      {line.from.isAbove && (\n        <ConnectorPath\n          d={arrowPath(\n            line.from.left + ARROW_MARGIN_X,\n            line.from.bounds.top - ARROW_THRESHOLD + ARROW_MARGIN_Y,\n            -1\n          )}\n          strokeWidth={STROKE_WIDTH}\n        />\n      )}\n\n      {line.from.isBelow && (\n        <ConnectorPath\n          d={arrowPath(\n            line.from.left + ARROW_MARGIN_X,\n            line.from.bounds.top + line.from.bounds.height + ARROW_THRESHOLD - ARROW_MARGIN_Y,\n            1\n          )}\n          strokeWidth={STROKE_WIDTH}\n        />\n      )}\n\n      {line.to.isAbove && (\n        <ConnectorPath\n          d={arrowPath(\n            line.to.bounds.left + ARROW_MARGIN_X,\n            line.to.bounds.top - ARROW_THRESHOLD + ARROW_MARGIN_Y,\n            -1\n          )}\n          strokeWidth={STROKE_WIDTH}\n        />\n      )}\n\n      {line.to.isBelow && (\n        <ConnectorPath\n          d={arrowPath(\n            line.to.bounds.left + ARROW_MARGIN_X,\n            line.to.bounds.top + line.to.bounds.height + ARROW_THRESHOLD - ARROW_MARGIN_Y,\n            1\n          )}\n          strokeWidth={STROKE_WIDTH}\n        />\n      )}\n\n      {DEBUG && (\n        <>\n          <DebugRect\n            x={line.from.bounds.left}\n            y={line.from.bounds.top}\n            width={line.from.bounds.width}\n            height={line.from.bounds.height}\n            stroke=\"green\"\n          />\n\n          <DebugRect\n            x={line.to.bounds.left}\n            y={line.to.bounds.top}\n            width={line.to.bounds.width}\n            height={line.to.bounds.height}\n            stroke=\"yellow\"\n          />\n\n          {!line.from.outOfBounds && (\n            <g transform={`translate(${line.from.bounds.left} ${line.from.bounds.top})`}>\n              <DebugRect\n                width={line.from.bounds.width}\n                height={line.from.bounds.height}\n                strokeWidth={STROKE_WIDTH}\n                stroke=\"green\"\n              />\n            </g>\n          )}\n\n          {!line.to.outOfBounds && (\n            <g transform={`translate(${line.to.bounds.left} ${line.to.bounds.top})`}>\n              <DebugRect\n                width={line.to.bounds.width}\n                height={line.to.bounds.height}\n                strokeWidth={STROKE_WIDTH}\n                stroke=\"red\"\n              />\n            </g>\n          )}\n        </>\n      )}\n    </>\n  )\n})\n","import {useEffect} from 'react'\nimport {resizeObserver} from '../../../util'\n\nexport function useResizeObserver(\n  element: HTMLDivElement,\n  onResize: (event: ResizeObserverEntry) => void\n): void {\n  useEffect(() => resizeObserver.observe(element, onResize), [element, onResize])\n}\n","import styled from 'styled-components'\n\nexport const SvgWrapper = styled.svg`\n  pointer-events: none;\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n`\n","import React, {useCallback, useMemo, useState} from 'react'\nimport {sortBy} from 'lodash'\nimport {Path} from '@sanity/types'\nimport {ScrollMonitor} from '../../scroll'\nimport {isNonNullable} from '../../../util/isNonNullable'\nimport {findMostSpecificTarget} from '../helpers/findMostSpecificTarget'\nimport {isChangeBar} from '../helpers/isChangeBar'\nimport {scrollIntoView} from '../helpers/scrollIntoView'\nimport {DEBUG_LAYER_BOUNDS} from '../constants'\nimport {getOffsetsTo} from '../helpers/getOffsetsTo'\nimport {TrackedArea, TrackedChange, useReportedValues} from '../tracker'\nimport {Reported} from '../../react-track-elements'\nimport {Connector} from './Connector'\nimport {DebugLayers} from './DebugLayers'\nimport {useResizeObserver} from './useResizeObserver'\nimport {SvgWrapper} from './ConnectorsOverlay.styled'\n\nexport interface Rect {\n  height: number\n  width: number\n  top: number\n  left: number\n}\n\ninterface State {\n  connectors: {\n    field: TrackedChange & {id: string; rect: Rect; bounds: Rect}\n    change: TrackedChange & {id: string; rect: Rect; bounds: Rect}\n    hasFocus: boolean\n    hasHover: boolean\n    hasRevertHover: boolean\n  }[]\n  isHoverConnector: boolean\n}\n\ninterface ConnectorsOverlayProps {\n  rootElement: HTMLDivElement\n  onSetFocus: (nextFocusPath: Path) => void\n}\n\nfunction getState(\n  allReportedValues: Reported<TrackedChange | TrackedArea>[],\n  hovered: string | null,\n  byId: Map<string, TrackedChange | TrackedArea>,\n  rootElement: HTMLElement\n): State {\n  const changeBarsWithHover: Reported<TrackedChange>[] = []\n  const changeBarsWithFocus: Reported<TrackedChange>[] = []\n\n  for (const value of allReportedValues) {\n    if (!isChangeBar(value) || !value[1].isChanged) {\n      continue\n    }\n\n    const [id, reportedChangeBar] = value\n\n    if (id === hovered) {\n      changeBarsWithHover.push(value)\n      continue\n    }\n\n    if (reportedChangeBar.hasHover) {\n      changeBarsWithHover.push(value)\n      continue\n    }\n\n    if (reportedChangeBar.hasFocus) {\n      changeBarsWithFocus.push(value)\n      continue\n    }\n  }\n\n  const isHoverConnector = changeBarsWithHover.length > 0\n\n  const changeBars = isHoverConnector ? changeBarsWithHover : changeBarsWithFocus\n\n  const connectors = changeBars\n    .map(([id]) => {\n      const field = findMostSpecificTarget('field', id, byId)\n      const change = findMostSpecificTarget('change', id, byId)\n\n      if (!field || !change) return null\n\n      return {field: {id, ...field}, change: {id, ...change}}\n    })\n    .filter(isNonNullable)\n    // .filter(({field, change}) => field && change && field.element && change.element)\n    .map(({field, change}) => ({\n      hasHover: field.hasHover || change.hasHover,\n      hasFocus: field.hasFocus,\n      hasRevertHover: change.hasRevertHover,\n      field: {...field, ...getOffsetsTo(field.element, rootElement)},\n      change: {...change, ...getOffsetsTo(change.element, rootElement)},\n    }))\n\n  return {connectors, isHoverConnector}\n}\n\nexport function ConnectorsOverlay(props: ConnectorsOverlayProps) {\n  const {rootElement, onSetFocus} = props\n  const [hovered, setHovered] = React.useState<string | null>(null)\n  const allReportedValues = useReportedValues()\n  const byId: Map<string, TrackedChange | TrackedArea> = useMemo(\n    () => new Map(allReportedValues),\n    [allReportedValues]\n  )\n\n  const [{connectors}, setState] = useState<State>(() =>\n    getState(allReportedValues, hovered, byId, rootElement)\n  )\n\n  const visibleConnectors = useMemo(\n    () => sortBy(connectors, (c) => 0 - c.field.path.length).slice(0, 1),\n    [connectors]\n  )\n\n  const handleScrollOrResize = useCallback(() => {\n    setState(getState(allReportedValues, hovered, byId, rootElement))\n  }, [byId, allReportedValues, hovered, rootElement])\n\n  useResizeObserver(rootElement, handleScrollOrResize)\n\n  return (\n    <ScrollMonitor onScroll={handleScrollOrResize}>\n      <SvgWrapper style={{zIndex: visibleConnectors[0] && visibleConnectors[0].field.zIndex}}>\n        {visibleConnectors.map(({field, change}) => {\n          if (!change) {\n            return null\n          }\n\n          return (\n            <ConnectorGroup\n              field={field}\n              change={change}\n              key={field.id}\n              onSetFocus={onSetFocus}\n              setHovered={setHovered}\n            />\n          )\n        })}\n      </SvgWrapper>\n    </ScrollMonitor>\n  )\n}\n\ninterface ConnectorGroupProps {\n  field: TrackedChange & {id: string; rect: Rect; bounds: Rect}\n  change: TrackedChange & {id: string; rect: Rect; bounds: Rect}\n  setHovered: (id: string | null) => void\n  onSetFocus: (path: Path) => void\n}\n\nfunction ConnectorGroup(props: ConnectorGroupProps) {\n  const {change, field, onSetFocus, setHovered} = props\n\n  const onConnectorClick = useCallback(() => {\n    scrollIntoView(field)\n    scrollIntoView(change)\n    onSetFocus(field.path)\n  }, [field, change, onSetFocus])\n\n  const handleMouseEnter = useCallback(() => setHovered(field.id), [field, setHovered])\n  const handleMouseLeave = useCallback(() => setHovered(null), [setHovered])\n\n  const from = useMemo(\n    () => ({\n      rect: {\n        left: field.rect.left + 2,\n        top: field.rect.top,\n        height: field.rect.height,\n        width: field.rect.width,\n      },\n      bounds: field.bounds,\n    }),\n    [field.bounds, field.rect]\n  )\n\n  const to = useMemo(\n    () => ({rect: change.rect, bounds: change.bounds}),\n    [change.bounds, change.rect]\n  )\n\n  return (\n    <>\n      <g onClick={onConnectorClick} onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave}>\n        <Connector from={from} to={to} />\n      </g>\n\n      {DEBUG_LAYER_BOUNDS && <DebugLayers field={field} change={change} />}\n    </>\n  )\n}\n","import React, {useMemo} from 'react'\nimport {Path} from '@sanity/types'\nimport {ScrollContainer} from '../../scroll'\nimport {ConnectorContext} from '../ConnectorContext'\nimport {ENABLED} from '../constants'\nimport {Tracker} from '../tracker'\nimport {ConnectorsOverlay} from './ConnectorsOverlay'\n\nexport interface EnabledChangeConnectorRootProps {\n  children: React.ReactNode\n  className?: string\n  isReviewChangesOpen: boolean\n  onOpenReviewChanges: () => void\n  onSetFocus: (path: Path) => void\n}\n\nexport function EnabledChangeConnectorRoot({\n  children,\n  className,\n  isReviewChangesOpen,\n  onOpenReviewChanges,\n  onSetFocus,\n  ...restProps\n}: EnabledChangeConnectorRootProps) {\n  const [rootElement, setRootElement] = React.useState<HTMLDivElement | null>()\n\n  const contextValue = useMemo(\n    () => ({\n      isReviewChangesOpen,\n      onOpenReviewChanges,\n      onSetFocus,\n    }),\n    [isReviewChangesOpen, onOpenReviewChanges, onSetFocus]\n  )\n\n  return (\n    <ConnectorContext.Provider value={contextValue}>\n      <Tracker>\n        <ScrollContainer {...restProps} ref={setRootElement} className={className}>\n          {children}\n          {rootElement && <ConnectorsOverlay rootElement={rootElement} onSetFocus={onSetFocus} />}\n        </ScrollContainer>\n      </Tracker>\n    </ConnectorContext.Provider>\n  )\n}\n\nexport interface DisabledChangeConnectorRootProps {\n  className?: string\n  children: React.ReactNode\n}\n\nexport function DisabledChangeConnectorRoot({\n  children,\n  className,\n}: DisabledChangeConnectorRootProps) {\n  return <ScrollContainer className={className}>{children}</ScrollContainer>\n}\n\nexport const ChangeConnectorRoot = ENABLED\n  ? EnabledChangeConnectorRoot\n  : DisabledChangeConnectorRoot\n","import {createContext} from 'react'\nimport {ReviewChangesContextValue} from './types'\n\n/**\n * @internal\n */\nexport const ReviewChangesContext = createContext<ReviewChangesContextValue | null>(null)\n","import React, {ComponentType, createContext, HTMLProps, useContext, useMemo} from 'react'\nimport {Path} from '@sanity/types'\nimport {TemplatePermissionsResult} from '../../../datastores'\n\nconst Context = createContext<ReferenceInputOptions>({})\n\nexport interface TemplateOption {\n  id: string\n  params?: Record<string, string | number | boolean>\n}\n/**\n * unstable\n * @internal\n */\nexport interface EditReferenceOptions {\n  id: string\n  type: string\n  parentRefPath: Path\n  template: TemplateOption\n}\n\nexport interface EditReferenceLinkComponentProps {\n  documentId: string\n  documentType: string\n  parentRefPath: Path\n  template?: TemplateOption\n  children: React.ReactNode\n}\n\n/**\n * unstable\n * @internal\n */\nexport interface ReferenceInputOptions {\n  /**\n   * Represents the highlighted path if ths current document has a related open\n   * child (e.g. reference in place).\n   */\n  activePath?: {path: Path; state: 'selected' | 'pressed' | 'none'}\n  /**\n   * A specialized `EditReferenceLinkComponent` component that takes in the needed props to open a\n   * referenced document to the right\n   */\n  EditReferenceLinkComponent?: ComponentType<\n    Omit<HTMLProps<'a'>, 'children'> & EditReferenceLinkComponentProps\n  >\n\n  initialValueTemplateItems?: TemplatePermissionsResult[]\n\n  /**\n   * Similar to `EditReferenceChildLink` expect without the wrapping component\n   */\n  onEditReference?: (options: EditReferenceOptions) => void\n}\n\n/**\n * unstable\n * @internal\n */\nexport function useReferenceInputOptions() {\n  return useContext(Context)\n}\n\n/**\n * unstable\n * @internal\n */\nexport function ReferenceInputOptionsProvider(\n  props: ReferenceInputOptions & {children: React.ReactNode}\n) {\n  const {\n    children,\n    activePath,\n    EditReferenceLinkComponent,\n    onEditReference,\n    initialValueTemplateItems,\n  } = props\n\n  const contextValue = useMemo(\n    () => ({\n      activePath,\n      EditReferenceLinkComponent,\n      onEditReference,\n      initialValueTemplateItems,\n    }),\n    [activePath, EditReferenceLinkComponent, onEditReference, initialValueTemplateItems]\n  )\n\n  return <Context.Provider value={contextValue}>{children}</Context.Provider>\n}\n","import {FormPatch} from './types'\n\n/**\n * @internal\n */\nexport interface MutationPatchMsg {\n  type: 'mutation'\n  patches: FormPatch[]\n  snapshot: unknown\n}\n\n/**\n * @internal\n */\nexport interface RebasePatchMsg {\n  type: 'rebase'\n  patches: FormPatch[]\n  snapshot: unknown\n}\n\n/**\n * @internal\n */\nexport type PatchMsg = MutationPatchMsg | RebasePatchMsg\n\n/**\n * @internal\n */\nexport interface PatchMsgSubscriber {\n  (msg: PatchMsg): void\n}\n\n/**\n * @internal\n */\nexport interface PatchChannel {\n  publish: (msg: PatchMsg) => void\n  subscribe: (subscriber: PatchMsgSubscriber) => () => void\n}\n\n/**\n * @internal\n */\nexport function createPatchChannel(): PatchChannel {\n  const _subscribers: PatchMsgSubscriber[] = []\n\n  return {\n    publish(msg: PatchMsg) {\n      for (const subscriber of _subscribers) {\n        subscriber(msg)\n      }\n    },\n\n    subscribe(subscriber) {\n      _subscribers.push(subscriber)\n\n      return () => {\n        const idx = _subscribers.indexOf(subscriber)\n\n        if (idx > -1) {\n          _subscribers.splice(idx, 1)\n        }\n      }\n    },\n  }\n}\n","/* eslint-disable camelcase */\n\nimport {Path, PathSegment} from '@sanity/types'\nimport {\n  FormSetIfMissingPatch,\n  FormInsertPatch,\n  FormInsertPatchPosition,\n  FormSetPatch,\n  FormUnsetPatch,\n  FormIncPatch,\n  FormDecPatch,\n} from './types'\n\nexport function setIfMissing(value: any, path: Path = []): FormSetIfMissingPatch {\n  return {\n    type: 'setIfMissing',\n    path,\n    value,\n  }\n}\n\nexport function insert(\n  items: any[],\n  position: FormInsertPatchPosition,\n  path: Path = []\n): FormInsertPatch {\n  return {\n    type: 'insert',\n    path,\n    position,\n    items,\n  }\n}\n\nexport function set(value: any, path: Path = []): FormSetPatch {\n  return {type: 'set', path, value}\n}\n\nexport function unset(path: Path = []): FormUnsetPatch {\n  return {type: 'unset', path}\n}\n\nexport function inc(amount = 1, path: Path = []): FormIncPatch {\n  return {type: 'inc', path, value: amount}\n}\n\nexport function dec(amount = 1, path: Path = []): FormDecPatch {\n  return {type: 'dec', path, value: amount}\n}\n\nexport function prefixPath<T extends {path: Path}>(patch: T, segment: PathSegment): T {\n  return {\n    ...patch,\n    path: [segment, ...patch.path],\n  }\n}\n","import {PathSegment} from '@sanity/types'\nimport {flatten} from 'lodash'\nimport {prefixPath} from './patch'\nimport {FormPatch, PatchArg} from './types'\n\n/**\n * @internal\n */\nexport class PatchEvent {\n  static from(input: PatchArg | PatchEvent): PatchEvent {\n    if (input instanceof PatchEvent) {\n      return input\n    }\n    return new PatchEvent(Array.isArray(input) ? flatten(input) : [input])\n  }\n\n  patches: Array<FormPatch>\n\n  constructor(patches: Array<FormPatch>) {\n    this.patches = patches\n  }\n\n  prepend(...patches: PatchArg[]): PatchEvent {\n    return PatchEvent.from([...flatten(patches), ...this.patches])\n  }\n\n  append(...patches: PatchArg[]): PatchEvent {\n    return PatchEvent.from([...this.patches, ...flatten(patches)])\n  }\n\n  prefixAll(segment: PathSegment): PatchEvent {\n    return PatchEvent.from(this.patches.map((patch) => prefixPath(patch, segment)))\n  }\n}\n","import {AssetSource, ObjectSchemaType, Path, SanityDocument} from '@sanity/types'\nimport {createContext} from 'react'\nimport {PatchChannel} from './patch'\nimport {\n  FormBuilderArrayFunctionComponent,\n  FormBuilderCustomMarkersComponent,\n  FormBuilderFilterFieldFn,\n  FormBuilderMarkersComponent,\n  FormFieldGroup,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderItemCallback,\n  RenderPreviewCallback,\n} from './types'\nimport {ObjectMember, StateTree} from './store'\n\n/**\n * @alpha\n */\nexport interface FormBuilderContextValue {\n  /**\n   * @deprecated INTERNAL USE ONLY\n   */\n  __internal: {\n    components: {\n      ArrayFunctions: FormBuilderArrayFunctionComponent\n      CustomMarkers: FormBuilderCustomMarkersComponent\n      Markers: FormBuilderMarkersComponent\n    }\n    file: {\n      assetSources: AssetSource[]\n      directUploads: boolean\n    }\n    filterField: FormBuilderFilterFieldFn\n    image: {\n      assetSources: AssetSource[]\n      directUploads: boolean\n    }\n    getDocument: () => SanityDocument | undefined\n    patchChannel: PatchChannel\n  }\n\n  autoFocus?: boolean\n  changesOpen?: boolean\n  collapsedFieldSets: StateTree<boolean> | undefined\n  collapsedPaths: StateTree<boolean> | undefined\n  focusPath: Path\n  focused?: boolean\n  groups: FormFieldGroup[]\n  id: string\n  members: ObjectMember[]\n  readOnly?: boolean\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderItemCallback\n  renderPreview: RenderPreviewCallback\n  schemaType: ObjectSchemaType\n  value: {[field in string]: unknown} | undefined\n}\n\n/**\n * @internal\n */\nexport const FormBuilderContext = createContext<FormBuilderContextValue | null>(null)\n","import {useContext} from 'react'\nimport {FormBuilderContext, FormBuilderContextValue} from './FormBuilderContext'\n\n/**\n * @alpha\n */\nexport function useFormBuilder(): FormBuilderContextValue {\n  const formBuilder = useContext(FormBuilderContext)\n\n  if (!formBuilder) {\n    throw new Error('FormBuilder: missing context value')\n  }\n\n  return formBuilder\n}\n","/* eslint-disable react/no-unused-prop-types */\n\nimport {ArraySchemaType, isReferenceSchemaType} from '@sanity/types'\nimport {AddIcon} from '@sanity/icons'\nimport React, {useMemo} from 'react'\nimport {Box, Button, Grid, Menu, MenuButton, MenuItem, Tooltip, Text} from '@sanity/ui'\nimport {useId} from '@reach/auto-id'\nimport {FormArrayInputFunctionsProps} from '../../../types'\n\nexport function DefaultArrayInputFunctions<\n  SchemaType extends ArraySchemaType,\n  MemberType extends {_key: string}\n>(props: FormArrayInputFunctionsProps<SchemaType, MemberType>) {\n  const {type, readOnly, children, onCreateValue, onAppendItem} = props\n  const menuButtonId = useId()\n\n  const insertItem = React.useCallback(\n    (itemType) => {\n      const item = onCreateValue(itemType)\n\n      onAppendItem(item)\n    },\n    [onCreateValue, onAppendItem]\n  )\n\n  const handleAddBtnClick = React.useCallback(() => {\n    insertItem(type.of[0])\n  }, [type, insertItem])\n\n  const popoverProps = useMemo(() => ({constrainSize: true, portal: true}), [])\n\n  if (readOnly) {\n    return (\n      <Tooltip\n        portal\n        content={\n          <Box padding={2} sizing=\"border\">\n            <Text size={1} muted>\n              This field is read-only\n            </Text>\n          </Box>\n        }\n      >\n        <Grid>\n          <Button\n            icon={AddIcon}\n            mode=\"ghost\"\n            disabled\n            text={type.of.length === 1 ? 'Add item' : 'Add item...'}\n          />\n        </Grid>\n      </Tooltip>\n    )\n  }\n\n  return (\n    <Grid gap={1} style={{gridTemplateColumns: 'repeat(auto-fit, minmax(100px, 1fr))'}}>\n      {type.of.length === 1 ? (\n        <Button icon={AddIcon} mode=\"ghost\" onClick={handleAddBtnClick} text=\"Add item\" />\n      ) : (\n        <MenuButton\n          button={<Button icon={AddIcon} mode=\"ghost\" text=\"Add item…\" />}\n          id={menuButtonId || ''}\n          menu={\n            <Menu>\n              {type.of.map((memberDef, i) => {\n                // Use reference icon if reference is to one type only\n                const referenceIcon =\n                  isReferenceSchemaType(memberDef) &&\n                  (memberDef.to || []).length === 1 &&\n                  memberDef.to[0].icon\n\n                const icon = memberDef.icon || memberDef.type?.icon || referenceIcon\n                return (\n                  <MenuItem\n                    key={i}\n                    text={memberDef.title || memberDef.type?.name}\n                    onClick={() => insertItem(memberDef)}\n                    icon={icon}\n                  />\n                )\n              })}\n            </Menu>\n          }\n          popover={popoverProps}\n        />\n      )}\n\n      {children}\n    </Grid>\n  )\n}\n\nDefaultArrayInputFunctions.__SANITY_INTERNAL_IMPLEMENTATION = true\n","import {ErrorOutlineIcon, InfoOutlineIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Flex, Stack, Text, Theme} from '@sanity/ui'\nimport React from 'react'\nimport styled, {css} from 'styled-components'\nimport {NodeValidation, PortableTextMarker, RenderCustomMarkers} from '../../../types'\nimport {useFormBuilder} from '../../../useFormBuilder'\n\nexport interface MarkersProps {\n  markers: PortableTextMarker[]\n  validation: NodeValidation[]\n  renderCustomMarkers?: RenderCustomMarkers\n}\n\nconst getIcon = (level: 'error' | 'warning' | 'info') => {\n  if (level === 'error') {\n    return <ErrorOutlineIcon />\n  }\n\n  if (level === 'warning') {\n    return <WarningOutlineIcon />\n  }\n\n  return <InfoOutlineIcon />\n}\n\nconst IconText = styled(Text)(({theme}: {theme: Theme}) => {\n  return css`\n    &[data-info] {\n      color: ${theme.sanity.color.muted.primary.enabled.fg};\n    }\n\n    &[data-warning] {\n      color: ${theme.sanity.color.muted.caution.enabled.fg};\n    }\n\n    &[data-error] {\n      color: ${theme.sanity.color.muted.critical.enabled.fg};\n    }\n  `\n})\n\nexport function DefaultMarkers(props: MarkersProps) {\n  const {markers, validation, renderCustomMarkers} = props\n  const {CustomMarkers} = useFormBuilder().__internal.components\n\n  if (markers.length === 0 && validation.length === 0) {\n    return null\n  }\n\n  return (\n    <Stack space={1}>\n      {validation.length > 0 &&\n        validation.map(({message, level}, index) => (\n          // eslint-disable-next-line react/no-array-index-key\n          <Flex key={`validationItem-${index}`}>\n            <Box marginRight={2} marginBottom={index + 1 === validation.length ? 0 : 2}>\n              <IconText\n                size={1}\n                data-error={level === 'error' ? '' : undefined}\n                data-warning={level === 'warning' ? '' : undefined}\n                data-info={level === 'info' ? '' : undefined}\n              >\n                {getIcon(level)}\n              </IconText>\n            </Box>\n            <Box>\n              <Text size={1}>{message || 'Error'}</Text>\n            </Box>\n          </Flex>\n        ))}\n\n      {markers.length > 0 && (\n        <Box marginTop={validation.length > 0 ? 3 : 0}>\n          {renderCustomMarkers && renderCustomMarkers(markers)}\n          {!renderCustomMarkers && <CustomMarkers markers={markers} />}\n        </Box>\n      )}\n    </Stack>\n  )\n}\n","import React from 'react'\nimport {Text} from '@sanity/ui'\n\n// This is the fallback marker renderer if the block editor didn't get the 'renderCustomMarkers' prop\n// You will probably only see this when you first start to play with custom markers as a developer\nexport function DefaultCustomMarkers() {\n  return (\n    <Text size={1}>\n      This is a example custom marker, please implement <code>renderCustomMarkers</code> function.\n    </Text>\n  )\n}\n","/* eslint-disable react/no-unused-prop-types */\nimport {Path} from '@sanity/types'\nimport React, {memo, useContext} from 'react'\nimport {PatchEvent} from '../../patch'\n\ninterface FormCallbacksValue {\n  onChange: (patchEvent: PatchEvent) => void\n  onPathFocus: (path: Path) => void\n  onPathBlur: (path: Path) => void\n  onPathOpen: (path: Path) => void\n  onSetPathCollapsed: (path: Path, collapsed: boolean) => void\n  onSetFieldSetCollapsed: (path: Path, collapsed: boolean) => void\n  onFieldGroupSelect: (path: Path, fieldGroupName: string) => void\n}\n\nconst FormCallbacksContext = React.createContext<FormCallbacksValue | null>(null)\n\nexport const FormCallbacksProvider = memo(function FormCallbacksProvider(\n  props: FormCallbacksValue & {children: React.ReactNode}\n) {\n  return (\n    <FormCallbacksContext.Provider value={props}>{props.children}</FormCallbacksContext.Provider>\n  )\n})\n\nexport function useFormCallbacks(): FormCallbacksValue {\n  const ctx = useContext(FormCallbacksContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx\n}\n","/* eslint-disable react/no-unused-prop-types */\nimport React, {useContext, createContext, useMemo} from 'react'\nimport {Path} from '@sanity/types'\nimport {startsWith} from '@sanity/util/paths'\nimport {FormFieldPresence} from '../../../presence'\n\nconst PresenceContext = createContext<FormFieldPresence[]>([])\n\nexport function PresenceProvider(props: {\n  presence: FormFieldPresence[]\n  children: React.ReactNode\n}) {\n  return (\n    <PresenceContext.Provider value={props.presence}>{props.children}</PresenceContext.Provider>\n  )\n}\n\nexport function useFormFieldPresence(): FormFieldPresence[] {\n  const ctx = useContext(PresenceContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx\n}\n\nexport function useChildPresence(path: Path): FormFieldPresence[] {\n  const presence = useFormFieldPresence()\n  return useMemo(() => presence.filter((item) => startsWith(path, item.path)), [path, presence])\n}\n","/* eslint-disable react/no-unused-prop-types */\nimport React, {createContext, useContext, useMemo} from 'react'\nimport {Path, ValidationMarker} from '@sanity/types'\nimport {startsWith} from '@sanity/util/paths'\nimport {NodeValidation} from '../../types'\n\nconst ValidationContext = createContext<ValidationMarker[]>([])\n\nexport function ValidationProvider(props: {\n  validation: ValidationMarker[]\n  children: React.ReactNode\n}) {\n  return (\n    <ValidationContext.Provider value={props.validation}>\n      {props.children}\n    </ValidationContext.Provider>\n  )\n}\n\nexport function useValidationMarkers(): ValidationMarker[] {\n  const ctx = useContext(ValidationContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx\n}\n\nexport function useChildValidation(path: Path): NodeValidation[] {\n  const validation = useValidationMarkers()\n  return useMemo(\n    () =>\n      validation\n        .filter((item) => startsWith(path, item.path))\n        .map((marker) => ({\n          message: marker.item.message,\n          level: marker.level,\n          path: marker.path,\n        })) as NodeValidation[],\n    [path, validation]\n  )\n}\n","/* eslint-disable camelcase */\n\nimport {AssetSource, ObjectSchemaType, Path, ValidationMarker} from '@sanity/types'\nimport React, {useEffect, useMemo, useRef} from 'react'\nimport {Source} from '../config'\nimport {FormFieldPresence} from '../presence'\nimport {FormBuilderContext, FormBuilderContextValue} from './FormBuilderContext'\nimport {\n  FIXME,\n  FormBuilderFilterFieldFn,\n  FormFieldGroup,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderItemCallback,\n  RenderPreviewCallback,\n} from './types'\nimport {ObjectMember, StateTree} from './store'\nimport {DefaultArrayInputFunctions} from './inputs/arrays/common/ArrayFunctions'\nimport {DefaultMarkers} from './inputs/PortableText/_legacyDefaultParts/Markers'\nimport {DefaultCustomMarkers} from './inputs/PortableText/_legacyDefaultParts/CustomMarkers'\nimport {PatchChannel, PatchEvent} from './patch'\nimport {FormCallbacksProvider} from './studio/contexts/FormCallbacks'\nimport {PresenceProvider} from './studio/contexts/Presence'\nimport {ValidationProvider} from './studio/contexts/Validation'\nimport {defaultFileAssetSources, defaultImageAssetSources} from './defaults'\n\nexport interface FormBuilderProviderProps {\n  /**\n   * @internal\n   */\n  __internal_patchChannel?: PatchChannel // eslint-disable-line camelcase\n  autoFocus?: boolean\n  changesOpen?: boolean\n  children?: React.ReactNode\n  collapsedFieldSets: StateTree<boolean> | undefined\n  collapsedPaths: StateTree<boolean> | undefined\n  file: Source['form']['file']\n  filterField?: FormBuilderFilterFieldFn\n  focusPath: Path\n  focused?: boolean\n  groups: FormFieldGroup[]\n  id: string\n  image: Source['form']['image']\n  members: ObjectMember[]\n  onChange: (event: PatchEvent) => void\n  onFieldGroupSelect: (path: Path, groupName: string) => void\n  onPathBlur: (path: Path) => void\n  onPathFocus: (path: Path) => void\n  onPathOpen: (path: Path) => void\n  onSetFieldSetCollapsed: (path: Path, collapsed: boolean) => void\n  onSetPathCollapsed: (path: Path, collapsed: boolean) => void\n  presence: FormFieldPresence[]\n  readOnly?: boolean\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderItemCallback\n  renderPreview: RenderPreviewCallback\n  schemaType: ObjectSchemaType\n  unstable?: Source['form']['unstable']\n  validation: ValidationMarker[]\n  value: {[field in string]: unknown} | undefined\n}\n\nconst missingPatchChannel: PatchChannel = {\n  publish: () => undefined,\n  subscribe: () => {\n    console.warn(\n      'No patch channel provided to form-builder. If you need input based patch updates, please provide one'\n    )\n\n    return () => undefined\n  },\n}\n\nexport function FormBuilderProvider(props: FormBuilderProviderProps) {\n  const {\n    __internal_patchChannel: patchChannel = missingPatchChannel,\n    autoFocus,\n    changesOpen,\n    children,\n    collapsedFieldSets,\n    collapsedPaths,\n    file,\n    filterField,\n    focusPath,\n    focused,\n    groups,\n    id,\n    image,\n    members,\n    onChange,\n    onFieldGroupSelect,\n    onPathBlur,\n    onPathFocus,\n    onPathOpen,\n    onSetFieldSetCollapsed,\n    onSetPathCollapsed,\n    presence,\n    readOnly,\n    renderField,\n    renderInput,\n    renderItem,\n    renderPreview,\n    schemaType,\n    unstable,\n    validation,\n    value: documentValue,\n  } = props\n\n  const documentValueRef = useRef(documentValue)\n\n  useEffect(() => {\n    documentValueRef.current = documentValue\n  }, [documentValue])\n\n  const __internal: FormBuilderContextValue['__internal'] = useMemo(\n    () => ({\n      patchChannel, // eslint-disable-line camelcase\n      components: {\n        ArrayFunctions: unstable?.ArrayFunctions || DefaultArrayInputFunctions,\n        CustomMarkers: unstable?.CustomMarkers || DefaultCustomMarkers,\n        Markers: unstable?.Markers || DefaultMarkers,\n      },\n      file: {\n        assetSources: file?.assetSources\n          ? _ensureArrayOfSources(file.assetSources) || defaultFileAssetSources\n          : defaultFileAssetSources,\n        directUploads: file?.directUploads !== false,\n      },\n      filterField: filterField || (() => true),\n      image: {\n        assetSources: image?.assetSources\n          ? _ensureArrayOfSources(image.assetSources) || defaultImageAssetSources\n          : defaultImageAssetSources,\n        directUploads: image?.directUploads !== false,\n      },\n      getDocument: () => documentValueRef.current as FIXME,\n      onChange,\n    }),\n    [file, filterField, image, onChange, patchChannel, unstable]\n  )\n\n  const formBuilder: FormBuilderContextValue = useMemo(\n    () => ({\n      __internal,\n      autoFocus,\n      changesOpen,\n      collapsedFieldSets,\n      collapsedPaths,\n      focusPath,\n      focused,\n      groups,\n      id,\n      members,\n      readOnly,\n      renderField,\n      renderInput,\n      renderItem,\n      renderPreview,\n      schemaType,\n      value: documentValue,\n    }),\n    [\n      __internal,\n      autoFocus,\n      changesOpen,\n      collapsedFieldSets,\n      collapsedPaths,\n      documentValue,\n      focusPath,\n      focused,\n      groups,\n      id,\n      members,\n      readOnly,\n      renderField,\n      renderInput,\n      renderItem,\n      renderPreview,\n      schemaType,\n    ]\n  )\n\n  return (\n    <FormBuilderContext.Provider value={formBuilder}>\n      <FormCallbacksProvider\n        onChange={onChange}\n        onFieldGroupSelect={onFieldGroupSelect}\n        onPathBlur={onPathBlur}\n        onPathFocus={onPathFocus}\n        onPathOpen={onPathOpen}\n        onSetPathCollapsed={onSetPathCollapsed}\n        onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      >\n        <PresenceProvider presence={presence}>\n          <ValidationProvider validation={validation}>{children}</ValidationProvider>\n        </PresenceProvider>\n      </FormCallbacksProvider>\n    </FormBuilderContext.Provider>\n  )\n}\n\nfunction _ensureArrayOfSources(sources: unknown): AssetSource[] | null {\n  if (Array.isArray(sources)) {\n    return sources\n  }\n\n  console.warn('Configured asset sources is not an array:', sources)\n\n  return null\n}\n","/* eslint-disable camelcase */\n\nimport {ObjectSchemaType, Path, ValidationMarker} from '@sanity/types'\nimport React from 'react'\nimport {useSource} from '../../studio'\nimport {PatchChannel, PatchEvent} from '../patch'\nimport {FormBuilderProvider} from '../FormBuilderProvider'\nimport {ObjectMember, StateTree} from '../store'\nimport {FormFieldGroup} from '../types'\nimport {FormFieldPresence} from '../../presence'\n\n/**\n * @alpha This API might change.\n */\nexport interface StudioFormBuilderProviderProps {\n  /**\n   * @internal Considered internal, do not use.\n   */\n  __internal_patchChannel: PatchChannel\n\n  autoFocus?: boolean\n  changesOpen?: boolean\n  children?: React.ReactNode\n  collapsedFieldSets: StateTree<boolean> | undefined\n  collapsedPaths: StateTree<boolean> | undefined\n  focusPath: Path\n  focused: boolean | undefined\n  groups: FormFieldGroup[]\n  id: string\n  members: ObjectMember[]\n  onChange: (changeEvent: PatchEvent) => void\n  onPathBlur: (path: Path) => void\n  onPathFocus: (path: Path) => void\n  onPathOpen: (path: Path) => void\n  onFieldGroupSelect: (path: Path, groupName: string) => void\n  onSetPathCollapsed: (path: Path, collapsed: boolean) => void\n  onSetFieldSetCollapsed: (path: Path, collapsed: boolean) => void\n  presence: FormFieldPresence[]\n  readOnly?: boolean\n  schemaType: ObjectSchemaType\n  validation: ValidationMarker[]\n  value: {[field in string]: unknown} | undefined\n}\n\n/**\n * Default wiring for `FormBuilderProvider` when used with Sanity\n *\n * @alpha This API might change.\n */\nexport function StudioFormBuilderProvider(props: StudioFormBuilderProviderProps) {\n  const {\n    __internal_patchChannel: patchChannel,\n    autoFocus,\n    changesOpen,\n    children,\n    collapsedFieldSets,\n    collapsedPaths,\n    focusPath,\n    focused,\n    groups,\n    id,\n    members,\n    onChange,\n    onPathBlur,\n    onPathFocus,\n    onPathOpen,\n    onFieldGroupSelect,\n    onSetPathCollapsed,\n    onSetFieldSetCollapsed,\n    presence,\n    readOnly,\n    schemaType,\n    validation,\n    value,\n  } = props\n\n  const {file, image, renderField, renderInput, renderItem, renderPreview} = useSource().form\n\n  return (\n    <FormBuilderProvider\n      __internal_patchChannel={patchChannel}\n      autoFocus={autoFocus}\n      changesOpen={changesOpen}\n      collapsedFieldSets={collapsedFieldSets}\n      collapsedPaths={collapsedPaths}\n      file={file}\n      focusPath={focusPath}\n      focused={focused}\n      groups={groups}\n      id={id}\n      image={image}\n      members={members}\n      onChange={onChange}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n      onPathOpen={onPathOpen}\n      onFieldGroupSelect={onFieldGroupSelect}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      presence={presence}\n      readOnly={readOnly}\n      renderField={renderField}\n      renderInput={renderInput}\n      renderItem={renderItem}\n      renderPreview={renderPreview}\n      schemaType={schemaType}\n      validation={validation}\n      value={value}\n    >\n      {children}\n    </FormBuilderProvider>\n  )\n}\n","/* eslint-disable camelcase */\n/* eslint-disable react/jsx-handler-names */\n\nimport {ObjectSchemaType, Path, ValidationMarker} from '@sanity/types'\nimport React, {useCallback, useRef} from 'react'\nimport {FormFieldPresence} from '../../presence'\nimport {FormPatch, PatchChannel, PatchEvent} from '../patch'\nimport {ObjectFormNode} from '../store/types/nodes'\nimport {ObjectInputProps} from '../types'\nimport {EMPTY_ARRAY} from '../utils/empty'\nimport {useFormBuilder} from '../useFormBuilder'\nimport {StateTree} from '../store'\nimport {StudioFormBuilderProvider} from './StudioFormBuilderProvider'\nimport {useFormCallbacks} from './contexts/FormCallbacks'\n\n/**\n * @alpha\n */\nexport interface StudioFormBuilderProps\n  extends Omit<ObjectFormNode, 'level' | 'path' | 'presence' | 'validation'> {\n  /**\n   * @internal Considered internal – do not use.\n   */\n  __internal_patchChannel: PatchChannel\n\n  autoFocus?: boolean\n  changesOpen?: boolean\n  collapsedFieldSets: StateTree<boolean> | undefined\n  collapsedPaths: StateTree<boolean> | undefined\n  focusPath: Path\n  focused: boolean | undefined\n  id: string\n  onChange: (changeEvent: PatchEvent) => void\n  onPathBlur: (path: Path) => void\n  onPathFocus: (path: Path) => void\n  onPathOpen: (path: Path) => void\n  onFieldGroupSelect: (path: Path, groupName: string) => void\n  onSetFieldSetCollapsed: (path: Path, collapsed: boolean) => void\n  onSetPathCollapsed: (path: Path, collapsed: boolean) => void\n  presence: FormFieldPresence[]\n  readOnly?: boolean\n  schemaType: ObjectSchemaType\n  validation: ValidationMarker[]\n  value: {[field in string]: unknown} | undefined\n}\n\n/**\n * @alpha\n */\nexport function StudioFormBuilder(props: StudioFormBuilderProps) {\n  const {\n    __internal_patchChannel: patchChannel,\n    autoFocus,\n    changesOpen,\n    collapsedFieldSets,\n    collapsedPaths,\n    focusPath,\n    focused,\n    groups,\n    id,\n    members,\n    onChange,\n    onPathBlur,\n    onPathFocus,\n    onPathOpen,\n    onFieldGroupSelect,\n    onSetFieldSetCollapsed,\n    onSetPathCollapsed,\n    presence,\n    readOnly,\n    schemaType,\n    validation,\n    value,\n  } = props\n\n  return (\n    <StudioFormBuilderProvider\n      __internal_patchChannel={patchChannel}\n      autoFocus={autoFocus}\n      changesOpen={changesOpen}\n      collapsedFieldSets={collapsedFieldSets}\n      collapsedPaths={collapsedPaths}\n      focusPath={focusPath}\n      focused={focused}\n      groups={groups}\n      id={id}\n      members={members}\n      onChange={onChange}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n      onPathOpen={onPathOpen}\n      onFieldGroupSelect={onFieldGroupSelect}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      presence={presence}\n      validation={validation}\n      readOnly={readOnly}\n      schemaType={schemaType}\n      value={value}\n    >\n      <RootInput />\n    </StudioFormBuilderProvider>\n  )\n}\n\nfunction RootInput() {\n  const {\n    focusPath,\n    focused,\n    groups,\n    id,\n    members,\n    readOnly,\n    renderField,\n    renderInput,\n    renderItem,\n    renderPreview,\n    schemaType,\n    value,\n  } = useFormBuilder()\n\n  const {\n    onChange,\n    onFieldGroupSelect,\n    onPathBlur,\n    onPathFocus,\n    onPathOpen,\n    onSetFieldSetCollapsed,\n    onSetPathCollapsed,\n  } = useFormCallbacks()\n\n  const handleCollapseField = useCallback(\n    (fieldName: string) => onSetPathCollapsed([fieldName], true),\n    [onSetPathCollapsed]\n  )\n\n  const handleExpandField = useCallback(\n    (fieldName: string) => onSetPathCollapsed([fieldName], false),\n    [onSetPathCollapsed]\n  )\n\n  const handleBlur = useCallback(() => onPathBlur(EMPTY_ARRAY), [onPathBlur])\n\n  const handleFocus = useCallback(() => onPathFocus(EMPTY_ARRAY), [onPathFocus])\n\n  const handleChange = useCallback(\n    (patch: FormPatch | FormPatch[] | PatchEvent) => onChange(PatchEvent.from(patch)),\n    [onChange]\n  )\n\n  const focusRef = useRef(null)\n\n  const handleSelectFieldGroup = useCallback(\n    (groupName: string) => onFieldGroupSelect(EMPTY_ARRAY, groupName),\n    [onFieldGroupSelect]\n  )\n\n  const handleOpenField = useCallback((fieldName: string) => onPathOpen([fieldName]), [onPathOpen])\n\n  const handleCloseField = useCallback(() => onPathOpen([]), [onPathOpen])\n\n  const handleCollapseFieldSet = useCallback(\n    (fieldSetName: string) => onSetFieldSetCollapsed([fieldSetName], true),\n    [onSetFieldSetCollapsed]\n  )\n\n  const handleExpandFieldSet = useCallback(\n    (fieldSetName: string) => onSetFieldSetCollapsed([fieldSetName], false),\n    [onSetFieldSetCollapsed]\n  )\n\n  const rootInputProps: ObjectInputProps = {\n    focusPath,\n    elementProps: {ref: focusRef, id, onBlur: handleBlur, onFocus: handleFocus},\n    changed: members.some((m) => m.kind === 'field' && m.field.changed),\n    focused,\n    groups,\n    id,\n    level: 0,\n    members,\n    onChange: handleChange,\n    onCloseField: handleCloseField,\n    onCollapseField: handleCollapseField,\n    onCollapseFieldSet: handleCollapseFieldSet,\n    onExpandField: handleExpandField,\n    onExpandFieldSet: handleExpandFieldSet,\n    onFocusPath: onPathFocus,\n    onOpenField: handleOpenField,\n    onFieldGroupSelect: handleSelectFieldGroup,\n    path: EMPTY_ARRAY,\n    presence: EMPTY_ARRAY,\n    readOnly,\n    renderField,\n    renderInput,\n    renderItem,\n    renderPreview,\n    schemaType,\n    validation: EMPTY_ARRAY,\n    value,\n  }\n\n  return <>{renderInput(rootInputProps)}</>\n}\n","import {arrayToJSONMatchPath} from '@sanity/mutator'\nimport {Path, PathSegment} from '@sanity/types'\n\nconst IS_NUMERIC = /^\\d+$/\n\nfunction unquote(str: string) {\n  return str.replace(/^['\"]/, '').replace(/['\"]$/, '')\n}\n\nfunction splitAttr(segment: string) {\n  const [attr, key] = segment.split('==')\n  return {[attr]: unquote(key)}\n}\n\nfunction coerce(segment: string): PathSegment {\n  return IS_NUMERIC.test(segment) ? Number(segment) : segment\n}\n\nfunction parseGradientPath(focusPathStr: string): Path {\n  return focusPathStr\n    .split(/[[.\\]]/g)\n    .filter(Boolean)\n    .map((seg) => (seg.includes('==') ? splitAttr(seg) : coerce(seg))) as Path\n}\n\n/**\n * @internal\n */\nexport function encodePath(formBuilderPath: Path): string {\n  return arrayToJSONMatchPath(formBuilderPath)\n}\n\n/**\n * @internal\n */\nexport function decodePath(gradientPath: string): Path {\n  return parseGradientPath(gradientPath)\n}\n","import {isArraySchemaType, isObjectSchemaType, isPrimitiveSchemaType} from '@sanity/types'\nimport {\n  ArrayOfObjectsFormNode,\n  ArrayOfPrimitivesFormNode,\n  FieldMember,\n  ObjectFormNode,\n} from '../../store'\n\nexport function isMemberObject(member: FieldMember): member is FieldMember<ObjectFormNode> {\n  return isObjectSchemaType(member.field.schemaType)\n}\n\nexport function isMemberArrayOfPrimitives(\n  member: FieldMember\n): member is FieldMember<ArrayOfPrimitivesFormNode> {\n  return (\n    isArraySchemaType(member.field.schemaType) &&\n    member.field.schemaType.of.every((ofType) => isPrimitiveSchemaType(ofType))\n  )\n}\n\nexport function isMemberArrayOfObjects(\n  member: FieldMember\n): member is FieldMember<ArrayOfObjectsFormNode> {\n  return (\n    isArraySchemaType(member.field.schemaType) &&\n    member.field.schemaType.of.every((ofType) => isObjectSchemaType(ofType))\n  )\n}\n","import {\n  IndexTuple,\n  isIndexSegment,\n  isIndexTuple,\n  isKeyedObject,\n  isKeySegment,\n  KeyedSegment,\n  Path,\n  PathSegment,\n} from '@sanity/types'\nimport {isRecord} from '../../util/isRecord'\n\nconst rePropName =\n  /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g\nconst reKeySegment = /_key\\s*==\\s*['\"](.*)['\"]/\n\nexport function pathToString(path: Path): string {\n  if (!Array.isArray(path)) {\n    throw new Error('Path is not an array')\n  }\n\n  return path.reduce<string>((target, segment, i) => {\n    const segmentType = typeof segment\n    if (segmentType === 'number') {\n      return `${target}[${segment}]`\n    }\n\n    if (segmentType === 'string') {\n      const separator = i === 0 ? '' : '.'\n      return `${target}${separator}${segment}`\n    }\n\n    if (isKeySegment(segment) && segment._key) {\n      return `${target}[_key==\"${segment._key}\"]`\n    }\n\n    if (Array.isArray(segment)) {\n      const [from, to] = segment\n      return `${target}[${from}:${to}]`\n    }\n\n    throw new Error(`Unsupported path segment \\`${JSON.stringify(segment)}\\``)\n  }, '')\n}\n\nexport function getValueAtPath(rootValue: unknown, path: Path): unknown {\n  const segment = path[0]\n  if (!segment) {\n    return rootValue\n  }\n\n  const tail = path.slice(1)\n  if (isIndexSegment(segment)) {\n    return getValueAtPath(Array.isArray(rootValue) ? rootValue[segment] : undefined, tail)\n  }\n\n  if (isKeySegment(segment)) {\n    return getValueAtPath(\n      Array.isArray(rootValue) ? rootValue.find((item) => item._key === segment._key) : undefined,\n      tail\n    )\n  }\n\n  if (typeof segment === 'string') {\n    return getValueAtPath(isRecord(rootValue) ? rootValue[segment] : undefined, tail)\n  }\n\n  throw new Error(`Unknown segment type ${JSON.stringify(segment)}`)\n}\n\nexport function findIndex(array: unknown[], segment: PathSegment): number {\n  if (typeof segment !== 'number' && !isKeySegment(segment)) {\n    return -1\n  }\n\n  return typeof segment === 'number'\n    ? segment\n    : array.findIndex((item) => isKeyedObject(item) && item._key === segment._key)\n}\n\nexport function stringToPath(path: string): Path {\n  const segments = path.match(rePropName)\n  if (!segments) {\n    throw new Error('Invalid path string')\n  }\n\n  return segments.map(normalizePathSegment)\n}\n\nexport function normalizePathSegment(segment: string): PathSegment {\n  if (isIndexSegment(segment)) {\n    return normalizeIndexSegment(segment)\n  }\n\n  if (isKeySegment(segment)) {\n    return normalizeKeySegment(segment)\n  }\n\n  if (isIndexTuple(segment)) {\n    return normalizeIndexTupleSegment(segment)\n  }\n\n  return segment\n}\n\nexport function normalizeIndexSegment(segment: string): PathSegment {\n  return Number(segment.replace(/[^\\d]/g, ''))\n}\n\nexport function normalizeKeySegment(segment: string): KeyedSegment {\n  const segments = segment.match(reKeySegment)\n  if (!segments) {\n    throw new Error('Invalid key segment')\n  }\n\n  return {_key: segments[1]}\n}\n\nexport function normalizeIndexTupleSegment(segment: string): IndexTuple {\n  const [from, to] = segment.split(':').map((seg) => (seg === '' ? seg : Number(seg)))\n  return [from, to]\n}\n\nexport function pathsAreEqual(pathA: Path, pathB: Path): boolean {\n  if (pathA.length !== pathB.length) {\n    return false\n  }\n\n  return pathA.every((segmentA, index) => {\n    const segmentB = pathB[index]\n    if (isKeySegment(segmentA) && isKeySegment(segmentB)) {\n      return segmentA._key === segmentB._key\n    }\n\n    if (isIndexSegment(segmentA)) {\n      return Number(segmentA) === Number(segmentB)\n    }\n\n    if (isIndexTuple(segmentA) && isIndexTuple(segmentB)) {\n      return segmentA[0] === segmentB[0] && segmentA[1] === segmentB[1]\n    }\n\n    return segmentA === segmentB\n  })\n}\n\nexport function getItemKey(arrayItem: unknown): string | undefined {\n  return isKeyedObject(arrayItem) ? arrayItem._key : undefined\n}\n\nexport function getItemKeySegment(arrayItem: unknown): KeyedSegment | undefined {\n  const key = getItemKey(arrayItem)\n  return key ? {_key: key} : undefined\n}\n\nexport function isEmptyObject(item: unknown): boolean {\n  return typeof item === 'object' && item !== null && Object.keys(item).length <= 0\n}\n","import styled from 'styled-components'\nimport {Card, Flex} from '@sanity/ui'\n\nexport const OverlayContainer = styled.div`\n  position: relative;\n`\n\nexport const ContentContainer = styled.div`\n  z-index: 13;\n  opacity: 0;\n  transition: opacity 300ms linear;\n`\n\nexport const CardContainer = styled(Card)`\n  border: 1px solid var(--card-border-color);\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 12;\n  transition: opacity 150ms ease-in-out;\n  opacity: 0;\n  box-sizing: border-box;\n`\n\nexport const FlexContainer = styled(Flex)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n\n  :hover,\n  :focus {\n    & ${CardContainer} {\n      opacity: 0.9;\n    }\n\n    & ${ContentContainer} {\n      opacity: 1;\n    }\n  }\n`\n","// This is transitional in order to track usage of the ActivateOnFocusPart part from within the form-builder package\nimport React from 'react'\nimport {\n  OverlayContainer,\n  FlexContainer,\n  CardContainer,\n  ContentContainer,\n} from './ActivateOnFocus.styles'\n\n/**\n * @internal\n */\nexport interface ActivateOnFocusProps {\n  children: React.ReactNode\n  message?: React.ReactNode\n  onActivate?: () => void\n  isOverlayActive: boolean\n}\n\n/**\n * @internal\n */\nexport function ActivateOnFocus(props: ActivateOnFocusProps) {\n  const {children, message, onActivate, isOverlayActive} = props\n\n  function handleClick() {\n    if (onActivate) {\n      onActivate()\n    }\n  }\n\n  function handleBlur() {\n    if (onActivate && isOverlayActive) {\n      onActivate()\n    }\n  }\n\n  return (\n    <OverlayContainer onClick={handleClick} onBlur={handleBlur}>\n      {isOverlayActive && (\n        <FlexContainer tabIndex={0} align=\"center\" justify=\"center\">\n          <CardContainer\n            // Almost all input elements have radius=1, and this component is\n            // typically used for overlaying input elements.\n            // @todo Consider making `radius` a component property of `ActivateOnFocus`.\n            radius={1}\n          />\n          <ContentContainer>{message}</ContentContainer>\n        </FlexContainer>\n      )}\n      {children}\n    </OverlayContainer>\n  )\n}\n","// eslint-disable-next-line no-empty-function,@typescript-eslint/no-empty-function\n\nimport {isArraySchemaType, isBooleanSchemaType, isObjectSchemaType} from '@sanity/types'\nimport {ArrayOfObjectsInputProps, InputProps, ObjectInputProps} from '../types'\nimport {\n  BooleanFieldProps,\n  FieldProps,\n  ObjectFieldProps,\n  PrimitiveFieldProps,\n} from '../types/fieldProps'\n\nexport function assertType<T>(v: unknown): asserts v is T {}\n\nexport function isObjectInputProps(inputProps: InputProps): inputProps is ObjectInputProps {\n  return isObjectSchemaType(inputProps.schemaType)\n}\n\nexport function isArrayInputProps(inputProps: InputProps): inputProps is ArrayOfObjectsInputProps {\n  return isArraySchemaType(inputProps.schemaType)\n}\n\nexport function isPrimitiveField(fieldProps: FieldProps): fieldProps is PrimitiveFieldProps {\n  return !isObjectSchemaType(fieldProps.schemaType) && !isArraySchemaType(fieldProps.schemaType)\n}\n\nexport function isBooleanField(fieldProps: FieldProps): fieldProps is BooleanFieldProps {\n  return isBooleanSchemaType(fieldProps.schemaType)\n}\n\nexport function isObjectField(fieldProps: FieldProps): fieldProps is ObjectFieldProps {\n  return isObjectSchemaType(fieldProps.schemaType)\n}\n","import {useEffect, useRef} from 'react'\n\n/**\n * A hook that returns the previous value of a component variable\n * This might be provided by React in the future (https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state)\n */\nexport function usePrevious<T>(\n  /** The value to track. Will return undefined for first render*/\n  value: T\n): T | undefined\nexport function usePrevious<T>(\n  /** The value to track. Will return undefined for first render */\n  value: T,\n  initial: T\n): T\nexport function usePrevious<T>(value: T, initial?: T): T | null {\n  const ref = useRef<T | null>(initial || null)\n  useEffect(() => {\n    ref.current = value\n  }, [value])\n  return ref.current\n}\n","import {useEffect, useRef} from 'react'\nimport shallowEquals from 'shallow-equals'\nimport {usePrevious} from './usePrevious'\n\n/**\n * A hook for doing side effects as a response to a change in a hook value between renders\n *\n * @example\n * ```ts\n * useDidUpdate(hasFocus, (hadFocus, hasFocus) => {\n *  if (hasFocus) {\n *    scrollIntoView(elementRef.current)\n *   }\n * })\n * ```\n */\nexport function useDidUpdate<T>(\n  /** The value you want to respond to changes in. */\n  current: T,\n  /** Callback to run when the value changes. */\n  didUpdate: (previous: T | undefined, current: T) => void,\n  compare?: (previous: T | undefined, current: T) => boolean\n): void\nexport function useDidUpdate<T>(\n  current: T,\n  didUpdate: (previous: T | undefined, current: T | undefined) => void,\n  compare: (previous: T | undefined, current: T) => boolean = shallowEquals\n): void {\n  const previous = usePrevious<T>(current)\n  const initial = useRef<boolean>(true)\n  useEffect(() => {\n    if (initial.current) {\n      initial.current = false\n      return\n    }\n    if (!compare(previous, current)) {\n      didUpdate(previous, current)\n    }\n  }, [didUpdate, current, previous, compare])\n}\n","import getRandomValues from 'get-random-values-esm'\n\n// WHATWG crypto RNG - https://w3c.github.io/webcrypto/Overview.html\nfunction whatwgRNG(length = 16) {\n  const rnds8 = new Uint8Array(length)\n  getRandomValues(rnds8)\n  return rnds8\n}\n\nconst getByteHexTable = (() => {\n  let table: string[]\n  return () => {\n    if (table) {\n      return table\n    }\n    table = []\n    for (let i = 0; i < 256; ++i) {\n      table[i] = (i + 0x100).toString(16).substring(1)\n    }\n    return table\n  }\n})()\n\nexport function randomKey(length?: number) {\n  const table = getByteHexTable()\n  return whatwgRNG(length)\n    .reduce((str, n) => str + table[n], '')\n    .slice(0, length)\n}\n","import {randomKey} from '../inputs/arrays/common/randomKey'\n\nexport function ensureKey(item: any) {\n  return item._key ? item : {...item, _key: randomKey(12)}\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {Path} from '@sanity/types'\nimport {ArrayOfObjectsFormNode, FieldMember} from '../../store'\nimport {\n  ArrayFieldProps,\n  ArrayOfObjectsInputProps,\n  InsertItemEvent,\n  MoveItemEvent,\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../../types'\nimport {FormCallbacksProvider, useFormCallbacks} from '../../studio/contexts/FormCallbacks'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {insert, PatchArg, PatchEvent, setIfMissing, unset} from '../../patch'\nimport {ensureKey} from '../../utils/ensureKey'\nimport {useResolveInitialValueForType} from '../../../datastores'\n\n/**\n * Responsible for creating inputProps and fieldProps to pass to ´renderInput´ and ´renderField´ for an array input\n * Note: \"ArrayField\" in this context means an object field of an array type\n * @param props - Component props\n */\nexport function ArrayOfObjectsField(props: {\n  member: FieldMember<ArrayOfObjectsFormNode>\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}) {\n  const {\n    onPathBlur,\n    onPathFocus,\n    onChange,\n    onSetPathCollapsed,\n    onSetFieldSetCollapsed,\n    onPathOpen,\n    onFieldGroupSelect,\n  } = useFormCallbacks()\n\n  const {member, renderField, renderInput, renderItem, renderPreview} = props\n  const focusRef = useRef<Element & {focus: () => void}>()\n\n  useDidUpdate(member.field.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const handleFocus = useCallback(\n    (event: React.FocusEvent) => {\n      // We want to handle focus when the array input *itself* element receives\n      // focus, not when a child element receives focus, but React has decided\n      // to let focus bubble, so this workaround is needed\n      // Background: https://github.com/facebook/react/issues/6410#issuecomment-671915381\n      if (event.currentTarget === event.target && event.currentTarget === focusRef.current) {\n        onPathFocus(member.field.path)\n      }\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const handleBlur = useCallback(\n    (event: React.FocusEvent) => {\n      // We want to handle blur when the array input *itself* element receives\n      // blur, not when a child element receives blur, but React has decided\n      // to let focus events bubble, so this workaround is needed\n      // Background: https://github.com/facebook/react/issues/6410#issuecomment-671915381\n      if (event.currentTarget === event.target && event.currentTarget === focusRef.current) {\n        onPathBlur(member.field.path)\n      }\n    },\n    [member.field.path, onPathBlur]\n  )\n\n  const handleChange = useCallback(\n    (event: PatchEvent | PatchArg) => {\n      onChange(PatchEvent.from(event).prepend(setIfMissing([])).prefixAll(member.name))\n    },\n    [onChange, member.name]\n  )\n\n  const handleInsert = useCallback(\n    (event: InsertItemEvent) => {\n      onChange(\n        PatchEvent.from([\n          setIfMissing([]),\n          insert(\n            event.items.map((item) => ensureKey(item)),\n            event.position,\n            [event.referenceItem]\n          ),\n        ]).prefixAll(member.name)\n      )\n    },\n    [member.name, onChange]\n  )\n\n  const handleMoveItem = useCallback(\n    (event: MoveItemEvent) => {\n      const value = member.field.value\n      const item = value?.[event.fromIndex] as any\n      const refItem = value?.[event.toIndex] as any\n      if (event.fromIndex === event.toIndex) {\n        return\n      }\n\n      if (!(item as any)?._key || !(refItem as any)?._key) {\n        // eslint-disable-next-line no-console\n        console.error(\n          'Neither the item you are moving nor the item you are moving to have a key. Cannot continue.'\n        )\n\n        return\n      }\n\n      onChange(\n        PatchEvent.from([\n          unset([{_key: item._key}]),\n          insert([item], event.fromIndex > event.toIndex ? 'before' : 'after', [\n            {_key: refItem._key},\n          ]),\n        ]).prefixAll(member.name)\n      )\n    },\n    [member.field.value, member.name, onChange]\n  )\n\n  const handlePrependItem = useCallback(\n    (item) => {\n      onChange(\n        PatchEvent.from([setIfMissing([]), insert([ensureKey(item)], 'before', [0])]).prefixAll(\n          member.name\n        )\n      )\n    },\n    [member.name, onChange]\n  )\n  const handleAppendItem = useCallback(\n    (item) => {\n      onChange(\n        PatchEvent.from([setIfMissing([]), insert([ensureKey(item)], 'after', [-1])]).prefixAll(\n          member.name\n        )\n      )\n    },\n    [member.name, onChange]\n  )\n\n  const handleCollapse = useCallback(() => {\n    onSetPathCollapsed(member.field.path, true)\n  }, [onSetPathCollapsed, member.field.path])\n\n  const handleExpand = useCallback(() => {\n    onSetPathCollapsed(member.field.path, false)\n  }, [onSetPathCollapsed, member.field.path])\n\n  const handleCollapseItem = useCallback(\n    (itemKey: string) => {\n      onSetPathCollapsed(member.field.path.concat({_key: itemKey}), true)\n    },\n    [onSetPathCollapsed, member.field.path]\n  )\n\n  const handleExpandItem = useCallback(\n    (itemKey: string) => {\n      onSetPathCollapsed(member.field.path.concat({_key: itemKey}), false)\n    },\n    [onSetPathCollapsed, member.field.path]\n  )\n\n  const handleOpenItem = useCallback(\n    (path: Path) => {\n      onPathOpen(path)\n      onSetPathCollapsed(path, false)\n    },\n    [onPathOpen, onSetPathCollapsed]\n  )\n\n  const handleCloseItem = useCallback(() => {\n    onPathOpen(member.field.path)\n    onSetPathCollapsed(member.field.path, true)\n  }, [onPathOpen, member.field.path, onSetPathCollapsed])\n\n  const handleRemoveItem = useCallback(\n    (itemKey: string) => {\n      onChange(PatchEvent.from([unset(member.field.path.concat({_key: itemKey}))]))\n    },\n    [onChange, member.field.path]\n  )\n\n  const handleFocusChildPath = useCallback(\n    (path: Path) => {\n      onPathFocus(member.field.path.concat(path))\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const elementProps = useMemo(\n    (): ArrayOfObjectsInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.field.id,\n      ref: focusRef,\n    }),\n    [handleBlur, handleFocus, member.field.id]\n  )\n\n  const resolveInitialValue = useResolveInitialValueForType()\n\n  const inputProps = useMemo((): ArrayOfObjectsInputProps => {\n    return {\n      level: member.field.level,\n      members: member.field.members,\n      value: member.field.value as any,\n      readOnly: member.field.readOnly,\n      schemaType: member.field.schemaType,\n      changed: member.field.changed,\n      id: member.field.id,\n      onExpand: handleExpand,\n      onCollapse: handleCollapse,\n      onExpandItem: handleExpandItem,\n      onCollapseItem: handleCollapseItem,\n      onCloseItem: handleCloseItem,\n      onOpenItem: handleOpenItem,\n\n      focusPath: member.field.focusPath,\n      focused: member.field.focused,\n\n      path: member.field.path,\n\n      onChange: handleChange,\n      onInsert: handleInsert,\n      onMoveItem: handleMoveItem,\n      onRemoveItem: handleRemoveItem,\n      onAppendItem: handleAppendItem,\n      onPrependItem: handlePrependItem,\n      onFocusPath: handleFocusChildPath,\n      resolveInitialValue,\n\n      validation: member.field.validation,\n      presence: member.field.presence,\n      renderInput,\n      renderField,\n      renderItem,\n      renderPreview,\n      elementProps: elementProps,\n    }\n  }, [\n    member.field.level,\n    member.field.members,\n    member.field.value,\n    member.field.readOnly,\n    member.field.schemaType,\n    member.field.changed,\n    member.field.id,\n    member.field.focusPath,\n    member.field.focused,\n    member.field.path,\n    member.field.validation,\n    member.field.presence,\n    handleExpand,\n    handleCollapse,\n    handleExpandItem,\n    handleCollapseItem,\n    handleCloseItem,\n    handleOpenItem,\n    handleChange,\n    handleInsert,\n    handleMoveItem,\n    handleRemoveItem,\n    handleAppendItem,\n    handlePrependItem,\n    handleFocusChildPath,\n    renderInput,\n    renderField,\n    renderItem,\n    renderPreview,\n    elementProps,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const fieldProps = useMemo((): ArrayFieldProps => {\n    return {\n      name: member.name,\n      index: member.index,\n      level: member.field.level,\n      value: member.field.value,\n      title: member.field.schemaType.title,\n      description: member.field.schemaType.description,\n      collapsible: member.collapsible,\n      collapsed: member.collapsed,\n      changed: member.field.changed,\n      onCollapse: handleCollapse,\n      onExpand: handleExpand,\n      schemaType: member.field.schemaType,\n      inputId: member.field.id,\n      path: member.field.path,\n      presence: member.field.presence,\n      validation: member.field.validation,\n      children: renderedInput,\n      inputProps,\n    }\n  }, [\n    member.name,\n    member.index,\n    member.field.level,\n    member.field.value,\n    member.field.schemaType,\n    member.field.id,\n    member.field.path,\n    member.field.presence,\n    member.field.changed,\n    member.field.validation,\n    member.collapsible,\n    member.collapsed,\n    handleCollapse,\n    handleExpand,\n    renderedInput,\n    inputProps,\n  ])\n\n  return (\n    <FormCallbacksProvider\n      onFieldGroupSelect={onFieldGroupSelect}\n      onChange={handleChange}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onPathOpen={onPathOpen}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n    >\n      {useMemo(() => renderField(fieldProps), [fieldProps, renderField])}\n    </FormCallbacksProvider>\n  )\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {FieldMember} from '../../store'\nimport {\n  ArrayOfObjectsInputProps,\n  PrimitiveFieldProps,\n  PrimitiveInputProps,\n  RenderFieldCallback,\n  RenderInputCallback,\n} from '../../types'\nimport {FormPatch, PatchEvent, set, unset} from '../../patch'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {useFormCallbacks} from '../../studio/contexts/FormCallbacks'\nimport {isBooleanSchemaType, isNumberSchemaType} from '@sanity/types'\n\n/**\n * Responsible for creating inputProps and fieldProps to pass to ´renderInput´ and ´renderField´ for a primitive field/input\n * @param props - Component props\n */\nexport function PrimitiveField(props: {\n  member: FieldMember\n  renderInput: RenderInputCallback<PrimitiveInputProps>\n  renderField: RenderFieldCallback<PrimitiveFieldProps>\n}) {\n  const {member, renderInput, renderField} = props\n  const focusRef = useRef<{focus: () => void}>()\n\n  const {onPathBlur, onPathFocus, onChange} = useFormCallbacks()\n\n  useDidUpdate(member.field.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const handleBlur = useCallback(\n    (event: React.FocusEvent) => {\n      onPathBlur(member.field.path)\n    },\n    [member.field.path, onPathBlur]\n  )\n\n  const handleFocus = useCallback(\n    (event: React.FocusEvent) => {\n      onPathFocus(member.field.path)\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const handleChange = useCallback(\n    (event: FormPatch | FormPatch[] | PatchEvent) => {\n      onChange(PatchEvent.from(event).prefixAll(member.name))\n    },\n    [onChange, member.name]\n  )\n\n  const handleNativeChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      let inputValue: number | string | boolean = event.currentTarget.value\n      if (isNumberSchemaType(member.field.schemaType)) {\n        inputValue = event.currentTarget.valueAsNumber\n      } else if (isBooleanSchemaType(member.field.schemaType)) {\n        inputValue = event.currentTarget.checked\n      }\n\n      // `valueAsNumber` returns `NaN` on empty input\n      const hasEmptyValue =\n        inputValue === '' || (typeof inputValue === 'number' && isNaN(inputValue))\n\n      onChange(PatchEvent.from(hasEmptyValue ? unset() : set(inputValue)).prefixAll(member.name))\n    },\n    [member.name, member.field.schemaType, onChange]\n  )\n\n  const validationError =\n    useMemo(\n      () =>\n        member.field.validation\n          .filter((item) => item.level === 'error')\n          .map((item) => item.message)\n          .join('\\n'),\n      [member.field.validation]\n    ) || undefined\n\n  const elementProps = useMemo(\n    (): PrimitiveInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.field.id,\n      ref: focusRef,\n      onChange: handleNativeChange,\n      value: String(member.field.value || ''),\n      readOnly: Boolean(member.field.readOnly),\n      placeholder: member.field.schemaType.placeholder,\n    }),\n    [\n      handleBlur,\n      handleFocus,\n      handleNativeChange,\n      member.field.id,\n      member.field.readOnly,\n      member.field.schemaType.placeholder,\n      member.field.value,\n    ]\n  )\n\n  const inputProps = useMemo((): PrimitiveInputProps => {\n    return {\n      value: member.field.value as any,\n      readOnly: member.field.readOnly,\n      schemaType: member.field.schemaType as any,\n      changed: member.field.changed,\n      id: member.field.id,\n      path: member.field.path,\n      focused: member.field.focused,\n      level: member.field.level,\n      onChange: handleChange,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      validationError,\n      elementProps,\n    }\n  }, [\n    member.field.value,\n    member.field.readOnly,\n    member.field.schemaType,\n    member.field.changed,\n    member.field.id,\n    member.field.path,\n    member.field.focused,\n    member.field.level,\n    member.field.validation,\n    member.field.presence,\n    handleChange,\n    validationError,\n    elementProps,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const fieldProps = useMemo((): PrimitiveFieldProps => {\n    return {\n      name: member.name,\n      index: member.index,\n      level: member.field.level,\n      value: member.field.value as any,\n      schemaType: member.field.schemaType as any,\n      title: member.field.schemaType.title,\n      description: member.field.schemaType.description,\n      inputId: member.field.id,\n      path: member.field.path,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      children: renderedInput,\n      changed: member.field.changed,\n      inputProps: inputProps as any,\n    }\n  }, [\n    member.name,\n    member.index,\n    member.field.level,\n    member.field.value,\n    member.field.schemaType,\n    member.field.id,\n    member.field.path,\n    member.field.validation,\n    member.field.presence,\n    member.field.changed,\n    renderedInput,\n    inputProps,\n  ])\n\n  return <>{renderField(fieldProps)}</>\n}\n","import {isArraySchemaType, isObjectSchemaType, SchemaType} from '@sanity/types'\n\nexport function createProtoValue(type: SchemaType): any {\n  if (isObjectSchemaType(type)) {\n    return type.name === 'object' ? {} : {_type: type.name}\n  }\n  if (isArraySchemaType(type)) {\n    return []\n  }\n  if (type.jsonType === 'string') {\n    return ''\n  }\n  if (type.jsonType === 'number') {\n    return 0\n  }\n  if (type.jsonType === 'boolean') {\n    return false\n  }\n  return undefined\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {Path} from '@sanity/types'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {FieldMember, ObjectFormNode} from '../../store'\nimport {\n  ArrayOfObjectsInputProps,\n  ObjectFieldProps,\n  ObjectInputProps,\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../../types'\nimport {PatchArg, PatchEvent, setIfMissing} from '../../patch'\nimport {FormCallbacksProvider, useFormCallbacks} from '../../studio/contexts/FormCallbacks'\nimport {createProtoValue} from '../../utils/createProtoValue'\n\n/**\n * Responsible for creating inputProps and fieldProps to pass to ´renderInput´ and ´renderField´ for an object input\n * Note: \"ObjectField\" in this context means an object field of an object type (not \"a field of an object\")\n * @param props - Component props\n */\nexport const ObjectField = function ObjectField(props: {\n  member: FieldMember<ObjectFormNode>\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}) {\n  const {\n    onPathBlur,\n    onPathFocus,\n    onChange,\n    onPathOpen,\n    onSetPathCollapsed,\n    onSetFieldSetCollapsed,\n    onFieldGroupSelect,\n  } = useFormCallbacks()\n\n  const {member, renderField, renderInput, renderItem, renderPreview} = props\n  const focusRef = useRef<{focus: () => void}>()\n\n  useDidUpdate(member.field.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const handleBlur = useCallback(() => {\n    onPathBlur(member.field.path)\n  }, [member.field.path, onPathBlur])\n\n  const handleFocus = useCallback(() => {\n    onPathFocus(member.field.path)\n  }, [member.field.path, onPathFocus])\n\n  const handleFocusChildPath = useCallback(\n    (path: Path) => {\n      onPathFocus(member.field.path.concat(path))\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const handleChange = useCallback(\n    (event: PatchEvent | PatchArg) => {\n      onChange(\n        PatchEvent.from(event)\n          .prepend(setIfMissing(createProtoValue(member.field.schemaType)))\n          .prefixAll(member.name)\n      )\n    },\n    [onChange, member.field.schemaType, member.name]\n  )\n\n  const handleCollapse = useCallback(() => {\n    onSetPathCollapsed(member.field.path, true)\n  }, [onSetPathCollapsed, member.field.path])\n\n  const handleExpand = useCallback(() => {\n    onSetPathCollapsed(member.field.path, false)\n  }, [onSetPathCollapsed, member.field.path])\n\n  const handleCollapseField = useCallback(\n    (fieldName: string) => {\n      onSetPathCollapsed(member.field.path.concat(fieldName), true)\n    },\n    [onSetPathCollapsed, member.field.path]\n  )\n  const handleExpandField = useCallback(\n    (fieldName: string) => {\n      onSetPathCollapsed(member.field.path.concat(fieldName), false)\n    },\n    [onSetPathCollapsed, member.field.path]\n  )\n  const handleOpenField = useCallback(\n    (fieldName: string) => {\n      onPathOpen(member.field.path.concat(fieldName))\n    },\n    [onPathOpen, member.field.path]\n  )\n  const handleCloseField = useCallback(() => {\n    onPathOpen(member.field.path)\n  }, [onPathOpen, member.field.path])\n  const handleExpandFieldSet = useCallback(\n    (fieldsetName: string) => {\n      onSetFieldSetCollapsed(member.field.path.concat(fieldsetName), false)\n    },\n    [onSetFieldSetCollapsed, member.field.path]\n  )\n  const handleCollapseFieldSet = useCallback(\n    (fieldsetName: string) => {\n      onSetFieldSetCollapsed(member.field.path.concat(fieldsetName), true)\n    },\n    [onSetFieldSetCollapsed, member.field.path]\n  )\n\n  const handleOpen = useCallback(() => {\n    onPathOpen(member.field.path)\n  }, [onPathOpen, member.field.path])\n\n  const handleClose = useCallback(() => {\n    onPathOpen(member.field.path.slice(0, -1))\n  }, [onPathOpen, member.field.path])\n\n  const handleSelectFieldGroup = useCallback(\n    (groupName: string) => {\n      onFieldGroupSelect(member.field.path, groupName)\n    },\n    [onFieldGroupSelect, member.field.path]\n  )\n\n  const elementProps = useMemo(\n    (): ArrayOfObjectsInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.field.id,\n      ref: focusRef,\n    }),\n    [handleBlur, handleFocus, member.field.id]\n  )\n\n  const inputProps = useMemo((): ObjectInputProps => {\n    return {\n      elementProps,\n      level: member.field.level,\n      members: member.field.members,\n      value: member.field.value,\n      readOnly: member.field.readOnly,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      schemaType: member.field.schemaType,\n      changed: member.field.changed,\n      id: member.field.id,\n      onFieldGroupSelect: handleSelectFieldGroup,\n      onOpenField: handleOpenField,\n      onCloseField: handleCloseField,\n      onCollapseField: handleCollapseField,\n      onExpandField: handleExpandField,\n      onExpandFieldSet: handleExpandFieldSet,\n      onCollapseFieldSet: handleCollapseFieldSet,\n      onFocusPath: handleFocusChildPath,\n      path: member.field.path,\n      focusPath: member.field.focusPath,\n      focused: member.field.focused,\n      groups: member.field.groups,\n      onChange: handleChange,\n      renderField,\n      renderInput,\n      renderItem,\n      renderPreview,\n    }\n  }, [\n    member.field.level,\n    member.field.members,\n    member.field.value,\n    member.field.readOnly,\n    member.field.validation,\n    member.field.presence,\n    member.field.schemaType,\n    member.field.changed,\n    member.field.id,\n    member.field.path,\n    member.field.focusPath,\n    member.field.focused,\n    member.field.groups,\n    handleBlur,\n    handleSelectFieldGroup,\n    handleOpenField,\n    handleCloseField,\n    handleCollapseField,\n    handleExpandField,\n    handleExpandFieldSet,\n    handleCollapseFieldSet,\n    handleFocus,\n    handleFocusChildPath,\n    handleChange,\n    renderField,\n    renderInput,\n    renderItem,\n    renderPreview,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const fieldProps = useMemo((): ObjectFieldProps => {\n    return {\n      name: member.name,\n      index: member.index,\n      level: member.field.level,\n      value: member.field.value,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      title: member.field.schemaType.title,\n      description: member.field.schemaType.description,\n\n      collapsible: member.collapsible,\n      collapsed: member.collapsed,\n      onCollapse: handleCollapse,\n      onExpand: handleExpand,\n\n      open: member.open,\n      changed: member.field.changed,\n\n      onOpen: handleOpen,\n      onClose: handleClose,\n\n      schemaType: member.field.schemaType,\n      inputId: member.field.id,\n      path: member.field.path,\n      children: renderedInput,\n      inputProps,\n    }\n  }, [\n    member.name,\n    member.index,\n    member.field.changed,\n    member.field.level,\n    member.field.value,\n    member.field.validation,\n    member.field.presence,\n    member.field.schemaType,\n    member.field.id,\n    member.field.path,\n    member.collapsible,\n    member.collapsed,\n    member.open,\n    handleCollapse,\n    handleExpand,\n    handleOpen,\n    handleClose,\n    renderedInput,\n    inputProps,\n  ])\n\n  return (\n    <FormCallbacksProvider\n      onFieldGroupSelect={onFieldGroupSelect}\n      onChange={handleChange}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      onPathOpen={onPathOpen}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n    >\n      {useMemo(() => renderField(fieldProps), [fieldProps, renderField])}\n    </FormCallbacksProvider>\n  )\n}\n","import React, {MutableRefObject, useCallback, useMemo, useRef} from 'react'\nimport {ArrayOfPrimitivesFormNode, FieldMember} from '../../store'\nimport {\n  ArrayOfObjectsInputProps,\n  ArrayOfPrimitivesFieldProps,\n  ArrayOfPrimitivesInputProps,\n  FIXME,\n  MoveItemEvent,\n  RenderArrayOfPrimitivesItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../../types'\nimport {FormCallbacksProvider, useFormCallbacks} from '../../studio/contexts/FormCallbacks'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {PatchArg, PatchEvent, set, setIfMissing, unset} from '../../patch'\nimport {PrimitiveValue} from '../../inputs/arrays/ArrayOfPrimitivesInput/types'\n\nfunction move<T>(arr: T[], from: number, to: number): T[] {\n  const copy = arr.slice()\n  const val = copy[from]\n  copy.splice(from, 1)\n  copy.splice(to, 0, val)\n  return copy\n}\n\n/**\n * @example\n * Inserts \"hello\" at the beginning\n * ```ts\n * insertAfter(-1, [\"one\", \"two\"], \"hello\")\n * // => [\"hello\", \"one\", \"two\"]\n * ```\n */\nfunction insertAfter<T>(\n  /**\n   * index to insert item after. An index of -1 will prepend the item\n   */\n  index: number,\n  /**\n   * the array to insert the item into\n   */\n  arr: T[],\n  /**\n   * the item to insert\n   */\n  items: T[]\n): T[] {\n  const copy = arr.slice()\n  copy.splice(index + 1, 0, ...items)\n  return copy\n}\n\n/**\n * Responsible for creating inputProps and fieldProps to pass to ´renderInput´ and ´renderField´ for an array input\n * Note: \"ArrayField\" in this context means an object field of an array type\n * @param props - Component props\n */\nexport function ArrayOfPrimitivesField(props: {\n  member: FieldMember<ArrayOfPrimitivesFormNode>\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderArrayOfPrimitivesItemCallback\n  renderPreview: RenderPreviewCallback\n}) {\n  const {\n    onPathBlur,\n    onPathFocus,\n    onChange,\n    onPathOpen,\n    onSetPathCollapsed,\n    onSetFieldSetCollapsed,\n    onFieldGroupSelect,\n  } = useFormCallbacks()\n  const {member, renderField, renderInput, renderItem, renderPreview} = props\n\n  const focusRef = useRef<Element & {focus: () => void}>()\n\n  useDidUpdate(member.field.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const handleFocus = useCallback(\n    (event: React.FocusEvent) => {\n      // We want to handle focus when the array input *itself* element receives\n      // focus, not when a child element receives focus, but React has decided\n      // to let focus bubble, so this workaround is needed\n      // Background: https://github.com/facebook/react/issues/6410#issuecomment-671915381\n      if (event.currentTarget === event.target && event.currentTarget === focusRef.current) {\n        onPathFocus(member.field.path)\n      }\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const handleBlur = useCallback(\n    (event: React.FocusEvent) => {\n      // We want to handle blur when the array input *itself* element receives\n      // blur, not when a child element receives blur, but React has decided\n      // to let focus events bubble, so this workaround is needed\n      // Background: https://github.com/facebook/react/issues/6410#issuecomment-671915381\n      if (event.currentTarget === event.target && event.currentTarget === focusRef.current) {\n        onPathBlur(member.field.path)\n      }\n    },\n    [member.field.path, onPathBlur]\n  )\n\n  const handleChange = useCallback(\n    (event: PatchEvent | PatchArg) => {\n      onChange(PatchEvent.from(event).prepend(setIfMissing([])).prefixAll(member.name))\n    },\n    [onChange, member.name]\n  )\n\n  const handleSetCollapsed = useCallback(\n    (collapsed: boolean) => {\n      onSetPathCollapsed(member.field.path, collapsed)\n    },\n    [onSetPathCollapsed, member.field.path]\n  )\n\n  const handleCollapse = useCallback(() => {\n    onSetPathCollapsed(member.field.path, true)\n  }, [onSetPathCollapsed, member.field.path])\n  const handleExpand = useCallback(() => {\n    onSetPathCollapsed(member.field.path, false)\n  }, [onSetPathCollapsed, member.field.path])\n\n  const setValue = useCallback(\n    (nextValue: PrimitiveValue[]) => {\n      onChange(\n        PatchEvent.from(nextValue.length === 0 ? unset() : set(nextValue)).prefixAll(member.name)\n      )\n    },\n    [member.name, onChange]\n  )\n\n  const handleMoveItem = useCallback(\n    (event: MoveItemEvent) => {\n      const {value = []} = member.field\n      if (event.fromIndex === event.toIndex) {\n        return\n      }\n\n      setValue(move(value, event.fromIndex, event.toIndex))\n    },\n    [member.field, setValue]\n  )\n\n  const handleAppend = useCallback(\n    (itemValue: PrimitiveValue) => {\n      const {value = []} = member.field\n      setValue(value.concat(itemValue))\n    },\n    [member.field, setValue]\n  )\n\n  const handlePrepend = useCallback(\n    (itemValue: PrimitiveValue) => {\n      const {value = []} = member.field\n      setValue([itemValue].concat(value || []))\n    },\n    [member.field, setValue]\n  )\n\n  const handleInsert = useCallback(\n    (event: {items: PrimitiveValue[]; position: 'before' | 'after'; referenceIndex: number}) => {\n      const {value = []} = member.field\n\n      const insertIndex = event.referenceIndex + (event.position === 'before' ? -1 : 0)\n      setValue(insertAfter(insertIndex, value, event.items))\n    },\n    [member.field, setValue]\n  )\n\n  const handleRemoveItem = useCallback(\n    (index: number) => {\n      onChange(PatchEvent.from([unset(member.field.path.concat(index))]))\n    },\n    [onChange, member.field.path]\n  )\n\n  const handleFocusIndex = useCallback(\n    (index: number) => {\n      onPathFocus(member.field.path.concat([index]))\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const elementProps = useMemo(\n    (): ArrayOfObjectsInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.field.id,\n      ref: focusRef,\n    }),\n    [handleBlur, handleFocus, member.field.id]\n  )\n\n  const inputProps = useMemo((): ArrayOfPrimitivesInputProps => {\n    return {\n      level: member.field.level,\n      members: member.field.members,\n      value: member.field.value as any,\n      readOnly: member.field.readOnly,\n      onSetCollapsed: handleSetCollapsed,\n      schemaType: member.field.schemaType,\n      changed: member.field.changed,\n      id: member.field.id,\n      elementProps,\n      path: member.field.path,\n      focusPath: member.field.focusPath,\n      focused: member.field.focused,\n      onChange: handleChange,\n      onInsert: handleInsert,\n      onMoveItem: handleMoveItem,\n      onRemoveItem: handleRemoveItem,\n      onAppendItem: handleAppend,\n      onPrependItem: handlePrepend,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      renderInput,\n      renderItem,\n      onFocusIndex: handleFocusIndex,\n      renderPreview,\n    }\n  }, [\n    member.field.level,\n    member.field.members,\n    member.field.value,\n    member.field.readOnly,\n    member.field.schemaType,\n    member.field.changed,\n    member.field.id,\n    member.field.path,\n    member.field.focusPath,\n    member.field.focused,\n    member.field.validation,\n    member.field.presence,\n    handleSetCollapsed,\n    elementProps,\n    handleChange,\n    handleInsert,\n    handleMoveItem,\n    handleRemoveItem,\n    handleAppend,\n    handlePrepend,\n    renderInput,\n    renderItem,\n    handleFocusIndex,\n    renderPreview,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const fieldProps = useMemo((): ArrayOfPrimitivesFieldProps => {\n    return {\n      name: member.name,\n      index: member.index,\n      level: member.field.level,\n      value: member.field.value,\n      title: member.field.schemaType.title,\n      description: member.field.schemaType.description,\n      collapsible: member.collapsible,\n      collapsed: member.collapsed,\n      onExpand: handleExpand,\n      changed: member.field.changed,\n      onCollapse: handleCollapse,\n      schemaType: member.field.schemaType,\n      inputId: member.field.id,\n      path: member.field.path,\n      presence: member.field.presence,\n      validation: member.field.validation,\n      children: renderedInput,\n      inputProps,\n    }\n  }, [\n    member.name,\n    member.index,\n    member.field.level,\n    member.field.value,\n    member.field.schemaType,\n    member.field.id,\n    member.field.path,\n    member.field.presence,\n    member.field.validation,\n    member.collapsible,\n    member.collapsed,\n    member.field.changed,\n    handleExpand,\n    handleCollapse,\n    renderedInput,\n    inputProps,\n  ])\n\n  return (\n    <FormCallbacksProvider\n      onFieldGroupSelect={onFieldGroupSelect}\n      onChange={handleChange}\n      onPathOpen={onPathOpen}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n    >\n      {useMemo(() => renderField(fieldProps as FIXME), [fieldProps, renderField])}\n    </FormCallbacksProvider>\n  )\n}\n","import React, {memo} from 'react'\nimport {FieldMember} from '../store'\nimport {\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderArrayOfObjectsItemCallback,\n  FIXME,\n  RenderPreviewCallback,\n} from '../types'\nimport {ArrayOfObjectsField} from './fields/ArrayOfObjectsField'\nimport {PrimitiveField} from './fields/PrimitiveField'\nimport {ObjectField} from './fields/ObjectField'\nimport {ArrayOfPrimitivesField} from './fields/ArrayOfPrimitivesField'\nimport {isMemberArrayOfObjects, isMemberArrayOfPrimitives, isMemberObject} from './fields/asserters'\n\nexport interface MemberFieldProps {\n  member: FieldMember\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}\n\nexport const MemberField = memo(function MemberField(props: MemberFieldProps) {\n  const {member, renderField, renderInput, renderItem, renderPreview} = props\n\n  if (isMemberObject(member)) {\n    // this field is of an object type\n    return (\n      <ObjectField\n        member={member}\n        renderField={renderField}\n        renderInput={renderInput}\n        renderItem={renderItem}\n        renderPreview={renderPreview}\n      />\n    )\n  }\n\n  if (isMemberArrayOfPrimitives(member)) {\n    return (\n      <ArrayOfPrimitivesField\n        member={member}\n        renderField={renderField}\n        renderInput={renderInput}\n        // todo: these have different signatures, so renderItem for a primitive input should not be the same as renderItem in array of object inputs\n        renderItem={renderItem as FIXME}\n        renderPreview={renderPreview}\n      />\n    )\n  }\n\n  if (isMemberArrayOfObjects(member)) {\n    return (\n      <ArrayOfObjectsField\n        member={member}\n        renderField={renderField}\n        renderInput={renderInput}\n        renderItem={renderItem}\n        renderPreview={renderPreview}\n      />\n    )\n  }\n\n  return <PrimitiveField member={member} renderField={renderField} renderInput={renderInput} />\n})\n","import {ErrorOutlineIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Flex, Text} from '@sanity/ui'\nimport React, {ComponentProps} from 'react'\nimport styled from 'styled-components'\n\ninterface AlertProps extends Omit<ComponentProps<typeof Card>, 'title'> {\n  title: React.ReactNode\n  status?: 'warning' | 'error'\n  suffix?: React.ReactNode\n}\n\nconst STATUS_TONES = {\n  warning: 'caution',\n  error: 'critical',\n} as const\n\nconst SuffixBox = styled(Box)`\n  border-top: 1px solid var(--card-border-color);\n`\n\nexport function Alert(props: AlertProps) {\n  const {children, status = 'warning', suffix, title, ...rest} = props\n\n  return (\n    <Card radius={2} tone={STATUS_TONES[status]} {...rest} data-ui=\"Alert\">\n      <Flex padding={4}>\n        <Box>\n          <Text size={1}>\n            {status === 'warning' && <WarningOutlineIcon />}\n            {status === 'error' && <ErrorOutlineIcon />}\n          </Text>\n        </Box>\n\n        <Box flex={1} marginLeft={3}>\n          <Text size={1} weight=\"semibold\">\n            {title}\n          </Text>\n\n          {children && <Box marginTop={3}>{children}</Box>}\n        </Box>\n      </Flex>\n\n      {suffix && <SuffixBox>{suffix}</SuffixBox>}\n    </Card>\n  )\n}\n","import {ToggleArrowRightIcon} from '@sanity/icons'\nimport {Box, Flex, Inline, Text} from '@sanity/ui'\nimport React, {useCallback, useEffect, useState} from 'react'\nimport styled from 'styled-components'\n\ninterface DetailsProps {\n  children?: React.ReactNode\n  margin?: number | number[]\n  marginX?: number | number[]\n  marginY?: number | number[]\n  marginTop?: number | number[]\n  marginRight?: number | number[]\n  marginBottom?: number | number[]\n  marginLeft?: number | number[]\n  open?: boolean\n  icon?: React.ReactNode\n  title?: React.ReactNode\n}\n\nconst HeaderButton = styled.button`\n  display: block;\n  -webkit-font-smoothing: inherit;\n  appearance: none;\n  font: inherit;\n  background: none;\n  width: 100%;\n  text-align: left;\n  border: 0;\n  margin: 0;\n  padding: 0;\n  outline: none;\n`\n\nconst ToggleArrow = styled(ToggleArrowRightIcon)<{open: boolean}>`\n  transform: ${(props) => (props.open ? 'rotate(90deg)' : '')};\n`\n\nconst Header = styled(Flex)`\n  cursor: default;\n`\n\nconst IconBox = styled(Box)`\n  & > div > svg {\n    transform: rotate(0);\n    transition: transform 100ms;\n  }\n\n  &[data-open] > div > svg {\n    transform: rotate(90deg);\n  }\n`\n\nexport function Details(props: DetailsProps) {\n  const {children, open: openProp, icon, title = 'Details', ...restProps} = props\n  const [open, setOpen] = useState(openProp || false)\n\n  const handleToggle = useCallback(() => setOpen((v) => !v), [])\n\n  useEffect(() => setOpen(openProp || false), [openProp])\n\n  return (\n    <Box {...restProps}>\n      <HeaderButton type=\"button\" onClick={handleToggle}>\n        <Header align=\"center\">\n          <Inline>\n            <IconBox data-open={open ? '' : undefined}>\n              <Text size={1}>\n                <ToggleArrow open={open} />\n              </Text>\n            </IconBox>\n            {icon && <Box marginLeft={1}>{icon}</Box>}\n            <Box flex={1} marginLeft={1}>\n              <Text size={1} weight=\"medium\">\n                {title}\n              </Text>\n            </Box>\n          </Inline>\n        </Header>\n      </HeaderButton>\n\n      <Box hidden={!open} marginTop={3}>\n        {children}\n      </Box>\n    </Box>\n  )\n}\n","import isValidDate from 'date-fns/isValid'\n\nconst TRUTHY_STRINGS = ['yes', 'true', '1']\nconst FALSEY_STRINGS = ['false', 'no', 'false', '0', 'null']\nconst BOOL_STRINGS = TRUTHY_STRINGS.concat(FALSEY_STRINGS)\n\nconst TRUE = (): true => true\n\nconst has = (prop: string) => (val?: Record<string, any>) => val && val[prop]\nconst is = (typeName: string) => (val?: Record<string, any>) => (val && val._type) === typeName\n\nfunction toLocalDate(input: Date) {\n  const newDate = new Date(input.getTime() + input.getTimezoneOffset() * 60 * 1000)\n  const offset = input.getTimezoneOffset() / 60\n  const hours = input.getHours()\n  newDate.setHours(hours - offset)\n  return newDate\n}\n\nfunction getTZName() {\n  try {\n    return Intl.DateTimeFormat().resolvedOptions().timeZone\n  } catch (e) {} // eslint-disable-line no-empty\n  return null\n}\n\nexport interface ValueConverter {\n  test: NumberConstructor | ((value: any) => boolean)\n  convert:\n    | NumberConstructor\n    | StringConstructor\n    | ((value: any) => boolean | Record<string, any> | string)\n}\n\nexport const converters: {[fromType: string]: {[toType: string]: ValueConverter}} = {\n  string: {\n    number: {\n      test: Number,\n      convert: Number,\n    },\n    boolean: {\n      test: (value: any) => BOOL_STRINGS.includes(value.toLowerCase()),\n      convert: (value: any) =>\n        TRUTHY_STRINGS.includes(value.toLowerCase()) ||\n        !FALSEY_STRINGS.includes(value.toLowerCase()),\n    },\n    richDate: {\n      test: (value: any) => isValidDate(value),\n      convert: (value: any): Record<string, any> => {\n        return {\n          _type: 'richDate',\n          local: toLocalDate(new Date(value)).toJSON(),\n          utc: new Date(value).toJSON(),\n          timezone: getTZName(),\n          offset: new Date().getTimezoneOffset(),\n        }\n      },\n    },\n  },\n  date: {\n    richDate: {\n      test: is('date'),\n      convert: (value: any) => Object.assign({}, value, {_type: 'richDate'}),\n    },\n  },\n  richDate: {\n    datetime: {\n      test: has('utc'),\n      convert: (value: any) => value.utc,\n    },\n  },\n  number: {\n    string: {\n      test: TRUE,\n      convert: String,\n    },\n    boolean: {\n      test: TRUE,\n      convert: Number,\n    },\n  },\n  boolean: {\n    string: {\n      test: TRUE,\n      convert: (value: any) => (value ? 'Yes' : 'No'),\n    },\n    number: {\n      test: TRUE,\n      convert: Number,\n    },\n  },\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {Button, Card, Code, Grid, Stack, Text} from '@sanity/ui'\nimport {useSchema} from '../../../hooks'\nimport {PatchEvent, setIfMissing, unset} from '../../patch'\nimport {Alert} from '../../components/Alert'\nimport {Details} from '../../components/Details'\nimport {isDev} from '../../../environment'\n\ninterface UntypedValueInputProps {\n  validTypes: string[]\n  value: Record<string, unknown>\n  onChange: (event: PatchEvent, value?: Record<string, unknown>) => void\n}\n\nfunction SetMissingTypeButton({\n  value,\n  targetType,\n  onChange,\n}: {\n  value: Record<string, unknown>\n  targetType: string\n  onChange: UntypedValueInputProps['onChange']\n}) {\n  const itemValue = useMemo(() => ({...value, _type: targetType}), [targetType, value])\n\n  const handleClick = useCallback(\n    () => onChange(PatchEvent.from(setIfMissing(targetType, ['_type'])), itemValue),\n    [itemValue, onChange, targetType]\n  )\n\n  return (\n    <Button\n      onClick={handleClick}\n      text={\n        <>\n          Convert to <code>{targetType}</code>\n        </>\n      }\n    />\n  )\n}\n\nfunction UnsetItemButton({\n  value,\n  onChange,\n  validTypes,\n}: {\n  value: Record<string, unknown>\n  validTypes: string[]\n  onChange: UntypedValueInputProps['onChange']\n}) {\n  // Doesn't matter which `_type` we use as long as it's allowed by the array\n  const itemValue = useMemo(() => ({...value, _type: validTypes[0]}), [validTypes, value])\n\n  const handleClick = useCallback(\n    () => onChange(PatchEvent.from(unset()), itemValue),\n    [itemValue, onChange]\n  )\n\n  return <Button onClick={handleClick} tone=\"critical\" text=\"Unset value\" />\n}\n\n/**\n * When the value does not have an `_type` property,\n * but the schema has a named type\n */\nexport function UntypedValueInput({validTypes, value, onChange}: UntypedValueInputProps) {\n  const schema = useSchema()\n  const isSingleValidType = validTypes.length === 1\n  const isHoistedType = schema.has(validTypes[0])\n\n  return (\n    <Alert\n      status=\"warning\"\n      title={\n        <>\n          Property value missing <code>_type</code>\n        </>\n      }\n    >\n      <Details open={isDev} title={<>Developer info</>}>\n        <Stack space={3}>\n          <Text as=\"p\" muted size={1}>\n            Encountered an object value without a <code>_type</code> property.\n          </Text>\n\n          {isSingleValidType && !isHoistedType && (\n            <Text as=\"p\" muted size={1}>\n              Either remove the <code>name</code> property of the object declaration, or set{' '}\n              <code>_type</code> property on items.\n            </Text>\n          )}\n\n          {!isSingleValidType && (\n            <Text as=\"p\" muted size={1}>\n              The following types are valid here according to schema:\n            </Text>\n          )}\n\n          {!isSingleValidType && (\n            <Stack as=\"ul\" space={2}>\n              {validTypes.map((validType) => (\n                <Text as=\"li\" key={validType} muted size={1}>\n                  <code>{validType}</code>\n                </Text>\n              ))}\n            </Stack>\n          )}\n\n          <Stack space={2}>\n            <Text as=\"h4\" weight=\"semibold\" size={1}>\n              Current value (<code>object</code>):\n            </Text>\n\n            <Card border overflow=\"auto\" padding={2} radius={2} tone=\"inherit\">\n              <Code language=\"json\">{JSON.stringify(value, null, 2)}</Code>\n            </Card>\n          </Stack>\n\n          <Grid columns={[1, 2, 2]} gap={1}>\n            {isSingleValidType && (\n              <SetMissingTypeButton onChange={onChange} targetType={validTypes[0]} value={value} />\n            )}\n\n            <UnsetItemButton onChange={onChange} validTypes={validTypes} value={value} />\n          </Grid>\n        </Stack>\n      </Details>\n    </Alert>\n  )\n}\n","import {Button, Card, Code, Stack, Text} from '@sanity/ui'\nimport React, {forwardRef, useCallback, useImperativeHandle, useMemo} from 'react'\nimport {isDev} from '../../../environment'\nimport {PatchEvent, set, unset} from '../../patch'\nimport {Alert} from '../../components/Alert'\nimport {Details} from '../../components/Details'\nimport {converters as CONVERTERS, ValueConverter} from './converters'\nimport {UntypedValueInput} from './UntypedValueInput'\n\ninterface Converter extends ValueConverter {\n  from: string\n  to: string\n}\n\nfunction getConverters(value: unknown, actualType: string, validTypes: string[]): Converter[] {\n  if (!(actualType in CONVERTERS)) {\n    return []\n  }\n\n  return Object.keys(CONVERTERS[actualType])\n    .filter((targetType) => validTypes.includes(targetType))\n    .map((targetType) => ({\n      from: actualType,\n      to: targetType,\n      ...CONVERTERS[actualType][targetType],\n    }))\n    .filter((converter) => converter.test(value))\n}\n\ninterface InvalidValueProps {\n  actualType: string\n  validTypes: string[]\n  value?: unknown\n  onChange: (event: PatchEvent) => void\n}\n\nexport const InvalidValueInput = forwardRef(\n  (props: InvalidValueProps, ref: React.Ref<{focus: () => void}>) => {\n    const {value, actualType, validTypes, onChange} = props\n\n    useImperativeHandle(ref, () => ({\n      // @todo\n      focus: () => undefined,\n    }))\n\n    const handleClearClick = useCallback(() => {\n      onChange(PatchEvent.from(unset()))\n    }, [onChange])\n\n    const handleConvertTo = useCallback(\n      (converted) => {\n        onChange(PatchEvent.from(set(converted)))\n      },\n      [onChange]\n    )\n\n    const converters = useMemo(\n      () => getConverters(value, actualType, validTypes),\n      [value, actualType, validTypes]\n    )\n\n    if (typeof value === 'object' && value !== null && !('_type' in value)) {\n      return (\n        <UntypedValueInput\n          value={value as Record<string, unknown>}\n          validTypes={validTypes}\n          onChange={onChange}\n        />\n      )\n    }\n\n    const suffix = (\n      <Stack padding={2}>\n        <Button onClick={handleClearClick} tone=\"critical\" text=\"Reset value\" />\n      </Stack>\n    )\n\n    return (\n      <Alert status=\"error\" suffix={suffix} title={<>Invalid property value</>}>\n        <Text as=\"p\" muted size={1}>\n          The property value is stored as a value type that does not match the expected type.\n        </Text>\n\n        <Details marginTop={4} open={isDev} title={<>Developer info</>}>\n          <Stack space={3}>\n            {validTypes.length === 1 && (\n              <Text as=\"p\" muted size={1}>\n                The value of this property must be of type <code>{validTypes[0]}</code> according to\n                the schema.\n              </Text>\n            )}\n\n            {validTypes.length === 1 && (\n              <Text as=\"p\" muted size={1}>\n                Mismatching value types typically occur when the schema has recently been changed.\n              </Text>\n            )}\n\n            {validTypes.length !== 1 && (\n              <Text as=\"p\" muted size={1}>\n                Only the following types are valid here according to schema:\n              </Text>\n            )}\n\n            {validTypes.length !== 1 && (\n              <Stack as=\"ul\" space={2}>\n                {validTypes.map((validType) => (\n                  <Text as=\"li\" key={validType}>\n                    <code>{validType}</code>\n                  </Text>\n                ))}\n              </Stack>\n            )}\n\n            <Stack marginTop={2} space={2}>\n              <Text size={1} weight=\"semibold\">\n                The current value (<code>{actualType}</code>)\n              </Text>\n\n              <Card border padding={2} radius={2} tone=\"inherit\">\n                <Code language=\"json\" size={1}>\n                  {JSON.stringify(value, null, 2)}\n                </Code>\n              </Card>\n            </Stack>\n\n            {converters.length > 0 && (\n              <Stack space={1}>\n                {converters.map((converter) => (\n                  <ConvertButton\n                    converter={converter}\n                    key={`${converter.from}-${converter.to}`}\n                    onConvert={handleConvertTo}\n                    value={value}\n                  />\n                ))}\n              </Stack>\n            )}\n          </Stack>\n        </Details>\n      </Alert>\n    )\n  }\n)\n\nInvalidValueInput.displayName = 'InvalidValueInput'\n\nfunction ConvertButton({\n  converter,\n  onConvert,\n  value,\n}: {\n  converter: Converter\n  onConvert: (v: string | number | boolean | Record<string, unknown>) => void\n  value: unknown\n}) {\n  const handleClick = useCallback(\n    () => onConvert(converter.convert(value)),\n    [converter, onConvert, value]\n  )\n\n  return (\n    <Button\n      onClick={handleClick}\n      text={\n        <>\n          Convert to <code>{converter.to}</code>\n        </>\n      }\n    />\n  )\n}\n","/* eslint-disable camelcase */\n\nimport {hues} from '@sanity/color'\nimport {ErrorOutlineIcon, InfoOutlineIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Flex, Placement, Stack, Text, Tooltip} from '@sanity/ui'\nimport React, {useMemo} from 'react'\nimport {NodeValidation} from '../../types/common'\n\nexport interface FormFieldValidationStatusProps {\n  /**\n   * @alpha\n   */\n  validation?: NodeValidation[]\n  /**\n   * @alpha\n   */\n  __unstable_showSummary?: boolean\n  fontSize?: number | number\n  placement?: Placement\n  portal?: boolean\n}\n\nconst EMPTY_ARRAY: never[] = []\n\nconst VALIDATION_COLORS: Record<'error' | 'warning' | 'info', string> = {\n  error: hues.red[500].hex,\n  warning: hues.yellow[500].hex,\n  info: hues.blue[500].hex,\n}\n\nconst VALIDATION_ICONS: Record<'error' | 'warning' | 'info', React.ReactElement> = {\n  error: <ErrorOutlineIcon data-testid=\"input-validation-icon-error\" />,\n  warning: <WarningOutlineIcon data-testid=\"input-validation-icon-warning\" />,\n  info: <InfoOutlineIcon data-testid=\"input-validation-icon-info\" />,\n}\n\nexport function FormFieldValidationStatus(props: FormFieldValidationStatusProps) {\n  const {\n    validation = EMPTY_ARRAY,\n    __unstable_showSummary: showSummary,\n    fontSize,\n    placement = 'top',\n    portal,\n  } = props\n\n  const errors = validation.filter((v) => v.level === 'error')\n  const warnings = validation.filter((v) => v.level === 'warning')\n  const info = validation.filter((v) => v.level === 'info')\n\n  const hasErrors = errors.length > 0\n  const hasWarnings = warnings.length > 0\n  const hasInfo = info.length > 0\n\n  const statusIcon = useMemo(() => {\n    if (hasErrors) return VALIDATION_ICONS.error\n    if (hasWarnings) return VALIDATION_ICONS.warning\n    if (hasInfo) return VALIDATION_ICONS.info\n    return undefined\n  }, [hasErrors, hasInfo, hasWarnings])\n\n  const statusColor = useMemo(() => {\n    if (hasErrors) return VALIDATION_COLORS.error\n    if (hasWarnings) return VALIDATION_COLORS.warning\n    if (hasInfo) return VALIDATION_COLORS.info\n    return undefined\n  }, [hasErrors, hasInfo, hasWarnings])\n\n  return (\n    <Tooltip\n      content={\n        <Stack padding={3} space={3}>\n          {showSummary && <FormFieldValidationSummary validation={validation} />}\n\n          {!showSummary && (\n            <>\n              {validation.map((item, itemIndex) => (\n                // eslint-disable-next-line react/no-array-index-key\n                <FormFieldValidationStatusItem validation={item} key={itemIndex} />\n              ))}\n            </>\n          )}\n        </Stack>\n      }\n      portal={portal}\n      placement={placement}\n      fallbackPlacements={['bottom', 'right', 'left']}\n    >\n      <div>\n        <Text muted size={fontSize} weight=\"semibold\" style={{color: statusColor}}>\n          {statusIcon}\n        </Text>\n      </div>\n    </Tooltip>\n  )\n}\n\nfunction FormFieldValidationStatusItem(props: {validation: NodeValidation}) {\n  const {validation} = props\n\n  const statusIcon = useMemo(() => {\n    if (validation.level === 'error') return VALIDATION_ICONS.error\n    if (validation.level === 'warning') return VALIDATION_ICONS.warning\n    if (validation.level === 'info') return VALIDATION_ICONS.info\n    return undefined\n  }, [validation])\n\n  const statusColor = useMemo(() => {\n    if (validation.level === 'error') return VALIDATION_COLORS.error\n    if (validation.level === 'warning') return VALIDATION_COLORS.warning\n    if (validation.level === 'info') return VALIDATION_COLORS.info\n    return undefined\n  }, [validation])\n\n  return (\n    <Flex>\n      <Box marginRight={2}>\n        <Text size={1} style={{color: statusColor}}>\n          {statusIcon}\n        </Text>\n      </Box>\n      <Box flex={1}>\n        <Text muted size={1}>\n          {validation.message}\n        </Text>\n      </Box>\n    </Flex>\n  )\n}\n\nfunction FormFieldValidationSummary({validation}: {validation: NodeValidation[]}) {\n  const errorMarkers = validation.filter((item) => item.level === 'error')\n  const warningMarkers = validation.filter((item) => item.level === 'warning')\n  const errorLen = errorMarkers.length\n  const warningLen = warningMarkers.length\n\n  const errorsStr = `error${errorLen === 1 ? '' : 's'}`\n  const warningsStr = `warning${warningLen === 1 ? '' : 's'}`\n  const errorText = errorLen && `${errorLen} ${errorsStr}`\n  const warningText = warningLen && `${warningLen} ${warningsStr}`\n\n  const hasErrors = errorLen > 0\n  const hasWarnings = warningLen > 0\n  const hasBoth = hasErrors && hasWarnings\n\n  return (\n    <Text muted size={1}>\n      {errorText || ''}\n      {hasBoth && <> and </>}\n      {warningText || ''}\n    </Text>\n  )\n}\n","/* eslint-disable camelcase */\n\nimport {Box, Flex, Stack, Text} from '@sanity/ui'\nimport React, {memo} from 'react'\nimport {NodeValidation} from '../../types'\nimport {FormFieldValidationStatus} from './FormFieldValidationStatus'\n\nexport interface FormFieldHeaderTextProps {\n  /**\n   * @alpha\n   */\n  validation?: NodeValidation[]\n  description?: React.ReactNode\n  /**\n   * The unique ID used to target the actual input element\n   */\n  inputId?: string\n  title?: React.ReactNode\n}\n\nconst EMPTY_ARRAY: never[] = []\n\nexport const FormFieldHeaderText = memo(function FormFieldHeaderText(\n  props: FormFieldHeaderTextProps\n) {\n  const {description, inputId, title, validation = EMPTY_ARRAY} = props\n  const hasValidations = validation.length > 0\n\n  return (\n    <Stack space={2}>\n      <Flex>\n        <Text as=\"label\" htmlFor={inputId} weight=\"semibold\" size={1}>\n          {title || <span style={{color: 'var(--card-muted-fg-color)'}}>Untitled</span>}\n        </Text>\n\n        {hasValidations && (\n          <Box marginLeft={2}>\n            <FormFieldValidationStatus fontSize={1} validation={validation} />\n          </Box>\n        )}\n      </Flex>\n\n      {description && (\n        <Text muted size={1}>\n          {description}\n        </Text>\n      )}\n    </Stack>\n  )\n})\n","/* eslint-disable camelcase */\n\nimport React, {memo} from 'react'\nimport {Box, Flex} from '@sanity/ui'\nimport {FieldPresence} from '../../../presence'\nimport {NodePresence, NodeValidation} from '../../types'\nimport {FormFieldHeaderText} from './FormFieldHeaderText'\n\nexport interface FormFieldHeaderProps {\n  /**\n   * @alpha\n   */\n  validation?: NodeValidation[]\n  /**\n   * @alpha\n   */\n  __unstable_presence?: NodePresence[]\n  description?: React.ReactNode\n  /**\n   * The unique ID used to target the actual input element\n   */\n  inputId?: string\n  title?: React.ReactNode\n}\n\nexport const FormFieldHeader = memo(function FormFieldHeader(props: FormFieldHeaderProps) {\n  const {validation, __unstable_presence: presence, description, inputId, title} = props\n\n  return (\n    <Flex align=\"flex-end\">\n      <Box flex={1} paddingY={2}>\n        <FormFieldHeaderText\n          validation={validation}\n          description={description}\n          inputId={inputId}\n          title={title}\n        />\n      </Box>\n\n      {presence && presence.length > 0 && (\n        <Box>\n          <FieldPresence maxAvatars={4} presence={presence} />\n        </Box>\n      )}\n    </Flex>\n  )\n})\n","/* eslint-disable camelcase */\n\nimport {Stack} from '@sanity/ui'\nimport React, {memo} from 'react'\n\nimport {NodePresence, NodeValidation} from '../../types/common'\nimport {FormFieldHeader} from './FormFieldHeader'\n\nexport interface FormFieldProps {\n  /**\n   * @alpha\n   */\n  validation?: NodeValidation[]\n  /**\n   * @alpha\n   */\n  __unstable_presence?: NodePresence[]\n  children: React.ReactNode\n  description?: React.ReactNode\n  /**\n   * The unique ID used to target the actual input element\n   */\n  inputId?: string\n  /**\n   * The nesting level of the form field\n   */\n  level?: number\n  title?: React.ReactNode\n}\n\nexport const FormField = memo(function FormField(\n  props: FormFieldProps & Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'height' | 'ref'>\n) {\n  const {\n    validation,\n    __unstable_presence: presence,\n    children,\n    description,\n    inputId,\n    level,\n    title,\n    ...restProps\n  } = props\n  return (\n    <Stack {...restProps} data-level={level} space={1}>\n      {/*\n        NOTE: It’s not ideal to hide validation, presence and description when there's no `title`.\n        So we might want to separate the concerns of input vs formfield components later on.\n      */}\n      {title && (\n        <FormFieldHeader\n          validation={validation}\n          __unstable_presence={presence}\n          description={description}\n          inputId={inputId}\n          title={title}\n        />\n      )}\n\n      <div>{children}</div>\n    </Stack>\n  )\n})\n","function focusRingBorderStyle(border: {color: string; width: number}): string {\n  return `inset 0 0 0 ${border.width}px ${border.color}`\n}\n\nexport function focusRingStyle(opts: {\n  base?: {bg: string}\n  border?: {color: string; width: number}\n  focusRing: {offset: number; width: number}\n}): string {\n  const {base, border, focusRing} = opts\n  const focusRingOutsetWidth = focusRing.offset + focusRing.width\n  const focusRingInsetWidth = 0 - focusRing.offset\n  const bgColor = base ? base.bg : 'var(--card-bg-color)'\n\n  return [\n    focusRingInsetWidth > 0 && `inset 0 0 0 ${focusRingInsetWidth}px var(--card-focus-ring-color)`,\n    border && focusRingBorderStyle(border),\n    focusRingInsetWidth < 0 && `0 0 0 ${0 - focusRingInsetWidth}px ${bgColor}`,\n    focusRingOutsetWidth > 0 && `0 0 0 ${focusRingOutsetWidth}px var(--card-focus-ring-color)`,\n  ]\n    .filter(Boolean)\n    .join(',')\n}\n","import {Box, Flex, rem, Text, Theme} from '@sanity/ui'\nimport React, {memo} from 'react'\nimport {ToggleArrowRightIcon} from '@sanity/icons'\nimport styled, {css} from 'styled-components'\nimport {focusRingStyle} from './styles'\n\nexport interface FormFieldSetLegendProps {\n  collapsed: boolean\n  collapsible?: boolean\n  onClick?: () => void\n  title: React.ReactNode\n}\n\nconst Root = styled.legend`\n  /* See: https://thatemil.com/blog/2015/01/03/reset-your-fieldset/ */\n  padding: 0;\n  display: table;\n`\n\nconst ToggleButton = styled(Flex).attrs({forwardedAs: 'button'})((props: {theme: Theme}) => {\n  const {theme} = props\n  const {focusRing, radius} = theme.sanity\n  const {base} = theme.sanity.color\n\n  return css`\n    appearance: none;\n    border: 0;\n    background: none;\n    color: inherit;\n    -webkit-font-smoothing: inherit;\n    font: inherit;\n    outline: none;\n    border-radius: ${rem(radius[1])};\n\n    &:not([hidden]) {\n      display: flex;\n    }\n\n    &:focus {\n      box-shadow: ${focusRingStyle({base, focusRing})};\n    }\n\n    &:focus:not(:focus-visible) {\n      box-shadow: none;\n    }\n  `\n})\n\nconst ToggleIconBox = styled(Box)`\n  width: 9px;\n  height: 9px;\n  margin-right: 3px;\n\n  & svg {\n    transition: transform 100ms;\n  }\n`\n\nexport const FormFieldSetLegend = memo(function FormFieldSetLegend(props: FormFieldSetLegendProps) {\n  const {collapsed, collapsible, onClick, title} = props\n\n  const text = (\n    <Text weight=\"semibold\" size={1}>\n      {title || <span style={{color: 'var(--card-muted-fg-color)'}}>Untitled</span>}\n    </Text>\n  )\n\n  if (!collapsible) {\n    return <Root>{text}</Root>\n  }\n\n  return (\n    <Root>\n      <ToggleButton type=\"button\" onClick={onClick}>\n        <ToggleIconBox>\n          <Text muted size={1}>\n            <ToggleArrowRightIcon\n              style={{\n                transform: `rotate(${collapsed ? '0' : '90deg'}) translate3d(0, 0, 0)`,\n              }}\n            />\n          </Text>\n        </ToggleIconBox>\n\n        {text}\n      </ToggleButton>\n    </Root>\n  )\n})\n","/* eslint-disable camelcase */\n\nimport {Box, Flex, Grid, rem, Stack, Text, Theme, useForwardedRef} from '@sanity/ui'\nimport React, {forwardRef, useCallback, useMemo} from 'react'\nimport styled, {css} from 'styled-components'\nimport {FieldPresence} from '../../../presence'\nimport {NodePresence, NodeValidation} from '../../types'\nimport {FormFieldValidationStatus} from './FormFieldValidationStatus'\nimport {FormFieldSetLegend} from './FormFieldSetLegend'\nimport {focusRingStyle} from './styles'\n\nexport interface FormFieldSetProps {\n  /**\n   * @alpha\n   */\n  __unstable_presence?: NodePresence[]\n  children: React.ReactNode | (() => React.ReactNode)\n  collapsed?: boolean\n  collapsible?: boolean\n  columns?: number | number[]\n  description?: React.ReactNode\n  /**\n   * The nesting level of the form field set\n   */\n  level?: number\n  onCollapse?: () => void\n  onExpand?: () => void\n  title?: React.ReactNode\n  /**\n   * @alpha\n   */\n  validation?: NodeValidation[]\n}\n\nfunction getChildren(children: React.ReactNode | (() => React.ReactNode)): React.ReactNode {\n  return typeof children === 'function' ? children() : children\n}\n\nconst Root = styled(Box).attrs({forwardedAs: 'fieldset'})`\n  border: none;\n\n  /* See: https://thatemil.com/blog/2015/01/03/reset-your-fieldset/ */\n  body:not(:-moz-handler-blocked) & {\n    display: table-cell;\n  }\n`\n\nconst Content = styled(Box)<{\n  /*\n   * @note: The dollar sign ($) prefix is a `styled-components` convention for\n   * denoting transient props. See:\n   * https://styled-components.com/docs/api#transient-props\n   */\n  $borderLeft: boolean\n  theme: Theme\n}>((props) => {\n  const {$borderLeft, theme} = props\n  const {focusRing, radius} = theme.sanity\n  const {base} = theme.sanity.color\n\n  return css`\n    outline: none;\n    border-left: ${$borderLeft ? '1px solid var(--card-border-color)' : undefined};\n    border-radius: ${rem(radius[1])};\n\n    &:focus {\n      box-shadow: ${focusRingStyle({base, focusRing: {...focusRing, offset: 2}})};\n    }\n\n    &:focus:not(:focus-visible) {\n      box-shadow: none;\n    }\n  `\n})\n\nconst EMPTY_ARRAY: never[] = []\n\nexport const FormFieldSet = forwardRef(function FormFieldSet(\n  props: FormFieldSetProps & Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'height' | 'ref'>,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {\n    validation = EMPTY_ARRAY,\n    __unstable_presence: presence = EMPTY_ARRAY,\n    children,\n    collapsible,\n    columns,\n    description,\n    level = 0,\n    onFocus,\n    onCollapse,\n    onExpand,\n    collapsed,\n    tabIndex,\n    title,\n    ...restProps\n  } = props\n\n  const hasValidationMarkers = validation.length > 0\n  const forwardedRef = useForwardedRef(ref)\n\n  const handleFocus = useCallback(\n    (event: React.FocusEvent<HTMLDivElement>) => {\n      const element = forwardedRef.current\n\n      if (element === event.target) {\n        if (onFocus) onFocus(event)\n      }\n    },\n    [forwardedRef, onFocus]\n  )\n\n  const handleToggle = useCallback(\n    () => (collapsed ? onExpand?.() : onCollapse?.()),\n    [collapsed, onCollapse, onExpand]\n  )\n\n  const content = useMemo(() => {\n    if (collapsed) {\n      return null\n    }\n    return (\n      <Grid columns={columns} gapX={4} gapY={5}>\n        {getChildren(children)}\n      </Grid>\n    )\n  }, [children, collapsed, columns])\n\n  return (\n    <Root data-level={level} {...restProps}>\n      {title && (\n        <Flex align=\"flex-end\">\n          <Box flex={1} paddingY={2}>\n            <Stack space={2}>\n              <Flex>\n                <FormFieldSetLegend\n                  collapsed={Boolean(collapsed)}\n                  collapsible={collapsible}\n                  onClick={collapsible ? handleToggle : undefined}\n                  title={title}\n                />\n\n                {hasValidationMarkers && (\n                  <Box marginLeft={2}>\n                    <FormFieldValidationStatus fontSize={1} validation={validation} />\n                  </Box>\n                )}\n              </Flex>\n\n              {description && (\n                <Text muted size={1}>\n                  {description}\n                </Text>\n              )}\n            </Stack>\n          </Box>\n\n          {presence.length > 0 && (\n            <Box>\n              <FieldPresence maxAvatars={4} presence={presence} />\n            </Box>\n          )}\n        </Flex>\n      )}\n\n      <Content\n        $borderLeft={level > 0}\n        hidden={collapsed}\n        marginTop={1}\n        paddingLeft={level === 0 ? 0 : 3}\n        onFocus={typeof tabIndex === 'number' && tabIndex > -1 ? handleFocus : undefined}\n        ref={forwardedRef}\n        tabIndex={tabIndex}\n      >\n        {!collapsed && content}\n      </Content>\n    </Root>\n  )\n})\n","import React from 'react'\nimport styled from 'styled-components'\n\nexport interface FieldStatusProps {\n  children?: React.ReactNode\n  maxAvatars?: number\n  position?: 'top' | 'bottom'\n}\n\nconst Root = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  box-sizing: border-box;\n  min-height: var(--avatar-height);\n  width: 77px;\n  margin-left: var(--small-padding);\n\n  &[data-max-avatars='1'] {\n    max-width: 23px;\n  }\n\n  &[data-position='top'] {\n    align-self: flex-start;\n  }\n\n  &[data-position='bottom'] {\n    align-self: flex-end;\n  }\n`\n\nexport function FormFieldStatus({children, maxAvatars, position = 'bottom'}: FieldStatusProps) {\n  return (\n    <Root data-max-avatars={maxAvatars} data-position={position}>\n      {children}\n    </Root>\n  )\n}\n","import {Button, Stack, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {randomKey} from '@sanity/util/content'\nimport {MissingKeysError} from '../../../store/types/memberErrors'\nimport {Details} from '../../../components/Details'\nimport {isDev} from '../../../../environment'\nimport {Alert} from '../../../components/Alert'\nimport {PatchEvent, setIfMissing} from '../../../patch'\nimport {FormField} from '../../../components/formField'\n\ninterface Props {\n  error: MissingKeysError\n  onChange: (patchEvent: PatchEvent) => void\n}\n\nexport function MissingKeysAlert(props: Props) {\n  const {error, onChange} = props\n  const handleFixMissingKeys = useCallback(() => {\n    onChange(\n      PatchEvent.from((error.value || []).map((val, i) => setIfMissing(randomKey(), [i, '_key'])))\n    )\n  }, [error.value, onChange])\n\n  return (\n    <FormField title={error.schemaType.title} description={error.schemaType.description}>\n      <Alert\n        status=\"warning\"\n        suffix={\n          <Stack padding={2}>\n            <Button onClick={handleFixMissingKeys} text=\"Add missing keys\" tone=\"caution\" />\n          </Stack>\n        }\n        title={<>Missing keys</>}\n      >\n        <Text as=\"p\" muted size={1}>\n          Some items in the list are missing their keys. This must be fixed in order to edit the\n          list.\n        </Text>\n\n        <Details marginTop={4} open={isDev} title={<>Developer info</>}>\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              This usually happens when items are created using an API client, and the{' '}\n              <code>_key</code> property has not been included.\n            </Text>\n\n            <Text as=\"p\" muted size={1}>\n              The value of the <code>_key</code> property must be a unique string.\n            </Text>\n          </Stack>\n        </Details>\n        {/* TODO: render array items and highlight the items with missing key */}\n      </Alert>\n    </FormField>\n  )\n}\n","import {Button, Stack, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {FormField} from '../../../components/formField'\nimport {Alert} from '../../../components/Alert'\nimport {DuplicateKeysError} from '../../../store/types/memberErrors'\nimport {PatchEvent, set} from '../../../patch'\nimport {Details} from '../../../components/Details'\nimport {isDev} from '../../../../environment'\n\ninterface Props {\n  error: DuplicateKeysError\n  onChange: (patchEvent: PatchEvent) => void\n}\n\nexport function DuplicateKeysAlert(props: Props) {\n  const {error, onChange} = props\n\n  const handleFixDuplicateKeys = useCallback(() => {\n    onChange(\n      PatchEvent.from(\n        (error.duplicates || []).map(([index, key]) =>\n          set(`${key}_deduped_${index}`, [index, '_key'])\n        )\n      )\n    )\n  }, [error.duplicates, onChange])\n\n  return (\n    <FormField title={error.schemaType.title} description={error.schemaType.description}>\n      <Alert\n        status=\"warning\"\n        suffix={\n          <Stack padding={2}>\n            <Button onClick={handleFixDuplicateKeys} text=\"Generate unique keys\" tone=\"caution\" />\n          </Stack>\n        }\n        title={<>Non-unique keys</>}\n      >\n        <Text as=\"p\" muted size={1}>\n          Several items in this list share the same identifier (key). Every item must have an unique\n          identifier.\n        </Text>\n\n        <Details marginTop={4} open={isDev} title={<>Developer info</>}>\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              This usually happens when items are created using an API client, and the{' '}\n              <code>_key</code> property of each elements has been generated non-uniquely.\n            </Text>\n\n            <Text as=\"p\" muted size={1}>\n              The value of the <code>_key</code> property must be a unique string.\n            </Text>\n          </Stack>\n        </Details>\n        {/* TODO: render array items and highlight the items with duplicate keys */}\n      </Alert>\n    </FormField>\n  )\n}\n","import React, {useCallback} from 'react'\nimport {Box} from '@sanity/ui'\nimport {FieldError} from '../store/types/memberErrors'\nimport {useFormCallbacks} from '../studio/contexts/FormCallbacks'\nimport {PatchEvent} from '../patch'\nimport {InvalidValueInput} from '../inputs/InvalidValueInput'\nimport {MissingKeysAlert} from '../inputs/arrays/errors/MissingKeysAlert'\nimport {DuplicateKeysAlert} from '../inputs/arrays/errors/DuplicateKeysAlert'\n\nexport function MemberFieldError(props: {member: FieldError}) {\n  const {member} = props\n  const {onChange} = useFormCallbacks()\n\n  const handleChange = useCallback(\n    (event: PatchEvent) => {\n      onChange(PatchEvent.from(event).prefixAll(member.fieldName))\n    },\n    [onChange, member.fieldName]\n  )\n  if (member.error.type === 'INCOMPATIBLE_TYPE') {\n    return (\n      <InvalidValueInput\n        value={member.error.value}\n        onChange={handleChange}\n        actualType={member.error.resolvedValueType}\n        validTypes={[member.error.expectedSchemaType.name]}\n      />\n    )\n  }\n  if (member.error.type === 'MISSING_KEYS') {\n    return <MissingKeysAlert error={member.error} onChange={handleChange} />\n  }\n  if (member.error.type === 'DUPLICATE_KEYS') {\n    return <DuplicateKeysAlert error={member.error} onChange={handleChange} />\n  }\n  return <Box>Unexpected error: {props.member.error.type}</Box>\n}\n","import React, {memo, useCallback} from 'react'\nimport {FieldSetMember} from '../store'\nimport {\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../types'\nimport {FormFieldSet} from '../components/formField'\nimport {useFormCallbacks} from '../studio/contexts/FormCallbacks'\nimport {MemberField} from './MemberField'\nimport {MemberFieldError} from './MemberFieldError'\n\nexport const MemberFieldSet = memo(function MemberFieldSet(props: {\n  member: FieldSetMember\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}) {\n  const {member, renderField, renderInput, renderItem, renderPreview} = props\n\n  const {onSetFieldSetCollapsed} = useFormCallbacks()\n\n  const handleCollapse = useCallback(() => {\n    onSetFieldSetCollapsed(member.fieldSet.path, true)\n  }, [member.fieldSet.path, onSetFieldSetCollapsed])\n\n  const handleExpand = useCallback(() => {\n    onSetFieldSetCollapsed(member.fieldSet.path, false)\n  }, [member.fieldSet.path, onSetFieldSetCollapsed])\n\n  return (\n    <FormFieldSet\n      title={member.fieldSet.title}\n      description={member.fieldSet.description}\n      level={member.fieldSet.level}\n      collapsible={member.fieldSet.collapsible}\n      collapsed={member.fieldSet.collapsed}\n      onCollapse={handleCollapse}\n      onExpand={handleExpand}\n      columns={member?.fieldSet?.columns}\n      data-testid={`fieldset-${member.fieldSet.name}`}\n    >\n      {member.fieldSet.members.map((fieldsetMember) => {\n        if (fieldsetMember.kind === 'error') {\n          return <MemberFieldError key={member.key} member={fieldsetMember} />\n        }\n        return (\n          <MemberField\n            member={fieldsetMember}\n            renderField={renderField}\n            renderInput={renderInput}\n            renderItem={renderItem}\n            renderPreview={renderPreview}\n            key={fieldsetMember.key}\n          />\n        )\n      })}\n    </FormFieldSet>\n  )\n})\n","export const IGNORE_KEYS = ['_key', '_type', '_weak']\n","import {ArraySchemaType, SchemaType} from '@sanity/types'\nimport {resolveTypeName} from '@sanity/util/content'\nimport {IGNORE_KEYS} from './constants'\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function isEmpty(value: Record<string, unknown>): value is Record<never, never> {\n  return Object.keys(value).every((key) => IGNORE_KEYS.includes(key))\n}\n\nexport function getItemType(arrayType: ArraySchemaType, item: any): SchemaType | undefined {\n  const itemTypeName = resolveTypeName(item)\n\n  return itemTypeName === 'object' && arrayType.of.length === 1\n    ? arrayType.of[0]\n    : arrayType.of.find((memberType) => memberType.name === itemTypeName)\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {Path} from '@sanity/types'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {\n  ObjectInputProps,\n  ObjectItemProps,\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../../types'\nimport {insert, PatchArg, PatchEvent, setIfMissing, unset} from '../../patch'\nimport {ensureKey} from '../../utils/ensureKey'\nimport {FormCallbacksProvider, useFormCallbacks} from '../../studio/contexts/FormCallbacks'\nimport {ArrayOfObjectsItemMember} from '../../store'\nimport {createProtoValue} from '../../utils/createProtoValue'\nimport {isEmpty} from '../../inputs/arrays/ArrayOfObjectsInput/item/helpers'\n\n/**\n * @alpha\n */\nexport interface MemberItemProps {\n  member: ArrayOfObjectsItemMember\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderPreview: RenderPreviewCallback\n}\n\n/**\n * @alpha\n */\nexport function ArrayOfObjectsItem(props: MemberItemProps) {\n  const focusRef = useRef<{focus: () => void}>()\n  const {member, renderItem, renderInput, renderField, renderPreview} = props\n\n  const {\n    onPathBlur,\n    onPathFocus,\n    onChange,\n    onPathOpen,\n    onSetPathCollapsed,\n    onSetFieldSetCollapsed,\n    onFieldGroupSelect,\n  } = useFormCallbacks()\n\n  useDidUpdate(member.item.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const onRemove = useCallback(() => {\n    onChange(PatchEvent.from([unset([{_key: member.key}])]))\n  }, [member.key, onChange])\n\n  const onInsert = useCallback(\n    (event: {items: unknown[]; position: 'before' | 'after'}) => {\n      onChange(\n        PatchEvent.from([\n          insert(\n            event.items.map((item) => ensureKey(item)),\n            event.position,\n            [{_key: member.key}]\n          ),\n        ])\n      )\n    },\n    [member.key, onChange]\n  )\n\n  const handleBlur = useCallback(() => {\n    onPathBlur(member.item.path)\n  }, [member.item.path, onPathBlur])\n\n  const handleFocus = useCallback(() => {\n    onPathFocus(member.item.path)\n  }, [member.item.path, onPathFocus])\n\n  const handleFocusChildPath = useCallback(\n    (path: Path) => {\n      onPathFocus(member.item.path.concat(path))\n    },\n    [member.item.path, onPathFocus]\n  )\n\n  const handleChange = useCallback(\n    (event: PatchEvent | PatchArg) => {\n      onChange(\n        PatchEvent.from(event)\n          .prepend(setIfMissing(createProtoValue(member.item.schemaType)))\n          .prefixAll({_key: member.key})\n      )\n    },\n    [onChange, member.item.schemaType, member.key]\n  )\n  const handleCollapse = useCallback(() => {\n    onSetPathCollapsed(member.item.path, true)\n  }, [onSetPathCollapsed, member.item.path])\n\n  const handleExpand = useCallback(() => {\n    onSetPathCollapsed(member.item.path, false)\n  }, [onSetPathCollapsed, member.item.path])\n\n  const handleCollapseField = useCallback(\n    (fieldName: string) => {\n      onSetPathCollapsed(member.item.path.concat(fieldName), true)\n    },\n    [onSetPathCollapsed, member.item.path]\n  )\n  const handleExpandField = useCallback(\n    (fieldName: string) => {\n      onSetPathCollapsed(member.item.path.concat(fieldName), false)\n    },\n    [onSetPathCollapsed, member.item.path]\n  )\n  const handleCloseField = useCallback(() => {\n    onPathOpen(member.item.path)\n  }, [onPathOpen, member.item.path])\n  const handleOpenField = useCallback(\n    (fieldName: string) => {\n      onPathOpen(member.item.path.concat(fieldName))\n    },\n    [onPathOpen, member.item.path]\n  )\n  const handleExpandFieldSet = useCallback(\n    (fieldsetName: string) => {\n      onSetFieldSetCollapsed(member.item.path.concat(fieldsetName), false)\n    },\n    [onSetFieldSetCollapsed, member.item.path]\n  )\n  const handleCollapseFieldSet = useCallback(\n    (fieldsetName: string) => {\n      onSetFieldSetCollapsed(member.item.path.concat(fieldsetName), true)\n    },\n    [onSetFieldSetCollapsed, member.item.path]\n  )\n\n  const handleOpen = useCallback(() => {\n    onPathOpen(member.item.path)\n  }, [onPathOpen, member.item.path])\n\n  const isEmptyValue = !member.item.value || isEmpty(member.item.value)\n  const handleClose = useCallback(() => {\n    if (isEmptyValue) {\n      onRemove()\n    }\n    onPathOpen(member.item.path.slice(0, -1))\n  }, [onPathOpen, member.item.path, isEmptyValue, onRemove])\n\n  const handleSelectFieldGroup = useCallback(\n    (groupName: string) => {\n      onFieldGroupSelect(member.item.path, groupName)\n    },\n    [onFieldGroupSelect, member.item.path]\n  )\n\n  const elementProps = useMemo(\n    (): ObjectInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.item.id,\n      ref: focusRef,\n    }),\n    [handleBlur, handleFocus, member.item.id]\n  )\n\n  const inputProps = useMemo((): ObjectInputProps => {\n    return {\n      changed: member.item.changed,\n      focusPath: member.item.focusPath,\n      focused: member.item.focused,\n      groups: member.item.groups,\n      id: member.item.id,\n      level: member.item.level,\n      members: member.item.members,\n      onChange: handleChange,\n      onCloseField: handleCloseField,\n      onCollapseField: handleCollapseField,\n      onCollapseFieldSet: handleCollapseFieldSet,\n      onExpandField: handleExpandField,\n      onExpandFieldSet: handleExpandFieldSet,\n      onFieldGroupSelect: handleSelectFieldGroup,\n      onFocusPath: handleFocusChildPath,\n      onOpenField: handleOpenField,\n      path: member.item.path,\n      presence: member.item.presence,\n      readOnly: member.item.readOnly,\n      renderField,\n      renderInput,\n      renderItem,\n      renderPreview,\n      schemaType: member.item.schemaType,\n      validation: member.item.validation,\n      value: member.item.value,\n      elementProps: elementProps,\n    }\n  }, [\n    elementProps,\n    handleChange,\n    handleCloseField,\n    handleCollapseField,\n    handleCollapseFieldSet,\n    handleExpandField,\n    handleExpandFieldSet,\n    handleFocusChildPath,\n    handleOpenField,\n    handleSelectFieldGroup,\n    member.item.changed,\n    member.item.focusPath,\n    member.item.focused,\n    member.item.groups,\n    member.item.id,\n    member.item.level,\n    member.item.members,\n    member.item.path,\n    member.item.presence,\n    member.item.readOnly,\n    member.item.schemaType,\n    member.item.validation,\n    member.item.value,\n    renderField,\n    renderInput,\n    renderItem,\n    renderPreview,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const itemProps = useMemo((): ObjectItemProps => {\n    return {\n      key: member.key,\n      index: member.index,\n      level: member.item.level,\n      value: member.item.value,\n      title: member.item.schemaType.title,\n      description: member.item.schemaType.description,\n      collapsible: member.collapsible,\n      collapsed: member.collapsed,\n      schemaType: member.item.schemaType,\n      onInsert,\n      onRemove,\n      presence: member.item.presence,\n      validation: member.item.validation,\n      open: member.open,\n      onOpen: handleOpen,\n      onClose: handleClose,\n      onExpand: handleExpand,\n      onCollapse: handleCollapse,\n      readOnly: member.item.readOnly,\n      focused: member.item.focused,\n      onFocus: handleFocus,\n      inputId: member.item.id,\n      path: member.item.path,\n      children: renderedInput,\n      changed: member.item.changed,\n    }\n  }, [\n    member.key,\n    member.index,\n    member.item.level,\n    member.item.value,\n    member.item.schemaType,\n    member.item.presence,\n    member.item.validation,\n    member.item.readOnly,\n    member.item.focused,\n    member.item.id,\n    member.item.path,\n    member.item.changed,\n    member.collapsible,\n    member.collapsed,\n    member.open,\n    onInsert,\n    onRemove,\n    handleOpen,\n    handleClose,\n    handleExpand,\n    handleCollapse,\n    handleFocus,\n    renderedInput,\n  ])\n\n  return (\n    <FormCallbacksProvider\n      onFieldGroupSelect={onFieldGroupSelect}\n      onChange={handleChange}\n      onPathOpen={onPathOpen}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n    >\n      {useMemo(() => renderItem(itemProps), [itemProps, renderItem])}\n    </FormCallbacksProvider>\n  )\n}\n","import {SchemaType} from '@sanity/types'\n\nexport function getEmptyValue(type: SchemaType): number | string | boolean {\n  switch (type.jsonType) {\n    case 'string': {\n      return ''\n    }\n    case 'number': {\n      return 0\n    }\n    case 'boolean': {\n      return false\n    }\n    default:\n      throw new Error(`Unable to create value from type \"${type.jsonType}\"`)\n  }\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {ArrayOfPrimitivesItemMember} from '../../store'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {getEmptyValue} from '../../inputs/arrays/ArrayOfPrimitivesInput/getEmptyValue'\nimport {\n  FIXME,\n  PrimitiveInputProps,\n  PrimitiveItemProps,\n  RenderArrayOfPrimitivesItemCallback,\n  RenderInputCallback,\n} from '../../types'\nimport {insert, PatchArg, PatchEvent, set, unset} from '../../patch'\nimport {useFormCallbacks} from '../../studio/contexts/FormCallbacks'\nimport {isBooleanSchemaType, isNumberSchemaType} from '@sanity/types'\n\n/**\n * @alpha\n */\nexport interface PrimitiveMemberItemProps {\n  member: ArrayOfPrimitivesItemMember\n  renderItem: RenderArrayOfPrimitivesItemCallback\n  renderInput: RenderInputCallback\n}\n\n/**\n * @alpha\n */\nexport function ArrayOfPrimitivesItem(props: PrimitiveMemberItemProps) {\n  const focusRef = useRef<{focus: () => void}>()\n  const {member, renderItem, renderInput} = props\n\n  const {onPathBlur, onPathFocus, onChange} = useFormCallbacks()\n\n  useDidUpdate(member.item.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const handleBlur = useCallback(\n    (event: React.FocusEvent) => {\n      onPathBlur(member.item.path)\n    },\n    [member.item.path, onPathBlur]\n  )\n\n  const handleFocus = useCallback(\n    (event: React.FocusEvent) => {\n      onPathFocus(member.item.path)\n    },\n    [member.item.path, onPathFocus]\n  )\n\n  const handleChange = useCallback(\n    (event: PatchEvent | PatchArg) => {\n      const patches = PatchEvent.from(event).patches.map((patch) =>\n        // Map direct unset patches to empty value instead in order to not *remove* elements as the user clears out the value\n        // note: this creates the rather \"weird\" case where the input renders ´0´ when you try to clear it\n        patch.path.length === 0 && patch.type === 'unset'\n          ? set(getEmptyValue(member.item.schemaType))\n          : patch\n      )\n      onChange(PatchEvent.from(patches).prefixAll(member.index))\n    },\n    [onChange, member.item.schemaType, member.index]\n  )\n\n  const handleNativeChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      let inputValue: number | string | boolean = event.currentTarget.value\n      if (isNumberSchemaType(member.item.schemaType)) {\n        inputValue = event.currentTarget.valueAsNumber\n      } else if (isBooleanSchemaType(member.item.schemaType)) {\n        inputValue = event.currentTarget.checked\n      }\n\n      // `valueAsNumber` returns `NaN` on empty input\n      const hasEmptyValue =\n        inputValue === '' || (typeof inputValue === 'number' && isNaN(inputValue))\n\n      onChange(PatchEvent.from(hasEmptyValue ? unset() : set(inputValue)).prefixAll(member.index))\n    },\n    [member.index, member.item.schemaType, onChange]\n  )\n\n  const elementProps = useMemo(\n    (): PrimitiveInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.item.id,\n      ref: focusRef,\n      onChange: handleNativeChange,\n      value: String(member.item.value || ''),\n      readOnly: Boolean(member.item.readOnly),\n      placeholder: member.item.schemaType.placeholder,\n    }),\n    [\n      handleBlur,\n      handleFocus,\n      handleNativeChange,\n      member.item.id,\n      member.item.readOnly,\n      member.item.schemaType.placeholder,\n      member.item.value,\n    ]\n  )\n  const inputProps = useMemo((): PrimitiveInputProps => {\n    return {\n      changed: member.item.changed,\n      level: member.item.level,\n      value: member.item.value as FIXME,\n      readOnly: member.item.readOnly,\n      schemaType: member.item.schemaType as FIXME,\n      id: member.item.id,\n      path: member.item.path,\n      focused: member.item.focused,\n      onChange: handleChange,\n      validation: member.item.validation,\n      presence: member.item.presence,\n      elementProps,\n    }\n  }, [\n    member.item.changed,\n    member.item.level,\n    member.item.value,\n    member.item.readOnly,\n    member.item.schemaType,\n    member.item.id,\n    member.item.path,\n    member.item.focused,\n    member.item.validation,\n    member.item.presence,\n    handleChange,\n    elementProps,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const onRemove = useCallback(() => {\n    onChange(PatchEvent.from([unset([member.index])]))\n  }, [member.index, onChange])\n\n  const onInsert = useCallback(\n    (event: {items: unknown[]; position: 'before' | 'after'}) => {\n      onChange(PatchEvent.from([insert(event.items, event.position, [member.index])]))\n    },\n    [member.index, onChange]\n  )\n\n  const itemProps = useMemo((): PrimitiveItemProps => {\n    return {\n      key: member.key,\n      index: member.index,\n      level: member.item.level,\n      value: member.item.value as FIXME,\n      title: member.item.schemaType.title,\n      description: member.item.schemaType.description,\n      schemaType: member.item.schemaType as FIXME,\n      onInsert,\n      onRemove,\n      presence: member.item.presence,\n      validation: member.item.validation,\n      readOnly: member.item.readOnly,\n      focused: member.item.focused,\n      onFocus: handleFocus,\n      inputId: member.item.id,\n      path: member.item.path,\n      children: renderedInput,\n    }\n  }, [\n    member.key,\n    member.index,\n    member.item.level,\n    member.item.value,\n    member.item.schemaType,\n    member.item.presence,\n    member.item.validation,\n    member.item.readOnly,\n    member.item.focused,\n    member.item.id,\n    member.item.path,\n    onInsert,\n    onRemove,\n    handleFocus,\n    renderedInput,\n  ])\n\n  return <>{useMemo(() => renderItem(itemProps), [itemProps, renderItem])}</>\n}\n","import {Box, Card, Code, Flex, Popover, Stack, Text, Theme, useClickOutside} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {BulbOutlineIcon, UnknownIcon} from '@sanity/icons'\nimport {resolveTypeName} from '@sanity/util/content'\nimport styled from 'styled-components'\n\nconst PopoverCard = styled(Card)`\n  max-width: ${({theme}: {theme: Theme}) => theme.sanity.container[1]}px;\n`\n\ninterface Props {\n  value: any\n  onFocus?: (event: React.FocusEvent) => void\n  vertical?: boolean\n}\n\nexport function ItemWithMissingType(props: Props) {\n  const {value, onFocus, vertical, ...rest} = props\n  const [showDetails, setShowDetails] = React.useState(false)\n  const [popoverRef, setPopoverRef] = React.useState<HTMLElement | null>(null)\n\n  useClickOutside(() => setShowDetails(false), [popoverRef])\n\n  const handleKeyDown = React.useCallback((e) => {\n    if (e.key === 'Escape' || e.key === 'Tab') {\n      setShowDetails(false)\n    }\n  }, [])\n\n  const handleShowDetails = useCallback(() => {\n    setShowDetails((v) => !v)\n  }, [])\n\n  const typeName = resolveTypeName(value)\n  return (\n    <Popover\n      open={showDetails}\n      ref={setPopoverRef}\n      onKeyDown={handleKeyDown}\n      portal\n      constrainSize\n      tone=\"default\"\n      content={\n        <PopoverCard margin={1} padding={3} onKeyDown={handleKeyDown} tabIndex={0} overflow=\"auto\">\n          <Stack space={4}>\n            <Box>\n              <Text weight=\"semibold\">Why is this happening?</Text>\n            </Box>\n            <Text size={1}>\n              The current schema does not declare items of type <code>{typeName}</code> as valid for\n              this list. This could mean that the type has been removed as a valid item type, or\n              that someone else has added it to their own local schema that is not yet deployed.\n            </Text>\n            <Box>\n              <Text size={1}>\n                <BulbOutlineIcon /> You can still move or delete this item, but it cannot be edited\n                since the schema definition for its type is nowhere to be found.\n              </Text>\n            </Box>\n            <Stack space={2}>\n              <Text size={1} weight=\"semibold\">\n                JSON representation of this item:\n              </Text>\n              <Card padding={2} overflow=\"auto\" border>\n                <Code size={1} as=\"pre\" language=\"json\">\n                  {JSON.stringify(value, null, 2)}\n                </Code>\n              </Card>\n            </Stack>\n          </Stack>\n        </PopoverCard>\n      }\n    >\n      <Card\n        as=\"button\"\n        type=\"button\"\n        radius={2}\n        tone=\"inherit\"\n        padding={2}\n        onFocus={onFocus}\n        onClick={handleShowDetails}\n        onKeyDown={handleKeyDown}\n        {...rest}\n      >\n        {vertical && (\n          <Stack space={4}>\n            <Text align=\"center\">\n              <UnknownIcon />\n            </Text>\n\n            <Text size={1} align=\"center\">\n              Item type <code>{typeName}</code> not defined for this list\n            </Text>\n          </Stack>\n        )}\n        {!vertical && (\n          <Flex align=\"center\">\n            <Box marginRight={3}>\n              <Text>\n                <UnknownIcon />\n              </Text>\n            </Box>\n\n            <Box flex={1}>\n              <Text size={1} textOverflow=\"ellipsis\">\n                Item type <code>{typeName}</code> not defined for this list\n              </Text>\n            </Box>\n          </Flex>\n        )}\n      </Card>\n    </Popover>\n  )\n}\n","import React from 'react'\nimport {ItemWithMissingType} from '../inputs/arrays/ArrayOfObjectsInput/item/ItemWithMissingType'\nimport {ArrayItemError} from '../store/types/memberErrors'\n\nexport function MemberItemError(props: {member: ArrayItemError}) {\n  const {member} = props\n\n  if (member.error.type === 'INVALID_ITEM_TYPE') {\n    return <ItemWithMissingType value={member.error.value} />\n  }\n  return <div>Unexpected Error: {member.error.type}</div>\n}\n","import React from 'react'\nimport {ObjectMember} from '../store'\nimport {\n  RenderInputCallback,\n  RenderFieldCallback,\n  RenderPreviewCallback,\n  RenderArrayOfObjectsItemCallback,\n} from '../types'\n\nimport {MemberField} from './MemberField'\nimport {MemberFieldError} from './MemberFieldError'\nimport {MemberFieldSet} from './MemberFieldset'\n\nexport interface ObjectMembersProps {\n  members: ObjectMember[]\n  renderInput: RenderInputCallback\n  renderField: RenderFieldCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}\n/**\n * Convenience component for wrapping an object input\n * @beta\n */\n\nexport function ObjectMembers(props: ObjectMembersProps) {\n  const {members, renderInput, renderField, renderItem, renderPreview} = props\n  return (\n    <>\n      {members.map((member) => {\n        if (member.kind === 'field') {\n          return (\n            <MemberField\n              key={member.key}\n              member={member}\n              renderInput={renderInput}\n              renderField={renderField}\n              renderItem={renderItem}\n              renderPreview={renderPreview}\n            />\n          )\n        }\n        if (member.kind === 'error') {\n          return <MemberFieldError key={member.key} member={member} />\n        }\n        if (member.kind === 'fieldSet') {\n          return (\n            <MemberFieldSet\n              key={member.key}\n              member={member}\n              renderInput={renderInput}\n              renderField={renderField}\n              renderItem={renderItem}\n              renderPreview={renderPreview}\n            />\n          )\n        }\n        //@ts-expect-error The branching above should cover all possible cases\n        console.warn(new Error(`Unhandled member kind ${member.kind}`))\n        return null\n      })}\n    </>\n  )\n}\n","import React, {memo, useCallback, useMemo} from 'react'\nimport {isEqual, startsWith, trimLeft} from '@sanity/util/paths'\nimport {isKeySegment, Path} from '@sanity/types'\nimport {FieldMember} from './store'\nimport {\n  ArrayOfObjectsInputProps,\n  ObjectInputProps,\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from './types'\nimport {isArrayInputProps, isObjectInputProps} from './utils/asserters'\nimport {MemberField, ArrayOfObjectsItem, MemberItemError} from './members'\n\nconst pass = ({children}: {children: React.ReactNode}) => children\n\nexport type FormInputAbsolutePathArg = {absolutePath: Path}\nexport type FormInputRelativePathArg = {relativePath: Path}\n\nfunction hasAbsolutePath(\n  a: FormInputAbsolutePathArg | FormInputRelativePathArg\n): a is FormInputAbsolutePathArg {\n  return 'absolutePath' in a\n}\n\nexport const FormInput = memo(function FormInput(\n  props: (ArrayOfObjectsInputProps | ObjectInputProps) &\n    (FormInputRelativePathArg | FormInputAbsolutePathArg) & {\n      /**\n       * Whether to include the field around the input. Defaults to false\n       */\n      includeField?: boolean\n    }\n) {\n  const absolutePath = useMemo(() => {\n    return hasAbsolutePath(props) ? props.absolutePath : props.path.concat(props.relativePath)\n  }, [props])\n\n  return (\n    <FormInputInner\n      {...props}\n      absolutePath={absolutePath}\n      destinationRenderField={props.renderField}\n      destinationRenderInput={props.renderInput}\n      destinationRenderItem={props.renderItem}\n      destinationRenderPreview={props.renderPreview}\n    />\n  )\n})\n\n/**\n * An input that takes input props for object or array and renders an input for a given sub-path\n */\nconst FormInputInner = memo(function FormInputInner(\n  props: (ArrayOfObjectsInputProps | ObjectInputProps) & {\n    absolutePath: Path\n    includeField?: boolean\n    destinationRenderInput: RenderInputCallback\n    destinationRenderField: RenderFieldCallback\n    destinationRenderItem: RenderArrayOfObjectsItemCallback\n    destinationRenderPreview: RenderPreviewCallback\n  }\n) {\n  const {\n    absolutePath,\n    destinationRenderInput,\n    destinationRenderItem,\n    destinationRenderField,\n    destinationRenderPreview,\n  } = props\n\n  const renderInput: RenderInputCallback = useCallback(\n    (inputProps) => {\n      const isDestinationReached =\n        isEqual(inputProps.path, absolutePath) || startsWith(absolutePath, inputProps.path)\n      if (isDestinationReached) {\n        // we have reached the destination node and can now render with the passed renderInput\n        return destinationRenderInput(inputProps)\n      }\n      if (!isObjectInputProps(inputProps) && !isArrayInputProps(inputProps)) {\n        throw new Error(\n          `Expected either object input props or array input props for: ${JSON.stringify(\n            inputProps.path\n          )}`\n        )\n      }\n      // we have not yet reached the destination path, so we'll continue recurse until we get there\n      return (\n        <FormInputInner\n          {...inputProps}\n          absolutePath={absolutePath}\n          destinationRenderInput={destinationRenderInput}\n          destinationRenderItem={destinationRenderItem}\n          destinationRenderField={destinationRenderField}\n          destinationRenderPreview={destinationRenderPreview}\n        />\n      )\n    },\n    [\n      absolutePath,\n      destinationRenderField,\n      destinationRenderInput,\n      destinationRenderItem,\n      destinationRenderPreview,\n    ]\n  )\n\n  const renderField: RenderFieldCallback = useCallback(\n    (fieldProps) => {\n      // we want to render the field around the input if either of these are true:\n      // 1. we have reached the destination path and the `includeField`-prop is passed as true\n      // 2. we are currently at a node somewhere below/inside the destination path\n      const shouldRenderField =\n        startsWith(absolutePath, fieldProps.path) &&\n        (props.includeField || !isEqual(absolutePath, fieldProps.path))\n      return shouldRenderField ? destinationRenderField(fieldProps) : pass(fieldProps)\n    },\n    [absolutePath, destinationRenderField, props.includeField]\n  )\n\n  if (isArrayInputProps(props)) {\n    const childPath = trimLeft(props.path, absolutePath)\n\n    const itemMember = props.members.find(\n      (member) =>\n        member.kind == 'item' && isKeySegment(childPath[0]) && member.key === childPath[0]._key\n    )\n\n    if (!itemMember) {\n      const relativePath = trimLeft(props.path, absolutePath)\n      const key = (relativePath[0] as any)._key\n      return (\n        <div>\n          No array item with _key <code>\"{key}\"</code> found at path {JSON.stringify(props.path)}\n        </div>\n      )\n    }\n    if (itemMember.kind === 'error') {\n      return <MemberItemError member={itemMember} />\n    }\n    return (\n      <ArrayOfObjectsItem\n        member={itemMember}\n        renderInput={renderInput}\n        renderField={renderField}\n        renderItem={pass}\n        renderPreview={destinationRenderPreview}\n      />\n    )\n  }\n\n  if (isObjectInputProps(props)) {\n    const childPath = trimLeft(props.path, absolutePath)\n    const fieldMember = props.members.find(\n      (member): member is FieldMember => member.kind == 'field' && childPath[0] === member.name\n    )\n\n    if (!fieldMember) {\n      const fieldName = childPath[0]\n      return (\n        <div>\n          Field {JSON.stringify(fieldName)} not found among members – please verify that it's both\n          defined in the schema and that it has not been conditionally hidden.\n        </div>\n      )\n    }\n\n    return (\n      <MemberField\n        member={fieldMember}\n        renderInput={renderInput}\n        renderField={renderField}\n        renderItem={pass}\n        renderPreview={destinationRenderPreview}\n      />\n    )\n  }\n  throw new Error('FormInput can only be used with arrays or objects')\n})\n","import {normalizeBlock} from '@sanity/block-tools'\nimport {PortableTextBlock} from '@sanity/portable-text-editor'\nimport {FormPatch, insert} from '../../../patch'\nimport {InsertCallback} from './types'\n\nexport function createInsertCallback(options: {\n  allowedDecorators: string[]\n  block: PortableTextBlock\n  onChange: (patches: FormPatch[]) => void\n}): InsertCallback {\n  const {allowedDecorators, block, onChange} = options\n\n  let toInsert\n\n  return (givenBlock: PortableTextBlock | PortableTextBlock[]): void => {\n    toInsert = Array.isArray(givenBlock) ? givenBlock : [givenBlock]\n    toInsert = toInsert.map((blk) =>\n      normalizeBlock(blk, {\n        allowedDecorators,\n      })\n    )\n\n    const patches = [insert(toInsert, 'after', [{_key: block._key}])]\n\n    return onChange(patches)\n  }\n}\n","import {normalizeBlock} from '@sanity/block-tools'\nimport {PortableTextBlock} from '@sanity/portable-text-editor'\nimport {FormPatch, set} from '../../../patch'\nimport {SetCallback} from './types'\n\nexport function createSetCallback(options: {\n  allowedDecorators: string[]\n  block: PortableTextBlock\n  onChange: (patches: FormPatch[]) => void\n}): SetCallback {\n  const {allowedDecorators, block, onChange} = options\n\n  return (givenBlock: PortableTextBlock): void => {\n    const patches = [\n      set(\n        normalizeBlock(givenBlock, {\n          allowedDecorators,\n        }),\n\n        [{_key: block._key}]\n      ),\n    ]\n\n    return onChange(patches)\n  }\n}\n","import {PortableTextBlock} from '@sanity/portable-text-editor'\nimport {FormPatch, unset} from '../../../patch'\nimport {UnsetCallback} from './types'\n\nexport function createUnsetCallback(options: {\n  block: PortableTextBlock\n  onChange: (patches: FormPatch[]) => void\n}): UnsetCallback {\n  const {block, onChange} = options\n\n  return (): void => {\n    const patches = [unset([{_key: block._key}])]\n\n    return onChange(patches)\n  }\n}\n","import {\n  PortableTextEditor,\n  PortableTextBlock,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport React, {useCallback, useMemo} from 'react'\nimport styled from 'styled-components'\nimport {PatchArg} from '../../patch'\nimport {RenderBlockActionsCallback, RenderBlockActionsProps} from './types'\nimport {createInsertCallback, createSetCallback, createUnsetCallback} from './callbacks'\n\ninterface BlockActionsProps {\n  block: PortableTextBlock\n  onChange: (...patches: PatchArg[]) => void\n  renderBlockActions?: RenderBlockActionsCallback\n}\n\nconst Root = styled.div`\n  display: flex;\n  pointer-events: 'all';\n`\n\n// function isClassComponent(component: React.ComponentType) {\n//   return typeof component === 'function' && !!component.prototype?.isReactComponent\n// }\n\n// function isFunctionComponent(component: React.ComponentType) {\n//   return typeof component === 'function' && String(component).includes('return React.createElement')\n// }\n\nexport function BlockActions(props: BlockActionsProps) {\n  const editor = usePortableTextEditor()\n  const {block, onChange, renderBlockActions} = props\n  const decoratorValues = useMemo(\n    () => PortableTextEditor.getPortableTextFeatures(editor).decorators.map((d) => d.value),\n    [editor]\n  )\n\n  const blockActions = useMemo(() => {\n    if (renderBlockActions) {\n      const blockActionProps: RenderBlockActionsProps = {\n        block,\n        value: PortableTextEditor.getValue(editor),\n        set: createSetCallback({allowedDecorators: decoratorValues, block, onChange}),\n        unset: createUnsetCallback({block, onChange}),\n        insert: createInsertCallback({allowedDecorators: decoratorValues, block, onChange}),\n      }\n\n      // // Support returning a class component for renderBlockActions (to keep backward compatability as it was possible before)\n      // if (isClassComponent(renderBlockActions) || isFunctionComponent(renderBlockActions)) {\n      //   const RenderComponent = renderBlockActions\n      //   return <RenderComponent {...blockActionProps} />\n      // }\n      return renderBlockActions(blockActionProps)\n    }\n    return undefined\n  }, [renderBlockActions, block, editor, onChange, decoratorValues])\n\n  // Take focus away from the editor so dealing with block actions doesn't interfere with the editor focus\n  const handleClick = useCallback(() => {\n    PortableTextEditor.blur(editor)\n  }, [editor])\n\n  // Don't render anything if the renderBlockActions function returns null.\n  // Note that if renderBlockComponent is a React class, this will never be the case.\n  if (!blockActions) return null\n\n  return (\n    <Root contentEditable={false} onKeyDown={handleClick} onMouseDown={handleClick}>\n      {blockActions}\n    </Root>\n  )\n}\n","import {rgba} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const ReviewChangesHighlightBlock = styled.div(({theme}) => {\n  const {radius, space, color} = theme.sanity\n  const bg = rgba(color.spot.yellow, 0.2)\n\n  return css`\n    position: absolute;\n    border-radius: ${radius[3]}px;\n    top: -${space[2]}px;\n    bottom: -${space[1] + space[1]}px;\n    left: ${space[4] + space[1]}px;\n    right: 0;\n    background-color: ${bg};\n  `\n})\n","import styled, {css} from 'styled-components'\nimport {ChangeIndicator} from '../../../../components/changeIndicators'\n\nexport const StyledChangeIndicatorWithProvidedFullPath = styled(ChangeIndicator)(() => {\n  return css`\n    width: 1px;\n    height: 100%;\n\n    & > div {\n      height: 100%;\n    }\n  `\n})\n","import {SchemaType} from '@sanity/types'\nimport {ArrayOfObjectsFormNode, FieldMember, ObjectMember} from '../../store'\n\nexport function _isBlockType(type: SchemaType): boolean {\n  if (type.type) {\n    return _isBlockType(type.type)\n  }\n\n  return type.name === 'block'\n}\n\nexport function _isObjectFieldMember(\n  member: ObjectMember\n): member is FieldMember<ArrayOfObjectsFormNode> {\n  return member.kind === 'field' && member.field.schemaType.jsonType === 'object'\n}\n\nexport function _isArrayOfObjectsFieldMember(\n  member: ObjectMember\n): member is FieldMember<ArrayOfObjectsFormNode> {\n  return member.kind === 'field' && member.field.schemaType.jsonType === 'array'\n}\n","import {useMemo} from 'react'\nimport {BaseFormNode} from '../../../store'\nimport {EMPTY_ARRAY} from '../../../utils/empty'\nimport {useChildValidation} from '../../../studio/contexts/Validation'\nimport {_isBlockType} from '../_helpers'\n\nconst NONEXISTENT_PATH = ['@@_NONEXISTENT_PATH_@@']\n\nexport function useMemberValidation(member: BaseFormNode | undefined) {\n  const memberValidation = member?.validation || EMPTY_ARRAY\n  const childValidation = useChildValidation(member?.path || NONEXISTENT_PATH)\n\n  const validation = useMemo(\n    () =>\n      member?.schemaType && _isBlockType(member?.schemaType)\n        ? memberValidation\n        : memberValidation.concat(childValidation),\n    [childValidation, member, memberValidation]\n  )\n\n  const [hasError, hasWarning, hasInfo] = useMemo(\n    () => [\n      validation.filter((v) => v.level === 'error').length > 0,\n      validation.filter((v) => v.level === 'warning').length > 0,\n      validation.filter((v) => v.level === 'info').length > 0,\n    ],\n    [validation]\n  )\n\n  return useMemo(() => {\n    return {\n      validation,\n      hasError,\n      hasWarning,\n      hasInfo,\n    }\n  }, [validation, hasError, hasWarning, hasInfo])\n}\n","import React, {createContext} from 'react'\nimport {PortableTextMarker} from '../../../types'\n\nexport const PortableTextMarkersContext = createContext<PortableTextMarker[]>([])\n\nexport function PortableTextMarkersProvider(props: {\n  markers: PortableTextMarker[]\n  children: React.ReactNode\n}) {\n  return (\n    <PortableTextMarkersContext.Provider value={props.markers}>\n      {props.children}\n    </PortableTextMarkersContext.Provider>\n  )\n}\n","import {Path} from '@sanity/types'\nimport {isEqual} from '@sanity/util/paths'\nimport {useContext} from 'react'\nimport {PortableTextMarker} from '../../../types'\nimport {PortableTextMarkersContext} from '../contexts/PortableTextMarkers'\n\nexport function usePortableTextMarkers(path: Path): PortableTextMarker[] {\n  const ctx = useContext(PortableTextMarkersContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx.filter((m) => isEqual(m.path, path))\n}\n","import React, {createContext} from 'react'\nimport {PortableTextMemberItem} from '../PortableTextInput'\n\nexport const PortableTextMemberItemsContext = createContext<PortableTextMemberItem[]>([])\n\nexport function PortableTextMemberItemsProvider(props: {\n  memberItems: PortableTextMemberItem[]\n  children: React.ReactNode\n}) {\n  return (\n    <PortableTextMemberItemsContext.Provider value={props.memberItems}>\n      {props.children}\n    </PortableTextMemberItemsContext.Provider>\n  )\n}\n","import {useContext} from 'react'\nimport {PortableTextMemberItemsContext} from '../contexts/PortableTextMembers'\nimport {PortableTextMemberItem} from '../PortableTextInput'\n\nexport function usePortableTextMemberItem(key: string): PortableTextMemberItem | undefined {\n  const ctx = useContext(PortableTextMemberItemsContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx.find((m) => m.key === key)\n}\n\nexport function usePortableTextMemberItems(): PortableTextMemberItem[] {\n  const ctx = useContext(PortableTextMemberItemsContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx\n}\n","import {SchemaType} from '@sanity/types'\n\nconst PRIMITIVES = ['string', 'number', 'boolean']\n\nexport function is(typeName: string, type: SchemaType): boolean {\n  return type.name === typeName || Boolean(type.type && is(typeName, type.type))\n}\n\nexport {is as type}\n\nexport function primitive(type: SchemaType) {\n  return PRIMITIVES.some((typeName) => is(typeName, type))\n}\n","import {EditIcon, LinkIcon, TrashIcon, EyeOpenIcon, EllipsisVerticalIcon} from '@sanity/icons'\nimport {\n  PortableTextBlock,\n  PortableTextEditor,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport {\n  Box,\n  Button,\n  Flex,\n  Menu,\n  MenuButton,\n  MenuButtonProps,\n  MenuItem,\n  useGlobalKeyDown,\n  useLayer,\n} from '@sanity/ui'\nimport React, {forwardRef, MouseEvent, ReactElement, useCallback, useMemo, useRef} from 'react'\nimport {useId} from '@reach/auto-id'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {IntentLink} from '../../../../router'\nimport {FIXME, RenderPreviewCallback} from '../../../types'\nimport {is} from '../../../utils/is'\n\ninterface BlockObjectPreviewProps {\n  focused: boolean\n  type: ObjectSchemaType\n  value: PortableTextBlock\n  readOnly?: boolean\n  onClickingEdit: () => void\n  onClickingDelete: (event: MouseEvent) => void\n  renderPreview: RenderPreviewCallback\n}\n\nconst POPOVER_PROPS: MenuButtonProps['popover'] = {\n  constrainSize: true,\n  placement: 'bottom',\n  portal: 'default',\n  tone: 'default',\n}\n\nexport function BlockObjectPreview(props: BlockObjectPreviewProps): ReactElement {\n  const {focused, value, type, readOnly, onClickingEdit, onClickingDelete, renderPreview} = props\n  const {isTopLayer} = useLayer()\n  const editor = usePortableTextEditor()\n  const menuButtonId = useId() || ''\n  const menuButton = useRef<HTMLButtonElement | null>(null)\n  const isTabbing = useRef<boolean>(false)\n  const isCustomPreviewComponent = Boolean((type.preview as FIXME)?.component)\n  const isImageType = is('image', type)\n\n  const referenceLink = useMemo(\n    () =>\n      forwardRef(function ReferenceLink(linkProps: FIXME, ref: FIXME) {\n        return <IntentLink {...linkProps} intent=\"edit\" params={{id: value._ref}} ref={ref} />\n      }),\n    [value?._ref]\n  )\n\n  // Go to menu when tabbed to\n  // Focus block on escape\n  useGlobalKeyDown(\n    useCallback(\n      (event) => {\n        if (!focused) {\n          return\n        }\n        if (event.key === 'Escape' && isTopLayer) {\n          // event.preventDefault()\n          // event.stopPropagation()\n          isTabbing.current = false\n          PortableTextEditor.focus(editor)\n        }\n        if (event.key === 'Tab') {\n          if (menuButton.current && !isTabbing.current) {\n            event.preventDefault()\n            event.stopPropagation()\n            menuButton.current.focus()\n            isTabbing.current = true\n          }\n        }\n      },\n      [focused, isTopLayer, editor]\n    )\n  )\n\n  const actions = (\n    <MenuButton\n      button={\n        <Button\n          aria-label=\"Open menu\"\n          fontSize={1}\n          iconRight={EllipsisVerticalIcon}\n          mode=\"bleed\"\n          paddingX={2}\n        />\n      }\n      ref={menuButton}\n      id={menuButtonId}\n      menu={\n        <Menu>\n          {value?._ref && (\n            <MenuItem as={referenceLink} data-as=\"a\" icon={LinkIcon} text=\"Open reference\" />\n          )}\n\n          {readOnly && <MenuItem icon={EyeOpenIcon} onClick={onClickingEdit} text=\"View\" />}\n          {!readOnly && <MenuItem icon={EditIcon} onClick={onClickingEdit} text=\"Edit\" />}\n          {!readOnly && (\n            <MenuItem icon={TrashIcon} onClick={onClickingDelete} text=\"Delete\" tone=\"critical\" />\n          )}\n        </Menu>\n      }\n      popover={POPOVER_PROPS}\n    />\n  )\n\n  if (isCustomPreviewComponent) {\n    return (\n      <Flex>\n        <Box flex={1}>\n          {renderPreview({\n            layout: isImageType ? 'blockImage' : 'block',\n            schemaType: type,\n            value,\n          })}\n        </Box>\n        <Box marginLeft={1}>{actions}</Box>\n      </Flex>\n    )\n  }\n\n  return (\n    <>\n      {renderPreview({\n        actions,\n        layout: isImageType ? 'blockImage' : 'block',\n        schemaType: type,\n        value,\n      })}\n    </>\n  )\n}\n","import {hues} from '@sanity/color'\nimport {Card, Theme, Flex, Box} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const Root = styled(Card)((props: {theme: Theme}) => {\n  const {color, radius, space} = props.theme.sanity\n\n  const overlay = css`\n    pointer-events: none;\n    content: '';\n    position: absolute;\n    top: -${space[1]}px;\n    bottom: -${space[1]}px;\n    left: -${space[1]}px;\n    right: -${space[1]}px;\n    border-radius: ${radius[2]}px;\n    mix-blend-mode: ${color.dark ? 'screen' : 'multiply'};\n  `\n\n  return css`\n    box-shadow: 0 0 0 1px var(--card-border-color);\n    border-radius: ${radius[1]}px;\n    pointer-events: all;\n    position: relative;\n\n    &[data-focused] {\n      box-shadow: 0 0 0 1px ${color.selectable?.primary.selected.border};\n    }\n\n    &:not([data-focused]):not([data-selected]) {\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.input.default.hovered.border};\n        }\n      }\n    }\n\n    &[data-markers] {\n      &:after {\n        ${overlay}\n        background-color: ${color.dark ? hues.purple[950].hex : hues.purple[50].hex};\n      }\n    }\n\n    &[data-warning] {\n      &:after {\n        ${overlay}\n        background-color: ${color.muted.caution.hovered.bg};\n      }\n\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.muted.caution.hovered.border};\n        }\n      }\n    }\n\n    &[data-invalid] {\n      &:after {\n        ${overlay}\n        background-color: ${color.input.invalid.enabled.bg};\n      }\n\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.input.invalid.hovered.border};\n        }\n      }\n    }\n  `\n})\n\nexport const PreviewContainer = styled(Flex)`\n  user-select: none;\n  pointer-events: none;\n`\n\nexport const ChangeIndicatorWrapper = styled.div<{$hasChanges: boolean}>(\n  ({theme, $hasChanges}: {theme: Theme; $hasChanges: boolean}) => {\n    const {space} = theme.sanity\n\n    return css`\n      position: absolute;\n      width: ${space[2]}px;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      padding-left: ${space[1]}px;\n      user-select: none;\n\n      ${!$hasChanges &&\n      css`\n        display: none;\n      `}\n\n      [data-dragged] & {\n        visibility: hidden;\n      }\n    `\n  }\n)\n\nexport const InnerFlex = styled(Flex)`\n  position: relative;\n\n  [data-dragged] > & {\n    opacity: 0.5;\n  }\n`\n\nexport const BlockActionsOuter = styled(Box)`\n  width: 25px;\n  position: relative;\n\n  [data-dragged] & {\n    visibility: hidden;\n  }\n`\n\nexport const BlockActionsInner = styled(Flex)`\n  position: absolute;\n  right: 0;\n  [data-dragged] & {\n    visibility: hidden;\n  }\n`\n\nexport const TooltipBox = styled(Box)`\n  max-width: 250px;\n`\nexport const BlockPreview = styled(Box)((props: {theme: Theme}) => {\n  const color = props.theme.sanity.color.input\n  return css`\n    background-color: ${color.default.enabled.bg};\n  `\n})\n","import {\n  PortableTextEditor,\n  PortableTextBlock,\n  RenderAttributes,\n  EditorSelection,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport {ObjectSchemaType, Path} from '@sanity/types'\nimport {Tooltip, Flex, ResponsivePaddingProps} from '@sanity/ui'\nimport React, {useCallback, useMemo, useRef, useState} from 'react'\nimport {PatchArg} from '../../../patch'\nimport {RenderCustomMarkers, RenderPreviewCallback} from '../../../types'\nimport {RenderBlockActionsCallback} from '../types'\nimport {BlockActions} from '../BlockActions'\nimport {ReviewChangesHighlightBlock, StyledChangeIndicatorWithProvidedFullPath} from '../_common'\nimport {useFormBuilder} from '../../../useFormBuilder'\nimport {useMemberValidation} from '../hooks/useMemberValidation'\nimport {usePortableTextMarkers} from '../hooks/usePortableTextMarkers'\nimport {usePortableTextMemberItem} from '../hooks/usePortableTextMembers'\nimport {pathToString} from '../../../../field/paths'\nimport {BlockObjectPreview} from './BlockObjectPreview'\nimport {\n  Root,\n  PreviewContainer,\n  ChangeIndicatorWrapper,\n  InnerFlex,\n  BlockActionsOuter,\n  BlockActionsInner,\n  TooltipBox,\n  BlockPreview,\n} from './BlockObject.styles'\n\ninterface BlockObjectProps {\n  attributes: RenderAttributes\n  block: PortableTextBlock\n  isFullscreen?: boolean\n  onChange: (...patches: PatchArg[]) => void\n  onOpenItem: (path: Path) => void\n  readOnly?: boolean\n  renderBlockActions?: RenderBlockActionsCallback\n  renderCustomMarkers?: RenderCustomMarkers\n  renderPreview: RenderPreviewCallback\n  type: ObjectSchemaType\n}\n\nexport function BlockObject(props: BlockObjectProps) {\n  const {\n    attributes: {focused, selected, path},\n    block,\n    isFullscreen,\n    onChange,\n    onOpenItem,\n    readOnly,\n    renderBlockActions,\n    renderCustomMarkers,\n    renderPreview,\n    type,\n  } = props\n  const {Markers} = useFormBuilder().__internal.components\n  const elementRef = useRef<HTMLDivElement | null>(null)\n  const [reviewChangesHovered, setReviewChangesHovered] = useState<boolean>(false)\n  const markers = usePortableTextMarkers(path)\n  const editor = usePortableTextEditor()\n  const memberItem = usePortableTextMemberItem(pathToString(path))\n\n  const handleMouseOver = useCallback(() => setReviewChangesHovered(true), [])\n  const handleMouseOut = useCallback(() => setReviewChangesHovered(false), [])\n\n  const handleEdit = useCallback(() => {\n    if (memberItem) {\n      onOpenItem(memberItem.node.path)\n    }\n  }, [onOpenItem, memberItem])\n\n  const handleDoubleClickToOpen = useCallback(\n    (e) => {\n      e.preventDefault()\n      e.stopPropagation()\n      PortableTextEditor.blur(editor)\n      handleEdit()\n    },\n    [editor, handleEdit]\n  )\n\n  const handleDelete = useCallback(\n    (e) => {\n      e.stopPropagation()\n      e.preventDefault()\n      const sel: EditorSelection = {focus: {path, offset: 0}, anchor: {path, offset: 0}}\n      PortableTextEditor.delete(editor, sel, {mode: 'blocks'})\n      // Focus will not stick unless this is done through a timeout when deleted through clicking the menu button.\n      setTimeout(() => PortableTextEditor.focus(editor))\n    },\n    [editor, path]\n  )\n\n  const blockPreview = useMemo(() => {\n    return (\n      <BlockObjectPreview\n        type={type}\n        focused={focused}\n        value={block}\n        readOnly={readOnly}\n        onClickingDelete={handleDelete}\n        onClickingEdit={handleEdit}\n        renderPreview={renderPreview}\n      />\n    )\n  }, [focused, type, block, readOnly, handleDelete, handleEdit, renderPreview])\n\n  const tone = selected || focused ? 'primary' : 'default'\n\n  const innerPaddingProps: ResponsivePaddingProps = useMemo(() => {\n    if (isFullscreen && !renderBlockActions) {\n      return {paddingX: 5}\n    }\n\n    if (isFullscreen && renderBlockActions) {\n      return {paddingLeft: 5, paddingRight: 2}\n    }\n\n    if (renderBlockActions) {\n      return {\n        paddingLeft: 3,\n        paddingRight: 2,\n      }\n    }\n\n    return {paddingX: 3}\n  }, [isFullscreen, renderBlockActions])\n\n  const {validation, hasError, hasWarning, hasInfo} = useMemberValidation(memberItem?.node)\n\n  const hasMarkers = Boolean(markers.length > 0)\n\n  const isImagePreview = memberItem?.node.schemaType.name === 'image'\n\n  const tooltipEnabled = hasError || hasWarning || hasInfo || (hasMarkers && renderCustomMarkers)\n\n  return (\n    <Flex paddingBottom={1} marginY={3} contentEditable={false}>\n      <InnerFlex flex={1}>\n        <PreviewContainer flex={1} {...innerPaddingProps}>\n          <Tooltip\n            placement=\"top\"\n            portal=\"editor\"\n            disabled={!tooltipEnabled}\n            content={\n              tooltipEnabled && (\n                <TooltipBox padding={2}>\n                  <Markers\n                    markers={markers}\n                    validation={validation}\n                    renderCustomMarkers={renderCustomMarkers}\n                  />\n                </TooltipBox>\n              )\n            }\n          >\n            <Root\n              data-focused={focused ? '' : undefined}\n              data-image-preview={isImagePreview ? '' : undefined}\n              data-invalid={hasError ? '' : undefined}\n              data-markers={hasMarkers && renderCustomMarkers ? '' : undefined}\n              data-selected={selected ? '' : undefined}\n              data-testid=\"pte-block-object\"\n              data-warning={hasWarning ? '' : undefined}\n              flex={1}\n              onDoubleClick={handleDoubleClickToOpen}\n              padding={isImagePreview ? 0 : 1}\n              ref={elementRef}\n              tone={tone}\n            >\n              <BlockPreview ref={memberItem?.elementRef as React.RefObject<HTMLDivElement>}>\n                {blockPreview}\n              </BlockPreview>\n            </Root>\n          </Tooltip>\n        </PreviewContainer>\n\n        <BlockActionsOuter marginRight={1}>\n          <BlockActionsInner>\n            {renderBlockActions && block && focused && !readOnly && (\n              <BlockActions\n                onChange={onChange}\n                block={block}\n                renderBlockActions={renderBlockActions}\n              />\n            )}\n          </BlockActionsInner>\n        </BlockActionsOuter>\n\n        {isFullscreen && memberItem && (\n          <ChangeIndicatorWrapper\n            onMouseOver={handleMouseOver}\n            onMouseOut={handleMouseOut}\n            $hasChanges={memberItem.member.item.changed}\n          >\n            <StyledChangeIndicatorWithProvidedFullPath\n              withHoverEffect={false}\n              hasFocus={focused}\n              path={memberItem.member.item.path}\n              isChanged={memberItem.member.item.changed}\n            />\n          </ChangeIndicatorWrapper>\n        )}\n\n        {reviewChangesHovered && <ReviewChangesHighlightBlock />}\n      </InnerFlex>\n    </Flex>\n  )\n}\n","import React, {useRef, useCallback, useEffect} from 'react'\nimport {\n  Box,\n  Button,\n  Inline,\n  Popover,\n  PopoverProps,\n  Text,\n  useGlobalKeyDown,\n  useTheme,\n} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {EditIcon, TrashIcon} from '@sanity/icons'\n\nconst ToolbarPopover = styled(Popover)`\n  &[data-popper-reference-hidden='true'] {\n    display: none !important;\n  }\n`\n\nconst POPOVER_FALLBACK_PLACEMENTS: PopoverProps['fallbackPlacements'] = ['top', 'bottom']\n\ninterface InlineObjectToolbarPopoverProps {\n  onDelete: (event: React.MouseEvent<HTMLButtonElement>) => void\n  onEdit: (event: React.MouseEvent<HTMLButtonElement>) => void\n  open: boolean\n  referenceElement: HTMLElement | null\n  scrollElement: HTMLElement | null\n  setOpen: (open: boolean) => void\n  title: string\n}\n\nexport function InlineObjectToolbarPopover(props: InlineObjectToolbarPopoverProps) {\n  const {open, onEdit, onDelete, referenceElement, scrollElement, setOpen, title} = props\n  const {sanity} = useTheme()\n  const editButtonRef = useRef<HTMLButtonElement | null>(null)\n  const popoverScheme = sanity.color.dark ? 'light' : 'dark'\n  const isTabbing = useRef<boolean>(false)\n\n  // Close floating toolbar on Escape\n  // Focus to edit button on Tab\n  useGlobalKeyDown(\n    useCallback(\n      (event) => {\n        if (!open) {\n          return\n        }\n        if (event.key === 'Escape') {\n          event.preventDefault()\n          event.stopPropagation()\n          isTabbing.current = false\n          setOpen(false)\n        }\n        if (event.key === 'Tab') {\n          if (!isTabbing.current) {\n            event.preventDefault()\n            event.stopPropagation()\n            editButtonRef.current?.focus()\n            isTabbing.current = true\n          }\n        }\n      },\n      [open, setOpen]\n    )\n  )\n\n  useEffect(() => {\n    if (open && isTabbing.current) {\n      editButtonRef.current?.focus()\n    }\n  }, [open])\n\n  return (\n    <div contentEditable={false}>\n      <ToolbarPopover\n        boundaryElement={scrollElement}\n        constrainSize\n        content={\n          <Box padding={1}>\n            <Inline space={1}>\n              <Box padding={2}>\n                <Text weight=\"semibold\" size={1}>\n                  {title}\n                </Text>\n              </Box>\n              <Button\n                icon={EditIcon}\n                mode=\"bleed\"\n                onClick={onEdit}\n                padding={2}\n                ref={editButtonRef}\n                alt=\"Edit object\"\n              />\n              <Button\n                icon={TrashIcon}\n                mode=\"bleed\"\n                padding={2}\n                onClick={onDelete}\n                tone=\"critical\"\n                alt=\"Remove object\"\n              />\n            </Inline>\n          </Box>\n        }\n        fallbackPlacements={POPOVER_FALLBACK_PLACEMENTS}\n        open\n        placement=\"top\"\n        portal=\"editor\"\n        referenceElement={referenceElement}\n        scheme={popoverScheme}\n      />\n    </div>\n  )\n}\n","import {hues} from '@sanity/color'\nimport {\n  PortableTextChild,\n  Type,\n  RenderAttributes,\n  PortableTextEditor,\n  usePortableTextEditor,\n  usePortableTextEditorSelection,\n} from '@sanity/portable-text-editor'\nimport {Path} from '@sanity/types'\nimport React, {useCallback, useEffect, useMemo, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport {Box, Card, Theme, Tooltip} from '@sanity/ui'\nimport {RenderCustomMarkers, FIXME, RenderPreviewCallback} from '../../../types'\nimport {useFormBuilder} from '../../../useFormBuilder'\nimport {PortableTextEditorElement} from '../Compositor'\nimport {usePortableTextMarkers} from '../hooks/usePortableTextMarkers'\nimport {useMemberValidation} from '../hooks/useMemberValidation'\nimport {usePortableTextMemberItem} from '../hooks/usePortableTextMembers'\nimport {pathToString} from '../../../../field/paths'\nimport {InlineObjectToolbarPopover} from './InlineObjectToolbarPopover'\n\ninterface InlineObjectProps {\n  attributes: RenderAttributes\n  onOpenItem: (path: Path) => void\n  readOnly?: boolean\n  renderCustomMarkers?: RenderCustomMarkers\n  renderPreview: RenderPreviewCallback\n  scrollElement: HTMLElement | null\n  type: Type\n  value: PortableTextChild\n}\n\nfunction rootStyle({theme}: {theme: Theme}) {\n  const {color, radius} = theme.sanity\n\n  return css`\n    line-height: 0;\n    border-radius: ${radius[2]}px;\n    padding: 2px;\n    box-shadow: inset 0 0 0 1px var(--card-border-color);\n    height: calc(1em - 1px);\n    margin-top: 0.0625em;\n    cursor: default;\n\n    &:not([hidden]) {\n      display: inline-flex;\n      align-items: center;\n      vertical-align: top;\n    }\n\n    &[data-ready-only] {\n      cursor: default;\n    }\n\n    &[data-focused] {\n      box-shadow: inset 0 0 0 1px ${color.selectable?.primary.selected.border};\n      color: ${color.selectable?.primary.pressed.fg};\n    }\n\n    &[data-selected] {\n      background-color: ${color.selectable?.primary.pressed.bg};\n    }\n\n    &:not([data-focused]):not([data-selected]) {\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.input.default.hovered.border};\n        }\n      }\n    }\n\n    &[data-markers] {\n      --card-bg-color: ${color.dark ? hues.purple[950].hex : hues.purple[50].hex};\n    }\n\n    &[data-warning] {\n      --card-bg-color: ${color.muted.caution.hovered.bg};\n\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.muted.caution.hovered.border};\n        }\n      }\n    }\n\n    &[data-invalid] {\n      --card-bg-color: ${color.input.invalid.enabled.bg};\n      --card-border-color: ${color.input.invalid.enabled.border};\n\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.input.invalid.hovered.border};\n        }\n      }\n    }\n  `\n}\n\nconst Root = styled(Card)(rootStyle)\n\nconst PreviewSpan = styled.span`\n  display: block;\n  max-width: calc(5em + 80px);\n  position: relative;\n`\n\nconst TooltipBox = styled(Box)`\n  max-width: 250px;\n`\n\nexport const InlineObject = React.forwardRef(function InlineObject(\n  props: InlineObjectProps,\n  forwardedRef: React.ForwardedRef<PortableTextEditorElement>\n) {\n  const {\n    attributes: {focused, selected, path},\n    onOpenItem,\n    readOnly,\n    renderCustomMarkers,\n    renderPreview,\n    scrollElement,\n    type,\n    value,\n  } = props\n  const {Markers} = useFormBuilder().__internal.components\n  const editor = usePortableTextEditor()\n  const editorSelection = usePortableTextEditorSelection()\n  const markers = usePortableTextMarkers(path)\n  const memberItem = usePortableTextMemberItem(pathToString(path))\n  const {validation, hasError, hasWarning} = useMemberValidation(memberItem?.node)\n  const hasValidationMarkers = validation.length > 0\n  const [showPopover, setShowPopover] = useState(false)\n\n  const tone = useMemo(() => {\n    if (hasError) {\n      return 'critical'\n    }\n\n    if (hasWarning) {\n      return 'caution'\n    }\n\n    if (selected || focused) {\n      return 'primary'\n    }\n    return undefined\n  }, [focused, hasError, hasWarning, selected])\n\n  useEffect(() => {\n    if (memberItem?.elementRef?.current) {\n      setShowPopover(!readOnly && focused && selected)\n    }\n  }, [focused, selected, editorSelection, memberItem?.elementRef, readOnly])\n\n  const preview = useMemo(\n    () => (\n      <PreviewSpan>\n        {renderPreview({\n          fallbackTitle: 'Click to edit',\n          layout: 'inline',\n          schemaType: type as FIXME,\n          value,\n        })}\n      </PreviewSpan>\n    ),\n\n    [renderPreview, type, value]\n  )\n\n  const markersToolTip = useMemo(\n    () =>\n      markers.length > 0 || validation.length > 0 ? (\n        <Tooltip\n          placement=\"bottom\"\n          portal=\"editor\"\n          content={\n            <TooltipBox padding={2}>\n              <Markers\n                markers={markers}\n                validation={validation}\n                renderCustomMarkers={renderCustomMarkers}\n              />\n            </TooltipBox>\n          }\n        >\n          {preview}\n        </Tooltip>\n      ) : undefined,\n    [Markers, markers, validation, preview, renderCustomMarkers]\n  )\n\n  const handleRemoveClick = useCallback(\n    (event: React.MouseEvent<HTMLButtonElement>): void => {\n      event.preventDefault()\n      event.stopPropagation()\n      setShowPopover(false)\n      const point = {path, offset: 0}\n      const selection = {anchor: point, focus: point}\n      PortableTextEditor.delete(editor, selection, {mode: 'children'})\n      PortableTextEditor.focus(editor)\n    },\n    [editor, path]\n  )\n\n  const handleEditClick = useCallback((): void => {\n    setShowPopover(false)\n    PortableTextEditor.blur(editor)\n    if (memberItem) {\n      onOpenItem(memberItem.node.path)\n    }\n  }, [editor, memberItem, onOpenItem])\n\n  return (\n    <>\n      <Root\n        data-focused={focused || undefined}\n        data-invalid={hasError || undefined}\n        data-warning={hasWarning || undefined}\n        data-selected={selected || undefined}\n        data-read-only={readOnly || undefined}\n        data-markers={hasValidationMarkers || undefined}\n        tone={tone}\n        forwardedAs=\"span\"\n        contentEditable={false}\n        ref={memberItem?.elementRef as React.RefObject<HTMLDivElement>}\n      >\n        <span ref={forwardedRef} onDoubleClick={handleEditClick}>\n          {markersToolTip || preview}\n        </span>\n      </Root>\n      {showPopover && (\n        <InlineObjectToolbarPopover\n          open={showPopover}\n          setOpen={setShowPopover}\n          onDelete={handleRemoveClick}\n          onEdit={handleEditClick}\n          referenceElement={memberItem?.elementRef?.current || null}\n          scrollElement={scrollElement}\n          title={type?.title || type.name}\n        />\n      )}\n    </>\n  )\n})\n","import React, {useState, useRef, useMemo, useEffect, useCallback} from 'react'\nimport {\n  Box,\n  Button,\n  Inline,\n  Popover,\n  PopoverProps,\n  Text,\n  useGlobalKeyDown,\n  useTheme,\n} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {EditIcon, TrashIcon} from '@sanity/icons'\nimport {PortableTextEditor, usePortableTextEditor} from '@sanity/portable-text-editor'\n\nconst ToolbarPopover = styled(Popover)`\n  &[data-popper-reference-hidden='true'] {\n    display: none !important;\n  }\n`\n\nconst POPOVER_FALLBACK_PLACEMENTS: PopoverProps['fallbackPlacements'] = ['top', 'bottom']\n\ninterface AnnotationToolbarPopoverProps {\n  /**\n   * Needed to update the popover position on scroll\n   */\n  focused: boolean\n  scrollElement: HTMLElement | null\n  annotationElement: HTMLElement | null\n  textElement: HTMLElement | null\n  onEdit: (event: React.MouseEvent<HTMLButtonElement>) => void\n  onDelete: (event: React.MouseEvent<HTMLButtonElement>) => void\n  title: string\n}\n\nexport function AnnotationToolbarPopover(props: AnnotationToolbarPopoverProps) {\n  const {scrollElement, annotationElement, focused, textElement, title, onEdit, onDelete} = props\n  const [open, setOpen] = useState<boolean>(false)\n  const [cursorRect, setCursorRect] = useState<DOMRect | null>(null)\n  const [selection, setSelection] = useState<{\n    anchorNode: Node | null\n    anchorOffset: number\n    focusNode: Node | null\n    focusOffset: number\n  } | null>(null)\n  const isClosingRef = useRef<boolean>(false)\n  const rangeRef = useRef<Range | null>(null)\n  const editButtonRef = useRef<HTMLButtonElement | null>(null)\n  const isTabbing = useRef<boolean>(false)\n  const {sanity} = useTheme()\n  const editor = usePortableTextEditor()\n\n  const popoverScheme = sanity.color.dark ? 'light' : 'dark'\n\n  // This is a \"virtual element\" (supported by Popper.js)\n  const cursorElement = useMemo(() => {\n    if (!cursorRect) {\n      return null\n    }\n\n    return {\n      getBoundingClientRect: () => {\n        return cursorRect\n      },\n    }\n  }, [cursorRect])\n\n  useEffect(() => {\n    if (!open) {\n      return undefined\n    }\n\n    const handleScroll = () => {\n      if (rangeRef.current) {\n        setCursorRect(rangeRef.current.getBoundingClientRect())\n      }\n    }\n\n    scrollElement?.addEventListener('scroll', handleScroll, {passive: true})\n\n    return () => {\n      scrollElement?.removeEventListener('scroll', handleScroll)\n    }\n  }, [open, scrollElement])\n\n  // Close floating toolbar on Escape\n  useGlobalKeyDown(\n    useCallback(\n      (event) => {\n        if (!open) {\n          return\n        }\n        if (event.key === 'Escape') {\n          event.preventDefault()\n          event.stopPropagation()\n          setOpen(false)\n          isTabbing.current = false\n          PortableTextEditor.focus(editor)\n        }\n        if (event.key === 'Tab') {\n          if (!isTabbing.current) {\n            event.preventDefault()\n            event.stopPropagation()\n            editButtonRef.current?.focus()\n            isTabbing.current = true\n          }\n        }\n      },\n      [editor, open]\n    )\n  )\n\n  // Detect selection changes\n  useEffect(() => {\n    function handleSelectionChange() {\n      if (!textElement) return\n      const winSelection = window.getSelection()\n\n      if (!winSelection) {\n        return\n      }\n\n      const {anchorNode, anchorOffset, focusNode, focusOffset} = winSelection\n\n      setSelection({\n        anchorNode,\n        anchorOffset,\n        focusNode,\n        focusOffset,\n      })\n    }\n\n    document.addEventListener('selectionchange', handleSelectionChange, {passive: true})\n\n    return () => {\n      document.removeEventListener('selectionchange', handleSelectionChange)\n    }\n  }, [textElement])\n\n  // Open popover when selection is within annotations\n  useEffect(() => {\n    if (!selection) return\n    if (isClosingRef.current) return\n    const {anchorNode, focusNode} = selection\n    // Safari would close the popover by loosing range when button is focused.\n    // If we are focused and currently tabbing to the action buttons, just return here.\n    if (focused && isTabbing.current) {\n      return\n    }\n    if (annotationElement && annotationElement.contains(anchorNode) && anchorNode === focusNode) {\n      const range = window.getSelection()?.getRangeAt(0)\n      const rect = range?.getBoundingClientRect()\n\n      rangeRef.current = range || null\n\n      if (rect) {\n        setCursorRect(rect)\n      }\n      setOpen(true)\n    } else {\n      setOpen(false)\n      setCursorRect(null)\n      rangeRef.current = null\n    }\n  }, [focused, selection, annotationElement])\n\n  return (\n    <ToolbarPopover\n      boundaryElement={scrollElement}\n      constrainSize\n      content={\n        <Box padding={1}>\n          <Inline space={1}>\n            <Box padding={2}>\n              <Text weight=\"semibold\" size={1}>\n                {title}\n              </Text>\n            </Box>\n            <Button\n              ref={editButtonRef}\n              icon={EditIcon}\n              mode=\"bleed\"\n              onClick={onEdit}\n              padding={2}\n              alt=\"Edit annotation\"\n            />\n            <Button\n              icon={TrashIcon}\n              mode=\"bleed\"\n              padding={2}\n              onClick={onDelete}\n              tone=\"critical\"\n              alt=\"Remove annotation\"\n            />\n          </Inline>\n        </Box>\n      }\n      fallbackPlacements={POPOVER_FALLBACK_PLACEMENTS}\n      open={open}\n      placement=\"top\"\n      portal=\"editor\"\n      referenceElement={cursorElement as HTMLElement}\n      scheme={popoverScheme}\n    />\n  )\n}\n","import {hues} from '@sanity/color'\nimport {\n  PortableTextChild,\n  PortableTextEditor,\n  RenderAttributes,\n  usePortableTextEditor,\n  usePortableTextEditorSelection,\n} from '@sanity/portable-text-editor'\nimport {ObjectSchemaType, Path} from '@sanity/types'\nimport {Box, Theme, ThemeColorToneKey, Tooltip} from '@sanity/ui'\nimport React, {SyntheticEvent, useCallback, useEffect, useMemo, useRef, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport {FIXME, RenderCustomMarkers} from '../../../types'\nimport {DefaultMarkers} from '../_legacyDefaultParts/Markers'\nimport {useFormBuilder} from '../../../useFormBuilder'\nimport {useMemberValidation} from '../hooks/useMemberValidation'\nimport {usePortableTextMarkers} from '../hooks/usePortableTextMarkers'\nimport {usePortableTextMemberItem} from '../hooks/usePortableTextMembers'\nimport {pathToString} from '../../../../field/paths'\nimport {AnnotationToolbarPopover} from './AnnotationToolbarPopover'\n\ninterface AnnotationProps {\n  attributes: RenderAttributes\n  children: JSX.Element\n  onOpenItem: (path: Path) => void\n  readOnly?: boolean\n  renderCustomMarkers?: RenderCustomMarkers\n  scrollElement: HTMLElement | null\n  type: ObjectSchemaType\n  value: PortableTextChild\n}\n\nconst Root = styled.span<{$toneKey?: Exclude<ThemeColorToneKey, 'transparent'>}>(\n  (props: {$toneKey?: Exclude<ThemeColorToneKey, 'transparent'>; theme: Theme}) => {\n    const {$toneKey = 'default', theme} = props\n\n    return css`\n      text-decoration: none;\n      display: inline;\n      background-color: ${theme.sanity.color.selectable?.[$toneKey].enabled.bg};\n      border-bottom: 1px dashed ${theme.sanity.color.selectable?.[$toneKey].enabled.fg};\n      color: ${theme.sanity.color.selectable?.[$toneKey].enabled.fg};\n\n      &[data-link] {\n        border-bottom: 1px solid ${theme.sanity.color.selectable?.[$toneKey].enabled.fg};\n      }\n\n      &[data-custom-markers] {\n        background-color: ${theme.sanity.color.dark ? hues.purple[950].hex : hues.purple[50].hex};\n      }\n\n      &[data-warning] {\n        background-color: ${theme.sanity.color.muted.caution.hovered.bg};\n      }\n\n      &[data-error] {\n        background-color: ${theme.sanity.color.muted.critical.hovered.bg};\n      }\n    `\n  }\n)\n\nconst TooltipBox = styled(Box).attrs({forwardedAs: 'span'})`\n  max-width: 250px;\n`\n\nexport const Annotation = function Annotation(props: AnnotationProps) {\n  const {\n    attributes: {focused, path, selected},\n    children,\n    onOpenItem,\n    renderCustomMarkers,\n    scrollElement,\n    readOnly,\n    type,\n    value,\n  } = props\n  const {Markers = DefaultMarkers} = useFormBuilder().__internal.components\n  const annotationRef = useRef<HTMLElement>(null)\n  const editor = usePortableTextEditor()\n  const editorSelection = usePortableTextEditorSelection()\n  const markDefPath = useMemo(\n    () => [path[0]].concat(['markDefs', {_key: value._key}]),\n    [path, value._key]\n  )\n  const [textElement, setTextElement] = useState<HTMLSpanElement | null>(null)\n  const memberItem = usePortableTextMemberItem(pathToString(markDefPath))\n  const {validation, hasError, hasWarning} = useMemberValidation(memberItem?.node)\n  const markers = usePortableTextMarkers(path)\n  const [showPopover, setShowPopover] = useState(false)\n\n  const text = useMemo(\n    () => (\n      <span ref={setTextElement} data-annotation=\"\">\n        {children}\n      </span>\n    ),\n\n    [children]\n  )\n\n  useEffect(() => {\n    setShowPopover(true)\n  }, [editorSelection])\n\n  useEffect(() => {\n    if (memberItem?.elementRef?.current) {\n      setShowPopover(!readOnly && focused && selected)\n    }\n  }, [focused, selected, memberItem?.elementRef, readOnly])\n\n  const markersToolTip = useMemo(\n    () =>\n      validation.length > 0 || markers.length > 0 ? (\n        <Tooltip\n          placement=\"bottom\"\n          portal=\"default\"\n          content={\n            <TooltipBox padding={2}>\n              <Markers\n                markers={markers}\n                renderCustomMarkers={renderCustomMarkers}\n                validation={validation}\n              />\n            </TooltipBox>\n          }\n        >\n          <span>{text}</span>\n        </Tooltip>\n      ) : undefined,\n    [Markers, markers, renderCustomMarkers, text, validation]\n  )\n\n  const handleEditClick = useCallback(\n    (event: SyntheticEvent): void => {\n      setShowPopover(false)\n      PortableTextEditor.blur(editor)\n      event.preventDefault()\n      event.stopPropagation()\n      if (memberItem) {\n        onOpenItem(memberItem.node.path)\n      }\n    },\n    [editor, memberItem, onOpenItem]\n  )\n\n  const handleRemoveClick = useCallback(\n    (event: React.MouseEvent<HTMLButtonElement>): void => {\n      event.preventDefault()\n      event.stopPropagation()\n      PortableTextEditor.removeAnnotation(editor, type as FIXME)\n      PortableTextEditor.focus(editor)\n    },\n    [editor, type]\n  )\n\n  const isLink = type.name === 'link'\n\n  const toneKey = useMemo(() => {\n    if (hasError) {\n      return 'critical'\n    }\n\n    if (hasWarning) {\n      return 'caution'\n    }\n\n    if (isLink) {\n      return 'primary'\n    }\n    return 'default'\n  }, [isLink, hasError, hasWarning])\n\n  const hasCustomMarkers = markers.length > 0\n\n  return (\n    <Root\n      $toneKey={toneKey}\n      ref={annotationRef}\n      data-link={isLink ? '' : undefined}\n      data-error={hasError ? '' : undefined}\n      data-warning={hasWarning ? '' : undefined}\n      data-custom-markers={hasCustomMarkers ? '' : undefined}\n    >\n      <span ref={memberItem?.elementRef}>{markersToolTip || text}</span>\n      {showPopover && (\n        <AnnotationToolbarPopover\n          focused={focused}\n          textElement={textElement}\n          annotationElement={annotationRef?.current}\n          scrollElement={scrollElement}\n          onEdit={handleEditClick}\n          onDelete={handleRemoveClick}\n          title={type?.title || type.name}\n        />\n      )}\n    </Root>\n  )\n}\n","import {ResponsivePaddingProps} from '@sanity/ui'\n\nexport const TEXT_LEVELS = [1, 2, 3, 4, 5, 6, 7, 8, 9]\n\nexport const TEXT_BULLET_MARKERS = ['●', '○', '■']\n\nexport const TEXT_NUMBER_FORMATS = ['number', 'lower-alpha', 'lower-roman']\n\nexport const TEXT_DECORATOR_TAGS: Record<string, React.ElementType> = {\n  em: 'em',\n  'strike-through': 's',\n  underline: 'u',\n  strong: 'strong',\n  code: 'code',\n}\n\nexport const TEXT_STYLE_PADDING: Record<string, ResponsivePaddingProps> = {\n  h1: {\n    paddingTop: 5,\n    paddingBottom: 4,\n  },\n  h2: {\n    paddingTop: 4,\n    paddingBottom: 4,\n  },\n  h3: {\n    paddingTop: 4,\n    paddingBottom: 3,\n  },\n  h4: {\n    paddingTop: 4,\n    paddingBottom: 3,\n  },\n  h5: {\n    paddingTop: 4,\n    paddingBottom: 3,\n  },\n  h6: {\n    paddingTop: 4,\n    paddingBottom: 2,\n  },\n  normal: {\n    paddingTop: 2,\n    paddingBottom: 3,\n  },\n  blockquote: {\n    paddingTop: 2,\n    paddingBottom: 3,\n  },\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {TEXT_DECORATOR_TAGS} from './constants'\n\ninterface DecoratorProps {\n  mark: string\n  children: React.ReactNode\n}\n\nconst Root = styled.span`\n  /* Make sure the annotation styling is visible */\n  &[data-mark='code'] {\n    mix-blend-mode: multiply;\n    color: inherit;\n  }\n`\n\nexport function Decorator(props: DecoratorProps) {\n  const {mark, children} = props\n  const tag = TEXT_DECORATOR_TAGS[mark]\n\n  return (\n    <Root as={tag} data-mark={mark}>\n      {children}\n    </Root>\n  )\n}\n","export function createListName(level: number): string {\n  return `list-level-${level}`\n}\n","import {hues} from '@sanity/color'\nimport {Box, Flex, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {TEXT_BULLET_MARKERS, TEXT_NUMBER_FORMATS} from './constants'\nimport {createListName} from './helpers'\n\ninterface TextBlockStyleProps {\n  $level: number\n}\n\nfunction textBlockStyle(props: TextBlockStyleProps & {theme: Theme}) {\n  const {$level, theme} = props\n  const {color, fonts, radius, space} = theme.sanity\n  const numberMarker = TEXT_NUMBER_FORMATS[($level - 1) % TEXT_NUMBER_FORMATS.length]\n  const bulletMarker = TEXT_BULLET_MARKERS[($level - 1) % TEXT_BULLET_MARKERS.length]\n\n  return css`\n    --marker-bg-color: transparent;\n\n    mix-blend-mode: ${color.dark ? 'screen' : 'multiply'};\n    position: relative;\n\n    & > [data-ui='TextBlock_inner'] {\n      position: relative;\n      flex: 1;\n    }\n\n    & > div:before {\n      content: '';\n      position: absolute;\n      top: -${space[1]}px;\n      bottom: -${space[1]}px;\n      left: -${space[1]}px;\n      right: -${space[1]}px;\n      border-radius: ${radius[2]}px;\n      background-color: var(--marker-bg-color);\n    }\n\n    &[data-custom-markers] {\n      --marker-bg-color: ${color.dark ? hues.purple[950].hex : hues.purple[50].hex};\n    }\n\n    &[data-warning] {\n      --card-border-color: ${color.muted.caution.enabled.border};\n      --marker-bg-color: ${color.muted.caution.hovered.bg};\n    }\n\n    &[data-error] {\n      --card-border-color: ${color.muted.critical.enabled.border};\n      --marker-bg-color: ${color.muted.critical.hovered.bg};\n    }\n\n    & [data-list-prefix] {\n      position: absolute;\n      margin-left: -4.5rem;\n      width: 3.75rem;\n      text-align: right;\n      box-sizing: border-box;\n    }\n\n    &[data-list-item='number'] [data-list-prefix] {\n      font-variant-numeric: tabular-nums;\n\n      & > span:before {\n        content: counter(${createListName($level)}) '.';\n        content: counter(${createListName($level)}, ${numberMarker}) '.';\n      }\n    }\n\n    &[data-list-item='bullet'] [data-list-prefix] {\n      & > span {\n        position: relative;\n        top: -0.1875em;\n\n        &:before {\n          content: '${bulletMarker}';\n          font-size: 0.46666em;\n        }\n      }\n    }\n\n    & [data-text] {\n      overflow-wrap: anywhere;\n      text-transform: none;\n      white-space: pre-wrap;\n      font-family: ${fonts.text.family};\n      flex: 1;\n\n      *::selection {\n        background-color: ${color.selectable?.primary.pressed.bg};\n      }\n    }\n  `\n}\n\nexport const TextRoot = styled.div<TextBlockStyleProps>(textBlockStyle)\n\nexport const TextBlockFlexWrapper = styled(Flex)`\n  position: relative;\n`\n\nexport const ListPrefixWrapper = styled.div`\n  user-select: none;\n  white-space: nowrap;\n`\n\nexport const BlockExtrasContainer = styled(Box)`\n  user-select: none;\n`\n\nexport const BlockActionsOuter = styled(Box)`\n  line-height: 0;\n  width: 25px;\n  position: relative;\n`\n\nexport const BlockActionsInner = styled(Flex)(({theme}: {theme: Theme}) => {\n  const {fonts, space} = theme.sanity\n  const textSize1 = fonts.text.sizes[1]\n  const textSize2 = fonts.text.sizes[2]\n  const capHeight1 = textSize1.lineHeight - textSize1.ascenderHeight - textSize1.descenderHeight\n  const capHeight2 = textSize2.lineHeight - textSize2.ascenderHeight - textSize2.descenderHeight\n  const buttonHeight = capHeight1 + space[2] + space[2]\n\n  // This calculates the following:\n  // > var buttonHeight = 25px\n  // > var capHeight2 = 11px\n  // > 0 - (buttonHeight - capHeight2) / 2 = -7px\n  const negativeTop = 0 - (buttonHeight - capHeight2) / 2\n\n  return css`\n    user-select: none;\n    position: absolute;\n    right: 0;\n    top: ${negativeTop}px;\n  `\n})\n\nexport const TooltipBox = styled(Box)`\n  max-width: 250px;\n`\n\nexport const TextFlex = styled(Flex)<{$level?: number}>`\n  position: relative;\n  padding-left: ${({$level}) => ($level ? $level * 32 : 0)}px;\n`\n\nexport const ChangeIndicatorWrapper = styled.div<{$hasChanges: boolean}>(\n  ({theme, $hasChanges}: {theme: Theme; $hasChanges: boolean}) => {\n    const {space} = theme.sanity\n\n    return css`\n      position: absolute;\n      width: ${space[2]}px;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      padding-left: ${space[1]}px;\n      user-select: none;\n\n      ${!$hasChanges &&\n      css`\n        display: none;\n      `}\n    `\n  }\n)\n","import {Heading, Text} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\ntype TextStyleProps = Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'ref'>\ntype BlockQuoteStyleProps = Omit<React.HTMLProps<HTMLQuoteElement>, 'as' | 'ref'>\n\n// Without this container, editing with Android breaks due to how Text is styled via responsiveFont in @sanity/ui\nconst TextContainer = styled.div`\n  display: block;\n`\n\nexport const Normal = ({children, ...rest}: TextStyleProps) => (\n  <Text data-testid=\"text-style--normal\" {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Text>\n)\n\nexport const Heading1 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h1\" data-testid=\"text-style--h1\" size={5} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nexport const Heading2 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h2\" data-testid=\"text-style--h2\" size={4} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nexport const Heading3 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h3\" data-testid=\"text-style--h3\" size={3} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nexport const Heading4 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h4\" data-testid=\"text-style--h4\" size={2} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nexport const Heading5 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h5\" data-testid=\"text-style--h5\" size={1} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nexport const Heading6 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h6\" data-testid=\"text-style--h6\" size={0} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nconst BlockQuoteRoot = styled.blockquote`\n  position: relative;\n  display: block;\n  margin: 0;\n  padding-left: ${({theme}) => theme.sanity.space[3]}px;\n\n  &::before {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: -4px;\n    bottom: -4px;\n    width: 3px;\n    background: var(--card-border-color);\n  }\n`\n\nexport const BlockQuote = ({children, ...rest}: TextStyleProps) => (\n  // @todo figure out props typings for BlockQuoteStyleProps\n  <BlockQuoteRoot data-testid=\"text-style--blockquote\" {...(rest as any as BlockQuoteStyleProps)}>\n    <Text as=\"p\">{children}</Text>\n  </BlockQuoteRoot>\n)\n\nexport const TEXT_STYLES: Record<string, React.ComponentType<TextStyleProps>> = {\n  normal: Normal,\n  h1: Heading1,\n  h2: Heading2,\n  h3: Heading3,\n  h4: Heading4,\n  h5: Heading5,\n  h6: Heading6,\n  blockquote: BlockQuote,\n}\n","import {PortableTextBlock, RenderAttributes} from '@sanity/portable-text-editor'\nimport {Box, Flex, ResponsivePaddingProps, Tooltip} from '@sanity/ui'\nimport React, {RefObject, useCallback, useMemo, useState} from 'react'\nimport {RenderCustomMarkers} from '../../../types'\nimport {PatchArg} from '../../../patch'\nimport {useFormBuilder} from '../../../useFormBuilder'\nimport {BlockActions} from '../BlockActions'\nimport {ReviewChangesHighlightBlock, StyledChangeIndicatorWithProvidedFullPath} from '../_common'\nimport {RenderBlockActionsCallback} from '../types'\nimport {useMemberValidation} from '../hooks/useMemberValidation'\nimport {usePortableTextMarkers} from '../hooks/usePortableTextMarkers'\nimport {usePortableTextMemberItem} from '../hooks/usePortableTextMembers'\nimport {pathToString} from '../../../../field/paths'\nimport {TEXT_STYLE_PADDING} from './constants'\nimport {\n  BlockActionsInner,\n  BlockActionsOuter,\n  BlockExtrasContainer,\n  ChangeIndicatorWrapper,\n  ListPrefixWrapper,\n  TextBlockFlexWrapper,\n  TextFlex,\n  TextRoot,\n  TooltipBox,\n} from './TextBlock.styles'\nimport {TEXT_STYLES} from './textStyles'\n\nconst DEBUG_RENDERING = false\n\nfunction getRandomColor() {\n  const letters = '0123456789ABCDEF'\n  let color = '#'\n  for (let i = 0; i < 6; i++) {\n    color += letters[Math.floor(Math.random() * 16)]\n  }\n  return color\n}\n\nexport interface TextBlockProps {\n  attributes: RenderAttributes\n  block: PortableTextBlock\n  children: React.ReactNode\n  isFullscreen?: boolean\n  onChange: (...patches: PatchArg[]) => void\n  readOnly?: boolean\n  renderBlockActions?: RenderBlockActionsCallback\n  renderCustomMarkers?: RenderCustomMarkers\n  spellCheck?: boolean\n}\n\nexport function TextBlock(props: TextBlockProps) {\n  const {\n    attributes: {path, focused},\n    block,\n    children,\n    isFullscreen,\n    onChange,\n    readOnly,\n    renderBlockActions,\n    renderCustomMarkers,\n    spellCheck,\n  } = props\n  const {Markers} = useFormBuilder().__internal.components\n  const [reviewChangesHovered, setReviewChangesHovered] = useState<boolean>(false)\n  const markers = usePortableTextMarkers(path)\n  const memberItem = usePortableTextMemberItem(pathToString(path))\n\n  const handleChangeIndicatorMouseEnter = useCallback(() => setReviewChangesHovered(true), [])\n  const handleChangeIndicatorMouseLeave = useCallback(() => setReviewChangesHovered(false), [])\n\n  const {validation, hasError, hasWarning, hasInfo} = useMemberValidation(memberItem?.node)\n\n  const hasMarkers = Boolean(renderCustomMarkers) && markers.length > 0\n\n  const tooltipEnabled = hasError || hasWarning || hasMarkers || hasInfo\n\n  const text = useMemo(() => {\n    const TextStyle = TEXT_STYLES[block.style] || TEXT_STYLES.normal\n\n    return (\n      <TextFlex align=\"flex-start\" $level={block?.level}>\n        {block.listItem && (\n          <ListPrefixWrapper contentEditable={false}>\n            <TextStyle data-list-prefix=\"\" />\n          </ListPrefixWrapper>\n        )}\n\n        <TextStyle data-text=\"\" style={DEBUG_RENDERING ? {color: getRandomColor()} : undefined}>\n          {children}\n        </TextStyle>\n      </TextFlex>\n    )\n  }, [block.style, block.listItem, block.level, children])\n\n  const innerPaddingProps: ResponsivePaddingProps = useMemo(() => {\n    if (isFullscreen && !renderBlockActions) {\n      return {paddingX: 5}\n    }\n\n    if (isFullscreen && renderBlockActions) {\n      return {paddingLeft: 5, paddingRight: 2}\n    }\n\n    if (renderBlockActions) {\n      return {\n        paddingLeft: 3,\n        paddingRight: 2,\n      }\n    }\n\n    return {paddingX: 3}\n  }, [isFullscreen, renderBlockActions])\n\n  const outerPaddingProps: ResponsivePaddingProps = useMemo(() => {\n    if (block.listItem) {\n      return {paddingY: 2}\n    }\n\n    return TEXT_STYLE_PADDING[block.style] || {paddingY: 2}\n  }, [block])\n\n  return (\n    <Box data-testid=\"text-block\" {...outerPaddingProps}>\n      <TextBlockFlexWrapper data-testid=\"text-block__wrapper\">\n        <Flex\n          flex={1}\n          {...innerPaddingProps}\n          ref={memberItem?.elementRef as RefObject<HTMLDivElement>}\n        >\n          <Box flex={1}>\n            <Tooltip\n              placement=\"top\"\n              portal=\"editor\"\n              disabled={!tooltipEnabled}\n              content={\n                tooltipEnabled && (\n                  <TooltipBox padding={2}>\n                    <Markers\n                      markers={markers}\n                      validation={validation}\n                      renderCustomMarkers={renderCustomMarkers}\n                    />\n                  </TooltipBox>\n                )\n              }\n            >\n              <TextRoot\n                $level={block.level}\n                data-error={hasError ? '' : undefined}\n                data-warning={hasWarning ? '' : undefined}\n                data-list-item={block.listItem}\n                // @todo: rename to `data-markers`\n                data-custom-markers={hasMarkers ? '' : undefined}\n                data-testid=\"text-block__text\"\n                spellCheck={spellCheck}\n              >\n                {text}\n              </TextRoot>\n            </Tooltip>\n          </Box>\n\n          <BlockExtrasContainer contentEditable={false}>\n            <BlockActionsOuter marginRight={1}>\n              <BlockActionsInner>\n                {renderBlockActions && focused && !readOnly && (\n                  <BlockActions\n                    onChange={onChange}\n                    block={block}\n                    renderBlockActions={renderBlockActions}\n                  />\n                )}\n              </BlockActionsInner>\n            </BlockActionsOuter>\n\n            {isFullscreen && memberItem && (\n              <ChangeIndicatorWrapper\n                $hasChanges={memberItem.member.item.changed}\n                onMouseEnter={handleChangeIndicatorMouseEnter}\n                onMouseLeave={handleChangeIndicatorMouseLeave}\n              >\n                <StyledChangeIndicatorWithProvidedFullPath\n                  hasFocus={focused}\n                  isChanged={memberItem.member.item.changed}\n                  path={memberItem.member.item.path}\n                  withHoverEffect={false}\n                />\n              </ChangeIndicatorWrapper>\n            )}\n          </BlockExtrasContainer>\n          {reviewChangesHovered && <ReviewChangesHighlightBlock />}\n        </Flex>\n      </TextBlockFlexWrapper>\n    </Box>\n  )\n}\n","import React, {useMemo} from 'react'\nimport styled from 'styled-components'\n\ninterface Props {\n  icon: string\n  active: boolean\n}\n\nconst CustomIconDiv = styled.div`\n  width: 1em;\n  height: 1em;\n  border-radius: inherit;\n  background-origin: content-box;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  transform: scale(0.7);\n`\n\nexport function CustomIcon(props: Props) {\n  const {icon, active} = props\n\n  const inlineStyle = useMemo(\n    () => ({\n      backgroundImage: `url(${icon})`,\n      filter: active ? 'invert(100%)' : 'invert(0%)',\n    }),\n    [active, icon]\n  )\n\n  return <CustomIconDiv style={inlineStyle} />\n}\n","import {\n  BlockElementIcon,\n  BoldIcon,\n  CodeIcon,\n  InlineElementIcon,\n  ItalicIcon,\n  LinkIcon,\n  OlistIcon,\n  StrikethroughIcon,\n  UnderlineIcon,\n  UnknownIcon,\n  UlistIcon,\n} from '@sanity/icons'\nimport {\n  HotkeyOptions,\n  PortableTextEditor,\n  PortableTextFeature,\n  PortableTextFeatures,\n  // Type,\n} from '@sanity/portable-text-editor'\nimport {get} from 'lodash'\nimport React from 'react'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {FIXME} from '../../../types'\nimport {BlockItem, BlockStyleItem, PTEToolbarAction, PTEToolbarActionGroup} from './types'\nimport {CustomIcon} from './CustomIcon'\n\nfunction getPTEFormatActions(\n  editor: PortableTextEditor,\n  disabled: boolean,\n  hotkeyOpts: HotkeyOptions\n): PTEToolbarAction[] {\n  const features = PortableTextEditor.getPortableTextFeatures(editor)\n  return features.decorators.map((decorator) => {\n    const shortCutKey = Object.keys(hotkeyOpts.marks || {}).find(\n      (key) => hotkeyOpts.marks?.[key] === decorator.value\n    )\n\n    let hotkeys: string[] = []\n    if (shortCutKey) {\n      hotkeys = [shortCutKey]\n    }\n\n    return {\n      type: 'format',\n      disabled: disabled,\n      icon: decorator.blockEditor?.icon,\n      key: decorator.value,\n      handle: (): void => {\n        PortableTextEditor.toggleMark(editor, decorator.value)\n        PortableTextEditor.focus(editor)\n      },\n      hotkeys,\n      title: decorator.title,\n    }\n  })\n}\n\nfunction getPTEListActions(editor: PortableTextEditor, disabled: boolean): PTEToolbarAction[] {\n  const features = PortableTextEditor.getPortableTextFeatures(editor)\n  return features.lists.map((listItem: PortableTextFeature) => {\n    return {\n      type: 'listStyle',\n      key: listItem.value,\n      disabled: disabled,\n      icon: listItem.blockEditor?.icon,\n      handle: (): void => {\n        PortableTextEditor.toggleList(editor, listItem.value)\n      },\n      title: listItem.title,\n    }\n  })\n}\n\nfunction getAnnotationIcon(item: PortableTextFeature): React.ComponentType | string | undefined {\n  return (\n    get(item, 'icon') ||\n    get(item, 'blockEditor.icon') ||\n    get(item, 'type.icon') ||\n    get(item, 'type.to.icon') ||\n    get(item, 'type.to[0].icon')\n  )\n}\n\nfunction getPTEAnnotationActions(\n  editor: PortableTextEditor,\n  disabled: boolean,\n  onInsert: (type: ObjectSchemaType) => void\n): PTEToolbarAction[] {\n  const features = PortableTextEditor.getPortableTextFeatures(editor)\n  const focusChild = PortableTextEditor.focusChild(editor)\n  const hasText = focusChild && focusChild.text\n  return features.annotations.map((item) => {\n    return {\n      type: 'annotation',\n      disabled: !hasText || disabled,\n      icon: getAnnotationIcon(item),\n      key: item.value,\n      handle: (active?: boolean): void => {\n        if (active) {\n          PortableTextEditor.removeAnnotation(editor, item.type)\n          PortableTextEditor.focus(editor)\n        } else {\n          onInsert(item.type as FIXME)\n        }\n      },\n      title: item.title,\n    }\n  })\n}\n\nexport function getPTEToolbarActionGroups(\n  editor: PortableTextEditor,\n  disabled: boolean,\n  onInsertAnnotation: (type: ObjectSchemaType) => void,\n  hotkeyOpts: HotkeyOptions\n): PTEToolbarActionGroup[] {\n  return [\n    {name: 'format', actions: getPTEFormatActions(editor, disabled, hotkeyOpts)},\n    {name: 'list', actions: getPTEListActions(editor, disabled)},\n    {name: 'annotation', actions: getPTEAnnotationActions(editor, disabled, onInsertAnnotation)},\n  ]\n}\n\nexport function getBlockStyles(features: PortableTextFeatures): BlockStyleItem[] {\n  return features.styles.map((style: PortableTextFeature) => {\n    return {\n      key: `style-${style.value}`,\n      style: style.value,\n      styleComponent: style && style.blockEditor && style.blockEditor.render,\n      title: style.title,\n    }\n  })\n}\n\nfunction getInsertMenuIcon(\n  type: ObjectSchemaType,\n  fallbackIcon: React.ComponentType\n): React.ComponentType {\n  const referenceIcon = get(type, 'to[0].icon')\n\n  return type.icon || (type.type && type.type.icon) || referenceIcon || fallbackIcon\n}\n\nexport function getInsertMenuItems(\n  features: PortableTextFeatures,\n  disabled: boolean,\n  onInsertBlock: (type: ObjectSchemaType) => void,\n  onInsertInline: (type: ObjectSchemaType) => void\n): BlockItem[] {\n  const blockItems = features.types.blockObjects.map(\n    (type, index): BlockItem => ({\n      handle: () => onInsertBlock(type as FIXME),\n      icon: getInsertMenuIcon(type as FIXME, BlockElementIcon),\n      inline: false,\n      key: `block-${index}`,\n      type: type as FIXME,\n    })\n  )\n\n  const inlineItems = features.types.inlineObjects.map(\n    (type, index): BlockItem => ({\n      handle: () => onInsertInline(type as FIXME),\n      icon: getInsertMenuIcon(type as FIXME, InlineElementIcon),\n      inline: true,\n      key: `inline-${index}`,\n      type: type as FIXME,\n    })\n  )\n\n  // Do not include items that are supposed to be hidden\n  const filteredBlockItems = blockItems.concat(inlineItems).filter((item) => !item.type?.hidden)\n\n  return filteredBlockItems\n}\n\nconst annotationIcons: Record<string, React.ComponentType> = {\n  link: LinkIcon,\n}\n\nconst formatIcons: Record<string, React.ComponentType> = {\n  strong: BoldIcon,\n  em: ItalicIcon,\n  'strike-through': StrikethroughIcon,\n  underline: UnderlineIcon,\n  code: CodeIcon,\n}\n\nconst listStyleIcons: Record<string, React.ComponentType> = {\n  number: OlistIcon,\n  bullet: UlistIcon,\n}\n\nexport function getActionIcon(action: PTEToolbarAction, active: boolean) {\n  if (action.icon) {\n    if (typeof action.icon === 'string') {\n      return <CustomIcon active={active} icon={action.icon} />\n    }\n\n    return action.icon\n  }\n\n  if (action.type === 'annotation') {\n    return annotationIcons[action.key] || UnknownIcon\n  }\n\n  if (action.type === 'listStyle') {\n    return listStyleIcons[action.key] || UnknownIcon\n  }\n\n  return formatIcons[action.key] || UnknownIcon\n}\n","import {\n  HotkeyOptions,\n  PortableTextBlock,\n  PortableTextChild,\n  PortableTextEditor,\n  PortableTextFeatures,\n  usePortableTextEditor,\n  usePortableTextEditorSelection,\n} from '@sanity/portable-text-editor'\nimport {ObjectSchemaType, Path} from '@sanity/types'\nimport {useCallback, useMemo} from 'react'\nimport {useUnique} from '../../../../util'\nimport {FIXME} from '../../../types'\nimport {getPTEToolbarActionGroups} from './helpers'\nimport {BlockStyleItem, PTEToolbarAction, PTEToolbarActionGroup} from './types'\n\nexport function useFocusBlock(): PortableTextBlock | undefined {\n  const editor = usePortableTextEditor()\n  const selection = usePortableTextEditorSelection()\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  return useMemo(() => PortableTextEditor.focusBlock(editor), [editor, selection]) // selection must be an additional dep here\n}\n\nexport function useFocusChild(): PortableTextChild | undefined {\n  const editor = usePortableTextEditor()\n  const selection = usePortableTextEditorSelection()\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  return useMemo(() => PortableTextEditor.focusChild(editor), [editor, selection]) // selection must be an additional dep here\n}\n\nexport function useFeatures(): PortableTextFeatures {\n  const editor = usePortableTextEditor()\n\n  return useMemo(() => PortableTextEditor.getPortableTextFeatures(editor), [editor])\n}\n\nexport function useActionGroups({\n  hotkeys,\n  onExpand,\n  resolveInitialValue,\n  disabled,\n}: {\n  hotkeys: HotkeyOptions\n  onExpand: (path: Path) => void\n  resolveInitialValue: (type: ObjectSchemaType) => any\n  disabled: boolean\n}): PTEToolbarActionGroup[] {\n  const editor = usePortableTextEditor()\n\n  const handleInsertAnnotation = useCallback(\n    async (type: ObjectSchemaType) => {\n      const initialValue = await resolveInitialValue(type)\n      const paths = PortableTextEditor.addAnnotation(editor, type as FIXME, initialValue)\n      if (paths && paths.markDefPath) {\n        PortableTextEditor.blur(editor)\n        onExpand(paths.markDefPath)\n      }\n    },\n    [editor, onExpand, resolveInitialValue]\n  )\n\n  return useMemo(\n    () =>\n      editor ? getPTEToolbarActionGroups(editor, disabled, handleInsertAnnotation, hotkeys) : [],\n    [disabled, editor, handleInsertAnnotation, hotkeys]\n  )\n}\n\nexport function useActiveActionKeys({\n  actions,\n}: {\n  actions: Array<PTEToolbarAction & {firstInGroup?: true}>\n}): string[] {\n  const editor = usePortableTextEditor()\n  const selection = usePortableTextEditorSelection()\n\n  return useUnique(\n    useMemo(\n      () => {\n        const activeAnnotationKeys = PortableTextEditor.activeAnnotations(editor).map(\n          (a) => a._type\n        )\n\n        return actions\n          .filter((a) => {\n            if (a.type === 'annotation') {\n              return activeAnnotationKeys.includes(a.key)\n            }\n\n            if (a.type === 'listStyle') {\n              return PortableTextEditor.hasListStyle(editor, a.key)\n            }\n\n            return PortableTextEditor.isMarkActive(editor, a.key)\n          })\n          .map((a) => a.key)\n      },\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      [\n        editor,\n        // This is needed so that active actions update as `selection` changes\n        selection,\n      ]\n    )\n  )\n}\n\nexport function useActiveStyleKeys({items}: {items: BlockStyleItem[]}): string[] {\n  const editor = usePortableTextEditor()\n  const focusBlock = useFocusBlock()\n  const selection = usePortableTextEditorSelection()\n\n  return useUnique(\n    useMemo(\n      () =>\n        items.filter((i) => PortableTextEditor.hasBlockStyle(editor, i.style)).map((i) => i.style),\n      //  eslint-disable-next-line react-hooks/exhaustive-deps\n      [\n        focusBlock,\n        // This is needed so that active styles update as `selection` changes\n        selection,\n      ]\n    )\n  )\n}\n","import React, {memo, useCallback, useMemo} from 'react'\nimport {Button, ButtonProps, PopoverProps} from '@sanity/ui'\nimport {EllipsisVerticalIcon} from '@sanity/icons'\nimport {PortableTextEditor, usePortableTextEditor} from '@sanity/portable-text-editor'\nimport {CollapseMenuButton, CollapseMenu} from '../../../../components/collapseMenu'\nimport {PTEToolbarAction, PTEToolbarActionGroup} from './types'\nimport {useActiveActionKeys, useFeatures, useFocusBlock} from './hooks'\nimport {getActionIcon} from './helpers'\n\nconst CollapseMenuMemo = memo(CollapseMenu)\n\nconst MENU_POPOVER_PROPS: PopoverProps = {constrainSize: true, portal: true}\nconst COLLAPSE_BUTTON_PROPS: ButtonProps = {padding: 2, mode: 'bleed'}\n\ninterface ActionMenuProps {\n  disabled: boolean\n  groups: PTEToolbarActionGroup[]\n  isFullscreen?: boolean\n  collapsed?: boolean\n}\n\nexport const ActionMenu = memo(function ActionMenu(props: ActionMenuProps) {\n  const {disabled: disabledProp, groups, isFullscreen, collapsed} = props\n  const focusBlock = useFocusBlock()\n  const features = useFeatures()\n  const editor = usePortableTextEditor()\n\n  const isVoidBlock = focusBlock?._type !== features.types.block.name\n  const isEmptyTextBlock =\n    !isVoidBlock && focusBlock?.children.length === 1 && focusBlock?.children[0].text === ''\n\n  const disabled = disabledProp || isVoidBlock\n\n  const actions: Array<PTEToolbarAction & {firstInGroup?: true}> = useMemo(\n    () =>\n      groups.reduce<Array<PTEToolbarAction & {firstInGroup?: true}>>((acc, group) => {\n        return acc.concat(\n          group.actions.map(\n            // eslint-disable-next-line max-nested-callbacks\n            (action: PTEToolbarAction, actionIndex) => {\n              if (actionIndex === 0) return {...action, firstInGroup: true}\n              return action\n            }\n          )\n        )\n      }, []),\n    [groups]\n  )\n\n  const activeKeys = useActiveActionKeys({actions})\n\n  const handleMenuClose = useCallback(() => {\n    PortableTextEditor.focus(editor)\n  }, [editor])\n\n  const children = useMemo(\n    () =>\n      actions.map((action) => {\n        const annotationDisabled = action.type === 'annotation' && isEmptyTextBlock\n        const active = activeKeys.includes(action.key)\n        return (\n          <CollapseMenuButton\n            disabled={disabled || annotationDisabled}\n            {...COLLAPSE_BUTTON_PROPS}\n            dividerBefore={action.firstInGroup}\n            icon={getActionIcon(action, active)}\n            key={action.key}\n            // eslint-disable-next-line react/jsx-no-bind\n            onClick={() => action.handle(active)}\n            selected={active}\n            text={action.title || action.key}\n            tooltipText={action.title || action.key}\n            tooltipProps={{\n              disabled: disabled || annotationDisabled,\n              placement: isFullscreen ? 'bottom' : 'top',\n              portal: 'default',\n            }}\n          />\n        )\n      }),\n    [actions, activeKeys, disabled, isEmptyTextBlock, isFullscreen]\n  )\n\n  const menuButtonProps = useMemo(\n    () => ({\n      button: <Button icon={EllipsisVerticalIcon} mode=\"bleed\" padding={2} disabled={disabled} />,\n      popover: MENU_POPOVER_PROPS,\n    }),\n\n    [disabled]\n  )\n\n  return (\n    <CollapseMenuMemo\n      collapsed={collapsed}\n      disableRestoreFocusOnClose\n      gap={1}\n      menuButtonProps={menuButtonProps}\n      onMenuClose={handleMenuClose}\n    >\n      {children}\n    </CollapseMenuMemo>\n  )\n})\n","import React, {memo, useCallback, useEffect, useMemo, useState} from 'react'\nimport {PortableTextEditor, usePortableTextEditor} from '@sanity/portable-text-editor'\nimport {Button, Menu, MenuButton, MenuButtonProps, MenuItem, Text} from '@sanity/ui'\nimport {SelectIcon} from '@sanity/icons'\nimport styled from 'styled-components'\nimport {\n  Heading1,\n  Heading2,\n  Heading3,\n  Heading4,\n  Heading5,\n  Heading6,\n  BlockQuote,\n  Normal,\n} from '../text/textStyles'\nimport {useActiveStyleKeys, useFeatures, useFocusBlock} from './hooks'\nimport {BlockStyleItem} from './types'\n\nconst MenuButtonMemo = memo(MenuButton)\n\ninterface BlockStyleSelectProps {\n  disabled: boolean\n  items: BlockStyleItem[]\n}\n\nconst StyledMenuItem = styled(MenuItem)`\n  // Change the border color variable used by BlockQuote\n  // to make the border visible when the MenuItem is selected\n  &[data-selected] {\n    [data-option='blockquote'] {\n      --card-border-color: var(--card-muted-fg-color);\n    }\n  }\n`\n\nconst StyledButton = styled(Button)`\n  width: 100%;\n`\n\nconst MENU_POPOVER_PROPS: MenuButtonProps['popover'] = {\n  constrainSize: true,\n  placement: 'bottom-start',\n  portal: 'default',\n}\n\nconst TEXT_STYLE_OPTIONS: Record<string, (title: React.ReactNode) => React.ReactNode> = {\n  h1: (title) => <Heading1>{title}</Heading1>,\n  h2: (title) => <Heading2>{title}</Heading2>,\n  h3: (title) => <Heading3>{title}</Heading3>,\n  h4: (title) => <Heading4>{title}</Heading4>,\n  h5: (title) => <Heading5>{title}</Heading5>,\n  h6: (title) => <Heading6>{title}</Heading6>,\n  normal: (title) => <Normal>{title}</Normal>,\n  blockquote: (title) => <BlockQuote data-option=\"blockquote\">{title}</BlockQuote>,\n}\n\nconst TEXT_STYLE_KEYS = Object.keys(TEXT_STYLE_OPTIONS)\n\nconst preventDefault = (event: React.MouseEvent<HTMLButtonElement>) => event.preventDefault()\n\nconst emptyStyle: BlockStyleItem = {\n  key: 'style-none',\n  style: '',\n  title: 'No style',\n}\n\nexport const BlockStyleSelect = memo(function BlockStyleSelect(\n  props: BlockStyleSelectProps\n): JSX.Element {\n  const {disabled, items: itemsProp} = props\n  const editor = usePortableTextEditor()\n  const features = useFeatures()\n  const focusBlock = useFocusBlock()\n  const [changed, setChanged] = useState(false)\n\n  const _disabled =\n    disabled || (focusBlock ? features.types.block.name !== focusBlock._type : false)\n\n  // @todo: Explain what this does\n  const activeKeys = useActiveStyleKeys({items: itemsProp})\n\n  const {activeItems, items} = useMemo(() => {\n    const _activeItems = itemsProp.filter((item) => activeKeys.includes(item.style))\n\n    let _items = itemsProp\n\n    if (_activeItems.length === 0 && _items.length > 1) {\n      _items = _items.concat([emptyStyle])\n      _activeItems.push(emptyStyle)\n    }\n\n    return {activeItems: _activeItems, items: _items}\n  }, [activeKeys, itemsProp])\n\n  const menuButtonText = useMemo(() => {\n    if (activeItems.length > 1) return 'Multiple'\n    if (activeItems.length === 1) return activeItems[0].title\n    return emptyStyle.title\n  }, [activeItems])\n\n  const handleChange = useCallback(\n    (item: BlockStyleItem): void => {\n      if (focusBlock && item.style !== focusBlock.style) {\n        PortableTextEditor.toggleBlockStyle(editor, item.style)\n      }\n      setChanged(true)\n    },\n    [editor, focusBlock]\n  )\n\n  const renderOption = useCallback((style: string, title: string) => {\n    const hasTextStyle = TEXT_STYLE_KEYS.includes(style)\n    const renderStyle = TEXT_STYLE_OPTIONS[style]\n\n    if (hasTextStyle) {\n      return renderStyle(title)\n    }\n\n    return <Text>{title}</Text>\n  }, [])\n\n  const button = useMemo(\n    () => (\n      <StyledButton\n        disabled={_disabled}\n        iconRight={SelectIcon}\n        mode=\"bleed\"\n        onClick={preventDefault}\n        padding={2}\n        text={menuButtonText}\n      />\n    ),\n    [_disabled, menuButtonText]\n  )\n\n  const menu = useMemo(\n    () => (\n      <Menu disabled={_disabled}>\n        {items.map((item) => {\n          return (\n            <StyledMenuItem\n              key={item.key}\n              pressed={activeItems.includes(item)}\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={_disabled ? undefined : () => handleChange(item)}\n            >\n              {renderOption(item.style, item?.title || item.style)}\n            </StyledMenuItem>\n          )\n        })}\n      </Menu>\n    ),\n    [_disabled, activeItems, handleChange, items, renderOption]\n  )\n\n  // Set focus back into the editor when the new value get's in\n  // This must be the last registered hook or it will not be able to focus properly.\n  useEffect(() => {\n    if (changed) {\n      PortableTextEditor.focus(editor)\n      setChanged(false)\n    }\n  }, [activeItems, changed, editor])\n\n  return (\n    <MenuButtonMemo\n      popover={MENU_POPOVER_PROPS}\n      id=\"block-style-select\"\n      button={button}\n      menu={menu}\n    />\n  )\n})\n","import React, {memo, useCallback, useMemo} from 'react'\nimport {AddIcon} from '@sanity/icons'\nimport {Button, PopoverProps} from '@sanity/ui'\nimport {PortableTextEditor, usePortableTextEditor} from '@sanity/portable-text-editor'\nimport {CollapseMenu, CollapseMenuButton} from '../../../../components/collapseMenu'\nimport {BlockItem} from './types'\nimport {useFeatures, useFocusBlock} from './hooks'\n\nconst CollapseMenuMemo = memo(CollapseMenu)\n\nconst MENU_POPOVER_PROPS: PopoverProps = {constrainSize: true, portal: true}\ninterface InsertMenuProps {\n  disabled: boolean\n  items: BlockItem[]\n  isFullscreen?: boolean\n  collapsed?: boolean\n}\n\nexport const InsertMenu = memo(function InsertMenu(props: InsertMenuProps) {\n  const {disabled, items, isFullscreen, collapsed} = props\n  const features = useFeatures()\n  const focusBlock = useFocusBlock()\n  const editor = usePortableTextEditor()\n\n  const isVoidFocus = focusBlock && focusBlock._type !== features.types.block.name\n\n  const handleMenuClose = useCallback(() => {\n    PortableTextEditor.focus(editor)\n  }, [editor])\n\n  const children = useMemo(() => {\n    return items.map((item) => {\n      const title = item.type.title || item.type.type?.name\n\n      return (\n        <CollapseMenuButton\n          aria-label={`Insert ${title}${item.inline ? ' (inline)' : ' (block)'}`}\n          padding={2}\n          mode=\"bleed\"\n          disabled={disabled || (isVoidFocus && item.inline === true)}\n          icon={item.icon}\n          key={item.key}\n          // eslint-disable-next-line react/jsx-no-bind, react/jsx-handler-names\n          onClick={item.handle}\n          text={title}\n          tooltipText={`Insert ${title}`}\n          tooltipProps={{\n            disabled,\n            placement: isFullscreen ? 'bottom' : 'top',\n            portal: 'default',\n          }}\n        />\n      )\n    })\n  }, [items, disabled, isVoidFocus, isFullscreen])\n\n  const menuButtonProps = useMemo(\n    () => ({\n      button: <Button icon={AddIcon} mode=\"bleed\" padding={2} disabled={disabled} />,\n      popover: MENU_POPOVER_PROPS,\n    }),\n\n    [disabled]\n  )\n\n  return (\n    <CollapseMenuMemo\n      collapsed={collapsed}\n      collapseText={false}\n      disableRestoreFocusOnClose\n      gap={1}\n      menuButtonProps={menuButtonProps}\n      onMenuClose={handleMenuClose}\n    >\n      {children}\n    </CollapseMenuMemo>\n  )\n})\n","import {\n  HotkeyOptions,\n  usePortableTextEditor,\n  usePortableTextEditorSelection,\n  // Type,\n  PortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport React, {memo, useCallback, useMemo, useState} from 'react'\nimport {ObjectSchemaType, Path, SchemaType} from '@sanity/types'\nimport {Box, Button, Flex, Hotkeys, Text, Tooltip, useElementRect, useToast} from '@sanity/ui'\nimport {CollapseIcon, ExpandIcon} from '@sanity/icons'\nimport styled, {css} from 'styled-components'\nimport {useRovingFocus} from '../../../../components/rovingFocus'\nimport {FIXME} from '../../../types'\nimport {useResolveInitialValueForType} from '../../../../datastores'\nimport {ActionMenu} from './ActionMenu'\nimport {BlockStyleSelect} from './BlockStyleSelect'\nimport {InsertMenu} from './InsertMenu'\nimport {getBlockStyles, getInsertMenuItems} from './helpers'\nimport {useActionGroups, useFeatures} from './hooks'\nimport {BlockItem, BlockStyleItem, PTEToolbarActionGroup} from './types'\n\ninterface ToolbarProps {\n  hotkeys: HotkeyOptions\n  isFullscreen: boolean\n  readOnly?: boolean\n  onExpand: (path: Path) => void\n  onToggleFullscreen: () => void\n}\n\nconst RootFlex = styled(Flex)`\n  width: 100%;\n`\n\nconst StyleSelectBox = styled(Box)`\n  width: 8em;\n`\n\nconst StyleSelectFlex = styled(Flex)`\n  border-right: 1px solid var(--card-border-color);\n`\n\nconst ActionMenuBox = styled(Box)<{$withInsertMenu: boolean}>`\n  ${({$withInsertMenu}) =>\n    $withInsertMenu &&\n    css`\n      max-width: max-content;\n      border-right: 1px solid var(--card-border-color);\n    `}\n`\n\nconst FullscreenButtonBox = styled(Box)`\n  border-left: 1px solid var(--card-border-color);\n`\n\nconst SLOW_INITIAL_VALUE_LIMIT = 300\n\nconst IS_MAC =\n  typeof window != 'undefined' && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform)\n\nconst InnerToolbar = memo(function InnerToolbar({\n  actionGroups,\n  blockStyles,\n  disabled,\n  insertMenuItems,\n  isFullscreen,\n  onToggleFullscreen,\n}: {\n  actionGroups: PTEToolbarActionGroup[]\n  blockStyles: BlockStyleItem[]\n  disabled: boolean\n  insertMenuItems: BlockItem[]\n  isFullscreen: boolean\n  onToggleFullscreen: () => void\n}) {\n  const actionsLen = actionGroups.reduce((acc, x) => acc + x.actions.length, 0)\n  const showActionMenu = actionsLen > 0\n  const showInsertMenu = insertMenuItems.length > 0\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n  const rootElementRect = useElementRect(rootElement)\n\n  const collapsed = rootElementRect ? rootElementRect?.width < 400 : false\n\n  useRovingFocus({\n    rootElement: rootElement,\n  })\n\n  return (\n    <RootFlex align=\"center\" ref={setRootElement}>\n      <StyleSelectFlex flex={collapsed ? 1 : undefined}>\n        <StyleSelectBox padding={isFullscreen ? 2 : 1}>\n          <BlockStyleSelect disabled={disabled} items={blockStyles} />\n        </StyleSelectBox>\n      </StyleSelectFlex>\n\n      <Flex flex={1}>\n        {showActionMenu && (\n          <ActionMenuBox\n            flex={collapsed ? undefined : 1}\n            padding={isFullscreen ? 2 : 1}\n            $withInsertMenu={showInsertMenu}\n          >\n            <ActionMenu\n              disabled={disabled}\n              collapsed={collapsed}\n              groups={actionGroups}\n              isFullscreen={isFullscreen}\n            />\n          </ActionMenuBox>\n        )}\n\n        {showInsertMenu && (\n          <Box flex={collapsed ? undefined : 1} padding={isFullscreen ? 2 : 1}>\n            <InsertMenu\n              disabled={disabled}\n              collapsed={collapsed}\n              items={insertMenuItems}\n              isFullscreen={isFullscreen}\n            />\n          </Box>\n        )}\n      </Flex>\n      <FullscreenButtonBox padding={isFullscreen ? 2 : 1}>\n        <Tooltip\n          content={\n            <Flex align=\"center\" padding={1}>\n              <Box flex={1} paddingX={1}>\n                <Text size={1}>{`${isFullscreen ? 'Collapse' : 'Expand'} editor`}</Text>\n              </Box>\n              <Box marginLeft={1}>\n                <Hotkeys keys={[`${IS_MAC ? 'Cmd' : 'Ctrl'}`, 'Enter']} />\n              </Box>\n            </Flex>\n          }\n          placement={isFullscreen ? 'bottom' : 'top'}\n          portal=\"default\"\n        >\n          <Button\n            padding={2}\n            icon={isFullscreen ? CollapseIcon : ExpandIcon}\n            mode=\"bleed\"\n            onClick={onToggleFullscreen}\n          />\n        </Tooltip>\n      </FullscreenButtonBox>\n    </RootFlex>\n  )\n})\n\nexport function Toolbar(props: ToolbarProps) {\n  const {hotkeys, isFullscreen, readOnly, onExpand, onToggleFullscreen} = props\n  const features = useFeatures()\n  const editor = usePortableTextEditor()\n  const selection = usePortableTextEditorSelection()\n  const resolveInitialValueForType = useResolveInitialValueForType()\n  const disabled = readOnly || !selection\n\n  const {push} = useToast()\n\n  const resolveInitialValue = useCallback(\n    (type: ObjectSchemaType) => {\n      let isSlow = false\n      const slowTimer = setTimeout(() => {\n        isSlow = true\n        push({\n          id: 'resolving-initial-value',\n          status: 'info',\n          title: 'Resolving initial value…',\n        })\n      }, SLOW_INITIAL_VALUE_LIMIT)\n      return resolveInitialValueForType(type as unknown as SchemaType, {})\n        .then((value) => {\n          if (isSlow) {\n            // I found no way to close an existing toast, so this will replace the message in the\n            // \"Resolving initial value…\"-toast and then make sure it gets closed.\n            push({\n              id: 'resolving-initial-value',\n              status: 'info',\n              duration: 500,\n              title: 'Initial value resolved',\n            })\n          }\n          return value\n        })\n        .catch((error) => {\n          push({\n            title: `Could not resolve initial value`,\n            id: 'resolving-initial-value',\n            description: `Unable to resolve initial value for type: ${type.name}: ${error.message}.`,\n            status: 'error',\n          })\n\n          return undefined\n        })\n        .finally(() => clearTimeout(slowTimer))\n    },\n    [push]\n  )\n\n  const handleInsertBlock = useCallback(\n    async (type: ObjectSchemaType) => {\n      const initialValue = await resolveInitialValue(type)\n      const path = PortableTextEditor.insertBlock(editor, type as FIXME, initialValue)\n      if (path) {\n        PortableTextEditor.blur(editor)\n        onExpand(path)\n      }\n    },\n    [editor, onExpand, resolveInitialValue]\n  )\n\n  const handleInsertInline = useCallback(\n    async (type: ObjectSchemaType) => {\n      const initialValue = await resolveInitialValue(type)\n      const path = PortableTextEditor.insertChild(editor, type as FIXME, initialValue)\n      if (path) {\n        PortableTextEditor.blur(editor)\n        onExpand(path)\n      }\n    },\n    [editor, onExpand, resolveInitialValue]\n  )\n\n  const actionGroups = useActionGroups({\n    hotkeys,\n    onExpand,\n    resolveInitialValue,\n    disabled: true,\n  })\n\n  const blockStyles = useMemo(() => getBlockStyles(features), [features])\n\n  const insertMenuItems = useMemo(\n    () => getInsertMenuItems(features, disabled, handleInsertBlock, handleInsertInline),\n    [disabled, features, handleInsertBlock, handleInsertInline]\n  )\n\n  return (\n    <InnerToolbar\n      actionGroups={actionGroups}\n      blockStyles={blockStyles}\n      disabled={disabled}\n      insertMenuItems={insertMenuItems}\n      isFullscreen={isFullscreen}\n      onToggleFullscreen={onToggleFullscreen}\n    />\n  )\n}\n","import {Card, Container, rem} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {ScrollContainer} from '../../../components/scroll'\nimport {createListName, TEXT_LEVELS} from './text'\n\nexport const Root = styled(Card)<{$fullscreen: boolean}>`\n  height: ${({$fullscreen}) => ($fullscreen ? '100%' : '15em')};\n\n  &:not([hidden]) {\n    display: flex;\n  }\n\n  flex-direction: column;\n`\n\nexport const ToolbarCard = styled(Card)`\n  z-index: 10;\n  line-height: 0;\n`\n\nexport const EditableCard = styled(Card)`\n  position: relative;\n  overflow: hidden;\n\n  & > [data-portal] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    pointer-events: none;\n\n    & > * {\n      pointer-events: initial;\n    }\n  }\n\n  &::selection,\n  *::selection {\n    background-color: transparent;\n  }\n`\n\nexport const Scroller = styled(ScrollContainer)`\n  position: relative;\n  overflow: auto;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n\n  & > * {\n    flex: 1;\n    min-height: auto;\n  }\n`\n\nexport const EditableContainer = styled(Container)`\n  /* @todo: calculate from theme */\n  /* max-width: 728px; */\n`\n\nexport const EditableWrapper = styled(Card)<{$isFullscreen: boolean; $readOnly?: boolean}>`\n  height: 100%;\n  width: 100%;\n  counter-reset: ${TEXT_LEVELS.map((l) => createListName(l)).join(' ')};\n  overflow: hidden;\n\n  & > div {\n    height: 100%;\n  }\n\n  & .pt-editable {\n    display: block;\n    width: 100%;\n    height: 100%;\n\n    ${TEXT_LEVELS.map((l) => {\n      return css`\n        & > .pt-list-item-number[class~='pt-list-item-level-${l}'] {\n          counter-increment: ${createListName(l)};\n        }\n      `\n    })}\n\n    & > .pt-list-item-bullet + .pt-list-item-number,\n    & > .pt-list-item-number + .pt-list-item-bullet {\n      margin-top: ${({theme}) => theme.sanity.space[3]}px;\n      counter-reset: ${TEXT_LEVELS.map((l) => createListName(l)).join(' ')};\n    }\n\n    & > :not(.pt-list-item) + .pt-list-item {\n      margin-top: ${({theme}) => theme.sanity.space[2]}px;\n    }\n\n    /* Reset the list count if the element is not a numbered list item */\n    & > :not(.pt-list-item-number) {\n      counter-reset: ${TEXT_LEVELS.map((l) => createListName(l)).join(' ')};\n    }\n\n    ${TEXT_LEVELS.slice(1).map((l) => {\n      return css`\n        & > .pt-list-item-level-${l} + .pt-list-item-level-${l - 1} {\n          counter-reset: ${createListName(l)};\n        }\n      `\n    })}\n\n    & > .pt-list-item + :not(.pt-list-item) {\n      margin-top: ${({theme}) => theme.sanity.space[3]}px;\n    }\n\n    & > :first-child {\n      padding-top: ${({$isFullscreen, theme}) => theme.sanity.space[$isFullscreen ? 5 : 3]}px;\n    }\n\n    & > :last-child {\n      padding-bottom: ${({$isFullscreen, theme}) => theme.sanity.space[$isFullscreen ? 9 : 5]}px;\n    }\n\n    /* & > .pt-block {\n      & .pt-inline-object {\n      }\n    } */\n\n    & .pt-drop-indicator {\n      pointer-events: none;\n      border: 1px solid var(--card-focus-ring-color) !important;\n      height: 0px !important;\n      border-radius: 1px;\n      margin-top: -3px;\n      left: calc(\n        ${({$isFullscreen, theme}) =>\n            $isFullscreen ? rem(theme.sanity.space[5]) : rem(theme.sanity.space[3])} - 1px\n      );\n      right: calc(\n        ${({$isFullscreen, theme}) =>\n            $isFullscreen ? rem(theme.sanity.space[5]) : rem(theme.sanity.space[3])} - 1px\n      );\n      width: calc(\n        100% -\n          ${({$isFullscreen, theme}) =>\n            $isFullscreen ? rem(theme.sanity.space[5] * 2) : rem(theme.sanity.space[3] * 2)} + 2px\n      ) !important;\n    }\n  }\n`\n","import {usePortableTextEditor} from '@sanity/portable-text-editor'\nimport {useMemo} from 'react'\n\nexport function useSpellcheck(): boolean {\n  const editor = usePortableTextEditor()\n  return useMemo(() => {\n    // Chrome 96. has serious perf. issues with spellchecking\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=1271918\n    // This issue is verified fixed in Chrome 97.\n    const spellCheckOption = editor.portableTextFeatures.types.block.options?.spellCheck\n    const isChrome96 =\n      typeof navigator === 'undefined' ? false : /Chrome\\/96/.test(navigator.userAgent)\n    return spellCheckOption === undefined && isChrome96 === true ? false : spellCheckOption\n  }, [editor])\n}\n","import {PortableTextEditor} from '@sanity/portable-text-editor'\nimport {useMemo} from 'react'\nimport scrollIntoView from 'scroll-into-view-if-needed'\n\n// This hook is used to scroll the editor selection into place when actively editing the document.\nexport function useScrollSelectionIntoView(scrollElement: HTMLElement | null) {\n  return useMemo(\n    () =>\n      (editor: PortableTextEditor, domRange: Range): void => {\n        const selection = PortableTextEditor.getSelection(editor)\n        if (selection) {\n          const leafEl = domRange.startContainer.parentElement\n          if (!leafEl) {\n            return\n          }\n          scrollIntoView(leafEl, {\n            scrollMode: 'if-needed',\n            boundary: scrollElement,\n            block: 'start',\n            inline: 'nearest',\n          })\n        }\n      },\n    [scrollElement]\n  )\n}\n","import {\n  HotkeyOptions,\n  PortableTextEditable,\n  RenderAnnotationFunction,\n  RenderBlockFunction,\n  RenderChildFunction,\n  RenderDecoratorFunction,\n  OnPasteFn,\n  OnCopyFn,\n  EditorSelection,\n} from '@sanity/portable-text-editor'\nimport {Path} from '@sanity/types'\nimport {BoundaryElementProvider, useBoundaryElement, useGlobalKeyDown, useLayer} from '@sanity/ui'\nimport React, {useCallback, useMemo, useRef} from 'react'\nimport {Toolbar} from './toolbar'\nimport {Decorator} from './text'\nimport {\n  EditableCard,\n  EditableContainer,\n  EditableWrapper,\n  Root,\n  Scroller,\n  ToolbarCard,\n} from './Editor.styles'\nimport {useSpellcheck} from './hooks/useSpellCheck'\nimport {useScrollSelectionIntoView} from './hooks/useScrollSelectionIntoView'\n\ninterface EditorProps {\n  initialSelection?: EditorSelection\n  isFullscreen: boolean\n  hotkeys: HotkeyOptions\n  onCopy?: OnCopyFn\n  onOpenItem: (path: Path) => void\n  onPaste?: OnPasteFn\n  onToggleFullscreen: () => void\n  path: Path\n  readOnly?: boolean\n  renderAnnotation: RenderAnnotationFunction\n  renderBlock: RenderBlockFunction\n  renderChild: RenderChildFunction\n  scrollElement: HTMLElement | null\n  setPortalElement?: (portalElement: HTMLDivElement | null) => void\n  setScrollElement: (scrollElement: HTMLElement | null) => void\n}\n\nconst renderDecorator: RenderDecoratorFunction = (mark, mType, attributes, defaultRender) => {\n  return <Decorator mark={mark}>{defaultRender()}</Decorator>\n}\n\nexport function Editor(props: EditorProps) {\n  const {\n    hotkeys,\n    initialSelection,\n    isFullscreen,\n    onCopy,\n    onOpenItem,\n    onPaste,\n    onToggleFullscreen,\n    path,\n    readOnly,\n    renderAnnotation,\n    renderBlock,\n    renderChild,\n    scrollElement,\n    setPortalElement,\n    setScrollElement,\n  } = props\n  const {isTopLayer} = useLayer()\n  const editableRef = useRef<HTMLDivElement | null>(null)\n\n  const {element: boundaryElement} = useBoundaryElement()\n\n  // Let escape close fullscreen mode\n  useGlobalKeyDown(\n    useCallback(\n      (event: KeyboardEvent) => {\n        if (!isTopLayer || !isFullscreen) {\n          return\n        }\n        if (event.key === 'Escape') {\n          onToggleFullscreen()\n        }\n      },\n      [onToggleFullscreen, isFullscreen, isTopLayer]\n    )\n  )\n\n  // Keep the editor focused even though we are clicking on the background or the toolbar of the editor.\n  const handleMouseDown = useCallback((event: React.SyntheticEvent) => {\n    if (event.target instanceof Node && !editableRef.current?.contains(event.target)) {\n      event.preventDefault()\n      event.stopPropagation()\n    }\n  }, [])\n\n  const renderPlaceholder = useCallback(() => <>Empty</>, [])\n  const spellcheck = useSpellcheck()\n\n  const scrollSelectionIntoView = useScrollSelectionIntoView(scrollElement)\n\n  const editable = useMemo(\n    () => (\n      <PortableTextEditable\n        hotkeys={hotkeys}\n        onCopy={onCopy}\n        onPaste={onPaste}\n        ref={editableRef}\n        readOnly={readOnly}\n        renderAnnotation={renderAnnotation}\n        renderBlock={renderBlock}\n        renderChild={renderChild}\n        renderDecorator={renderDecorator}\n        renderPlaceholder={renderPlaceholder}\n        scrollSelectionIntoView={scrollSelectionIntoView}\n        selection={initialSelection}\n        spellCheck={spellcheck}\n      />\n    ),\n    [\n      hotkeys,\n      initialSelection,\n      onCopy,\n      onPaste,\n      readOnly,\n      renderAnnotation,\n      renderBlock,\n      renderChild,\n      renderPlaceholder,\n      scrollSelectionIntoView,\n      spellcheck,\n    ]\n  )\n\n  const handleToolBarOnExpand = useCallback(\n    (relativePath: Path) => {\n      onOpenItem(path.concat(relativePath))\n    },\n    [onOpenItem, path]\n  )\n\n  return (\n    <Root $fullscreen={isFullscreen} data-testid=\"pt-editor\" onMouseDown={handleMouseDown}>\n      {!readOnly && (\n        <ToolbarCard data-testid=\"pt-editor__toolbar-card\" shadow={1}>\n          <Toolbar\n            isFullscreen={isFullscreen}\n            hotkeys={hotkeys}\n            onExpand={handleToolBarOnExpand}\n            readOnly={readOnly}\n            onToggleFullscreen={onToggleFullscreen}\n          />\n        </ToolbarCard>\n      )}\n\n      <EditableCard flex={1}>\n        <Scroller ref={setScrollElement}>\n          <EditableContainer padding={isFullscreen ? 2 : 0} sizing=\"border\" width={1}>\n            <EditableWrapper $isFullscreen={isFullscreen} $readOnly={readOnly}>\n              <BoundaryElementProvider element={isFullscreen ? scrollElement : boundaryElement}>\n                {editable}\n              </BoundaryElementProvider>\n            </EditableWrapper>\n          </EditableContainer>\n        </Scroller>\n\n        <div data-portal=\"\" ref={setPortalElement} />\n      </EditableCard>\n    </Root>\n  )\n}\n","// todo: get these utils from @sanity/ui instead\nexport function focusRingBorderStyle(border: {color: string; width: number}): string {\n  return `inset 0 0 0 ${border.width}px ${border.color}`\n}\n\nexport function focusRingStyle(opts: {\n  base?: {bg: string}\n  border?: {color: string; width: number}\n  focusRing: {offset: number; width: number}\n}): string {\n  const {base, border, focusRing} = opts\n  const focusRingOutsetWidth = focusRing.offset + focusRing.width\n  const focusRingInsetWidth = 0 - focusRing.offset\n  const bgColor = base ? base.bg : 'var(--card-bg-color)'\n\n  return [\n    focusRingInsetWidth > 0 && `inset 0 0 0 ${focusRingInsetWidth}px var(--card-focus-ring-color)`,\n    border && focusRingBorderStyle(border),\n    focusRingInsetWidth < 0 && `0 0 0 ${0 - focusRingInsetWidth}px ${bgColor}`,\n    focusRingOutsetWidth > 0 && `0 0 0 ${focusRingOutsetWidth}px var(--card-focus-ring-color)`,\n  ]\n    .filter(Boolean)\n    .join(',')\n}\n","import {Layer} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {focusRingBorderStyle, focusRingStyle} from '../../components/withFocusRing/helpers'\n\nexport const Root = styled.div(({theme}) => {\n  const {focusRing, input} = theme.sanity\n  const base = theme.sanity.color.base\n  const color = theme.sanity.color.input\n  const border = {\n    color: color.default.enabled.border,\n    width: input.border.width,\n  }\n\n  return css`\n    --input-box-shadow: ${focusRingBorderStyle(border)};\n\n    position: relative;\n\n    & [data-wrapper] {\n      overflow: hidden;\n      position: relative;\n      z-index: 1;\n      padding: ${input.border.width}px;\n    }\n\n    & [data-border] {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      box-shadow: var(--input-box-shadow);\n      z-index: 2;\n      border-radius: 1px;\n      pointer-events: none;\n    }\n\n    &:not([data-read-only])[data-focused] [data-border] {\n      --input-box-shadow: ${focusRingStyle({\n        base,\n        border,\n        focusRing,\n      })};\n    }\n  `\n})\n\n// This element only wraps the input when in \"fullscreen\" mode\nexport const ExpandedLayer = styled(Layer)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  &:not([data-fullscreen]) {\n    position: relative;\n  }\n`\n","import {useMemo} from 'react'\nimport {\n  HotkeyOptions,\n  PortableTextEditor,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\n\n// This hook will create final hotkeys for the editor from on those from props.\nexport function useHotkeys(hotkeys: HotkeyOptions): HotkeyOptions {\n  const editor = usePortableTextEditor()\n\n  // Guard that hotkeys from props will be a stable object.\n  // If this props is defined inline and is always a new object, there will be issues with key handling and cursor!\n  const initialHotkeys = useMemo(() => hotkeys, [])\n  if (initialHotkeys !== hotkeys) {\n    console.warn(\n      'Make sure that hotkeys are a stable object across renders, or there will be issues with key handling in the Portable Text Editor.'\n    )\n  }\n  return useMemo(() => {\n    const defaultHotkeys: {marks: Record<string, string>} = {marks: {}}\n    const ptFeatures = PortableTextEditor.getPortableTextFeatures(editor)\n    ptFeatures.decorators.forEach((dec) => {\n      switch (dec.value) {\n        case 'strong':\n          defaultHotkeys.marks['mod+b'] = dec.value\n          break\n        case 'em':\n          defaultHotkeys.marks['mod+i'] = dec.value\n          break\n        case 'underline':\n          defaultHotkeys.marks['mod+u'] = dec.value\n          break\n        case 'code':\n          defaultHotkeys.marks[\"mod+'\"] = dec.value\n          break\n        default:\n      }\n    })\n    return {\n      marks: {...defaultHotkeys.marks, ...(initialHotkeys || {}).marks},\n      custom: initialHotkeys.custom,\n    }\n  }, [editor, initialHotkeys])\n}\n\n// If we want to have a hotkey to open up a focused object, we can use this:\n//\n// const handleOpenObjectHotkey = (\n//   event: React.BaseSyntheticEvent,\n//   ptEditor: PortableTextEditor\n// ) => {\n//   const selection = PortableTextEditor.getSelection(ptEditor)\n//   if (selection) {\n//     event.preventDefault()\n//     event.stopPropagation()\n//     const {focus} = selection\n//     const activeAnnotations = PortableTextEditor.activeAnnotations(ptEditor)\n//     const focusBlock = PortableTextEditor.focusBlock(ptEditor)\n//     const focusChild = PortableTextEditor.focusChild(ptEditor)\n//     if (activeAnnotations.length > 0) {\n//       onFocus([\n//         ...focus.path.slice(0, 1),\n//         'markDefs',\n//         {_key: activeAnnotations[0]._key},\n//         FOCUS_TERMINATOR,\n//       ])\n//       return\n//     }\n//     if (focusChild && PortableTextEditor.isVoid(ptEditor, focusChild)) {\n//       onFocus([...focus.path, FOCUS_TERMINATOR])\n//       return\n//     }\n//     if (focusBlock && PortableTextEditor.isVoid(ptEditor, focusBlock)) {\n//       onFocus([...focus.path.slice(0, 1), FOCUS_TERMINATOR])\n//     }\n//   }\n// }\n","import {ObjectSchemaType} from '@sanity/types'\nimport {get} from 'lodash'\nimport {ModalType, ModalWidth} from './renderers/types'\n\nexport interface ModalOption {\n  type?: ModalType\n  width?: ModalWidth\n}\n\nexport function _getModalOption(opts: {schemaType?: ObjectSchemaType}): ModalOption {\n  const {schemaType} = opts\n\n  return (get(schemaType, 'options.modal') || {}) as ModalOption\n}\n","import React from 'react'\nimport {useId} from '@reach/auto-id'\nimport {Box, Dialog, PortalProvider, usePortal} from '@sanity/ui'\nimport {PresenceOverlay} from '../../../../../presence'\nimport {ModalWidth} from './types'\n\ninterface DefaultEditDialogProps {\n  title: string | React.ReactNode\n  onClose: () => void\n  children: React.ReactNode\n  width?: ModalWidth\n}\n\nexport function DefaultEditDialog(props: DefaultEditDialogProps) {\n  const {onClose, children, title, width = 1} = props\n\n  const dialogId = useId()\n  const portal = usePortal()\n\n  return (\n    <Dialog\n      __unstable_autoFocus\n      id={dialogId || ''}\n      onClose={onClose}\n      onClickOutside={onClose}\n      header={title}\n      portal=\"default\"\n      width={width}\n    >\n      <PresenceOverlay margins={[0, 0, 1, 0]}>\n        <Box padding={4}>\n          <PortalProvider element={portal.elements?.default}>{children}</PortalProvider>\n        </Box>\n      </PresenceOverlay>\n    </Dialog>\n  )\n}\n","export const debugElement =\n  process.env.NODE_ENV === 'production'\n    ? null\n    : {\n        getBoundingClientRect: () => {\n          const x = 200\n          const y = 200\n\n          return {\n            left: x,\n            top: y,\n            right: x,\n            bottom: y,\n            width: 0,\n            height: 0,\n          }\n        },\n      }\n","/* eslint-disable react/no-unused-prop-types */\n\nimport {CloseIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Container,\n  Flex,\n  Popover,\n  PopoverProps,\n  PortalProvider,\n  Text,\n  useBoundaryElement,\n  useClickOutside,\n  useGlobalKeyDown,\n  usePortal,\n} from '@sanity/ui'\nimport React, {useCallback, useEffect, useMemo, useState} from 'react'\nimport styled from 'styled-components'\nimport {PresenceOverlay} from '../../../../../presence'\nimport {FIXME} from '../../../../types'\nimport {PortableTextEditorElement} from '../../Compositor'\nimport {debugElement} from './debug'\nimport {ModalWidth} from './types'\n\ninterface PopoverEditDialogProps {\n  children: React.ReactNode\n  elementRef?: React.MutableRefObject<PortableTextEditorElement>\n  onClose: () => void\n  scrollElement: HTMLElement\n  title: string | React.ReactNode\n  width?: ModalWidth\n}\n\nconst RootPopover = styled(Popover)`\n  &[data-popper-reference-hidden='true'] {\n    visibility: hidden;\n    pointer-events: none;\n  }\n\n  & > div {\n    overflow: hidden;\n  }\n`\n\nconst ContentContainer = styled(Container)`\n  &:not([hidden]) {\n    display: flex;\n  }\n  direction: column;\n`\n\nconst ContentScrollerBox = styled(Box)`\n  /* Prevent overflow caused by change indicator */\n  overflow-x: hidden;\n  overflow-y: auto;\n`\n\nconst ContentHeaderBox = styled(Box)`\n  background-color: var(--card-bg-color);\n  box-shadow: 0 1px 0 var(--card-shadow-outline-color);\n  position: relative;\n  z-index: 10;\n  min-height: auto;\n`\n\nconst POPOVER_FALLBACK_PLACEMENTS: PopoverProps['fallbackPlacements'] = ['top', 'bottom']\n\nexport function PopoverEditDialog(props: PopoverEditDialogProps) {\n  const {width, elementRef, onClose, scrollElement} = props\n\n  useGlobalKeyDown(\n    useCallback(\n      (event: KeyboardEvent) => {\n        if (event.key === 'Escape') {\n          onClose()\n        }\n      },\n      [onClose]\n    )\n  )\n\n  const [forceUpdate, setForceUpdate] = useState(0)\n  const virtualElement = useMemo(() => {\n    if (!elementRef?.current?.getBoundingClientRect()) {\n      return null\n    }\n\n    return {\n      contextElement: elementRef.current || undefined,\n      getBoundingClientRect: () => {\n        return elementRef.current?.getBoundingClientRect() || null\n      },\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [elementRef?.current, forceUpdate])\n\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n\n  const handleScrollOrResize = useCallback(() => {\n    setForceUpdate(forceUpdate + 1)\n  }, [forceUpdate])\n\n  useEffect(() => {\n    if (scrollElement) {\n      scrollElement.addEventListener('scroll', handleScrollOrResize, true)\n    }\n    return () => {\n      if (scrollElement) {\n        scrollElement.removeEventListener('scroll', handleScrollOrResize, true)\n      }\n    }\n  }, [handleScrollOrResize, scrollElement])\n\n  return (\n    <RootPopover\n      constrainSize\n      content={<Content {...props} rootElement={rootElement} width={width} />}\n      fallbackPlacements={POPOVER_FALLBACK_PLACEMENTS}\n      placement=\"bottom\"\n      open\n      portal=\"default\"\n      ref={setRootElement}\n      referenceElement={virtualElement || (debugElement as FIXME)}\n    />\n  )\n}\n\nfunction Content(\n  props: PopoverEditDialogProps & {\n    rootElement: HTMLDivElement | null\n  }\n) {\n  const {onClose, rootElement, width = 0, title} = props\n  const {element: boundaryElement} = useBoundaryElement()\n  const portal = usePortal()\n\n  useClickOutside(onClose, [rootElement], boundaryElement)\n\n  return (\n    <ContentContainer width={width}>\n      <Flex direction=\"column\" flex={1}>\n        <ContentHeaderBox padding={1}>\n          <Flex align=\"center\">\n            <Box flex={1} padding={2}>\n              <Text weight=\"semibold\">{title}</Text>\n            </Box>\n\n            <Button icon={CloseIcon} mode=\"bleed\" onClick={onClose} padding={2} />\n          </Flex>\n        </ContentHeaderBox>\n        <ContentScrollerBox flex={1}>\n          <PresenceOverlay margins={[0, 0, 1, 0]}>\n            <Box padding={3}>\n              <PortalProvider element={portal.elements?.default}>{props.children}</PortalProvider>\n            </Box>\n          </PresenceOverlay>\n        </ContentScrollerBox>\n      </Flex>\n    </ContentContainer>\n  )\n}\n","import {\n  EditorSelection,\n  PortableTextEditor,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport React, {useCallback, useEffect, useMemo, useRef, useState} from 'react'\nimport {_getModalOption} from '../helpers'\nimport {PortableTextMemberItem} from '../../PortableTextInput'\nimport {DefaultEditDialog} from './DefaultEditDialog'\nimport {PopoverEditDialog} from './PopoverEditDialog'\nimport {ModalType} from './types'\n\nexport function ObjectEditModal(props: {\n  children: React.ReactNode\n  kind: PortableTextMemberItem['kind']\n  memberItem: PortableTextMemberItem\n  onClose: () => void\n  scrollElement: HTMLElement\n}) {\n  const {memberItem, onClose, scrollElement, kind} = props\n  const {schemaType} = memberItem.node\n  const modalOption = useMemo(() => _getModalOption({schemaType}), [schemaType])\n\n  const modalType: ModalType = useMemo(() => {\n    if (modalOption.type) return modalOption.type\n\n    // If the object is inline or an annotation, then default to \"popover\"\n    if (kind === 'inlineObject' || kind === 'annotation') return 'popover'\n\n    return 'dialog'\n  }, [kind, modalOption])\n\n  const [firstField, setFirstField] = useState<HTMLElement | null>(null)\n  const editor = usePortableTextEditor()\n  const initialSelection = useRef<EditorSelection | null>(PortableTextEditor.getSelection(editor))\n\n  const handleClose = useCallback(() => {\n    onClose()\n    // Force a new selection here as the selection is a callback dep. for showing the popup\n    PortableTextEditor.select(editor, null)\n    PortableTextEditor.focus(editor)\n    PortableTextEditor.select(editor, initialSelection.current)\n  }, [editor, onClose])\n\n  const title = <>Edit {memberItem.node.schemaType.title}</>\n\n  // Set focus on the first field\n  useEffect(() => {\n    if (firstField) {\n      return\n    }\n    const firstFieldMember = memberItem.node.members.find((m) => m.kind === 'field')\n    if (firstFieldMember && firstFieldMember.kind === 'field') {\n      const firstFieldElm = document.getElementById(firstFieldMember.field.id) as HTMLElement | null\n      if (firstFieldElm) {\n        setFirstField(firstFieldElm)\n        firstFieldElm.focus()\n      }\n    }\n  }, [firstField, memberItem])\n\n  if (modalType === 'popover') {\n    return (\n      <PopoverEditDialog\n        elementRef={memberItem.elementRef}\n        onClose={handleClose}\n        scrollElement={scrollElement}\n        title={title}\n      >\n        {props.children}\n      </PopoverEditDialog>\n    )\n  }\n\n  return (\n    <DefaultEditDialog title={title} onClose={handleClose}>\n      {props.children}\n    </DefaultEditDialog>\n  )\n}\n","import {PortableTextEditor, usePortableTextEditor} from '@sanity/portable-text-editor'\nimport {Path} from '@sanity/types'\nimport {useEffect, useMemo} from 'react'\nimport scrollIntoView from 'scroll-into-view-if-needed'\nimport {usePortableTextMemberItems} from './usePortableTextMembers'\n\ninterface Props {\n  editorRootPath: Path\n  hasFocus: boolean\n  scrollElement: HTMLElement | null\n  onCloseItem: () => void\n}\n\n// This hook will scroll to the \"opened\" portable text object's editor dom node.\n// If the opened item is a regular text block, place the cursor there as well.\nexport function useScrollToOpenedMember(props: Props): void {\n  const {editorRootPath, scrollElement, hasFocus, onCloseItem} = props\n  const portableTextMemberItems = usePortableTextMemberItems()\n  const editor = usePortableTextEditor()\n\n  // Find the opened item with the highest path\n  const memberItem = useMemo(() => {\n    return portableTextMemberItems\n      .filter((item) => item.member.open)\n      .sort((a, b) => b.member.item.path.length - a.member.item.path.length)[0]\n  }, [portableTextMemberItems])\n\n  useEffect(() => {\n    // If the editor is already is focused, don't interfere.\n    if (hasFocus) {\n      return\n    }\n    if (memberItem?.elementRef?.current) {\n      scrollIntoView(memberItem.elementRef?.current, {\n        boundary: scrollElement,\n        scrollMode: 'if-needed',\n      })\n      // If this is a text block, place the cursor in the beginning of it.\n      if (memberItem.kind === 'textBlock') {\n        const relativePath = memberItem.member.item.path.slice(editorRootPath.length)\n        PortableTextEditor.select(editor, {\n          anchor: {path: relativePath, offset: 0},\n          focus: {path: relativePath, offset: 0},\n        })\n        PortableTextEditor.focus(editor)\n        // \"auto-close\" regular text blocks or they get sticky here when trying to focus on an other field\n        // There is no natural way of closing them (however opening something else would close them)\n        onCloseItem()\n      }\n    }\n  }, [editor, hasFocus, editorRootPath.length, memberItem, scrollElement, onCloseItem])\n}\n","import React, {useState, useMemo, useCallback} from 'react'\nimport {\n  EditorSelection,\n  OnCopyFn,\n  OnPasteFn,\n  PortableTextBlock,\n  PortableTextEditor,\n  usePortableTextEditor,\n  HotkeyOptions,\n  RenderAttributes,\n} from '@sanity/portable-text-editor'\nimport {ObjectSchemaType, Path} from '@sanity/types'\nimport {\n  BoundaryElementProvider,\n  Portal,\n  PortalProvider,\n  Text,\n  useBoundaryElement,\n  usePortal,\n} from '@sanity/ui'\nimport {ChangeIndicator} from '../../../components/changeIndicators'\nimport {ArrayOfObjectsInputProps, RenderCustomMarkers} from '../../types'\nimport {ActivateOnFocus} from '../../components/ActivateOnFocus/ActivateOnFocus'\nimport {EMPTY_ARRAY} from '../../utils/empty'\nimport {FormInput} from '../../FormInput'\nimport {BlockObject} from './object/BlockObject'\nimport {InlineObject} from './object/InlineObject'\nimport {Annotation, TextBlock} from './text'\nimport {RenderBlockActionsCallback} from './types'\nimport {Editor} from './Editor'\nimport {ExpandedLayer, Root} from './Compositor.styles'\nimport {useHotkeys} from './hooks/useHotKeys'\nimport {ObjectEditModal} from './object/renderers/ObjectEditModal'\nimport {useScrollToOpenedMember} from './hooks/useScrollToOpenedMember'\nimport {usePortableTextMemberItems} from './hooks/usePortableTextMembers'\nimport {_isBlockType} from './_helpers'\n\ninterface InputProps extends ArrayOfObjectsInputProps<PortableTextBlock> {\n  hasFocus: boolean\n  hotkeys?: HotkeyOptions\n  isActive: boolean\n  isFullscreen: boolean\n  onActivate: () => void\n  onCopy?: OnCopyFn\n  onPaste?: OnPasteFn\n  onToggleFullscreen: () => void\n  path: Path\n  renderBlockActions?: RenderBlockActionsCallback\n  renderCustomMarkers?: RenderCustomMarkers\n}\n\nexport type PortableTextEditorElement = HTMLDivElement | HTMLSpanElement | null\n\nfunction isTouchDevice() {\n  return (\n    (typeof window !== 'undefined' && 'ontouchstart' in window) ||\n    (typeof navigator !== 'undefined' && navigator.maxTouchPoints > 0)\n  )\n}\n\nconst activateVerb = isTouchDevice() ? 'Tap' : 'Click'\n\nconst ACTIVATE_ON_FOCUS_MESSAGE = <Text weight=\"semibold\">{activateVerb} to activate</Text>\n\nexport function Compositor(props: InputProps) {\n  const {\n    changed,\n    focusPath = EMPTY_ARRAY,\n    focused,\n    hasFocus,\n    hotkeys,\n    isActive,\n    isFullscreen,\n    onChange,\n    onCopy,\n    onActivate,\n    onOpenItem,\n    onCloseItem,\n    onPaste,\n    onToggleFullscreen,\n    path,\n    renderBlockActions,\n    renderCustomMarkers,\n    value,\n    readOnly,\n    renderPreview,\n  } = props\n\n  const editor = usePortableTextEditor()\n\n  const [wrapperElement, setWrapperElement] = useState<HTMLDivElement | null>(null)\n  const [scrollElement, setScrollElement] = useState<HTMLElement | null>(null)\n  const portableTextMemberItems = usePortableTextMemberItems()\n\n  const {element: boundaryElement} = useBoundaryElement()\n\n  // Scroll to the DOM element of the \"opened\" portable text member when relevant.\n  useScrollToOpenedMember({\n    hasFocus,\n    editorRootPath: path,\n    scrollElement,\n    onCloseItem,\n  })\n\n  const handleToggleFullscreen = useCallback(() => {\n    onToggleFullscreen()\n  }, [onToggleFullscreen])\n\n  const hotkeysWithFullscreenToggle = useMemo(\n    () => ({\n      ...hotkeys,\n      custom: {\n        'mod+enter': onToggleFullscreen,\n        ...(hotkeys?.custom || {}),\n      },\n    }),\n\n    [hotkeys, onToggleFullscreen]\n  )\n\n  const editorHotkeys = useHotkeys(hotkeysWithFullscreenToggle)\n\n  const ptFeatures = useMemo(() => PortableTextEditor.getPortableTextFeatures(editor), [editor])\n  const hasContent = !!value\n\n  const initialSelection = useMemo(\n    (): EditorSelection =>\n      focusPath.length > 0\n        ? {\n            anchor: {path: focusPath, offset: 0},\n            focus: {path: focusPath, offset: 0},\n          }\n        : null,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [] // Only initial\n  )\n\n  const renderBlock = useCallback(\n    (\n      block: PortableTextBlock,\n      blockType: ObjectSchemaType,\n      attributes: RenderAttributes,\n      defaultRender: (b: PortableTextBlock) => JSX.Element\n    ) => {\n      const isTextBlock = block._type === ptFeatures.types.block.name\n      if (isTextBlock) {\n        return (\n          <TextBlock\n            attributes={attributes}\n            block={block}\n            isFullscreen={isFullscreen}\n            onChange={onChange}\n            readOnly={readOnly}\n            renderBlockActions={hasContent ? renderBlockActions : undefined}\n            renderCustomMarkers={hasContent ? renderCustomMarkers : undefined}\n          >\n            {defaultRender(block)}\n          </TextBlock>\n        )\n      }\n\n      return (\n        <BlockObject\n          attributes={attributes}\n          block={block}\n          isFullscreen={isFullscreen}\n          onChange={onChange}\n          onOpenItem={onOpenItem}\n          readOnly={readOnly}\n          renderBlockActions={hasContent ? renderBlockActions : undefined}\n          renderCustomMarkers={hasContent ? renderCustomMarkers : undefined}\n          renderPreview={renderPreview}\n          type={blockType}\n        />\n      )\n    },\n    [\n      hasContent,\n      isFullscreen,\n      onChange,\n      onOpenItem,\n      ptFeatures.types.block.name,\n      readOnly,\n      renderBlockActions,\n      renderCustomMarkers,\n      renderPreview,\n    ]\n  )\n\n  const renderChild = useCallback(\n    (child, childType, attributes, defaultRender) => {\n      const isSpan = child._type === ptFeatures.types.span.name\n      if (isSpan) {\n        return defaultRender(child)\n      }\n\n      return (\n        <InlineObject\n          attributes={attributes}\n          onOpenItem={onOpenItem}\n          readOnly={readOnly}\n          renderCustomMarkers={renderCustomMarkers}\n          scrollElement={scrollElement}\n          type={childType}\n          value={child}\n          renderPreview={renderPreview}\n        />\n      )\n    },\n    [\n      onOpenItem,\n      ptFeatures.types.span.name,\n      readOnly,\n      renderCustomMarkers,\n      renderPreview,\n      scrollElement,\n    ]\n  )\n\n  const renderAnnotation = useCallback(\n    (annotation, annotationType, attributes, defaultRender) => {\n      return (\n        <Annotation\n          attributes={attributes}\n          onOpenItem={onOpenItem}\n          readOnly={readOnly}\n          renderCustomMarkers={renderCustomMarkers}\n          scrollElement={scrollElement}\n          value={annotation}\n          type={annotationType}\n        >\n          {defaultRender()}\n        </Annotation>\n      )\n    },\n    [onOpenItem, readOnly, renderCustomMarkers, scrollElement]\n  )\n\n  const [portalElement, setPortalElement] = useState<HTMLDivElement | null>(null)\n\n  const openMemberItems = useMemo(\n    () => portableTextMemberItems.filter((m) => m.member.open && !_isBlockType(m.node.schemaType)),\n    [portableTextMemberItems]\n  )\n\n  const editorNode = useMemo(\n    () => (\n      <Editor\n        hotkeys={editorHotkeys}\n        initialSelection={initialSelection}\n        isFullscreen={isFullscreen}\n        onOpenItem={onOpenItem}\n        onCopy={onCopy}\n        onPaste={onPaste}\n        onToggleFullscreen={handleToggleFullscreen}\n        path={path}\n        readOnly={readOnly}\n        renderAnnotation={renderAnnotation}\n        renderBlock={renderBlock}\n        renderChild={renderChild}\n        setPortalElement={setPortalElement}\n        scrollElement={scrollElement}\n        setScrollElement={setScrollElement}\n      />\n    ),\n\n    // Keep only stable ones here!\n    [\n      editorHotkeys,\n      handleToggleFullscreen,\n      initialSelection,\n      isFullscreen,\n      onCopy,\n      onOpenItem,\n      onPaste,\n      path,\n      readOnly,\n      renderAnnotation,\n      renderBlock,\n      renderChild,\n      scrollElement,\n    ]\n  )\n\n  const boundaryElm = isFullscreen ? scrollElement : boundaryElement\n\n  const children = useMemo(\n    () =>\n      boundaryElm && (\n        <>\n          {editorNode}\n          <BoundaryElementProvider element={boundaryElm}>\n            {openMemberItems.map((dMemberItem) => {\n              return (\n                <ObjectEditModal\n                  kind={dMemberItem.kind}\n                  key={dMemberItem.member.key}\n                  memberItem={dMemberItem}\n                  onClose={onCloseItem}\n                  scrollElement={boundaryElm}\n                >\n                  <FormInput absolutePath={dMemberItem.node.path} {...(props as any)} />\n                </ObjectEditModal>\n              )\n            })}\n          </BoundaryElementProvider>\n        </>\n      ),\n    [boundaryElm, editorNode, openMemberItems, onCloseItem, props]\n  )\n\n  const portal = usePortal()\n  const portalElements = useMemo(\n    () => ({\n      collapsed: wrapperElement,\n      default: portal.element,\n      editor: portalElement,\n      expanded: portal.element,\n    }),\n\n    [portal.element, portalElement, wrapperElement]\n  )\n\n  const editorLayer = useMemo(\n    () => (\n      <Portal __unstable_name={isFullscreen ? 'expanded' : 'collapsed'}>\n        <ExpandedLayer data-fullscreen={isFullscreen ? '' : undefined}>{children}</ExpandedLayer>\n      </Portal>\n    ),\n    [children, isFullscreen]\n  )\n  return (\n    <PortalProvider __unstable_elements={portalElements}>\n      <ActivateOnFocus\n        message={ACTIVATE_ON_FOCUS_MESSAGE}\n        onActivate={onActivate}\n        isOverlayActive={!isActive}\n      >\n        <ChangeIndicator\n          disabled={isFullscreen}\n          hasFocus={Boolean(focused)}\n          isChanged={changed}\n          path={path}\n        >\n          <Root data-focused={hasFocus ? '' : undefined} data-read-only={readOnly ? '' : undefined}>\n            <div data-wrapper=\"\" ref={setWrapperElement}>\n              {editorLayer}\n            </div>\n            <div data-border=\"\" />\n          </Root>\n        </ChangeIndicator>\n      </ActivateOnFocus>\n    </PortalProvider>\n  )\n}\n","import {InvalidValueResolution} from '@sanity/portable-text-editor'\nimport {Box, Button, Card, Code, Grid, Stack, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {Alert} from '../../components/Alert'\n\ninterface InvalidValueProps {\n  onChange: (...args: any[]) => any\n  onIgnore: () => void\n  resolution: InvalidValueResolution\n}\n\nexport function InvalidValue(props: InvalidValueProps) {\n  const {onChange, onIgnore, resolution} = props\n\n  const handleAction = useCallback(() => {\n    if (resolution) {\n      onChange({type: 'mutation', patches: resolution.patches})\n    }\n  }, [onChange, resolution])\n\n  if (!resolution) return null\n\n  return (\n    <Alert\n      suffix={\n        <Stack padding={2}>\n          {resolution.action && (\n            <Grid columns={[1, 2]} gap={1}>\n              <Button mode=\"ghost\" onClick={onIgnore} text=\"Ignore\" />\n              <Button onClick={handleAction} text={resolution.action} tone=\"caution\" />\n            </Grid>\n          )}\n\n          <Box padding={3}>\n            {resolution.action && (\n              <Text as=\"p\" muted size={1}>\n                NOTE: It’s generally safe to perform the action above, but if you are in doubt, get\n                in touch with those responsible for configuring your studio.\n              </Text>\n            )}\n          </Box>\n        </Stack>\n      }\n      title={<>Invalid block value</>}\n    >\n      <Stack space={3}>\n        <Text as=\"p\" muted size={1}>\n          {resolution.description}\n        </Text>\n\n        <Card border overflow=\"auto\" padding={2} tone=\"inherit\">\n          <Code language=\"json\">{JSON.stringify(resolution.item, null, 2)}</Code>\n        </Card>\n      </Stack>\n    </Alert>\n  )\n}\n","import {Path, PathSegment} from '@sanity/types'\nimport {get, find} from 'lodash'\nimport {useCallback} from 'react'\nimport shallowEquals from 'shallow-equals'\nimport {isRecord} from '../../../util'\nimport {FormPatch} from '../../patch'\nimport {useFormBuilder} from '../../useFormBuilder'\n\n/**\n * @internal\n */\nexport interface PatchesData {\n  patches: Array<FormPatch>\n  shouldReset: boolean\n  snapshot: any\n}\n\n/**\n * @internal\n */\nexport type PatchesSubscriber = (data: PatchesData) => void\n\n/**\n * @internal\n */\nexport function usePatches(props: {path: Path}): {\n  subscribe: (subscriber: PatchesSubscriber) => () => void\n} {\n  const {path} = props\n  const {patchChannel} = useFormBuilder().__internal\n\n  const subscribe = useCallback(\n    (subscriber: PatchesSubscriber) => {\n      return patchChannel.subscribe(({snapshot, patches}) => {\n        const filteredPatches = patches\n          .filter((patch) => _startsWith(patch.path, path))\n          .map((patch) => ({\n            ...patch,\n            path: patch.path.slice(path.length),\n          }))\n\n        if (filteredPatches.length) {\n          subscriber({\n            shouldReset: _shouldReset(path, patches),\n            snapshot: isRecord(snapshot) ? _getValueAtPath(snapshot, path) : {},\n            patches: filteredPatches,\n          })\n        }\n      })\n    },\n    [path, patchChannel]\n  )\n\n  return {subscribe}\n}\n\nfunction _isSegmentEqual(segment1: PathSegment, segment2: PathSegment) {\n  const segment1Type = typeof segment1\n  if (segment1Type !== typeof segment2) {\n    return false\n  }\n  if (segment1Type === 'object') {\n    return shallowEquals(segment1, segment2)\n  }\n  return segment1 === segment2\n}\n\nfunction _startsWith(subjectPath: Path, checkPath: Path) {\n  if (subjectPath === checkPath) {\n    return true\n  }\n  if (!Array.isArray(subjectPath) || !Array.isArray(checkPath)) {\n    return false\n  }\n  if (subjectPath.length < checkPath.length) {\n    return false\n  }\n  for (let i = 0, len = checkPath.length; i < len; i++) {\n    if (!_isSegmentEqual(checkPath[i], subjectPath[i])) {\n      return false\n    }\n  }\n  return true\n}\n\nfunction _isAncestor(path1: Path, path2: Path) {\n  return path1.length === 0 || (_startsWith(path2, path1) && !_startsWith(path1, path2))\n}\n\nfunction _shouldReset(path: Path, patches: FormPatch[]) {\n  return patches.some(\n    (patch) => _isAncestor(patch.path, path) && (patch.type === 'set' || patch.type === 'unset')\n  )\n}\n\nfunction _getValueAtPath(value: Record<string, unknown>, path: Path) {\n  return path.reduce((result, segment) => {\n    if (typeof segment === 'object') {\n      return find(result, segment)\n    }\n\n    return get(result, segment)\n  }, value)\n}\n","import {Button, useLayer} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\ninterface VisibleOnFocusButtonProps {\n  children: React.ReactNode\n  onClick: () => void\n}\n\nconst Root = styled(Button)<{$zIndex: number}>`\n  position: absolute;\n  z-index: ${({$zIndex}) => $zIndex};\n  margin: 1px;\n\n  &:not(:focus) {\n    height: 1px;\n    width: 1px;\n    overflow: hidden;\n    clip: rect(1px, 1px, 1px, 1px);\n  }\n`\n\nexport function VisibleOnFocusButton(props: VisibleOnFocusButtonProps) {\n  const {children, onClick} = props\n  const {zIndex} = useLayer()\n  return (\n    <Root mode=\"ghost\" onClick={onClick} $zIndex={zIndex + 1}>\n      {children}\n    </Root>\n  )\n}\n","import {ArraySchemaType, ObjectSchemaType} from '@sanity/types'\nimport {\n  EditorChange,\n  OnCopyFn,\n  OnPasteFn,\n  Patch as EditorPatch,\n  PortableTextBlock,\n  PortableTextEditor,\n  HotkeyOptions,\n  InvalidValue,\n  EditorSelection,\n} from '@sanity/portable-text-editor'\nimport React, {\n  useEffect,\n  useState,\n  useMemo,\n  useCallback,\n  useRef,\n  useImperativeHandle,\n  createRef,\n} from 'react'\nimport {Subject} from 'rxjs'\nimport {Box, Text, useToast} from '@sanity/ui'\nimport scrollIntoView from 'scroll-into-view-if-needed'\nimport {debounce} from 'lodash'\nimport {FormPatch as FormBuilderPatch} from '../../patch'\nimport {ArrayOfObjectsItemMember, ObjectFormNode} from '../../store'\nimport type {\n  ArrayOfObjectsInputProps,\n  FIXME,\n  PortableTextMarker,\n  RenderCustomMarkers,\n} from '../../types'\nimport {EMPTY_ARRAY} from '../../utils/empty'\nimport {isMemberArrayOfObjects} from '../../members/fields/asserters'\nimport {pathToString} from '../../../field/paths'\nimport {Compositor, PortableTextEditorElement} from './Compositor'\nimport {InvalidValue as RespondToInvalidContent} from './InvalidValue'\nimport {usePatches} from './usePatches'\nimport {VisibleOnFocusButton} from './VisibleOnFocusButton'\nimport {RenderBlockActionsCallback} from './types'\nimport {PortableTextMarkersProvider} from './contexts/PortableTextMarkers'\nimport {PortableTextMemberItemsProvider} from './contexts/PortableTextMembers'\nimport {_isArrayOfObjectsFieldMember, _isBlockType} from './_helpers'\n\nexport type PTObjectMember = ArrayOfObjectsItemMember<\n  ObjectFormNode<\n    {\n      [x: string]: unknown\n    },\n    ObjectSchemaType\n  >\n>\nexport interface PortableTextMemberItem {\n  kind: 'annotation' | 'textBlock' | 'objectBlock' | 'inlineObject'\n  key: string\n  member: PTObjectMember\n  node: ObjectFormNode\n  elementRef?: React.MutableRefObject<PortableTextEditorElement> | undefined\n}\n\n/**\n * @alpha\n */\nexport interface PortableTextInputProps\n  extends ArrayOfObjectsInputProps<PortableTextBlock, ArraySchemaType> {\n  hotkeys?: HotkeyOptions\n  markers?: PortableTextMarker[]\n  onCopy?: OnCopyFn\n  onPaste?: OnPasteFn\n  renderBlockActions?: RenderBlockActionsCallback\n  renderCustomMarkers?: RenderCustomMarkers\n}\n\n/**\n * The root Portable Text Input component\n *\n * @alpha\n */\nexport function PortableTextInput(props: PortableTextInputProps) {\n  const {\n    focused,\n    focusPath,\n    hotkeys,\n    markers = EMPTY_ARRAY,\n    members,\n    onChange,\n    onCopy,\n    onFocusPath,\n    onInsert,\n    onPaste,\n    path,\n    readOnly: readOnlyFromProps,\n    renderBlockActions,\n    renderCustomMarkers,\n    schemaType: type,\n    value,\n    elementProps,\n  } = props\n\n  // Make the PTE focusable from the outside\n  useImperativeHandle(elementProps.ref, () => ({\n    focus() {\n      if (editorRef.current) {\n        PortableTextEditor.focus(editorRef.current)\n      }\n    },\n  }))\n\n  const {subscribe} = usePatches({path})\n  const editorRef = useRef<PortableTextEditor | null>(null)\n  const [hasFocus, setHasFocus] = useState(false)\n  const [ignoreValidationError, setIgnoreValidationError] = useState(false)\n  const [invalidValue, setInvalidValue] = useState<InvalidValue | null>(null)\n  const [isFullscreen, setIsFullscreen] = useState(false)\n  const [isActive, setIsActive] = useState(false)\n\n  const readOnly = useMemo(() => {\n    return isActive ? Boolean(readOnlyFromProps) : true\n  }, [isActive, readOnlyFromProps])\n\n  const toast = useToast()\n  const portableTextMemberItemsRef: React.MutableRefObject<PortableTextMemberItem[]> = useRef([])\n\n  // Memoized patch stream\n  const patchSubject: Subject<{\n    patches: EditorPatch[]\n    snapshot: PortableTextBlock[] | undefined\n  }> = useMemo(() => new Subject(), [])\n  const remotePatch$ = useMemo(() => patchSubject.asObservable(), [patchSubject])\n\n  const innerElementRef = useRef<HTMLDivElement | null>(null)\n\n  const handleToggleFullscreen = useCallback(() => {\n    if (editorRef.current) {\n      const prevSel = PortableTextEditor.getSelection(editorRef.current)\n      setIsFullscreen((v) => !v)\n      setTimeout(() => {\n        if (editorRef.current) {\n          PortableTextEditor.focus(editorRef.current)\n          if (prevSel) {\n            PortableTextEditor.select(editorRef.current, {...prevSel})\n          }\n        }\n      })\n    }\n  }, [])\n\n  // Reset invalidValue if new value is coming in from props\n  useEffect(() => {\n    if (invalidValue && value !== invalidValue.value) {\n      setInvalidValue(null)\n    }\n  }, [invalidValue, value])\n\n  // Subscribe to patches\n  useEffect(() => {\n    return subscribe(({patches, snapshot}): void => {\n      patchSubject.next({patches, snapshot})\n    })\n  }, [patchSubject, subscribe])\n\n  // Populate the portableTextMembers Map\n  const portableTextMemberItems: PortableTextMemberItem[] = useMemo(() => {\n    const result: {\n      kind: PortableTextMemberItem['kind']\n      member: PTObjectMember\n      node: ObjectFormNode\n    }[] = []\n\n    for (const member of members) {\n      if (member.kind === 'item') {\n        if (!_isBlockType(member.item.schemaType)) {\n          result.push({kind: 'objectBlock', member, node: member.item})\n        } else if (member.item.validation.length > 0 || member.item.changed) {\n          // Only text blocks that have validation or changes\n          result.push({kind: 'textBlock', member, node: member.item})\n        }\n\n        if (_isBlockType(member.item.schemaType)) {\n          // Inline objects\n          const childrenField = member.item.members.find(\n            (f) => f.kind === 'field' && f.name === 'children'\n          )\n\n          if (\n            childrenField &&\n            childrenField.kind === 'field' &&\n            isMemberArrayOfObjects(childrenField)\n          ) {\n            // eslint-disable-next-line max-depth\n            for (const child of childrenField.field.members) {\n              // eslint-disable-next-line max-depth\n              if (child.kind === 'item' && child.item.schemaType.name !== 'span') {\n                result.push({kind: 'inlineObject', member: child, node: child.item})\n              }\n            }\n          }\n\n          // Markdefs\n          const markDefArrayMember = member.item.members\n            .filter(_isArrayOfObjectsFieldMember)\n            .find((f) => f.name === 'markDefs')\n\n          if (markDefArrayMember) {\n            // eslint-disable-next-line max-depth\n            for (const child of markDefArrayMember.field.members) {\n              // eslint-disable-next-line max-depth\n              if (child.kind === 'item' && child.item.schemaType.jsonType === 'object') {\n                result.push({\n                  kind: 'annotation',\n                  member: child,\n                  node: child.item,\n                })\n              }\n            }\n          }\n        }\n      }\n    }\n\n    const items: PortableTextMemberItem[] = result.map((r) => {\n      const key = pathToString(r.node.path.slice(path.length))\n      const existingItem = portableTextMemberItemsRef.current.find((ref) => ref.key === key)\n\n      if (existingItem) {\n        existingItem.member = r.member\n        existingItem.node = r.node\n        return existingItem\n      }\n\n      return {\n        kind: r.kind,\n        key,\n        member: r.member,\n        node: r.node,\n        elementRef: createRef<PortableTextEditorElement>(),\n      }\n    })\n\n    portableTextMemberItemsRef.current = items\n\n    return items\n  }, [members, path])\n\n  const hasOpenItem = useMemo(() => {\n    return portableTextMemberItems.some((item) => item.member.open)\n  }, [portableTextMemberItems])\n\n  // Sets the focusPath from editor selection (when typing, moving the cursor, clicking around)\n  // This doesn't need to be immediate, so debounce it as it impacts performance.\n  const setFocusPathDebounced = useMemo(\n    () =>\n      debounce(\n        (sel: EditorSelection) => {\n          if (sel && hasFocus) onFocusPath(sel.focus.path)\n        },\n        500,\n        {trailing: true, leading: false}\n      ),\n    [hasFocus, onFocusPath]\n  )\n\n  // Handle editor changes\n  const handleEditorChange = useCallback(\n    (change: EditorChange): void => {\n      switch (change.type) {\n        case 'mutation':\n          onChange(change.patches as FormBuilderPatch[])\n          break\n        case 'selection':\n          setFocusPathDebounced(change.selection)\n          break\n        case 'focus':\n          setHasFocus(true)\n          break\n        case 'blur':\n          setHasFocus(false)\n          break\n        case 'undo':\n        case 'redo':\n          onChange(change.patches as FormBuilderPatch[])\n          break\n        case 'invalidValue':\n          setInvalidValue(change)\n          break\n        case 'error':\n          toast.push({\n            status: change.level,\n            description: change.description,\n          })\n          break\n        default:\n      }\n    },\n    [onChange, toast, setFocusPathDebounced]\n  )\n\n  const handleFocusSkipperClick = useCallback(() => {\n    if (editorRef.current) {\n      PortableTextEditor.focus(editorRef.current)\n    }\n  }, [editorRef])\n\n  const handleIgnoreInvalidValue = useCallback((): void => {\n    setIgnoreValidationError(true)\n  }, [])\n\n  const respondToInvalidContent = useMemo(() => {\n    if (invalidValue && invalidValue.resolution) {\n      return (\n        <Box marginBottom={2}>\n          <RespondToInvalidContent\n            onChange={handleEditorChange}\n            onIgnore={handleIgnoreInvalidValue}\n            resolution={invalidValue.resolution}\n          />\n        </Box>\n      )\n    }\n    return null\n  }, [handleEditorChange, handleIgnoreInvalidValue, invalidValue])\n\n  const handleActivate = useCallback((): void => {\n    if (!isActive) {\n      setIsActive(true)\n      // Focus the editor in the next tick if needed\n      // Next tick because we are in a re-rendering phase of the editor at this point (activating it).\n      if (!hasFocus) {\n        setTimeout(() => {\n          if (editorRef.current) {\n            PortableTextEditor.focus(editorRef.current)\n          }\n        })\n      }\n    }\n  }, [hasFocus, isActive])\n\n  // If the editor that has an opened item and isn't focused - scroll to the input if needed.\n  useEffect(() => {\n    if (!hasFocus && hasOpenItem && innerElementRef.current) {\n      scrollIntoView(innerElementRef.current, {\n        scrollMode: 'if-needed',\n      })\n    }\n  }, [focused, hasFocus, hasOpenItem])\n\n  return (\n    <Box ref={innerElementRef}>\n      {!readOnly && (\n        <VisibleOnFocusButton onClick={handleFocusSkipperClick}>\n          <Text>Go to content</Text>\n        </VisibleOnFocusButton>\n      )}\n\n      {!ignoreValidationError && respondToInvalidContent}\n      {(!invalidValue || ignoreValidationError) && (\n        <PortableTextMarkersProvider markers={markers}>\n          <PortableTextMemberItemsProvider memberItems={portableTextMemberItems}>\n            <PortableTextEditor\n              ref={editorRef}\n              incomingPatches$={remotePatch$}\n              onChange={handleEditorChange}\n              maxBlocks={undefined} // TODO: from schema?\n              readOnly={readOnly}\n              type={type as FIXME}\n              value={value}\n            >\n              <Compositor\n                {...props}\n                focused={focused}\n                focusPath={focusPath}\n                hasFocus={hasFocus}\n                hotkeys={hotkeys}\n                isActive={isActive}\n                isFullscreen={isFullscreen}\n                onActivate={handleActivate}\n                onChange={onChange}\n                onCopy={onCopy}\n                onInsert={onInsert}\n                onPaste={onPaste}\n                onToggleFullscreen={handleToggleFullscreen}\n                readOnly={readOnly}\n                renderBlockActions={renderBlockActions}\n                renderCustomMarkers={renderCustomMarkers}\n                value={value}\n              />\n            </PortableTextEditor>\n          </PortableTextMemberItemsProvider>\n        </PortableTextMarkersProvider>\n      )}\n    </Box>\n  )\n}\n","import {\n  isArrayOfObjectsSchemaType,\n  isArrayOfPrimitivesSchemaType,\n  isBooleanSchemaType,\n  isNumberSchemaType,\n  isObjectSchemaType,\n  isStringSchemaType,\n} from '@sanity/types'\nimport {\n  ArrayOfObjectsInputProps,\n  ArrayOfPrimitivesInputProps,\n  BooleanInputProps,\n  InputProps,\n  NumberInputProps,\n  ObjectInputProps,\n  StringInputProps,\n} from './inputProps'\nimport {ItemProps, ObjectItemProps} from './itemProps'\n\nexport function isObjectItemProps(item: ItemProps): item is ObjectItemProps {\n  return isObjectSchemaType(item.schemaType)\n}\n\nexport function isObjectInputProps(inputProps: InputProps): inputProps is ObjectInputProps {\n  return isObjectSchemaType(inputProps.schemaType)\n}\n\nexport function isStringInputProps(inputProps: InputProps): inputProps is StringInputProps {\n  return isStringSchemaType(inputProps.schemaType)\n}\n\nexport function isNumberInputProps(inputProps: InputProps): inputProps is NumberInputProps {\n  return isNumberSchemaType(inputProps.schemaType)\n}\n\nexport function isBooleanInputProps(inputProps: InputProps): inputProps is BooleanInputProps {\n  return isBooleanSchemaType(inputProps.schemaType)\n}\n\nexport function isArrayOfObjectsInputProps(\n  inputProps: InputProps\n): inputProps is ArrayOfObjectsInputProps {\n  return isArrayOfObjectsSchemaType(inputProps.schemaType)\n}\n\nexport function isArrayOfPrimitivesInputProps(\n  inputProps: InputProps\n): inputProps is ArrayOfPrimitivesInputProps {\n  return isArrayOfPrimitivesSchemaType(inputProps.schemaType)\n}\n","/* eslint-disable no-nested-ternary */\nimport {ConditionalProperty, CurrentUser} from '@sanity/types'\n\nexport interface ConditionalPropertyCallbackContext {\n  parent?: unknown\n  document?: Record<string, unknown>\n  currentUser: Omit<CurrentUser, 'role'> | null\n  value: unknown\n}\n\nexport function resolveConditionalProperty(\n  property: ConditionalProperty,\n  context: ConditionalPropertyCallbackContext\n) {\n  const {currentUser, document, parent, value} = context\n\n  if (typeof property === 'boolean' || property === undefined) {\n    return Boolean(property)\n  }\n\n  return (\n    property({\n      document: document as any,\n      parent,\n      value,\n      currentUser,\n    }) === true // note: we can't strictly \"trust\" the return value here, so the conditional property should probably be typed as unknown\n  )\n}\n","/**\n * Max supported field depth. Fields deeper than this will be considered hidden.\n */\nexport const MAX_FIELD_DEPTH = 20\n\n/**\n * Start auto-collapsing fields at this nesting level unless schema/field configuration says otherwise\n */\nexport const AUTO_COLLAPSE_DEPTH = 3\n","import {ArraySchemaType, SchemaType} from '@sanity/types'\nimport {resolveTypeName} from '@sanity/util/content'\n\nexport function getItemType(arrayType: ArraySchemaType, item: unknown): SchemaType | undefined {\n  const itemTypeName = resolveTypeName(item)\n\n  return itemTypeName === 'object' && arrayType.of.length === 1\n    ? arrayType.of[0]\n    : arrayType.of.find((memberType) => memberType.name === itemTypeName)\n}\n\nexport function getPrimitiveItemType(\n  arrayType: ArraySchemaType,\n  item: unknown\n): SchemaType | undefined {\n  const itemTypeName = resolveTypeName(item)\n\n  return arrayType?.of.find(\n    (memberType) => memberType.name === itemTypeName || memberType.jsonType === itemTypeName\n  )\n}\n","import {ObjectSchemaTypeWithOptions} from '@sanity/types'\nimport {AUTO_COLLAPSE_DEPTH} from '../constants'\n\ninterface CollapsibleOptions {\n  collapsible: boolean\n  // Initial collapsed state\n  collapsed: boolean\n}\n\n/**\n * Takes an option object that can optionally have a 'collapsed' property\n * (`{collapsed?: boolean, collapsible?: boolean}`)\n * and returns a resolved collapsed state based on configuration and whether it's below a certain nesting level threshold\n - collapsible: boolean - whether the field can be collapsed\n - collapsed: boolean - whether the field is initially collapsed\n * NOTE: If a field is configured with ´collapsed: true´, ignore any ´collapsible´ configuration and make it collapsible no matter what, otherwise it will be left forever collapsed.\n *\n * If the nesting level is deeper than or equal to AUTO_COLLAPSE_DEPTH, the default for the field/fieldset becomes \"collapsed\"\n *\n * @param options - Whether the field or fieldset should be collapsed\n * @param level - Nesting level\n */\nexport function getCollapsedWithDefaults(\n  options: ObjectSchemaTypeWithOptions['options'] = {},\n  level: number\n): CollapsibleOptions {\n  if (options?.collapsible === false || options?.collapsable === false) {\n    return {collapsible: false, collapsed: false}\n  }\n\n  const collapsed =\n    typeof options?.collapsed === 'boolean' ? options.collapsed : level >= AUTO_COLLAPSE_DEPTH\n\n  const collapsible = collapsed || options?.collapsible === true || options?.collapsable === true\n\n  return {\n    collapsible,\n    collapsed,\n  }\n}\n","import {isArraySchemaType, isObjectSchemaType, SchemaType} from '@sanity/types'\nimport {get} from 'lodash'\n\nexport function getOption(type: SchemaType, optionName: string) {\n  return get(type.options, optionName)\n}\n\nconst PSEUDO_OBJECTS = ['array', 'file', 'image', 'reference', 'slug']\nconst HIDDEN_FIELDS = ['asset', 'crop', 'hotspot', '_ref', '_weak']\nconst NO_LEVEL_LAYOUTS = ['tags']\nconst NO_LEVEL_TYPES = ['slug']\n\nexport function getFieldLevel(schemaType: SchemaType, currentLevel: number) {\n  return isArraySchemaType(schemaType)\n    ? getArrayFieldLevel(schemaType, currentLevel)\n    : getObjectFieldLevel(schemaType, currentLevel)\n}\n\nfunction getObjectFieldLevel(schemaType: SchemaType, currentLevel: number): number {\n  const {type, options} = schemaType\n  const typeIfRelevant = asType(type, PSEUDO_OBJECTS)\n  const fields = schemaType?.jsonType === 'object' ? schemaType.fields : undefined\n\n  const typeName = typeIfRelevant?.name || ''\n\n  if (NO_LEVEL_TYPES.includes(typeName)) {\n    return 0\n  }\n\n  const isPseudoObject = PSEUDO_OBJECTS.includes(typeName)\n  const hasVisibleFields = (fields?.filter((f) => !HIDDEN_FIELDS.includes(f.name)).length ?? 0) > 0\n  const hasListOptions = (options?.list?.length ?? 0) > 0\n\n  if (hasVisibleFields || hasListOptions || !isPseudoObject) {\n    return currentLevel\n  }\n\n  return 0\n}\n\nfunction getArrayFieldLevel(schemaType: SchemaType, currentLevel: number): number {\n  const {options} = schemaType\n\n  const hasListOptions = (options?.list || [])?.length > 0\n  const isNoLevelLayout = NO_LEVEL_LAYOUTS.includes(options?.layout || '')\n\n  if (hasListOptions && !isNoLevelLayout) {\n    return currentLevel\n  }\n\n  return 0\n}\n\nfunction asType(\n  schemaType: SchemaType | undefined,\n  asOneOfTypes: string[]\n): SchemaType | undefined {\n  if (schemaType?.name && asOneOfTypes.includes(schemaType?.name)) {\n    return schemaType\n  }\n  if (!schemaType) {\n    return undefined\n  }\n  return asType(schemaType.type, asOneOfTypes)\n}\n","/* eslint-disable max-statements */\n/* eslint-disable camelcase, no-else-return */\n\nimport {\n  ArraySchemaType,\n  BooleanSchemaType,\n  CurrentUser,\n  FieldGroup,\n  isArrayOfObjectsSchemaType,\n  isArraySchemaType,\n  isObjectSchemaType,\n  NumberSchemaType,\n  ObjectField,\n  ObjectSchemaType,\n  Path,\n  StringSchemaType,\n  ValidationMarker,\n} from '@sanity/types'\n\nimport {castArray, pick, isEqual as _isEqual} from 'lodash'\nimport {isEqual, pathFor, startsWith, toString, trimChildPath} from '@sanity/util/paths'\nimport {resolveTypeName} from '@sanity/util/content'\nimport {FIXME} from '../types'\nimport {FormFieldPresence} from '../../presence'\nimport {isRecord} from '../../util'\nimport {PrimitiveFormNode, StateTree} from './types'\nimport {resolveConditionalProperty} from './conditional-property'\nimport {MAX_FIELD_DEPTH} from './constants'\nimport {getItemType, getPrimitiveItemType} from './utils/getItemType'\nimport {\n  ArrayOfObjectsMember,\n  ArrayOfPrimitivesMember,\n  FieldMember,\n  ObjectMember,\n} from './types/members'\nimport {ArrayOfObjectsFormNode, ArrayOfPrimitivesFormNode, ObjectFormNode} from './types/nodes'\nimport {FormFieldGroup} from './types/fieldGroup'\nimport {getCollapsedWithDefaults} from './utils/getCollapsibleOptions'\nimport {FieldError} from './types/memberErrors'\nimport {getFieldLevel} from '../studio/inputResolver/helpers'\n\ntype PrimitiveSchemaType = BooleanSchemaType | NumberSchemaType | StringSchemaType\n\nconst ALL_FIELDS_GROUP: FieldGroup = {\n  name: 'all-fields',\n  title: 'All fields',\n  hidden: false,\n}\n\nfunction isFieldEnabledByGroupFilter(\n  // the groups config for the \"enclosing object\" type\n  groupsConfig: FormFieldGroup[],\n  field: ObjectField,\n  currentGroup: FormFieldGroup\n) {\n  if (currentGroup.name === ALL_FIELDS_GROUP.name) {\n    return true\n  }\n\n  // if there's no group config for the object type, all fields are visible\n  if (groupsConfig.length === 0) {\n    return true\n  }\n\n  return castArray(field.group).includes(currentGroup.name)\n}\n\nfunction isAcceptedObjectValue(value: any): value is Record<string, unknown> | undefined {\n  return typeof value === 'undefined' || isRecord(value)\n}\n\nfunction isValidArrayOfObjectsValue(value: any): value is unknown[] | undefined {\n  return typeof value === 'undefined' || Array.isArray(value)\n}\n\nfunction isValidArrayOfPrimitivesValue(\n  value: any\n): value is (boolean | number | string)[] | undefined {\n  return typeof value === 'undefined' || Array.isArray(value)\n}\n\nfunction everyItemIsObject(value: unknown[]): value is object[] {\n  return value.length === 0 || value.every((item) => isRecord(item))\n}\n\nfunction findDuplicateKeyEntries(array: {_key: string}[]) {\n  const seenKeys = new Set<string>()\n  return array.reduce((acc: [index: number, key: string][], item, index) => {\n    if (seenKeys.has(item._key)) {\n      acc.push([index, item._key])\n    }\n    seenKeys.add(item._key)\n    return acc\n  }, [])\n}\n\nfunction hasKey<T extends object>(value: T): value is T & {_key: string} {\n  return '_key' in value\n}\nfunction everyItemHasKey<T extends object>(array: T[]): array is (T & {_key: string})[] {\n  return array?.every((item) => isRecord(item) && hasKey(item))\n}\n\nfunction isChangedValue(value: any, comparisonValue: any) {\n  if (value && !comparisonValue) {\n    return true\n  }\n  return !_isEqual(value, comparisonValue)\n}\n\n/*\n * Takes a field in context of a parent object and returns prepared props for it\n */\nfunction prepareFieldMember(props: {\n  field: ObjectField\n  parent: RawState<ObjectSchemaType, unknown>\n  index: number\n}): ObjectMember | null {\n  const {parent, field, index} = props\n  const fieldPath = pathFor([...parent.path, field.name])\n  const fieldLevel = getFieldLevel(field.type, parent.level + 1)\n\n  const parentValue = parent.value\n  const parentComparisonValue = parent.comparisonValue\n  if (!isAcceptedObjectValue(parentValue)) {\n    // Note: we validate each field, before passing it recursively to this function so getting this error means that the\n    // ´prepareFormState´ function itself has been called with a non-object value\n    throw new Error('Unexpected non-object value')\n  }\n\n  if (isObjectSchemaType(field.type)) {\n    const fieldValue = parentValue?.[field.name]\n    const fieldComparisonValue = isRecord(parentComparisonValue)\n      ? parentComparisonValue?.[field.name]\n      : undefined\n    if (!isAcceptedObjectValue(fieldValue)) {\n      return {\n        kind: 'error',\n        key: field.name,\n        fieldName: field.name,\n        error: {\n          type: 'INCOMPATIBLE_TYPE',\n          expectedSchemaType: field.type,\n          resolvedValueType: resolveTypeName(fieldValue),\n          value: fieldValue,\n        },\n      }\n    }\n\n    // todo: consider requiring a _type annotation for object values on fields as well\n    // if (resolvedValueType !== field.type.name) {\n    //   return {\n    //     kind: 'error',\n    //     key: field.name,\n    //     error: {\n    //       type: 'TYPE_ANNOTATION_MISMATCH',\n    //       expectedSchemaType: field.type,\n    //       resolvedValueType,\n    //     },\n    //   }\n    // }\n\n    const fieldGroupState = parent.fieldGroupState?.children?.[field.name]\n    const scopedCollapsedPaths = parent.collapsedPaths?.children?.[field.name]\n    const scopedCollapsedFieldsets = parent.collapsedFieldSets?.children?.[field.name]\n\n    const inputState = prepareObjectInputState({\n      schemaType: field.type,\n      currentUser: parent.currentUser,\n      parent: parent.value,\n      document: parent.document,\n      value: fieldValue,\n      changed: isChangedValue(fieldValue, fieldComparisonValue),\n      comparisonValue: fieldComparisonValue,\n      presence: parent.presence,\n      validation: parent.validation,\n      fieldGroupState,\n      path: fieldPath,\n      level: fieldLevel,\n      focusPath: parent.focusPath,\n      openPath: parent.openPath,\n      collapsedPaths: scopedCollapsedPaths,\n      collapsedFieldSets: scopedCollapsedFieldsets,\n      readOnly: parent.readOnly,\n    })\n\n    if (inputState === null) {\n      return null\n    }\n\n    const defaultCollapsedState = getCollapsedWithDefaults(field.type.options as FIXME, fieldLevel)\n    const collapsed = scopedCollapsedPaths\n      ? scopedCollapsedPaths.value\n      : defaultCollapsedState.collapsed\n\n    return {\n      kind: 'field',\n      key: `field-${field.name}`,\n      name: field.name,\n      index: index,\n      open: startsWith(fieldPath, parent.openPath),\n      field: inputState,\n      collapsed,\n      collapsible: defaultCollapsedState.collapsible,\n    }\n  } else if (isArraySchemaType(field.type)) {\n    const fieldValue = parentValue?.[field.name] as unknown[] | undefined\n    const fieldComparisonValue = isRecord(parentComparisonValue)\n      ? parentComparisonValue?.[field.name]\n      : undefined\n    if (isArrayOfObjectsSchemaType(field.type)) {\n      const hasValue = typeof fieldValue !== 'undefined'\n      if (hasValue && !isValidArrayOfObjectsValue(fieldValue)) {\n        const resolvedValueType = resolveTypeName(fieldValue)\n\n        return {\n          kind: 'error',\n          key: field.name,\n          fieldName: field.name,\n          error: {\n            type: 'INCOMPATIBLE_TYPE',\n            expectedSchemaType: field.type,\n            resolvedValueType,\n            value: fieldValue,\n          },\n        }\n      }\n\n      if (hasValue && !everyItemIsObject(fieldValue)) {\n        return {\n          kind: 'error',\n          key: field.name,\n          fieldName: field.name,\n          error: {\n            type: 'MIXED_ARRAY',\n            schemaType: field.type,\n          },\n        }\n      }\n\n      if (hasValue && !everyItemHasKey(fieldValue)) {\n        return {\n          kind: 'error',\n          key: field.name,\n          fieldName: field.name,\n          error: {\n            type: 'MISSING_KEYS',\n            value: fieldValue,\n            schemaType: field.type,\n          },\n        }\n      }\n\n      const duplicateKeyEntries = hasValue ? findDuplicateKeyEntries(fieldValue) : []\n      if (duplicateKeyEntries.length > 0) {\n        return {\n          kind: 'error',\n          key: field.name,\n          fieldName: field.name,\n          error: {\n            type: 'DUPLICATE_KEYS',\n            duplicates: duplicateKeyEntries,\n            schemaType: field.type,\n          },\n        }\n      }\n\n      const fieldGroupState = parent.fieldGroupState?.children?.[field.name]\n      const scopedCollapsedPaths = parent.collapsedPaths?.children?.[field.name]\n      const scopedCollapsedFieldSets = parent.collapsedFieldSets?.children?.[field.name]\n\n      const readOnly =\n        parent.readOnly ||\n        resolveConditionalProperty(field.type.readOnly, {\n          value: fieldValue,\n          parent: parent.value,\n          document: parent.document,\n          currentUser: parent.currentUser,\n        })\n\n      const fieldState = prepareArrayOfObjectsInputState({\n        schemaType: field.type,\n        parent: parent.value,\n        currentUser: parent.currentUser,\n        document: parent.document,\n        value: fieldValue,\n        changed: isChangedValue(fieldValue, fieldComparisonValue),\n        comparisonValue: fieldComparisonValue as FIXME,\n        fieldGroupState,\n        focusPath: parent.focusPath,\n        openPath: parent.openPath,\n        presence: parent.presence,\n        validation: parent.validation,\n        collapsedPaths: scopedCollapsedPaths,\n        collapsedFieldSets: scopedCollapsedFieldSets,\n        level: fieldLevel,\n        path: fieldPath,\n        readOnly,\n      })\n\n      if (fieldState === null) {\n        return null\n      }\n\n      return {\n        kind: 'field',\n        key: `field-${field.name}`,\n        name: field.name,\n        index: index,\n\n        open: startsWith(fieldPath, parent.openPath),\n\n        collapsible: false,\n        collapsed: false,\n        // note: this is what we actually end up passing down as to the next input component\n        field: fieldState,\n      }\n    } else {\n      // array of primitives\n      if (!isValidArrayOfPrimitivesValue(fieldValue)) {\n        const resolvedValueType = resolveTypeName(fieldValue)\n\n        return {\n          kind: 'error',\n          key: field.name,\n          fieldName: field.name,\n          error: {\n            type: 'INCOMPATIBLE_TYPE',\n            expectedSchemaType: field.type,\n            resolvedValueType,\n            value: fieldValue,\n          },\n        }\n      }\n\n      const fieldGroupState = parent.fieldGroupState?.children?.[field.name]\n      const scopedCollapsedPaths = parent.collapsedPaths?.children?.[field.name]\n      const scopedCollapsedFieldSets = parent.collapsedFieldSets?.children?.[field.name]\n\n      const readOnly =\n        parent.readOnly ||\n        resolveConditionalProperty(field.type.readOnly, {\n          value: fieldValue,\n          parent: parent.value,\n          document: parent.document,\n          currentUser: parent.currentUser,\n        })\n\n      const fieldState = prepareArrayOfPrimitivesInputState({\n        changed: isChangedValue(fieldValue, fieldComparisonValue),\n        comparisonValue: fieldComparisonValue as FIXME,\n        schemaType: field.type,\n        parent: parent.value,\n        currentUser: parent.currentUser,\n        document: parent.document,\n        value: fieldValue,\n        fieldGroupState,\n        focusPath: parent.focusPath,\n        openPath: parent.openPath,\n        presence: parent.presence,\n        validation: parent.validation,\n        collapsedPaths: scopedCollapsedPaths,\n        collapsedFieldSets: scopedCollapsedFieldSets,\n        level: fieldLevel,\n        path: fieldPath,\n        readOnly,\n      })\n\n      if (fieldState === null) {\n        return null\n      }\n\n      return {\n        kind: 'field',\n        key: `field-${field.name}`,\n        name: field.name,\n        index: index,\n\n        open: startsWith(fieldPath, parent.openPath),\n\n        // todo: consider support for collapsible arrays\n        collapsible: false,\n        collapsed: false,\n        // note: this is what we actually end up passing down as to the next input component\n        field: fieldState,\n      }\n    }\n  } else {\n    // primitive fields\n\n    const fieldValue = parentValue?.[field.name] as undefined | boolean | string | number\n    const fieldComparisonValue = isRecord(parentComparisonValue)\n      ? parentComparisonValue?.[field.name]\n      : undefined\n\n    const conditionalPropertyContext = {\n      value: fieldValue,\n      parent: parent.value,\n      document: parent.document,\n      currentUser: parent.currentUser,\n    }\n\n    // note: we *only* want to call the conditional props here, as it's handled by the prepare<Object|Array>InputProps otherwise\n    const hidden = resolveConditionalProperty(field.type.hidden, conditionalPropertyContext)\n\n    if (hidden) {\n      return null\n    }\n\n    const readOnly =\n      parent.readOnly || resolveConditionalProperty(field.type.readOnly, conditionalPropertyContext)\n\n    const fieldState = preparePrimitiveInputState({\n      ...parent,\n      comparisonValue: fieldComparisonValue,\n      value: fieldValue as boolean | string | number | undefined,\n      schemaType: field.type as PrimitiveSchemaType,\n      path: fieldPath,\n      readOnly,\n    })\n\n    return {\n      kind: 'field',\n      key: `field-${field.name}`,\n      name: field.name,\n      index: index,\n\n      open: startsWith(fieldPath, parent.openPath),\n\n      // todo: consider support for collapsible primitive fields\n      collapsible: false,\n      collapsed: false,\n      field: fieldState,\n    }\n  }\n}\n\ninterface RawState<SchemaType, T> {\n  schemaType: SchemaType\n  value?: T\n  comparisonValue?: T | null\n  changed?: boolean\n  document: FIXME_SanityDocument\n  currentUser: Omit<CurrentUser, 'role'> | null\n  parent?: unknown\n  hidden?: boolean\n  readOnly?: boolean\n  path: Path\n  openPath: Path\n  focusPath: Path\n  presence: FormFieldPresence[]\n  validation: ValidationMarker[]\n  fieldGroupState?: StateTree<string>\n  collapsedPaths?: StateTree<boolean>\n  collapsedFieldSets?: StateTree<boolean>\n  // nesting level\n  level: number\n}\n\nfunction prepareObjectInputState<T>(\n  props: RawState<ObjectSchemaType, T>,\n  enableHiddenCheck?: false\n): ObjectFormNode\nfunction prepareObjectInputState<T>(\n  props: RawState<ObjectSchemaType, T>,\n  enableHiddenCheck?: true\n): ObjectFormNode | null\nfunction prepareObjectInputState<T>(\n  props: RawState<ObjectSchemaType, T>,\n  enableHiddenCheck = true\n): ObjectFormNode | null {\n  if (props.level === MAX_FIELD_DEPTH) {\n    return null\n  }\n\n  const conditionalPropertyContext = {\n    value: props.value,\n    parent: props.parent,\n    document: props.document,\n    currentUser: props.currentUser,\n  }\n\n  const hidden =\n    enableHiddenCheck &&\n    resolveConditionalProperty(props.schemaType.hidden, conditionalPropertyContext)\n\n  if (hidden) {\n    return null\n  }\n\n  const readOnly =\n    props.readOnly ||\n    resolveConditionalProperty(props.schemaType.readOnly, conditionalPropertyContext)\n\n  const schemaTypeGroupConfig = props.schemaType.groups || []\n  const defaultGroupName = (schemaTypeGroupConfig.find((g) => g.default) || ALL_FIELDS_GROUP)?.name\n\n  const groups = [ALL_FIELDS_GROUP, ...schemaTypeGroupConfig].flatMap((group): FormFieldGroup[] => {\n    const groupHidden = resolveConditionalProperty(group.hidden, conditionalPropertyContext)\n    const selected = group.name === (props.fieldGroupState?.value || defaultGroupName)\n    return groupHidden\n      ? []\n      : [\n          {\n            icon: group?.icon,\n            name: group.name,\n            selected,\n            title: group.title,\n          },\n        ]\n  })\n\n  const selectedGroup = groups.find((group) => group.selected)!\n\n  const parentProps: RawState<ObjectSchemaType, unknown> = {\n    ...props,\n    hidden,\n    readOnly,\n  }\n\n  // note: this is needed because not all object types gets a ´fieldsets´ property during schema parsing.\n  // ideally members should be normalized as part of the schema parsing and not here\n  const normalizedSchemaMembers: typeof props.schemaType.fieldsets = props.schemaType.fieldsets\n    ? props.schemaType.fieldsets\n    : props.schemaType.fields.map((field) => ({single: true, field}))\n\n  // create a members array for the object\n  const members = normalizedSchemaMembers.flatMap((fieldSet, index): ObjectMember[] => {\n    if (fieldSet.single) {\n      // \"single\" means not part of a fieldset\n      const fieldMember = prepareFieldMember({\n        field: fieldSet.field,\n        parent: parentProps,\n        index,\n      })\n      if (\n        fieldMember === null ||\n        !isFieldEnabledByGroupFilter(groups, fieldSet.field, selectedGroup)\n      ) {\n        return []\n      }\n      return [fieldMember]\n    }\n\n    // it's an actual fieldset\n    const fieldsetFieldNames = fieldSet.fields.map((f) => f.name)\n    const fieldsetHidden = resolveConditionalProperty(fieldSet.hidden, {\n      currentUser: props.currentUser,\n      document: props.document,\n      parent: props.value,\n      value: pick(props.value, fieldsetFieldNames),\n    })\n\n    if (fieldsetHidden) {\n      return []\n    }\n\n    const fieldsetReadOnly = resolveConditionalProperty(fieldSet.readOnly, {\n      currentUser: props.currentUser,\n      document: props.document,\n      parent: props.value,\n      value: pick(props.value, fieldsetFieldNames),\n    })\n\n    const fieldsetMembers = fieldSet.fields.flatMap((field): (FieldMember | FieldError)[] => {\n      const fieldState = prepareFieldMember({\n        field,\n        parent: parentProps,\n        index,\n\n        // the explicit type cast here is ok - we know that a fieldset can not have fieldsets\n      }) as FieldMember | FieldError | null\n      if (fieldState === null || !isFieldEnabledByGroupFilter(groups, field, selectedGroup)) {\n        return []\n      }\n\n      const fieldStateWithReadOnly = {\n        ...fieldState,\n        field: {\n          ...(fieldState as FieldMember)?.field,\n          readOnly: readOnly || fieldsetReadOnly,\n        },\n      }\n\n      return [fieldStateWithReadOnly]\n    })\n\n    // if all members of the fieldset is hidden, the fieldset should effectively also be hidden\n    if (fieldsetMembers.length === 0) {\n      return []\n    }\n    const defaultCollapsedState = getCollapsedWithDefaults(fieldSet.options, props.level)\n\n    const collapsed =\n      (props.collapsedFieldSets?.children || {})[fieldSet.name]?.value ??\n      defaultCollapsedState.collapsed\n\n    return [\n      {\n        kind: 'fieldSet',\n        key: `fieldset-${fieldSet.name}`,\n        fieldSet: {\n          path: pathFor(props.path.concat(fieldSet.name)),\n          name: fieldSet.name,\n          title: fieldSet.title,\n          description: fieldSet.description,\n          hidden: false,\n          level: props.level + 1,\n          members: fieldsetMembers,\n          collapsible: defaultCollapsedState?.collapsible,\n          collapsed,\n          columns: fieldSet?.options?.columns,\n        },\n      },\n    ]\n  })\n\n  const hasFieldGroups = schemaTypeGroupConfig.length > 0\n\n  const presence = props.presence.filter((item) => isEqual(item.path, props.path))\n\n  const validation = props.validation\n    .filter((item) => isEqual(item.path, props.path))\n    .map((v) => ({level: v.level, message: v.item.message, path: v.path}))\n\n  if (members.length === 0) {\n    return null\n  }\n\n  return {\n    value: props.value as Record<string, unknown> | undefined,\n    changed: isChangedValue(props.value, props.comparisonValue),\n    schemaType: props.schemaType,\n    readOnly: props.readOnly || readOnly,\n    path: props.path,\n    id: toString(props.path),\n    level: props.level,\n    focused: isEqual(props.path, props.focusPath),\n    focusPath: trimChildPath(props.path, props.focusPath),\n    presence,\n    validation,\n    members,\n    groups: hasFieldGroups ? groups : [],\n  }\n}\nfunction prepareArrayOfPrimitivesInputState<T extends (boolean | string | number)[]>(\n  props: RawState<ArraySchemaType, T>\n): ArrayOfPrimitivesFormNode | null {\n  if (props.level === MAX_FIELD_DEPTH) {\n    return null\n  }\n\n  const conditionalPropertyContext = {\n    comparisonValue: props.comparisonValue,\n    value: props.value,\n    parent: props.parent,\n    document: props.document,\n    currentUser: props.currentUser,\n  }\n\n  const hidden = resolveConditionalProperty(props.schemaType.hidden, conditionalPropertyContext)\n\n  if (hidden) {\n    return null\n  }\n\n  const readOnly =\n    props.readOnly ||\n    resolveConditionalProperty(props.schemaType.readOnly, conditionalPropertyContext)\n\n  // Todo: improve error handling at the parent level so that the value here is either undefined or an array\n  const items = Array.isArray(props.value) ? props.value : []\n\n  const presence = props.presence.filter((item) => isEqual(item.path, props.path))\n  const validation = props.validation\n    .filter((item) => isEqual(item.path, props.path))\n    .map((v) => ({level: v.level, message: v.item.message, path: v.path}))\n  const members = items.flatMap((item, index) =>\n    prepareArrayOfPrimitivesMember({arrayItem: item, parent: props, index})\n  )\n  return {\n    changed: members.some((m) => m.kind === 'item' && m.item.changed), // TODO: is this correct? There could be field and fieldsets here?\n    value: props.value as T,\n    readOnly,\n    schemaType: props.schemaType,\n    focused: isEqual(props.path, props.focusPath),\n    focusPath: trimChildPath(props.path, props.focusPath),\n    path: props.path,\n    id: toString(props.path),\n    level: props.level,\n    validation,\n    presence,\n    members,\n  }\n}\n\nfunction prepareArrayOfObjectsInputState<T extends {_key: string}[]>(\n  props: RawState<ArraySchemaType, T>\n): ArrayOfObjectsFormNode | null {\n  if (props.level === MAX_FIELD_DEPTH) {\n    return null\n  }\n\n  const conditionalPropertyContext = {\n    value: props.value,\n    parent: props.parent,\n    document: props.document,\n    currentUser: props.currentUser,\n  }\n  const hidden = resolveConditionalProperty(props.schemaType.hidden, conditionalPropertyContext)\n\n  if (hidden) {\n    return null\n  }\n\n  const readOnly =\n    props.readOnly ||\n    resolveConditionalProperty(props.schemaType.readOnly, conditionalPropertyContext)\n\n  // Todo: improve error handling at the parent level so that the value here is either undefined or an array\n  const items = Array.isArray(props.value) ? props.value : []\n\n  const presence = props.presence.filter((item) => isEqual(item.path, props.path))\n  const validation = props.validation\n    .filter((item) => isEqual(item.path, props.path))\n    .map((v) => ({level: v.level, message: v.item.message, path: v.path}))\n\n  const members = items.flatMap((item, index) =>\n    prepareArrayOfObjectsMember({\n      arrayItem: item,\n      parent: props,\n      index,\n    })\n  )\n\n  return {\n    changed: members.some((m) => m.kind === 'item' && m.item.changed),\n    value: props.value as T,\n    readOnly,\n    schemaType: props.schemaType,\n    focused: isEqual(props.path, props.focusPath),\n    focusPath: trimChildPath(props.path, props.focusPath),\n    path: props.path,\n    id: toString(props.path),\n    level: props.level,\n    validation,\n    presence,\n    members,\n  }\n}\n\n/*\n * Takes a field in context of a parent object and returns prepared props for it\n */\nfunction prepareArrayOfObjectsMember(props: {\n  arrayItem: {_key: string}\n  parent: RawState<ArraySchemaType, unknown>\n  index: number\n}): ArrayOfObjectsMember {\n  const {arrayItem, parent, index} = props\n\n  const itemType = getItemType(parent.schemaType, arrayItem) as ObjectSchemaType\n\n  const key = arrayItem._key\n\n  if (!itemType) {\n    const itemTypeName = resolveTypeName(arrayItem)\n    return {\n      kind: 'error',\n      key,\n      index,\n      error: {\n        type: 'INVALID_ITEM_TYPE',\n        resolvedValueType: itemTypeName,\n        value: arrayItem,\n        validTypes: parent.schemaType.of,\n      },\n    }\n  }\n\n  const itemPath = pathFor([...parent.path, {_key: key}])\n  const itemLevel = parent.level + 1\n\n  const conditionalPropertyContext = {\n    value: parent.value,\n    parent: props.parent,\n    document: parent.document,\n    currentUser: parent.currentUser,\n  }\n  const readOnly =\n    parent.readOnly ||\n    resolveConditionalProperty(parent.schemaType.readOnly, conditionalPropertyContext)\n\n  const collapsedItemPaths = parent.collapsedPaths?.children?.[key]\n  const comparisonValue =\n    (Array.isArray(parent.comparisonValue) &&\n      parent.comparisonValue.find((i) => i._key === arrayItem._key)) ||\n    undefined\n  const itemState = prepareObjectInputState(\n    {\n      schemaType: itemType,\n      level: itemLevel,\n      document: parent.document,\n      value: arrayItem,\n      comparisonValue,\n      changed: isChangedValue(arrayItem, comparisonValue),\n      path: itemPath,\n      focusPath: parent.focusPath,\n      openPath: parent.openPath,\n      currentUser: parent.currentUser,\n      collapsedPaths: collapsedItemPaths,\n      presence: parent.presence,\n      validation: parent.validation,\n      readOnly,\n    },\n    false\n  )\n\n  const defaultCollapsedState = getCollapsedWithDefaults(itemType.options, itemLevel)\n  const collapsed = collapsedItemPaths?.value ?? defaultCollapsedState.collapsed\n  return {\n    kind: 'item',\n    key,\n    index,\n    open: startsWith(itemPath, parent.openPath),\n    collapsed: collapsed,\n    collapsible: true,\n    item: itemState,\n  }\n}\n\n/*\n * Takes a field in context of a parent object and returns prepared props for it\n */\nfunction prepareArrayOfPrimitivesMember(props: {\n  arrayItem: unknown\n  parent: RawState<ArraySchemaType, unknown>\n  index: number\n}): ArrayOfPrimitivesMember {\n  const {arrayItem, parent, index} = props\n  const itemType = getPrimitiveItemType(parent.schemaType, arrayItem)\n\n  const itemPath = pathFor([...parent.path, index])\n  const itemValue = (parent.value as unknown[] | undefined)?.[index] as string | boolean | number\n  const itemComparisonValue = (parent.comparisonValue as unknown[] | undefined)?.[index] as\n    | string\n    | boolean\n    | number\n  const itemLevel = parent.level + 1\n\n  // Best effort attempt to make a stable key for each item in the array\n  // Since items may be reordered and change at any time, there's no way to reliably address each item uniquely\n  // This is a \"best effort\"-attempt at making sure we don't re-use internal state for item inputs\n  // when items are added to or removed from the array\n  const key = `${itemType?.name || 'invalid-type'}-${String(index)}`\n\n  if (!itemType) {\n    return {\n      kind: 'error',\n      key,\n      index,\n      error: {\n        type: 'INVALID_ITEM_TYPE',\n        validTypes: parent.schemaType.of,\n        resolvedValueType: resolveTypeName(itemType),\n        value: itemValue,\n      },\n    }\n  }\n\n  const readOnly =\n    parent.readOnly ||\n    resolveConditionalProperty(itemType.readOnly, {\n      value: itemValue,\n      parent: parent.value,\n      document: parent.document,\n      currentUser: parent.currentUser,\n    })\n\n  const item = preparePrimitiveInputState({\n    ...parent,\n    path: itemPath,\n    schemaType: itemType as PrimitiveSchemaType,\n    level: itemLevel,\n    value: itemValue,\n    comparisonValue: itemComparisonValue,\n    readOnly,\n  })\n\n  return {\n    kind: 'item',\n    key,\n    index,\n    open: isEqual(itemPath, parent.openPath),\n    item,\n  }\n}\n\nfunction preparePrimitiveInputState<SchemaType extends PrimitiveSchemaType>(\n  props: RawState<SchemaType, unknown>\n): PrimitiveFormNode {\n  const presence = props.presence.filter((item) => isEqual(item.path, props.path))\n\n  const validation = props.validation\n    .filter((item) => isEqual(item.path, props.path))\n    .map((v) => ({level: v.level, message: v.item.message, path: v.path}))\n  return {\n    schemaType: props.schemaType,\n    changed: isChangedValue(props.value, props.comparisonValue),\n    value: props.value,\n    level: props.level,\n    id: toString(props.path),\n    readOnly: props.readOnly,\n    focused: isEqual(props.path, props.focusPath),\n    path: props.path,\n    presence,\n    validation,\n  } as PrimitiveFormNode\n}\n\nexport type FIXME_SanityDocument = Record<string, unknown>\n\nexport function prepareFormState<T extends FIXME_SanityDocument>(\n  props: RawState<ObjectSchemaType, T>\n): ObjectFormNode | null {\n  return prepareObjectInputState(props)\n}\n","/**\n * Reconciles two versions of a state tree by iterating over the next and deep comparing against the next towards the previous.\n * Wherever identical values are found, the previous value is kept, preserving object identities for arrays and objects where possible\n * @param previous - the previous value\n * @param next - the next/current value\n */\nexport function immutableReconcile<T>(previous: unknown, next: T): T {\n  return _immutableReconcile(previous, next, new WeakSet())\n}\n\nfunction _immutableReconcile<T>(\n  previous: unknown,\n  next: T,\n  /**\n   * Keep track of visited nodes to prevent infinite recursion in case of circular structures\n   */\n  parents: WeakSet<any>\n): T {\n  if (previous === next) return previous as T\n\n  // eslint-disable-next-line no-eq-null\n  if (previous == null || next == null) return next\n\n  const prevType = typeof previous\n  const nextType = typeof next\n\n  // Different types\n  if (prevType !== nextType) return next\n\n  if (Array.isArray(next)) {\n    parents.add(next)\n\n    assertType<unknown[]>(previous)\n    assertType<unknown[]>(next)\n\n    let allEqual = previous.length === next.length\n    const result = []\n    for (let index = 0; index < next.length; index++) {\n      if (parents.has(next[index])) {\n        return next\n      }\n\n      const nextItem = _immutableReconcile(previous[index], next[index], parents)\n\n      if (nextItem !== previous[index]) {\n        allEqual = false\n      }\n      result[index] = nextItem\n    }\n    return (allEqual ? previous : result) as any\n  }\n\n  if (typeof next === 'object') {\n    parents.add(next)\n    assertType<Record<string, unknown>>(previous)\n    assertType<Record<string, unknown>>(next)\n\n    let allEqual = true\n    const result: Record<string, unknown> = {}\n    for (const key of Object.keys(next)) {\n      if (parents.has(next[key])) {\n        return next\n      }\n      const nextValue = _immutableReconcile(previous[key], next[key]!, parents)\n      if (nextValue !== previous[key]) {\n        allEqual = false\n      }\n      result[key] = nextValue\n    }\n    return (allEqual ? previous : result) as T\n  }\n  return next\n}\n\n// just some typescript trickery get type assertion\n// eslint-disable-next-line @typescript-eslint/no-empty-function, no-empty-function\nfunction assertType<T>(value: unknown): asserts value is T {}\n","/* eslint-disable camelcase */\n\nimport {ObjectSchemaType, Path, ValidationMarker} from '@sanity/types'\nimport {useLayoutEffect, useMemo, useRef} from 'react'\nimport {pathFor} from '@sanity/util/paths'\nimport {useCurrentUser} from '../../datastores'\nimport {FormFieldPresence} from '../../presence'\nimport {StateTree, ObjectFormNode} from './types'\nimport {prepareFormState, FIXME_SanityDocument} from './formState'\nimport {immutableReconcile} from './utils/immutableReconcile'\nimport {DocumentFormNode} from './types/nodes'\n\nexport type FormState<\n  T extends {[key in string]: unknown} = {[key in string]: unknown},\n  S extends ObjectSchemaType = ObjectSchemaType\n> = ObjectFormNode<T, S>\n\nexport function useFormState<\n  T extends {[key in string]: unknown} = {[key in string]: unknown},\n  S extends ObjectSchemaType = ObjectSchemaType\n>(\n  schemaType: ObjectSchemaType,\n  {\n    comparisonValue,\n    value,\n    fieldGroupState,\n    collapsedFieldSets,\n    collapsedPaths,\n    focusPath,\n    openPath,\n    presence,\n    validation,\n  }: {\n    fieldGroupState?: StateTree<string> | undefined\n    collapsedFieldSets?: StateTree<boolean> | undefined\n    collapsedPaths?: StateTree<boolean> | undefined\n    value: Partial<FIXME_SanityDocument>\n    comparisonValue: Partial<FIXME_SanityDocument> | null\n    openPath: Path\n    focusPath: Path\n    presence: FormFieldPresence[]\n    validation: ValidationMarker[]\n  }\n): FormState<T, S> | null {\n  // note: feel free to move these state pieces out of this hook\n  const currentUser = useCurrentUser()\n\n  const prev = useRef<DocumentFormNode | null>(null)\n\n  useLayoutEffect(() => {\n    prev.current = null\n  }, [schemaType])\n\n  return useMemo(() => {\n    // console.time('derive form state')\n    const next = prepareFormState({\n      schemaType,\n      document: value,\n      fieldGroupState,\n      collapsedFieldSets,\n      collapsedPaths,\n      value,\n      comparisonValue,\n      focusPath,\n      openPath,\n      path: pathFor([]),\n      level: 0,\n      currentUser,\n      presence,\n      validation,\n    }) as ObjectFormNode<T, S> // TODO: remove type cast\n\n    const reconciled = immutableReconcile(prev.current, next)\n    prev.current = reconciled\n    // console.timeEnd('derive form state')\n    return reconciled\n  }, [\n    schemaType,\n    value,\n    fieldGroupState,\n    collapsedFieldSets,\n    collapsedPaths,\n    comparisonValue,\n    focusPath,\n    openPath,\n    currentUser,\n    presence,\n    validation,\n  ])\n}\n","import {Path, SanityDocument} from '@sanity/types'\nimport {isEqual} from 'lodash'\nimport {useEffect, useMemo, useState} from 'react'\nimport {Subject} from 'rxjs'\nimport {distinctUntilChanged, map} from 'rxjs/operators'\nimport {getValueAtPath} from '../field/paths'\nimport {useUnique} from '../util'\nimport {useFormBuilder} from './useFormBuilder'\n\n/**\n * @alpha\n */\nexport function useFormValue(path: Path): unknown {\n  const uniquePath = useUnique(path)\n  const {getDocument, patchChannel} = useFormBuilder().__internal\n  const documentValueSubject = useMemo(() => new Subject<SanityDocument | undefined>(), [])\n  const documentValue$ = useMemo(() => documentValueSubject.asObservable(), [documentValueSubject])\n  const [value, setValue] = useState(() => getValueAtPath(getDocument(), uniquePath))\n\n  // Subscribe to all document changes\n  useEffect(\n    () => patchChannel.subscribe(() => documentValueSubject.next(getDocument())),\n    [documentValueSubject, getDocument, patchChannel]\n  )\n\n  // Subscribe to value at `path`\n  useEffect(() => {\n    const value$ = documentValue$.pipe(\n      map((documentValue) =>\n        uniquePath.length === 0 ? documentValue : getValueAtPath(documentValue, uniquePath)\n      ),\n      distinctUntilChanged((x, y) => isEqual(x, y))\n    )\n\n    const sub = value$.subscribe(setValue)\n\n    return () => sub.unsubscribe()\n  }, [documentValue$, uniquePath])\n\n  return value\n}\n","import {arrayToJSONMatchPath} from '@sanity/mutator'\nimport {flatten} from 'lodash'\nimport type {FormPatchOrigin, FormPatch} from '../patch/types'\nimport {decodePath} from './path'\n\n/**\n * @internal\n */\nexport type MutationPatch = Record<string, any> // @todo: complete this typing\n\n/**\n * @internal\n */\nexport function toMutationPatches(patches: FormPatch[]): MutationPatch[] {\n  return patches.map(toMutationPatch)\n}\n\n/**\n * @internal\n */\nexport function fromMutationPatches(\n  origin: FormPatchOrigin,\n  patches: MutationPatch[]\n): FormPatch[] {\n  return flatten(patches.map((patch) => toFormBuilderPatches(origin, patch)))\n}\n\nconst notIn = (values: unknown[]) => (value: unknown) => !values.includes(value)\n\nfunction toFormBuilderPatches(origin: FormPatchOrigin, patch: MutationPatch): FormPatch[] {\n  return flatten(\n    Object.keys(patch)\n      .filter(notIn(['id', 'ifRevisionID', 'query']))\n      .map((type) => {\n        if (type === 'unset') {\n          return patch.unset.map((path: any) => {\n            return {\n              type: 'unset',\n              path: decodePath(path),\n              origin,\n            }\n          })\n        }\n        if (type === 'insert') {\n          const position = 'before' in patch.insert ? 'before' : 'after'\n          return {\n            type: 'insert',\n            position: position,\n            path: decodePath(patch.insert[position]),\n            items: patch.insert.items,\n            origin,\n          }\n        }\n        return Object.keys(patch[type])\n          .map((gradientPath) => {\n            if (type === 'set') {\n              return {\n                type: 'set',\n                path: decodePath(gradientPath),\n                value: patch[type][gradientPath],\n                origin,\n              }\n            }\n            if (type === 'inc' || type === 'dec') {\n              return {\n                type: type,\n                path: decodePath(gradientPath),\n                value: patch[type][gradientPath],\n                origin,\n              }\n            }\n            if (type === 'setIfMissing') {\n              return {\n                type: 'setIfMissing',\n                path: decodePath(gradientPath),\n                value: patch[type][gradientPath],\n                origin,\n              }\n            }\n            if (type === 'diffMatchPatch') {\n              return {\n                type: 'diffMatchPatch',\n                path: decodePath(gradientPath),\n                value: patch[type][gradientPath],\n                origin,\n              }\n            }\n            // eslint-disable-next-line no-console\n            console.warn(new Error(`Unsupported patch type: ${type}`))\n            return null\n          })\n          .filter(Boolean)\n      })\n  )\n}\n\nfunction toMutationPatch(patch: FormPatch): MutationPatch {\n  const matchPath = arrayToJSONMatchPath(patch.path || [])\n  if (patch.type === 'insert') {\n    const {position, items} = patch\n    return {\n      insert: {\n        [position]: matchPath,\n        items: items,\n      },\n    }\n  }\n\n  if (patch.type === 'unset') {\n    return {\n      unset: [matchPath],\n    }\n  }\n\n  if (!patch.type) {\n    throw new Error(`Missing patch type in patch ${JSON.stringify(patch)}`)\n  }\n  if (matchPath) {\n    return {\n      [patch.type]: {\n        [matchPath]: patch.value,\n      },\n    }\n  }\n  return {\n    [patch.type]: patch.value,\n  }\n}\n","import {isIndexSegment, isKeySegment, isIndexTuple, Path, KeyedSegment} from '@sanity/types'\nimport {UserColorManager, UserColor} from '../../../user-color'\nimport {stringToPath, pathToString} from '../../paths/helpers'\nimport {\n  Annotation,\n  Diff,\n  ItemDiff,\n  ArrayDiff,\n  ObjectDiff,\n  StringDiff,\n  StringDiffSegment,\n} from '../../types'\n\nexport function getAnnotationColor(\n  colorManager: UserColorManager,\n  annotation?: Annotation | null\n): UserColor {\n  return colorManager.get(annotation?.author || null)\n}\n\nexport function getAnnotationAtPath(diff: Diff, diffPath: string | Path): Annotation | undefined {\n  const path: Path = Array.isArray(diffPath) ? diffPath : stringToPath(diffPath)\n\n  return getAnnotationAt(diff, path)\n}\n\nexport function getDiffAtPath(diff: Diff, diffPath: string | Path): Diff | undefined {\n  const path: Path = Array.isArray(diffPath) ? diffPath : stringToPath(diffPath)\n  return getDiffAt(diff, path)\n}\n\nfunction getAnnotationAt(diff: Diff, path: Path): Annotation | undefined {\n  const diffAt = getDiffAt(diff, path)\n  if (!diffAt) {\n    return undefined\n  }\n\n  if (diffAt.action === 'unchanged') {\n    return undefined\n  }\n\n  return diffAt.annotation || undefined\n}\n\n// eslint-disable-next-line complexity\nfunction getDiffAt(diff: Diff, path: Path, parentPath: Path = []): Diff | undefined {\n  if (path.length === 0) {\n    return diff\n  }\n\n  const segment = path[0]\n  const tail = path.slice(1)\n\n  if (isIndexTuple(segment)) {\n    throw new Error('Index tuples are not supported in diff paths')\n  }\n\n  if (isIndexSegment(segment) || isKeySegment(segment)) {\n    const location = isIndexSegment(segment) ? `at index ${segment}` : `with key ${segment._key}`\n    if (diff.type !== 'array') {\n      warn(`Failed to get item ${location} at path ${pathToString(parentPath)} (not an array)`)\n      return undefined\n    }\n\n    const itemDiff = diff.items.find(\n      isIndexSegment(segment)\n        ? (item) => item.toIndex === segment\n        : (item) => itemMatchesKey(item, segment)\n    )\n\n    if (!itemDiff) {\n      warn(`Failed to get item ${location} at path ${pathToString(parentPath)} (item missing)`)\n      return undefined\n    }\n\n    return getDiffAt(itemDiff.diff, tail, parentPath.concat(segment))\n  }\n\n  if (diff.type !== 'object') {\n    warn(`Failed to get property ${segment} at path ${pathToString(parentPath)} (not an object)`)\n    return undefined\n  }\n\n  const fieldDiff = diff.fields[segment]\n  if (typeof fieldDiff === 'undefined') {\n    warn(\n      `Failed to get property ${segment} at path ${pathToString(parentPath)} (field did not exist)`\n    )\n    return undefined\n  }\n\n  return getDiffAt(fieldDiff, tail, parentPath.concat(segment))\n}\n\n/* eslint-disable no-console, @typescript-eslint/no-unused-vars */\nfunction warn(msg: string) {\n  //console.warn(msg)\n}\n/* eslint-enable no-console, @typescript-eslint/no-unused-vars */\n\nfunction itemMatchesKey(item: ItemDiff, key: KeyedSegment) {\n  const itemDiff = item.diff\n  return itemDiff.type !== 'object' || !itemDiff.toValue ? false : itemDiff.toValue._key === key\n}\n\nexport type DiffVisitor = (diff: Diff | StringDiffSegment, path: Path) => boolean\n\n/**\n * Visit all diffs in tree, until visitor returns false\n *\n * @param diff Diff to visit\n * @param visitor Visitor function, return false to stop from going deeper\n */\nexport function visitDiff(\n  diff: Diff | StringDiffSegment,\n  visitor: DiffVisitor,\n  path: Path = []\n): void {\n  if (!visitor(diff, path)) {\n    return\n  }\n\n  if (diff.type === 'array') {\n    visitArrayDiff(diff, visitor, path)\n    return\n  }\n\n  if (diff.type === 'object') {\n    visitObjectDiff(diff, visitor, path)\n    return\n  }\n\n  if (diff.type === 'string') {\n    visitStringDiff(diff, visitor, path)\n  }\n}\n\nfunction visitArrayDiff(diff: ArrayDiff, visitor: DiffVisitor, path: Path) {\n  if (diff.action === 'unchanged') {\n    return\n  }\n\n  diff.items.forEach((itemDiff) => {\n    const _key = itemDiff.diff.type === 'object' && (itemDiff.diff.toValue?._key as string)\n    const segment = _key ? {_key} : getItemDiffIndex(itemDiff)\n    visitDiff(itemDiff.diff, visitor, path.concat(segment))\n  })\n}\n\nfunction visitObjectDiff(diff: ObjectDiff, visitor: DiffVisitor, path: Path) {\n  if (diff.action === 'unchanged') {\n    return\n  }\n\n  Object.keys(diff.fields).forEach((fieldName) => {\n    const fieldDiff = diff.fields[fieldName]\n    visitDiff(fieldDiff, visitor, path.concat(fieldName))\n  })\n}\n\nfunction visitStringDiff(diff: StringDiff, visitor: DiffVisitor, path: Path) {\n  if (diff.action === 'unchanged') {\n    return\n  }\n\n  diff.segments.forEach((segment) => {\n    visitDiff(segment, visitor, path)\n  })\n}\n\nfunction getItemDiffIndex(itemDiff: ItemDiff): number {\n  return typeof itemDiff.toIndex === 'undefined' ? itemDiff.fromIndex || 0 : itemDiff.toIndex\n}\n","import {Path} from '@sanity/types'\nimport {useMemo} from 'react'\nimport {UserColor, useUserColorManager} from '../../../user-color'\nimport {Annotation, Diff} from '../../types'\nimport {getAnnotationColor, getAnnotationAtPath} from './helpers'\n\nexport function useAnnotationColor(annotation?: Annotation | null): UserColor {\n  const userColorManager = useUserColorManager()\n\n  return getAnnotationColor(userColorManager, annotation)\n}\n\nexport function useDiffAnnotationColor(diff: Diff, path: string | Path = []): UserColor {\n  const userColorManager = useUserColorManager()\n  const annotation = useMemo(() => getAnnotationAtPath(diff, path), [diff, path])\n\n  return useMemo(\n    () => getAnnotationColor(userColorManager, annotation),\n    [annotation, userColorManager]\n  )\n}\n","import {ConditionalProperty, ConditionalPropertyCallbackContext, CurrentUser} from '@sanity/types'\nimport {omit} from 'lodash'\nimport {useMemo, useRef} from 'react'\nimport {isRecord} from '../util/isRecord'\n\nexport function isThenable(value: unknown): value is Promise<unknown> {\n  return isRecord(value) && typeof value?.then === 'function'\n}\n\nexport function omitDeprecatedRole(user: CurrentUser): Omit<CurrentUser, 'role'> {\n  return omit(user, 'role')\n}\n\nexport function useCheckCondition(\n  checkProperty: ConditionalProperty,\n  checkPropertyName: string,\n  context: ConditionalPropertyCallbackContext\n): boolean {\n  const {currentUser, document, parent, value} = context\n\n  const didWarn = useRef(false)\n\n  return useMemo(() => {\n    let isTrueIsh = false\n\n    if (typeof checkProperty === 'boolean' || checkProperty === undefined) {\n      return checkProperty || false\n    }\n\n    try {\n      isTrueIsh = checkProperty({\n        document,\n        parent,\n        value,\n        currentUser,\n      })\n    } catch (err) {\n      console.error(\n        `An error occurred while running the callback from \\`${checkPropertyName}\\`: ${err.message}`\n      )\n      return false\n    }\n\n    if (isThenable(isTrueIsh) && !didWarn.current) {\n      console.warn(\n        `The \\`${checkPropertyName}\\` option is either a promise or a promise returning function. Async callbacks for \\`${checkPropertyName}\\` option is not currently supported.`\n      )\n      return false\n    }\n\n    if (typeof isTrueIsh === 'undefined') {\n      console.warn(\n        `The \\`${checkPropertyName}\\` option is or returned \\`undefined\\`. \\`${checkPropertyName}\\` should return a boolean.`\n      )\n    }\n\n    return isTrueIsh\n  }, [checkProperty, document, parent, value, currentUser, checkPropertyName])\n}\n","import {SanityDocument, ConditionalProperty} from '@sanity/types'\nimport {useCurrentUser} from '../datastores'\nimport {useUnique} from '../util/useUnique'\nimport {useCheckCondition} from './utils'\n\n/**\n * @internal Not yet a stable API\n */\nexport interface ConditionalPropertyProps {\n  parent?: unknown\n  value: unknown\n  document?: SanityDocument\n  checkProperty: ConditionalProperty\n  checkPropertyKey: string\n}\n\n/**\n * Resolve a callback function to a boolean using the passed arguments\n *\n * @internal Not yet a stable API\n */\nconst useConditionalProperty = (props: ConditionalPropertyProps): boolean => {\n  const {checkProperty = false, checkPropertyKey, document, parent, value: valueProp} = props\n  const value = useUnique(valueProp)\n  const currentUser = useCurrentUser()\n\n  const isPropertyTruthy = useCheckCondition(checkProperty, checkPropertyKey, {\n    currentUser,\n    document,\n    parent,\n    value,\n  })\n\n  return isPropertyTruthy\n}\n\nexport {useConditionalProperty as unstable_useConditionalProperty}\n","import {Path} from '@sanity/types'\nimport {createContext} from 'react'\n\nexport const DiffContext = createContext<{path: Path}>({path: []})\n","import {SchemaType, ObjectSchemaType} from '@sanity/types'\n\nexport interface FieldValueError {\n  message: string\n  value: unknown\n}\n\nexport function getValueError(value: unknown, schemaType: SchemaType): FieldValueError | undefined {\n  const {jsonType} = schemaType\n  const valueType = Array.isArray(value) ? 'array' : typeof value\n\n  if (value === null || valueType === 'undefined') {\n    return undefined\n  }\n\n  if (valueType !== jsonType) {\n    return {message: `Value is ${valueType}, expected ${jsonType}`, value}\n  }\n\n  if (isObjectType(schemaType) && isObjectValue(value)) {\n    for (const field of schemaType.fields) {\n      const fieldError = getValueError(value[field.name], field.type as SchemaType)\n      if (fieldError) {\n        return fieldError\n      }\n    }\n  }\n\n  return undefined\n}\n\nfunction isObjectType(schemaType: SchemaType): schemaType is ObjectSchemaType {\n  return schemaType.jsonType === 'object'\n}\n\nfunction isObjectValue(value: unknown): value is Record<string, unknown> {\n  return value !== null && !Array.isArray(value) && typeof value === 'object'\n}\n","import {ArraySchemaType, isTypedObject, SchemaType} from '@sanity/types'\nimport {Diff} from '../types'\n\nexport function resolveTypeName(value: unknown): string {\n  return isTypedObject(value) ? value._type : resolveJSType(value)\n}\n\nexport function getArrayDiffItemType(\n  diff: Diff,\n  schemaType: ArraySchemaType\n): {fromType?: SchemaType; toType?: SchemaType} {\n  if (diff.action === 'added') {\n    return {\n      toType: resolveArrayMemberType(schemaType, diff.toValue),\n    }\n  }\n\n  if (diff.action === 'changed') {\n    return {\n      fromType: resolveArrayMemberType(schemaType, diff.fromValue),\n      toType: resolveArrayMemberType(schemaType, diff.toValue),\n    }\n  }\n\n  if (diff.action === 'removed') {\n    return {\n      fromType: resolveArrayMemberType(schemaType, diff.fromValue),\n    }\n  }\n\n  // unchanged\n  return {\n    toType: resolveArrayMemberType(schemaType, diff.toValue),\n  }\n}\n\nfunction resolveArrayMemberType(\n  schemaType: ArraySchemaType,\n  value: unknown\n): SchemaType | undefined {\n  const typeName = resolveTypeName(value)\n  const declared = schemaType.of.find((candidate) => candidate.name === typeName)\n  if (declared) {\n    return declared as any\n  }\n\n  return (schemaType.of.length === 1 ? schemaType.of[0] : undefined) as any\n}\n\nfunction resolveJSType(val: unknown) {\n  if (Array.isArray(val)) {\n    return 'array'\n  }\n\n  if (val === null) {\n    return 'null'\n  }\n\n  return typeof val\n}\n","export const ANNOTATION_SYMBOLS = [\n  // [startTag, endTag]\n  ['\\uF050', '\\uF051'],\n  ['\\uF052', '\\uF053'],\n  ['\\uF054', '\\uF055'],\n  ['\\uF056', '\\uF057'],\n  ['\\uF058', '\\uF059'],\n  ['\\uF05A', '\\uF05B'],\n  ['\\uF05C', '\\uF05D'],\n  ['\\uF05F', '\\uF060'],\n  ['\\uF061', '\\uF062'],\n  ['\\uF063', '\\uF064'],\n  ['\\uF065', '\\uF066'],\n  ['\\uF067', '\\uF068'],\n  ['\\uF069', '\\uF06A'],\n  ['\\uF06B', '\\uF06C'],\n  ['\\uF06E', '\\uF06F'],\n  ['\\uF070', '\\uF071'],\n  ['\\uF072', '\\uF073'],\n  ['\\uF074', '\\uF075'],\n  ['\\uF076', '\\uF077'],\n  ['\\uF078', '\\uF079'],\n  ['\\uF07A', '\\uF07B'],\n  ['\\uF07C', '\\uF07D'],\n  ['\\uF07E', '\\uF07F'],\n  ['\\uF080', '\\uF081'],\n  ['\\uF082', '\\uF083'],\n  ['\\uF084', '\\uF085'],\n  ['\\uF086', '\\uF087'],\n  ['\\uF088', '\\uF089'],\n  ['\\uF08A', '\\uF08B'],\n  ['\\uF08C', '\\uF08D'],\n  ['\\uF08E', '\\uF08F'],\n]\n\nexport const CHILD_SYMBOL = '\\uF0D0'\n\nexport const DECORATOR_SYMBOLS = [\n  // [startTag, endTag]\n  ['\\uF000', '\\uF001'],\n  ['\\uF002', '\\uF003'],\n  ['\\uF004', '\\uF005'],\n  ['\\uF006', '\\uF007'],\n  ['\\uF008', '\\uF009'],\n  ['\\uF00A', '\\uF00B'],\n  ['\\uF00C', '\\uF00D'],\n  ['\\uF00F', '\\uF010'],\n  ['\\uF011', '\\uF012'],\n  ['\\uF013', '\\uF014'],\n  ['\\uF015', '\\uF016'],\n  ['\\uF017', '\\uF018'],\n  ['\\uF019', '\\uF01A'],\n  ['\\uF01B', '\\uF01C'],\n  ['\\uF01E', '\\uF01F'],\n  ['\\uF020', '\\uF021'],\n]\n\nexport const EMPTY_BLOCK_SYMBOL = '\\u21B2'\n\nexport const INLINE_SYMBOLS = [\n  '\\uF090',\n  '\\uF091',\n  '\\uF092',\n  '\\uF093',\n  '\\uF094',\n  '\\uF095',\n  '\\uF096',\n  '\\uF097',\n  '\\uF098',\n  '\\uF099',\n  '\\uF09A',\n  '\\uF09B',\n  '\\uF09C',\n  '\\uF09D',\n  '\\uF09E',\n  '\\uF09F',\n  '\\uF0A0',\n  '\\uF0A1',\n  '\\uF0A2',\n  '\\uF0A3',\n  '\\uF0A4',\n  '\\uF0A5',\n  '\\uF0A6',\n  '\\uF0A7',\n  '\\uF0A8',\n  '\\uF0A9',\n  '\\uF0AA',\n  '\\uF0AB',\n  '\\uF0AC',\n  '\\uF0AD',\n  '\\uF0AE',\n  '\\uF0AF',\n  '\\uF0B0',\n  '\\uF0B1',\n  '\\uF0B2',\n  '\\uF0B3',\n  '\\uF0B4',\n  '\\uF0B5',\n  '\\uF0B6',\n  '\\uF0B7',\n  '\\uF0B8',\n  '\\uF0B9',\n  '\\uF0BA',\n  '\\uF0BB',\n  '\\uF0BC',\n  '\\uF0BD',\n  '\\uF0BE',\n  '\\uF0BF',\n]\n\nexport const TRAILING_SPACE_SYMBOL = '\\u205F'\n\nexport const SEGMENT_START_SYMBOL = '\\u2060'\n","import {flatten, isEqual, orderBy} from 'lodash'\nimport {ArraySchemaType, Block, ObjectField, ObjectSchemaType, SchemaType} from '@sanity/types'\nimport {\n  diff_match_patch as DiffMatchPatch,\n  DIFF_DELETE,\n  DIFF_EQUAL,\n  DIFF_INSERT,\n} from 'diff-match-patch'\nimport {\n  ArrayDiff,\n  DiffComponent,\n  DiffComponentOptions,\n  ObjectDiff,\n  StringDiffSegment,\n} from '../../../types'\nimport * as TextSymbols from './symbols'\n\nimport {\n  InlineSymbolMap,\n  MarkSymbolMap,\n  PortableTextBlock,\n  PortableTextDiff,\n  PortableTextChild,\n  SpanTypeSchema,\n} from './types'\n\nconst dmp = new DiffMatchPatch()\n\nexport const UNKNOWN_TYPE_NAME = '_UNKOWN_TYPE_'\n\nexport function hasPTMemberType(schemaType: ArraySchemaType): boolean {\n  return schemaType.of.some(isPTSchemaType)\n}\n\nconst startMarkSymbols = TextSymbols.DECORATOR_SYMBOLS.map((set) => set[0]).concat(\n  TextSymbols.ANNOTATION_SYMBOLS.map((set) => set[0])\n)\nconst endMarkSymbols = TextSymbols.DECORATOR_SYMBOLS.map((set) => set[1]).concat(\n  TextSymbols.ANNOTATION_SYMBOLS.map((set) => set[1])\n)\nconst allSymbols = startMarkSymbols\n  .concat(endMarkSymbols)\n  .concat(TextSymbols.INLINE_SYMBOLS)\n  .concat(TextSymbols.CHILD_SYMBOL)\n  .concat(TextSymbols.SEGMENT_START_SYMBOL)\nconst symbolRegex = new RegExp(`${allSymbols.join('|')}`, 'g')\nconst segmentRegex = new RegExp(`${allSymbols.join('|')}|\\n`, 'g')\n\ninterface BlockSchemaType extends ObjectSchemaType {\n  diffComponent: DiffComponent<ObjectDiff<Block>> | DiffComponentOptions<ObjectDiff<Block>>\n}\n\nexport function isPTSchemaType(schemaType: SchemaType): schemaType is BlockSchemaType {\n  return schemaType.jsonType === 'object' && schemaType.name === 'block'\n}\n\nexport function isHeader(node: PortableTextBlock): boolean {\n  return !!node.style && ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'].includes(node.style)\n}\n\nexport function findChildDiff(diff: ObjectDiff, child: PortableTextChild): ObjectDiff {\n  const childrenDiff = diff.fields.children as ArrayDiff\n  return childrenDiff.items\n    .filter(\n      (item: any) =>\n        item.diff.isChanged && (item.diff.toValue === child || item.diff.fromValue === child)\n    )\n    .map((item: any) => item.diff)\n    .map((childDiff: any) => childDiff as ObjectDiff)[0]\n}\n\nexport function getChildSchemaType(\n  fields: ObjectField<SchemaType>[],\n  child: PortableTextChild\n): ObjectSchemaType | undefined {\n  const childrenField = fields.find((f) => f.name === 'children')\n  const cSchemaType =\n    (childrenField &&\n      childrenField.type &&\n      childrenField.type.jsonType === 'array' &&\n      (childrenField.type.of.find((type) => type.name === child._type) as ObjectSchemaType)) ||\n    undefined\n  return cSchemaType\n}\n\nexport function getDecorators(spanSchemaType: SpanTypeSchema): {title: string; value: string}[] {\n  if (spanSchemaType.decorators) {\n    return orderBy(spanSchemaType.decorators, ['value'], ['asc'])\n  }\n  return []\n}\n\nexport function getAnnotations(spanSchemaType: SpanTypeSchema): ObjectSchemaType[] {\n  if (spanSchemaType.annotations) {\n    return orderBy(spanSchemaType.annotations, ['name'], ['asc'])\n  }\n  return []\n}\n\nexport function isDecorator(name: string, schemaType: SpanTypeSchema): boolean {\n  return getDecorators(schemaType).some((dec) => dec.value === name)\n}\n\nexport function blockToSymbolizedText(\n  diff: ObjectDiff,\n  block: PortableTextBlock | undefined,\n  decoratorMap: MarkSymbolMap,\n  annotationMap: MarkSymbolMap,\n  inlineMap: InlineSymbolMap\n): string {\n  if (!block) {\n    return ''\n  }\n  return block.children\n    .map((child) => {\n      let returned = child.text?.replace(symbolRegex, '') || '' // Make sure symbols aren't in the text already\n      if (child._type === 'span') {\n        // Attatch stringdiff segments\n        const spanDiff = findSpanDiffFromChild(diff, child)\n        const textDiff = spanDiff?.fields.text\n        if (\n          textDiff &&\n          textDiff.toValue === child.text &&\n          textDiff.type === 'string' &&\n          textDiff.action !== 'unchanged'\n        ) {\n          returned = textDiff.segments\n            .filter((seg: any) => seg.action !== 'removed')\n            .map((seg: any) => seg.text.replace(symbolRegex, ''))\n            .join(TextSymbols.SEGMENT_START_SYMBOL)\n        }\n        if (child.marks) {\n          child.marks.forEach((mark) => {\n            const _isDecorator = !!decoratorMap[mark]\n            if (_isDecorator) {\n              returned = `${decoratorMap[mark][0]}${returned}${decoratorMap[mark][1]}`\n            } else if (annotationMap[mark]) {\n              returned = `${annotationMap[mark][0]}${returned}${annotationMap[mark][1]}`\n            }\n          })\n        }\n      } else {\n        returned = inlineMap[child._key]\n      }\n      return `${TextSymbols.CHILD_SYMBOL}${returned}`\n    })\n    .join('')\n}\n\nexport function createPortableTextDiff(\n  diff: ObjectDiff,\n  schemaType: ObjectSchemaType\n): PortableTextDiff {\n  const displayValue =\n    diff.action === 'removed'\n      ? (diff.fromValue as PortableTextBlock)\n      : (diff.toValue as PortableTextBlock)\n  const _diff: PortableTextDiff = {\n    ...diff,\n    origin: diff,\n    displayValue,\n  }\n\n  if (displayValue) {\n    const annotationMap: MarkSymbolMap = {}\n    const decoratorMap: MarkSymbolMap = {}\n    const inlineMap: InlineSymbolMap = {}\n    const spanSchemaType = getChildSchemaType(schemaType.fields, {_key: 'bogus', _type: 'span'})\n    if (spanSchemaType) {\n      getDecorators(spanSchemaType).forEach((dec, index) => {\n        decoratorMap[dec.value] = TextSymbols.DECORATOR_SYMBOLS[index]\n      })\n    }\n    const allMarkDefs = getAllMarkDefs(_diff.origin)\n    allMarkDefs.forEach((markDef, index) => {\n      annotationMap[markDef._key] = TextSymbols.ANNOTATION_SYMBOLS[index]\n    })\n    const inlines = getInlineObjects(_diff.origin)\n    inlines.forEach((inline, index) => {\n      inlineMap[inline._key] = TextSymbols.INLINE_SYMBOLS[index]\n    })\n    const fromText = blockToSymbolizedText(\n      _diff.origin,\n      _diff.fromValue as PortableTextBlock,\n      decoratorMap,\n      annotationMap,\n      inlineMap\n    )\n    const toText = blockToSymbolizedText(\n      _diff.origin,\n      _diff.toValue as PortableTextBlock,\n      decoratorMap,\n      annotationMap,\n      inlineMap\n    )\n    const toPseudoValue = {\n      ...displayValue,\n      children: [\n        {\n          _type: 'span',\n          _key: 'pseudoSpanKey',\n          text: toText,\n          marks: [],\n        },\n      ],\n    }\n    const fromPseudoValue = {\n      displayValue,\n      children: [\n        {\n          _type: 'span',\n          _key: 'pseudoSpanKey',\n          text: fromText,\n          marks: [],\n        },\n      ],\n    }\n    const pseudoDiff = {\n      origin: diff,\n      action: 'changed',\n      type: 'object',\n      displayValue: toPseudoValue,\n      fromValue: fromPseudoValue,\n      toValue: toPseudoValue,\n      isChanged: true,\n      fields: {\n        children: {\n          action: 'changed',\n          type: 'array',\n          isChanged: true,\n          items: [\n            {\n              diff: {\n                action: 'changed',\n                type: 'object',\n                isChanged: true,\n                fields: {\n                  text: {\n                    type: 'string',\n                    action: 'changed',\n                    isChanged: true,\n                    fromValue: fromText,\n                    toValue: toText,\n                    segments: buildSegments(fromText, toText).map((seg) => ({\n                      ...seg,\n                      ...(_diff.action !== 'unchanged' && _diff.annotation\n                        ? {annotation: _diff.annotation} // Fallback if we can't find a spesific original diff\n                        : {}),\n                    })),\n                  },\n                },\n                fromValue: fromPseudoValue.children[0],\n                toValue: toPseudoValue.children[0],\n              },\n              annotation: null,\n              fromIndex: 0,\n              toIndex: 0,\n              hasMoved: false,\n            },\n          ],\n          fromValue: fromPseudoValue.children,\n          toValue: toPseudoValue.children,\n        },\n      },\n    }\n    return pseudoDiff as PortableTextDiff\n  }\n  throw new Error('Can not display this diff')\n}\n\nfunction buildSegments(fromInput: string, toInput: string): StringDiffSegment[] {\n  const segments: StringDiffSegment[] = []\n  const dmpDiffs = dmp.diff_main(fromInput, toInput)\n  dmp.diff_cleanupEfficiency(dmpDiffs)\n\n  let fromIdx = 0\n  let toIdx = 0\n  for (const [op, text] of dmpDiffs) {\n    switch (op) {\n      case DIFF_EQUAL:\n        segments.push({\n          type: 'stringSegment',\n          action: 'unchanged',\n          text,\n        })\n        fromIdx += text.length\n        toIdx += text.length\n        break\n      case DIFF_DELETE:\n        segments.push({\n          type: 'stringSegment',\n          action: 'removed',\n          text: fromInput.substring(fromIdx, fromIdx + text.length),\n          annotation: null,\n        })\n        fromIdx += text.length\n        break\n      case DIFF_INSERT:\n        segments.push({\n          type: 'stringSegment',\n          action: 'added',\n          text: toInput.substring(toIdx, toIdx + text.length),\n          annotation: null,\n        })\n        toIdx += text.length\n        break\n      default:\n      // Do nothing\n    }\n  }\n  // Clean up so that marks / symbols are treated as an own segment\n  return flatten(\n    segments.map((seg) => {\n      const newSegments: StringDiffSegment[] = []\n      if (seg.text.length > 1) {\n        const markMatches = [...seg.text.matchAll(segmentRegex)]\n        let lastIndex = -1\n        markMatches.forEach((match) => {\n          const index = match.index || 0\n          if (index > lastIndex) {\n            newSegments.push({...seg, text: seg.text.substring(lastIndex + 1, index)})\n            newSegments.push({...seg, text: match[0]})\n          }\n          if (match === markMatches[markMatches.length - 1]) {\n            newSegments.push({...seg, text: seg.text.substring(index + 1)})\n          }\n          lastIndex = index\n        })\n        if (markMatches.length === 0) {\n          newSegments.push(seg)\n        }\n      } else {\n        newSegments.push(seg)\n      }\n      return newSegments\n    })\n  )\n}\n\nexport function getInlineObjects(diff: ObjectDiff): PortableTextChild[] {\n  const allChildren = [\n    ...(diff.toValue ? diff.toValue.children.filter((cld: any) => cld._type !== 'span') : []),\n  ]\n  const previousChildren = diff.fromValue\n    ? diff.fromValue.children.filter((cld: any) => cld._type !== 'span')\n    : []\n  previousChildren.forEach((oCld: any) => {\n    if (!allChildren.some((cld) => oCld._key === cld._key)) {\n      allChildren.push(oCld)\n    }\n  })\n  return orderBy(allChildren, ['_key'], ['asc']) as PortableTextChild[]\n}\n\nexport function findSpanDiffFromChild(\n  diff: ObjectDiff,\n  child: PortableTextChild\n): ObjectDiff | undefined {\n  // Find span in original diff which has a string segment similar to the one from the input\n  const candidate =\n    diff.fields.children &&\n    diff.fields.children.action !== 'unchanged' &&\n    diff.fields.children.type === 'array' &&\n    diff.fields.children.items.find(\n      (item: any) =>\n        item.diff &&\n        item.diff.type === 'object' &&\n        (item.diff.action === 'removed'\n          ? item.diff.fromValue && item.diff.fromValue._key === child._key\n          : (item.diff.toValue && item.diff.toValue._key) === child._key)\n    )\n  if (candidate) {\n    return candidate.diff as ObjectDiff\n  }\n  return undefined\n}\n\nexport function findAnnotationDiff(diff: ObjectDiff, markDefKey: string): ObjectDiff | undefined {\n  return (\n    ((diff.fields.markDefs &&\n      diff.fields.markDefs.isChanged &&\n      diff.fields.markDefs.type === 'array' &&\n      diff.fields.markDefs.items.find(\n        (item: any) =>\n          item.diff &&\n          item.diff.type === 'object' &&\n          ((item.diff.toValue && item.diff.toValue._key && item.diff.toValue._key === markDefKey) ||\n            (item.diff.fromValue &&\n              item.diff.fromValue._key &&\n              item.diff.fromValue._key === markDefKey))\n      )?.diff) as ObjectDiff) || undefined\n  )\n}\n\nexport function isEmptyObject(object: PortableTextChild): boolean {\n  return (object && isEqual(Object.keys(object), ['_key', '_type'])) || false\n}\n\nexport function escapeRegExp(text: string): string {\n  return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&')\n}\n\nexport function getAllMarkDefs(diff: ObjectDiff): PortableTextChild[] {\n  const allDefs: PortableTextChild[] = [\n    ...(diff.toValue && diff.toValue.markDefs ? diff.toValue.markDefs : []),\n  ]\n  const oldDefs: PortableTextChild[] =\n    diff.fromValue && diff.fromValue.markDefs ? diff.fromValue.markDefs : []\n  oldDefs.forEach((oDef) => {\n    if (!allDefs.some((def) => oDef._key === def._key)) {\n      allDefs.push(oDef)\n    }\n  })\n  return orderBy(allDefs, ['_key'], ['asc'])\n}\n","import {DiffComponentResolver} from './types'\n\n// import diffResolvers from 'all:part:@sanity/base/diff-resolver'\nexport const diffResolvers: DiffComponentResolver[] = []\n","import React from 'react'\nimport {UserColor} from '../../../../user-color'\nimport {FieldPreviewComponent} from '../../../preview'\n\ntype BooleanProps = {\n  checked: boolean | undefined | null\n  color?: UserColor\n}\n\nexport const BooleanPreview: FieldPreviewComponent<boolean> = function BooleanPreview({\n  value,\n  schemaType,\n  color,\n}) {\n  const Preview = schemaType.options?.layout === 'checkbox' ? Checkbox : Switch\n  return <Preview checked={value} color={color} />\n}\n\nexport function Checkbox({checked, color}: BooleanProps) {\n  return (\n    <svg\n      width=\"17\"\n      height=\"17\"\n      viewBox=\"0 0 17 17\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      fill={color?.background}\n    >\n      <rect x=\"0\" y=\"0\" width=\"17\" height=\"17\" rx=\"2.5\" />\n      {typeof checked === 'undefined' && (\n        <path d=\"M4.07996 8.5H12.92\" stroke={color?.text} strokeWidth=\"2\" />\n      )}\n      {checked && <path d=\"M3.5 8L7 11.5L13.5 5\" stroke={color?.text} strokeWidth=\"2\" />}\n    </svg>\n  )\n}\n\nexport function Switch({checked, color}: BooleanProps) {\n  return (\n    <svg width=\"38\" height=\"22\" viewBox=\"0 0 38 22\" xmlns=\"http://www.w3.org/2000/svg\">\n      <rect width=\"38\" height=\"22\" rx=\"11\" fill={checked ? color?.border : color?.background} />\n      {typeof checked === 'undefined' && (\n        <rect x=\"11\" y=\"3\" width=\"16\" height=\"16\" rx=\"8\" fill=\"white\" />\n      )}\n      {checked && <rect x=\"18\" y=\"3\" width=\"16\" height=\"16\" rx=\"8\" fill=\"white\" />}\n      {typeof checked === 'boolean' && !checked && (\n        <rect x=\"4\" y=\"3\" width=\"16\" height=\"16\" rx=\"8\" fill=\"white\" />\n      )}\n    </svg>\n  )\n}\n","import {Box, Flex, Text} from '@sanity/ui'\nimport React from 'react'\nimport {DiffTooltip, FromToArrow, useDiffAnnotationColor} from '../../../diff'\nimport {BooleanDiff, DiffComponent} from '../../../types'\nimport {Checkbox, Switch} from '../preview'\n\nexport const BooleanFieldDiff: DiffComponent<BooleanDiff> = ({diff, schemaType}) => {\n  const {fromValue, toValue} = diff\n  const {title, options} = schemaType\n  const Preview = options?.layout === 'checkbox' ? Checkbox : Switch\n  const userColor = useDiffAnnotationColor(diff, [])\n\n  const showToValue = toValue !== undefined && toValue !== null\n\n  return (\n    <Flex align=\"center\">\n      <DiffTooltip diff={diff}>\n        <Flex align=\"center\">\n          <Preview checked={fromValue} color={userColor} />\n\n          {showToValue && (\n            <>\n              <Box marginX={2}>\n                <FromToArrow />\n              </Box>\n              <Preview checked={toValue} color={userColor} />\n            </>\n          )}\n        </Flex>\n      </DiffTooltip>\n\n      {showToValue && title && (\n        <Box marginLeft={2}>\n          <Text size={1} weight=\"semibold\">\n            {title}\n          </Text>\n        </Box>\n      )}\n    </Flex>\n  )\n}\n","import {Path, SanityDocument, SchemaType} from '@sanity/types'\nimport {createContext} from 'react'\nimport {ObjectDiff} from '../../types'\n\nexport type DocumentChangeContextInstance = {\n  documentId: string\n  schemaType: SchemaType\n  rootDiff: ObjectDiff | null\n  isComparingCurrent: boolean\n  FieldWrapper: React.ComponentType<{path: Path; children: React.ReactNode; hasHover: boolean}>\n  value: Partial<SanityDocument>\n}\n\nexport const DocumentChangeContext = createContext<DocumentChangeContextInstance | null>(null)\n","import {useContext} from 'react'\nimport {\n  DocumentChangeContext,\n  DocumentChangeContextInstance,\n} from '../contexts/DocumentChangeContext'\n\nexport function useDocumentChange(): DocumentChangeContextInstance {\n  const documentChange = useContext(DocumentChangeContext)\n\n  if (!documentChange) {\n    throw new Error('DocumentChange: missing context value')\n  }\n\n  return documentChange\n}\n","import {useEffect, useState} from 'react'\nimport {useClient} from '../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\n\nexport function useRefValue<T extends Record<string, any> = Record<string, any>>(\n  refId: string | undefined | null\n): T | undefined {\n  const [value, setValue] = useState<T | undefined>(undefined)\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  useEffect(() => {\n    if (!refId) {\n      return undefined\n    }\n\n    const subscription = client.observable.getDocument<T>(refId).subscribe(setValue)\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [client, refId])\n\n  // Always return undefined in the case of a falsey ref to prevent bug\n  // when going from an ID to an undefined state\n  return refId ? value : undefined\n}\n","export function getSizeDiff(prev: number | undefined, next: number | undefined): number {\n  if (!prev || !next) {\n    return 0\n  }\n\n  const increase = next - prev\n  const pct = Math.round((increase / prev) * 100)\n\n  return pct\n}\n","import {DocumentIcon} from '@sanity/icons'\nimport React, {useMemo} from 'react'\nimport {Box, Card, Flex, Text} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {DiffCard, DiffTooltip, FromTo, MetaInfo, ChangeList} from '../../../diff'\nimport {DiffComponent, ObjectDiff} from '../../../types'\nimport {useRefValue} from '../../../diff/hooks'\nimport {getSizeDiff} from './helpers'\nimport {File, FileAsset} from './types'\n\nconst SizeDiff = styled.div`\n  ${({theme}) => `\n    --size-diff-positive: ${theme.sanity.color.solid.positive.enabled.bg};\n    --size-diff-negative: ${theme.sanity.color.solid.critical.enabled.bg};\n  `}\n  &:not([hidden]) {\n    display: inline-block;\n  }\n\n  [data-number='positive'] {\n    color: var(--size-diff-positive);\n  }\n\n  [data-number='negative'] {\n    color: var(--size-diff-negative);\n  }\n`\n\nexport const FileFieldDiff: DiffComponent<ObjectDiff<File>> = ({diff, schemaType}) => {\n  const {fromValue, toValue, fields} = diff\n  const fromAsset = fromValue?.asset\n  const toAsset = toValue?.asset\n  const prev = useRefValue<FileAsset>(fromAsset?._ref)\n  const next = useRefValue<FileAsset>(toAsset?._ref)\n\n  const changedFields = Object.entries(fields)\n    .filter(([name, field]) => field.isChanged && name !== '_type')\n    .map(([name]) => name)\n\n  const didAssetChange = changedFields.includes('asset')\n\n  const nestedFields = schemaType.fields\n    .filter((field) => field.name !== 'asset' && changedFields.includes(field.name))\n    .map((field) => field.name)\n\n  // Sizes in MB TODO: improve. Apple uses 1000^2\n  const prevSize = prev?.size && prev.size / 1000 / 1000\n  const nextSize = next?.size && next.size / 1000 / 1000\n  const pctDiff = getSizeDiff(prevSize, nextSize)\n\n  const roundedPrevSize = prevSize ? prevSize.toFixed(2) : undefined\n  const roundedNextSize = nextSize ? nextSize.toFixed(2) : undefined\n\n  const cardStyles = useMemo(() => ({display: 'block', flex: 1}), [])\n\n  const from = prev && (\n    <DiffCard as=\"del\" diff={diff} path=\"asset._ref\" style={cardStyles}>\n      <MetaInfo title={prev.originalFilename || 'Untitled'} icon={DocumentIcon}>\n        <Text size={0} style={{color: 'inherit'}}>{`${roundedPrevSize}MB`}</Text>\n      </MetaInfo>\n    </DiffCard>\n  )\n\n  const to = next && (\n    <DiffCard as=\"ins\" diff={diff} path=\"asset._ref\" style={cardStyles}>\n      <MetaInfo title={next.originalFilename || 'Untitled'} icon={DocumentIcon}>\n        <Flex align=\"center\">\n          <Text size={0} style={{color: 'inherit'}}>{`${roundedNextSize}MB`}</Text>\n          {pctDiff !== 0 && (\n            <Card radius={2} padding={1} as={SizeDiff} marginLeft={2}>\n              <Text size={0} data-number={pctDiff > 0 ? 'positive' : 'negative'}>\n                {pctDiff > 0 && '+'}\n                {pctDiff}%\n              </Text>\n            </Card>\n          )}\n        </Flex>\n      </MetaInfo>\n    </DiffCard>\n  )\n\n  const FileAssetChange = (\n    <>\n      {/* Removed only */}\n      {from && !to && (\n        <DiffTooltip diff={diff} path=\"asset._ref\" description=\"Removed\">\n          {from}\n        </DiffTooltip>\n      )}\n\n      {/* Removed and added */}\n      {from && to && (\n        <DiffTooltip diff={diff} path=\"asset._ref\">\n          <FromTo from={from} layout=\"grid\" to={to} />\n        </DiffTooltip>\n      )}\n\n      {/* Added only */}\n      {!from && to && (\n        <DiffTooltip diff={diff} path=\"asset._ref\" description=\"Added\">\n          {to}\n        </DiffTooltip>\n      )}\n    </>\n  )\n\n  return (\n    <>\n      {didAssetChange && FileAssetChange}\n      {nestedFields.length > 0 && (\n        <Box marginTop={didAssetChange ? 4 : 3}>\n          <ChangeList diff={diff} schemaType={schemaType} fields={nestedFields} />\n        </Box>\n      )}\n    </>\n  )\n}\n","// @todo: use `polished` for this?\nexport function hexToRgba(hex: string, opacity: number): string {\n  const rgba = (/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex) || ([] as string[]))\n    .slice(1)\n    .map((num) => parseInt(num, 16))\n    .concat(opacity)\n  return `rgba(${rgba.join(', ')})`\n}\n\n// @todo: replace this\nexport function simpleHash(str: string): string {\n  let hash = 0\n\n  if (str.length == 0) {\n    return hash.toString()\n  }\n\n  for (let i = 0; i < str.length; i++) {\n    const char = str.charCodeAt(i)\n\n    // eslint-disable-next-line no-bitwise\n    hash = (hash << 5) - hash + char\n\n    // eslint-disable-next-line no-bitwise\n    hash &= hash // Convert to 32bit integer\n  }\n\n  return hash.toString()\n}\n\nexport function getDeviceDpr(): number {\n  const base = Math.ceil(window.devicePixelRatio || 1)\n  return Math.min(3, Math.max(1, base))\n}\n","import {Image, ImageCrop, ImageHotspot} from '@sanity/types'\nimport React from 'react'\nimport {DiffTooltip, useDiffAnnotationColor} from '../../../diff'\nimport {ObjectDiff} from '../../../types'\nimport {hexToRgba} from './helpers'\n\ninterface HotspotCropSVGProps {\n  crop?: ImageCrop\n  diff: ObjectDiff<Image>\n  hash: string\n  hotspot?: ImageHotspot\n  width?: number\n  height?: number\n}\n\nexport function HotspotCropSVG(\n  props: HotspotCropSVGProps & Omit<React.SVGProps<SVGElement>, 'ref' | 'width' | 'height'>\n) {\n  const {crop, diff, hash, hotspot, width = 100, height = 100, ...restProps} = props\n  const cropColor = useDiffAnnotationColor(diff, 'crop')\n  const hotspotColor = useDiffAnnotationColor(diff, 'hotspot')\n\n  return (\n    <svg\n      {...restProps}\n      fill=\"none\"\n      width={width}\n      height={height}\n      viewBox={`0 0 ${width} ${height}`}\n    >\n      <defs>\n        {crop && hotspot && (\n          <mask id={`mask-hotspot-${hash}`}>\n            <rect x={0} y={0} width={width} height={height} fill=\"#fff\" />\n            <HotspotSVG\n              hotspot={hotspot}\n              fill=\"#000\"\n              offset={1}\n              width={width}\n              height={height}\n              stroke=\"#000\"\n              strokeWidth={3}\n            />\n          </mask>\n        )}\n      </defs>\n\n      {crop && (\n        <DiffTooltip diff={diff} path=\"crop\" description=\"Crop changed\">\n          <g>\n            <CropSVG\n              crop={crop}\n              fill={hexToRgba(cropColor.border, 0.25)}\n              mask={hotspot ? `url(#mask-hotspot-${hash})` : undefined}\n              stroke={cropColor.border}\n              strokeWidth={1}\n              width={width}\n              height={height}\n            />\n          </g>\n        </DiffTooltip>\n      )}\n\n      {hotspot && (\n        <DiffTooltip diff={diff} path=\"hotspot\" description=\"Hotspot changed\">\n          <g>\n            <HotspotSVG\n              hotspot={hotspot}\n              fill={hexToRgba(hotspotColor.border, 0.25)}\n              stroke={hotspotColor.border}\n              strokeWidth={1}\n              width={width}\n              height={height}\n            />\n          </g>\n        </DiffTooltip>\n      )}\n    </svg>\n  )\n}\n\nfunction CropSVG({\n  crop,\n  width,\n  height,\n  ...restProps\n}: {crop: ImageCrop; width: number; height: number} & Omit<\n  React.SVGProps<SVGRectElement>,\n  'width' | 'height'\n>) {\n  const rectProps = {\n    x: crop.left * width,\n    y: crop.top * height,\n    width: (1 - crop.right - crop.left) * width,\n    height: (1 - crop.bottom - crop.top) * height,\n  }\n\n  return <rect {...restProps} {...rectProps} style={{vectorEffect: 'non-scaling-stroke'}} />\n}\n\nfunction HotspotSVG({\n  hotspot,\n  offset = 0,\n  width,\n  height,\n  ...restProps\n}: {hotspot: ImageHotspot; offset?: number; width: number; height: number} & Omit<\n  React.SVGProps<SVGEllipseElement>,\n  'width' | 'height'\n>) {\n  const ellipseProps = {\n    cx: hotspot.x * width,\n    cy: hotspot.y * height,\n    rx: (hotspot.width / 2) * width + offset,\n    ry: (hotspot.height / 2) * height + offset,\n  }\n\n  return <ellipse {...restProps} {...ellipseProps} style={{vectorEffect: 'non-scaling-stroke'}} />\n}\n","import React, {SyntheticEvent, useMemo} from 'react'\nimport {getImageDimensions, isDefaultCrop, isDefaultHotspot} from '@sanity/asset-utils'\nimport imageUrlBuilder from '@sanity/image-url'\nimport {ImageIcon} from '@sanity/icons'\nimport {Box, Card, Flex, Text} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {hues} from '@sanity/color'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../studioClient'\nimport {useClient} from '../../../../hooks'\nimport {MetaInfo} from '../../../diff'\nimport {useDocumentValues} from '../../../../datastores'\nimport {getDeviceDpr, simpleHash} from './helpers'\nimport {HotspotCropSVG} from './HotspotCropSVG'\nimport {ImagePreviewProps, MinimalAsset} from './types'\n\nconst ASSET_FIELDS = ['originalFilename']\n\n// To trigger error state, change `src` attribute to random string (\"foo\")\n// To trigger slow loading, use a throttling proxy (charles) or browser devtools\n\n// To trigger deleted state, set `id` to valid, non-existant image asset ID,\n// eg: 'image-1217bc35db5030739b7be571c79d3c401551911d-300x200-png'\n\nexport const NoImagePreview = () => (\n  <Card flex={1} tone=\"transparent\" padding={4} radius={2} height=\"stretch\">\n    <Flex align=\"center\" justify=\"center\" height=\"fill\">\n      <Text size={1} muted>\n        (no image)\n      </Text>\n    </Flex>\n  </Card>\n)\n\nconst ImageWrapper = styled.div`\n  height: 100%;\n  max-height: 190px;\n  position: relative;\n\n  /* Ideally the checkerboard component currently in the form builder should be made available and used here */\n  background-color: ${hues.gray[100].hex};\n  background-image: linear-gradient(45deg, ${hues.gray[50].hex} 25%, transparent 25%),\n    linear-gradient(-45deg, ${hues.gray[50].hex} 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, ${hues.gray[50].hex} 75%),\n    linear-gradient(-45deg, transparent 75%, ${hues.gray[50].hex} 75%);\n  background-size: 16px 16px;\n  background-position: 0 0, 0 8px, 8px -8px, -8px 0;\n\n  &::after {\n    content: '';\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    box-shadow: inset 0 0 0 1px var(--card-border-color);\n    pointer-events: none;\n  }\n\n  &[data-changed] {\n    opacity: 0.45;\n  }\n`\n\nconst Image = styled.img`\n  display: block;\n  flex: 1;\n  min-height: 0;\n  object-fit: contain;\n  width: 100%;\n  height: 100%;\n\n  &[data-action='removed'] {\n    opacity: 0.45;\n  }\n`\n\nconst HotspotDiff = styled.div`\n  svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n`\n\nexport function ImagePreview(props: ImagePreviewProps): React.ReactElement {\n  const {id, action, diff, hotspot, crop, is} = props\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const [imageError, setImageError] = React.useState<SyntheticEvent<HTMLImageElement, Event>>()\n  const {value: asset} = useDocumentValues<MinimalAsset>(id, ASSET_FIELDS)\n  const dimensions = getImageDimensions(id)\n  const imageBuilder = useMemo(() => imageUrlBuilder(client), [client])\n\n  // undefined = still loading, null = its gone\n  const assetIsDeleted = asset === null\n\n  const title = (asset && asset.originalFilename) || 'Untitled'\n  const imageSource = imageBuilder\n    .image(id)\n    .height(190) // Should match container max-height\n    .dpr(getDeviceDpr())\n    .fit('max')\n\n  const assetChanged = diff.fromValue?.asset?._ref !== diff.toValue?.asset?._ref\n\n  const metaAction = action === 'changed' ? undefined : action\n\n  return (\n    <Flex direction=\"column\" height=\"fill\" flex={1}>\n      <Box flex={1} padding={2} paddingBottom={0}>\n        <Flex\n          as={ImageWrapper}\n          direction=\"column\"\n          data-changed={is === 'from' && assetChanged ? '' : undefined}\n          data-error={imageError ? '' : undefined}\n        >\n          {!assetIsDeleted && !imageError && (\n            <Image\n              src={imageSource.toString() || ''}\n              alt={title}\n              data-action={metaAction}\n              onError={setImageError}\n              width={dimensions.width}\n              height={dimensions.height}\n            />\n          )}\n\n          {(assetIsDeleted || imageError) && (\n            <Box paddingY={5}>\n              <Text size={1} muted align=\"center\">\n                {assetIsDeleted ? 'Image is deleted' : 'Error loading image'}\n              </Text>\n            </Box>\n          )}\n\n          <HotspotDiff>\n            <HotspotCropSVG\n              crop={crop && !isDefaultCrop(crop) ? crop : undefined}\n              diff={diff}\n              hash={simpleHash(`${imageSource.toString() || ''}-${is}`)}\n              hotspot={hotspot && !isDefaultHotspot(hotspot) ? hotspot : undefined}\n              width={dimensions.width}\n              height={dimensions.height}\n            />\n          </HotspotDiff>\n        </Flex>\n      </Box>\n\n      <MetaInfo title={title} icon={ImageIcon} markRemoved={assetChanged && is === 'from'}>\n        {metaAction ? (\n          <div>{metaAction}</div>\n        ) : (\n          <div>\n            {dimensions.width} × {dimensions.height}\n          </div>\n        )}\n      </MetaInfo>\n    </Flex>\n  )\n}\n","import {Image} from '@sanity/types'\nimport React from 'react'\nimport {Box, Card, Text} from '@sanity/ui'\nimport {DiffCard, DiffTooltip, ChangeList, getAnnotationAtPath} from '../../../diff'\nimport {DiffComponent, ObjectDiff} from '../../../types'\nimport {FromTo} from '../../../diff/components'\nimport {ImagePreview, NoImagePreview} from './ImagePreview'\n\nconst IMAGE_META_FIELDS = ['crop', 'hotspot']\nconst BASE_IMAGE_FIELDS = ['asset', ...IMAGE_META_FIELDS]\n\nconst CARD_STYLES = {\n  flex: 1,\n}\n\nexport const ImageFieldDiff: DiffComponent<ObjectDiff<Image>> = ({diff, schemaType}) => {\n  const {fromValue, toValue, fields, isChanged} = diff\n  const fromRef = fromValue?.asset?._ref\n  const toRef = toValue?.asset?._ref\n  const assetAnnotation = getAnnotationAtPath(diff, ['asset', '_ref'])\n\n  // Get all the changed fields within this image field\n  const changedFields = Object.keys(fields).filter(\n    (name) => fields[name].isChanged && name !== '_type'\n  )\n\n  const nestedFields = schemaType.fields\n    .filter(\n      (field) => !BASE_IMAGE_FIELDS.includes(field.name) && changedFields.includes(field.name)\n    )\n    .map((field) => field.name)\n\n  let assetAction: 'changed' | 'added' | 'removed' = 'changed'\n  if (!fromRef && toRef) {\n    assetAction = 'added'\n  } else if (!toRef && fromRef) {\n    assetAction = 'removed'\n  }\n\n  const didAssetChange = changedFields.includes('asset')\n  const didCropChange = changedFields.includes('crop')\n  const didHotspotChange = changedFields.includes('hotspot')\n  const didMetaChange = didCropChange || didHotspotChange\n  const showImageDiff = didAssetChange || didMetaChange\n  const showMetaChange = didMetaChange && !didAssetChange\n\n  const from =\n    fromValue && fromRef ? (\n      <DiffCard annotation={assetAnnotation} style={CARD_STYLES}>\n        <ImagePreview\n          is=\"from\"\n          id={fromRef}\n          diff={diff}\n          action={assetAction}\n          hotspot={showMetaChange && didHotspotChange ? fromValue.hotspot : undefined}\n          crop={showMetaChange && didCropChange ? fromValue.crop : undefined}\n        />\n      </DiffCard>\n    ) : (\n      <NoImagePreview />\n    )\n\n  const to =\n    toValue && toRef ? (\n      <DiffCard annotation={assetAnnotation} style={CARD_STYLES}>\n        <ImagePreview\n          is=\"to\"\n          id={toRef}\n          diff={diff}\n          hotspot={showMetaChange && didHotspotChange ? toValue.hotspot : undefined}\n          crop={showMetaChange && didCropChange ? toValue.crop : undefined}\n        />\n      </DiffCard>\n    ) : (\n      <NoImagePreview />\n    )\n\n  if (!from && !to) {\n    return (\n      <Card padding={4} radius={2} tone=\"transparent\">\n        <Text muted size={1} align=\"center\">\n          Image not set\n        </Text>\n      </Card>\n    )\n  }\n\n  if (!isChanged) {\n    return toRef ? (\n      <DiffCard annotation={assetAnnotation} style={CARD_STYLES}>\n        <ImagePreview id={toRef} is=\"to\" diff={diff} />\n      </DiffCard>\n    ) : null\n  }\n\n  const imageDiff = <FromTo align=\"center\" from={from} layout=\"grid\" to={to} />\n\n  return (\n    <>\n      {showImageDiff &&\n        (didAssetChange ? (\n          <DiffTooltip\n            annotations={assetAnnotation ? [assetAnnotation] : []}\n            description={`${assetAction[0].toUpperCase()}${assetAction.slice(1)}`}\n          >\n            {imageDiff}\n          </DiffTooltip>\n        ) : (\n          imageDiff\n        ))}\n      {nestedFields.length > 0 && (\n        <Box marginTop={showImageDiff ? 4 : 3}>\n          <ChangeList diff={diff} schemaType={schemaType} fields={nestedFields} />\n        </Box>\n      )}\n    </>\n  )\n}\n","import {Box} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {FieldPreviewComponent} from '../../../preview'\n\nconst NumberWrapper = styled.div`\n  display: inline-block;\n  word-break: break-all;\n`\n\nexport const NumberPreview: FieldPreviewComponent<string> = (props) => {\n  const {value} = props\n\n  return (\n    <Box as={NumberWrapper} paddingX={2} paddingY={1}>\n      {value}\n    </Box>\n  )\n}\n","import React from 'react'\nimport {DiffFromTo} from '../../../diff'\nimport {DiffComponent, NumberDiff} from '../../../types'\nimport {NumberPreview} from '../preview/NumberPreview'\n\nexport const NumberFieldDiff: DiffComponent<NumberDiff> = ({diff, schemaType}) => {\n  return (\n    <DiffFromTo\n      diff={diff}\n      schemaType={schemaType}\n      previewComponent={NumberPreview}\n      layout=\"inline\"\n    />\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst Quote = styled.blockquote`\n  margin: 0;\n`\n\nexport default function Blockquote({children}: {children: React.ReactNode}): JSX.Element {\n  return (\n    <div>\n      <Quote>{children}</Quote>\n    </div>\n  )\n}\n","import {Heading} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\nconst headingSizes: Record<string, number | undefined> = {\n  h1: 2,\n  h2: 1,\n  h3: 0,\n  h4: 0,\n  h5: 0,\n  h6: 0,\n}\n\nconst StyledHeading = styled(Heading)`\n  &:not([hidden]) {\n    display: inline;\n    text-transform: none;\n    margin: 0;\n\n    &::before,\n    &::after {\n      content: unset;\n    }\n  }\n`\n\nexport default function Header({\n  style,\n  children,\n}: {\n  style: string\n  children: React.ReactNode\n}): JSX.Element {\n  return <StyledHeading size={headingSizes[style]}>{children}</StyledHeading>\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst StyledParagraph = styled.p`\n  text-transform: none;\n  white-space: wrap;\n  overflow-wrap: break-word;\n  margin: 0;\n`\n\nexport default function Paragraph({children}: {children: React.ReactNode}): JSX.Element {\n  return <StyledParagraph>{children}</StyledParagraph>\n}\n","import {Box, Card, Stack, Text} from '@sanity/ui'\nimport {Path} from '@sanity/types'\nimport React, {useCallback, useContext} from 'react'\nimport {ConnectorContext} from '../../../../../components/changeIndicators'\nimport {DiffContext, DiffTooltip, useDiffAnnotationColor} from '../../../../diff'\nimport {isHeader} from '../helpers'\nimport {PortableTextBlock, PortableTextDiff} from '../types'\nimport Blockquote from './Blockquote'\nimport Header from './Header'\nimport Paragraph from './Paragraph'\n\nconst EMPTY_PATH: Path = []\n\nexport default function Block(props: {\n  diff: PortableTextDiff\n  block: PortableTextBlock\n  children: JSX.Element\n}): JSX.Element {\n  const {diff, block, children} = props\n  const color = useDiffAnnotationColor(diff, EMPTY_PATH)\n  const {path: fullPath} = useContext(DiffContext)\n  const {onSetFocus} = useContext(ConnectorContext)\n  const isRemoved = diff.action === 'removed'\n  let returned = children\n\n  const handleClick = useCallback(\n    (event) => {\n      event.stopPropagation()\n\n      if (!isRemoved) {\n        onSetFocus(fullPath)\n      }\n    },\n    [fullPath, isRemoved, onSetFocus]\n  )\n\n  if (block.style === 'blockquote') {\n    returned = <Blockquote>{returned}</Blockquote>\n  } else if (block.style && isHeader(block)) {\n    returned = <Header style={block.style}>{returned}</Header>\n  } else {\n    returned = <Paragraph>{returned}</Paragraph>\n  }\n\n  let fromStyle: string | undefined\n  // If style was changed, indicate that\n  if (\n    diff.origin.action === 'changed' &&\n    diff.origin.fields.style &&\n    diff.origin.fields.style.action === 'changed' &&\n    diff.origin.fields.style.annotation\n  ) {\n    fromStyle = diff?.origin?.fromValue?.style\n\n    const style = color ? {background: color.background, color: color.text} : {}\n\n    returned = (\n      <Card\n        padding={3}\n        border\n        radius={2}\n        style={{borderStyle: 'dotted'}}\n        diff-block-action={diff.action}\n        data-block-note={`changed_from_style_${fromStyle || 'undefined'}`}\n      >\n        <Stack space={2}>\n          <DiffTooltip\n            annotations={[diff.origin.fields.style?.annotation]}\n            diff={diff.origin.fields.style}\n          >\n            <Text size={0}>Changed block style from '{fromStyle}'</Text>\n          </DiffTooltip>\n          <Box style={style}>{returned}</Box>\n        </Stack>\n      </Card>\n    )\n  }\n\n  return (\n    <div\n      onClick={handleClick}\n      diff-block-action={diff.action}\n      data-block-note={`changed_from_style_${fromStyle || 'undefined'}`}\n    >\n      {returned}\n    </div>\n  )\n}\n","import {Box, Text} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const InlineBox = styled(Box)`\n  &:not([hidden]) {\n    display: inline;\n    align-items: center;\n\n    &[data-changed] {\n      cursor: pointer;\n    }\n  }\n`\n\nexport const InlineText = styled(Text)`\n  &:not([hidden]) {\n    display: inline;\n    color: inherit;\n  }\n`\n\nexport const PreviewContainer = styled(Box)`\n  &:not([hidden]) {\n    display: inline-flex;\n    align-items: center;\n\n    ${InlineBox} [data-ui=\"Text\"] {\n      opacity: 0.5;\n    }\n  }\n`\n\nexport const PopoverContainer = styled(Box)`\n  min-width: 160px;\n  max-height: 40vh;\n  overflow-y: auto;\n`\n","import {ChevronDownIcon} from '@sanity/icons'\nimport {useClickOutside, Label, Popover, Flex} from '@sanity/ui'\nimport {toString} from '@sanity/util/paths'\nimport {isKeySegment, ObjectSchemaType, Path} from '@sanity/types'\nimport React, {useCallback, useContext, useEffect, useMemo, useState} from 'react'\nimport styled from 'styled-components'\nimport {ConnectorContext, useReportedValues} from '../../../../../components/changeIndicators'\nimport {ChangeList, DiffContext, DiffTooltip, useDiffAnnotationColor} from '../../../../diff'\nimport {ObjectDiff} from '../../../../types'\nimport {PortableTextChild} from '../types'\nimport {isEmptyObject} from '../helpers'\nimport {InlineBox, InlineText, PopoverContainer, PreviewContainer} from './styledComponents'\n\ninterface AnnotationProps {\n  diff?: ObjectDiff\n  object: PortableTextChild\n  schemaType?: ObjectSchemaType\n  path: Path\n  children: React.ReactNode\n}\n\nconst AnnotationWrapper = styled.div`\n  text-decoration: none;\n  display: inline;\n  position: relative;\n  border: 0;\n  padding: 0;\n  border-bottom: 2px dotted currentColor;\n  box-shadow: inset 0 0 0 1px var(--card-border-color);\n  white-space: nowrap;\n  align-items: center;\n  background-color: color(var(--card-fg-color) a(10%));\n\n  &[data-changed] {\n    cursor: pointer;\n  }\n\n  &[data-removed] {\n    text-decoration: line-through;\n  }\n\n  &:hover ${PreviewContainer} {\n    opacity: 1;\n  }\n`\n\nexport function Annotation({\n  children,\n  diff,\n  object,\n  schemaType,\n  path,\n  ...restProps\n}: AnnotationProps) {\n  if (!schemaType) {\n    return <AnnotationWrapper {...restProps}>Unknown schema type</AnnotationWrapper>\n  }\n  if (diff && diff.action !== 'unchanged') {\n    return (\n      <AnnnotationWithDiff\n        {...restProps}\n        diff={diff}\n        object={object}\n        schemaType={schemaType}\n        path={path}\n      >\n        {children}\n      </AnnnotationWithDiff>\n    )\n  }\n  return <AnnotationWrapper>{children}</AnnotationWrapper>\n}\n\ninterface AnnnotationWithDiffProps {\n  diff: ObjectDiff\n  object: PortableTextChild\n  schemaType: ObjectSchemaType\n  path: Path\n  children?: React.ReactNode\n}\n\nfunction AnnnotationWithDiff({\n  diff,\n  children,\n  object,\n  schemaType,\n  path,\n  ...restProps\n}: AnnnotationWithDiffProps) {\n  const {onSetFocus} = useContext(ConnectorContext)\n  const {path: fullPath} = useContext(DiffContext)\n  const [popoverElement, setPopoverElement] = useState<HTMLDivElement | null>(null)\n  const color = useDiffAnnotationColor(diff, [])\n  const style = useMemo(\n    () => (color ? {background: color.background, color: color.text} : {}),\n    [color]\n  )\n  const isRemoved = diff.action === 'removed'\n  const [open, setOpen] = useState(false)\n  const emptyObject = object && isEmptyObject(object)\n  const markDefPath = useMemo(\n    () => [path[0]].concat(['markDefs', {_key: object._key}]),\n    [object._key, path]\n  )\n  const prefix = useMemo(\n    () =>\n      fullPath.slice(\n        0,\n        fullPath.findIndex((seg) => isKeySegment(seg) && seg._key === object._key)\n      ),\n    [fullPath, object._key]\n  )\n  const annotationPath = useMemo(() => prefix.concat(path), [path, prefix])\n  const myPath = useMemo(() => prefix.concat(markDefPath), [markDefPath, prefix])\n  const myValue = `field-${toString(myPath)}`\n  const values = useReportedValues()\n  const isEditing = useMemo(\n    () => values.filter(([p]) => p.startsWith(myValue)).length > 0,\n    [myValue, values]\n  )\n\n  useEffect(() => {\n    if (!open && isEditing) {\n      setOpen(true)\n      onSetFocus(myPath)\n    }\n  }, [isEditing, myPath, onSetFocus, open])\n\n  const handleOpenPopup = useCallback(\n    (event) => {\n      event.stopPropagation()\n      setOpen(true)\n      if (!isRemoved) {\n        event.preventDefault()\n        onSetFocus(annotationPath) // Go to span first\n        setTimeout(() => onSetFocus(myPath), 10) // Open edit object interface\n      }\n    },\n    [annotationPath, isRemoved, myPath, onSetFocus]\n  )\n\n  const handleClickOutside = useCallback(() => {\n    if (!isEditing) {\n      setOpen(false)\n    }\n  }, [isEditing])\n\n  useClickOutside(handleClickOutside, [popoverElement])\n\n  const annotation = (diff.action !== 'unchanged' && diff.annotation) || null\n  const annotations = useMemo(() => (annotation ? [annotation] : []), [annotation])\n\n  const popoverContent = (\n    <DiffContext.Provider value={{path: myPath}}>\n      <PopoverContainer padding={3}>\n        <div>\n          {emptyObject && (\n            <Label size={1} muted>\n              Empty {schemaType.title}\n            </Label>\n          )}\n          {!emptyObject && <ChangeList diff={diff} schemaType={schemaType} />}\n        </div>\n      </PopoverContainer>\n    </DiffContext.Provider>\n  )\n\n  return (\n    <AnnotationWrapper\n      {...restProps}\n      onClick={handleOpenPopup}\n      style={style}\n      data-changed=\"\"\n      data-removed={diff.action === 'removed' ? '' : undefined}\n    >\n      <Popover content={popoverContent} open={open} ref={setPopoverElement} portal>\n        <PreviewContainer paddingLeft={1}>\n          <DiffTooltip annotations={annotations} description={`${diff.action} annotation`}>\n            <InlineBox style={{display: 'inline-flex'}}>\n              <span>{children}</span>\n              <Flex align=\"center\" paddingX={1}>\n                <InlineText size={0}>\n                  <ChevronDownIcon />\n                </InlineText>\n              </Flex>\n            </InlineBox>\n          </DiffTooltip>\n        </PreviewContainer>\n      </Popover>\n    </AnnotationWrapper>\n  )\n}\n","import {Theme} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\nconst DecoratorWrapper = styled.span`\n  display: inline;\n  ${({theme, decoration}: {theme: Theme; decoration: string}) => {\n    switch (decoration) {\n      case 'strong':\n        return 'font-weight: bold;'\n      case 'em':\n        return 'font-style: italic;'\n      case 'underline':\n        return 'text-decoration: underline;'\n      case 'overline':\n        return 'text-decoration: overline;'\n      case 'strike-through':\n        return 'text-decoration: line-through;'\n      case 'code':\n        return `\n          font-family: ${theme.sanity.fonts.code.family};\n          background: ${theme.sanity.color.muted.default.enabled.bg};\n        `\n      default:\n        return ''\n    }\n  }}\n`\n\nexport default function Decorator({mark, children}: {mark: string; children: JSX.Element}) {\n  return <DecoratorWrapper decoration={mark}>{children}</DecoratorWrapper>\n}\n","import {ChevronDownIcon} from '@sanity/icons'\nimport {isKeySegment, ObjectSchemaType, Path} from '@sanity/types'\nimport {Card, Flex, Label, Popover, useClickOutside} from '@sanity/ui'\nimport {FOCUS_TERMINATOR, toString} from '@sanity/util/paths'\nimport React, {useCallback, useContext, useState, useEffect, useMemo} from 'react'\nimport styled from 'styled-components'\nimport {ConnectorContext, useReportedValues} from '../../../../../components/changeIndicators'\nimport {SanityPreview} from '../../../../../preview'\nimport {ChangeList, DiffContext, DiffTooltip, useDiffAnnotationColor} from '../../../../diff'\nimport {ObjectDiff} from '../../../../types'\nimport {PortableTextChild} from '../types'\nimport {isEmptyObject} from '../helpers'\nimport {InlineBox, InlineText, PopoverContainer, PreviewContainer} from './styledComponents'\n\ninterface InlineObjectProps {\n  diff?: ObjectDiff\n  object: PortableTextChild\n  path: Path\n  schemaType?: ObjectSchemaType\n}\n\nconst InlineObjectWrapper = styled(Card)`\n  &:not([hidden]) {\n    display: inline;\n    cursor: pointer;\n    white-space: nowrap;\n    align-items: center;\n\n    &[data-removed] {\n      text-decoration: line-through;\n    }\n\n    ${InlineBox} {\n      display: inline-flex;\n    }\n  }\n`\n\nexport function InlineObject({diff, object, schemaType, ...restProps}: InlineObjectProps) {\n  if (!schemaType) {\n    return (\n      <InlineObjectWrapper {...restProps} border radius={1}>\n        Unknown schema type: {object._type}\n      </InlineObjectWrapper>\n    )\n  }\n\n  if (diff) {\n    return (\n      <InlineObjectWithDiff {...restProps} diff={diff} object={object} schemaType={schemaType} />\n    )\n  }\n\n  return (\n    <InlineObjectWrapper>\n      <SanityPreview schemaType={schemaType} value={object as any} layout=\"inline\" />\n    </InlineObjectWrapper>\n  )\n}\n\ninterface InlineObjectWithDiffProps {\n  diff: ObjectDiff\n  object: PortableTextChild\n  path: Path\n  schemaType: ObjectSchemaType\n}\n\nfunction InlineObjectWithDiff({\n  diff,\n  object,\n  path,\n  schemaType,\n  ...restProps\n}: InlineObjectWithDiffProps) {\n  const {path: fullPath} = useContext(DiffContext)\n  const {onSetFocus} = useContext(ConnectorContext)\n  const color = useDiffAnnotationColor(diff, [])\n  const style = useMemo(\n    () => (color ? {background: color.background, color: color.text} : {}),\n    [color]\n  )\n  const [open, setOpen] = useState(false)\n  const emptyObject = object && isEmptyObject(object)\n  const isRemoved = diff.action === 'removed'\n  const prefix = fullPath.slice(\n    0,\n    fullPath.findIndex((seg) => isKeySegment(seg) && seg._key === object._key)\n  )\n  const myPath = prefix.concat(path)\n  const myValue = `field-${toString(myPath)}`\n  const values = useReportedValues()\n  const isEditing = values.filter(([p]) => p.startsWith(myValue)).length > 0\n\n  const focusPath = fullPath.slice(0, -1).concat(path).concat([FOCUS_TERMINATOR])\n\n  useEffect(() => {\n    if (isEditing) {\n      setOpen(true)\n      onSetFocus(focusPath)\n    }\n  }, [isEditing])\n\n  const handleOpenPopup = useCallback(\n    (event) => {\n      event.stopPropagation()\n      setOpen(true)\n      if (!isRemoved) {\n        onSetFocus(focusPath)\n        return\n      }\n      event.preventDefault()\n    },\n    [focusPath]\n  )\n\n  const handleClose = useCallback(() => {\n    setOpen(false)\n  }, [])\n\n  const popoverContent = (\n    <DiffContext.Provider value={{path: myPath}}>\n      <PopoverContent\n        diff={diff}\n        emptyObject={emptyObject}\n        onClose={handleClose}\n        schemaType={schemaType}\n      />\n    </DiffContext.Provider>\n  )\n\n  const annotation = (diff.action !== 'unchanged' && diff.annotation) || null\n  const annotations = annotation ? [annotation] : []\n\n  return (\n    <InlineObjectWrapper\n      {...restProps}\n      onClick={handleOpenPopup}\n      style={style}\n      data-removed={diff.action === 'removed' ? '' : undefined}\n      border\n      radius={2}\n    >\n      <Popover content={popoverContent} open={open} portal>\n        <PreviewContainer>\n          <DiffTooltip annotations={annotations} description={`${diff.action} inline object`}>\n            <InlineBox>\n              <SanityPreview schemaType={schemaType} value={object as any} layout=\"inline\" />\n              <Flex align=\"center\" paddingX={1}>\n                <InlineText size={0}>\n                  <ChevronDownIcon />\n                </InlineText>\n              </Flex>\n            </InlineBox>\n          </DiffTooltip>\n        </PreviewContainer>\n      </Popover>\n    </InlineObjectWrapper>\n  )\n}\n\nfunction PopoverContent({\n  diff,\n  emptyObject,\n  onClose,\n  schemaType,\n}: {\n  diff: ObjectDiff\n  emptyObject: boolean\n  onClose: () => void\n  schemaType: ObjectSchemaType\n}) {\n  const [popoverElement, setPopoverElement] = useState<HTMLDivElement | null>(null)\n  // const {isTopLayer} = useLayer()\n\n  const handleClickOutside = useCallback(() => {\n    // Popover doesn't close at all when using this condition\n    // if (!isTopLayer) return\n    onClose()\n  }, [onClose])\n\n  useClickOutside(handleClickOutside, [popoverElement])\n\n  return (\n    <PopoverContainer ref={setPopoverElement} padding={3}>\n      {emptyObject && (\n        <Label size={1} muted>\n          Empty {schemaType.title}\n        </Label>\n      )}\n      {!emptyObject && <ChangeList diff={diff} schemaType={schemaType} />}\n    </PopoverContainer>\n  )\n}\n","import {isKeySegment, Path} from '@sanity/types'\nimport React, {SyntheticEvent, useCallback, useMemo} from 'react'\nimport {startCase} from 'lodash'\nimport {ConnectorContext} from '../../../../../components/changeIndicators'\nimport {DiffCard, DiffContext} from '../../../../diff'\nimport {ObjectDiff, StringDiff, StringDiffSegment} from '../../../../types'\nimport {InlineBox} from './styledComponents'\n\ninterface TextProps {\n  diff?: StringDiff\n  childDiff?: ObjectDiff\n  children: JSX.Element\n  path: Path\n  segment: StringDiffSegment\n}\n\nexport function Text({\n  diff,\n  childDiff,\n  children,\n  path,\n  segment,\n  ...restProps\n}: TextProps & Omit<React.HTMLProps<HTMLSpanElement>, 'onClick'>) {\n  const diffWithFallback = diff || childDiff\n  const hasChanged =\n    diffWithFallback && diffWithFallback.action !== 'unchanged' && segment.action !== 'unchanged'\n  if (hasChanged) {\n    return (\n      <TextWithDiff {...restProps} childDiff={childDiff} diff={diff} segment={segment} path={path}>\n        {children}\n      </TextWithDiff>\n    )\n  }\n  return <InlineBox>{children}</InlineBox>\n}\n\nexport function TextWithDiff({diff, childDiff, children, path, segment, ...restProps}: TextProps) {\n  const {onSetFocus} = React.useContext(ConnectorContext)\n  const {path: fullPath} = React.useContext(DiffContext)\n  const spanSegment = useMemo(() => path.slice(-2, 1)[0], [path])\n  const isRemoved = diff && diff.action === 'removed'\n  const prefix = fullPath.slice(\n    0,\n    fullPath.findIndex(\n      (seg) => isKeySegment(seg) && isKeySegment(spanSegment) && seg._key === spanSegment._key\n    )\n  )\n  const focusPath = prefix.concat(path)\n\n  const handleClick = useCallback(\n    (event: SyntheticEvent) => {\n      event.stopPropagation()\n      if (!isRemoved) {\n        event.preventDefault()\n        onSetFocus(focusPath)\n      }\n    },\n    [focusPath, isRemoved, onSetFocus]\n  )\n  const realSeg = diff && diff.segments.find((rSeg: any) => rSeg.text === segment.text)\n\n  const diffWithFallback = realSeg || diff || childDiff\n  const annotation =\n    (diffWithFallback && diffWithFallback.action !== 'unchanged' && diffWithFallback.annotation) ||\n    null\n  const diffCard =\n    annotation && segment.action !== 'unchanged' ? (\n      <DiffCard\n        annotation={annotation}\n        as={segment.action === 'removed' ? 'del' : 'ins'}\n        tooltip={{description: `${startCase(segment.action)} text`}}\n      >\n        {children}\n      </DiffCard>\n    ) : null\n  return (\n    <InlineBox {...restProps} onClick={handleClick} data-changed=\"\">\n      <span>\n        <>{diffCard || children}</>\n      </span>\n    </InlineBox>\n  )\n}\n","import {ObjectSchemaType, SchemaType} from '@sanity/types'\nimport {startCase, uniq, xor} from 'lodash'\nimport React, {ReactElement, useCallback, useMemo} from 'react'\nimport {DiffCard} from '../../../../diff'\nimport {ArrayDiff, ObjectDiff, StringDiff, StringDiffSegment} from '../../../../types'\nimport {PortableTextBlock, PortableTextChild, PortableTextDiff, SpanTypeSchema} from '../types'\n\nimport * as TextSymbols from '../symbols'\n\nimport {\n  escapeRegExp,\n  getAllMarkDefs,\n  findChildDiff,\n  findAnnotationDiff,\n  findSpanDiffFromChild,\n  getChildSchemaType,\n  getDecorators,\n  getInlineObjects,\n  isDecorator,\n} from '../helpers'\n\nimport Block from './Block'\nimport {Annotation} from './Annotation'\nimport Decorator from './Decorator'\nimport {InlineObject} from './InlineObject'\nimport {Text} from './Text'\n\nconst decoratorSymbolsStart = TextSymbols.DECORATOR_SYMBOLS.map((set) => set[0])\nconst decoratorSymbolsEnd = TextSymbols.DECORATOR_SYMBOLS.map((set) => set[1])\nconst annotationSymbolsStart = TextSymbols.ANNOTATION_SYMBOLS.map((set) => set[0])\nconst annotationSymbolsEnd = TextSymbols.ANNOTATION_SYMBOLS.map((set) => set[1])\n\nconst allSymbolsStart = decoratorSymbolsStart.concat(annotationSymbolsStart)\nconst allSymbolsEnd = decoratorSymbolsEnd.concat(annotationSymbolsEnd)\n\nconst allDecoratorSymbols = decoratorSymbolsStart.concat(decoratorSymbolsEnd)\nconst markRegex = new RegExp(`${allDecoratorSymbols.concat(allSymbolsEnd).join('|')}`, 'g')\n\ntype Props = {\n  diff: PortableTextDiff\n  schemaType: ObjectSchemaType\n}\n\nexport default function PortableText(props: Props): JSX.Element {\n  const {diff, schemaType} = props\n  const block = (diff.origin.toValue || diff.origin.fromValue) as PortableTextBlock\n\n  const inlineObjects = useMemo(\n    () => (diff.origin.toValue ? getInlineObjects(diff.origin) : []),\n    [diff.origin]\n  )\n\n  const renderChild = useCallback(\n    (ptDiffChild: PortableTextChild) => {\n      const spanSchemaType = getChildSchemaType(schemaType.fields, ptDiffChild) as SpanTypeSchema\n      let decoratorTypes: {title: string; value: string}[] = []\n      if (spanSchemaType) {\n        decoratorTypes = getDecorators(spanSchemaType)\n        const childrenDiff = diff.fields.children as ArrayDiff\n        const segments =\n          (childrenDiff.items[0].diff &&\n            childrenDiff.items[0].diff.type === 'object' &&\n            childrenDiff.items[0].diff.fields.text.type === 'string' &&\n            childrenDiff.items[0].diff.fields.text.segments) ||\n          []\n        const returnedChildren: React.ReactNode[] = []\n        const annotationSegments: Record<string, React.ReactNode[]> = {}\n        // Special case for new empty PT-block (single span child with empty text)\n        if (\n          isEmptyTextChange(block, diff) &&\n          (diff.origin.action === 'added' || diff.origin.action === 'removed')\n        ) {\n          const textDiff = findChildDiff(diff.origin, block.children[0]) || diff.origin\n          if (textDiff && textDiff.action !== 'unchanged') {\n            return (\n              <DiffCard\n                annotation={textDiff.annotation}\n                as={textDiff.action === 'removed' ? 'del' : 'ins'}\n                key={`empty-block-${block._key}`}\n                tooltip={{\n                  description: `${startCase(textDiff.action)} empty text`,\n                }}\n              >\n                <span>{TextSymbols.EMPTY_BLOCK_SYMBOL}</span>\n              </DiffCard>\n            )\n          }\n        }\n        // Run through all the segments from the PortableTextDiff\n        let childToIndex = -1\n        let segIndex = -1\n        const activeAnnotations: {mark: string; object: PortableTextChild; symbols: string[]}[] = []\n        let endedAnnotation:\n          | {mark: string; object: PortableTextChild; symbols: string[]}\n          | undefined\n        const allMarkDefs = getAllMarkDefs(diff.origin)\n        segments.forEach((seg) => {\n          segIndex++\n          const isInline = TextSymbols.INLINE_SYMBOLS.includes(seg.text)\n          const isMarkStart = allSymbolsStart.includes(seg.text)\n          const isMarkEnd = allSymbolsEnd.includes(seg.text)\n          const isChildStart = seg.text === TextSymbols.CHILD_SYMBOL\n          const isRemoved = seg.action === 'removed'\n          if (isChildStart) {\n            if (!isRemoved) {\n              childToIndex++\n            }\n            // No output\n          } else if (isMarkStart || isMarkEnd) {\n            if (isMarkStart && annotationSymbolsStart.includes(seg.text)) {\n              const object = allMarkDefs[annotationSymbolsStart.indexOf(seg.text)]\n              if (object) {\n                activeAnnotations.push({\n                  mark: object._key,\n                  symbols: [\n                    seg.text,\n                    annotationSymbolsEnd[annotationSymbolsStart.indexOf(seg.text)],\n                  ],\n                  object,\n                })\n              }\n            }\n            if (isMarkEnd && annotationSymbolsEnd.includes(seg.text)) {\n              endedAnnotation = activeAnnotations.pop()\n            }\n            // No output\n          } else if (isInline) {\n            // Render inline object\n            const indexOfSymbol = TextSymbols.INLINE_SYMBOLS.findIndex((sym) => sym === seg.text)\n            const key = inlineObjects[indexOfSymbol]?._key\n            const originChild = inlineObjects[indexOfSymbol]\n            if (key) {\n              const objectSchemaType = getChildSchemaType(schemaType.fields, originChild)\n              const objectDiff = findChildDiff(diff.origin, originChild)\n              returnedChildren.push(\n                <InlineObject\n                  key={`inline-object-${originChild._key}`}\n                  object={originChild}\n                  path={[{_key: block._key}, 'children', {_key: originChild._key}]}\n                  diff={objectDiff}\n                  schemaType={objectSchemaType}\n                />\n              )\n            }\n          } else if (seg.text) {\n            // TODO: find a better way of getting a removed child\n            const getChildFromFromValue = () =>\n              diff.origin.fromValue?.children.find(\n                (cld: any) => cld.text && cld.text.match(escapeRegExp(seg.text))\n              ) as PortableTextChild\n            const child = block.children[childToIndex] || getChildFromFromValue()\n            const childDiff = child && findSpanDiffFromChild(diff.origin, child)\n            if (!child) {\n              throw new Error('Could not find child')\n            }\n            const textDiff = childDiff?.fields?.text\n              ? (childDiff?.fields?.text as StringDiff)\n              : undefined\n            const text = (\n              <Text\n                diff={textDiff}\n                key={`text-${child._key}-${segIndex}`}\n                path={[{_key: block._key}, 'children', {_key: child._key}]}\n                childDiff={childDiff}\n                segment={seg}\n              >\n                {renderTextSegment({\n                  diff,\n                  child,\n                  decoratorTypes,\n                  seg,\n                  segIndex,\n                  spanSchemaType,\n                })}\n              </Text>\n            )\n\n            // Render annotations text changes within the annotation child\n            if (activeAnnotations.length > 0) {\n              activeAnnotations.forEach((active) => {\n                annotationSegments[active.mark] = annotationSegments[active.mark] || []\n                annotationSegments[active.mark].push(text)\n              })\n            }\n            if (endedAnnotation) {\n              const key = `annotation-${endedAnnotation.object._key}`\n              const lastChild = returnedChildren[returnedChildren.length - 1] as ReactElement\n              if (lastChild && lastChild.key !== key) {\n                const annotationDiff = findAnnotationDiff(diff.origin, endedAnnotation.mark)\n                const objectSchemaType =\n                  endedAnnotation &&\n                  spanSchemaType.annotations &&\n                  spanSchemaType.annotations.find(\n                    (type) =>\n                      endedAnnotation &&\n                      endedAnnotation.object &&\n                      type.name === endedAnnotation.object._type\n                  )\n                returnedChildren.push(\n                  <Annotation\n                    object={endedAnnotation.object}\n                    diff={annotationDiff}\n                    path={[{_key: block._key}, 'children', {_key: child._key}]}\n                    schemaType={objectSchemaType}\n                    key={key}\n                  >\n                    <>{annotationSegments[endedAnnotation.mark]}</>\n                  </Annotation>\n                )\n              }\n              // delete annotationSegments[endedAnnotation.mark]\n              endedAnnotation = undefined\n            }\n            if (activeAnnotations.length === 0) {\n              returnedChildren.push(text)\n            }\n          } // end if seg.text\n        })\n        return React.createElement('div', {key: block._key}, ...returnedChildren)\n      }\n      throw new Error(\"'span' schemaType not found\")\n    },\n    [block, diff, inlineObjects, schemaType]\n  )\n\n  return (\n    <Block block={diff.displayValue} diff={diff}>\n      {<>{(diff.displayValue.children || []).map((child) => renderChild(child))}</>}\n    </Block>\n  )\n}\n\nfunction renderTextSegment({\n  diff,\n  child,\n  decoratorTypes,\n  seg,\n  segIndex,\n  spanSchemaType,\n}: {\n  diff: PortableTextDiff\n  child: PortableTextChild\n  decoratorTypes: {title: string; value: string}[]\n  seg: StringDiffSegment\n  segIndex: number\n  spanSchemaType: SpanTypeSchema\n}): JSX.Element {\n  // Newlines\n  if (seg.text === '\\n') {\n    return <br />\n  }\n  // Make sure we render trailing spaces correctly\n  let children = (\n    <span key={`text-${segIndex}`}>\n      {seg.text.replace(/ /g, TextSymbols.TRAILING_SPACE_SYMBOL)}\n    </span>\n  )\n  const spanDiff = child && findSpanDiffFromChild(diff.origin, child)\n  // Render decorator diff info\n  const activeMarks = child.marks || []\n  if (spanDiff) {\n    children = renderDecorators({\n      activeMarks,\n      decoratorTypes,\n      diff,\n      children,\n      seg,\n      segIndex,\n      spanDiff,\n      spanSchemaType,\n    })\n  }\n  // Render the segment with the active marks\n  if (activeMarks && activeMarks.length > 0) {\n    activeMarks.forEach((mark) => {\n      if (isDecorator(mark, spanSchemaType)) {\n        children = (\n          // eslint-disable-next-line react/no-array-index-key\n          <Decorator mark={mark} key={`decorator-${mark}-${child._key}-${segIndex}`}>\n            {children}\n          </Decorator>\n        )\n      }\n    })\n  }\n  return children\n}\n\nfunction renderDecorators({\n  activeMarks,\n  decoratorTypes,\n  diff,\n  children,\n  seg,\n  segIndex,\n  spanDiff,\n  spanSchemaType,\n}: {\n  activeMarks: string[]\n  decoratorTypes: {title: string; value: string}[]\n  diff: PortableTextDiff\n  children: JSX.Element\n  seg: StringDiffSegment\n  segIndex: number\n  spanDiff: ObjectDiff\n  spanSchemaType: SchemaType\n}): JSX.Element {\n  let returned = <span key={`text-segment-${segIndex}`}>{children}</span>\n  const fromPtDiffText: string =\n    (diff.origin.fromValue && diff.fromValue && diff.fromValue.children[0].text) || '' // Always one child\n\n  // There are cases where we have changed marks, but it's an indirect change in the diff data.\n  // For example when '<>normal-text</><>bold-text</>' and 'bold' is unbolded. Then 'bold' is added to first span,\n  // and 'bold' is removed from the second span: '<>normal-text-bold</><>-text</>'. No marks are changed.\n  // We do however want to indicate to the user that someone removed bold from 'bold'\n  // In these cases, fallback to the diff annotation information in the span itself.\n  const indirectMarksAnnotation =\n    (spanDiff && spanDiff.action !== 'unchanged' && spanDiff.annotation) || undefined\n\n  const marksDiff = spanDiff?.fields?.marks as ArrayDiff\n  const marksAnnotation =\n    (marksDiff && marksDiff.action !== 'unchanged' && marksDiff.annotation) ||\n    indirectMarksAnnotation\n\n  let marksChanged: string[] = []\n  const ptDiffChildren = fromPtDiffText\n    .split(TextSymbols.CHILD_SYMBOL)\n    .filter((text) => !!text)\n    .join('')\n  const ptDiffMatchString = ptDiffChildren\n  const controlString = ptDiffMatchString.substring(\n    0,\n    ptDiffMatchString.indexOf(seg.text) + seg.text.length\n  )\n  const toTest = controlString.substring(0, controlString.indexOf(seg.text))\n  const marks: string[] = []\n  const matches = [...toTest.matchAll(markRegex)]\n  matches.forEach((match) => {\n    const sym = match[0]\n    const set = TextSymbols.DECORATOR_SYMBOLS.concat(TextSymbols.ANNOTATION_SYMBOLS).find(\n      (aSet) => aSet.indexOf(sym) > -1\n    )\n    if (set) {\n      const isMarkStart = sym === set[0]\n      const mark: string =\n        decoratorTypes[\n          isMarkStart ? decoratorSymbolsStart.indexOf(sym) : decoratorSymbolsEnd.indexOf(sym)\n        ]?.value || sym // Annotation marks are uniqe anyway\n      const notClosed = toTest.lastIndexOf(sym) > toTest.lastIndexOf(set[1])\n      if (notClosed) {\n        marks.push(mark)\n      }\n    }\n  })\n  marksChanged = xor(activeMarks, uniq(marks))\n  // Only for decorators, annotations are taken care of elsewhere\n  if (\n    marksAnnotation &&\n    marksChanged.length > 0 &&\n    marksChanged.some((m) => isDecorator(m, spanSchemaType))\n  ) {\n    returned = (\n      <DiffCard\n        annotation={marksAnnotation}\n        key={`diffcard-annotation-${segIndex}-${marksChanged.join('-')}`}\n        as={'ins'}\n        tooltip={{\n          description: 'Changed formatting',\n        }}\n      >\n        {returned}\n      </DiffCard>\n    )\n  }\n  return returned\n}\n\nfunction isEmptyTextChange(block: PortableTextBlock, diff: PortableTextDiff) {\n  return (\n    block.children.length === 1 &&\n    block.children[0]._type === 'span' &&\n    typeof block.children[0].text === 'string' &&\n    block.children[0].text === '' &&\n    diff.origin.action !== 'unchanged'\n  )\n}\n","import React, {useMemo} from 'react'\nimport {DiffComponent, ObjectDiff} from '../../../types'\nimport PortableText from './components/PortableText'\nimport {createPortableTextDiff} from './helpers'\n\nexport const PTDiff: DiffComponent<ObjectDiff> = (props) => {\n  const {diff, schemaType} = props\n\n  const ptDiff = useMemo(() => createPortableTextDiff(diff, schemaType), [diff, schemaType])\n\n  return (\n    <div data-diff-action={diff.action}>\n      <PortableText diff={ptDiff} schemaType={schemaType} />\n    </div>\n  )\n}\n","import {Reference} from '@sanity/types'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {Box} from '@sanity/ui'\nimport {SanityPreview} from '../../../../preview'\nimport {FieldPreviewComponent} from '../../../preview'\n\nconst ReferenceWrapper = styled.div`\n  word-wrap: break-word;\n`\n\nexport const ReferencePreview: FieldPreviewComponent<Reference> = ({value, schemaType}) => (\n  <Box as={ReferenceWrapper} padding={2}>\n    <SanityPreview schemaType={schemaType} value={value} layout=\"default\" />\n  </Box>\n)\n","import React from 'react'\nimport {DiffFromTo} from '../../../diff'\nimport {DiffComponent, ReferenceDiff} from '../../../types'\nimport {ReferencePreview} from '../preview/ReferencePreview'\n\nexport const ReferenceFieldDiff: DiffComponent<ReferenceDiff> = ({diff, schemaType}) => {\n  return (\n    <DiffFromTo\n      align=\"center\"\n      diff={diff}\n      layout=\"grid\"\n      path=\"_ref\"\n      previewComponent={ReferencePreview}\n      schemaType={schemaType}\n    />\n  )\n}\n","import {Box} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {FieldPreviewComponent} from '../../../preview'\n\nconst StringWrapper = styled.div`\n  display: inline-block;\n  word-break: break-all;\n  white-space: pre-wrap;\n`\n\nexport const StringPreview: FieldPreviewComponent<string> = (props) => {\n  const {value} = props\n\n  return (\n    <Box as={StringWrapper} paddingX={2} paddingY={1}>\n      {value}\n    </Box>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {DiffFromTo, DiffString} from '../../../diff'\nimport {DiffComponent, StringDiff} from '../../../types'\nimport {StringPreview} from '../preview/StringPreview'\n\nconst StringWrapper = styled.div`\n  white-space: pre-wrap;\n  word-wrap: break-word;\n`\n\nexport const StringFieldDiff: DiffComponent<StringDiff> = ({diff, schemaType}) => {\n  const {options} = schemaType\n\n  if (options?.list) {\n    // When the string is considered to be an \"enum\", don't show individual\n    // string segment changes, rather treat is as a \"from -> to\" diff\n    return <DiffFromTo diff={diff} previewComponent={StringPreview} schemaType={schemaType} />\n  }\n\n  return (\n    <StringWrapper>\n      <DiffString diff={diff} />\n    </StringWrapper>\n  )\n}\n","import {DiffComponent, DiffComponentOptions} from '../../types'\n\nimport {BooleanFieldDiff} from '../../types/boolean/diff'\nimport {FileFieldDiff} from '../../types/file/diff'\nimport {ImageFieldDiff} from '../../types/image/diff'\nimport {NumberFieldDiff} from '../../types/number/diff'\nimport {PTDiff} from '../../types/portableText/diff'\nimport {ReferenceFieldDiff} from '../../types/reference/diff'\nimport {StringFieldDiff} from '../../types/string/diff'\n\nexport const defaultComponents: Record<\n  string,\n  DiffComponent<any> | DiffComponentOptions<any> | undefined\n> = {\n  block: PTDiff,\n  boolean: {component: BooleanFieldDiff, showHeader: false},\n  file: FileFieldDiff,\n  image: ImageFieldDiff,\n  number: NumberFieldDiff,\n  reference: ReferenceFieldDiff,\n  string: StringFieldDiff,\n}\n","import {ArraySchemaType, ObjectSchemaType, SchemaType} from '@sanity/types'\nimport {ComponentType} from 'react'\nimport {diffResolvers} from '../../TODO'\nimport {Diff, DiffComponent, DiffComponentOptions} from '../../types'\nimport {defaultComponents} from './defaultComponents'\n\nexport function resolveDiffComponent<D extends Diff = any>(\n  type: SchemaType,\n  parentSchemaType?: ArraySchemaType | ObjectSchemaType\n): DiffComponent<D> | DiffComponentOptions | undefined {\n  let itType: SchemaType | undefined = type\n\n  while (itType) {\n    const resolved =\n      itType?.components?.diff ||\n      tryResolve(itType, parentSchemaType) ||\n      defaultComponents[itType.name]\n\n    if (resolved) {\n      return resolved as DiffComponent<any>\n    }\n\n    itType = itType.type\n  }\n\n  return defaultComponents[type.jsonType]\n}\n\nfunction tryResolve(\n  schemaType: SchemaType,\n  parentSchemaType?: ArraySchemaType | ObjectSchemaType\n): DiffComponent<any> | DiffComponentOptions | undefined {\n  const resolvers = diffResolvers\n\n  let resolved: ComponentType | DiffComponentOptions | undefined\n\n  for (const resolver of resolvers) {\n    if (typeof resolver !== 'function') {\n      // eslint-disable-next-line no-console\n      console.error('Diff component resolver is not a function: ', resolver)\n      continue\n    }\n\n    resolved = resolver({schemaType, parentSchemaType})\n\n    if (resolved) {\n      return resolved as DiffComponent\n    }\n  }\n  return undefined\n}\n","import {ChangeNode, Diff, FieldChangeNode, GroupChangeNode, ItemDiff} from '../types'\n\nexport function getChangeVerb(diff: Diff): 'Added' | 'Removed' | 'Changed' {\n  const hadPrevValue = hasValue(diff.fromValue)\n  const hasNextValue = hasValue(diff.toValue)\n  if (!hadPrevValue && hasNextValue) {\n    return 'Added'\n  }\n\n  if (!hasNextValue && hadPrevValue) {\n    return 'Removed'\n  }\n\n  return 'Changed'\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nexport function noop(): void {}\n\nexport function isFieldChange(change: ChangeNode): change is FieldChangeNode {\n  return change.type === 'field'\n}\n\nexport function isGroupChange(change: ChangeNode): change is GroupChangeNode {\n  return change.type === 'group'\n}\n\nexport function isAddedItemDiff(\n  item: ItemDiff\n): item is ItemDiff & {diff: Diff & {action: 'added'}} {\n  return item.diff.action === 'added'\n}\n\nexport function isRemovedItemDiff(\n  item: ItemDiff\n): item is ItemDiff & {diff: Diff & {action: 'removed'}} {\n  return item.diff.action === 'removed'\n}\n\nexport function isUnchangedDiff(diff: Diff): diff is Diff & {action: 'unchanged'} {\n  return diff.action === 'unchanged'\n}\n\nfunction hasValue(value: unknown) {\n  return value !== null && typeof value !== 'undefined' && value !== ''\n}\n","import {\n  Path,\n  MultiFieldSet,\n  ObjectField,\n  ArraySchemaType,\n  ObjectSchemaType,\n  SchemaType,\n} from '@sanity/types'\nimport {pathToString, pathsAreEqual, getItemKeySegment} from '../../paths'\nimport {getValueError} from '../../validation'\nimport {getArrayDiffItemType} from '../../schema/helpers'\nimport {hasPTMemberType} from '../../types/portableText/diff/helpers'\nimport {\n  ArrayDiff,\n  ChangeNode,\n  ChangeTitlePath,\n  Diff,\n  DiffComponent,\n  FieldChangeNode,\n  ItemDiff,\n  ObjectDiff,\n} from '../../types'\nimport {resolveDiffComponent} from '../resolve/resolveDiffComponent'\nimport {isFieldChange} from '../helpers'\n\ninterface DiffContext {\n  itemDiff?: ItemDiff\n  parentDiff?: ArrayDiff | ObjectDiff\n  parentSchema?: ArraySchemaType | ObjectSchemaType\n  fieldFilter?: string[]\n}\n\nexport function buildChangeList(\n  schemaType: SchemaType,\n  diff: Diff,\n  path: Path = [],\n  titlePath: ChangeTitlePath = [],\n  context: DiffContext = {}\n): ChangeNode[] {\n  const diffComponent = resolveDiffComponent(schemaType, context.parentSchema)\n\n  if (!diffComponent) {\n    if (schemaType.jsonType === 'object' && diff.type === 'object') {\n      return buildObjectChangeList(schemaType as ObjectSchemaType, diff, path, titlePath, context)\n    }\n\n    if (schemaType.jsonType === 'array' && diff.type === 'array') {\n      return buildArrayChangeList(schemaType, diff, path, titlePath)\n    }\n  }\n\n  return getFieldChange(schemaType, diff, path, titlePath, context)\n}\n\nexport function buildObjectChangeList(\n  schemaType: ObjectSchemaType,\n  diff: ObjectDiff,\n  path: Path = [],\n  titlePath: ChangeTitlePath = [],\n  diffContext: DiffContext = {}\n): ChangeNode[] {\n  const changes: ChangeNode[] = []\n\n  const childContext: DiffContext = {...diffContext, parentSchema: schemaType}\n  const fieldSets =\n    schemaType.fieldsets || schemaType.fields.map((field) => ({single: true, field}))\n  for (const fieldSet of fieldSets) {\n    if (fieldSet.single) {\n      changes.push(...buildFieldChange(fieldSet.field, diff, path, titlePath, childContext))\n    } else {\n      changes.push(\n        ...buildFieldsetChangeList(fieldSet as MultiFieldSet, diff, path, titlePath, childContext)\n      )\n    }\n  }\n\n  if (changes.length < 2) {\n    return changes\n  }\n\n  return [\n    {\n      type: 'group',\n      key: pathToString(path) || 'root',\n      path,\n      titlePath,\n      changes: reduceTitlePaths(changes, titlePath.length),\n      schemaType,\n    },\n  ]\n}\n\nexport function buildFieldChange(\n  field: ObjectField,\n  diff: ObjectDiff,\n  path: Path,\n  titlePath: ChangeTitlePath,\n  diffContext: DiffContext & {fieldFilter?: string[]} = {}\n): ChangeNode[] {\n  const {fieldFilter, ...context} = diffContext\n  const fieldDiff = diff.fields[field.name]\n  if (!fieldDiff || !fieldDiff.isChanged || (fieldFilter && !fieldFilter.includes(field.name))) {\n    return []\n  }\n\n  const fieldPath = path.concat([field.name])\n  const fieldTitlePath = titlePath.concat([field.type.title || field.name])\n  return buildChangeList(field.type as any, fieldDiff, fieldPath, fieldTitlePath, context)\n}\n\nexport function buildFieldsetChangeList(\n  fieldSet: MultiFieldSet,\n  diff: ObjectDiff,\n  path: Path,\n  titlePath: ChangeTitlePath,\n  diffContext: DiffContext & {fieldFilter?: string[]} = {}\n): ChangeNode[] {\n  const {fields, name, title, readOnly, hidden} = fieldSet\n  const {fieldFilter, ...context} = diffContext\n\n  const fieldSetHidden = hidden\n  const fieldsetReadOnly = readOnly\n\n  const fieldSetTitlePath = titlePath.concat([title || name])\n  const changes: ChangeNode[] = []\n\n  for (const field of fields) {\n    const fieldDiff = diff.fields[field.name]\n    if (!fieldDiff || !fieldDiff.isChanged || (fieldFilter && !fieldFilter.includes(field.name))) {\n      continue\n    }\n\n    const fieldPath = path.concat([field.name])\n    const fieldTitlePath = fieldSetTitlePath.concat([field.type.title || field.name])\n    changes.push(\n      ...buildChangeList(\n        {\n          readOnly: fieldsetReadOnly,\n          hidden: fieldSetHidden,\n          ...field.type,\n        } as any,\n        fieldDiff,\n        fieldPath,\n        fieldTitlePath,\n        context\n      )\n    )\n  }\n\n  if (changes.length < 2) {\n    return changes\n  }\n\n  return [\n    {\n      type: 'group',\n      key: pathToString(path) || 'root',\n      fieldsetName: name,\n      path,\n      titlePath: fieldSetTitlePath,\n      changes: reduceTitlePaths(changes, fieldSetTitlePath.length),\n      readOnly: fieldsetReadOnly,\n      hidden: fieldSetHidden,\n    },\n  ]\n}\n\nexport function buildArrayChangeList(\n  schemaType: ArraySchemaType,\n  diff: ArrayDiff,\n  path: Path = [],\n  titlePath: ChangeTitlePath = []\n): ChangeNode[] {\n  const changedOrMoved = diff.items.filter(\n    (item) => (item.hasMoved && item.fromIndex !== item.toIndex) || item.diff.action !== 'unchanged'\n  )\n\n  if (changedOrMoved.length === 0) {\n    return []\n  }\n\n  const isPortableText = hasPTMemberType(schemaType)\n  const list: ChangeNode[] = []\n  const changes = changedOrMoved.reduce((acc, itemDiff) => {\n    const memberTypes = getArrayDiffItemType(itemDiff.diff, schemaType)\n    const memberType = memberTypes.toType || memberTypes.fromType\n    if (!memberType) {\n      // eslint-disable-next-line no-console\n      console.warn('Could not determine schema type for item at %s', pathToString(path))\n      return acc\n    }\n\n    const segment =\n      getItemKeySegment(itemDiff.diff.fromValue) ||\n      getItemKeySegment(itemDiff.diff.toValue) ||\n      diff.items.indexOf(itemDiff)\n\n    const itemPath = path.concat(segment)\n    const itemContext: DiffContext = {itemDiff, parentDiff: diff, parentSchema: schemaType}\n    const itemTitlePath = titlePath.concat({\n      hasMoved: itemDiff.hasMoved,\n      toIndex: itemDiff.toIndex,\n      fromIndex: itemDiff.fromIndex,\n      annotation:\n        itemDiff.diff.action === 'unchanged' ? itemDiff.annotation : itemDiff.diff.annotation,\n    })\n\n    const attachItemDiff = (change: ChangeNode): ChangeNode => {\n      if (change.type === 'field' && pathsAreEqual(itemPath, change.path)) {\n        change.itemDiff = itemDiff\n      }\n\n      return change\n    }\n\n    const children = buildChangeList(\n      memberType,\n      itemDiff.diff,\n      itemPath,\n      itemTitlePath,\n      itemContext\n    ).map(attachItemDiff)\n\n    if (isPortableText) {\n      children.filter(isFieldChange).forEach((field, index, siblings) => {\n        field.showHeader = siblings.length === 1\n        field.showIndex = itemDiff.fromIndex !== itemDiff.toIndex && itemDiff.hasMoved\n      })\n    }\n\n    if (children.length === 0) {\n      // This can happen when there are no changes to the actual element, it's just been moved\n      acc.push(...getFieldChange(memberType, itemDiff.diff, itemPath, itemTitlePath, itemContext))\n    } else {\n      acc.push(...children)\n    }\n\n    return acc\n  }, list)\n\n  if (changes.length > 1) {\n    return [\n      {\n        type: 'group',\n        key: pathToString(path) || 'root',\n        path,\n        titlePath,\n        changes: reduceTitlePaths(changes, titlePath.length),\n        schemaType,\n      },\n    ]\n  }\n\n  return changes\n}\n\nfunction getFieldChange(\n  schemaType: SchemaType,\n  diff: Diff,\n  path: Path,\n  titlePath: ChangeTitlePath,\n  {itemDiff, parentDiff, parentSchema}: DiffContext = {}\n): FieldChangeNode[] {\n  const {fromValue, toValue, type} = diff\n\n  // Treat undefined => [] as no change\n  if (type === 'array' && isEmpty(fromValue) && isEmpty(toValue)) {\n    return []\n  }\n\n  let error\n  if (typeof fromValue !== 'undefined') {\n    error = getValueError(fromValue, schemaType)\n  }\n\n  if (!error && typeof toValue !== 'undefined') {\n    error = getValueError(toValue, schemaType)\n  }\n\n  let showHeader = true\n  let component: DiffComponent | undefined\n\n  const diffComponent = resolveDiffComponent(schemaType, parentSchema)\n  if (diffComponent && typeof diffComponent === 'function') {\n    // Just a diff component with default options\n    component = diffComponent\n  } else if (diffComponent) {\n    // Diff component with options\n    component = (diffComponent as any).component\n    showHeader =\n      typeof (diffComponent as any).showHeader === 'undefined'\n        ? showHeader\n        : (diffComponent as any).showHeader\n  }\n\n  return [\n    {\n      type: 'field',\n      diff,\n      path,\n      error,\n      itemDiff,\n      parentDiff,\n      titlePath,\n      schemaType,\n      showHeader,\n      showIndex: true,\n      key: pathToString(path) || 'root',\n      diffComponent: error ? undefined : component,\n      parentSchema,\n    },\n  ]\n}\n\nfunction reduceTitlePaths(changes: ChangeNode[], byLength = 1): ChangeNode[] {\n  return changes.map((change) => {\n    change.titlePath = change.titlePath.slice(byLength)\n    return change\n  })\n}\n\nfunction isEmpty(item: unknown): boolean {\n  return (Array.isArray(item) && item.length === 0) || item === null || typeof item === 'undefined'\n}\n","import {Path, PathSegment} from '@sanity/types'\nimport {ChangeNode, FieldChangeNode} from '../../types'\nimport {getItemKey} from '../../paths'\n\nconst isAddedAction = (change: ChangeNode): boolean => {\n  return change.type === 'field' && change.diff.action === 'added'\n}\n\nconst flattenChangeNode = (changeNode: ChangeNode): FieldChangeNode[] => {\n  if (changeNode.type !== 'group') {\n    return [changeNode]\n  }\n\n  const newSubChanges: FieldChangeNode[] = []\n\n  changeNode.changes.forEach((cChange) => {\n    newSubChanges.push(...flattenChangeNode(cChange))\n  })\n\n  return newSubChanges\n}\n\n/**\n * Checks whether a path is under another path within the tree.\n */\nconst isSubpathOf = (subPath: Path, parentPath: Path): boolean => {\n  if (parentPath.length >= subPath.length) {\n    return false\n  }\n\n  for (let i = 0; i < parentPath.length; i++) {\n    if (parentPath[i] !== subPath[i]) {\n      return false\n    }\n  }\n\n  return true\n}\n\nconst pathSegmentOfCorrectType = (item: Record<string, unknown>, child: string): PathSegment => {\n  const nextItem = item[child]\n\n  const key = getItemKey(nextItem)\n\n  if (key) {\n    return {_key: key}\n  }\n\n  const isArray = Array.isArray(item)\n\n  if (isArray) {\n    return parseInt(child, 10)\n  }\n\n  return child\n}\n\nexport {isAddedAction, flattenChangeNode, isSubpathOf, pathSegmentOfCorrectType}\n","import {isIndexSegment, isKeyedObject, isKeySegment, isTypedObject, Path} from '@sanity/types'\nimport {diffItem} from 'sanity-diff-patch'\nimport {isRecord} from '../../../util/isRecord'\nimport {\n  findIndex,\n  getItemKeySegment,\n  getValueAtPath,\n  isEmptyObject,\n  pathToString,\n} from '../../paths'\nimport {\n  ArrayDiff,\n  ChangeNode,\n  Diff,\n  DiffPatch,\n  InsertDiffPatch,\n  ItemDiff,\n  ObjectDiff,\n  FieldOperationsAPI,\n  PatchOperations,\n  SetDiffPatch,\n  UnsetDiffPatch,\n} from '../../types'\nimport {flattenChangeNode, isAddedAction, isSubpathOf, pathSegmentOfCorrectType} from './helpers'\n\nconst diffOptions = {diffMatchPatch: {enabled: false}}\n\nexport function undoChange(\n  change: ChangeNode,\n  rootDiff: ObjectDiff | null,\n  documentOperations: FieldOperationsAPI\n): void {\n  if (!rootDiff) {\n    return\n  }\n\n  const patches: PatchOperations[] = []\n\n  if (change.type === 'group') {\n    const allChanges = flattenChangeNode(change)\n\n    const unsetChanges = allChanges.filter(isAddedAction)\n\n    allChanges\n      .filter((child) => !isAddedAction(child))\n      .forEach((child) => undoChange(child, rootDiff, documentOperations))\n\n    patches.push(\n      ...buildUnsetPatches(\n        rootDiff,\n        unsetChanges.map((unsetChange) => unsetChange.path)\n      )\n    )\n  } else if (change.diff.action === 'added') {\n    // The reverse of an add operation is an unset -\n    // so we don't need to worry about moved items in this case\n    patches.push(...buildUnsetPatches(rootDiff, [change.path]))\n  } else if (\n    change.type === 'field' &&\n    change.itemDiff &&\n    change.parentDiff &&\n    change.parentDiff.type === 'array' &&\n    change.itemDiff.hasMoved\n  ) {\n    // If an array item has moved, we need to unset + insert it again\n    // (we lack a \"move\" patch currently)\n    patches.push(...buildMovePatches(change.itemDiff, change.parentDiff, change.path))\n  } else {\n    // For all other operations, try to find the most optimal case\n    patches.push(...buildUndoPatches(change.diff, rootDiff, change.path))\n  }\n\n  documentOperations.patch.execute(patches)\n}\n\nfunction buildUnsetPatch(rootDiff: ObjectDiff, path: Path, concurrentUnsetPaths: Path[]): Path {\n  const previousValue = rootDiff.toValue as Record<string, unknown>\n\n  return furthestEmptyAncestor(previousValue, path, concurrentUnsetPaths)\n}\n\nfunction buildUnsetPatches(rootDiff: ObjectDiff, paths: Path[]): PatchOperations[] {\n  const patches: Path[] = []\n\n  for (let i = 0; i < paths.length; i++) {\n    const unsetByEarlierPatch = patches.some((patch) => isSubpathOf(paths[i], patch))\n\n    if (unsetByEarlierPatch) {\n      continue\n    }\n\n    patches.push(buildUnsetPatch(rootDiff, paths[i], paths))\n  }\n\n  return [{unset: [...new Set(patches.map(pathToString))]}]\n}\n\n/**\n * Find the path to the furthest empty ancestor that's also a stub.\n *\n * Used for removing all stubs when unsetting a nested value.\n */\nfunction furthestEmptyAncestor(\n  /**\n   * The state of the tree before the change was made.\n   */\n  previousValue: Record<string, unknown>,\n  /**\n   * Path of the value to unset. Used for recursing.\n   */\n  currentPath: Path,\n  /**\n   * An optional list of path to forcefully mark as a stub regardless of what it actually is.\n   */\n  ignorePaths: Path[] = [],\n  /**\n   * Same as the first value of currentPath.\n   */\n  initialPath?: Path\n): Path {\n  if (currentPath.length <= 0) {\n    /*\n     * This means we are at root and no ancestors are stubs. We\n     * can therefore safely unset only the actual value.\n     */\n    if (!initialPath) {\n      /*\n       * Will happen if the function is started with `currentPath = []`.\n       */\n      throw new Error('Root has no ancestor')\n    }\n\n    return initialPath\n  }\n\n  const ancestorPath = currentPath.slice(0, -1)\n  const ancestorValue = getValueAtPath(previousValue, ancestorPath)\n\n  /*\n   * If the ancestor also is a stub we can add it to the ignore-list\n   * so it'll be \"remembered\" as a stub without us having to scan\n   * the whole tree again.\n   */\n  const updatedIgnorePaths = [\n    ancestorPath,\n\n    /*\n     * We can filter out all the subpaths from under this ancestor\n     * because since we ignore it higher up in the tree it doesn't\n     * matter anymore what the values of subpaths are.\n     */\n    ...ignorePaths.filter((path) => !isSubpathOf(path, ancestorPath)),\n  ]\n\n  return isStub(ancestorValue, ancestorPath, ignorePaths)\n    ? furthestEmptyAncestor(previousValue, ancestorPath, updatedIgnorePaths, initialPath)\n    : currentPath\n}\n\nfunction buildMovePatches(\n  itemDiff: ItemDiff,\n  parentDiff: ArrayDiff,\n  path: Path\n): PatchOperations[] {\n  const basePath = path.slice(0, -1)\n  const {parentValue, fromIndex, fromValue} = getFromItem(parentDiff, itemDiff)\n\n  let insertLocation\n  if (fromIndex === 0) {\n    // If it was moved from the beginning, we can use a simple prepend\n    insertLocation = {before: pathToString([...basePath, 0])}\n  } else {\n    // Try to use item key segments where possible, falling back to array indexes\n    const prevIndex = fromIndex - 1\n    const prevItemKey = getItemKeySegment(parentValue[prevIndex])\n    const prevSegment = prevItemKey || prevIndex\n    insertLocation = {after: pathToString([...basePath, prevSegment])}\n  }\n\n  return [\n    {\n      unset: [pathToString(path)],\n    },\n    {\n      insert: {...insertLocation, items: [fromValue]} as any,\n    },\n  ]\n}\n\nfunction buildUndoPatches(diff: Diff, rootDiff: ObjectDiff, path: Path): PatchOperations[] {\n  const patches = diffItem(diff.toValue, diff.fromValue, diffOptions, path) as DiffPatch[]\n\n  const inserts = patches\n    .filter((patch): patch is InsertDiffPatch => patch.op === 'insert')\n    .map(({after, items}) => ({insert: {after: pathToString(after), items}} as any))\n\n  const unsets = patches\n    .filter((patch): patch is UnsetDiffPatch => patch.op === 'unset')\n    .reduce((acc, patch) => acc.concat(pathToString(patch.path)), [] as string[])\n\n  const stubbedPaths = new Set<string>()\n  const stubs: PatchOperations[] = []\n\n  let hasSets = false\n  const sets = patches\n    .filter((patch): patch is SetDiffPatch => patch.op === 'set')\n    .reduce((acc, patch) => {\n      hasSets = true\n      stubs.push(...getParentStubs(patch.path, rootDiff, stubbedPaths))\n      acc[pathToString(patch.path)] = patch.value\n      return acc\n    }, {} as Record<string, unknown>)\n\n  return [\n    ...stubs,\n    ...inserts,\n    ...(unsets.length > 0 ? [{unset: unsets}] : []),\n    ...(hasSets ? [{set: sets}] : []),\n  ]\n}\n\nfunction getParentStubs(path: Path, rootDiff: ObjectDiff, stubbed: Set<string>): PatchOperations[] {\n  const value = rootDiff.fromValue as Record<string, unknown>\n  const nextValue = rootDiff.toValue as Record<string, unknown>\n  const stubs: PatchOperations[] = []\n\n  for (let i = 1; i <= path.length; i++) {\n    const subPath = path.slice(0, i)\n    const pathStr = pathToString(subPath)\n    if (stubbed.has(pathStr)) {\n      continue\n    }\n\n    const nextSegment = path[i]\n    const nextIsArrayElement = isKeySegment(nextSegment) || isIndexSegment(nextSegment)\n    const itemValue = getValueAtPath(value, subPath)\n    const stub = getStubValue(itemValue)\n\n    // If the next array element does not exist, we need to inject an insert stub here\n    if (\n      nextIsArrayElement &&\n      Array.isArray(itemValue) &&\n      !getValueAtPath(nextValue, path.slice(0, i + 1))\n    ) {\n      const indexAtPrev = findIndex(itemValue, nextSegment)\n      const prevItem = itemValue[indexAtPrev - 1]\n      const nextItem = getValueAtPath(value, subPath.concat(nextSegment))\n      const prevSeg = isKeyedObject(prevItem) ? {_key: prevItem._key} : indexAtPrev - 1\n      const after = pathToString(subPath.concat(indexAtPrev < 1 ? 0 : prevSeg))\n      stubs.push({setIfMissing: {[pathStr]: []}})\n      stubs.push({insert: {after, items: [getStubValue(nextItem)]} as any})\n\n      i++\n      continue\n    }\n\n    if (typeof stub === 'undefined') {\n      continue\n    }\n\n    stubbed.add(pathStr)\n    stubs.push({setIfMissing: {[pathStr]: stub as Record<string, unknown>}})\n  }\n  return stubs\n}\n\n/**\n * Check if all items in an object or an array are stubs.\n */\nfunction onlyContainsStubs(\n  /**\n   * The item to check whether is a stub.\n   */\n  item: unknown,\n  /**\n   * The path to the item we're checking.\n   */\n  path: Path,\n  /**\n   * An optional list of path to forcefully mark as a stub regardless of what it actually is.\n   */\n  ignorePaths?: Path[]\n): boolean {\n  /*\n   * If we're trying to check for stubs inside something which isn't an object\n   * or an array we're checking a string for example and it they cannot\n   * contain stubs.\n   */\n  if (!isRecord(item) || !Array.isArray(item)) {\n    return false\n  }\n\n  for (const child in item) {\n    if (!Object.prototype.hasOwnProperty.call(item, child)) {\n      continue\n    }\n\n    /*\n     * _type or _key field alone doesn't affect whether the field is a stub or\n     * not.\n     */\n    if (child === '_type' || child === '_key') {\n      continue\n    }\n\n    const nextPath = [...path, pathSegmentOfCorrectType(item as Record<string, unknown>, child)]\n\n    if (!isStub(item[child], nextPath, ignorePaths)) {\n      return false\n    }\n  }\n\n  return true\n}\n\nfunction isStub(item: unknown, path: Path, ignorePaths?: Path[]): boolean {\n  const isIgnoredPath = ignorePaths?.some(\n    (ignorePath) => pathToString(ignorePath) === pathToString(path)\n  )\n\n  const isEmptyArray = Array.isArray(item) && item.length <= 0\n\n  return (\n    isIgnoredPath ||\n    item === undefined ||\n    item === null ||\n    isEmptyArray ||\n    isEmptyObject(item) ||\n    onlyContainsStubs(item, path, ignorePaths)\n  )\n}\n\nfunction getStubValue(item: unknown): unknown {\n  if (Array.isArray(item)) {\n    return []\n  }\n\n  if (typeof item !== 'object' || item === null) {\n    return undefined\n  }\n\n  const props: Record<string, unknown> = {}\n\n  if (isKeyedObject(item)) {\n    props._key = item._key\n  }\n\n  if (isTypedObject(item)) {\n    props._type = item._type\n  }\n\n  return props\n}\n\nfunction getFromItem(parentDiff: ArrayDiff, itemDiff: ItemDiff) {\n  if (parentDiff.fromValue && typeof itemDiff.fromIndex === 'number') {\n    const fromValue = parentDiff.fromValue[itemDiff.fromIndex]\n    return {\n      parentValue: parentDiff.fromValue,\n      fromIndex: itemDiff.fromIndex,\n      fromValue,\n    }\n  }\n\n  // Shouldn't ever happen\n  throw new Error(`Failed to find item at index ${itemDiff.fromIndex}`)\n}\n","import {createContext} from 'react'\nimport {ConditionalReadOnlyContextValue} from './types'\n\n/**\n * @internal\n */\nexport const ConditionalReadOnlyContext = createContext<ConditionalReadOnlyContextValue | null>(\n  null\n)\n","import {useContext} from 'react'\nimport {ConditionalReadOnlyContext} from './ConditionalReadOnlyContext'\n\n/**\n * @internal\n */\nexport function useConditionalReadOnly(): boolean | null {\n  const context = useContext(ConditionalReadOnlyContext)\n\n  if (!context) {\n    return null\n  }\n\n  return context.readOnly || null\n}\n","import {Path} from '@sanity/types'\nimport React from 'react'\nimport {Tooltip, TooltipProps, Text, Stack, Flex, Inline, Label} from '@sanity/ui'\nimport {LegacyLayerProvider} from '../../../components/transitional'\nimport {UserAvatar} from '../../../components/UserAvatar'\nimport {useTimeAgo} from '../../../hooks'\nimport {AnnotationDetails, Diff} from '../../types'\nimport {getAnnotationAtPath, useAnnotationColor} from '../annotations'\nimport {useUser} from '../../../datastores'\n\nexport interface DiffTooltipProps extends TooltipProps {\n  children: React.ReactElement\n  description?: React.ReactNode\n  diff: Diff\n  path?: Path | string\n}\n\nexport interface DiffTooltipWithAnnotationsProps extends TooltipProps {\n  annotations: AnnotationDetails[]\n  children: React.ReactElement\n  description?: React.ReactNode\n}\n\nexport function DiffTooltip(props: DiffTooltipProps | DiffTooltipWithAnnotationsProps) {\n  if ('diff' in props) {\n    const {diff, path = [], ...restProps} = props\n    const annotation = getAnnotationAtPath(diff, path)\n\n    return <DiffTooltipWithAnnotation {...restProps} annotations={annotation ? [annotation] : []} />\n  }\n\n  return <DiffTooltipWithAnnotation {...props} />\n}\n\nfunction DiffTooltipWithAnnotation(props: DiffTooltipWithAnnotationsProps) {\n  const {annotations, children, description = 'Changed', ...restProps} = props\n\n  if (!annotations) {\n    return children\n  }\n\n  const content = (\n    <Stack padding={3} space={2}>\n      <Label size={1} style={{textTransform: 'uppercase'}} muted>\n        {description}\n      </Label>\n      <Stack space={2}>\n        {annotations.map((annotation, idx) => (\n          <AnnotationItem annotation={annotation} key={idx} />\n        ))}\n      </Stack>\n    </Stack>\n  )\n\n  return (\n    <LegacyLayerProvider zOffset=\"paneFooter\">\n      <Tooltip\n        content={content}\n        // data-placement={restProps.placement}\n        portal\n        allowedAutoPlacements={['top', 'bottom']}\n        {...restProps}\n      >\n        {children}\n      </Tooltip>\n    </LegacyLayerProvider>\n  )\n}\n\nfunction AnnotationItem({annotation}: {annotation: AnnotationDetails}) {\n  const {author, timestamp} = annotation\n  const [user] = useUser(author)\n  const color = useAnnotationColor(annotation)\n  const timeAgo = useTimeAgo(timestamp, {minimal: true})\n\n  return (\n    <Inline space={2}>\n      <Flex\n        align=\"center\"\n        paddingRight={3}\n        style={{\n          backgroundColor: color.background,\n          color: color.text,\n          borderRadius: 'calc(23px / 2)',\n        }}\n      >\n        <UserAvatar user={author} />\n        <Inline paddingLeft={2}>\n          <Text muted size={1} style={{color: color.text}}>\n            {user ? user.displayName : 'Loading…'}\n          </Text>\n        </Inline>\n      </Flex>\n      <Text as=\"time\" muted size={1} dateTime={timestamp}>\n        {timeAgo}\n      </Text>\n    </Inline>\n  )\n}\n","import {Path} from '@sanity/types'\nimport React, {forwardRef, useMemo} from 'react'\nimport {Card, rem} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {getAnnotationAtPath, useAnnotationColor} from '../annotations'\nimport {Annotation, Diff} from '../../types'\nimport {DiffTooltip} from './DiffTooltip'\n\nexport interface DiffCardProps {\n  annotation?: Annotation\n  as?: React.ElementType | keyof JSX.IntrinsicElements\n  diff?: Diff\n  disableHoverEffect?: boolean\n  path?: Path | string\n  tooltip?: {description?: React.ReactNode} | boolean\n}\n\nconst StyledCard = styled(Card)`\n  --diff-card-radius: ${({theme}) => rem(theme.sanity.radius[2])};\n  --diff-card-bg-color: ${({theme}) => theme.sanity.color.card.enabled.bg};\n\n  max-width: 100%;\n  position: relative;\n  border-radius: var(--diff-card-radius);\n\n  &:not(del) {\n    text-decoration: none;\n  }\n\n  &[data-hover] {\n    &::after {\n      content: '';\n      display: block;\n      position: absolute;\n      left: 0;\n      right: 0;\n      bottom: 0;\n    }\n\n    &:hover {\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n\n      &::after {\n        bottom: -3px;\n        border-top: 1px solid var(---diff-card-bg-color);\n        border-bottom: 2px solid currentColor;\n        border-bottom-left-radius: var(--diff-card-radius);\n        border-bottom-right-radius: var(--diff-card-radius);\n      }\n    }\n\n    [data-from-to-layout]:hover & {\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n\n      &::after {\n        bottom: -3px;\n        border-top: 1px solid var(---diff-card-bg-color);\n        border-bottom: 2px solid currentColor;\n        border-bottom-left-radius: var(--diff-card-radius);\n        border-bottom-right-radius: var(--diff-card-radius);\n      }\n    }\n  }\n`\n\nconst EMPTY_PATH: Path = []\n\nexport const DiffCard = forwardRef(function DiffCard(\n  props: DiffCardProps & Omit<React.HTMLProps<HTMLElement>, 'as' | 'height'>,\n  ref\n) {\n  const {\n    annotation: annotationProp,\n    as = 'div',\n    children,\n    className,\n    diff,\n    disableHoverEffect,\n    path = EMPTY_PATH,\n    style = {},\n    tooltip,\n    ...restProps\n  } = props\n\n  const annotation = useMemo(\n    () => annotationProp || getAnnotationAtPath(diff!, path),\n    [annotationProp, diff, path]\n  )\n\n  const color = useAnnotationColor(annotation)\n\n  const element = (\n    <StyledCard\n      {...restProps}\n      as={as}\n      className={className}\n      data-hover={disableHoverEffect || !annotation ? undefined : ''}\n      ref={ref}\n      radius={1}\n      style={{\n        ...style,\n        backgroundColor: color.background,\n        color: color.text,\n      }}\n    >\n      {children}\n    </StyledCard>\n  )\n\n  if (tooltip && annotation) {\n    return (\n      <DiffTooltip\n        annotations={[annotation]}\n        description={tooltip && typeof tooltip === 'object' && tooltip.description}\n      >\n        {element}\n      </DiffTooltip>\n    )\n  }\n\n  return element\n})\n","import React from 'react'\nimport {Box, rem, Text} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {FromToIndex, Annotation, FieldChangeNode} from '../../types'\nimport {getAnnotationAtPath} from '../annotations'\nimport {DiffCard} from './DiffCard'\n\nconst RoundedCard = styled.div`\n  border-radius: ${({theme}) => rem(theme.sanity.radius[2])};\n  padding: ${({theme}) => rem(theme.sanity.space[1])};\n`\n\nconst AnnotationText = styled(Text)`\n  &:not([hidden]) {\n    color: inherit;\n  }\n`\n\nexport function ChangeTitleSegment(props: {\n  change?: FieldChangeNode\n  segment: string | FromToIndex\n}) {\n  const {change, segment} = props\n\n  if (typeof segment === 'string') {\n    return (\n      <Box style={segment.length > 30 ? {maxWidth: 100} : {}}>\n        <Text title={segment} size={1} weight=\"semibold\" textOverflow=\"ellipsis\">\n          {segment}\n        </Text>\n      </Box>\n    )\n  }\n\n  const {hasMoved, fromIndex, toIndex, annotation} = segment\n  const created = typeof fromIndex === 'undefined'\n  const deleted = typeof toIndex === 'undefined'\n  if (created) {\n    // Item was created\n    return <CreatedTitleSegment annotation={annotation} change={change} toIndex={toIndex} />\n  }\n\n  if (deleted) {\n    // Item was deleted\n    return <DeletedTitleSegment annotation={annotation} fromIndex={fromIndex} />\n  }\n\n  if (hasMoved && typeof toIndex !== 'undefined' && typeof fromIndex !== 'undefined') {\n    // Item was moved\n    return <MovedTitleSegment annotation={annotation} fromIndex={fromIndex} toIndex={toIndex} />\n  }\n\n  // Changed/unchanged\n  const readableIndex = (toIndex || 0) + 1\n  return (\n    <Box padding={1}>\n      <Text size={1} weight=\"semibold\">\n        #{readableIndex}\n      </Text>\n    </Box>\n  )\n}\n\nfunction CreatedTitleSegment(props: {\n  annotation: Annotation | undefined\n  change?: FieldChangeNode\n  toIndex?: number\n}) {\n  const {annotation: annotationProp, change, toIndex = 0} = props\n  const readableIndex = toIndex + 1\n  const description = `Added in position ${readableIndex}`\n  const content = <>#{readableIndex}</>\n  const diffAnnotation = change?.diff ? getAnnotationAtPath(change.diff, []) : undefined\n  const annotation = diffAnnotation || annotationProp\n\n  if (annotation) {\n    return (\n      <DiffCard annotation={annotation} tooltip={{description}} as={RoundedCard}>\n        <AnnotationText\n          size={1}\n          weight=\"semibold\"\n          forwardedAs=\"ins\"\n          style={{textDecoration: 'none'}}\n        >\n          {content}\n        </AnnotationText>\n      </DiffCard>\n    )\n  }\n\n  return (\n    <Text size={1} weight=\"semibold\">\n      {content}\n    </Text>\n  )\n}\n\nfunction DeletedTitleSegment(props: {annotation: Annotation | undefined; fromIndex?: number}) {\n  const {annotation, fromIndex = 0} = props\n  const readableIndex = fromIndex + 1\n  const description = `Removed from position ${readableIndex}`\n  return (\n    <DiffCard annotation={annotation || null} as={RoundedCard} tooltip={{description}}>\n      <AnnotationText size={1} weight=\"semibold\" forwardedAs=\"del\">\n        #{readableIndex}\n      </AnnotationText>\n    </DiffCard>\n  )\n}\n\nfunction MovedTitleSegment(props: {\n  annotation: Annotation | undefined\n  fromIndex: number\n  toIndex: number\n}) {\n  const {annotation, fromIndex, toIndex} = props\n  const indexDiff = toIndex - fromIndex\n  const indexSymbol = indexDiff < 0 ? '↑' : '↓'\n  const positions = Math.abs(indexDiff)\n  const description = `Moved ${positions} position${positions === 1 ? '' : 's'} ${\n    indexDiff < 0 ? 'up' : 'down'\n  }`\n\n  return (\n    <>\n      <Box padding={1}>\n        <AnnotationText size={1} weight=\"semibold\">\n          #{toIndex + 1}\n        </AnnotationText>\n      </Box>\n      <DiffCard annotation={annotation} as={RoundedCard} tooltip={{description}}>\n        <AnnotationText size={1} weight=\"semibold\">\n          {indexSymbol}\n          {Math.abs(indexDiff)}\n        </AnnotationText>\n      </DiffCard>\n    </>\n  )\n}\n","import React from 'react'\nimport {Breadcrumbs, Text} from '@sanity/ui'\nimport {ChangeTitlePath, FieldChangeNode} from '../../types'\nimport {ChangeTitleSegment} from './ChangeTitleSegment'\n\nexport function ChangeBreadcrumb(props: {change?: FieldChangeNode; titlePath: ChangeTitlePath}) {\n  const {change, titlePath} = props\n\n  return (\n    <Breadcrumbs\n      separator={\n        <Text muted size={1}>\n          /\n        </Text>\n      }\n    >\n      {titlePath.map((titleSegment, idx) => {\n        const showSegment = typeof titleSegment === 'string' || !change || change.showIndex\n\n        if (!showSegment) {\n          return null\n        }\n\n        return <ChangeTitleSegment change={change} key={idx} segment={titleSegment} />\n      })}\n    </Breadcrumbs>\n  )\n}\n","import React from 'react'\nimport {ErrorOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Flex, Text} from '@sanity/ui'\nimport {isDev} from '../../../environment'\n\nexport interface DiffErrorBoundaryProps {\n  children: React.ReactNode\n}\n\nexport interface DiffErrorBoundaryState {\n  error?: Error\n}\n\nexport class DiffErrorBoundary extends React.Component<\n  DiffErrorBoundaryProps,\n  DiffErrorBoundaryState\n> {\n  static getDerivedStateFromError(error: Error) {\n    return {error}\n  }\n\n  state: DiffErrorBoundaryState = {}\n\n  // eslint-disable-next-line class-methods-use-this\n  componentDidCatch(error: Error) {\n    console.error('Error rendering diff component: ')\n    console.error(error)\n  }\n\n  render() {\n    const {error} = this.state\n\n    if (!error) {\n      return this.props.children\n    }\n\n    return (\n      <Card padding={3} radius={2} tone=\"critical\">\n        <Flex>\n          <Text size={1}>\n            <ErrorOutlineIcon />\n          </Text>\n\n          <Box paddingLeft={3}>\n            <Text as=\"h3\" size={1} weight=\"medium\">\n              Rendering the changes to this field caused an error\n            </Text>\n\n            {isDev && (\n              <Box marginTop={2}>\n                <Text as=\"p\" size={1}>\n                  Check the developer console for more information\n                </Text>\n              </Box>\n            )}\n          </Box>\n        </Flex>\n      </Card>\n    )\n  }\n}\n","import {Text, TextProps} from '@sanity/ui'\nimport React, {createElement} from 'react'\nimport {ArrowRightIcon, ArrowDownIcon} from '@sanity/icons'\n\nexport type FromToArrowDirection = 'down' | 'right'\n\nconst arrowComponents = {\n  down: ArrowDownIcon,\n  right: ArrowRightIcon,\n}\n\nexport function FromToArrow(\n  props: {direction?: FromToArrowDirection} & TextProps &\n    Omit<React.HTMLProps<HTMLDivElement>, 'children' | 'ref'>\n) {\n  const {direction = 'right', ...restProps} = props\n  const arrowComponent = arrowComponents[direction]\n\n  return (\n    <Text muted size={1} {...restProps}>\n      {createElement(arrowComponent)}\n    </Text>\n  )\n}\n","import {Box, BoxProps, Card, Code, Label, Stack} from '@sanity/ui'\nimport React, {useCallback, useEffect, useRef, useState} from 'react'\nimport styled, {DefaultTheme, StyledComponent} from 'styled-components'\nimport {pathToString} from '../../paths'\nimport {FieldChangeNode} from '../../types'\nimport {FromToArrow} from './FromToArrow'\n\nexport interface DiffInspectWrapperProps {\n  children: React.ReactNode\n  change: FieldChangeNode\n  as?: StyledComponent<'div', DefaultTheme>\n}\n\nconst CodeWrapper = styled.pre`\n  overflow-x: auto;\n  position: relative;\n`\n\nconst Meta = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n`\n\nexport function DiffInspectWrapper(props: DiffInspectWrapperProps & BoxProps): React.ReactElement {\n  const {children, as, change, ...restProps} = props\n  const isHovering = useRef(false)\n  const [isInspecting, setIsInspecting] = useState(false)\n\n  const toggleInspect = useCallback(() => setIsInspecting((state) => !state), [setIsInspecting])\n  const handleMouseEnter = useCallback(() => (isHovering.current = true), [])\n  const handleMouseLeave = useCallback(() => (isHovering.current = false), [isHovering])\n\n  useEffect(() => {\n    function onKeyDown(evt: KeyboardEvent) {\n      const {metaKey, key} = evt\n      if (metaKey && key === 'i' && isHovering.current) {\n        toggleInspect()\n      }\n    }\n\n    window.addEventListener('keydown', onKeyDown, false)\n    return () => window.removeEventListener('keydown', onKeyDown, false)\n  }, [toggleInspect])\n\n  return (\n    <Box as={as} onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave} {...restProps}>\n      {isInspecting ? <DiffInspector change={change} /> : children}\n    </Box>\n  )\n}\n\nconst MetaLabel = ({title}: {title: string}) => (\n  <Box padding={3} display=\"inline-block\" as={Meta}>\n    <Label size={1} muted>\n      {title}\n    </Label>\n  </Box>\n)\n\nfunction DiffInspector({change}: {change: FieldChangeNode}): React.ReactElement | null {\n  return (\n    <Stack space={3}>\n      <Card padding={3} tone=\"transparent\" as={CodeWrapper} radius={1}>\n        <MetaLabel title=\"meta\" />\n        <Code language=\"json\" size={1}>\n          {printMeta({\n            path: pathToString(change.path),\n            fromIndex: change.itemDiff?.fromIndex,\n            toIndex: change.itemDiff?.toIndex,\n            hasMoved: change.itemDiff?.hasMoved,\n            action: change.diff.action,\n            isChanged: change.diff.isChanged,\n          })}\n        </Code>\n      </Card>\n      <Card as={CodeWrapper} tone=\"critical\" padding={3} radius={1}>\n        <MetaLabel title=\"from\" />\n        <Code language=\"json\" size={1}>\n          {jsonify(change.diff.fromValue)}\n        </Code>\n      </Card>\n      <Card>\n        <FromToArrow direction=\"down\" align=\"center\" />\n      </Card>\n      <Card as={CodeWrapper} tone=\"positive\" padding={3} radius={1}>\n        <MetaLabel title=\"to\" />\n        <Code language=\"json\" size={1}>\n          {jsonify(change.diff.toValue)}\n        </Code>\n      </Card>\n    </Stack>\n  )\n}\n\nfunction jsonify(value: unknown) {\n  if (typeof value === 'undefined') {\n    return 'undefined'\n  }\n\n  return JSON.stringify(value, null, 2)\n}\n\nfunction printMeta(keys: Record<string, unknown>) {\n  const lines: string[] = []\n\n  Object.entries(keys).forEach(([key, value]) => {\n    if (typeof value !== 'undefined' && value !== null) {\n      lines.push(`${key}: ${value}`)\n    }\n  })\n\n  return lines.join('\\n')\n}\n","import React, {forwardRef, useMemo} from 'react'\nimport {Flex, Grid, rem, useTheme} from '@sanity/ui'\nimport {FromToArrow} from './FromToArrow'\n\nexport type FromToProps = {\n  align?: 'top' | 'center' | 'bottom'\n  layout?: 'grid' | 'inline'\n  from?: React.ReactNode\n  to?: React.ReactNode\n} & Omit<React.HTMLProps<HTMLDivElement>, 'children' | 'as' | 'height' | 'wrap'>\n\nconst INLINE_COLUMN_STYLES = {flexShrink: 0}\nconst BLOCK_COLUMN_STYLES = {alignItems: 'stretch'}\n\nconst FLEX_ALIGN: Record<string, 'flex-start' | 'center' | 'flex-end'> = {\n  top: 'flex-start',\n  center: 'center',\n  bottom: 'flex-end',\n  default: 'flex-start',\n}\n\nexport const FromTo = forwardRef<HTMLDivElement, FromToProps>(function FromTo(props, ref) {\n  const {align = 'top', layout = 'inline', from, to, style, ...restProps} = props\n  const theme = useTheme()\n\n  const Layout = layout === 'inline' ? Flex : Grid\n  const layoutStyles = useMemo(\n    () => ({\n      ...style,\n      ...(layout === 'inline'\n        ? {maxWidth: '100%', display: 'inline-flex'}\n        : {gridTemplateColumns: `minmax(0, 1fr) ${rem(theme.sanity.space[5])} minmax(0, 1fr)`}),\n    }),\n    [layout, style, theme]\n  )\n\n  const columnStyles = layout === 'inline' ? INLINE_COLUMN_STYLES : BLOCK_COLUMN_STYLES\n\n  return (\n    <Layout {...restProps} ref={ref} style={layoutStyles} data-from-to-layout>\n      {from && (\n        <>\n          <Flex align={FLEX_ALIGN[align]} style={columnStyles}>\n            {from}\n          </Flex>\n          <Flex align=\"center\" justify=\"center\" padding={2}>\n            <FromToArrow />\n          </Flex>\n        </>\n      )}\n      <Flex align={FLEX_ALIGN[align]} style={columnStyles}>\n        {to}\n      </Flex>\n    </Layout>\n  )\n})\n","import {Path, SchemaType} from '@sanity/types'\nimport React, {createElement, CSSProperties} from 'react'\nimport {FieldPreviewComponent} from '../../preview'\nimport {Diff} from '../../types'\nimport {getChangeVerb} from '../helpers'\nimport {DiffCard} from './DiffCard'\nimport {DiffTooltip} from './DiffTooltip'\nimport {FromTo} from './FromTo'\n\nexport interface DiffFromToProps {\n  align?: 'top' | 'center' | 'bottom'\n  cardClassName?: string\n  diff: Diff\n  layout?: 'grid' | 'inline'\n  path?: Path | string\n  previewComponent: FieldPreviewComponent\n  schemaType: SchemaType\n}\n\nconst cardStyles: CSSProperties = {\n  flex: 1,\n  minWidth: 0,\n  display: 'block',\n  whiteSpace: 'break-spaces',\n}\n\nexport function DiffFromTo(props: DiffFromToProps) {\n  const {align, cardClassName, diff, layout, path, previewComponent, schemaType} = props\n  const {action} = diff\n  const changeVerb = getChangeVerb(diff)\n\n  if (action === 'unchanged') {\n    return (\n      <DiffCard className={cardClassName} style={cardStyles}>\n        {createElement(previewComponent, {schemaType, value: diff.toValue})}\n      </DiffCard>\n    )\n  }\n\n  const from = diff.fromValue !== undefined && diff.fromValue !== null && (\n    <DiffCard as=\"del\" className={cardClassName} diff={diff} path={path} style={cardStyles}>\n      {createElement(previewComponent, {schemaType, value: diff.fromValue})}\n    </DiffCard>\n  )\n\n  const to = diff.toValue !== undefined && diff.toValue !== null && (\n    <DiffCard as=\"ins\" className={cardClassName} diff={diff} path={path} style={cardStyles}>\n      {createElement(previewComponent, {schemaType, value: diff.toValue})}\n    </DiffCard>\n  )\n\n  if (from && !to) {\n    return (\n      <DiffTooltip description={changeVerb} diff={diff} path={path}>\n        {from}\n      </DiffTooltip>\n    )\n  }\n\n  if (!from && to) {\n    return (\n      <DiffTooltip description={changeVerb} diff={diff} path={path}>\n        {to}\n      </DiffTooltip>\n    )\n  }\n\n  return (\n    <DiffTooltip description={changeVerb} diff={diff} path={path}>\n      <FromTo align={align} from={from} layout={layout} to={to} />\n    </DiffTooltip>\n  )\n}\n","import React from 'react'\nimport {Box} from '@sanity/ui'\nimport {SanityPreview} from '../../../preview'\nimport {FieldPreviewComponent} from '../../preview'\nimport {Diff, DiffComponent} from '../../types'\nimport {DiffFromTo} from './DiffFromTo'\n\nconst FallbackPreview: FieldPreviewComponent<React.ReactNode> = ({value, schemaType}) => {\n  return (\n    <Box padding={2}>\n      <SanityPreview schemaType={schemaType} value={value as any} layout=\"default\" />\n    </Box>\n  )\n}\n\nexport const FallbackDiff: DiffComponent<Diff<unknown, Record<string, unknown>>> = (props) => {\n  const {diff, schemaType} = props\n\n  return (\n    <DiffFromTo\n      diff={diff}\n      schemaType={schemaType}\n      previewComponent={FallbackPreview}\n      layout=\"grid\"\n    />\n  )\n}\n","import {RevertIcon} from '@sanity/icons'\nimport {Button, ButtonProps} from '@sanity/ui'\nimport React, {forwardRef} from 'react'\nimport styled from 'styled-components'\n\nconst Root = styled(Button)`\n  [data-ui='Text'] {\n    font-weight: normal;\n  }\n\n  div[data-ui='Box'] {\n    display: none;\n  }\n\n  &:not([data-disabled='true']):hover,\n  &:not([data-disabled='true']):focus {\n    --card-fg-color: ${({theme}) => theme.sanity.color.solid.critical.enabled.bg};\n    --card-bg-color: transparent;\n    --card-border-color: transparent;\n\n    div[data-ui='Box'] {\n      display: block;\n    }\n  }\n`\n\nexport const RevertChangesButton = forwardRef(function RevertChangesButton(\n  props: ButtonProps & Omit<React.HTMLProps<HTMLButtonElement>, 'ref'>,\n  ref: React.ForwardedRef<HTMLButtonElement>\n): React.ReactElement {\n  const {selected, ...restProps} = props\n\n  return (\n    <Root\n      icon={RevertIcon}\n      selected={selected}\n      text=\"Revert changes\"\n      mode=\"bleed\"\n      padding={1}\n      fontSize={1}\n      space={2}\n      ref={ref}\n      {...restProps}\n    />\n  )\n})\n","import {ErrorOutlineIcon} from '@sanity/icons'\nimport {Text, Box, Card, Flex} from '@sanity/ui'\nimport React from 'react'\nimport {FieldValueError} from '../../validation'\n\nexport function ValueError({error}: {error: FieldValueError}) {\n  return (\n    <Card tone=\"critical\" padding={3}>\n      <Flex align=\"flex-start\">\n        <Box>\n          <Text>\n            <ErrorOutlineIcon />\n          </Text>\n        </Box>\n        <Box flex={1} paddingLeft={3}>\n          <Text size={1} as=\"p\">\n            Value error: {error.message}\n          </Text>\n        </Box>\n      </Flex>\n    </Card>\n  )\n}\n","import styled from 'styled-components'\nimport {rem, Popover} from '@sanity/ui'\n\nexport const FieldChangeContainer = styled.div`\n  --field-change-error: ${({theme}) => theme.sanity.color.solid.critical.enabled.bg};\n  &[data-revert-all-changes-hover] [data-revert-all-hover]::before {\n    border-left: 2px solid var(--field-change-error);\n  }\n`\n\nexport const DiffBorder = styled.div`\n  --field-change-error: ${({theme}) => theme.sanity.color.solid.critical.enabled.bg};\n  --diff-inspect-padding-xsmall: ${({theme}) => rem(theme.sanity.space[1])};\n  --diff-inspect-padding-small: ${({theme}) => rem(theme.sanity.space[2])};\n\n  position: relative;\n  padding: var(--diff-inspect-padding-xsmall) 0 var(--diff-inspect-padding-xsmall)\n    var(--diff-inspect-padding-small);\n\n  &::before {\n    content: '';\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    border-left: 1px solid var(--card-border-color);\n  }\n\n  &[data-error]:hover::before,\n  &[data-revert-field-hover]:hover::before {\n    border-left: 2px solid var(--field-change-error);\n  }\n`\n\nexport const PopoverWrapper = styled(Popover)`\n  /* hides the popover when the target of it has left the visible part of the window.\n   without it, the popover will be on top of the headers (document title & changes)\n   and footers (changed notifications, publish button etc)*/\n  &[data-popper-reference-hidden='true'] {\n    display: none;\n  }\n`\n","import React, {useCallback, useMemo, useState} from 'react'\nimport {Stack, Box, Button, Text, Grid, useClickOutside} from '@sanity/ui'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {useConditionalReadOnly} from '../../../conditional-property/conditionalReadOnly'\nimport {useDocumentOperation} from '../../../hooks'\nimport {FieldChangeNode, FieldOperationsAPI} from '../../types'\nimport {undoChange} from '../changes/undoChange'\nimport {DiffContext} from '../contexts/DiffContext'\nimport {useDocumentChange} from '../hooks'\nimport {useDocumentPairPermissions} from '../../../datastores'\nimport {ChangeBreadcrumb} from './ChangeBreadcrumb'\nimport {DiffErrorBoundary} from './DiffErrorBoundary'\nimport {DiffInspectWrapper} from './DiffInspectWrapper'\nimport {FallbackDiff} from './FallbackDiff'\nimport {RevertChangesButton} from './RevertChangesButton'\nimport {ValueError} from './ValueError'\nimport {FieldChangeContainer, DiffBorder, PopoverWrapper} from './FieldChange.styled'\n\nexport function FieldChange(\n  props: {\n    change: FieldChangeNode\n    readOnly?: boolean\n    hidden?: boolean\n  } & React.HTMLAttributes<HTMLDivElement>\n) {\n  const {change, hidden, readOnly} = props\n  const conditionalReadOnly = useConditionalReadOnly() ?? readOnly\n  const DiffComponent = change.diffComponent || FallbackDiff\n  const {\n    documentId,\n    schemaType,\n    rootDiff,\n    isComparingCurrent,\n    FieldWrapper = React.Fragment,\n  } = useDocumentChange()\n  const ops = useDocumentOperation(documentId, schemaType.name) as FieldOperationsAPI\n  const [confirmRevertOpen, setConfirmRevertOpen] = useState(false)\n  const [revertHovered, setRevertHovered] = useState(false)\n  const [revertButtonElement, setRevertButtonElement] = useState<HTMLDivElement | null>(null)\n\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id: documentId,\n    type: schemaType.name,\n    permission: 'update',\n  })\n\n  const handleRevertChanges = useCallback(() => {\n    undoChange(change, rootDiff, ops)\n  }, [change, rootDiff, ops])\n\n  const handleRevertChangesConfirm = useCallback(() => {\n    setConfirmRevertOpen(true)\n  }, [])\n\n  const closeRevertChangesConfirmDialog = React.useCallback(() => {\n    setConfirmRevertOpen(false)\n  }, [])\n\n  const handleRevertButtonMouseEnter = useCallback(() => {\n    setRevertHovered(true)\n  }, [])\n\n  const handleRevertButtonMouseLeave = useCallback(() => {\n    setRevertHovered(false)\n  }, [])\n\n  const handleClickOutside = useCallback(() => setConfirmRevertOpen(false), [])\n\n  useClickOutside(handleClickOutside, [revertButtonElement])\n\n  const content = useMemo(\n    () =>\n      hidden ? null : (\n        <Stack space={1} as={FieldChangeContainer}>\n          {change.showHeader && <ChangeBreadcrumb change={change} titlePath={change.titlePath} />}\n\n          <FieldWrapper path={change.path} hasHover={revertHovered}>\n            <DiffInspectWrapper\n              change={change}\n              as={DiffBorder}\n              data-revert-field-hover={revertHovered ? '' : undefined}\n              data-error={change.error ? '' : undefined}\n              data-revert-all-hover\n            >\n              {change.error ? (\n                <ValueError error={change.error} />\n              ) : (\n                <DiffErrorBoundary>\n                  <DiffContext.Provider value={{path: change.path}}>\n                    <DiffComponent\n                      diff={change.diff}\n                      schemaType={change.schemaType as ObjectSchemaType}\n                    />\n                  </DiffContext.Provider>\n                </DiffErrorBoundary>\n              )}\n\n              {isComparingCurrent && !isPermissionsLoading && permissions?.granted && (\n                <PopoverWrapper\n                  content={\n                    <Box padding={3} sizing=\"border\">\n                      Are you sure you want to revert the changes?\n                      <Grid columns={2} gap={2} marginTop={2}>\n                        <Button mode=\"ghost\" onClick={closeRevertChangesConfirmDialog}>\n                          <Text align=\"center\">Cancel</Text>\n                        </Button>\n                        <Button tone=\"critical\" onClick={handleRevertChanges}>\n                          <Text align=\"center\">Revert change</Text>\n                        </Button>\n                      </Grid>\n                    </Box>\n                  }\n                  open={confirmRevertOpen}\n                  portal\n                  placement=\"left\"\n                  ref={setRevertButtonElement}\n                >\n                  <Box flex={1}>\n                    <RevertChangesButton\n                      onClick={handleRevertChangesConfirm}\n                      onMouseEnter={handleRevertButtonMouseEnter}\n                      onMouseLeave={handleRevertButtonMouseLeave}\n                      selected={confirmRevertOpen}\n                      disabled={conditionalReadOnly}\n                      data-testid={`single-change-revert-button-${change?.key}`}\n                    />\n                  </Box>\n                </PopoverWrapper>\n              )}\n            </DiffInspectWrapper>\n          </FieldWrapper>\n        </Stack>\n      ),\n    [\n      change,\n      closeRevertChangesConfirmDialog,\n      conditionalReadOnly,\n      confirmRevertOpen,\n      DiffComponent,\n      FieldWrapper,\n      hidden,\n      handleRevertButtonMouseEnter,\n      handleRevertButtonMouseLeave,\n      handleRevertChanges,\n      handleRevertChangesConfirm,\n      isComparingCurrent,\n      isPermissionsLoading,\n      permissions,\n      revertHovered,\n    ]\n  )\n\n  return content\n}\n","import {useEffect, useRef, useState} from 'react'\n\nexport function useHover<T extends HTMLElement>(): [React.MutableRefObject<T | null>, boolean] {\n  const ref = useRef<T | null>(null)\n  const [value, setValue] = useState(false)\n\n  useEffect(() => {\n    const node = ref.current\n\n    if (!node) {\n      return () => undefined\n    }\n\n    const handleMouseOver = () => setValue(true)\n    const handleMouseOut = () => setValue(false)\n\n    node.addEventListener('mouseover', handleMouseOver)\n    node.addEventListener('mouseout', handleMouseOut)\n\n    return () => {\n      node.removeEventListener('mouseover', handleMouseOver)\n      node.removeEventListener('mouseout', handleMouseOut)\n    }\n  }, [])\n\n  return [ref, value]\n}\n","import {rem, Popover} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const ChangeListWrapper = styled.div`\n  display: grid;\n  grid-template-columns: minmax(0, 1fr);\n`\n\nexport const GroupChangeContainer = styled.div`\n  --field-change-error: ${({theme}) => theme.sanity.color.solid.critical.enabled.bg};\n  --diff-inspect-padding-xsmall: ${({theme}) => rem(theme.sanity.space[1])};\n  --diff-inspect-padding-small: ${({theme}) => rem(theme.sanity.space[2])};\n\n  position: relative;\n  padding: var(--diff-inspect-padding-xsmall) var(--diff-inspect-padding-small);\n\n  &::before {\n    content: '';\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    border-left: 1px solid var(--card-border-color);\n  }\n\n  &[data-error]:hover::before,\n  &[data-revert-group-hover]:hover::before,\n  &[data-revert-all-groups-hover]::before {\n    border-left: 2px solid var(--field-change-error);\n  }\n`\n\nexport const PopoverWrapper = styled(Popover)`\n  /* hides the popover when the target of it has left the visible part of the window.\n   without it, the popover will be on top of the headers (document title & changes)\n   and footers (changed notifications, publish button etc)*/\n  &[data-popper-reference-hidden='true'] {\n    display: none;\n  }\n`\n","import React, {useCallback, useContext, useMemo, useState} from 'react'\nimport {Box, Stack, Button, Grid, Text, useClickOutside} from '@sanity/ui'\nimport {useDocumentOperation} from '../../../hooks'\nimport {undoChange} from '../changes/undoChange'\nimport {isFieldChange} from '../helpers'\nimport {isPTSchemaType} from '../../types/portableText/diff'\nimport {GroupChangeNode, FieldOperationsAPI} from '../../types'\nimport {useHover} from '../../utils/useHover'\nimport {pathsAreEqual} from '../../paths'\nimport {DiffContext} from '../contexts/DiffContext'\nimport {useDocumentChange} from '../hooks'\nimport {useDocumentPairPermissions} from '../../../datastores'\nimport {ChangeBreadcrumb} from './ChangeBreadcrumb'\nimport {ChangeResolver} from './ChangeResolver'\nimport {RevertChangesButton} from './RevertChangesButton'\nimport {ChangeListWrapper, GroupChangeContainer, PopoverWrapper} from './GroupChange.styled'\n\nexport function GroupChange(\n  props: {\n    change: GroupChangeNode\n    readOnly?: boolean\n    hidden?: boolean\n  } & React.HTMLAttributes<HTMLDivElement>\n): React.ReactElement | null {\n  const {\n    change: group,\n    readOnly,\n    hidden,\n    // 'data-revert-all-changes-hover': dataRevertAllChangesHover,\n    ...restProps\n  } = props\n  const {titlePath, changes, path: groupPath} = group\n  const {path: diffPath} = useContext(DiffContext)\n  const {documentId, schemaType, FieldWrapper, rootDiff, isComparingCurrent} = useDocumentChange()\n\n  const isPortableText = changes.every(\n    (change) => isFieldChange(change) && isPTSchemaType(change.schemaType)\n  )\n\n  const isNestedInDiff = pathsAreEqual(diffPath, groupPath)\n  const [revertButtonRef, isRevertButtonHovered] = useHover<HTMLButtonElement>()\n\n  const docOperations = useDocumentOperation(documentId, schemaType.name) as FieldOperationsAPI\n  const [confirmRevertOpen, setConfirmRevertOpen] = useState(false)\n  const [revertPopoverElement, setRevertPopoverElement] = useState<HTMLDivElement | null>(null)\n\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id: documentId,\n    type: schemaType.name,\n    permission: 'update',\n  })\n\n  const handleRevertChanges = useCallback(\n    () => undoChange(group, rootDiff, docOperations),\n    [group, rootDiff, docOperations]\n  )\n\n  const handleRevertChangesConfirm = useCallback(() => {\n    setConfirmRevertOpen(true)\n  }, [])\n\n  const closeRevertChangesConfirmDialog = useCallback(() => {\n    setConfirmRevertOpen(false)\n  }, [])\n\n  useClickOutside(() => setConfirmRevertOpen(false), [revertPopoverElement])\n\n  const content = useMemo(\n    () =>\n      hidden ? null : (\n        <Stack\n          space={1}\n          as={GroupChangeContainer}\n          data-revert-group-hover={isRevertButtonHovered ? '' : undefined}\n          data-portable-text={isPortableText ? '' : undefined}\n          // data-revert-all-groups-hover={\n          //   restProps[] === '' ? '' : undefined\n          // }\n        >\n          <Stack as={ChangeListWrapper} space={5}>\n            {changes.map((change) => (\n              <ChangeResolver\n                key={change.key}\n                change={change}\n                readOnly={readOnly}\n                hidden={hidden}\n              />\n            ))}\n          </Stack>\n          {isComparingCurrent && !isPermissionsLoading && permissions?.granted && (\n            <PopoverWrapper\n              content={\n                <Box>\n                  Are you sure you want to revert the changes?\n                  <Grid columns={2} gap={2} marginTop={2}>\n                    <Button mode=\"ghost\" onClick={closeRevertChangesConfirmDialog}>\n                      <Text align=\"center\">Cancel</Text>\n                    </Button>\n                    <Button tone=\"critical\" onClick={handleRevertChanges}>\n                      <Text align=\"center\">Revert change</Text>\n                    </Button>\n                  </Grid>\n                </Box>\n              }\n              portal\n              padding={4}\n              placement={'left'}\n              open={confirmRevertOpen}\n              ref={setRevertPopoverElement}\n            >\n              <Box>\n                <RevertChangesButton\n                  onClick={handleRevertChangesConfirm}\n                  ref={revertButtonRef}\n                  selected={confirmRevertOpen}\n                  disabled={readOnly}\n                  data-testid={`group-change-revert-button-${group.fieldsetName}`}\n                />\n              </Box>\n            </PopoverWrapper>\n          )}\n        </Stack>\n      ),\n    [\n      changes,\n      closeRevertChangesConfirmDialog,\n      confirmRevertOpen,\n      readOnly,\n      group.fieldsetName,\n      handleRevertChanges,\n      handleRevertChangesConfirm,\n      hidden,\n      isComparingCurrent,\n      isRevertButtonHovered,\n      isPermissionsLoading,\n      isPortableText,\n      permissions,\n      revertButtonRef,\n    ]\n  )\n\n  return hidden ? null : (\n    <Stack space={1} {...restProps}>\n      <ChangeBreadcrumb titlePath={titlePath} />\n      {isNestedInDiff || !FieldWrapper ? (\n        content\n      ) : (\n        <FieldWrapper hasHover={isRevertButtonHovered} path={group.path}>\n          {content}\n        </FieldWrapper>\n      )}\n    </Stack>\n  )\n}\n","import {ConditionalProperty, SanityDocument} from '@sanity/types'\nimport React from 'react'\nimport {Text} from '@sanity/ui'\nimport {unstable_useConditionalProperty as useConditionalProperty} from '../../../conditional-property'\nimport {ChangeNode} from '../../types'\nimport {useDocumentChange} from '../hooks'\nimport {FieldChange} from './FieldChange'\nimport {GroupChange} from './GroupChange'\n\nexport interface ChangeResolverProps {\n  change: ChangeNode\n  readOnly?: ConditionalProperty\n  hidden?: ConditionalProperty\n}\n\nexport function ChangeResolver(props: ChangeResolverProps) {\n  const {change, hidden, readOnly} = props\n  const {value} = useDocumentChange()\n\n  const isHidden = useConditionalProperty({\n    // @todo: is parent missing here?\n    document: value as SanityDocument,\n    checkProperty: hidden || change.schemaType?.hidden,\n    checkPropertyKey: 'hidden',\n    value: change.type === 'field' ? change.diff.toValue : undefined,\n  })\n\n  const isReadOnly = useConditionalProperty({\n    // @todo: is parent missing here?\n    document: value as SanityDocument,\n    checkProperty: readOnly || change.schemaType?.readOnly,\n    checkPropertyKey: 'readOnly',\n    value: change.type === 'field' ? change.diff.toValue : undefined,\n  })\n\n  if (isHidden) return null\n\n  if (change.type === 'field') {\n    return <FieldChange change={change} readOnly={isReadOnly} />\n  }\n\n  if (change.type === 'group') {\n    return (\n      <GroupChange\n        change={change}\n        data-testid={`group-change-${change.fieldsetName}`}\n        readOnly={isReadOnly}\n      />\n    )\n  }\n\n  return (\n    <Text>\n      Unknown change type: <code>{(change as any).type || 'undefined'}</code>\n    </Text>\n  )\n}\n","import {Stack, Text} from '@sanity/ui'\nimport React from 'react'\n\nexport function NoChanges() {\n  return (\n    <Stack space={3}>\n      <Text size={1} weight=\"semibold\" as=\"h3\">\n        There are no changes\n      </Text>\n      <Text as=\"p\" size={1} muted>\n        Edit the document or select an older version in the timeline to see a list of changes appear\n        in this panel.\n      </Text>\n    </Stack>\n  )\n}\n","import {Popover} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const ChangeListWrapper = styled.div`\n  display: grid;\n  grid-template-columns: minmax(0, 1fr);\n`\n\nexport const PopoverWrapper = styled(Popover)`\n  /* hides the popover when the target of it has left the visible part of the window.\n   without it, the popover will be on top of the headers (document title & changes)\n   and footers (changed notifications, publish button etc)*/\n  &[data-popper-reference-hidden='true'] {\n    display: none;\n  }\n`\n","import {Button, Box, Card, Grid, Stack, useClickOutside} from '@sanity/ui'\nimport {RevertIcon} from '@sanity/icons'\nimport React, {useCallback, useContext, useMemo, useState} from 'react'\nimport {SanityDocument} from '@sanity/client'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {unstable_useConditionalProperty as useConditionalProperty} from '../../../conditional-property'\nimport {useDocumentOperation} from '../../../hooks'\nimport {ObjectDiff, ChangeNode, FieldOperationsAPI} from '../../types'\nimport {DiffContext} from '../contexts/DiffContext'\nimport {buildObjectChangeList} from '../changes/buildChangeList'\nimport {undoChange} from '../changes/undoChange'\nimport {useDocumentChange} from '../hooks/useDocumentChange'\nimport {useDocumentPairPermissions} from '../../../datastores'\nimport {ChangeResolver} from './ChangeResolver'\nimport {NoChanges} from './NoChanges'\nimport {ChangeListWrapper, PopoverWrapper} from './ChangeList.styled'\n\nexport interface ChangeListProps {\n  schemaType: ObjectSchemaType\n  diff: ObjectDiff\n  fields?: string[]\n}\n\nexport function ChangeList({diff, fields, schemaType}: ChangeListProps): React.ReactElement | null {\n  const {documentId, isComparingCurrent, value} = useDocumentChange()\n  const docOperations = useDocumentOperation(documentId, schemaType.name) as FieldOperationsAPI\n  const {path} = useContext(DiffContext)\n  const isRoot = path.length === 0\n  const [confirmRevertAllOpen, setConfirmRevertAllOpen] = useState(false)\n  const [confirmRevertAllHover, setConfirmRevertAllHover] = useState(false)\n\n  const isReadOnly = useConditionalProperty({\n    document: value as SanityDocument,\n    value: undefined,\n    checkProperty: schemaType.readOnly,\n    checkPropertyKey: 'readOnly',\n  })\n\n  if (schemaType.jsonType !== 'object') {\n    throw new Error(`Only object schema types are allowed in ChangeList`)\n  }\n\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id: documentId,\n    type: schemaType.name,\n    permission: 'update',\n  })\n\n  const allChanges = useMemo(\n    () => buildObjectChangeList(schemaType, diff, path, [], {fieldFilter: fields}),\n    [schemaType, fields, path, diff]\n  )\n\n  const changes = useMemo(\n    () => (fields && fields.length === 0 ? [] : maybeFlatten(allChanges)),\n    [allChanges, fields]\n  )\n\n  const rootChange = allChanges[0]\n\n  const revertAllChanges = useCallback(() => {\n    undoChange(rootChange, diff, docOperations)\n    setConfirmRevertAllOpen(false)\n  }, [rootChange, diff, docOperations])\n\n  const handleRevertAllChangesClick = useCallback(() => {\n    setConfirmRevertAllOpen(true)\n  }, [])\n\n  const handleRevertAllChangesMouseEnter = useCallback(() => {\n    setConfirmRevertAllHover(true)\n  }, [])\n\n  const handleRevertAllChangesMouseLeave = useCallback(() => {\n    setConfirmRevertAllHover(false)\n  }, [])\n\n  const closeRevertAllChangesConfirmDialog = useCallback(() => {\n    setConfirmRevertAllOpen(false)\n  }, [])\n\n  const [revertAllContainerElement, setRevertAllContainerElement] = useState<HTMLDivElement | null>(\n    null\n  )\n\n  const handleClickOutside = useCallback(() => setConfirmRevertAllOpen(false), [])\n\n  useClickOutside(handleClickOutside, [revertAllContainerElement])\n\n  if (changes.length === 0) {\n    return isRoot ? <NoChanges /> : null\n  }\n\n  const showFooter = isRoot && changes.length > 1\n\n  return (\n    <Card>\n      <Stack space={5}>\n        <Stack as={ChangeListWrapper} space={5}>\n          {changes.map((change) => (\n            <div key={change.key}>\n              <ChangeResolver\n                change={change}\n                key={change.key}\n                data-revert-all-changes-hover={confirmRevertAllHover ? '' : undefined}\n                readOnly={isReadOnly || change?.readOnly}\n                hidden={change?.hidden}\n              />\n            </div>\n          ))}\n        </Stack>\n\n        {showFooter && isComparingCurrent && !isPermissionsLoading && permissions?.granted && (\n          <PopoverWrapper\n            content={\n              <Box>\n                Are you sure you want to revert all {changes.length} changes?\n                <Grid columns={2} gap={2} marginTop={2}>\n                  <Button mode=\"ghost\" text=\"Cancel\" onClick={closeRevertAllChangesConfirmDialog} />\n                  <Button tone=\"critical\" text=\"Revert all\" onClick={revertAllChanges} />\n                </Grid>\n              </Box>\n            }\n            open={confirmRevertAllOpen}\n            padding={4}\n            placement={'left'}\n            portal\n            ref={setRevertAllContainerElement}\n          >\n            <Stack>\n              <Button\n                tone=\"critical\"\n                mode=\"ghost\"\n                text=\"Revert all changes\"\n                icon={RevertIcon}\n                onClick={handleRevertAllChangesClick}\n                onMouseEnter={handleRevertAllChangesMouseEnter}\n                onMouseLeave={handleRevertAllChangesMouseLeave}\n                disabled={isReadOnly}\n              />\n            </Stack>\n          </PopoverWrapper>\n        )}\n      </Stack>\n    </Card>\n  )\n}\n\nfunction maybeFlatten(changes: ChangeNode[]) {\n  return changes.length === 1 && changes[0].type === 'group' && changes[0].path.length === 0\n    ? changes[0].changes\n    : changes\n}\n","import {Text, Card, rem} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {StringDiffSegment, StringDiff} from '../../types'\nimport {DiffCard} from './DiffCard'\n\nconst RoundedCard = styled.span`\n  border-radius: ${({theme}) => rem(theme.sanity.radius[1])};\n`\n\nconst ChangeSegment = styled(Text)`\n  &:not([hidden]) {\n    display: inline;\n    line-height: calc(1.25em + 2px);\n  }\n\n  &:hover {\n    background-color: none !important;\n    background-image: linear-gradient(\n      to bottom,\n      var(--card-bg-color) 0,\n      var(--card-bg-color) 33.333%,\n      currentColor 33.333%,\n      currentColor 100%\n    );\n    background-size: 1px 3px;\n    background-repeat: repeat-x;\n    background-position-y: bottom;\n    padding-bottom: 3px;\n    box-shadow: 0 0 0 1px var(--card-bg-color);\n    z-index: 1;\n  }\n`\n\nexport function DiffStringSegment(props: {segment: StringDiffSegment}): React.ReactElement {\n  const {segment} = props\n  const {text} = segment\n\n  if (segment.action === 'added') {\n    return (\n      <DiffCard\n        annotation={segment.annotation}\n        disableHoverEffect\n        tooltip={{description: 'Added'}}\n        as={RoundedCard}\n      >\n        <ChangeSegment as=\"ins\" style={{textDecoration: 'none'}}>\n          {text}\n        </ChangeSegment>\n      </DiffCard>\n    )\n  }\n\n  if (segment.action === 'removed') {\n    return (\n      <DiffCard\n        annotation={segment.annotation}\n        as={RoundedCard}\n        disableHoverEffect\n        tooltip={{description: 'Removed'}}\n      >\n        <ChangeSegment as=\"del\">{text}</ChangeSegment>\n      </DiffCard>\n    )\n  }\n\n  return (\n    <Card as=\"span\" radius={2} style={{display: 'inline'}}>\n      {text}\n    </Card>\n  )\n}\n\nexport function DiffString(props: {diff: StringDiff}) {\n  const {diff} = props\n\n  return (\n    <>\n      {(diff.segments || []).map((segment, segmentIndex) => (\n        <DiffStringSegment\n          // eslint-disable-next-line react/no-array-index-key\n          key={segmentIndex}\n          segment={segment}\n        />\n      ))}\n    </>\n  )\n}\n","import {Text, Box, Flex, Stack} from '@sanity/ui'\nimport React, {createElement} from 'react'\nimport styled from 'styled-components'\n\nexport interface MetaInfoProps {\n  title: string\n  action?: string\n  icon?: React.ComponentType\n  children?: React.ReactNode\n  markRemoved?: boolean\n}\n\nconst MetaText = styled(Text)`\n  color: inherit;\n`\n\nexport function MetaInfo(props: MetaInfoProps) {\n  const {title, action, icon, children, markRemoved} = props\n\n  return (\n    <Flex padding={2} align=\"center\">\n      {icon && (\n        <Box padding={2}>\n          <MetaText size={4} forwardedAs={markRemoved ? 'del' : 'div'}>\n            {createElement(icon)}\n          </MetaText>\n        </Box>\n      )}\n\n      <Stack space={2} paddingLeft={2}>\n        <MetaText\n          size={1}\n          weight=\"semibold\"\n          forwardedAs={markRemoved ? 'del' : 'h3'}\n          textOverflow=\"ellipsis\"\n        >\n          {title}\n        </MetaText>\n\n        {action && <div>{action}</div>}\n\n        <MetaText size={0} textOverflow=\"ellipsis\">\n          {children}\n        </MetaText>\n      </Stack>\n    </Flex>\n  )\n}\n","import * as legacyDateFormat from '@sanity/util/legacyDateFormat'\nimport {StringSchemaType} from '@sanity/types'\nimport {Box} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {FieldPreviewComponent} from '../../../preview'\n\nconst DEFAULT_DATE_FORMAT = 'YYYY-MM-DD'\nconst DEFAULT_TIME_FORMAT = 'HH:mm'\n\nconst DatetimeWrapper = styled.div`\n  display: inline-block;\n  word-wrap: break-word;\n`\n\nexport const DatetimePreview: FieldPreviewComponent<string> = function DatetimePreview({\n  value,\n  schemaType,\n}) {\n  return (\n    <Box as={DatetimeWrapper} paddingX={2} paddingY={1}>\n      {formatDateTime(value, schemaType)}\n    </Box>\n  )\n}\n\nfunction formatDateTime(value: string, schemaType: StringSchemaType): string {\n  const {options, name} = schemaType\n  const dateFormat = options?.dateFormat || DEFAULT_DATE_FORMAT\n  const timeFormat = options?.timeFormat || DEFAULT_TIME_FORMAT\n\n  return legacyDateFormat.format(\n    new Date(value),\n    name === 'date' ? dateFormat : `${dateFormat} ${timeFormat}`\n  )\n}\n","import {Box} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {Slug} from '@sanity/types'\nimport {FieldPreviewComponent} from '../../../preview'\n\nconst SlugWrapper = styled.div`\n  display: inline-block;\n  word-break: break-all;\n  white-space: pre-wrap;\n`\n\nexport const SlugPreview: FieldPreviewComponent<Slug> = (props) => {\n  const {value} = props\n\n  return (\n    <Box as={SlugWrapper} paddingX={2} paddingY={1}>\n      {value.current}\n    </Box>\n  )\n}\n","import {\n  TrashIcon,\n  EditIcon,\n  IconComponent,\n  PublishIcon,\n  UnpublishIcon,\n  CloseIcon,\n  AddCircleIcon,\n} from '@sanity/icons'\n\nexport const TIMELINE_LABELS: {[key: string]: string | undefined} = {\n  create: 'created',\n  delete: 'deleted',\n  discardDraft: 'discarded draft',\n  initial: 'created',\n  editDraft: 'edited',\n  editLive: 'live edited',\n  publish: 'published',\n  unpublish: 'unpublished',\n}\n\nexport const TIMELINE_ICON_COMPONENTS: {[key: string]: IconComponent | undefined} = {\n  create: AddCircleIcon,\n  delete: TrashIcon,\n  discardDraft: CloseIcon,\n  initial: AddCircleIcon,\n  editDraft: EditIcon,\n  editLive: EditIcon,\n  publish: PublishIcon,\n  unpublish: UnpublishIcon,\n}\n","import {IconComponent} from '@sanity/icons'\nimport {ChunkType, Chunk} from '../../../../field'\nimport {TIMELINE_ICON_COMPONENTS, TIMELINE_LABELS} from './constants'\n\nexport function formatTimelineEventLabel(type: ChunkType): string | undefined {\n  return TIMELINE_LABELS[type]\n}\n\nexport function getTimelineEventIconComponent(type: ChunkType): IconComponent | undefined {\n  return TIMELINE_ICON_COMPONENTS[type]\n}\n\nexport function sinceTimelineProps(\n  since: Chunk,\n  rev: Chunk\n): {\n  topSelection: Chunk\n  bottomSelection: Chunk\n  disabledBeforeSelection: boolean\n} {\n  return {\n    topSelection: rev,\n    bottomSelection: since,\n    disabledBeforeSelection: true,\n  }\n}\n\nexport function revTimelineProps(rev: Chunk): {\n  topSelection: Chunk\n  bottomSelection: Chunk\n} {\n  return {\n    topSelection: rev,\n    bottomSelection: rev,\n  }\n}\n","import React from 'react'\nimport {AvatarStack} from '@sanity/ui'\nimport {UserAvatar} from '../../../../components/UserAvatar'\n\ninterface UserAvatarStackProps {\n  maxLength?: number\n  userIds: string[]\n}\n\nexport function UserAvatarStack({maxLength, userIds}: UserAvatarStackProps) {\n  return (\n    <AvatarStack maxLength={maxLength}>\n      {userIds.map((userId) => (\n        <UserAvatar key={userId} user={userId} withTooltip />\n      ))}\n    </AvatarStack>\n  )\n}\n","import {Text, Box, MenuItem, Theme, Flex} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {TimelineItemState} from './types'\n\nexport interface IconWrapperProps {\n  theme: Theme\n}\n\nexport interface TimelineItemProps {\n  state: TimelineItemState\n  theme: Theme\n  isHovered: boolean\n}\n\nexport const IconWrapper = styled(Flex)(({theme}: IconWrapperProps) => {\n  const borderColor = theme.sanity.color.base.skeleton?.from\n\n  return css`\n    --timeline-hairline-width: 1px;\n    position: relative;\n    z-index: 2;\n    margin: 0;\n    padding: 0;\n\n    &::before {\n      position: absolute;\n      content: '';\n      height: 100%;\n      width: var(--timeline-hairline-width);\n      background: ${borderColor};\n      top: 0;\n      left: calc((100% - var(--timeline-hairline-width)) / 2);\n      z-index: 1;\n    }\n  `\n})\n\nexport const Root = styled(MenuItem)(({state = 'enabled', isHovered, theme}: TimelineItemProps) => {\n  const {color} = theme.sanity\n\n  const selectedState = color.button.default.primary.enabled\n  return css`\n    position: relative;\n    min-width: 244px;\n\n    ${state === 'selected' &&\n    css`\n      --card-bg-color: ${selectedState.bg};\n      --card-fg-color: ${selectedState.fg};\n      --card-muted-fg-color: ${selectedState.muted};\n      --card-border-color: ${selectedState.bg};\n      &:not([data-selection-bottom='true']) {\n        border-top-left-radius: 0;\n        border-top-right-radius: 0;\n      }\n    `}\n\n    ${state === 'withinSelection' &&\n    css`\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n      box-shadow: 0px 3px 0px 0px var(--card-bg-color);\n      &:not([data-selection-top='true']) {\n        border-radius: 0;\n      }\n\n      ${IconWrapper} {\n        &::before {\n          background: var(--card-hairline-soft-color);\n        }\n      }\n    `}\n\n      ${state === 'disabled' &&\n    css`\n      [data-ui='Avatar'] {\n        opacity: 0.2;\n      }\n    `}\n\n    // line styling 👇\n      &:first-child ${IconWrapper}::before {\n      height: 50%;\n      top: unset;\n      bottom: 0;\n    }\n\n    &:last-child ${IconWrapper}::before {\n      height: 50%;\n    }\n\n    ${(isHovered || state === 'selected') &&\n    css`\n      ${IconWrapper}::before {\n        background: transparent;\n      }\n    `}\n\n    // Remove timeline lines when using the keyboard to navigate timeline items\n    &:focus ${IconWrapper}::before {\n      background: transparent;\n    }\n  `\n})\n\nexport const IconBox = styled(Box)`\n  background: var(--card-bg-color);\n  border-radius: 50px;\n  position: relative;\n  z-index: 2;\n`\n\nexport const EventLabel = styled(Text)`\n  text-transform: capitalize;\n`\n","import React, {useCallback, createElement, useState} from 'react'\nimport {Box, Flex, Stack, Text, ButtonTone} from '@sanity/ui'\nimport {ChunkType, Chunk} from '../../../../field'\nimport {useTimeAgo} from '../../../../hooks'\nimport {formatTimelineEventLabel, getTimelineEventIconComponent} from './helpers'\nimport {TimelineItemState} from './types'\nimport {UserAvatarStack} from './userAvatarStack'\n\nimport {EventLabel, IconBox, IconWrapper, Root} from './timelineItem.styled'\n\nconst TIMELINE_ITEM_EVENT_TONE: Record<ChunkType | 'withinSelection', ButtonTone> = {\n  initial: 'primary',\n  create: 'primary',\n  publish: 'positive',\n  editLive: 'caution',\n  editDraft: 'caution',\n  unpublish: 'critical',\n  discardDraft: 'critical',\n  delete: 'critical',\n  withinSelection: 'primary',\n}\n\nexport function TimelineItem(props: {\n  isSelectionBottom: boolean\n  isSelectionTop: boolean\n  state: TimelineItemState\n  onSelect: (chunk: Chunk) => void\n  chunk: Chunk\n  timestamp: string\n  type: ChunkType\n}) {\n  const {isSelectionBottom, isSelectionTop, state, onSelect, timestamp, chunk, type} = props\n  const iconComponent = getTimelineEventIconComponent(type)\n  const authorUserIds = Array.from(chunk.authors)\n  const timeAgo = useTimeAgo(timestamp, {minimal: true})\n\n  const isSelected = state === 'selected'\n  const isWithinSelection = state === 'withinSelection'\n\n  const [isHovered, setHovered] = useState(false)\n\n  const handleClick = useCallback(\n    (evt: React.MouseEvent<HTMLDivElement>) => {\n      evt.preventDefault()\n      evt.stopPropagation()\n      onSelect(chunk)\n    },\n    [onSelect, chunk]\n  )\n\n  return (\n    <Root\n      data-ui=\"timelineItem\"\n      radius={2}\n      data-chunk-id={chunk.id}\n      paddingY={0}\n      paddingX={2}\n      tone={\n        isHovered || isSelected || isWithinSelection ? 'default' : TIMELINE_ITEM_EVENT_TONE[type]\n      }\n      pressed={isWithinSelection}\n      state={state}\n      selected={isSelected}\n      isHovered={isHovered}\n      disabled={state === 'disabled'}\n      data-selection-bottom={isSelectionBottom}\n      data-selection-top={isSelectionTop}\n      onClick={handleClick}\n    >\n      <div\n        // eslint-disable-next-line react/jsx-no-bind\n        onMouseEnter={() => setHovered(true)}\n        // eslint-disable-next-line react/jsx-no-bind\n        onMouseLeave={() => setHovered(false)}\n      >\n        <Flex align=\"stretch\">\n          <IconWrapper align=\"center\">\n            <IconBox padding={2}>\n              <Text size={2}>{iconComponent && createElement(iconComponent)}</Text>\n            </IconBox>\n          </IconWrapper>\n\n          <Stack space={2} margin={2}>\n            <Box>\n              <EventLabel size={1} weight=\"medium\">\n                {formatTimelineEventLabel(type) || <code>{type}</code>}\n              </EventLabel>\n            </Box>\n            <Text size={0} muted>\n              {timeAgo}\n            </Text>\n          </Stack>\n          <Flex flex={1} justify=\"flex-end\" align=\"center\">\n            <UserAvatarStack maxLength={3} userIds={authorUserIds} />\n          </Flex>\n        </Flex>\n      </div>\n    </Root>\n  )\n}\n","import {Box, Menu, Stack} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const Root = styled(Box)`\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n`\nexport const StackWrapper = styled(Stack)`\n  max-width: 200px;\n`\n\nexport const MenuWrapper = styled(Menu)`\n  overflow: auto;\n  box-sizing: border-box;\n  max-height: calc(100vh - 198px);\n`\n","import React, {useCallback, useEffect, useRef, useState} from 'react'\nimport {Text, Spinner, Flex} from '@sanity/ui'\nimport {Timeline as TimelineModel} from '../../../../datastores'\nimport {Chunk} from '../../../../field'\nimport {TimelineItem} from './timelineItem'\nimport {TimelineItemState} from './types'\nimport {Root, StackWrapper, MenuWrapper} from './timeline.styled'\n\ninterface TimelineProps {\n  timeline: TimelineModel\n  onSelect: (chunk: Chunk) => void\n  onLoadMore: (state: boolean) => void\n\n  /** Are the chunks above the topSelection enabled? */\n  disabledBeforeSelection?: boolean\n  /** The first chunk of the selection. */\n  topSelection: Chunk\n  /** The final chunk of the selection. */\n  bottomSelection: Chunk\n}\n\n// Must be a positive number\nconst LOAD_MORE_OFFSET = 20\n\nexport const Timeline = ({\n  timeline,\n  disabledBeforeSelection,\n  topSelection,\n  bottomSelection,\n  onSelect,\n  onLoadMore,\n}: TimelineProps) => {\n  const rootRef = useRef<HTMLDivElement | null>(null)\n  const listRef = useRef<HTMLDivElement | null>(null)\n  const [loadingElement, setLoadingElement] = useState<HTMLDivElement | null>(null)\n\n  let state: TimelineItemState = disabledBeforeSelection ? 'disabled' : 'enabled'\n\n  const checkIfLoadIsNeeded = useCallback(() => {\n    const rootEl = rootRef.current\n\n    if (loadingElement && rootEl) {\n      const {offsetHeight, scrollTop} = rootEl\n      const bottomPosition = offsetHeight + scrollTop + LOAD_MORE_OFFSET\n      const isVisible = loadingElement.offsetTop < bottomPosition\n\n      if (isVisible) {\n        // @todo: find out why, for some reason, it won't load without RAF wrapper\n        requestAnimationFrame(() => onLoadMore(isVisible))\n      }\n    }\n  }, [onLoadMore, loadingElement])\n\n  // Load whenever it's needed\n  useEffect(checkIfLoadIsNeeded, [checkIfLoadIsNeeded])\n\n  return (\n    <Root ref={rootRef as any} onScroll={checkIfLoadIsNeeded} data-ui=\"timeline\">\n      {timeline.chunkCount === 0 && (\n        <StackWrapper padding={3} space={3}>\n          <Text size={1} weight=\"semibold\">\n            No document history\n          </Text>\n          <Text muted size={1}>\n            When changing the content of the document, the document versions will appear in this\n            menu.\n          </Text>\n        </StackWrapper>\n      )}\n\n      {timeline.chunkCount > 0 && (\n        <MenuWrapper ref={listRef} padding={1} space={0}>\n          {timeline.mapChunks((chunk) => {\n            const isSelectionTop = topSelection === chunk\n            const isSelectionBottom = bottomSelection === chunk\n\n            if (isSelectionTop) {\n              state = 'withinSelection'\n            }\n\n            if (isSelectionBottom) {\n              state = 'selected'\n            }\n\n            const item = (\n              <TimelineItem\n                chunk={chunk}\n                isSelectionBottom={isSelectionBottom}\n                isSelectionTop={isSelectionTop}\n                key={chunk.id}\n                state={state}\n                onSelect={onSelect}\n                type={chunk.type}\n                timestamp={chunk.endTimestamp}\n              />\n            )\n\n            // Flip it back to normal after we've rendered the active one.\n            if (state === 'selected') {\n              state = 'enabled'\n            }\n\n            return item\n          })}\n        </MenuWrapper>\n      )}\n\n      {!timeline.reachedEarliestEntry && (\n        <Flex align=\"center\" justify=\"center\" padding={4} ref={setLoadingElement}>\n          <Spinner muted />\n        </Flex>\n      )}\n    </Root>\n  )\n}\n\nTimeline.displayName = 'Timeline'\n","import {\n  ValidationMarker,\n  Path,\n  SanityDocument,\n  ObjectSchemaType,\n  SanityDocumentLike,\n} from '@sanity/types'\nimport {createContext} from 'react'\nimport {_DocumentLanguageFilterComponent} from '../../../config'\nimport {EditStateFor, TimelineController, Timeline} from '../../../datastores'\nimport {PatchEvent, StateTree} from '../../../form'\nimport {DocumentActionComponent} from '../../actions'\nimport {DocumentBadgeComponent} from '../../badges'\nimport {PaneView, PaneMenuItem, PaneMenuItemGroup} from '../../types'\nimport {DocumentFormNode} from '../../../form/store/types/nodes'\nimport {TimelineMode} from './types'\n\nexport interface DocumentPaneContextValue {\n  actions: DocumentActionComponent[] | null\n  activeViewId: string | null\n  badges: DocumentBadgeComponent[] | null\n  changesOpen: boolean\n  collapsedFieldSets: StateTree<boolean> | undefined\n  collapsedPaths: StateTree<boolean> | undefined\n  compareValue: Partial<SanityDocument> | null\n  connectionState: 'connecting' | 'reconnecting' | 'connected'\n  displayed: Partial<SanityDocument> | null\n  documentId: string\n  documentIdRaw: string\n  documentType: string\n  editState: EditStateFor | null\n  focusPath: Path\n  // TODO: rename this for consistency\n  historyController: TimelineController\n  index: number\n  inspectOpen: boolean\n  menuItemGroups: PaneMenuItemGroup[]\n  menuItems: PaneMenuItem[]\n  onBlur: (blurredPath: Path) => void\n  onChange: (event: PatchEvent) => void\n  onFocus: (pathOrEvent: Path) => void\n  onHistoryClose: () => void\n  onHistoryOpen: () => void\n  onInspectClose: () => void\n  onKeyUp: (event: React.KeyboardEvent<HTMLDivElement>) => void\n  onMenuAction: (item: PaneMenuItem) => void\n  onPaneClose: () => void\n  onPaneSplit?: () => void\n  onPathOpen: (path: Path) => void\n  onSetActiveFieldGroup: (path: Path, groupName: string) => void\n  onSetCollapsedPath: (path: Path, expanded: boolean) => void\n  onSetCollapsedFieldSet: (path: Path, expanded: boolean) => void\n  paneKey: string\n  previewUrl?: string | null\n  ready: boolean\n  schemaType: ObjectSchemaType\n  setTimelineMode: (mode: TimelineMode) => void\n  setTimelineRange(since: string | null, rev: string | null): void\n  source?: string\n  timeline: Timeline\n  timelineMode: TimelineMode\n  title: string | null\n  validation: ValidationMarker[]\n  value: SanityDocumentLike\n  views: PaneView[]\n  formState: DocumentFormNode | null\n  unstable_languageFilter: _DocumentLanguageFilterComponent[]\n}\n\nexport const DocumentPaneContext = createContext<DocumentPaneContextValue | null>(null)\n","import {useContext} from 'react'\nimport {DocumentPaneContext, DocumentPaneContextValue} from './DocumentPaneContext'\n\nexport function useDocumentPane(): DocumentPaneContextValue {\n  const documentPane = useContext(DocumentPaneContext)\n\n  if (!documentPane) {\n    throw new Error('DocumentPane: missing context value')\n  }\n\n  return documentPane\n}\n","import {SelectIcon} from '@sanity/icons'\nimport {useClickOutside, Button, Popover} from '@sanity/ui'\nimport {upperFirst} from 'lodash'\nimport React, {useCallback, useState} from 'react'\nimport styled from 'styled-components'\nimport {Chunk} from '../../../../field'\nimport {useTimeAgo} from '../../../../hooks'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {sinceTimelineProps, revTimelineProps, formatTimelineEventLabel} from './helpers'\nimport {Timeline} from './timeline'\n\ninterface TimelineMenuProps {\n  chunk: Chunk | null\n  mode: 'rev' | 'since'\n}\n\nconst Root = styled(Popover)`\n  & > div {\n    display: flex;\n    flex-direction: column;\n\n    & > [data-ui='Card'] {\n      flex: 1;\n      min-height: 0;\n      display: flex;\n      flex-direction: column;\n\n      /* This is the scrollable container rendered by <Timeline /> */\n      & > div {\n        flex: 1;\n        min-height: 0;\n      }\n    }\n  }\n`\n\nexport function TimelineMenu({chunk, mode}: TimelineMenuProps) {\n  const {historyController, setTimelineRange, setTimelineMode, timeline, ready} = useDocumentPane()\n  const [open, setOpen] = useState(false)\n  const [buttonRef, setButtonRef] = useState<HTMLButtonElement | null>(null)\n  const [menuContent, setMenuContent] = useState<HTMLDivElement | null>(null)\n\n  const handleOpen = useCallback(() => {\n    setTimelineMode(mode)\n    setOpen(true)\n  }, [mode, setTimelineMode])\n\n  const handleClose = useCallback(() => {\n    setTimelineMode('closed')\n    setOpen(false)\n  }, [setTimelineMode])\n\n  const handleClickOutside = useCallback(() => {\n    handleClose()\n  }, [handleClose])\n\n  useClickOutside(handleClickOutside, [menuContent, buttonRef])\n\n  const selectRev = useCallback(\n    (revChunk: Chunk) => {\n      const [sinceId, revId] = historyController.findRangeForNewRev(revChunk)\n      setTimelineMode('closed')\n      setOpen(false)\n      setTimelineRange(sinceId, revId)\n    },\n    [historyController, setTimelineMode, setTimelineRange]\n  )\n\n  const selectSince = useCallback(\n    (sinceChunk: Chunk) => {\n      const [sinceId, revId] = historyController.findRangeForNewSince(sinceChunk)\n      setTimelineMode('closed')\n      setOpen(false)\n      setTimelineRange(sinceId, revId)\n    },\n    [historyController, setTimelineMode, setTimelineRange]\n  )\n\n  const loadMoreHistory = useCallback(\n    (state: boolean) => {\n      historyController.setLoadMore(state)\n    },\n    [historyController]\n  )\n\n  const content = open && (\n    <div ref={setMenuContent}>\n      {mode === 'rev' ? (\n        <Timeline\n          onSelect={selectRev}\n          onLoadMore={loadMoreHistory}\n          timeline={timeline}\n          {...revTimelineProps(historyController.realRevChunk)}\n        />\n      ) : (\n        <Timeline\n          onSelect={selectSince}\n          onLoadMore={loadMoreHistory}\n          timeline={timeline}\n          {...sinceTimelineProps(historyController.sinceTime!, historyController.realRevChunk)}\n        />\n      )}\n    </div>\n  )\n\n  const timeAgo = useTimeAgo(chunk?.endTimestamp || '', {agoSuffix: true})\n\n  const revLabel = chunk\n    ? `${upperFirst(formatTimelineEventLabel(chunk.type))} ${timeAgo}`\n    : 'Current version'\n\n  const sinceLabel = chunk\n    ? `Since ${formatTimelineEventLabel(chunk.type)} ${timeAgo}`\n    : 'Since unknown version'\n\n  const openLabel = mode === 'rev' ? 'Select version' : 'Review changes since'\n  const buttonLabel = mode === 'rev' ? revLabel : sinceLabel\n\n  return (\n    <Root\n      constrainSize\n      content={content}\n      data-ui=\"versionMenu\"\n      open={open}\n      portal\n      referenceElement={buttonRef}\n    >\n      <Button\n        disabled={!ready}\n        mode=\"bleed\"\n        fontSize={1}\n        padding={2}\n        iconRight={SelectIcon}\n        onClick={open ? handleClose : handleOpen}\n        ref={setButtonRef}\n        selected={open}\n        text={open ? openLabel : buttonLabel}\n      />\n    </Root>\n  )\n}\n","import {AnnotationDetails, visitDiff, Diff} from '../../../../field'\n\nexport function collectLatestAuthorAnnotations(diff: Diff): AnnotationDetails[] {\n  const authorMap = new Map<string, AnnotationDetails>()\n  visitDiff(diff, (child) => {\n    if (child.action === 'unchanged' || !('annotation' in child) || !child.annotation) {\n      return true\n    }\n\n    const {author, timestamp} = child.annotation\n    const previous = authorMap.get(author)\n    if (!previous || previous.timestamp < timestamp) {\n      authorMap.set(author, child.annotation)\n    }\n\n    return true\n  })\n\n  return Array.from(authorMap.values()).sort((a, b) => (a.timestamp < b.timestamp ? 1 : -1))\n}\n","import React from 'react'\nimport {Box, Flex, Spinner, Text} from '@sanity/ui'\n\nexport function LoadingContent() {\n  return (\n    <Flex align=\"center\" justify=\"center\">\n      <Spinner muted />\n      <Box marginTop={3}>\n        <Text align=\"center\">Loading changes…</Text>\n      </Box>\n    </Flex>\n  )\n}\n","import {CloseIcon} from '@sanity/icons'\nimport {AvatarStack, BoundaryElementProvider, Box, Button, Flex} from '@sanity/ui'\nimport React, {useRef} from 'react'\nimport styled from 'styled-components'\nimport {ObjectDiff} from '@sanity/diff'\nimport {\n  DocumentChangeContextInstance,\n  DiffTooltip,\n  NoChanges,\n  DocumentChangeContext,\n  ChangeList,\n} from '../../../../field'\nimport {PaneContent, PaneHeader, usePane} from '../../../components'\nimport {TimelineMenu} from '../timeline'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {ScrollContainer} from '../../../../components/scroll'\nimport {ChangeFieldWrapper} from '../../../../components/changeIndicators'\nimport {UserAvatar} from '../../../../components/UserAvatar'\nimport {collectLatestAuthorAnnotations} from './helpers'\nimport {LoadingContent} from './content/LoadingContent'\n\nconst Scroller = styled(ScrollContainer)`\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  scroll-behavior: smooth;\n`\n\nexport function ChangesPanel(): React.ReactElement | null {\n  const {documentId, onHistoryClose, historyController, schemaType, value} = useDocumentPane()\n  const {collapsed} = usePane()\n  const scrollRef = useRef<HTMLDivElement | null>(null)\n  const historyState = historyController.selectionState\n  const loading = historyState === 'loading'\n  const since = historyController.sinceTime\n  const diff: ObjectDiff<any> | null = historyController.currentObjectDiff()\n  const isComparingCurrent = !historyController.onOlderRevision()\n\n  const documentContext: DocumentChangeContextInstance = React.useMemo(\n    () => ({\n      documentId,\n      schemaType,\n      FieldWrapper: ChangeFieldWrapper,\n      rootDiff: diff,\n      isComparingCurrent,\n      value,\n    }),\n    [documentId, diff, isComparingCurrent, schemaType, value]\n  )\n\n  const changeAnnotations = React.useMemo(\n    () => (diff ? collectLatestAuthorAnnotations(diff) : []),\n    [diff]\n  )\n\n  if (collapsed) {\n    return null\n  }\n\n  return (\n    <Flex\n      direction=\"column\"\n      flex={1}\n      style={{\n        borderLeft: '1px dashed var(--card-border-color)',\n        overflow: 'hidden',\n        minWidth: 320,\n      }}\n      data-testid=\"review-changes-pane\"\n    >\n      <PaneHeader\n        actions={\n          <Button\n            icon={CloseIcon}\n            mode=\"bleed\"\n            onClick={onHistoryClose}\n            padding={3}\n            title=\"Hide changes panel\"\n          />\n        }\n        subActions={\n          changeAnnotations.length > 0 && (\n            <Box paddingRight={1}>\n              <DiffTooltip\n                annotations={changeAnnotations}\n                description=\"Changes by\"\n                placement=\"bottom-end\"\n              >\n                <AvatarStack maxLength={4}>\n                  {changeAnnotations.map(({author}) => (\n                    <UserAvatar key={author} user={author} />\n                  ))}\n                </AvatarStack>\n              </DiffTooltip>\n            </Box>\n          )\n        }\n        tabs={<TimelineMenu mode=\"since\" chunk={since} />}\n        title=\"Changes\"\n      />\n\n      <PaneContent>\n        <BoundaryElementProvider element={scrollRef.current}>\n          <Scroller data-ui=\"Scroller\" ref={scrollRef}>\n            <Box flex={1} padding={4}>\n              <Content diff={diff} documentContext={documentContext} loading={loading} />\n            </Box>\n          </Scroller>\n        </BoundaryElementProvider>\n      </PaneContent>\n    </Flex>\n  )\n}\n\nfunction Content({\n  diff,\n  documentContext,\n  loading,\n}: {\n  diff: ObjectDiff<any> | null\n  documentContext: DocumentChangeContextInstance\n  loading: boolean\n}) {\n  const {schemaType} = useDocumentPane()\n\n  if (loading) {\n    return <LoadingContent />\n  }\n\n  if (!diff) {\n    return <NoChanges />\n  }\n\n  return (\n    <DocumentChangeContext.Provider value={documentContext}>\n      <ChangeList diff={diff} schemaType={schemaType} />\n    </DocumentChangeContext.Provider>\n  )\n}\n","import {useCallback, useEffect, useMemo, useState} from 'react'\nimport {useSettingsStore} from '../datastores'\n\n/**\n * @internal\n */\nexport function useDeskToolSetting<ValueType>(\n  namespace: string | null,\n  key: string,\n  defaultValue?: ValueType\n): [ValueType | undefined, (_value: ValueType) => void] {\n  const settingsStore = useSettingsStore()\n  const [value, setValue] = useState<ValueType | undefined>(defaultValue)\n\n  const deskToolSettings = useMemo(() => settingsStore.forNamespace('desk-tool'), [settingsStore])\n\n  const settings = useMemo(() => {\n    if (namespace) {\n      return deskToolSettings.forNamespace(namespace).forKey(key)\n    }\n\n    return deskToolSettings.forKey(key)\n  }, [deskToolSettings, namespace, key])\n\n  useEffect(() => {\n    const sub = settings.listen(defaultValue).subscribe({\n      next: setValue as any,\n    })\n\n    return () => sub?.unsubscribe()\n  }, [defaultValue, key, namespace, settings])\n\n  const set = useCallback(\n    (newValue: ValueType) => {\n      setValue(newValue)\n      settings.set(newValue as any)\n    },\n    [settings]\n  )\n\n  return useMemo(() => [value, set], [set, value])\n}\n","export const VIEW_MODE_PARSED = {id: 'parsed', title: 'Parsed'}\nexport const VIEW_MODE_RAW = {id: 'raw', title: 'Raw JSON'}\nexport const VIEW_MODES = [VIEW_MODE_PARSED, VIEW_MODE_RAW]\n","import {SanityDocumentLike} from '@sanity/types'\nimport HLRU from 'hashlru'\nimport {isRecord, isString} from '../../../../util'\n\nconst lru = HLRU(1000)\n\nexport function isExpanded(keyPath: any, value: any): any {\n  const cached = lru.get(keyPath)\n\n  if (cached === undefined) {\n    lru.set(keyPath, Array.isArray(value) || isRecord(value))\n    return isExpanded(keyPath, value)\n  }\n\n  return cached\n}\n\nexport function toggleExpanded(event: any): void {\n  const {path} = event\n  const current = lru.get(path)\n\n  if (current === undefined) {\n    // something is wrong\n    return\n  }\n\n  lru.set(path, !current)\n}\n\nexport function selectElement(element: HTMLElement): void {\n  const sel = window.getSelection()\n\n  if (sel) {\n    const range = document.createRange()\n\n    sel.removeAllRanges()\n    range.selectNodeContents(element)\n    sel.addRange(range)\n  }\n}\n\nexport function select(event: any): void {\n  selectElement(event.currentTarget)\n}\n\nexport function maybeSelectAll(event: any): void {\n  const selectAll = event.keyCode === 65 && (event.metaKey || event.ctrlKey)\n\n  if (!selectAll) {\n    return\n  }\n\n  event.preventDefault()\n\n  selectElement(event.currentTarget)\n}\n\nexport function isDocumentLike(value: unknown): value is SanityDocumentLike {\n  return isRecord(value) && isString(value._id) && isString(value._type)\n}\n","import {rem, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const JSONInspectorWrapper = styled.div(({theme}: {theme: Theme}) => {\n  const {color, fonts, space} = theme.sanity\n\n  return css`\n    & .json-inspector,\n    & .json-inspector .json-inspector__selection {\n      font-family: ${fonts.code.family};\n      font-size: ${fonts.code.sizes[2].fontSize}px;\n      line-height: ${fonts.code.sizes[2].lineHeight}px;\n      color: var(--card-code-fg-color);\n    }\n\n    & .json-inspector .json-inspector__leaf {\n      padding-left: ${rem(space[4])};\n    }\n\n    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {\n      padding-top: ${rem(space[3])};\n      padding-left: 0;\n    }\n\n    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {\n      display: none;\n    }\n\n    & .json-inspector .json-inspector__line {\n      display: block;\n      position: relative;\n      cursor: default;\n    }\n\n    & .json-inspector .json-inspector__line::after {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: -200px;\n      right: -50px;\n      bottom: 0;\n      z-index: -1;\n      pointer-events: none;\n    }\n\n    & .json-inspector .json-inspector__line:hover::after {\n      background: var(--card-code-bg-color);\n    }\n\n    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {\n      cursor: pointer;\n    }\n\n    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {\n      content: '▸ ';\n      margin-left: calc(0 - ${rem(space[4])} + 3px);\n      font-size: ${fonts.code.sizes[2].fontSize}px;\n      line-height: ${fonts.code.sizes[2].lineHeight}px;\n    }\n\n    &\n      .json-inspector\n      .json-inspector__leaf_expanded.json-inspector__leaf_composite\n      > .json-inspector__line::before {\n      content: '▾ ';\n      font-size: ${fonts.code.sizes[2].fontSize}px;\n      line-height: ${fonts.code.sizes[2].lineHeight}px;\n    }\n\n    & .json-inspector .json-inspector__radio,\n    & .json-inspector .json-inspector__flatpath {\n      display: none;\n    }\n\n    & .json-inspector .json-inspector__value {\n      margin-left: ${rem(space[4] / 2)};\n    }\n\n    &\n      .json-inspector\n      > .json-inspector__leaf_root\n      > .json-inspector__line\n      > .json-inspector__key\n      + .json-inspector__value {\n      margin: 0;\n    }\n\n    & .json-inspector .json-inspector__key {\n      color: ${color.syntax.property};\n    }\n\n    & .json-inspector .json-inspector__value_helper,\n    & .json-inspector .json-inspector__value_null {\n      color: ${color.syntax.constant};\n    }\n\n    & .json-inspector .json-inspector__not-found {\n      padding-top: ${rem(space[3])};\n    }\n\n    & .json-inspector .json-inspector__value_string {\n      color: ${color.syntax.string};\n    }\n\n    & .json-inspector .json-inspector__value_boolean {\n      color: ${color.syntax.boolean};\n    }\n\n    & .json-inspector .json-inspector__value_number {\n      color: ${color.syntax.number};\n    }\n\n    & .json-inspector .json-inspector__show-original {\n      display: inline-block;\n      padding: 0 6px;\n      cursor: pointer;\n    }\n\n    & .json-inspector .json-inspector__show-original:hover {\n      color: inherit;\n    }\n\n    & .json-inspector .json-inspector__show-original::before {\n      content: '↔';\n    }\n\n    & .json-inspector .json-inspector__show-original:hover::after {\n      content: ' expand';\n    }\n  `\n})\n","import {SearchIcon} from '@sanity/icons'\nimport {TextInput} from '@sanity/ui'\nimport React, {useCallback} from 'react'\n\nexport function Search(props: {onChange: (q: string) => void; query: string}) {\n  const {onChange, query} = props\n\n  const handleChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => onChange(event.target.value),\n    [onChange]\n  )\n\n  return (\n    <TextInput\n      icon={SearchIcon}\n      onChange={handleChange}\n      placeholder=\"Search\"\n      radius={2}\n      value={query || ''}\n    />\n  )\n}\n","import {SanityDocument} from '@sanity/types'\nimport {Card, Code, Dialog, Flex, Tab, TabList, TabPanel} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport JSONInspector from '@rexxars/react-json-inspector'\nimport {DocTitle} from '../../../components'\nimport {useDeskToolSetting} from '../../../useDeskToolSetting'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {VIEW_MODE_PARSED, VIEW_MODE_RAW, VIEW_MODES} from './constants'\nimport {isDocumentLike, isExpanded, maybeSelectAll, select, toggleExpanded} from './helpers'\nimport {JSONInspectorWrapper} from './InspectDialog.styles'\nimport {Search} from './Search'\n\ninterface InspectDialogProps {\n  value: Partial<SanityDocument> | null\n}\n\nexport function InspectDialog(props: InspectDialogProps) {\n  const {value} = props\n  const {onInspectClose, paneKey} = useDocumentPane()\n  const dialogIdPrefix = `${paneKey}_inspect_`\n\n  /* this creates a view mode (the default that it opens with is the parsed tab) that is saved based on the paneKey\n  where the inspect dialog lives.\n  This also means that when a page is loaded, the state of the tabs remains and doesn't revert to the pane tab */\n  const [viewModeId, onViewModeChange] = useDeskToolSetting(\n    'desk-tool',\n    `inspect-view-preferred-view-mode-${paneKey}`,\n    'parsed'\n  )\n\n  /* based on the view mode it shows the right tab content */\n  const viewMode = VIEW_MODES.find((mode) => mode.id === viewModeId)\n\n  const setParsedViewMode = useCallback(() => {\n    onViewModeChange(VIEW_MODE_PARSED.id)\n  }, [onViewModeChange])\n\n  const setRawViewMode = useCallback(() => {\n    onViewModeChange(VIEW_MODE_RAW.id)\n  }, [onViewModeChange])\n\n  return (\n    <Dialog\n      id={`${dialogIdPrefix}dialog`}\n      header={\n        isDocumentLike(value) ? (\n          <>\n            Inspecting{' '}\n            <em>\n              <DocTitle document={value} />\n            </em>\n          </>\n        ) : (\n          <em>No value</em>\n        )\n      }\n      onClose={onInspectClose}\n      width={3}\n    >\n      <Flex direction=\"column\" height=\"fill\">\n        <Card padding={3} shadow={1} style={{position: 'sticky', bottom: 0, zIndex: 3}}>\n          <TabList space={1}>\n            <Tab\n              aria-controls={`${dialogIdPrefix}tabpanel`}\n              fontSize={1}\n              id={`${dialogIdPrefix}tab-${VIEW_MODE_PARSED.id}`}\n              label={VIEW_MODE_PARSED.title}\n              onClick={setParsedViewMode}\n              selected={viewMode === VIEW_MODE_PARSED}\n            />\n            <Tab\n              aria-controls={`${dialogIdPrefix}tabpanel`}\n              fontSize={1}\n              id={`${dialogIdPrefix}tab-${VIEW_MODE_RAW.id}`}\n              label={VIEW_MODE_RAW.title}\n              onClick={setRawViewMode}\n              selected={viewMode === VIEW_MODE_RAW}\n            />\n          </TabList>\n        </Card>\n\n        <TabPanel\n          aria-labelledby={`${dialogIdPrefix}tab-${viewModeId}`}\n          flex={1}\n          id={`${dialogIdPrefix}tabpanel`}\n          overflow=\"auto\"\n          padding={4}\n          style={{outline: 'none'}}\n        >\n          {viewMode === VIEW_MODE_PARSED && (\n            <JSONInspectorWrapper>\n              <JSONInspector\n                data={value}\n                isExpanded={isExpanded}\n                onClick={toggleExpanded}\n                search={Search}\n              />\n            </JSONInspectorWrapper>\n          )}\n\n          {viewMode === VIEW_MODE_RAW && (\n            <Code\n              language=\"json\"\n              tabIndex={0}\n              onKeyDown={maybeSelectAll}\n              onDoubleClick={select}\n              onFocus={select}\n            >\n              {JSON.stringify(value, null, 2)}\n            </Code>\n          )}\n        </TabPanel>\n      </Flex>\n    </Dialog>\n  )\n}\n","import {Box, Button, Card, Container, Flex, Text} from '@sanity/ui'\nimport {WarningOutlineIcon, SyncIcon, CloseIcon} from '@sanity/icons'\nimport React, {memo, useCallback, useMemo} from 'react'\nimport styled from 'styled-components'\nimport {fromString as pathFromString, get as pathGet} from '@sanity/util/paths'\nimport {KeyedSegment, Reference} from '@sanity/types'\nimport {debounceTime, map} from 'rxjs/operators'\nimport {concat, Observable, of} from 'rxjs'\nimport {useMemoObservable} from 'react-rx'\nimport {RouterPaneGroup} from '../../../types'\nimport {useDocumentPreviewStore} from '../../../../datastores'\nimport {DocumentAvailability} from '../../../../preview'\nimport {getPublishedId} from '../../../../util'\nimport {usePaneRouter} from '../../../components'\n\nconst Root = styled(Card)`\n  position: relative;\n  z-index: 50;\n`\n\nconst TextOneLine = styled(Text)`\n  & > * {\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n`\n\ninterface ParentReferenceInfo {\n  loading: boolean\n  result?: {\n    availability: {draft: DocumentAvailability; published: DocumentAvailability}\n    refValue: string | undefined\n  }\n}\n\nexport const ReferenceChangedBanner = memo(() => {\n  const documentPreviewStore = useDocumentPreviewStore()\n  const {params, groupIndex, routerPanesState, replaceCurrent, BackLink} = usePaneRouter()\n  const routerReferenceId = routerPanesState[groupIndex]?.[0].id\n  const parentGroup = routerPanesState[groupIndex - 1] as RouterPaneGroup | undefined\n  const parentSibling = parentGroup?.[0]\n  const parentId = parentSibling?.id\n  const hasHistoryOpen = Boolean(parentSibling?.params?.rev)\n  const parentRefPath = useMemo(() => {\n    return (params?.parentRefPath && pathFromString(params.parentRefPath)) || null\n  }, [params?.parentRefPath])\n\n  /**\n   * Loads information regarding the reference field of the parent pane. This\n   * is only applicable to child references (aka references-in-place).\n   *\n   * It utilizes the pane ID of the parent pane (which is a document ID) along\n   * with the `parentRefPath` router param on the current pane to find the\n   * current value of the reference field on the parent document.\n   *\n   * This is used to compare with the current pane's document ID. If the IDs\n   * don't match then this banner should reveal itself\n   */\n  const referenceInfo = useMemoObservable(\n    (): Observable<ParentReferenceInfo> => {\n      const parentRefPathSegment = parentRefPath?.[0] as string | undefined\n\n      // short-circuit: this document pane is not a child reference pane\n      if (!parentId || !parentRefPathSegment || !parentRefPath) {\n        return of({loading: false})\n      }\n\n      const publishedId = getPublishedId(parentId)\n      const path = pathFromString(parentRefPathSegment)\n\n      // note: observePaths doesn't support keyed path segments, so we need to select the nearest parent\n      const keyedSegmentIndex = path.findIndex(\n        (p): p is KeyedSegment => typeof p == 'object' && '_key' in p\n      )\n\n      return concat(\n        // emit a loading state instantly\n        of({loading: true}),\n        // then emit the values from watching the published ID's path\n        documentPreviewStore\n          .unstable_observePathsDocumentPair(\n            {_type: 'reference', _ref: publishedId},\n            (keyedSegmentIndex === -1 ? path : path.slice(0, keyedSegmentIndex)) as string[][]\n          )\n          .pipe(\n            // this debounce time is needed to prevent flashing banners due to\n            // the router state updating faster than the content-lake state. we\n            // debounce to wait for more emissions because the value pulled\n            // initially could be stale.\n            debounceTime(750),\n            map(\n              ({draft, published}): ParentReferenceInfo => ({\n                loading: false,\n                result: {\n                  availability: {\n                    draft: draft.availability,\n                    published: published.availability,\n                  },\n                  refValue: pathGet<Reference>(draft.snapshot || published.snapshot, parentRefPath)\n                    ?._ref,\n                },\n              })\n            )\n          )\n      )\n    },\n    [parentId, parentRefPath],\n    {loading: true}\n  )\n\n  const handleReloadReference = useCallback(() => {\n    if (referenceInfo.loading) return\n\n    if (referenceInfo.result?.refValue) {\n      replaceCurrent({\n        id: referenceInfo.result.refValue,\n        params: params as Record<string, string>,\n      })\n    }\n  }, [referenceInfo.loading, referenceInfo.result, replaceCurrent, params])\n\n  const shouldHide =\n    // if `parentId` or `parentRefPath` is not present then this banner is n/a\n    !parentId ||\n    !parentRefPath ||\n    // if viewing this pane via history, then hide\n    hasHistoryOpen ||\n    // if loading, hide\n    referenceInfo.loading ||\n    // if the parent document is not available (e.g. due to permission denied or\n    // not found) we don't want to display a warning here, but instead rely on the\n    // parent view to display the appropriate message\n    (!referenceInfo.result?.availability.draft.available &&\n      !referenceInfo.result?.availability.published.available) ||\n    // if the references are the same, then hide the reference changed banner\n    referenceInfo.result?.refValue === routerReferenceId\n\n  if (shouldHide) return null\n\n  return (\n    <Root shadow={1} tone=\"caution\" data-testid=\"reference-changed-banner\">\n      <Container paddingX={4} paddingY={2} sizing=\"border\" width={1}>\n        <Flex align=\"center\">\n          <Text size={1}>\n            <WarningOutlineIcon />\n          </Text>\n\n          {referenceInfo.result?.refValue ? (\n            <>\n              <Box flex={1} marginLeft={3}>\n                <TextOneLine title=\"This reference has changed since you opened it.\" size={1}>\n                  This reference has changed since you opened it.\n                </TextOneLine>\n              </Box>\n              <Box marginLeft={3}>\n                <Button\n                  onClick={handleReloadReference}\n                  icon={SyncIcon}\n                  fontSize={1}\n                  mode=\"ghost\"\n                  padding={2}\n                  space={2}\n                  text=\"Reload reference\"\n                />\n              </Box>\n            </>\n          ) : (\n            <>\n              <Box flex={1} marginLeft={3}>\n                <TextOneLine title=\"This reference has been removed since you opened it.\" size={1}>\n                  This reference has been removed since you opened it.\n                </TextOneLine>\n              </Box>\n              <Box marginLeft={3}>\n                <Button\n                  as={BackLink}\n                  icon={CloseIcon}\n                  fontSize={1}\n                  mode=\"ghost\"\n                  padding={2}\n                  space={2}\n                  text=\"Close reference\"\n                />\n              </Box>\n            </>\n          )}\n        </Flex>\n      </Container>\n    </Root>\n  )\n})\n\nReferenceChangedBanner.displayName = 'ReferenceChangedBanner'\n","import React from 'react'\nimport {Box, Card, Container, Flex, Text} from '@sanity/ui'\nimport {ReadOnlyIcon} from '@sanity/icons'\nimport styled from 'styled-components'\nimport {useCurrentUser} from '../../../../datastores'\n\nconst Root = styled(Card)`\n  position: relative;\n  z-index: 50;\n`\n\ninterface PermissionCheckBannerProps {\n  granted: boolean\n  requiredPermission: string\n}\n\nexport function PermissionCheckBanner({granted, requiredPermission}: PermissionCheckBannerProps) {\n  const currentUser = useCurrentUser()\n  const plural = currentUser?.roles?.length !== 1\n\n  const roles = join(\n    currentUser?.roles?.map((r) => <code key={r.name}>{r.title}</code>) || [],\n    ', '\n  )\n\n  if (granted) return null\n\n  return (\n    <Root data-testid=\"permission-check-banner\" shadow={1} tone=\"transparent\">\n      <Container paddingX={4} paddingY={3} sizing=\"border\" width={1}>\n        <Flex align=\"flex-start\">\n          <Text size={1}>\n            <ReadOnlyIcon />\n          </Text>\n\n          <Box flex={1} marginLeft={3}>\n            <Text size={1}>\n              Your role{plural && 's'} {roles} {plural ? 'do' : 'does'} not have permissions to{' '}\n              {requiredPermission} this document.\n            </Text>\n          </Box>\n        </Flex>\n      </Container>\n    </Root>\n  )\n}\n\nfunction join<T, S>(array: Array<T>, sep: S): Array<T | S> | null {\n  return array.reduce((result: Array<T | S> | null, item: T | S) => {\n    if (result === null) {\n      return [item]\n    }\n\n    return result.concat([sep, item])\n  }, null)\n}\n","/* eslint-disable no-nested-ternary */\n\nimport {isActionEnabled} from '@sanity/schema/_internal'\nimport {Box, Container, Flex, Spinner, Text} from '@sanity/ui'\nimport React, {useCallback, useEffect, useMemo} from 'react'\nimport {tap} from 'rxjs/operators'\nimport {useDocumentPane} from '../../useDocumentPane'\nimport {Delay} from '../../../../components/Delay'\nimport {useDocumentPresence, useDocumentStore} from '../../../../../datastores'\nimport {\n  createPatchChannel,\n  fromMutationPatches,\n  PatchEvent,\n  PatchMsg,\n  StudioFormBuilder,\n} from '../../../../../form'\nimport {PresenceOverlay} from '../../../../../presence'\nimport {\n  DocumentMutationEvent,\n  DocumentRebaseEvent,\n} from '../../../../../datastores/document/buffered-doc/types'\n\ninterface FormViewProps {\n  granted: boolean\n  hidden: boolean\n  margins: [number, number, number, number]\n}\n\n// interface FormViewState {\n//   filterField: FormBuilderFilterFieldFn\n// }\n\n// const INITIAL_STATE: FormViewState = {\n//   filterField: () => true,\n// }\n\nconst preventDefault = (ev: React.FormEvent) => ev.preventDefault()\n\nexport function FormView(props: FormViewProps) {\n  const {hidden, margins, granted} = props\n\n  const {\n    collapsedFieldSets,\n    collapsedPaths,\n    displayed: value,\n    documentId,\n    documentType,\n    onChange: _handleChange,\n    historyController,\n    validation,\n    ready,\n    // changesOpen,\n    formState,\n    onFocus,\n    onBlur,\n    onSetCollapsedPath,\n    onPathOpen,\n    onSetCollapsedFieldSet,\n    onSetActiveFieldGroup,\n    schemaType,\n  } = useDocumentPane()\n  const documentStore = useDocumentStore()\n  const {revTime: rev} = historyController\n  // const [{filterField}, setState] = useState<FormViewState>(INITIAL_STATE)\n\n  const hasTypeMismatch = value !== null && value._type !== schemaType.name\n  const isNonExistent = !value || !value._id\n  const presence = useDocumentPresence(documentId)\n\n  // The `patchChannel` is an INTERNAL publish/subscribe channel that we use to notify form-builder\n  // nodes about both remote and local patches.\n  // - Used by the Portable Text input to modify selections.\n  // - Used by `withDocument` to reset value.\n  const patchChannel = useMemo(() => createPatchChannel(), [])\n\n  const isReadOnly = useMemo(() => {\n    return (\n      formState === null ||\n      formState.readOnly ||\n      !ready ||\n      rev !== null ||\n      !granted ||\n      !isActionEnabled(schemaType, 'update') ||\n      (isNonExistent && !isActionEnabled(schemaType, 'create'))\n    )\n  }, [formState, ready, rev, granted, isNonExistent, schemaType])\n\n  const handleChange = useCallback(\n    (patchEvent: PatchEvent) => {\n      if (!isReadOnly) _handleChange(patchEvent)\n    },\n    [_handleChange, isReadOnly]\n  )\n\n  // useEffect(() => {\n  //   if (!filterFieldFn$) return undefined\n\n  //   const sub = filterFieldFn$.subscribe((nextFilterField) =>\n  //     setState({filterField: nextFilterField})\n  //   )\n\n  //   return () => sub.unsubscribe()\n  // }, [])\n\n  useEffect(() => {\n    const sub = documentStore.pair\n      .documentEvents(documentId, documentType)\n      .pipe(\n        tap((event) => {\n          if (event.type === 'mutation') {\n            patchChannel.publish(prepareMutationEvent(event))\n          }\n\n          if (event.type === 'rebase') {\n            patchChannel.publish(prepareRebaseEvent(event))\n          }\n        })\n      )\n      .subscribe()\n\n    return () => {\n      sub.unsubscribe()\n    }\n  }, [documentId, documentStore, documentType, patchChannel])\n\n  const hasRev = Boolean(value?._rev)\n  useEffect(() => {\n    if (hasRev) {\n      // this is a workaround for an issue that caused the document pushed to withDocument to get\n      // stuck at the first initial value.\n      // This effect is triggered only when the document goes from not having a revision, to getting one\n      // so it will kick in as soon as the document is received from the backend\n      patchChannel.publish({\n        type: 'mutation',\n        patches: [],\n        snapshot: value,\n      })\n    }\n    // React to changes in hasRev only\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [hasRev])\n\n  // const after = useMemo(\n  //   () =>\n  //     Array.isArray(afterEditorComponents) &&\n  //     afterEditorComponents.map(\n  //       (AfterEditorComponent: React.ComponentType<{documentId: string}>, idx: number) => (\n  //         <AfterEditorComponent key={String(idx)} documentId={documentId} />\n  //       )\n  //     ),\n  //   [documentId]\n  // )\n\n  return (\n    <Container\n      hidden={hidden}\n      paddingX={4}\n      paddingTop={5}\n      paddingBottom={9}\n      sizing=\"border\"\n      width={1}\n    >\n      <PresenceOverlay margins={margins}>\n        <Box as=\"form\" onSubmit={preventDefault}>\n          {ready ? (\n            formState === null ? (\n              <Box padding={2}>\n                <Text>This form is hidden</Text>\n              </Box>\n            ) : (\n              <StudioFormBuilder\n                __internal_patchChannel={patchChannel}\n                collapsedFieldSets={collapsedFieldSets}\n                collapsedPaths={collapsedPaths}\n                focusPath={formState.focusPath}\n                changed={formState.changed}\n                focused={formState.focused}\n                groups={formState.groups}\n                id=\"root\"\n                members={formState.members}\n                onChange={handleChange}\n                onFieldGroupSelect={onSetActiveFieldGroup}\n                onPathBlur={onBlur}\n                onPathFocus={onFocus}\n                onPathOpen={onPathOpen}\n                onSetFieldSetCollapsed={onSetCollapsedFieldSet}\n                onSetPathCollapsed={onSetCollapsedPath}\n                presence={presence}\n                readOnly={isReadOnly}\n                schemaType={formState.schemaType}\n                validation={validation}\n                value={formState.value}\n              />\n            )\n          ) : (\n            <Delay ms={300}>\n              <Flex align=\"center\" direction=\"column\" height=\"fill\" justify=\"center\">\n                <Spinner muted />\n\n                <Box marginTop={3}>\n                  <Text align=\"center\" muted size={1}>\n                    Loading document\n                  </Text>\n                </Box>\n              </Flex>\n            </Delay>\n          )}\n        </Box>\n      </PresenceOverlay>\n    </Container>\n  )\n}\n\nfunction prepareMutationEvent(event: DocumentMutationEvent): PatchMsg {\n  const patches = event.mutations.map((mut) => mut.patch).filter(Boolean)\n\n  return {\n    type: 'mutation',\n    snapshot: event.document,\n    patches: fromMutationPatches(event.origin, patches),\n  }\n}\n\nfunction prepareRebaseEvent(event: DocumentRebaseEvent): PatchMsg {\n  const remotePatches = event.remoteMutations.map((mut) => mut.patch).filter(Boolean)\n  const localPatches = event.localMutations.map((mut) => mut.patch).filter(Boolean)\n\n  return {\n    type: 'rebase',\n    snapshot: event.document,\n    patches: fromMutationPatches('remote', remotePatches).concat(\n      fromMutationPatches('local', localPatches)\n    ),\n  }\n}\n","import React, {useCallback} from 'react'\nimport {Tab, TabList} from '@sanity/ui'\nimport {useDocumentPane} from '../../useDocumentPane'\nimport {usePaneRouter} from '../../../../components'\n\nexport function DocumentHeaderTabs() {\n  const {activeViewId, paneKey, views} = useDocumentPane()\n  const tabPanelId = `${paneKey}tabpanel`\n\n  return (\n    <TabList space={1}>\n      {views.map((view, index) => (\n        <DocumentHeaderTab\n          icon={view.icon}\n          id={`${paneKey}tab-${view.id}`}\n          isActive={activeViewId === view.id}\n          key={view.id}\n          label={<>{view.title}</>}\n          tabPanelId={tabPanelId}\n          viewId={index === 0 ? null : view.id ?? null}\n        />\n      ))}\n    </TabList>\n  )\n}\n\nfunction DocumentHeaderTab(props: {\n  icon?: React.ComponentType | React.ReactNode\n  id: string\n  isActive: boolean\n  label: React.ReactNode\n  tabPanelId: string\n  viewId: string | null\n}) {\n  const {icon, id, isActive, label, tabPanelId, viewId} = props\n  const {ready} = useDocumentPane()\n  const {setView} = usePaneRouter()\n  const handleClick = useCallback(() => setView(viewId), [setView, viewId])\n\n  return (\n    <Tab\n      aria-controls={tabPanelId}\n      disabled={!ready}\n      fontSize={1}\n      icon={icon}\n      id={id}\n      selected={isActive}\n      label={label as any}\n      onClick={handleClick}\n    />\n  )\n}\n","import {ValidationMarker, Path} from '@sanity/types'\nimport React, {useCallback, useMemo} from 'react'\nimport {WarningOutlineIcon, ErrorOutlineIcon, InfoOutlineIcon} from '@sanity/icons'\nimport {Box, Text, MenuItem, Stack, Flex, ButtonTone} from '@sanity/ui'\nimport styled from 'styled-components'\n\ninterface ValidationListItemProps {\n  marker: ValidationMarker\n  onClick?: (path?: Path) => void\n  path: string\n  truncate?: boolean\n}\n\nconst StyledText = styled(Text)`\n  white-space: initial;\n`\n\nconst MENU_ITEM_TONES: Record<'error' | 'warning' | 'info', ButtonTone> = {\n  error: 'critical',\n  warning: 'caution',\n  info: 'primary',\n}\n\nexport function ListItem(props: ValidationListItemProps) {\n  const {marker, onClick, path, truncate} = props\n\n  const handleClick = useCallback(() => {\n    if (onClick) {\n      onClick(marker.path)\n    }\n  }, [marker.path, onClick])\n\n  const menuItemTone = MENU_ITEM_TONES[marker?.level] || undefined\n\n  const children = (\n    <Flex>\n      <Box>\n        <Text size={1}>\n          {marker.level === 'error' && <ErrorOutlineIcon />}\n          {marker.level === 'warning' && <WarningOutlineIcon />}\n          {marker.level === 'info' && <InfoOutlineIcon />}\n        </Text>\n      </Box>\n\n      <Stack space={2} flex={1} paddingLeft={3}>\n        {path && (\n          <StyledText size={1} weight=\"semibold\">\n            {path}\n          </StyledText>\n        )}\n        {marker.item.message && (\n          <StyledText muted size={1} textOverflow={truncate ? 'ellipsis' : undefined}>\n            {marker.item.message}\n          </StyledText>\n        )}\n      </Stack>\n    </Flex>\n  )\n  return (\n    <MenuItem padding={1} onClick={handleClick} radius={2} tone={menuItemTone}>\n      <Box padding={2}>{children}</Box>\n    </MenuItem>\n  )\n}\n","import React, {useCallback} from 'react'\nimport {\n  ObjectSchemaType,\n  Path,\n  ValidationMarker,\n  isValidationErrorMarker,\n  isValidationWarningMarker,\n  isValidationInfoMarker,\n} from '@sanity/types'\nimport {Container} from '@sanity/ui'\nimport {ListItem} from './listItem'\n\nexport interface ValidationListProps {\n  documentType?: ObjectSchemaType\n  kind?: 'simple'\n  validation: ValidationMarker[]\n  onFocus?: (path: Path) => void\n  onClose?: () => void\n  truncate?: boolean\n}\n\nexport function ValidationList(props: ValidationListProps) {\n  const {documentType, kind, validation, onFocus, onClose, truncate} = props\n  const errors = validation.filter(isValidationErrorMarker)\n  const warnings = validation.filter(isValidationWarningMarker)\n  const info = validation.filter(isValidationInfoMarker)\n\n  const handleClick = useCallback(\n    (path: Path = []) => {\n      if (onFocus) onFocus(path)\n      if (onClose) onClose()\n    },\n    [onFocus, onClose]\n  )\n\n  const resolvePathTitle = (path: Path) => {\n    const fields = documentType && documentType.fields\n    const field = fields && fields.find((curr) => curr.name === path[0])\n\n    return (field && field.type.title) || ''\n  }\n\n  const hasErrors = errors.length > 0\n  const hasWarnings = warnings.length > 0\n  const hasInfo = info.length > 0\n\n  if (!hasErrors && !hasWarnings && !hasInfo) {\n    return null\n  }\n\n  return (\n    <Container width={0} data-kind={kind} data-testid=\"validation-list\">\n      {hasErrors &&\n        errors.map((_error, i) => (\n          <ListItem\n            // eslint-disable-next-line react/no-array-index-key\n            key={i}\n            truncate={truncate}\n            path={resolvePathTitle(_error.path)}\n            marker={_error}\n            onClick={handleClick}\n          />\n        ))}\n      {hasWarnings &&\n        warnings.map((_warning, i) => (\n          <ListItem\n            // eslint-disable-next-line react/no-array-index-key\n            key={i}\n            truncate={truncate}\n            path={resolvePathTitle(_warning.path)}\n            marker={_warning}\n            onClick={handleClick}\n          />\n        ))}\n      {hasInfo &&\n        info.map((_info, i) => (\n          <ListItem\n            // eslint-disable-next-line react/no-array-index-key\n            key={i}\n            truncate={truncate}\n            path={resolvePathTitle(_info.path)}\n            marker={_info}\n            onClick={handleClick}\n          />\n        ))}\n    </Container>\n  )\n}\n","import {useId} from '@reach/auto-id'\nimport {ErrorOutlineIcon, InfoOutlineIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {\n  isValidationInfoMarker,\n  isValidationWarningMarker,\n  isValidationErrorMarker,\n} from '@sanity/types'\nimport {Button, ButtonProps, Menu, MenuButton} from '@sanity/ui'\nimport React, {useCallback, useMemo} from 'react'\nimport {ValidationList} from '../../../../../components/validation'\nimport {useDocumentPane} from '../../useDocumentPane'\n\nexport interface ValidationMenuProps {\n  boundaryElement: HTMLDivElement | null\n  isOpen: boolean\n  setOpen: (val: boolean) => void\n}\n\nconst BUTTON_PROPS: Record<'error' | 'warning' | 'info', ButtonProps> = {\n  error: {\n    tone: 'critical',\n    icon: ErrorOutlineIcon,\n  },\n  warning: {\n    tone: 'caution',\n    icon: WarningOutlineIcon,\n  },\n  info: {\n    tone: 'primary',\n    icon: InfoOutlineIcon,\n  },\n}\n\nexport function ValidationMenu(props: ValidationMenuProps) {\n  const {boundaryElement, isOpen, setOpen} = props\n  const {onFocus, onPathOpen, schemaType, validation} = useDocumentPane()\n  const id = useId()\n  const hasValidationMarkers = validation.length > 0\n  const hasErrorMarkers = validation.some(isValidationErrorMarker)\n  const hasWarningMarkers = validation.some(isValidationWarningMarker)\n  const hasInfoMarkers = validation.some(isValidationInfoMarker)\n\n  const buttonProps = useMemo(() => {\n    if (hasErrorMarkers) return BUTTON_PROPS.error\n    if (hasWarningMarkers) return BUTTON_PROPS.warning\n    if (hasInfoMarkers) return BUTTON_PROPS.info\n    return undefined\n  }, [hasErrorMarkers, hasInfoMarkers, hasWarningMarkers])\n\n  const handleClose = useCallback(() => setOpen(false), [setOpen])\n\n  if (!hasValidationMarkers) return null\n\n  return (\n    <MenuButton\n      id={id || ''}\n      button={\n        <Button\n          {...buttonProps}\n          title=\"Show validation issues\"\n          mode=\"bleed\"\n          data-testid=\"validation-list-button\"\n        />\n      }\n      menu={\n        <Menu open={isOpen}>\n          <ValidationList\n            documentType={schemaType}\n            validation={validation}\n            onClose={handleClose}\n            onFocus={onPathOpen}\n          />\n        </Menu>\n      }\n      popover={{\n        portal: true,\n        boundaryElement: boundaryElement,\n        constrainSize: true,\n        preventOverflow: true,\n        width: 0,\n      }}\n      placement=\"bottom-end\"\n    />\n  )\n}\n","import React, {ReactElement} from 'react'\nimport {useDocumentPane} from '../../useDocumentPane'\nimport {unstable_useDocumentPreview as useDocumentPreview} from '../../../../../preview'\n\nexport function DocumentHeaderTitle(): ReactElement {\n  const {connectionState, schemaType, title, value: documentValue} = useDocumentPane()\n  const subscribed = Boolean(documentValue) && connectionState === 'connected'\n\n  const {error, value} = useDocumentPreview({\n    enabled: subscribed,\n    schemaType,\n    value: documentValue,\n  })\n\n  if (connectionState !== 'connected') {\n    return <></>\n  }\n\n  if (!documentValue) {\n    return <>New {schemaType?.title || schemaType?.name}</>\n  }\n\n  if (subscribed) {\n    if (error) {\n      return <>Error: {error.message}</>\n    }\n\n    return (\n      <>{value?.title || <span style={{color: 'var(--card-muted-fg-color)'}}>Untitled</span>}</>\n    )\n  }\n\n  return <>{title}</>\n}\n","import {ArrowLeftIcon, CloseIcon, SplitVerticalIcon} from '@sanity/icons'\nimport {Button, Inline} from '@sanity/ui'\nimport {negate} from 'lodash'\nimport React, {createElement, memo, forwardRef, useMemo} from 'react'\nimport {PaneMenuItem} from '../../../../types'\nimport {PaneHeader, PaneContextMenuButton, usePaneRouter} from '../../../../components'\nimport {TimelineMenu} from '../../timeline'\nimport {useDocumentPane} from '../../useDocumentPane'\nimport {useDeskTool} from '../../../../useDeskTool'\nimport {DocumentHeaderTabs} from './DocumentHeaderTabs'\nimport {ValidationMenu} from './ValidationMenu'\nimport {DocumentHeaderTitle} from './DocumentHeaderTitle'\n\nexport interface DocumentPanelHeaderProps {\n  // TODO:\n  // eslint-disable-next-line react/no-unused-prop-types\n  rootElement: HTMLDivElement | null\n}\n\nconst isActionButton = (item: PaneMenuItem) => Boolean(item.showAsAction)\nconst isMenuButton = negate(isActionButton)\n\nexport const DocumentPanelHeader = memo(\n  forwardRef(({rootElement}: DocumentPanelHeaderProps, ref: React.ForwardedRef<HTMLDivElement>) => {\n    const {\n      onMenuAction,\n      onPaneClose,\n      onPaneSplit,\n      historyController,\n      validation,\n      menuItems,\n      menuItemGroups,\n      schemaType,\n      ready,\n      views,\n      unstable_languageFilter,\n    } = useDocumentPane()\n    const {revTime: rev} = historyController\n    const {features} = useDeskTool()\n    const {index, BackLink, hasGroupSiblings} = usePaneRouter()\n    const contextMenuItems = useMemo(() => menuItems.filter(isMenuButton), [menuItems])\n    const [isValidationOpen, setValidationOpen] = React.useState<boolean>(false)\n    const showTabs = views.length > 1\n    const showVersionMenu = features.reviewChanges\n\n    // there are three kinds of buttons possible:\n    //\n    // 1. split pane - creates a new split pane\n    // 2. close split pane — closes the current split pane\n    // 3. close pane group — closes the current pane group\n\n    // show the split pane button if they're enabled and there is more than one\n    // view available to use to create a split view\n    const showSplitPaneButton = features.splitViews && onPaneSplit && views.length > 1\n\n    // show the split pane button close button if the split button is showing\n    // and there is more than one split pane open (aka has-siblings)\n    const showSplitPaneCloseButton = showSplitPaneButton && hasGroupSiblings\n\n    // show the pane group close button if the `showSplitPaneCloseButton` is\n    // _not_ showing (the split pane button replaces the group close button)\n    // and if the back button is not showing (the back button and the close\n    // button) do the same thing and shouldn't be shown at the same time)\n    const showPaneGroupCloseButton = !showSplitPaneCloseButton && !features.backButton\n\n    return (\n      <PaneHeader\n        ref={ref}\n        loading={!ready}\n        title={<DocumentHeaderTitle />}\n        tabs={showTabs && <DocumentHeaderTabs />}\n        backButton={\n          features.backButton &&\n          index > 0 && <Button as={BackLink} data-as=\"a\" icon={ArrowLeftIcon} mode=\"bleed\" />\n        }\n        subActions={showVersionMenu && <TimelineMenu chunk={rev} mode=\"rev\" />}\n        actions={\n          <Inline space={1}>\n            {unstable_languageFilter.length > 0 && (\n              <>\n                {unstable_languageFilter.map((languageFilterComponent, idx) => {\n                  return createElement(languageFilterComponent, {\n                    // eslint-disable-next-line react/no-array-index-key\n                    key: `language-filter-${idx}`,\n                    schemaType,\n                  })\n                })}\n              </>\n            )}\n\n            {validation.length > 0 && (\n              <ValidationMenu\n                boundaryElement={rootElement}\n                isOpen={isValidationOpen}\n                key=\"validation-menu\"\n                setOpen={setValidationOpen}\n              />\n            )}\n\n            <PaneContextMenuButton\n              itemGroups={menuItemGroups}\n              items={contextMenuItems}\n              key=\"context-menu\"\n              onAction={onMenuAction}\n            />\n\n            {showSplitPaneButton && (\n              <Button\n                icon={SplitVerticalIcon}\n                key=\"split-pane-button\"\n                mode=\"bleed\"\n                onClick={onPaneSplit}\n                title=\"Split pane right\"\n              />\n            )}\n\n            {showSplitPaneCloseButton && (\n              <Button\n                icon={CloseIcon}\n                key=\"close-view-button\"\n                mode=\"bleed\"\n                onClick={onPaneClose}\n                title=\"Close split pane\"\n              />\n            )}\n\n            {showPaneGroupCloseButton && (\n              <Button\n                icon={CloseIcon}\n                key=\"close-view-button\"\n                mode=\"bleed\"\n                title=\"Close pane group\"\n                as={BackLink}\n              />\n            )}\n          </Inline>\n        }\n      />\n    )\n  })\n)\n\nDocumentPanelHeader.displayName = 'DocumentPanelHeader'\n","import {BoundaryElementProvider, Flex, PortalProvider, usePortal, useElementRect} from '@sanity/ui'\nimport React, {createElement, useEffect, useMemo, useRef, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport {PaneContent, usePaneLayout} from '../../../components'\nimport {ScrollContainer} from '../../../../components/scroll'\nimport {useDocumentValuePermissions} from '../../../../datastores'\nimport {getPublishedId, getDraftId} from '../../../../util'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {InspectDialog} from '../inspectDialog'\nimport {useSchema} from '../../../../hooks'\nimport {useDeskTool} from '../../../useDeskTool'\nimport {ReferenceChangedBanner} from './ReferenceChangedBanner'\nimport {PermissionCheckBanner} from './PermissionCheckBanner'\nimport {FormView} from './documentViews'\nimport {DocumentPanelHeader} from './header'\n\ninterface DocumentPanelProps {\n  footerHeight: number | null\n  rootElement: HTMLDivElement | null\n  isInspectOpen: boolean\n}\n\nconst Scroller = styled(ScrollContainer)<{$disabled: boolean}>(({$disabled}) => {\n  if ($disabled) {\n    return {height: '100%'}\n  }\n\n  return css`\n    height: 100%;\n    overflow: auto;\n    position: relative;\n    scroll-behavior: smooth;\n    outline: none;\n  `\n})\n\nexport const DocumentPanel = function DocumentPanel(props: DocumentPanelProps) {\n  const {footerHeight, isInspectOpen, rootElement} = props\n  const schema = useSchema()\n  const {\n    activeViewId,\n    displayed,\n    documentId,\n    documentType,\n    editState,\n    value,\n    views,\n    ready,\n    schemaType,\n  } = useDocumentPane()\n  const {collapsed: layoutCollapsed} = usePaneLayout()\n  const parentPortal = usePortal()\n  const {features} = useDeskTool()\n  const [headerElement, setHeaderElement] = useState<HTMLDivElement | null>(null)\n  const headerRect = useElementRect(headerElement)\n  const portalRef = useRef<HTMLDivElement | null>(null)\n  const [documentScrollElement, setDocumentScrollElement] = useState<HTMLDivElement | null>(null)\n\n  const requiredPermission = value._createdAt ? 'update' : 'create'\n  const liveEdit = useMemo(\n    () => Boolean(schema.get(documentType)?.liveEdit),\n    [documentType, schema]\n  )\n  const docId = value._id ? value._id : 'dummy-id'\n  const docPermissionsInput = useMemo(() => {\n    return {\n      ...value,\n      _id: liveEdit ? getPublishedId(docId) : getDraftId(docId),\n    }\n  }, [liveEdit, value, docId])\n  const [permissions, isPermissionsLoading] = useDocumentValuePermissions({\n    document: docPermissionsInput,\n    permission: requiredPermission,\n  })\n\n  const activeView = useMemo(\n    () => views.find((view) => view.id === activeViewId) || views[0] || {type: 'form'},\n    [activeViewId, views]\n  )\n\n  // Use a local portal container when split panes is supported\n  const portalElement: HTMLElement | null = features.splitPanes\n    ? portalRef.current || parentPortal.element\n    : parentPortal.element\n\n  // Calculate the height of the header\n  const margins: [number, number, number, number] = useMemo(() => {\n    if (layoutCollapsed) {\n      return [headerRect?.height || 0, 0, footerHeight ? footerHeight + 2 : 2, 0]\n    }\n\n    return [0, 0, 2, 0]\n  }, [layoutCollapsed, footerHeight, headerRect])\n\n  const formViewHidden = activeView.type !== 'form'\n\n  const activeViewNode = useMemo(\n    () =>\n      activeView.type === 'component' &&\n      activeView.component &&\n      createElement(activeView.component, {\n        document: {\n          draft: editState?.draft || null,\n          displayed: displayed || value,\n          historical: displayed,\n          published: editState?.published || null,\n        },\n        documentId,\n        options: activeView.options,\n        schemaType,\n      }),\n    [activeView, displayed, documentId, editState?.draft, editState?.published, schemaType, value]\n  )\n\n  // Scroll to top as `documentId` changes\n  useEffect(() => {\n    if (!documentScrollElement?.scrollTo) return\n    documentScrollElement.scrollTo(0, 0)\n  }, [documentId, documentScrollElement])\n\n  const inspectDialog = useMemo(() => {\n    return isInspectOpen ? <InspectDialog value={displayed || value} /> : null\n  }, [isInspectOpen, displayed, value])\n\n  return (\n    <Flex direction=\"column\" flex={2} overflow={layoutCollapsed ? undefined : 'hidden'}>\n      <DocumentPanelHeader rootElement={rootElement} ref={setHeaderElement} />\n\n      <PaneContent>\n        <PortalProvider\n          element={portalElement}\n          __unstable_elements={{documentScrollElement: documentScrollElement}}\n        >\n          <BoundaryElementProvider element={documentScrollElement}>\n            {activeView.type === 'form' && !isPermissionsLoading && ready && (\n              <>\n                <PermissionCheckBanner\n                  granted={Boolean(permissions?.granted)}\n                  requiredPermission={requiredPermission}\n                />\n                <ReferenceChangedBanner />\n              </>\n            )}\n\n            <Scroller\n              $disabled={layoutCollapsed || false}\n              data-testid=\"document-panel-scroller\"\n              ref={setDocumentScrollElement}\n            >\n              <FormView\n                hidden={formViewHidden}\n                key={documentId + (ready ? '_ready' : '_pending')}\n                margins={margins}\n                granted={Boolean(permissions?.granted)}\n              />\n              {activeViewNode}\n            </Scroller>\n\n            {inspectDialog}\n\n            <div data-testid=\"document-panel-portal\" ref={portalRef} />\n          </BoundaryElementProvider>\n        </PortalProvider>\n      </PaneContent>\n    </Flex>\n  )\n}\n","import {useToast} from '@sanity/ui'\nimport React, {memo, useEffect} from 'react'\nimport {useDocumentOperationEvent} from '../../../hooks'\nimport {useDocumentPane} from './useDocumentPane'\n\nfunction getOpErrorTitle(op: string): string {\n  if (op === 'delete') {\n    return `An error occurred while attempting to delete this document.\n      This usually means that there are other documents that refers to it.`\n  }\n  if (op === 'unpublish') {\n    return `An error occurred while attempting to unpublish this document.\n      This usually means that there are other documents that refers to it.`\n  }\n  return `An error occurred during ${op}`\n}\n\nfunction getOpSuccessTitle(op: string): string {\n  if (op === 'publish') {\n    return `The document was published`\n  }\n  if (op === 'unpublish') {\n    return `The document was unpublished. A draft has been created from the latest published version.`\n  }\n  if (op === 'discardChanges') {\n    return `All changes since last publish has now been discarded. The discarded draft can still be recovered from history`\n  }\n  if (op === 'delete') {\n    return `This document was deleted. It can still be recovered from history and if you continue editing it will be recreated.`\n  }\n  return `Successfully performed ${op} on document`\n}\n\nconst IGNORE_OPS = ['patch', 'commit']\n\nexport const DocumentOperationResults = memo(function DocumentOperationResults() {\n  const {push: pushToast} = useToast()\n  const {documentId, documentType} = useDocumentPane()\n  const event: any = useDocumentOperationEvent(documentId, documentType)\n\n  useEffect(() => {\n    if (!event) return\n\n    if (event.type === 'error') {\n      pushToast({\n        closable: true,\n        duration: 30000, // 30s\n        status: 'error',\n        title: getOpErrorTitle(event.op),\n        description: (\n          <details>\n            <summary>Details</summary>\n            {event.error.message}\n          </details>\n        ),\n      })\n    }\n\n    if (event.type === 'success' && !IGNORE_OPS.includes(event.op)) {\n      pushToast({\n        closable: true,\n        status: 'success',\n        title: getOpSuccessTitle(event.op),\n      })\n    }\n  }, [event, pushToast])\n\n  return null\n})\n","import {DialogProps, Placement} from '@sanity/ui'\n\nexport const POPOVER_FALLBACK_PLACEMENTS: Placement[] = ['left', 'bottom']\n\nexport const DIALOG_WIDTH_TO_UI_WIDTH: {[key: string]: DialogProps['width']} = {\n  small: 0,\n  medium: 1,\n  large: 2,\n  full: 'auto',\n}\n","import {\n  Box,\n  Button,\n  Flex,\n  Grid,\n  Popover,\n  useClickOutside,\n  useGlobalKeyDown,\n  useLayer,\n} from '@sanity/ui'\nimport React, {useCallback, useState} from 'react'\nimport {DocumentActionConfirmModalProps} from '../../../../actions'\nimport {POPOVER_FALLBACK_PLACEMENTS} from './constants'\n\nexport function ConfirmDialog(props: {\n  modal: DocumentActionConfirmModalProps\n  referenceElement: HTMLElement | null\n}) {\n  const {modal, referenceElement} = props\n\n  return (\n    <Popover\n      content={<ConfirmDialogContent modal={modal} />}\n      fallbackPlacements={POPOVER_FALLBACK_PLACEMENTS}\n      open\n      placement=\"top\"\n      portal\n      preventOverflow\n      referenceElement={referenceElement}\n    />\n  )\n}\n\nfunction ConfirmDialogContent(props: {modal: DocumentActionConfirmModalProps}) {\n  const {modal} = props\n  const {\n    cancelButtonIcon,\n    cancelButtonText,\n    confirmButtonIcon,\n    confirmButtonText,\n    // color,\n    message,\n    onCancel,\n    onConfirm,\n    tone,\n  } = modal\n  const {isTopLayer} = useLayer()\n  const [element, setElement] = useState<HTMLElement | null>(null)\n\n  const handleClickOutside = useCallback(() => {\n    if (isTopLayer) onCancel()\n  }, [isTopLayer, onCancel])\n\n  const handleGlobalKeyDown = useCallback(\n    (event) => {\n      if (event.key === 'Escape' && isTopLayer) onCancel()\n    },\n    [isTopLayer, onCancel]\n  )\n\n  useClickOutside(handleClickOutside, [element])\n  useGlobalKeyDown(handleGlobalKeyDown)\n\n  return (\n    <Flex direction=\"column\" ref={setElement} style={{minWidth: 320 - 16, maxWidth: 400}}>\n      <Box flex={1} overflow=\"auto\" padding={4}>\n        {message}\n      </Box>\n      <Box paddingX={4} paddingY={3} style={{borderTop: '1px solid var(--card-border-color)'}}>\n        <Grid columns={2} gap={2}>\n          <Button\n            icon={cancelButtonIcon}\n            onClick={onCancel}\n            mode=\"ghost\"\n            text={cancelButtonText || 'Cancel'}\n          />\n          <Button\n            icon={confirmButtonIcon}\n            onClick={onConfirm}\n            text={confirmButtonText || 'Confirm'}\n            tone={tone}\n          />\n        </Grid>\n      </Box>\n    </Flex>\n  )\n}\n","import {useId} from '@reach/auto-id'\nimport {Box, Dialog} from '@sanity/ui'\nimport React from 'react'\nimport {LegacyLayerProvider} from '../../../../../components/transitional'\nimport {DocumentActionDialogModalProps} from '../../../../actions'\nimport {DIALOG_WIDTH_TO_UI_WIDTH} from './constants'\n\nexport function ModalDialog(props: {modal: DocumentActionDialogModalProps}) {\n  const {modal} = props\n  const modalId = useId() || ''\n\n  const footer = modal.footer && (\n    <Box paddingX={4} paddingY={3}>\n      {modal.footer}\n    </Box>\n  )\n\n  return (\n    <LegacyLayerProvider zOffset=\"fullscreen\">\n      <Dialog\n        __unstable_hideCloseButton={modal.showCloseButton === false}\n        footer={footer}\n        header={modal.header}\n        id={modalId}\n        // eslint-disable-next-line react/jsx-handler-names\n        onClose={modal.onClose}\n        // eslint-disable-next-line react/jsx-handler-names\n        onClickOutside={modal.onClose}\n        width={modal.width === undefined ? 1 : DIALOG_WIDTH_TO_UI_WIDTH[modal.width]}\n      >\n        <Box padding={4}>{modal.content}</Box>\n      </Dialog>\n    </LegacyLayerProvider>\n  )\n}\n","import {Popover, useClickOutside, useGlobalKeyDown, useLayer} from '@sanity/ui'\nimport React, {useCallback, useState} from 'react'\nimport {DocumentActionPopoverModalProps} from '../../../../actions'\nimport {POPOVER_FALLBACK_PLACEMENTS} from './constants'\n\nexport function PopoverDialog(props: {\n  modal: DocumentActionPopoverModalProps\n  referenceElement: HTMLElement | null\n}) {\n  const {modal, referenceElement} = props\n\n  return (\n    <Popover\n      content={<PopoverDialogContent modal={modal} />}\n      fallbackPlacements={POPOVER_FALLBACK_PLACEMENTS}\n      open\n      placement=\"top\"\n      portal\n      preventOverflow\n      referenceElement={referenceElement}\n    />\n  )\n}\n\nfunction PopoverDialogContent(props: {modal: DocumentActionPopoverModalProps}) {\n  const {modal} = props\n  const {content, onClose} = modal\n  const {isTopLayer} = useLayer()\n  const [element, setElement] = useState<HTMLElement | null>(null)\n\n  const handleClickOutside = useCallback(() => {\n    if (isTopLayer) onClose()\n  }, [isTopLayer, onClose])\n\n  const handleGlobalKeyDown = useCallback(\n    (event) => {\n      if (event.key === 'Escape' && isTopLayer) onClose()\n    },\n    [isTopLayer, onClose]\n  )\n\n  useClickOutside(handleClickOutside, [element])\n  useGlobalKeyDown(handleGlobalKeyDown)\n\n  return <div ref={setElement}>{content}</div>\n}\n","import {useId} from '@reach/auto-id'\nimport {Box, Dialog} from '@sanity/ui'\nimport React from 'react'\nimport {DocumentActionModalProps} from '../../../actions'\nimport {ConfirmDialog} from './dialogs/ConfirmDialog'\n// import {DeprecatedErrorDialog} from './dialogs/DeprecatedErrorDialog'\n// import {DeprecatedSuccessDialog} from './dialogs/DeprecatedSuccessDialog'\nimport {ModalDialog} from './dialogs/ModalDialog'\nimport {PopoverDialog} from './dialogs/PopoverDialog'\n\nexport interface ActionStateDialogProps {\n  modal: DocumentActionModalProps\n  referenceElement?: HTMLElement | null\n}\n\nexport function ActionStateDialog(props: ActionStateDialogProps) {\n  const {modal, referenceElement = null} = props\n  const modalId = useId() || ''\n\n  // @todo: rename this type type \"component\" or \"node\"?\n  // if (modal.type === 'legacy') {\n  //   return <>{modal.content}</>\n  // }\n\n  if (modal.type === 'confirm') {\n    return <ConfirmDialog modal={modal} referenceElement={referenceElement} />\n  }\n\n  if (modal.type === 'dialog') {\n    return <ModalDialog modal={modal} />\n  }\n\n  if (modal.type === 'popover') {\n    return <PopoverDialog modal={modal} referenceElement={referenceElement} />\n  }\n\n  // if (modal.type === 'success') {\n  //   return <DeprecatedSuccessDialog modal={modal} />\n  // }\n\n  // if (modal.type === 'error') {\n  //   return <DeprecatedErrorDialog modal={modal} />\n  // }\n\n  // @todo: add validation?\n  const unknownModal: any = modal\n\n  // eslint-disable-next-line no-console\n  console.warn(`Unsupported modal type ${unknownModal.type}`)\n\n  return (\n    <Dialog\n      id={modalId}\n      // eslint-disable-next-line react/jsx-handler-names\n      onClose={unknownModal.onClose}\n      // eslint-disable-next-line react/jsx-handler-names\n      onClickOutside={unknownModal.onClose}\n      width={2}\n    >\n      <Box padding={4}>\n        {unknownModal.content || (\n          <>\n            Unexpected modal type (<code>{unknownModal.type}</code>)\n          </>\n        )}\n      </Box>\n    </Dialog>\n  )\n}\n","import {useId} from '@reach/auto-id'\nimport {ChevronDownIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Flex,\n  Hotkeys,\n  Menu,\n  MenuButton,\n  MenuItem,\n  PopoverProps,\n  Text,\n  Tooltip,\n} from '@sanity/ui'\nimport React, {createElement, isValidElement, useCallback, useRef, useState, useMemo} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {LegacyLayerProvider} from '../../../../components/transitional'\nimport {DocumentActionDescription} from '../../../actions'\nimport {ActionStateDialog} from './ActionStateDialog'\n\nexport interface ActionMenuButtonProps {\n  actionStates: DocumentActionDescription[]\n  disabled: boolean\n}\n\nexport function ActionMenuButton(props: ActionMenuButtonProps) {\n  const {actionStates, disabled} = props\n  const idPrefix = useId() || ''\n  const buttonRef = useRef<HTMLButtonElement | null>(null)\n  const [actionIndex, setActionIndex] = useState(-1)\n  const [referenceElement, setReferenceElement] = useState<HTMLButtonElement | null>(null)\n\n  const handleAction = useCallback((idx: number) => {\n    setActionIndex(idx)\n  }, [])\n\n  const popoverProps: PopoverProps = useMemo(\n    () => ({\n      placement: 'top-end',\n      portal: true,\n      preventOverflow: true,\n    }),\n    []\n  )\n\n  const currentAction = actionStates[actionIndex]\n\n  return (\n    <>\n      <MenuButton\n        id={`${idPrefix}-action-menu`}\n        button={\n          <Button\n            data-testid=\"action-menu-button\"\n            aria-label=\"Open document actions\"\n            disabled={disabled}\n            icon={ChevronDownIcon}\n            mode=\"ghost\"\n            ref={buttonRef}\n          />\n        }\n        menu={\n          <Menu padding={1}>\n            {actionStates.map((actionState, idx) => (\n              <ActionMenuListItem\n                actionState={actionState}\n                disabled={disabled}\n                index={idx}\n                // eslint-disable-next-line react/no-array-index-key\n                key={idx}\n                onAction={handleAction}\n              />\n            ))}\n          </Menu>\n        }\n        popover={popoverProps}\n        ref={setReferenceElement}\n      />\n\n      {currentAction && currentAction.modal && (\n        <LegacyLayerProvider zOffset=\"paneFooter\">\n          <ActionStateDialog modal={currentAction.modal} referenceElement={referenceElement} />\n        </LegacyLayerProvider>\n      )}\n    </>\n  )\n}\n\ninterface ActionMenuListItemProps {\n  actionState: DocumentActionDescription\n  disabled: boolean\n  index: number\n  onAction: (idx: number) => void\n}\n\nfunction ActionMenuListItem(props: ActionMenuListItemProps) {\n  const {actionState, disabled, index, onAction} = props\n  const {onHandle} = actionState\n\n  const handleClick = useCallback(() => {\n    onAction(index)\n    if (onHandle) onHandle()\n  }, [index, onAction, onHandle])\n\n  const tooltipContent = actionState.title && (\n    <Box padding={2}>\n      <Text size={1}>{actionState.title}</Text>\n    </Box>\n  )\n\n  return (\n    <MenuItem\n      data-testid={`action-${actionState.label.replace(' ', '')}`}\n      disabled={disabled || Boolean(actionState.disabled)}\n      onClick={handleClick}\n      padding={0}\n      tone={actionState.tone}\n    >\n      <Tooltip\n        content={tooltipContent}\n        disabled={!tooltipContent}\n        fallbackPlacements={['left', 'bottom']}\n        placement=\"top\"\n        portal\n      >\n        <Flex align=\"center\" paddingX={3}>\n          <Flex flex={1} paddingY={3}>\n            {actionState.icon && (\n              <Box marginRight={3}>\n                <Text>\n                  {isValidElement(actionState.icon) && actionState.icon}\n                  {isValidElementType(actionState.icon) && createElement(actionState.icon)}\n                </Text>\n              </Box>\n            )}\n\n            <Text>{actionState.label}</Text>\n          </Flex>\n\n          {actionState.shortcut && (\n            <Box marginLeft={3}>\n              <Hotkeys\n                keys={String(actionState.shortcut)\n                  .split('+')\n                  .map((s) => s.slice(0, 1).toUpperCase() + s.slice(1))}\n              />\n            </Box>\n          )}\n        </Flex>\n      </Tooltip>\n    </MenuItem>\n  )\n}\n","import React, {\n  memo,\n  // useCallback,\n  useMemo,\n  useState,\n} from 'react'\nimport {Box, Flex, Tooltip, Stack, Button, Hotkeys, LayerProvider, Text} from '@sanity/ui'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {\n  DocumentActionDescription,\n  RenderActionCollectionState,\n  HistoryRestoreAction,\n} from '../../../actions'\nimport {ActionMenuButton} from './ActionMenuButton'\nimport {ActionStateDialog} from './ActionStateDialog'\n\ninterface DocumentStatusBarActionsInnerProps {\n  disabled: boolean\n  showMenu: boolean\n  states: DocumentActionDescription[]\n}\n\nfunction DocumentStatusBarActionsInner(props: DocumentStatusBarActionsInnerProps) {\n  const {disabled, showMenu, states} = props\n  const [firstActionState, ...menuActionStates] = states\n  const [buttonElement, setButtonElement] = useState<HTMLButtonElement | null>(null)\n\n  const tooltipContent = useMemo(() => {\n    if (!firstActionState || (!firstActionState.title && !firstActionState.shortcut)) return null\n\n    return (\n      <Flex padding={2} style={{maxWidth: 300}} align=\"center\">\n        <Text size={1}>{firstActionState.title}</Text>\n        {firstActionState.shortcut && (\n          <Box marginLeft={firstActionState.title ? 2 : 0}>\n            <Hotkeys\n              keys={String(firstActionState.shortcut)\n                .split('+')\n                .map((s) => s.slice(0, 1).toUpperCase() + s.slice(1).toLowerCase())}\n            />\n          </Box>\n        )}\n      </Flex>\n    )\n  }, [firstActionState])\n\n  return (\n    <Flex>\n      {firstActionState && (\n        <LayerProvider zOffset={200}>\n          <Tooltip disabled={!tooltipContent} content={tooltipContent} portal placement=\"top\">\n            <Stack flex={1}>\n              <Button\n                data-testid={`action-${firstActionState.label}`}\n                disabled={disabled || Boolean(firstActionState.disabled)}\n                icon={firstActionState.icon}\n                // eslint-disable-next-line react/jsx-handler-names\n                onClick={firstActionState.onHandle}\n                ref={setButtonElement}\n                text={firstActionState.label}\n                tone={firstActionState.tone || 'primary'}\n              />\n            </Stack>\n          </Tooltip>\n        </LayerProvider>\n      )}\n\n      {showMenu && menuActionStates.length > 0 && (\n        <Box marginLeft={1}>\n          <ActionMenuButton actionStates={menuActionStates} disabled={disabled} />\n        </Box>\n      )}\n\n      {firstActionState && firstActionState.modal && (\n        <ActionStateDialog modal={firstActionState.modal} referenceElement={buttonElement} />\n      )}\n    </Flex>\n  )\n}\n\nexport const DocumentStatusBarActions = memo(function DocumentStatusBarActions() {\n  const {actions, connectionState, editState} = useDocumentPane()\n  // const [isMenuOpen, setMenuOpen] = useState(false)\n  // const handleMenuOpen = useCallback(() => setMenuOpen(true), [])\n  // const handleMenuClose = useCallback(() => setMenuOpen(false), [])\n  // const handleActionComplete = useCallback(() => setMenuOpen(false), [])\n\n  if (!actions || !editState) {\n    return null\n  }\n\n  return (\n    <RenderActionCollectionState\n      // component={}\n      // onActionComplete={handleActionComplete}\n      actions={actions}\n      // @ts-expect-error TODO: fix the document actions\n      actionProps={editState}\n    >\n      {({states}) => (\n        <DocumentStatusBarActionsInner\n          disabled={connectionState !== 'connected'}\n          // isMenuOpen={isMenuOpen}\n          // onMenuOpen={handleMenuOpen}\n          // onMenuClose={handleMenuClose}\n          showMenu={actions.length > 1}\n          states={states}\n        />\n      )}\n    </RenderActionCollectionState>\n  )\n})\n\nexport const HistoryStatusBarActions = memo(function HistoryStatusBarActions() {\n  const {connectionState, editState, historyController} = useDocumentPane()\n  const revision = historyController.revTime?.id || ''\n  const disabled = (editState?.draft || editState?.published || {})._rev === revision\n  const actionProps = useMemo(() => ({...(editState || {}), revision}), [editState, revision])\n  const historyActions = useMemo(() => [HistoryRestoreAction], [])\n\n  return (\n    <RenderActionCollectionState actions={historyActions} actionProps={actionProps as any}>\n      {({states}) => (\n        <DocumentStatusBarActionsInner\n          disabled={connectionState !== 'connected' || Boolean(disabled)}\n          showMenu={false}\n          states={states}\n        />\n      )}\n    </RenderActionCollectionState>\n  )\n})\n","import React from 'react'\nimport type {EditStateFor} from '../../datastores'\nimport {GetHookCollectionState} from '../actions/GetHookCollectionState'\nimport type {DocumentBadgeDescription, DocumentBadgeProps} from './types'\n\ninterface Badge<Args, Description> {\n  (args: Args): Description | null\n}\n\ninterface RenderBadgeCollectionProps {\n  badges: Badge<DocumentBadgeProps, DocumentBadgeDescription>[]\n  badgeProps: EditStateFor\n  children: (props: {states: DocumentBadgeDescription[]}) => React.ReactNode\n  onActionComplete?: () => void\n}\n\nexport const RenderBadgeCollectionState = (props: RenderBadgeCollectionProps) => {\n  const {badges, children, badgeProps, ...rest} = props\n\n  return (\n    <GetHookCollectionState {...rest} hooks={badges} args={badgeProps}>\n      {children}\n    </GetHookCollectionState>\n  )\n}\n","import type {DocumentBadgeComponent} from '../types'\n\nexport const LiveEditBadge: DocumentBadgeComponent = (props) => {\n  const {liveEdit} = props\n\n  if (liveEdit) {\n    return {\n      label: 'Live',\n      color: 'danger',\n    }\n  }\n\n  return null\n}\n","import {Badge, BadgeTone, Box, Inline, Text, Tooltip} from '@sanity/ui'\nimport React from 'react'\nimport {DocumentBadgeDescription, RenderBadgeCollectionState} from '../../../../badges'\nimport {useDocumentPane} from '../../useDocumentPane'\n\ninterface DocumentBadgesInnerProps {\n  states: DocumentBadgeDescription[]\n}\n\nconst BADGE_TONES: Record<string, BadgeTone | undefined> = {\n  primary: 'primary',\n  success: 'positive',\n  warning: 'caution',\n  danger: 'critical',\n}\n\nfunction DocumentBadgesInner({states}: DocumentBadgesInnerProps) {\n  return (\n    <Inline space={1}>\n      {states.map((badge, index) => (\n        <Tooltip\n          content={\n            badge.title && (\n              <Box padding={2}>\n                <Text size={1}>{badge.title}</Text>\n              </Box>\n            )\n          }\n          disabled={!badge.title}\n          key={String(index)}\n          placement=\"top\"\n          portal\n        >\n          <Badge\n            fontSize={1}\n            mode=\"outline\"\n            paddingX={2}\n            paddingY={1}\n            radius={4}\n            tone={badge.color ? BADGE_TONES[badge.color] : undefined}\n            style={{whiteSpace: 'nowrap'}}\n          >\n            {badge.label}\n          </Badge>\n        </Tooltip>\n      ))}\n    </Inline>\n  )\n}\n\nexport function DocumentBadges() {\n  const {badges, editState} = useDocumentPane()\n\n  if (!editState || !badges) return null\n\n  return (\n    <RenderBadgeCollectionState badges={badges} badgeProps={editState as any}>\n      {({states}) => <DocumentBadgesInner states={states} />}\n    </RenderBadgeCollectionState>\n  )\n}\n","import {Box, Button, Flex, Stack, Text, Tooltip} from '@sanity/ui'\nimport {PlayIcon, PublishIcon} from '@sanity/icons'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {useTimeAgo} from '../../../../../hooks'\n\ninterface PublishStatusProps {\n  collapsed?: boolean\n  disabled: boolean\n  lastPublished?: string\n  lastUpdated?: string\n  liveEdit: boolean\n}\n\nconst Root = styled(Flex)`\n  cursor: default;\n`\n\nexport function PublishStatus(props: PublishStatusProps) {\n  const {collapsed, disabled, lastPublished, lastUpdated, liveEdit} = props\n\n  const lastPublishedTimeAgo = useTimeAgo(lastPublished || '', {minimal: true, agoSuffix: true})\n  const lastPublishedTime = useTimeAgo(lastPublished || '', {minimal: true})\n\n  const lastUpdatedTimeAgo = useTimeAgo(lastUpdated || '', {minimal: true, agoSuffix: true})\n  const lastUpdatedTime = useTimeAgo(lastUpdated || '', {minimal: true})\n\n  return (\n    <Root align=\"center\" data-ui=\"SessionLayout\" sizing=\"border\">\n      <Tooltip\n        portal\n        content={\n          <Stack padding={3} space={3}>\n            <Text size={1} muted>\n              {liveEdit ? (\n                <>Last updated {lastUpdated ? lastUpdatedTimeAgo : lastPublishedTimeAgo}</>\n              ) : (\n                <>Last published {lastPublishedTimeAgo}</>\n              )}\n            </Text>\n          </Stack>\n        }\n      >\n        <Button\n          mode=\"bleed\"\n          tone={liveEdit ? 'critical' : 'positive'}\n          tabIndex={-1}\n          disabled={disabled}\n        >\n          <Flex align=\"center\">\n            <Box marginRight={collapsed ? 0 : 3}>\n              <Text size={2}>{liveEdit ? <PlayIcon /> : <PublishIcon />}</Text>\n            </Box>\n            {!collapsed && (\n              <Text size={1} weight=\"medium\">\n                {liveEdit ? (\n                  <>{lastUpdated ? lastUpdatedTime : lastPublishedTime}</>\n                ) : (\n                  lastPublishedTime\n                )}\n              </Text>\n            )}\n          </Flex>\n        </Button>\n      </Tooltip>\n    </Root>\n  )\n}\n","import React, {ComponentProps} from 'react'\nimport {motion} from 'framer-motion'\nimport styled, {keyframes} from 'styled-components'\n\nconst StyledMotionPath = styled(motion.path)`\n  transform-origin: center;\n`\n\ntype MotionCircleProps = Omit<ComponentProps<typeof motion.circle>, 'd'>\ntype MotionPathProps = Omit<ComponentProps<typeof motion.path>, 'd'>\n\nconst Circle = (props: MotionCircleProps) => (\n  <motion.circle fill=\"none\" r=\"8\" cx=\"12.5\" cy=\"12.5\" strokeWidth=\"1.2\" {...props} />\n)\nconst Arrows = (props: MotionPathProps) => (\n  <StyledMotionPath\n    fill=\"none\"\n    d=\"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811\"\n    {...props}\n  />\n)\nconst Checkmark = (props: MotionPathProps) => (\n  <motion.path d=\"M9.5 12.1316L11.7414 14.5L16 10\" {...props} />\n)\nconst Edit = (props: MotionPathProps) => (\n  <motion.path d=\"M15 7L18 10M6 19L7 15L17 5L20 8L10 18L6 19Z\" {...props} />\n)\n\nconst rotateAnimation = keyframes`\n  0% {\n    transform: rotate(0);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n`\nconst RotateGroup = styled.g`\n  transform-origin: center;\n\n  &[data-rotate] {\n    animation: ${rotateAnimation} 1s ease-in-out infinite;\n  }\n`\n\nconst root = {\n  syncing: {\n    scale: 1,\n    transition: {\n      duration: 0,\n    },\n  },\n  saved: {\n    scale: [1, 0.8, 1.2, 0.9, 1.1, 0.95, 1.05, 0.99, 1],\n    transition: {\n      duration: 0.5,\n      delay: 0.2,\n    },\n  },\n  changes: {transition: {duration: 0}},\n}\n\nconst circle = {\n  syncing: {\n    strokeDasharray: '0, 0, 23, 3, 23, 3',\n    strokeDashoffset: 10,\n    opacity: 1,\n    transition: {\n      duration: 0,\n    },\n  },\n  saved: {\n    strokeDasharray: '0, 0, 23, 0, 23, 0',\n    strokeDashoffset: 10,\n    opacity: 1,\n    transition: {\n      duration: 0.2,\n    },\n  },\n  changes: {\n    strokeDasharray: '0, 60, 23, 0, 23, 0',\n    strokeDashoffset: 0,\n    opacity: 0,\n    transition: {\n      duration: 0.5,\n    },\n  },\n}\n\nconst arrows = {\n  syncing: {\n    opacity: 1,\n    transition: {\n      duration: 0,\n    },\n  },\n  saved: {\n    opacity: 0,\n    transition: {\n      duration: 0.2,\n    },\n  },\n  changes: {\n    opacity: 0,\n  },\n}\n\nconst checkmark = {\n  syncing: {\n    pathLength: 0,\n    transition: {duration: 0},\n  },\n  saved: {\n    pathLength: 1,\n    transition: {\n      delay: 0.4,\n      duration: 0.3,\n    },\n  },\n  changes: {\n    pathLength: 0,\n    transition: {\n      duration: 0.2,\n    },\n  },\n}\n\nconst edit = {\n  syncing: {\n    pathLength: 0,\n    transition: {duration: 0},\n  },\n  saved: {\n    pathLength: 0,\n    transition: {duration: 0},\n  },\n  changes: {\n    pathLength: 1,\n    transition: {\n      duration: 0.4,\n      delay: 0.5,\n    },\n  },\n}\n\ninterface AnimatedStatusIconProps {\n  status?: 'changes' | 'saved' | 'syncing'\n}\n\nexport function AnimatedStatusIcon(props: AnimatedStatusIconProps) {\n  const {status} = props\n\n  if (!status) {\n    return null\n  }\n\n  return (\n    <svg\n      width=\"1em\"\n      height=\"1em\"\n      viewBox=\"0 0 25 25\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.2\"\n      data-sanity-icon=\"\"\n    >\n      <motion.g variants={root} initial={status} animate={status}>\n        <RotateGroup data-rotate={status === 'changes' ? undefined : ''}>\n          <Arrows variants={arrows} initial={status} animate={status} />\n          <Circle variants={circle} initial={status} animate={status} />\n        </RotateGroup>\n        <Checkmark variants={checkmark} initial={status} animate={status} />\n        <Edit variants={edit} initial={status} animate={status} />\n      </motion.g>\n    </svg>\n  )\n}\n","import React, {useMemo} from 'react'\nimport {Box, Button, ButtonProps, Flex, Stack, Text, Tooltip} from '@sanity/ui'\nimport {useTimeAgo} from '../../../../../../hooks'\nimport {AnimatedStatusIcon} from './AnimatedStatusIcon'\n\ninterface ReviewChangesButtonProps extends React.HTMLProps<HTMLButtonElement> {\n  status?: 'changes' | 'saved' | 'syncing'\n  lastUpdated?: string\n  collapsed?: boolean\n}\n\nconst ReviewButton = React.forwardRef(function ReviewButton(\n  props: ReviewChangesButtonProps & ButtonProps,\n  ref: React.ForwardedRef<HTMLButtonElement>\n) {\n  const {collapsed, status, lastUpdated, ...rest} = props\n  const lastUpdatedTime = useTimeAgo(lastUpdated || '', {minimal: true})\n  const lastUpdatedTimeAgo = useTimeAgo(lastUpdated || '', {minimal: true, agoSuffix: true})\n\n  const buttonProps: ButtonProps = useMemo(() => {\n    if (status === 'syncing') {\n      return {\n        text: 'Saving...',\n        tone: undefined,\n      }\n    }\n    if (status === 'changes') {\n      return {\n        text: lastUpdatedTime,\n        tone: 'caution',\n      }\n    }\n    if (status === 'saved') {\n      return {\n        text: 'Saved!',\n        tone: 'positive',\n      }\n    }\n\n    return {}\n  }, [status, lastUpdatedTime])\n\n  if (!status) {\n    return null\n  }\n\n  return (\n    <Tooltip\n      portal\n      disabled={status !== 'changes'}\n      content={\n        <Stack padding={3} space={3}>\n          <Text size={1} weight=\"semibold\">\n            Review changes\n          </Text>\n          <Text size={1} muted>\n            Changes saved {lastUpdatedTimeAgo}\n          </Text>\n        </Stack>\n      }\n    >\n      <Button\n        mode=\"bleed\"\n        justify=\"flex-start\"\n        tone={buttonProps?.tone}\n        {...rest}\n        data-testid=\"review-changes-button\"\n        ref={ref}\n      >\n        <Flex align=\"center\">\n          <Box marginRight={collapsed ? 0 : 3}>\n            <Text>\n              <AnimatedStatusIcon status={status} />\n            </Text>\n          </Box>\n          {!collapsed && (\n            <Text size={1} weight=\"medium\">\n              {buttonProps?.text}\n            </Text>\n          )}\n        </Flex>\n      </Button>\n    </Tooltip>\n  )\n})\n\nexport const ReviewChangesButton = React.memo(ReviewButton)\n","import {Box, Flex, useElementRect} from '@sanity/ui'\nimport React, {useEffect, useMemo, useState, memo, useLayoutEffect} from 'react'\nimport {useSyncState} from '../../../../../hooks'\nimport {useDocumentPane} from '../../useDocumentPane'\nimport {DocumentBadges} from './DocumentBadges'\nimport {PublishStatus} from './PublishStatus'\nimport {ReviewChangesButton} from './ReviewChangesButton'\n\nconst SYNCING_TIMEOUT = 1000\nconst SAVED_TIMEOUT = 3000\n\nexport const DocumentSparkline = memo(function DocumentSparkline() {\n  const {\n    changesOpen,\n    documentId,\n    documentType,\n    editState,\n    onHistoryClose,\n    onHistoryOpen,\n    historyController,\n    value,\n  } = useDocumentPane()\n  const syncState = useSyncState(documentId, documentType)\n\n  const lastUpdated = value?._updatedAt\n  const lastPublished = editState?.published?._updatedAt\n  const showingRevision = historyController.onOlderRevision()\n  const liveEdit = Boolean(editState?.liveEdit)\n  const published = Boolean(editState?.published)\n  const changed = Boolean(editState?.draft)\n\n  const [rootFlexElement, setRootFlexElement] = useState<HTMLDivElement | null>(null)\n  const rootFlexRect = useElementRect(rootFlexElement)\n  const collapsed = !rootFlexRect || rootFlexRect?.width < 300\n\n  const [status, setStatus] = useState<'saved' | 'syncing' | null>(null)\n\n  // eslint-disable-next-line consistent-return\n  useEffect(() => {\n    if (status === 'syncing') {\n      // status changed to 'syncing', schedule an update to set it to 'saved'\n      const timerId = setTimeout(() => setStatus('saved'), SYNCING_TIMEOUT)\n      return () => clearTimeout(timerId)\n    }\n    if (status === 'saved') {\n      // status changed to 'saved', schedule an update to clear it\n      const timerId = setTimeout(() => setStatus(null), SAVED_TIMEOUT)\n      return () => clearTimeout(timerId)\n    }\n  }, [status, lastUpdated])\n\n  useLayoutEffect(() => {\n    // clear sync status when documentId changes\n    setStatus(null)\n  }, [documentId])\n\n  // set status to 'syncing' when lastUpdated changes and we go from not syncing to syncing\n  useLayoutEffect(() => {\n    if (syncState.isSyncing) {\n      setStatus('syncing')\n    }\n  }, [syncState.isSyncing, lastUpdated])\n\n  const reviewButton = useMemo(\n    () => (\n      <ReviewChangesButton\n        lastUpdated={lastUpdated}\n        status={status || (changed ? 'changes' : undefined)}\n        onClick={changesOpen ? onHistoryClose : onHistoryOpen}\n        disabled={showingRevision}\n        selected={changesOpen}\n        collapsed={collapsed}\n      />\n    ),\n    [\n      changed,\n      changesOpen,\n      onHistoryClose,\n      onHistoryOpen,\n      lastUpdated,\n      showingRevision,\n      status,\n      collapsed,\n    ]\n  )\n\n  const publishStatus = useMemo(\n    () =>\n      (liveEdit || published) && (\n        <Box marginRight={1}>\n          <PublishStatus\n            disabled={showingRevision}\n            lastPublished={lastPublished}\n            lastUpdated={lastUpdated}\n            liveEdit={liveEdit}\n            collapsed={collapsed}\n          />\n        </Box>\n      ),\n    [collapsed, lastPublished, lastUpdated, liveEdit, published, showingRevision]\n  )\n\n  return (\n    <Flex align=\"center\" data-ui=\"DocumentSparkline\" ref={setRootFlexElement}>\n      {publishStatus}\n\n      <Flex align=\"center\" flex={1}>\n        {reviewButton}\n        {!collapsed && (\n          <Box marginLeft={3}>\n            <DocumentBadges />\n          </Box>\n        )}\n      </Flex>\n    </Flex>\n  )\n})\n","import React, {useMemo} from 'react'\nimport styled from 'styled-components'\nimport {Box, Flex} from '@sanity/ui'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {DocumentStatusBarActions, HistoryStatusBarActions} from './DocumentStatusBarActions'\nimport {DocumentSparkline} from './sparkline/DocumentSparkline'\n\nexport interface DocumentStatusBarProps {\n  actionsBoxRef?: React.Ref<HTMLDivElement>\n}\n\nconst DocumentActionsBox = styled(Box)`\n  min-width: 10em;\n  max-width: 16em;\n`\n\nexport function DocumentStatusBar(props: DocumentStatusBarProps) {\n  const {actionsBoxRef} = props\n  const {badges, historyController} = useDocumentPane()\n  const showingRevision = historyController.onOlderRevision()\n\n  return useMemo(\n    () => (\n      <Box paddingLeft={2} paddingRight={[2, 3]} paddingY={2}>\n        <Flex align=\"center\">\n          <Box flex={[1, 2]}>{badges && <DocumentSparkline />}</Box>\n\n          <DocumentActionsBox flex={1} marginLeft={[1, 3]} ref={actionsBoxRef}>\n            {showingRevision ? <HistoryStatusBarActions /> : <DocumentStatusBarActions />}\n          </DocumentActionsBox>\n        </Flex>\n      </Box>\n    ),\n    [actionsBoxRef, badges, showingRevision]\n  )\n}\n","import isHotkey from 'is-hotkey'\nimport React, {useCallback, useMemo, useState} from 'react'\nimport {ActionStateDialog} from '../statusBar'\nimport {Pane} from '../../../components'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {\n  DocumentActionDescription,\n  DocumentActionProps,\n  RenderActionCollectionState,\n} from '../../../actions'\nimport {LegacyLayerProvider} from '../../../../components/transitional'\n\nexport interface KeyboardShortcutResponderProps {\n  actionsBoxElement: HTMLElement | null\n  activeIndex: number\n  currentMinWidth?: number\n  flex?: number\n  id: string\n  minWidth?: number\n  onActionStart: (index: number) => void\n  rootRef: React.Ref<HTMLDivElement>\n  states: DocumentActionDescription[]\n}\n\nfunction KeyboardShortcutResponder(\n  props: KeyboardShortcutResponderProps & Omit<React.HTMLProps<HTMLDivElement>, 'height'>\n) {\n  const {\n    actionsBoxElement,\n    activeIndex,\n    children,\n    id,\n    onActionStart,\n    onKeyDown,\n    rootRef,\n    states,\n    ...rest\n  } = props\n\n  const activeAction = states[activeIndex]\n\n  const handleKeyDown = useCallback(\n    (event) => {\n      const matchingStates = states.filter(\n        (state) => state.shortcut && isHotkey(state.shortcut, event)\n      )\n\n      const matchingState = matchingStates[0]\n\n      if (matchingStates.length > 1) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          `Keyboard shortcut conflict: More than one document action matches the shortcut \"${matchingState.shortcut}\"`\n        )\n      }\n\n      if (matchingState && !matchingState.disabled && matchingState.onHandle) {\n        event.preventDefault()\n        matchingState.onHandle()\n        onActionStart(states.indexOf(matchingState))\n        return\n      }\n\n      if (onKeyDown) {\n        onKeyDown(event)\n      }\n    },\n    [onActionStart, onKeyDown, states]\n  )\n\n  return (\n    <Pane id={id} onKeyDown={handleKeyDown} tabIndex={-1} {...rest} ref={rootRef}>\n      {children}\n\n      {activeAction && activeAction.modal && (\n        <LegacyLayerProvider zOffset=\"paneFooter\">\n          <ActionStateDialog modal={activeAction.modal} referenceElement={actionsBoxElement} />\n        </LegacyLayerProvider>\n      )}\n    </Pane>\n  )\n}\n\nexport interface DocumentActionShortcutsProps {\n  actionsBoxElement: HTMLElement | null\n  currentMinWidth?: number\n  debug?: boolean\n  flex: number\n  id: string\n  minWidth: number\n  rootRef: React.Ref<HTMLDivElement>\n}\n\nexport const DocumentActionShortcuts = React.memo(\n  (props: DocumentActionShortcutsProps & React.HTMLProps<HTMLDivElement>) => {\n    const {actionsBoxElement, children, ...rest} = props\n    const {actions, editState} = useDocumentPane()\n    const [activeIndex, setActiveIndex] = useState(-1)\n\n    const onActionStart = useCallback((idx: number) => {\n      setActiveIndex(idx)\n    }, [])\n\n    const actionProps: DocumentActionProps | null = useMemo(\n      () =>\n        editState && {\n          ...editState,\n\n          // @todo: what to call here?\n          onComplete: () => undefined,\n\n          // @todo: get revision string\n          revision: undefined,\n        },\n      [editState]\n    )\n\n    if (!actionProps || !actions) return null\n\n    return (\n      <RenderActionCollectionState actionProps={actionProps} actions={actions}>\n        {({states}) => (\n          <KeyboardShortcutResponder\n            {...rest}\n            activeIndex={activeIndex}\n            actionsBoxElement={actionsBoxElement}\n            onActionStart={onActionStart}\n            states={states}\n          >\n            {children}\n          </KeyboardShortcutResponder>\n        )}\n      </RenderActionCollectionState>\n    )\n  }\n)\n\nDocumentActionShortcuts.displayName = 'DocumentActionShortcuts'\n","import {isKeySegment, Path} from '@sanity/types'\nimport {StateTree} from './types'\n\nexport function setAtPath<T>(\n  currentTree: StateTree<T> | undefined,\n  path: Path,\n  value: T\n): StateTree<T> {\n  if (path.length === 0) {\n    return {...(currentTree || {}), value}\n  }\n  const [head, ...tail] = path\n  const key = isKeySegment(head) ? head._key : String(head)\n  const children = currentTree?.children ?? {}\n  return {\n    value: currentTree?.value,\n    children: {...children, [key]: setAtPath(children[key] || {}, tail, value)},\n  }\n}\n","import {isKeySegment, isObjectSchemaType, Path} from '@sanity/types'\nimport {castArray} from 'lodash'\nimport {\n  ArrayOfObjectsFormNode,\n  ArrayOfObjectsItemMember,\n  FieldMember,\n  FieldSetMember,\n  ObjectFormNode,\n} from '../../../form'\nimport {isMemberArrayOfObjects} from '../../members/fields/asserters'\n\n// eslint-disable-next-line @typescript-eslint/ban-types\ninterface ExpandPathOperation {\n  type: 'expandPath'\n  path: Path\n}\n\ninterface ExpandFieldSetOperation {\n  type: 'expandFieldSet'\n  path: Path\n}\n\ninterface SetActiveGroup {\n  type: 'setSelectedGroup'\n  path: Path\n  groupName: string\n}\n\ntype Operation = ExpandPathOperation | ExpandFieldSetOperation | SetActiveGroup\n\n/**\n * This takes a form state and returns a list of operations required to open a node at a particular path\n * @param state - The form state\n * @param path - The path to open\n */\nexport function getExpandOperations(state: ObjectFormNode, path: Path): Operation[] {\n  // start at the root and make sure all groups/paths are expanded/activated along the way\n  const [fieldName, ...rest] = path\n\n  const fieldsetMember = state.members.find(\n    (member): member is FieldSetMember =>\n      member.kind === 'fieldSet' &&\n      member.fieldSet.members.some(\n        (field): field is FieldMember => field.kind === 'field' && field.name === fieldName\n      )\n  )\n\n  const ops: Operation[] = [{type: 'expandPath', path}]\n  if (fieldsetMember) {\n    ops.push({type: 'expandFieldSet', path: fieldsetMember.fieldSet.path})\n  }\n\n  const fieldMember = state.members.find(\n    (member): member is FieldMember => member.kind === 'field' && member.name === fieldName\n  )\n\n  const schemaField = state.schemaType.fields.find((field) => field.name === fieldName)\n  const selectedGroupName = state.groups.find((group) => group.selected)?.name\n  const inSelectedGroup =\n    selectedGroupName &&\n    (selectedGroupName === 'all-fields' ||\n      (schemaField && castArray(schemaField.group).includes(selectedGroupName)))\n\n  if (!inSelectedGroup) {\n    ops.push({type: 'setSelectedGroup', path: state.path, groupName: 'all-fields'})\n  }\n\n  if (fieldMember) {\n    ops.push({type: 'expandPath', path: fieldMember.field.path})\n  }\n\n  if (rest.length === 0) {\n    return ops\n  }\n\n  if (fieldMember && isMemberArrayOfObjects(fieldMember)) {\n    return ops.concat([\n      {type: 'expandPath', path: fieldMember.field.path},\n      ...expandArrayPath(fieldMember.field, rest),\n    ])\n  }\n  return ops\n}\n\nfunction expandArrayPath(state: ArrayOfObjectsFormNode, path: Path): Operation[] {\n  // start at the root and make sure all groups/paths are expanded/activated along the way\n  const [segment, ...rest] = path\n  if (!isKeySegment(segment)) {\n    throw new Error('Expected path segment to be an object with a _key property')\n  }\n\n  const foundMember = state.members.find(\n    (member): member is ArrayOfObjectsItemMember => member.key === segment._key\n  )\n\n  if (!foundMember) {\n    // tried to open a member that does not exist in the form state - it's likely hidden\n    return []\n  }\n  return [{type: 'expandPath', path: path}, ...getExpandOperations(foundMember.item, rest)]\n}\n","import {EarthAmericasIcon, BinaryDocumentIcon, RestoreIcon} from '@sanity/icons'\nimport {DeskToolFeatures, PaneMenuItem} from '../../types'\n\ninterface Params {\n  features: DeskToolFeatures\n  changesOpen: boolean\n  hasValue: boolean\n  previewUrl?: string | null\n}\n\nconst getHistoryMenuItem = (params: Params): PaneMenuItem | null => {\n  const {features, hasValue, changesOpen} = params\n\n  if (!features.reviewChanges) return null\n\n  return {\n    action: 'reviewChanges',\n    title: 'Review changes',\n    icon: RestoreIcon,\n    isDisabled: changesOpen || !hasValue,\n  }\n}\n\nconst getInspectItem = ({hasValue}: Params): PaneMenuItem => ({\n  action: 'inspect',\n  title: 'Inspect',\n  icon: BinaryDocumentIcon,\n  isDisabled: !hasValue,\n  shortcut: 'Ctrl+Alt+I',\n})\n\nexport const getProductionPreviewItem = ({previewUrl}: Params): PaneMenuItem | null => {\n  if (!previewUrl) return null\n\n  return {\n    action: 'production-preview',\n    title: 'Open preview',\n    icon: EarthAmericasIcon,\n    shortcut: 'Ctrl+Alt+O',\n  }\n}\n\nexport const getMenuItems = (params: Params): PaneMenuItem[] => {\n  const items = [getProductionPreviewItem, getHistoryMenuItem, getInspectItem]\n    .filter(Boolean)\n    .map((fn) => fn(params))\n\n  return items.filter((i) => i !== null) as PaneMenuItem[]\n}\n","import {useEffect, useState} from 'react'\nimport {SanityDocument} from '@sanity/types'\nimport {useAsObservable} from 'react-rx'\nimport {debounceTime, switchMap, catchError} from 'rxjs/operators'\nimport {from, of} from 'rxjs'\nimport {useSource} from '../../../studio'\nimport {isRecord} from '../../../util'\n\nconst isSanityDocument = (value: unknown): value is SanityDocument =>\n  isRecord(value) && typeof value._id === 'string' && typeof value._type === 'string'\n\nexport function usePreviewUrl(value: Partial<SanityDocument> | undefined): string | undefined {\n  const [previewUrl, setPreviewUrl] = useState<string | undefined>(undefined)\n  const [error, setError] = useState<unknown>(null)\n  const {resolveProductionUrl} = useSource().document\n  const value$ = useAsObservable(value)\n\n  if (error) throw error\n\n  useEffect(() => {\n    value$\n      .pipe(\n        // this so that the preview URL isn't fetched on every keystroke\n        debounceTime(500),\n        switchMap((document) =>\n          isSanityDocument(document) ? from(resolveProductionUrl({document})) : of(undefined)\n        ),\n        catchError((e) => {\n          const message = isRecord(e) && typeof e.message === 'string' ? e.message : 'Unknown error'\n          throw new Error(`An error was thrown while trying to get your preview url: ${message}`)\n        })\n      )\n      .subscribe({\n        next: setPreviewUrl,\n        error: setError,\n      })\n  }, [resolveProductionUrl, value$])\n\n  return previewUrl\n}\n","import {Template} from '../../../templates'\n\ninterface InitialValueOptions {\n  documentType: string\n  panePayload?: unknown\n  templateName?: string\n  templateParams?: Record<string, unknown>\n  urlTemplate?: string\n}\n\n/**\n * @internal\n */\nexport function getInitialValueTemplateOpts(\n  templates: Template[],\n  opts: InitialValueOptions\n): {templateName: string; templateParams: Record<string, unknown>} {\n  const payload = opts.panePayload || {}\n  const structureNodeTemplate = opts.templateName\n\n  if (opts.urlTemplate && structureNodeTemplate && structureNodeTemplate !== opts.urlTemplate) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      `Conflicting templates: URL says \"${opts.urlTemplate}\", structure node says \"${structureNodeTemplate}\". Using \"${structureNodeTemplate}\".`\n    )\n  }\n\n  const template = structureNodeTemplate || opts.urlTemplate\n  const typeTemplates = templates.filter((t) => t.schemaType === opts.documentType)\n\n  const templateParams = {\n    ...opts.templateParams,\n    ...(typeof payload === 'object' ? payload || {} : {}),\n  }\n\n  let templateName = template\n\n  // If we have not specified a specific template, and we only have a single\n  // template available for a schema type, use it\n  if (!template && typeTemplates.length === 1) {\n    templateName = typeTemplates[0].id\n  }\n\n  return {templateName: templateName!, templateParams}\n}\n","import React, {memo, useCallback, useEffect, useMemo, useRef, useState} from 'react'\nimport {ObjectSchemaType, Path, SanityDocument, SanityDocumentLike} from '@sanity/types'\nimport {omit} from 'lodash'\nimport {useToast} from '@sanity/ui'\nimport {fromString as pathFromString} from '@sanity/util/paths'\nimport isHotkey from 'is-hotkey'\nimport {useMemoObservable} from 'react-rx'\nimport {PaneMenuItem} from '../../types'\nimport {\n  DocumentPresence,\n  useHistoryStore,\n  useInitialValue,\n  usePresenceStore,\n} from '../../../datastores'\nimport {\n  useClient,\n  useConnectionState,\n  useDocumentOperation,\n  useEditState,\n  useSchema,\n  useTemplates,\n  useValidationStatus,\n} from '../../../hooks'\nimport {isDev} from '../../../environment'\nimport {useSource} from '../../../studio'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {getPublishedId, useUnique} from '../../../util'\nimport {usePaneRouter} from '../../components'\nimport {PatchEvent, StateTree, toMutationPatches} from '../../../form'\nimport {useFormState} from '../../../form/store/useFormState'\nimport {setAtPath} from '../../../form/store/stateTreeHelper'\nimport {getExpandOperations} from '../../../form/store/utils/getExpandOperations'\nimport {useDeskTool} from '../../useDeskTool'\nimport {DocumentPaneContext, DocumentPaneContextValue} from './DocumentPaneContext'\nimport {getMenuItems} from './menuItems'\nimport {DocumentPaneProviderProps} from './types'\nimport {usePreviewUrl} from './usePreviewUrl'\nimport {getInitialValueTemplateOpts} from './getInitialValueTemplateOpts'\n\nconst emptyObject = {} as Record<string, string | undefined>\n\n/**\n * @internal\n */\n// eslint-disable-next-line complexity, max-statements\nexport const DocumentPaneProvider = memo((props: DocumentPaneProviderProps) => {\n  const {children, index, pane, paneKey} = props\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const schema = useSchema()\n  const templates = useTemplates()\n  const {\n    actions: documentActions,\n    badges: documentBadges,\n    unstable_languageFilter: languageFilterResolver,\n  } = useSource().document\n  const historyStore = useHistoryStore()\n  const presenceStore = usePresenceStore()\n  const paneRouter = usePaneRouter()\n  const {features} = useDeskTool()\n  const {push: pushToast} = useToast()\n  const {options, menuItemGroups, title = null, views: viewsProp = []} = pane\n  const paneOptions = useUnique(options)\n  const documentIdRaw = paneOptions.id\n  const documentId = getPublishedId(documentIdRaw)\n  const documentType = options.type\n  const paneParams = useUnique(paneRouter.params)\n  const panePayload = useUnique(paneRouter.payload)\n  const {templateName, templateParams} = useMemo(\n    () =>\n      getInitialValueTemplateOpts(templates, {\n        documentType,\n        templateName: paneOptions.template,\n        templateParams: paneOptions.templateParameters,\n        panePayload,\n        urlTemplate: paneParams?.template,\n      }),\n    [documentType, paneOptions, paneParams, panePayload, templates]\n  )\n  const initialValueRaw = useInitialValue({\n    documentId,\n    documentType,\n    templateName,\n    templateParams,\n  })\n  const initialValue = useUnique(initialValueRaw)\n  const {patch}: any = useDocumentOperation(documentId, documentType)\n  const editState = useEditState(documentId, documentType)\n  const {validation: validationRaw} = useValidationStatus(documentId, documentType)\n  const connectionState = useConnectionState(documentId, documentType)\n  const schemaType = schema.get(documentType) as ObjectSchemaType | undefined\n  const value: SanityDocumentLike = editState?.draft || editState?.published || initialValue.value\n\n  // Resolve document actions\n  const actions = useMemo(\n    () => documentActions({schemaType: documentType, documentId}),\n    [documentActions, documentId, documentType]\n  )\n\n  // Resolve document badges\n  const badges = useMemo(\n    () => documentBadges({schemaType: documentType, documentId}),\n    [documentBadges, documentId, documentType]\n  )\n\n  // Resolve document language filter\n  const languageFilter = useMemo(\n    () => languageFilterResolver({schemaType: documentType, documentId}),\n    [documentId, documentType, languageFilterResolver]\n  )\n\n  const validation = useUnique(validationRaw)\n  const views = useUnique(viewsProp)\n  const params = paneRouter.params || emptyObject\n  const [focusPath, setFocusPath] = useState<Path>(() =>\n    params.path ? pathFromString(params.path) : []\n  )\n  const activeViewId = params.view || (views[0] && views[0].id) || null\n  const timeline = useMemo(\n    () => historyStore.getTimeline({publishedId: documentId, enableTrace: isDev}),\n    [documentId, historyStore]\n  )\n  const [timelineMode, setTimelineMode] = useState<'since' | 'rev' | 'closed'>('closed')\n  // NOTE: this emits sync so can never be null\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const {historyController} = useMemoObservable(\n    () => historyStore.getTimelineController({client, documentId, documentType, timeline}),\n    [client, documentId, documentType, timeline]\n  )!\n\n  // @todo: this will now happen on each render, but should be refactored so it happens only when\n  // the `rev`, `since` or `historyController` values change.\n  historyController.setRange(params.since || null, params.rev || null)\n  const changesOpen = historyController.changesPanelActive()\n\n  // TODO: this may cause a lot of churn. May be a good idea to prevent these\n  // requests unless the menu is open somehow\n  const previewUrl = usePreviewUrl(value)\n\n  const [presence, setPresence] = useState<DocumentPresence[]>([])\n  useEffect(() => {\n    const subscription = presenceStore.documentPresence(documentId).subscribe((nextPresence) => {\n      setPresence(nextPresence)\n    })\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [documentId, presenceStore])\n\n  const hasValue = Boolean(value)\n  const menuItems = useMemo(\n    () => getMenuItems({features, hasValue, changesOpen, previewUrl}),\n    [features, hasValue, changesOpen, previewUrl]\n  )\n  const inspectOpen = params.inspect === 'on'\n  const compareValue: Partial<SanityDocument> | null = changesOpen\n    ? historyController.sinceAttributes()\n    : editState?.published || null\n  const ready = connectionState === 'connected' && editState.ready\n  const viewOlderVersion = historyController.onOlderRevision()\n  const displayed: Partial<SanityDocument> | null = useMemo(\n    () => (viewOlderVersion ? historyController.displayed() : value),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [historyController, params.rev, params.since, value, viewOlderVersion]\n  )\n\n  const setTimelineRange = useCallback(\n    (newSince: string, newRev: string | null) => {\n      paneRouter.setParams({\n        ...paneRouter.params,\n        since: newSince,\n        rev: newRev || undefined,\n      })\n    },\n    [paneRouter]\n  )\n\n  const handleFocus = useCallback(\n    (nextFocusPath: Path) => {\n      setFocusPath(nextFocusPath)\n      presenceStore.setLocation([\n        {\n          type: 'document',\n          documentId,\n          path: nextFocusPath,\n          lastActiveAt: new Date().toISOString(),\n        },\n      ])\n    },\n    [documentId, presenceStore, setFocusPath]\n  )\n\n  const handleBlur = useCallback(\n    (blurredPath: Path) => {\n      setFocusPath([])\n      // note: we're deliberately not syncing presence here since it would make the user avatar disappear when a\n      // user clicks outside a field without focusing another one\n    },\n    [setFocusPath]\n  )\n\n  const patchRef = useRef<(event: PatchEvent) => void>(() => {\n    throw new Error('Nope')\n  })\n\n  patchRef.current = (event: PatchEvent) => {\n    patch.execute(toMutationPatches(event.patches), initialValue.value)\n  }\n\n  const handleChange = useCallback((event) => patchRef.current(event), [])\n\n  const handleHistoryClose = useCallback(() => {\n    paneRouter.setParams({...params, since: undefined})\n  }, [paneRouter, params])\n\n  const handleHistoryOpen = useCallback(() => {\n    paneRouter.setParams({...params, since: '@lastPublished'})\n  }, [paneRouter, params])\n\n  const handlePaneClose = useCallback(() => paneRouter.closeCurrent(), [paneRouter])\n\n  const handlePaneSplit = useCallback(() => paneRouter.duplicateCurrent(), [paneRouter])\n\n  const toggleInspect = useCallback(\n    (toggle = !inspectOpen) => {\n      if (toggle) {\n        paneRouter.setParams({...params, inspect: 'on'})\n      } else {\n        paneRouter.setParams(omit(params, 'inspect'))\n      }\n    },\n    [inspectOpen, paneRouter, params]\n  )\n\n  const handleMenuAction = useCallback(\n    (item: PaneMenuItem) => {\n      if (item.action === 'production-preview' && previewUrl) {\n        window.open(previewUrl)\n        return true\n      }\n\n      if (item.action === 'inspect') {\n        toggleInspect(true)\n        return true\n      }\n\n      if (item.action === 'reviewChanges') {\n        handleHistoryOpen()\n        return true\n      }\n\n      return false\n    },\n    [handleHistoryOpen, previewUrl, toggleInspect]\n  )\n\n  const handleKeyUp = useCallback(\n    (event: React.KeyboardEvent<HTMLDivElement>) => {\n      for (const item of menuItems) {\n        if (item.shortcut) {\n          if (isHotkey(item.shortcut, event)) {\n            event.preventDefault()\n            event.stopPropagation()\n            handleMenuAction(item)\n            return\n          }\n        }\n      }\n    },\n    [handleMenuAction, menuItems]\n  )\n\n  const handleInspectClose = useCallback(() => toggleInspect(false), [toggleInspect])\n\n  const [openPath, onSetOpenPath] = useState<Path>([])\n  const [fieldGroupState, onSetFieldGroupState] = useState<StateTree<string>>()\n  const [collapsedPaths, onSetCollapsedPath] = useState<StateTree<boolean>>()\n  const [collapsedFieldSets, onSetCollapsedFieldSets] = useState<StateTree<boolean>>()\n\n  const handleOnSetCollapsedPath = useCallback((path: Path, collapsed: boolean) => {\n    onSetCollapsedPath((prevState) => setAtPath(prevState, path, collapsed))\n  }, [])\n\n  const handleOnSetCollapsedFieldSet = useCallback((path: Path, collapsed: boolean) => {\n    onSetCollapsedFieldSets((prevState) => setAtPath(prevState, path, collapsed))\n  }, [])\n\n  const handleSetActiveFieldGroup = useCallback(\n    (path: Path, groupName: string) =>\n      onSetFieldGroupState((prevState) => setAtPath(prevState, path, groupName)),\n    []\n  )\n\n  const formState = useFormState(schemaType!, {\n    value,\n    comparisonValue: compareValue,\n    focusPath,\n    openPath,\n    collapsedPaths,\n    presence,\n    validation,\n    collapsedFieldSets: collapsedFieldSets,\n    fieldGroupState,\n  })\n\n  const formStateRef = useRef(formState)\n  formStateRef.current = formState\n\n  const handleOpenPath = useCallback(\n    (path: Path) => {\n      const ops = getExpandOperations(formStateRef.current!, path)\n      ops.forEach((op) => {\n        if (op.type === 'expandPath') {\n          onSetCollapsedPath((prevState) => setAtPath(prevState, op.path, false))\n        }\n        if (op.type === 'expandFieldSet') {\n          onSetCollapsedFieldSets((prevState) => setAtPath(prevState, op.path, false))\n        }\n        if (op.type === 'setSelectedGroup') {\n          onSetFieldGroupState((prevState) => setAtPath(prevState, op.path, op.groupName))\n        }\n      })\n      onSetOpenPath(path)\n    },\n    [formStateRef]\n  )\n\n  const documentPane: DocumentPaneContextValue = {\n    actions,\n    activeViewId,\n    badges,\n    changesOpen,\n    collapsedFieldSets,\n    collapsedPaths,\n    compareValue,\n    connectionState,\n    displayed,\n    documentId,\n    documentIdRaw,\n    documentType,\n    editState,\n    focusPath,\n    menuItems,\n    onBlur: handleBlur,\n    onChange: handleChange,\n    onFocus: handleFocus,\n    onPathOpen: handleOpenPath,\n    onHistoryClose: handleHistoryClose,\n    onHistoryOpen: handleHistoryOpen,\n    onInspectClose: handleInspectClose,\n    onKeyUp: handleKeyUp,\n    onMenuAction: handleMenuAction,\n    onPaneClose: handlePaneClose,\n    onPaneSplit: handlePaneSplit,\n    onSetActiveFieldGroup: handleSetActiveFieldGroup,\n    onSetCollapsedPath: handleOnSetCollapsedPath,\n    onSetCollapsedFieldSet: handleOnSetCollapsedFieldSet,\n    historyController,\n    index,\n    inspectOpen,\n    validation,\n    menuItemGroups: menuItemGroups || [],\n    paneKey,\n    previewUrl,\n    ready,\n    schemaType: schemaType!,\n    setTimelineMode,\n    setTimelineRange,\n    timeline,\n    timelineMode,\n    title,\n    value,\n    views,\n    formState,\n    unstable_languageFilter: languageFilter,\n  }\n\n  useEffect(() => {\n    if (connectionState === 'reconnecting') {\n      pushToast({\n        id: 'sanity/desk/reconnecting',\n        status: 'warning',\n        title: <>Connection lost. Reconnecting…</>,\n      })\n    }\n  }, [connectionState, pushToast])\n\n  // Reset `focusPath` when `documentId` or `params.path` changes\n  useEffect(() => {\n    // Reset focus path\n    setFocusPath(params.path ? pathFromString(params.path) : [])\n  }, [documentId, params.path])\n\n  return (\n    <DocumentPaneContext.Provider value={documentPane}>{children}</DocumentPaneContext.Provider>\n  )\n})\n\nDocumentPaneProvider.displayName = 'DocumentPaneProvider'\n","import {\n  BoundaryElementProvider,\n  Card,\n  Code,\n  DialogProvider,\n  DialogProviderProps,\n  Flex,\n  Stack,\n  Text,\n  useElementRect,\n} from '@sanity/ui'\nimport React, {memo, useCallback, useMemo, useState} from 'react'\nimport styled from 'styled-components'\nimport {fromString as pathFromString} from '@sanity/util/paths'\nimport {Path} from '@sanity/types'\nimport {DocumentPaneNode} from '../../types'\nimport {PaneFooter} from '../../components/pane'\nimport {usePaneLayout} from '../../components/pane/usePaneLayout'\nimport {ErrorPane} from '../error'\nimport {LoadingPane} from '../loading'\nimport {ChangeConnectorRoot} from '../../../components/changeIndicators'\nimport {useZIndex} from '../../../components/zOffsets'\nimport {isDev} from '../../../environment'\nimport {useTemplates} from '../../../hooks'\nimport {useSource, SourceProvider} from '../../../studio'\nimport {usePaneRouter} from '../../components'\nimport {useDocumentType, useTemplatePermissions} from '../../../datastores'\nimport {ReferenceInputOptionsProvider} from '../../../form'\nimport {useDeskTool} from '../../useDeskTool'\nimport {ChangesPanel} from './changesPanel'\nimport {DocumentPanel} from './documentPanel'\nimport {DocumentOperationResults} from './DocumentOperationResults'\nimport {DocumentActionShortcuts} from './keyboardShortcuts'\nimport {DocumentStatusBar} from './statusBar'\nimport {useDocumentPane} from './useDocumentPane'\nimport {DocumentPaneProvider} from './DocumentPaneProvider'\nimport {DocumentPaneProviderProps} from './types'\n\ntype DocumentPaneOptions = DocumentPaneNode['options']\n\nconst DOCUMENT_PANEL_MIN_WIDTH = 320\nconst DOCUMENT_PANEL_INITIAL_MIN_WIDTH = 600\nconst CHANGES_PANEL_MIN_WIDTH = 320\n\nconst DIALOG_PROVIDER_POSITION: DialogProviderProps['position'] = [\n  // We use the `position: fixed` for dialogs on narrow screens (< 512px).\n  'fixed',\n  // And we use the `position: absolute` strategy (within panes) on wide screens.\n  'absolute',\n]\n\nconst StyledChangeConnectorRoot = styled(ChangeConnectorRoot)`\n  flex: 1;\n  display: flex;\n  min-height: 0;\n  min-width: 0;\n`\n\nexport const DocumentPane = memo(function DocumentPane(props: DocumentPaneProviderProps) {\n  const {name: parentSourceName} = useSource()\n\n  return (\n    <SourceProvider name={props.pane.source || parentSourceName}>\n      <DocumentPaneInner {...props} />\n    </SourceProvider>\n  )\n})\n\nfunction DocumentPaneInner(props: DocumentPaneProviderProps) {\n  const {pane, paneKey} = props\n  const {resolveNewDocumentOptions} = useSource().document\n  const paneRouter = usePaneRouter()\n  const options = usePaneOptions(pane.options, paneRouter.params)\n  const {documentType, isLoaded: isDocumentLoaded} = useDocumentType(options.id, options.type)\n\n  const templateItems = useMemo(() => {\n    return resolveNewDocumentOptions({\n      type: 'global',\n    })\n  }, [resolveNewDocumentOptions])\n\n  const [templatePermissions, isTemplatePermissionsLoading] = useTemplatePermissions({\n    templateItems,\n  })\n  const isLoaded = isDocumentLoaded && !isTemplatePermissionsLoading\n\n  const providerProps = useMemo(() => {\n    return isLoaded && documentType && options.type !== documentType\n      ? mergeDocumentType(props, options, documentType)\n      : props\n  }, [props, documentType, isLoaded, options])\n\n  const {ReferenceChildLink, handleEditReference, groupIndex, routerPanesState} = paneRouter\n  const childParams = routerPanesState[groupIndex + 1]?.[0].params || {}\n  const routerPanesStateLength = routerPanesState.length\n  const {parentRefPath} = childParams\n\n  const activePath: {path: Path; state: 'selected' | 'pressed' | 'none'} = useMemo(() => {\n    return parentRefPath\n      ? {\n          path: pathFromString(parentRefPath),\n          state:\n            // eslint-disable-next-line no-nested-ternary\n            groupIndex >= routerPanesStateLength - 1\n              ? 'none'\n              : groupIndex >= routerPanesStateLength - 2\n              ? 'selected'\n              : 'pressed',\n        }\n      : {path: [], state: 'none'}\n  }, [parentRefPath, groupIndex, routerPanesStateLength])\n\n  if (options.type === '*' && !isLoaded) {\n    return <LoadingPane flex={2.5} minWidth={320} paneKey={paneKey} title=\"Loading document…\" />\n  }\n\n  if (!documentType) {\n    return (\n      <ErrorPane\n        flex={2.5}\n        minWidth={320}\n        paneKey={paneKey}\n        title={<>The document was not found</>}\n      >\n        <Stack space={4}>\n          <Text as=\"p\">\n            The document type is not defined, and a document with the <code>{options.id}</code>{' '}\n            identifier could not be found.\n          </Text>\n        </Stack>\n      </ErrorPane>\n    )\n  }\n\n  return (\n    <DocumentPaneProvider {...providerProps}>\n      {/* NOTE: this is a temporary location for this provider until we */}\n      {/* stabilize the reference input options formally in the form builder */}\n      {/* eslint-disable-next-line react/jsx-pascal-case */}\n      <ReferenceInputOptionsProvider\n        EditReferenceLinkComponent={ReferenceChildLink as any}\n        onEditReference={handleEditReference as any}\n        initialValueTemplateItems={templatePermissions}\n        activePath={activePath}\n      >\n        <InnerDocumentPane />\n      </ReferenceInputOptionsProvider>\n    </DocumentPaneProvider>\n  )\n}\n\nfunction usePaneOptions(\n  options: DocumentPaneOptions,\n  params: Record<string, string | undefined> = {}\n): DocumentPaneOptions {\n  const templates = useTemplates()\n\n  return useMemo(() => {\n    // The document type is provided, so return\n    if (options.type && options.type !== '*') {\n      return options\n    }\n\n    // Attempt to derive document type from the template configuration\n    const templateName = options.template || params.template\n    const template = templateName ? templates.find((t) => t.id === templateName) : undefined\n    const documentType = template?.schemaType\n\n    // No document type was found in a template\n    if (!documentType) {\n      return options\n    }\n\n    // The template provided the document type, so modify the pane’s `options` property\n    return {...options, type: documentType}\n  }, [options, params.template, templates])\n}\n\nfunction mergeDocumentType(\n  props: DocumentPaneProviderProps,\n  options: DocumentPaneOptions,\n  documentType: string\n): DocumentPaneProviderProps {\n  return {\n    ...props,\n    pane: {\n      ...props.pane,\n      options: {...options, type: documentType},\n    },\n  }\n}\n\nfunction InnerDocumentPane() {\n  const {\n    changesOpen,\n    documentType,\n    onFocus,\n    onPathOpen,\n    onHistoryOpen,\n    onKeyUp,\n    inspectOpen,\n    paneKey,\n    schemaType,\n    value,\n  } = useDocumentPane()\n  const {features} = useDeskTool()\n  const {collapsed: layoutCollapsed} = usePaneLayout()\n  const zOffsets = useZIndex()\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n  const [footerElement, setFooterElement] = useState<HTMLDivElement | null>(null)\n  const [actionsBoxElement, setActionsBoxElement] = useState<HTMLDivElement | null>(null)\n  const footerRect = useElementRect(footerElement)\n  const footerH = footerRect?.height\n\n  const documentPanel = useMemo(\n    () => (\n      <DocumentPanel\n        footerHeight={footerH || null}\n        rootElement={rootElement}\n        isInspectOpen={inspectOpen}\n      />\n    ),\n    [footerH, rootElement, inspectOpen]\n  )\n\n  const footer = useMemo(\n    () => (\n      <PaneFooter ref={setFooterElement}>\n        <DocumentStatusBar actionsBoxRef={setActionsBoxElement} />\n      </PaneFooter>\n    ),\n    []\n  )\n\n  const changesPanel = useMemo(() => {\n    if (!features.reviewChanges) return null\n    if (!changesOpen) return null\n\n    return (\n      <BoundaryElementProvider element={rootElement}>\n        <ChangesPanel />\n      </BoundaryElementProvider>\n    )\n  }, [changesOpen, features.reviewChanges, rootElement])\n\n  const onConnectorSetFocus = useCallback(\n    (path: Path) => {\n      onPathOpen(path)\n      onFocus(path)\n    },\n    [onPathOpen, onFocus]\n  )\n\n  const children = useMemo(() => {\n    if (!schemaType) {\n      return (\n        <ErrorPane\n          flex={2.5}\n          minWidth={320}\n          paneKey={paneKey}\n          title={\n            <>\n              Unknown document type: <code>{documentType}</code>\n            </>\n          }\n          tone=\"caution\"\n        >\n          <Stack space={4}>\n            {documentType && (\n              <Text as=\"p\">\n                This document has the schema type <code>{documentType}</code>, which is not defined\n                as a type in the local content studio schema.\n              </Text>\n            )}\n\n            {!documentType && (\n              <Text as=\"p\">\n                This document does not exist, and no schema type was specified for it.\n              </Text>\n            )}\n\n            {isDev && value && (\n              <>\n                <Text as=\"p\">Here is the JSON representation of the document:</Text>\n                <Card padding={3} overflow=\"auto\" radius={2} shadow={1} tone=\"inherit\">\n                  <Code language=\"json\" size={[1, 1, 2]}>\n                    {JSON.stringify(value, null, 2)}\n                  </Code>\n                </Card>\n              </>\n            )}\n          </Stack>\n        </ErrorPane>\n      )\n    }\n\n    return (\n      <>\n        <DialogProvider position={DIALOG_PROVIDER_POSITION} zOffset={zOffsets.portal}>\n          <Flex direction=\"column\" flex={1} height={layoutCollapsed ? undefined : 'fill'}>\n            <StyledChangeConnectorRoot\n              data-testid=\"change-connector-root\"\n              isReviewChangesOpen={changesOpen}\n              onOpenReviewChanges={onHistoryOpen}\n              onSetFocus={onConnectorSetFocus}\n            >\n              {documentPanel}\n              {changesPanel}\n            </StyledChangeConnectorRoot>\n          </Flex>\n        </DialogProvider>\n        {footer}\n        <DocumentOperationResults />\n      </>\n    )\n  }, [\n    changesOpen,\n    changesPanel,\n    documentPanel,\n    documentType,\n    footer,\n    onConnectorSetFocus,\n    onHistoryOpen,\n    layoutCollapsed,\n    paneKey,\n    schemaType,\n    value,\n    zOffsets.portal,\n  ])\n\n  const currentMinWidth = changesOpen\n    ? DOCUMENT_PANEL_INITIAL_MIN_WIDTH + CHANGES_PANEL_MIN_WIDTH\n    : DOCUMENT_PANEL_INITIAL_MIN_WIDTH\n\n  const minWidth = changesOpen\n    ? DOCUMENT_PANEL_MIN_WIDTH + CHANGES_PANEL_MIN_WIDTH\n    : DOCUMENT_PANEL_MIN_WIDTH\n\n  return (\n    <DocumentActionShortcuts\n      actionsBoxElement={actionsBoxElement}\n      currentMinWidth={currentMinWidth}\n      data-testid=\"document-pane\"\n      flex={2.5}\n      id={paneKey}\n      minWidth={minWidth}\n      onKeyUp={onKeyUp}\n      rootRef={setRootElement}\n    >\n      {children}\n    </DocumentActionShortcuts>\n  )\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Container, Flex, Stack, Text} from '@sanity/ui'\nimport React from 'react'\n\nexport function NoDocumentTypesScreen() {\n  return (\n    <Card height=\"fill\">\n      <Flex align=\"center\" height=\"fill\" justify=\"center\" padding={4} sizing=\"border\">\n        <Container width={0}>\n          <Card padding={4} radius={2} shadow={1} tone=\"caution\">\n            <Flex>\n              <Box>\n                <Text size={1}>\n                  <WarningOutlineIcon />\n                </Text>\n              </Box>\n              <Stack flex={1} marginLeft={3} space={3}>\n                <Text as=\"h1\" size={1} weight=\"bold\">\n                  No document types\n                </Text>\n                <Text as=\"p\" muted size={1}>\n                  Please define at least one document type in your schema.\n                </Text>\n                <Text as=\"p\" muted size={1}>\n                  <a\n                    href=\"https://beta.sanity.io/docs/platform/studio/config\"\n                    target=\"_blank\"\n                    rel=\"noreferrer\"\n                  >\n                    Learn how to add a document type &rarr;\n                  </a>\n                </Text>\n              </Stack>\n            </Flex>\n          </Card>\n        </Container>\n      </Flex>\n    </Card>\n  )\n}\n","import {PortalProvider, useToast} from '@sanity/ui'\nimport React, {memo, Fragment, useState, useEffect, useCallback} from 'react'\nimport styled from 'styled-components'\nimport isHotkey from 'is-hotkey'\nimport {useSchema} from '../../../hooks'\nimport {useRouter} from '../../../router'\nimport {LOADING_PANE} from '../../constants'\nimport {LoadingPane, DeskToolPane} from '../../panes'\nimport {getWaitMessages} from '../../panes/loading/getWaitMessages'\nimport {useResolvedPanes} from '../../structureResolvers'\nimport {PaneNode} from '../../types'\nimport {PaneLayout} from '../pane'\nimport {useDeskTool} from '../../useDeskTool'\nimport {_isCustomDocumentTypeDefinition} from '../../../util'\nimport {NoDocumentTypesScreen} from './NoDocumentTypesScreen'\n\ninterface DeskToolProps {\n  onPaneChange: (panes: Array<PaneNode | typeof LOADING_PANE>) => void\n}\n\nconst StyledPaneLayout = styled(PaneLayout)`\n  min-height: 100%;\n  min-width: 320px;\n`\n\nconst isSaveHotkey = isHotkey('mod+s')\n\n/**\n * @internal\n */\nexport const DeskTool = memo(function DeskTool({onPaneChange}: DeskToolProps) {\n  const {navigate} = useRouter()\n  const {push: pushToast} = useToast()\n  const schema = useSchema()\n  const {layoutCollapsed, setLayoutCollapsed} = useDeskTool()\n  const {paneDataItems, resolvedPanes, routerPanes} = useResolvedPanes()\n\n  const [portalElement, setPortalElement] = useState<HTMLDivElement | null>(null)\n\n  const handleRootCollapse = useCallback(() => setLayoutCollapsed(true), [setLayoutCollapsed])\n  const handleRootExpand = useCallback(() => setLayoutCollapsed(false), [setLayoutCollapsed])\n\n  useEffect(() => {\n    // we check for length before emitting here to skip the initial empty array\n    // state from the `useResolvedPanes` hook. there should always be a root\n    // pane emitted on subsequent emissions\n    if (resolvedPanes.length) {\n      onPaneChange(resolvedPanes)\n    }\n  }, [onPaneChange, resolvedPanes])\n\n  // The pane layout is \"collapsed\" on small screens, and only shows 1 pane at a time.\n  // Remove pane siblings (i.e. split panes) as the pane layout collapses.\n  useEffect(() => {\n    if (!layoutCollapsed) return\n    const hasSiblings = routerPanes.some((group) => group.length > 1)\n\n    if (!hasSiblings) return\n    const withoutSiblings = routerPanes.map((group) => [group[0]])\n\n    navigate({panes: withoutSiblings}, {replace: true})\n  }, [navigate, layoutCollapsed, routerPanes])\n\n  useEffect(() => {\n    const handleGlobalKeyDown = (event: KeyboardEvent) => {\n      // Prevent `Cmd+S`\n      if (isSaveHotkey(event)) {\n        event.preventDefault()\n\n        pushToast({\n          closable: true,\n          id: 'auto-save-message',\n          status: 'info',\n          title: 'Your work is automatically saved!',\n          duration: 4000,\n        })\n      }\n    }\n\n    window.addEventListener('keydown', handleGlobalKeyDown)\n    return () => window.removeEventListener('keydown', handleGlobalKeyDown)\n  }, [pushToast])\n\n  const hasDefinedDocumentTypes = schema._original?.types.some(_isCustomDocumentTypeDefinition)\n\n  if (!hasDefinedDocumentTypes) {\n    return <NoDocumentTypesScreen />\n  }\n\n  return (\n    <PortalProvider element={portalElement || null}>\n      <StyledPaneLayout\n        flex={1}\n        height={layoutCollapsed ? undefined : 'fill'}\n        minWidth={512}\n        onCollapse={handleRootCollapse}\n        onExpand={handleRootExpand}\n      >\n        {paneDataItems.map(\n          ({\n            active,\n            childItemId,\n            groupIndex,\n            itemId,\n            key: paneKey,\n            pane,\n            index: paneIndex,\n            params: paneParams,\n            path,\n            payload,\n            siblingIndex,\n            selected,\n          }) => (\n            <Fragment key={`${pane === LOADING_PANE ? 'loading' : pane.type}-${paneIndex}`}>\n              {pane === LOADING_PANE ? (\n                <LoadingPane paneKey={paneKey} path={path} selected={selected} />\n              ) : (\n                <DeskToolPane\n                  active={active}\n                  groupIndex={groupIndex}\n                  index={paneIndex}\n                  pane={pane}\n                  childItemId={childItemId}\n                  itemId={itemId}\n                  paneKey={paneKey}\n                  params={paneParams}\n                  payload={payload}\n                  selected={selected}\n                  siblingIndex={siblingIndex}\n                />\n              )}\n            </Fragment>\n          )\n        )}\n      </StyledPaneLayout>\n      <div data-portal=\"\" ref={setPortalElement} />\n    </PortalProvider>\n  )\n})\n","import {SanityDocumentLike} from '@sanity/types'\nimport React from 'react'\nimport {useSchema} from '../../hooks'\nimport {unstable_useDocumentPreview as useDocumentPreview} from '../../preview'\n\nexport interface DocTitleProps {\n  document: SanityDocumentLike\n}\n\nexport function DocTitle(props: DocTitleProps) {\n  const {document: documentValue} = props\n  const schema = useSchema()\n  const schemaType = schema.get(documentValue._type)\n\n  const {error, value} = useDocumentPreview({\n    schemaType: schemaType!,\n    value: documentValue,\n  })\n\n  if (!schemaType) {\n    return <code>Unknown schema type: {documentValue._type}</code>\n  }\n\n  if (error) {\n    return <>Error: {error.message}</>\n  }\n\n  return <>{value?.title || <span style={{color: 'var(--card-muted-fg-color)'}}>Untitled</span>}</>\n}\n","import {useMemo} from 'react'\nimport {ClientError, SanityClient} from '@sanity/client'\nimport {Observable, timer, fromEvent, EMPTY, of, forkJoin} from 'rxjs'\nimport {\n  map,\n  startWith,\n  distinctUntilChanged,\n  switchMap,\n  shareReplay,\n  catchError,\n} from 'rxjs/operators'\nimport {\n  CrossProjectTokenStore,\n  DocumentStore,\n  useDocumentStore,\n  useCrossProjectTokenStore,\n} from '../../../datastores'\nimport {useClient} from '../../../hooks'\nimport {createHookFromObservableFactory, getPublishedId, getDraftId} from '../../../util'\nimport type {AvailabilityResponse} from '../../../preview'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\n\n// this is used in place of `instanceof` so the matching can be more robust and\n// won't have any issues with dual packages etc\n// https://nodejs.org/api/packages.html#dual-package-hazard\nfunction isClientError(e: unknown): e is ClientError {\n  if (typeof e !== 'object') return false\n  if (!e) return false\n  return 'statusCode' in e && 'response' in e\n}\n\nconst POLL_INTERVAL = 5000\n\n// only fetches when the document is visible\nlet visiblePoll$: Observable<number>\nconst getVisiblePoll$ = () => {\n  if (!visiblePoll$) {\n    visiblePoll$ = fromEvent(document, 'visibilitychange').pipe(\n      // add empty emission to have this fire on creation\n      startWith(null),\n      map(() => document.visibilityState === 'visible'),\n      distinctUntilChanged(),\n      switchMap((visible) =>\n        visible\n          ? // using timer instead of interval since timer will emit on creation\n            timer(0, POLL_INTERVAL)\n          : EMPTY\n      ),\n      shareReplay({refCount: true, bufferSize: 1})\n    )\n  }\n  return visiblePoll$\n}\n\nexport type ReferringDocuments = {\n  isLoading: boolean\n  totalCount: number\n  projectIds: string[]\n  internalReferences?: {\n    totalCount: number\n    references: Array<{_id: string; _type: string}>\n  }\n  crossDatasetReferences?: {\n    totalCount: number\n    references: Array<{\n      /**\n       * The project ID of the document that is currently referencing the subject\n       * document. Unlike `documentId` and `datasetName`, this should always be\n       * defined.\n       */\n      projectId: string\n      /**\n       * The ID of the document that is currently referencing the subject\n       * document. This will be omitted if there is no access to the current\n       * project and dataset pair (e.g. if no `sanity-project-token` were\n       * configured)\n       */\n      documentId?: string\n      /**\n       * The dataset name that is currently referencing the subject document.\n       * This will be omitted if there is no access to the current project and\n       * dataset pair (e.g. if no `sanity-project-token` were configured)\n       */\n      datasetName?: string\n    }>\n  }\n}\n\nfunction getDocumentExistence(\n  documentId: string,\n  {versionedClient}: {versionedClient: SanityClient}\n): Observable<string | undefined> {\n  const draftId = getDraftId(documentId)\n  const publishedId = getPublishedId(documentId)\n  const requestOptions = {\n    uri: versionedClient.getDataUrl('doc', `${draftId},${publishedId}`),\n    json: true,\n    query: {excludeContent: 'true'},\n    tag: 'use-referring-documents.document-existence',\n  }\n  return versionedClient.observable.request<AvailabilityResponse>(requestOptions).pipe(\n    map(({omitted}) => {\n      const nonExistant = omitted.filter((doc) => doc.reason === 'existence')\n      if (nonExistant.length === 2) {\n        // None of the documents exist\n        return undefined\n      }\n\n      if (nonExistant.length === 0) {\n        // Both exist, so use the published one\n        return publishedId\n      }\n\n      // If the draft does not exist, use the published ID, and vice versa\n      return nonExistant.some((doc) => doc.id === draftId) ? publishedId : draftId\n    })\n  )\n}\n\n/**\n * fetches the cross-dataset references using the client observable.request\n * method (for that requests can be automatically cancelled)\n */\nfunction fetchCrossDatasetReferences(\n  documentId: string,\n  context: {versionedClient: SanityClient; crossProjectTokenStore: CrossProjectTokenStore}\n): Observable<ReferringDocuments['crossDatasetReferences']> {\n  const {crossProjectTokenStore, versionedClient} = context\n\n  return getVisiblePoll$().pipe(\n    switchMap(() =>\n      forkJoin({\n        checkDocumentId: getDocumentExistence(documentId, context),\n        crossProjectTokens: crossProjectTokenStore.fetchAllCrossProjectTokens(),\n      })\n    ),\n    switchMap(({checkDocumentId, crossProjectTokens}) => {\n      if (!checkDocumentId) {\n        return of({totalCount: 0, references: []})\n      }\n\n      const currentDataset = versionedClient.config().dataset\n      const headers: Record<string, string> =\n        crossProjectTokens.length > 0\n          ? {\n              'sanity-project-tokens': crossProjectTokens\n                .map((t) => `${t.projectId}=${t.token}`)\n                .join(','),\n            }\n          : {}\n\n      return versionedClient.observable\n        .request({\n          url: `/data/references/${currentDataset}/documents/${checkDocumentId}/to?excludeInternalReferences=true&excludePaths=true`,\n          headers,\n          tag: 'use-referring-documents.external',\n        })\n        .pipe(\n          catchError((e) => {\n            // it's possible that referencing document doesn't exist yet so the\n            // API will return a 404. In those cases, we want to catch and return\n            // a response with no references\n            if (isClientError(e) && e.statusCode === 404) {\n              return of({totalCount: 0, references: []})\n            }\n\n            throw e\n          })\n        )\n    })\n  )\n}\n\nconst useInternalReferences = createHookFromObservableFactory(\n  (documentId: string, context: {documentStore: DocumentStore}) => {\n    const {documentStore} = context\n    const referencesClause = '*[references($documentId)][0...100]{_id,_type}'\n    const totalClause = 'count(*[references($documentId)])'\n    const fetchQuery = `{\"references\":${referencesClause},\"totalCount\":${totalClause}}`\n    const listenQuery = '*[references($documentId)]'\n\n    return documentStore.listenQuery(\n      {fetch: fetchQuery, listen: listenQuery},\n      {documentId},\n      {tag: 'use-referring-documents', transitions: ['appear', 'disappear'], throttleTime: 5000}\n    ) as Observable<ReferringDocuments['internalReferences']>\n  }\n)\n\nconst useCrossDatasetReferences = createHookFromObservableFactory(\n  (\n    documentId: string,\n    context: {crossProjectTokenStore: CrossProjectTokenStore},\n    versionedClient: SanityClient\n  ) => {\n    const {crossProjectTokenStore} = context\n\n    return getVisiblePoll$().pipe(\n      switchMap(() =>\n        fetchCrossDatasetReferences(documentId, {\n          versionedClient,\n          crossProjectTokenStore,\n        })\n      )\n    )\n  }\n)\n\nexport function useReferringDocuments(documentId: string): ReferringDocuments {\n  const versionedClient = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  const documentStore = useDocumentStore()\n  const crossProjectTokenStore = useCrossProjectTokenStore()\n  const publishedId = getPublishedId(documentId)\n\n  const [internalReferences, isInternalReferencesLoading] = useInternalReferences(publishedId, {\n    documentStore,\n  })\n\n  const [crossDatasetReferences, isCrossDatasetReferencesLoading] = useCrossDatasetReferences(\n    publishedId,\n    {crossProjectTokenStore},\n    versionedClient\n  )\n\n  const projectIds = useMemo(() => {\n    return Array.from(\n      new Set(\n        crossDatasetReferences?.references\n          .map((crossDatasetReference) => crossDatasetReference.projectId)\n          .filter(Boolean)\n      )\n    ).sort()\n  }, [crossDatasetReferences?.references])\n\n  return {\n    totalCount: (internalReferences?.totalCount || 0) + (crossDatasetReferences?.totalCount || 0),\n    projectIds,\n    internalReferences,\n    crossDatasetReferences,\n    isLoading: isInternalReferencesLoading || isCrossDatasetReferencesLoading,\n  }\n}\n","import styled, {css} from 'styled-components'\nimport {ButtonTone, Text, Theme} from '@sanity/ui'\nimport React, {ComponentProps} from 'react'\n\nexport interface TextWithToneProps extends ComponentProps<typeof Text> {\n  tone: ButtonTone\n  dimmed?: boolean\n}\n\nexport const TextWithToneStyle = styled(Text)(\n  ({$tone, theme}: {$tone: ButtonTone; theme: Theme}) => {\n    const tone = theme.sanity.color.muted[$tone]\n\n    return css`\n      &:not([data-muted]) {\n        --card-fg-color: ${tone ? tone.enabled.fg : undefined};\n      }\n\n      &[data-dimmed] {\n        opacity: 0.3;\n      }\n    `\n  }\n)\n\nexport const TextWithTone = React.forwardRef(function TextWithTone(\n  props: TextWithToneProps,\n  ref: React.Ref<HTMLDivElement>\n) {\n  const {tone, dimmed, muted, ...rest} = props\n\n  return (\n    <TextWithToneStyle\n      data-ui=\"TextWithTone\"\n      data-dimmed={dimmed ? '' : undefined}\n      data-muted={muted ? '' : undefined}\n      $tone={tone}\n      muted={muted}\n      ref={ref}\n      {...rest}\n    />\n  )\n})\n","import React from 'react'\nimport {useTimeAgo} from '../../hooks'\n\nexport interface TimeAgoProps {\n  time: string | Date\n}\n\nexport function TimeAgo({time}: TimeAgoProps) {\n  const timeAgo = useTimeAgo(time)\n\n  return <span title={timeAgo}>{timeAgo} ago</span>\n}\n","import React from 'react'\nimport {PublishIcon} from '@sanity/icons'\nimport {PreviewValue, SanityDocument} from '@sanity/types'\nimport {Box, Text, Tooltip} from '@sanity/ui'\nimport {TextWithTone} from '../../components/TextWithTone'\nimport {TimeAgo} from './TimeAgo'\n\nexport function PublishedStatus(props: {document?: PreviewValue | Partial<SanityDocument> | null}) {\n  const {document} = props\n  const updatedAt = document && '_updatedAt' in document && document._updatedAt\n\n  return (\n    <Tooltip\n      portal\n      content={\n        <Box padding={2}>\n          <Text size={1}>\n            {document ? (\n              <>Published {updatedAt && <TimeAgo time={updatedAt} />}</>\n            ) : (\n              <>Not published</>\n            )}\n          </Text>\n        </Box>\n      }\n    >\n      <TextWithTone tone=\"positive\" dimmed={!document} muted={!document} size={1}>\n        <PublishIcon />\n      </TextWithTone>\n    </Tooltip>\n  )\n}\n","import React from 'react'\nimport {EditIcon} from '@sanity/icons'\nimport {PreviewValue, SanityDocument} from '@sanity/types'\nimport {Box, Text, Tooltip} from '@sanity/ui'\nimport {TextWithTone} from '../../components/TextWithTone'\nimport {TimeAgo} from './TimeAgo'\n\nexport function DraftStatus(props: {document?: PreviewValue | Partial<SanityDocument> | null}) {\n  const {document} = props\n  const updatedAt = document && '_updatedAt' in document && document._updatedAt\n\n  return (\n    <Tooltip\n      portal\n      content={\n        <Box padding={2}>\n          <Text size={1}>\n            {document ? (\n              <>Edited {updatedAt && <TimeAgo time={updatedAt} />}</>\n            ) : (\n              <>No unpublished edits</>\n            )}\n          </Text>\n        </Box>\n      }\n    >\n      <TextWithTone tone=\"caution\" dimmed={!document} muted={!document} size={1}>\n        <EditIcon />\n      </TextWithTone>\n    </Tooltip>\n  )\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport {PreviewValue, SanityDocument, SchemaType} from '@sanity/types'\nimport {assignWith} from 'lodash'\nimport React from 'react'\nimport {combineLatest, Observable, of} from 'rxjs'\nimport {map, startWith} from 'rxjs/operators'\nimport {DocumentPreviewStore} from '../../../preview'\nimport {getDraftId, getPublishedId} from '../../../util'\nimport {PaneItemPreviewState} from './types'\n\nexport const isLiveEditEnabled = (schemaType: SchemaType) => schemaType.liveEdit === true\n\nexport const getMissingDocumentFallback = (item: SanityDocument): PreviewValue => ({\n  title: <em>{item.title ? String(item.title) : 'Missing document'}</em>,\n  subtitle: <em>{item.title ? `Missing document ID: ${item._id}` : `Document ID: ${item._id}`}</em>,\n  media: WarningOutlineIcon,\n})\n\nexport const getValueWithFallback = ({\n  value,\n  draft,\n  published,\n}: {\n  value: SanityDocument\n  draft?: Partial<SanityDocument> | PreviewValue | null\n  published?: Partial<SanityDocument> | PreviewValue | null\n}): PreviewValue => {\n  const snapshot = draft || published\n\n  if (!snapshot) {\n    return getMissingDocumentFallback(value)\n  }\n\n  return assignWith({}, snapshot, value, (objValue, srcValue) => {\n    return typeof srcValue === 'undefined' ? objValue : srcValue\n  }) as PreviewValue\n}\n\nexport function getPreviewStateObservable(\n  documentPreviewStore: DocumentPreviewStore,\n  schemaType: SchemaType,\n  documentId: string,\n  title: React.ReactNode\n): Observable<PaneItemPreviewState> {\n  const draft$ = isLiveEditEnabled(schemaType)\n    ? of({snapshot: null})\n    : documentPreviewStore.observeForPreview(\n        {_type: 'reference', _ref: getDraftId(documentId)},\n        schemaType\n      )\n\n  const published$ = documentPreviewStore.observeForPreview(\n    {_type: 'reference', _ref: getPublishedId(documentId)},\n    schemaType\n  )\n\n  return combineLatest([draft$, published$]).pipe(\n    map(([draft, published]) => ({\n      draft: draft.snapshot ? {title, ...(draft.snapshot || {})} : null,\n      isLoading: false,\n      published: published.snapshot ? {title, ...(published.snapshot || {})} : null,\n    })),\n    startWith({draft: null, isLoading: true, published: null})\n  )\n}\n","import {SanityDocument, SchemaType} from '@sanity/types'\nimport React, {isValidElement} from 'react'\nimport {Subscription} from 'rxjs'\nimport {isNumber, isString} from 'lodash'\nimport {Inline} from '@sanity/ui'\nimport {PublishedStatus} from '../PublishedStatus'\nimport {DraftStatus} from '../DraftStatus'\nimport {GeneralPreviewLayoutKey} from '../../../components/previews'\nimport {DocumentPreviewPresence} from '../../../presence'\nimport {DocumentPreviewStore, SanityDefaultPreview} from '../../../preview'\nimport {isRecord} from '../../../util'\nimport {DocumentPresence} from '../../../datastores'\nimport {PaneItemPreviewState} from './types'\nimport {getPreviewStateObservable, getValueWithFallback} from './helpers'\n\nexport interface PaneItemPreviewProps {\n  documentPreviewStore: DocumentPreviewStore\n  icon: React.ComponentType | false\n  layout: GeneralPreviewLayoutKey\n  presence?: DocumentPresence[]\n  schemaType: SchemaType\n  value: SanityDocument\n}\n\nexport class PaneItemPreview extends React.Component<PaneItemPreviewProps, PaneItemPreviewState> {\n  state: PaneItemPreviewState = {}\n\n  subscription: Subscription\n\n  constructor(props: PaneItemPreviewProps) {\n    super(props)\n\n    const {value, schemaType} = props\n    // const {title} = value\n    const title =\n      (isRecord(value.title) && isValidElement(value.title)) ||\n      isString(value.title) ||\n      isNumber(value.title)\n        ? value.title\n        : null\n\n    let sync = true\n\n    this.subscription = getPreviewStateObservable(\n      props.documentPreviewStore,\n      schemaType,\n      value._id,\n      title\n    ).subscribe((state) => {\n      if (sync) {\n        this.state = state\n      } else {\n        this.setState(state)\n      }\n    })\n\n    sync = false\n  }\n\n  componentWillUnmount() {\n    if (this.subscription) {\n      this.subscription.unsubscribe()\n    }\n  }\n\n  render() {\n    const {icon, layout, presence, value} = this.props\n    const {draft, published, isLoading} = this.state\n\n    const status = isLoading ? null : (\n      <Inline space={4}>\n        {presence && presence.length > 0 && <DocumentPreviewPresence presence={presence} />}\n        <PublishedStatus document={published} />\n        <DraftStatus document={draft} />\n      </Inline>\n    )\n\n    return (\n      <SanityDefaultPreview\n        {...getValueWithFallback({value, draft, published})}\n        isPlaceholder={isLoading}\n        icon={icon}\n        layout={layout}\n        status={status}\n      />\n    )\n  }\n}\n","import React, {useCallback} from 'react'\nimport type {SanityDocument, SchemaType} from '@sanity/types'\nimport {getPublishedId} from '../../../util'\nimport {PreviewCard} from '../../../components/PreviewCard'\nimport {useDocumentPresence, useDocumentPreviewStore} from '../../../datastores'\nimport {PaneItemPreview} from '../paneItem/PaneItemPreview'\nimport {usePaneRouter} from '../paneRouter'\n\nconst EMPTY_ARRAY: [] = []\n\ninterface ReferencePreviewLinkProps {\n  onClick?: () => void\n  type: SchemaType & {icon?: any}\n  value: SanityDocument\n}\n\nexport function ReferencePreviewLink(props: ReferencePreviewLinkProps) {\n  const {onClick, type, value} = props\n  const publishedId = getPublishedId(value?._id)\n  const documentPresence = useDocumentPresence(publishedId)\n  const documentPreviewStore = useDocumentPreviewStore()\n  const {ReferenceChildLink} = usePaneRouter()\n\n  const Link = useCallback(\n    (linkProps: {children: React.ReactNode}) => (\n      <ReferenceChildLink\n        documentId={value?._id}\n        documentType={type?.name}\n        parentRefPath={EMPTY_ARRAY}\n        {...linkProps}\n      />\n    ),\n    [ReferenceChildLink, type?.name, value?._id]\n  )\n\n  return (\n    <PreviewCard\n      __unstable_focusRing\n      as={Link}\n      data-as=\"a\"\n      onClick={onClick}\n      padding={2}\n      radius={2}\n    >\n      <PaneItemPreview\n        documentPreviewStore={documentPreviewStore}\n        icon={type?.icon}\n        layout=\"default\"\n        presence={documentPresence?.length > 0 ? documentPresence : EMPTY_ARRAY}\n        schemaType={type}\n        value={value}\n      />\n    </PreviewCard>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {rem, Text, Card, Box, Tooltip, Container, Inline} from '@sanity/ui'\nimport {InfoOutlineIcon} from '@sanity/icons'\n\nexport const ChevronWrapper = styled(Box)`\n  margin-left: auto;\n`\n\nexport const CrossDatasetReferencesDetails = styled.details`\n  flex: none;\n\n  &[open] ${ChevronWrapper} {\n    transform: rotate(180deg);\n  }\n`\n\nexport const CrossDatasetReferencesSummary = styled.summary`\n  list-style: none;\n\n  &::-webkit-details-marker {\n    display: none;\n  }\n`\n\nexport const TableContainer = styled(Box).attrs({paddingX: 2, paddingBottom: 2})`\n  overflow: auto;\n  max-height: 150px;\n`\n\nexport const Table = styled.table`\n  width: 100%;\n  text-align: left;\n  padding: 0 ${({theme}) => rem(theme.sanity.space[2])};\n  border-collapse: collapse;\n\n  th {\n    padding: ${({theme}) => rem(theme.sanity.space[1])};\n  }\n\n  thead > tr {\n    position: sticky;\n    top: 0;\n    background: var(--card-bg-color);\n    z-index: 1;\n  }\n\n  td {\n    padding: 0 ${({theme}) => rem(theme.sanity.space[1])};\n  }\n\n  tr > *:last-child {\n    text-align: right;\n  }\n`\n\nexport const ReferencesCard = styled(Card).attrs({\n  radius: 2,\n  shadow: 1,\n  marginBottom: 4,\n  flex: 'auto',\n})`\n  overflow: hidden;\n  min-height: 150px;\n`\n\nexport const OtherReferenceCount = (props: {totalCount: number; references: unknown[]}) => {\n  const difference = props.totalCount - props.references.length\n\n  if (!difference) return null\n\n  return (\n    <Inline space={2}>\n      <Text size={1} muted>\n        {difference} other reference{difference === 1 ? '' : 's'} not shown{' '}\n      </Text>\n\n      <Tooltip\n        portal\n        placement=\"top\"\n        content={\n          <Container width={0}>\n            <Box padding={2}>\n              <Text size={1}>\n                We can't show metadata about these references because no token with access to the\n                datasets they are in was found.\n              </Text>\n            </Box>\n          </Container>\n        }\n      >\n        <Text size={1} muted>\n          <InfoOutlineIcon />\n        </Text>\n      </Tooltip>\n    </Inline>\n  )\n}\n","import React, {useCallback} from 'react'\nimport {\n  WarningOutlineIcon,\n  DocumentsIcon,\n  ClipboardIcon,\n  UnknownIcon,\n  ChevronDownIcon,\n} from '@sanity/icons'\nimport {useToast, Text, Box, Button, Flex, Label, Card, Stack} from '@sanity/ui'\nimport {CopyToClipboard} from 'react-copy-to-clipboard'\nimport {useSchema} from '../../../hooks'\nimport {SanityDefaultPreview} from '../../../preview'\nimport {ReferencePreviewLink} from './ReferencePreviewLink'\nimport {ReferringDocuments} from './useReferringDocuments'\nimport {\n  ReferencesCard,\n  OtherReferenceCount,\n  CrossDatasetReferencesDetails,\n  CrossDatasetReferencesSummary,\n  TableContainer,\n  Table,\n  ChevronWrapper,\n} from './ConfirmDeleteDialogBody.styles'\n\ntype DeletionConfirmationDialogBodyProps = Required<ReferringDocuments> & {\n  documentTitle: React.ReactNode\n  action: string\n  onReferenceLinkClick?: () => void\n}\n\n/**\n * The inner part of the `ConfirmDeleteDialog`. This is ran when both the\n * `crossDatasetReferences` and `internalReferences` are loaded.\n */\nexport function ConfirmDeleteDialogBody({\n  crossDatasetReferences,\n  internalReferences,\n  documentTitle,\n  totalCount,\n  action,\n  projectIds,\n  onReferenceLinkClick,\n}: DeletionConfirmationDialogBodyProps) {\n  const schema = useSchema()\n  const toast = useToast()\n\n  const renderPreviewItem = useCallback(\n    (item) => {\n      const type = schema.get(item._type)\n      if (type) {\n        return <ReferencePreviewLink type={type} value={item} onClick={onReferenceLinkClick} />\n      }\n\n      return (\n        // Padding added to match the ReferencePreviewLink styling\n        <Box padding={2}>\n          <SanityDefaultPreview\n            icon={UnknownIcon}\n            title=\"Preview Unavailable\"\n            subtitle={`ID: ${item._id}`}\n            layout=\"default\"\n          />\n        </Box>\n      )\n    },\n    [schema, onReferenceLinkClick]\n  )\n\n  if (internalReferences?.totalCount === 0 && crossDatasetReferences?.totalCount === 0) {\n    return (\n      <Text as=\"p\">\n        Are you sure you want to delete <strong>“{documentTitle}”</strong>?\n      </Text>\n    )\n  }\n\n  const documentCount =\n    crossDatasetReferences.totalCount === 1\n      ? '1 document'\n      : `${crossDatasetReferences.totalCount.toLocaleString()} documents`\n  const projectCount = projectIds.length === 1 ? 'another project' : `${projectIds.length} projects`\n  const projectIdList = `Project ID${projectIds.length === 1 ? '' : 's'}: ${projectIds.join(', ')}`\n\n  return (\n    <>\n      <Card padding={3} radius={2} tone=\"caution\" marginBottom={4} flex=\"none\">\n        <Flex>\n          <Text aria-hidden=\"true\" size={1}>\n            <WarningOutlineIcon />\n          </Text>\n          <Box flex={1} marginLeft={3}>\n            <Text size={1}>\n              {totalCount === 1 ? (\n                <>1 document refers to “{documentTitle}”</>\n              ) : (\n                <>\n                  {totalCount.toLocaleString()} documents refer to “{documentTitle}”\n                </>\n              )}\n            </Text>\n          </Box>\n        </Flex>\n      </Card>\n\n      <Box flex=\"none\" marginBottom={4}>\n        <Text>\n          You may not be able to {action} “{documentTitle}” because the following documents refer to\n          it:\n        </Text>\n      </Box>\n\n      <ReferencesCard>\n        <Flex direction=\"column\" height=\"fill\">\n          {internalReferences.totalCount > 0 && (\n            <Stack as=\"ul\" padding={3} space={3} overflow=\"auto\" data-testid=\"internal-references\">\n              {internalReferences?.references.map((item) => (\n                <Box as=\"li\" key={item._id}>\n                  {renderPreviewItem(item)}\n                </Box>\n              ))}\n\n              {internalReferences.totalCount > internalReferences.references.length && (\n                <Box as=\"li\" padding={3}>\n                  <OtherReferenceCount {...internalReferences} />\n                </Box>\n              )}\n            </Stack>\n          )}\n\n          {crossDatasetReferences.totalCount > 0 && (\n            <CrossDatasetReferencesDetails\n              data-testid=\"cross-dataset-references\"\n              style={{\n                // only add the border if needed\n                borderTop:\n                  internalReferences.totalCount > 0\n                    ? '1px solid var(--card-shadow-outline-color)'\n                    : undefined,\n              }}\n            >\n              <CrossDatasetReferencesSummary>\n                <Flex padding={4} align=\"center\">\n                  <Box marginRight={4}>\n                    <Text size={3}>\n                      <DocumentsIcon />\n                    </Text>\n                  </Box>\n                  <Flex marginRight={4} direction=\"column\">\n                    <Box marginBottom={2}>\n                      <Text>\n                        {documentCount} in {projectCount}\n                      </Text>\n                    </Box>\n                    <Box>\n                      <Text title={projectIdList} textOverflow=\"ellipsis\" size={1} muted>\n                        {projectIdList}\n                      </Text>\n                    </Box>\n                  </Flex>\n                  <ChevronWrapper>\n                    <Text muted>\n                      <ChevronDownIcon />\n                    </Text>\n                  </ChevronWrapper>\n                </Flex>\n              </CrossDatasetReferencesSummary>\n\n              <TableContainer>\n                <Table>\n                  <thead>\n                    <tr>\n                      <th>\n                        <Label muted size={0}>\n                          Project ID\n                        </Label>\n                      </th>\n                      <th>\n                        <Label muted size={0}>\n                          Dataset\n                        </Label>\n                      </th>\n                      <th>\n                        <Label muted size={0}>\n                          Document ID\n                        </Label>\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {crossDatasetReferences.references\n                      .filter((reference): reference is Required<typeof reference> => {\n                        return (\n                          'projectId' in reference &&\n                          'datasetName' in reference &&\n                          'documentId' in reference\n                        )\n                      })\n                      .map(({projectId, datasetName, documentId}, index) => (\n                        // eslint-disable-next-line react/no-array-index-key\n                        <tr key={`${documentId}-${index}`}>\n                          <td>\n                            <Text size={1}>{projectId}</Text>\n                          </td>\n                          <td>\n                            <Text size={1}>{datasetName}</Text>\n                          </td>\n                          <td>\n                            <Flex align=\"center\" gap={2} justify=\"flex-end\">\n                              <Text textOverflow=\"ellipsis\" size={1}>\n                                {documentId}\n                              </Text>\n                              <CopyToClipboard\n                                text={documentId}\n                                // eslint-disable-next-line react/jsx-no-bind\n                                onCopy={() => {\n                                  // TODO: this isn't visible with the dialog open\n                                  toast.push({\n                                    title: 'Copied document ID to clipboard!',\n                                    status: 'success',\n                                  })\n                                }}\n                              >\n                                <Button\n                                  title=\"Copy ID to clipboard\"\n                                  mode=\"bleed\"\n                                  icon={ClipboardIcon}\n                                  fontSize={0}\n                                />\n                              </CopyToClipboard>\n                            </Flex>\n                          </td>\n                        </tr>\n                      ))}\n                  </tbody>\n                </Table>\n                <Box padding={2}>\n                  <OtherReferenceCount {...crossDatasetReferences} />\n                </Box>\n              </TableContainer>\n            </CrossDatasetReferencesDetails>\n          )}\n        </Flex>\n      </ReferencesCard>\n\n      <Box flex=\"none\">\n        <Text>\n          If you {action} this document, documents that refer to it will no longer be able to access\n          it.\n        </Text>\n      </Box>\n    </>\n  )\n}\n","import React, {useMemo} from 'react'\nimport styled from 'styled-components'\nimport {Box, Dialog, Button, Text, Spinner, Grid, Flex} from '@sanity/ui'\nimport {useId} from '@reach/auto-id'\nimport {DocTitle} from '../DocTitle'\nimport {useReferringDocuments} from './useReferringDocuments'\nimport {ConfirmDeleteDialogBody} from './ConfirmDeleteDialogBody'\n\nexport const DialogBody = styled(Flex).attrs({\n  padding: 4,\n  direction: 'column',\n  height: 'fill',\n})`\n  box-sizing: border-box;\n`\n\nexport const LoadingContainer = styled(Flex).attrs({\n  align: 'center',\n  direction: 'column',\n  justify: 'center',\n})`\n  height: 300px;\n`\n\nexport interface ConfirmDeleteDialogProps {\n  /**\n   * Incoming document ID used to find other referencing documents. This\n   * field respects draft IDs (e.g. if you pass in a published ID when one\n   * doesn't exist the document title may not show up).\n   */\n  id: string\n  /**\n   * The schema typename of the incoming document\n   */\n  type: string\n  /**\n   * The name of the action being done. (e.g. the `'unpublish'` action requires\n   * the same document deletion confirmation).\n   */\n  action?: string\n  onCancel: () => void\n  onConfirm: () => void\n}\n\n/**\n * A confirmation dialog used to prevent unwanted document deletes. Loads all\n * the referencing internal and cross-data references prior to showing the\n * delete button.\n */\nexport function ConfirmDeleteDialog({\n  id,\n  type,\n  action = 'delete',\n  onCancel,\n  onConfirm,\n}: ConfirmDeleteDialogProps) {\n  const dialogId = `deletion-confirmation-${useId()}`\n  const {internalReferences, crossDatasetReferences, isLoading, totalCount, projectIds} =\n    useReferringDocuments(id)\n  const capitalizedAction = `${action.substring(0, 1).toUpperCase()}${action.substring(1)}`\n\n  const documentTitle = <DocTitle document={useMemo(() => ({_id: id, _type: type}), [id, type])} />\n  const showConfirmButton = !isLoading\n\n  return (\n    <Dialog\n      width={1}\n      id={dialogId}\n      header={`${capitalizedAction} document?`}\n      footer={\n        <Grid columns={showConfirmButton ? 2 : 1} gap={2} paddingX={4} paddingY={3}>\n          <Button mode=\"ghost\" onClick={onCancel} text=\"Cancel\" />\n\n          {showConfirmButton && (\n            <Button\n              data-testid=\"confirm-delete-button\"\n              text={totalCount > 0 ? `${capitalizedAction} anyway` : `${capitalizedAction} now`}\n              tone=\"critical\"\n              onClick={onConfirm}\n            />\n          )}\n        </Grid>\n      }\n      onClose={onCancel}\n      onClickOutside={onCancel}\n    >\n      <DialogBody>\n        {crossDatasetReferences && internalReferences && !isLoading ? (\n          <ConfirmDeleteDialogBody\n            crossDatasetReferences={crossDatasetReferences}\n            internalReferences={internalReferences}\n            documentTitle={documentTitle}\n            isLoading={isLoading}\n            totalCount={totalCount}\n            action={action}\n            projectIds={projectIds}\n            onReferenceLinkClick={onCancel}\n          />\n        ) : (\n          <LoadingContainer data-testid=\"loading-container\">\n            <Spinner muted />\n            <Box marginTop={3}>\n              <Text align=\"center\" muted size={1}>\n                Looking for referring documents…\n              </Text>\n            </Box>\n          </LoadingContainer>\n        )}\n      </DialogBody>\n    </Dialog>\n  )\n}\n","import React, {useCallback, useState} from 'react'\nimport {Box, Flex, Button, Dialog, Text, ErrorBoundary} from '@sanity/ui'\nimport {useId} from '@reach/auto-id'\nimport {ConfirmDeleteDialog, ConfirmDeleteDialogProps} from './ConfirmDeleteDialog'\n\nexport type {ConfirmDeleteDialogProps}\n\ntype ArgType<T> = T extends (arg: infer U) => unknown ? U : never\ntype ErrorInfo = ArgType<React.ComponentProps<typeof ErrorBoundary>['onCatch']>\n\nfunction ConfirmDeleteDialogContainer(props: ConfirmDeleteDialogProps) {\n  const id = useId()\n  const [error, setError] = useState<ErrorInfo | null>(null)\n  const handleRetry = useCallback(() => setError(null), [])\n\n  return error ? (\n    <Dialog\n      id={`dialog-error-${id}`}\n      data-testid=\"confirm-delete-error-dialog\"\n      header=\"Error\"\n      footer={\n        <Flex paddingX={4} paddingY={3} direction=\"column\">\n          <Button mode=\"ghost\" text=\"Retry\" onClick={handleRetry} />\n        </Flex>\n      }\n      onClose={props.onCancel}\n    >\n      <Box padding={4}>\n        <Text>An error occurred while loading referencing documents.</Text>\n      </Box>\n    </Dialog>\n  ) : (\n    <ErrorBoundary onCatch={setError}>\n      <ConfirmDeleteDialog {...props} />\n    </ErrorBoundary>\n  )\n}\n\nexport {ConfirmDeleteDialogContainer as ConfirmDeleteDialog}\n","import {TrashIcon} from '@sanity/icons'\nimport React, {useCallback, useState} from 'react'\nimport {InsufficientPermissionsMessage} from '../../../components/InsufficientPermissionsMessage'\nimport {useCurrentUser, useDocumentPairPermissions} from '../../../datastores'\nimport {useDocumentOperation} from '../../../hooks'\nimport {ConfirmDeleteDialog} from '../../components'\nimport {DocumentActionComponent} from '../types'\n\nconst DISABLED_REASON_TITLE = {\n  NOTHING_TO_DELETE: 'This document doesn’t yet exist or is already deleted',\n}\n\nexport const DeleteAction: DocumentActionComponent = ({id, type, draft, onComplete}) => {\n  const {delete: deleteOp} = useDocumentOperation(id, type)\n  const [isDeleting, setIsDeleting] = useState(false)\n  const [isConfirmDialogOpen, setConfirmDialogOpen] = useState(false)\n\n  const handleCancel = useCallback(() => {\n    setConfirmDialogOpen(false)\n    onComplete()\n  }, [onComplete])\n\n  const handleConfirm = useCallback(() => {\n    setIsDeleting(true)\n    setConfirmDialogOpen(false)\n    deleteOp.execute()\n    onComplete()\n  }, [deleteOp, onComplete])\n\n  const handle = useCallback(() => {\n    setConfirmDialogOpen(true)\n  }, [])\n\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id,\n    type,\n    permission: 'delete',\n  })\n\n  const currentUser = useCurrentUser()\n\n  if (!isPermissionsLoading && !permissions?.granted) {\n    return {\n      tone: 'critical',\n      icon: TrashIcon,\n      disabled: true,\n      label: 'Delete',\n      title: (\n        <InsufficientPermissionsMessage\n          operationLabel=\"delete this document\"\n          currentUser={currentUser}\n        />\n      ),\n    }\n  }\n\n  return {\n    tone: 'critical',\n    icon: TrashIcon,\n    disabled: isDeleting || Boolean(deleteOp.disabled) || isPermissionsLoading,\n    title:\n      (deleteOp.disabled &&\n        DISABLED_REASON_TITLE[deleteOp.disabled as keyof typeof DISABLED_REASON_TITLE]) ||\n      '',\n    label: isDeleting ? 'Deleting…' : 'Delete',\n    shortcut: 'Ctrl+Alt+D',\n    onHandle: handle,\n    modal: isConfirmDialogOpen && {\n      type: 'dialog',\n      onClose: onComplete,\n      content: (\n        <ConfirmDeleteDialog\n          action=\"delete\"\n          id={draft?._id || id}\n          type={type}\n          onCancel={handleCancel}\n          onConfirm={handleConfirm}\n        />\n      ),\n    },\n  }\n}\n\nDeleteAction.action = 'delete'\n","import {ResetIcon} from '@sanity/icons'\nimport React, {useCallback, useMemo, useState} from 'react'\nimport {DocumentActionComponent, DocumentActionModalProps} from '../types'\nimport {useDocumentOperation} from '../../../hooks'\nimport {InsufficientPermissionsMessage} from '../../../components/InsufficientPermissionsMessage'\nimport {useCurrentUser, useDocumentPairPermissions} from '../../../datastores'\n\nconst DISABLED_REASON_TITLE = {\n  NO_CHANGES: 'This document has no unpublished changes',\n  NOT_PUBLISHED: 'This document is not published',\n}\n\nexport const DiscardChangesAction: DocumentActionComponent = ({\n  id,\n  type,\n  published,\n  liveEdit,\n  onComplete,\n}) => {\n  const {discardChanges} = useDocumentOperation(id, type)\n  const [isConfirmDialogOpen, setConfirmDialogOpen] = useState(false)\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id,\n    type,\n    permission: 'discardDraft',\n  })\n  const currentUser = useCurrentUser()\n\n  const handleConfirm = useCallback(() => {\n    discardChanges.execute()\n    onComplete()\n  }, [discardChanges, onComplete])\n\n  const handle = useCallback(() => {\n    setConfirmDialogOpen(true)\n  }, [])\n\n  const modal: DocumentActionModalProps | false = useMemo(\n    () =>\n      isConfirmDialogOpen && {\n        type: 'confirm',\n        tone: 'critical',\n        onCancel: onComplete,\n        onConfirm: handleConfirm,\n        message: <>Are you sure you want to discard all changes since last published?</>,\n      },\n    [handleConfirm, isConfirmDialogOpen, onComplete]\n  )\n\n  if (!published || liveEdit) {\n    return null\n  }\n\n  if (!isPermissionsLoading && !permissions?.granted) {\n    return {\n      tone: 'critical',\n      icon: ResetIcon,\n      disabled: true,\n      label: 'Discard changes',\n      title: (\n        <InsufficientPermissionsMessage\n          operationLabel=\"discard changes in this document\"\n          currentUser={currentUser}\n        />\n      ),\n    }\n  }\n\n  return {\n    tone: 'critical',\n    icon: ResetIcon,\n    disabled: Boolean(discardChanges.disabled) || isPermissionsLoading,\n    title:\n      (discardChanges.disabled &&\n        DISABLED_REASON_TITLE[discardChanges.disabled as keyof typeof DISABLED_REASON_TITLE]) ||\n      '',\n    label: 'Discard changes',\n    onHandle: handle,\n    modal,\n  }\n}\n\nDiscardChangesAction.action = 'discardChanges'\n","import {CopyIcon} from '@sanity/icons'\nimport {uuid} from '@sanity/uuid'\nimport React, {useCallback, useState} from 'react'\nimport {InsufficientPermissionsMessage} from '../../../components/InsufficientPermissionsMessage'\nimport {useCurrentUser, useDocumentPairPermissions} from '../../../datastores'\nimport {useDocumentOperation} from '../../../hooks'\nimport {useRouter} from '../../../router'\nimport {DocumentActionComponent} from '../types'\n\nconst DISABLED_REASON_TITLE = {\n  NOTHING_TO_DUPLICATE: 'This document doesn’t yet exist so there‘s nothing to duplicate',\n}\n\nexport const DuplicateAction: DocumentActionComponent = ({id, type, onComplete}) => {\n  const {duplicate} = useDocumentOperation(id, type)\n  const router = useRouter()\n  const [isDuplicating, setDuplicating] = useState(false)\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id,\n    type,\n    permission: 'duplicate',\n  })\n\n  const currentUser = useCurrentUser()\n\n  const handle = useCallback(() => {\n    const dupeId = uuid()\n\n    setDuplicating(true)\n    ;(duplicate.execute as any)(dupeId)\n    router.navigateIntent('edit', {id: dupeId, type})\n    onComplete()\n  }, [duplicate, onComplete, router, type])\n\n  if (!isPermissionsLoading && !permissions?.granted) {\n    return {\n      icon: CopyIcon,\n      disabled: true,\n      label: 'Duplicate',\n      title: (\n        <InsufficientPermissionsMessage\n          operationLabel=\"duplicate this document\"\n          currentUser={currentUser}\n        />\n      ),\n    }\n  }\n\n  return {\n    icon: CopyIcon,\n    disabled: isDuplicating || Boolean(duplicate.disabled) || isPermissionsLoading,\n    label: isDuplicating ? 'Duplicating…' : 'Duplicate',\n    title:\n      (duplicate.disabled &&\n        DISABLED_REASON_TITLE[duplicate.disabled as keyof typeof DISABLED_REASON_TITLE]) ||\n      '',\n    onHandle: handle,\n  }\n}\n\nDuplicateAction.action = 'duplicate'\n","import {RestoreIcon} from '@sanity/icons'\nimport React, {useCallback, useMemo, useState} from 'react'\nimport {useDocumentOperation} from '../../../hooks'\nimport {useRouter} from '../../../router'\nimport {DocumentActionComponent, DocumentActionModalProps} from '../types'\n\nexport const HistoryRestoreAction: DocumentActionComponent = ({id, type, revision, onComplete}) => {\n  const {restore}: any = useDocumentOperation(id, type)\n  const router = useRouter()\n  const [isConfirmDialogOpen, setConfirmDialogOpen] = useState(false)\n\n  const handleConfirm = useCallback(() => {\n    restore.execute(revision)\n    router.navigateIntent('edit', {id, type})\n    onComplete()\n  }, [revision, restore, router, onComplete, id, type])\n\n  const handle = useCallback(() => {\n    setConfirmDialogOpen(true)\n  }, [])\n\n  const modal: DocumentActionModalProps | null = useMemo(() => {\n    if (isConfirmDialogOpen) {\n      return {\n        type: 'confirm',\n        tone: 'critical',\n        onCancel: onComplete,\n        onConfirm: handleConfirm,\n        message: <>Are you sure you want to restore this document?</>,\n      }\n    }\n\n    return null\n  }, [handleConfirm, isConfirmDialogOpen, onComplete])\n\n  const isRevisionInitialVersion = revision === '@initial'\n\n  return {\n    label: 'Restore',\n    color: 'primary',\n    onHandle: handle,\n    title: isRevisionInitialVersion\n      ? \"You can't restore to the initial version\"\n      : 'Restore to this version',\n    icon: RestoreIcon,\n    modal,\n    disabled: isRevisionInitialVersion,\n  }\n}\n\nHistoryRestoreAction.action = 'restore'\n","import {CheckmarkIcon, PublishIcon} from '@sanity/icons'\nimport React, {useCallback, useEffect, useState} from 'react'\nimport {isValidationErrorMarker} from '@sanity/types'\nimport {useSyncState, useDocumentOperation, useValidationStatus} from '../../../hooks'\nimport {DocumentActionComponent} from '../types'\nimport {InsufficientPermissionsMessage} from '../../../components/InsufficientPermissionsMessage'\nimport {TimeAgo} from '../../components'\nimport {useDocumentPane} from '../../panes/document/useDocumentPane'\nimport {useCurrentUser, useDocumentPairPermissions} from '../../../datastores'\n\nconst DISABLED_REASON_TITLE = {\n  LIVE_EDIT_ENABLED: 'Cannot publish since liveEdit is enabled for this document type',\n  ALREADY_PUBLISHED: 'Already published',\n  NO_CHANGES: 'No unpublished changes',\n}\n\nfunction getDisabledReason(\n  reason: keyof typeof DISABLED_REASON_TITLE,\n  publishedAt: string | undefined\n) {\n  if (reason === 'ALREADY_PUBLISHED' && publishedAt) {\n    return (\n      <>\n        <span>\n          Published <TimeAgo time={publishedAt} />\n        </span>\n      </>\n    )\n  }\n  return DISABLED_REASON_TITLE[reason]\n}\n\n// eslint-disable-next-line complexity\nexport const PublishAction: DocumentActionComponent = (props) => {\n  const {id, type, liveEdit, draft, published} = props\n  const [publishState, setPublishState] = useState<'publishing' | 'published' | null>(null)\n  const {publish}: any = useDocumentOperation(id, type)\n  const validationStatus = useValidationStatus(id, type)\n  const syncState = useSyncState(id, type)\n  const {changesOpen, onHistoryOpen} = useDocumentPane()\n  const hasValidationErrors = validationStatus.validation.some(isValidationErrorMarker)\n  // we use this to \"schedule\" publish after pending tasks (e.g. validation and sync) has completed\n  const [publishScheduled, setPublishScheduled] = useState<boolean>(false)\n  const isNeitherSyncingNorValidating = !syncState.isSyncing && !validationStatus.isValidating\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id,\n    type,\n    permission: 'publish',\n  })\n\n  const currentUser = useCurrentUser()\n\n  // eslint-disable-next-line no-nested-ternary\n  const title = publish.disabled\n    ? getDisabledReason(publish.disabled, (published || {})._updatedAt) || ''\n    : hasValidationErrors\n    ? 'There are validation errors that need to be fixed before this document can be published'\n    : ''\n\n  const hasDraft = Boolean(draft)\n\n  const doPublish = useCallback(() => {\n    publish.execute()\n    setPublishState('publishing')\n  }, [publish])\n\n  useEffect(() => {\n    if (publishScheduled && isNeitherSyncingNorValidating) {\n      if (!hasValidationErrors) {\n        doPublish()\n      }\n\n      setPublishScheduled(false)\n    }\n  }, [isNeitherSyncingNorValidating, doPublish, hasValidationErrors, publishScheduled])\n\n  useEffect(() => {\n    const didPublish = publishState === 'publishing' && !hasDraft\n    if (didPublish) {\n      if (changesOpen) {\n        // Re-open the panel\n        onHistoryOpen()\n      }\n    }\n    const nextState = didPublish ? 'published' : null\n    const delay = didPublish ? 200 : 4000\n    const timer = setTimeout(() => {\n      setPublishState(nextState)\n    }, delay)\n    return () => clearTimeout(timer)\n  }, [changesOpen, publishState, hasDraft, onHistoryOpen])\n\n  const handle = useCallback(() => {\n    if (syncState.isSyncing || validationStatus.isValidating) {\n      setPublishScheduled(true)\n    } else {\n      doPublish()\n    }\n  }, [syncState.isSyncing, validationStatus.isValidating, doPublish])\n\n  if (liveEdit) {\n    return {\n      tone: 'positive',\n      label: 'Publish',\n      title:\n        'Live Edit is enabled for this content type and publishing happens automatically as you make changes',\n      disabled: true,\n    }\n  }\n\n  if (!isPermissionsLoading && !permissions?.granted) {\n    return {\n      tone: 'positive',\n      label: 'Publish',\n      title: (\n        <InsufficientPermissionsMessage\n          operationLabel=\"publish this document\"\n          currentUser={currentUser}\n        />\n      ),\n      disabled: true,\n    }\n  }\n\n  const disabled = Boolean(\n    publishScheduled ||\n      publishState === 'publishing' ||\n      publishState === 'published' ||\n      hasValidationErrors ||\n      publish.disabled\n  )\n\n  return {\n    disabled: disabled || isPermissionsLoading,\n    tone: 'positive',\n    label:\n      // eslint-disable-next-line no-nested-ternary\n      publishState === 'published'\n        ? 'Published'\n        : publishScheduled || publishState === 'publishing'\n        ? 'Publishing…'\n        : 'Publish',\n    // @todo: Implement loading state, to show a `<Button loading />` state\n    // loading: publishScheduled || publishState === 'publishing',\n    icon: publishState === 'published' ? CheckmarkIcon : PublishIcon,\n    // eslint-disable-next-line no-nested-ternary\n    title: publishScheduled\n      ? 'Waiting for tasks to finish before publishing'\n      : publishState === 'published' || publishState === 'publishing'\n      ? null\n      : title,\n    shortcut: disabled || publishScheduled ? null : 'Ctrl+Alt+P',\n    onHandle: handle,\n  }\n}\n\nPublishAction.action = 'publish'\n","import {UnpublishIcon} from '@sanity/icons'\nimport React, {useCallback, useMemo, useState} from 'react'\nimport {InsufficientPermissionsMessage} from '../../../components/InsufficientPermissionsMessage'\nimport {useCurrentUser, useDocumentPairPermissions} from '../../../datastores'\nimport {useDocumentOperation} from '../../../hooks'\nimport {ConfirmDeleteDialog} from '../../components'\nimport {DocumentActionComponent, DocumentActionModalProps} from '../types'\n\nconst DISABLED_REASON_TITLE = {\n  NOT_PUBLISHED: 'This document is not published',\n}\n\nexport const UnpublishAction: DocumentActionComponent = ({\n  id,\n  type,\n  draft,\n  onComplete,\n  liveEdit,\n}) => {\n  const {unpublish} = useDocumentOperation(id, type)\n  const [isConfirmDialogOpen, setConfirmDialogOpen] = useState(false)\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id,\n    type,\n    permission: 'unpublish',\n  })\n  const currentUser = useCurrentUser()\n\n  const handleCancel = useCallback(() => {\n    setConfirmDialogOpen(false)\n    onComplete()\n  }, [onComplete])\n\n  const handleConfirm = useCallback(() => {\n    setConfirmDialogOpen(false)\n    unpublish.execute()\n    onComplete()\n  }, [onComplete, unpublish])\n\n  const modal: DocumentActionModalProps | null = useMemo(() => {\n    if (isConfirmDialogOpen) {\n      return {\n        type: 'dialog',\n        onClose: onComplete,\n        content: (\n          <ConfirmDeleteDialog\n            id={draft?._id || id}\n            type={type}\n            action=\"unpublish\"\n            onCancel={handleCancel}\n            onConfirm={handleConfirm}\n          />\n        ),\n      }\n    }\n\n    return null\n  }, [draft, id, handleCancel, handleConfirm, isConfirmDialogOpen, onComplete, type])\n\n  if (liveEdit) {\n    return null\n  }\n\n  if (!isPermissionsLoading && !permissions?.granted) {\n    return {\n      tone: 'critical',\n      icon: UnpublishIcon,\n      label: 'Unpublish',\n      title: (\n        <InsufficientPermissionsMessage\n          operationLabel=\"unpublish this document\"\n          currentUser={currentUser}\n        />\n      ),\n      disabled: true,\n    }\n  }\n\n  return {\n    tone: 'critical',\n    icon: UnpublishIcon,\n    disabled: Boolean(unpublish.disabled) || isPermissionsLoading,\n    label: 'Unpublish',\n    title: unpublish.disabled\n      ? DISABLED_REASON_TITLE[unpublish.disabled as keyof typeof DISABLED_REASON_TITLE]\n      : '',\n    onHandle: () => setConfirmDialogOpen(true),\n    modal,\n  }\n}\n\nUnpublishAction.action = 'unpublish'\n","import type {Schema, AssetSource} from '@sanity/types'\nimport type {Template, TemplateResponse} from '../templates'\nimport {\n  DeleteAction,\n  DiscardChangesAction,\n  DocumentActionComponent,\n  DuplicateAction,\n  PublishAction,\n  UnpublishAction,\n} from '../desk/actions'\nimport {DocumentBadgeComponent, LiveEditBadge} from '../desk/badges'\nimport type {\n  _DocumentLanguageFilterComponent,\n  _DocumentLanguageFilterContext,\n  AsyncConfigPropertyReducer,\n  ConfigContext,\n  ConfigPropertyReducer,\n  DocumentActionsContext,\n  DocumentBadgesContext,\n  NewDocumentOptionsContext,\n  ResolveProductionUrlContext,\n  Tool,\n} from './types'\n\nexport const initialDocumentBadges = [LiveEditBadge]\n\nexport const initialDocumentActions = [\n  PublishAction,\n  DiscardChangesAction,\n  UnpublishAction,\n  DuplicateAction,\n  DeleteAction,\n]\n\nexport const initialLanguageFilter: _DocumentLanguageFilterComponent[] = []\n\nexport const schemaTypesReducer: ConfigPropertyReducer<\n  Schema.TypeDefinition[],\n  Omit<ConfigContext, 'schema' | 'currentUser' | 'client' | 'getClient'>\n> = (prev, {schema}, context) => {\n  const schemaTypes = schema?.types\n\n  if (!schemaTypes) return prev\n  if (typeof schemaTypes === 'function') return schemaTypes(prev, context)\n  if (Array.isArray(schemaTypes)) return [...prev, ...schemaTypes]\n\n  throw new Error(\n    `Expected \\`schema.types\\` to an array or a function but found ${typeof schemaTypes} instead.`\n  )\n}\n\nexport const resolveProductionUrlReducer: AsyncConfigPropertyReducer<\n  string | undefined,\n  ResolveProductionUrlContext\n> = async (prev, {document}, context) => {\n  const resolveProductionUrl = document?.productionUrl\n  // the redundant await is useful for error logging because the error is caught\n  // in this stack vs somewhere down stream\n  // eslint-disable-next-line no-return-await\n  if (resolveProductionUrl) return await resolveProductionUrl(prev, context)\n  return prev\n}\n\nexport const toolsReducer: ConfigPropertyReducer<Tool[], ConfigContext> = (\n  prev,\n  {tools},\n  context\n) => {\n  if (!tools) return prev\n  if (typeof tools === 'function') return tools(prev, context)\n  if (Array.isArray(tools)) return [...prev, ...tools]\n\n  throw new Error(`Expected \\`tools\\` to an array or a function but found ${typeof tools} instead.`)\n}\n\nexport const schemaTemplatesReducer: ConfigPropertyReducer<Template[], ConfigContext> = (\n  prev,\n  {schema},\n  context\n) => {\n  const schemaTemplates = schema?.templates\n  if (!schemaTemplates) return prev\n  if (typeof schemaTemplates === 'function') return schemaTemplates(prev, context)\n  if (Array.isArray(schemaTemplates)) return [...prev, ...schemaTemplates]\n\n  throw new Error(\n    `Expected \\`schema.templates\\` to an array or a function but found ${typeof schemaTemplates} instead.`\n  )\n}\n\nexport const documentBadgesReducer: ConfigPropertyReducer<\n  DocumentBadgeComponent[],\n  DocumentBadgesContext\n> = (prev, {document}, context) => {\n  const documentBadges = document?.badges\n  if (!documentBadges) return prev\n\n  if (typeof documentBadges === 'function') return documentBadges(prev, context)\n  if (Array.isArray(documentBadges)) return [...prev, ...documentBadges]\n\n  throw new Error(\n    `Expected \\`document.actions\\` to an array or a function but found ${typeof documentBadges} instead.`\n  )\n}\n\nexport const documentActionsReducer: ConfigPropertyReducer<\n  DocumentActionComponent[],\n  DocumentActionsContext\n> = (prev, {document}, context) => {\n  const documentActions = document?.actions\n  if (!documentActions) return prev\n\n  if (typeof documentActions === 'function') return documentActions(prev, context)\n  if (Array.isArray(documentActions)) return [...prev, ...documentActions]\n\n  throw new Error(\n    `Expected \\`document.actions\\` to an array or a function but found ${typeof documentActions} instead.`\n  )\n}\n\nexport const newDocumentOptionsResolver: ConfigPropertyReducer<\n  TemplateResponse[],\n  NewDocumentOptionsContext\n> = (prev, {document}, context) => {\n  const resolveNewDocumentOptions = document?.newDocumentOptions\n  if (!resolveNewDocumentOptions) return prev\n\n  if (typeof resolveNewDocumentOptions !== 'function') {\n    throw new Error(\n      `Expected \\`document.resolveNewDocumentOptions\\` a function but found ${typeof resolveNewDocumentOptions} instead.`\n    )\n  }\n\n  return resolveNewDocumentOptions(prev, context)\n}\n\nexport const fileAssetSourceResolver: ConfigPropertyReducer<AssetSource[], ConfigContext> = (\n  prev,\n  {form},\n  context\n) => {\n  const assetSources = form?.file?.assetSources\n  if (!assetSources) return prev\n\n  if (typeof assetSources === 'function') return assetSources(prev, context)\n  if (Array.isArray(assetSources)) return [...prev, ...assetSources]\n\n  throw new Error(\n    `Expected \\`file.assetSources\\` to an array or a function but found ${typeof assetSources} instead.`\n  )\n}\n\nexport const imageAssetSourceResolver: ConfigPropertyReducer<AssetSource[], ConfigContext> = (\n  prev,\n  {form},\n  context\n) => {\n  const assetSources = form?.image?.assetSources\n  if (!assetSources) return prev\n\n  if (typeof assetSources === 'function') return assetSources(prev, context)\n  if (Array.isArray(assetSources)) return [...prev, ...assetSources]\n\n  throw new Error(\n    `Expected \\`image.assetSources\\` to an array or a function but found ${typeof assetSources} instead.`\n  )\n}\n\n/**\n * @internal\n */\nexport const _documentLanguageFilterReducer: ConfigPropertyReducer<\n  _DocumentLanguageFilterComponent[],\n  _DocumentLanguageFilterContext\n> = (prev, {document}, context) => {\n  const resolveDocumentLanguageFilter = document?.unstable_languageFilter\n  if (!resolveDocumentLanguageFilter) return prev\n\n  if (typeof resolveDocumentLanguageFilter === 'function')\n    return resolveDocumentLanguageFilter(prev, context)\n\n  if (Array.isArray(resolveDocumentLanguageFilter))\n    return [...prev, ...resolveDocumentLanguageFilter]\n\n  throw new Error(\n    `Expected \\`document.actions\\` to an array or a function but found ${typeof resolveDocumentLanguageFilter} instead.`\n  )\n}\n","import {isRecord} from '../util'\n\nexport interface ConfigPropertyErrorOptions {\n  propertyName: string\n  path: string[]\n  cause: unknown\n}\n\nexport class ConfigPropertyError extends Error {\n  propertyName: string\n  path: string[]\n  cause: unknown\n\n  constructor({propertyName, path, cause}: ConfigPropertyErrorOptions) {\n    const message =\n      isRecord(cause) && typeof cause?.message === 'string' ? `: ${cause.message}` : ''\n\n    super(\n      `An error occurred while resolving \\`${propertyName}\\` from ${path.join(' > ')}${message}`\n    )\n\n    this.propertyName = propertyName\n    this.cause = cause\n    this.path = path\n  }\n}\n","import {ConfigPropertyError} from './ConfigPropertyError'\nimport {PluginOptions, ConfigPropertyReducer, AsyncConfigPropertyReducer} from './types'\n\nconst flattenConfig = (\n  {plugins = [], ...currentConfig}: PluginOptions,\n  path: string[]\n): Array<{config: PluginOptions; path: string[]}> => {\n  return [\n    {config: currentConfig, path: [...path, currentConfig.name]},\n    ...plugins.flatMap((config) => flattenConfig(config, [...path, currentConfig.name])),\n  ]\n}\n\ninterface ResolveConfigPropertyOptions<TValue, TContext> {\n  propertyName: string\n  config: PluginOptions\n  context: TContext\n  initialValue: TValue\n  reducer: ConfigPropertyReducer<TValue, TContext>\n}\ninterface AsyncResolveConfigPropertyOptions<TValue, TContext> {\n  propertyName: string\n  config: PluginOptions\n  context: TContext\n  initialValue: TValue\n  asyncReducer: AsyncConfigPropertyReducer<TValue, TContext>\n}\n\nexport function resolveConfigProperty<TValue, TContext>(\n  options: ResolveConfigPropertyOptions<TValue, TContext>\n): TValue\nexport function resolveConfigProperty<TValue, TContext>(\n  options: AsyncResolveConfigPropertyOptions<TValue, TContext>\n): Promise<TValue>\nexport function resolveConfigProperty<TValue, TContext>({\n  config: inputConfig,\n  context,\n  initialValue,\n  propertyName,\n  ...reducers\n}:\n  | ResolveConfigPropertyOptions<TValue, TContext>\n  | AsyncResolveConfigPropertyOptions<TValue, TContext>): TValue | Promise<TValue> {\n  const configs = flattenConfig(inputConfig, [])\n\n  if ('reducer' in reducers) {\n    return configs.reduce((acc, {config, path}) => {\n      try {\n        return reducers.reducer(acc, config, context)\n      } catch (e) {\n        throw new ConfigPropertyError({\n          propertyName,\n          path: path,\n          cause: e,\n        })\n      }\n    }, initialValue)\n  }\n\n  const reducer = reducers.asyncReducer\n  return (async () => {\n    let current = initialValue\n    for (const {config, path} of configs) {\n      try {\n        current = await reducer(current, config, context)\n      } catch (e) {\n        throw new ConfigPropertyError({\n          propertyName,\n          path,\n          cause: e,\n        })\n      }\n    }\n    return current\n  })()\n}\n","import {isRecord} from '../util'\n\nexport interface ConfigResolutionErrorOptions {\n  name: string\n  type: string\n  causes: Array<ConfigResolutionError | Error | unknown>\n}\n\nexport class ConfigResolutionError extends Error {\n  name: string\n  type: string\n  causes: unknown[]\n\n  constructor({causes, name, type}: ConfigResolutionErrorOptions) {\n    const messages = causes\n      .filter(Boolean)\n      .map((cause) =>\n        isRecord(cause) && typeof cause?.message === 'string' ? cause.message : String(cause)\n      )\n\n    super(\n      `Could not resolve ${type}${name ? ` \\`${name}\\`` : ''}:\\n${messages\n        .map((message) => `\\t- ${message}`)\n        .join('\\n')}\\n\\n`\n    )\n\n    this.name = name\n    this.causes = causes\n    this.type = type\n  }\n}\n","import {Schema} from '@sanity/types'\n\n// TODO: consider removing this error in favor of the `ConfigResolutionError`\nexport class SchemaError extends Error {\n  constructor(public schema: Schema) {\n    super('SchemaError')\n  }\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {COLOR_HUES, hues} from '@sanity/color'\nimport {darken, lighten, hasBadContrast, readableColor} from 'color2k'\n\nfunction pseudoRandomNumber(seed: string) {\n  const hashCode = seed\n    .split('')\n    // eslint-disable-next-line no-bitwise\n    .reduce((prevHash, currVal) => ((prevHash << 5) - prevHash + currVal.charCodeAt(0)) | 0, 0)\n  return Math.abs((hashCode * 16807) % 2147483647) / 2147483647\n}\n\nconst SvgText = styled.text`\n  font-family: ${({theme}) => theme.sanity.fonts.heading.family};\n  font-weight: ${({theme}) => theme.sanity.fonts.heading.weights.bold};\n  font-size: 16px;\n  transform: translateY(1px);\n`\n\n/**\n * Creates an icon element based on the input title\n */\nexport function createDefaultIcon(title: string, subtitle: string) {\n  const rng1 = pseudoRandomNumber(`${title} ${subtitle}`)\n\n  const huesWithoutGray = COLOR_HUES.filter((hue) => hue !== 'gray')\n  const colorHue = huesWithoutGray[Math.floor(rng1 * huesWithoutGray.length)]\n  const possibleTints = ['300', '400', '500', '600', '700'] as const\n  const rng2 = pseudoRandomNumber(rng1.toString())\n  const tint = possibleTints[Math.floor(rng2 * possibleTints.length)]\n  const color = hues[colorHue][tint].hex\n\n  const letters = title\n    // split by whitespace\n    .split(/\\s/g)\n    // replace all non-word characters with empty string\n    .map((word) => word.replace(/\\\\W/g, ''))\n    // remove empty strings\n    .filter(Boolean)\n    // take the first two words\n    .slice(0, 2)\n    // grab the first letter and make it upper case\n    .map((i) => i.charAt(0).toUpperCase())\n\n  const darkened = darken(color, 0.4)\n  const lightened = lighten(color, 0.4)\n\n  /* eslint-disable no-negated-condition */\n  // eslint-disable-next-line no-nested-ternary\n  const textColor = !hasBadContrast(color, 'readable', darkened)\n    ? darkened\n    : !hasBadContrast(color, 'readable', lightened)\n    ? lightened\n    : readableColor(color)\n  /* eslint-enable no-negated-condition */\n\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\">\n      <rect width={32} height={32} rx={2} fill={color} />\n      <SvgText\n        x=\"50%\"\n        y=\"50%\"\n        textAnchor=\"middle\"\n        alignmentBaseline=\"middle\"\n        dominantBaseline=\"middle\"\n        fill={textColor}\n      >\n        {letters}\n      </SvgText>\n    </svg>\n  )\n}\n","import {map, mergeMap, startWith, switchMap} from 'rxjs/operators'\nimport {ReferenceFilterSearchOptions, ReferenceSchemaType} from '@sanity/types'\nimport {combineLatest, EMPTY, Observable, of} from 'rxjs'\nimport {SanityClient} from '@sanity/client'\nimport {DocumentPreviewStore, getPreviewPaths, prepareForPreview} from '../../../../preview'\nimport {createWeightedSearch} from '../../../../search'\nimport {getIdPair, CollatedHit, getDraftId, collate, isRecord} from '../../../../util'\nimport {ReferenceInfo, ReferenceSearchHit} from '../../../inputs/ReferenceInput/types'\n\nconst READABLE = {\n  available: true,\n  reason: 'READABLE',\n} as const\n\nconst PERMISSION_DENIED = {\n  available: false,\n  reason: 'PERMISSION_DENIED',\n} as const\n\nconst NOT_FOUND = {\n  available: false,\n  reason: 'NOT_FOUND',\n} as const\n\n/**\n * Takes an id and a reference schema type, returns metadata about it\n */\nexport function getReferenceInfo(\n  documentPreviewStore: DocumentPreviewStore,\n  id: string,\n  referenceType: ReferenceSchemaType\n): Observable<ReferenceInfo> {\n  const {publishedId, draftId} = getIdPair(id)\n\n  const pairAvailability$ = documentPreviewStore.unstable_observeDocumentPairAvailability({\n    _type: 'reference',\n    _ref: id,\n  })\n\n  return pairAvailability$.pipe(\n    switchMap((pairAvailability) => {\n      if (!pairAvailability.draft.available && !pairAvailability.published.available) {\n        // combine availability of draft + published\n        const availability =\n          pairAvailability.draft.reason === 'PERMISSION_DENIED' ||\n          pairAvailability.published.reason === 'PERMISSION_DENIED'\n            ? PERMISSION_DENIED\n            : NOT_FOUND\n\n        // short circuit, neither draft nor published is available so no point in trying to get preview\n        return of({\n          id,\n          type: undefined,\n          availability,\n          preview: {\n            draft: undefined,\n            published: undefined,\n          },\n        } as const)\n      }\n\n      const draftRef = {_type: 'reference', _ref: draftId}\n      const publishedRef = {_type: 'reference', _ref: publishedId}\n\n      const typeName$ = combineLatest([\n        documentPreviewStore.observeDocumentTypeFromId(draftId),\n        documentPreviewStore.observeDocumentTypeFromId(publishedId),\n      ]).pipe(\n        // assume draft + published are always same type\n        map(([draftTypeName, publishedTypeName]) => draftTypeName || publishedTypeName)\n      )\n\n      return typeName$.pipe(\n        switchMap((typeName) => {\n          if (!typeName) {\n            // we have already asserted that either the draft or the published document is readable, so\n            // if we get here we can't read the _type, so we're likely to be in an inconsistent state\n            // waiting for an update to reach the client. Since we're in the context of a reactive stream based on\n            // the _type we'll get it eventually\n            return EMPTY\n          }\n\n          // get schema type for the referenced document\n          const refSchemaType = referenceType.to.find((memberType) => memberType.name === typeName)!\n\n          if (!refSchemaType) {\n            return EMPTY\n          }\n\n          const previewPaths = [\n            ...(getPreviewPaths(refSchemaType?.preview) || []),\n            ['_updatedAt'],\n            ['_createdAt'],\n          ]\n\n          const draftPreview$ = documentPreviewStore.observePaths(draftRef, previewPaths).pipe(\n            map((result) =>\n              result\n                ? {\n                    _id: draftId,\n                    ...prepareForPreview(result, refSchemaType),\n                  }\n                : undefined\n            ),\n            startWith(undefined)\n          )\n\n          const publishedPreview$ = documentPreviewStore\n            .observePaths(publishedRef, previewPaths)\n            .pipe(\n              map((result) =>\n                result\n                  ? {\n                      _id: publishedId,\n                      ...prepareForPreview(result, refSchemaType),\n                    }\n                  : undefined\n              ),\n              startWith(undefined)\n            )\n\n          const value$ = combineLatest([draftPreview$, publishedPreview$]).pipe(\n            map(([draft, published]) => ({draft, published}))\n          )\n\n          return value$.pipe(\n            map((value): ReferenceInfo => {\n              const availability =\n                // eslint-disable-next-line no-nested-ternary\n                pairAvailability.draft.available || pairAvailability.published.available\n                  ? READABLE\n                  : pairAvailability.draft.reason === 'PERMISSION_DENIED' ||\n                    pairAvailability.published.reason === 'PERMISSION_DENIED'\n                  ? PERMISSION_DENIED\n                  : NOT_FOUND\n\n              return {\n                type: typeName,\n                id: publishedId,\n                availability,\n                preview: {\n                  draft: isRecord(value.draft) ? value.draft : undefined,\n                  published: isRecord(value.published) ? value.published : undefined,\n                },\n              }\n            })\n          )\n        })\n      )\n    })\n  )\n}\n\n/**\n * when we get a search result it may not include all [draft, published] id pairs for documents matching the\n * query. For example: searching for \"potato\" may yield a hit in the draft, but not the published (or vice versa)\n *\n * This method takes a list of collated search hits and returns an array of the missing \"counterpart\" ids\n */\nfunction getCounterpartIds(collatedHits: CollatedHit[]): string[] {\n  return collatedHits\n    .filter(\n      (collatedHit) =>\n        // we're interested in hits where either draft or published is missing\n        !collatedHit.draft || !collatedHit.published\n    )\n    .map((collatedHit) =>\n      // if we have the draft, return the published id or vice versa\n      collatedHit.draft ? collatedHit.id : getDraftId(collatedHit.id)\n    )\n}\n\nfunction getExistingCounterparts(client: SanityClient, ids: string[]) {\n  return ids.length === 0\n    ? of([])\n    : client.observable.fetch(`*[_id in $ids]._id`, {ids}, {tag: 'get-counterpart-ids'})\n}\n\nexport function referenceSearch(\n  client: SanityClient,\n  textTerm: string,\n  type: ReferenceSchemaType,\n  options: ReferenceFilterSearchOptions\n): Observable<ReferenceSearchHit[]> {\n  const searchWeighted = createWeightedSearch(type.to, client, options)\n  return searchWeighted(textTerm, {includeDrafts: true}).pipe(\n    map((results) => results.map((result) => result.hit)),\n    map(collate),\n    // pick the 100 best matches\n    map((collated) => collated.slice(0, 100)),\n    mergeMap((collated) => {\n      // Note: It might seem like this step is redundant, but it's here for a reason:\n      // The list of search hits returned from here will be passed as options to the reference input's autocomplete. When\n      // one of them gets selected by the user, it will then be passed as the argument to the `onChange` handler in the\n      // Reference Input. This handler will then look at the passed value to determine whether to make a link to a\n      // draft (using _strengthenOnPublish) or a published document.\n      //\n      // Without this step, in a case where both a draft and a published version exist but only the draft matches\n      // the search term, we'd end up making a reference with `_strengthenOnPublish: true`, when we instead should be\n      // making a normal reference to the published id\n      return getExistingCounterparts(client, getCounterpartIds(collated)).pipe(\n        map((existingCounterpartIds) => {\n          return collated.map((entry) => {\n            const draftId = getDraftId(entry.id)\n            return {\n              id: entry.id,\n              type: entry.type,\n              draft:\n                entry.draft || existingCounterpartIds.includes(draftId)\n                  ? {_id: draftId, _type: entry.type}\n                  : undefined,\n              published:\n                entry.published || existingCounterpartIds.includes(entry.id)\n                  ? {_id: entry.id, _type: entry.type}\n                  : undefined,\n            }\n          })\n        })\n      )\n    })\n  )\n}\n","export function isNonNullable<T>(value: T): value is NonNullable<T> {\n  return !(value === null || value === undefined)\n}\n","import {ErrorOutlineIcon, WarningOutlineIcon, InfoOutlineIcon} from '@sanity/icons'\nimport {Box, Card, CardProps, Flex} from '@sanity/ui'\nimport React from 'react'\nimport {Details} from './Details'\n\ninterface AlertProps extends Omit<CardProps, 'title'> {\n  title: React.ReactNode\n  status?: 'warning' | 'error' | 'info'\n}\n\nconst STATUS_TONES = {\n  warning: 'caution',\n  error: 'critical',\n  info: 'positive',\n} as const\n\nconst STATUS_ICONS = {\n  warning: <WarningOutlineIcon />,\n  error: <ErrorOutlineIcon />,\n  info: <InfoOutlineIcon />,\n}\n\nexport function AlertStrip(props: AlertProps & Omit<React.HTMLProps<HTMLDivElement>, 'ref'>) {\n  const {children, status = 'warning', title, ...rest} = props\n\n  return (\n    <Card radius={2} tone={STATUS_TONES[status]} {...rest} data-ui=\"Alert\">\n      <Flex padding={1}>\n        {children && (\n          <Box flex={1}>\n            <Details icon={STATUS_ICONS[status]} title={title}>\n              <Box marginLeft={3} marginTop={3}>\n                {children}\n              </Box>\n            </Details>\n          </Box>\n        )}\n      </Flex>\n    </Card>\n  )\n}\n","import {RefObject, useEffect} from 'react'\n\n// This is a modified version of https://usehooks.com/useOnClickOutside that can take multiple element refs\n// There is currently a bug in the `useClickOutside` hook from @sanity/ui that requires the refs to be passed as\n// actual HTML elements instead of mutable refs. This requires the consumer to store elements in component state\n// which adds quite a bit of cruft and isn't always feasible\nexport function useOnClickOutside(\n  refs: RefObject<HTMLElement>[],\n  handler: (event: Event) => void\n): void {\n  useEffect(() => {\n    const listener = (event: Event) => {\n      const target = event.target\n      if (target instanceof HTMLElement) {\n        if (refs.some((ref) => ref.current?.contains(target))) {\n          return\n        }\n        handler(event)\n      }\n    }\n    document.addEventListener('mousedown', listener)\n    document.addEventListener('touchstart', listener)\n    return () => {\n      document.removeEventListener('mousedown', listener)\n      document.removeEventListener('touchstart', listener)\n    }\n  }, [refs, handler])\n}\n","import {useCallback, useMemo} from 'react'\nimport {catchError, concatMap, map, startWith} from 'rxjs/operators'\nimport {concat, Observable, of, Subject} from 'rxjs'\nimport {useObservable} from 'react-rx'\nimport {usePrevious} from '../../hooks/usePrevious'\nimport {ReferenceInfo} from './types'\n\nconst noop = () => undefined\n\nconst INITIAL_LOADING_STATE: Loadable<ReferenceInfo> = {\n  isLoading: true,\n  result: undefined,\n  error: undefined,\n  retry: noop,\n}\n\nconst EMPTY_STATE: Loadable<any> = {\n  isLoading: false,\n  result: undefined,\n  error: undefined,\n  retry: noop,\n}\n\nexport type Loadable<T> =\n  | {isLoading: true; result: undefined; error: undefined; retry: () => void}\n  | {isLoading: false; result: T; error: undefined; retry: () => void}\n  | {isLoading: false; result: undefined; error: Error; retry: () => void}\n\ntype GetReferenceInfo = (id: string) => Observable<ReferenceInfo>\n\nexport function useReferenceInfo(\n  id: string | undefined,\n  getReferenceInfo: GetReferenceInfo\n): Loadable<ReferenceInfo> {\n  // NOTE: this is a small message queue to handle retries\n  const msgSubject = useMemo(() => new Subject<{type: 'retry'}>(), [])\n  const msg$ = useMemo(() => msgSubject.asObservable(), [msgSubject])\n\n  const retry = useCallback(() => {\n    msgSubject.next({type: 'retry'})\n  }, [msgSubject])\n\n  const stream$ = useMemo(\n    () =>\n      concat(of(null), msg$).pipe(\n        map(() => id),\n        concatMap((refId: string | undefined) =>\n          refId\n            ? getReferenceInfo(refId).pipe(\n                map((result) => {\n                  return {\n                    isLoading: false,\n                    result,\n                    error: undefined,\n                    retry,\n                  } as const\n                }),\n                startWith(INITIAL_LOADING_STATE),\n                catchError((err: Error) => {\n                  console.error(err)\n                  return of({isLoading: false, result: undefined, error: err, retry} as const)\n                })\n              )\n            : of(EMPTY_STATE)\n        )\n      ),\n    [getReferenceInfo, id, retry, msg$]\n  )\n\n  const referenceInfo = useObservable(stream$, INITIAL_LOADING_STATE)\n\n  // const referenceInfo = useMemoObservable(\n  //   () => stream$,\n  //   [retryAttempt, getReferenceInfo, id, retry],\n  //   INITIAL_LOADING_STATE\n  // )\n\n  // workaround for a \"bug\" with useMemoObservable that doesn't\n  // return the initial value upon resubscription\n  const previousId = usePrevious(id, id)\n  if (id && previousId !== id) {\n    return INITIAL_LOADING_STATE\n  }\n  return referenceInfo\n}\n","import React, {useEffect, useReducer} from 'react'\nimport formatDistanceToNow from 'date-fns/formatDistanceToNow'\n\nfunction useInterval(ms: number) {\n  const [tick, update] = useReducer((n) => n + 1, 0)\n\n  useEffect(() => {\n    const i = setInterval(update, ms)\n    return () => clearInterval(i)\n  }, [ms])\n  return tick\n}\n\nexport function TimeAgo({time}: {time: string}) {\n  useInterval(1000)\n  const timeSince = formatDistanceToNow(new Date(time))\n  return <span title={timeSince}>{timeSince} ago</span>\n}\n","import React, {ComponentType, ReactNode, useMemo} from 'react'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {Box, Flex, Inline, Label, Text, Tooltip, useRootTheme} from '@sanity/ui'\nimport {AccessDeniedIcon, EditIcon, HelpCircleIcon, PublishIcon} from '@sanity/icons'\nimport {TextWithTone} from '../../../components/TextWithTone'\nimport {DocumentPreviewPresence} from '../../../presence'\nimport {DocumentAvailability} from '../../../preview'\nimport {RenderPreviewCallback} from '../../types'\nimport {PreviewLayoutKey} from '../../../components/previews'\nimport {useDocumentPresence} from '../../../datastores'\nimport {TimeAgo} from './utils/TimeAgo'\nimport {ReferenceInfo} from './types'\n\nfunction UnavailableMessage(props: {icon: ComponentType; children: ReactNode; title: ReactNode}) {\n  const Icon = props.icon\n  return (\n    <Flex padding={3}>\n      <Box>\n        <Text size={1}>\n          <Icon />\n        </Text>\n      </Box>\n      <Box flex={1} marginLeft={3}>\n        <Text size={1} weight=\"semibold\">\n          {props.title}\n        </Text>\n\n        <Box marginTop={3}>\n          <Text as=\"p\" muted size={1}>\n            {props.children}\n          </Text>\n        </Box>\n      </Box>\n    </Flex>\n  )\n}\n\n/**\n * Used to preview a referenced type\n * Takes the reference type as props\n */\nexport function ReferencePreview(props: {\n  availability: DocumentAvailability\n  id: string\n  preview: ReferenceInfo['preview']\n  refType: ObjectSchemaType\n  layout: PreviewLayoutKey\n  renderPreview: RenderPreviewCallback\n  showTypeLabel: boolean\n}) {\n  const {availability, id, layout, preview, refType, renderPreview, showTypeLabel} = props\n\n  const theme = useRootTheme()\n  const documentPresence = useDocumentPresence(id)\n\n  const notFound = availability.reason === 'NOT_FOUND'\n  const insufficientPermissions = availability.reason === 'PERMISSION_DENIED'\n\n  const previewId =\n    preview.draft?._id ||\n    preview.published?._id ||\n    // note: during publish of the referenced document we might have both a missing draft and a missing published version\n    // this happens because the preview system tries to optimistically re-fetch as soon as it sees a mutation, but\n    // when publishing, the draft is deleted, and therefore both the draft and the published may be missing for a brief\n    // moment before the published version appears. In this case, it's safe to fallback to the given id, which is always\n    // the published id\n    id\n\n  // Note: we can't pass the preview values as-is to the Preview-component here since it's a \"prepared\" value and the\n  // Preview component expects the \"raw\"/unprepared value. By passing only _id and _type we make sure the Preview-component\n  // resolve the preview value it needs (this is cached in the runtime, so not likely to cause any fetch overhead)\n  const previewStub = useMemo(\n    () => ({_id: previewId, _type: refType.name}),\n    [previewId, refType.name]\n  )\n\n  return (\n    <Flex align=\"center\">\n      {availability.available ? (\n        <Box flex={1}>\n          {renderPreview({\n            layout,\n            schemaType: refType,\n            value: previewStub,\n          })}\n        </Box>\n      ) : (\n        <Box flex={1}>\n          <Flex align=\"center\">\n            <Box flex={1} paddingY={2}>\n              <Text muted>Document unavailable</Text>\n            </Box>\n          </Flex>\n        </Box>\n      )}\n\n      <Box paddingLeft={3}>\n        <Inline space={3}>\n          {showTypeLabel && (\n            <Label size={1} muted>\n              {refType.title}\n            </Label>\n          )}\n\n          {insufficientPermissions || notFound ? (\n            <Box>\n              <Tooltip\n                portal\n                content={\n                  notFound ? (\n                    <UnavailableMessage title=\"Not found\" icon={HelpCircleIcon}>\n                      The referenced document does not exist\n                      <br />\n                      (id: <code>{id}</code>)\n                    </UnavailableMessage>\n                  ) : (\n                    <UnavailableMessage title=\"Insufficcient permissions\" icon={AccessDeniedIcon}>\n                      The referenced document could not be accessed due to insufficient permissions\n                    </UnavailableMessage>\n                  )\n                }\n              >\n                <TextWithTone tone=\"default\">\n                  <HelpCircleIcon />\n                </TextWithTone>\n              </Tooltip>\n            </Box>\n          ) : null}\n\n          {documentPresence && documentPresence.length > 0 && (\n            <DocumentPreviewPresence presence={documentPresence} />\n          )}\n\n          <Inline space={4}>\n            <Box>\n              <Tooltip\n                content={\n                  <Box padding={2}>\n                    <Text size={1}>\n                      {preview.published?._updatedAt ? (\n                        <>\n                          Published <TimeAgo time={preview.published._updatedAt} />\n                        </>\n                      ) : (\n                        <>Not published</>\n                      )}\n                    </Text>\n                  </Box>\n                }\n              >\n                <TextWithTone\n                  tone={theme.tone === 'default' ? 'positive' : 'default'}\n                  size={1}\n                  dimmed={!preview.published}\n                  muted={!preview.published}\n                >\n                  <PublishIcon />\n                </TextWithTone>\n              </Tooltip>\n            </Box>\n\n            <Box>\n              <Tooltip\n                content={\n                  <Box padding={2}>\n                    <Text size={1}>\n                      {preview.draft?._updatedAt ? (\n                        <>\n                          Edited <TimeAgo time={preview.draft._updatedAt} />\n                        </>\n                      ) : (\n                        <>No unpublished edits</>\n                      )}\n                    </Text>\n                  </Box>\n                }\n              >\n                <TextWithTone\n                  tone={theme.tone === 'default' ? 'caution' : 'default'}\n                  size={1}\n                  dimmed={!preview.draft}\n                  muted={!preview.draft}\n                >\n                  <EditIcon />\n                </TextWithTone>\n              </Tooltip>\n            </Box>\n          </Inline>\n        </Inline>\n      </Box>\n    </Flex>\n  )\n}\n","/* eslint-disable max-nested-callbacks */\n/* eslint-disable no-nested-ternary */\n\nimport React from 'react'\nimport {ReferenceSchemaType} from '@sanity/types'\nimport {Stack, Text, TextSkeleton} from '@sanity/ui'\nimport {Observable} from 'rxjs'\nimport {Alert} from '../../components/Alert'\nimport {RenderPreviewCallback} from '../../types'\nimport {ReferenceInfo} from './types'\nimport {useReferenceInfo} from './useReferenceInfo'\nimport {ReferencePreview} from './ReferencePreview'\n\n/**\n * Used to preview a referenced type\n * Takes the reference type as props\n */\nexport function OptionPreview(props: {\n  id: string\n  type: ReferenceSchemaType\n  getReferenceInfo: (id: string) => Observable<ReferenceInfo>\n  renderPreview: RenderPreviewCallback\n}) {\n  const {getReferenceInfo, id: documentId, renderPreview} = props\n  const {isLoading, result: referenceInfo, error} = useReferenceInfo(documentId, getReferenceInfo)\n\n  if (isLoading) {\n    return (\n      <Stack space={2} padding={1}>\n        <TextSkeleton style={{maxWidth: 320}} radius={1} animated />\n        <TextSkeleton style={{maxWidth: 200}} radius={1} size={1} animated />\n      </Stack>\n    )\n  }\n\n  if (error) {\n    return (\n      <Stack space={2} padding={1}>\n        <Alert title=\"Failed to load referenced document\">\n          <Text muted size={1}>\n            Error: {error.message}\n          </Text>\n        </Alert>\n      </Stack>\n    )\n  }\n\n  if (!referenceInfo) {\n    return null\n  }\n\n  if (referenceInfo.availability.reason === 'PERMISSION_DENIED') {\n    return (\n      <Stack space={2} padding={1}>\n        Insufficient permissions to view this document\n      </Stack>\n    )\n  }\n\n  const refType = props.type.to.find((toType) => toType.name === referenceInfo.type)\n\n  if (!refType) {\n    return (\n      <Stack space={2} padding={1}>\n        Search returned a type that's not valid for this reference: \"${referenceInfo.type}\"\n      </Stack>\n    )\n  }\n\n  return (\n    referenceInfo &&\n    refType && (\n      <ReferencePreview\n        availability={referenceInfo.availability}\n        id={referenceInfo.id}\n        layout=\"default\"\n        preview={referenceInfo.preview}\n        refType={refType}\n        renderPreview={renderPreview}\n        showTypeLabel={props.type.to.length > 1}\n      />\n    )\n  )\n}\n","import React from 'react'\nimport {Reference, ReferenceSchemaType} from '@sanity/types'\nimport {Box, Flex, Inline, Label, Stack} from '@sanity/ui'\nimport {RenderPreviewCallback} from '../../types'\nimport {SanityDefaultPreview} from '../../../preview'\nimport {ReferencePreview} from './ReferencePreview'\nimport {Loadable} from './useReferenceInfo'\nimport {ReferenceInfo} from './types'\n\nexport function PreviewReferenceValue(props: {\n  referenceInfo: Loadable<ReferenceInfo>\n  renderPreview: RenderPreviewCallback\n  type: ReferenceSchemaType\n  value: Reference\n}) {\n  const {referenceInfo, renderPreview, type, value} = props\n\n  if (referenceInfo.isLoading || referenceInfo.error) {\n    return <SanityDefaultPreview isPlaceholder />\n  }\n\n  const showTypeLabel = type.to.length > 1\n\n  if (referenceInfo.result?.availability.reason === 'NOT_FOUND' && value._strengthenOnPublish) {\n    const refType = type.to.find((toType) => toType.name === value?._strengthenOnPublish?.type)\n    if (!refType) {\n      return <div>Invalid reference type</div>\n    }\n    if (value._strengthenOnPublish) {\n      const stub = value._strengthenOnPublish?.type\n        ? {\n            _id: value._ref,\n            _type: value._strengthenOnPublish?.type,\n          }\n        : value\n\n      return (\n        <Flex align=\"center\">\n          <Box flex={1}>\n            {renderPreview({\n              layout: 'default',\n              schemaType: refType,\n              value: stub,\n            })}\n          </Box>\n          <Box>\n            <Inline space={4}>\n              {showTypeLabel && (\n                <Label size={1} muted>\n                  {refType.title}\n                </Label>\n              )}\n            </Inline>\n          </Box>\n        </Flex>\n      )\n    }\n  }\n\n  const refTypeName = referenceInfo.result?.type\n  const refType = type.to.find((toType) => toType.name === refTypeName)\n\n  if (!refType) {\n    return (\n      <Stack space={2} padding={2}>\n        The referenced document is of invalid type: ({refTypeName || 'unknown'})\n        <pre>{JSON.stringify(value, null, 2)}</pre>\n      </Stack>\n    )\n  }\n\n  return (\n    <ReferencePreview\n      availability={referenceInfo.result?.availability}\n      id={value._ref}\n      layout=\"default\"\n      preview={referenceInfo.result?.preview}\n      refType={refType}\n      renderPreview={renderPreview}\n      showTypeLabel={showTypeLabel}\n    />\n  )\n}\n","/* eslint-disable complexity */\n/* eslint-disable max-nested-callbacks,no-nested-ternary */\n\nimport React, {ComponentProps} from 'react'\nimport {AddIcon} from '@sanity/icons'\nimport {Box, Button, Menu, MenuButton, MenuItem, Tooltip} from '@sanity/ui'\nimport {InsufficientPermissionsMessage} from '../../../components/InsufficientPermissionsMessage'\nimport {CreateReferenceOption} from './types'\n\ninterface Props extends ComponentProps<typeof Button> {\n  id: string\n  createOptions: CreateReferenceOption[]\n  menuRef: React.RefObject<HTMLDivElement>\n  onCreate: (option: CreateReferenceOption) => void\n}\n\nfunction ConditionalTooltip(\n  props: ComponentProps<typeof Tooltip> & {enabled: boolean}\n): React.ReactElement {\n  const {enabled, ...rest} = props\n  return enabled ? <Tooltip {...rest} /> : <>{props.children}</>\n}\n\nconst INLINE_BLOCK_STYLE = {display: 'inline-flex'}\nconst FULL_WIDTH = {width: '100%'}\n\nexport function CreateButton(props: Props) {\n  const {createOptions, onCreate, id, ...rest} = props\n\n  const canCreateAny = createOptions.some((option) => option.permission.granted)\n  if (!canCreateAny) {\n    return (\n      <Tooltip\n        content={\n          <Box padding={2}>\n            <InsufficientPermissionsMessage operationLabel=\"create a new reference\" />\n          </Box>\n        }\n      >\n        {/* this wrapper div is needed because disabled button doesn't trigger mouse events */}\n        <div style={INLINE_BLOCK_STYLE}>\n          <Button text=\"Create new\" mode=\"ghost\" disabled icon={AddIcon} style={FULL_WIDTH} />\n        </div>\n      </Tooltip>\n    )\n  }\n\n  return createOptions.length > 1 ? (\n    <MenuButton\n      button={<Button {...rest} text=\"Create new…\" mode=\"ghost\" icon={AddIcon} />}\n      id={id}\n      menu={\n        <Menu ref={props.menuRef}>\n          {createOptions.map((createOption) => (\n            <ConditionalTooltip\n              enabled={!createOption.permission.granted}\n              key={createOption.id}\n              content={\n                <Box padding={2}>\n                  <InsufficientPermissionsMessage operationLabel=\"create this type of document\" />\n                </Box>\n              }\n              portal\n            >\n              {/* this wrapper div is needed because disabled button doesn't trigger mouse events */}\n              <div>\n                <MenuItem\n                  disabled={!createOption.permission.granted}\n                  icon={createOption.icon}\n                  text={createOption.title}\n                  onClick={() => onCreate(createOption)}\n                />\n              </div>\n            </ConditionalTooltip>\n          ))}\n        </Menu>\n      }\n      placement=\"right\"\n      popover={{portal: true, tone: 'default', constrainSize: true}}\n    />\n  ) : (\n    <Button\n      {...rest}\n      text=\"Create new\"\n      mode=\"ghost\"\n      disabled={!createOptions[0].permission.granted}\n      onClick={() => onCreate(createOptions[0])}\n      icon={AddIcon}\n    />\n  )\n}\n","import React, {forwardRef, useCallback} from 'react'\nimport {Autocomplete, Box, Flex, Popover, Text} from '@sanity/ui'\nimport styled from 'styled-components'\n\nconst StyledPopover = styled(Popover)`\n  & > div {\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n`\n\nconst StyledText = styled(Text)`\n  word-break: break-word;\n`\n\nexport const ReferenceAutocomplete = forwardRef(function ReferenceAutocomplete(\n  props: React.ComponentProps<typeof Autocomplete> & {\n    referenceElement: HTMLDivElement | null\n    searchString?: string\n    portalRef?: React.RefObject<HTMLDivElement>\n  },\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const hasResults = props.options && props.options.length > 0\n  const renderPopover = useCallback(\n    (\n      {\n        content,\n        hidden,\n        inputElement,\n        onMouseEnter,\n        onMouseLeave,\n      }: {\n        content: React.ReactElement | null\n        hidden: boolean\n        inputElement: HTMLInputElement | null\n        onMouseEnter: () => void\n        onMouseLeave: () => void\n      },\n      contentRef: React.Ref<HTMLDivElement>\n    ) => (\n      <StyledPopover\n        placement=\"bottom-start\"\n        arrow={false}\n        constrainSize\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n        content={\n          <div ref={contentRef}>\n            {hasResults ? (\n              content\n            ) : (\n              <Box padding={4}>\n                <Flex align=\"center\" height=\"fill\" justify=\"center\">\n                  <StyledText align=\"center\" muted>\n                    No results for <strong>“{props.searchString}”</strong>\n                    {props.searchString?.toLowerCase() === 'capybara' ? (\n                      <>. What a shame. There should be more Capybaras.</>\n                    ) : null}\n                  </StyledText>\n                </Flex>\n              </Box>\n            )}\n          </div>\n        }\n        open={!props.loading && !hidden}\n        ref={props.portalRef}\n        portal\n        referenceElement={props.referenceElement || inputElement}\n        matchReferenceWidth\n      />\n    ),\n    [hasResults, props.searchString, props.loading, props.portalRef, props.referenceElement]\n  )\n  return <Autocomplete {...props} ref={ref} renderPopover={renderPopover} />\n})\n","import {Grid, useElementRect} from '@sanity/ui'\nimport React, {ReactNode, ForwardedRef, forwardRef, useCallback, useState} from 'react'\nimport styled, {css} from 'styled-components'\n\nconst NARROW_LAYOUT = css`\n  grid-template-columns: minmax(0px, 1fr);\n`\n\nconst WIDE_LAYOUT = css`\n  grid-template-columns: 1fr min-content;\n`\n\nconst Root = styled(Grid)<{$narrow: boolean}>((props: {$narrow: boolean}) =>\n  props.$narrow ? NARROW_LAYOUT : WIDE_LAYOUT\n)\n\nexport const AutocompleteContainer = forwardRef(function AutocompleteContainer(\n  props: {\n    children: ReactNode\n  },\n  forwardedRef: ForwardedRef<HTMLDivElement>\n) {\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n\n  const handleNewRef = useCallback(\n    (element: HTMLDivElement) => {\n      // there's a bit of \"double bookkeeping\" here. since useElementRect needs to re-run whenever the ref updates,\n      // and thus we need to keep it in the state\n      setForwardedRef(forwardedRef, element)\n      setRootElement(element)\n    },\n    [forwardedRef]\n  )\n\n  const inputWrapperRect = useElementRect(rootElement)\n\n  return (\n    <Root ref={handleNewRef} gap={1} $narrow={(inputWrapperRect?.width || 0) < 480}>\n      {props.children}\n    </Root>\n  )\n})\n\nfunction setForwardedRef<T>(ref: ForwardedRef<T>, instance: T) {\n  if (typeof ref === 'function') {\n    ref(instance)\n  } else if (ref) {\n    ref.current = instance\n  }\n}\n","/* eslint-disable complexity */\n/* eslint-disable max-nested-callbacks,no-nested-ternary */\nimport React, {\n  ComponentProps,\n  ForwardedRef,\n  forwardRef,\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n} from 'react'\n// import {isValidationErrorMarker, Reference} from '@sanity/types'\nimport {\n  EllipsisVerticalIcon,\n  LaunchIcon as OpenInNewTabIcon,\n  ResetIcon as ClearIcon,\n  SyncIcon as ReplaceIcon,\n} from '@sanity/icons'\nimport {concat, Observable, of} from 'rxjs'\nimport {useId} from '@reach/auto-id'\nimport {catchError, distinctUntilChanged, filter, map, scan, switchMap, tap} from 'rxjs/operators'\nimport {\n  Box,\n  Button,\n  Card,\n  Flex,\n  Inline,\n  Menu,\n  MenuButton,\n  MenuDivider,\n  MenuItem,\n  Stack,\n  Text,\n  useForwardedRef,\n  useToast,\n} from '@sanity/ui'\nimport {useObservableCallback} from 'react-rx'\nimport {uuid} from '@sanity/uuid'\nimport styled from 'styled-components'\n// import {ChangeIndicatorForFieldPath, FormField, PreviewCard} from '../../../components'\nimport {ChangeIndicator} from '../../../components/changeIndicators'\nimport {PreviewCard} from '../../../components/PreviewCard'\nimport {set, setIfMissing, unset} from '../../patch'\nimport {EMPTY_ARRAY} from '../../utils/empty'\n// import {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {isNonNullable} from '../../utils/isNonNullable'\nimport {AlertStrip} from '../../components/AlertStrip'\nimport {Alert} from '../../components/Alert'\nimport {useOnClickOutside} from '../../hooks/useOnClickOutside'\nimport {FIXME} from '../../types'\nimport {getPublishedId} from '../../../util'\nimport {IntentLink} from '../../../router'\nimport {ReferenceInputProps, CreateReferenceOption, ReferenceSearchState} from './types'\nimport {OptionPreview} from './OptionPreview'\nimport {useReferenceInfo} from './useReferenceInfo'\nimport {PreviewReferenceValue} from './PreviewReferenceValue'\nimport {CreateButton} from './CreateButton'\nimport {ReferenceAutocomplete} from './ReferenceAutocomplete'\nimport {AutocompleteContainer} from './AutocompleteContainer'\n\nconst StyledPreviewCard = styled(PreviewCard)`\n  /* this is a hack to avoid layout jumps while previews are loading\n  there's probably better ways of solving this */\n  min-height: 36px;\n`\n\nconst INITIAL_SEARCH_STATE: ReferenceSearchState = {\n  hits: [],\n  isLoading: false,\n}\n\nconst NO_FILTER = () => true\n\nfunction nonNullable<T>(v: T): v is NonNullable<T> {\n  return v !== null\n}\n\nconst REF_PATH = ['_ref']\nexport function ReferenceInput(props: ReferenceInputProps) {\n  const {\n    createOptions,\n    editReferenceLinkComponent: EditReferenceLink,\n    focusPath = EMPTY_ARRAY,\n    focused,\n    path,\n    getReferenceInfo,\n    liveEdit,\n    onChange,\n    onEditReference,\n    onSearch,\n    selectedState,\n    schemaType,\n    changed,\n    readOnly,\n    onFocusPath,\n    validation,\n    value,\n    renderPreview,\n    elementProps,\n  } = props\n\n  const [searchState, setSearchState] = useState<ReferenceSearchState>(INITIAL_SEARCH_STATE)\n\n  const handleCreateNew = useCallback(\n    (option: CreateReferenceOption) => {\n      const id = uuid()\n\n      const patches = [\n        setIfMissing({}),\n        set(schemaType.name, ['_type']),\n        set(id, ['_ref']),\n        set(true, ['_weak']),\n        set({type: option.type, weak: schemaType.weak, template: option.template}, [\n          '_strengthenOnPublish',\n        ]),\n      ].filter(isNonNullable)\n\n      onChange(patches)\n\n      onEditReference({id, type: option.type, template: option.template})\n      onFocusPath([])\n    },\n    [onChange, onEditReference, onFocusPath, schemaType]\n  )\n\n  const handleChange = useCallback(\n    (id: string) => {\n      if (!id) {\n        onChange(unset())\n        onFocusPath([])\n        return\n      }\n\n      const hit = searchState.hits.find((h) => h.id === id)\n\n      if (!hit) {\n        throw new Error('Selected an item that wasnt part of the result set')\n      }\n      // if there's no published version of this document, set the reference to weak\n\n      const patches = [\n        setIfMissing({}),\n        set(schemaType.name, ['_type']),\n        set(getPublishedId(id), ['_ref']),\n        hit.published && !schemaType.weak ? unset(['_weak']) : set(true, ['_weak']),\n        hit.published\n          ? unset(['_strengthenOnPublish'])\n          : set({type: hit?.type, weak: schemaType.weak}, ['_strengthenOnPublish']),\n      ].filter(isNonNullable)\n\n      onChange(patches)\n      onFocusPath([])\n    },\n    [searchState.hits, schemaType.name, schemaType.weak, onChange, onFocusPath]\n  )\n\n  const handleClear = useCallback(() => {\n    onChange(unset())\n  }, [onChange])\n\n  const handlePreviewKeyPress = useCallback(\n    (event) => {\n      if (event.key !== 'Enter' && event.key !== 'Space') {\n        // enable \"search for reference\"-mode\n        onFocusPath(['_ref'])\n      }\n    },\n    [onFocusPath]\n  )\n\n  const handleAutocompleteKeyDown = useCallback(\n    (event) => {\n      // escape\n      if (event.keyCode === 27) {\n        onFocusPath([])\n      }\n    },\n    [onFocusPath]\n  )\n\n  const getReferenceInfoMemo = useCallback(\n    (id) => getReferenceInfo(id, schemaType),\n    [getReferenceInfo, schemaType]\n  )\n\n  const loadableReferenceInfo = useReferenceInfo(value?._ref, getReferenceInfoMemo)\n\n  const refTypeName = loadableReferenceInfo.result?.type || value?._strengthenOnPublish?.type\n  const refType = refTypeName ? schemaType.to.find((toType) => toType.name === refTypeName) : null\n\n  const autocompletePopoverReferenceElementRef = useRef<HTMLDivElement | null>(null)\n\n  // --- focus handling\n  const hasFocusAtRef = focusPath.length === 1 && focusPath[0] === '_ref'\n  // todo: fixme\n  const forwardedRef = elementProps.ref\n  // useDidUpdate({hasFocusAt: hasFocusAtRef, ref: value?._ref}, (prev, current) => {\n  //   const refUpdated = prev?.ref !== current.ref\n  //   const focusAtUpdated = prev?.hasFocusAt !== current.hasFocusAt\n\n  //   if ((focusAtUpdated || refUpdated) && current.hasFocusAt) {\n  //     // if search mode changed and we're having focus always ensure the\n  //     // ref element gets focus\n  //     forwardedRef.current?.focus()\n  //   }\n  // })\n\n  const weakIs = value?._weak ? 'weak' : 'strong'\n  const weakShouldBe = schemaType.weak === true ? 'weak' : 'strong'\n\n  const hasRef = Boolean(value?._ref)\n\n  // If the reference value is marked with _strengthenOnPublish,\n  // we allow weak references if the reference points to a document that has a draft but not a published\n  // In all other cases we should display a \"weak mismatch\" warning\n  const weakWarningOverride =\n    hasRef && !loadableReferenceInfo.isLoading && value?._strengthenOnPublish\n\n  const handleFixStrengthMismatch = useCallback(() => {\n    onChange(schemaType.weak === true ? set(true, ['_weak']) : unset(['_weak']))\n  }, [onChange, schemaType])\n\n  const referenceExists = hasRef && loadableReferenceInfo.result?.preview?.published?._id\n\n  const handleRemoveStrengthenOnPublish = useCallback(() => {\n    onChange([\n      schemaType.weak === true ? set(true, ['_weak']) : unset(['_weak']),\n      unset(['_strengthenOnPublish']),\n    ])\n  }, [onChange, schemaType])\n\n  const {push} = useToast()\n\n  const errors = useMemo(() => validation.filter((item) => item.level === 'error'), [validation])\n\n  const pressed = selectedState === 'pressed'\n  const selected = selectedState === 'selected'\n\n  const handleQueryChange = useObservableCallback((inputValue$: Observable<string | null>) => {\n    return inputValue$.pipe(\n      filter(nonNullable),\n      distinctUntilChanged(),\n      switchMap((searchString) =>\n        concat(\n          of({isLoading: true}),\n          onSearch(searchString).pipe(\n            map((hits) => ({hits, searchString, isLoading: false})),\n            catchError((error) => {\n              push({\n                title: 'Reference search failed',\n                description: error.message,\n                status: 'error',\n                id: `reference-search-fail-${inputId}`,\n              })\n\n              console.error(error)\n              return of({hits: []})\n            })\n          )\n        )\n      ),\n\n      scan(\n        (prevState, nextState): ReferenceSearchState => ({...prevState, ...nextState}),\n        INITIAL_SEARCH_STATE\n      ),\n\n      tap(setSearchState)\n    )\n  }, [])\n\n  const handleAutocompleteOpenButtonClick = useCallback(() => {\n    handleQueryChange('')\n  }, [handleQueryChange])\n\n  const showWeakRefMismatch =\n    !loadableReferenceInfo.isLoading && hasRef && weakIs !== weakShouldBe && !weakWarningOverride\n\n  const inputId = useId()\n\n  const handleCreateButtonKeyDown = useCallback(\n    (e) => {\n      if (e.key === 'Escape') {\n        forwardedRef?.current?.focus()\n      }\n    },\n    [forwardedRef]\n  )\n\n  const renderOption = useCallback(\n    (option) => {\n      const id = option.hit.draft?._id || option.hit.published?._id\n\n      return (\n        <StyledPreviewCard forwardedAs=\"button\" type=\"button\" radius={2} tone=\"inherit\">\n          <Box paddingX={3} paddingY={1}>\n            <OptionPreview\n              getReferenceInfo={getReferenceInfoMemo}\n              id={id}\n              renderPreview={renderPreview}\n              type={schemaType}\n            />\n          </Box>\n        </StyledPreviewCard>\n      )\n    },\n    [schemaType, getReferenceInfoMemo, renderPreview]\n  )\n\n  const OpenLink = useMemo(\n    () =>\n      // eslint-disable-next-line @typescript-eslint/no-shadow\n      forwardRef(function OpenLink(\n        restProps: ComponentProps<typeof IntentLink>,\n        _ref: ForwardedRef<HTMLAnchorElement>\n      ) {\n        const template = (value?._strengthenOnPublish || {}).template\n        return (\n          <IntentLink\n            {...restProps}\n            intent=\"edit\"\n            params={[\n              {id: value?._ref, type: refType?.name, template: template?.id},\n              {params: template?.params},\n            ]}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            ref={_ref}\n          />\n        )\n      }),\n    [refType?.name, value?._ref, value?._strengthenOnPublish]\n  )\n\n  const preview =\n    loadableReferenceInfo.result?.preview.draft || loadableReferenceInfo.result?.preview.published\n\n  const isWeakRefToNonexistent =\n    loadableReferenceInfo?.result?.availability?.reason === 'NOT_FOUND' &&\n    !value?._strengthenOnPublish &&\n    value?._weak\n\n  const isEditing = hasFocusAtRef || !value?._ref\n\n  // --- click outside handling\n  const clickOutsideBoundaryRef = useRef<HTMLDivElement | null>(null)\n  const autocompletePortalRef = useRef<HTMLDivElement | null>(null)\n  const createButtonMenuPortalRef = useRef<HTMLDivElement | null>(null)\n  useOnClickOutside(\n    [clickOutsideBoundaryRef, autocompletePortalRef, createButtonMenuPortalRef],\n    () => {\n      if (hasFocusAtRef) {\n        onFocusPath([])\n      }\n    }\n  )\n\n  const handleReplaceClick = useCallback(() => {\n    onFocusPath(['_ref'])\n  }, [onFocusPath])\n\n  return (\n    <Stack\n      space={1}\n      // marginY={isEditing ? 2 : 0}\n    >\n      {isEditing || isWeakRefToNonexistent ? (\n        <Stack space={2} ref={clickOutsideBoundaryRef}>\n          {isWeakRefToNonexistent ? (\n            <Alert\n              data-testid=\"alert-nonexistent-document\"\n              title=\"Nonexistent document reference\"\n              suffix={\n                <Stack padding={2}>\n                  <Button text=\"Clear\" onClick={handleClear} />\n                </Stack>\n              }\n            >\n              <Text size={1}>\n                This field is currently referencing a document that doesn't exist (ID:\n                <code>{value._ref}</code>). You can either remove the reference or replace it with\n                another document.\n              </Text>\n            </Alert>\n          ) : null}\n          <ChangeIndicator path={REF_PATH} hasFocus={!!focused} isChanged={changed}>\n            <AutocompleteContainer ref={autocompletePopoverReferenceElementRef}>\n              <ReferenceAutocomplete\n                {...elementProps}\n                data-testid=\"autocomplete\"\n                loading={searchState.isLoading}\n                referenceElement={autocompletePopoverReferenceElementRef.current}\n                portalRef={autocompletePortalRef}\n                options={searchState.hits.map((hit) => ({\n                  value: hit.id,\n                  hit: hit,\n                }))}\n                radius={1}\n                placeholder=\"Type to search\"\n                onKeyDown={handleAutocompleteKeyDown}\n                readOnly={readOnly}\n                disabled={loadableReferenceInfo.isLoading}\n                onQueryChange={handleQueryChange}\n                searchString={searchState.searchString}\n                onChange={handleChange}\n                filterOption={NO_FILTER}\n                renderOption={renderOption}\n                openButton={{onClick: handleAutocompleteOpenButtonClick}}\n              />\n\n              {!readOnly && createOptions.length > 0 && (\n                <CreateButton\n                  id={`${inputId}-selectTypeMenuButton`}\n                  createOptions={createOptions}\n                  onCreate={handleCreateNew}\n                  onKeyDown={handleCreateButtonKeyDown}\n                  menuRef={createButtonMenuPortalRef}\n                />\n              )}\n            </AutocompleteContainer>\n          </ChangeIndicator>\n        </Stack>\n      ) : (\n        <ChangeIndicator path={path} hasFocus={!!focused} isChanged={changed}>\n          <Card\n            border\n            radius={1}\n            tone={\n              readOnly\n                ? 'transparent'\n                : loadableReferenceInfo.error || errors.length > 0\n                ? 'critical'\n                : 'inherit'\n            }\n          >\n            <Flex align=\"center\" padding={1}>\n              <StyledPreviewCard\n                {...elementProps}\n                __unstable_focusRing\n                forwardedAs={EditReferenceLink as FIXME} // @todo: fix typing\n                data-as=\"a\"\n                data-pressed={pressed ? true : undefined}\n                data-selected={selected ? true : undefined}\n                documentId={value?._ref}\n                documentType={refType?.name}\n                flex={1}\n                onKeyPress={handlePreviewKeyPress}\n                padding={1}\n                paddingRight={3}\n                pressed={pressed}\n                radius={2}\n                selected={selected}\n                tabIndex={0}\n                tone={selected ? 'default' : 'inherit'}\n              >\n                <PreviewReferenceValue\n                  referenceInfo={loadableReferenceInfo}\n                  renderPreview={renderPreview}\n                  type={schemaType}\n                  value={value}\n                />\n              </StyledPreviewCard>\n              <Inline paddingX={1}>\n                <MenuButton\n                  button={<Button padding={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n                  id={`${inputId}-menuButton`}\n                  menu={\n                    <Menu>\n                      {!readOnly && (\n                        <>\n                          <MenuItem\n                            text=\"Clear\"\n                            tone=\"critical\"\n                            icon={ClearIcon}\n                            onClick={handleClear}\n                          />\n\n                          <MenuItem\n                            text=\"Replace\"\n                            icon={ReplaceIcon}\n                            onClick={handleReplaceClick}\n                          />\n\n                          <MenuDivider />\n                        </>\n                      )}\n\n                      <MenuItem\n                        as={OpenLink}\n                        data-as=\"a\"\n                        text=\"Open in new tab\"\n                        icon={OpenInNewTabIcon}\n                      />\n                    </Menu>\n                  }\n                  placement=\"right\"\n                  popover={{portal: true, tone: 'default'}}\n                />\n              </Inline>\n            </Flex>\n            {liveEdit && referenceExists && value._strengthenOnPublish && (\n              <AlertStrip\n                padding={1}\n                title={schemaType.weak ? 'Finalize reference' : 'Convert to strong reference'}\n                status=\"info\"\n                data-testid=\"alert-reference-published\"\n              >\n                <Stack space={3}>\n                  <Text as=\"p\" muted size={1}>\n                    <strong>{loadableReferenceInfo.result?.preview.published?.title}</strong> is\n                    published and this reference should now be{' '}\n                    {schemaType.weak ? <>finalized</> : <>converted to a strong reference</>}.\n                  </Text>\n                  <Button\n                    onClick={handleRemoveStrengthenOnPublish}\n                    text={<>Convert to strong reference</>}\n                    tone=\"positive\"\n                  />\n                </Stack>\n              </AlertStrip>\n            )}\n\n            {showWeakRefMismatch && (\n              <AlertStrip\n                padding={1}\n                title=\"Reference strength mismatch\"\n                status=\"warning\"\n                data-testid=\"alert-reference-strength-mismatch\"\n              >\n                <Stack space={3}>\n                  <Text as=\"p\" muted size={1}>\n                    This reference is <em>{weakIs}</em>, but according to the current schema it\n                    should be <em>{weakShouldBe}.</em>\n                  </Text>\n\n                  <Text as=\"p\" muted size={1}>\n                    {schemaType.weak ? (\n                      <>\n                        It will not be possible to delete the \"{preview?.title}\"-document without\n                        first removing this reference.\n                      </>\n                    ) : (\n                      <>\n                        This makes it possible to delete the \"{preview?.title}\"-document without\n                        first deleting this reference, leaving this field referencing a nonexisting\n                        document.\n                      </>\n                    )}\n                  </Text>\n                  <Button\n                    onClick={handleFixStrengthMismatch}\n                    text={<>Convert to {weakShouldBe} reference</>}\n                    tone=\"caution\"\n                  />\n                </Stack>\n              </AlertStrip>\n            )}\n\n            {loadableReferenceInfo.error && (\n              <AlertStrip\n                padding={1}\n                title=\"Unable to load reference metadata\"\n                status=\"warning\"\n                data-testid=\"alert-reference-info-failed\"\n              >\n                <Stack space={3}>\n                  <Text as=\"p\" muted size={1}>\n                    Error: {loadableReferenceInfo.error.message}\n                  </Text>\n                  <Button onClick={loadableReferenceInfo.retry!} text={<>Retry</>} tone=\"primary\" />\n                </Stack>\n              </AlertStrip>\n            )}\n          </Card>\n        </ChangeIndicator>\n      )}\n    </Stack>\n  )\n}\n","import {\n  Path,\n  Reference,\n  ReferenceFilterSearchOptions,\n  ReferenceOptions,\n  ReferenceSchemaType,\n  SanityDocument,\n} from '@sanity/types'\nimport * as PathUtils from '@sanity/util/paths'\nimport {get} from '@sanity/util/paths'\nimport React, {ComponentProps, ForwardedRef, forwardRef, useCallback, useMemo, useRef} from 'react'\nimport {from, throwError} from 'rxjs'\nimport {catchError, mergeMap} from 'rxjs/operators'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../studioClient'\nimport {isNonNullable} from '../../../../util'\nimport * as adapter from '../client-adapters/reference'\nimport {ReferenceInput} from '../../../inputs/ReferenceInput/ReferenceInput'\nimport {CreateReferenceOption, EditReferenceEvent} from '../../../inputs/ReferenceInput/types'\nimport {useDocumentPreviewStore} from '../../../../datastores'\nimport {useClient, useSchema} from '../../../../hooks'\nimport {useReferenceInputOptions} from '../../contexts'\nimport {FIXME, ObjectInputProps} from '../../../types'\nimport {useFormValue} from '../../../useFormValue'\n\n// eslint-disable-next-line require-await\nasync function resolveUserDefinedFilter(\n  options: ReferenceOptions | undefined,\n  document: SanityDocument,\n  valuePath: Path\n): Promise<ReferenceFilterSearchOptions> {\n  if (!options) {\n    return {}\n  }\n\n  if (typeof options.filter === 'function') {\n    const parentPath = valuePath.slice(0, -1)\n    const parent = get(document, parentPath) as Record<string, unknown>\n    return options.filter({document, parentPath, parent})\n  }\n\n  return {\n    filter: options.filter,\n    params: 'filterParams' in options ? options.filterParams : undefined,\n  }\n}\n\nexport type StudioReferenceInputProps = ObjectInputProps<Reference, ReferenceSchemaType>\n\nfunction useValueRef<T>(value: T): {current: T} {\n  const ref = useRef(value)\n  ref.current = value\n  return ref\n}\n\ntype SearchError = {\n  message: string\n  details?: {\n    type: string\n    description: string\n  }\n}\n\nexport function StudioReferenceInput(props: StudioReferenceInputProps) {\n  const searchClient = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const schema = useSchema()\n  const documentPreviewStore = useDocumentPreviewStore()\n  const {path, schemaType} = props\n  const {EditReferenceLinkComponent, onEditReference, activePath, initialValueTemplateItems} =\n    useReferenceInputOptions()\n\n  const documentValue = useFormValue([]) as FIXME\n  const documentRef = useValueRef(documentValue)\n  const documentTypeName = documentRef.current?._type\n  const refType = schema.get(documentTypeName)\n\n  const isDocumentLiveEdit = useMemo(() => refType?.liveEdit, [refType])\n\n  const disableNew = schemaType.options?.disableNew === true\n\n  const handleSearch = useCallback(\n    (searchString: string) =>\n      from(resolveUserDefinedFilter(schemaType.options, documentRef.current, path)).pipe(\n        mergeMap(({filter, params}) =>\n          adapter.referenceSearch(searchClient, searchString, schemaType, {\n            ...schemaType.options,\n            filter,\n            params,\n            tag: 'search.reference',\n          })\n        ),\n\n        catchError((err: SearchError) => {\n          const isQueryError = err.details && err.details.type === 'queryParseError'\n          if (schemaType.options?.filter && isQueryError) {\n            err.message = `Invalid reference filter, please check the custom \"filter\" option`\n          }\n          return throwError(err)\n        })\n      ),\n\n    [documentRef, path, searchClient, schemaType]\n  )\n\n  const template = props.value?._strengthenOnPublish?.template\n  const EditReferenceLink = useMemo(\n    () =>\n      forwardRef(function EditReferenceLink_(\n        _props: ComponentProps<NonNullable<typeof EditReferenceLinkComponent>>,\n        forwardedRef: ForwardedRef<'a'>\n      ) {\n        return EditReferenceLinkComponent ? (\n          <EditReferenceLinkComponent\n            {..._props}\n            ref={forwardedRef}\n            parentRefPath={path}\n            template={template}\n          />\n        ) : null\n      }),\n    [EditReferenceLinkComponent, path, template]\n  )\n\n  const handleEditReference = useCallback(\n    (event: EditReferenceEvent) => {\n      onEditReference?.({\n        parentRefPath: path,\n        id: event.id,\n        type: event.type,\n        template: event.template,\n      })\n    },\n    [onEditReference, path]\n  )\n\n  const selectedState = PathUtils.startsWith(path, activePath?.path || [])\n    ? activePath?.state\n    : 'none'\n\n  const createOptions = useMemo(() => {\n    if (disableNew) {\n      return []\n    }\n    return (\n      (initialValueTemplateItems || [])\n        // eslint-disable-next-line max-nested-callbacks\n        .filter((i) => {\n          return schemaType.to.some((_refType) => {\n            return _refType.name === i.template?.schemaType\n          })\n        })\n        .map((item): CreateReferenceOption | undefined =>\n          item.template?.schemaType\n            ? {\n                id: item.id,\n                title:\n                  item.title || `${item.template.schemaType} from template ${item.template?.id}`,\n                type: item.template.schemaType,\n                icon: item.icon,\n                template: {\n                  id: item.template?.id,\n                  params: item.parameters,\n                },\n\n                permission: {granted: item.granted, reason: item.reason},\n              }\n            : undefined\n        )\n        .filter(isNonNullable)\n    )\n  }, [disableNew, initialValueTemplateItems, schemaType.to])\n\n  const getReferenceInfo = useCallback(\n    (id, _type) => adapter.getReferenceInfo(documentPreviewStore, id, _type),\n    [documentPreviewStore]\n  )\n\n  return (\n    <ReferenceInput\n      {...props}\n      onSearch={handleSearch}\n      liveEdit={isDocumentLiveEdit}\n      getReferenceInfo={getReferenceInfo}\n      selectedState={selectedState}\n      editReferenceLinkComponent={EditReferenceLink}\n      createOptions={createOptions}\n      onEditReference={handleEditReference}\n    />\n  )\n}\n","import {ReferenceSchemaType} from '@sanity/types'\nimport {once} from 'lodash'\nimport {StudioReferenceInput} from '../inputs/reference/StudioReferenceInput'\n\n/* eslint-disable no-console */\nconst warnInputTypeNotSupported = once(() =>\n  console.warn('The option \"inputType\" on references is removed.')\n)\nconst warnSearchableOptionNotSupported = once(() =>\n  console.warn('The option \"searchable\" on references has been removed.')\n)\n\n/* eslint-enable no-console */\n\nexport function resolveReferenceInput(type: ReferenceSchemaType) {\n  const options = type.options || {}\n  if ('inputType' in options) {\n    warnInputTypeNotSupported()\n  }\n  if ('searchable' in options) {\n    warnSearchableOptionNotSupported()\n  }\n  return StudioReferenceInput\n}\n","import React from 'react'\nimport type {SortableContainerProps} from 'react-sortable-hoc'\nimport {SortableContainer, SortableElement, SortableHandle} from 'react-sortable-hoc'\nimport {FIXME} from '../../../types'\n\nexport const MOVING_ITEM_CLASS_NAME = 'moving'\nexport const DRAG_HANDLE_ATTRIBUTE = 'data-drag-handle'\n\n// higher order components to make a sortable list/item components\ntype ExposedSortableProps = {\n  onSortStart?: () => void\n  onSortEnd?: (event: {newIndex: number; oldIndex: number}) => void\n}\n\nexport function sortableHandle<Props>(\n  Component: React.ComponentType<Props>\n): React.ComponentType<Props> {\n  return SortableHandle(Component)\n}\n\n// Wrapper to avoid accidental leaking of react-sortable-hoc props\nexport function sortableItem<Props>(\n  Component: React.ComponentType<Props>\n): React.ComponentType<Props & {index: number}> {\n  return SortableElement(Component)\n}\n\n// Wrapper to avoid accidental leaking of react-sortable-hoc props\nfunction sortableContainer<Props>(\n  Component: React.ComponentType<Props>,\n  options: SortableContainerProps\n) {\n  const Container = SortableContainer(\n    React.forwardRef(function Sortable(\n      props: Props & ExposedSortableProps,\n      forwardedRef: React.ForwardedRef<React.ComponentType<Props>>\n    ) {\n      return <Component {...props} ref={forwardedRef} />\n    })\n  ) as FIXME as React.ComponentType<SortableContainerProps> // there are some wonky typings from react-sortable-hoc\n\n  return React.forwardRef(function SortableList(\n    props: Props & ExposedSortableProps,\n    ref: React.ForwardedRef<React.ComponentType<Props>>\n  ) {\n    return <Container {...props} {...options} ref={ref} />\n  })\n}\n\nconst KeyCode = {\n  Space: 32,\n  Enter: 13,\n  Esc: 27,\n  Up: 38,\n  Left: 37,\n  Right: 39,\n  Down: 40,\n}\n\nconst KEYCODES = {\n  lift: [KeyCode.Space, KeyCode.Enter],\n  drop: [KeyCode.Space, KeyCode.Enter],\n  cancel: [KeyCode.Esc],\n  up: [KeyCode.Left, KeyCode.Up],\n  down: [KeyCode.Right, KeyCode.Down],\n}\n\nexport function sortableGrid<Props>(Component: React.ComponentType<Props>) {\n  return sortableContainer(Component, {\n    helperClass: MOVING_ITEM_CLASS_NAME,\n    keyCodes: KEYCODES,\n    axis: 'xy',\n    lockAxis: 'xy',\n    useDragHandle: true,\n    shouldCancelStart,\n  })\n}\n\nexport function sortableList<Props>(Component: React.ComponentType<Props>) {\n  return sortableContainer(Component, {\n    helperClass: MOVING_ITEM_CLASS_NAME,\n    keyCodes: KEYCODES,\n    axis: 'y',\n    lockAxis: 'y',\n    useDragHandle: true,\n    shouldCancelStart,\n  })\n}\n\n// Cancel sorting if the event target is not drag handle\nfunction shouldCancelStart(event: React.UIEvent<HTMLElement>) {\n  return !isDragHandle(event.target as HTMLElement)\n}\n\nfunction isDragHandle(element: HTMLElement) {\n  return element.matches(`[${DRAG_HANDLE_ATTRIBUTE}=\"true\"],[${DRAG_HANDLE_ATTRIBUTE}=\"true\"] *`)\n}\n","import {Card, Grid, Theme} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {MOVING_ITEM_CLASS_NAME, sortableGrid, sortableItem, sortableList} from './sortable'\n\nconst ListItem = styled(Card)`\n  &.${MOVING_ITEM_CLASS_NAME} {\n    z-index: 10000;\n    border-radius: ${({theme}) => theme.sanity.radius[2]}px;\n    box-shadow: 0 0 0 0, 0 8px 17px 2px var(--card-shadow-umbra-color),\n      0 3px 14px 2px var(--card-shadow-penumbra-color),\n      0 5px 5px -3px var(--card-shadow-ambient-color);\n\n    // Used inside CellItem\n    [data-ui='DragHandleCard'] {\n      opacity: 1;\n    }\n\n    [data-ui='DragHandleButton'] {\n      background-color: ${({theme}: {theme: Theme}) =>\n        theme.sanity.color.button.bleed.primary.pressed.bg};\n      color: ${({theme}: {theme: Theme}) => theme.sanity.color.button.bleed.primary.pressed.fg};\n      [data-ui='Text'] {\n        color: inherit;\n      }\n    }\n  }\n`\nconst GridItem = ListItem\n\nconst SortableList = sortableList(Grid)\nconst SortableListItem = sortableItem(ListItem)\n\nconst SortableGrid = sortableGrid(Grid)\nconst SortableGridItem = SortableListItem\n\ntype ListProps = {\n  isSortable?: boolean\n  isGrid?: boolean\n  onSortEnd?: (event: {newIndex: number; oldIndex: number}) => void\n  children?: React.ReactNode\n  tabIndex?: number\n}\n\nexport function List(props: ListProps) {\n  const {isSortable, isGrid, onSortEnd, ...rest} = props\n\n  if (isGrid) {\n    return isSortable ? (\n      <SortableGrid columns={[2, 3, 4]} gap={3} onSortEnd={onSortEnd} {...rest} />\n    ) : (\n      <Grid columns={[2, 3, 4]} gap={3} {...rest} />\n    )\n  }\n\n  return isSortable ? (\n    <SortableList gap={1} onSortEnd={onSortEnd} {...rest} />\n  ) : (\n    <Grid gap={1} {...rest} />\n  )\n}\n\ntype ItemProps = {isSortable?: boolean; isGrid?: boolean; children?: React.ReactNode; index: number}\n\nexport function Item(props: ItemProps) {\n  const {isSortable, isGrid, ...rest} = props\n  if (isGrid) {\n    const ItemComponent = isSortable ? SortableGridItem : GridItem\n    return <ItemComponent {...rest} />\n  }\n  const ItemComponent = isSortable ? SortableListItem : ListItem\n  return <ItemComponent {...rest} />\n}\n","export function isLegacyOptionsItem(item: any) {\n  if (item && typeof item === 'object') {\n    const keys = Object.keys(item)\n    if (keys.length <= 2 && 'value' in item) {\n      return true\n    }\n  }\n  return false\n}\n\nexport function resolveValueWithLegacyOptionsSupport(item: any) {\n  return isLegacyOptionsItem(item) ? item.value : item\n}\n","import React from 'react'\nimport {get, startCase} from 'lodash'\nimport {Box, Checkbox, Flex, Text} from '@sanity/ui'\nimport {resolveTypeName} from '@sanity/util/content'\nimport {set, unset} from '../../../patch'\nimport {ArrayOfPrimitivesInputProps, FIXME} from '../../../types'\nimport {ItemWithMissingType} from '../ArrayOfObjectsInput/item/ItemWithMissingType'\nimport {Item, List} from '../common/list'\nimport {isLegacyOptionsItem, resolveValueWithLegacyOptionsSupport} from './legacyOptionsSupport'\n\nfunction isEqual(item: any, otherItem: any): boolean {\n  if (isLegacyOptionsItem(item) || isLegacyOptionsItem(otherItem)) {\n    return item.value === otherItem.value\n  }\n  if (item === otherItem) {\n    return true\n  }\n  if (typeof item !== typeof otherItem) {\n    return false\n  }\n  if (typeof item !== 'object' && !Array.isArray(item)) {\n    return item === otherItem\n  }\n  if (item._key && item._key === otherItem._key) {\n    return true\n  }\n  if (Array.isArray(item)) {\n    if (!item.length !== otherItem.length) {\n      return false\n    }\n    return item.every((it, i) => isEqual(item[i], otherItem[i]))\n  }\n  const keys = Object.keys(item)\n  const otherKeys = Object.keys(item)\n  if (keys.length !== otherKeys.length) {\n    return false\n  }\n  return keys.every((keyName) => isEqual(item[keyName], otherItem[keyName]))\n}\n\nfunction inArray(array: unknown[], candidate: unknown) {\n  return array ? array.some((item) => isEqual(item, candidate)) : false\n}\n\ntype OptionsArrayInputProps = ArrayOfPrimitivesInputProps\n\nexport class OptionsArrayInput extends React.PureComponent<OptionsArrayInputProps> {\n  _element: HTMLElement | null = null\n\n  handleChange = (isChecked: boolean, optionValue: any) => {\n    const {schemaType, value = []} = this.props\n    const list = get(schemaType.options, 'list') as FIXME[]\n    if (!isChecked && optionValue._key) {\n      // This is an optimization that only works if list items are _keyed\n      this.props.onChange(unset([{_key: optionValue._key}]))\n    }\n    const nextValue = list\n      .filter((item) =>\n        isEqual(optionValue, item)\n          ? isChecked\n          : inArray(value, resolveValueWithLegacyOptionsSupport(item))\n      )\n      .map(resolveValueWithLegacyOptionsSupport)\n    this.props.onChange(nextValue.length > 0 ? set(nextValue) : unset())\n  }\n\n  getMemberTypeOfItem(option: any) {\n    const {schemaType} = this.props\n    return schemaType.of.find(\n      (memberType) =>\n        memberType.name === resolveTypeName(resolveValueWithLegacyOptionsSupport(option))\n    )\n  }\n\n  setElement = (el: HTMLElement | null) => {\n    this._element = el\n  }\n\n  focus() {\n    if (this._element) {\n      this._element.focus()\n    }\n  }\n\n  handleFocus = (index: number) => {\n    const {onFocusIndex} = this.props\n    onFocusIndex(index)\n  }\n\n  render() {\n    const {renderPreview, schemaType, value, readOnly, elementProps} = this.props\n    const options: any[] = schemaType.options?.list || []\n\n    // note: direction was never documented and makes more sense to use \"grid\" for it too\n    const isGrid =\n      schemaType.options?.direction === 'horizontal' || schemaType.options?.layout === 'grid'\n\n    return (\n      <List isGrid={isGrid} tabIndex={0} {...elementProps}>\n        {options.map((option, index) => {\n          const optionType = this.getMemberTypeOfItem(option)\n          const checked = inArray(value || [], resolveValueWithLegacyOptionsSupport(option))\n          const disabled = !optionType\n          const title = option?.title || startCase(option?.value) || option\n\n          return (\n            <Item index={index} isGrid={isGrid} key={index}>\n              <Flex align=\"center\" as=\"label\" muted={disabled}>\n                <WrappedCheckbox\n                  disabled={disabled}\n                  checked={checked}\n                  onChange={(e) => this.handleChange(e.currentTarget.checked, option)}\n                  onFocus={() => this.handleFocus(index)}\n                  readOnly={readOnly}\n                />\n\n                {optionType &&\n                  (title ? (\n                    <Box padding={2}>\n                      <Text>{title}</Text>\n                    </Box>\n                  ) : (\n                    <Box marginLeft={2}>\n                      {renderPreview({\n                        layout: 'media',\n                        schemaType: optionType,\n                        value: resolveValueWithLegacyOptionsSupport(option),\n                      })}\n                    </Box>\n                  ))}\n\n                {!optionType && (\n                  <ItemWithMissingType value={option} onFocus={() => this.handleFocus(index)} />\n                )}\n              </Flex>\n            </Item>\n          )\n        })}\n      </List>\n    )\n  }\n}\n\nconst WrappedCheckbox = (props: React.HTMLProps<HTMLInputElement>) => {\n  const {disabled, checked, onChange, onFocus, readOnly, onBlur} = props\n\n  return (\n    <Checkbox\n      disabled={disabled}\n      checked={checked}\n      readOnly={readOnly}\n      onChange={onChange}\n      onFocus={onFocus}\n      onBlur={onBlur}\n    />\n  )\n}\n","export function focusRingBorderStyle(border: {color: string; width: number}): string {\n  return `inset 0 0 0 ${border.width}px ${border.color}`\n}\n\nexport function focusRingStyle(opts: {\n  base?: {bg: string}\n  border?: {color: string; width: number}\n  focusRing: {offset: number; width: number}\n}): string {\n  const {base, border, focusRing} = opts\n  const focusRingOutsetWidth = focusRing.offset + focusRing.width\n  const focusRingInsetWidth = 0 - focusRing.offset\n  const bgColor = base ? base.bg : 'var(--card-bg-color)'\n\n  return [\n    focusRingInsetWidth > 0 && `inset 0 0 0 ${focusRingInsetWidth}px var(--card-focus-ring-color)`,\n    border && focusRingBorderStyle(border),\n    focusRingInsetWidth < 0 && `0 0 0 ${0 - focusRingInsetWidth}px ${bgColor}`,\n    focusRingOutsetWidth > 0 && `0 0 0 ${focusRingOutsetWidth}px var(--card-focus-ring-color)`,\n  ]\n    .filter(Boolean)\n    .join(',')\n}\n","import {CloseIcon} from '@sanity/icons'\nimport {Box, Button, Card, Flex, isHTMLElement, rem, Text, Theme, useForwardedRef} from '@sanity/ui'\nimport React, {forwardRef, useCallback, useEffect, useMemo, useRef, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport type {CSSObject} from 'styled-components'\nimport {focusRingBorderStyle, focusRingStyle} from './styles'\n\nconst Root = styled(Box)((props: {theme: Theme}): CSSObject => {\n  const {theme} = props\n  const {focusRing, input, radius} = theme.sanity\n  const color = theme.sanity.color.input\n  const space = rem(theme.sanity.space[1])\n\n  return {\n    position: 'relative',\n    borderRadius: `${radius[1]}px`,\n    color: color.default.enabled.fg,\n    backgroundColor: color.default.enabled.bg,\n    boxShadow: focusRingBorderStyle({\n      color: color.default.enabled.border,\n      width: input.border.width,\n    }),\n\n    '& > .content': {\n      position: 'relative',\n      lineHeight: 0,\n      margin: `-${space} 0 0 -${space}`,\n    },\n\n    '& > .content > div': {\n      display: 'inline-block',\n      verticalAlign: 'top',\n      padding: `${space} 0 0 ${space}`,\n    },\n\n    // enabled\n    '&:not([data-read-only])': {\n      cursor: 'text',\n    },\n\n    // hovered\n    '@media(hover:hover)': {\n      '&:not([data-disabled]):not([data-read-only]):hover': {\n        borderColor: color.default.hovered.border,\n      },\n    },\n\n    // focused\n    '&:not([data-disabled]):not([data-read-only])[data-focused]': {\n      boxShadow: focusRingStyle({\n        border: {\n          color: color.default.enabled.border,\n          width: input.border.width,\n        },\n        focusRing,\n      }),\n    },\n\n    // disabled\n    '*:disabled + &': {\n      color: color.default.disabled.fg,\n      backgroundColor: color.default.disabled.bg,\n      boxShadow: focusRingBorderStyle({\n        color: color.default.disabled.border,\n        width: input.border.width,\n      }),\n    },\n  }\n})\n\nconst Input = styled.input((props: {theme: Theme}): CSSObject => {\n  const {theme} = props\n  const font = theme.sanity.fonts.text\n  const color = theme.sanity.color.input\n  const p = theme.sanity.space[2]\n  const size = theme.sanity.fonts.text.sizes[2]\n\n  return {\n    appearance: 'none',\n    background: 'none',\n    border: 0,\n    borderRadius: 0,\n    outline: 'none',\n    fontSize: rem(size.fontSize),\n    lineHeight: size.lineHeight / size.fontSize,\n    fontFamily: font.family,\n    fontWeight: font.weights.regular,\n    margin: 0,\n    display: 'block',\n    minWidth: '1px',\n    maxWidth: '100%',\n    boxSizing: 'border-box',\n    paddingTop: rem(p - size.ascenderHeight),\n    paddingRight: rem(p),\n    paddingBottom: rem(p - size.descenderHeight),\n    paddingLeft: rem(p),\n\n    // enabled\n    '&:not(:invalid):not(:disabled)': {\n      color: color.default.enabled.fg,\n    },\n\n    // disabled\n    '&:not(:invalid):disabled': {\n      color: color.default.disabled.fg,\n    },\n  }\n})\n\nconst Placeholder = styled(Box)((props: {theme: Theme}) => {\n  const {theme} = props\n  const color = theme.sanity.color.input\n\n  return css`\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    pointer-events: none;\n    --card-fg-color: ${color.default.enabled.placeholder};\n  `\n})\n\nexport const TagInput = forwardRef(\n  (\n    props: {\n      readOnly?: boolean\n      onChange?: (newValue: {value: string}[]) => void\n      onFocus?: (event: React.FocusEvent) => void\n      placeholder?: string\n      value?: {value: string}[]\n    } & Omit<React.HTMLProps<HTMLInputElement>, 'as' | 'onChange' | 'onFocus' | 'ref' | 'value'>,\n    ref: React.Ref<HTMLInputElement>\n  ) => {\n    const {\n      disabled,\n      onChange,\n      onFocus,\n      placeholder: placeholderProp,\n      readOnly,\n      value = [],\n      ...restProps\n    } = props\n    const placeholder = useMemo(() => {\n      if (placeholderProp) return placeholderProp\n      if (typeof window !== 'undefined' && 'ontouchstart' in window) {\n        return 'Enter tag…'\n      }\n      return 'Enter tag and press ENTER…'\n    }, [placeholderProp])\n    const [inputValue, setInputValue] = useState('')\n    const enabled = !disabled && !readOnly\n    const [focused, setFocused] = useState(false)\n    const forwardedRef = useForwardedRef(ref)\n    const rootRef = useRef<HTMLDivElement | null>(null)\n\n    const handleRootPointerDown = useCallback(\n      (event: React.PointerEvent<HTMLDivElement>) => {\n        const isTagElement = isHTMLElement(event.target) && event.target.closest('[data-ui=\"Tag\"]')\n\n        if (isTagElement) return\n\n        const inputElement = forwardedRef.current\n\n        if (inputElement) {\n          setTimeout(() => inputElement.focus(), 0)\n        }\n      },\n      [forwardedRef]\n    )\n\n    const handleInputBlur = useCallback(() => {\n      setFocused(false)\n    }, [])\n\n    const handleInputChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n      setInputValue(event.currentTarget.value)\n    }, [])\n\n    const handleInputFocus = useCallback(\n      (event: React.FocusEvent) => {\n        setFocused(true)\n        if (onFocus) onFocus(event)\n      },\n      [onFocus]\n    )\n\n    const handleInputKeyDown = useCallback(\n      (event: React.KeyboardEvent<HTMLInputElement>) => {\n        if (event.key === 'Enter') {\n          event.preventDefault()\n          event.stopPropagation()\n\n          if (onChange && inputValue) {\n            const newValue = value.concat([{value: inputValue}])\n\n            setInputValue('')\n\n            if (onChange) onChange(newValue)\n          }\n        }\n      },\n      [inputValue, onChange, value]\n    )\n\n    const handleTagRemove = useCallback(\n      (index: number) => {\n        if (!onChange) return\n\n        const newValue = value.slice(0)\n\n        newValue.splice(index, 1)\n\n        onChange(newValue)\n      },\n      [onChange, value]\n    )\n\n    useEffect(() => {\n      const inputElement = forwardedRef.current\n\n      if (inputElement) {\n        inputElement.style.width = '0'\n        inputElement.style.width = `${inputElement.scrollWidth}px`\n      }\n    }, [forwardedRef, inputValue])\n\n    return (\n      <Root\n        data-disabled={disabled ? '' : undefined}\n        data-focused={focused ? '' : undefined}\n        data-read-only={readOnly ? '' : undefined}\n        data-ui=\"TagInput\"\n        onPointerDown={handleRootPointerDown}\n        padding={1}\n        ref={rootRef}\n      >\n        {enabled && (\n          <Placeholder hidden={Boolean(inputValue || value.length)} padding={3}>\n            <Text textOverflow=\"ellipsis\">{placeholder}</Text>\n          </Placeholder>\n        )}\n\n        <div className=\"content\">\n          {value.map((tag, tagIndex) => (\n            // eslint-disable-next-line react/no-array-index-key\n            <div key={`tag-${tagIndex}`}>\n              <Tag\n                enabled={enabled}\n                index={tagIndex}\n                muted={disabled}\n                onRemove={handleTagRemove}\n                tag={tag}\n              />\n            </div>\n          ))}\n\n          <div key=\"tag-input\">\n            <Input\n              {...restProps}\n              disabled={!enabled}\n              onBlur={handleInputBlur}\n              onChange={handleInputChange}\n              onFocus={handleInputFocus}\n              onKeyDown={handleInputKeyDown}\n              ref={forwardedRef}\n              type=\"text\"\n              value={inputValue}\n            />\n          </div>\n        </div>\n      </Root>\n    )\n  }\n)\n\nTagInput.displayName = 'TagInput'\n\nfunction Tag(props: {\n  enabled: boolean\n  index: number\n  muted?: boolean\n  onRemove: (index: number) => void\n  tag: {value: string}\n}) {\n  const {enabled, index, muted, onRemove, tag} = props\n\n  const handleRemoveClick = useCallback(() => {\n    onRemove(index)\n  }, [index, onRemove])\n\n  return (\n    <Card data-ui=\"Tag\" padding={1} radius={2} tone=\"transparent\">\n      <Flex align=\"center\">\n        <Box flex={1} padding={1}>\n          <Text muted={muted}>{tag.value}</Text>\n        </Box>\n\n        {enabled && (\n          <Box marginLeft={1}>\n            <Button icon={CloseIcon} mode=\"bleed\" onClick={handleRemoveClick} padding={1} />\n          </Box>\n        )}\n      </Flex>\n    </Card>\n  )\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {set, unset} from '../patch'\nimport {TagInput} from '../components/tagInput'\nimport {ArrayOfPrimitivesInputProps} from '../types'\n\nexport type TagsArrayInputProps = ArrayOfPrimitivesInputProps<string[]>\n\nexport function TagsArrayInput(props: TagsArrayInputProps) {\n  const {onChange, readOnly, value = [], elementProps} = props\n  const tagInputValue = useMemo(() => value?.map((v) => ({value: v})), [value])\n\n  const handleChange = useCallback(\n    (nextValue: {value: string}[]) => {\n      onChange(nextValue.length === 0 ? unset() : set(nextValue.map((v) => v.value)))\n    },\n    [onChange]\n  )\n\n  return (\n    <TagInput onChange={handleChange} readOnly={readOnly} value={tagInputValue} {...elementProps} />\n  )\n}\n","// Takes a observable-returning function and returns a new function that limits on the number of\n// concurrent observables.\nimport {first, mergeMap} from 'rxjs/operators'\nimport {Subject, Subscription, Observable, from as observableFrom} from 'rxjs'\nimport {FIXME} from '../../types'\n\nconst DEFAULT_CONCURRENCY = 4\n\nfunction remove<T>(array: Array<T>, item: T): Array<T> {\n  const index = array.indexOf(item)\n  if (index > -1) {\n    array.splice(index, 1)\n  }\n  return array\n}\n\nexport function withMaxConcurrency<Args extends any[], Ret>(\n  func: (...args: Args) => Observable<Ret>,\n  concurrency: number = DEFAULT_CONCURRENCY\n) {\n  const throttler = createThrottler(concurrency)\n  return (...args: Args) => observableFrom(throttler(func(...args))) as Observable<Ret>\n}\n\nexport function createThrottler(concurrency: number = DEFAULT_CONCURRENCY) {\n  const currentSubscriptions: Array<Subscription> = []\n  const pendingObservables: Array<Observable<any>> = []\n  const ready$ = new Subject()\n\n  return request\n\n  function request(observable: Observable<unknown>): Observable<unknown> {\n    return new Observable((observer) => {\n      if (currentSubscriptions.length >= concurrency) {\n        return scheduleAndWait(observable)\n          .pipe(mergeMap(request) as FIXME)\n          .subscribe(observer)\n      }\n      const subscription = observable.subscribe(observer)\n      currentSubscriptions.push(subscription)\n      return () => {\n        remove(currentSubscriptions, subscription)\n        remove(pendingObservables, observable)\n        subscription.unsubscribe()\n        check()\n      }\n    })\n  }\n\n  function scheduleAndWait(observable: Observable<unknown>) {\n    pendingObservables.push(observable)\n    return ready$.asObservable().pipe(first((obs) => obs === observable))\n  }\n\n  function check() {\n    while (pendingObservables.length > 0 && currentSubscriptions.length < concurrency) {\n      ready$.next(pendingObservables.shift())\n    }\n  }\n}\n","import {mergeMap, map, catchError} from 'rxjs/operators'\nimport {Observable, of as observableOf} from 'rxjs'\nimport {FileAsset, ImageAsset} from '@sanity/types'\nimport {SanityClient, ProgressEvent, SanityAssetDocument} from '@sanity/client'\nimport {withMaxConcurrency} from '../../utils'\nimport {DocumentPreviewStore} from '../../../../preview'\nimport {UploadOptions} from '../../uploads/types'\n\nconst MAX_CONCURRENT_UPLOADS = 4\n\ntype UploadEvent = ProgressEvent | {type: 'complete'; id: string; asset: SanityAssetDocument}\n\nfunction uploadSanityAsset(\n  client: SanityClient,\n  assetType: 'file' | 'image',\n  file: File | Blob,\n  options: UploadOptions = {}\n): Observable<UploadEvent> {\n  const extract = options.metadata\n  const preserveFilename = options.storeOriginalFilename\n  const {label, title, description, creditLine, source} = options\n  return hashFile(file).pipe(\n    catchError(() =>\n      // ignore if hashing fails for some reason\n      observableOf(null)\n    ),\n\n    mergeMap((hash) =>\n      // note: the sanity api will still dedupe unique files, but this saves us from uploading the asset file entirely\n      hash ? fetchExisting(client, `sanity.${assetType}Asset`, hash) : observableOf(null)\n    ),\n\n    mergeMap((existing: SanityAssetDocument | null) => {\n      if (existing) {\n        return observableOf({\n          // complete with the existing asset document\n          type: 'complete' as const,\n          id: existing._id,\n          asset: existing,\n        })\n      }\n      return client.observable.assets\n        .upload(assetType, file, {\n          tag: 'asset.upload',\n          extract,\n          preserveFilename,\n          label,\n          title,\n          description,\n          creditLine,\n          source,\n        })\n        .pipe(\n          map((event) =>\n            event.type === 'response'\n              ? {\n                  // rewrite to a 'complete' event\n                  type: 'complete' as const,\n                  id: event.body.document._id,\n                  asset: event.body.document,\n                }\n              : event\n          )\n        )\n    })\n  )\n}\n\nconst uploadAsset = withMaxConcurrency(uploadSanityAsset, MAX_CONCURRENT_UPLOADS)\n\nexport const uploadImageAsset = (\n  client: SanityClient,\n  file: File | Blob,\n  options?: UploadOptions\n) => uploadAsset(client, 'image', file, options)\n\nexport const uploadFileAsset = (client: SanityClient, file: File | Blob, options?: UploadOptions) =>\n  uploadAsset(client, 'file', file, options)\n\n// note: there's currently 100% overlap between the ImageAsset document and the FileAsset documents as per interface required by the image and file input\nfunction observeAssetDoc(documentPreviewStore: DocumentPreviewStore, id: string) {\n  return documentPreviewStore.observePaths({_type: 'reference', _ref: id}, [\n    'originalFilename',\n    'url',\n    'metadata',\n    'label',\n    'title',\n    'description',\n    'creditLine',\n    'source',\n    'size',\n  ])\n}\n\nexport function observeImageAsset(documentPreviewStore: DocumentPreviewStore, id: string) {\n  return observeAssetDoc(documentPreviewStore, id) as Observable<ImageAsset>\n}\n\nexport function observeFileAsset(documentPreviewStore: DocumentPreviewStore, id: string) {\n  return observeAssetDoc(documentPreviewStore, id) as Observable<FileAsset>\n}\n\nfunction fetchExisting(\n  client: SanityClient,\n  type: string,\n  hash: string\n): Observable<ImageAsset | FileAsset | null> {\n  return client.observable.fetch(\n    '*[_type == $documentType && sha1hash == $hash][0]',\n    {documentType: type, hash},\n    {tag: 'asset.find-duplicate'}\n  )\n}\n\nfunction readFile(file: Blob | File): Observable<ArrayBuffer> {\n  return new Observable((subscriber) => {\n    const reader = new FileReader()\n    reader.onload = () => {\n      subscriber.next(reader.result as ArrayBuffer)\n      subscriber.complete()\n    }\n    reader.onerror = (err) => {\n      subscriber.error(err)\n    }\n    reader.readAsArrayBuffer(file)\n    return () => {\n      reader.abort()\n    }\n  })\n}\n\nfunction hashFile(file: File | Blob): Observable<string | null> {\n  if (!window.crypto || !window.crypto.subtle || !window.FileReader) {\n    return observableOf(null)\n  }\n  return readFile(file).pipe(\n    mergeMap((arrayBuffer) => crypto.subtle.digest('SHA-1', arrayBuffer)),\n    map(hexFromBuffer)\n  )\n}\n\nfunction hexFromBuffer(buffer: ArrayBuffer): string {\n  return Array.prototype.map\n    .call(new Uint8Array(buffer), (x) => `00${x.toString(16)}`.slice(-2))\n    .join('')\n}\n","import {Observable, of as observableOf, from as observableFrom} from 'rxjs'\nimport {map, catchError} from 'rxjs/operators'\nimport exif from 'exif-component'\n\nfunction readFileAsArrayBuffer(\n  file: File,\n  length: number\n): Observable<string | ArrayBuffer | null> {\n  return new Observable((observer) => {\n    const reader = new window.FileReader()\n    reader.onerror = (err) => observer.error(err)\n    reader.onload = () => {\n      observer.next(reader.result)\n      observer.complete()\n    }\n    reader.readAsArrayBuffer(length === undefined ? file : file.slice(0, length))\n    return () => reader.abort()\n  })\n}\n\nconst SKIP_EXIF_ERROR_RE = /(invalid image format)|(No exif data)/i\n\n// 128k should be enough for exif data according to https://github.com/mattiasw/ExifReader#tips\nconst EXIF_BUFFER_LENGTH = 128000\n\nexport function readExif(file: File) {\n  return observableFrom(readFileAsArrayBuffer(file, EXIF_BUFFER_LENGTH)).pipe(\n    map((buf) => exif(buf)),\n    catchError((error) => {\n      if (!SKIP_EXIF_ERROR_RE.test(error.message)) {\n        // Exif read failed, we do not want to fail hard\n        console.warn(`Exif read failed, continuing anyway: ${error.message}`) // eslint-disable-line no-console\n      }\n      return observableOf({})\n    })\n  )\n}\n","import {Observable} from 'rxjs'\n\n/* eslint-disable */\n\n/**\n * Check if we need to change dims.\n */\nfunction rotated(n: number) {\n  return [5, 6, 7, 8].indexOf(n) > -1\n}\n\ntype RotateOpts = {\n  degrees?: number\n  x: number\n  y: number\n}\n\n// Based on github.com/component/rotate\nfunction rotate(ctx: CanvasRenderingContext2D | null, options: RotateOpts) {\n  const x = options.x\n  const y = options.y\n\n  const radians = (options.degrees || 0) * (Math.PI / 180)\n\n  ctx?.translate(x, y)\n  ctx?.rotate(radians)\n  ctx?.translate(-x, -y)\n}\n\n// Based on github.com/component/flip\nfunction flip(canvas: HTMLCanvasElement, x: boolean, y: boolean) {\n  const ctx = canvas.getContext('2d')\n  ctx?.translate(x ? canvas.width : 0, y ? canvas.height : 0)\n  ctx?.scale(x ? -1 : 1, y ? -1 : 1)\n}\n\nconst ORIENTATION_OPS = [\n  {op: 'none', degrees: 0},\n  {op: 'flip-x', degrees: 0},\n  {\n    op: 'none',\n    degrees: 180,\n  },\n  {op: 'flip-y', degrees: 0},\n  {op: 'flip-x', degrees: 90},\n  {op: 'none', degrees: 90},\n  {\n    op: 'flip-x',\n    degrees: -90,\n  },\n  {op: 'none', degrees: -90},\n]\n\nexport type Orientation =\n  | 'top-left'\n  | 'top-right'\n  | 'bottom-right'\n  | 'bottom-left'\n  | 'left-top'\n  | 'right-top'\n  | 'right-bottom'\n  | 'left-bottom'\n\nconst ORIENTATIONS: Array<Orientation> = [\n  'top-left',\n  'top-right',\n  'bottom-right',\n  'bottom-left',\n  'left-top',\n  'right-top',\n  'right-bottom',\n  'left-bottom',\n]\n\nexport const DEFAULT_ORIENTATION: Orientation = 'top-left'\n\nconst THUMB_SIZE = 120\n\n// Based on github.com/component/exif-rotate\nfunction _orient(img: HTMLImageElement, orientationNumber: number): HTMLCanvasElement {\n  const orientation = ORIENTATION_OPS[orientationNumber - 1]\n\n  const ratio = img.height / img.width\n  img.width = THUMB_SIZE / ratio\n  img.height = img.width * ratio\n\n  // canvas\n  const canvas = document.createElement('canvas')\n  const ctx = canvas.getContext('2d')\n\n  // dims\n  if (rotated(orientationNumber)) {\n    canvas.height = img.width\n    canvas.width = img.height\n  } else {\n    canvas.width = img.width\n    canvas.height = img.height\n  }\n\n  // flip\n  if (orientation.op === 'flip-x') {\n    flip(canvas, true, false)\n  }\n  if (orientation.op === 'flip-y') {\n    flip(canvas, false, true)\n  }\n\n  // rotate\n  if (orientation.degrees) {\n    rotate(ctx, {\n      degrees: orientation.degrees,\n      x: canvas.width / 2,\n      y: canvas.height / 2,\n    })\n\n    if (rotated(orientationNumber)) {\n      const d = canvas.width - canvas.height\n      ctx?.translate(d / 2, -d / 2)\n    }\n  }\n\n  ctx?.drawImage(img, 0, 0, img.width, img.height)\n  return canvas\n}\n\n/* eslint-enable */\nexport function orient(image: HTMLImageElement, orientationId: Orientation) {\n  return new Observable((observer) => {\n    // console.time('canvas to blob')\n    const orientation = ORIENTATIONS.indexOf(orientationId) + 1\n    const canvas = _orient(image, orientation)\n    observer.next(canvas.toDataURL('image/jpeg', 0.1))\n    observer.complete()\n  })\n}\n","import {Observable} from 'rxjs'\nimport {mergeMap} from 'rxjs/operators'\nimport {orient, Orientation} from './orient'\n\nfunction loadImage(url: string): Observable<HTMLImageElement> {\n  return new Observable((observer) => {\n    const image = new window.Image()\n    //console.time(\"read image\");\n    image.onerror = () => {\n      observer.error(\n        new Error(`Could not load image from url \"${url}\". Image may be of an unsupported format`)\n      )\n    }\n    image.onload = () => {\n      //console.timeEnd(\"read image\");\n      observer.next(image)\n      observer.complete()\n    }\n    image.src = url\n    return () => {\n      // todo: cancel loading (if possible?)\n    }\n  })\n}\n\nexport function rotateImage(file: File, orientation: Orientation) {\n  return loadImage(window.URL.createObjectURL(file)).pipe(\n    mergeMap((image) => orient(image, orientation))\n  )\n}\n","export const UPLOAD_STATUS_KEY = '_upload'\n","import {FormPatch, set, setIfMissing, unset} from '../../patch'\nimport {UploadEvent} from './types'\nimport {UPLOAD_STATUS_KEY} from './constants'\n\nconst UNSET_UPLOAD_PATCH = unset([UPLOAD_STATUS_KEY])\n\nexport function createUploadEvent(patches: FormPatch[] = []): UploadEvent {\n  return {\n    type: 'uploadEvent',\n    patches,\n  }\n}\n\nexport const CLEANUP_EVENT = createUploadEvent([UNSET_UPLOAD_PATCH])\n\nexport function createInitialUploadEvent(file: File) {\n  const now = new Date().toISOString()\n  const value = {\n    progress: 2,\n    initiated: now,\n    updated: now,\n    file: {name: file.name, type: file.type},\n  }\n\n  return createUploadEvent([\n    setIfMissing({[UPLOAD_STATUS_KEY]: value}, []),\n    set(value, [UPLOAD_STATUS_KEY]),\n  ])\n}\n","import {from as observableFrom, of as observableOf, Observable} from 'rxjs'\nimport {catchError, concat, filter, map, merge, mergeMap} from 'rxjs/operators'\nimport type {SanityClient} from '@sanity/client'\nimport {set} from '../../patch'\nimport {uploadImageAsset} from '../inputs/client-adapters/assets'\nimport {readExif} from './image/readExif'\nimport {rotateImage} from './image/rotateImage'\nimport {DEFAULT_ORIENTATION, Orientation} from './image/orient'\nimport {UploadEvent, UploadOptions} from './types'\nimport {UPLOAD_STATUS_KEY} from './constants'\nimport {CLEANUP_EVENT, createInitialUploadEvent, createUploadEvent} from './utils'\n\ntype Exif = {\n  orientation: Orientation\n}\n\nexport function uploadImage(\n  client: SanityClient,\n  file: File,\n  options?: UploadOptions\n): Observable<UploadEvent> {\n  const upload$ = uploadImageAsset(client, file, options).pipe(\n    filter((event: any) => event.stage !== 'download'),\n    map((event) => ({\n      ...event,\n      progress: 2 + (event.percent / 100) * 98,\n    })),\n\n    map((event: any) => {\n      if (event.type === 'complete') {\n        return createUploadEvent([\n          set({_type: 'reference', _ref: event.asset._id}, ['asset']),\n          set(100, [UPLOAD_STATUS_KEY, 'progress']),\n          set(new Date().toISOString(), [UPLOAD_STATUS_KEY, 'updated']),\n        ])\n      }\n      return createUploadEvent([\n        set(event.percent, [UPLOAD_STATUS_KEY, 'progress']),\n        set(new Date().toISOString(), [UPLOAD_STATUS_KEY, 'updated']),\n      ])\n    })\n  )\n\n  const setPreviewUrl$ = readExif(file).pipe(\n    mergeMap((exifData: unknown) =>\n      rotateImage(file, (exifData as Exif).orientation || DEFAULT_ORIENTATION)\n    ),\n\n    catchError((error) => {\n      // eslint-disable-next-line no-console\n      console.warn(\n        'Image preprocessing failed for \"%s\" with the error: %s',\n        file.name,\n        error.message\n      )\n\n      // something went wrong, but continue still\n      return observableOf(null)\n    }),\n    filter(Boolean),\n    map((imageUrl) => createUploadEvent([set(imageUrl, [UPLOAD_STATUS_KEY, 'previewImage'])]))\n  )\n\n  return observableOf(createInitialUploadEvent(file)).pipe(\n    concat(observableFrom(upload$).pipe(merge(setPreviewUrl$))),\n    concat(observableOf(CLEANUP_EVENT))\n  )\n}\n","import {of as observableOf, Observable} from 'rxjs'\nimport {map, concat} from 'rxjs/operators'\nimport {SanityClient} from '@sanity/client'\nimport {set} from '../../patch'\nimport {uploadFileAsset} from '../inputs/client-adapters/assets'\nimport {UploadEvent, UploadOptions} from './types'\nimport {UPLOAD_STATUS_KEY} from './constants'\nimport {createUploadEvent, createInitialUploadEvent, CLEANUP_EVENT} from './utils'\n\nexport function uploadFile(\n  client: SanityClient,\n  file: File,\n  options?: UploadOptions\n): Observable<UploadEvent> {\n  const upload$ = uploadFileAsset(client, file, options).pipe(\n    map((event) => {\n      if (event.type === 'complete') {\n        return createUploadEvent([\n          set({_type: 'reference', _ref: event.asset._id}, ['asset']),\n          set(100, [UPLOAD_STATUS_KEY, 'progress']),\n          set(new Date().toISOString(), [UPLOAD_STATUS_KEY, 'updated']),\n        ])\n      }\n      return createUploadEvent([\n        set(event.percent, [UPLOAD_STATUS_KEY, 'progress']),\n        set(new Date().toISOString(), [UPLOAD_STATUS_KEY, 'updated']),\n      ])\n    })\n  )\n\n  return observableOf(createInitialUploadEvent(file)).pipe(\n    concat(upload$),\n    concat(observableOf(CLEANUP_EVENT))\n  )\n}\n","import {SchemaType} from '@sanity/types'\nimport {map} from 'rxjs/operators'\nimport {SanityClient} from '@sanity/client'\nimport {set} from '../../patch'\nimport {uploadImage} from './uploadImage'\nimport {uploadFile} from './uploadFile'\nimport {Uploader, UploaderDef, UploadOptions} from './types'\n\nconst UPLOAD_IMAGE: UploaderDef = {\n  type: 'image',\n  accepts: 'image/*',\n  upload: (client: SanityClient, file: File, type?: SchemaType, options?: UploadOptions) =>\n    uploadImage(client, file, options),\n}\n\nconst UPLOAD_FILE: UploaderDef = {\n  type: 'file',\n  accepts: '',\n  upload: (client: SanityClient, file: File, type: SchemaType, options?: UploadOptions) =>\n    uploadFile(client, file, options),\n}\n\nconst UPLOAD_TEXT: UploaderDef = {\n  type: 'string',\n  accepts: 'text/*',\n  upload: (client: SanityClient, file: File, type: SchemaType, options?: UploadOptions) =>\n    uploadFile(client, file, options).pipe(\n      map((content) => ({\n        type: 'uploadEvent',\n        patches: [set(content)],\n      }))\n    ),\n\n  // Todo: promote this to a \"first-class\" form-builder abstraction\n  // and make it possible to register custom uploaders\n}\n\nexport const uploaders: Array<Uploader> = [UPLOAD_IMAGE, UPLOAD_TEXT, UPLOAD_FILE].map(\n  (uploader, i) => ({\n    ...uploader,\n    priority: i,\n  })\n)\n","import type {FileLike} from './types'\n\n/**\n * Check if the provided file type should be accepted by the input with accept attribute.\n * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Input#attr-accept\n *\n * Inspired by https://github.com/enyo/dropzone (MIT) (c) 2021 Matias Meno\n * Based on https://github.com/react-dropzone/attr-accept (MIT) (c) 2015 Andrey Okonetchnikov\n *\n * @param file - https://developer.mozilla.org/en-US/docs/Web/API/File\n * @param acceptedFiles - List of accepted mime types (comma-separated string or array)\n * @returns True if file is accepted, false otherwise\n */\nexport function accepts(file: FileLike, acceptedFiles: string | string[]): boolean {\n  if (!file || !acceptedFiles) {\n    return true\n  }\n\n  const acceptedFilesArray = Array.isArray(acceptedFiles)\n    ? acceptedFiles // eg `['image/png', 'image/jpeg']`\n    : acceptedFiles.split(',') // eg `image/png,image/jpeg`\n\n  const fileName = file.name || ''\n  const mimeType = (file.type || '').toLowerCase()\n  const baseMimeType = mimeType.replace(/\\/.*$/, '')\n\n  return acceptedFilesArray.some((type) => {\n    const validType = type.trim().toLowerCase()\n\n    if (validType.charAt(0) === '.') {\n      return fileName.toLowerCase().endsWith(validType)\n    }\n\n    if (validType.endsWith('/*')) {\n      // This is something like a image/* mime type\n      return baseMimeType === validType.replace(/\\/.*$/, '')\n    }\n\n    return mimeType === validType\n  })\n}\n","import type {SchemaType} from '@sanity/types'\nimport type {FIXME} from '../../types'\nimport * as is from '../../utils/is'\nimport type {FileLike, Uploader} from './types'\nimport {uploaders} from './uploaders'\nimport {accepts} from './accepts'\n\nexport function resolveUploader(type: SchemaType, file: FileLike): Uploader | null {\n  return (\n    uploaders.find((uploader) => {\n      return (\n        is.type(uploader.type, type) &&\n        accepts(file, uploader.accepts) &&\n        accepts(file, (type.options as FIXME)?.accept || '')\n      )\n    }) || null\n  )\n}\n","import type {SchemaType} from '@sanity/types'\n\n/**\n * Get the most specific defined title of a schema type\n * If not set directly on the given type, it will traverse up the tree until it\n * finds one, falling back to the _name_ of the type.\n *\n * @param type - The schema type to get the title of\n * @returns A title, alternatively the schema type _name_\n * @internal\n */\nexport function getSchemaTypeTitle(type: SchemaType): string {\n  if (typeof type.title === 'string') {\n    return type.title\n  }\n\n  if (type.type) {\n    return getSchemaTypeTitle(type.type)\n  }\n\n  return type.name || type.jsonType\n}\n","export const BEFORE = 'before'\nexport const AFTER = 'after'\n\nexport function arrayInsert(\n  array: unknown[],\n  position: 'after' | 'before',\n  index: number,\n  ...args: unknown[][]\n) {\n  if (position !== BEFORE && position !== AFTER) {\n    throw new Error(`Invalid position \"${position}\", must be either ${BEFORE} or ${AFTER}`)\n  }\n\n  const items = flatten(...args)\n\n  if (array.length === 0) {\n    return items\n  }\n\n  const len = array.length\n  const idx = Math.abs((len + index) % len) % len\n\n  const normalizedIdx = position === 'after' ? idx + 1 : idx\n\n  const copy = array.slice()\n  copy.splice(normalizedIdx, 0, ...flatten(items))\n  return copy\n}\n\nfunction flatten(...values: unknown[][]) {\n  return values.reduce((prev, item) => prev.concat(item), [])\n}\n","import {findIndex} from 'lodash'\nimport {FIXME} from '../types'\nimport {applyPatch} from './applyPatch'\nimport {arrayInsert} from './arrayInsert'\n\nconst hasOwn = (obj: Record<string, unknown>, property: string) =>\n  Object.prototype.hasOwnProperty.call(obj, property)\n\nfunction move(arr: unknown[], from: number, to: number) {\n  const nextValue = arr.slice()\n  const val = nextValue[from]\n  nextValue.splice(from, 1)\n  nextValue.splice(to, 0, val)\n  return nextValue\n}\n\nfunction findTargetIndex(array: unknown[], pathSegment: FIXME) {\n  if (typeof pathSegment === 'number') {\n    return pathSegment\n  }\n  const index = findIndex(array, pathSegment)\n  return index === -1 ? false : index\n}\n\nexport function _arrayApply(value: FIXME, patch: FIXME) {\n  const nextValue = value.slice() // make a copy for internal mutation\n\n  if (patch.path.length === 0) {\n    // its directed to me\n    if (patch.type === 'setIfMissing') {\n      if (!Array.isArray(patch.value)) {\n        // eslint-disable-line max-depth\n        throw new Error('Cannot set value of an array to a non-array')\n      }\n      return value === undefined ? patch.value : value\n    } else if (patch.type === 'set') {\n      if (!Array.isArray(patch.value)) {\n        // eslint-disable-line max-depth\n        throw new Error('Cannot set value of an array to a non-array')\n      }\n      return patch.value\n    } else if (patch.type === 'unset') {\n      return undefined\n    } else if (patch.type === 'move') {\n      if (!patch.value || !hasOwn(patch.value, 'from') || !hasOwn(patch.value, 'to')) {\n        // eslint-disable-line max-depth\n        throw new Error(\n          `Invalid value of 'move' patch. Expected a value with \"from\" and \"to\" indexes, instead got: ${JSON.stringify(\n            patch.value\n          )}`\n        )\n      }\n      return move(nextValue, patch.value.from, patch.value.to)\n    }\n    throw new Error(`Invalid array operation: ${patch.type}`)\n  }\n\n  const [head, ...tail] = patch.path\n\n  const index = findTargetIndex(value, head)\n\n  // If the given selector could not be found, return as-is\n  if (index === false) {\n    return nextValue\n  }\n\n  if (tail.length === 0) {\n    if (patch.type === 'insert') {\n      const {position, items} = patch\n      return arrayInsert(value, position, index, items)\n    } else if (patch.type === 'unset') {\n      if (typeof index !== 'number') {\n        throw new Error(`Expected array index to be a number, instead got \"${index}\"`)\n      }\n      nextValue.splice(index, 1)\n      return nextValue\n    }\n  }\n\n  // The patch is not directed to me\n  nextValue[index] = applyPatch(nextValue[index], {\n    ...patch,\n    path: tail,\n  })\n  return nextValue\n}\n","import {omit, clone, isObject} from 'lodash'\nimport {FIXME} from '../types'\nimport {applyPatch} from './applyPatch'\n\nexport function _objectApply(value: FIXME, patch: FIXME) {\n  const nextValue = clone(value)\n  if (patch.path.length === 0) {\n    // its directed to me\n    if (patch.type === 'set') {\n      if (!isObject(patch.value)) {\n        // eslint-disable-line max-depth\n        throw new Error('Cannot set value of an object to a non-object')\n      }\n      return patch.value\n    } else if (patch.type === 'unset') {\n      return undefined\n    } else if (patch.type === 'setIfMissing') {\n      // console.log('IS IT missing?', value)\n      return value === undefined ? patch.value : value\n    }\n    throw new Error(`Invalid object operation: ${patch.type}`)\n  }\n\n  // The patch is not directed to me\n  const [head, ...tail] = patch.path\n  if (typeof head !== 'string') {\n    throw new Error(`Expected field name to be a string, instad got: ${head}`)\n  }\n\n  if (tail.length === 0 && patch.type === 'unset') {\n    return omit(nextValue, head)\n  }\n\n  nextValue[head] = applyPatch(nextValue[head], {\n    ...patch,\n    path: tail,\n  })\n  return nextValue\n}\n","import {FIXME} from '../types'\n\nconst OPERATIONS = {\n  replace(currentValue: FIXME, nextValue: FIXME) {\n    return nextValue\n  },\n  set(currentValue: FIXME, nextValue: FIXME) {\n    return nextValue\n  },\n  setIfMissing(currentValue: FIXME, nextValue: FIXME) {\n    return currentValue === undefined ? nextValue : currentValue\n  },\n  unset(currentValue: FIXME, nextValue: FIXME) {\n    return undefined\n  },\n  inc(currentValue: FIXME, nextValue: FIXME) {\n    return currentValue + nextValue\n  },\n  dec(currentValue: FIXME, nextValue: FIXME) {\n    return currentValue - nextValue\n  },\n}\n\nconst SUPPORTED_PATCH_TYPES = Object.keys(OPERATIONS)\n\nexport function _primitiveApply(value: FIXME, patch: FIXME) {\n  if (!SUPPORTED_PATCH_TYPES.includes(patch.type)) {\n    throw new Error(\n      `Received patch of unsupported type \"${patch.type}\" for primitives. This is most likely a bug.`\n    )\n  }\n\n  if (patch.path.length > 0) {\n    throw new Error(\n      `Cannot apply deep operations on primitive values. Received patch with type \"${\n        patch.type\n      }\" and path \"${patch.path\n        .map((path: FIXME) => JSON.stringify(path))\n        .join('.')} that targeted the value \"${JSON.stringify(value)}\"`\n    )\n  }\n\n  return (OPERATIONS as FIXME)[patch.type](value, patch.value)\n}\n","import * as DMP from 'diff-match-patch'\nimport {FormPatch} from '../patch'\nimport {FIXME} from '../types'\n\n// eslint-disable-next-line new-cap\nconst dmp = new DMP.diff_match_patch()\n\nconst OPERATIONS = {\n  replace(currentValue: unknown, nextValue: unknown) {\n    return nextValue\n  },\n  set(currentValue: unknown, nextValue: unknown) {\n    return nextValue\n  },\n  setIfMissing(currentValue: unknown, nextValue: unknown) {\n    return currentValue === undefined ? nextValue : currentValue\n  },\n  unset(currentValue: unknown, nextValue: unknown) {\n    return undefined\n  },\n  diffMatchPatch(currentValue: string, nextValue: string) {\n    return dmp.patch_apply(dmp.patch_fromText(nextValue), currentValue)[0]\n  },\n}\n\nconst SUPPORTED_PATCH_TYPES = Object.keys(OPERATIONS)\n\nexport function _stringApply(value: unknown, patch: FormPatch) {\n  if (!SUPPORTED_PATCH_TYPES.includes(patch.type)) {\n    throw new Error(\n      `Received patch of unsupported type: \"${JSON.stringify(\n        patch.type\n      )}\" for string. This is most likely a bug.`\n    )\n  }\n\n  if (patch.path.length > 0) {\n    throw new Error(\n      `Cannot apply deep operations on string values. Received patch with type \"${\n        patch.type\n      }\" and path \"${patch.path.join('.')} that targeted the value \"${JSON.stringify(value)}\"`\n    )\n  }\n\n  return (OPERATIONS as FIXME)[patch.type](value, (patch as FIXME).value)\n}\n","import {isObject, isString} from 'lodash'\nimport {PatchArg} from '../../_exports'\nimport {FIXME} from '../types'\nimport {_arrayApply} from './array'\nimport {_objectApply} from './object'\nimport {_primitiveApply} from './primitive'\nimport {_stringApply} from './string'\n\nexport function applyAll(value: FIXME, patches: PatchArg[]) {\n  return patches.reduce(applyPatch, value)\n}\n\nfunction _applyPatch(value: FIXME, patch: FIXME) {\n  if (Array.isArray(value)) {\n    return _arrayApply(value, patch)\n  }\n  if (isString(value)) {\n    return _stringApply(value, patch)\n  }\n  if (isObject(value)) {\n    return _objectApply(value, patch)\n  }\n  return _primitiveApply(value, patch)\n}\n\nexport function applyPatch(value: FIXME, patch: FIXME) {\n  const res = _applyPatch(value, patch)\n  // console.log('applyPatch(%o, %o) : %o (noop? %o)', value, patch, res, value === res)\n  return res\n}\n","import styled, {css} from 'styled-components'\nimport {rem, Theme} from '@sanity/ui'\nimport {ComponentType} from 'react'\nimport {focusRingBorderStyle, focusRingStyle} from './helpers'\n\nexport function withFocusRing<Props>(component: ComponentType<Props>) {\n  return styled(component)<Props & {$border?: boolean}>(\n    (props: {theme: Theme; $border?: boolean}) => {\n      const border = {width: props.$border ? 1 : 0, color: 'var(--card-border-color)'}\n\n      return css`\n        --card-focus-box-shadow: ${focusRingBorderStyle(border)};\n\n        border-radius: ${rem(props.theme.sanity.radius[1])};\n        outline: none;\n        box-shadow: var(--card-focus-box-shadow);\n\n        &:focus {\n          --card-focus-box-shadow: ${focusRingStyle({\n            base: props.theme.sanity.color.base,\n            border,\n            focusRing: props.theme.sanity.focusRing,\n          })};\n        }\n      `\n    }\n  )\n}\n","/**\n * Utilities for extracting files from dataTransfer in a predictable cross-browser fashion.\n * Also recursively extracts files from a directory\n * Inspired by https://github.com/component/normalized-upload\n */\n\nimport {flatten} from 'lodash'\nimport {FIXME} from '../../../../types'\n\nexport function extractPastedFiles(dataTransfer: DataTransfer): Promise<File[]> {\n  if (dataTransfer.files && dataTransfer.files.length > 0) {\n    return Promise.resolve(Array.from(dataTransfer.files || []))\n  }\n  return normalizeItems(Array.from(dataTransfer.items || [])).then(flatten)\n}\n\nexport function extractDroppedFiles(dataTransfer: DataTransfer) {\n  const files: File[] = Array.from(dataTransfer.files || [])\n  const items: DataTransferItem[] = Array.from(dataTransfer.items || [])\n  if (files && files.length > 0) {\n    return Promise.resolve(files)\n  }\n  return normalizeItems(items).then(flatten)\n}\n\nfunction toArray<T>(v: T | null): T[] {\n  return v === null ? [] : [v]\n}\n\nfunction normalizeItems(items: DataTransferItem[]) {\n  return Promise.all(\n    items.map((item) => {\n      // directory\n      if (item.kind === 'file' && item.webkitGetAsEntry) {\n        let entry\n        // Edge throws\n        try {\n          entry = item.webkitGetAsEntry()\n        } catch (err) {\n          return toArray(item.getAsFile())\n        }\n        if (!entry) {\n          return []\n        }\n        return entry.isDirectory ? walk(entry as FIXME) : toArray(item.getAsFile())\n      }\n\n      if (item.kind === 'file') {\n        const file = item.getAsFile()\n        return Promise.resolve(file ? [file] : [])\n      }\n\n      if (item.kind === 'string') {\n        // We previously had support for reading datatransfer of strings here but decided to remove it since we don't handle it in higher up in the stack yet.\n        // If one day we want to support data transfer from a string value (e.g. copy+paste from a field to another), an earlier\n        // version of this file includes an implementation that uses DataTransferItem.getAsString to read the string value into a File\n        console.warn('DataTransfer with kind=\"string\" is currently not supported')\n        return Promise.resolve([])\n      }\n\n      console.warn('Unknown DataTransferItem.kind: %s', item.kind)\n      return Promise.resolve([])\n    })\n  )\n}\n\n// Warning: experimental API: https://wicg.github.io/entries-api\ntype WebKitFileEntry = {\n  isFile: true\n  isDirectory: false\n  name: string\n  fullPath: string\n  file: (fileCallback: (file: File) => void, errorCallback?: (error: Error) => void) => void\n}\n\ntype WebKitDirectoryEntry = {\n  isFile: false\n  isDirectory: true\n  name: string\n  fullPath: string\n  createReader: () => DirectoryReader\n}\n\ntype Entry = WebKitFileEntry | WebKitDirectoryEntry\n\ntype DirectoryReader = {\n  readEntries: (\n    successCallback: (entries: Entry[]) => void,\n    errorCallback?: (error: Error) => void\n  ) => void\n}\n\nfunction walk(entry: Entry): Promise<File[]> {\n  if (entry.isFile) {\n    return new Promise<File>((resolve, reject) => entry.file(resolve, reject)).then(\n      (file: File) => [file]\n    )\n  }\n\n  if (entry.isDirectory) {\n    const dir = entry.createReader()\n    return new Promise<Entry[]>((resolve, reject) => dir.readEntries(resolve, reject))\n      .then((entries) => entries.filter((entr) => !entr.name.startsWith('.')))\n      .then((entries) => Promise.all(entries.map(walk)).then(flatten))\n  }\n  return Promise.resolve([])\n}\n","export function imageUrlToBlob(\n  imageUrl: string,\n  format = 'image/jpeg',\n  quality = 1\n): Promise<Blob | null> {\n  if (imageUrl.match(/^webkit-fake-url:\\/\\//)) {\n    return Promise.reject(new Error('Cannot read image contents from webkit fake url'))\n  }\n  return new Promise((resolve, reject) => {\n    const loader = new Image()\n    loader.crossOrigin = 'anonymous'\n    loader.referrerPolicy = 'strict-origin-when-cross-origin'\n    loader.onload = () => {\n      const canvas = document.createElement('canvas')\n      canvas.width = loader.width\n      canvas.height = loader.height\n      const ctx = canvas.getContext('2d')\n      ctx?.drawImage(loader, 0, 0, canvas.width, canvas.height)\n      try {\n        canvas.toBlob(resolve, format, quality)\n      } catch (error) {\n        reject(error)\n      }\n    }\n    loader.src = imageUrl\n  })\n}\n","import React, {useCallback} from 'react'\nimport {useForwardedRef} from '@sanity/ui'\nimport {extractDroppedFiles, extractPastedFiles} from './utils/extractFiles'\nimport {imageUrlToBlob} from './utils/imageUrlToBlob'\n\nexport type FileInfo = {\n  kind: DataTransferItem['kind'] // 'file' or 'string'\n  type: DataTransferItem['type'] // mime type of file or string\n}\n\ntype Props = {\n  // Triggered when the target component receives one or more files, either originating from a drop event or a paste event\n  onFiles?: (files: File[]) => void\n\n  // Triggered by the user dragging files over the target component\n  // Note: We can potentially also support reading from clipboard events here: https://developer.mozilla.org/en-US/docs/Web/API/Clipboard\n  onFilesOver?: (files: FileInfo[]) => void\n\n  // Triggered by the user dragging files out of the target component\n  onFilesOut?: () => void\n\n  disabled?: boolean\n}\n\n// These are managed and can't be passed to the composed component\ntype ManagedProps =\n  | 'onDrop'\n  | 'onDragOver'\n  | 'onPaste'\n  | 'onDragEnter'\n  | 'onDragLeave'\n  | 'onKeyDown'\n\nconst PASTE_INPUT_STYLE = {opacity: 0, position: 'absolute'} as const\n\n/**\n * Higher order component that creates a file target from a given component.\n * Returns a component that acts both as a drop target and a paste target, emitting a list of Files upon drop or paste\n */\nexport function fileTarget<ComponentProps>(Component: React.ComponentType<ComponentProps>) {\n  return React.forwardRef(function FileTarget(\n    props: Omit<ComponentProps, ManagedProps> & Props,\n    ref: React.ForwardedRef<HTMLElement>\n  ) {\n    const {onFiles, onFilesOver, onFilesOut, disabled, ...rest} = props\n\n    const [showPasteInput, setShowPasteInput] = React.useState(false)\n\n    const pasteInput = React.useRef<HTMLDivElement | null>(null)\n    const forwardedRef = useForwardedRef(ref)\n\n    const enteredElements = React.useRef<Element[]>([])\n\n    const emitFiles = useCallback(\n      (files: File[]) => {\n        onFiles?.(files)\n      },\n      [onFiles]\n    )\n\n    const handleKeyDown = useCallback(\n      (event: React.KeyboardEvent) => {\n        if (\n          event.target === forwardedRef.current &&\n          (event.ctrlKey || event.metaKey) &&\n          event.key === 'v'\n        ) {\n          setShowPasteInput(true)\n        }\n      },\n      [forwardedRef]\n    )\n    const handlePaste = useCallback(\n      (event: React.ClipboardEvent) => {\n        extractPastedFiles(event.clipboardData)\n          .then((files) => {\n            if (!pasteInput.current) {\n              return []\n            }\n            return files.length > 0\n              ? files\n              : // Invoke Safari hack if we didn't get any files\n                convertImagesToFilesAndClearContentEditable(pasteInput.current, 'image/jpeg')\n          })\n          .then((files) => {\n            emitFiles(files)\n            setShowPasteInput(false)\n            forwardedRef.current?.focus()\n          })\n      },\n      [emitFiles, forwardedRef]\n    )\n    const handleDrop = useCallback(\n      (event: React.DragEvent) => {\n        enteredElements.current = []\n        event.preventDefault()\n        event.stopPropagation()\n        const dataTransfer = event.nativeEvent.dataTransfer\n        if (onFiles && dataTransfer) {\n          extractDroppedFiles(dataTransfer).then((files) => {\n            if (files) {\n              emitFiles(files)\n            }\n          })\n        }\n        onFilesOut?.()\n      },\n      [emitFiles, onFiles, onFilesOut]\n    )\n\n    const handleDragOver = useCallback(\n      (event: React.DragEvent) => {\n        if (onFiles) {\n          event.preventDefault()\n          event.stopPropagation()\n        }\n      },\n      [onFiles]\n    )\n\n    const handleDragEnter = useCallback(\n      (event: React.DragEvent) => {\n        event.stopPropagation()\n\n        if (onFilesOver && forwardedRef.current === event.currentTarget) {\n          /* this is a (hackish) work around to have the drag and drop work when the file is hovered back and forth over it\n          as part of the refactor and adding more components to the \"hover\" state, it didn't recognise that it just kept adding the same\n          element over and over, so when it tried to remove them on the handleDragLeave, it only removed the last instance.\n        */\n          enteredElements.current = [...new Set(enteredElements.current), event.currentTarget]\n\n          const fileTypes = Array.from(event.dataTransfer.items).map((item) => ({\n            type: item.type,\n            kind: item.kind,\n          }))\n          onFilesOver(fileTypes)\n        }\n      },\n      [onFilesOver, forwardedRef]\n    )\n\n    const handleDragLeave = useCallback(\n      (event: React.DragEvent) => {\n        event.stopPropagation()\n        const idx = enteredElements.current.indexOf(event.currentTarget)\n        if (idx > -1) {\n          enteredElements.current.splice(idx, 1)\n        }\n        if (enteredElements.current.length === 0) {\n          onFilesOut?.()\n        }\n      },\n      [onFilesOut]\n    )\n\n    const prevShowPasteInput = React.useRef(false)\n    React.useEffect(() => {\n      if (!prevShowPasteInput.current && showPasteInput && pasteInput.current) {\n        pasteInput.current.focus()\n        select(pasteInput.current) // Needed by Edge\n      } else if (prevShowPasteInput.current && !showPasteInput) {\n        pasteInput.current?.focus()\n      }\n      prevShowPasteInput.current = showPasteInput\n    }, [showPasteInput])\n\n    return (\n      <>\n        <Component\n          {...(rest as ComponentProps)}\n          ref={forwardedRef}\n          onKeyDown={disabled ? undefined : handleKeyDown}\n          onDragOver={disabled ? undefined : handleDragOver}\n          onDragEnter={disabled ? undefined : handleDragEnter}\n          onDragLeave={disabled ? undefined : handleDragLeave}\n          onDrop={disabled ? undefined : handleDrop}\n        />\n        {!disabled && showPasteInput && (\n          <div contentEditable onPaste={handlePaste} ref={pasteInput} style={PASTE_INPUT_STYLE} />\n        )}\n      </>\n    )\n  })\n}\n\n// this is a hack for Safari that reads pasted image(s) from an ContentEditable div instead of the onpaste event\nfunction convertImagesToFilesAndClearContentEditable(\n  element: HTMLElement,\n  targetFormat = 'image/jpeg'\n): Promise<File[]> {\n  if (!element.isContentEditable) {\n    return Promise.reject(\n      new Error(\n        `Expected element to be contentEditable=\"true\". Instead found a non contenteditable ${element.tagName}`\n      )\n    )\n  }\n  return new Promise((resolve) => setTimeout(resolve, 10)) // add a delay so the paste event can finish\n    .then(() => Array.from(element.querySelectorAll('img')))\n    .then((imageElements) => {\n      element.innerHTML = '' // clear\n      return imageElements\n    })\n    .then((images) => Promise.all(images.map((img) => imageUrlToBlob(img.src))))\n    .then((imageBlobs) =>\n      imageBlobs.map((blob) => new File([blob!], 'pasted-image.jpg', {type: targetFormat}))\n    )\n}\n\n// needed by Edge\nfunction select(el: Element) {\n  const range = document.createRange()\n  range.selectNodeContents(el)\n  const sel = window.getSelection()\n  sel?.removeAllRanges()\n  sel?.addRange(range)\n}\n","import React from 'react'\nimport {SchemaType} from '@sanity/types'\nimport {Box, Text, Inline} from '@sanity/ui'\nimport {AccessDeniedIcon, UploadIcon} from '@sanity/icons'\nimport {FileLike, UploaderResolver} from '../../../studio/uploads/types'\n\ninterface Props {\n  hoveringFiles: FileLike[]\n  types: SchemaType[]\n  resolveUploader: UploaderResolver\n}\n\nexport function DropMessage(props: Props) {\n  const {hoveringFiles, types, resolveUploader} = props\n  const acceptedFiles = hoveringFiles.filter((file) =>\n    types.some((type) => resolveUploader(type, file))\n  )\n  const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n  const multiple = types.length > 1\n  return (\n    <>\n      {acceptedFiles.length > 0 ? (\n        <>\n          <Inline space={2}>\n            <Text>\n              <UploadIcon />\n            </Text>\n            <Text>\n              Drop to upload{' '}\n              {multiple && (\n                <>\n                  {acceptedFiles.length} file{acceptedFiles.length > 1 ? 's' : ''}\n                </>\n              )}\n            </Text>\n          </Inline>\n          {rejectedFilesCount > 0 && (\n            <Box marginTop={4}>\n              <Inline space={2}>\n                <Text muted size={1}>\n                  <AccessDeniedIcon />\n                </Text>\n                <Text muted size={1}>\n                  {rejectedFilesCount} file\n                  {rejectedFilesCount > 1 ? 's' : ''} can't be uploaded here\n                </Text>\n              </Inline>\n            </Box>\n          )}\n        </>\n      ) : (\n        <Inline space={2}>\n          <Text>\n            <AccessDeniedIcon />\n          </Text>\n          <Text>\n            Can't upload {hoveringFiles.length > 1 ? 'any of these files' : 'this file'} here\n          </Text>\n        </Inline>\n      )}\n    </>\n  )\n}\n","import styled from 'styled-components'\nimport {Layer} from '@sanity/ui'\n\nexport const Overlay = styled(Layer)`\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  top: -2px;\n  left: -2px;\n  right: -2px;\n  bottom: -2px;\n  background-color: var(--card-bg-color);\n  opacity: 0.8;\n`\n","import {Box, Flex, Text, useToast} from '@sanity/ui'\nimport React from 'react'\nimport {SchemaType} from '@sanity/types'\nimport {sortBy} from 'lodash'\nimport styled from 'styled-components'\nimport {\n  FileLike,\n  ResolvedUploader,\n  Uploader,\n  UploaderResolver,\n} from '../../../../studio/uploads/types'\nimport {FileInfo, fileTarget} from '../../../common/fileTarget'\nimport {DropMessage} from '../../../files/common/DropMessage'\nimport {Overlay} from './styles'\n\ntype UploadTargetProps = {\n  types: SchemaType[]\n  resolveUploader?: UploaderResolver\n  onUpload?: (event: {type: SchemaType; file: File; uploader: Uploader}) => void\n  children?: React.ReactNode\n}\n// todo: define and export this as a core interface in this package\ntype UploadTask = {\n  file: File\n  uploaderCandidates: ResolvedUploader[]\n}\n\nconst Root = styled.div`\n  position: relative;\n`\n\nfunction getUploadCandidates(\n  types: SchemaType[],\n  resolveUploader: UploaderResolver,\n  file: FileLike\n) {\n  return types\n    .map((memberType) => ({\n      type: memberType,\n      uploader: resolveUploader(memberType, file),\n    }))\n    .filter((member) => member.uploader) as ResolvedUploader[]\n}\nexport function uploadTarget<Props>(Component: React.ComponentType<Props>) {\n  const FileTarget = fileTarget<any>(Component)\n\n  return React.forwardRef(function UploadTarget(\n    props: UploadTargetProps & Props,\n    forwardedRef: React.ForwardedRef<HTMLElement>\n  ) {\n    const {children, resolveUploader, onUpload, types, ...rest} = props\n    const {push: pushToast} = useToast()\n\n    const uploadFile = React.useCallback(\n      (file: File, resolvedUploader: ResolvedUploader) => {\n        const {type, uploader} = resolvedUploader\n        onUpload?.({file, type, uploader})\n      },\n      [onUpload]\n    )\n\n    const handleFiles = React.useCallback(\n      (files: File[]) => {\n        if (!resolveUploader) {\n          return\n        }\n        const tasks: UploadTask[] = files.map((file) => ({\n          file,\n          uploaderCandidates: getUploadCandidates(types, resolveUploader, file),\n        }))\n        const ready = tasks.filter((task) => task.uploaderCandidates.length > 0)\n        const rejected: UploadTask[] = tasks.filter((task) => task.uploaderCandidates.length === 0)\n\n        if (rejected.length > 0) {\n          const plural = rejected.length > 1\n          pushToast({\n            closable: true,\n            status: 'warning',\n            title: `The following item${\n              plural ? 's' : ''\n            } can't be uploaded because there's no known conversion from content type${\n              plural ? 's' : ''\n            } to array item:`,\n            description: rejected.map((task, i) => (\n              <Flex key={i} padding={2}>\n                <Box marginLeft={1}>\n                  <Text weight=\"semibold\">{task.file.name}</Text>\n                </Box>\n                <Box paddingLeft={2}>\n                  <Text size={1}>({task.file.type})</Text>\n                </Box>\n              </Flex>\n            )),\n          })\n        }\n\n        // todo: consider if we should to ask the user here\n        // the list of candidates is sorted by their priority and the first one is selected\n        // const ambiguous = tasks\n        //   .filter(task => task.uploaderCandidates.length > 1)\n        ready.forEach((task) => {\n          uploadFile(\n            task.file,\n            // eslint-disable-next-line max-nested-callbacks\n            sortBy(task.uploaderCandidates, (candidate) => candidate.uploader.priority)[0]\n          )\n        })\n      },\n      [pushToast, resolveUploader, types, uploadFile]\n    )\n\n    const [hoveringFiles, setHoveringFiles] = React.useState<FileInfo[]>([])\n    const handleFilesOut = React.useCallback(() => setHoveringFiles([]), [])\n\n    return (\n      <Root>\n        <FileTarget\n          {...rest}\n          ref={forwardedRef}\n          onFiles={handleFiles}\n          onFilesOver={setHoveringFiles}\n          onFilesOut={handleFilesOut}\n        >\n          {resolveUploader && hoveringFiles.length > 0 && (\n            <Overlay zOffset={10}>\n              <DropMessage\n                hoveringFiles={hoveringFiles}\n                types={types}\n                resolveUploader={resolveUploader}\n              />\n            </Overlay>\n          )}\n          {children}\n        </FileTarget>\n      </Root>\n    )\n  })\n}\n","import {useCallback} from 'react'\nimport scrollIntoView from 'scroll-into-view-if-needed'\nimport {useDidUpdate} from './useDidUpdate'\n\nconst SCROLL_OPTIONS = {scrollMode: 'if-needed'} as const\n\n/**\n * A hook to help make sure the parent element of a value edited in a dialog (or \"out of band\") stays\n visible in the background\n * @param elementRef The element to scroll into view when the proivided focusWithin changes from true to false\n * @param hasFocusWithin A boolean indicating whether we have has focus within the currently edited value\n */\nexport function useScrollIntoViewOnFocusWithin(\n  elementRef: {current: HTMLElement | null},\n  hasFocusWithin: boolean\n): void {\n  return useDidUpdate(\n    hasFocusWithin,\n    useCallback(\n      (hadFocus, hasFocus) => {\n        if (elementRef.current && !hadFocus && hasFocus) {\n          scrollIntoView(elementRef.current, SCROLL_OPTIONS)\n        }\n      },\n      [elementRef]\n    )\n  )\n}\n","import styled from 'styled-components'\nimport {Button, ButtonProps} from '@sanity/ui'\nimport React from 'react'\nimport {DragHandleIcon} from '@sanity/icons'\nimport {DRAG_HANDLE_ATTRIBUTE, sortableHandle} from './sortable'\n\nconst DragHandleButton = styled(Button)<{grid?: boolean}>`\n  cursor: ${(props) => (props.grid ? 'move' : 'ns-resize')};\n`\n\nconst DRAG_HANDLE_PROPS = {[DRAG_HANDLE_ATTRIBUTE]: true}\n\nexport const DragHandle = sortableHandle(function DragHandle(\n  props: {\n    grid?: boolean\n  } & ButtonProps\n) {\n  return (\n    <DragHandleButton\n      icon={DragHandleIcon}\n      mode=\"bleed\"\n      tabIndex={0}\n      data-ui=\"DragHandleButton\"\n      {...props}\n      {...DRAG_HANDLE_PROPS}\n    />\n  )\n})\n","/* eslint-disable react/jsx-no-bind */\nimport {SchemaType} from '@sanity/types'\nimport React, {ComponentProps, memo} from 'react'\nimport {MenuGroup, MenuItem, PopoverProps} from '@sanity/ui'\nimport {InsertAboveIcon, InsertBelowIcon} from '@sanity/icons'\n\ninterface Props {\n  types?: SchemaType[]\n  onInsert: (pos: 'before' | 'after', type: SchemaType) => void\n}\n\nconst MENU_POPOVER_PROPS: PopoverProps = {\n  portal: true,\n  tone: 'default',\n  placement: 'left',\n  constrainSize: true,\n} as const\n\nexport const InsertMenu = memo(function InsertMenu(props: Props) {\n  const {types, onInsert} = props\n  return (\n    <>\n      <InsertMenuGroup\n        pos=\"before\"\n        types={types}\n        onInsert={onInsert}\n        text=\"Add item before\"\n        icon={InsertAboveIcon}\n      />\n      <InsertMenuGroup\n        pos=\"after\"\n        types={types}\n        onInsert={onInsert}\n        text=\"Add item after\"\n        icon={InsertBelowIcon}\n      />\n    </>\n  )\n})\n\nfunction InsertMenuGroup(\n  props: Props & {\n    pos: 'before' | 'after'\n    text: ComponentProps<typeof MenuItem>['text']\n    icon: ComponentProps<typeof MenuItem>['icon']\n  }\n) {\n  const {types, onInsert, pos, text, icon} = props\n\n  if (types?.length === 1) {\n    return <MenuItem key={pos} text={text} icon={icon} onClick={() => onInsert(pos, types[0])} />\n  }\n  return (\n    <MenuGroup text={text} key={pos} popover={MENU_POPOVER_PROPS}>\n      {types?.map((insertableType) => (\n        <MenuItem\n          key={insertableType.name}\n          icon={insertableType.icon}\n          text={insertableType.title}\n          onClick={() => onInsert(pos, insertableType)}\n        />\n      ))}\n    </MenuGroup>\n  )\n}\n","import React, {ComponentProps} from 'react'\nimport {Card} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {MOVING_ITEM_CLASS_NAME} from '../../../common/sortable'\n\nconst Root = styled(Card)`\n  position: relative;\n  border: 1px solid transparent;\n  .dragHandle {\n    color: var(--card-shadow-umbra-color);\n  }\n  &:hover {\n    border-color: var(--card-shadow-umbra-color);\n    .dragHandle {\n      color: inherit;\n    }\n  }\n  &[aria-selected='true'] {\n    border-color: var(--card-focus-ring-color);\n  }\n  .${MOVING_ITEM_CLASS_NAME} & {\n    box-shadow: 0 0 0 0, 0 8px 17px 2px var(--card-shadow-umbra-color),\n      0 3px 14px 2px var(--card-shadow-penumbra-color),\n      0 5px 5px -3px var(--card-shadow-ambient-color);\n  }\n`\n\nexport const RowWrapper = React.forwardRef(function RowWrapper(\n  props: ComponentProps<typeof Card>,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {children, ...rest} = props\n  return (\n    <Root\n      {...rest}\n      ref={ref}\n      tone={props.tone}\n      /*prevent clicks in children from triggering onFocus on surrounding array input*/\n      tabIndex={-1}\n    >\n      {children}\n    </Root>\n  )\n})\n","/* eslint-disable no-nested-ternary */\nimport React, {useCallback} from 'react'\nimport {\n  Badge,\n  Box,\n  Button,\n  Card,\n  CardTone,\n  Flex,\n  Menu,\n  MenuButton,\n  MenuItem,\n  Text,\n  Tooltip,\n} from '@sanity/ui'\nimport {CopyIcon as DuplicateIcon, EllipsisVerticalIcon, TrashIcon} from '@sanity/icons'\nimport {useId} from '@reach/auto-id'\nimport {SchemaType} from '@sanity/types'\nimport {FormFieldValidationStatus} from '../../../../components/formField'\nimport {FieldPresence} from '../../../../../presence'\nimport {DragHandle} from '../../common/DragHandle'\nimport {randomKey} from '../../common/randomKey'\nimport {createProtoValue} from '../ArrayInput'\nimport {InsertMenu} from '../InsertMenu'\nimport {EMPTY_ARRAY} from '../../../../utils/empty'\nimport {ItemWithMissingType} from './ItemWithMissingType'\nimport {ItemLayoutProps} from './ItemLayoutProps'\nimport {RowWrapper} from './components/RowWrapper'\n\nconst dragHandle = <DragHandle paddingX={1} paddingY={3} />\n\nconst MENU_POPOVER_PROPS = {portal: true, tone: 'default'} as const\n\nexport const RowItem = React.forwardRef(function RegularItem(\n  props: ItemLayoutProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const focusRef = React.useRef<HTMLDivElement | null>(null)\n  const {\n    isSortable,\n    value,\n    onClick,\n    onFocus,\n    type,\n    readOnly,\n    presence,\n    onInsert,\n    insertableTypes,\n    onRemove,\n    renderPreview,\n    validation = EMPTY_ARRAY,\n    ...rest\n  } = props\n\n  const hasErrors = validation.some((v) => v.level === 'error')\n  const hasWarnings = validation.some((v) => v.level === 'warning')\n\n  const handleDuplicate = useCallback(() => {\n    onInsert({\n      items: [{...value, _key: randomKey()}],\n      position: 'after',\n    })\n  }, [onInsert, value])\n\n  const handleInsert = useCallback(\n    (pos: 'before' | 'after', insertType: SchemaType) => {\n      onInsert({\n        items: [{...createProtoValue(insertType), _key: randomKey()}],\n        position: pos,\n      })\n    },\n    [onInsert]\n  )\n  const id = useId()\n  return (\n    <RowWrapper\n      {...rest}\n      ref={ref}\n      radius={2}\n      padding={1}\n      tone={\n        (readOnly\n          ? 'transparent'\n          : hasErrors\n          ? 'critical'\n          : hasWarnings\n          ? 'caution'\n          : 'default') as CardTone\n      }\n    >\n      <Flex align=\"center\">\n        {isSortable && (\n          <Card className=\"dragHandle\" tone=\"inherit\" marginRight={1}>\n            {dragHandle}\n          </Card>\n        )}\n\n        {type ? (\n          <Card\n            as=\"button\"\n            type=\"button\"\n            tone=\"inherit\"\n            radius={2}\n            padding={1}\n            flex={1}\n            onClick={onClick}\n            ref={focusRef}\n            onFocus={onFocus}\n            __unstable_focusRing\n          >\n            {renderPreview({\n              layout:\n                type.options && 'layout' in type.options && type.options?.layout === 'grid'\n                  ? 'media'\n                  : 'default',\n              schemaType: type,\n              value,\n            })}\n          </Card>\n        ) : (\n          <Box flex={1}>\n            <ItemWithMissingType value={value} onFocus={onFocus} />\n          </Box>\n        )}\n\n        <Flex align=\"center\">\n          {!readOnly && presence.length > 0 && (\n            <Box marginLeft={1}>\n              <FieldPresence presence={presence} maxAvatars={1} />\n            </Box>\n          )}\n\n          {validation.length > 0 && (\n            <Box marginLeft={1} paddingX={1} paddingY={3}>\n              <FormFieldValidationStatus __unstable_showSummary={!value?._ref} />\n            </Box>\n          )}\n\n          {!readOnly && (\n            <MenuButton\n              button={<Button padding={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n              id={`${id}-menuButton`}\n              menu={\n                <Menu>\n                  <MenuItem text=\"Remove\" tone=\"critical\" icon={TrashIcon} onClick={onRemove} />\n                  <MenuItem text=\"Duplicate\" icon={DuplicateIcon} onClick={handleDuplicate} />\n                  <InsertMenu types={insertableTypes} onInsert={handleInsert} />\n                </Menu>\n              }\n              placement=\"right\"\n              popover={MENU_POPOVER_PROPS}\n            />\n          )}\n\n          {!value._key && (\n            <Box marginLeft={1}>\n              <Tooltip\n                content={\n                  <Box padding={2}>\n                    <Text muted size={1}>\n                      This item is missing the required <code>_key</code> property.\n                    </Text>\n                  </Box>\n                }\n                placement=\"top\"\n              >\n                <Badge mode=\"outline\" tone=\"caution\">\n                  Missing key\n                </Badge>\n              </Tooltip>\n            </Box>\n          )}\n        </Flex>\n      </Flex>\n    </RowWrapper>\n  )\n})\n","import {\n  CopyIcon as DuplicateIcon,\n  EllipsisVerticalIcon,\n  TrashIcon,\n  WarningOutlineIcon,\n} from '@sanity/icons'\nimport React, {useCallback, useMemo} from 'react'\nimport {Badge, Box, Button, Card, Flex, Menu, MenuButton, MenuItem, Text, Tooltip} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {useId} from '@reach/auto-id'\nimport {SchemaType} from '@sanity/types'\nimport {FormFieldValidationStatus} from '../../../../components/formField'\nimport {FieldPresence} from '../../../../../presence'\nimport {DragHandle} from '../../common/DragHandle'\nimport {randomKey} from '../../common/randomKey'\nimport {createProtoValue} from '../ArrayInput'\nimport {InsertMenu} from '../InsertMenu'\nimport {FIXME} from '../../../../types'\nimport {EMPTY_ARRAY} from '../../../../utils/empty'\nimport {ItemWithMissingType} from './ItemWithMissingType'\nimport {ItemLayoutProps} from './ItemLayoutProps'\n\nconst dragHandle = <DragHandle grid padding={2} mode=\"ghost\" />\n\nconst DragHandleCard = styled(Card)`\n  position: absolute;\n  top: 0;\n  left: 0;\n`\nconst PresenceFlex = styled(Flex)`\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: 35px;\n`\n\nconst Root = styled(Card)`\n  transition: border-color 250ms;\n  position: relative;\n\n  @media (hover: hover) {\n    ${DragHandleCard} {\n      opacity: 0;\n    }\n\n    &:hover,\n    &:focus-within {\n      ${DragHandleCard} {\n        opacity: 1;\n      }\n    }\n  }\n\n  &[aria-selected='true'] {\n    box-shadow: 0 0 0 2px var(--card-focus-ring-color);\n  }\n`\n\nconst FooterFlex = styled(Flex)`\n  min-height: 35px;\n`\n\nconst PreviewCard = styled(Card)`\n  border-top-right-radius: inherit;\n  border-top-left-radius: inherit;\n  height: 100%;\n\n  @media (hover: hover) {\n    &:hover {\n      filter: brightness(95%);\n    }\n  }\n\n  &:focus:focus-visible {\n    box-shadow: 0 0 0 2px var(--card-focus-ring-color);\n  }\n`\nconst MissingTypeBox = styled(Box)`\n  padding-bottom: 100%;\n`\n\nconst StyledItemWithMissingType = styled(ItemWithMissingType)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n`\n\nexport const CellItem = React.forwardRef(function ItemCell(\n  props: ItemLayoutProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const focusRef = React.useRef<HTMLDivElement | null>(null)\n  const {\n    isSortable,\n    value,\n    onClick,\n    onFocus,\n    onInsert,\n    insertableTypes,\n    type,\n    readOnly,\n    presence,\n    onRemove,\n    renderPreview,\n    validation = EMPTY_ARRAY,\n    ...rest\n  } = props\n\n  const hasError = validation.filter((item) => item.level === 'error').length > 0\n  const hasWarning = validation.filter((item) => item.level === 'warning').length > 0\n\n  const tone = useMemo(() => {\n    if (!value._key) {\n      return 'caution'\n    }\n\n    if (hasError) {\n      return 'critical'\n    }\n    if (hasWarning) {\n      return 'caution'\n    }\n\n    return undefined\n  }, [hasError, hasWarning, value._key])\n\n  const handleDuplicate = useCallback(() => {\n    onInsert?.({\n      items: [{...value, _key: randomKey()}],\n      position: 'after',\n    })\n  }, [onInsert, value])\n\n  const handleInsert = useCallback(\n    (pos: 'before' | 'after', insertType: SchemaType) => {\n      onInsert?.({\n        items: [createProtoValue(insertType)],\n        position: pos,\n      })\n    },\n    [onInsert, value._key]\n  )\n\n  const id = useId()\n\n  return (\n    <Root {...rest} radius={2} ref={ref} border tone={tone}>\n      {/* Preview */}\n      {type ? (\n        <PreviewCard\n          tone=\"inherit\"\n          data-ui=\"PreviewCard\"\n          forwardedAs={'button' as FIXME}\n          type=\"button\"\n          overflow=\"auto\"\n          flex={1}\n          tabIndex={0}\n          onClick={onClick}\n          ref={focusRef}\n          onFocus={onFocus}\n          __unstable_focusRing\n        >\n          {renderPreview({\n            layout: 'media',\n            schemaType: type,\n            value,\n            withBorder: false,\n            withRadius: false,\n          })}\n        </PreviewCard>\n      ) : (\n        <MissingTypeBox flex={1}>\n          <StyledItemWithMissingType value={value} onFocus={onFocus} vertical />\n        </MissingTypeBox>\n      )}\n\n      <DragHandleCard margin={1} radius={2} display=\"flex\" tone=\"inherit\" data-ui=\"DragHandleCard\">\n        {!readOnly && isSortable && dragHandle}\n      </DragHandleCard>\n\n      <PresenceFlex align=\"center\" marginX={1}>\n        {!readOnly && <FieldPresence presence={presence} maxAvatars={1} />}\n      </PresenceFlex>\n\n      {/* Footer */}\n      <FooterFlex align=\"center\" paddingX={1} sizing=\"border\" justify=\"space-between\">\n        <Flex>\n          {/* Validation status */}\n          {value?._key && validation.length > 0 && (\n            <Box marginLeft={1} paddingX={1} paddingY={3}>\n              <FormFieldValidationStatus\n                validation={validation}\n                __unstable_showSummary={!value?._ref}\n                placement=\"bottom\"\n                portal\n              />\n            </Box>\n          )}\n\n          {/* Badge: missing key */}\n          {!value._key && (\n            <Tooltip\n              portal\n              content={\n                <Card padding={2}>\n                  <Text size={1}>\n                    This item is missing a required <code>_key</code> property.\n                  </Text>\n                </Card>\n              }\n            >\n              <Badge mode=\"outline\" tone=\"caution\" margin={1} padding={2} fontSize={1}>\n                <WarningOutlineIcon /> key\n              </Badge>\n            </Tooltip>\n          )}\n        </Flex>\n        {/* Menu */}\n        {!readOnly && (\n          <Box>\n            <MenuButton\n              button={<Button padding={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n              id={`${id}-menuButton`}\n              portal\n              menu={\n                <Menu>\n                  <MenuItem text=\"Remove\" tone=\"critical\" icon={TrashIcon} onClick={onRemove} />\n                  <MenuItem text=\"Duplicate\" icon={DuplicateIcon} onClick={handleDuplicate} />\n                  <InsertMenu types={insertableTypes} onInsert={handleInsert} />\n                </Menu>\n              }\n            />\n          </Box>\n        )}\n      </FooterFlex>\n    </Root>\n  )\n})\n","/* eslint-disable camelcase */\n\nimport {isReferenceSchemaType, Path, SchemaType} from '@sanity/types'\nimport {Box} from '@sanity/ui'\nimport React, {memo, useCallback, useRef} from 'react'\nimport {ChangeIndicator} from '../../../../../components/changeIndicators'\nimport {_ArrayInput_ArrayMember} from '../types'\nimport {useScrollIntoViewOnFocusWithin} from '../../../../hooks/useScrollIntoViewOnFocusWithin'\nimport {useDidUpdate} from '../../../../hooks/useDidUpdate'\nimport {FIXME, RenderPreviewCallback} from '../../../../types'\nimport {useChildPresence} from '../../../../studio/contexts/Presence'\nimport {RowItem} from './RowItem'\nimport {CellItem} from './CellItem'\n\nexport interface ArrayItemProps {\n  children: React.ReactNode\n  focused?: boolean\n  changed: boolean\n  layout?: 'grid'\n  index: number\n  insertableTypes: SchemaType[]\n  onClick: () => void\n  onFocus: (event: React.FocusEvent) => void\n  onInsert: (event: {items: unknown[]; position: 'before' | 'after'}) => void\n  onRemove: (value: _ArrayInput_ArrayMember) => void\n  open: boolean\n  path: Path\n  presence: FIXME[]\n  readOnly?: boolean\n  renderPreview: RenderPreviewCallback\n  schemaType: SchemaType\n  validation: FIXME[]\n  value: _ArrayInput_ArrayMember\n}\n\n// This renders the item / preview of unexpanded array items\nexport const ArrayItem = memo(function ArrayItem(props: ArrayItemProps) {\n  const {\n    changed,\n    value,\n    insertableTypes,\n    schemaType,\n    index,\n    open,\n    path,\n    onClick,\n    layout,\n    readOnly,\n    presence = [],\n    validation = [],\n    focused,\n    onRemove,\n    onInsert,\n    onFocus,\n    children,\n    renderPreview,\n  } = props\n\n  const innerElementRef = useRef<HTMLDivElement | null>(null)\n\n  // this is here to make sure the item is visible if it's being edited behind a modal\n  useScrollIntoViewOnFocusWithin(innerElementRef, open)\n\n  useDidUpdate(focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus && innerElementRef.current) {\n      // Note: if editing an inline item, focus is handled by the item input itself and no ref is being set\n      innerElementRef.current?.focus()\n    }\n  })\n\n  const childPresence = useChildPresence(path)\n\n  const handleRemove = useCallback(() => onRemove(value!), [onRemove, value])\n\n  const options = schemaType.options || {}\n  const isSortable = !readOnly && options.sortable !== false\n\n  const isGrid = layout === 'grid'\n  const ItemComponent = isGrid ? CellItem : RowItem\n\n  const isReference = schemaType && isReferenceSchemaType(schemaType)\n\n  const item = (\n    <ItemComponent\n      aria-selected={open}\n      index={index}\n      onFocus={onFocus}\n      value={value}\n      readOnly={readOnly}\n      type={schemaType}\n      insertableTypes={insertableTypes}\n      presence={open ? presence : childPresence}\n      validation={validation}\n      isSortable={isSortable}\n      onInsert={onInsert}\n      onClick={onClick}\n      onRemove={handleRemove}\n      ref={innerElementRef}\n      renderPreview={renderPreview}\n    />\n  )\n\n  return (\n    <>\n      <ChangeIndicator\n        path={path}\n        disabled={open && !isReference}\n        isChanged={changed}\n        hasFocus={!!focused}\n      >\n        {isGrid ? (\n          // grid should be rendered without a margin\n          item\n        ) : (\n          <Box marginX={1}>{item}</Box>\n        )}\n      </ChangeIndicator>\n      {children}\n    </>\n  )\n})\n","/* eslint-disable camelcase */\n/* eslint-disable react/default-props-match-prop-types */\n/* eslint-disable react/jsx-handler-names */\n\nimport {\n  isKeySegment,\n  isObjectSchemaType,\n  isReferenceSchemaType,\n  KeyedSegment,\n  SchemaType,\n} from '@sanity/types'\nimport {isPlainObject} from 'lodash'\nimport {Box, Button, Card, Dialog, Flex, Spinner, Stack, Text, ToastParams} from '@sanity/ui'\nimport React from 'react'\nimport {map} from 'rxjs/operators'\nimport {Subscription} from 'rxjs'\nimport {randomKey, resolveTypeName} from '@sanity/util/content'\nimport {SanityClient} from '@sanity/client'\nimport {Uploader, UploaderResolver, UploadEvent} from '../../../studio/uploads/types'\nimport {getSchemaTypeTitle} from '../../../../schema/helpers'\nimport {isDev} from '../../../../environment'\nimport {Alert} from '../../../components/Alert'\nimport {Details} from '../../../components/Details'\nimport {Item, List} from '../common/list'\nimport {applyAll} from '../../../patch/applyPatch'\nimport {PatchEvent, unset} from '../../../patch'\nimport {ItemProps} from '../../../types/itemProps'\nimport {DefaultArrayInputFunctions} from '../common/ArrayFunctions'\nimport {ArrayOfObjectsMember} from '../../../store'\nimport {ArrayOfObjectsInputProps} from '../../../types'\nimport {isObjectItemProps} from '../../../types/asserters'\nimport {withFocusRing} from '../../../components/withFocusRing'\nimport {ArrayOfObjectsItem, MemberItemError} from '../../../members'\nimport type {_ArrayInput_ArrayMember, _InsertEvent} from './types'\nimport {uploadTarget} from './uploadTarget/uploadTarget'\nimport {isEmpty} from './item/helpers'\nimport {ArrayItem} from './item/ArrayItem'\n\ntype Toast = {push: (params: ToastParams) => void}\n\nexport function createProtoValue(type: SchemaType): _ArrayInput_ArrayMember {\n  if (!isObjectSchemaType(type)) {\n    throw new Error(\n      `Invalid item type: \"${type.type}\". Default array input can only contain objects (for now)`\n    )\n  }\n\n  const _key = randomKey(12)\n  return type.name === 'object' ? {_key} : {_type: type.name, _key}\n}\n\n/**\n * @internal\n */\nexport interface _ArrayInputState {\n  isResolvingInitialValue: boolean\n}\n\nconst UploadTarget = uploadTarget(withFocusRing(Card))\n\nexport interface ArrayInputProps extends ArrayOfObjectsInputProps<_ArrayInput_ArrayMember> {\n  resolveUploader: UploaderResolver\n  client: SanityClient\n}\n\nexport class ArrayInput extends React.PureComponent<ArrayInputProps> {\n  _focusArea: HTMLElement | null = null\n  toast: any | null = null\n\n  uploadSubscriptions: Record<string, Subscription> = {}\n  state: _ArrayInputState = {\n    isResolvingInitialValue: false,\n  }\n\n  insert = (\n    item: _ArrayInput_ArrayMember,\n    position: 'before' | 'after',\n    referenceItem: number | KeyedSegment\n  ) => {\n    const {onInsert} = this.props\n    onInsert({items: [item], position, referenceItem})\n  }\n\n  handlePrepend = (value: _ArrayInput_ArrayMember) => {\n    this.handleInsert({item: value, position: 'before', referenceItem: 0})\n  }\n\n  handleAppend = (value: _ArrayInput_ArrayMember) => {\n    this.handleInsert({item: value, position: 'after', referenceItem: -1})\n  }\n\n  handleInsert = (event: _InsertEvent) => {\n    const {onFocusPath, onOpenItem, resolveInitialValue} = this.props\n    this.setState({isResolvingInitialValue: true})\n    const memberType = this.getMemberTypeOfItem(event.item)\n\n    if (!memberType) {\n      throw new Error(`Type \"${event.item._type}\" not valid for this array`)\n    }\n\n    const resolvedInitialValue =\n      isEmpty(event.item) && resolveInitialValue\n        ? resolveInitialValue(memberType, event.item)\n        : Promise.resolve({})\n\n    resolvedInitialValue\n      .then((initial) => ({...event.item, ...initial}))\n      .then(\n        (value) => {\n          this.insert(value, event.position, event.referenceItem)\n        },\n        (error) => {\n          this.toast?.push({\n            title: `Could not resolve initial value`,\n            description: `Unable to resolve initial value for type: ${memberType.name}: ${error.message}.`,\n            status: 'error',\n          })\n\n          this.insert(event.item, event.position, event.referenceItem)\n        }\n      )\n      .finally(() => {\n        this.setState({isResolvingInitialValue: false})\n        if (event.edit !== false) {\n          onOpenItem(this.props.path.concat([{_key: event.item._key}]))\n        }\n        onFocusPath([{_key: event.item._key}])\n      })\n  }\n\n  getMemberTypeOfItem(item: _ArrayInput_ArrayMember): SchemaType | undefined {\n    const {schemaType} = this.props\n    const itemTypeName = resolveTypeName(item)\n    return schemaType.of.find((memberType) => memberType.name === itemTypeName)\n  }\n\n  handleRemoveItem = (item: _ArrayInput_ArrayMember) => {\n    this.removeItem(item)\n  }\n\n  removeItem(item: _ArrayInput_ArrayMember) {\n    const {onChange, onFocusPath, value} = this.props\n\n    // create a patch for removing the item\n    const patch = unset(isKeySegment(item) ? [{_key: item._key}] : [value?.indexOf(item) || -1])\n\n    // apply the patch to the current value\n    const result = applyAll(value || [], [patch])\n\n    // if the result is an empty array\n    if (Array.isArray(result) && !result.length) {\n      // then unset the value\n      onChange(unset())\n    } else {\n      // otherwise apply the patch\n      onChange(patch)\n    }\n\n    if (item._key in this.uploadSubscriptions) {\n      this.uploadSubscriptions[item._key].unsubscribe()\n    }\n\n    // move focus to the nearest sibling\n    const idx = value?.indexOf(item) || -1\n    const nearestSibling = value?.[idx + 1] || value?.[idx - 1]\n\n    // if there's no siblings we want to focus the input itself\n    onFocusPath(nearestSibling ? [{_key: nearestSibling._key}] : [])\n  }\n\n  handleSortEnd = (event: {newIndex: number; oldIndex: number}) => {\n    const {value, onMoveItem} = this.props\n    const item = value?.[event.oldIndex]\n    const refItem = value?.[event.newIndex]\n\n    if (!item?._key || !refItem?._key) {\n      // eslint-disable-next-line no-console\n      console.error(\n        'Neither the item you are moving nor the item you are moving to have a key. Cannot continue.'\n      )\n\n      return\n    }\n\n    if (event.oldIndex === event.newIndex || item._key === refItem._key) {\n      return\n    }\n\n    onMoveItem({fromIndex: event.oldIndex, toIndex: event.newIndex})\n  }\n\n  focus() {\n    if (this._focusArea) {\n      this._focusArea.focus()\n    }\n  }\n\n  setFocusArea = (el: HTMLElement | null) => {\n    this._focusArea = el\n  }\n\n  setToast = (toast: any | null) => {\n    this.toast = toast\n  }\n  handleRemoveNonObjectValues = () => {\n    const {onChange, value} = this.props\n    const nonObjects = (value || [])\n      .reduce((acc: number[], val, i) => (isPlainObject(val) ? acc : acc.concat(i)), [])\n      .reverse()\n    const patches = nonObjects.map((index) => unset([index]))\n\n    onChange(patches)\n  }\n\n  handleUpload = ({file, type, uploader}: {file: File; type: SchemaType; uploader: Uploader}) => {\n    const {onChange, client} = this.props\n    const item = createProtoValue(type)\n    const key = item._key\n\n    this.insert(item, 'after', -1)\n\n    const events$ = uploader\n      .upload(client, file, type)\n      .pipe(\n        map((uploadEvent: UploadEvent) =>\n          PatchEvent.from(uploadEvent.patches || []).prefixAll({_key: key})\n        )\n      )\n\n    this.uploadSubscriptions = {\n      ...this.uploadSubscriptions,\n      [key]: events$.subscribe((event) => onChange(event.patches)),\n    }\n  }\n\n  renderItem = (itemProps: ItemProps) => {\n    if (!isObjectItemProps(itemProps)) {\n      throw new Error('Expected item to be of object type')\n    }\n\n    const {id, renderPreview, schemaType} = this.props\n\n    if (isReferenceSchemaType(itemProps.schemaType)) {\n      return itemProps.children\n    }\n\n    // We only want to enable focus on the array item when it is not open.\n    // This is because we want to remove the risk of focus being removed\n    // from focusable elements that you interact with inside the dialog.\n    const focused = itemProps.focused && !itemProps.open\n    const typeTitle = getSchemaTypeTitle(itemProps.schemaType)\n    return (\n      <ArrayItem\n        changed={itemProps.changed}\n        validation={itemProps.validation}\n        readOnly={itemProps.readOnly}\n        onInsert={itemProps.onInsert}\n        onRemove={itemProps.onRemove}\n        onFocus={itemProps.onFocus}\n        index={itemProps.index}\n        schemaType={itemProps.schemaType}\n        layout={schemaType.options?.layout}\n        insertableTypes={schemaType.of}\n        value={itemProps.value as _ArrayInput_ArrayMember}\n        focused={focused}\n        open={itemProps.open}\n        path={itemProps.path}\n        onClick={itemProps.onOpen}\n        presence={itemProps.presence}\n        renderPreview={renderPreview}\n      >\n        {itemProps.open ? (\n          <Dialog\n            width={1}\n            header={`Edit ${typeTitle}`}\n            id={`${id}-item-${itemProps.key}-dialog`}\n            onClose={itemProps.onClose}\n          >\n            <Box padding={4}>{itemProps.children}</Box>\n          </Dialog>\n        ) : null}\n      </ArrayItem>\n    )\n  }\n\n  renderMember(member: ArrayOfObjectsMember) {\n    const {renderField, renderInput, renderPreview} = this.props\n    if (member.kind === 'item') {\n      return (\n        <ArrayOfObjectsItem\n          member={member}\n          renderItem={this.renderItem}\n          renderField={renderField}\n          renderInput={renderInput}\n          renderPreview={renderPreview}\n        />\n      )\n    }\n\n    if (member.kind === 'error') {\n      return <MemberItemError member={member} />\n    }\n    //@ts-expect-error all possible cases should be covered\n    return <>Unknown member kind: ${member.kind}</>\n  }\n\n  render() {\n    const {\n      schemaType,\n      onChange,\n      value = [],\n      readOnly,\n      members,\n      elementProps,\n      resolveUploader,\n    } = this.props\n\n    const {isResolvingInitialValue} = this.state\n\n    const hasNonObjectValues = (value || []).some((item) => !isPlainObject(item))\n\n    if (hasNonObjectValues) {\n      return (\n        <Alert\n          status=\"error\"\n          suffix={\n            <Stack padding={2}>\n              <Button\n                onClick={this.handleRemoveNonObjectValues}\n                text=\"Remove non-object values\"\n                tone=\"critical\"\n              />\n            </Stack>\n          }\n          title={<>Invalid list values</>}\n        >\n          <Text as=\"p\" muted size={1}>\n            Some items in this list are not objects. This must be fixed in order to edit the list.\n          </Text>\n\n          <Details marginTop={4} open={isDev} title={<>Developer info</>}>\n            <Stack space={3}>\n              <Text as=\"p\" muted size={1}>\n                This usually happens when items are created using an API client, or when a custom\n                input component has added invalid data to the list.\n              </Text>\n            </Stack>\n          </Details>\n        </Alert>\n      )\n    }\n\n    const options = schemaType.options || {}\n    const isSortable = options.sortable !== false\n    const isGrid = options.layout === 'grid'\n    return (\n      <Stack space={3}>\n        <UploadTarget\n          types={schemaType.of}\n          resolveUploader={resolveUploader}\n          onUpload={this.handleUpload}\n          {...elementProps}\n          tabIndex={0}\n        >\n          <Stack data-ui=\"ArrayInput__content\" space={3}>\n            {members?.length === 0 && (\n              <Card padding={3} border style={{borderStyle: 'dashed'}} radius={2}>\n                <Text align=\"center\" muted size={1}>\n                  {schemaType.placeholder || <>No items</>}\n                </Text>\n              </Card>\n            )}\n            {(members?.length > 0 || isResolvingInitialValue) && (\n              <Card border radius={1} paddingY={isGrid ? 2 : 1} paddingX={isGrid ? 2 : undefined}>\n                <List onSortEnd={this.handleSortEnd} isSortable={isSortable} isGrid={isGrid}>\n                  {members.map((member, index) => {\n                    return (\n                      <Item key={member.key} isSortable={isSortable} isGrid={isGrid} index={index}>\n                        {this.renderMember(member)}\n                      </Item>\n                    )\n                  })}\n                  {isResolvingInitialValue && (\n                    <Item isGrid={isGrid} index={-1}>\n                      <Card radius={1} padding={1}>\n                        <Flex align=\"center\" justify=\"center\" padding={3}>\n                          <Box marginX={3}>\n                            <Spinner muted />\n                          </Box>\n                          <Text>Resolving initial value…</Text>\n                        </Flex>\n                      </Card>\n                    </Item>\n                  )}\n                </List>\n              </Card>\n            )}\n          </Stack>\n        </UploadTarget>\n\n        <DefaultArrayInputFunctions\n          type={schemaType}\n          value={value}\n          readOnly={readOnly}\n          onAppendItem={this.handleAppend}\n          onPrependItem={this.handlePrepend}\n          onCreateValue={createProtoValue}\n          onChange={onChange}\n        />\n      </Stack>\n    )\n  }\n}\n","/**\n * Find the index of the nearest element with the same value. Starts at given index and looks incrementally in either direction for the searchElement\n * It's *NOT* inclusive: If the element matches the element at the startIdx, startIdx will be returned\n * It prefers matches in the first half. If there's a tie it will pick the first element that comes before\n * @param array\n * @param startIdx\n * @param searchElement\n */\nexport function nearestIndexOf<T>(array: T[], startIdx: number, searchElement: T) {\n  return nearestIndex(array, startIdx, (element) => element === searchElement)\n}\n\n/**\n * Find the index of the nearest element matching the predicate. Starts at given index and looks incrementally in either direction\n * It's *NOT* inclusive: If the predicate matches the element at the startIdx, startIdx will be returned\n * It prefers matches in the first half. If there's a tie it will pick the first element that comes before\n * @param array\n * @param startIdx\n * @param predicate\n */\nexport function nearestIndex<T>(\n  array: T[],\n  startIdx: number,\n  predicate: (element: T, index: number) => boolean\n) {\n  let lowerIdx = startIdx - 1\n  let upperIdx = startIdx\n  const len = array.length\n  while (lowerIdx > -1 || upperIdx < len) {\n    const upper = array[upperIdx]\n    if (upperIdx < len && predicate(upper, upperIdx)) {\n      return upperIdx\n    }\n    const lower = array[lowerIdx]\n    if (lowerIdx > -1 && predicate(lower, lowerIdx)) {\n      return lowerIdx\n    }\n    lowerIdx--\n    upperIdx++\n  }\n  return -1\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {Box, Button, Card, Flex, Menu, MenuButton, MenuItem} from '@sanity/ui'\nimport {SchemaType} from '@sanity/types'\nimport {CopyIcon as DuplicateIcon, EllipsisVerticalIcon, TrashIcon} from '@sanity/icons'\nimport {useId} from '@reach/auto-id'\nimport {FormFieldValidationStatus} from '../../../components/formField'\nimport {DragHandle} from '../common/DragHandle'\nimport {ItemWithMissingType} from '../ArrayOfObjectsInput/item/ItemWithMissingType'\nimport {InsertMenu} from '../ArrayOfObjectsInput/InsertMenu'\nimport {PrimitiveItemProps} from '../../../types/itemProps'\nimport {getEmptyValue} from './getEmptyValue'\n\nconst dragHandle = <DragHandle paddingX={1} paddingY={3} />\n\nexport type DefaultItemProps = PrimitiveItemProps & {\n  insertableTypes: SchemaType[]\n  onEnterKey: (item: number) => void\n  onEscapeKey: (item: number) => void\n  index: number\n  isSortable: boolean\n}\n\nexport const ItemRow = React.forwardRef(function ItemRow(\n  props: DefaultItemProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {\n    isSortable,\n    value,\n    index,\n    onEscapeKey,\n    onEnterKey,\n    insertableTypes,\n    onInsert,\n    onRemove,\n    readOnly,\n    onFocus,\n    validation,\n    schemaType,\n  } = props\n\n  const hasError = validation.filter((item) => item.level === 'error').length > 0\n  const hasWarning = validation.filter((item) => item.level === 'warning').length > 0\n\n  const showValidationStatus = !readOnly && validation.length > 0 && !schemaType?.title\n\n  const handleRemove = useCallback(() => {\n    onRemove()\n  }, [onRemove])\n\n  const handleInsert = useCallback(\n    (pos: 'before' | 'after', insertType: SchemaType) => {\n      onInsert({position: pos, items: [getEmptyValue(insertType)]})\n    },\n    [onInsert]\n  )\n\n  const handleDuplicate = useCallback(() => {\n    if (value) onInsert({position: 'after', items: [value]})\n  }, [onInsert, value])\n\n  const handleKeyPress = useCallback(\n    (event: React.KeyboardEvent) => {\n      if (event.key === 'Enter') {\n        onEnterKey(index)\n      }\n    },\n    [index, onEnterKey]\n  )\n\n  const handleKeyUp = useCallback(\n    (event: React.KeyboardEvent<any>) => {\n      if (event.shiftKey && event.key === 'Backspace' && value === '') {\n        onRemove()\n      }\n\n      if (event.key === 'Escape') {\n        onEscapeKey(index)\n      }\n    },\n    [index, onEscapeKey, onRemove, value]\n  )\n\n  const tone = useMemo(() => {\n    if (hasError) {\n      return 'critical'\n    }\n    if (hasWarning) {\n      return 'caution'\n    }\n\n    return undefined\n  }, [hasError, hasWarning])\n\n  const id = useId()\n\n  return (\n    <Card tone={tone} radius={2} paddingX={1} paddingY={2}>\n      <Flex align={schemaType ? 'flex-end' : 'center'} ref={ref}>\n        {schemaType ? (\n          <Flex align=\"flex-end\" flex={1}>\n            {isSortable && <Box marginRight={1}>{dragHandle}</Box>}\n\n            <Box flex={1} marginRight={2}>\n              {props.children}\n            </Box>\n          </Flex>\n        ) : (\n          <Box flex={1}>\n            <ItemWithMissingType value={value} onFocus={onFocus} />\n          </Box>\n        )}\n\n        <Flex align=\"center\" marginLeft={2}>\n          {showValidationStatus && (\n            <Box marginRight={3}>\n              <FormFieldValidationStatus validation={validation} />\n            </Box>\n          )}\n\n          {/*{showPresence && (*/}\n          {/*  // if title is set on type, presence avatars will be shown in the input' formfield instead*/}\n          {/*  <Box marginRight={1}>*/}\n          {/*    <FieldPresence presence={presence} maxAvatars={1} />*/}\n          {/*  </Box>*/}\n          {/*)}*/}\n\n          {!readOnly && (\n            <Box paddingY={1}>\n              <MenuButton\n                button={<Button padding={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n                id={`${id}-menuButton`}\n                portal\n                popover={{portal: true, tone: 'default'}}\n                menu={\n                  <Menu>\n                    <MenuItem\n                      text=\"Remove\"\n                      tone=\"critical\"\n                      icon={TrashIcon}\n                      onClick={handleRemove}\n                    />\n\n                    <MenuItem text=\"Duplicate\" icon={DuplicateIcon} onClick={handleDuplicate} />\n                    <InsertMenu types={insertableTypes} onInsert={handleInsert} />\n                  </Menu>\n                }\n              />\n            </Box>\n          )}\n        </Flex>\n      </Flex>\n    </Card>\n  )\n})\n","/* eslint-disable react/no-unused-prop-types */\n\nimport {ArraySchemaType, isReferenceSchemaType} from '@sanity/types'\nimport {AddIcon} from '@sanity/icons'\nimport React, {useMemo} from 'react'\nimport {Box, Button, Grid, Menu, MenuButton, MenuItem, Tooltip, Text} from '@sanity/ui'\nimport {useId} from '@reach/auto-id'\nimport {FormArrayInputFunctionsProps} from '../../../types'\n\nexport function ArrayOfPrimitivesFunctions<\n  SchemaType extends ArraySchemaType,\n  MemberType extends string | boolean | number\n>(props: FormArrayInputFunctionsProps<SchemaType, MemberType>) {\n  const {type, readOnly, children, onCreateValue, onAppendItem} = props\n  const menuButtonId = useId()\n\n  const insertItem = React.useCallback(\n    (itemType) => {\n      onAppendItem(onCreateValue(itemType))\n    },\n    [onCreateValue, onAppendItem]\n  )\n\n  const handleAddBtnClick = React.useCallback(() => {\n    insertItem(type.of[0])\n  }, [type, insertItem])\n\n  const popoverProps = useMemo(() => ({constrainSize: true, portal: true}), [])\n\n  if (readOnly) {\n    return (\n      <Tooltip\n        portal\n        content={\n          <Box padding={2} sizing=\"border\">\n            <Text size={1} muted>\n              This field is read-only\n            </Text>\n          </Box>\n        }\n      >\n        <Grid>\n          <Button\n            icon={AddIcon}\n            mode=\"ghost\"\n            disabled\n            text={type.of.length === 1 ? 'Add item' : 'Add item...'}\n          />\n        </Grid>\n      </Tooltip>\n    )\n  }\n\n  return (\n    <Grid gap={1} style={{gridTemplateColumns: 'repeat(auto-fit, minmax(100px, 1fr))'}}>\n      {type.of.length === 1 ? (\n        <Button icon={AddIcon} mode=\"ghost\" onClick={handleAddBtnClick} text=\"Add item\" />\n      ) : (\n        <MenuButton\n          button={<Button icon={AddIcon} mode=\"ghost\" text=\"Add item…\" />}\n          id={menuButtonId || ''}\n          menu={\n            <Menu>\n              {type.of.map((memberDef, i) => {\n                // Use reference icon if reference is to one type only\n                const referenceIcon =\n                  isReferenceSchemaType(memberDef) &&\n                  (memberDef.to || []).length === 1 &&\n                  memberDef.to[0].icon\n\n                const icon = memberDef.icon || memberDef.type?.icon || referenceIcon\n                return (\n                  <MenuItem\n                    key={i}\n                    text={memberDef.title || memberDef.type?.name}\n                    onClick={() => insertItem(memberDef)}\n                    icon={icon}\n                  />\n                )\n              })}\n            </Menu>\n          }\n          popover={popoverProps}\n        />\n      )}\n\n      {children}\n    </Grid>\n  )\n}\n\nArrayOfPrimitivesFunctions.__SANITY_INTERNAL_IMPLEMENTATION = true\n","import React from 'react'\nimport {get} from 'lodash'\nimport {ArraySchemaType} from '@sanity/types'\nimport {Card, Stack} from '@sanity/ui'\nimport {ArrayOfPrimitivesInputProps, FormArrayInputFunctionsProps} from '../../../types'\nimport {Item, List} from '../common/list'\nimport {PrimitiveItemProps} from '../../../types/itemProps'\nimport {MemberItemError, ArrayOfPrimitivesItem} from '../../../members'\nimport {getEmptyValue} from './getEmptyValue'\n\nimport {PrimitiveValue} from './types'\nimport {nearestIndexOf} from './utils/nearestIndex'\nimport {ItemRow} from './ItemRow'\nimport {ArrayOfPrimitivesFunctions} from './ArrayOfPrimitivesFunctions'\n\nexport interface DefaultArrayOfPrimitivesInputProps extends ArrayOfPrimitivesInputProps {\n  ArrayFunctionsImpl: React.ComponentType<\n    FormArrayInputFunctionsProps<ArraySchemaType<PrimitiveValue[]>, PrimitiveValue>\n  >\n}\n\nexport class ArrayOfPrimitivesInput extends React.PureComponent<DefaultArrayOfPrimitivesInputProps> {\n  _element: HTMLElement | null = null\n  _lastAddedIndex = -1\n\n  handleAppend = (itemValue: PrimitiveValue) => {\n    const {value = [], onFocusIndex, onAppendItem} = this.props\n    onAppendItem(itemValue)\n    onFocusIndex(value.length)\n  }\n\n  handlePrepend = (itemValue: PrimitiveValue) => {\n    const {onFocusIndex, value = [], onPrependItem} = this.props\n    onPrependItem(itemValue)\n    onFocusIndex(value.length)\n  }\n  handleItemEnterKey = (index: number) => {\n    const {schemaType, onInsert} = this.props\n    const firstType = schemaType?.of[0]\n    if (firstType) {\n      onInsert({\n        referenceIndex: index,\n        position: 'after',\n        items: [getEmptyValue(firstType)],\n      })\n      this._lastAddedIndex = index + 1\n    }\n  }\n\n  handleItemEscapeKey = (index: number) => {\n    const {value, onRemoveItem} = this.props\n    if (index === this._lastAddedIndex && value?.[index] === '') {\n      onRemoveItem(index)\n    }\n  }\n\n  handleSortEnd = (event: {oldIndex: number; newIndex: number}) => {\n    const {onFocusIndex, onMoveItem, value} = this.props\n    if (value) onMoveItem({fromIndex: event.oldIndex, toIndex: event.newIndex})\n    onFocusIndex(event.newIndex)\n  }\n\n  setElement = (el: HTMLElement | null) => {\n    this._element = el\n  }\n\n  focus() {\n    if (this._element) {\n      this._element.focus()\n    }\n  }\n\n  getSnapshotBeforeUpdate(prevProps: ArrayOfPrimitivesInputProps) {\n    const {focusPath: prevFocusPath = [], value: prevValue = []} = prevProps\n    const {focusPath = [], value = []} = this.props\n    if (prevFocusPath[0] === focusPath[0] && prevValue.length !== value.length) {\n      // the length of the array has changed, but the focus path has not, which may happen if someone inserts or removes a new item above the one currently in focus\n      const focusIndex = focusPath[0]\n\n      const selection = window.getSelection()\n      if (!(selection?.focusNode instanceof HTMLElement)) {\n        return null\n      }\n\n      const input = selection.focusNode?.querySelector('input,textarea')\n\n      return input instanceof HTMLInputElement\n        ? {\n            prevFocusedIndex: focusIndex,\n            restoreSelection: {\n              text: selection.toString(),\n              start: input.selectionStart,\n              end: input.selectionEnd,\n              value: input.value,\n            },\n          }\n        : {}\n    }\n\n    return null\n  }\n\n  componentDidUpdate(\n    prevProps: ArrayOfPrimitivesInputProps,\n    prevState: Record<string, unknown>,\n    snapshot?: {restoreSelection: {start: number; end: number}; prevFocusedIndex: number}\n  ) {\n    const {onFocusIndex} = this.props\n    if (snapshot?.restoreSelection && prevProps.value) {\n      const prevFocusedValue = prevProps.value[snapshot.prevFocusedIndex]\n\n      const nearestIndex = nearestIndexOf(\n        this.props.value || [],\n        snapshot.prevFocusedIndex,\n        prevFocusedValue\n      )\n\n      if (nearestIndex === -1) {\n        return\n      }\n      const newInput = this._element?.querySelector(\n        `[data-item-index='${nearestIndex}'] input,textarea`\n      )\n\n      if (newInput instanceof HTMLInputElement) {\n        newInput.focus()\n        try {\n          newInput.setSelectionRange(snapshot.restoreSelection.start, snapshot.restoreSelection.end)\n        } catch {\n          // not all inputs supports selection (e.g. <input type=\"number\" />)\n        }\n      }\n      onFocusIndex(nearestIndex)\n    }\n  }\n\n  renderItem = (props: PrimitiveItemProps) => {\n    const {schemaType, readOnly} = this.props\n    const isSortable = !readOnly && get(schemaType, 'options.sortable') !== false\n\n    return (\n      <ItemRow\n        {...props}\n        isSortable={isSortable}\n        insertableTypes={schemaType.of}\n        onEnterKey={this.handleItemEnterKey}\n        onEscapeKey={this.handleItemEscapeKey}\n      />\n    )\n  }\n\n  render() {\n    const {schemaType, members, readOnly, value, onChange, renderInput} = this.props\n\n    const isSortable = !readOnly && get(schemaType, 'options.sortable') !== false\n\n    return (\n      <Stack space={3}>\n        <Stack space={1}>\n          {members.length > 0 && (\n            <Card padding={1} border>\n              <List onSortEnd={this.handleSortEnd} isSortable={isSortable}>\n                {members.map((member, index) => {\n                  if (member.kind === 'item') {\n                    return (\n                      <Item\n                        key={member.key}\n                        index={index}\n                        data-item-index={index}\n                        isSortable={isSortable}\n                      >\n                        <ArrayOfPrimitivesItem\n                          member={member}\n                          renderInput={renderInput}\n                          renderItem={this.renderItem}\n                        />\n                      </Item>\n                    )\n                  }\n                  if (member.kind === 'error') {\n                    return <MemberItemError key={member.key} member={member} />\n                  }\n                  //@ts-expect-error all possible cases should be covered\n                  return <>Unknown member kind: ${member.kind}</>\n                })}\n              </List>\n            </Card>\n          )}\n        </Stack>\n\n        <ArrayOfPrimitivesFunctions\n          type={schemaType}\n          value={value}\n          readOnly={readOnly}\n          onAppendItem={this.handleAppend}\n          onPrependItem={this.handlePrepend}\n          onCreateValue={getEmptyValue}\n          onChange={onChange}\n        />\n      </Stack>\n    )\n  }\n}\n","import React, {ForwardedRef, forwardRef, useCallback} from 'react'\nimport {SchemaType} from '@sanity/types'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {resolveUploader as defaultResolveUploader} from '../uploads/resolveUploader'\nimport {ArrayInput} from '../../inputs/arrays/ArrayOfObjectsInput'\nimport {ArrayOfPrimitivesInput} from '../../inputs/arrays/ArrayOfPrimitivesInput'\nimport * as is from '../../utils/is'\nimport {useFormBuilder} from '../../useFormBuilder'\nimport {useClient} from '../../../hooks'\nimport {ArrayOfObjectsInputProps, ArrayOfPrimitivesInputProps} from '../../types'\nimport {FileLike} from '../uploads/types'\nimport {useResolveInitialValueForType} from '../../../datastores'\n\nexport function StudioArrayInput(props: ArrayOfObjectsInputProps) {\n  const formBuilder = useFormBuilder()\n  // todo abstract the client away\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const supportsImageUploads = formBuilder.__internal.image.directUploads\n  const supportsFileUploads = formBuilder.__internal.file.directUploads\n\n  const resolveUploader = useCallback(\n    (type: SchemaType, file: FileLike) => {\n      if (is.type('image', type) && !supportsImageUploads) {\n        return null\n      }\n      if (is.type('file', type) && !supportsFileUploads) {\n        return null\n      }\n\n      return defaultResolveUploader(type, file)\n    },\n    [supportsFileUploads, supportsImageUploads]\n  )\n\n  const resolveInitialValue = useResolveInitialValueForType()\n\n  return (\n    <ArrayInput\n      {...props}\n      resolveInitialValue={resolveInitialValue}\n      resolveUploader={resolveUploader}\n      client={client}\n    />\n  )\n}\n\nexport const StudioArrayOfPrimitivesInput = forwardRef(function StudioArrayOfPrimitivesInput(\n  props: Omit<ArrayOfPrimitivesInputProps, 'ArrayFunctionsImpl'>,\n  ref: ForwardedRef<ArrayOfPrimitivesInput>\n) {\n  const formBuilder = useFormBuilder()\n\n  return (\n    <ArrayOfPrimitivesInput\n      {...props}\n      ArrayFunctionsImpl={formBuilder.__internal.components.ArrayFunctions}\n      ref={ref}\n    />\n  )\n})\n","import {ArraySchemaType} from '@sanity/types'\nimport {ComponentType} from 'react'\nimport * as is from '../../utils/is'\nimport {OptionsArrayInput as OptionsArray} from '../../inputs/arrays/OptionsArrayInput'\nimport {PortableTextInput} from '../../inputs/PortableText/PortableTextInput'\nimport {TagsArrayInput} from '../../inputs/TagsArrayInput'\nimport {StudioArrayInput, StudioArrayOfPrimitivesInput} from '../inputs/StudioArrayInput'\n\nconst PRIMITIVES = ['string', 'number', 'boolean']\n\nexport function isArrayOfPrimitives(type: ArraySchemaType): boolean {\n  return type.of.every((ofType) => PRIMITIVES.includes(ofType.jsonType))\n}\n\nfunction isStringArray(type: ArraySchemaType): type is ArraySchemaType<string> {\n  return type.of.length === 1 && is.type('string', type.of[0])\n}\n\nfunction isTagsArray(type: ArraySchemaType<string>): boolean {\n  return type.options?.layout === 'tags'\n}\n\nfunction isPortableText(type: ArraySchemaType): boolean {\n  // TODO: better testing here, not only for type 'block' !\n  return type.of.some((memberType) => is.type('block', memberType))\n}\n\nexport function hasOptionsList(type: ArraySchemaType): boolean {\n  return Boolean(type.options?.list)\n}\n\nexport function resolveArrayInput(type: ArraySchemaType): ComponentType<any> {\n  if (isStringArray(type) && isTagsArray(type)) {\n    return TagsArrayInput\n  }\n\n  // Schema provides predefines list\n  if (hasOptionsList(type)) {\n    return OptionsArray\n  }\n\n  // Special component for array of primitive values\n  if (isArrayOfPrimitives(type)) {\n    return StudioArrayOfPrimitivesInput\n  }\n\n  // Use Portable Text editor if portable text.\n  if (isPortableText(type)) {\n    return PortableTextInput\n  }\n\n  // use default\n  return StudioArrayInput\n}\n","import {useId} from '@reach/auto-id'\nimport {isTitledListValue, TitledListValue} from '@sanity/types'\nimport {Box, Card, Flex, Inline, Radio, Select, Stack, Text} from '@sanity/ui'\nimport {capitalize} from 'lodash'\nimport React, {forwardRef, useCallback, useMemo} from 'react'\nimport {ChangeIndicator} from '../../components/changeIndicators'\nimport {PatchEvent, set, unset} from '../patch'\nimport {StringInputProps} from '../types'\n\nfunction toSelectItem(\n  option: TitledListValue<string | number> | string | number\n): TitledListValue<string | number> {\n  return isTitledListValue(option) ? option : {title: capitalize(`${option}`), value: option}\n}\n\nconst EMPTY_ITEM = {title: '', value: undefined}\n\nexport function SelectInput(props: StringInputProps) {\n  const {\n    value,\n    readOnly,\n    validationError,\n    schemaType,\n    onChange,\n    path,\n    changed,\n    focused,\n    elementProps,\n  } = props\n  const items = useMemo(\n    () => (schemaType.options?.list || []).map(toSelectItem),\n    [schemaType.options?.list]\n  )\n  const currentItem = items.find((item) => item.value === value)\n  const isRadio = schemaType.options && schemaType.options.layout === 'radio'\n\n  const itemFromOptionValue = useCallback(\n    (optionValue) => {\n      const index = Number(optionValue)\n\n      return items[index]\n    },\n    [items]\n  )\n\n  const optionValueFromItem = useCallback(\n    (item) => {\n      return String(items.indexOf(item))\n    },\n    [items]\n  )\n\n  const inputId = useId()\n\n  const handleChange = React.useCallback(\n    (nextItem: TitledListValue<string | number> | null) => {\n      onChange(\n        PatchEvent.from(typeof nextItem?.value === 'undefined' ? unset() : set(nextItem.value))\n      )\n    },\n    [onChange]\n  )\n\n  const handleSelectChange = useCallback(\n    (event: React.ChangeEvent<HTMLSelectElement>) => {\n      const nextItem = itemFromOptionValue(event.currentTarget.value)\n\n      if (!nextItem) {\n        handleChange(EMPTY_ITEM)\n        return\n      }\n\n      handleChange(nextItem)\n    },\n    [handleChange, itemFromOptionValue]\n  )\n\n  const content = isRadio ? (\n    <RadioSelect\n      {...elementProps}\n      value={currentItem}\n      inputId={inputId}\n      items={items}\n      direction={schemaType.options?.direction || 'vertical'}\n      customValidity={validationError}\n      onChange={handleChange}\n    />\n  ) : (\n    <Select\n      {...elementProps}\n      customValidity={validationError}\n      value={optionValueFromItem(currentItem)}\n      onChange={handleSelectChange}\n    >\n      {[EMPTY_ITEM, ...items].map((item, i) => (\n        <option key={`${i - 1}`} value={i - 1}>\n          {item.title}\n        </option>\n      ))}\n    </Select>\n  )\n  return (\n    <ChangeIndicator path={path} isChanged={changed} hasFocus={!!focused}>\n      {content}\n    </ChangeIndicator>\n  )\n}\n\nconst RadioSelect = forwardRef(function RadioSelect(\n  props: {\n    items: TitledListValue<string | number>[]\n    value?: TitledListValue<string | number>\n    direction: 'horizontal' | 'vertical'\n    readOnly?: boolean\n    onChange: (value: TitledListValue<string | number> | null) => void\n    onFocus: (event: React.FocusEvent<HTMLElement>) => void\n    customValidity?: string\n    inputId?: string\n  },\n\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const {items, value, onChange, onFocus, readOnly, customValidity, direction, inputId} = props\n\n  const Layout = direction === 'horizontal' ? Inline : Stack\n  return (\n    <Card border padding={3} radius={1}>\n      <Layout space={3} role=\"group\">\n        {items.map((item, index) => (\n          <RadioSelectItem\n            customValidity={customValidity}\n            inputId={inputId}\n            item={item}\n            key={index}\n            onChange={onChange}\n            onFocus={onFocus}\n            readOnly={readOnly}\n            ref={index === 0 ? ref : null}\n            value={value}\n          />\n        ))}\n      </Layout>\n    </Card>\n  )\n})\n\nconst RadioSelectItem = forwardRef(function RadioSelectItem(\n  props: {\n    customValidity?: string\n    inputId?: string\n    item: TitledListValue<string | number>\n    onChange: (value: TitledListValue<string | number> | null) => void\n    onFocus: (event: React.FocusEvent<HTMLElement>) => void\n    readOnly?: boolean\n    value?: TitledListValue<string | number>\n  },\n\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const {customValidity, inputId, item, onChange, onFocus, readOnly, value} = props\n\n  const handleChange = useCallback(() => {\n    onChange(item)\n  }, [item, onChange])\n\n  return (\n    <Flex as=\"label\" align=\"center\">\n      <Radio\n        ref={ref}\n        checked={value === item}\n        onChange={handleChange}\n        onFocus={onFocus}\n        readOnly={readOnly}\n        customValidity={customValidity}\n        name={inputId}\n      />\n\n      <Box marginLeft={2}>\n        <Text size={1} weight=\"semibold\">\n          {item.title}\n        </Text>\n      </Box>\n    </Flex>\n  )\n})\n","import React from 'react'\nimport {TextInput} from '@sanity/ui'\nimport {StringInputProps} from '../types'\n\nexport function StringInput(props: StringInputProps) {\n  const {validationError, elementProps} = props\n  return <TextInput {...elementProps} customValidity={validationError} />\n}\n","import {StringSchemaType} from '@sanity/types'\nimport {SelectInput} from '../../inputs/SelectInput'\nimport {StringInput} from '../../inputs/StringInput'\nimport {getOption} from './helpers'\n\nexport function resolveStringInput(type: StringSchemaType) {\n  return getOption(type, 'list') ? SelectInput : StringInput\n}\n","import type {SchemaType, RuleSpec, SchemaValidationValue, Rule} from '@sanity/types'\n\nconst normalizeRules = (\n  validation: SchemaValidationValue | undefined,\n  type?: SchemaType\n): Rule[] => {\n  if (typeof validation === 'function') {\n    throw new Error(\n      `Schema type \"${\n        type?.name || '<not-found>'\n      }\"'s \\`validation\\` was not run though \\`inferFromSchema\\``\n    )\n  }\n  if (!validation) return []\n  if (Array.isArray(validation)) return validation as Rule[]\n  return [validation]\n}\n\n/**\n * Finds the first matching validation rule spec from a Rule class instance.\n *\n * @internal\n * Note: This accesses private fields of the rule.\n */\nexport function getValidationRule<RuleFlag extends RuleSpec['flag']>(\n  type: SchemaType | undefined,\n  ruleName: RuleFlag\n): Extract<RuleSpec, {flag: RuleFlag}> | null {\n  for (const rule of normalizeRules(type?.validation, type)) {\n    for (const ruleSpec of rule._rules) {\n      if (ruleSpec.flag === ruleName) {\n        return ruleSpec as Extract<RuleSpec, {flag: RuleFlag}>\n      }\n    }\n  }\n\n  return null\n}\n","import React from 'react'\n\nimport {TextInput} from '@sanity/ui'\nimport {getValidationRule} from '../utils/getValidationRule'\nimport {NumberInputProps} from '../types'\n\nexport function NumberInput(props: NumberInputProps) {\n  const {schemaType, validationError, value, elementProps} = props\n\n  // Show numpad on mobile if only positive numbers is preferred\n  const minRule = getValidationRule(schemaType, 'min')\n  const onlyPositiveNumber = (minRule?.constraint || 0) >= 0\n\n  return (\n    <TextInput\n      {...elementProps}\n      type=\"number\"\n      step=\"any\"\n      inputMode={onlyPositiveNumber ? 'numeric' : 'text'}\n      customValidity={validationError}\n      value={value}\n      placeholder={schemaType.placeholder}\n      pattern={onlyPositiveNumber ? '[d]*' : undefined}\n    />\n  )\n}\n","import {NumberSchemaType} from '@sanity/types'\nimport {SelectInput} from '../../inputs/SelectInput'\nimport {NumberInput} from '../../inputs/NumberInput'\nimport {getOption} from './helpers'\n\nexport function resolveNumberInput(type: NumberSchemaType) {\n  return getOption(type, 'list') ? SelectInput : NumberInput\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {Box, Card, Checkbox, Flex, Switch} from '@sanity/ui'\nimport {BooleanInputProps} from '../types'\nimport {FormFieldHeaderText} from '../components/formField/FormFieldHeaderText'\nimport {FormFieldStatus} from '../components/formField/FormFieldStatus'\n\nconst CenterAlignedBox = styled(Box)`\n  align-self: center;\n`\n\nconst ZeroLineHeightBox = styled(Box)`\n  line-height: 0;\n`\n\nexport function BooleanInput(props: BooleanInputProps) {\n  const {id, value, schemaType, readOnly, elementProps} = props\n  const layout = schemaType.options?.layout || 'switch'\n\n  const indeterminate = typeof value !== 'boolean'\n  const checked = value || false\n\n  const LayoutSpecificInput = layout === 'checkbox' ? Checkbox : Switch\n\n  return (\n    <Card border radius={1}>\n      <Flex>\n        <ZeroLineHeightBox padding={3}>\n          <LayoutSpecificInput\n            label={schemaType.title}\n            {...elementProps}\n            indeterminate={indeterminate}\n            checked={checked}\n            style={{margin: -4}}\n            disabled={readOnly}\n          />\n        </ZeroLineHeightBox>\n        <Box flex={1} paddingY={3}>\n          <FormFieldHeaderText\n            description={schemaType.description}\n            inputId={id}\n            // validation={validation}\n            title={schemaType.title}\n          />\n        </Box>\n        <CenterAlignedBox paddingX={3} paddingY={1}>\n          <FormFieldStatus maxAvatars={1} position=\"top\">\n            {/*<FieldPresence maxAvatars={1} presence={presence} />*/}\n          </FormFieldStatus>\n        </CenterAlignedBox>\n      </Flex>\n    </Card>\n  )\n}\n","import React from 'react'\nimport {TextInput} from '@sanity/ui'\nimport {StringInputProps} from '../types'\n\nexport type EmailInputProps = StringInputProps\n\nexport function EmailInput(props: EmailInputProps) {\n  const {validationError, elementProps} = props\n  return (\n    <TextInput {...elementProps} type=\"email\" inputMode=\"email\" customValidity={validationError} />\n  )\n}\n","import React, {useCallback} from 'react'\nimport {Box, Button, Card, Code, Stack, Text} from '@sanity/ui'\nimport {TrashIcon} from '@sanity/icons'\nimport {isDev} from '../../../environment'\nimport {FormPatch, PatchArg, PatchEvent, unset} from '../../patch'\nimport {Details} from '../../components/Details'\nimport {Alert} from '../../components/Alert'\n\ntype Props = {\n  fieldNames: string[]\n  value?: Record<string, unknown>\n  onChange(patch: FormPatch): void\n  onChange(patch: FormPatch[]): void\n  onChange(patch: PatchEvent): void\n  readOnly?: boolean\n}\n\nexport function UnknownFields(props: Props) {\n  const {fieldNames, onChange, readOnly, value} = props\n  const fieldsLen = fieldNames.length\n\n  const handleUnsetClick = useCallback(\n    (fieldName) => {\n      onChange(unset([fieldName]))\n    },\n    [onChange]\n  )\n\n  return (\n    <Alert\n      status=\"warning\"\n      title={\n        <>\n          {fieldsLen === 1 && <>Unknown field found</>}\n          {fieldsLen > 1 && <>Unknown fields found</>}\n        </>\n      }\n    >\n      <Text as=\"p\" muted size={1}>\n        {fieldsLen === 1 ? (\n          <>Encountered a field that is not defined in the schema.</>\n        ) : (\n          <>Encountered {fieldsLen} fields that are not defined in the schema.</>\n        )}\n      </Text>\n\n      <Details marginTop={4} open={isDev} title={<>Developer info</>}>\n        <Box marginBottom={3}>\n          <Text as=\"p\" muted size={1}>\n            {fieldsLen === 1 ? (\n              <>\n                This field is not defined in the schema, which could mean that the field definition\n                has been removed or that someone else has added it to their own local project and\n                have not deployed their changes yet.\n              </>\n            ) : (\n              <>\n                These fields are not defined in the document’s schema, which could mean that the\n                field definitions have been removed or that someone else has added them to their own\n                local project and have not deployed their changes yet.\n              </>\n            )}\n          </Text>\n        </Box>\n\n        <Stack as=\"ul\" space={3}>\n          {fieldNames.map((fieldName) => {\n            return (\n              <UnknownField\n                key={fieldName}\n                fieldName={fieldName}\n                onUnsetClick={handleUnsetClick}\n                readOnly={readOnly}\n                value={value?.[fieldName]}\n              />\n            )\n          })}\n        </Stack>\n      </Details>\n    </Alert>\n  )\n}\n\nfunction UnknownField({\n  fieldName,\n  onUnsetClick,\n  readOnly,\n  value,\n}: {\n  fieldName: string\n  onUnsetClick: (fieldName: string) => void\n  readOnly?: boolean\n  value: unknown\n}) {\n  const handleUnsetClick = useCallback(() => {\n    onUnsetClick(fieldName)\n  }, [fieldName, onUnsetClick])\n\n  return (\n    <Card as=\"li\" padding={3} radius={2} shadow={1} tone=\"caution\">\n      <Stack space={2}>\n        <Card border radius={1}>\n          <Card borderBottom padding={3}>\n            <Code weight=\"medium\">{fieldName}</Code>\n          </Card>\n          <Box overflow=\"auto\" padding={3}>\n            <Code language=\"json\">{JSON.stringify(value, null, 2)}</Code>\n          </Box>\n        </Card>\n\n        {readOnly && (\n          <Text as=\"p\" muted size={1}>\n            This field is <strong>read only</strong> according to the document’s schema and cannot\n            be unset. If you want to be able to unset this in Studio, make sure you remove the{' '}\n            <code>readOnly</code> field from the enclosing type in the schema.\n          </Text>\n        )}\n\n        {!readOnly && (\n          <Button\n            icon={TrashIcon}\n            onClick={handleUnsetClick}\n            tone=\"critical\"\n            text={<>Remove field</>}\n          />\n        )}\n      </Stack>\n    </Card>\n  )\n}\n","import {Card} from '@sanity/ui'\nimport styled from 'styled-components'\n\n// The negative margins here removes the extra space between the tabs and the fields when inside of a grid\nexport const FieldGroupTabsWrapper = styled(Card)<{$level?: number}>`\n  margin-bottom: ${({$level, theme}) => ($level === 0 ? 0 : theme.sanity.space[5] * -1)}px;\n  padding-bottom: ${({$level, theme}) =>\n    $level === 0 ? theme.sanity.space[4] : theme.sanity.space[4]}px;\n`\n","import React, {forwardRef} from 'react'\nimport {Tab} from '@sanity/ui'\n\ninterface GroupType {\n  'aria-controls': string\n  autoFocus?: boolean\n  disabled?: boolean\n  icon?: React.ComponentType\n  name: string\n  onClick?: (value: string) => void\n  selected: boolean\n  title: string\n}\n\nexport const GroupTab = forwardRef(function GroupTab(\n  props: GroupType,\n  ref: React.Ref<HTMLButtonElement>\n) {\n  // Separate props for resolving conditional hidden groups\n  const {onClick} = props\n\n  // Here goes the content of our component\n  const handleClick = React.useCallback(() => {\n    onClick?.(props.name)\n  }, [props.name, onClick])\n\n  return (\n    <Tab\n      data-testid={`group-tab-${name}`}\n      size={1}\n      id={`${props.name}-tab`}\n      label={props.title}\n      ref={ref}\n      {...props}\n      onClick={handleClick}\n    />\n  )\n})\n\nexport const GroupOption = (props: Omit<GroupType, 'onClick' | 'autoFocus'>) => {\n  const {name, title, ...rest} = props\n  const {selected} = props\n\n  return (\n    <option\n      title={title}\n      value={name}\n      id={`${name}-tab`}\n      aria-controls={rest['aria-controls']}\n      data-testid={`group-select-${name}`}\n      aria-selected={selected ? 'true' : 'false'}\n    >\n      {title || name}\n    </option>\n  )\n}\n","import React, {useCallback} from 'react'\nimport {ElementQuery, Select, TabList} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {FormFieldGroup} from '../../../types'\nimport {GroupOption, GroupTab} from './GroupTab'\n\ninterface FieldGroupTabsProps {\n  inputId?: string\n  groups: FormFieldGroup[]\n  shouldAutoFocus?: boolean\n  onClick?: (name: string) => void\n  disabled?: boolean\n}\n\nconst Root = styled(ElementQuery)`\n  /* Hide on small screens */\n  &[data-eq-max~='0'] [data-ui='TabList'] {\n    display: none;\n  }\n\n  /* Hide on medium to large screens */\n  [data-ui='Select'] {\n    display: none;\n  }\n\n  /* Show on small screens */\n  &[data-eq-max~='0'] [data-ui='Select'] {\n    display: block;\n  }\n`\n\n/* For medium to large screens, use TabList and Tab from Sanity UI  */\nconst GroupTabs = ({\n  inputId,\n  groups,\n  onClick,\n  shouldAutoFocus = true,\n  disabled,\n}: FieldGroupTabsProps) => (\n  <TabList space={2} data-testid=\"field-group-tabs\">\n    {groups\n      .map((group) => {\n        return (\n          <GroupTab\n            aria-controls={`${inputId}-field-group-fields`}\n            autoFocus={shouldAutoFocus && group.selected}\n            disabled={disabled}\n            icon={group?.icon}\n            key={`${inputId}-${group.name}-tab`}\n            name={group.name}\n            onClick={onClick}\n            selected={Boolean(group.selected)}\n            title={group.title || group.name}\n          />\n        )\n      })\n      .filter(Boolean)}\n  </TabList>\n)\n\n/* For small screens, use Select from Sanity UI  */\nconst GroupSelect = ({\n  groups,\n  inputId,\n  onSelect,\n  shouldAutoFocus = true,\n  disabled,\n}: Omit<FieldGroupTabsProps, 'onClick'> & {onSelect: (name: string) => void}) => {\n  const handleSelect = useCallback(\n    (event: React.ChangeEvent<HTMLSelectElement>) => {\n      onSelect(event.currentTarget.value)\n    },\n    [onSelect]\n  )\n\n  return (\n    <Select\n      fontSize={2}\n      onChange={handleSelect}\n      muted\n      data-testid=\"field-group-select\"\n      aria-label=\"Field groups\"\n      autoFocus={shouldAutoFocus}\n      disabled={disabled}\n      value={groups.find((g) => g.selected)?.name}\n    >\n      {groups.map((group) => {\n        // Separate hidden in order to resolve it to a boolean type\n        return (\n          <GroupOption\n            key={`${inputId}-${group.name}-tab`}\n            aria-controls={`${inputId}-field-group-fields`}\n            selected={Boolean(group.selected)}\n            disabled={group.disabled}\n            name={group.name}\n            title={group.title || group.name}\n          />\n        )\n      })}\n    </Select>\n  )\n}\n\nexport const FieldGroupTabs = React.memo(function FieldGroupTabs({\n  onClick,\n  disabled = false,\n  ...props\n}: FieldGroupTabsProps) {\n  const handleClick = useCallback(\n    (groupName) => {\n      onClick?.(groupName)\n    },\n    [onClick]\n  )\n\n  return (\n    <Root data-testid=\"field-group-root\">\n      <GroupTabs {...props} disabled={disabled} onClick={handleClick} />\n      <GroupSelect {...props} disabled={disabled} onSelect={handleClick} />\n    </Root>\n  )\n})\n","import React, {memo, useCallback, useMemo} from 'react'\nimport {Grid, Stack} from '@sanity/ui'\nimport {ObjectInputProps} from '../../types'\nimport {ObjectMembers} from '../../members'\nimport {UnknownFields} from './UnknownFields'\nimport {FieldGroupTabsWrapper} from './ObjectInput.styled'\nimport {FieldGroupTabs} from './fieldGroups/FieldGroupTabs'\n\nexport const ObjectInput = memo(function ObjectInput(props: ObjectInputProps) {\n  const {\n    schemaType,\n    groups,\n    members,\n    onChange,\n    renderInput,\n    renderField,\n    renderItem,\n    renderPreview,\n    level,\n    value,\n    id,\n    path,\n    onFieldGroupSelect,\n  } = props\n\n  const {columns} = schemaType.options || {}\n\n  const renderedUnknownFields = useMemo(() => {\n    if (!schemaType.fields) {\n      return null\n    }\n\n    const knownFieldNames = schemaType.fields.map((field) => field.name)\n    const unknownFields = Object.keys(value || {}).filter(\n      (key) => !key.startsWith('_') && !knownFieldNames.includes(key)\n    )\n\n    if (unknownFields.length === 0) {\n      return null\n    }\n\n    return <UnknownFields fieldNames={unknownFields} value={value} onChange={onChange} />\n  }, [onChange, schemaType.fields, value])\n\n  const renderObjectMembers = useCallback(\n    () => (\n      <ObjectMembers\n        members={members}\n        renderInput={renderInput}\n        renderField={renderField}\n        renderItem={renderItem}\n        renderPreview={renderPreview}\n      />\n    ),\n    [members, renderField, renderInput, renderItem, renderPreview]\n  )\n\n  if (members.length === 0) {\n    return null\n  }\n  return (\n    <Stack space={5}>\n      {groups.length > 0 ? (\n        <FieldGroupTabsWrapper $level={level} data-testid=\"field-groups\">\n          <FieldGroupTabs\n            inputId={id}\n            onClick={onFieldGroupSelect}\n            groups={groups}\n            shouldAutoFocus={path.length === 0}\n          />\n        </FieldGroupTabsWrapper>\n      ) : null}\n\n      {columns ? (\n        <Grid columns={columns} gap={4} marginTop={1}>\n          {renderObjectMembers()}\n        </Grid>\n      ) : (\n        renderObjectMembers()\n      )}\n\n      {renderedUnknownFields}\n    </Stack>\n  )\n})\n","import {Card, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\n\ninterface CalendarDayProps {\n  date: Date\n  focused?: boolean\n  onSelect: (date: Date) => void\n  isCurrentMonth?: boolean\n  isToday: boolean\n  selected?: boolean\n}\n\nexport function CalendarDay(props: CalendarDayProps) {\n  const {date, focused, isCurrentMonth, isToday, onSelect, selected} = props\n\n  const handleClick = useCallback(() => {\n    onSelect(date)\n  }, [date, onSelect])\n\n  return (\n    <div aria-selected={selected} data-ui=\"CalendarDay\">\n      <Card\n        aria-label={date.toDateString()}\n        aria-pressed={selected}\n        as=\"button\"\n        __unstable_focusRing\n        data-weekday\n        data-focused={focused ? 'true' : ''}\n        role=\"button\"\n        tabIndex={-1}\n        onClick={handleClick}\n        padding={3}\n        radius={2}\n        selected={selected}\n        tone={isToday || selected ? 'primary' : 'default'}\n      >\n        <Text\n          muted={!selected && !isCurrentMonth}\n          style={{textAlign: 'center'}}\n          weight={isCurrentMonth ? 'medium' : 'regular'}\n        >\n          {date.getDate()}\n        </Text>\n      </Card>\n    </div>\n  )\n}\n","import {range} from 'lodash'\n\nexport const MONTH_NAMES = [\n  'January',\n  'February',\n  'March',\n  'April',\n  'May',\n  'June',\n  'July',\n  'August',\n  'September',\n  'October',\n  'November',\n  'December',\n]\n\nexport const WEEK_DAY_NAMES = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n\nexport const HOURS_24 = range(0, 24)\n\nexport const ARROW_KEYS = ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight']\n\nexport const DEFAULT_TIME_PRESETS = [\n  [0, 0],\n  [6, 0],\n  [12, 0],\n  [18, 0],\n  [23, 59],\n]\n\n// all weekdays except first\nexport const TAIL_WEEKDAYS = [1, 2, 3, 4, 5, 6]\n","import {addDays, eachWeekOfInterval, getWeek, lastDayOfMonth, startOfMonth} from 'date-fns'\nimport {TAIL_WEEKDAYS} from './constants'\n\nexport const getWeekStartsOfMonth = (date: Date): Date[] => {\n  const firstDay = startOfMonth(date)\n  return eachWeekOfInterval({\n    start: firstDay,\n    end: lastDayOfMonth(firstDay),\n  })\n}\n\nexport const getWeekDaysFromWeekStarts = (weekStarts: Date[]): Date[][] => {\n  return weekStarts.map((weekStart) => [\n    weekStart,\n    ...TAIL_WEEKDAYS.map((d) => addDays(weekStart, d)),\n  ])\n}\n\ntype Week = {\n  number: number\n  days: Date[]\n}\n\nexport const getWeeksOfMonth = (date: Date): Week[] =>\n  getWeekDaysFromWeekStarts(getWeekStartsOfMonth(date)).map(\n    (days): Week => ({\n      number: getWeek(days[0]),\n      days,\n    })\n  )\n\nexport const formatTime = (hours: number, minutes: number): string =>\n  `${`${hours}`.padStart(2, '0')}:${`${minutes}`.padStart(2, '0')}`\n","import {Box, Grid, Text} from '@sanity/ui'\nimport {isSameDay, isSameMonth} from 'date-fns'\nimport React from 'react'\nimport {CalendarDay} from './CalendarDay'\nimport {WEEK_DAY_NAMES} from './constants'\nimport {getWeeksOfMonth} from './utils'\n\ninterface CalendarMonthProps {\n  date: Date\n  focused?: Date\n  selected?: Date\n  onSelect: (date: Date) => void\n  hidden?: boolean\n}\n\nexport function CalendarMonth(props: CalendarMonthProps) {\n  return (\n    <Box aria-hidden={props.hidden || false} data-ui=\"CalendarMonth\">\n      <Grid gap={1} style={{gridTemplateColumns: 'repeat(7, minmax(44px, 46px))'}}>\n        {WEEK_DAY_NAMES.map((weekday) => (\n          <Box key={weekday} paddingY={2}>\n            <Text size={1} weight=\"medium\" style={{textAlign: 'center'}}>\n              {weekday}\n            </Text>\n          </Box>\n        ))}\n\n        {getWeeksOfMonth(props.date).map((week, weekIdx) =>\n          week.days.map((date, dayIdx) => {\n            const focused = props.focused && isSameDay(date, props.focused)\n            const selected = props.selected && isSameDay(date, props.selected)\n            const isToday = isSameDay(date, new Date())\n            const isCurrentMonth = props.focused && isSameMonth(date, props.focused)\n\n            return (\n              <CalendarDay\n                date={date}\n                focused={focused}\n                isCurrentMonth={isCurrentMonth}\n                isToday={isToday}\n                // eslint-disable-next-line react/no-array-index-key\n                key={`${weekIdx}-${dayIdx}`}\n                onSelect={props.onSelect}\n                selected={selected}\n              />\n            )\n          })\n        )}\n      </Grid>\n    </Box>\n  )\n}\n","export const features = {\n  dayPresets: false,\n  timePresets: false,\n}\n","import React from 'react'\nimport {TextInput} from '@sanity/ui'\n\ntype TextInputProps = React.ComponentProps<typeof TextInput>\n\n// todo: delete this when v0.34 of @sanity/ui is out\ntype Workaround = any\n\ntype Props = Workaround &\n  Omit<TextInputProps, 'onChange'> & {\n    onChange?: (\n      event: React.FocusEvent<HTMLInputElement> | React.ChangeEvent<HTMLInputElement>\n    ) => void\n  }\n\n/**\n * A TextInput that only emit onChange when it has to\n * By default it will only emit onChange when: 1) user hits enter or 2) user leaves the\n * field (e.g. onBlur) and the input value at this time is different from the given `value` prop\n */\nexport const LazyTextInput = React.forwardRef(function LazyTextInput(\n  {onChange, onBlur, onKeyPress, value, ...rest}: Props,\n  forwardedRef: React.ForwardedRef<HTMLInputElement>\n) {\n  const [inputValue, setInputValue] = React.useState<string>()\n\n  const handleChange = React.useCallback((event) => {\n    setInputValue(event.currentTarget.value)\n  }, [])\n\n  const checkEvent = React.useCallback(\n    (event) => {\n      const currentValue = event.currentTarget.value\n      if (currentValue !== `${value}`) {\n        if (onChange) {\n          onChange(event)\n        }\n      }\n      setInputValue(undefined)\n    },\n    [onChange, value]\n  )\n\n  const handleBlur = React.useCallback(\n    (e) => {\n      checkEvent(e)\n      if (onBlur) {\n        onBlur(e)\n      }\n    },\n    [checkEvent, onBlur]\n  )\n\n  const handleKeyPress = React.useCallback(\n    (e: React.KeyboardEvent<HTMLInputElement>) => {\n      if (e.key === 'Enter') {\n        checkEvent(e)\n      }\n      if (onKeyPress) {\n        onKeyPress(e)\n      }\n    },\n    [checkEvent, onKeyPress]\n  )\n\n  return (\n    <TextInput\n      {...rest}\n      data-testid=\"date-input\"\n      ref={forwardedRef}\n      value={inputValue === undefined ? value : inputValue}\n      onChange={handleChange}\n      onBlur={handleBlur}\n      onKeyPress={handleKeyPress}\n    />\n  )\n})\n","import React from 'react'\nimport {TextInput} from '@sanity/ui'\nimport {LazyTextInput} from '../LazyTextInput'\n\ntype Props = Omit<React.ComponentProps<typeof TextInput>, 'onChange' | 'value'> & {\n  value?: number\n  onChange: (year: number) => void\n}\n\nexport const YearInput = ({onChange, ...props}: Props) => {\n  const handleChange = React.useCallback(\n    (event: React.FocusEvent<HTMLInputElement> | React.ChangeEvent<HTMLInputElement>) => {\n      const numericValue = parseInt(event.currentTarget.value, 10)\n      if (!isNaN(numericValue)) {\n        onChange(numericValue)\n      }\n    },\n    [onChange]\n  )\n\n  return <LazyTextInput {...props} onChange={handleChange} inputMode=\"numeric\" />\n}\n","import {Box, Button, Flex, Grid, Select, Text, useForwardedRef} from '@sanity/ui'\nimport {ChevronLeftIcon, ChevronRightIcon} from '@sanity/icons'\nimport {addDays, addMonths, setDate, setHours, setMinutes, setMonth, setYear} from 'date-fns'\nimport {range} from 'lodash'\nimport React, {forwardRef, useCallback, useEffect} from 'react'\nimport {CalendarMonth} from './CalendarMonth'\nimport {ARROW_KEYS, HOURS_24, MONTH_NAMES, DEFAULT_TIME_PRESETS} from './constants'\nimport {features} from './features'\nimport {formatTime} from './utils'\nimport {YearInput} from './YearInput'\n\ntype CalendarProps = Omit<React.ComponentProps<'div'>, 'onSelect'> & {\n  selectTime?: boolean\n  selectedDate?: Date\n  timeStep?: number\n  onSelect: (date: Date) => void\n  focusedDate: Date\n  onFocusedDateChange: (index: Date) => void\n}\n\n// This is used to maintain focus on a child element of the calendar-grid between re-renders\n// When using arrow keys to move focus from a day in one month to another we are setting focus at the button for the day\n// after it has changed but *only* if we *already* had focus inside the calendar grid (e.g not if focus was on the \"next\n// year\" button, or any of the other controls)\n// When moving from the last day of a month that displays 6 weeks in the grid to a month that displays 5 weeks, current\n// focus gets lost on render, so this provides us with a stable element to help us preserve focus on a child element of\n// the calendar grid between re-renders\nconst PRESERVE_FOCUS_ELEMENT = (\n  <span\n    data-preserve-focus\n    style={{overflow: 'hidden', position: 'absolute', outline: 'none'}}\n    tabIndex={-1}\n  />\n)\n\nexport const Calendar = forwardRef(function Calendar(\n  props: CalendarProps,\n  forwardedRef: React.ForwardedRef<HTMLDivElement>\n) {\n  const {\n    selectTime,\n    onFocusedDateChange,\n    selectedDate = new Date(),\n    focusedDate = selectedDate,\n    timeStep = 1,\n    onSelect,\n    ...restProps\n  } = props\n\n  const setFocusedDate = useCallback(\n    (date: Date) => onFocusedDateChange(date),\n    [onFocusedDateChange]\n  )\n\n  const setFocusedDateMonth = useCallback(\n    (month: number) => setFocusedDate(setDate(setMonth(focusedDate, month), 1)),\n    [focusedDate, setFocusedDate]\n  )\n\n  const handleFocusedMonthChange = useCallback(\n    (e: React.FormEvent<HTMLSelectElement>) => setFocusedDateMonth(Number(e.currentTarget.value)),\n    [setFocusedDateMonth]\n  )\n\n  const moveFocusedDate = useCallback(\n    (by: number) => setFocusedDate(addMonths(focusedDate, by)),\n    [focusedDate, setFocusedDate]\n  )\n\n  const setFocusedDateYear = useCallback(\n    (year: number) => setFocusedDate(setYear(focusedDate, year)),\n    [focusedDate, setFocusedDate]\n  )\n\n  const handleDateChange = useCallback(\n    (date: Date) => {\n      onSelect(setMinutes(setHours(date, selectedDate.getHours()), selectedDate.getMinutes()))\n    },\n    [onSelect, selectedDate]\n  )\n\n  const handleMinutesChange = useCallback(\n    (event: React.FormEvent<HTMLSelectElement>) => {\n      const m = Number(event.currentTarget.value)\n      onSelect(setMinutes(selectedDate, m))\n    },\n    [onSelect, selectedDate]\n  )\n\n  const handleHoursChange = useCallback(\n    (event: React.FormEvent<HTMLSelectElement>) => {\n      const m = Number(event.currentTarget.value)\n      onSelect(setHours(selectedDate, m))\n    },\n    [onSelect, selectedDate]\n  )\n\n  const handleTimeChange = useCallback(\n    (hours: number, mins: number) => {\n      onSelect(setHours(setMinutes(selectedDate, mins), hours))\n    },\n    [onSelect, selectedDate]\n  )\n\n  const ref = useForwardedRef(forwardedRef)\n\n  const focusCurrentWeekDay = useCallback(() => {\n    ref.current?.querySelector<HTMLElement>(`[data-focused=\"true\"]`)?.focus()\n  }, [ref])\n\n  const handleKeyDown = useCallback(\n    (event) => {\n      if (!ARROW_KEYS.includes(event.key)) {\n        return\n      }\n      event.preventDefault()\n      if (event.target.hasAttribute('data-calendar-grid')) {\n        focusCurrentWeekDay()\n        return\n      }\n      if (event.key === 'ArrowUp') {\n        onFocusedDateChange(addDays(focusedDate, -7))\n      }\n      if (event.key === 'ArrowDown') {\n        onFocusedDateChange(addDays(focusedDate, 7))\n      }\n      if (event.key === 'ArrowLeft') {\n        onFocusedDateChange(addDays(focusedDate, -1))\n      }\n      if (event.key === 'ArrowRight') {\n        onFocusedDateChange(addDays(focusedDate, 1))\n      }\n      // set focus temporarily on this element to make sure focus is still inside the calendar-grid after re-render\n      ref.current?.querySelector<HTMLElement>('[data-preserve-focus]')?.focus()\n    },\n    [ref, focusCurrentWeekDay, onFocusedDateChange, focusedDate]\n  )\n\n  useEffect(() => {\n    focusCurrentWeekDay()\n  }, [focusCurrentWeekDay])\n\n  useEffect(() => {\n    const currentFocusInCalendarGrid = document.activeElement?.matches(\n      '[data-calendar-grid], [data-calendar-grid] [data-preserve-focus]'\n    )\n    if (\n      // Only move focus if it's currently in the calendar grid\n      currentFocusInCalendarGrid\n    ) {\n      focusCurrentWeekDay()\n    }\n  }, [ref, focusCurrentWeekDay, focusedDate])\n\n  const handleYesterdayClick = useCallback(\n    () => handleDateChange(addDays(new Date(), -1)),\n    [handleDateChange]\n  )\n\n  const handleTodayClick = useCallback(() => handleDateChange(new Date()), [handleDateChange])\n\n  const handleTomorrowClick = useCallback(\n    () => handleDateChange(addDays(new Date(), 1)),\n    [handleDateChange]\n  )\n\n  const handleNowClick = useCallback(() => onSelect(new Date()), [onSelect])\n\n  return (\n    <Box data-ui=\"Calendar\" {...restProps} ref={ref}>\n      {/* Select date */}\n      <Box padding={2}>\n        {/* Day presets */}\n        {features.dayPresets && (\n          <Grid columns={3} data-ui=\"CalendaryDayPresets\" gap={1}>\n            <Button text=\"Yesterday\" mode=\"bleed\" fontSize={1} onClick={handleYesterdayClick} />\n            <Button text=\"Today\" mode=\"bleed\" fontSize={1} onClick={handleTodayClick} />\n            <Button text=\"Tomorrow\" mode=\"bleed\" fontSize={1} onClick={handleTomorrowClick} />\n          </Grid>\n        )}\n\n        {/* Select month and year */}\n        <Flex>\n          <Box flex={1}>\n            <CalendarMonthSelect\n              moveFocusedDate={moveFocusedDate}\n              onChange={handleFocusedMonthChange}\n              value={focusedDate?.getMonth()}\n            />\n          </Box>\n          <Box marginLeft={2}>\n            <CalendarYearSelect\n              moveFocusedDate={moveFocusedDate}\n              onChange={setFocusedDateYear}\n              value={focusedDate.getFullYear()}\n            />\n          </Box>\n        </Flex>\n\n        {/* Selected month (grid of days) */}\n        <Box\n          data-calendar-grid\n          onKeyDown={handleKeyDown}\n          marginTop={2}\n          overflow=\"hidden\"\n          tabIndex={0}\n        >\n          <CalendarMonth\n            date={focusedDate}\n            focused={focusedDate}\n            onSelect={handleDateChange}\n            selected={selectedDate}\n          />\n          {PRESERVE_FOCUS_ELEMENT}\n        </Box>\n      </Box>\n\n      {/* Select time */}\n      {selectTime && (\n        <Box padding={2} style={{borderTop: '1px solid var(--card-border-color)'}}>\n          <Flex align=\"center\">\n            <Flex align=\"center\" flex={1}>\n              <Box>\n                <Select\n                  aria-label=\"Select hour\"\n                  value={selectedDate?.getHours()}\n                  onChange={handleHoursChange}\n                >\n                  {HOURS_24.map((h) => (\n                    <option key={h} value={h}>\n                      {`${h}`.padStart(2, '0')}\n                    </option>\n                  ))}\n                </Select>\n              </Box>\n\n              <Box paddingX={1}>\n                <Text>:</Text>\n              </Box>\n\n              <Box>\n                <Select\n                  aria-label=\"Select minutes\"\n                  value={selectedDate?.getMinutes()}\n                  onChange={handleMinutesChange}\n                >\n                  {range(0, 60, timeStep).map((m) => (\n                    <option key={m} value={m}>\n                      {`${m}`.padStart(2, '0')}\n                    </option>\n                  ))}\n                </Select>\n              </Box>\n            </Flex>\n\n            <Box marginLeft={2}>\n              <Button text=\"Set to current time\" mode=\"bleed\" onClick={handleNowClick} />\n            </Box>\n          </Flex>\n\n          {features.timePresets && (\n            <Flex direction=\"row\" justify=\"center\" align=\"center\" style={{marginTop: 5}}>\n              {DEFAULT_TIME_PRESETS.map(([hours, minutes]) => {\n                return (\n                  <CalendarTimePresetButton\n                    key={`${hours}-${minutes}`}\n                    hours={hours}\n                    minutes={minutes}\n                    onTimeChange={handleTimeChange}\n                    selectedDate={selectedDate}\n                  />\n                )\n              })}\n            </Flex>\n          )}\n        </Box>\n      )}\n    </Box>\n  )\n})\n\nfunction CalendarTimePresetButton(props: {\n  hours: number\n  minutes: number\n  onTimeChange: (hours: number, minutes: number) => void\n  selectedDate: Date\n}) {\n  const {hours, minutes, onTimeChange, selectedDate} = props\n  const formatted = formatTime(hours, minutes)\n\n  const handleClick = useCallback(() => {\n    onTimeChange(hours, minutes)\n  }, [hours, minutes, onTimeChange])\n\n  return (\n    <Button\n      text={formatted}\n      aria-label={`${formatted} on ${selectedDate.toDateString()}`}\n      mode=\"bleed\"\n      fontSize={1}\n      onClick={handleClick}\n    />\n  )\n}\n\nfunction CalendarMonthSelect(props: {\n  moveFocusedDate: (by: number) => void\n  onChange: (e: React.FormEvent<HTMLSelectElement>) => void\n  value?: number\n}) {\n  const {moveFocusedDate, onChange, value} = props\n\n  const handlePrevMonthClick = useCallback(() => moveFocusedDate(-1), [moveFocusedDate])\n\n  const handleNextMonthClick = useCallback(() => moveFocusedDate(1), [moveFocusedDate])\n\n  return (\n    <Flex flex={1}>\n      <Button\n        aria-label=\"Go to previous month\"\n        onClick={handlePrevMonthClick}\n        mode=\"bleed\"\n        icon={ChevronLeftIcon}\n        paddingX={2}\n        radius={0}\n      />\n      <Box flex={1}>\n        <Select radius={0} value={value} onChange={onChange}>\n          {MONTH_NAMES.map((m, i) => (\n            // eslint-disable-next-line react/no-array-index-key\n            <option key={i} value={i}>\n              {m}\n            </option>\n          ))}\n        </Select>\n      </Box>\n      <Button\n        aria-label=\"Go to next month\"\n        mode=\"bleed\"\n        icon={ChevronRightIcon}\n        onClick={handleNextMonthClick}\n        paddingX={2}\n        radius={0}\n      />\n    </Flex>\n  )\n}\n\nfunction CalendarYearSelect(props: {\n  moveFocusedDate: (by: number) => void\n  onChange: (year: number) => void\n  value?: number\n}) {\n  const {moveFocusedDate, onChange, value} = props\n\n  const handlePrevYearClick = useCallback(() => moveFocusedDate(-12), [moveFocusedDate])\n\n  const handleNextYearClick = useCallback(() => moveFocusedDate(12), [moveFocusedDate])\n\n  return (\n    <Flex>\n      <Button\n        aria-label=\"Previous year\"\n        onClick={handlePrevYearClick}\n        mode=\"bleed\"\n        icon={ChevronLeftIcon}\n        paddingX={2}\n        radius={0}\n      />\n      <YearInput value={value} onChange={onChange} radius={0} style={{width: 65}} />\n      <Button\n        aria-label=\"Next year\"\n        onClick={handleNextYearClick}\n        mode=\"bleed\"\n        icon={ChevronRightIcon}\n        paddingX={2}\n        radius={0}\n      />\n    </Flex>\n  )\n}\n","import React from 'react'\nimport {Calendar} from './calendar/Calendar'\n\nexport const DatePicker = React.forwardRef(function DatePicker(\n  props: Omit<React.ComponentProps<'div'>, 'onChange'> & {\n    value?: Date\n    onChange: (nextDate: Date) => void\n    selectTime?: boolean\n    timeStep?: number\n  },\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {value = new Date(), onChange, ...rest} = props\n  const [focusedDate, setFocusedDay] = React.useState<Date>()\n\n  const handleSelect = React.useCallback(\n    (nextDate) => {\n      onChange(nextDate)\n      setFocusedDay(undefined)\n    },\n    [onChange]\n  )\n\n  return (\n    <Calendar\n      {...rest}\n      ref={ref}\n      selectedDate={value}\n      onSelect={handleSelect}\n      focusedDate={focusedDate || value}\n      onFocusedDateChange={setFocusedDay}\n    />\n  )\n})\n","import React, {forwardRef, useCallback, useRef, useState} from 'react'\nimport FocusLock from 'react-focus-lock'\nimport {Box, Button, LayerProvider, Popover, useClickOutside, useForwardedRef} from '@sanity/ui'\nimport {CalendarIcon} from '@sanity/icons'\nimport {DatePicker} from './DatePicker'\nimport {LazyTextInput} from './LazyTextInput'\n\nexport interface DateTimeInputProps {\n  customValidity?: string\n  id?: string\n  inputValue?: string\n  onChange: (date: Date | null) => void\n  onInputChange?: (event: React.FocusEvent<HTMLInputElement>) => void\n  placeholder?: string\n  readOnly?: boolean\n  selectTime?: boolean\n  timeStep?: number\n  value?: Date\n}\n\nexport const DateTimeInput = forwardRef(function DateTimeInput(\n  props: DateTimeInputProps,\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const {value, inputValue, onInputChange, onChange, selectTime, timeStep, ...rest} = props\n  const [popoverRef, setPopoverRef] = useState<HTMLElement | null>(null)\n  const forwardedRef = useForwardedRef(ref)\n  const buttonRef = useRef(null)\n\n  const [isPickerOpen, setPickerOpen] = useState(false)\n\n  useClickOutside(() => setPickerOpen(false), [popoverRef])\n\n  const handleDeactivation = useCallback(() => {\n    forwardedRef.current?.focus()\n    forwardedRef.current?.select()\n  }, [forwardedRef])\n\n  const handleKeyUp = useCallback((e) => {\n    if (e.key === 'Escape') {\n      setPickerOpen(false)\n    }\n  }, [])\n\n  const handleClick = useCallback(() => setPickerOpen(true), [])\n\n  const suffix = (\n    <Box padding={1}>\n      <Button\n        ref={buttonRef}\n        icon={CalendarIcon}\n        mode=\"bleed\"\n        padding={2}\n        onClick={handleClick}\n        style={{display: 'block'}}\n        data-testid=\"select-date-button\"\n      />\n    </Box>\n  )\n\n  return (\n    <LazyTextInput\n      ref={forwardedRef}\n      {...rest}\n      value={inputValue}\n      onChange={onInputChange}\n      suffix={\n        isPickerOpen ? (\n          // Note: we're conditionally inserting the popover here due to an\n          // issue with popovers rendering incorrectly on subsequent renders\n          // see https://github.com/sanity-io/design/issues/519\n          <LayerProvider zOffset={1000}>\n            <Popover\n              constrainSize\n              data-testid=\"date-input-dialog\"\n              portal\n              content={\n                <Box overflow=\"auto\">\n                  <FocusLock onDeactivation={handleDeactivation}>\n                    <DatePicker\n                      selectTime={selectTime}\n                      timeStep={timeStep}\n                      onKeyUp={handleKeyUp}\n                      value={value}\n                      onChange={onChange}\n                    />\n                  </FocusLock>\n                </Box>\n              }\n              open\n              placement=\"bottom-end\"\n              ref={setPopoverRef}\n              radius={2}\n            >\n              {suffix}\n            </Popover>\n          </LayerProvider>\n        ) : (\n          suffix\n        )\n      }\n    />\n  )\n})\n","/* eslint-disable no-nested-ternary */\n\nimport React, {useEffect} from 'react'\n\nimport {TextInput, useForwardedRef} from '@sanity/ui'\nimport {DateTimeInput} from './base/DateTimeInput'\nimport {ParseResult} from './types'\n\nexport interface CommonDateTimeInputProps {\n  id: string\n  deserialize: (value: string) => ParseResult\n  formatInputValue: (date: Date) => string\n  onChange: (nextDate: string | null) => void\n  parseInputValue: (inputValue: string) => ParseResult\n  placeholder?: string\n  readOnly: boolean | undefined\n  selectTime?: boolean\n  serialize: (date: Date) => string\n  timeStep?: number\n  value: string | undefined\n}\n\nconst DEFAULT_PLACEHOLDER_TIME = new Date()\n\nexport const CommonDateTimeInput = React.forwardRef(function CommonDateTimeInput(\n  props: CommonDateTimeInputProps,\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const {\n    id,\n    deserialize,\n    formatInputValue,\n    onChange,\n    parseInputValue,\n    placeholder,\n    readOnly,\n    selectTime,\n    serialize,\n    timeStep,\n    value,\n    ...restProps\n  } = props\n\n  const [localValue, setLocalValue] = React.useState<string | null>(null)\n\n  useEffect(() => {\n    setLocalValue(null)\n  }, [value])\n\n  const handleDatePickerInputChange = React.useCallback(\n    (event) => {\n      const nextInputValue = event.currentTarget.value\n      const result = nextInputValue === '' ? null : parseInputValue(nextInputValue)\n\n      if (result === null) {\n        onChange(null)\n\n        // If the field value is undefined and we are clearing the invalid value\n        // the above useEffect won't trigger, so we do some extra clean up here\n        if (typeof value === 'undefined' && localValue) {\n          setLocalValue(null)\n        }\n      } else if (result.isValid) {\n        onChange(serialize(result.date))\n      } else {\n        setLocalValue(nextInputValue)\n      }\n    },\n    [localValue, serialize, onChange, parseInputValue]\n  )\n\n  const handleDatePickerChange = React.useCallback(\n    (nextDate: Date | null) => {\n      onChange(nextDate ? serialize(nextDate) : null)\n    },\n    [serialize, onChange]\n  )\n\n  const forwardedRef = useForwardedRef(ref)\n\n  const parseResult = localValue ? parseInputValue(localValue) : value ? deserialize(value) : null\n\n  const inputValue = localValue\n    ? localValue\n    : parseResult?.isValid\n    ? formatInputValue(parseResult.date)\n    : value\n\n  return readOnly ? (\n    <TextInput value={inputValue} readOnly />\n  ) : (\n    <DateTimeInput\n      {...restProps}\n      id={id}\n      selectTime={selectTime}\n      timeStep={timeStep}\n      placeholder={placeholder || `e.g. ${formatInputValue(DEFAULT_PLACEHOLDER_TIME)}`}\n      ref={forwardedRef}\n      value={parseResult?.date}\n      inputValue={inputValue || ''}\n      readOnly={Boolean(readOnly)}\n      onInputChange={handleDatePickerInputChange}\n      onChange={handleDatePickerChange}\n      customValidity={parseResult?.error}\n    />\n  )\n})\n","export function isValidDate(date: Date) {\n  return date instanceof Date && !isNaN(date.valueOf())\n}\n","import {format, parse} from '@sanity/util/legacyDateFormat'\nimport {getMinutes, setMinutes, parseISO} from 'date-fns'\nimport React, {useCallback} from 'react'\nimport {ChangeIndicator} from '../../../components/changeIndicators'\nimport {set, unset} from '../../patch'\nimport {StringInputProps} from '../../types'\nimport {CommonDateTimeInput} from './CommonDateTimeInput'\nimport {ParseResult} from './types'\nimport {isValidDate} from './utils'\n\ninterface ParsedOptions {\n  dateFormat: string\n  timeFormat: string\n  timeStep: number\n  calendarTodayLabel: string\n}\n\ninterface SchemaOptions {\n  dateFormat?: string\n  timeFormat?: string\n  timeStep?: number\n  calendarTodayLabel?: string\n}\n\nexport type DateTimeInputProps = StringInputProps\n\nconst DEFAULT_DATE_FORMAT = 'YYYY-MM-DD'\nconst DEFAULT_TIME_FORMAT = 'HH:mm'\n\nfunction parseOptions(options: SchemaOptions = {}): ParsedOptions {\n  return {\n    dateFormat: options.dateFormat || DEFAULT_DATE_FORMAT,\n    timeFormat: options.timeFormat || DEFAULT_TIME_FORMAT,\n    timeStep: ('timeStep' in options && Number(options.timeStep)) || 1,\n    calendarTodayLabel: options.calendarTodayLabel || 'Today',\n  }\n}\n\nfunction serialize(date: Date) {\n  return date.toISOString()\n}\nfunction deserialize(isoString: string): ParseResult {\n  const deserialized = new Date(isoString)\n  if (isValidDate(deserialized)) {\n    return {isValid: true, date: deserialized}\n  }\n  return {isValid: false, error: `Invalid date value: \"${isoString}\"`}\n}\n\n// enforceTimeStep takes a dateString and datetime schema options and enforces the time\n// to be within the configured timeStep\nfunction enforceTimeStep(dateString: string, timeStep: number) {\n  if (!timeStep || timeStep === 1) {\n    return dateString\n  }\n\n  const date = parseISO(dateString)\n  const minutes = getMinutes(date)\n  const leftOver = minutes % timeStep\n  if (leftOver !== 0) {\n    return serialize(setMinutes(date, minutes - leftOver))\n  }\n\n  return serialize(date)\n}\n\nexport function DateTimeInput(props: DateTimeInputProps) {\n  const {onChange, schemaType, value, elementProps} = props\n\n  const {dateFormat, timeFormat, timeStep} = parseOptions(schemaType.options)\n\n  const handleChange = useCallback(\n    (nextDate: string | null) => {\n      let date = nextDate\n      if (date !== null && timeStep > 1) {\n        date = enforceTimeStep(date, timeStep)\n      }\n\n      onChange(date === null ? unset() : set(date))\n    },\n    [onChange, timeStep]\n  )\n\n  const formatInputValue = React.useCallback(\n    (date: Date) => format(date, `${dateFormat} ${timeFormat}`),\n    [dateFormat, timeFormat]\n  )\n\n  const parseInputValue = React.useCallback(\n    (inputValue: string) => parse(inputValue, `${dateFormat} ${timeFormat}`),\n    [dateFormat, timeFormat]\n  )\n\n  return (\n    <CommonDateTimeInput\n      {...elementProps}\n      onChange={handleChange}\n      deserialize={deserialize}\n      formatInputValue={formatInputValue}\n      parseInputValue={parseInputValue}\n      placeholder={schemaType.placeholder}\n      selectTime\n      serialize={serialize}\n      timeStep={timeStep}\n      value={value}\n    />\n  )\n}\n","import React, {useCallback} from 'react'\nimport {format, parse} from '@sanity/util/legacyDateFormat'\nimport {set, unset} from '../../patch'\nimport {StringInputProps} from '../../types'\nimport {ChangeIndicator} from '../../../components/changeIndicators'\nimport {CommonDateTimeInput} from './CommonDateTimeInput'\n\ninterface ParsedOptions {\n  dateFormat: string\n  calendarTodayLabel: string\n}\n\ninterface SchemaOptions {\n  dateFormat?: string\n  calendarTodayLabel?: string\n}\n\nexport type DateInputProps = StringInputProps\n\n// This is the format dates are stored on\nconst VALUE_FORMAT = 'YYYY-MM-DD'\n// default to how they are stored\nconst DEFAULT_DATE_FORMAT = VALUE_FORMAT\n\nfunction parseOptions(options: SchemaOptions = {}): ParsedOptions {\n  return {\n    dateFormat: options.dateFormat || DEFAULT_DATE_FORMAT,\n    calendarTodayLabel: options.calendarTodayLabel || 'Today',\n  }\n}\n\nconst deserialize = (value: string) => parse(value, VALUE_FORMAT)\nconst serialize = (date: Date) => format(date, VALUE_FORMAT)\n\nexport function DateInput(props: DateInputProps) {\n  const {readOnly, onChange, schemaType, elementProps, value} = props\n  const {dateFormat} = parseOptions(schemaType.options)\n\n  const handleChange = useCallback(\n    (nextDate: string | null) => {\n      onChange(nextDate === null ? unset() : set(nextDate))\n    },\n    [onChange]\n  )\n\n  const formatInputValue = useCallback((date: Date) => format(date, dateFormat), [dateFormat])\n\n  const parseInputValue = useCallback(\n    (inputValue: string) => parse(inputValue, dateFormat),\n    [dateFormat]\n  )\n\n  return (\n    <CommonDateTimeInput\n      {...elementProps}\n      deserialize={deserialize}\n      formatInputValue={formatInputValue}\n      onChange={handleChange}\n      parseInputValue={parseInputValue}\n      placeholder={schemaType.placeholder}\n      readOnly={readOnly}\n      selectTime={false}\n      serialize={serialize}\n      value={value}\n    />\n  )\n}\n","import React from 'react'\nimport {TextSchemaType} from '@sanity/types'\nimport {TextArea} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {StringInputProps} from '../types'\n\nexport type TextInputProps = StringInputProps<TextSchemaType>\n\nconst StyledTextArea = styled(TextArea)`\n  &[data-as='textarea'] {\n    resize: vertical;\n  }\n`\n\nexport function TextInput(props: TextInputProps) {\n  const {schemaType, validationError, value, elementProps} = props\n\n  return (\n    <StyledTextArea\n      customValidity={validationError}\n      value={value || ''}\n      placeholder={schemaType.placeholder}\n      rows={typeof schemaType.rows === 'number' ? schemaType.rows : 10}\n      {...elementProps}\n    />\n  )\n}\n","import {TextInput} from '@sanity/ui'\nimport React from 'react'\nimport {getValidationRule} from '../utils/getValidationRule'\nimport {StringInputProps} from '../types'\n\nexport type UrlInputProps = StringInputProps\n\n// @todo Rename to `URLInput`?\nexport function UrlInput(props: UrlInputProps) {\n  const {schemaType, validationError, elementProps} = props\n\n  const uriRule = getValidationRule(schemaType, 'uri')\n  const inputType = uriRule?.constraint?.options?.allowRelative ? 'text' : 'url'\n  return (\n    <TextInput\n      type={inputType}\n      inputMode=\"url\"\n      customValidity={validationError}\n      {...elementProps}\n    />\n  )\n}\n","import {SlugSchemaType} from '@sanity/types'\nimport speakingurl from 'speakingurl'\nimport {FIXME} from '../../../types'\n\n// Fallback slugify function if not defined in field options\nconst defaultSlugify = (value: FIXME, type: SlugSchemaType): string => {\n  const maxLength = type.options?.maxLength\n  const slugifyOpts = {truncate: typeof maxLength === 'number' ? maxLength : 200, symbols: true}\n  return value ? speakingurl(value, slugifyOpts) : ''\n}\n\nexport function slugify(sourceValue: FIXME, type: SlugSchemaType): Promise<string> {\n  if (!sourceValue) {\n    return Promise.resolve(sourceValue)\n  }\n\n  const slugifier = type.options?.slugify || defaultSlugify\n\n  return Promise.resolve(slugifier(sourceValue, type))\n}\n","import React from 'react'\n\nexport type AsyncCompleteState<T> = {\n  status: 'complete'\n  result: T\n}\nexport type AsyncPendingState = {\n  status: 'pending'\n}\nexport type AsyncErrorState = {\n  status: 'error'\n  error: Error\n}\n\nexport type AsyncState<T> = AsyncPendingState | AsyncCompleteState<T> | AsyncErrorState\n\n/**\n * Takes an async function and returns a [AsyncState<value>, callback] pair.\n * Whenever the callback is invoked, a new AsyncState is returned.\n * If the returned callback is called again before the previous callback has settled, the resolution of the previous one will be ignored, thus preventing race conditions.\n * @param fn an async function that returns a value\n * @param dependencies list of dependencies that will return a new [value, callback] pair\n */\nexport function useAsync<T, U>(\n  fn: (arg: U) => Promise<T>,\n  dependencies: React.DependencyList\n): [null | AsyncState<T>, (arg: U) => void] {\n  const [state, setState] = React.useState<AsyncState<T> | null>(null)\n\n  const lastId = React.useRef(0)\n\n  const wrappedCallback = React.useCallback(\n    (arg: U) => {\n      const asyncId = ++lastId.current\n      setState({status: 'pending'})\n\n      Promise.resolve()\n        .then(() => fn(arg))\n        .then(\n          (res) => {\n            if (asyncId === lastId.current) {\n              setState({status: 'complete', result: res})\n            }\n          },\n          (err) => {\n            if (asyncId === lastId.current) {\n              setState({status: 'error', error: err})\n            }\n          }\n        )\n    },\n    [fn, ...dependencies]\n  )\n\n  return [state, wrappedCallback]\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {Path, SanityDocument, SlugParent, SlugSchemaType, SlugSourceFn} from '@sanity/types'\nimport * as PathUtils from '@sanity/util/paths'\nimport {Box, Button, Card, Flex, Stack, TextInput} from '@sanity/ui'\nimport {PatchEvent, set, setIfMissing, unset} from '../../patch'\nimport {ObjectInputProps} from '../../types'\nimport {useFormBuilder} from '../../useFormBuilder'\nimport {slugify} from './utils/slugify'\nimport {useAsync} from './utils/useAsync'\n\nexport type Slug = {\n  _type: 'slug'\n  current?: string\n}\n\nexport type SlugInputProps = ObjectInputProps<Slug, SlugSchemaType>\n\nfunction getNewFromSource(\n  source: string | Path | SlugSourceFn,\n  valuePath: Path,\n  document: SanityDocument\n) {\n  const parentPath = valuePath.slice(0, -1)\n  const parent = PathUtils.get(document, parentPath) as SlugParent\n  return Promise.resolve(\n    typeof source === 'function'\n      ? source(document, {parentPath, parent})\n      : (PathUtils.get(document, source) as string | undefined)\n  )\n}\n\nexport function SlugInput(props: SlugInputProps) {\n  const {getDocument} = useFormBuilder().__internal\n  const {path, value, schemaType, validation, onChange, onFocusPath, readOnly, elementProps} = props\n  const sourceField = schemaType.options?.source\n  const errors = useMemo(() => validation.filter((item) => item.level === 'error'), [validation])\n\n  const updateSlug = useCallback(\n    (nextSlug) => {\n      if (!nextSlug) {\n        onChange(PatchEvent.from(unset([])))\n        return\n      }\n\n      onChange(\n        PatchEvent.from([setIfMissing({_type: schemaType.name}), set(nextSlug, ['current'])])\n      )\n    },\n    [onChange, schemaType.name]\n  )\n\n  const [generateState, handleGenerateSlug] = useAsync(() => {\n    if (!sourceField) {\n      return Promise.reject(\n        new Error(`Source is missing. Check source on type \"${schemaType.name}\" in schema`)\n      )\n    }\n\n    return getNewFromSource(\n      sourceField,\n      path,\n      getDocument() || ({_type: schemaType.name} as SanityDocument)\n    )\n      .then((newFromSource) => slugify(newFromSource || '', schemaType))\n      .then((newSlug) => updateSlug(newSlug))\n  }, [path, updateSlug, document, schemaType])\n\n  const isUpdating = generateState?.status === 'pending'\n\n  const handleChange = React.useCallback(\n    (event) => updateSlug(event.currentTarget.value),\n    [updateSlug]\n  )\n\n  return (\n    <Stack space={3}>\n      <Flex>\n        <Box flex={1}>\n          <TextInput\n            customValidity={errors.length > 0 ? errors[0].message : ''}\n            disabled={isUpdating}\n            onChange={handleChange}\n            value={value?.current || ''}\n            readOnly={readOnly}\n            {...elementProps}\n          />\n\n          {generateState?.status === 'error' && (\n            <Card padding={2} tone=\"critical\">\n              {generateState.error.message}\n            </Card>\n          )}\n        </Box>\n        {sourceField && (\n          <Box marginLeft={1}>\n            <Button\n              mode=\"ghost\"\n              type=\"button\"\n              disabled={readOnly || isUpdating}\n              onClick={handleGenerateSlug}\n              text={generateState?.status === 'pending' ? 'Generating…' : 'Generate'}\n            />\n          </Box>\n        )}\n      </Flex>\n    </Stack>\n  )\n}\n","import {Button, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {focusRingStyle} from '../../../../components/withFocusRing/helpers'\n\nexport const FileButton = styled(Button).attrs({forwardedAs: 'label'})(\n  ({theme}: {theme: Theme}) => {\n    const {focusRing} = theme.sanity\n    const base = theme.sanity.color.base\n    const border = {width: 1, color: 'var(--card-border-color)'}\n\n    return css`\n      &:not([data-disabled='true']) {\n        &:focus-within {\n          box-shadow: ${focusRingStyle({base, border, focusRing})};\n        }\n      }\n\n      & input {\n        overflow: hidden;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        min-width: 0;\n        display: block;\n        appearance: none;\n        padding: 0;\n        margin: 0;\n        border: 0;\n        opacity: 0;\n      }\n    `\n  }\n)\n","import React, {createElement, isValidElement} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {useId} from '@reach/auto-id'\nimport {Box, ButtonProps, Flex, Text, useTheme} from '@sanity/ui'\nimport {FileButton} from './styles'\n\nexport interface FileInputButtonProps extends ButtonProps {\n  accept?: string\n  capture?: 'user' | 'environment'\n  multiple?: boolean\n  onSelect?: (files: File[]) => void\n  disabled?: boolean\n}\n\nexport const FileInputButton = React.forwardRef(function FileInputButton(\n  props: FileInputButtonProps &\n    Omit<React.HTMLProps<HTMLButtonElement>, 'as' | 'ref' | 'type' | 'value' | 'onSelect'>,\n  forwardedRef: React.ForwardedRef<HTMLInputElement>\n) {\n  const {\n    icon,\n    id: idProp,\n    accept,\n    capture,\n    fontSize,\n    multiple,\n    onSelect,\n    padding = 3,\n    space = 3,\n    textAlign,\n    text,\n    disabled,\n    ...rest\n  } = props\n  const id = useId(idProp)\n  const theme = useTheme()\n\n  const handleChange = React.useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      if (onSelect && event.target.files) {\n        onSelect(Array.from(event.target.files))\n      }\n    },\n    [onSelect]\n  )\n\n  const content = (\n    <Flex align=\"center\" justify=\"center\" padding={padding}>\n      {/* Icon */}\n      {icon && (\n        <Box marginRight={text ? space : undefined}>\n          <Text size={fontSize}>\n            {isValidElement(icon) && icon}\n            {isValidElementType(icon) && createElement(icon)}\n          </Text>\n        </Box>\n      )}\n\n      {/* Text */}\n      {text && (\n        <Text\n          align={textAlign}\n          size={fontSize}\n          textOverflow=\"ellipsis\"\n          weight={theme.sanity.button.textWeight}\n        >\n          {text}\n        </Text>\n      )}\n    </Flex>\n  )\n\n  return (\n    <FileButton {...rest} htmlFor={id} padding={0} fontSize={2} disabled={disabled}>\n      {content}\n\n      {/* Visibly hidden input */}\n      <input\n        data-testid=\"file-button-input\"\n        accept={accept}\n        capture={capture}\n        id={id}\n        multiple={multiple}\n        onChange={handleChange}\n        ref={forwardedRef}\n        type=\"file\"\n        value=\"\"\n        disabled={disabled}\n      />\n    </FileButton>\n  )\n})\n","import React, {useMemo} from 'react'\nimport {BinaryDocumentIcon, AccessDeniedIcon, ImageIcon, ReadOnlyIcon} from '@sanity/icons'\nimport {Flex, Text} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {FileLike} from '../../../studio/uploads/types'\n\ninterface Props {\n  readOnly?: boolean\n  hoveringFiles: FileLike[]\n  type: string\n  acceptedFiles: FileLike[]\n  rejectedFilesCount: number\n  directUploads?: boolean\n}\n\nconst RootFlex = styled(Flex)`\n  pointer-events: none;\n`\n\nexport function PlaceholderText(props: Props) {\n  const {hoveringFiles, type, readOnly, acceptedFiles, rejectedFilesCount, directUploads} = props\n  const isFileType = type === 'file'\n\n  const messageIcon = useMemo(() => {\n    if (readOnly) {\n      return <ReadOnlyIcon />\n    }\n\n    if ((hoveringFiles && rejectedFilesCount > 0) || !directUploads) {\n      return <AccessDeniedIcon />\n    }\n\n    return isFileType ? <BinaryDocumentIcon /> : <ImageIcon />\n  }, [directUploads, hoveringFiles, isFileType, readOnly, rejectedFilesCount])\n\n  const messageText = useMemo(() => {\n    let message = `Drag or paste ${type} here`\n\n    if (!directUploads) {\n      return `Can't upload files here`\n    }\n\n    if (readOnly) {\n      message = 'Read only'\n    }\n\n    if (hoveringFiles && directUploads && !readOnly) {\n      if (acceptedFiles.length > 0) {\n        message = `Drop to upload ${type}`\n      }\n      if (rejectedFilesCount > 0) {\n        message = `Can't upload ${rejectedFilesCount} file${rejectedFilesCount > 1 ? 's' : ''} here`\n      }\n    }\n\n    return message\n  }, [acceptedFiles.length, directUploads, hoveringFiles, readOnly, rejectedFilesCount, type])\n\n  return (\n    <RootFlex align=\"center\" gap={2} justify=\"center\">\n      <Text muted>{messageIcon}</Text>\n\n      <Text size={1} muted>\n        {messageText}\n      </Text>\n    </RootFlex>\n  )\n}\n","import React from 'react'\nimport {UploadIcon} from '@sanity/icons'\nimport {Flex, Inline} from '@sanity/ui'\nimport {FileLike} from '../../../studio/uploads/types'\nimport {FileInputButton} from './FileInputButton/FileInputButton'\nimport {PlaceholderText} from './PlaceholderText'\n\ntype UploadPlaceholderProps = {\n  onUpload?: (files: File[]) => void\n  browse?: React.ReactNode\n  readOnly?: boolean\n  type: string\n  hoveringFiles: FileLike[]\n  acceptedFiles: FileLike[]\n  rejectedFilesCount: number\n  accept: string\n  directUploads?: boolean\n}\n\nexport const UploadPlaceholder = React.memo(function UploadPlaceholder({\n  browse,\n  onUpload,\n  readOnly,\n  type,\n  hoveringFiles,\n  acceptedFiles,\n  rejectedFilesCount,\n  accept,\n  directUploads,\n}: UploadPlaceholderProps) {\n  return (\n    <Flex\n      align=\"center\"\n      justify=\"space-between\"\n      gap={4}\n      direction={['column', 'column', 'row']}\n      paddingY={[2, 2, 0]}\n    >\n      <Flex align=\"center\" justify=\"center\" gap={2} flex={1}>\n        <PlaceholderText\n          readOnly={readOnly}\n          hoveringFiles={hoveringFiles}\n          acceptedFiles={acceptedFiles}\n          rejectedFilesCount={rejectedFilesCount}\n          type={type}\n          directUploads={directUploads}\n        />\n      </Flex>\n      <Inline space={2}>\n        <FileInputButton\n          icon={UploadIcon}\n          mode=\"ghost\"\n          onSelect={onUpload}\n          accept={accept}\n          text=\"Upload\"\n          data-testid=\"file-input-upload-button\"\n          disabled={readOnly || !directUploads}\n        />\n        {browse}\n      </Inline>\n    </Flex>\n  )\n})\n","import React, {ReactNode} from 'react'\nimport {Observable} from 'rxjs'\nimport {Reference} from '@sanity/types'\nimport {useMemoObservable} from 'react-rx'\n\ninterface Props<AssetDoc> {\n  reference: Reference\n  observeAsset: (assetId: string) => Observable<AssetDoc>\n  children: (assetDocument: AssetDoc) => ReactNode\n  waitPlaceholder?: ReactNode\n}\n\nexport function WithReferencedAsset<Asset>(props: Props<Asset>) {\n  const {reference, children, observeAsset, waitPlaceholder} = props\n  const documentId = reference?._ref\n  const asset = useMemoObservable(() => observeAsset(documentId), [documentId])\n  return <>{documentId && asset ? children(asset) : waitPlaceholder}</>\n}\n","/* eslint-disable import/named */\n\nimport {Card} from '@sanity/ui'\nimport {fileTarget} from '../../common/fileTarget'\nimport {withFocusRing} from '../../../components/withFocusRing'\n\nexport type {FileInfo} from '../../common/fileTarget'\n\n// Note: FileTarget needs its own focusRing because we need show it on click, not only when :focus-visible\nexport const FileTarget = fileTarget(withFocusRing(Card))\n","import {Card, Flex, Stack, Code} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const CardWrapper = styled(Card)`\n  min-height: 82px;\n  box-sizing: border-box;\n`\n\nexport const FlexWrapper = styled(Flex)`\n  text-overflow: ellipsis;\n  overflow: hidden;\n`\n\nexport const LeftSection = styled(Stack)`\n  position: relative;\n  width: 60%;\n`\n\nexport const CodeWrapper = styled(Code)`\n  position: relative;\n  width: 100%;\n\n  code {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    position: relative;\n    max-width: 200px;\n  }\n`\n","import React, {useEffect} from 'react'\nimport {Flex, Text, Button, Inline, Card} from '@sanity/ui'\nimport {UploadState} from '@sanity/types'\nimport {LinearProgress} from '../../../../components/progress'\nimport {CardWrapper, FlexWrapper, LeftSection, CodeWrapper} from './UploadProgress.styled'\n\ntype Props = {\n  uploadState: UploadState\n  onCancel?: () => void\n  onStale?: () => void\n  height?: number\n}\n\n// If it's more than this amount of milliseconds since last time upload state was reported,\n// the upload will be marked as stale/interrupted.\nconst STALE_UPLOAD_MS = 1000 * 60 * 2 // 2 minutes\n\nconst elapsedMs = (date: string): number => new Date().getTime() - new Date(date).getTime()\n\nexport function UploadProgress({uploadState, onCancel, onStale, height}: Props) {\n  const filename = uploadState.file.name\n\n  useEffect(() => {\n    if (elapsedMs(uploadState.updated) > STALE_UPLOAD_MS) {\n      onStale?.()\n    }\n  }, [uploadState.updated, onStale])\n\n  return (\n    <CardWrapper tone=\"primary\" padding={4} border style={{height: `${height}px`}}>\n      <FlexWrapper align=\"center\" justify=\"space-between\" height=\"fill\" direction=\"row\" gap={2}>\n        <LeftSection>\n          <Flex justify=\"center\" gap={[3, 3, 2, 2]} direction={['column', 'column', 'row']}>\n            <Text size={1}>\n              <Inline space={2}>\n                Uploading\n                <CodeWrapper size={1}>{filename ? filename : '...'}</CodeWrapper>\n              </Inline>\n            </Text>\n          </Flex>\n\n          <Card marginTop={3} radius={5} shadow={1}>\n            <LinearProgress value={uploadState.progress} />\n          </Card>\n        </LeftSection>\n\n        {onCancel ? (\n          <Button\n            fontSize={2}\n            text=\"Cancel upload\"\n            mode=\"ghost\"\n            tone=\"critical\"\n            onClick={onCancel}\n          />\n        ) : null}\n      </FlexWrapper>\n    </CardWrapper>\n  )\n}\n","import {uuid} from '@sanity/uuid'\nimport {FIXME} from '../../../../types'\n\nexport function urlToFile(url: string, filename?: string): Promise<File> {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest()\n    xhr.onload = () => {\n      const reader = new FileReader()\n      reader.onloadend = () => {\n        const string = reader.result?.toString()\n        const ext = string?.substring('data:image/'.length, string.indexOf(';base64'))\n        if (!ext && !filename) {\n          reject(new Error('Could not find mime type for image'))\n          return\n        }\n        resolve(dataURLtoFile(reader.result as FIXME, filename || `${uuid()}.${ext}`))\n      }\n      reader.readAsDataURL(xhr.response)\n    }\n    xhr.onerror = (error) => {\n      reject(error)\n    }\n    xhr.open('GET', url)\n    xhr.responseType = 'blob'\n    xhr.send()\n  })\n}\n\nexport function base64ToFile(base64Data: string | ArrayBuffer, filename?: string): Promise<File> {\n  return new Promise((resolve, reject) => {\n    const string = base64Data.toString()\n    const ext = string.substring('data:image/'.length, string.indexOf(';base64'))\n    if (!ext && !filename) {\n      reject(new Error('Could not find mime type for image'))\n      return\n    }\n    resolve(dataURLtoFile(base64Data as FIXME, filename || `${uuid()}.${ext}`))\n  })\n}\n\nfunction dataURLtoFile(dataurl: string, filename: string) {\n  const arr = dataurl.split(',')\n  const mime = arr[0].match(/:(.*?);/)?.[1]\n  const bstr = atob(arr[1])\n  let n = bstr.length\n  const u8arr = new Uint8Array(n)\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n)\n  }\n  return new File([u8arr], filename, {type: mime})\n}\n","import {AssetFromSource, FileSchemaType} from '@sanity/types'\nimport {get} from 'lodash'\nimport {FormPatch, PatchArg, PatchEvent, set, setIfMissing, unset} from '../../../patch'\nimport {Uploader, UploaderResolver, UploadOptions} from '../../../studio/uploads/types'\nimport {base64ToFile, urlToFile} from '../ImageInput/utils/image'\nimport {FIXME} from '../../../types'\n\n// We alias DOM File type here to distinguish it from the type of the File value\ntype DOMFile = globalThis.File\n\ninterface Props {\n  assetFromSource: AssetFromSource[]\n  onChange: (patch: FormPatch | FormPatch[] | PatchEvent) => void\n  type: FileSchemaType\n  resolveUploader: UploaderResolver\n  uploadWith: (uploader: Uploader, file: DOMFile, assetDocumentProps?: UploadOptions) => void\n  isImage?: boolean\n}\n\nexport function handleSelectAssetFromSource({\n  assetFromSource,\n  onChange,\n  type,\n  resolveUploader,\n  uploadWith,\n  isImage,\n}: Props): void {\n  // const {onChange, type, resolveUploader} = this.props\n  if (!assetFromSource) {\n    throw new Error('No asset given')\n  }\n  if (!Array.isArray(assetFromSource) || assetFromSource.length === 0) {\n    throw new Error('Returned value must be an array with at least one item (asset)')\n  }\n  const firstAsset = assetFromSource[0]\n  const originalFilename = get(firstAsset, 'assetDocumentProps.originalFilename')\n  const label = get(firstAsset, 'assetDocumentProps.label')\n  const title = get(firstAsset, 'assetDocumentProps.title')\n  const description = get(firstAsset, 'assetDocumentProps.description')\n  const creditLine = get(firstAsset, 'assetDocumentProps.creditLine')\n  const source = get(firstAsset, 'assetDocumentProps.source')\n  const imagePatches = isImage ? [unset(['hotspot']), unset(['crop'])] : []\n  switch (firstAsset.kind) {\n    case 'assetDocumentId':\n      onChange([\n        setIfMissing({\n          _type: type.name,\n        }),\n        ...imagePatches,\n        set(\n          {\n            _type: 'reference',\n            _ref: firstAsset.value,\n          },\n\n          ['asset']\n        ),\n      ])\n\n      break\n    case 'file': {\n      const uploader = resolveUploader(type, firstAsset.value as FIXME)\n      if (uploader) {\n        uploadWith(uploader, firstAsset.value as FIXME, {\n          label,\n          title,\n          description,\n          creditLine,\n          source,\n        })\n      }\n      break\n    }\n    case 'base64':\n      base64ToFile(firstAsset.value as FIXME, originalFilename).then((file) => {\n        const uploader = resolveUploader(type, file)\n        if (uploader) {\n          uploadWith(uploader, file, {label, title, description, creditLine, source})\n        }\n      })\n      break\n    case 'url':\n      urlToFile(firstAsset.value as FIXME, originalFilename).then((file) => {\n        const uploader = resolveUploader(type, file)\n        if (uploader) {\n          uploadWith(uploader, file, {label, title, description, creditLine, source})\n        }\n      })\n      break\n    default: {\n      throw new Error('Invalid value returned from asset source plugin')\n    }\n  }\n}\n","import {Theme, MenuItem} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {focusRingStyle} from '../../../../components/withFocusRing/helpers'\n\nexport const FileButton = styled(MenuItem)(({theme}: {theme: Theme}) => {\n  const {focusRing} = theme.sanity\n  const base = theme.sanity.color.base\n  const border = {width: 1, color: 'var(--card-border-color)'}\n\n  return css`\n    position: relative;\n\n    &:not([data-disabled='true']) {\n      &:focus-within {\n        box-shadow: ${focusRingStyle({base, border, focusRing})};\n      }\n    }\n\n    & input {\n      overflow: hidden;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      min-width: 0;\n      display: block;\n      appearance: none;\n      padding: 0;\n      margin: 0;\n      border: 0;\n      opacity: 0;\n    }\n  `\n})\n","import React, {createElement, isValidElement} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {useId} from '@reach/auto-id'\nimport {Box, ButtonProps, Flex, Text} from '@sanity/ui'\nimport {FileButton} from './FileInputMenuItem.styled'\n\nexport interface FileInputMenuItemProps extends ButtonProps {\n  accept?: string\n  capture?: 'user' | 'environment'\n  multiple?: boolean\n  onSelect?: (files: File[]) => void\n  disabled?: boolean\n}\n\nexport const FileInputMenuItem = React.forwardRef(function FileInputMenuItem(\n  props: FileInputMenuItemProps &\n    Omit<React.HTMLProps<HTMLButtonElement>, 'as' | 'ref' | 'type' | 'value' | 'onSelect'>,\n  forwardedRef: React.ForwardedRef<HTMLInputElement>\n) {\n  const {\n    icon,\n    id: idProp,\n    accept,\n    capture,\n    fontSize,\n    multiple,\n    onSelect,\n    padding = 3,\n    space = 3,\n    textAlign,\n    text,\n    disabled,\n    ...rest\n  } = props\n  const id = useId(idProp)\n\n  const handleChange = React.useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      if (onSelect && event.target.files) {\n        onSelect(Array.from(event.target.files))\n      }\n    },\n    [onSelect]\n  )\n\n  const content = (\n    <Flex align=\"center\" justify=\"flex-start\" padding={padding}>\n      {/* Icon */}\n      {icon && (\n        <Box marginRight={text ? space : undefined}>\n          <Text size={fontSize}>\n            {isValidElement(icon) && icon}\n            {isValidElementType(icon) && createElement(icon)}\n          </Text>\n        </Box>\n      )}\n\n      {/* Text */}\n      {text && (\n        <Text align={textAlign} size={fontSize} textOverflow=\"ellipsis\">\n          {text}\n        </Text>\n      )}\n    </Flex>\n  )\n\n  return (\n    <FileButton\n      {...rest}\n      htmlFor={id}\n      padding={0}\n      fontSize={2}\n      disabled={disabled}\n      ref={forwardedRef}\n    >\n      {content}\n\n      {/* Visibly hidden input */}\n      <input\n        data-testid=\"file-button-input\"\n        accept={accept}\n        capture={capture}\n        id={id}\n        multiple={multiple}\n        onChange={handleChange}\n        type=\"file\"\n        value=\"\"\n        disabled={disabled}\n      />\n    </FileButton>\n  )\n})\n","import React, {MouseEventHandler, useCallback} from 'react'\n\nimport {UploadIcon, ClipboardIcon, ResetIcon, DownloadIcon} from '@sanity/icons'\nimport {Box, MenuItem, MenuDivider, Label, useToast} from '@sanity/ui'\nimport {FileInputMenuItem} from './FileInputMenuItem/FileInputMenuItem'\n\ninterface Props {\n  onUpload: (files: File[]) => void\n  browse: React.ReactNode\n  readOnly?: boolean\n  onReset: MouseEventHandler<HTMLDivElement>\n  accept: string\n  directUploads?: boolean\n  downloadUrl?: string\n  copyUrl?: string\n}\n\nexport function ActionsMenu(props: Props) {\n  const {onUpload, onReset, readOnly, accept, directUploads, browse, downloadUrl, copyUrl} = props\n\n  const {push: pushToast} = useToast()\n\n  const handleCopyURL = useCallback(() => {\n    navigator.clipboard.writeText(copyUrl || '')\n    pushToast({closable: true, status: 'success', title: 'The url is copied to the clipboard'})\n  }, [pushToast, copyUrl])\n\n  return (\n    <>\n      <Box padding={2}>\n        <Label muted size={1}>\n          Replace\n        </Label>\n      </Box>\n      <FileInputMenuItem\n        icon={UploadIcon}\n        mode=\"bleed\"\n        onSelect={onUpload}\n        accept={accept}\n        text=\"Upload\"\n        data-testid=\"file-input-upload-button\"\n        disabled={readOnly || !directUploads}\n        fontSize={2}\n      />\n      {browse}\n\n      {(downloadUrl || copyUrl) && <MenuDivider />}\n      {downloadUrl && <MenuItem as=\"a\" icon={DownloadIcon} text=\"Download\" href={downloadUrl} />}\n      {copyUrl && <MenuItem icon={ClipboardIcon} text=\"Copy URL\" onClick={handleCopyURL} />}\n\n      <MenuDivider />\n      <MenuItem\n        tone=\"critical\"\n        icon={ResetIcon}\n        text=\"Clear field\"\n        onClick={onReset}\n        disabled={readOnly}\n        data-testid=\"file-input-clear\"\n      />\n    </>\n  )\n}\n","import {ResetIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Card, Flex, Box, Text, Stack, Button} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\ntype Props = {\n  onClearStale?: () => void\n}\n\nconst ButtonWrapper = styled(Button)`\n  width: 100%;\n`\n\nexport function UploadWarning({onClearStale}: Props) {\n  return (\n    <Card tone=\"caution\" padding={4} border radius={2}>\n      <Flex gap={4} marginBottom={4}>\n        <Box>\n          <Text size={1}>\n            <WarningOutlineIcon />\n          </Text>\n        </Box>\n        <Stack space={3}>\n          <Text size={1} weight=\"semibold\">\n            Incomplete upload\n          </Text>\n          <Text size={1}>\n            An upload has made no progress in the last 6m and likely got interrupted. You can safely\n            clear the incomplete upload and try uploading again.\n          </Text>\n        </Stack>\n      </Flex>\n      <ButtonWrapper icon={ResetIcon} text=\"Clear upload\" onClick={onClearStale} mode=\"ghost\" />\n    </Card>\n  )\n}\n","import {Box} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const RatioBox = styled(Box)<{ratio?: number}>`\n  position: relative;\n  padding-bottom: calc(${({ratio = 3 / 2}) => 1 / ratio} * 100%);\n\n  & > div {\n    position: absolute;\n    top: ${({padding = 0}) => padding}px;\n    left: ${({padding = 0}) => padding}px;\n    right: ${({padding = 0}) => padding}px;\n    bottom: ${({padding = 0}) => padding}px;\n  }\n`\n","import React from 'react'\n\ninterface ImageLoaderProps {\n  src: string\n  children: (props: {\n    isLoading: boolean\n    image: HTMLImageElement | null\n    error: Error | null\n  }) => React.ReactNode\n}\ninterface ImageLoaderState {\n  isLoading: boolean\n  image: HTMLImageElement | null\n  error: Error | null\n}\n\nexport class ImageLoader extends React.Component<ImageLoaderProps, ImageLoaderState> {\n  state: ImageLoaderState = {\n    isLoading: true,\n    image: null,\n    error: null,\n  }\n\n  UNSAFE_componentWillMount() {\n    this.loadImage(this.props.src)\n  }\n\n  loadImage(src: string) {\n    const image = new Image()\n    this.setState({\n      image: null,\n      error: null,\n    })\n\n    image.onload = () => {\n      this.setState({\n        image: image,\n        error: null,\n        isLoading: false,\n      })\n    }\n\n    image.onerror = () => {\n      this.setState({\n        error: new Error(`Could not load image from ${JSON.stringify(this.props.src)}`),\n        isLoading: false,\n      })\n    }\n\n    image.referrerPolicy = 'strict-origin-when-cross-origin'\n    image.src = src\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: ImageLoaderProps) {\n    if (nextProps.src !== this.props.src) {\n      this.loadImage(nextProps.src)\n    }\n  }\n\n  render() {\n    const {error, image, isLoading} = this.state\n    return this.props.children({image, error, isLoading})\n  }\n}\n","const testProperties = ['', 'webkit', 'moz', 'ms', 'o'].map(\n  (prefix) => `${prefix}backingStoreRatio`\n)\nlet foundProperty: number | string | undefined = -1\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function getBackingStoreRatio(context: CanvasRenderingContext2D) {\n  if (foundProperty === -1) {\n    foundProperty = testProperties.find((testProperty) => testProperty in context)\n  }\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  //@ts-ignore\n  return foundProperty && context[foundProperty]\n}\n","import type {Coordinate} from '../types'\nimport type {Rect} from './shapes'\n\nexport function isPointInEllipse(point: Coordinate, ellipse: Rect): boolean {\n  const center = {x: ellipse.center.x, y: ellipse.center.y}\n  const xradius = ellipse.width / 2\n  const yradius = ellipse.height / 2\n\n  if (xradius <= 0 || yradius <= 0) {\n    return false\n  }\n\n  const normalized = {x: point.x - center.x, y: point.y - center.y}\n\n  return (\n    Math.pow(normalized.x, 2) / Math.pow(xradius, 2) +\n      Math.pow(normalized.y, 2) / Math.pow(yradius, 2) <=\n    1\n  )\n}\n\nexport function isPointInCircle(\n  {x, y}: Coordinate,\n  circle: Coordinate & {radius: number}\n): boolean {\n  return Math.pow(x - circle.x, 2) + Math.pow(y - circle.y, 2) < Math.pow(circle.radius, 2)\n}\n\nexport function isPointInRect(point: Coordinate, rect: Rect): boolean {\n  return (\n    point.x >= rect.left &&\n    point.x <= rect.left + rect.width &&\n    point.y >= rect.top &&\n    point.y <= rect.top + rect.height\n  )\n}\n\nexport function getPointAtCircumference(radians: number, ellipse: Rect): Coordinate {\n  return {\n    x: ellipse.center.x - (ellipse.width / 2) * Math.cos(radians),\n    y: ellipse.center.y - (ellipse.height / 2) * Math.sin(radians),\n  }\n}\n","import type {Crop} from '../types'\n\nexport class Size {\n  height: number\n  width: number\n  constructor(height: number, width: number) {\n    this.height = height\n    this.width = width\n  }\n}\nexport class Point {\n  x: number\n  y: number\n  constructor(x: number, y: number) {\n    this.x = x\n    this.y = y\n  }\n}\n\nclass HLine {\n  y: number\n  _left: number\n  _right: number\n  constructor(y: number, left: number, right: number) {\n    this.y = y\n    this._left = left\n    this._right = right\n  }\n\n  get right() {\n    return new Point(this._right, this.y)\n  }\n\n  get left() {\n    return new Point(this._left, this.y)\n  }\n\n  get length() {\n    return this._right - this._left\n  }\n}\n\nclass Corners {\n  rect: Rect\n  constructor(rect: Rect) {\n    this.rect = rect\n  }\n\n  get top() {\n    return new HLine(this.rect.top, this.rect.left, this.rect.right)\n  }\n\n  get bottom() {\n    return new HLine(this.rect.bottom, this.rect.left, this.rect.right)\n  }\n}\n\nexport class Rect {\n  left: number\n  top: number\n  width: number\n  height: number\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n  static fromEdges({left, right, top, bottom}: Crop) {\n    return new Rect(left, top, 1 - left - right, 1 - top - bottom)\n  }\n\n  constructor(left = 0, top = 0, width = 0, height = 0) {\n    this.left = left\n    this.top = top\n    this.width = width\n    this.height = height\n  }\n\n  setTopLeft(left: number | undefined, top: number | undefined): Rect {\n    return new Rect(left, top, this.width || 0, this.height || 0)\n  }\n\n  setSize(width: number | undefined, height: number | undefined): Rect {\n    return new Rect(this.left || 0, this.top || 0, width, height)\n  }\n\n  setCenter(x: number, y: number): Rect {\n    const width = this.width || 0\n    const height = this.height || 0\n    return new Rect(x - width / 2, y - height / 2, width || 0, height || 0)\n  }\n\n  get center(): Point {\n    return new Point(this.left + this.width / 2, this.top + this.height / 2)\n  }\n\n  get corners(): Corners {\n    return new Corners(this)\n  }\n\n  get right(): number {\n    return this.left + this.width\n  }\n\n  get bottom(): number {\n    return this.top + this.height\n  }\n\n  multiply(rect: Rect): Rect {\n    return new Rect(\n      (this.left || 0) + this.width * rect.left,\n      (this.top || 0) + this.height * rect.top,\n      this.width * rect.width,\n      this.height * rect.height\n    )\n  }\n\n  grow(delta: number): Rect {\n    return new Rect(\n      this.left - delta,\n      this.top - delta,\n      this.width + delta * 2,\n      this.height + delta * 2\n    )\n  }\n\n  shrink(delta: number): Rect {\n    return this.grow(-delta)\n  }\n\n  cropRelative(crop: Rect): Rect {\n    const top = this.top + crop.top * this.height\n    const left = this.left + crop.left * this.width\n    const height = this.height * crop.height\n    const width = this.width * crop.width\n    return new Rect(left, top, width, height)\n  }\n\n  clamp(bounds: Rect): Rect {\n    // always try to fit the whole rect inside given bounds\n    // adjust top, left if we can, resize if we must\n    let {left, top, width, height} = this\n    if (bounds.width < width) {\n      width = bounds.width\n      left = bounds.left\n    }\n    if (bounds.height < height) {\n      height = bounds.height\n      top = bounds.top\n    }\n\n    if (left + width > bounds.left + bounds.width) {\n      left = bounds.right - width\n    }\n\n    if (top + height > bounds.top + bounds.height) {\n      top = bounds.bottom - height\n    }\n\n    return new Rect(Math.max(left, bounds.left), Math.max(top, bounds.top), width, height)\n  }\n}\n","import React from 'react'\nimport Debug from 'debug'\nimport type {Coordinate} from './types'\n\nconst debug = Debug('sanity-imagetool')\nconst supportsTouch = typeof window !== 'undefined' && 'ontouchstart' in window\n\ntype PositionableEvent =\n  | {touches: React.TouchEvent['touches'] | TouchEvent['touches']}\n  | {clientX: number; clientY: number}\n\n// Returns a component that emits `onDragStart, `onDrag` and `onDragEnd` events.\n// It handles mouse/touch events the same way\n// - `onDragStart` is called with the {x, y} positions relative from the dom node (e.g. where the mousedown event happened)\n// - `onDrag` and `onDragEnd` are both called with the {x, y} difference from the previous position\nexport interface DragAwareProps {\n  onDragStart: (pos: {x: number; y: number}) => void\n  onDrag: (pos: {x: number; y: number}) => void\n  onDragEnd: (pos: {x: number; y: number}) => void\n  readOnly?: boolean\n  [key: string]: unknown | undefined\n}\n\nexport function makeDragAware(Component: 'canvas') {\n  return class DragAware extends React.PureComponent<DragAwareProps> {\n    domNode: HTMLCanvasElement | null = null\n    currentPos: Coordinate | null = null\n    isDragging = false\n\n    componentDidMount() {\n      if (supportsTouch) {\n        document.body.addEventListener('touchmove', this.handleTouchMove, {passive: false})\n        document.body.addEventListener('touchend', this.handleDragEnd)\n        document.body.addEventListener('touchcancel', this.handleDragCancel)\n      } else {\n        document.body.addEventListener('mousemove', this.handleDrag)\n        document.body.addEventListener('mouseup', this.handleDragEnd)\n        document.body.addEventListener('mouseleave', this.handleDragCancel)\n      }\n    }\n\n    componentWillUnmount() {\n      if (supportsTouch) {\n        document.body.removeEventListener('touchmove', this.handleTouchMove)\n        document.body.removeEventListener('touchend', this.handleDragEnd)\n        document.body.removeEventListener('touchcancel', this.handleDragCancel)\n      } else {\n        document.body.removeEventListener('mousemove', this.handleDrag)\n        document.body.removeEventListener('mouseup', this.handleDragEnd)\n        document.body.removeEventListener('mouseleave', this.handleDragCancel)\n      }\n    }\n\n    handleTouchMove = (event: TouchEvent | MouseEvent) => {\n      // Disables mobile scroll by touch\n      if (this.isDragging) {\n        event.preventDefault()\n      }\n    }\n\n    handleDragStart = (event: PositionableEvent) => {\n      const {onDragStart, readOnly} = this.props\n\n      if (readOnly || !this.domNode) {\n        return\n      }\n\n      if (this.isDragging) {\n        debug('Start cancelled, already a drag in progress')\n        return\n      }\n\n      this.isDragging = true\n      const nextPos = getPos(event)\n      debug('Drag started %o', nextPos)\n      onDragStart(\n        getPositionRelativeToRect(nextPos.x, nextPos.y, this.domNode.getBoundingClientRect())\n      )\n\n      this.currentPos = nextPos\n    }\n\n    handleDrag = (event: PositionableEvent) => {\n      if (!this.isDragging || this.props.readOnly || !this.currentPos) {\n        return\n      }\n\n      const {onDrag} = this.props\n      const nextPos = getPos(event)\n      const diff = diffPos(nextPos, this.currentPos)\n      onDrag(diff)\n      debug('moving by %o', diff)\n      this.currentPos = nextPos\n    }\n\n    handleDragEnd = (event: MouseEvent | TouchEvent) => {\n      const {onDragEnd, readOnly} = this.props\n      if (!this.isDragging || readOnly || !this.domNode) {\n        return\n      }\n      const nextPos = getPos(event)\n      onDragEnd(\n        getPositionRelativeToRect(nextPos.x, nextPos.y, this.domNode.getBoundingClientRect())\n      )\n      this.isDragging = false\n      this.currentPos = null\n      debug('Done moving %o', nextPos)\n    }\n\n    handleDragCancel = () => {\n      if (!this.isDragging || this.props.readOnly || !this.currentPos || !this.domNode) {\n        return\n      }\n\n      const {onDragEnd} = this.props\n      this.isDragging = false\n      onDragEnd(\n        getPositionRelativeToRect(\n          this.currentPos.x,\n          this.currentPos.y,\n          this.domNode.getBoundingClientRect()\n        )\n      )\n\n      this.currentPos = null\n    }\n\n    setDomNode = (node: HTMLCanvasElement) => {\n      this.domNode = node\n    }\n\n    render() {\n      const {readOnly, onDragStart, onDragEnd, onDrag, ...rest} = this.props\n      return (\n        <Component\n          ref={this.setDomNode}\n          onTouchStart={readOnly ? undefined : this.handleDragStart}\n          onMouseDown={readOnly ? undefined : this.handleDragStart}\n          onTouchMove={readOnly ? undefined : this.handleDrag}\n          {...rest}\n        />\n      )\n    }\n  }\n}\n\nfunction getPositionRelativeToRect(x: number, y: number, rect: {left: number; top: number}) {\n  return {\n    x: x - rect.left,\n    y: y - rect.top,\n  }\n}\n\nfunction getPos(event: PositionableEvent): Coordinate {\n  if ('touches' in event) {\n    return event.touches.length > 0\n      ? {x: event.touches[0].clientX, y: event.touches[0].clientY}\n      : {x: 0, y: 0}\n  }\n\n  return {\n    x: event.clientX,\n    y: event.clientY,\n  }\n}\n\nfunction diffPos(pos: Coordinate, otherPos: Coordinate): Coordinate {\n  return {\n    x: pos.x - otherPos.x,\n    y: pos.y - otherPos.y,\n  }\n}\n","import styled from 'styled-components'\nimport {makeDragAware} from './makeDragAware'\n\nexport const DragAwareCanvas = makeDragAware('canvas')\n\nexport const RootContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\n\nexport const CanvasContainer = styled(DragAwareCanvas)`\n  display: block;\n  position: relative;\n  max-width: calc(100% - 0.5em); /* to prevent overlap with change bar */\n  max-height: calc(100% + 1em);\n  user-select: none;\n`\n","/* eslint-disable max-len */\n\nexport const OPEN_HAND =\n  'data:image/png;base64,AAACAAEAICACAAcABQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAEAAAAAAAAAAAAAAgAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8AAAA/AAAAfwAAAP+AAAH/gAAB/8AAA//AAAd/wAAGf+AAAH9gAADbYAAA2yAAAZsAAAGbAAAAGAAAAAAAAA//////////////////////////////////////////////////////////////////////////////////////gH///4B///8Af//+AD///AA///wAH//4AB//8AAf//AAD//5AA///gAP//4AD//8AF///AB///5A////5///8='\n\nexport const CLOSE_HAND =\n  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAABdSURBVEjH7ZA7DsAwCEMN6v2vTCdESpLKQRl5gxfzMQDNRQyWlEK83QAIRh3cH/QbIhQwMDl8gORl7A16WD/xxAdq6N6SgycKUblf41+wbFBT44RiCi11NU3TLHgBxRUUD4ITqnIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTUtMDEtMjFUMDA6MTM6NDMrMDE6MDC74T7AAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDEyLTA0LTAyVDA0OjEzOjM3KzAyOjAwQJ35wQAAAABJRU5ErkJggg=='\n","import type {Crop, Hotspot} from './types'\n\nexport const DEFAULT_HOTSPOT: Hotspot = {\n  x: 0.5,\n  y: 0.5,\n  height: 1,\n  width: 1,\n}\n\nexport const DEFAULT_CROP: Crop = {\n  top: 0,\n  left: 0,\n  right: 0,\n  bottom: 0,\n}\n","import React, {MouseEvent} from 'react'\nimport {memoize} from 'lodash'\nimport {getBackingStoreRatio} from './getBackingStoreRatio'\nimport * as utils2d from './2d/utils'\nimport {Rect} from './2d/shapes'\nimport {RootContainer, CanvasContainer} from './ToolCanvas.styles'\n\nimport * as cursors from './cursors'\nimport {DEFAULT_CROP, DEFAULT_HOTSPOT} from './constants'\nimport type {\n  Coordinate,\n  Crop,\n  CropAndHotspot,\n  CropHandles,\n  Dimensions,\n  Hotspot,\n  Offsets,\n  ToolCanvasProps,\n  ToolCanvasState,\n} from './types'\n\n// The margin available in all directions for drawing the crop tool\nconst MARGIN_PX = 8\nconst CROP_HANDLE_SIZE = 12\nconst HOTSPOT_HANDLE_SIZE = 10\n\nfunction normalizeRect(rect: Rect) {\n  const flippedY = rect.top > rect.bottom\n  const flippedX = rect.left > rect.right\n  return {\n    top: flippedY ? rect.bottom : rect.top,\n    bottom: flippedY ? rect.top : rect.bottom,\n    left: flippedX ? rect.right : rect.left,\n    right: flippedX ? rect.left : rect.right,\n  }\n}\n\nfunction checkCropBoundaries(value: Partial<CropAndHotspot>, delta: Offsets) {\n  // Make the experience a little better. Still offsets when dragging back from outside\n  if (\n    !value ||\n    !value.crop ||\n    value.crop.top + delta.top < 0 ||\n    value.crop.left + delta.left < 0 ||\n    value.crop.right + delta.right < 0 ||\n    value.crop.bottom + delta.bottom < 0\n  ) {\n    return false\n  }\n  return true\n}\n\nfunction limitToBoundaries(value: Partial<CropAndHotspot>, delta: Offsets) {\n  const {top, right, bottom, left} = value.crop || DEFAULT_CROP\n\n  const newValue = {\n    hotspot: value.hotspot,\n    crop: {\n      top: top + (delta.top || 0) > 0 ? top : 0,\n      right: right + (delta.right || 0) > 0 ? right : 0,\n      bottom: bottom + (delta.bottom || 0) > 0 ? bottom : 0,\n      left: left + (delta.left || 0) > 0 ? left : 0,\n    },\n  }\n\n  const newDelta = {\n    top: top + (delta.top || 0) > 0 ? delta.top || 0 : 0,\n    right: right + (delta.right || 0) > 0 ? delta.right || 0 : 0,\n    bottom: bottom + (delta.bottom || 0) > 0 ? delta.bottom || 0 : 0,\n    left: left + (delta.left || 0) > 0 ? delta.left || 0 : 0,\n  }\n\n  return {value: newValue, delta: newDelta}\n}\n\nfunction getCropCursorForHandle(handle: keyof CropHandles | boolean) {\n  switch (handle) {\n    case 'left':\n    case 'right':\n      return 'col-resize'\n\n    case 'top':\n    case 'bottom':\n      return 'row-resize'\n\n    case 'topRight':\n    case 'bottomLeft':\n      return 'nesw-resize'\n\n    case 'topLeft':\n    case 'bottomRight':\n      return 'nwse-resize'\n    default:\n      return null\n  }\n}\n\nconst getDevicePixelRatio = memoize(() => {\n  const devicePixelRatio = window.devicePixelRatio || 1\n  const ctx = document.createElement('canvas').getContext('2d')\n  const backingStoreRatio = (ctx && getBackingStoreRatio(ctx)) || 1\n  return devicePixelRatio / backingStoreRatio\n})\n\nconst cropHandleKeys: (keyof CropHandles)[] = [\n  'left',\n  'right',\n  'top',\n  'topLeft',\n  'topRight',\n  'bottom',\n  'bottomLeft',\n  'bottomRight',\n]\n\nexport class ToolCanvas extends React.PureComponent<ToolCanvasProps, ToolCanvasState> {\n  state: ToolCanvasState = {\n    cropping: false,\n    cropMoving: false,\n    moving: false,\n    resizing: false,\n    mousePosition: null,\n  }\n\n  canvas?: {domNode: HTMLCanvasElement}\n\n  getHotspotRect() {\n    const {value, image} = this.props\n\n    const hotspot: Hotspot = value.hotspot || DEFAULT_HOTSPOT\n    const hotspotRect = new Rect()\n      .setSize(hotspot.width, hotspot.height)\n      .setCenter(hotspot.x, hotspot.y)\n\n    return new Rect()\n      .setSize(image.width, image.height)\n      .shrink(MARGIN_PX * this.getScale())\n      .multiply(hotspotRect)\n  }\n\n  getCropRect() {\n    const {value, image} = this.props\n\n    return new Rect()\n      .setSize(image.width, image.height)\n      .shrink(MARGIN_PX * this.getScale())\n      .cropRelative(Rect.fromEdges(value.crop || DEFAULT_CROP).clamp(new Rect(0, 0, 1, 1)))\n  }\n\n  getCropHandles(): CropHandles {\n    const inner = this.getCropRect()\n\n    const handleSize = CROP_HANDLE_SIZE * this.getScale()\n\n    const halfCropHandleSize = handleSize / 2\n\n    const cropHandle = new Rect(0, 0, handleSize, handleSize)\n    return {\n      left: cropHandle.setTopLeft(\n        inner.left - halfCropHandleSize,\n        inner.center.y - halfCropHandleSize\n      ),\n      right: cropHandle.setTopLeft(\n        inner.right - halfCropHandleSize,\n        inner.center.y - halfCropHandleSize\n      ),\n\n      top: cropHandle.setTopLeft(\n        inner.center.x - halfCropHandleSize,\n        inner.top - halfCropHandleSize\n      ),\n      topLeft: cropHandle.setTopLeft(\n        inner.left - halfCropHandleSize,\n        inner.top - halfCropHandleSize\n      ),\n      topRight: cropHandle.setTopLeft(\n        inner.right - halfCropHandleSize,\n        inner.top - halfCropHandleSize\n      ),\n\n      bottom: cropHandle.setTopLeft(\n        inner.center.x - halfCropHandleSize,\n        inner.bottom - halfCropHandleSize\n      ),\n      bottomLeft: cropHandle.setTopLeft(\n        inner.left - halfCropHandleSize,\n        inner.bottom - halfCropHandleSize\n      ),\n      bottomRight: cropHandle.setTopLeft(\n        inner.right - halfCropHandleSize,\n        inner.bottom - halfCropHandleSize\n      ),\n    }\n  }\n\n  getActiveCropHandleFor({x, y}: Coordinate) {\n    const cropHandles = this.getCropHandles()\n    for (const position of cropHandleKeys) {\n      if (utils2d.isPointInRect({x, y}, cropHandles[position])) {\n        return position\n      }\n    }\n    return false\n  }\n\n  emitMove(pos: Coordinate) {\n    const {image, value, onChange} = this.props\n    const scale = this.getScale()\n    const delta = {\n      x: (pos.x * scale) / image.width,\n      y: (pos.y * scale) / image.height,\n    }\n\n    onChange(applyHotspotMoveBy(value, delta))\n  }\n\n  emitCropMove(pos: Coordinate) {\n    const {image, onChange, value} = this.props\n    const scale = this.getScale()\n    const left = (pos.x * scale) / image.width\n    const right = (-pos.x * scale) / image.width\n    const top = (pos.y * scale) / image.height\n    const bottom = (-pos.y * scale) / image.height\n    const delta = {left, right, top, bottom}\n\n    if (checkCropBoundaries(value, delta)) {\n      onChange(applyCropMoveBy(value, delta))\n    }\n  }\n\n  emitCrop(side: string | boolean, pos: Coordinate) {\n    const {image, onChange, value} = this.props\n    const scale = this.getScale()\n    let left = 0\n    let right = 0\n    let top = 0\n    let bottom = 0\n\n    if (side == 'left' || side === 'topLeft' || side === 'bottomLeft') {\n      left = (pos.x * scale) / image.width\n    } else if (side == 'right' || side === 'topRight' || side === 'bottomRight') {\n      right = (-pos.x * scale) / image.width\n    }\n\n    if (side == 'top' || side === 'topLeft' || side === 'topRight') {\n      top = (pos.y * scale) / image.height\n    } else if (side == 'bottom' || side === 'bottomLeft' || side === 'bottomRight') {\n      bottom = (-pos.y * scale) / image.height\n    }\n\n    const delta = {left, right, top, bottom}\n    const newValue = limitToBoundaries(value, delta).value\n    const newDelta = limitToBoundaries(value, delta).delta\n\n    onChange(applyCropMoveBy(newValue, newDelta))\n  }\n\n  emitResize(pos: Coordinate) {\n    const {image, onChange, value} = this.props\n    const scale = this.getScale()\n\n    const delta = {\n      x: (pos.x * scale * 2) / image.width,\n      y: (pos.y * scale * 2) / image.height,\n    }\n    onChange(applyHotspotResizeBy(value, {height: delta.y, width: delta.x}))\n  }\n\n  getClampedValue() {\n    const value = this.props.value\n\n    const crop = Rect.fromEdges(value.crop || DEFAULT_CROP).clamp(new Rect(0, 0, 1, 1))\n\n    const hotspot = value.hotspot || DEFAULT_HOTSPOT\n    const hotspotRect = new Rect(0, 0, 1, 1)\n      .setSize(hotspot.width, hotspot.height)\n      .setCenter(hotspot.x, hotspot.y)\n      .clamp(crop)\n\n    return {crop: crop, hotspot: hotspotRect}\n  }\n\n  paintHotspot(context: CanvasRenderingContext2D, opacity: number) {\n    const {image, readOnly} = this.props\n\n    const imageRect = new Rect().setSize(image.width, image.height)\n\n    const {hotspot, crop} = this.getClampedValue()\n\n    const scale = this.getScale()\n    const margin = MARGIN_PX * scale\n\n    context.save()\n    drawBackdrop()\n    drawEllipse()\n    context.clip()\n    drawHole()\n    context.restore()\n    if (!readOnly) {\n      drawDragHandle(Math.PI * 1.25)\n    }\n\n    function drawEllipse() {\n      context.save()\n\n      const dest = imageRect.shrink(margin).multiply(hotspot)\n\n      const scaleY = dest.height / dest.width\n\n      context.scale(1, scaleY)\n      context.beginPath()\n      context.globalAlpha = opacity\n      context.arc(\n        dest.center.x,\n        dest.center.y / scaleY,\n        Math.abs(dest.width / 2),\n        0,\n        2 * Math.PI,\n        false\n      )\n      context.strokeStyle = 'white'\n      context.lineWidth = 1.5 * scale\n      context.stroke()\n      context.closePath()\n\n      context.restore()\n    }\n\n    // eslint-disable-next-line max-params\n    function drawImage(\n      srcLeft: number,\n      srcTop: number,\n      srcWidth: number,\n      srcHeight: number,\n      destLeft: number,\n      destTop: number,\n      destWidth: number,\n      destHeight: number\n    ) {\n      context.save()\n      context.drawImage(\n        image,\n        srcLeft,\n        srcTop,\n        srcWidth,\n        srcHeight,\n        destLeft,\n        destTop,\n        destWidth,\n        destHeight\n      )\n      context.restore()\n    }\n\n    function drawHole() {\n      const src = imageRect.multiply(hotspot)\n\n      const dest = imageRect.shrink(margin).multiply(hotspot)\n\n      drawImage(\n        src.left,\n        src.top,\n        src.width,\n        src.height,\n        dest.left,\n        dest.top,\n        dest.width,\n        dest.height\n      )\n    }\n\n    function drawBackdrop() {\n      const src = imageRect.cropRelative(crop)\n\n      const dest = imageRect.shrink(margin).cropRelative(crop)\n\n      context.save()\n      drawImage(\n        src.left,\n        src.top,\n        src.width,\n        src.height,\n        dest.left,\n        dest.top,\n        dest.width,\n        dest.height\n      )\n      context.globalAlpha = 0.5\n      context.fillStyle = 'black'\n      context.fillRect(dest.left, dest.top, dest.width, dest.height)\n      context.restore()\n    }\n\n    function drawDragHandle(radians: number) {\n      context.save()\n\n      const radius = HOTSPOT_HANDLE_SIZE * scale\n      const dest = imageRect.shrink(margin).multiply(hotspot)\n\n      const point = utils2d.getPointAtCircumference(radians, dest)\n\n      context.beginPath()\n      context.arc(point.x, point.y, radius, 0, 2 * Math.PI, false)\n      context.fillStyle = 'rgb(255,255,255)'\n      context.fill()\n      context.closePath()\n      context.restore()\n\n      context.beginPath()\n      context.arc(point.x, point.y, radius, 0, 2 * Math.PI, false)\n      context.strokeStyle = 'rgb(0, 0, 0)'\n      context.lineWidth = 0.5 * scale\n      context.stroke()\n      context.closePath()\n    }\n  }\n\n  getActualSize() {\n    const node = this.canvas?.domNode\n    return node ? {height: node.clientHeight, width: node.clientWidth} : {height: 0, width: 0}\n  }\n\n  getDragHandleCoords() {\n    const bbox = this.getHotspotRect()\n    const point = utils2d.getPointAtCircumference(Math.PI * 1.25, bbox)\n    return {\n      x: point.x,\n      y: point.y,\n      radius: 8 * this.getScale(),\n    }\n  }\n\n  debug(context: CanvasRenderingContext2D) {\n    context.save()\n\n    const {image} = this.props\n\n    const bbox = this.getHotspotRect()\n    const scale = this.getScale()\n    const margin = MARGIN_PX * scale\n\n    // IE 10 doesn't support context.setLineDash\n    if (context.setLineDash) {\n      context.setLineDash([2 * scale, 2 * scale])\n    }\n    context.lineWidth = 0.5 * scale\n\n    context.strokeStyle = 'rgba(200, 200, 200, 0.5)'\n\n    // --- center line x\n    vline(bbox.center.x)\n    // --- center line y\n    hline(bbox.center.y)\n\n    context.strokeStyle = 'rgba(150, 150, 150, 0.5)'\n    // --- line top\n    hline(bbox.top)\n\n    // --- line bottom\n    hline(bbox.bottom)\n\n    // --- line left\n    vline(bbox.left)\n    // --- line right\n    vline(bbox.right)\n\n    context.restore()\n\n    function vline(x: number) {\n      line(x, margin, x, image.height - margin)\n    }\n\n    function hline(y: number) {\n      line(margin, y, image.width - margin, y)\n    }\n\n    function line(x1: number, y1: number, x2: number, y2: number) {\n      context.beginPath()\n      context.moveTo(x1, y1)\n      context.lineTo(x2, y2)\n      context.stroke()\n      context.closePath()\n    }\n  }\n\n  paintBackground(context: CanvasRenderingContext2D) {\n    const {image} = this.props\n    const inner = new Rect().setSize(image.width, image.height).shrink(MARGIN_PX * this.getScale())\n\n    context.save()\n    context.fillStyle = 'white'\n    context.clearRect(0, 0, image.width, image.height)\n\n    context.globalAlpha = 0.3\n    //context.globalCompositeOperation = 'lighten';\n\n    context.drawImage(image, inner.left, inner.top, inner.width, inner.height)\n    context.restore()\n  }\n\n  paint(context: CanvasRenderingContext2D) {\n    const {readOnly} = this.props\n    context.save()\n\n    const pxratio = getDevicePixelRatio()\n    context.scale(pxratio, pxratio)\n\n    const opacity = !readOnly && this.state.mousePosition ? 0.8 : 0.2\n\n    this.paintBackground(context)\n    //return context.restore();\n    this.paintHotspot(context, opacity)\n    //this.paintDragHandle(context);\n    this.debug(context)\n    this.paintCropBorder(context)\n\n    if (!readOnly) {\n      this.highlightCropHandles(context, opacity)\n    }\n\n    if (this.state.mousePosition) {\n      // this.paintMousePosition(context)\n    }\n\n    context.restore()\n  }\n\n  paintMousePosition(context: CanvasRenderingContext2D) {\n    if (!this.state.mousePosition) {\n      return\n    }\n\n    const {x, y} = this.state.mousePosition\n    context.beginPath()\n    context.arc(x, y, 14 * this.getScale(), 0, 2 * Math.PI, false)\n    context.fillStyle = 'lightblue'\n    context.fill()\n    context.restore()\n  }\n\n  paintCropBorder(context: CanvasRenderingContext2D) {\n    const cropRect = this.getCropRect()\n    context.save()\n    context.beginPath()\n    context.fillStyle = 'rgba(66, 66, 66, 0.9)'\n    context.lineWidth = 1\n    context.rect(cropRect.left, cropRect.top, cropRect.width, cropRect.height)\n    context.stroke()\n    context.closePath()\n    context.restore()\n  }\n\n  highlightCropHandles(context: CanvasRenderingContext2D, opacity: number) {\n    context.save()\n    const cropHandles = this.getCropHandles()\n\n    //context.globalCompositeOperation = \"difference\";\n\n    cropHandleKeys.forEach((handle) => {\n      context.fillStyle =\n        this.state.cropping === handle\n          ? `rgba(202, 54, 53, ${opacity})`\n          : `rgba(230, 230, 230, ${opacity + 0.4})`\n      const {left, top, height, width} = cropHandles[handle]\n      context.fillRect(left, top, width, height)\n      context.beginPath()\n      context.fillStyle = `rgba(66, 66, 66, ${opacity})`\n      context.rect(left, top, width, height)\n      context.closePath()\n      context.stroke()\n    })\n    context.restore()\n  }\n\n  getScale() {\n    const actualSize = this.getActualSize()\n    return this.props.image.width / actualSize.width\n  }\n\n  getCursor() {\n    const {mousePosition} = this.state\n    const {readOnly} = this.props\n    if (!mousePosition || readOnly) {\n      return 'auto'\n    }\n\n    const activeCropArea = this.state.cropping || this.getActiveCropHandleFor(mousePosition)\n    if (activeCropArea) {\n      return getCropCursorForHandle(activeCropArea) || 'auto'\n    }\n\n    const mouseOverDragHandle = utils2d.isPointInCircle(mousePosition, this.getDragHandleCoords())\n\n    if (this.state.resizing || mouseOverDragHandle) {\n      return 'move'\n    }\n\n    if (this.state.moving || this.state.cropMoving) {\n      return `url(${cursors.CLOSE_HAND}), move`\n    }\n\n    const mouseoverHotspot = utils2d.isPointInEllipse(mousePosition, this.getHotspotRect())\n    const mouseoverCropRect = utils2d.isPointInRect(mousePosition, this.getCropRect())\n    if (mouseoverHotspot || mouseoverCropRect) {\n      return `url(${cursors.OPEN_HAND}), move`\n    }\n\n    return 'auto'\n  }\n\n  componentDidMount() {\n    this.draw()\n  }\n\n  componentDidUpdate() {\n    this.draw()\n  }\n\n  draw() {\n    if (!this.canvas) {\n      return\n    }\n\n    const domNode = this.canvas.domNode\n    const context = domNode.getContext('2d')\n    if (!context) {\n      return\n    }\n\n    this.paint(context)\n    const currentCursor = domNode.style.cursor\n    const newCursor = this.getCursor()\n    if (currentCursor !== newCursor) {\n      domNode.style.cursor = newCursor\n    }\n  }\n\n  handleDragStart = ({x, y}: Coordinate) => {\n    const mousePosition = {x: x * this.getScale(), y: y * this.getScale()}\n\n    const inHotspot = utils2d.isPointInEllipse(mousePosition, this.getHotspotRect())\n\n    const inDragHandle = utils2d.isPointInCircle(mousePosition, this.getDragHandleCoords())\n\n    const activeCropHandle = this.getActiveCropHandleFor(mousePosition)\n\n    const inCropRect = utils2d.isPointInRect(mousePosition, this.getCropRect())\n\n    if (activeCropHandle) {\n      this.setState({cropping: activeCropHandle})\n    } else if (inDragHandle) {\n      this.setState({resizing: true})\n    } else if (inHotspot) {\n      this.setState({moving: true})\n    } else if (inCropRect) {\n      this.setState({cropMoving: true})\n    }\n  }\n\n  handleDrag = (pos: Coordinate) => {\n    if (this.state.cropping) {\n      this.emitCrop(this.state.cropping, pos)\n    } else if (this.state.cropMoving) {\n      this.emitCropMove(pos)\n    } else if (this.state.moving) {\n      this.emitMove(pos)\n    } else if (this.state.resizing) {\n      this.emitResize(pos)\n    }\n  }\n\n  handleDragEnd = () => {\n    const {onChange, onChangeEnd} = this.props\n    this.setState({moving: false, resizing: false, cropping: false, cropMoving: false})\n    const {hotspot, crop: rawCrop} = this.getClampedValue()\n\n    const crop = normalizeRect(rawCrop)\n\n    const finalValue = {\n      crop: {\n        top: crop.top,\n        bottom: 1 - crop.bottom,\n        left: crop.left,\n        right: 1 - crop.right,\n      },\n      hotspot: {\n        x: hotspot.center.x,\n        y: hotspot.center.y,\n        height: Math.abs(hotspot.height),\n        width: Math.abs(hotspot.width),\n      },\n    }\n    onChange(finalValue)\n    if (onChangeEnd) {\n      onChangeEnd(finalValue)\n    }\n  }\n\n  handleMouseOut = () => {\n    this.setState({mousePosition: null})\n  }\n\n  handleMouseMove = (event: MouseEvent<HTMLCanvasElement>) => {\n    const clientRect = event.currentTarget.getBoundingClientRect()\n    this.setState({\n      mousePosition: {\n        x: (event.clientX - clientRect.left) * this.getScale(),\n        y: (event.clientY - clientRect.top) * this.getScale(),\n      },\n    })\n  }\n\n  setCanvas = (node: {domNode: HTMLCanvasElement}) => {\n    this.canvas = node\n  }\n\n  render() {\n    const {image, readOnly} = this.props\n    const ratio = getDevicePixelRatio()\n    return (\n      <RootContainer>\n        <CanvasContainer\n          readOnly={readOnly}\n          ref={this.setCanvas}\n          onDrag={this.handleDrag}\n          onDragStart={this.handleDragStart}\n          onDragEnd={this.handleDragEnd}\n          onMouseMove={this.handleMouseMove}\n          onMouseOut={this.handleMouseOut}\n          height={image.height * ratio}\n          width={image.width * ratio}\n        />\n      </RootContainer>\n    )\n  }\n}\n\nfunction applyHotspotMoveBy(value: Partial<CropAndHotspot>, delta: Coordinate): {hotspot: Hotspot} {\n  const currentHotspot = (value && value.hotspot) || DEFAULT_HOTSPOT\n\n  return {\n    ...value,\n    hotspot: {\n      ...currentHotspot,\n      x: currentHotspot.x + delta.x,\n      y: currentHotspot.y + delta.y,\n    },\n  }\n}\n\nfunction applyHotspotResizeBy(\n  value: Partial<CropAndHotspot>,\n  delta: Dimensions\n): {hotspot: Hotspot} {\n  const currentHotspot = (value && value.hotspot) || DEFAULT_HOTSPOT\n  return {\n    ...value,\n    hotspot: {\n      ...currentHotspot,\n      height: currentHotspot.height + delta.height,\n      width: currentHotspot.width + delta.width,\n    },\n  }\n}\n\nfunction applyCropMoveBy(value: Partial<CropAndHotspot>, delta: Offsets): {crop: Crop} {\n  const currentCrop = (value && value.crop) || DEFAULT_CROP\n  return {\n    ...value,\n    crop: {\n      left: currentCrop.left + (delta.left || 0),\n      right: currentCrop.right + (delta.right || 0),\n      top: currentCrop.top + (delta.top || 0),\n      bottom: currentCrop.bottom + (delta.bottom || 0),\n    },\n  }\n}\n","import React from 'react'\n\nexport interface ResizeProps {\n  image: HTMLImageElement\n  maxHeight: number\n  maxWidth: number\n  children: (canvas: HTMLCanvasElement) => React.ReactNode\n}\n\nexport class Resize extends React.Component<ResizeProps> {\n  _canvas: HTMLCanvasElement | null = null\n\n  componentWillUnmount() {\n    if (this._canvas) {\n      document.body.removeChild(this._canvas)\n    }\n  }\n\n  getCanvas() {\n    if (!this._canvas) {\n      this._canvas = document.createElement('canvas')\n      document.body.appendChild(this._canvas)\n      this._canvas.style.display = 'none'\n    }\n    return this._canvas\n  }\n\n  resize(image: HTMLImageElement, maxHeight: number, maxWidth: number) {\n    const canvas = this.getCanvas()\n    const ratio = image.width / image.height\n    const width = Math.min(image.width, maxWidth)\n    const height = Math.min(image.height, maxHeight)\n\n    const landscape = image.width > image.height\n    const targetWidth = landscape ? width : height * ratio\n    const targetHeight = landscape ? width / ratio : height\n\n    canvas.width = targetWidth\n    canvas.height = targetHeight\n\n    const ctx = canvas.getContext('2d')\n    if (ctx) {\n      ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, targetWidth, targetHeight)\n    }\n\n    return canvas\n  }\n\n  render() {\n    const {image, maxHeight, maxWidth, children} = this.props\n    return children(this.resize(image, maxHeight, maxWidth))\n  }\n}\n","import React from 'react'\nimport {ImageLoader} from './ImageLoader'\nimport {ToolCanvas} from './ToolCanvas'\nimport {Resize} from './Resize'\nimport type {ToolCanvasProps} from './types'\n\nexport interface ImageToolProps extends Omit<ToolCanvasProps, 'image'> {\n  image?: HTMLCanvasElement\n  src: string\n}\n\nexport function ImageTool(props: ImageToolProps) {\n  return (\n    <ImageLoader src={props.src}>\n      {({isLoading, image, error}) => {\n        if (isLoading) {\n          return <div>Loading...</div>\n        }\n        if (error) {\n          return <div>{error.message}</div>\n        }\n        if (image) {\n          return (\n            <Resize image={image} maxHeight={ImageTool.maxHeight} maxWidth={ImageTool.maxWidth}>\n              {(canvas) => <ToolCanvas image={canvas} {...props} />}\n            </Resize>\n          )\n        }\n        return null\n      }}\n    </ImageLoader>\n  )\n}\n\nImageTool.maxHeight = 500\nImageTool.maxWidth = 1000\n","import type {CSSProperties} from 'react'\nimport {DEFAULT_HOTSPOT, DEFAULT_CROP} from './constants'\nimport {Crop, Hotspot, CropMethod, CropAndHotspot} from './types'\n\ninterface Options {\n  image?: {aspectRatio: number} | {height: number; width: number}\n  container?: {aspectRatio: number} | {height: number; width: number}\n  hotspot?: Hotspot\n  crop?: Crop\n  align?: CropAlignment\n}\n\ninterface CSSBox {\n  width: number\n  height: number\n  left: number\n  top: number\n}\n\ninterface CropAlignment {\n  x: 'left' | 'right' | 'center'\n  y: 'top' | 'bottom' | 'center'\n}\n\ninterface HotspotCropStyleResult {\n  crop: CSSBox\n  image: CSSBox\n  method: CropMethod\n}\n\nexport interface CalculatedStyles {\n  container: CSSProperties\n  padding: CSSProperties\n  crop: CSSProperties\n  image: CSSProperties\n  debug: {\n    result: HotspotCropStyleResult\n  }\n}\n\nexport function calculateStyles(options: Options = {}): CalculatedStyles {\n  const imageAspect = readAspectRatio(options.image) || 1\n\n  const hotspot = options.hotspot || DEFAULT_HOTSPOT\n  const crop = options.crop || DEFAULT_CROP\n  const containerAspect = readAspectRatio(options.container) || imageAspect * readCropAspect(crop)\n\n  const align = options.align || {x: 'center', y: 'center'}\n\n  const result = calculateHotSpotCrop(\n    imageAspect,\n    {hotspot, crop},\n    {aspect: containerAspect, align}\n  )\n\n  const containerHeight = styleFormat(round(100 / containerAspect))\n\n  return {\n    debug: {\n      result,\n    },\n    container: {\n      //outline: '1px solid cyan',\n      overflow: 'hidden',\n      position: 'relative',\n      width: '100%',\n      height: containerHeight,\n    },\n    padding: {\n      marginTop: containerHeight,\n    },\n    crop: {\n      position: 'absolute',\n      overflow: 'hidden',\n      height: toStylePercentage(result.crop.height),\n      width: toStylePercentage(result.crop.width),\n      top: toStylePercentage(result.crop.top),\n      left: toStylePercentage(result.crop.left),\n    },\n    image: {\n      position: 'absolute',\n      height: toStylePercentage(result.image.height),\n      width: toStylePercentage(result.image.width),\n      top: toStylePercentage(result.image.top),\n      left: toStylePercentage(result.image.left),\n    },\n  }\n}\n\nfunction readAspectRatio(opts: Options['image']): number | null {\n  if (!opts) {\n    return null\n  }\n\n  if ('aspectRatio' in opts) {\n    return opts.aspectRatio\n  }\n\n  if ('height' in opts || 'width' in opts) {\n    if (typeof opts.height !== 'number' && typeof opts.width !== 'number') {\n      throw new Error(`Height and width must be numbers, got ${JSON.stringify(opts)}`)\n    }\n\n    return opts.width / opts.height\n  }\n\n  return null\n}\n\nfunction round(num: number, decimals = 2): number {\n  const multiplier = Math.pow(10, decimals)\n  return Math.round(num * multiplier) / multiplier\n}\n\nfunction calculateHotSpotCrop(\n  sourceAspect: number,\n  descriptor: CropAndHotspot,\n  spec: {aspect: number; align: CropAlignment}\n): HotspotCropStyleResult {\n  const crop = descriptor.crop\n  const viewportAspect = spec.aspect\n  const alignment = spec.align\n\n  // The rational aspect of the cropped image\n  const netWidth = 1.0 - crop.left - crop.right\n  const netHeight = 1.0 - crop.top - crop.bottom\n\n  // Places the image inside the crop box\n  const outImg = {\n    top: -crop.top / netHeight,\n    left: -crop.left / netWidth,\n    width: 1 / netWidth,\n    height: 1 / netHeight,\n  }\n\n  // The rational aspect is the aspect ration of the crop in ratios of the image size meaning the image\n  // is always considered having the size 1.0*1.0\n  const cropRationalAspect = netWidth / netHeight\n\n  // cropAspect is the real aspect ratio of the crop box in pixel-space\n  const cropAspect = cropRationalAspect * sourceAspect\n\n  // Now we transform the hotspot to be expressed in ratios of the cropped area, not the\n  // full image:\n  const hotspot = {\n    x: (descriptor.hotspot.x - crop.left) / netWidth,\n    y: (descriptor.hotspot.y - crop.top) / netHeight,\n    height: descriptor.hotspot.height / netHeight,\n    width: descriptor.hotspot.width / netWidth,\n  }\n\n  // Lets calculate the maximum scale the image may be presented at without cropping the hotspot. A scale of\n  // 1.0 means the cropped image exactly fill the width of the viewport.\n\n  // The scale at which the hotspot would fill the viewport exactly in the X direction\n  const maxHotspotXScale = 1.0 / hotspot.width\n  // The scale at which the hotspot would fill the veiwport exactly in the Y direction\n  const maxHotspotYScale = ((1.0 / hotspot.height) * cropAspect) / viewportAspect\n  // This is the largest scale the image can have while still not cropping the hotspot:\n  const maxScale = Math.min(maxHotspotXScale, maxHotspotYScale)\n\n  // Now lets find the minimum scale we can have while maintaining full bleed (no letterboxing)\n  let minFullBleedScale\n  const cropIsTaller = cropAspect <= viewportAspect\n  if (cropIsTaller) {\n    // Crop is taller than viewport\n    minFullBleedScale = 1.0 // By definition 1.0 fills the width of the viewport exactly with the viewport cutting away from the height of the cropbox\n  } else {\n    // Image is wider than viewport\n    minFullBleedScale = cropAspect / viewportAspect // At this scale the viewport is filled exactly in the height while cutting away from the sides\n  }\n\n  let method: CropMethod\n  let outCrop: CSSBox\n\n  // Do we have to letterbox this image in order to leave the hotspot area uncropped?\n  if (minFullBleedScale > maxScale) {\n    // Yes :-( There is no way to protect the hot spot and still have full bleed, so we are letterboxing it\n    method = 'letterbox'\n    let letterboxScale\n    const diff = minFullBleedScale - maxScale\n\n    // Determine a scale where the image fills one dimension of the container\n    if (cropIsTaller) {\n      letterboxScale = 1.0 - diff\n    } else {\n      letterboxScale = maxScale\n    }\n\n    outCrop = {\n      width: letterboxScale,\n      height: (letterboxScale / cropAspect) * viewportAspect,\n\n      // Gets overwritten further down\n      left: 0,\n      top: 0,\n    }\n\n    const hotspotLeft = hotspot.x * outCrop.width - (hotspot.width * outCrop.width) / 2\n    switch (alignment.x) {\n      case 'left':\n        outCrop.left = cropIsTaller ? 0 : -hotspotLeft\n        break\n      case 'right':\n        // todo: broken atm\n        outCrop.left = cropIsTaller ? 1 - outCrop.width : hotspotLeft\n        break\n      case 'center':\n        outCrop.left = cropIsTaller ? (1 - outCrop.width) / 2 : -hotspotLeft\n        break\n      default:\n        throw new Error(\n          `Invalid x alignment: '${alignment.x}'. Must be either 'left', 'right' or 'center'`\n        )\n    }\n    const hotspotTop = hotspot.y * outCrop.height - (hotspot.height * outCrop.height) / 2\n    switch (alignment.y) {\n      case 'top':\n        outCrop.top = cropIsTaller ? -hotspotTop : 0\n        break\n      case 'bottom':\n        // todo: broken atm\n        outCrop.top = hotspotTop\n        break\n      case 'center':\n        outCrop.top = cropIsTaller ? -hotspotTop : (1 - outCrop.height) / 2\n        break\n      default:\n        throw new Error(\n          `Invalid y alignment: '${alignment.y}'. Must be either 'top', 'bottom' or 'center'`\n        )\n    }\n  } else if (cropIsTaller) {\n    // TODO: Clamp hotspot offset to avoid moving image off canvas\n    method = 'full_width'\n\n    let top = (-hotspot.y / cropAspect) * viewportAspect + 0.5\n    const height = (minFullBleedScale / cropAspect) * viewportAspect\n    // Clamp top so that we will not move the image off of the viewport\n    if (top > 0) {\n      top = 0\n    } else if (-top > height - 1.0) {\n      top = -(height - 1.0)\n    }\n\n    outCrop = {\n      width: minFullBleedScale,\n      height,\n      left: 0,\n      // Place the Y center of the hotspot near the center of the viewport\n      top,\n    }\n  } else {\n    // crop is wider\n    method = 'full_height'\n\n    const width = minFullBleedScale\n    let left = 0.5 - hotspot.x * minFullBleedScale\n    if (left > 0) {\n      left = 0\n    } else if (-left > width - 1.0) {\n      left = -(width - 1.0)\n    }\n    // Clamp left so that we will not move the image off of the viewport.\n    outCrop = {\n      width,\n      height: (minFullBleedScale / cropAspect) * viewportAspect,\n      top: 0,\n      // Place the X center of the hotspot at the center of the viewport\n      left,\n    }\n  }\n\n  return {\n    method,\n    crop: outCrop,\n    image: outImg,\n  }\n}\n\nfunction readCropAspect(crop: Crop) {\n  const height = 1 - crop.top - crop.bottom\n  const width = 1 - crop.left - crop.right\n  return width / height\n}\n\nfunction styleFormat(num: number) {\n  return num === 0 ? 0 : `${num}%`\n}\n\nfunction toStylePercentage(num: number) {\n  return styleFormat(round(num * 100))\n}\n","import styled from 'styled-components'\n\nexport const HotspotImageContainer = styled.div`\n  position: relative;\n  width: 100%;\n`\n","import React from 'react'\nimport Debug from 'debug'\nimport {debounce} from 'lodash'\nimport {calculateStyles} from './calculateStyles'\nimport {DEFAULT_HOTSPOT, DEFAULT_CROP} from './constants'\nimport {HotspotImageContainer} from './HotspotImage.styles'\nimport type {Crop, Hotspot} from './types'\n\nconst debug = Debug('sanity-imagetool')\n\nfunction getCropAspect(crop: Crop, srcAspect: number) {\n  const origHeight = 1 / srcAspect\n  const origWidth = srcAspect * origHeight\n  const cropWidth = origWidth - (crop.left + crop.right) * origWidth\n  const cropHeight = origHeight - (crop.top + crop.bottom) * origHeight\n  return cropWidth / cropHeight\n}\n\nexport interface HotspotImageProps {\n  src: string\n  srcAspectRatio: number\n  srcSet?: string\n  hotspot?: Hotspot\n  crop?: Crop\n  aspectRatio?: number | 'auto' | 'none'\n  alignX?: 'left' | 'center' | 'right'\n  alignY?: 'top' | 'center' | 'bottom'\n  className?: string\n  style?: React.CSSProperties\n  alt?: string\n  onError?: (event: React.SyntheticEvent<HTMLImageElement, Event>) => void\n  onLoad?: () => void\n}\nexport interface HotspotImageState {\n  containerAspect: number | null\n}\nexport class HotspotImage extends React.PureComponent<HotspotImageProps, HotspotImageState> {\n  static defaultProps = {\n    alignX: 'center',\n    alignY: 'center',\n    className: '',\n    crop: DEFAULT_CROP,\n    hotspot: DEFAULT_HOTSPOT,\n    aspectRatio: 'none',\n  }\n\n  state: HotspotImageState = {\n    containerAspect: null,\n  }\n\n  containerElement: HTMLDivElement | null = null\n  imageElement: HTMLImageElement | null = null\n\n  componentDidMount() {\n    const imageElement = this.imageElement\n\n    // Fixes issues that may happen if the component is rendered on server and mounted after the image has finished loading\n    // In these situations, neither the onLoad or the onError events will be called.\n    // Derived from http://imagesloaded.desandro.com/\n    const alreadyLoaded =\n      imageElement &&\n      imageElement.src &&\n      imageElement.complete &&\n      imageElement.naturalWidth !== undefined\n\n    if (alreadyLoaded) {\n      debug(\n        \"Image '%s' already loaded, refreshing (from cache) to trigger onLoad / onError\",\n        this.props.src\n      )\n      // eslint-disable-next-line no-self-assign\n      imageElement.src = imageElement.src\n    }\n\n    this.updateContainerAspect(this.props)\n\n    if (typeof window !== 'undefined') {\n      window.addEventListener('resize', this.handleResize)\n    }\n  }\n\n  componentWillUnmount() {\n    if (typeof window !== 'undefined') {\n      window.removeEventListener('resize', this.handleResize)\n    }\n  }\n\n  // eslint-disable-next-line camelcase\n  UNSAFE_componentWillReceiveProps(nextProps: HotspotImageProps) {\n    if (nextProps.aspectRatio !== this.props.aspectRatio) {\n      this.updateContainerAspect(nextProps)\n    }\n  }\n\n  updateContainerAspect(props: HotspotImageProps) {\n    if (!this.containerElement) return\n    if (props.aspectRatio === 'auto') {\n      const parentNode = this.containerElement.parentNode as HTMLElement\n      this.setState({\n        containerAspect: parentNode.offsetWidth / parentNode.offsetHeight,\n      })\n    } else {\n      this.setState({\n        containerAspect: null,\n      })\n    }\n  }\n\n  getTargetAspectValue() {\n    const {aspectRatio, srcAspectRatio, crop} = this.props\n\n    if (aspectRatio === 'none') {\n      return crop ? getCropAspect(crop, srcAspectRatio) : srcAspectRatio\n    }\n\n    if (aspectRatio === 'auto') {\n      return this.state.containerAspect\n    }\n\n    return aspectRatio || null\n  }\n\n  setImageElement = (el: HTMLImageElement | null) => {\n    this.imageElement = el\n  }\n\n  handleResize = debounce(() => this.updateContainerAspect(this.props))\n\n  setContainerElement = (el: HTMLDivElement | null) => {\n    this.containerElement = el\n  }\n\n  render() {\n    const {\n      srcAspectRatio,\n      crop,\n      hotspot,\n      src,\n      srcSet,\n      alignX = 'center',\n      alignY = 'center',\n      className,\n      style,\n      alt,\n      onError,\n      onLoad,\n    } = this.props\n\n    const targetAspect = this.getTargetAspectValue()\n\n    const targetStyles = calculateStyles({\n      container: {aspectRatio: targetAspect || srcAspectRatio},\n      image: {aspectRatio: srcAspectRatio},\n      hotspot,\n      crop,\n      align: {\n        x: alignX,\n        y: alignY,\n      },\n    })\n    return (\n      <HotspotImageContainer\n        className={`${className}`}\n        style={style}\n        ref={this.setContainerElement}\n      >\n        <div style={targetStyles.container}>\n          <div style={targetStyles.padding} />\n          <div style={targetStyles.crop}>\n            <img\n              ref={this.setImageElement}\n              src={src}\n              alt={alt}\n              srcSet={srcSet}\n              onLoad={onLoad}\n              onError={onError}\n              style={targetStyles.image}\n            />\n          </div>\n        </div>\n      </HotspotImageContainer>\n    )\n  }\n}\n","import {Observable} from 'rxjs'\nimport {useEffect, useState} from 'react'\n\n// http://probablyprogramming.com/2009/03/15/the-tiniest-gif-ever\nconst PROBABLY_THE_TINIEST_GIF_EVER = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='\n\nfunction isBlob(src: string) {\n  return src.startsWith('blob:')\n}\n\nexport function loadImage(src: string): Observable<HTMLImageElement> {\n  return new Observable((subscriber) => {\n    const image = document.createElement('img')\n\n    let completed = false\n    const onload = () => {\n      completed = true\n      subscriber.next(image)\n      subscriber.complete()\n    }\n\n    const onerror = () => {\n      completed = true\n      subscriber.error(new Error(`Could not load image from ${isBlob(src) ? 'blob' : src}`))\n    }\n\n    image.onload = onload\n    image.onerror = onerror\n    image.src = src\n\n    return () => {\n      image.onload = null\n      image.onerror = null\n\n      if (!completed) {\n        // if we unsubscribe before it's loaded this will cancel the image loading\n        image.src = PROBABLY_THE_TINIEST_GIF_EVER\n      }\n    }\n  })\n}\n\ntype ImageLoadState = {\n  isLoading: boolean\n  image?: HTMLImageElement\n  error?: Error\n}\n\nconst INITIAL_STATE = {isLoading: true}\n\nexport function useLoadImage(url: string): ImageLoadState {\n  const [state, setState] = useState<ImageLoadState>(INITIAL_STATE)\n\n  useEffect(() => {\n    setState(INITIAL_STATE)\n    const subscription = loadImage(url)\n      // .pipe(delay(2000))\n      .subscribe({\n        error: (err) => {\n          setState({isLoading: false, error: err})\n        },\n        next: (image) => {\n          setState({image, isLoading: false})\n        },\n      })\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [url])\n\n  return state\n}\n","import React, {useCallback, useEffect, useState} from 'react'\nimport type {Image, ImageSchemaType} from '@sanity/types'\nimport {Box, Card, Flex, Text, Grid, Heading} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {ChangeIndicator} from '../../../../components/changeIndicators'\nimport {FormField} from '../../../components/formField'\nimport {set} from '../../../patch'\nimport {RatioBox} from '../common/RatioBox'\nimport {EMPTY_ARRAY} from '../../../utils/empty'\nimport type {ObjectInputProps} from '../../../types'\nimport {useDidUpdate} from '../../../hooks/useDidUpdate'\nimport {ImageTool, HotspotImage, DEFAULT_CROP, DEFAULT_HOTSPOT} from './imagetool'\nimport {useLoadImage} from './useLoadImage'\n\nexport interface ImageToolInputProps\n  extends Omit<ObjectInputProps<Image, ImageSchemaType>, 'markers'> {\n  imageUrl: string\n}\n\nconst HOTSPOT_PATH = ['hotspot']\n\nconst PREVIEW_ASPECT_RATIOS = [\n  ['3:4', 3 / 4],\n  ['Square', 1 / 1],\n  ['16:9', 16 / 9],\n  ['Panorama', 4 / 1],\n] as const\n\nconst DEFAULT_VALUE: Partial<Image> = {\n  crop: DEFAULT_CROP,\n  hotspot: DEFAULT_HOTSPOT,\n}\n\nconst Placeholder = styled.div`\n  min-height: 6em;\n`\n\nfunction LoadStatus(props: {children: React.ReactNode}) {\n  return (\n    <Flex align=\"center\" justify=\"center\" padding={4} style={{overflowWrap: 'break-word'}}>\n      {props.children}\n    </Flex>\n  )\n}\n\nexport function ImageToolInput(props: ImageToolInputProps) {\n  const {\n    imageUrl,\n    value,\n    changed,\n    level,\n    path,\n    focusPath = EMPTY_ARRAY,\n    presence,\n    onChange,\n    schemaType,\n    onFocusPath,\n    readOnly,\n    elementProps,\n  } = props\n\n  const [localValue, setLocalValue] = useState(value || DEFAULT_VALUE)\n\n  const {image, isLoading: isImageLoading, error: imageLoadError} = useLoadImage(imageUrl)\n\n  const handleFocus = useCallback(() => {\n    onFocusPath(HOTSPOT_PATH)\n  }, [onFocusPath])\n\n  useEffect(() => {\n    setLocalValue(value || DEFAULT_VALUE)\n  }, [value])\n\n  const hasFocus = focusPath[0] === 'hotspot'\n\n  useDidUpdate(hasFocus, (hadFocus) => {\n    if (!hadFocus && hasFocus) {\n      elementProps.ref.current?.focus()\n    }\n  })\n\n  const handleChangeEnd = useCallback(\n    (finalValue) => {\n      if (readOnly) {\n        return\n      }\n      // For backwards compatibility, where hotspot/crop might not have a named type yet\n      const cropField = schemaType.fields.find(\n        (field) => field.name === 'crop' && field.type.name !== 'object'\n      )\n\n      const hotspotField = schemaType.fields.find(\n        (field) => field.type.name !== 'object' && field.name === 'hotspot'\n      )\n\n      // Note: when either hotspot or crop change we fill in the default if the other is missing\n      // (we can't have one without the other)\n      const crop = cropField\n        ? {_type: cropField.type.name, ...(finalValue.crop || DEFAULT_CROP)}\n        : finalValue.crop\n\n      const hotspot = hotspotField\n        ? {_type: hotspotField.type.name, ...(finalValue.hotspot || DEFAULT_HOTSPOT)}\n        : finalValue.hotspot\n\n      onChange([set(crop, ['crop']), set(hotspot, ['hotspot'])])\n    },\n    [onChange, readOnly, schemaType.fields]\n  )\n\n  return (\n    <FormField\n      title=\"Hotspot &amp; crop\"\n      level={level}\n      description=\"Adjust the rectangle to crop image. Adjust the circle to specify the area that should always be visible.\"\n      __unstable_presence={presence}\n    >\n      <div>\n        <Card\n          __unstable_checkered\n          __unstable_focusRing\n          tabIndex={0}\n          ref={elementProps.ref}\n          onFocus={handleFocus}\n        >\n          <ChangeIndicator\n            path={path.concat(HOTSPOT_PATH)}\n            hasFocus={focusPath[0] === 'hotspot'}\n            isChanged={changed}\n          >\n            <RatioBox ratio={3 / 2}>\n              {(isImageLoading || imageLoadError) && (\n                <LoadStatus>\n                  {imageLoadError ? (\n                    <Card padding={4} radius={2} tone=\"critical\" border>\n                      <Text>Error: {imageLoadError.message}</Text>\n                    </Card>\n                  ) : (\n                    <Text muted>Loading image… </Text>\n                  )}\n                </LoadStatus>\n              )}\n\n              {!isImageLoading && image && (\n                <Box margin={1}>\n                  <ImageTool\n                    value={localValue}\n                    src={image.src}\n                    readOnly={Boolean(readOnly)}\n                    onChangeEnd={handleChangeEnd}\n                    onChange={setLocalValue}\n                  />\n                </Box>\n              )}\n            </RatioBox>\n          </ChangeIndicator>\n        </Card>\n        <Box marginTop={3}>\n          <Grid columns={PREVIEW_ASPECT_RATIOS.length} gap={1}>\n            {PREVIEW_ASPECT_RATIOS.map(([title, ratio]) => (\n              <div key={ratio}>\n                <Heading as=\"h4\" size={0}>\n                  {title}\n                </Heading>\n                <Box marginTop={2}>\n                  <RatioBox ratio={ratio}>\n                    <Card __unstable_checkered>\n                      {!isImageLoading && image ? (\n                        <HotspotImage\n                          aspectRatio={ratio}\n                          src={image.src}\n                          srcAspectRatio={image.width / image.height}\n                          hotspot={localValue.hotspot || DEFAULT_HOTSPOT}\n                          crop={localValue.crop || DEFAULT_CROP}\n                        />\n                      ) : (\n                        <Placeholder />\n                      )}\n                    </Card>\n                  </RatioBox>\n                </Box>\n              </div>\n            ))}\n          </Grid>\n        </Box>\n      </div>\n    </FormField>\n  )\n}\n","import styled from 'styled-components'\n\nimport {Button, Inline} from '@sanity/ui'\n\nexport const ButtonContainer = styled(Button)`\n  z-index: 100;\n`\n\nexport const MenuActionsWrapper = styled(Inline)`\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 1;\n`\n","import React, {MouseEventHandler, ReactNode, useCallback, useState} from 'react'\n\nimport {EllipsisVerticalIcon, CropIcon} from '@sanity/icons'\nimport {Menu, Popover, useClickOutside, useGlobalKeyDown} from '@sanity/ui'\nimport {MenuActionsWrapper, ButtonContainer} from './ImageActionsMenu.styled'\n\ninterface Props {\n  children: ReactNode\n  onEdit: MouseEventHandler<HTMLButtonElement>\n  showEdit: boolean\n  isMenuOpen: boolean\n  onMenuOpen: (v: boolean) => void\n}\n\nexport function ImageActionsMenu(props: Props) {\n  const {onEdit, children, showEdit, isMenuOpen, onMenuOpen} = props\n  const [menuElement, setMenuRef] = useState<HTMLDivElement | null>(null)\n  const [menuButtonRef, setMenuButtonRef] = useState<HTMLButtonElement | null>(null)\n\n  const handleClick = React.useCallback(() => onMenuOpen(true), [onMenuOpen])\n\n  const handleClickOutside = useCallback(() => {\n    onMenuOpen(false)\n  }, [onMenuOpen])\n\n  const handleGlobalKeyDown = useCallback(\n    (e) => {\n      if (e.key === 'Escape') {\n        onMenuOpen(false)\n        menuButtonRef?.focus()\n      }\n    },\n    [menuButtonRef, onMenuOpen]\n  )\n\n  useClickOutside(handleClickOutside, [menuElement])\n  useGlobalKeyDown(handleGlobalKeyDown)\n\n  return (\n    <MenuActionsWrapper data-buttons space={1} padding={2}>\n      {showEdit && (\n        <ButtonContainer\n          icon={CropIcon}\n          mode=\"ghost\"\n          onClick={onEdit}\n          data-testid=\"options-menu-edit-details\"\n        />\n      )}\n      <Popover\n        content={\n          <Menu ref={setMenuRef} shouldFocus=\"first\">\n            {children}\n          </Menu>\n        }\n        portal\n        constrainSize\n        open={isMenuOpen}\n      >\n        <ButtonContainer\n          icon={EllipsisVerticalIcon}\n          mode=\"ghost\"\n          data-testid=\"options-menu-button\"\n          onClick={handleClick}\n          ref={setMenuButtonRef}\n        />\n      </Popover>\n    </MenuActionsWrapper>\n  )\n}\n","import {studioTheme, rgba, Card, Flex, CardTone, Spinner} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const MAX_DEFAULT_HEIGHT = 30\n\nexport const RatioBox = styled(Card)`\n  position: relative;\n  width: 100%;\n  overflow: hidden;\n  min-height: 3.75rem;\n  max-height: 20rem;\n\n  & > div[data-container] {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex !important;\n    align-items: center;\n    justify-content: center;\n  }\n\n  & img {\n    max-width: 100%;\n    max-height: 100%;\n  }\n`\n\nexport const SpinnerWrapper = styled(Spinner)`\n  position: absolute;\n`\n\nexport const Overlay = styled(Flex)(\n  ({tone, drag}: {tone: Exclude<CardTone, 'inherit'>; drag: boolean}) => {\n    const textColor = studioTheme.color.light[tone].card.enabled.fg\n    const backgroundColor = rgba(studioTheme.color.light[tone].card.enabled.bg, 0.8)\n\n    return css`\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      backdrop-filter: ${drag ? 'blur(10px)' : ''};\n      color: ${tone ? textColor : ''};\n      background-color: ${drag ? backgroundColor : 'transparent'};\n    `\n  }\n)\n\nexport const FlexOverlay = styled(Flex)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n`\n","import React, {ComponentProps, useCallback, useEffect, useState} from 'react'\n\nimport {AccessDeniedIcon, ImageIcon, ReadOnlyIcon} from '@sanity/icons'\nimport {Box, Card, CardTone, Heading, Text, useElementRect} from '@sanity/ui'\nimport {\n  MAX_DEFAULT_HEIGHT,\n  RatioBox,\n  Overlay,\n  FlexOverlay,\n  SpinnerWrapper,\n} from './ImagePreview.styled'\n\ninterface Props {\n  readOnly?: boolean | null\n  drag: boolean\n  isRejected: boolean\n  src: string\n  alt: string\n}\n\n/*\n  Used for setting the initial image height - specifically for images\n  that are small and so can take less space in the document\n*/\nconst getImageSize = (src: string): number[] => {\n  const imageUrlParams = new URLSearchParams(src.split('?')[1])\n  const rect = imageUrlParams.get('rect')\n\n  if (rect) {\n    return [rect.split(',')[2], rect.split(',')[3]].map(Number)\n  }\n\n  return src.split('-')[1].split('.')[0].split('x').map(Number)\n}\n\nexport function ImagePreview(props: ComponentProps<typeof Card> & Props) {\n  const {drag, readOnly, isRejected, src, ...rest} = props\n  const [isLoaded, setLoaded] = useState(false)\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n  const rootRect = useElementRect(rootElement)\n  const rootWidth = rootRect?.width || 0\n  const acceptTone = isRejected || readOnly ? 'critical' : 'primary'\n  const tone = drag ? acceptTone : 'default'\n\n  const maxHeightToPx = (MAX_DEFAULT_HEIGHT * document.documentElement.clientHeight) / 100 // convert from vh to px, max height of the input\n\n  const [imageWidth, imageHeight] = getImageSize(src)\n\n  const imageRatio = imageWidth / imageHeight\n\n  // is the image wider than root? if so calculate the resized height\n  const renderedImageHeight = imageWidth > rootWidth ? rootWidth / imageRatio : imageHeight\n\n  /*\n    if the rendered image is smaller than the max height then it doesn't require a height set\n    otherwise, set the max height (to prevent a large image in the document)\n  */\n  const rootHeight = renderedImageHeight < maxHeightToPx ? null : `${MAX_DEFAULT_HEIGHT}vh`\n\n  useEffect(() => {\n    /* set for when the src is being switched when the image input already had a image src\n    - meaning it already had an asset */\n    setLoaded(false)\n  }, [src])\n\n  const onLoadChange = useCallback(() => {\n    setLoaded(true)\n  }, [])\n\n  return (\n    <RatioBox {...rest} ref={setRootElement} style={{height: rootHeight}} tone=\"transparent\">\n      <Card data-container tone=\"inherit\">\n        {!isLoaded && <OverlayComponent cardTone=\"transparent\" drag content={<SpinnerWrapper />} />}\n        <img\n          src={src}\n          data-testid=\"hotspot-image-input\"\n          alt={props.alt}\n          onLoad={onLoadChange}\n          referrerPolicy=\"strict-origin-when-cross-origin\"\n        />\n      </Card>\n\n      {drag && (\n        <OverlayComponent\n          cardTone={tone}\n          drag={drag}\n          content={\n            <>\n              <Box marginBottom={3}>\n                <Heading>\n                  <HoverIcon isRejected={isRejected} readOnly={readOnly} />\n                </Heading>\n              </Box>\n              <HoverText isRejected={isRejected} readOnly={readOnly} />\n            </>\n          }\n        />\n      )}\n    </RatioBox>\n  )\n}\n\nfunction HoverIcon({isRejected, readOnly}: {isRejected: boolean; readOnly?: boolean}) {\n  if (isRejected) {\n    return <AccessDeniedIcon />\n  }\n  if (readOnly) {\n    return <ReadOnlyIcon />\n  }\n  return <ImageIcon />\n}\n\nfunction HoverText({isRejected, readOnly}: {isRejected: boolean; readOnly?: boolean}) {\n  let message = 'Drop image to upload'\n  if (isRejected) {\n    message = 'Cannot upload this file here'\n  }\n  if (readOnly) {\n    message = 'This field is read only'\n  }\n\n  return <Text size={1}>{message}</Text>\n}\n\nfunction OverlayComponent({\n  cardTone,\n  drag,\n  content,\n}: {\n  cardTone: Exclude<CardTone, 'inherit'>\n  drag: boolean\n  content: React.ReactNode\n}) {\n  return (\n    <Overlay justify=\"flex-end\" padding={3} tone={cardTone} drag={drag}>\n      <FlexOverlay direction=\"column\" align=\"center\" justify=\"center\">\n        {content}\n      </FlexOverlay>\n    </Overlay>\n  )\n}\n","import {ResetIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Card, Flex, Box, Text, Stack, Button} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\ntype Props = {\n  onClearValue?: () => void\n}\n\nconst ButtonWrapper = styled(Button)`\n  width: 100%;\n`\n\nexport function InvalidImageWarning({onClearValue}: Props) {\n  return (\n    <Card tone=\"caution\" padding={4} border radius={2}>\n      <Flex gap={4} marginBottom={4}>\n        <Box>\n          <Text size={1}>\n            <WarningOutlineIcon />\n          </Text>\n        </Box>\n        <Stack space={3}>\n          <Text size={1} weight=\"semibold\">\n            Invalid image value\n          </Text>\n          <Text size={1}>\n            The value of this field is not a valid image. Resetting this field will let you choose a\n            new image.\n          </Text>\n        </Stack>\n      </Flex>\n      <ButtonWrapper icon={ResetIcon} text=\"Reset value\" onClick={onClearValue} mode=\"ghost\" />\n    </Card>\n  )\n}\n","/* eslint-disable import/no-unresolved,react/jsx-handler-names */\n\nimport {\n  Box,\n  Button,\n  Card,\n  Dialog,\n  Menu,\n  MenuButton,\n  MenuButtonProps,\n  MenuItem,\n  Stack,\n  ToastParams,\n} from '@sanity/ui'\nimport {get} from 'lodash'\nimport {Observable, Subscription} from 'rxjs'\nimport {ChevronDownIcon, ImageIcon, SearchIcon} from '@sanity/icons'\nimport {\n  AssetFromSource,\n  AssetSource,\n  Image as BaseImage,\n  ImageAsset,\n  ImageSchemaType,\n  Path,\n  UploadState,\n} from '@sanity/types'\nimport React, {ReactNode} from 'react'\nimport deepCompare from 'react-fast-compare'\nimport {SanityClient} from '@sanity/client'\nimport {PatchEvent, setIfMissing, unset} from '../../../patch'\nimport {FieldMember} from '../../../store'\nimport {FIXME, InputProps, ObjectInputProps} from '../../../types'\nimport {PresenceOverlay} from '../../../../presence'\nimport {ImperativeToast} from '../../../../components/transitional'\nimport {\n  ResolvedUploader,\n  Uploader,\n  UploaderResolver,\n  UploadOptions,\n} from '../../../studio/uploads/types'\nimport {UploadPlaceholder} from '../common/UploadPlaceholder'\nimport {WithReferencedAsset} from '../../../utils/WithReferencedAsset'\nimport {FileTarget} from '../common/styles'\nimport {ImageUrlBuilder} from '../types'\nimport {UploadProgress} from '../common/UploadProgress'\nimport {handleSelectAssetFromSource} from '../common/assetSource'\nimport {ActionsMenu} from '../common/ActionsMenu'\nimport {UploadWarning} from '../common/UploadWarning'\nimport {ImageToolInput} from '../ImageToolInput'\nimport {ChangeIndicator} from '../../../../components/changeIndicators'\nimport {FormInput} from '../../../FormInput'\nimport {MemberField, MemberFieldError, MemberFieldSet} from '../../../members'\nimport {ImageActionsMenu} from './ImageActionsMenu'\nimport {ImagePreview} from './ImagePreview'\nimport {isImageSource} from '@sanity/asset-utils'\nimport {InvalidImageWarning} from './InvalidImageWarning'\n\nexport interface Image extends Partial<BaseImage> {\n  _upload?: UploadState\n}\n\nexport interface ImageInputProps extends ObjectInputProps<Image, ImageSchemaType> {\n  assetSources: AssetSource[]\n  directUploads?: boolean\n  imageUrlBuilder: ImageUrlBuilder\n  observeAsset: (documentId: string) => Observable<ImageAsset>\n  resolveUploader: UploaderResolver\n  client: SanityClient\n}\n\nconst getDevicePixelRatio = () => {\n  if (typeof window === 'undefined' || !window.devicePixelRatio) {\n    return 1\n  }\n  return Math.round(Math.max(1, window.devicePixelRatio))\n}\n\ntype FileInfo = {\n  type: string // mime type\n  kind: string // 'file' or 'string'\n}\n\ntype ImageInputState = {\n  isUploading: boolean\n  selectedAssetSource: AssetSource | null\n  // Metadata about files currently over the drop area\n  hoveringFiles: FileInfo[]\n  isStale: boolean\n  isMenuOpen: boolean\n}\n\ntype Focusable = {\n  focus: () => void\n  offsetHeight: number\n}\n\nfunction passThrough({children}: {children?: React.ReactNode}) {\n  return children\n}\n\nconst ASSET_FIELD_PATH = ['asset']\n\nconst ASSET_IMAGE_MENU_POPOVER: MenuButtonProps['popover'] = {portal: true}\n\nexport class ImageInput extends React.PureComponent<ImageInputProps, ImageInputState> {\n  _assetElementRef: null | Focusable = null\n  _assetPath: Path\n  uploadSubscription: null | Subscription = null\n\n  state: ImageInputState = {\n    isUploading: false,\n    selectedAssetSource: null,\n    hoveringFiles: [],\n    isStale: false,\n    isMenuOpen: false,\n  }\n\n  constructor(props: ImageInputProps) {\n    super(props)\n    this._assetPath = props.path.concat(ASSET_FIELD_PATH)\n  }\n\n  toast: {push: (params: ToastParams) => void} | null = null\n\n  focus() {\n    if (this._assetElementRef) {\n      this._assetElementRef.focus()\n    }\n  }\n\n  setFocusElement = (el: HTMLElement | null) => {\n    this._assetElementRef = el\n  }\n\n  isImageToolEnabled() {\n    return get(this.props.schemaType, 'options.hotspot') === true\n  }\n\n  clearUploadStatus() {\n    if (this.props.value?._upload) {\n      this.props.onChange(unset(['_upload']))\n    }\n  }\n\n  cancelUpload() {\n    if (this.uploadSubscription) {\n      this.uploadSubscription.unsubscribe()\n      this.clearUploadStatus()\n    }\n  }\n\n  getUploadOptions = (file: File): ResolvedUploader[] => {\n    const {schemaType, resolveUploader} = this.props\n    const uploader = resolveUploader && resolveUploader(schemaType, file)\n    return uploader ? [{type: schemaType, uploader}] : []\n  }\n\n  uploadFirstAccepted(files: File[]) {\n    const {schemaType, resolveUploader} = this.props\n\n    const match = files\n      .map((file) => ({file, uploader: resolveUploader(schemaType, file)}))\n      .find((result) => result.uploader)\n\n    if (match) {\n      this.uploadWith(match.uploader!, match.file)\n    }\n\n    this.setState({isMenuOpen: false})\n  }\n\n  uploadWith = (uploader: Uploader, file: File, assetDocumentProps: UploadOptions = {}) => {\n    const {schemaType, onChange, client} = this.props\n    const {label, title, description, creditLine, source} = assetDocumentProps\n    const options = {\n      metadata: get(schemaType, 'options.metadata'),\n      storeOriginalFilename: get(schemaType, 'options.storeOriginalFilename'),\n      label,\n      title,\n      description,\n      creditLine,\n      source,\n    }\n\n    this.cancelUpload()\n    this.setState({isUploading: true})\n    onChange(setIfMissing({_type: schemaType.name}))\n    this.uploadSubscription = uploader.upload(client, file, schemaType, options).subscribe({\n      next: (uploadEvent) => {\n        if (uploadEvent.patches) {\n          onChange(uploadEvent.patches)\n        }\n      },\n      error: (err) => {\n        // eslint-disable-next-line no-console\n        console.error(err)\n        this.toast?.push({\n          status: 'error',\n          description: 'The upload could not be completed at this time.',\n          title: 'Upload failed',\n        })\n\n        this.clearUploadStatus()\n      },\n      complete: () => {\n        onChange([unset(['hotspot']), unset(['crop'])])\n        this.setState({isUploading: false})\n        // this.toast.push({\n        //   status: 'success',\n        //   title: 'Upload completed',\n        // })\n      },\n    })\n  }\n\n  handleRemoveButtonClick = () => {\n    const {value} = this.props\n\n    // When removing the image, we should also remove any crop and hotspot\n    // _type and _key are \"meta\"-properties and are not significant unless\n    // other properties are present. Thus, we want to remove the entire\n    // \"container\" object if these are the only properties present, BUT\n    // only if we're not an array element, as removing the array element\n    // will close the selection dialog. Instead, when closing the dialog,\n    // the array logic will check for an \"empty\" value and remove it for us\n    const allKeys = Object.keys(value || {})\n    const remainingKeys = allKeys.filter(\n      (key) => !['_type', '_key', '_upload', 'asset', 'crop', 'hotspot'].includes(key)\n    )\n\n    const isEmpty = remainingKeys.length === 0\n    const removeKeys = ['asset']\n      .concat(allKeys.filter((key) => ['crop', 'hotspot', '_upload'].includes(key)))\n      .map((key) => unset([key]))\n\n    this.props.onChange(isEmpty && !this.valueIsArrayElement() ? unset() : removeKeys)\n  }\n\n  handleFieldChange = (event: PatchEvent) => {\n    const {onChange, schemaType} = this.props\n\n    // When editing a metadata field for an image (eg `altText`), and no asset\n    // is currently selected, we want to unset the entire image field if the\n    // field we are currently editing goes blank and gets unset.\n    //\n    // For instance:\n    // An image field with an `altText` and a `title` subfield, where the image\n    // `asset` and the `title` field is empty, and we are erasing the `alt` field.\n    // We do _not_ however want to clear the field if any content is present in\n    // the other fields - but we do not consider `crop` and `hotspot`.\n    //\n    // Also, we don't want to use this logic for array items, since the parent will\n    // take care of it when closing the array dialog\n    if (!this.valueIsArrayElement() && this.eventIsUnsettingLastFilledField(event)) {\n      onChange(unset())\n      return\n    }\n\n    onChange(\n      event.prepend(\n        setIfMissing({\n          _type: schemaType.name,\n        })\n      ).patches\n    )\n  }\n\n  eventIsUnsettingLastFilledField = (event: PatchEvent): boolean => {\n    const patch = event.patches[0]\n    if (event.patches.length !== 1 || patch.type !== 'unset') {\n      return false\n    }\n\n    const allKeys = Object.keys(this.props.value || {})\n    const remainingKeys = allKeys.filter(\n      (key) => !['_type', '_key', 'crop', 'hotspot'].includes(key)\n    )\n\n    const isEmpty =\n      event.patches[0].path.length === 1 &&\n      remainingKeys.length === 1 &&\n      remainingKeys[0] === event.patches[0].path[0]\n\n    return isEmpty\n  }\n\n  valueIsArrayElement = () => {\n    const {path} = this.props\n    const parentPathSegment = path.slice(-1)[0]\n\n    // String path segment mean an object path, while a number or a\n    // keyed segment means we're a direct child of an array\n    return typeof parentPathSegment !== 'string'\n  }\n\n  handleOpenDialog = () => {\n    const {onOpenField} = this.props\n    onOpenField('hotspot')\n  }\n\n  handleCloseDialog = () => {\n    const {onCloseField} = this.props\n    onCloseField('hotspot')\n  }\n\n  handleSelectAssetFromSource = (assetFromSource: AssetFromSource[]) => {\n    const {onChange, schemaType, resolveUploader} = this.props\n    handleSelectAssetFromSource({\n      assetFromSource,\n      onChange,\n      type: schemaType,\n      resolveUploader,\n      uploadWith: this.uploadWith,\n      isImage: true,\n    })\n\n    this.setState({selectedAssetSource: null})\n  }\n\n  handleFilesOver = (hoveringFiles: FileInfo[]) => {\n    this.setState({\n      hoveringFiles,\n    })\n  }\n  handleFilesOut = () => {\n    this.setState({\n      hoveringFiles: [],\n    })\n  }\n\n  handleCancelUpload = () => {\n    this.cancelUpload()\n  }\n\n  handleClearUploadState = () => {\n    this.setState({isStale: false})\n    this.clearUploadStatus()\n  }\n\n  handleStaleUpload = () => {\n    this.setState({isStale: true})\n  }\n\n  handleClearField = () => {\n    this.props.onChange([unset(['asset']), unset(['crop']), unset(['hotspot'])])\n  }\n\n  handleSelectFiles = (files: File[]) => {\n    const {directUploads, readOnly} = this.props\n    const {hoveringFiles} = this.state\n\n    if (directUploads && !readOnly) {\n      this.uploadFirstAccepted(files)\n    } else if (hoveringFiles.length > 0) {\n      this.handleFilesOut()\n    }\n  }\n\n  handleSelectImageFromAssetSource = (source: AssetSource) => {\n    this.setState({selectedAssetSource: source})\n  }\n\n  handleAssetSourceClosed = () => {\n    this.setState({selectedAssetSource: null})\n  }\n\n  renderHotspotInput = (hotspotInputProps: InputProps) => {\n    const {value, changed, id, imageUrlBuilder} = this.props\n\n    const withImageTool = this.isImageToolEnabled() && value && value.asset\n\n    return (\n      <Dialog\n        header=\"Edit hotspot and crop\"\n        id={`${id}_dialog`}\n        onClose={this.handleCloseDialog}\n        width={1}\n        __unstable_autoFocus={false}\n      >\n        <PresenceOverlay>\n          <Box padding={4}>\n            <Stack space={5}>\n              {withImageTool && value?.asset && (\n                <ImageToolInput\n                  {...this.props}\n                  imageUrl={imageUrlBuilder.image(value.asset).url()}\n                  value={value as FIXME}\n                  presence={hotspotInputProps.presence}\n                  changed={changed}\n                />\n              )}\n            </Stack>\n          </Box>\n        </PresenceOverlay>\n      </Dialog>\n    )\n  }\n\n  renderPreview = () => {\n    const {value, schemaType, readOnly, directUploads, imageUrlBuilder, resolveUploader} =\n      this.props\n\n    if (!value || !isImageSource(value)) {\n      return null\n    }\n\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n    const imageUrl = imageUrlBuilder\n      .width(2000)\n      .fit('max')\n      .image(value)\n      .dpr(getDevicePixelRatio())\n      .auto('format')\n      .url()\n\n    return (\n      <ImagePreview\n        drag={!value?._upload && hoveringFiles.length > 0}\n        isRejected={rejectedFilesCount > 0 || !directUploads}\n        readOnly={readOnly}\n        src={imageUrl}\n        alt=\"Preview of uploaded image\"\n      />\n    )\n  }\n\n  renderAssetMenu() {\n    const {\n      value,\n      assetSources,\n      schemaType,\n      readOnly,\n      directUploads,\n      imageUrlBuilder,\n      observeAsset,\n    } = this.props\n    const {isMenuOpen} = this.state\n\n    const asset = value?.asset\n    if (!asset) {\n      return null\n    }\n\n    const accept = get(schemaType, 'options.accept', 'image/*')\n\n    const showAdvancedEditButton = value && asset && this.isImageToolEnabled()\n\n    let browseMenuItem: ReactNode =\n      assetSources && assetSources.length === 0 ? null : (\n        <MenuItem\n          icon={SearchIcon}\n          text=\"Select\"\n          onClick={() => {\n            this.setState({isMenuOpen: false})\n            this.handleSelectImageFromAssetSource(assetSources[0])\n          }}\n          disabled={readOnly}\n          data-testid=\"file-input-browse-button\"\n        />\n      )\n\n    if (assetSources && assetSources.length > 1) {\n      browseMenuItem = assetSources.map((assetSource) => {\n        return (\n          <MenuItem\n            key={assetSource.name}\n            text={assetSource.title}\n            onClick={() => {\n              this.setState({isMenuOpen: false})\n              this.handleSelectImageFromAssetSource(assetSource)\n            }}\n            icon={assetSource.icon || ImageIcon}\n            data-testid={`file-input-browse-button-${assetSource.name}`}\n            disabled={readOnly}\n          />\n        )\n      })\n    }\n\n    return (\n      <WithReferencedAsset observeAsset={observeAsset} reference={asset}>\n        {({_id, originalFilename, extension}) => {\n          let copyUrl: string | undefined\n          let downloadUrl: string | undefined\n\n          if (isImageSource(value)) {\n            const filename = originalFilename || `download.${extension}`\n            downloadUrl = imageUrlBuilder.image(_id).forceDownload(filename).url()\n            copyUrl = imageUrlBuilder.image(_id).url()\n          }\n\n          return (\n            <ImageActionsMenu\n              isMenuOpen={isMenuOpen}\n              onEdit={this.handleOpenDialog}\n              showEdit={showAdvancedEditButton}\n              onMenuOpen={(isOpen) => this.setState({isMenuOpen: isOpen})}\n            >\n              <ActionsMenu\n                onUpload={this.handleSelectFiles}\n                browse={browseMenuItem}\n                onReset={this.handleRemoveButtonClick}\n                downloadUrl={downloadUrl}\n                copyUrl={copyUrl}\n                readOnly={readOnly}\n                directUploads={directUploads}\n                accept={accept}\n              />\n            </ImageActionsMenu>\n          )\n        }}\n      </WithReferencedAsset>\n    )\n  }\n\n  renderBrowser() {\n    const {assetSources, readOnly, directUploads, id} = this.props\n\n    if (assetSources && assetSources.length === 0) return null\n\n    if (assetSources && assetSources.length > 1 && !readOnly && directUploads) {\n      return (\n        <MenuButton\n          id={`${id}_assetImageButton`}\n          button={\n            <Button\n              mode=\"ghost\"\n              text=\"Select\"\n              data-testid=\"file-input-multi-browse-button\"\n              icon={SearchIcon}\n              iconRight={ChevronDownIcon}\n            />\n          }\n          menu={\n            <Menu>\n              {assetSources.map((assetSource) => {\n                return (\n                  <MenuItem\n                    key={assetSource.name}\n                    text={assetSource.title}\n                    onClick={() => {\n                      this.setState({isMenuOpen: false})\n                      this.handleSelectImageFromAssetSource(assetSource)\n                    }}\n                    icon={assetSource.icon || ImageIcon}\n                    disabled={readOnly}\n                    data-testid={`file-input-browse-button-${assetSource.name}`}\n                  />\n                )\n              })}\n            </Menu>\n          }\n          popover={ASSET_IMAGE_MENU_POPOVER}\n        />\n      )\n    }\n\n    return (\n      <Button\n        fontSize={2}\n        text=\"Select\"\n        icon={SearchIcon}\n        mode=\"ghost\"\n        onClick={() => {\n          this.setState({isMenuOpen: false})\n          this.handleSelectImageFromAssetSource(assetSources[0])\n        }}\n        data-testid=\"file-input-browse-button\"\n        disabled={readOnly}\n      />\n    )\n  }\n\n  renderUploadPlaceholder() {\n    const {schemaType, readOnly, directUploads, resolveUploader} = this.props\n\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n\n    const accept = get(schemaType, 'options.accept', 'image/*')\n\n    return (\n      <div style={{padding: 1}}>\n        <Card\n          tone={readOnly ? 'transparent' : 'inherit'}\n          border\n          padding={3}\n          style={\n            hoveringFiles.length === 0\n              ? {borderStyle: 'dashed'}\n              : {borderStyle: 'dashed', borderColor: 'transparent'}\n          }\n        >\n          <UploadPlaceholder\n            browse={this.renderBrowser()}\n            onUpload={this.handleSelectFiles}\n            readOnly={readOnly}\n            hoveringFiles={hoveringFiles}\n            acceptedFiles={acceptedFiles}\n            rejectedFilesCount={rejectedFilesCount}\n            type=\"image\"\n            accept={accept}\n            directUploads={directUploads}\n          />\n        </Card>\n      </div>\n    )\n  }\n\n  renderUploadState(uploadState: UploadState) {\n    const {isUploading} = this.state\n    const elementHeight = this._assetElementRef?.offsetHeight\n    const height = elementHeight === 0 ? undefined : elementHeight\n\n    return (\n      <UploadProgress\n        uploadState={uploadState}\n        onCancel={isUploading ? this.handleCancelUpload : undefined}\n        onStale={this.handleStaleUpload}\n        height={height}\n      />\n    )\n  }\n\n  renderAssetSource() {\n    const {selectedAssetSource} = this.state\n    const {value, observeAsset} = this.props\n    if (!selectedAssetSource) {\n      return null\n    }\n    const Component = selectedAssetSource.component\n    if (value && value.asset) {\n      return (\n        <WithReferencedAsset observeAsset={observeAsset} reference={value.asset}>\n          {(imageAsset) => (\n            <Component\n              selectedAssets={[imageAsset]}\n              assetType=\"image\"\n              selectionType=\"single\"\n              onClose={this.handleAssetSourceClosed}\n              onSelect={this.handleSelectAssetFromSource}\n            />\n          )}\n        </WithReferencedAsset>\n      )\n    }\n    return (\n      <Component\n        selectedAssets={[]}\n        selectionType=\"single\"\n        assetType=\"image\"\n        onClose={this.handleAssetSourceClosed}\n        onSelect={this.handleSelectAssetFromSource}\n      />\n    )\n  }\n\n  setToast = (toast: {push: (params: ToastParams) => void}) => {\n    this.toast = toast\n  }\n\n  getFileTone() {\n    const {schemaType, value, readOnly, directUploads, resolveUploader} = this.props\n\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n\n    if (hoveringFiles.length > 0) {\n      if (rejectedFilesCount > 0 || !directUploads) {\n        return 'critical'\n      }\n    }\n\n    if (!value?._upload && !readOnly && hoveringFiles.length > 0) {\n      return 'primary'\n    }\n\n    if (readOnly) {\n      return 'transparent'\n    }\n\n    return value?._upload && value?.asset ? 'transparent' : 'default'\n  }\n\n  renderAsset() {\n    const {value, readOnly, elementProps} = this.props\n\n    const {hoveringFiles, isStale} = this.state\n\n    const hasValueOrUpload = Boolean(value?._upload || value?.asset)\n\n    if (value && typeof value.asset !== 'undefined' && !value?._upload && !isImageSource(value)) {\n      return () => <InvalidImageWarning onClearValue={this.handleClearField} />\n    }\n\n    // todo: convert this to a functional component and use this with useCallback\n    //  it currently has to return a new function on every render in order to pick up state from this component\n    return (inputProps: InputProps) => (\n      <>\n        {isStale && (\n          <Box marginBottom={2}>\n            <UploadWarning onClearStale={this.handleClearUploadState} />\n          </Box>\n        )}\n\n        <ChangeIndicator\n          path={inputProps.path.concat(ASSET_FIELD_PATH)}\n          hasFocus={!!inputProps.focused}\n          isChanged={inputProps.changed}\n        >\n          {/* not uploading */}\n          {!value?._upload && (\n            <FileTarget\n              {...elementProps}\n              tabIndex={0}\n              disabled={Boolean(readOnly)}\n              ref={this.setFocusElement}\n              onFiles={this.handleSelectFiles}\n              onFilesOver={this.handleFilesOver}\n              onFilesOut={this.handleFilesOut}\n              tone={this.getFileTone()}\n              $border={hasValueOrUpload || hoveringFiles.length > 0}\n              style={{padding: 1}}\n              sizing=\"border\"\n              radius={2}\n            >\n              {!value?.asset && this.renderUploadPlaceholder()}\n              {!value?._upload && value?.asset && (\n                <div style={{position: 'relative'}}>\n                  {this.renderAssetMenu()}\n                  {this.renderPreview()}\n                </div>\n              )}\n            </FileTarget>\n          )}\n\n          {/* uploading */}\n          {value?._upload && this.renderUploadState(value._upload)}\n        </ChangeIndicator>\n      </>\n    )\n  }\n\n  render() {\n    const {members, renderInput, renderField, renderItem, renderPreview} = this.props\n\n    const {selectedAssetSource} = this.state\n\n    // we use the hotspot field as the \"owner\" of both hotspot and crop\n    const hotspotField = members.find(\n      (member): member is FieldMember => member.kind === 'field' && member.name === 'hotspot'\n    )\n\n    return (\n      <>\n        <ImperativeToast ref={this.setToast} />\n\n        {members.map((member) => {\n          if (member.kind === 'field' && (member.name === 'crop' || member.name === 'hotspot')) {\n            // we're rendering these separately\n            return null\n          }\n\n          if (member.kind === 'field') {\n            return (\n              <MemberField\n                key={member.key}\n                member={member}\n                renderInput={member.name === 'asset' ? this.renderAsset() : renderInput}\n                renderField={member.name === 'asset' ? passThrough : renderField}\n                renderItem={renderItem}\n                renderPreview={renderPreview}\n              />\n            )\n          }\n\n          if (member.kind === 'fieldSet') {\n            return (\n              <MemberFieldSet\n                key={member.key}\n                member={member}\n                renderInput={renderInput}\n                renderField={renderField}\n                renderItem={renderItem}\n                renderPreview={renderPreview}\n              />\n            )\n          }\n          if (member.kind === 'error') {\n            return <MemberFieldError member={member} />\n          }\n          //@ts-expect-error all possible cases should be covered\n          return <>Unknown member kind: ${member.kind}</>\n        })}\n        {hotspotField?.open && (\n          <FormInput\n            {...this.props}\n            absolutePath={hotspotField.field.path}\n            renderInput={this.renderHotspotInput}\n          />\n        )}\n        {selectedAssetSource && this.renderAssetSource()}\n      </>\n    )\n  }\n}\n","import React, {useCallback} from 'react'\nimport imageUrlBuilder from '@sanity/image-url'\nimport {SchemaType} from '@sanity/types'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {ImageInput, ImageInputProps} from '../../inputs/files/ImageInput'\nimport {useFormBuilder} from '../../useFormBuilder'\nimport {useDocumentPreviewStore} from '../../../datastores'\nimport {useClient} from '../../../hooks'\nimport {resolveUploader as defaultResolveUploader} from '../uploads/resolveUploader'\nimport {FileLike} from '../uploads/types'\nimport {observeImageAsset} from './client-adapters/assets'\n\nexport type StudioImageInputProps = Omit<\n  ImageInputProps,\n  | 'assetSources'\n  | 'directUploads'\n  | 'imageUrlBuilder'\n  | 'observeAsset'\n  | 'client'\n  | 'resolveUploader'\n>\n\nexport function StudioImageInput(props: StudioImageInputProps) {\n  const sourcesFromSchema = props.schemaType.options?.sources\n  const {image} = useFormBuilder().__internal\n  const documentPreviewStore = useDocumentPreviewStore()\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const formBuilder = useFormBuilder()\n  const supportsImageUploads = formBuilder.__internal.image.directUploads\n\n  const resolveUploader = useCallback(\n    (type: SchemaType, file: FileLike) => {\n      if (!supportsImageUploads) {\n        return null\n      }\n      return defaultResolveUploader(type, file)\n    },\n    [supportsImageUploads]\n  )\n\n  // note: type.options.sources may be an empty array and in that case we're\n  // disabling selecting images from asset source  (it's a feature, not a bug)\n  const assetSources = React.useMemo(\n    () => sourcesFromSchema || image.assetSources,\n    [image, sourcesFromSchema]\n  )\n\n  const builder = React.useMemo(() => imageUrlBuilder(client), [client])\n\n  const observeAsset = useCallback(\n    (id: string) => observeImageAsset(documentPreviewStore, id),\n    [documentPreviewStore]\n  )\n\n  return (\n    <ImageInput\n      {...props}\n      client={client}\n      assetSources={assetSources}\n      directUploads={image.directUploads}\n      imageUrlBuilder={builder}\n      observeAsset={observeAsset}\n      resolveUploader={resolveUploader}\n    />\n  )\n}\n","import {Card, Flex} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const CardOverlay = styled(Card)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n`\n\nexport const FlexContainer = styled(Flex)`\n  height: 100%;\n`\n","/* method which returns a file size in a readable format */\nexport function formatBytes(bytes: number, decimals = 2) {\n  if (bytes === 0) return '0 Bytes'\n\n  const k = 1024\n  const dm = decimals < 0 ? 0 : decimals\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`\n}\n","import {BinaryDocumentIcon, EllipsisVerticalIcon} from '@sanity/icons'\nimport React, {ReactNode, useState} from 'react'\n\nimport {Box, Button, Card, Flex, Menu, Popover, Stack, Text, useClickOutside} from '@sanity/ui'\nimport {formatBytes} from '../../common/helper'\n\ntype Props = {\n  children: ReactNode\n  size: number\n  originalFilename: string\n  onClick?: () => void\n  muted?: boolean\n  disabled?: boolean\n  isMenuOpen: boolean\n  onMenuOpen: (flag: boolean) => void\n}\n\nexport function FileDetails(props: Props) {\n  const {originalFilename, size, children, muted, disabled, onClick, isMenuOpen, onMenuOpen} = props\n\n  const [menuElement, setMenuRef] = useState<HTMLDivElement | null>(null)\n\n  const handleClick = React.useCallback(() => onMenuOpen(true), [onMenuOpen])\n\n  useClickOutside(\n    React.useCallback(() => onMenuOpen(false), [onMenuOpen]),\n    [menuElement]\n  )\n\n  return (\n    <Flex wrap=\"nowrap\" justify=\"space-between\" align=\"center\">\n      <Card\n        as={muted || disabled ? undefined : 'button'}\n        tabIndex={disabled ? undefined : 0}\n        __unstable_focusRing\n        radius={2}\n        padding={2}\n        tone=\"inherit\"\n        onClick={onClick}\n      >\n        <Flex wrap=\"nowrap\" align=\"center\">\n          <Card padding={3} tone=\"transparent\" shadow={1} radius={1}>\n            <Text muted={muted}>\n              <BinaryDocumentIcon />\n            </Text>\n          </Card>\n          <Stack flex={1} space={2} marginLeft={3}>\n            <Text size={2} textOverflow=\"ellipsis\" muted={muted} data-testid=\"file-name\">\n              {originalFilename}\n            </Text>\n            <Text size={1} muted data-testid=\"file-size\">\n              {formatBytes(size)}\n            </Text>\n          </Stack>\n        </Flex>\n      </Card>\n      <Box padding={2}>\n        <Flex justify=\"center\">\n          <Popover content={<Menu ref={setMenuRef}>{children}</Menu>} portal open={isMenuOpen}>\n            <Button\n              icon={EllipsisVerticalIcon}\n              mode=\"bleed\"\n              data-testid=\"options-menu-button\"\n              onClick={handleClick}\n            />\n          </Popover>\n        </Flex>\n      </Box>\n    </Flex>\n  )\n}\n","import React from 'react'\nimport {Skeleton, Flex, Stack, LabelSkeleton} from '@sanity/ui'\n\nexport function FileSkeleton() {\n  return (\n    <Flex align=\"center\" justify=\"flex-start\" padding={2}>\n      <Skeleton padding={3} radius={1} animated />\n      <Stack flex={1} space={2} marginLeft={3}>\n        <LabelSkeleton style={{width: '100%'}} radius={1} animated />\n        <LabelSkeleton style={{width: '100%'}} radius={1} animated />\n      </Stack>\n    </Flex>\n  )\n}\n","import {ResetIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Card, Flex, Box, Text, Stack, Button} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\ntype Props = {\n  onClearValue?: () => void\n}\n\nconst ButtonWrapper = styled(Button)`\n  width: 100%;\n`\n\nexport function InvalidFileWarning({onClearValue}: Props) {\n  return (\n    <Card tone=\"caution\" padding={4} border radius={2}>\n      <Flex gap={4} marginBottom={4}>\n        <Box>\n          <Text size={1}>\n            <WarningOutlineIcon />\n          </Text>\n        </Box>\n        <Stack space={3}>\n          <Text size={1} weight=\"semibold\">\n            Invalid file value\n          </Text>\n          <Text size={1}>\n            The value of this field is not a valid file. Resetting this field will let you choose a\n            new file.\n          </Text>\n        </Stack>\n      </Flex>\n      <ButtonWrapper icon={ResetIcon} text=\"Reset value\" onClick={onClearValue} mode=\"ghost\" />\n    </Card>\n  )\n}\n","/* eslint-disable no-undef, import/no-unresolved */\n\nimport React, {ReactNode} from 'react'\nimport {Observable, Subscription} from 'rxjs'\nimport {get} from 'lodash'\nimport {\n  AssetFromSource,\n  AssetSource,\n  File as BaseFile,\n  FileAsset,\n  FileSchemaType,\n  Path,\n  UploadState,\n} from '@sanity/types'\nimport {ImageIcon, SearchIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Card,\n  Menu,\n  MenuButton,\n  MenuItem,\n  ThemeColorToneKey,\n  ToastParams,\n} from '@sanity/ui'\nimport {SanityClient} from '@sanity/client'\nimport {WithReferencedAsset} from '../../../utils/WithReferencedAsset'\nimport {Uploader, UploaderResolver, UploadOptions} from '../../../studio/uploads/types'\nimport {FileInfo, FileTarget} from '../common/styles'\nimport {UploadProgress} from '../common/UploadProgress'\nimport {handleSelectAssetFromSource} from '../common/assetSource'\nimport {ActionsMenu} from '../common/ActionsMenu'\nimport {PlaceholderText} from '../common/PlaceholderText'\nimport {UploadPlaceholder} from '../common/UploadPlaceholder'\nimport {UploadWarning} from '../common/UploadWarning'\nimport {FIXME, InputProps, ObjectInputProps} from '../../../types'\nimport {ImperativeToast} from '../../../../components/transitional'\nimport {PatchEvent, setIfMissing, unset} from '../../../patch'\nimport {MemberField, MemberFieldError, MemberFieldSet} from '../../../members'\nimport {ChangeIndicator} from '../../../../components/changeIndicators'\nimport {CardOverlay, FlexContainer} from './styles'\nimport {FileDetails} from './FileDetails'\nimport {FileSkeleton} from './FileSkeleton'\nimport {isFileSource} from '@sanity/asset-utils'\nimport {InvalidFileWarning} from './InvalidFileWarning'\n\n// We alias DOM File type here to distinguish it from the type of the File value\ntype DOMFile = globalThis.File\n\nexport interface File extends Partial<BaseFile> {\n  _upload?: UploadState\n}\n\nfunction passThrough({children}: {children?: React.ReactNode}) {\n  return children\n}\nexport interface FileInputProps extends ObjectInputProps<File, FileSchemaType> {\n  assetSources: AssetSource[]\n  directUploads?: boolean\n  observeAsset: (documentId: string) => Observable<FileAsset>\n  resolveUploader: UploaderResolver\n  client: SanityClient\n}\ntype FileInputState = {\n  isUploading: boolean\n  selectedAssetSource: AssetSource | null\n  hoveringFiles: FileInfo[]\n  isStale: boolean\n  isMenuOpen: boolean\n}\n\ntype Focusable = {\n  focus: () => void\n}\nconst ASSET_FIELD_PATH = ['asset']\n\nexport class FileInput extends React.PureComponent<FileInputProps, FileInputState> {\n  _focusRef: Focusable | null = null\n  _assetFieldPath: Path\n  uploadSubscription: Subscription | null = null\n\n  state: FileInputState = {\n    isUploading: false,\n    selectedAssetSource: null,\n    hoveringFiles: [],\n    isStale: false,\n    isMenuOpen: false,\n  }\n\n  constructor(props: FileInputProps) {\n    super(props)\n    this._assetFieldPath = props.path.concat(ASSET_FIELD_PATH)\n  }\n\n  toast: {push: (params: ToastParams) => void} | null = null\n\n  handleRemoveButtonClick = () => {\n    const {path, value} = this.props\n    const parentPathSegment = path.slice(-1)[0]\n\n    // String path segment mean an object path, while a number or a\n    // keyed segment means we're a direct child of an array\n    const isArrayElement = typeof parentPathSegment !== 'string'\n\n    // When removing the file, _type and _key are \"meta\"-properties and\n    // are not significant unless other properties are present. Thus, we\n    // want to remove the entire \"container\" object if these are the only\n    // properties present, BUT only if we're not an array element, as\n    // removing the array element will close the selection dialog. Instead,\n    // when closing the dialog, the array logic will check for an \"empty\"\n    // value and remove it for us\n    const allKeys = Object.keys(value || {})\n    const remainingKeys = allKeys.filter(\n      (key) => !['_type', '_key', '_upload', 'asset'].includes(key)\n    )\n\n    const isEmpty = remainingKeys.length === 0\n    const removeKeys = ['asset']\n      .concat(allKeys.filter((key) => ['_upload'].includes(key)))\n      .map((key) => unset([key]))\n\n    this.props.onChange(PatchEvent.from(isEmpty && !isArrayElement ? unset() : removeKeys))\n  }\n\n  clearUploadStatus() {\n    // todo: this is kind of hackish\n    if (this.props.value?._upload) {\n      this.props.onChange(PatchEvent.from([unset(['_upload'])]))\n    }\n  }\n\n  cancelUpload() {\n    if (this.uploadSubscription) {\n      this.uploadSubscription.unsubscribe()\n      this.clearUploadStatus()\n    }\n  }\n\n  handleCancelUpload = () => {\n    this.cancelUpload()\n  }\n\n  handleClearUploadState = () => {\n    this.setState({isStale: false})\n    this.clearUploadStatus()\n  }\n\n  handleStaleUpload = () => {\n    this.setState({isStale: true})\n  }\n\n  handleClearField = () => {\n    this.props.onChange(unset(['asset']))\n  }\n\n  handleSelectFiles = (files: DOMFile[]) => {\n    const {directUploads, readOnly} = this.props\n    const {hoveringFiles} = this.state\n    if (directUploads && !readOnly) {\n      this.uploadFirstAccepted(files)\n    } else if (hoveringFiles.length > 0) {\n      this.handleFilesOut()\n    }\n  }\n\n  handleSelectFileFromAssetSource = (source: AssetSource) => {\n    this.setState({selectedAssetSource: source})\n  }\n\n  handleAssetSourceClosed = () => {\n    this.setState({selectedAssetSource: null})\n  }\n\n  uploadFirstAccepted(files: DOMFile[]) {\n    const {schemaType} = this.props\n\n    const match = files\n      .map((file) => ({file, uploader: this.props.resolveUploader?.(schemaType, file)}))\n      .find((result) => result.uploader)\n\n    if (match) {\n      this.uploadWith(match.uploader!, match.file)\n    }\n\n    this.setState({isMenuOpen: false})\n  }\n\n  uploadWith = (uploader: Uploader, file: DOMFile, assetDocumentProps: UploadOptions = {}) => {\n    const {schemaType, onChange, client} = this.props\n    const {source} = assetDocumentProps\n    const options = {\n      metadata: get(schemaType, 'options.metadata'),\n      storeOriginalFilename: get(schemaType, 'options.storeOriginalFilename'),\n      source,\n    }\n    this.cancelUpload()\n    this.setState({isUploading: true})\n    onChange(PatchEvent.from([setIfMissing({_type: schemaType.name})]))\n    this.uploadSubscription = uploader.upload(client, file, schemaType, options).subscribe({\n      next: (uploadEvent) => {\n        if (uploadEvent.patches) {\n          onChange(PatchEvent.from(uploadEvent.patches))\n        }\n      },\n      error: (err) => {\n        // eslint-disable-next-line no-console\n        console.error(err)\n        this.toast?.push({\n          status: 'error',\n          description: 'The upload could not be completed at this time.',\n          title: 'Upload failed',\n        })\n        this.clearUploadStatus()\n      },\n      complete: () => {\n        this.setState({isUploading: false})\n      },\n    })\n  }\n\n  renderUploadState(uploadState: UploadState) {\n    const {isUploading} = this.state\n\n    return (\n      <UploadProgress\n        uploadState={uploadState}\n        onCancel={isUploading ? this.handleCancelUpload : undefined}\n        onStale={this.handleStaleUpload}\n      />\n    )\n  }\n\n  renderAssetSource() {\n    const {selectedAssetSource} = this.state\n    const {value, observeAsset} = this.props\n    if (!selectedAssetSource) {\n      return null\n    }\n    const Component = selectedAssetSource.component\n    if (value && value.asset) {\n      return (\n        <WithReferencedAsset\n          observeAsset={observeAsset}\n          reference={value.asset}\n          waitPlaceholder={<FileSkeleton />}\n        >\n          {(fileAsset) => (\n            <Component\n              selectedAssets={[fileAsset]}\n              selectionType=\"single\"\n              assetType=\"file\"\n              dialogHeaderTitle=\"Select file\"\n              onClose={this.handleAssetSourceClosed}\n              onSelect={this.handleSelectAssetFromSource}\n            />\n          )}\n        </WithReferencedAsset>\n      )\n    }\n    return (\n      <Component\n        selectedAssets={[]}\n        selectionType=\"single\"\n        assetType=\"file\"\n        dialogHeaderTitle=\"Select file\"\n        onClose={this.handleAssetSourceClosed}\n        onSelect={this.handleSelectAssetFromSource}\n      />\n    )\n  }\n\n  handleSelectAssetFromSource = (assetFromSource: AssetFromSource[]) => {\n    const {onChange, schemaType, resolveUploader} = this.props\n    handleSelectAssetFromSource({\n      assetFromSource,\n      onChange,\n      type: schemaType,\n      resolveUploader,\n      uploadWith: this.uploadWith,\n    })\n    this.setState({selectedAssetSource: null})\n  }\n\n  hasFileTargetFocus() {\n    return this.props.focusPath?.[0] === 'asset'\n  }\n\n  handleFileTargetFocus = (event: FIXME) => {\n    // We want to handle focus when the file target element *itself* receives\n    // focus, not when an interactive child element receives focus. Since React has decided\n    // to let focus bubble, so this workaround is needed\n    // Background: https://github.com/facebook/react/issues/6410#issuecomment-671915381\n    if (event.currentTarget === event.target && event.currentTarget === this._focusRef) {\n      this.props.onFocusPath(['asset'])\n    }\n  }\n\n  handleFilesOver = (fileInfo: FileInfo[]) => {\n    this.setState({\n      hoveringFiles: fileInfo,\n    })\n  }\n  handleFilesOut = () => {\n    this.setState({\n      hoveringFiles: [],\n    })\n  }\n\n  renderAsset() {\n    const {value, changed, readOnly, elementProps} = this.props\n    const {hoveringFiles, isStale} = this.state\n    const hasValueOrUpload = Boolean(value?._upload || value?.asset)\n\n    if (value && typeof value.asset !== 'undefined' && !value?._upload && !isFileSource(value)) {\n      return () => <InvalidFileWarning onClearValue={this.handleClearField} />\n    }\n\n    // todo: convert this to a functional component and use this with useCallback\n    //  it currently has to return a new function on every render in order to pick up state from this component\n    return (inputProps: InputProps) => (\n      <>\n        {isStale && (\n          <Box marginBottom={2}>\n            <UploadWarning onClearStale={this.handleClearUploadState} />\n          </Box>\n        )}\n        <ChangeIndicator\n          path={this._assetFieldPath}\n          hasFocus={!!inputProps.focused}\n          isChanged={changed}\n        >\n          {/* not uploading */}\n          {!value?._upload && (\n            <FileTarget\n              {...elementProps}\n              tabIndex={0}\n              disabled={Boolean(readOnly)}\n              ref={this.setFocusElement}\n              onFiles={this.handleSelectFiles}\n              onFilesOver={this.handleFilesOver}\n              onFilesOut={this.handleFilesOut}\n              tone={this.getFileTone()}\n              $border={hasValueOrUpload || hoveringFiles.length > 0}\n              style={{padding: 1}}\n              sizing=\"border\"\n              radius={2}\n            >\n              <div style={{position: 'relative'}}>\n                {!value?.asset && this.renderUploadPlaceholder()}\n                {value?.asset && hoveringFiles.length > 0\n                  ? this.renderAssetMenu(this.getFileTone())\n                  : null}\n                {!value?._upload && value?.asset && this.renderPreview()}\n              </div>\n            </FileTarget>\n          )}\n\n          {/* uploading */}\n          {value?._upload && this.renderUploadState(value._upload)}\n        </ChangeIndicator>\n      </>\n    )\n  }\n\n  renderPreview() {\n    const {value, readOnly, assetSources, schemaType, directUploads, observeAsset} = this.props\n    const {isMenuOpen} = this.state\n    const asset = value?.asset\n    if (!asset) {\n      return null\n    }\n\n    const accept = get(schemaType, 'options.accept', '')\n\n    let browseMenuItem: ReactNode =\n      assetSources && assetSources?.length === 0 ? null : (\n        <MenuItem\n          icon={SearchIcon}\n          text=\"Browse\"\n          onClick={() => {\n            this.setState({isMenuOpen: false})\n            this.handleSelectFileFromAssetSource(assetSources[0])\n          }}\n          disabled={readOnly}\n          data-testid=\"file-input-browse-button\"\n        />\n      )\n\n    if (assetSources.length > 1) {\n      browseMenuItem = assetSources.map((assetSource) => {\n        return (\n          <MenuItem\n            key={assetSource.name}\n            text={assetSource.title}\n            onClick={() => {\n              this.setState({isMenuOpen: false})\n              this.handleSelectFileFromAssetSource(assetSource)\n            }}\n            icon={assetSource.icon || ImageIcon}\n            disabled={readOnly}\n            data-testid={`file-input-browse-button-${assetSource.name}`}\n          />\n        )\n      })\n    }\n\n    return (\n      <WithReferencedAsset\n        reference={asset}\n        observeAsset={observeAsset}\n        waitPlaceholder={<FileSkeleton />}\n      >\n        {({originalFilename, extension, url, size}) => {\n          const filename = originalFilename || `download.${extension}`\n          let copyUrl: string | undefined\n          let downloadUrl: string | undefined\n\n          if (isFileSource(value)) {\n            downloadUrl = `${url}?dl`\n            copyUrl = url\n          }\n\n          return (\n            <FileDetails\n              size={size}\n              originalFilename={filename}\n              muted={!readOnly}\n              onMenuOpen={(isOpen) => this.setState({isMenuOpen: isOpen})}\n              isMenuOpen={isMenuOpen}\n            >\n              <ActionsMenu\n                onUpload={this.handleSelectFiles}\n                browse={browseMenuItem}\n                onReset={this.handleRemoveButtonClick}\n                downloadUrl={downloadUrl}\n                copyUrl={copyUrl}\n                readOnly={readOnly}\n                accept={accept}\n                directUploads={directUploads}\n              />\n            </FileDetails>\n          )\n        }}\n      </WithReferencedAsset>\n    )\n  }\n\n  renderAssetMenu(tone: ThemeColorToneKey) {\n    const {schemaType, readOnly, directUploads, resolveUploader} = this.props\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader?.(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n\n    return (\n      <CardOverlay tone={tone}>\n        <FlexContainer align=\"center\" justify=\"center\" gap={2} flex={1}>\n          <PlaceholderText\n            readOnly={readOnly}\n            hoveringFiles={hoveringFiles}\n            acceptedFiles={acceptedFiles}\n            rejectedFilesCount={rejectedFilesCount}\n            directUploads={directUploads}\n            type=\"file\"\n          />\n        </FlexContainer>\n      </CardOverlay>\n    )\n  }\n\n  renderBrowser() {\n    const {assetSources, readOnly, directUploads, id} = this.props\n\n    if (assetSources.length === 0) return null\n\n    if (assetSources.length > 1 && !readOnly && directUploads) {\n      return (\n        <MenuButton\n          id={`${id}_assetFileButton`}\n          button={\n            <Button\n              mode=\"ghost\"\n              text=\"Select\"\n              data-testid=\"file-input-multi-browse-button\"\n              icon={SearchIcon}\n            />\n          }\n          data-testid=\"input-select-button\"\n          menu={\n            <Menu>\n              {assetSources.map((assetSource) => {\n                return (\n                  <MenuItem\n                    key={assetSource.name}\n                    text={assetSource.title}\n                    onClick={() => {\n                      this.setState({isMenuOpen: false})\n                      this.handleSelectFileFromAssetSource(assetSource)\n                    }}\n                    icon={assetSource.icon || ImageIcon}\n                    disabled={readOnly}\n                    data-testid={`file-input-browse-button-${assetSource.name}`}\n                  />\n                )\n              })}\n            </Menu>\n          }\n        />\n      )\n    }\n\n    return (\n      <Button\n        fontSize={2}\n        text=\"Browse\"\n        icon={SearchIcon}\n        mode=\"ghost\"\n        onClick={() => {\n          this.setState({isMenuOpen: false})\n          this.handleSelectFileFromAssetSource(assetSources[0])\n        }}\n        data-testid=\"file-input-browse-button\"\n        disabled={readOnly}\n      />\n    )\n  }\n\n  renderUploadPlaceholder() {\n    const {readOnly, schemaType, directUploads, resolveUploader} = this.props\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader?.(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n\n    const accept = get(schemaType, 'options.accept', '')\n\n    return (\n      <div style={{padding: 1}}>\n        <Card\n          tone={readOnly ? 'transparent' : 'inherit'}\n          border\n          padding={3}\n          style={\n            hoveringFiles.length === 0\n              ? {borderStyle: 'dashed'}\n              : {borderStyle: 'dashed', borderColor: 'transparent'}\n          }\n        >\n          <UploadPlaceholder\n            browse={this.renderBrowser()}\n            onUpload={this.handleSelectFiles}\n            readOnly={readOnly}\n            hoveringFiles={hoveringFiles}\n            acceptedFiles={acceptedFiles}\n            rejectedFilesCount={rejectedFilesCount}\n            type=\"file\"\n            accept={accept}\n            directUploads={directUploads}\n          />\n        </Card>\n      </div>\n    )\n  }\n\n  focus() {\n    if (this._focusRef) {\n      this._focusRef.focus()\n    }\n  }\n\n  setFocusElement = (ref: Focusable | null) => {\n    this._focusRef = ref\n  }\n\n  handleUpload = ({file, uploader}: {file: DOMFile; uploader: Uploader}) => {\n    this.uploadWith(uploader, file)\n  }\n\n  setToast = (toast: {push: (params: ToastParams) => void}) => {\n    this.toast = toast\n  }\n  getFileTone() {\n    const {directUploads, schemaType, value, readOnly, resolveUploader} = this.props\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader?.(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n\n    if (hoveringFiles.length > 0) {\n      if (rejectedFilesCount > 0 || !directUploads) {\n        return 'critical'\n      }\n    }\n\n    if (!value?._upload && !readOnly && hoveringFiles.length > 0) {\n      return 'primary'\n    }\n    return value?._upload && value?.asset && readOnly ? 'transparent' : 'default'\n  }\n\n  render() {\n    const {members, renderItem, renderInput, renderField, renderPreview} = this.props\n    const {selectedAssetSource} = this.state\n\n    return (\n      <>\n        <ImperativeToast ref={this.setToast} />\n        {members.map((member) => {\n          if (member.kind === 'field' && (member.name === 'crop' || member.name === 'hotspot')) {\n            // we're rendering these separately\n            return null\n          }\n\n          if (member.kind === 'field') {\n            return (\n              <MemberField\n                key={member.key}\n                member={member}\n                renderInput={member.name === 'asset' ? this.renderAsset() : renderInput}\n                renderField={member.name === 'asset' ? passThrough : renderField}\n                renderItem={renderItem}\n                renderPreview={renderPreview}\n              />\n            )\n          }\n          if (member.kind === 'fieldSet') {\n            return (\n              <MemberFieldSet\n                key={member.key}\n                member={member}\n                renderInput={renderInput}\n                renderField={renderField}\n                renderItem={renderItem}\n                renderPreview={renderPreview}\n              />\n            )\n          }\n          if (member.kind === 'error') {\n            return <MemberFieldError member={member} />\n          }\n          //@ts-expect-error all possible cases should be covered\n          return <>Unknown member kind: ${member.kind}</>\n        })}\n        {selectedAssetSource && this.renderAssetSource()}\n      </>\n    )\n  }\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {SchemaType} from '@sanity/types'\nimport {FileInput, FileInputProps} from '../../inputs/files/FileInput'\nimport {resolveUploader as defaultResolveUploader} from '../uploads/resolveUploader'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {useFormBuilder} from '../../useFormBuilder'\nimport {useDocumentPreviewStore} from '../../../datastores'\nimport {useClient} from '../../../hooks'\nimport {FileLike} from '../uploads/types'\nimport {observeFileAsset} from './client-adapters/assets'\n\nexport type StudioFileInputProps = Omit<\n  FileInputProps,\n  'assetSources' | 'directUploads' | 'observeAsset' | 'resolveUploader' | 'client'\n>\n\nexport function StudioFileInput(props: StudioFileInputProps) {\n  const sourcesFromSchema = props.schemaType.options?.sources\n  const documentPreviewStore = useDocumentPreviewStore()\n  const {file: fileConfig} = useFormBuilder().__internal\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  const resolveUploader = useCallback(\n    (type: SchemaType, file: FileLike) => {\n      if (!fileConfig.directUploads) {\n        return null\n      }\n      return defaultResolveUploader(type, file)\n    },\n    [fileConfig.directUploads]\n  )\n  // NOTE: type.options.sources may be an empty array and in that case we're\n  // disabling selecting images from asset source  (it's a feature, not a bug)\n  const assetSources = useMemo(\n    () => sourcesFromSchema || fileConfig.assetSources,\n    [fileConfig, sourcesFromSchema]\n  )\n\n  const observeAsset = useCallback(\n    (id: string) => observeFileAsset(documentPreviewStore, id),\n    [documentPreviewStore]\n  )\n\n  return (\n    <FileInput\n      {...props}\n      client={client}\n      assetSources={assetSources}\n      directUploads={fileConfig.directUploads}\n      observeAsset={observeAsset}\n      resolveUploader={resolveUploader}\n    />\n  )\n}\n","import {useCallback, useState} from 'react'\nimport {catchError, map, startWith} from 'rxjs/operators'\nimport {Observable, of} from 'rxjs'\nimport {useMemoObservable} from 'react-rx'\nimport {usePrevious} from '../../hooks/usePrevious'\nimport {CrossDatasetReferenceInfo} from './types'\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst noop = () => {}\n\nconst INITIAL_LOADING_STATE: Loadable<CrossDatasetReferenceInfo> = {\n  isLoading: true,\n  result: undefined,\n  error: undefined,\n  retry: noop,\n}\n\nconst EMPTY_STATE: Loadable<any> = {\n  isLoading: false,\n  result: undefined,\n  error: undefined,\n  retry: noop,\n}\n\nexport type Loadable<T> =\n  | {isLoading: true; result: undefined; error: undefined; retry: () => void}\n  | {isLoading: false; result: T; error: undefined; retry: () => void}\n  | {isLoading: false; result: undefined; error: Error; retry: () => void}\n\nexport type GetReferenceInfoFn = (doc: {\n  _id: string\n  _type?: string\n}) => Observable<CrossDatasetReferenceInfo>\n\nexport function useReferenceInfo(\n  doc: {_id: string; _type?: string},\n  getReferenceInfo: GetReferenceInfoFn\n): Loadable<CrossDatasetReferenceInfo> {\n  const [retryAttempt, setRetryAttempt] = useState<number>(0)\n\n  const retry = useCallback(() => {\n    setRetryAttempt((current) => current + 1)\n  }, [])\n\n  const referenceInfo = useMemoObservable(\n    () =>\n      doc._id\n        ? getReferenceInfo(doc).pipe(\n            map(\n              (result) =>\n                ({\n                  isLoading: false,\n                  result,\n                  error: undefined,\n                  retry,\n                } as const)\n            ),\n            startWith(INITIAL_LOADING_STATE),\n            catchError((err: Error) => {\n              console.error(err)\n              return of({isLoading: false, result: undefined, error: err, retry} as const)\n            })\n          )\n        : of(EMPTY_STATE),\n    [retryAttempt, getReferenceInfo, doc?._id, doc?._type, retry],\n    INITIAL_LOADING_STATE\n  )\n\n  // workaround for a \"bug\" with useMemoObservable that doesn't\n  // return the initial value upon resubscription\n  const previousId = usePrevious(doc._id, doc._id)\n  if (previousId !== doc._id) {\n    return INITIAL_LOADING_STATE\n  }\n  return referenceInfo\n}\n","import React, {ComponentType, createElement, ReactNode, useMemo} from 'react'\nimport {CrossDatasetType, PreviewValue} from '@sanity/types'\nimport {Box, Flex, Inline, Label, Text, Tooltip} from '@sanity/ui'\nimport {AccessDeniedIcon, HelpCircleIcon, LaunchIcon} from '@sanity/icons'\nimport imageUrlBuilder from '@sanity/image-url'\nimport {DefaultPreview, PreviewMediaDimensions} from '../../../components/previews'\nimport {TextWithTone} from '../../../components/TextWithTone'\nimport {FIXME} from '../../types'\nimport {DocumentAvailability} from '../../../preview'\n\nfunction UnavailableMessage(props: {icon: ComponentType; children: ReactNode; title: ReactNode}) {\n  const Icon = props.icon\n  return (\n    <Flex padding={3}>\n      <Box>\n        <Text size={1}>\n          <Icon />\n        </Text>\n      </Box>\n      <Box flex={1} marginLeft={3}>\n        <Text size={1} weight=\"semibold\">\n          {props.title}\n        </Text>\n\n        <Box marginTop={3}>\n          <Text as=\"p\" muted size={1}>\n            {props.children}\n          </Text>\n        </Box>\n      </Box>\n    </Flex>\n  )\n}\n\n/**\n * Used to preview a referenced type\n * Takes the reference type as props\n */\nexport function CrossDatasetReferencePreview(props: {\n  availability: DocumentAvailability | null\n  id: string\n  hasStudioUrl?: boolean\n  showStudioUrlIcon?: boolean\n  preview: {published: PreviewValue | undefined}\n  dataset: string\n  projectId: string\n  refType?: CrossDatasetType\n  showTypeLabel: boolean\n}) {\n  const {\n    refType,\n    showStudioUrlIcon,\n    hasStudioUrl,\n    showTypeLabel,\n    availability,\n    preview,\n    id,\n    dataset,\n    projectId,\n  } = props\n  const notFound = availability?.reason === 'NOT_FOUND'\n  const insufficientPermissions = availability?.reason === 'PERMISSION_DENIED'\n\n  const previewMedia = preview.published?.media\n\n  const media = useMemo(() => {\n    if (previewMedia) {\n      return function MediaPreview({dimensions}: {dimensions: PreviewMediaDimensions}) {\n        return React.isValidElement(previewMedia) ? (\n          previewMedia\n        ) : (\n          <img\n            src={imageUrlBuilder({dataset, projectId})\n              .image(previewMedia as FIXME)\n              .withOptions(dimensions)\n              .url()}\n            alt=\"Image preview of referenced document\"\n            referrerPolicy=\"strict-origin-when-cross-origin\"\n          />\n        )\n      }\n    }\n    return refType?.icon ? createElement(refType.icon) : null\n  }, [previewMedia, dataset, projectId, refType?.icon])\n\n  return (\n    <Flex align=\"center\" data-testid=\"preview\">\n      {availability?.available ? (\n        <Box flex={1} paddingX={2} paddingY={1}>\n          <DefaultPreview\n            title={preview.published?.title}\n            subtitle={preview.published?.subtitle}\n            media={media || false}\n          />\n        </Box>\n      ) : (\n        <Box flex={1} padding={2}>\n          <Flex align=\"center\" justify=\"center\">\n            <Box flex={1} paddingY={2}>\n              <Text muted>Document unavailable</Text>\n            </Box>\n          </Flex>\n        </Box>\n      )}\n\n      <Box paddingLeft={3}>\n        <Inline space={4}>\n          {refType && showTypeLabel && (\n            <Label size={1} muted>\n              {refType.title || refType.type}\n            </Label>\n          )}\n\n          {(insufficientPermissions || notFound) && (\n            <Box>\n              <Tooltip\n                portal\n                content={\n                  notFound ? (\n                    <UnavailableMessage title=\"Not found\" icon={HelpCircleIcon}>\n                      The referenced document does not exist\n                      <br />\n                      (id: <code>{id}</code>)\n                    </UnavailableMessage>\n                  ) : (\n                    <UnavailableMessage title=\"Insufficient permissions\" icon={AccessDeniedIcon}>\n                      The referenced document could not be accessed due to insufficient permissions\n                    </UnavailableMessage>\n                  )\n                }\n              >\n                <TextWithTone tone=\"default\">\n                  {insufficientPermissions ? <AccessDeniedIcon /> : <HelpCircleIcon />}\n                </TextWithTone>\n              </Tooltip>\n            </Box>\n          )}\n\n          {!(notFound || insufficientPermissions) && showStudioUrlIcon && (\n            <Box>\n              <Tooltip\n                portal\n                content={\n                  <Box padding={2}>\n                    {hasStudioUrl ? (\n                      <Text size={1}>This document opens in another Studio</Text>\n                    ) : (\n                      <Text size={1}>\n                        This document cannot be opened (unable to resolve URL to Studio)\n                      </Text>\n                    )}\n                  </Box>\n                }\n              >\n                <TextWithTone size={1} tone=\"default\" muted={!hasStudioUrl}>\n                  <LaunchIcon />\n                </TextWithTone>\n              </Tooltip>\n            </Box>\n          )}\n        </Inline>\n      </Box>\n    </Flex>\n  )\n}\n","/* eslint-disable max-nested-callbacks,no-nested-ternary */\nimport React from 'react'\nimport {CrossDatasetReferenceSchemaType} from '@sanity/types'\nimport {Stack, TextSkeleton} from '@sanity/ui'\nimport {Observable} from 'rxjs'\nimport {Alert} from '../../components/Alert'\nimport {CrossDatasetReferenceInfo} from './types'\nimport {useReferenceInfo} from './useReferenceInfo'\nimport {CrossDatasetReferencePreview} from './CrossDatasetReferencePreview'\n\n/**\n * Used to preview a referenced type\n * Takes as props the referenced document, the reference type and a hook to subscribe to\n * in order to listen for the reference info\n * @param props\n * @constructor\n */\nexport function OptionPreview(props: {\n  document: {_id: string; _type: string}\n  referenceType: CrossDatasetReferenceSchemaType\n  getReferenceInfo: (doc: {_id: string; _type?: string}) => Observable<CrossDatasetReferenceInfo>\n}) {\n  const {\n    isLoading,\n    result: referenceInfo,\n    error,\n  } = useReferenceInfo(props.document, props.getReferenceInfo)\n\n  if (isLoading) {\n    return (\n      <Stack space={2} padding={1}>\n        <TextSkeleton style={{maxWidth: 320}} radius={1} animated />\n        <TextSkeleton style={{maxWidth: 200}} radius={1} size={1} animated />\n      </Stack>\n    )\n  }\n\n  if (error) {\n    return (\n      <Stack space={2} padding={1}>\n        <Alert title=\"Failed to load referenced document\">Error: {error.message}</Alert>\n      </Stack>\n    )\n  }\n\n  if (!referenceInfo) {\n    return null\n  }\n\n  if (referenceInfo.availability?.reason === 'PERMISSION_DENIED') {\n    return (\n      <Stack space={2} padding={1}>\n        Insufficient permissions to view this document\n      </Stack>\n    )\n  }\n\n  const refType = props.referenceType.to.find((toEntry) => toEntry.type === referenceInfo.type)\n  if (!refType) {\n    return (\n      <Stack space={2} padding={1}>\n        Search returned a type that's not valid for this reference: \"${referenceInfo.type}\"\n      </Stack>\n    )\n  }\n  return (\n    referenceInfo &&\n    refType && (\n      <CrossDatasetReferencePreview\n        id={referenceInfo.id}\n        availability={referenceInfo.availability}\n        preview={referenceInfo.preview}\n        refType={refType}\n        dataset={props.referenceType.dataset}\n        projectId={props.referenceType.projectId}\n        showTypeLabel={props.referenceType.to.length > 1}\n      />\n    )\n  )\n}\n","import React from 'react'\nimport {CrossDatasetReference, CrossDatasetReferenceSchemaType} from '@sanity/types'\nimport {Stack, Text, TextSkeleton} from '@sanity/ui'\nimport {Loadable} from './useReferenceInfo'\nimport {CrossDatasetReferenceInfo} from './types'\nimport {CrossDatasetReferencePreview} from './CrossDatasetReferencePreview'\n\nexport function PreviewReferenceValue(props: {\n  value: CrossDatasetReference\n  showStudioUrlIcon?: boolean\n  hasStudioUrl?: boolean\n  type: CrossDatasetReferenceSchemaType\n  referenceInfo: Loadable<CrossDatasetReferenceInfo>\n}) {\n  const {value, type, showStudioUrlIcon, hasStudioUrl, referenceInfo} = props\n\n  if (referenceInfo.isLoading || referenceInfo.error) {\n    return (\n      <Stack space={2} padding={1}>\n        <TextSkeleton style={{maxWidth: 320}} radius={1} animated={!referenceInfo.error} />\n        <TextSkeleton style={{maxWidth: 200}} radius={1} size={1} animated={!referenceInfo.error} />\n      </Stack>\n    )\n  }\n  const showTypeLabel = type.to.length > 1\n\n  const refTypeName = referenceInfo.result?.type\n  const refType = type.to.find((toType) => toType.type === refTypeName)\n\n  if (referenceInfo.result.availability?.available && !refType) {\n    return (\n      <Stack space={2} padding={2}>\n        <Text as=\"p\">\n          The referenced document is of invalid type: ({refTypeName || 'unknown'})\n          <pre>{JSON.stringify(value, null, 2)}</pre>\n        </Text>\n      </Stack>\n    )\n  }\n\n  return (\n    <CrossDatasetReferencePreview\n      availability={referenceInfo.result.availability}\n      hasStudioUrl={hasStudioUrl}\n      showStudioUrlIcon={showStudioUrlIcon}\n      preview={referenceInfo.result.preview}\n      refType={refType}\n      projectId={type.projectId}\n      dataset={type.dataset}\n      id={value._ref}\n      showTypeLabel={showTypeLabel}\n    />\n  )\n}\n","import React, {forwardRef, useCallback} from 'react'\nimport {Autocomplete, Box, Flex, Popover, Text} from '@sanity/ui'\nimport styled from 'styled-components'\n\nconst StyledPopover = styled(Popover)`\n  & > div {\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n`\n\nconst StyledText = styled(Text)`\n  word-break: break-word;\n`\n\nexport const ReferenceAutocomplete = forwardRef(function ReferenceAutocomplete(\n  props: React.ComponentProps<typeof Autocomplete> & {\n    referenceElement: HTMLDivElement | null\n    searchString?: string\n    portalRef?: React.RefObject<HTMLDivElement>\n  },\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const hasResults = props.options && props.options.length > 0\n  const renderPopover = useCallback(\n    (\n      {\n        content,\n        hidden,\n        inputElement,\n        onMouseEnter,\n        onMouseLeave,\n      }: {\n        content: React.ReactElement | null\n        hidden: boolean\n        inputElement: HTMLInputElement | null\n        onMouseEnter: () => void\n        onMouseLeave: () => void\n      },\n      contentRef: React.Ref<HTMLDivElement>\n    ) => (\n      <StyledPopover\n        data-testid=\"autocomplete-popover\"\n        placement=\"bottom-start\"\n        arrow={false}\n        constrainSize\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n        content={\n          <div ref={contentRef}>\n            {hasResults ? (\n              content\n            ) : (\n              <Box padding={4}>\n                <Flex align=\"center\" height=\"fill\" justify=\"center\">\n                  <StyledText align=\"center\" muted>\n                    No results for <strong>“{props.searchString}”</strong>\n                  </StyledText>\n                </Flex>\n              </Box>\n            )}\n          </div>\n        }\n        open={!props.loading && !hidden}\n        ref={props.portalRef}\n        portal\n        referenceElement={props.referenceElement || inputElement}\n        matchReferenceWidth\n      />\n    ),\n    [hasResults, props.searchString, props.loading, props.portalRef, props.referenceElement]\n  )\n  return <Autocomplete {...props} ref={ref} renderPopover={renderPopover} />\n})\n","import {Card} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const PreviewCard = styled(Card)`\n  /* this is a hack to avoid layout jumps while previews are loading\n  there's probably better ways of solving this */\n  min-height: 36px;\n\n  /* TextWithTone uses its own logic to set color, and we therefore need\n  to override this logic in order to set the correct color in different states */\n  &[data-selected],\n  &[data-pressed],\n  &:active {\n    [data-ui='TextWithTone'] {\n      color: inherit;\n    }\n  }\n`\n","/* eslint-disable complexity, max-nested-callbacks, no-nested-ternary */\n\nimport React, {useCallback, useMemo, useRef, useState} from 'react'\nimport {CrossDatasetReference, CrossDatasetReferenceSchemaType} from '@sanity/types'\nimport {EllipsisVerticalIcon, ResetIcon as ClearIcon, SyncIcon as ReplaceIcon} from '@sanity/icons'\nimport {concat, Observable, of} from 'rxjs'\nimport {useId} from '@reach/auto-id'\nimport {catchError, distinctUntilChanged, filter, map, scan, switchMap, tap} from 'rxjs/operators'\nimport {\n  Box,\n  Button,\n  Card,\n  Flex,\n  Inline,\n  Menu,\n  MenuButton,\n  MenuItem,\n  Stack,\n  Text,\n  useForwardedRef,\n  useToast,\n} from '@sanity/ui'\nimport {useObservableCallback} from 'react-rx'\nimport {FIXME, ObjectInputProps} from '../../types'\nimport {set, unset} from '../../patch'\nimport {AlertStrip} from '../../components/AlertStrip'\nimport {useOnClickOutside} from '../../hooks/useOnClickOutside'\nimport {isNonNullable} from '../../utils/isNonNullable'\nimport {getPublishedId} from '../../../util'\nimport {ChangeIndicator} from '../../../components/changeIndicators'\nimport {CrossDatasetReferenceInfo, CrossDatasetSearchHit, SearchState} from './types'\nimport {OptionPreview} from './OptionPreview'\nimport {GetReferenceInfoFn, useReferenceInfo} from './useReferenceInfo'\nimport {PreviewReferenceValue} from './PreviewReferenceValue'\nimport {ReferenceAutocomplete} from './ReferenceAutocomplete'\nimport {PreviewCard} from './PreviewCard'\n\nconst INITIAL_SEARCH_STATE: SearchState = {\n  hits: [],\n  isLoading: false,\n}\n\nexport interface CrossDatasetReferenceInputProps\n  extends ObjectInputProps<CrossDatasetReference, CrossDatasetReferenceSchemaType> {\n  getReferenceInfo: (\n    doc: {_id: string; _type?: string},\n    type: CrossDatasetReferenceSchemaType\n  ) => Observable<CrossDatasetReferenceInfo>\n  onSearch: (query: string) => Observable<CrossDatasetSearchHit[]>\n}\n\nconst NO_FILTER = () => true\n\nconst REF_PATH = ['_ref']\n\nexport function CrossDatasetReferenceInput(props: CrossDatasetReferenceInputProps) {\n  const {\n    changed,\n    focused,\n    focusPath,\n    getReferenceInfo,\n    onChange,\n    onFocusPath,\n    onSearch,\n    path,\n    readOnly,\n    schemaType,\n    validation,\n    value,\n    elementProps,\n  } = props\n\n  const [searchState, setSearchState] = useState<SearchState>(INITIAL_SEARCH_STATE)\n\n  const handleChange = useCallback(\n    (id: string) => {\n      if (!id) {\n        onChange(unset())\n        onFocusPath([])\n        return\n      }\n\n      const hit = searchState.hits.find((h) => h.id === id)\n\n      if (!hit) {\n        throw new Error('Selected an item that wasnt part of the result set')\n      }\n\n      onChange(\n        set({\n          _type: schemaType.name,\n          _ref: getPublishedId(id),\n          _projectId: schemaType.projectId,\n          _dataset: schemaType.dataset,\n          _weak: schemaType.weak,\n          // persist _key between mutations if the value is in an array\n          _key: value?._key,\n        })\n      )\n\n      onFocusPath([])\n    },\n    [\n      value?._key,\n      searchState.hits,\n      schemaType.name,\n      schemaType.projectId,\n      schemaType.dataset,\n      schemaType.weak,\n      onChange,\n      onFocusPath,\n    ]\n  )\n\n  const handleClear = useCallback(() => {\n    onChange(unset())\n  }, [onChange])\n\n  const handleAutocompleteKeyDown = useCallback(\n    (event) => {\n      // escape\n      if (event.keyCode === 27) {\n        onFocusPath?.([])\n      }\n    },\n    [onFocusPath]\n  )\n\n  const getReferenceInfoMemo: GetReferenceInfoFn = useCallback(\n    (doc) => getReferenceInfo(doc, schemaType),\n    [getReferenceInfo, schemaType]\n  )\n\n  const refDoc = useMemo(() => ({_id: value?._ref}), [value?._ref])\n\n  const loadableReferenceInfo = useReferenceInfo(refDoc as FIXME, getReferenceInfoMemo)\n\n  const autocompletePopoverReferenceElementRef = useRef<HTMLDivElement | null>(null)\n\n  const hasFocusAtRef = focusPath.length === 1 && focusPath[0] === '_ref'\n\n  // --- focus handling\n  // const focusElementRef = useForwardedRef(forwardedRef)\n  // useDidUpdate({hasFocusAt: hasFocusAtRef, ref: value?._ref}, (prev, current) => {\n  //   const refUpdated = prev?.ref !== current.ref\n  //   const focusAtUpdated = prev?.hasFocusAt !== current.hasFocusAt\n\n  //   if ((focusAtUpdated || refUpdated) && current.hasFocusAt) {\n  //     // if search mode changed and we're having focus always ensure the\n  //     // ref element gets focus\n  //     focusElementRef.current?.focus()\n  //   }\n  // })\n\n  const weakIs = value?._weak ? 'weak' : 'strong'\n  const weakShouldBe = schemaType.weak === true ? 'weak' : 'strong'\n\n  const hasRef = Boolean(value?._ref)\n\n  const handleFixStrengthMismatch = useCallback(() => {\n    onChange(schemaType.weak === true ? set(true, ['_weak']) : unset(['_weak']))\n  }, [onChange, schemaType])\n\n  const {push} = useToast()\n\n  const errors = useMemo(() => validation.filter((item) => item.level === 'error'), [validation])\n\n  const handleFocus = useCallback(\n    (event) => {\n      if (onFocusPath && event.currentTarget === elementProps.ref.current) {\n        onFocusPath([])\n      }\n    },\n    [elementProps.ref, onFocusPath]\n  )\n\n  const handleAutocompleteFocus = useCallback(\n    (event) => {\n      if (onFocusPath && event.currentTarget === elementProps.ref.current) {\n        onFocusPath(REF_PATH)\n      }\n    },\n    [elementProps.ref, onFocusPath]\n  )\n\n  const handleQueryChange = useObservableCallback((inputValue$: Observable<string | null>) => {\n    return inputValue$.pipe(\n      filter(isNonNullable),\n      distinctUntilChanged(),\n      switchMap((searchString) =>\n        concat(\n          of({isLoading: true}),\n          onSearch(searchString).pipe(\n            map((hits) => ({hits, searchString, isLoading: false})),\n            catchError((error) => {\n              push({\n                title: 'Reference search failed',\n                description: error.message,\n                status: 'error',\n                id: `reference-search-fail-${inputId}`,\n              })\n\n              console.error(error)\n              return of({hits: []})\n            })\n          )\n        )\n      ),\n\n      scan(\n        (prevState, nextState): SearchState => ({...prevState, ...nextState}),\n        INITIAL_SEARCH_STATE\n      ),\n\n      tap(setSearchState)\n    )\n  }, [])\n\n  const handleAutocompleteOpenButtonClick = useCallback(() => {\n    handleQueryChange('')\n  }, [handleQueryChange])\n\n  const showWeakRefMismatch = !loadableReferenceInfo.isLoading && hasRef && weakIs !== weakShouldBe\n\n  const inputId = useId()\n\n  const studioUrl =\n    (value?._ref &&\n      schemaType.studioUrl?.({\n        id: value?._ref,\n        type: loadableReferenceInfo?.result?.type,\n      })) ||\n    null\n\n  const renderOption = useCallback(\n    (option) => {\n      return (\n        <PreviewCard forwardedAs=\"button\" type=\"button\" radius={2}>\n          <Box paddingX={3} paddingY={1}>\n            <OptionPreview\n              referenceType={schemaType}\n              document={option.hit.published}\n              getReferenceInfo={getReferenceInfoMemo}\n            />\n          </Box>\n        </PreviewCard>\n      )\n    },\n    [schemaType, getReferenceInfoMemo]\n  )\n\n  const preview = loadableReferenceInfo.result?.preview.published\n\n  const isEditing = hasFocusAtRef || !value?._ref\n\n  // --- click outside handling\n  const clickOutsideBoundaryRef = useRef<HTMLDivElement | null>(null)\n  const autocompletePortalRef = useRef<HTMLDivElement | null>(null)\n  const createButtonMenuPortalRef = useRef<HTMLDivElement | null>(null)\n  useOnClickOutside(\n    [clickOutsideBoundaryRef, autocompletePortalRef, createButtonMenuPortalRef],\n    () => {\n      if (hasFocusAtRef) {\n        onFocusPath([])\n      }\n    }\n  )\n\n  return (\n    <Stack space={1} marginY={isEditing ? 2 : 0}>\n      {isEditing ? (\n        <Stack space={2} ref={clickOutsideBoundaryRef}>\n          <ChangeIndicator path={path} isChanged={changed} hasFocus={!!focused}>\n            <div ref={autocompletePopoverReferenceElementRef}>\n              <ReferenceAutocomplete\n                {...elementProps}\n                data-testid=\"autocomplete\"\n                loading={searchState.isLoading}\n                referenceElement={autocompletePopoverReferenceElementRef.current}\n                portalRef={autocompletePortalRef}\n                id={inputId || ''}\n                options={searchState.hits.map((hit) => ({\n                  value: hit.id,\n                  hit: hit,\n                }))}\n                onFocus={handleAutocompleteFocus}\n                radius={1}\n                placeholder=\"Type to search\"\n                onKeyDown={handleAutocompleteKeyDown}\n                readOnly={readOnly}\n                disabled={loadableReferenceInfo.isLoading}\n                onQueryChange={handleQueryChange}\n                searchString={searchState.searchString}\n                onChange={handleChange}\n                filterOption={NO_FILTER}\n                renderOption={renderOption}\n                openButton={{onClick: handleAutocompleteOpenButtonClick}}\n              />\n            </div>\n          </ChangeIndicator>\n        </Stack>\n      ) : (\n        <ChangeIndicator path={path} isChanged={changed} hasFocus={!!focused}>\n          <Card\n            padding={0}\n            border\n            radius={1}\n            tone={\n              readOnly\n                ? 'transparent'\n                : loadableReferenceInfo.error || errors.length > 0\n                ? 'critical'\n                : 'default'\n            }\n          >\n            <Flex align=\"center\" padding={1}>\n              {studioUrl ? (\n                <PreviewCard\n                  forwardedAs=\"a\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  href={studioUrl}\n                  data-as=\"a\"\n                  flex={1}\n                  padding={1}\n                  paddingRight={3}\n                  radius={2}\n                  tone=\"inherit\"\n                  __unstable_focusRing\n                  tabIndex={0}\n                  onFocus={handleFocus}\n                  ref={elementProps.ref}\n                >\n                  <PreviewReferenceValue\n                    value={value}\n                    referenceInfo={loadableReferenceInfo}\n                    showStudioUrlIcon\n                    hasStudioUrl={!!studioUrl}\n                    type={schemaType}\n                  />\n                </PreviewCard>\n              ) : (\n                <PreviewCard\n                  flex={1}\n                  padding={1}\n                  paddingRight={3}\n                  radius={2}\n                  tone=\"inherit\"\n                  __unstable_focusRing\n                  tabIndex={0}\n                  onFocus={handleFocus}\n                  ref={elementProps.ref}\n                >\n                  <PreviewReferenceValue\n                    value={value}\n                    referenceInfo={loadableReferenceInfo}\n                    showStudioUrlIcon\n                    type={schemaType}\n                  />\n                </PreviewCard>\n              )}\n\n              <Inline paddingX={1}>\n                <MenuButton\n                  button={\n                    <Button\n                      padding={2}\n                      mode=\"bleed\"\n                      icon={EllipsisVerticalIcon}\n                      data-testid=\"menu-button\"\n                    />\n                  }\n                  id={`${inputId}-menuButton`}\n                  menu={\n                    <Menu>\n                      {!readOnly && (\n                        <>\n                          <MenuItem\n                            text=\"Clear\"\n                            tone=\"critical\"\n                            icon={ClearIcon}\n                            data-testid=\"menu-item-clear\"\n                            onClick={handleClear}\n                          />\n\n                          <MenuItem\n                            text=\"Replace\"\n                            icon={ReplaceIcon}\n                            data-testid=\"menu-item-replace\"\n                            onClick={() => {\n                              onFocusPath(REF_PATH)\n                            }}\n                          />\n                        </>\n                      )}\n                    </Menu>\n                  }\n                  placement=\"right\"\n                  popover={{portal: true, tone: 'default'}}\n                />\n              </Inline>\n            </Flex>\n            {showWeakRefMismatch && (\n              <AlertStrip\n                padding={1}\n                title=\"Reference strength mismatch\"\n                status=\"warning\"\n                data-testid=\"alert-reference-strength-mismatch\"\n              >\n                <Stack space={3}>\n                  <Text as=\"p\" muted size={1}>\n                    This reference is <em>{weakIs}</em>, but according to the current schema it\n                    should be <em>{weakShouldBe}.</em>\n                  </Text>\n\n                  <Text as=\"p\" muted size={1}>\n                    {schemaType.weak ? (\n                      <>\n                        It will not be possible to delete the \"{preview?.title}\"-document without\n                        first removing this reference.\n                      </>\n                    ) : (\n                      <>\n                        This makes it possible to delete the \"{preview?.title}\"-document without\n                        first deleting this reference, leaving this field referencing a nonexisting\n                        document.\n                      </>\n                    )}\n                  </Text>\n                  <Button\n                    onClick={handleFixStrengthMismatch}\n                    text={<>Convert to {weakShouldBe} reference</>}\n                    tone=\"caution\"\n                  />\n                </Stack>\n              </AlertStrip>\n            )}\n\n            {loadableReferenceInfo.error && (\n              <AlertStrip\n                padding={1}\n                title=\"Unable to load reference metadata\"\n                status=\"warning\"\n                data-testid=\"alert-reference-info-failed\"\n              >\n                <Stack space={3}>\n                  <Text as=\"p\" muted size={1}>\n                    Error: {loadableReferenceInfo.error.message}\n                  </Text>\n                  <Button onClick={loadableReferenceInfo.retry!} text={<>Retry</>} tone=\"primary\" />\n                </Stack>\n              </AlertStrip>\n            )}\n          </Card>\n        </ChangeIndicator>\n      )}\n    </Stack>\n  )\n}\n","import {map} from 'rxjs/operators'\n\nimport {CrossDatasetReferenceSchemaType, ReferenceFilterSearchOptions} from '@sanity/types'\nimport {Observable} from 'rxjs'\n\n// eslint-disable-next-line camelcase\nimport {SanityClient} from '@sanity/client'\nimport {collate} from '../../../../../util'\nimport {createWeightedSearch} from '../../../../../search'\n\ninterface SearchHit {\n  id: string\n  type: string\n  published: undefined | {_id: string; _type: string}\n}\n\nexport function search(\n  client: SanityClient,\n  textTerm: string,\n  type: CrossDatasetReferenceSchemaType,\n  options: ReferenceFilterSearchOptions\n): Observable<SearchHit[]> {\n  const searchWeighted = createWeightedSearch(\n    type.to.map((crossDatasetType) => ({\n      name: crossDatasetType.type,\n      // eslint-disable-next-line camelcase\n      __experimental_search: crossDatasetType.__experimental_search,\n    })),\n\n    client,\n    options\n  )\n\n  return searchWeighted(textTerm, {includeDrafts: false}).pipe(\n    // pick the 100 best matches\n    map((results) => results.map((result) => result.hit)),\n    map(collate),\n    map((collated) =>\n      collated.map((entry) => ({\n        id: entry.id,\n        type: entry.type,\n        published: entry.published,\n      }))\n    )\n  )\n}\n","import {map, switchMap} from 'rxjs/operators'\nimport {CrossDatasetReferenceSchemaType} from '@sanity/types'\nimport {combineLatest, Observable, of} from 'rxjs'\nimport {SanityClient} from '@sanity/client'\nimport {keyBy} from 'lodash'\nimport {\n  DocumentPreviewStore,\n  getPreviewPaths,\n  prepareForPreview,\n  DocumentAvailability,\n  Previewable,\n} from '../../../../../preview'\nimport {CrossDatasetReferenceInfo} from '../../../../inputs/CrossDatasetReferenceInput/types'\nimport {FIXME} from '../../../../types'\nimport {isRecord} from '../../../../../util'\n\nconst REQUEST_TAG_BASE = 'cross-dataset-refs'\n\nconst AVAILABILITY_READABLE = {\n  available: true,\n  reason: 'READABLE',\n} as const\n\nconst AVAILABILITY_PERMISSION_DENIED = {\n  available: false,\n  reason: 'PERMISSION_DENIED',\n} as const\n\nconst AVAILABILITY_NOT_FOUND = {\n  available: false,\n  reason: 'NOT_FOUND',\n} as const\n\n/**\n * Takes a client instance and returns a function that can be called to retrieve reference information\n */\nexport function createGetReferenceInfo(context: {\n  client: SanityClient\n  documentPreviewStore: DocumentPreviewStore\n}) {\n  const {client, documentPreviewStore} = context\n  const {dataset, projectId} = client.config()\n  const apiConfig = dataset && projectId ? {dataset, projectId} : undefined\n\n  /**\n   * Takes an id and a reference schema type, returns metadata about it\n   * Assumption: _id is always published id\n   */\n  return function getReferenceInfo(\n    doc: {_id: string; _type?: string}, // pass {_id, _type} instead and we can skip the `fetchType`\n    referenceType: CrossDatasetReferenceSchemaType\n  ): Observable<CrossDatasetReferenceInfo> {\n    return (\n      doc._type\n        ? of(doc)\n        : documentPreviewStore\n            .observeDocumentTypeFromId(doc._id, apiConfig)\n            .pipe(map((docType): {_id: string; _type?: string} => ({_id: doc._id, _type: docType})))\n    ).pipe(\n      switchMap((resolvedDoc) => {\n        if (!resolvedDoc._type) {\n          // we still can't read the type of the referenced document. This may be due to either 1) lack of access 2) lack of existence\n          // we want to display a reason to the end user, so we're fetching metadata about it\n          return fetchDocumentAvailability(client, doc._id).pipe(\n            map((availability) => ({\n              id: doc._id,\n              type: undefined,\n              availability,\n              preview: {published: undefined},\n            }))\n          )\n        }\n        const refSchemaType = referenceType.to.find(\n          (candidate) => candidate.type === resolvedDoc._type\n        )\n\n        const previewPaths = [\n          ...(getPreviewPaths(refSchemaType?.preview) || []),\n          ['_updatedAt'],\n          ['_createdAt'],\n        ]\n\n        const publishedPreview$ = documentPreviewStore\n          .observePaths(doc as Previewable, previewPaths, apiConfig)\n          .pipe(\n            map((result) => (result ? prepareForPreview(result, refSchemaType as FIXME) : result))\n          )\n\n        return combineLatest([publishedPreview$]).pipe(\n          map(([publishedPreview]) => {\n            return {\n              type: resolvedDoc._type,\n              id: doc._id,\n              availability: AVAILABILITY_READABLE,\n              preview: {\n                published: isRecord(publishedPreview) ? publishedPreview : undefined,\n              },\n            }\n          })\n        )\n      })\n    )\n  }\n}\n\nfunction fetchDocumentAvailability(\n  client: SanityClient,\n  id: string\n): Observable<DocumentAvailability | null> {\n  const requestOptions = {\n    uri: client.getDataUrl('doc', id),\n    json: true,\n    query: {excludeContent: 'true'},\n    tag: `${REQUEST_TAG_BASE}.availability`,\n  }\n\n  return client.observable.request(requestOptions).pipe(\n    map((response) => {\n      const omitted = keyBy(response.omitted || [], (entry) => entry.id)\n      const omittedEntry = omitted[id]\n      if (!omittedEntry) {\n        // it's not omitted, so it exists and is readable\n        return AVAILABILITY_READABLE\n      }\n      // omitted because it doesn't exist\n      if (omittedEntry.reason === 'existence') {\n        return AVAILABILITY_NOT_FOUND\n      }\n      if (omittedEntry.reason === 'permission') {\n        // omitted because it's not readable\n        return AVAILABILITY_PERMISSION_DENIED\n      }\n      return null\n    })\n  )\n}\n","import {SanityClient} from '@sanity/client'\nimport {useMemoObservable} from 'react-rx'\nimport {map, startWith} from 'rxjs/operators'\nimport {useCrossProjectTokenStore, useDocumentPreviewStore} from '../../../../../datastores'\nimport {isRecord} from '../../../../../util'\n\ntype LoadState<T> =\n  | {status: 'loading'}\n  | {\n      status: 'loaded'\n      result: T | undefined\n    }\n  | {status: 'error'; error: Error}\n\nexport function useCrossProjectToken(\n  client: SanityClient,\n  {projectId, tokenId}: {tokenId?: string; projectId: string}\n): LoadState<string> | undefined {\n  const documentPreviewStore = useDocumentPreviewStore()\n  const crossProjectTokenStore = useCrossProjectTokenStore()\n\n  return useMemoObservable(() => {\n    return documentPreviewStore\n      .observePaths(\n        {\n          _type: 'reference',\n          _ref: crossProjectTokenStore.getTokenDocumentId({projectId, tokenId}),\n        },\n        ['token']\n      )\n      .pipe(\n        map((documentValue) => {\n          const value: Record<string, unknown> | undefined = isRecord(documentValue)\n            ? documentValue\n            : undefined\n\n          return {\n            status: 'loaded',\n            result: typeof value?.token === 'string' ? value?.token : undefined,\n          } as const\n        }),\n        startWith({status: 'loading'} as const)\n      )\n  }, [client, crossProjectTokenStore, documentPreviewStore, projectId, tokenId])\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {\n  CrossDatasetReference,\n  CrossDatasetReferenceSchemaType,\n  Path,\n  ReferenceFilterOptions,\n  ReferenceFilterSearchOptions,\n  SanityDocument,\n} from '@sanity/types'\nimport {get} from '@sanity/util/paths'\nimport {from, throwError} from 'rxjs'\nimport {catchError, mergeMap} from 'rxjs/operators'\nimport {Box, Stack, Text, TextSkeleton} from '@sanity/ui'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../studioClient'\nimport {CrossDatasetReferenceInput} from '../../../inputs/CrossDatasetReferenceInput'\nimport {Alert} from '../../../components/Alert'\nimport {useDocumentPreviewStore} from '../../../../datastores'\nimport {useClient, useProjectId} from '../../../../hooks'\nimport {FIXME, ObjectInputProps} from '../../../types'\nimport {useFormValue} from '../../../useFormValue'\nimport {search} from './datastores/search'\nimport {createGetReferenceInfo} from './datastores/getReferenceInfo'\nimport {useCrossProjectToken} from './datastores/useCrossProjectToken'\n\n// eslint-disable-next-line require-await\nasync function resolveUserDefinedFilter(\n  options: ReferenceFilterOptions | undefined,\n  document: SanityDocument,\n  valuePath: Path\n): Promise<ReferenceFilterSearchOptions> {\n  if (!options) {\n    return {}\n  }\n\n  if (typeof options.filter === 'function') {\n    const parentPath = valuePath.slice(0, -1)\n    const parent = get(document, parentPath) as Record<string, unknown>\n    return options.filter({document, parentPath, parent})\n  }\n\n  return {\n    filter: options.filter,\n    params: 'filterParams' in options ? options.filterParams : undefined,\n  }\n}\n\nexport type StudioCrossDatasetReferenceInputProps = ObjectInputProps<\n  CrossDatasetReference,\n  CrossDatasetReferenceSchemaType\n>\n\nfunction useValueRef<T>(value: T): {current: T} {\n  const ref = useRef(value)\n  ref.current = value\n  return ref\n}\n\ntype SearchError = {\n  message: string\n  details?: {\n    type: string\n    description: string\n  }\n}\n\nexport function StudioCrossDatasetReferenceInput(props: StudioCrossDatasetReferenceInputProps) {\n  const {path, schemaType} = props\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const projectId = useProjectId()\n  const documentPreviewStore = useDocumentPreviewStore()\n\n  const isCurrentProject = projectId === schemaType.projectId\n  const loadableToken = useCrossProjectToken(client, {\n    projectId: schemaType.projectId,\n    tokenId: schemaType.tokenId,\n  })\n\n  const crossDatasetClient = useMemo(() => {\n    const token = isCurrentProject\n      ? undefined\n      : loadableToken?.status === 'loaded' && loadableToken.result\n\n    return (\n      client\n        .withConfig({\n          projectId: schemaType.projectId,\n          dataset: schemaType.dataset,\n          apiVersion: '2022-03-07',\n          token: token || undefined,\n          ignoreBrowserTokenWarning: true,\n        })\n\n        // seems like this is required to prevent this client from sometimes magically get mutated with a new projectId and dataset\n        .clone()\n    )\n  }, [client, isCurrentProject, loadableToken, schemaType.projectId, schemaType.dataset])\n\n  const documentValue = useFormValue([]) as FIXME\n  const documentRef = useValueRef(documentValue)\n\n  const handleSearch = useCallback(\n    (searchString: string) =>\n      from(resolveUserDefinedFilter(schemaType.options, documentRef.current, path)).pipe(\n        mergeMap(({filter, params}) =>\n          search(crossDatasetClient, searchString, schemaType, {\n            ...schemaType.options,\n            filter,\n            params,\n            tag: 'search.cross-dataset-reference',\n          })\n        ),\n\n        catchError((err: SearchError) => {\n          const isQueryError = err.details && err.details.type === 'queryParseError'\n          if (schemaType.options?.filter && isQueryError) {\n            err.message = `Invalid reference filter, please check the custom \"filter\" option`\n          }\n          return throwError(err)\n        })\n      ),\n\n    [crossDatasetClient, documentRef, path, schemaType]\n  )\n\n  const getReferenceInfo = useMemo(\n    () => createGetReferenceInfo({client: crossDatasetClient, documentPreviewStore}),\n    [crossDatasetClient, documentPreviewStore]\n  )\n\n  if (loadableToken?.status === 'loading') {\n    return (\n      <Box padding={2}>\n        <Stack space={2}>\n          <Stack space={2} padding={1}>\n            <TextSkeleton style={{maxWidth: 320}} radius={1} />\n            <TextSkeleton style={{maxWidth: 200}} radius={1} size={1} />\n          </Stack>\n        </Stack>\n      </Box>\n    )\n  }\n\n  if (!isCurrentProject && loadableToken?.status === 'loaded' && !loadableToken.result) {\n    return (\n      <Stack space={2} marginY={2}>\n        <Text size={1} weight=\"semibold\">\n          {schemaType.title}\n        </Text>\n        <Alert title=\"No cross dataset read token found\" size={1} muted>\n          <Stack space={3}>\n            <Text size={1}>\n              This cross dataset reference field requires a cross dataset token to be registered.\n              Please configure a token{' '}\n              {schemaType.tokenId ? (\n                <>\n                  with ID <b>{schemaType.tokenId}</b>\n                </>\n              ) : null}{' '}\n              for project <b>{schemaType.projectId}</b> that has read access to the{' '}\n              <b>{schemaType.dataset}</b>\n              -dataset.\n            </Text>\n            <Text size={1}>\n              See the documentation for{' '}\n              <a href=\"https://www.sanity.io/docs/cross-dataset-references\">\n                Cross Dataset References\n              </a>{' '}\n              for more details.\n            </Text>\n          </Stack>\n        </Alert>\n      </Stack>\n    )\n  }\n\n  return (\n    <CrossDatasetReferenceInput\n      {...props}\n      getReferenceInfo={getReferenceInfo}\n      onSearch={handleSearch}\n    />\n  )\n}\n","import React from 'react'\nimport {BooleanInput} from '../../inputs/BooleanInput'\nimport {EmailInput} from '../../inputs/EmailInput'\nimport {NumberInput} from '../../inputs/NumberInput'\nimport {ObjectInput} from '../../inputs/ObjectInput'\nimport {StringInput} from '../../inputs/StringInput'\nimport {DateTimeInput, DateInput} from '../../inputs/DateInputs'\nimport {TextInput} from '../../inputs/TextInput'\nimport {UrlInput} from '../../inputs/UrlInput'\nimport {SlugInput} from '../../inputs/Slug/SlugInput'\nimport {StudioArrayInput} from '../inputs/StudioArrayInput'\nimport {StudioImageInput} from '../inputs/StudioImageInput'\nimport {StudioFileInput} from '../inputs/StudioFileInput'\nimport {StudioCrossDatasetReferenceInput} from '../inputs/crossDatasetReference/StudioCrossDatasetReferenceInput'\nimport {FIXME} from '../../types'\n\nexport const defaultInputs: Record<string, React.ComponentType<FIXME>> = {\n  document: ObjectInput,\n  object: ObjectInput,\n  array: StudioArrayInput,\n  boolean: BooleanInput,\n  number: NumberInput,\n  text: TextInput,\n  email: EmailInput,\n  datetime: DateTimeInput,\n  date: DateInput,\n  url: UrlInput,\n  image: StudioImageInput,\n  file: StudioFileInput,\n  string: StringInput,\n  slug: SlugInput,\n  crossDatasetReference: StudioCrossDatasetReferenceInput,\n}\n","/* eslint-disable react/jsx-handler-names */\nimport {\n  ArraySchemaType,\n  isBooleanSchemaType,\n  NumberSchemaType,\n  ReferenceSchemaType,\n  SchemaType,\n  StringSchemaType,\n} from '@sanity/types'\nimport React from 'react'\nimport {FieldMember} from '../../store'\nimport {\n  ArrayFieldProps,\n  FieldProps,\n  FIXME,\n  InputProps,\n  ItemProps,\n  ObjectFieldProps,\n} from '../../types'\nimport * as is from '../../utils/is'\nimport {FormField, FormFieldSet} from '../../components/formField'\nimport {PreviewProps} from '../../../components/previews'\nimport {SanityPreview} from '../../../preview'\nimport {ChangeIndicator} from '../../../components/changeIndicators'\nimport {resolveReferenceInput} from './resolveReferenceInput'\nimport {resolveArrayInput} from './resolveArrayInput'\nimport {resolveStringInput} from './resolveStringInput'\nimport {resolveNumberInput} from './resolveNumberInput'\nimport {defaultInputs} from './defaultInputs'\n\nfunction resolveComponentFromTypeVariants(\n  type: SchemaType\n): React.ComponentType<FIXME> | undefined {\n  if (is.type('array', type)) {\n    return resolveArrayInput(type as ArraySchemaType)\n  }\n\n  if (is.type('reference', type)) {\n    return resolveReferenceInput(type as ReferenceSchemaType)\n  }\n\n  // String input with a select\n  if (is.type('string', type)) {\n    return resolveStringInput(type as StringSchemaType)\n  }\n\n  if (is.type('number', type)) {\n    return resolveNumberInput(type as NumberSchemaType)\n  }\n\n  return undefined\n}\n\nfunction getTypeChain(type: SchemaType | undefined, visited: Set<SchemaType>): SchemaType[] {\n  if (!type) return []\n  if (visited.has(type)) return []\n\n  visited.add(type)\n\n  const next = type.type ? getTypeChain(type.type, visited) : []\n  return [type, ...next]\n}\n\nexport function defaultResolveInputComponent(\n  schemaType: SchemaType\n): React.ComponentType<InputProps> {\n  if (schemaType.components?.input) return schemaType.components.input\n\n  const componentFromTypeVariants = resolveComponentFromTypeVariants(schemaType)\n  if (componentFromTypeVariants) {\n    return componentFromTypeVariants\n  }\n\n  const typeChain = getTypeChain(schemaType, new Set())\n  const deduped = typeChain.reduce((acc, type) => {\n    acc[type.name] = type\n    return acc\n  }, {} as Record<string, SchemaType>)\n\n  // using an object + Object.values to de-dupe the type chain by type name\n  const subType = Object.values(deduped).find((t) => defaultInputs[t.name])\n\n  if (subType) {\n    return defaultInputs[subType.name]\n  }\n\n  throw new Error(`Could not find input component for schema type \\`${schemaType.name}\\``)\n}\n\nfunction NoopField({children}: {children: React.ReactNode}) {\n  return <>{children}</>\n}\n\nfunction PrimitiveField(field: FieldProps) {\n  return (\n    <FormField\n      data-testid={`field-${field.inputId}`}\n      level={field.level}\n      title={field.title}\n      description={field.description}\n      validation={field.validation}\n      __unstable_presence={field.presence}\n    >\n      <ChangeIndicator\n        path={field.path}\n        hasFocus={Boolean(field.inputProps.focused)}\n        isChanged={field.inputProps.changed}\n      >\n        {field.children}\n      </ChangeIndicator>\n    </FormField>\n  )\n}\n\nfunction ObjectOrArrayField(field: ObjectFieldProps | ArrayFieldProps) {\n  return (\n    <FormFieldSet\n      data-testid={`field-${field.inputId}`}\n      level={field.level}\n      title={field.title}\n      description={field.description}\n      collapsed={field.collapsed}\n      collapsible={field.collapsible}\n      onCollapse={field.onCollapse}\n      onExpand={field.onExpand}\n      validation={field.validation}\n      __unstable_presence={field.presence}\n    >\n      {field.children}\n    </FormFieldSet>\n  )\n}\n\nfunction ImageOrFileField(field: ObjectFieldProps) {\n  // unless the hotspot tool dialog is open we want to show whoever is in there as the field presence\n  const hotspotField = field.inputProps.members.find(\n    (member): member is FieldMember => member.kind === 'field' && member.name === 'hotspot'\n  )\n  const presence = hotspotField?.open\n    ? field.presence\n    : field.presence.concat(hotspotField?.field.presence || [])\n\n  return (\n    <FormFieldSet\n      level={field.level}\n      title={field.title}\n      description={field.description}\n      collapsed={field.collapsed}\n      collapsible={field.collapsible}\n      onCollapse={field.onCollapse}\n      onExpand={field.onExpand}\n      validation={field.validation}\n      __unstable_presence={presence}\n    >\n      {field.children}\n    </FormFieldSet>\n  )\n}\n\nexport function defaultResolveFieldComponent(\n  schemaType: SchemaType\n): React.ComponentType<FieldProps> {\n  if (schemaType.components?.field) return schemaType.components.field\n\n  if (isBooleanSchemaType(schemaType)) {\n    return NoopField\n  }\n\n  if (getTypeChain(schemaType, new Set()).some((t) => t.name === 'image' || t.name === 'file')) {\n    return ImageOrFileField as React.ComponentType<FieldProps>\n  }\n\n  if (schemaType.jsonType !== 'object' && schemaType.jsonType !== 'array') {\n    return PrimitiveField\n  }\n\n  return ObjectOrArrayField as React.ComponentType<FieldProps>\n}\n\nexport function defaultResolveItemComponent(\n  schemaType: SchemaType\n): React.ComponentType<ItemProps> {\n  if (schemaType.components?.item) return schemaType.components.item\n\n  return NoopField\n}\n\nexport function defaultResolvePreviewComponent(): React.ComponentType<PreviewProps> {\n  return SanityPreview as any\n}\n","import {createElement} from 'react'\nimport {\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderItemCallback,\n  RenderPreviewCallback,\n} from '../types'\nimport {\n  defaultResolveFieldComponent,\n  defaultResolveInputComponent,\n  defaultResolveItemComponent,\n  defaultResolvePreviewComponent,\n} from './inputResolver/inputResolver'\n\nexport const defaultRenderField: RenderFieldCallback = (props) => {\n  return createElement(defaultResolveFieldComponent(props.schemaType), props)\n}\n\nexport const defaultRenderInput: RenderInputCallback = (props) => {\n  return createElement(defaultResolveInputComponent(props.schemaType), props)\n}\n\nexport const defaultRenderItem: RenderItemCallback = (props) => {\n  return createElement(defaultResolveItemComponent(props.schemaType), props)\n}\n\nexport const defaultRenderPreview: RenderPreviewCallback = (props) => {\n  return createElement(defaultResolvePreviewComponent(), props)\n}\n","import {FieldProps, RenderFieldCallback} from '../../form'\nimport {defaultRenderField} from '../../form/studio/defaults'\nimport {PluginOptions, SourceOptions} from '../types'\nimport {_RenderMiddleware} from './_types'\n\nfunction _collectMiddleware(\n  middlewares: _RenderMiddleware<FieldProps, RenderFieldCallback>[],\n  plugins: PluginOptions[]\n) {\n  for (const plugin of plugins) {\n    // Recursive\n    if (plugin.plugins) {\n      _collectMiddleware(middlewares, plugin.plugins)\n    }\n\n    if (plugin.form?.renderField) {\n      middlewares.push(plugin.form?.renderField)\n    }\n  }\n}\n\n/**\n * @internal\n */\nexport function _createRenderField(config: SourceOptions): RenderFieldCallback {\n  return (props) => {\n    const middlewares: _RenderMiddleware<FieldProps, RenderFieldCallback>[] = []\n\n    if (config.plugins) {\n      _collectMiddleware(middlewares, config.plugins)\n    }\n\n    if (config.form?.renderField) {\n      middlewares.push(config.form?.renderField)\n    }\n\n    // Initialize the callback chain\n    let next = defaultRenderField\n\n    for (const middleware of middlewares) {\n      const defaultRender = next\n\n      next = (fieldProps: FieldProps) => {\n        return middleware(fieldProps, defaultRender) || defaultRender(fieldProps)\n      }\n    }\n\n    return next(props)\n  }\n}\n","import {InputProps, RenderInputCallback} from '../../form'\nimport {defaultRenderInput} from '../../form/studio/defaults'\nimport {PluginOptions, SourceOptions} from '../types'\nimport {_RenderMiddleware} from './_types'\n\nfunction _collectMiddleware(\n  middlewares: _RenderMiddleware<InputProps, RenderInputCallback>[],\n  plugins: PluginOptions[]\n) {\n  for (const plugin of plugins) {\n    // Recursive\n    if (plugin.plugins) {\n      _collectMiddleware(middlewares, plugin.plugins)\n    }\n\n    if (plugin.form?.renderInput) {\n      middlewares.push(plugin.form?.renderInput)\n    }\n  }\n}\n\n/**\n * @internal\n */\nexport function _createRenderInput(config: SourceOptions): RenderInputCallback {\n  return (props) => {\n    const middlewares: _RenderMiddleware<InputProps, RenderInputCallback>[] = []\n\n    if (config.plugins) {\n      _collectMiddleware(middlewares, config.plugins)\n    }\n\n    if (config.form?.renderInput) {\n      middlewares.push(config.form?.renderInput)\n    }\n\n    // Initialize the callback chain\n    let next = defaultRenderInput\n\n    for (const middleware of middlewares) {\n      const defaultRender = next\n\n      next = (inputProps: InputProps) => {\n        return middleware(inputProps, defaultRender) || defaultRender(inputProps)\n      }\n    }\n\n    return next(props)\n  }\n}\n","import {ItemProps, RenderItemCallback} from '../../form'\nimport {defaultRenderItem} from '../../form/studio/defaults'\nimport {PluginOptions, SourceOptions} from '../types'\nimport {_RenderMiddleware} from './_types'\n\nfunction _collectMiddleware(\n  middlewares: _RenderMiddleware<ItemProps, RenderItemCallback>[],\n  plugins: PluginOptions[]\n) {\n  for (const plugin of plugins) {\n    // Recursive\n    if (plugin.plugins) {\n      _collectMiddleware(middlewares, plugin.plugins)\n    }\n\n    if (plugin.form?.renderItem) {\n      middlewares.push(plugin.form?.renderItem)\n    }\n  }\n}\n\n/**\n * @internal\n */\nexport function _createRenderItem(config: SourceOptions): RenderItemCallback {\n  return (props) => {\n    const middlewares: _RenderMiddleware<ItemProps, RenderItemCallback>[] = []\n\n    if (config.plugins) {\n      _collectMiddleware(middlewares, config.plugins)\n    }\n\n    if (config.form?.renderItem) {\n      middlewares.push(config.form?.renderItem)\n    }\n\n    // Initialize the callback chain\n    let next = defaultRenderItem\n\n    for (const middleware of middlewares) {\n      const defaultRender = next\n\n      next = (itemProps: ItemProps) => {\n        return middleware(itemProps, defaultRender) || defaultRender(itemProps)\n      }\n    }\n\n    return next(props)\n  }\n}\n","import {SchemaType} from '@sanity/types'\nimport {PreviewProps} from '../../components/previews'\nimport {RenderPreviewCallback} from '../../form'\nimport {defaultRenderPreview} from '../../form/studio/defaults'\nimport {PluginOptions, SourceOptions} from '../types'\nimport {_RenderMiddleware} from './_types'\n\nfunction _collectMiddleware(\n  middlewares: _RenderMiddleware<PreviewProps & {schemaType: SchemaType}, RenderPreviewCallback>[],\n  plugins: PluginOptions[]\n) {\n  for (const plugin of plugins) {\n    // Recursive\n    if (plugin.plugins) {\n      _collectMiddleware(middlewares, plugin.plugins)\n    }\n\n    if (plugin.form?.renderPreview) {\n      middlewares.push(plugin.form?.renderPreview)\n    }\n  }\n}\n\n/**\n * @internal\n */\nexport function _createRenderPreview(config: SourceOptions): RenderPreviewCallback {\n  return (props) => {\n    const middlewares: _RenderMiddleware<\n      PreviewProps & {schemaType: SchemaType},\n      RenderPreviewCallback\n    >[] = []\n\n    if (config.plugins) {\n      _collectMiddleware(middlewares, config.plugins)\n    }\n\n    if (config.form?.renderPreview) {\n      middlewares.push(config.form?.renderPreview)\n    }\n\n    // Initialize the callback chain\n    let next = defaultRenderPreview\n\n    for (const middleware of middlewares) {\n      const defaultRender = next\n\n      next = (previewProps: PreviewProps & {schemaType: SchemaType}) => {\n        return middleware(previewProps, defaultRender) || defaultRender(previewProps)\n      }\n    }\n\n    return next(props)\n  }\n}\n","/* eslint-disable max-nested-callbacks */\nimport type {SanityClient} from '@sanity/client'\nimport {map, shareReplay} from 'rxjs/operators'\nimport {CurrentUser, Schema} from '@sanity/types'\nimport {studioTheme} from '@sanity/ui'\nimport {startCase} from 'lodash'\nimport {fromUrl} from '@sanity/bifur-client'\nimport {createElement, isValidElement} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {createSchema} from '../schema'\nimport {AuthStore, createAuthStore} from '../datastores'\nimport {InitialValueTemplateItem, Template, TemplateResponse} from '../templates'\nimport {isNonNullable} from '../util'\nimport {defaultFileAssetSources, defaultImageAssetSources} from '../form/defaults'\nimport {validateWorkspaces} from '../studio/workspaces/validateWorkspaces'\nimport {\n  Config,\n  PreparedConfig,\n  SingleWorkspace,\n  Source,\n  SourceClientOptions,\n  SourceOptions,\n  WorkspaceOptions,\n  WorkspaceSummary,\n} from './types'\nimport {\n  _documentLanguageFilterReducer,\n  documentActionsReducer,\n  documentBadgesReducer,\n  fileAssetSourceResolver,\n  imageAssetSourceResolver,\n  initialDocumentActions,\n  initialDocumentBadges,\n  initialLanguageFilter,\n  newDocumentOptionsResolver,\n  resolveProductionUrlReducer,\n  schemaTemplatesReducer,\n  schemaTypesReducer,\n  toolsReducer,\n} from './configPropertyReducers'\nimport {resolveConfigProperty} from './resolveConfigProperty'\nimport {ConfigResolutionError} from './ConfigResolutionError'\nimport {SchemaError} from './SchemaError'\nimport {createDefaultIcon} from './createDefaultIcon'\nimport {_createRenderField} from './form/_renderField'\nimport {_createRenderInput} from './form/_renderInput'\nimport {_createRenderItem} from './form/_renderItem'\nimport {_createRenderPreview} from './form/_renderPreview'\n\ntype InternalSource = WorkspaceSummary['__internal']['sources'][number]\n\nfunction normalizeLogo(\n  logo: React.ComponentType | React.ElementType | undefined\n): JSX.Element | undefined {\n  if (isValidElementType(logo)) return createElement(logo)\n  if (isValidElement(logo)) return logo\n  return undefined\n}\n\nfunction normalizeIcon(\n  icon: React.ComponentType | React.ElementType | undefined,\n  title: string,\n  subtitle = ''\n): JSX.Element {\n  if (isValidElementType(icon)) return createElement(icon)\n  if (isValidElement(icon)) return icon\n  return createDefaultIcon(title, subtitle)\n}\n\n/**\n * Takes in a config (created from the `createConfig` function) and returns\n * an array of `WorkspaceSummary`. Note: this only partially resolves a config.\n *\n * For usage inside the Studio, it's preferred to pull the pre-resolved\n * workspaces and sources via `useWorkspace` or `useSource`. For usage outside\n * the Studio or for testing, use `resolveConfig`.\n */\nexport function prepareConfig(config: Config): PreparedConfig {\n  const workspaceOptions: WorkspaceOptions[] | [SingleWorkspace] = Array.isArray(config)\n    ? config\n    : [config]\n\n  try {\n    validateWorkspaces({workspaces: workspaceOptions})\n  } catch (e) {\n    throw new ConfigResolutionError({\n      name: '',\n      type: 'workspace',\n      causes: [e.message],\n    })\n  }\n\n  const workspaces = workspaceOptions.map(\n    ({unstable_sources: nestedSources = [], ...rootSource}): WorkspaceSummary => {\n      const sources = [rootSource as SourceOptions, ...nestedSources]\n\n      const resolvedSources = sources.map((source): InternalSource => {\n        const projectId = source.projectId\n        const dataset = source.dataset\n\n        const auth = source.auth || createAuthStore({dataset, projectId})\n\n        let schemaTypes\n        try {\n          schemaTypes = resolveConfigProperty({\n            propertyName: 'schema.types',\n            config: source,\n            context: {projectId, dataset},\n            initialValue: [],\n            reducer: schemaTypesReducer,\n          })\n        } catch (e) {\n          throw new ConfigResolutionError({\n            name: source.name,\n            type: 'source',\n            causes: [e],\n          })\n        }\n\n        const schema = createSchema({\n          name: source.name,\n          types: schemaTypes,\n        })\n\n        const schemaValidationProblemGroups = schema._validation\n        const schemaErrors = schemaValidationProblemGroups?.filter((msg) =>\n          msg.problems.some((p) => p.severity === 'error')\n        )\n\n        if (schemaValidationProblemGroups && schemaErrors?.length) {\n          // TODO: consider using the `ConfigResolutionError`\n          throw new SchemaError(schema)\n        }\n\n        const source$ = auth.state.pipe(\n          map(({client, authenticated, currentUser}) => {\n            return resolveSource({\n              config: source,\n              client,\n              currentUser,\n              schema,\n              authenticated,\n              auth,\n            })\n          }),\n          shareReplay(1)\n        )\n\n        return Object.assign(source$, {\n          name: source.name,\n          projectId: source.projectId,\n          dataset: source.dataset,\n          title: source.title || startCase(source.name),\n          auth,\n          schema,\n        })\n      })\n\n      const title = rootSource.title || startCase(rootSource.name)\n\n      const workspaceSummary: WorkspaceSummary = {\n        type: 'workspace-summary',\n        auth: resolvedSources[0].auth,\n        basePath: rootSource.basePath || '/',\n        dataset: rootSource.dataset,\n        schema: resolvedSources[0].schema,\n        logo: normalizeLogo(rootSource.logo),\n        icon: normalizeIcon(\n          rootSource.icon,\n          title,\n          `${rootSource.projectId} ${rootSource.dataset}`\n        ),\n        name: rootSource.name || 'default',\n        projectId: rootSource.projectId,\n        theme: rootSource.theme || studioTheme,\n        title,\n        subtitle: rootSource.subtitle,\n        __internal: {\n          sources: resolvedSources,\n        },\n      }\n\n      return workspaceSummary\n    }\n  )\n\n  return {type: 'prepared-config', workspaces}\n}\n\ninterface ResolveSourceOptions {\n  config: SourceOptions\n  schema: Schema\n  client: SanityClient\n  currentUser: CurrentUser | null\n  authenticated: boolean\n  auth: AuthStore\n}\n\nfunction getBifurClient(client: SanityClient, auth: AuthStore) {\n  const bifurVersionedClient = client.withConfig({apiVersion: '2022-06-30'})\n  const dataset = bifurVersionedClient.config().dataset\n\n  const url = bifurVersionedClient.getUrl(`/socket/${dataset}`).replace(/^http/, 'ws')\n\n  const options = auth.token ? {token$: auth.token} : {}\n  return fromUrl(url, options)\n}\n\nfunction resolveSource({\n  config,\n  client,\n  currentUser,\n  schema,\n  authenticated,\n  auth,\n}: ResolveSourceOptions): Source {\n  const {dataset, projectId} = config\n  const bifur = getBifurClient(client, auth)\n  const errors: unknown[] = []\n  const clients: Record<string, SanityClient> = {}\n  const getClient = (options: SourceClientOptions): SanityClient => {\n    if (!options || !options.apiVersion) {\n      throw new Error('Missing required `apiVersion` option')\n    }\n\n    if (!clients[options.apiVersion]) {\n      clients[options.apiVersion] = client.withConfig(options)\n    }\n\n    return clients[options.apiVersion]\n  }\n\n  const context = {\n    client,\n    getClient,\n    currentUser,\n    dataset,\n    projectId,\n    schema,\n  }\n\n  // <TEMPORARY UGLY HACK TO PRINT DEPRECATION WARNINGS ON USE>\n  /* eslint-disable no-proto */\n  const wrappedClient = client as any\n  context.client = [...Object.keys(client), ...Object.keys(wrappedClient.__proto__)].reduce(\n    (acc, key) => {\n      const original = Object.hasOwnProperty.call(client, key)\n        ? wrappedClient[key]\n        : wrappedClient.__proto__[key]\n\n      return Object.defineProperty(acc, key, {\n        get() {\n          console.warn(\n            '`configContext.client` is deprecated and will be removed in the next release! Use `context.getClient({apiVersion: \"2021-06-07\"})` instead'\n          )\n          return original\n        },\n      })\n    },\n    {}\n  ) as any as SanityClient\n  /* eslint-enable no-proto */\n  // </TEMPORARY UGLY HACK TO PRINT DEPRECATION WARNINGS ON USE>\n\n  let templates!: Source['templates']\n  try {\n    templates = resolveConfigProperty({\n      config,\n      context,\n      propertyName: 'schema.templates',\n      reducer: schemaTemplatesReducer,\n      initialValue: schema\n        .getTypeNames()\n        .filter((typeName) => !/^sanity\\./.test(typeName))\n        .map((typeName) => schema.get(typeName))\n        .filter(isNonNullable)\n        .filter((schemaType) => schemaType.type?.name === 'document')\n        .map((schemaType) => {\n          const template: Template = {\n            id: schemaType.name,\n            schemaType: schemaType.name,\n            title: schemaType.title || schemaType.name,\n            icon: schemaType.icon,\n            value: schemaType.initialValue || {_type: schemaType.name},\n          }\n\n          return template\n        }),\n    })\n    // TODO: validate templates\n    // TODO: validate that each one has a unique template ID\n  } catch (e) {\n    errors.push(e)\n  }\n\n  let tools!: Source['tools']\n  try {\n    tools = resolveConfigProperty({\n      config,\n      context,\n      initialValue: [],\n      propertyName: 'tools',\n      reducer: toolsReducer,\n    })\n  } catch (e) {\n    errors.push(e)\n  }\n\n  const initialTemplatesResponses = templates\n    // filter out the ones with parameters to fill\n    .filter((template) => !template.parameters?.length)\n    .map(\n      (template): TemplateResponse => ({\n        templateId: template.id,\n        description: template.description,\n        icon: template.icon,\n        title: template.title,\n      })\n    )\n\n  const templateMap = templates.reduce((acc, template) => {\n    acc.set(template.id, template)\n    return acc\n  }, new Map<string, Template>())\n\n  // TODO: extract this function\n  const resolveNewDocumentOptions: Source['document']['resolveNewDocumentOptions'] = (\n    creationContext\n  ) => {\n    const {schemaType: schemaTypeName} = creationContext\n\n    const templateResponses = resolveConfigProperty({\n      config,\n      context: {...context, creationContext},\n      initialValue: initialTemplatesResponses,\n      propertyName: 'document.resolveNewDocumentOptions',\n      reducer: newDocumentOptionsResolver,\n    })\n\n    const templateErrors: unknown[] = []\n\n    // TODO: validate template responses\n    // ensure there is a matching template per each one\n    if (templateErrors.length) {\n      throw new ConfigResolutionError({\n        name: config.name,\n        // TODO: figure out this name\n        type: 'source',\n        causes: templateErrors,\n      })\n    }\n\n    return (\n      templateResponses\n        // take the template responses and transform them into the formal\n        // `InitialValueTemplateItem`\n        .map((response, index): InitialValueTemplateItem => {\n          const template = templateMap.get(response.templateId)\n          if (!template) {\n            throw new Error(`Could not find template with ID \\`${response.templateId}\\``)\n          }\n\n          const schemaType = schema.get(template.schemaType)\n\n          if (!schemaType) {\n            throw new Error(\n              `Could not find matching schema type \\`${template.schemaType}\\` for template \\`${template.id}\\``\n            )\n          }\n\n          const title = response.title || template.title\n          // Don't show the type name as subtitle if it's the same as the template name\n          const defaultSubtitle = schemaType?.title === title ? undefined : schemaType?.title\n\n          return {\n            id: `${response.templateId}-${index}`,\n            templateId: response.templateId,\n            type: 'initialValueTemplateItem',\n            title,\n            subtitle: response.subtitle || defaultSubtitle,\n            description: response.description || template.description,\n            icon: response.icon || template.icon || schemaType?.icon,\n            initialDocumentId: response.initialDocumentId,\n            parameters: response.parameters,\n            schemaType: template.schemaType,\n          }\n        })\n        .filter((item) => {\n          // if we are in a creationContext where there is no schema type,\n          // then keep everything\n          if (!schemaTypeName) return true\n\n          // else only keep the `schemaType`s that match the creationContext\n          return schemaTypeName === templateMap.get(item.templateId)?.schemaType\n        })\n    )\n  }\n\n  let staticInitialValueTemplateItems!: InitialValueTemplateItem[]\n  try {\n    staticInitialValueTemplateItems = resolveNewDocumentOptions({type: 'global'})\n  } catch (e) {\n    errors.push(e)\n  }\n\n  if (errors.length) {\n    throw new ConfigResolutionError({\n      name: config.name,\n      type: 'source',\n      causes: errors,\n    })\n  }\n\n  const source: Source = {\n    type: 'source',\n    name: config.name,\n    title: config.title || startCase(config.name),\n    schema,\n    getClient,\n    dataset,\n    projectId,\n    tools,\n    currentUser,\n    authenticated,\n    templates,\n    auth,\n    document: {\n      actions: (partialContext) =>\n        resolveConfigProperty({\n          config,\n          context: {...context, ...partialContext},\n          initialValue: initialDocumentActions,\n          propertyName: 'document.actions',\n          reducer: documentActionsReducer,\n        }),\n      badges: (partialContext) =>\n        resolveConfigProperty({\n          config,\n          context: {...context, ...partialContext},\n          initialValue: initialDocumentBadges,\n          propertyName: 'document.badges',\n          reducer: documentBadgesReducer,\n        }),\n      resolveProductionUrl: (partialContext) =>\n        resolveConfigProperty({\n          config,\n          context: {...context, ...partialContext},\n          initialValue: undefined,\n          propertyName: 'resolveProductionUrl',\n          asyncReducer: resolveProductionUrlReducer,\n        }),\n      resolveNewDocumentOptions,\n      unstable_languageFilter: (partialContext) =>\n        resolveConfigProperty({\n          config,\n          context: {...context, ...partialContext},\n          initialValue: initialLanguageFilter,\n          propertyName: 'document.unstable_languageFilter',\n          reducer: _documentLanguageFilterReducer,\n        }),\n    },\n    form: {\n      renderField: _createRenderField(config),\n      renderInput: _createRenderInput(config),\n      renderItem: _createRenderItem(config),\n      renderPreview: _createRenderPreview(config),\n      file: {\n        assetSources: resolveConfigProperty({\n          config,\n          context,\n          initialValue: defaultFileAssetSources,\n          propertyName: 'formBuilder.file.assetSources',\n          reducer: fileAssetSourceResolver,\n        }),\n        directUploads:\n          // TODO: consider refactoring this to `noDirectUploads` or similar\n          // default value for this is `true`\n          config.form?.file?.directUploads === undefined ? true : config.form.file.directUploads,\n      },\n      image: {\n        assetSources: resolveConfigProperty({\n          config,\n          context,\n          initialValue: defaultImageAssetSources,\n          propertyName: 'formBuilder.image.assetSources',\n          reducer: imageAssetSourceResolver,\n        }),\n        directUploads:\n          // TODO: consider refactoring this to `noDirectUploads` or similar\n          // default value for this is `true`\n          config.form?.file?.directUploads === undefined ? true : config.form.file.directUploads,\n      },\n    },\n\n    __internal: {\n      bifur,\n      staticInitialValueTemplateItems,\n    },\n  }\n\n  return source\n}\n"],"names":["SANITY_VERSION","slug","title","name","type","fields","hidden","geopoint","imageCrop","imageHotspot","assetSourceData","description","imageAsset","fieldsets","readOnly","fieldset","preview","select","id","mimeType","size","prepare","doc","path","split","slice","media","asset","_ref","subtitle","Number","toFixed","orderings","by","field","direction","imagePalette","imagePaletteSwatch","imageDimensions","imageMetadata","options","collapsable","fileAsset","isError","problem","severity","builtinTypes","createSchema","schemaDef","validated","validateSchema","types","getTypes","validation","groupProblems","hasErrors","some","group","problems","compiled","SchemaBuilder","compile","filter","Boolean","_validation","inferValidation","CorsOriginError","Error","constructor","projectId","useUnique","value","valueRef","useRef","isEqual","current","defaultArgsAreEqual","prev","next","length","i","shallowEquals","createHookFromObservableFactory","observableFactory","initialValue","argsAreEqual","initialLoadingTuple","asLoadingTuple","args$","pipe","distinctUntilChanged","switchMap","distinctArgs","concat","of","map","scan","prevValue","prevIsLoading","nextValue","nextIsLoading","tuple","catchError","error","useLoadableFromCreateLoadable","args","_args","tuple$","useAsObservable","result","useObservable","isNonNullable","DRAFTS_FOLDER","DRAFTS_PREFIX","isDraftId","startsWith","getIdPair","draftId","getDraftId","publishedId","getPublishedId","collate","documents","byId","reduce","res","_id","entry","get","_type","published","draft","set","Map","Array","from","values","removeDupes","isRecord","isArray","isString","ResizeObserver","document","window","Polyfill","createSharedResizeObserver","event","createPubSub","resizeObserver","entries","publish","observe","element","observer","unsubscribe","subscribe","find","e","target","unobserve","BUNDLED_DOC_TYPES","_isSanityDocumentTypeDefinition","def","includes","_isCustomDocumentTypeDefinition","GROQ_KEYWORDS","VALID_FIELD","fieldNeedsEscape","fieldName","test","escapeField","escapeFirst","isEmptyArray","joinPath","pathArray","pathSegment","isFirst","needsEscape","LOADING_STATE","isLoading","useLoadable","value$","initial","useMemoObservable","asLoadable","useThrottledCallback","callback","wait","throttledCallback","useMemo","throttle","useEffect","flush","supportsLocalStorage","key","localStorage","setItem","removeItem","err","memStore","getItem","createBroadcastChannel","namespace","storageEvents$","fromEvent","storageKey","broadcastedMessages$","Subject","messages$","merge","newValue","JSON","parse","shareReplay","broadcast","message","storage.setItem","stringify","storage.removeItem","messages","sidPattern","consumeSessionId","location","hash","sidParam","match","sid","indexOf","newHash","replace","newUrl","URL","href","history","replaceState","sessionId","GithubRoot","styled","svg","theme","fg","sanity","color","base","css","GithubLogo","jsx","width","height","xmlns","viewBox","children","d","GoogleLogo","jsxs","fill","CustomLogo","props","provider","logo","src","alt","providerLogos","google","github","custom","getProviders","client","mode","providers","customProviders","thirdPartyLogin","sso","request","uri","isOfficial","official","url","isSupported","Object","supported","createHrefForProvider","loginMethod","basePath","params","URLSearchParams","origin","createLoginComponent","getClient","redirectOnSingle","providerOptions","useClient","LoginComponent","setProviders","useState","setError","then","catch","redirectUrl","loading","Flex","align","gap","justify","padding","sizing","Text","muted","Spinner","Stack","space","Heading","index","Button","icon","as","text","getStorageKey","getToken","item","storage.getItem","token","console","clearToken","saveToken","time","Date","toISOString","getCurrentUser","broadcastToken","_a","user","withCredentials","tag","statusCode","config","invalidCorsConfig","isNetworkError","host","_createAuthStore","dataset","token$","startWith","state$","createClient","apiVersion","useCdn","requestTagPrefix","ignoreBrowserTokenWarning","allowReconfigure","defer","currentUser","authenticated","handleCallbackUrl","requestClient","method","query","logout","auth","state","fromEntries","sort","a","b","localeCompare","k","v","createAuthStore","memoize","catchWithCount","selector","input$","errors","errorOp","caught","push","tap","onOnline$","onOffline$","expBackoff","retryCount","Math","pow","CONNECTING","onRetry$","onRetry","observableCallback","createErrorStatus","isOffline","attemptNo","retryAt","createConnectionStatusStore","bifur","connectionStatus$","heartbeats","mergeMapTo","throwError","ts","lastHeartbeat","successiveErrorsCount","timeUntilRetry","min","getTime","expiry$","timer","navigator","onLine","initialErrorStatus","triggerRetry$","NEVER","takeUntil","take","TOKEN_DOCUMENT_ID_BASE","__tmp_wrap_crossProjectToken","_client","versionedClient","withConfig","fetchTokenDocument","observable","fetch","getTokenDocumentId","getProjectIdFromTokenDocumentId","fetchCrossProjectToken","fetchAllCrossProjectTokens","tokenId","join","tokenDoc","mergeMap","tokenDocs","toArray","MENU_BUTTON_POPOVER_PROPS","portal","constrainSize","CollapseOverflowMenu","disableRestoreFocusOnClose","menuButton","menuButtonProps","menuOptionsArray","onMenuClose","MenuButton","__unstable_disableRestoreFocusOnClose","onClose","popover","button","menu","Menu","c","collapsedProps","expandedProps","tooltipProps","tooltipText","dividerBefore","fontSize","selected","rest","React","Fragment","MenuDivider","MenuItem","pressed","ObserveElement","el","setEl","io","IntersectionObserver","disconnect","ref","DividerDiv","div","CollapseMenuDivider","FOCUS_RING_PADDING","OPTION_STYLE","OuterFlex","RootFlex","RowFlex","OptionObserveElement","OptionHiddenFlex","_isReactElement","node","CollapseMenu","forwardRef","childrenProp","collapsed","collapseText","rootEl","setRootEl","hiddenRowEl","setHiddenRowEl","rootRect","useElementRect","menuOptions","setMenuOptions","hasOverflow","scrollWidth","EllipsisVerticalIcon","intersectionOptions","root","threshold","rootMargin","Children","o","menuIsVisible","isInMenu","useCallback","childKey","handleIntersection","child","exists","isIntersecting","updatedOptions","items","modeProps","cloneElement","overflow","flex","Tooltip","disabled","content","Box","marginLeft","CollapseMenuButton","MUTATION_ATTRIBUTE_FILTER","FOCUSABLE","getFocusableElements","querySelectorAll","hasAttribute","getAttribute","useRovingFocus","initialFocus","loop","navigation","pause","rootElement","focusedIndex","setFocusedIndex","focusableElements","setFocusableElements","focusableLen","lastFocusableIndex","nextKey","prevKey","handleSetElements","els","handleFocus","handleKeyDown","focusPrev","preventDefault","prevIndex","focusNext","shiftKey","mo","MutationObserver","childList","subtree","attributeFilter","forEach","setAttribute","focus","onfocus","onblur","initialIndex","addEventListener","removeEventListener","ColorSchemeContext","createContext","ColorSchemeProvider","onSchemeChange","scheme","schemeProp","prefersDark","usePrefersDark","setScheme","nextScheme","colorScheme","Provider","ThemeProvider","studioTheme","useColorScheme","useContext","RouterContext","useRouter","router","isLeftClickEvent","isModifiedEvent","metaKey","altKey","ctrlKey","useLink","onClick","onClickProp","navigateUrl","isDefaultPrevented","useIntentLink","intent","resolveIntentLink","IntentLink","restProps","Link","_hasOWn","prototype","hasOwnProperty","hasOwn","call","bind","isEmpty","object","addScope","routerState","scope","scopedState","RouteScope","parent","resolvePathFromState","parent_resolvePathFromState","navigate","parent_navigate","nextState","nextStateScoped","nextScopedState","scopedRouter","RouterProvider","onNavigate","routerProp","stateProp","setState","stateRef","opts","intentName","parameters","payload","encode","navigateIntent","prevState","EMPTY_STATE","useStateLink","toIndex","StateLink","VALID_PARAM_SEGMENT","createSegment","segment","paramName","substring","addendum","_parseRoute","route","pathname","segments","raw","debug","Debug","arrayify","val","matchPath","parts","segmentsLength","isMatching","every","transform","toState","childState","childNode","mergedState","_resolveStateFromPath","pathMatch","createMatchResult","nodes","missing","remaining","_findMatchingRoutes","_state","requiredParams","seg","stateKeys","keys","consumedParams","intersection","missingParams","difference","remainingParams","remainingState","pick","matchingChild","_resolvePathFromState","relative","flatten","matchNode","toPath","decodeJsonParams","pathsegment","decodeURIComponent","atob","warn","encodeJsonParams","btoa","decodeParams","pair","encodeParams","encodeURIComponent","create","createRoute","routeScope","intents","routeIntents","normalizeChildren","isRoute","normalizeArgs","childrenOrOpts","routeOrOpts","createNode","scopeName","normalize","paths","acc","isRoot","TypeError","parsedRoute","_isRoute","decode","_path","isNotFound","getBasePath","getRedirectBase","useRouterState","identity","selectedState","withRouter","Component","WithRouter","displayName","ToolLink","tool","ToolCollapseMenu","activeToolName","tools","collapseMenuEl","setCollapseMenuEl","startCase","linkProps","UnknownIcon","ToolVerticalMenu","isVisible","PlugIcon","tabIndex","ToolMenu","context","isDrawerOpen","UserColorManagerContext","useUserColorManager","userColorManager","useUserColor","userId","manager","listen","empty","defaultCurrentUserHue","USER_COLOR_EXCLUDE_HUES","defaultHues","COLOR_HUES","hue","defaultColors","colors","background","hues","hex","border","tints","defaultAnonymousColor","gray","createUserColorManager","userColors","anonymousColor","currentUserColor","userColorKeys","subscriptions","previouslyAssigned","assignedCounts","counts","assigned","currentUserId","userStore","me","setCurrentUser","getUserHue","assignedHue","prevHue","hasUnusedColor","assignHue","preferredHue","getPreferredHue","getLeastUsedHue","subscription","getObservableColor","unassignHue","delete","getUnusedColor","colorHue","tieBreakerPreference","leastUses","Infinity","leastUsed","uses","Observable","subscriber","userColor","refCount","charCodeAt","abs","UserColorManagerProvider","managerFromProps","createMultiKeyWeakMap","rootMap","WeakMap","idCache","randomId","floor","random","toString","padStart","assignId","cachedId","arrangeKeys","Set","getDeep","firstKey","restOfKeys","setDeep","ResourceCacheContext","ResourceCacheProvider","resourceCache","namespaces","nullReplacer","dependencies","dependenciesWithoutNull","dep","namespaceMap","useResourceCache","cache","ActiveWorkspaceMatcherContext","WorkspacesContext","useWorkspaces","workspaces","WorkspacesProvider","prepareConfig","matchWorkspace","normalized","workspace","firstWorkspace","RegExp","escapeRegExp","workspaceSegments","commonBasePath","commonSegments","commonSegment","toLowerCase","createCommonBasePathRegex","first","createHistory","createMemoryHistory","createBrowserHistory","ActiveWorkspaceMatcher","LoadingComponent","NotFoundComponent","unstable_history","historyProp","activeWorkspace","setActiveWorkspace","notFound","setNotFound","pathname$","unlisten","setActiveWorkspaceName","workspaceName","foundWorkspace","defaultWorkspaceName","handleNavigateToDefaultWorkspace","__internal","onNavigateToDefaultWorkspace","useActiveWorkspace","StudioThemeProvider","LayerProvider","getGlobalScope","globalThis","self","global","globalScope","LoadingScreen","Card","TONES","warning","SegmentSpan","code","ErrorMessageText","SchemaProblemGroups","problemGroups","ret","problemGroup","isWarning","schemaType","getTypeInfo","radius","tone","marginRight","ErrorOutlineIcon","WarningOutlineIcon","weight","capitalize","marginTop","Breadcrumbs","separator","j","kind","_renderSegmentName","helpId","generateHelpUrl","rel","str","renderPath","reportWarnings","schema","groupsWithWarnings","groupCollapsed","log","groupEnd","SchemaErrorsScreen","groupsWithErrors","paddingY","paddingX","Container","NotFoundScreen","display","Inline","STATE_TITLES","MediaCard","createIcon","isValidElementType","createElement","isValidElement","WorkspacePreview","iconRight","iconComponent","iconRightComponent","textOverflow","paddingLeft","paddingRight","CheckmarkIcon","useWorkspaceAuthStates","combineLatest","workspacesDocsUrl","LINKS","StyledText","Layout","footer","header","borderTop","borderBottom","SanityLogo","link","WorkspaceAuth","authStates","selectedWorkspaceName","setSelectedWorkspaceName","selectedWorkspace","handleBack","ArrowLeftIcon","paddingBottom","paddingTop","omit","AddIcon","authState","handleSelectWorkspace","ChevronRightIcon","StyledMenu","FooterCard","WorkspaceMenuButton","popoverProps","SelectIcon","Label","AuthenticateScreen","ConfigErrorsScreen","getProviderTitle","NotAuthenticatedScreen","handleError","handleLogout","_b","providerTitle","providerHelp","Dialog","email","CorsOriginErrorScreen","corsUrl","handleRetry","reload","errorChannel","__sanityErrorChannel","isKnownError","SchemaError","StudioErrorBoundary","pushToast","useToast","stack","handleResetError","useHotModuleReload","msg","closable","duration","status","Code","ErrorBoundary","onCatch","attrs","createRouter","toolRoute","toolParams","getOrderedTools","pluginConfig","toolSwitcher","order","keyed","existing","toolIndex","tool1","tool2","toolA","toolB","indexA","indexB","resolveUrlStateWithDefaultTool","orderedTools","defaultTool","assign","makeBackwardsCompatible","resolveDefaultState","urlStateWithDefaultTool","resolveIntentState","currentState","intentState","currentTool","matchingTool","canHandleIntent","getIntentState","toolState","decodeUrlState","rootRouter","createRouterEventStream","maybeHandleIntent","prevEvent","currentEvent","redirectState","EMPTY","maybeRedirectDefaultState","defaultState","routerBasePath","mergeScan","WorkspaceContext","WorkspaceProvider","useWorkspace","SourceContext","SourceProvider","parentSource","unstable_sources","sources","source","s","useSource","isStateEvent","initialState","WorkspaceLoader","setWorkspace","handleNavigate","ConfigResolutionError","results","causes","rootSource","restOfSources","WorkspaceLoaderBoundary","ConfigErrorsComponent","AuthBoundary","AuthenticateComponent","NotAuthenticatedComponent","loggedIn","setLoggedIn","roles","Z_OFFSET","toast","Refractor","registerLanguage","bash","javascript","json","typescript","StudioProvider","unstable_noAuthBoundary","noAuthBoundary","ConditionalAuthBoundary","ToastProvider","zOffset","isDev","process","env","NODE_ENV","isProd","symbols","whitespace","LEGACY_TO_UI_AVATAR_SIZES","small","medium","large","nameToInitials","fullName","namesArray","charAt","toUpperCase","UserAvatar","withTooltip","TooltipUserAvatar","StaticUserAvatar","UserAvatarLoader","placement","style","animateArrowFrom","position","imageLoadError","setImageLoadError","imageUrl","Avatar","arrowPosition","initials","onImageLoadError","loadedProps","useUser","Root","Google","clipPath","GitHub","Saml","LoginProviderLogo","isSaml","logoName","SanityMonogram","AvatarBox","UserMenu","preventOverflow","handleToggleScheme","ChevronDownIcon","marginBottom","SunIcon","MoonIcon","CogIcon","LeaveIcon","PREVIEW_MEDIA_SIZE","block","blockImage","default","detail","inline","PREVIEW_ICON_SIZE","MediaWrapper","span","$dimensions","$layout","$radius","$responsive","iconSize","rem","Media","dimensions","layout","responsive","styles","className","renderMedia","mediaString","renderPreviewMedia","renderPreviewNode","fallbackNode","DEFAULT_MEDIA_DIMENSIONS","aspect","fit","dpr","getDevicePixelRatio","TitleSkeleton","TextSkeleton","animated","SubtitleSkeleton","DefaultPreview","isPlaceholder","rootClassName","classNames","hasSubtitle","statusNode","placeholder","Skeleton","heading","StatusBox","MediaSkeleton","DescriptionSkeleton","DescriptionText","fonts","textSize1","sizes","maxLines","maxHeight","lineHeight","DetailPreview","mediaDimensions","SIZE","STROKE_WIDTH","BgCircle","circle","dark","ProgressCircle","blue","CircularProgress","valueProp","max","circ","PI","offset","cx","cy","r","strokeDasharray","strokeDashoffset","Bar","LinearProgress","RootBox","MediaFlex","ProgressFlex","TooltipContentStack","MediaPreview","progress","withBorder","withRadius","STYLES_PADDER","tooltipContent","HeaderFlex","$ratio","getRatio","BlockImagePreview","actions","fallbackTitle","__unstable_checkered","BlockPreview","RootSpan","MediaSpan","TextSpan","forwardedAs","textFont","textSize","weights","InlinePreview","DEFAULT_MEDIA_DIMENSION","TemplatePreview","whiteSpace","InsufficientPermissionsMessage","operationLabel","plural","AccessDeniedIcon","array","sep","DocumentButton","TooltipContentBox","DisabledButtonWrapper","NewDocumentButton","newDocumentButtonEl","setNewDocumentButtonEl","open","setOpen","staticInitialValueTemplateItems","permissions","useTemplatePermissions","templateItems","keyedPermissions","hasNewDocumentOptions","canCreateDocument","t","granted","handleOpen","handleClose","handleLinkClick","ComposeIcon","cursor","onClickOutside","Grid","columns","template","templateId","dot","StatusButton","active","statusTone","selectable","bg","showDot","AvatarCard","PresenceMenuItem","memo","presence","lastActiveLocation","orderBy","locations","documentId","hasLink","LinkComponent","PathUtils","LinkIcon","MAX_AVATARS","AvatarStackCard","FooterStack","PresenceMenu","collapse","useGlobalPresence","hasPresence","UsersIcon","AvatarStack","maxLength","Layer","Backdrop","InnerCard","NavDrawer","isOpen","closeButtonElement","setCloseButtonElement","innerCardElement","setInnerCardElement","navbar","DefaultToolMenu","components","useGlobalKeyDown","shadow","CloseIcon","closeDrawer","isDocumentType","isSanityType","getSearchableTypes","getTypeNames","typeName","SPECIAL_CHARS","STRIP_EDGE_CHARS","tokenize","string","calculateScore","searchTerms","uniqueValueTerms","uniq","compact","words","toLower","uniqueSearchTerms","matches","all","union","fieldScore","applyWeights","searchSpec","hits","terms","specByType","keyBy","spec","hit","typeSpec","stories","pathSpec","idx","score","why","totalScore","rank","resultIndex","combinePaths","flow","toGroqParams","term","pathWithMapper","mapWith","createWeightedSearch","__experimental_search","combinedSearchPaths","configForType","opt","selections","constraint","selection","cfg","search","queryString","searchOpts","constraints","joinedPath","filters","includeDrafts","__types","__limit","limit","unique","sortBy","createSearch","searchClient","DEFAULT_STUDIO_CLIENT_OPTIONS","DEBOUNCE_VALUE","useDocumentSearchResults","useSchema","queryProp","paramsSubject","asObservable","share","sub","StyledCard","SearchFullscreenContent","Portal","PreviewCardContext","usePreviewCard","PreviewCard","PRESENCE_MENU_POPOVER_PROPS","$selected","getTooltipText","DocumentPreviewPresence","useTheme","invertedScheme","uniqueUsers","MAX_AVATARS_DOCK","DEFAULT_MAX_AVATARS_FIELDS","AVATAR_DISTANCE","AVATAR_SIZE","AVATAR_ARROW_HEIGHT","INTERSECTION_THRESHOLDS","INTERSECTION_ELEMENT_PADDING","SNAP_TO_DOCK_DISTANCE_TOP","SNAP_TO_DOCK_DISTANCE_BOTTOM","SLIDE_RIGHT_THRESHOLD_TOP","SLIDE_RIGHT_THRESHOLD_BOTTOM","DEBUG","splitRight","indexFromMax","FlexWrapper","InnerBox","FormFieldPresenceContext","PresenceTooltip","isFunc","read","noop","createUseReporter","Context","useReporter","is","add","update","remove","previous","useLayoutEffect","createStore","reportedValues","createPubsub","debouncedPublish","debounce","trailing","has","didWarn","useReporterGuard","useReportedValueGuard","useSubscribeGuard","DEFAULT_CONTEXT","getNextId","createScope","useReportedValues","setValues","Tracker","store","useAutoIdReporter","FieldPresence","FieldPresenceWithOverlay","contextPresence","maxAvatars","useId","minWidth","minHeight","FieldPresenceWithoutOverlay","FieldPresenceInner","calcAvatarStackWidth","len","uniquePresence","uniqBy","sorted","_presence","lastActiveAt","visible","avatars","reverse","_visible","AvatarCounter","count","maxWidth","currWidth","av","transitionProperty","transitionDuration","transitionTimingFunction","zIndex","createIntersectionObserver","entries$","intersectionObserver","WithIntersection","onIntersection","RootWrapper","OverlayWrapper","RegionWrapper","TopRegionWrapper","$debug","margins","MiddleRegionWrapper","BottomRegionWrapper","toPx","num","negate","RegionsWithIntersections","regions","render","marginsProp","overlayRef","intersections","setIntersections","top","bottom","regionsWithIntersectionDetails","region","boundsBottom","boundsTop","boundingClientRect","aboveTop","belowBottom","distanceTop","intersectionRect","distanceBottom","offsetWidth","forceWidth","rect","left","ITEM_TRANSITION","withSpacerHeight","withIntersection","_regionsWithIntersectionDetails","prevRect","prevBottom","spacerHeight","orderByTop","plus","sum","regionsWithSpacerHeight","grouped","inside","groupBy","_withSpacerHeight","grp","indent","w","_withIntersection","Spacer","DEFAULT_MARGINS","getOffsetsTo","scrollTop","offsetTop","offsetLeft","offsetParent","HTMLElement","getRelativeRect","offsetHeight","regionsWithComputedRects","StickyOverlay","EMPTY_ARRAY","renderCallback","containerWidth","topSpacing","n","bottomSpacing","_counts","nearTop","nearBottom","PresenceDock","closeCount","PresenceInside","dir","allPresenceItems","topMargin","rightMargin","bottomMargin","leftMargin","leftOffset","margin","flexDirection","alignItems","originalLeft","diffRight","pointerEvents","DebugValue","PassThrough","OverlayEnabled","OverlayDisabled","PresenceOverlay","_extractUploadState","_upload","restValue","_resolveUploadValue","initiated","updated","fileName","file","fileType","previewImage","_previewComponents","FallbackIcon","DocumentIcon","SanityDefaultPreview","descriptionProp","mediaProp","subtitleProp","titleProp","imageBuilder","imageUrlBuilder","component","String","isImage","referrerPolicy","image","renderIcon","isReference","useDocumentPreview","enabled","ordering","previewValue","observeForPreview","useDocumentPreviewStore","setValue","snapshotEvent$","nextError","snapshot","resize$","scroll$","passive","capture","orientationChange$","ROOT_MARGIN_PX","isIntersectionObserverSupported","IntersectionObserverEntry","defineProperty","intersectionRatio","intersectionObservableFor","createIntersectionObserverBased","createLegacyBased","intersectionObserverEntriesSubject","ev","getViewport","right","innerWidth","innerHeight","intersects","viewport","inViewport","getBoundingClientRect","isElementInViewport","observableOf","visibilityChange$","useVisibility","hideDelay","setVisible","isDocumentVisible$","Document","inViewport$","visible$","isDocumentVisible","delay","_HIDE_DELAY","_resolvePreviewComponent","SanityPreview","styleProp","setElement","isPTE","visibility","setRef","refValue","getPreviewPaths","INCLUDE_FIELDS_QUERY","INCLUDE_FIELDS","AVAILABILITY_READABLE","available","reason","AVAILABILITY_PERMISSION_DENIED","AVAILABILITY_NOT_FOUND","INVALID_PREVIEW_FALLBACK","isPortableTextArray","blocks","isBlock","extractTextFromBlocks","firstBlock","isSpan","keysOf","PRESERVE_KEYS","errorCollector","errorsByType","getAll","clear","reportErrors","uniqueErrors","errorCount","uniqued","hasPrepare","isRenderable","assignType","inspect","FIELD_NAME_VALIDATORS","date","prefixType","ellipse","prefix","validateFieldValue","fieldValue","validator","validatePreparedValue","preparedValue","isPlainObject","validateReturnedPreview","returnValue","defaultPrepare","invokePrepare","viewOptions","withErrors","selectedValue","hasEnumListOptions","listOptions","list","getListOptions","option","isTitledListValue","prepareForPreview","rawValue","hasCustomPrepare","targetKeys","typeWithFields","targetFieldName","valueField","f","selectedOption","prepareResult","returnValueResult","setKey","keyObservables","isObservable","observableFrom","combineAll","pairs","mergeAll","createEmpty","resolveMissingHeads","observePaths","observeFields","apiConfig","currentValue","_weak","_dataset","_projectId","_strengthenOnPublish","pathsWithMissingHeads","nextHeads","refApiConfig","leads","head","tail","tails","normalizePaths","createPathObserver","createPreviewObserver","observeDocumentTypeFromId","isCrossDatasetReferenceSchemaType","isCrossDatasetReference","refType","to","toType","isReferenceSchemaType","debounceCollect","fn","queue","debounced","obs","clearTimeout","setTimeout","queueItem","completed","currentlyFlushingQueue","queueItemIds","collectedArgs","complete","combineSelections","output","ids","stringifyId","maybeEscape","toSubQuery","allFields","toQuery","combinedSelections","reassemble","queryResult","reprojected","subResult","resultIdx","found","hasEqualFields","otherObject","isUniqueBy","itemSelector","prevItem","currItem","create_preview_observeFields","crossProjectTokenStore","_globalListener","getGlobalEvents","allEvents$","events","includeResult","welcome$","publishReplay","mutations$","globalEvents","fetchAllDocumentPathsWith","headers","fetchAllDocumentPath","fetchDocumentPathsFast","fetchDocumentPathsSlow","currentDatasetListenFields","CACHE","getBatchFetcherForDataset","fetchAll","CROSS_DATASET_PREVIEW_POLL_INTERVAL","visiblePoll$","visibilityState","crossDatasetListenFields","batchFetcher","createCachedFieldObserver","latest","changes$","cachedObserveFields","cacheKey","existingObservers","missingFields","cachedFieldObserver","cachedFieldObservers","cached","snapshots","_rev","pickFrom","objects","getFirstFieldValue","MAX_DOCUMENT_ID_CHUNK_SIZE","chunkDocumentIds","documentIds","chunk","chunkSize","chunks","create_preview_availability","observeDocumentPairAvailability","observeDocumentAvailability","draftReadability","publishedReadability","hasRev","fetchDocumentReadability","uniqueIds","fetchDocumentReadabilityChunked","requestOptions","getDataUrl","excludeContent","response","omitted","omittedEntry","create_preview_documentPair","ALWAYS_INCLUDED_SNAPSHOT_PATHS","observePathsDocumentPair","availability","snapshotPaths","draftSnapshot","publishedSnapshot","createDocumentPreviewStore","__proxy_observePaths","unstable_observeDocumentPairAvailability","unstable_observePathsDocumentPair","SearchItem","documentType","documentPresence","useDocumentPresence","ResultsPopover","Popover","SearchPopoverContent","arrow","matchReferenceWidth","filterOption","SearchField","fullScreen","onSearchItemClick","portalElement","relatedElements","setSearchInputElement","setQuery","handleClickItem","renderOption","data","renderPopoverFullscreen","renderPopover","referenceElement","inputElement","autoComplete","Autocomplete","SearchIcon","listBox","onQueryChange","PortalProvider","listStyles","SpaceBox","ListBoxOuter","ListBox","ImageCard","$aspectRatio","$lqip","Image","project","getProject","urlBuilder","auto","caption","lqip","metadata","aspectRatio","marginY","language","h1","h2","h3","h4","h5","h6","normal","bullet","number","listItem","PortableTextContent","PortableText","LABELS","bugfix","feature","ChangelogItem","changeType","label","ChangelogList","changeItems","isLatest","version","features","bugfixes","bugFixesDescription","flat","Badge","change","StickyBox","ChangelogDialog","changelog","currentVersion","dialogProps","latestVersion","changelogWithChangeItems","hasChangelog","showDivider","sanityModuleVersions","CACHED_LOOKUPS","checkModuleStatus","moduleVersions","getInstalledModules","buildQueryString","hashQuery","m","request$","installed","versions","pkg","useModuleStatus","moduleStatus$","COMMANDS","Icon","ToggleArrowRightIcon","ChangelogAccordion","defaultOpen","handleClick","role","ChangelogButton","buttonElement","setButtonElement","isUpToDate","PackageIcon","ConfigIssuesButton","dialogId","isDialogOpen","setDialogOpen","RootLayer","SearchCard","LeftFlex","Navbar","fullscreenSearchPortalEl","onSearchOpenChange","rootHref","handleRootClick","mediaIndex","useMediaIndex","searchOpen","setSearchOpen","drawerOpen","setDrawerOpen","routerStateRef","workspaceNameRef","drawerButtonEl","setDrawerButtonEl","searchInputElement","searchOpenButtonEl","setSearchOpenButtonEl","searchCloseButtonEl","setSearchCloseButtonEl","shouldRender","brandingCenter","collapsedPresenceMenu","loginStatus","searchFullscreen","configIssues","formattedName","handleCloseSearch","handleOpenSearch","handleCloseDrawer","handleOpenDrawer","rootLinkContent","brandingComponent","searchRelatedElements","MenuIcon","borderRight","marginX","NoToolsScreen","ToolNotFoundScreen","toolName","SearchFullscreenPortalCard","StudioLayout","activeTool","toolError","setToolError","setFullscreenSearchPortalEl","documentTitle","mainTitle","handleSearchOpenChange","resetToolError","info","componentStack","Suspense","fallback","LoadingTool","clientOptions","useDataset","useProjectId","useTemplates","templates","FIVE_SECONDS","TWENTY_SECONDS","ONE_MINUTE","ONE_HOUR","useTimeAgo","minimal","agoSuffix","resolved","setResolved","formatRelativeTime","isFinite","refreshInterval","setInterval","clearInterval","timestamp","parsedDate","now","diffMonths","differenceInMonths","diffYears","differenceInYears","format","diffWeeks","differenceInWeeks","weekSuffix","pluralize","diffDays","differenceInDays","daysSuffix","daysSince","diffHours","differenceInHours","hoursSuffix","diffMins","differenceInMinutes","minsSuffix","diffSeconds","differenceInSeconds","secsSuffix","INITIAL","useConnectionState","publishedDocId","docTypeName","documentStore","useDocumentStore","documentEvents","eventType","isConnected","mapTo","useDocumentOperation","operations$","editOperations","useDocumentOperationEvent","operationEvents","useEditState","editState","SYNCING","isSyncing","NOT_SYNCING","useSyncState","consistencyStatus","isConsistent","isValidating","useValidationStatus","getUpdatedSnapshot","bufferedDocument","LOCAL","HEAD","_updatedAt","toSnapshotEvent","getDocument","createObservableBufferedDocument","listenerEvent$","commitMutations","actions$","consistency$","BehaviorSubject","rebase$","remoteMutations","createInitialBufferedDocument","initialSnapshot","BufferedDocument","onMutation","mutation","remote","mutations","onRemoteMutation","transactionId","author","effects","onRebase","edge","nextRemoteMutations","localMutations","onConsistencyChanged","commitHandler","resultRev","success","isBadRequest","cancel","failure","Promise","reject","currentBufferedDocument$","listenerEvent","commit","snapshotAfterSync$","withLatestFrom","mutationEvent","arrive","Mutation","actionHandler$","action","emitAction","addMutations","addMutation","snapshot$","remoteSnapshot$","updates$","createBufferedDocument","prepareDoc","DELETE","patch","patches","createIfNotExists","createOrReplace","mutate","getPairListener","idPair","effectFormat","concatMap","fetchInitialDocumentSnapshots","createSnapshotEvent","getDocuments","isEventForDocId","dataRequest","returnDocuments","setVersion","checkoutPair","listenerEvents$","reconnect$","mut","keyGen","MEMO","memoizedPair","_typeName","isSnapshotEvent","withSnapshots","snapshots$","snapshotPair","operationArgs","ctx","_ctx","isLiveEditEnabled","liveEdit","ready","del","execute","tx","transaction","skipCrossDatasetReferenceValidation","strengthenOnPublish","obj","weak","unset","ifRevisionID","discardChanges","unpublish","omitProps","duplicate","dupeId","restore","fromRevision","historyStore","targetId","draftIsConsistent","publishedIsConsistent","maybeObservable","operationImpls","operationName","operationArguments","extraArgs","operation","last","operationCalls$","emitOperation","REQUIRES_CONSISTENCY","listenerCache","getOperationEvents","result$","op","groups$","requiresConsistency","isConsistent$","ready$","AUTOCOMMIT_INTERVAL","autoCommit$","throttleTime","asyncScheduler","leading","listener","createOperationGuard","opName","GUARDED","createEmitter","executeArgs","wrap","createOperationsAPI","remoteSnapshots","INITIAL_VALIDATION_STATUS","findReferenceIds","reduceJSON","listenDocumentExists","previewStore","getDocumentExists","documentPreviewStore","toPromise","document$","debounceTime","referenceIds$","curr","referencedDocumentUpdate$","idSet","currKeys","nextKeys","markers","validateDocument","operationResults$","operationArgs$","filterResponse","isWelcomeEvent","listenQuery","fetchQuery","listenerQuery","fetchOnce$","events$","mutationAndReconnect$","partition","isRelevantEvent","transitions","transition","exhaustMapToWithTrailing","resolveTypeForDocument","specifiedType","ALLOWED_REF_PROPS","quote","validateInitialObjectValue","contextError","validateValue","parentIsArray","pathToString","_key","randomKey","validateReference","disallowed","deepAssign","sourceVal","targetVal","isBuilder","serialize","resolveValue","initialValueOpt","resolveInitialValue","schemaTypeName","resolvedValue","resolveInitialValueForType","DEFAULT_MAX_RECURSION_DEPTH","getItemType","arrayType","itemTypeName","resolveTypeName","memberType","maxDepth","resolve","isObjectSchemaType","resolveInitialObjectValue","isArraySchemaType","resolveInitialArrayValue","initialArray","initialItem","itemType","initialObject","fieldValues","initialFieldValue","merged","LOADING_MSG","getInitialValueStream","initialValueTemplates","draft$","published$","templateName","isResolving","initialValueWithParams$","templateParams","resolveError","getIdPairFromPublished","createDocumentStore","caches","ops","isLoaded","useDocumentType","isResolved","SYNC_RESOLVED_STATE","resolvedState","setDocumentType","useDocumentValues","documentValues$","useUserViaUserStore","getUser","useUserStore","useCurrentUser","createUserStore","userLoader","DataLoader","userIds","users","batchScheduleFn","cb","raf","userFromCurrentUser","profileImage","prime","load","getUsers","loadMany","useInitialValue","templateParamsRaw","useInitialValueResolverContext","defaultValue","initialValueOptions","initialValueMsg$","useResolveInitialValueForType","initialValueContext","getSchemaType","getPairPermissions","grantsStore","permission","effectiveVersion","effectiveVersionType","checkDocumentPermission","getDocumentPairPermissions","pairPermissions","permissionResults","permissionResult","useDocumentPairPermissionsFromHookFactory","useDocumentPairPermissions","useGrantsStore","getDocumentValuePermissions","useDocumentValuePermissionsFromHookFactory","useDocumentValuePermissions","getTemplatePermissions","resolvedInitialValue","promise","initialDocumentId","useTemplatePermissionsFromHookFactory","DEBUG_PREFIX","hashchange$","debugParams$","p","param","debugRolesParam$","arg","trim","administrator","editor","developer","contributor","viewer","requiresApproval","restricted","DEBUG_ROLE_GRANTS_MAP","grants.administrator","grants.editor","grants.developer","grants.contributor","grants.viewer","grants.restricted","grants.requiresApproval","write","debugGrants$","flatMap","roleName","getDatasetGrants","grants","getParams","PARSED_FILTERS_MEMO","matchesFilter","parsed","evaluate","createGrantsStore","datasetGrants$","currentUserDatasetGrants","debugGrants","refCountDelay","grantsPermissionOn","matchingGrants","grant","foundMatch","getJsonStream","Authorization","credentials","getStream","body","reader","cancelled","ReadableStream","start","controller","getReader","decoder","TextDecoder","buffer","processResult","done","close","enqueue","stream","lines","line","emptyVersionState","hasAttrs","rev","aligned","findIndex","evt","startFromSnapshot","Aligner","timeline","earliestTransactionId","_states","appendRemoteSnapshotEvent","_maybeInvalidateHistory","_apply","addRemoteMutation","prependHistoryEvent","acceptsHistory","_alignAtIndex","addTranslogEntry","didReachEarliestEntry","isAligned","_isComplete","currentDocument","mutEvt","applyPatch","apply","reset","Reconstruction","end","same","endAttributes","getAttrs","endDocument","_endDocument","replayBackwardsUntil","startAttributes","startDocument","_startDocument","replayBackwardsBetween","diff","_diff","calculateDiff","TRANSLOG_ENTRY_LIMIT","TimelineController","selectionState","_fetchMore","_fetchAtLeast","_isRunning","_didErr","_since","_sinceTime","_revTime","handler","_aligner","markChange","clearRange","setRange","since","setRevTime","setSinceTime","targetRev","lastChunk","setReconstruction","setLoadMore","flag","sinceTime","revTime","realRevChunk","onOlderRevision","changesPanelActive","findRangeForNewRev","revTimeId","isLatestChunk","createTimeId","sinceChunk","findRangeForNewSince","revChunk","parseTimeId","findLastPublishedBefore","sinceAttributes","_reconstruction","displayed","currentDiff","currentObjectDiff","handleRemoteMutation","tick","shouldFetchMore","reachedEarliestEntry","chunkCount","fetchMoreTransactions","queryParams","tid","getUrl","updateChunks","createObservableController","innerController","historyController","isSameAnnotation","ArrayContentWrapper","annotation","extractor","elements","at","input","wrapValue","annotationAt","meta","metas","fromMeta","ObjectContentWrapper","StringContentWrapper","sliceAnnotation","lst","part","subStart","subEnd","fromValue","extractAnnotationForFromInput","firstChunk","annotationForTransactionIndex","transactionIndex","extractAnnotationForToInput","chunkIdx","transactionByIndex","chunkByTransactionIndex","diffValue","fromRaw","toRaw","fromInput","endMeta","toInput","startMeta","diffInput","TwoEndedArray","_postive","_negative","addToEnd","elem","addToBeginning","mergeAtEnd","merger","lastIdx","mergeAtBeginning","firstIdx","removeFromEnd","shift","pop","canMergeEdit","CHUNK_WINDOW","isWithinMergeWindow","mergeChunk","draftState","combineState","publishedState","endTimestamp","startTimestamp","authors","getChunkState","effect","modified","deleted","isDeletePatch","getChunkType","draftEffect","publishedEffect","chunkFromTransaction","modifiedDraft","modifiedPublished","draftDeleted","publishedDeleted","Timeline","_transactions","_chunks","_possiblePendingTransactions","enableTrace","_trace","__sanityTimelineTrace","mapChunks","mapper","_recreateTransactionsFrom","pending","_invalidateTransactionFrom","_removeInvalidatedChunks","_addChunksFromTransactions","_createInitialChunk","nextTransactionToChunk","firstTransactionChunked","firstTx","initialChunk","timestampStr","chunkId","currentChunk","valueOf","startChunkIdx","revert","initialDoc","finalDoc","draftValue","incremental","publishedValue","getValue","initialAttributes","preDraftValue","prePublishedValue","didHaveDriaft","getType","haveDraft","havePublished","rebaseValue","finalValue","finalAttributes","documentRevisionCache","getHistory","revision","clientConfig","getDocumentAtRevision","getTransactions","includeIdentifiedDocumentsOnly","transactions","getAllRefIds","jsonReduce","jsonMap","mapFn","mappedValue","mapRefNodes","removeMissingReferences","existingIds","refNode","documentExists","targetDocumentId","documentAtRevision","existingIdsQuery","refId","restoredDraft","createHistoryStore","getTimeline","getTimelineController","USERIDS","PATHS","mock$","sample","handleIncomingMessage","session","createBifurTransport","incomingEvents$","dispatchMessage","KEY","generate","nanoid","getSessionId","sessionStorage","setSessionId","SESSION_ID","__tmp_wrap_presenceStore","connectionStatusStore","presenceEvents$","sendMessage","currentLocation$","locationChange$","setLocation","nextLocation","reportLocations","requestRollCall","rollCallRequests$","REPORT_MIN_INTERVAL","reportLocationInterval$","reportLocation$","auditTime","myRollCall$","connectionChange$","statusType","debugPresenceParam$","useMock$","switchMapTo","debugIntrospect$","syncEvent$","stateEventToSession","stateEvent","states$","allSessions$","keyedSessions","sessions","sess","userSessionPairHasUser","bufferSize","globalPresence$","userAndSessions","debugIntrospect","userAndSession","isCurrent","setPresence","presenceStore","usePresenceStore","createProjectStore","getDatasets","tryParse","defValue","localStorageBackend","DB","memoryBackend","testKey","resolveBackend","createSettingsStore","storageBackend","set$","prefixNamespace","ns","forNamespace","forKey","namespacedKey","useHistoryStore","useCrossProjectTokenStore","useConnectionStatusStore","useProjectStore","projectStore","useSettingsStore","settingsStore","FullscreenLayer","FullscreenSpinner","WithReferringDocuments","withPropsStream","connect","_WithReferringDocuments","receivedProps$","receivedProps","referringDocuments","docId","docs","SpinnerWithText","DocumentList","assetType","hasResults","filenamePlaceholder","originalFilename","DocumentLink","STYLE_ASSET_IMAGE","objectFit","objectPosition","STYLE_CONFIRM_CARD","gridColumn","alignSelf","justifyContent","STYLE_IMAGE_WRAPPER","ConfirmMessage","MODE_CONFIRM_DELETE","MODE_LIST_USAGE","AssetUsageDialog","InnerAssetUsageDialog","assetIsLoading","isDeleting","onDelete","isListMode","defaultHeaderTitle","canDelete","setCanDelete","isLoadingParent","setIsLoadingParent","publishedDocuments","setPublishedDocuments","showActionFooter","showDocumentList","noPaddingOnStack","TrashIcon","drafts","documentsWithoutDrafts","__unstable_autoFocus","AssetMenu","isSelected","onAction","triggerButtonMode","triggerButtonTone","DPI","devicePixelRatio","round","img","MenuContainer","AssetThumb","deleteRef$","onKeyPress","onDeleteFinished","showUsageDialog","setShowUsageDialog","showDeleteDialog","setShowDeleteDialog","setIsDeleting","handleConfirmDelete","handleDialogClose","handleToggleUsageDialog","handleDeleteError","handleDeleteSuccess","handleDeleteAsset","handleMenuAction","imgH","BYTE_UNITS","BIBYTE_UNITS","BIT_UNITS","BIBIT_UNITS","toLocaleString","locale","prettyBytes","bits","binary","signed","minimumFractionDigits","maximumFractionDigits","UNITS","isNegative","localeOptions","numberString","exponent","log10","toPrecision","unit","MIME_TYPES","convertMimeTypeToSomethingNice","formatMimeType","CardIconWrapper","CustomFlex","CustomText","CustomCard","RowButton","STYLES_ROW_CARD","STYLES_ICON_CARD","flexShrink","STYLES_BUTTON_TEXT","STYLES_ASSETMENU_WRAPPER","DISABLED_DELETE_TITLE","AssetRow","setIsOpen","isMobile","_createdAt","formattedTime","formattedMimeType","formattedSize","showTooltip","handleToggleOpen","gridTemplateColumns","opacity","ChevronUpIcon","fallbackPlacements","dateTime","STYLES_FILENAME","STYLES_GRID","TableList","assets","selectedAssets","PER_PAGE","ASSET_TYPE_IMAGE","ASSET_TYPE_FILE","buildQuery","ThumbGrid","CardLoadMore","DefaultAssetSource","_elementId","uniqueId","currentPageNumber","fetch$","setAssets","isLastPage","setIsLastPage","hasResetAutoFocus","setHasResetFocus","setIsLoading","dialogHeaderTitle","onSelect","fetchPage","pageNumber","isImageAssetType","assetTypeParam","handleDeleteFinished","selectedSource","handleItemClick","currentTarget","handleItemKeyPress","handleFetchNextPage","renderedThumbView","renderedTableView","DownloadIcon","DefaultSource","ImageSource","ImageIcon","FileSource","DocumentsIcon","defaultFileAssetSources","defaultImageAssetSources","WorkspaceValidationError","identifier","getWorkspaceIdentifier","getIdentifier","validateWorkspaces","validateNames","validateBasePaths","isSingleWorkspace","names","rawName","thisIdentifier","getNamelessIdentifier","existingWorkspace","prevIdentifier","hasBasePath","validateBasePath","restOfWorkspaces","firstWorkspaceSegmentCount","workspaceSegmentCount","basePaths","withTitle","actionIds","counter","getHookId","actionHook","useShallowCompareMemoize","useShallowCompareEffect","HookStateContainer","hook","onNext","onReset","onRequestUpdate","hookState","onComplete","requestIdleCallbackShim","didTimeout","timeRemaining","cancelIdleCallbackShim","handle","_requestIdleCallback","requestIdleCallback","_cancelIdleCallback","cancelIdleCallback","GetHookCollectionState","hooks","statesRef","tickId","setTick","setKeys","mountedRef","ricHandle","handleRequestUpdate","handleRequestUpdateThrottled","handleNext","handleReset","currentKeys","hookIds","states","RenderActionCollectionState","actionProps","onActionComplete","CONTEXT_MENU_POPOVER_PROPS","PaneContextMenuButton","itemGroups","groups","defaultGroup","groupMap","g","groupIndex","itemIndex","PaneContextMenuItem","hotkeys","shortcut","IntentButtonOrActionButton","linkRef","ImperativeToast","_","useImperativeHandle","defaults","navbarPopover","navbarDialog","pane","paneHeader","paneFooter","paneResizer","modal","movingItem","drawershade","drawer","fullscreen","dropdown","navbarFixed","fullscreenEdit","popoverBackground","tooltip","modalBackground","spinner","ZIndexContext","useZIndex","LegacyLayerProvider","zOffsetKey","PANE_DEBUG","PANE_COLLAPSED_WIDTH","PANE_DEFAULT_MIN_WIDTH","PaneContext","PaneLayoutContext","usePaneLayout","PaneDivider","resize","dragging","setDragging","handleMouseDown","startX","pageX","handleMouseMove","deltaX","handleMouseUp","onMouseDown","Pane","_c","currentMinWidth","currentMinWidthProp","currentMaxWidth","currentMaxWidthProp","flexProp","minWidthProp","maxWidthProp","setRootElement","layoutCollapsed","expand","expandedElement","mount","panes","paneIndex","nextPane","isLast","nextCollapsed","forwardedRef","useForwardedRef","handleCollapse","handleExpand","contextValue","divider","BoundaryElementProvider","usePane","PaneContent","RootCard","PaneFooter","TitleBox","TitleTextSkeleton","TitleText","TABS_SCROLL_PADDING","TabsBox","rgba","PaneHeader","backButton","subActions","tabs","paneElement","paneRect","layoutStyle","handleTitleClick","handleLayoutClick","_calcPaneResize","leftMinWidth","rightMinWidth","leftMaxWidth","rightMaxWidth","minDeltaX","rightMinDeltaX","maxDeltaX","leftMaxDeltaX","_deltaX","leftW","rightW","leftFlex","rightFlex","_getDOMPath","parentElement","childNodes","unshift","EMPTY_PATH","_sortElements","_sortByElementPath","aIndex","bIndex","createPaneLayoutController","observers","optionsMap","userCollapsedElementSet","rootWidth","resizeDataMap","resizing","_notifyObservers","original","splice","leftElement","_d","leftIndex","leftOptions","rightElement","rightOptions","leftResizeData","rightResizeData","nextRootElement","setRootWidth","nextRootWidth","_elements","dataMap","lastElement","collapsedWidth","remaingWidth","userCollapsed","sizeCollapsed","resizeData","PaneLayout","onCollapse","onExpand","paneLayout","IntentButton","InsufficientPermissionsMessageTooltip","reveal","POPOVER_PROPS","getIntent","baseParams","PaneHeaderCreateButton","templatePermissions","isTemplatePermissionsLoading","nothingGranted","permissionsById","firstItem","emptyArray","emptyObject","hashObject","sortObject","keyA","keyB","PaneHeaderActions","initialValueTemplateItems","initialValueTemplateItemsFromStructure","menuItems","menuItemGroups","actionHandlers","handleAction","actionMenuItems","contextMenuItems","nonCreateMenuItem","showAsAction","initialValueTemplateItemFromMenuItems","menuItemIndex","intentParams","initialValueTemplateItem","combinedInitialValueTemplates","actionItem","actionIndex","DeskToolContext","SerializeError","parentPath","hint","withHelpUrl","HELP_URL","IMPLICIT_FIELDS","joinReferences","schemaField","refTypes","tailFields","tailWrapper","getExtendedProjection","ORDER_BY_UPDATED_AT","ORDER_BY_CREATED_AT","DEFAULT_SELECTED_ORDERING_OPTION","DEFAULT_ORDERING_OPTIONS","maybeSerializeMenuItem","MenuItemBuilder","_context","clone","getAction","getTitle","getGroup","getIcon","getShowAsAction","TITLE_REQUIRED","ACTION_OR_INTENT_REQUIRED","ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE","withSpec","builder","getOrderingMenuItem","extendedProjection","SortIcon","getOrderingMenuItemsForSchemaType","maybeSerializeMenuItemGroup","MenuItemGroupBuilder","_title","getId","ID_REQUIRED","disallowedPattern","validateId","disallowedChar","GenericViewBuilder","kebabCase","isSerializable","view","maybeSerializeView","isComponentSpec","ComponentViewBuilder","componentOrSpec","userComponent","getComponent","getOptions","COMPONENT_REQUIRED","FormViewBuilder","form","createDocumentChildResolver","resolveDocumentNode","itemId","currentSegment","DocumentBuilder","camelCase","getChild","paneId","getDocumentId","initialValueTemplate","templateParameters","getInitialValueTemplate","getInitialValueTemplateParameters","views","getViews","urlId","DOCUMENT_ID_REQUIRED","viewIds","dupes","viewId","getDocumentOptions","documentFromEditor","documentFromEditorWithInitialValue","layoutOptions","DEFAULT_INTENT_HANDLER","Symbol","defaultIntentChecker","isEdit","isCreate","typedSpec","paneFilter","paneParams","typeNames","getTypeNamesFromFilter","tpl","InitialValueTemplateItemBuilder","getDescription","getTemplateId","getParameters","defaultInitialValueTemplateItems","getStructureBuilder","ordered","maybeSerializeInitialValueTemplateItem","menuItemsFromInitialValueTemplateItems","pickBy","noChildResolver","shallowIntentChecker","GenericListBuilder","initialValueTemplatesSpecified","defaultLayout","getDefaultLayout","getMenuItems","getMenuItemGroups","getCanHandleIntent","showIcons","displayOptions","getShowIcons","getInitialValueTemplates","validateFilter","QUERY_PROVIDED_FOR_FILTER","createDocumentChildResolverForItem","parentItem","DocumentListBuilder","getApiVersion","getFilter","defaultOrdering","getDefaultOrdering","FILTER_REQUIRED","inferInitialValueTemplates","inferTypeName","getSpec","resolveNewDocumentOptions","getTypeNamesFromEqualityFilter","getTypeNamesFromInTypesFilter","pattern","exec","candidate","_DEBUG","EMPTY_PARAMS","LOADING_PANE","PaneResolutionError","cause","randomIdCache","cachedValue","bindCache","memoBind","methodKey","boundMethods","bound","isSubscribable","thing","rethrowWithPaneResolutionErrors","unresolvedPane","flatIndex","wrapWithPublishReplay","createPaneResolver","middleware","resolvePane","useDeskTool","deskTool","fallbackEditorChild","nodeId","structureContext","defaultDocumentBuilder","hashContext","parentId","splitIndex","serializeOptionsIndex","serializeOptions","serializeOptionsPath","hashResolvedPaneMeta","routerPaneSibling","siblingIndex","paneNode","resolvePaneTree","flattenedRouterPanes","resolvedPaneMeta","loadingPanes","restIndex","loadingPanePath","currentIndex","loadingPane","nextStream","nextResolvedPanes","createResolvedPaneNodeStream","routerPanesStream","rootPaneNode","initialCacheState","cacheKeysByFlatIndex","resolvedPaneCache","resolvedPanes$","rawRouterPanes","routerPanes","routerPaneGroup","pairwise","currValue","diffIndex","beforeDiffIndex","afterDiffIndex","keysToKeep","keySet","keysToDelete","nextFn","cachedResolvedPane","cacheKeySet","prevPane","useRouterPanesStream","routerStateSubject","ReplaySubject","routerPanes$","_routerState","useResolvedPanes","setData","paneDataItems","resolvedPanes","currentGroup","groupsLen","nextGroup","paneDataItem","childItemId","Delay","ms","setReady","timeoutId","PathSegment","formatStack","StructureError","showStack","handleReload","SyncIcon","missingContext","PaneRouterContext","hasGroupSiblings","groupLength","routerPanesState","BackLink","ChildLink","ReferenceChildLink","handleEditReference","ParameterizedLink","replaceCurrent","closeCurrent","duplicateCurrent","setView","setParams","setPayload","childId","childPayload","childParameters","parentRefPath","currentPanes","nextParams","nextPayload","currentSibling","nextSibling","nextPanes","PaneRouterProvider","routerPaneGroups","modifyCurrentGroup","modifier","currentItem","nextRouterState","siblings","sibling","duplicatedItem","restParams","usePaneRouter","UnknownPane","paneKey","getWaitMessages","thresholds","DEFAULT_MESSAGE","Content","LoadingPane","messageProp","resolvedMessage","currentMessage","setCurrentMessage","contentElement","setContentElement","mounted","setMounted","_raf2","paneMap","lazy","documentList","DeskToolPane","PaneComponent","isActive","prevParams","prevPayload","ErrorPane","CORNER_RADIUS","INTERACTIVE_STROKE_WIDTH","CONNECTOR_MARGIN","ARROW_MARGIN_X","ARROW_MARGIN_Y","ARROW_SIZE","ARROW_THRESHOLD","DEBUG_LAYER_BOUNDS","ConnectorContext","isReviewChangesOpen","onOpenReviewChanges","onSetFocus","ChangeFieldWrapper","isHover","setHover","onMouseEnter","onMouseLeave","isChanged","hasFocus","hasHover","hasRevertHover","deepCompare","setFocusWithStopPropagation","stopPropagation","freeze","animationSpeed","ChangeBarWrapper","changed","isReviewChangeOpen","ChangeBar","ChangeBarButton","FieldWrapper","$zIndex","ChangeBarMarker","notSelectedColor","spot","yellow","screenMedium","$withHoverEffect","ElementWithChangeBar","withHoverEffect","hover","useLayer","handleMouseEnter","handleMouseLeave","changeBar","layer","ChangeIndicator","ChangeIndicatorContext","fullPath","focusPath","ScrollContext","useOnScroll","parentContext","ScrollContainer","onScroll","childContext","handleScroll","ScrollMonitor","findMostSpecificTarget","targetType","pathString","fromString","exactId","mostSpecific","numEqual","numEqualSegments","lastPathSegment","pathOnlyDiffersByKey","isKeyedObject","isChangeBar","hasOverflowScroll","getComputedStyle","isScrollable","scrollableContent","scrollHeight","SCROLL_INTO_VIEW_TOP_PADDING","scrollIntoView","parentElementWithScroll","scroll","bounds","behavior","foundScrollContainer","contains","scrollLeft","arrowPath","x","y","moveTo","lineTo","strings","delim","quadCurve","x1","y1","generateConnectorPath","fromX","fromY","toX","toY","cmds","r1","isAbove","isBelow","getConnectorLinePoint","centerY","startY","endY","outOfBounds","mapConnectorToLine","connector","fromBounds","toBounds","maxStartY","ClampedRect","ConnectorPath","strokeColor","InteractivePath","RightBarWrapper","Connector","linePathDescription","strokeWidth","useResizeObserver","onResize","SvgWrapper","getState","allReportedValues","hovered","changeBarsWithHover","changeBarsWithFocus","reportedChangeBar","isHoverConnector","changeBars","connectors","ConnectorsOverlay","setHovered","visibleConnectors","handleScrollOrResize","ConnectorGroup","onConnectorClick","EnabledChangeConnectorRoot","DisabledChangeConnectorRoot","ChangeConnectorRoot","ReviewChangesContext","useReferenceInputOptions","ReferenceInputOptionsProvider","activePath","EditReferenceLinkComponent","onEditReference","createPatchChannel","_subscribers","setIfMissing","insert","inc","amount","dec","prefixPath","PatchEvent","prepend","append","prefixAll","FormBuilderContext","useFormBuilder","formBuilder","DefaultArrayInputFunctions","onCreateValue","onAppendItem","menuButtonId","insertItem","handleAddBtnClick","memberDef","referenceIcon","__SANITY_INTERNAL_IMPLEMENTATION","level","InfoOutlineIcon","IconText","primary","caution","critical","DefaultMarkers","renderCustomMarkers","CustomMarkers","DefaultCustomMarkers","FormCallbacksContext","FormCallbacksProvider","useFormCallbacks","PresenceContext","PresenceProvider","useFormFieldPresence","useChildPresence","ValidationContext","ValidationProvider","useValidationMarkers","useChildValidation","marker","missingPatchChannel","FormBuilderProvider","__internal_patchChannel","patchChannel","autoFocus","changesOpen","collapsedFieldSets","collapsedPaths","filterField","focused","members","onChange","onFieldGroupSelect","onPathBlur","onPathFocus","onPathOpen","onSetFieldSetCollapsed","onSetPathCollapsed","renderField","renderInput","renderItem","renderPreview","unstable","documentValue","documentValueRef","ArrayFunctions","Markers","assetSources","_ensureArrayOfSources","directUploads","StudioFormBuilderProvider","StudioFormBuilder","RootInput","handleCollapseField","handleExpandField","handleBlur","handleChange","focusRef","handleSelectFieldGroup","groupName","handleOpenField","handleCloseField","handleCollapseFieldSet","fieldSetName","handleExpandFieldSet","rootInputProps","elementProps","onBlur","onFocus","onCloseField","onCollapseField","onCollapseFieldSet","onExpandField","onExpandFieldSet","onFocusPath","onOpenField","IS_NUMERIC","unquote","splitAttr","attr","coerce","parseGradientPath","focusPathStr","encodePath","formBuilderPath","arrayToJSONMatchPath","decodePath","gradientPath","isMemberObject","member","isMemberArrayOfPrimitives","ofType","isPrimitiveSchemaType","isMemberArrayOfObjects","rePropName","reKeySegment","segmentType","isKeySegment","getValueAtPath","rootValue","isIndexSegment","stringToPath","normalizePathSegment","normalizeIndexSegment","normalizeKeySegment","isIndexTuple","normalizeIndexTupleSegment","pathsAreEqual","pathA","pathB","segmentA","segmentB","getItemKey","arrayItem","getItemKeySegment","isEmptyObject","OverlayContainer","ContentContainer","CardContainer","FlexContainer","ActivateOnFocus","onActivate","isOverlayActive","isObjectInputProps","inputProps","isArrayInputProps","usePrevious","useDidUpdate","didUpdate","compare","whatwgRNG","rnds8","Uint8Array","getRandomValues","getByteHexTable","table","ensureKey","ArrayOfObjectsField","hadFocus","handleInsert","referenceItem","handleMoveItem","fromIndex","refItem","handlePrependItem","handleAppendItem","handleCollapseItem","itemKey","handleExpandItem","handleOpenItem","handleCloseItem","handleRemoveItem","handleFocusChildPath","onExpandItem","onCollapseItem","onCloseItem","onOpenItem","onInsert","onMoveItem","onRemoveItem","onPrependItem","renderedInput","fieldProps","collapsible","inputId","PrimitiveField","handleNativeChange","inputValue","isNumberSchemaType","valueAsNumber","isBooleanSchemaType","checked","hasEmptyValue","isNaN","validationError","createProtoValue","jsonType","ObjectField","fieldsetName","onOpen","move","arr","copy","insertAfter","ArrayOfPrimitivesField","handleSetCollapsed","handleAppend","itemValue","handlePrepend","insertIndex","referenceIndex","handleFocusIndex","onSetCollapsed","onFocusIndex","MemberField","STATUS_TONES","SuffixBox","Alert","suffix","HeaderButton","ToggleArrow","Header","IconBox","Details","openProp","handleToggle","TRUTHY_STRINGS","FALSEY_STRINGS","BOOL_STRINGS","TRUE","prop","toLocalDate","newDate","getTimezoneOffset","hours","getHours","setHours","getTZName","Intl","DateTimeFormat","resolvedOptions","timeZone","converters","convert","boolean","richDate","isValidDate","local","toJSON","utc","timezone","datetime","SetMissingTypeButton","UnsetItemButton","validTypes","UntypedValueInput","isSingleValidType","isHoistedType","validType","getConverters","actualType","CONVERTERS","converter","InvalidValueInput","handleClearClick","handleConvertTo","converted","ConvertButton","onConvert","VALIDATION_COLORS","red","VALIDATION_ICONS","FormFieldValidationStatus","__unstable_showSummary","showSummary","warnings","hasWarnings","hasInfo","statusIcon","statusColor","FormFieldValidationSummary","FormFieldValidationStatusItem","errorMarkers","warningMarkers","errorLen","warningLen","errorsStr","warningsStr","errorText","warningText","hasBoth","FormFieldHeaderText","hasValidations","htmlFor","FormFieldHeader","__unstable_presence","FormField","focusRingBorderStyle","focusRingStyle","focusRing","focusRingOutsetWidth","focusRingInsetWidth","bgColor","legend","ToggleButton","ToggleIconBox","FormFieldSetLegend","getChildren","$borderLeft","FormFieldSet","hasValidationMarkers","gapX","gapY","FormFieldStatus","MissingKeysAlert","handleFixMissingKeys","DuplicateKeysAlert","handleFixDuplicateKeys","duplicates","MemberFieldError","resolvedValueType","expectedSchemaType","MemberFieldSet","fieldSet","fieldsetMember","IGNORE_KEYS","ArrayOfObjectsItem","onRemove","isEmptyValue","itemProps","getEmptyValue","ArrayOfPrimitivesItem","PopoverCard","container","ItemWithMissingType","vertical","showDetails","setShowDetails","popoverRef","setPopoverRef","useClickOutside","handleShowDetails","onKeyDown","BulbOutlineIcon","MemberItemError","ObjectMembers","pass","hasAbsolutePath","FormInput","absolutePath","relativePath","FormInputInner","destinationRenderField","destinationRenderInput","destinationRenderItem","destinationRenderPreview","isDestinationReached","shouldRenderField","includeField","childPath","trimLeft","itemMember","fieldMember","createInsertCallback","allowedDecorators","toInsert","givenBlock","blk","normalizeBlock","createSetCallback","createUnsetCallback","BlockActions","usePortableTextEditor","renderBlockActions","decoratorValues","PortableTextEditor","getPortableTextFeatures","decorators","blockActions","blockActionProps","blur","contentEditable","ReviewChangesHighlightBlock","StyledChangeIndicatorWithProvidedFullPath","_isBlockType","_isArrayOfObjectsFieldMember","NONEXISTENT_PATH","useMemberValidation","memberValidation","childValidation","hasError","hasWarning","PortableTextMarkersContext","PortableTextMarkersProvider","usePortableTextMarkers","PortableTextMemberItemsContext","PortableTextMemberItemsProvider","memberItems","usePortableTextMemberItem","usePortableTextMemberItems","BlockObjectPreview","onClickingEdit","onClickingDelete","isTopLayer","isTabbing","isCustomPreviewComponent","isImageType","referenceLink","ReferenceLink","EyeOpenIcon","EditIcon","overlay","purple","invalid","PreviewContainer","ChangeIndicatorWrapper","$hasChanges","InnerFlex","BlockActionsOuter","BlockActionsInner","TooltipBox","BlockObject","attributes","isFullscreen","elementRef","reviewChangesHovered","setReviewChangesHovered","memberItem","handleMouseOver","handleMouseOut","handleEdit","handleDoubleClickToOpen","handleDelete","sel","anchor","blockPreview","innerPaddingProps","hasMarkers","isImagePreview","tooltipEnabled","onDoubleClick","onMouseOver","onMouseOut","ToolbarPopover","POPOVER_FALLBACK_PLACEMENTS","InlineObjectToolbarPopover","onEdit","scrollElement","editButtonRef","popoverScheme","boundaryElement","rootStyle","PreviewSpan","InlineObject","editorSelection","usePortableTextEditorSelection","showPopover","setShowPopover","markersToolTip","handleRemoveClick","point","handleEditClick","AnnotationToolbarPopover","annotationElement","textElement","cursorRect","setCursorRect","setSelection","isClosingRef","rangeRef","cursorElement","handleSelectionChange","winSelection","getSelection","anchorNode","anchorOffset","focusNode","focusOffset","range","getRangeAt","$toneKey","Annotation","annotationRef","markDefPath","setTextElement","removeAnnotation","isLink","toneKey","hasCustomMarkers","TEXT_LEVELS","TEXT_BULLET_MARKERS","TEXT_NUMBER_FORMATS","TEXT_DECORATOR_TAGS","em","underline","strong","TEXT_STYLE_PADDING","blockquote","Decorator","mark","createListName","textBlockStyle","$level","numberMarker","bulletMarker","family","TextRoot","TextBlockFlexWrapper","ListPrefixWrapper","BlockExtrasContainer","textSize2","capHeight1","ascenderHeight","descenderHeight","capHeight2","buttonHeight","negativeTop","TextFlex","TextContainer","Normal","Heading1","Heading2","Heading3","Heading4","Heading5","Heading6","BlockQuoteRoot","BlockQuote","TEXT_STYLES","TextBlock","spellCheck","handleChangeIndicatorMouseEnter","handleChangeIndicatorMouseLeave","TextStyle","outerPaddingProps","CustomIconDiv","CustomIcon","inlineStyle","backgroundImage","getPTEFormatActions","hotkeyOpts","decorator","shortCutKey","marks","blockEditor","toggleMark","getPTEListActions","lists","toggleList","getAnnotationIcon","getPTEAnnotationActions","focusChild","hasText","annotations","getPTEToolbarActionGroups","onInsertAnnotation","getBlockStyles","styleComponent","getInsertMenuIcon","fallbackIcon","getInsertMenuItems","onInsertBlock","onInsertInline","blockItems","blockObjects","BlockElementIcon","inlineItems","inlineObjects","InlineElementIcon","filteredBlockItems","annotationIcons","formatIcons","BoldIcon","ItalicIcon","StrikethroughIcon","UnderlineIcon","CodeIcon","listStyleIcons","OlistIcon","UlistIcon","getActionIcon","useFocusBlock","focusBlock","useFeatures","useActionGroups","handleInsertAnnotation","addAnnotation","useActiveActionKeys","activeAnnotationKeys","activeAnnotations","hasListStyle","isMarkActive","useActiveStyleKeys","hasBlockStyle","CollapseMenuMemo","MENU_POPOVER_PROPS","COLLAPSE_BUTTON_PROPS","ActionMenu","disabledProp","isVoidBlock","isEmptyTextBlock","firstInGroup","activeKeys","handleMenuClose","annotationDisabled","MenuButtonMemo","StyledMenuItem","StyledButton","TEXT_STYLE_OPTIONS","TEXT_STYLE_KEYS","emptyStyle","BlockStyleSelect","itemsProp","setChanged","_disabled","activeItems","_activeItems","_items","menuButtonText","toggleBlockStyle","hasTextStyle","renderStyle","InsertMenu","isVoidFocus","StyleSelectBox","StyleSelectFlex","ActionMenuBox","$withInsertMenu","FullscreenButtonBox","SLOW_INITIAL_VALUE_LIMIT","IS_MAC","platform","InnerToolbar","actionGroups","blockStyles","insertMenuItems","onToggleFullscreen","actionsLen","showActionMenu","showInsertMenu","rootElementRect","Hotkeys","CollapseIcon","ExpandIcon","Toolbar","isSlow","slowTimer","finally","handleInsertBlock","insertBlock","handleInsertInline","insertChild","$fullscreen","ToolbarCard","EditableCard","Scroller","EditableContainer","EditableWrapper","l","$isFullscreen","useSpellcheck","spellCheckOption","portableTextFeatures","isChrome96","userAgent","useScrollSelectionIntoView","domRange","leafEl","startContainer","scrollMode","boundary","renderDecorator","mType","defaultRender","Editor","initialSelection","onCopy","onPaste","renderAnnotation","renderBlock","renderChild","setPortalElement","setScrollElement","editableRef","useBoundaryElement","Node","renderPlaceholder","spellcheck","scrollSelectionIntoView","editable","PortableTextEditable","handleToolBarOnExpand","$readOnly","ExpandedLayer","useHotkeys","initialHotkeys","defaultHotkeys","ptFeatures","_getModalOption","DefaultEditDialog","usePortal","debugElement","RootPopover","ContentScrollerBox","ContentHeaderBox","PopoverEditDialog","forceUpdate","setForceUpdate","virtualElement","contextElement","ObjectEditModal","modalOption","modalType","firstField","setFirstField","firstFieldMember","firstFieldElm","getElementById","useScrollToOpenedMember","editorRootPath","portableTextMemberItems","isTouchDevice","maxTouchPoints","activateVerb","ACTIVATE_ON_FOCUS_MESSAGE","Compositor","wrapperElement","setWrapperElement","handleToggleFullscreen","hotkeysWithFullscreenToggle","editorHotkeys","hasContent","blockType","isTextBlock","childType","annotationType","openMemberItems","editorNode","boundaryElm","dMemberItem","portalElements","expanded","editorLayer","__unstable_name","__unstable_elements","InvalidValue","onIgnore","resolution","usePatches","filteredPatches","_startsWith","shouldReset","_shouldReset","_getValueAtPath","_isSegmentEqual","segment1","segment2","segment1Type","subjectPath","checkPath","_isAncestor","path1","path2","VisibleOnFocusButton","PortableTextInput","readOnlyFromProps","editorRef","setHasFocus","ignoreValidationError","setIgnoreValidationError","invalidValue","setInvalidValue","setIsFullscreen","setIsActive","portableTextMemberItemsRef","patchSubject","remotePatch$","innerElementRef","prevSel","childrenField","markDefArrayMember","existingItem","createRef","hasOpenItem","setFocusPathDebounced","handleEditorChange","handleFocusSkipperClick","handleIgnoreInvalidValue","respondToInvalidContent","RespondToInvalidContent","handleActivate","incomingPatches$","maxBlocks","isObjectItemProps","isStringInputProps","isStringSchemaType","isNumberInputProps","isBooleanInputProps","isArrayOfObjectsInputProps","isArrayOfObjectsSchemaType","isArrayOfPrimitivesInputProps","isArrayOfPrimitivesSchemaType","resolveConditionalProperty","property","MAX_FIELD_DEPTH","AUTO_COLLAPSE_DEPTH","getPrimitiveItemType","getCollapsedWithDefaults","getOption","optionName","PSEUDO_OBJECTS","HIDDEN_FIELDS","NO_LEVEL_LAYOUTS","NO_LEVEL_TYPES","getFieldLevel","currentLevel","getArrayFieldLevel","getObjectFieldLevel","typeIfRelevant","asType","isPseudoObject","hasVisibleFields","hasListOptions","isNoLevelLayout","asOneOfTypes","ALL_FIELDS_GROUP","isFieldEnabledByGroupFilter","groupsConfig","castArray","isAcceptedObjectValue","isValidArrayOfObjectsValue","isValidArrayOfPrimitivesValue","everyItemIsObject","findDuplicateKeyEntries","seenKeys","hasKey","everyItemHasKey","isChangedValue","comparisonValue","_isEqual","prepareFieldMember","_e","_f","_g","_h","_i","_j","_k","_l","_m","_n","_o","_p","_q","_r","fieldPath","pathFor","fieldLevel","parentValue","parentComparisonValue","fieldComparisonValue","fieldGroupState","scopedCollapsedPaths","scopedCollapsedFieldsets","inputState","prepareObjectInputState","openPath","defaultCollapsedState","hasValue","duplicateKeyEntries","scopedCollapsedFieldSets","fieldState","prepareArrayOfObjectsInputState","prepareArrayOfPrimitivesInputState","conditionalPropertyContext","preparePrimitiveInputState","enableHiddenCheck","schemaTypeGroupConfig","defaultGroupName","groupHidden","selectedGroup","parentProps","normalizedSchemaMembers","single","fieldsetFieldNames","fieldsetHidden","fieldsetReadOnly","fieldsetMembers","fieldStateWithReadOnly","hasFieldGroups","trimChildPath","prepareArrayOfPrimitivesMember","prepareArrayOfObjectsMember","itemPath","itemLevel","collapsedItemPaths","itemState","itemComparisonValue","prepareFormState","immutableReconcile","_immutableReconcile","WeakSet","parents","prevType","nextType","allEqual","nextItem","useFormState","reconciled","useFormValue","uniquePath","documentValueSubject","documentValue$","toMutationPatches","toMutationPatch","fromMutationPatches","toFormBuilderPatches","notIn","getAnnotationColor","colorManager","getAnnotationAtPath","diffPath","getAnnotationAt","getDiffAtPath","getDiffAt","diffAt","itemDiff","itemMatchesKey","fieldDiff","toValue","visitDiff","visitor","visitArrayDiff","visitObjectDiff","visitStringDiff","getItemDiffIndex","useAnnotationColor","useDiffAnnotationColor","isThenable","useCheckCondition","checkProperty","checkPropertyName","isTrueIsh","useConditionalProperty","checkPropertyKey","isPropertyTruthy","DiffContext","getValueError","valueType","isObjectType","isObjectValue","fieldError","isTypedObject","resolveJSType","getArrayDiffItemType","resolveArrayMemberType","fromType","declared","ANNOTATION_SYMBOLS","CHILD_SYMBOL","DECORATOR_SYMBOLS","EMPTY_BLOCK_SYMBOL","INLINE_SYMBOLS","TRAILING_SPACE_SYMBOL","SEGMENT_START_SYMBOL","dmp","DiffMatchPatch","hasPTMemberType","isPTSchemaType","startMarkSymbols","TextSymbols.DECORATOR_SYMBOLS","TextSymbols.ANNOTATION_SYMBOLS","endMarkSymbols","allSymbols","TextSymbols.INLINE_SYMBOLS","TextSymbols.CHILD_SYMBOL","TextSymbols.SEGMENT_START_SYMBOL","symbolRegex","segmentRegex","isHeader","findChildDiff","childrenDiff","childDiff","getChildSchemaType","cSchemaType","getDecorators","spanSchemaType","isDecorator","blockToSymbolizedText","decoratorMap","annotationMap","inlineMap","returned","spanDiff","findSpanDiffFromChild","textDiff","_isDecorator","createPortableTextDiff","displayValue","allMarkDefs","getAllMarkDefs","markDef","inlines","getInlineObjects","fromText","toText","toPseudoValue","fromPseudoValue","pseudoDiff","buildSegments","hasMoved","dmpDiffs","diff_main","diff_cleanupEfficiency","fromIdx","toIdx","DIFF_EQUAL","DIFF_DELETE","DIFF_INSERT","newSegments","markMatches","matchAll","lastIndex","allChildren","cld","previousChildren","oCld","findAnnotationDiff","markDefKey","markDefs","allDefs","oldDefs","oDef","diffResolvers","Checkbox","rx","stroke","Switch","BooleanFieldDiff","Preview","showToValue","DiffTooltip","FromToArrow","DocumentChangeContext","useDocumentChange","documentChange","useRefValue","getSizeDiff","increase","pct","SizeDiff","solid","positive","FileFieldDiff","fromAsset","toAsset","changedFields","didAssetChange","nestedFields","prevSize","nextSize","pctDiff","roundedPrevSize","roundedNextSize","cardStyles","DiffCard","MetaInfo","FileAssetChange","FromTo","ChangeList","hexToRgba","parseInt","simpleHash","char","getDeviceDpr","ceil","HotspotCropSVG","crop","hotspot","cropColor","hotspotColor","HotspotSVG","CropSVG","mask","rectProps","vectorEffect","ellipseProps","ry","ASSET_FIELDS","NoImagePreview","ImageWrapper","HotspotDiff","ImagePreview","imageError","setImageError","getImageDimensions","assetIsDeleted","imageSource","assetChanged","metaAction","onError","isDefaultCrop","isDefaultHotspot","markRemoved","IMAGE_META_FIELDS","BASE_IMAGE_FIELDS","CARD_STYLES","ImageFieldDiff","fromRef","toRef","assetAnnotation","assetAction","didCropChange","didHotspotChange","didMetaChange","showImageDiff","showMetaChange","imageDiff","NumberWrapper","NumberPreview","NumberFieldDiff","DiffFromTo","previewComponent","Quote","Blockquote","headingSizes","StyledHeading","StyledParagraph","Paragraph","Block","isRemoved","fromStyle","borderStyle","InlineBox","InlineText","PopoverContainer","AnnotationWrapper","AnnnotationWithDiff","popoverElement","setPopoverElement","annotationPath","myPath","myValue","isEditing","handleOpenPopup","handleClickOutside","popoverContent","DecoratorWrapper","decoration","InlineObjectWrapper","InlineObjectWithDiff","FOCUS_TERMINATOR","PopoverContent","diffWithFallback","hasChanged","TextWithDiff","spanSegment","realSeg","rSeg","diffCard","decoratorSymbolsStart","decoratorSymbolsEnd","annotationSymbolsStart","annotationSymbolsEnd","allSymbolsStart","allSymbolsEnd","allDecoratorSymbols","markRegex","ptDiffChild","decoratorTypes","returnedChildren","annotationSegments","isEmptyTextChange","TextSymbols.EMPTY_BLOCK_SYMBOL","childToIndex","segIndex","endedAnnotation","isInline","isMarkStart","isMarkEnd","isChildStart","indexOfSymbol","sym","originChild","objectSchemaType","objectDiff","getChildFromFromValue","renderTextSegment","lastChild","annotationDiff","TextSymbols.TRAILING_SPACE_SYMBOL","activeMarks","renderDecorators","fromPtDiffText","indirectMarksAnnotation","marksDiff","marksAnnotation","marksChanged","ptDiffChildren","ptDiffMatchString","controlString","toTest","aSet","notClosed","lastIndexOf","xor","PTDiff","ptDiff","ReferenceWrapper","ReferencePreview","ReferenceFieldDiff","StringWrapper","StringPreview","StringFieldDiff","DiffString","defaultComponents","showHeader","reference","resolveDiffComponent","parentSchemaType","itType","tryResolve","resolvers","resolver","getChangeVerb","hadPrevValue","hasNextValue","isFieldChange","isGroupChange","isAddedItemDiff","isRemovedItemDiff","isUnchangedDiff","buildChangeList","titlePath","diffComponent","parentSchema","buildObjectChangeList","buildArrayChangeList","getFieldChange","diffContext","changes","fieldSets","buildFieldChange","buildFieldsetChangeList","reduceTitlePaths","fieldFilter","fieldTitlePath","fieldSetHidden","fieldSetTitlePath","changedOrMoved","isPortableText","memberTypes","itemContext","parentDiff","itemTitlePath","attachItemDiff","showIndex","byLength","isAddedAction","flattenChangeNode","changeNode","newSubChanges","cChange","isSubpathOf","subPath","pathSegmentOfCorrectType","diffOptions","diffMatchPatch","undoChange","rootDiff","documentOperations","allChanges","unsetChanges","buildUnsetPatches","unsetChange","buildMovePatches","buildUndoPatches","buildUnsetPatch","concurrentUnsetPaths","previousValue","furthestEmptyAncestor","unsetByEarlierPatch","currentPath","ignorePaths","initialPath","ancestorPath","ancestorValue","updatedIgnorePaths","isStub","getFromItem","insertLocation","before","prevItemKey","prevSegment","after","diffItem","inserts","unsets","stubbedPaths","stubs","hasSets","sets","getParentStubs","stubbed","pathStr","nextSegment","nextIsArrayElement","stub","getStubValue","indexAtPrev","prevSeg","onlyContainsStubs","nextPath","isIgnoredPath","ignorePath","ConditionalReadOnlyContext","useConditionalReadOnly","DiffTooltipWithAnnotation","textTransform","AnnotationItem","allowedAutoPlacements","timeAgo","backgroundColor","borderRadius","card","annotationProp","disableHoverEffect","RoundedCard","AnnotationText","ChangeTitleSegment","created","CreatedTitleSegment","DeletedTitleSegment","MovedTitleSegment","readableIndex","diffAnnotation","textDecoration","indexDiff","indexSymbol","positions","ChangeBreadcrumb","titleSegment","showSegment","DiffErrorBoundary","arguments","getDerivedStateFromError","componentDidCatch","arrowComponents","down","ArrowDownIcon","ArrowRightIcon","arrowComponent","CodeWrapper","pre","Meta","DiffInspectWrapper","isHovering","isInspecting","setIsInspecting","toggleInspect","DiffInspector","MetaLabel","printMeta","jsonify","INLINE_COLUMN_STYLES","BLOCK_COLUMN_STYLES","FLEX_ALIGN","center","layoutStyles","columnStyles","cardClassName","changeVerb","FallbackPreview","FallbackDiff","RevertChangesButton","RevertIcon","ValueError","FieldChangeContainer","DiffBorder","PopoverWrapper","FieldChange","conditionalReadOnly","DiffComponent","isComparingCurrent","confirmRevertOpen","setConfirmRevertOpen","revertHovered","setRevertHovered","revertButtonElement","setRevertButtonElement","isPermissionsLoading","handleRevertChanges","handleRevertChangesConfirm","closeRevertChangesConfirmDialog","handleRevertButtonMouseEnter","handleRevertButtonMouseLeave","useHover","ChangeListWrapper","GroupChangeContainer","GroupChange","groupPath","isNestedInDiff","revertButtonRef","isRevertButtonHovered","docOperations","revertPopoverElement","setRevertPopoverElement","ChangeResolver","isHidden","isReadOnly","NoChanges","confirmRevertAllOpen","setConfirmRevertAllOpen","confirmRevertAllHover","setConfirmRevertAllHover","maybeFlatten","rootChange","revertAllChanges","handleRevertAllChangesClick","handleRevertAllChangesMouseEnter","handleRevertAllChangesMouseLeave","closeRevertAllChangesConfirmDialog","revertAllContainerElement","setRevertAllContainerElement","showFooter","ChangeSegment","DiffStringSegment","segmentIndex","MetaText","DEFAULT_DATE_FORMAT","DEFAULT_TIME_FORMAT","DatetimeWrapper","DatetimePreview","formatDateTime","dateFormat","timeFormat","legacyDateFormat","SlugWrapper","SlugPreview","TIMELINE_LABELS","discardDraft","editDraft","editLive","TIMELINE_ICON_COMPONENTS","AddCircleIcon","PublishIcon","UnpublishIcon","formatTimelineEventLabel","getTimelineEventIconComponent","sinceTimelineProps","topSelection","bottomSelection","disabledBeforeSelection","revTimelineProps","UserAvatarStack","IconWrapper","borderColor","skeleton","isHovered","EventLabel","TIMELINE_ITEM_EVENT_TONE","withinSelection","TimelineItem","isSelectionBottom","isSelectionTop","authorUserIds","isWithinSelection","StackWrapper","MenuWrapper","LOAD_MORE_OFFSET","onLoadMore","rootRef","listRef","loadingElement","setLoadingElement","checkIfLoadIsNeeded","bottomPosition","requestAnimationFrame","DocumentPaneContext","useDocumentPane","documentPane","TimelineMenu","setTimelineRange","setTimelineMode","buttonRef","setButtonRef","menuContent","setMenuContent","selectRev","sinceId","revId","selectSince","loadMoreHistory","revLabel","upperFirst","sinceLabel","openLabel","buttonLabel","collectLatestAuthorAnnotations","authorMap","LoadingContent","ChangesPanel","onHistoryClose","scrollRef","historyState","documentContext","changeAnnotations","borderLeft","useDeskToolSetting","deskToolSettings","settings","VIEW_MODE_PARSED","VIEW_MODE_RAW","VIEW_MODES","lru","HLRU","isExpanded","keyPath","toggleExpanded","selectElement","createRange","removeAllRanges","selectNodeContents","addRange","maybeSelectAll","selectAll","keyCode","isDocumentLike","JSONInspectorWrapper","syntax","constant","Search","TextInput","InspectDialog","onInspectClose","dialogIdPrefix","viewModeId","onViewModeChange","viewMode","setParsedViewMode","setRawViewMode","DocTitle","TabList","Tab","TabPanel","outline","JSONInspector","TextOneLine","ReferenceChangedBanner","routerReferenceId","parentGroup","parentSibling","hasHistoryOpen","pathFromString","referenceInfo","parentRefPathSegment","keyedSegmentIndex","pathGet","handleReloadReference","shouldHide","PermissionCheckBanner","requiredPermission","ReadOnlyIcon","FormView","_handleChange","formState","onSetCollapsedPath","onSetCollapsedFieldSet","onSetActiveFieldGroup","isNonExistent","isActionEnabled","patchEvent","prepareMutationEvent","prepareRebaseEvent","onSubmit","remotePatches","localPatches","DocumentHeaderTabs","activeViewId","tabPanelId","DocumentHeaderTab","MENU_ITEM_TONES","ListItem","truncate","menuItemTone","ValidationList","isValidationErrorMarker","isValidationWarningMarker","isValidationInfoMarker","resolvePathTitle","_error","_warning","_info","BUTTON_PROPS","ValidationMenu","hasErrorMarkers","hasWarningMarkers","hasInfoMarkers","buttonProps","DocumentHeaderTitle","connectionState","subscribed","isActionButton","isMenuButton","DocumentPanelHeader","onMenuAction","onPaneClose","onPaneSplit","unstable_languageFilter","isValidationOpen","setValidationOpen","showTabs","showVersionMenu","reviewChanges","showSplitPaneButton","splitViews","showSplitPaneCloseButton","showPaneGroupCloseButton","languageFilterComponent","SplitVerticalIcon","$disabled","DocumentPanel","footerHeight","isInspectOpen","parentPortal","headerElement","setHeaderElement","headerRect","portalRef","documentScrollElement","setDocumentScrollElement","docPermissionsInput","activeView","splitPanes","formViewHidden","activeViewNode","historical","scrollTo","inspectDialog","getOpErrorTitle","getOpSuccessTitle","IGNORE_OPS","DocumentOperationResults","DIALOG_WIDTH_TO_UI_WIDTH","full","ConfirmDialog","ConfirmDialogContent","cancelButtonIcon","cancelButtonText","confirmButtonIcon","confirmButtonText","onCancel","onConfirm","handleGlobalKeyDown","ModalDialog","modalId","__unstable_hideCloseButton","showCloseButton","PopoverDialog","PopoverDialogContent","ActionStateDialog","unknownModal","ActionMenuButton","actionStates","idPrefix","setActionIndex","setReferenceElement","currentAction","actionState","ActionMenuListItem","onHandle","DocumentStatusBarActionsInner","showMenu","firstActionState","menuActionStates","DocumentStatusBarActions","HistoryStatusBarActions","historyActions","HistoryRestoreAction","RenderBadgeCollectionState","badges","badgeProps","LiveEditBadge","BADGE_TONES","danger","DocumentBadgesInner","badge","DocumentBadges","PublishStatus","lastPublished","lastUpdated","lastPublishedTimeAgo","lastPublishedTime","lastUpdatedTimeAgo","lastUpdatedTime","PlayIcon","StyledMotionPath","motion","Circle","Arrows","Checkmark","Edit","rotateAnimation","keyframes","RotateGroup","syncing","scale","saved","arrows","checkmark","pathLength","edit","AnimatedStatusIcon","variants","animate","ReviewButton","ReviewChangesButton","SYNCING_TIMEOUT","SAVED_TIMEOUT","DocumentSparkline","onHistoryOpen","syncState","showingRevision","rootFlexElement","setRootFlexElement","rootFlexRect","setStatus","timerId","reviewButton","publishStatus","DocumentActionsBox","DocumentStatusBar","actionsBoxRef","KeyboardShortcutResponder","actionsBoxElement","activeIndex","onActionStart","activeAction","matchingStates","isHotkey","matchingState","DocumentActionShortcuts","setActiveIndex","setAtPath","currentTree","getExpandOperations","selectedGroupName","inSelectedGroup","expandArrayPath","foundMember","getHistoryMenuItem","RestoreIcon","isDisabled","getInspectItem","BinaryDocumentIcon","getProductionPreviewItem","previewUrl","EarthAmericasIcon","isSanityDocument","usePreviewUrl","setPreviewUrl","resolveProductionUrl","getInitialValueTemplateOpts","panePayload","structureNodeTemplate","urlTemplate","typeTemplates","DocumentPaneProvider","documentActions","documentBadges","languageFilterResolver","paneRouter","viewsProp","paneOptions","documentIdRaw","initialValueRaw","validationRaw","languageFilter","setFocusPath","timelineMode","nextPresence","inspectOpen","compareValue","viewOlderVersion","newSince","newRev","nextFocusPath","blurredPath","patchRef","handleHistoryClose","handleHistoryOpen","handlePaneClose","handlePaneSplit","toggle","handleKeyUp","handleInspectClose","onSetOpenPath","onSetFieldGroupState","onSetCollapsedFieldSets","handleOnSetCollapsedPath","handleOnSetCollapsedFieldSet","handleSetActiveFieldGroup","formStateRef","handleOpenPath","onKeyUp","DOCUMENT_PANEL_MIN_WIDTH","DOCUMENT_PANEL_INITIAL_MIN_WIDTH","CHANGES_PANEL_MIN_WIDTH","DIALOG_PROVIDER_POSITION","StyledChangeConnectorRoot","DocumentPane","parentSourceName","DocumentPaneInner","usePaneOptions","isDocumentLoaded","providerProps","mergeDocumentType","childParams","routerPanesStateLength","InnerDocumentPane","zOffsets","footerElement","setFooterElement","setActionsBoxElement","footerRect","footerH","documentPanel","changesPanel","onConnectorSetFocus","DialogProvider","NoDocumentTypesScreen","StyledPaneLayout","isSaveHotkey","DeskTool","onPaneChange","setLayoutCollapsed","handleRootCollapse","handleRootExpand","hasSiblings","withoutSiblings","hasDefinedDocumentTypes","_original","isClientError","POLL_INTERVAL","getVisiblePoll$","getDocumentExistence","nonExistant","fetchCrossDatasetReferences","forkJoin","checkDocumentId","crossProjectTokens","totalCount","references","currentDataset","useInternalReferences","referencesClause","totalClause","useCrossDatasetReferences","useReferringDocuments","internalReferences","isInternalReferencesLoading","crossDatasetReferences","isCrossDatasetReferencesLoading","projectIds","crossDatasetReference","TextWithToneStyle","$tone","TextWithTone","dimmed","TimeAgo","PublishedStatus","updatedAt","DraftStatus","getMissingDocumentFallback","getValueWithFallback","assignWith","objValue","srcValue","getPreviewStateObservable","PaneItemPreview","isNumber","sync","componentWillUnmount","ReferencePreviewLink","__unstable_focusRing","ChevronWrapper","CrossDatasetReferencesDetails","details","CrossDatasetReferencesSummary","summary","TableContainer","Table","ReferencesCard","OtherReferenceCount","ConfirmDeleteDialogBody","onReferenceLinkClick","renderPreviewItem","documentCount","projectCount","projectIdList","datasetName","CopyToClipboard","ClipboardIcon","DialogBody","LoadingContainer","ConfirmDeleteDialog","capitalizedAction","showConfirmButton","ConfirmDeleteDialogContainer","DISABLED_REASON_TITLE","NOTHING_TO_DELETE","DeleteAction","deleteOp","isConfirmDialogOpen","setConfirmDialogOpen","handleCancel","handleConfirm","NO_CHANGES","NOT_PUBLISHED","DiscardChangesAction","ResetIcon","NOTHING_TO_DUPLICATE","DuplicateAction","isDuplicating","setDuplicating","uuid","CopyIcon","isRevisionInitialVersion","LIVE_EDIT_ENABLED","ALREADY_PUBLISHED","getDisabledReason","publishedAt","PublishAction","publishState","setPublishState","validationStatus","hasValidationErrors","publishScheduled","setPublishScheduled","isNeitherSyncingNorValidating","hasDraft","doPublish","didPublish","UnpublishAction","initialDocumentBadges","initialDocumentActions","initialLanguageFilter","schemaTypesReducer","schemaTypes","resolveProductionUrlReducer","productionUrl","toolsReducer","schemaTemplatesReducer","schemaTemplates","documentBadgesReducer","documentActionsReducer","newDocumentOptionsResolver","newDocumentOptions","fileAssetSourceResolver","imageAssetSourceResolver","_documentLanguageFilterReducer","resolveDocumentLanguageFilter","ConfigPropertyError","propertyName","flattenConfig","plugins","currentConfig","resolveConfigProperty","inputConfig","reducers","configs","reducer","asyncReducer","pseudoRandomNumber","seed","hashCode","prevHash","currVal","SvgText","bold","createDefaultIcon","rng1","huesWithoutGray","possibleTints","rng2","tint","letters","word","darkened","darken","lightened","lighten","textColor","hasBadContrast","readableColor","textAnchor","alignmentBaseline","dominantBaseline","READABLE","PERMISSION_DENIED","NOT_FOUND","getReferenceInfo","referenceType","pairAvailability$","pairAvailability","draftRef","publishedRef","typeName$","draftTypeName","publishedTypeName","refSchemaType","previewPaths","draftPreview$","publishedPreview$","getCounterpartIds","collatedHits","collatedHit","getExistingCounterparts","referenceSearch","textTerm","searchWeighted","collated","existingCounterpartIds","STATUS_ICONS","AlertStrip","useOnClickOutside","refs","INITIAL_LOADING_STATE","retry","useReferenceInfo","msgSubject","msg$","stream$","previousId","useInterval","useReducer","timeSince","formatDistanceToNow","UnavailableMessage","showTypeLabel","useRootTheme","insufficientPermissions","previewId","previewStub","HelpCircleIcon","OptionPreview","PreviewReferenceValue","refTypeName","ConditionalTooltip","INLINE_BLOCK_STYLE","FULL_WIDTH","CreateButton","createOptions","onCreate","canCreateAny","menuRef","createOption","StyledPopover","ReferenceAutocomplete","contentRef","searchString","NARROW_LAYOUT","WIDE_LAYOUT","$narrow","AutocompleteContainer","handleNewRef","setForwardedRef","inputWrapperRect","instance","StyledPreviewCard","INITIAL_SEARCH_STATE","NO_FILTER","nonNullable","REF_PATH","ReferenceInput","editReferenceLinkComponent","EditReferenceLink","onSearch","searchState","setSearchState","handleCreateNew","h","handleClear","handlePreviewKeyPress","handleAutocompleteKeyDown","getReferenceInfoMemo","loadableReferenceInfo","autocompletePopoverReferenceElementRef","hasFocusAtRef","weakIs","weakShouldBe","hasRef","weakWarningOverride","handleFixStrengthMismatch","referenceExists","handleRemoveStrengthenOnPublish","handleQueryChange","useObservableCallback","inputValue$","handleAutocompleteOpenButtonClick","showWeakRefMismatch","handleCreateButtonKeyDown","OpenLink","isWeakRefToNonexistent","clickOutsideBoundaryRef","autocompletePortalRef","createButtonMenuPortalRef","handleReplaceClick","openButton","ClearIcon","ReplaceIcon","OpenInNewTabIcon","resolveUserDefinedFilter","valuePath","filterParams","useValueRef","StudioReferenceInput","documentRef","documentTypeName","isDocumentLiveEdit","disableNew","handleSearch","adapter.referenceSearch","isQueryError","EditReferenceLink_","_props","_refType","adapter.getReferenceInfo","warnInputTypeNotSupported","once","warnSearchableOptionNotSupported","resolveReferenceInput","MOVING_ITEM_CLASS_NAME","DRAG_HANDLE_ATTRIBUTE","sortableHandle","SortableHandle","sortableItem","SortableElement","sortableContainer","SortableContainer","Sortable","SortableList","KeyCode","Space","Enter","Esc","Up","Left","Right","Down","KEYCODES","lift","drop","up","sortableGrid","helperClass","keyCodes","axis","lockAxis","useDragHandle","shouldCancelStart","sortableList","isDragHandle","bleed","GridItem","SortableListItem","SortableGrid","SortableGridItem","List","isSortable","isGrid","onSortEnd","Item","ItemComponent","isLegacyOptionsItem","resolveValueWithLegacyOptionsSupport","otherItem","it","otherKeys","keyName","inArray","OptionsArrayInput","PureComponent","_element","isChecked","optionValue","getMemberTypeOfItem","optionType","WrappedCheckbox","boxShadow","verticalAlign","Input","font","appearance","fontFamily","fontWeight","regular","boxSizing","Placeholder","TagInput","placeholderProp","setInputValue","setFocused","handleRootPointerDown","isTagElement","isHTMLElement","closest","handleInputBlur","handleInputChange","handleInputFocus","handleInputKeyDown","handleTagRemove","onPointerDown","tagIndex","Tag","TagsArrayInput","tagInputValue","DEFAULT_CONCURRENCY","withMaxConcurrency","func","concurrency","throttler","createThrottler","currentSubscriptions","pendingObservables","scheduleAndWait","check","MAX_CONCURRENT_UPLOADS","uploadSanityAsset","extract","preserveFilename","storeOriginalFilename","creditLine","hashFile","fetchExisting","upload","uploadAsset","uploadImageAsset","uploadFileAsset","observeAssetDoc","observeImageAsset","observeFileAsset","readFile","FileReader","onload","onerror","readAsArrayBuffer","abort","crypto","subtle","arrayBuffer","digest","hexFromBuffer","readFileAsArrayBuffer","SKIP_EXIF_ERROR_RE","EXIF_BUFFER_LENGTH","readExif","buf","exif","rotated","rotate","radians","degrees","translate","flip","canvas","getContext","ORIENTATION_OPS","ORIENTATIONS","DEFAULT_ORIENTATION","THUMB_SIZE","_orient","orientationNumber","orientation","ratio","drawImage","orient","orientationId","toDataURL","loadImage","rotateImage","createObjectURL","UPLOAD_STATUS_KEY","UNSET_UPLOAD_PATCH","createUploadEvent","CLEANUP_EVENT","createInitialUploadEvent","uploadImage","upload$","stage","percent","setPreviewUrl$","exifData","uploadFile","UPLOAD_IMAGE","accepts","UPLOAD_FILE","UPLOAD_TEXT","uploaders","uploader","priority","acceptedFiles","acceptedFilesArray","baseMimeType","endsWith","resolveUploader","is.type","accept","getSchemaTypeTitle","BEFORE","AFTER","arrayInsert","normalizedIdx","findTargetIndex","_arrayApply","_objectApply","isObject","OPERATIONS","SUPPORTED_PATCH_TYPES","_primitiveApply","DMP","diff_match_patch","patch_apply","patch_fromText","_stringApply","applyAll","_applyPatch","withFocusRing","$border","extractPastedFiles","dataTransfer","files","normalizeItems","extractDroppedFiles","webkitGetAsEntry","getAsFile","isDirectory","walk","isFile","createReader","readEntries","entr","imageUrlToBlob","quality","loader","crossOrigin","toBlob","PASTE_INPUT_STYLE","fileTarget","FileTarget","onFiles","onFilesOver","onFilesOut","showPasteInput","setShowPasteInput","pasteInput","enteredElements","emitFiles","handlePaste","clipboardData","convertImagesToFilesAndClearContentEditable","handleDrop","nativeEvent","handleDragOver","handleDragEnter","fileTypes","handleDragLeave","prevShowPasteInput","onDragOver","onDragEnter","onDragLeave","onDrop","targetFormat","isContentEditable","tagName","imageElements","innerHTML","images","imageBlobs","blob","File","DropMessage","hoveringFiles","rejectedFilesCount","multiple","UploadIcon","Overlay","getUploadCandidates","uploadTarget","UploadTarget","onUpload","resolvedUploader","handleFiles","tasks","uploaderCandidates","task","rejected","setHoveringFiles","handleFilesOut","SCROLL_OPTIONS","useScrollIntoViewOnFocusWithin","hasFocusWithin","DragHandleButton","grid","DRAG_HANDLE_PROPS","DragHandle","DragHandleIcon","InsertMenuGroup","pos","InsertAboveIcon","InsertBelowIcon","MenuGroup","insertableType","RowWrapper","dragHandle","RowItem","RegularItem","insertableTypes","handleDuplicate","insertType","DuplicateIcon","DragHandleCard","PresenceFlex","FooterFlex","MissingTypeBox","StyledItemWithMissingType","CellItem","ItemCell","ArrayItem","childPresence","handleRemove","sortable","ArrayInput","_focusArea","uploadSubscriptions","isResolvingInitialValue","handleSortEnd","oldIndex","newIndex","setFocusArea","setToast","handleRemoveNonObjectValues","nonObjects","handleUpload","uploadEvent","typeTitle","nearestSibling","renderMember","hasNonObjectValues","nearestIndexOf","startIdx","searchElement","nearestIndex","predicate","lowerIdx","upperIdx","upper","lower","ItemRow","onEscapeKey","onEnterKey","showValidationStatus","ArrayOfPrimitivesFunctions","ArrayOfPrimitivesInput","_lastAddedIndex","handleItemEnterKey","firstType","handleItemEscapeKey","getSnapshotBeforeUpdate","prevProps","prevFocusPath","focusIndex","querySelector","HTMLInputElement","prevFocusedIndex","restoreSelection","selectionStart","selectionEnd","componentDidUpdate","prevFocusedValue","newInput","setSelectionRange","StudioArrayInput","supportsImageUploads","supportsFileUploads","defaultResolveUploader","StudioArrayOfPrimitivesInput","ArrayFunctionsImpl","PRIMITIVES","isArrayOfPrimitives","isStringArray","isTagsArray","hasOptionsList","resolveArrayInput","OptionsArray","toSelectItem","EMPTY_ITEM","SelectInput","isRadio","itemFromOptionValue","optionValueFromItem","handleSelectChange","RadioSelect","customValidity","Select","RadioSelectItem","Radio","StringInput","resolveStringInput","normalizeRules","getValidationRule","ruleName","rule","ruleSpec","_rules","NumberInput","minRule","onlyPositiveNumber","step","inputMode","resolveNumberInput","CenterAlignedBox","ZeroLineHeightBox","BooleanInput","indeterminate","LayoutSpecificInput","EmailInput","UnknownFields","fieldNames","fieldsLen","handleUnsetClick","UnknownField","onUnsetClick","FieldGroupTabsWrapper","GroupTab","GroupOption","ElementQuery","GroupTabs","shouldAutoFocus","GroupSelect","handleSelect","FieldGroupTabs","ObjectInput","renderedUnknownFields","knownFieldNames","unknownFields","renderObjectMembers","CalendarDay","isCurrentMonth","isToday","toDateString","textAlign","getDate","MONTH_NAMES","WEEK_DAY_NAMES","HOURS_24","ARROW_KEYS","TAIL_WEEKDAYS","getWeekStartsOfMonth","firstDay","startOfMonth","eachWeekOfInterval","lastDayOfMonth","getWeekDaysFromWeekStarts","weekStarts","weekStart","addDays","getWeeksOfMonth","days","getWeek","CalendarMonth","weekday","week","weekIdx","dayIdx","isSameDay","isSameMonth","dayPresets","timePresets","LazyTextInput","checkEvent","handleKeyPress","YearInput","numericValue","PRESERVE_FOCUS_ELEMENT","Calendar","selectTime","onFocusedDateChange","selectedDate","focusedDate","timeStep","setFocusedDate","setFocusedDateMonth","month","setDate","setMonth","handleFocusedMonthChange","moveFocusedDate","addMonths","setFocusedDateYear","year","setYear","handleDateChange","setMinutes","getMinutes","handleMinutesChange","handleHoursChange","mins","focusCurrentWeekDay","currentFocusInCalendarGrid","activeElement","handleNowClick","CalendarMonthSelect","getMonth","CalendarYearSelect","getFullYear","handlePrevMonthClick","handleNextMonthClick","ChevronLeftIcon","handlePrevYearClick","handleNextYearClick","DatePicker","setFocusedDay","nextDate","DateTimeInput","onInputChange","isPickerOpen","setPickerOpen","handleDeactivation","CalendarIcon","FocusLock","onDeactivation","DEFAULT_PLACEHOLDER_TIME","CommonDateTimeInput","deserialize","formatInputValue","parseInputValue","localValue","setLocalValue","handleDatePickerInputChange","nextInputValue","isValid","handleDatePickerChange","parseResult","parseOptions","calendarTodayLabel","isoString","deserialized","enforceTimeStep","dateString","parseISO","minutes","leftOver","VALUE_FORMAT","DateInput","StyledTextArea","TextArea","rows","UrlInput","uriRule","inputType","allowRelative","defaultSlugify","slugifyOpts","speakingurl","slugify","sourceValue","slugifier","useAsync","lastId","wrappedCallback","asyncId","getNewFromSource","SlugInput","sourceField","updateSlug","nextSlug","generateState","handleGenerateSlug","newFromSource","newSlug","isUpdating","FileButton","FileInputButton","idProp","textWeight","PlaceholderText","isFileType","messageIcon","messageText","UploadPlaceholder","browse","WithReferencedAsset","observeAsset","waitPlaceholder","CardWrapper","LeftSection","STALE_UPLOAD_MS","elapsedMs","UploadProgress","uploadState","onStale","filename","urlToFile","xhr","XMLHttpRequest","onloadend","ext","dataURLtoFile","readAsDataURL","responseType","send","base64ToFile","base64Data","dataurl","mime","bstr","u8arr","handleSelectAssetFromSource","assetFromSource","uploadWith","firstAsset","imagePatches","FileInputMenuItem","ActionsMenu","downloadUrl","copyUrl","handleCopyURL","clipboard","writeText","ButtonWrapper","UploadWarning","onClearStale","RatioBox","ImageLoader","UNSAFE_componentWillMount","UNSAFE_componentWillReceiveProps","nextProps","testProperties","foundProperty","getBackingStoreRatio","testProperty","isPointInEllipse","xradius","yradius","isPointInCircle","isPointInRect","getPointAtCircumference","cos","sin","Point","HLine","_left","_right","Corners","Rect","fromEdges","setTopLeft","setSize","setCenter","corners","multiply","grow","delta","shrink","cropRelative","clamp","supportsTouch","makeDragAware","DragAware","domNode","currentPos","isDragging","handleTouchMove","handleDragStart","onDragStart","nextPos","getPos","getPositionRelativeToRect","handleDrag","onDrag","diffPos","handleDragEnd","onDragEnd","handleDragCancel","setDomNode","componentDidMount","onTouchStart","onTouchMove","touches","clientX","clientY","otherPos","DragAwareCanvas","RootContainer","CanvasContainer","OPEN_HAND","CLOSE_HAND","DEFAULT_HOTSPOT","DEFAULT_CROP","MARGIN_PX","CROP_HANDLE_SIZE","HOTSPOT_HANDLE_SIZE","normalizeRect","flippedY","flippedX","checkCropBoundaries","limitToBoundaries","newDelta","getCropCursorForHandle","backingStoreRatio","cropHandleKeys","ToolCanvas","cropping","cropMoving","moving","mousePosition","getScale","inHotspot","utils2d.isPointInEllipse","getHotspotRect","inDragHandle","utils2d.isPointInCircle","getDragHandleCoords","activeCropHandle","getActiveCropHandleFor","inCropRect","utils2d.isPointInRect","getCropRect","emitCrop","emitCropMove","emitMove","emitResize","onChangeEnd","rawCrop","getClampedValue","clientRect","setCanvas","hotspotRect","getCropHandles","inner","handleSize","halfCropHandleSize","cropHandle","topLeft","topRight","bottomLeft","bottomRight","cropHandles","applyHotspotMoveBy","applyCropMoveBy","side","applyHotspotResizeBy","paintHotspot","imageRect","save","drawBackdrop","drawEllipse","clip","drawHole","drawDragHandle","dest","scaleY","beginPath","globalAlpha","arc","strokeStyle","lineWidth","closePath","srcLeft","srcTop","srcWidth","srcHeight","destLeft","destTop","destWidth","destHeight","fillStyle","fillRect","utils2d.getPointAtCircumference","getActualSize","clientHeight","clientWidth","bbox","setLineDash","vline","hline","x2","y2","paintBackground","clearRect","paint","pxratio","paintCropBorder","highlightCropHandles","paintMousePosition","cropRect","actualSize","getCursor","activeCropArea","mouseOverDragHandle","cursors.CLOSE_HAND","mouseoverHotspot","mouseoverCropRect","cursors.OPEN_HAND","draw","currentCursor","newCursor","onMouseMove","currentHotspot","currentCrop","Resize","_canvas","removeChild","getCanvas","appendChild","landscape","targetWidth","targetHeight","ImageTool","calculateStyles","imageAspect","readAspectRatio","containerAspect","readCropAspect","calculateHotSpotCrop","containerHeight","styleFormat","toStylePercentage","decimals","multiplier","sourceAspect","descriptor","viewportAspect","alignment","netWidth","netHeight","outImg","cropRationalAspect","cropAspect","maxHotspotXScale","maxHotspotYScale","maxScale","minFullBleedScale","cropIsTaller","outCrop","letterboxScale","hotspotLeft","hotspotTop","HotspotImageContainer","getCropAspect","srcAspect","origHeight","origWidth","cropWidth","cropHeight","HotspotImage","containerElement","imageElement","setImageElement","handleResize","updateContainerAspect","setContainerElement","alreadyLoaded","naturalWidth","parentNode","getTargetAspectValue","srcAspectRatio","srcSet","alignX","alignY","onLoad","targetAspect","targetStyles","defaultProps","PROBABLY_THE_TINIEST_GIF_EVER","isBlob","INITIAL_STATE","useLoadImage","HOTSPOT_PATH","PREVIEW_ASPECT_RATIOS","DEFAULT_VALUE","LoadStatus","overflowWrap","ImageToolInput","isImageLoading","handleChangeEnd","cropField","hotspotField","ButtonContainer","MenuActionsWrapper","ImageActionsMenu","showEdit","isMenuOpen","onMenuOpen","menuElement","setMenuRef","menuButtonRef","setMenuButtonRef","CropIcon","shouldFocus","MAX_DEFAULT_HEIGHT","SpinnerWrapper","drag","light","FlexOverlay","getImageSize","imageUrlParams","isRejected","setLoaded","acceptTone","maxHeightToPx","documentElement","imageWidth","imageHeight","imageRatio","renderedImageHeight","rootHeight","onLoadChange","OverlayComponent","cardTone","HoverIcon","HoverText","InvalidImageWarning","onClearValue","passThrough","ASSET_FIELD_PATH","ASSET_IMAGE_MENU_POPOVER","ImageInput","_assetElementRef","uploadSubscription","isUploading","selectedAssetSource","isStale","setFocusElement","getUploadOptions","assetDocumentProps","cancelUpload","clearUploadStatus","handleRemoveButtonClick","allKeys","remainingKeys","removeKeys","valueIsArrayElement","handleFieldChange","eventIsUnsettingLastFilledField","parentPathSegment","handleOpenDialog","handleCloseDialog","handleFilesOver","handleCancelUpload","handleClearUploadState","handleStaleUpload","handleClearField","handleSelectFiles","uploadFirstAccepted","handleSelectImageFromAssetSource","handleAssetSourceClosed","renderHotspotInput","hotspotInputProps","withImageTool","isImageToolEnabled","isImageSource","_assetPath","renderAssetMenu","showAdvancedEditButton","browseMenuItem","assetSource","extension","forceDownload","renderBrowser","renderUploadPlaceholder","renderUploadState","elementHeight","renderAssetSource","selectionType","getFileTone","renderAsset","hasValueOrUpload","StudioImageInput","sourcesFromSchema","CardOverlay","formatBytes","bytes","dm","parseFloat","FileDetails","FileSkeleton","LabelSkeleton","InvalidFileWarning","FileInput","_focusRef","isArrayElement","handleSelectFileFromAssetSource","handleFileTargetFocus","fileInfo","_assetFieldPath","hasFileTargetFocus","isFileSource","StudioFileInput","fileConfig","retryAttempt","setRetryAttempt","CrossDatasetReferencePreview","showStudioUrlIcon","hasStudioUrl","previewMedia","withOptions","LaunchIcon","toEntry","CrossDatasetReferenceInput","refDoc","handleAutocompleteFocus","studioUrl","crossDatasetType","REQUEST_TAG_BASE","createGetReferenceInfo","docType","resolvedDoc","fetchDocumentAvailability","publishedPreview","useCrossProjectToken","StudioCrossDatasetReferenceInput","isCurrentProject","loadableToken","crossDatasetClient","defaultInputs","resolveComponentFromTypeVariants","getTypeChain","visited","defaultResolveInputComponent","componentFromTypeVariants","typeChain","deduped","subType","NoopField","ObjectOrArrayField","ImageOrFileField","defaultResolveFieldComponent","defaultResolveItemComponent","defaultResolvePreviewComponent","defaultRenderField","defaultRenderInput","defaultRenderItem","defaultRenderPreview","_collectMiddleware","middlewares","plugin","_createRenderField","_createRenderInput","_createRenderItem","_createRenderPreview","previewProps","normalizeLogo","normalizeIcon","workspaceOptions","nestedSources","resolvedSources","schemaValidationProblemGroups","schemaErrors","source$","resolveSource","workspaceSummary","getBifurClient","bifurVersionedClient","fromUrl","clients","wrappedClient","__proto__","initialTemplatesResponses","templateMap","creationContext","templateResponses","templateErrors","defaultSubtitle","partialContext"],"mappings":"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"}