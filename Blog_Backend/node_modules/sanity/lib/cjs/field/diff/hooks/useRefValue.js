"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useRefValue = useRefValue;

var _react = require("react");

var _hooks = require("../../../hooks");

var _studioClient = require("../../../studioClient");

function useRefValue(refId) {
  const [value, setValue] = (0, _react.useState)(undefined);
  const client = (0, _hooks.useClient)(_studioClient.DEFAULT_STUDIO_CLIENT_OPTIONS);
  (0, _react.useEffect)(() => {
    if (!refId) {
      return undefined;
    }

    const subscription = client.observable.getDocument(refId).subscribe(setValue);
    return () => {
      subscription.unsubscribe();
    };
  }, [client, refId]); // Always return undefined in the case of a falsey ref to prevent bug
  // when going from an ID to an undefined state

  return refId ? value : undefined;
}