'use strict';

var lodash = require('lodash');

function validatePlugin(pluginResult) {
  const messages = ["projectId" in pluginResult && "`projectId` not allowed in plugin configuration", "dataset" in pluginResult && "`dataset` not allowed in plugin configuration"].filter(lodash.isString);
  if (messages.length) throw new Error("Invalid plugin configuration:\n".concat(messages.map(message => "\t".concat(message)).join("\n")));
}

function createPlugin(arg) {
  if (typeof arg === "function") {
    const pluginFactory = arg;
    return options => {
      const result = pluginFactory(options);
      validatePlugin(result);
      return result;
    };
  }

  validatePlugin(arg);
  return () => arg;
}

exports.createPlugin = createPlugin;
//# sourceMappingURL=_createPlugin-904247f9.cjs.map
