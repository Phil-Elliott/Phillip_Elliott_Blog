{"version":3,"file":"_prepareConfig-2f1df9bf.cjs","sources":["../src/version.ts","../src/schema/types/slug.ts","../src/schema/types/geopoint.ts","../src/schema/types/imageCrop.ts","../src/schema/types/imageHotspot.ts","../src/schema/types/assetSourceData.ts","../src/schema/types/imageAsset.ts","../src/schema/types/imagePalette.ts","../src/schema/types/imagePaletteSwatch.ts","../src/schema/types/imageDimensions.ts","../src/schema/types/imageMetadata.ts","../src/schema/types/fileAsset.ts","../src/schema/createSchema.ts","../src/datastores/cors/CorsOriginError.ts","../src/util/useUnique.ts","../src/util/createHookFromObservableFactory.ts","../src/util/isNonNullable.ts","../src/util/draftUtils.ts","../src/util/isRecord.ts","../src/util/isString.ts","../src/util/resizeObserver.ts","../src/util/schemaUtils.ts","../src/util/searchUtils.ts","../src/util/useLoadable.ts","../src/util/useThrottledCallback.ts","../src/datastores/authStore/storage.ts","../src/datastores/authStore/createBroadcastChannel.ts","../src/datastores/authStore/sessionId.ts","../src/datastores/authStore/providerLogos.tsx","../src/datastores/authStore/createLoginComponent.tsx","../src/datastores/authStore/createAuthStore.ts","../src/datastores/connection-status/utils/catchWithCount.ts","../src/datastores/connection-status/connection-status-store.ts","../src/datastores/crossProjectToken.ts","../src/components/collapseMenu/CollapseOverflowMenu.tsx","../src/components/collapseMenu/ObserveElement.tsx","../src/components/collapseMenu/CollapseMenuDivider.tsx","../src/components/collapseMenu/CollapseMenu.tsx","../src/components/collapseMenu/CollapseMenuButton.tsx","../src/components/rovingFocus/useRovingFocus.ts","../src/studio/colorScheme.tsx","../src/router/RouterContext.ts","../src/router/useRouter.ts","../src/router/useLink.ts","../src/router/useIntentLink.ts","../src/router/IntentLink.tsx","../src/router/Link.tsx","../src/router/utils/hasOwn.ts","../src/router/utils/isEmpty.ts","../src/router/RouteScope.tsx","../src/router/RouterProvider.tsx","../src/router/useStateLink.ts","../src/router/StateLink.tsx","../src/router/_parseRoute.ts","../src/router/utils/debug.ts","../src/router/utils/arrayify.ts","../src/router/_resolveStateFromPath.ts","../src/router/_findMatchingRoutes.ts","../src/router/_resolvePathFromState.ts","../src/router/utils/jsonParamsEncoding.ts","../src/router/utils/paramsEncoding.ts","../src/router/route.ts","../src/router/useRouterState.ts","../src/router/withRouter.tsx","../src/studio/components/navbar/tools/ToolLink.tsx","../src/studio/components/navbar/tools/ToolCollapseMenu.tsx","../src/studio/components/navbar/tools/ToolVerticalMenu.tsx","../src/studio/components/navbar/tools/ToolMenu.tsx","../src/user-color/context.ts","../src/user-color/hooks.ts","../src/user-color/manager.ts","../src/user-color/provider.tsx","../src/datastores/createMultiKeyWeakMap.ts","../src/datastores/ResourceCacheProvider.tsx","../src/studio/activeWorkspaceMatcher/ActiveWorkspaceMatcherContext.ts","../src/studio/workspaces/WorkspacesContext.ts","../src/studio/workspaces/useWorkspaces.ts","../src/studio/workspaces/WorkspacesProvider.tsx","../src/studio/activeWorkspaceMatcher/matchWorkspace.ts","../src/studio/activeWorkspaceMatcher/ActiveWorkspaceMatcher.tsx","../src/studio/activeWorkspaceMatcher/useActiveWorkspace.ts","../src/studio/StudioThemeProvider.tsx","../src/util/globalScope.ts","../src/studio/screens/LoadingScreen.tsx","../src/studio/screens/schemaErrors/SchemaProblemGroups.tsx","../src/studio/screens/schemaErrors/utils.ts","../src/studio/screens/schemaErrors/reportWarnings.ts","../src/studio/screens/schemaErrors/SchemaErrorsScreen.tsx","../src/studio/screens/NotFoundScreen.tsx","../src/studio/components/navbar/workspace/WorkspacePreview.tsx","../src/studio/components/navbar/workspace/hooks/useWorkspaceAuthStates.ts","../src/studio/components/navbar/workspace/constants.ts","../src/studio/components/navbar/workspace/WorkspaceAuth/Layout.tsx","../src/studio/components/navbar/workspace/WorkspaceAuth/WorkspaceAuth.tsx","../src/studio/components/navbar/workspace/WorkspaceMenuButton.tsx","../src/studio/screens/AuthenticateScreen.tsx","../src/studio/screens/ConfigErrorsScreen.tsx","../src/datastores/authStore/providerTitle.ts","../src/studio/screens/NotAuthenticatedScreen.tsx","../src/studio/screens/CorsOriginErrorScreen.tsx","../src/studio/StudioErrorBoundary.tsx","../src/studio/workspaceLoader/ErrorMessage.tsx","../src/studio/router/router.ts","../src/studio/router/util/getOrderedTools.ts","../src/studio/router/helpers.ts","../src/studio/router/routerEvent.ts","../src/studio/workspace.tsx","../src/studio/source.tsx","../src/studio/workspaceLoader/WorkspaceLoader.tsx","../src/studio/AuthBoundary.tsx","../src/studio/constants.ts","../src/studio/StudioProvider.tsx","../src/environment/index.ts","../src/components/UserAvatar.tsx","../src/studio/components/navbar/userMenu/LoginProviderLogo.tsx","../src/studio/components/navbar/userMenu/UserMenu.tsx","../src/components/previews/constants.ts","../src/components/previews/_common/Media.styled.ts","../src/components/previews/_common/Media.tsx","../src/components/previews/helpers.tsx","../src/components/previews/general/DefaultPreview.tsx","../src/components/previews/general/DetailPreview.styled.ts","../src/components/previews/general/DetailPreview.tsx","../src/components/progress/CircularProgress.tsx","../src/components/progress/LinearProgress.tsx","../src/components/previews/general/MediaPreview.styled.ts","../src/components/previews/general/MediaPreview.tsx","../src/components/previews/portableText/BlockImagePreview.styled.tsx","../src/components/previews/portableText/BlockImagePreview.tsx","../src/components/previews/portableText/BlockPreview.tsx","../src/components/previews/portableText/InlinePreview.styled.tsx","../src/components/previews/portableText/InlinePreview.tsx","../src/components/previews/template/TemplatePreview.tsx","../src/components/InsufficientPermissionsMessage.tsx","../src/studio/components/navbar/NewDocumentButton.tsx","../src/studio/components/StatusButton.tsx","../src/studio/components/navbar/presence/PresenceMenuItem.tsx","../src/studio/components/navbar/presence/PresenceMenu.tsx","../src/studio/components/navbar/NavDrawer.tsx","../src/search/common/utils.ts","../src/search/common/tokenize.ts","../src/search/weighted/applyWeights.ts","../src/search/weighted/createWeightedSearch.ts","../src/search/search.ts","../src/studioClient.ts","../src/search/useDocumentSearchResults.ts","../src/studio/components/navbar/search/SearchFullscreenContent.tsx","../src/components/PreviewCard.tsx","../src/presence/DocumentPreviewPresence.tsx","../src/presence/constants.ts","../src/presence/utils.ts","../src/presence/FieldPresence.styled.tsx","../src/presence/context.tsx","../src/presence/PresenceTooltip.tsx","../src/components/react-track-elements/createUseReporter.tsx","../src/components/react-track-elements/createStore.ts","../src/components/react-track-elements/createScope.tsx","../src/presence/overlay/tracker.ts","../src/presence/FieldPresence.tsx","../src/presence/overlay/intersectionObserver.ts","../src/presence/overlay/WithIntersection.tsx","../src/presence/overlay/RegionsWithIntersections.styled.tsx","../src/presence/overlay/RegionsWithIntersections.tsx","../src/presence/overlay/StickyOverlay.tsx","../src/presence/overlay/PresenceOverlay.tsx","../src/preview/components/_extractUploadState.ts","../src/preview/components/_previewComponents.ts","../src/preview/components/SanityDefaultPreview.tsx","../src/preview/useDocumentPreview.ts","../src/preview/streams/resize.ts","../src/preview/streams/scroll.ts","../src/preview/streams/orientationChange.ts","../src/preview/streams/intersectionObservableFor.ts","../src/preview/streams/visibilityChange.ts","../src/preview/useVisibility.ts","../src/preview/components/_constants.ts","../src/preview/components/_resolvePreviewComponent.ts","../src/preview/components/SanityPreview.tsx","../src/preview/utils/getPreviewPaths.ts","../src/preview/constants.tsx","../src/preview/utils/portableText.ts","../src/preview/utils/keysOf.ts","../src/preview/utils/prepareForPreview.ts","../src/preview/utils/props.ts","../src/preview/createPathObserver.ts","../src/preview/createPreviewObserver.ts","../src/preview/utils/debounceCollect.ts","../src/preview/utils/optimizeQuery.ts","../src/preview/utils/hasEqualFields.ts","../src/preview/utils/isUniqueBy.ts","../src/preview/observeFields.ts","../src/preview/availability.ts","../src/preview/documentPair.ts","../src/preview/documentPreviewStore.ts","../src/studio/components/navbar/search/SearchItem.tsx","../src/studio/components/navbar/search/SearchPopoverContent.tsx","../src/studio/components/navbar/search/SearchField.tsx","../src/studio/components/navbar/changelog/portableTextContent/listStyles.tsx","../src/studio/components/navbar/changelog/portableTextContent/PortableTextContent.styles.ts","../src/studio/components/navbar/changelog/portableTextContent/PortableTextContent.tsx","../src/studio/components/navbar/changelog/ChangelogItem.tsx","../src/studio/components/navbar/changelog/ChangelogList.tsx","../src/studio/components/navbar/changelog/ChangelogDialog.tsx","../src/module-status/moduleStatus.ts","../src/module-status/hooks.ts","../src/studio/components/navbar/changelog/ChangelogAccordion.tsx","../src/studio/components/navbar/changelog/ChangelogButton.tsx","../src/studio/components/navbar/configIssues/ConfigIssuesButton.tsx","../src/studio/components/navbar/Navbar.tsx","../src/studio/screens/NoToolsScreen.tsx","../src/studio/screens/ToolNotFoundScreen.tsx","../src/studio/StudioLayout.tsx","../src/hooks/useClient.ts","../src/hooks/useDataset.ts","../src/hooks/useProjectId.ts","../src/hooks/useSchema.ts","../src/hooks/useTemplates.ts","../src/hooks/useTimeAgo.ts","../src/hooks/useConnectionState.ts","../src/hooks/useDocumentOperation.ts","../src/hooks/useDocumentOperationEvent.ts","../src/hooks/useEditState.ts","../src/hooks/useSyncState.ts","../src/hooks/useValidationStatus.ts","../src/datastores/document/buffered-doc/createObservableBufferedDocument.ts","../src/datastores/document/buffered-doc/createBufferedDocument.ts","../src/datastores/document/getPairListener.ts","../src/datastores/document/document-pair/checkoutPair.ts","../src/datastores/document/utils/createMemoizer.ts","../src/datastores/document/document-pair/memoizedPair.ts","../src/datastores/document/document-pair/snapshotPair.ts","../src/datastores/document/document-pair/operationArgs.ts","../src/datastores/document/document-pair/utils/isLiveEditEnabled.ts","../src/datastores/document/document-pair/editState.ts","../src/datastores/document/document-pair/operations/delete.ts","../src/datastores/document/document-pair/operations/publish.ts","../src/datastores/document/document-pair/operations/patch.ts","../src/datastores/document/document-pair/operations/commit.ts","../src/datastores/document/document-pair/operations/discardChanges.ts","../src/datastores/document/document-pair/operations/unpublish.ts","../src/datastores/document/document-pair/operations/duplicate.ts","../src/datastores/document/document-pair/operations/restore.ts","../src/datastores/document/document-pair/consistencyStatus.ts","../src/datastores/document/document-pair/operationEvents.ts","../src/datastores/document/document-pair/operations/index.ts","../src/datastores/document/document-pair/remoteSnapshots.ts","../src/datastores/document/document-pair/validation.ts","../src/datastores/document/document-pair/documentEvents.ts","../src/datastores/document/document-pair/editOperations.ts","../src/datastores/document/listenQuery.ts","../src/datastores/document/resolveTypeForDocument.ts","../src/templates/util/isRecord.ts","../src/templates/validate.ts","../src/templates/util/deepAssign.ts","../src/templates/resolve.ts","../src/datastores/document/initialValue/initialValue.ts","../src/datastores/document/document-store.ts","../src/datastores/document/hooks/useDocumentType.ts","../src/datastores/document/hooks/useDocumentValues.ts","../src/datastores/user/hooks.ts","../src/datastores/user/userStore.ts","../src/datastores/document/useInitialValue.ts","../src/datastores/document/useResolveInitialValueForType.ts","../src/datastores/grants/documentPairPermissions.ts","../src/datastores/grants/documentValuePermissions.ts","../src/datastores/grants/templatePermissions.ts","../src/datastores/debugParams/debugParams.ts","../src/datastores/grants/debug/exampleGrants.ts","../src/datastores/grants/debug/roleGrants.ts","../src/datastores/grants/grantsStore.ts","../src/datastores/history/history/getJsonStream.ts","../src/datastores/history/history/Aligner.ts","../src/datastores/history/history/Reconstruction.ts","../src/datastores/history/history/TimelineController.ts","../src/datastores/history/history/utils.ts","../src/datastores/history/history/diffValue.ts","../src/datastores/history/history/TwoEndedArray.ts","../src/datastores/history/history/chunker.ts","../src/datastores/history/history/Timeline.ts","../src/datastores/history/createHistoryStore.ts","../src/datastores/presence/mock-events.ts","../src/datastores/presence/message-transports/bifurTransport.ts","../src/datastores/presence/presence-store.ts","../src/datastores/presence/useGlobalPresence.tsx","../src/datastores/presence/useDocumentPresence.tsx","../src/datastores/project/projectStore.ts","../src/datastores/settings/backends/localStorage.ts","../src/datastores/settings/backends/memory.ts","../src/datastores/settings/backends/resolve.ts","../src/datastores/settings/settingsStore.ts","../src/datastores/datastores.ts","../src/form/components/FullscreenSpinner.tsx","../src/components/WithReferringDocuments.tsx","../src/form/components/SpinnerWithText.tsx","../src/form/studio/DefaultAssetSource/DocumentList.tsx","../src/form/studio/DefaultAssetSource/ConfirmMessage.tsx","../src/form/studio/DefaultAssetSource/AssetUsageDialog.tsx","../src/form/studio/DefaultAssetSource/AssetMenu.tsx","../src/form/studio/DefaultAssetSource/AssetThumb.tsx","../src/form/studio/DefaultAssetSource/prettyBytes.ts","../src/form/studio/DefaultAssetSource/utils/mimeType.ts","../src/form/studio/DefaultAssetSource/AssetRow.tsx","../src/form/studio/DefaultAssetSource/TableList.tsx","../src/form/studio/DefaultAssetSource/DefaultSource.tsx","../src/form/studio/DefaultAssetSource/index.ts","../src/form/defaults.ts","../src/studio/workspaces/WorkspaceValidationError.ts","../src/studio/workspaces/validateWorkspaces.ts","../src/desk/actions/actionId.ts","../src/desk/actions/HookStateContainer.ts","../src/desk/actions/requestIdleCallback.ts","../src/desk/actions/GetHookCollectionState.tsx","../src/desk/actions/RenderActionCollectionState.tsx","../src/desk/components/pane/PaneContextMenuButton.tsx","../src/components/transitional/ImperativeToast.ts","../src/components/zOffsets/defaults.ts","../src/components/zOffsets/ZIndexContext.ts","../src/components/zOffsets/useZIndex.ts","../src/components/transitional/LegacyLayerProvider.tsx","../src/desk/components/pane/constants.ts","../src/desk/components/pane/PaneContext.ts","../src/desk/components/pane/PaneLayoutContext.ts","../src/desk/components/pane/usePaneLayout.ts","../src/desk/components/pane/PaneDivider.tsx","../src/desk/components/pane/Pane.tsx","../src/desk/components/pane/usePane.ts","../src/desk/components/pane/PaneContent.styles.tsx","../src/desk/components/pane/PaneContent.tsx","../src/desk/components/pane/PaneFooter.styles.tsx","../src/desk/components/pane/PaneFooter.tsx","../src/desk/components/pane/PaneHeader.styles.tsx","../src/desk/components/pane/PaneHeader.tsx","../src/desk/components/pane/PaneLayout.styles.tsx","../src/desk/components/pane/helpers/_calcPaneResize.ts","../src/desk/components/pane/helpers/_getDOMPath.ts","../src/desk/components/pane/helpers/_sortElements.ts","../src/desk/components/pane/paneLayoutController.ts","../src/desk/components/pane/PaneLayout.tsx","../src/desk/components/IntentButton.tsx","../src/desk/components/paneHeaderActions/InsufficientPermissionsMessageTooltip.tsx","../src/desk/components/paneHeaderActions/PaneHeaderCreateButton.tsx","../src/desk/components/paneHeaderActions/PaneHeaderActions.tsx","../src/desk/DeskToolContext.ts","../src/desk/structureBuilder/SerializeError.ts","../src/desk/structureBuilder/util/getExtendedProjection.ts","../src/desk/structureBuilder/Sort.ts","../src/desk/structureBuilder/MenuItem.ts","../src/desk/structureBuilder/MenuItemGroup.ts","../src/desk/structureBuilder/util/validateId.ts","../src/desk/structureBuilder/views/View.ts","../src/desk/structureBuilder/views/ComponentView.ts","../src/desk/structureBuilder/views/FormView.ts","../src/desk/structureBuilder/views/index.ts","../src/desk/structureBuilder/Document.ts","../src/desk/structureBuilder/Layout.ts","../src/desk/structureBuilder/Intent.ts","../src/desk/structureBuilder/InitialValueTemplateItem.ts","../src/desk/structureBuilder/GenericList.ts","../src/desk/structureBuilder/DocumentList.ts","../src/desk/constants.ts","../src/desk/structureResolvers/PaneResolutionError.ts","../src/desk/structureResolvers/assignId.ts","../src/desk/structureResolvers/memoBind.ts","../src/desk/structureResolvers/createPaneResolver.ts","../src/desk/useDeskTool.ts","../src/desk/structureResolvers/createResolvedPaneNodeStream.ts","../src/desk/structureResolvers/useResolvedPanes.ts","../src/desk/components/Delay.tsx","../src/desk/components/deskTool/StructureError.tsx","../src/desk/components/paneRouter/PaneRouterContext.tsx","../src/desk/components/paneRouter/BackLink.tsx","../src/desk/components/paneRouter/ChildLink.tsx","../src/desk/components/paneRouter/ReferenceChildLink.tsx","../src/desk/components/paneRouter/ParameterizedLink.tsx","../src/desk/components/paneRouter/PaneRouterProvider.tsx","../src/desk/components/paneRouter/usePaneRouter.ts","../src/desk/panes/unknown/UnknownPaneType.tsx","../src/desk/panes/loading/getWaitMessages.ts","../src/desk/panes/loading/LoadingPane.tsx","../src/desk/panes/DeskToolPane.tsx","../src/desk/panes/error/ErrorPane.tsx","../src/components/changeIndicators/constants.ts","../src/components/changeIndicators/tracker.tsx","../src/components/changeIndicators/ConnectorContext.ts","../src/components/changeIndicators/ChangeFieldWrapper.tsx","../src/form/utils/empty.ts","../src/components/changeIndicators/ElementWithChangeBar.styled.tsx","../src/components/changeIndicators/ElementWithChangeBar.tsx","../src/components/changeIndicators/ChangeIndicator.tsx","../src/components/changeIndicators/ChangeIndicatorContext.ts","../src/components/scroll/scrollContext.ts","../src/components/scroll/hooks.ts","../src/components/scroll/scrollContainer.tsx","../src/components/scroll/scrollMonitor.tsx","../src/components/changeIndicators/helpers/findMostSpecificTarget.ts","../src/components/changeIndicators/helpers/isChangeBar.ts","../src/components/changeIndicators/helpers/scrollUtils.ts","../src/components/changeIndicators/helpers/scrollIntoView.ts","../src/components/changeIndicators/helpers/getOffsetsTo.ts","../src/components/changeIndicators/overlay/connectorPath.ts","../src/components/changeIndicators/overlay/mapConnectorToLine.ts","../src/components/changeIndicators/overlay/ClampedRect.tsx","../src/components/changeIndicators/overlay/Connector.styled.tsx","../src/components/changeIndicators/overlay/Connector.tsx","../src/components/changeIndicators/overlay/useResizeObserver.ts","../src/components/changeIndicators/overlay/ConnectorsOverlay.styled.tsx","../src/components/changeIndicators/overlay/ConnectorsOverlay.tsx","../src/components/changeIndicators/overlay/ChangeConnectorRoot.tsx","../src/form/studio/contexts/reviewChanges/ReviewChangesContext.ts","../src/form/studio/contexts/ReferenceInputOptions.tsx","../src/form/patch/PatchChannel.ts","../src/form/patch/patch.ts","../src/form/patch/PatchEvent.ts","../src/form/FormBuilderContext.ts","../src/form/useFormBuilder.ts","../src/form/inputs/arrays/common/ArrayFunctions.tsx","../src/form/inputs/PortableText/_legacyDefaultParts/Markers.tsx","../src/form/inputs/PortableText/_legacyDefaultParts/CustomMarkers.tsx","../src/form/studio/contexts/FormCallbacks.tsx","../src/form/studio/contexts/Presence.tsx","../src/form/studio/contexts/Validation.tsx","../src/form/FormBuilderProvider.tsx","../src/form/studio/StudioFormBuilderProvider.tsx","../src/form/studio/StudioFormBuilder.tsx","../src/form/utils/path.ts","../src/form/members/fields/asserters.ts","../src/field/paths/helpers.ts","../src/form/components/ActivateOnFocus/ActivateOnFocus.styles.tsx","../src/form/components/ActivateOnFocus/ActivateOnFocus.tsx","../src/form/utils/asserters.ts","../src/form/hooks/usePrevious.ts","../src/form/hooks/useDidUpdate.ts","../src/form/inputs/arrays/common/randomKey.ts","../src/form/utils/ensureKey.ts","../src/form/members/fields/ArrayOfObjectsField.tsx","../src/form/members/fields/PrimitiveField.tsx","../src/form/utils/createProtoValue.ts","../src/form/members/fields/ObjectField.tsx","../src/form/members/fields/ArrayOfPrimitivesField.tsx","../src/form/members/MemberField.tsx","../src/form/components/Alert.tsx","../src/form/components/Details.tsx","../src/form/inputs/InvalidValueInput/converters.ts","../src/form/inputs/InvalidValueInput/UntypedValueInput.tsx","../src/form/inputs/InvalidValueInput/InvalidValueInput.tsx","../src/form/components/formField/FormFieldValidationStatus.tsx","../src/form/components/formField/FormFieldHeaderText.tsx","../src/form/components/formField/FormFieldHeader.tsx","../src/form/components/formField/FormField.tsx","../src/form/components/formField/styles.ts","../src/form/components/formField/FormFieldSetLegend.tsx","../src/form/components/formField/FormFieldSet.tsx","../src/form/components/formField/FormFieldStatus.tsx","../src/form/inputs/arrays/errors/MissingKeysAlert.tsx","../src/form/inputs/arrays/errors/DuplicateKeysAlert.tsx","../src/form/members/MemberFieldError.tsx","../src/form/members/MemberFieldset.tsx","../src/form/inputs/arrays/ArrayOfObjectsInput/item/constants.ts","../src/form/inputs/arrays/ArrayOfObjectsInput/item/helpers.ts","../src/form/members/items/ArrayOfObjectsItem.tsx","../src/form/inputs/arrays/ArrayOfPrimitivesInput/getEmptyValue.ts","../src/form/members/items/ArrayOfPrimitivesItem.tsx","../src/form/inputs/arrays/ArrayOfObjectsInput/item/ItemWithMissingType.tsx","../src/form/members/MemberItemError.tsx","../src/form/members/ObjectMembers.tsx","../src/form/FormInput.tsx","../src/form/inputs/PortableText/callbacks/insertCallback.ts","../src/form/inputs/PortableText/callbacks/setCallback.ts","../src/form/inputs/PortableText/callbacks/unsetCallback.ts","../src/form/inputs/PortableText/BlockActions.tsx","../src/form/inputs/PortableText/_common/ReviewChangesHighlightBlock.tsx","../src/form/inputs/PortableText/_common/StyledChangeIndicatorWithProvidedFullPath.tsx","../src/form/inputs/PortableText/_helpers.ts","../src/form/inputs/PortableText/hooks/useMemberValidation.tsx","../src/form/inputs/PortableText/contexts/PortableTextMarkers.tsx","../src/form/inputs/PortableText/hooks/usePortableTextMarkers.tsx","../src/form/inputs/PortableText/contexts/PortableTextMembers.tsx","../src/form/inputs/PortableText/hooks/usePortableTextMembers.tsx","../src/form/utils/is.ts","../src/form/inputs/PortableText/object/BlockObjectPreview.tsx","../src/form/inputs/PortableText/object/BlockObject.styles.ts","../src/form/inputs/PortableText/object/BlockObject.tsx","../src/form/inputs/PortableText/object/InlineObjectToolbarPopover.tsx","../src/form/inputs/PortableText/object/InlineObject.tsx","../src/form/inputs/PortableText/text/AnnotationToolbarPopover.tsx","../src/form/inputs/PortableText/text/Annotation.tsx","../src/form/inputs/PortableText/text/constants.ts","../src/form/inputs/PortableText/text/Decorator.tsx","../src/form/inputs/PortableText/text/helpers.ts","../src/form/inputs/PortableText/text/TextBlock.styles.ts","../src/form/inputs/PortableText/text/textStyles.tsx","../src/form/inputs/PortableText/text/TextBlock.tsx","../src/form/inputs/PortableText/toolbar/CustomIcon.tsx","../src/form/inputs/PortableText/toolbar/helpers.tsx","../src/form/inputs/PortableText/toolbar/hooks.ts","../src/form/inputs/PortableText/toolbar/ActionMenu.tsx","../src/form/inputs/PortableText/toolbar/BlockStyleSelect.tsx","../src/form/inputs/PortableText/toolbar/InsertMenu.tsx","../src/form/inputs/PortableText/toolbar/Toolbar.tsx","../src/form/inputs/PortableText/Editor.styles.tsx","../src/form/inputs/PortableText/hooks/useSpellCheck.tsx","../src/form/inputs/PortableText/hooks/useScrollSelectionIntoView.tsx","../src/form/inputs/PortableText/Editor.tsx","../src/form/components/withFocusRing/helpers.ts","../src/form/inputs/PortableText/Compositor.styles.tsx","../src/form/inputs/PortableText/hooks/useHotKeys.tsx","../src/form/inputs/PortableText/object/helpers.ts","../src/form/inputs/PortableText/object/renderers/DefaultEditDialog.tsx","../src/form/inputs/PortableText/object/renderers/debug.ts","../src/form/inputs/PortableText/object/renderers/PopoverEditDialog.tsx","../src/form/inputs/PortableText/object/renderers/ObjectEditModal.tsx","../src/form/inputs/PortableText/hooks/useScrollToOpenedMember.tsx","../src/form/inputs/PortableText/Compositor.tsx","../src/form/inputs/PortableText/InvalidValue.tsx","../src/form/inputs/PortableText/usePatches.ts","../src/form/inputs/PortableText/VisibleOnFocusButton.tsx","../src/form/inputs/PortableText/PortableTextInput.tsx","../src/form/types/asserters.ts","../src/form/store/conditional-property/resolveConditionalProperty.ts","../src/form/store/constants.ts","../src/form/store/utils/getItemType.ts","../src/form/store/utils/getCollapsibleOptions.ts","../src/form/studio/inputResolver/helpers.ts","../src/form/store/formState.ts","../src/form/store/utils/immutableReconcile.ts","../src/form/store/useFormState.ts","../src/form/useFormValue.ts","../src/form/utils/mutationPatch.ts","../src/field/diff/annotations/helpers.ts","../src/field/diff/annotations/hooks.ts","../src/conditional-property/utils.tsx","../src/conditional-property/useConditionalProperty.tsx","../src/field/diff/contexts/DiffContext.tsx","../src/field/validation/index.ts","../src/field/schema/helpers.ts","../src/field/types/portableText/diff/symbols.ts","../src/field/types/portableText/diff/helpers.ts","../src/field/TODO.ts","../src/field/types/boolean/preview/BooleanPreview.tsx","../src/field/types/boolean/diff/BooleanFieldDiff.tsx","../src/field/diff/contexts/DocumentChangeContext.tsx","../src/field/diff/hooks/useDocumentChange.ts","../src/field/diff/hooks/useRefValue.ts","../src/field/types/file/diff/helpers.ts","../src/field/types/file/diff/FileFieldDiff.tsx","../src/field/types/image/diff/helpers.ts","../src/field/types/image/diff/HotspotCropSVG.tsx","../src/field/types/image/diff/ImagePreview.tsx","../src/field/types/image/diff/ImageFieldDiff.tsx","../src/field/types/number/preview/NumberPreview.tsx","../src/field/types/number/diff/NumberFieldDiff.tsx","../src/field/types/portableText/diff/components/Blockquote.tsx","../src/field/types/portableText/diff/components/Header.tsx","../src/field/types/portableText/diff/components/Paragraph.tsx","../src/field/types/portableText/diff/components/Block.tsx","../src/field/types/portableText/diff/components/styledComponents.tsx","../src/field/types/portableText/diff/components/Annotation.tsx","../src/field/types/portableText/diff/components/Decorator.tsx","../src/field/types/portableText/diff/components/InlineObject.tsx","../src/field/types/portableText/diff/components/Text.tsx","../src/field/types/portableText/diff/components/PortableText.tsx","../src/field/types/portableText/diff/PTDiff.tsx","../src/field/types/reference/preview/ReferencePreview.tsx","../src/field/types/reference/diff/ReferenceFieldDiff.tsx","../src/field/types/string/preview/StringPreview.tsx","../src/field/types/string/diff/StringFieldDiff.tsx","../src/field/diff/resolve/defaultComponents.ts","../src/field/diff/resolve/resolveDiffComponent.ts","../src/field/diff/helpers.ts","../src/field/diff/changes/buildChangeList.ts","../src/field/diff/changes/helpers.ts","../src/field/diff/changes/undoChange.ts","../src/conditional-property/conditionalReadOnly/ConditionalReadOnlyContext.ts","../src/conditional-property/conditionalReadOnly/useConditionalReadOnly.ts","../src/field/diff/components/DiffTooltip.tsx","../src/field/diff/components/DiffCard.tsx","../src/field/diff/components/ChangeTitleSegment.tsx","../src/field/diff/components/ChangeBreadcrumb.tsx","../src/field/diff/components/DiffErrorBoundary.tsx","../src/field/diff/components/FromToArrow.tsx","../src/field/diff/components/DiffInspectWrapper.tsx","../src/field/diff/components/FromTo.tsx","../src/field/diff/components/DiffFromTo.tsx","../src/field/diff/components/FallbackDiff.tsx","../src/field/diff/components/RevertChangesButton.tsx","../src/field/diff/components/ValueError.tsx","../src/field/diff/components/FieldChange.styled.tsx","../src/field/diff/components/FieldChange.tsx","../src/field/utils/useHover.ts","../src/field/diff/components/GroupChange.styled.tsx","../src/field/diff/components/GroupChange.tsx","../src/field/diff/components/ChangeResolver.tsx","../src/field/diff/components/NoChanges.tsx","../src/field/diff/components/ChangeList.styled.tsx","../src/field/diff/components/ChangeList.tsx","../src/field/diff/components/DiffString.tsx","../src/field/diff/components/MetaInfo.tsx","../src/field/types/datetime/preview/DatetimePreview.tsx","../src/field/types/slug/preview/SlugPreview.tsx","../src/desk/panes/document/timeline/constants.ts","../src/desk/panes/document/timeline/helpers.ts","../src/desk/panes/document/timeline/userAvatarStack.tsx","../src/desk/panes/document/timeline/timelineItem.styled.tsx","../src/desk/panes/document/timeline/timelineItem.tsx","../src/desk/panes/document/timeline/timeline.styled.tsx","../src/desk/panes/document/timeline/timeline.tsx","../src/desk/panes/document/DocumentPaneContext.ts","../src/desk/panes/document/useDocumentPane.tsx","../src/desk/panes/document/timeline/timelineMenu.tsx","../src/desk/panes/document/changesPanel/helpers.ts","../src/desk/panes/document/changesPanel/content/LoadingContent.tsx","../src/desk/panes/document/changesPanel/ChangesPanel.tsx","../src/desk/useDeskToolSetting.ts","../src/desk/panes/document/inspectDialog/constants.ts","../src/desk/panes/document/inspectDialog/helpers.ts","../src/desk/panes/document/inspectDialog/InspectDialog.styles.tsx","../src/desk/panes/document/inspectDialog/Search.tsx","../src/desk/panes/document/inspectDialog/InspectDialog.tsx","../src/desk/panes/document/documentPanel/ReferenceChangedBanner.tsx","../src/desk/panes/document/documentPanel/PermissionCheckBanner.tsx","../src/desk/panes/document/documentPanel/documentViews/FormView.tsx","../src/desk/panes/document/documentPanel/header/DocumentHeaderTabs.tsx","../src/components/validation/listItem.tsx","../src/components/validation/validationList.tsx","../src/desk/panes/document/documentPanel/header/ValidationMenu.tsx","../src/desk/panes/document/documentPanel/header/DocumentHeaderTitle.tsx","../src/desk/panes/document/documentPanel/header/DocumentPanelHeader.tsx","../src/desk/panes/document/documentPanel/DocumentPanel.tsx","../src/desk/panes/document/DocumentOperationResults.tsx","../src/desk/panes/document/statusBar/dialogs/constants.ts","../src/desk/panes/document/statusBar/dialogs/ConfirmDialog.tsx","../src/desk/panes/document/statusBar/dialogs/ModalDialog.tsx","../src/desk/panes/document/statusBar/dialogs/PopoverDialog.tsx","../src/desk/panes/document/statusBar/ActionStateDialog.tsx","../src/desk/panes/document/statusBar/ActionMenuButton.tsx","../src/desk/panes/document/statusBar/DocumentStatusBarActions.tsx","../src/desk/badges/RenderBadgeCollectionState.tsx","../src/desk/badges/documentBadges/LiveEditBadge.ts","../src/desk/panes/document/statusBar/sparkline/DocumentBadges.tsx","../src/desk/panes/document/statusBar/sparkline/PublishStatus.tsx","../src/desk/panes/document/statusBar/sparkline/ReviewChangesButton/AnimatedStatusIcon.tsx","../src/desk/panes/document/statusBar/sparkline/ReviewChangesButton/ReviewChangesButton.tsx","../src/desk/panes/document/statusBar/sparkline/DocumentSparkline.tsx","../src/desk/panes/document/statusBar/DocumentStatusBar.tsx","../src/desk/panes/document/keyboardShortcuts/DocumentActionShortcuts.tsx","../src/form/store/stateTreeHelper.ts","../src/form/store/utils/getExpandOperations.ts","../src/desk/panes/document/menuItems.ts","../src/desk/panes/document/usePreviewUrl.ts","../src/desk/panes/document/getInitialValueTemplateOpts.ts","../src/desk/panes/document/DocumentPaneProvider.tsx","../src/desk/panes/document/DocumentPane.tsx","../src/desk/components/deskTool/NoDocumentTypesScreen.tsx","../src/desk/components/deskTool/DeskTool.tsx","../src/desk/components/DocTitle.tsx","../src/desk/components/confirmDeleteDialog/useReferringDocuments.ts","../src/components/TextWithTone.tsx","../src/desk/components/TimeAgo.tsx","../src/desk/components/PublishedStatus.tsx","../src/desk/components/DraftStatus.tsx","../src/desk/components/paneItem/helpers.tsx","../src/desk/components/paneItem/PaneItemPreview.tsx","../src/desk/components/confirmDeleteDialog/ReferencePreviewLink.tsx","../src/desk/components/confirmDeleteDialog/ConfirmDeleteDialogBody.styles.tsx","../src/desk/components/confirmDeleteDialog/ConfirmDeleteDialogBody.tsx","../src/desk/components/confirmDeleteDialog/ConfirmDeleteDialog.tsx","../src/desk/components/confirmDeleteDialog/index.tsx","../src/desk/actions/documentActions/DeleteAction.tsx","../src/desk/actions/documentActions/DiscardChangesAction.tsx","../src/desk/actions/documentActions/DuplicateAction.tsx","../src/desk/actions/documentActions/HistoryRestoreAction.tsx","../src/desk/actions/documentActions/PublishAction.tsx","../src/desk/actions/documentActions/UnpublishAction.tsx","../src/config/configPropertyReducers.ts","../src/config/ConfigPropertyError.ts","../src/config/resolveConfigProperty.ts","../src/config/ConfigResolutionError.ts","../src/config/SchemaError.ts","../src/config/createDefaultIcon.tsx","../src/form/studio/inputs/client-adapters/reference.ts","../src/form/utils/isNonNullable.ts","../src/form/components/AlertStrip.tsx","../src/form/hooks/useOnClickOutside.ts","../src/form/inputs/ReferenceInput/useReferenceInfo.ts","../src/form/inputs/ReferenceInput/utils/TimeAgo.tsx","../src/form/inputs/ReferenceInput/ReferencePreview.tsx","../src/form/inputs/ReferenceInput/OptionPreview.tsx","../src/form/inputs/ReferenceInput/PreviewReferenceValue.tsx","../src/form/inputs/ReferenceInput/CreateButton.tsx","../src/form/inputs/ReferenceInput/ReferenceAutocomplete.tsx","../src/form/inputs/ReferenceInput/AutocompleteContainer.tsx","../src/form/inputs/ReferenceInput/ReferenceInput.tsx","../src/form/studio/inputs/reference/StudioReferenceInput.tsx","../src/form/studio/inputResolver/resolveReferenceInput.ts","../src/form/inputs/arrays/common/sortable.tsx","../src/form/inputs/arrays/common/list.tsx","../src/form/inputs/arrays/OptionsArrayInput/legacyOptionsSupport.tsx","../src/form/inputs/arrays/OptionsArrayInput/OptionsArrayInput.tsx","../src/form/components/tagInput/styles.ts","../src/form/components/tagInput/tagInput.tsx","../src/form/inputs/TagsArrayInput.tsx","../src/form/studio/utils/withMaxConcurrency.ts","../src/form/studio/inputs/client-adapters/assets.ts","../src/form/studio/uploads/image/readExif.ts","../src/form/studio/uploads/image/orient.ts","../src/form/studio/uploads/image/rotateImage.ts","../src/form/studio/uploads/constants.ts","../src/form/studio/uploads/utils.ts","../src/form/studio/uploads/uploadImage.ts","../src/form/studio/uploads/uploadFile.ts","../src/form/studio/uploads/uploaders.ts","../src/form/studio/uploads/accepts.ts","../src/form/studio/uploads/resolveUploader.ts","../src/schema/helpers.ts","../src/form/patch/arrayInsert.ts","../src/form/patch/array.ts","../src/form/patch/object.ts","../src/form/patch/primitive.ts","../src/form/patch/string.ts","../src/form/patch/applyPatch.ts","../src/form/components/withFocusRing/withFocusRing.ts","../src/form/inputs/common/fileTarget/utils/extractFiles.ts","../src/form/inputs/common/fileTarget/utils/imageUrlToBlob.ts","../src/form/inputs/common/fileTarget/fileTarget.tsx","../src/form/inputs/files/common/DropMessage.tsx","../src/form/inputs/arrays/ArrayOfObjectsInput/uploadTarget/styles.ts","../src/form/inputs/arrays/ArrayOfObjectsInput/uploadTarget/uploadTarget.tsx","../src/form/hooks/useScrollIntoViewOnFocusWithin.ts","../src/form/inputs/arrays/common/DragHandle.tsx","../src/form/inputs/arrays/ArrayOfObjectsInput/InsertMenu.tsx","../src/form/inputs/arrays/ArrayOfObjectsInput/item/components/RowWrapper.tsx","../src/form/inputs/arrays/ArrayOfObjectsInput/item/RowItem.tsx","../src/form/inputs/arrays/ArrayOfObjectsInput/item/CellItem.tsx","../src/form/inputs/arrays/ArrayOfObjectsInput/item/ArrayItem.tsx","../src/form/inputs/arrays/ArrayOfObjectsInput/ArrayInput.tsx","../src/form/inputs/arrays/ArrayOfPrimitivesInput/utils/nearestIndex.ts","../src/form/inputs/arrays/ArrayOfPrimitivesInput/ItemRow.tsx","../src/form/inputs/arrays/ArrayOfPrimitivesInput/ArrayOfPrimitivesFunctions.tsx","../src/form/inputs/arrays/ArrayOfPrimitivesInput/ArrayOfPrimitivesInput.tsx","../src/form/studio/inputs/StudioArrayInput.tsx","../src/form/studio/inputResolver/resolveArrayInput.ts","../src/form/inputs/SelectInput.tsx","../src/form/inputs/StringInput.tsx","../src/form/studio/inputResolver/resolveStringInput.ts","../src/form/utils/getValidationRule.ts","../src/form/inputs/NumberInput.tsx","../src/form/studio/inputResolver/resolveNumberInput.ts","../src/form/inputs/BooleanInput.tsx","../src/form/inputs/EmailInput.tsx","../src/form/inputs/ObjectInput/UnknownFields.tsx","../src/form/inputs/ObjectInput/ObjectInput.styled.tsx","../src/form/inputs/ObjectInput/fieldGroups/GroupTab.tsx","../src/form/inputs/ObjectInput/fieldGroups/FieldGroupTabs.tsx","../src/form/inputs/ObjectInput/ObjectInput.tsx","../src/form/inputs/DateInputs/base/calendar/CalendarDay.tsx","../src/form/inputs/DateInputs/base/calendar/constants.ts","../src/form/inputs/DateInputs/base/calendar/utils.ts","../src/form/inputs/DateInputs/base/calendar/CalendarMonth.tsx","../src/form/inputs/DateInputs/base/calendar/features.ts","../src/form/inputs/DateInputs/base/LazyTextInput.tsx","../src/form/inputs/DateInputs/base/calendar/YearInput.tsx","../src/form/inputs/DateInputs/base/calendar/Calendar.tsx","../src/form/inputs/DateInputs/base/DatePicker.tsx","../src/form/inputs/DateInputs/base/DateTimeInput.tsx","../src/form/inputs/DateInputs/CommonDateTimeInput.tsx","../src/form/inputs/DateInputs/utils.ts","../src/form/inputs/DateInputs/DateTimeInput.tsx","../src/form/inputs/DateInputs/DateInput.tsx","../src/form/inputs/TextInput.tsx","../src/form/inputs/UrlInput.tsx","../src/form/inputs/Slug/utils/slugify.ts","../src/form/inputs/Slug/utils/useAsync.tsx","../src/form/inputs/Slug/SlugInput.tsx","../src/form/inputs/files/common/FileInputButton/styles.ts","../src/form/inputs/files/common/FileInputButton/FileInputButton.tsx","../src/form/inputs/files/common/PlaceholderText.tsx","../src/form/inputs/files/common/UploadPlaceholder.tsx","../src/form/utils/WithReferencedAsset.tsx","../src/form/inputs/files/common/styles.ts","../src/form/inputs/files/common/UploadProgress.styled.tsx","../src/form/inputs/files/common/UploadProgress.tsx","../src/form/inputs/files/ImageInput/utils/image.ts","../src/form/inputs/files/common/assetSource.ts","../src/form/inputs/files/common/FileInputMenuItem/FileInputMenuItem.styled.tsx","../src/form/inputs/files/common/FileInputMenuItem/FileInputMenuItem.tsx","../src/form/inputs/files/common/ActionsMenu.tsx","../src/form/inputs/files/common/UploadWarning.tsx","../src/form/inputs/files/common/RatioBox.tsx","../src/form/inputs/files/ImageToolInput/imagetool/ImageLoader.tsx","../src/form/inputs/files/ImageToolInput/imagetool/getBackingStoreRatio.ts","../src/form/inputs/files/ImageToolInput/imagetool/2d/utils.ts","../src/form/inputs/files/ImageToolInput/imagetool/2d/shapes.ts","../src/form/inputs/files/ImageToolInput/imagetool/makeDragAware.tsx","../src/form/inputs/files/ImageToolInput/imagetool/ToolCanvas.styles.tsx","../src/form/inputs/files/ImageToolInput/imagetool/cursors.ts","../src/form/inputs/files/ImageToolInput/imagetool/constants.ts","../src/form/inputs/files/ImageToolInput/imagetool/ToolCanvas.tsx","../src/form/inputs/files/ImageToolInput/imagetool/Resize.tsx","../src/form/inputs/files/ImageToolInput/imagetool/ImageTool.tsx","../src/form/inputs/files/ImageToolInput/imagetool/calculateStyles.ts","../src/form/inputs/files/ImageToolInput/imagetool/HotspotImage.styles.tsx","../src/form/inputs/files/ImageToolInput/imagetool/HotspotImage.tsx","../src/form/inputs/files/ImageToolInput/useLoadImage.ts","../src/form/inputs/files/ImageToolInput/ImageToolInput.tsx","../src/form/inputs/files/ImageInput/ImageActionsMenu.styled.tsx","../src/form/inputs/files/ImageInput/ImageActionsMenu.tsx","../src/form/inputs/files/ImageInput/ImagePreview.styled.tsx","../src/form/inputs/files/ImageInput/ImagePreview.tsx","../src/form/inputs/files/ImageInput/InvalidImageWarning.tsx","../src/form/inputs/files/ImageInput/ImageInput.tsx","../src/form/studio/inputs/StudioImageInput.tsx","../src/form/inputs/files/FileInput/styles.ts","../src/form/inputs/common/helper.ts","../src/form/inputs/files/FileInput/FileDetails.tsx","../src/form/inputs/files/FileInput/FileSkeleton.tsx","../src/form/inputs/files/FileInput/InvalidFileWarning.tsx","../src/form/inputs/files/FileInput/FileInput.tsx","../src/form/studio/inputs/StudioFileInput.tsx","../src/form/inputs/CrossDatasetReferenceInput/useReferenceInfo.ts","../src/form/inputs/CrossDatasetReferenceInput/CrossDatasetReferencePreview.tsx","../src/form/inputs/CrossDatasetReferenceInput/OptionPreview.tsx","../src/form/inputs/CrossDatasetReferenceInput/PreviewReferenceValue.tsx","../src/form/inputs/CrossDatasetReferenceInput/ReferenceAutocomplete.tsx","../src/form/inputs/CrossDatasetReferenceInput/PreviewCard.tsx","../src/form/inputs/CrossDatasetReferenceInput/CrossDatasetReferenceInput.tsx","../src/form/studio/inputs/crossDatasetReference/datastores/search.ts","../src/form/studio/inputs/crossDatasetReference/datastores/getReferenceInfo.ts","../src/form/studio/inputs/crossDatasetReference/datastores/useCrossProjectToken.ts","../src/form/studio/inputs/crossDatasetReference/StudioCrossDatasetReferenceInput.tsx","../src/form/studio/inputResolver/defaultInputs.ts","../src/form/studio/inputResolver/inputResolver.tsx","../src/form/studio/defaults.ts","../src/config/form/_renderField.ts","../src/config/form/_renderInput.ts","../src/config/form/_renderItem.ts","../src/config/form/_renderPreview.ts","../src/config/prepareConfig.ts"],"sourcesContent":["// This string is overwritten by prepublish script with `.version` from package.json\n// The version you see here is only read in monorepo development\nexport const SANITY_VERSION = '0.0.0-development' as string\n","export default {\n  title: 'Slug',\n  name: 'slug',\n  type: 'object',\n  fields: [\n    {\n      name: 'current',\n      title: 'Current slug',\n      type: 'string',\n    },\n    {\n      // The source field is deprecated/unused, but leaving it included and hidden\n      // to prevent rendering \"Unknown field\" warnings on legacy data\n      name: 'source',\n      title: 'Source field',\n      type: 'string',\n      hidden: true,\n    },\n  ],\n}\n","export default {\n  title: 'Geographical Point',\n  name: 'geopoint',\n  type: 'object',\n  fields: [\n    {\n      name: 'lat',\n      type: 'number',\n      title: 'Latitude',\n    },\n    {\n      name: 'lng',\n      type: 'number',\n      title: 'Longitude',\n    },\n    {\n      name: 'alt',\n      type: 'number',\n      title: 'Altitude',\n    },\n  ],\n}\n","export default {\n  name: 'sanity.imageCrop',\n  title: 'Image crop',\n  type: 'object',\n  fields: [\n    {\n      name: 'top',\n      type: 'number',\n    },\n    {\n      name: 'bottom',\n      type: 'number',\n    },\n    {\n      name: 'left',\n      type: 'number',\n    },\n    {\n      name: 'right',\n      type: 'number',\n    },\n  ],\n}\n","export default {\n  name: 'sanity.imageHotspot',\n  title: 'Image hotspot',\n  type: 'object',\n  fields: [\n    {\n      name: 'x',\n      type: 'number',\n    },\n    {\n      name: 'y',\n      type: 'number',\n    },\n    {\n      name: 'height',\n      type: 'number',\n    },\n    {\n      name: 'width',\n      type: 'number',\n    },\n  ],\n}\n","export default {\n  name: 'sanity.assetSourceData',\n  title: 'Asset Source Data',\n  type: 'object',\n  fields: [\n    {\n      name: 'name',\n      title: 'Source name',\n      description: 'A canonical name for the source this asset is originating from',\n      type: 'string',\n    },\n    {\n      name: 'id',\n      title: 'Asset Source ID',\n      description:\n        'The unique ID for the asset within the originating source so you can programatically find back to it',\n      type: 'string',\n    },\n    {\n      name: 'url',\n      title: 'Asset information URL',\n      description: 'A URL to find more information about this asset in the originating source',\n      type: 'string',\n    },\n  ],\n}\n","import {SanityDocument} from '@sanity/types'\n\nexport default {\n  name: 'sanity.imageAsset',\n  title: 'Image',\n  type: 'document',\n  fieldsets: [\n    {\n      name: 'system',\n      title: 'System fields',\n      description: 'These fields are managed by the system and not editable',\n    },\n  ],\n  fields: [\n    {\n      name: 'originalFilename',\n      type: 'string',\n      title: 'Original file name',\n      readOnly: true,\n    },\n    {\n      name: 'label',\n      type: 'string',\n      title: 'Label',\n    },\n    {\n      name: 'title',\n      type: 'string',\n      title: 'Title',\n    },\n    {\n      name: 'description',\n      type: 'string',\n      title: 'Description',\n    },\n    {\n      name: 'altText',\n      type: 'string',\n      title: 'Alternative text',\n    },\n    {\n      name: 'sha1hash',\n      type: 'string',\n      title: 'SHA1 hash',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'extension',\n      type: 'string',\n      readOnly: true,\n      title: 'File extension',\n      fieldset: 'system',\n    },\n    {\n      name: 'mimeType',\n      type: 'string',\n      readOnly: true,\n      title: 'Mime type',\n      fieldset: 'system',\n    },\n    {\n      name: 'size',\n      type: 'number',\n      title: 'File size in bytes',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'assetId',\n      type: 'string',\n      title: 'Asset ID',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'uploadId',\n      type: 'string',\n      readOnly: true,\n      hidden: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'path',\n      type: 'string',\n      title: 'Path',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'url',\n      type: 'string',\n      title: 'Url',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'metadata',\n      type: 'sanity.imageMetadata',\n      title: 'Metadata',\n    },\n    {\n      name: 'source',\n      type: 'sanity.assetSourceData',\n      title: 'Source',\n      readOnly: true,\n      fieldset: 'system',\n    },\n  ],\n  preview: {\n    select: {\n      id: '_id',\n      title: 'originalFilename',\n      mimeType: 'mimeType',\n      size: 'size',\n    },\n    prepare(doc: Partial<SanityDocument>) {\n      return {\n        title: doc.title || (typeof doc.path === 'string' && doc.path.split('/').slice(-1)[0]),\n        media: {asset: {_ref: doc.id}},\n        subtitle: `${doc.mimeType} (${(Number(doc.size) / 1024 / 1024).toFixed(2)} MB)`,\n      }\n    },\n  },\n  orderings: [\n    {\n      title: 'File size',\n      name: 'fileSizeDesc',\n      by: [{field: 'size', direction: 'desc'}],\n    },\n  ],\n}\n","export default {\n  name: 'sanity.imagePalette',\n  title: 'Image palette',\n  type: 'object',\n  fields: [\n    {name: 'darkMuted', type: 'sanity.imagePaletteSwatch', title: 'Dark Muted'},\n    {name: 'lightVibrant', type: 'sanity.imagePaletteSwatch', title: 'Light Vibrant'},\n    {name: 'darkVibrant', type: 'sanity.imagePaletteSwatch', title: 'Dark Vibrant'},\n    {name: 'vibrant', type: 'sanity.imagePaletteSwatch', title: 'Vibrant'},\n    {name: 'dominant', type: 'sanity.imagePaletteSwatch', title: 'Dominant'},\n    {name: 'lightMuted', type: 'sanity.imagePaletteSwatch', title: 'Light Muted'},\n    {name: 'muted', type: 'sanity.imagePaletteSwatch', title: 'Muted'},\n  ],\n}\n","export default {\n  name: 'sanity.imagePaletteSwatch',\n  title: 'Image palette swatch',\n  type: 'object',\n  fields: [\n    {name: 'background', type: 'string', title: 'Background', readOnly: true},\n    {name: 'foreground', type: 'string', title: 'Foreground', readOnly: true},\n    {name: 'population', type: 'number', title: 'Population', readOnly: true},\n    {name: 'title', type: 'string', title: 'String', readOnly: true},\n  ],\n}\n","export default {\n  name: 'sanity.imageDimensions',\n  type: 'object',\n  title: 'Image dimensions',\n  fields: [\n    {name: 'height', type: 'number', title: 'Height', readOnly: true},\n    {name: 'width', type: 'number', title: 'Width', readOnly: true},\n    {name: 'aspectRatio', type: 'number', title: 'Aspect ratio', readOnly: true},\n  ],\n}\n","export default {\n  name: 'sanity.imageMetadata',\n  title: 'Image metadata',\n  type: 'object',\n  fieldsets: [\n    {\n      name: 'extra',\n      title: 'Extra metadataâ€¦',\n      options: {\n        collapsable: true,\n      },\n    },\n  ],\n  fields: [\n    {\n      name: 'location',\n      type: 'geopoint',\n    },\n    {\n      name: 'dimensions',\n      title: 'Dimensions',\n      type: 'sanity.imageDimensions',\n      fieldset: 'extra',\n    },\n    {\n      name: 'palette',\n      type: 'sanity.imagePalette',\n      title: 'Palette',\n      fieldset: 'extra',\n    },\n    {\n      name: 'lqip',\n      title: 'LQIP (Low-Quality Image Placeholder)',\n      type: 'string',\n      readOnly: true,\n    },\n    {\n      name: 'blurHash',\n      title: 'BlurHash',\n      type: 'string',\n      readOnly: true,\n    },\n    {\n      name: 'hasAlpha',\n      title: 'Has alpha channel',\n      type: 'boolean',\n      readOnly: true,\n    },\n    {\n      name: 'isOpaque',\n      title: 'Is opaque',\n      type: 'boolean',\n      readOnly: true,\n    },\n  ],\n}\n","import {SanityDocument} from '@sanity/client'\n\nexport default {\n  name: 'sanity.fileAsset',\n  title: 'File',\n  type: 'document',\n  fieldsets: [\n    {\n      name: 'system',\n      title: 'System fields',\n      description: 'These fields are managed by the system and not editable',\n    },\n  ],\n  fields: [\n    {\n      name: 'originalFilename',\n      type: 'string',\n      title: 'Original file name',\n      readOnly: true,\n    },\n    {\n      name: 'label',\n      type: 'string',\n      title: 'Label',\n    },\n    {\n      name: 'title',\n      type: 'string',\n      title: 'Title',\n    },\n    {\n      name: 'description',\n      type: 'string',\n      title: 'Description',\n    },\n    {\n      name: 'altText',\n      type: 'string',\n      title: 'Alternative text',\n    },\n    {\n      name: 'sha1hash',\n      type: 'string',\n      title: 'SHA1 hash',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'extension',\n      type: 'string',\n      title: 'File extension',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'mimeType',\n      type: 'string',\n      title: 'Mime type',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'size',\n      type: 'number',\n      title: 'File size in bytes',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'assetId',\n      type: 'string',\n      title: 'Asset ID',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'path',\n      type: 'string',\n      title: 'Path',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'url',\n      type: 'string',\n      title: 'Url',\n      readOnly: true,\n      fieldset: 'system',\n    },\n    {\n      name: 'source',\n      type: 'sanity.assetSourceData',\n      title: 'Source',\n      readOnly: true,\n      fieldset: 'system',\n    },\n  ],\n  preview: {\n    select: {\n      title: 'originalFilename',\n      path: 'path',\n      mimeType: 'mimeType',\n      size: 'size',\n    },\n    prepare(doc: Partial<SanityDocument>) {\n      return {\n        title: doc.title || doc.path.split('/').slice(-1)[0],\n        subtitle: `${doc.mimeType} (${(doc.size / 1024 / 1024).toFixed(2)} MB)`,\n      }\n    },\n  },\n  orderings: [\n    {\n      title: 'File size',\n      name: 'fileSizeDesc',\n      by: [{field: 'size', direction: 'desc'}],\n    },\n  ],\n}\n","import SchemaBuilder, {type SchemaValidationResult} from '@sanity/schema'\nimport {validateSchema, groupProblems} from '@sanity/schema/_internal'\nimport {Schema} from '@sanity/types'\nimport {inferFromSchema as inferValidation} from '@sanity/validation'\nimport slug from './types/slug'\nimport geopoint from './types/geopoint'\nimport imageCrop from './types/imageCrop'\nimport imageHotspot from './types/imageHotspot'\nimport assetSourceData from './types/assetSourceData'\nimport imageAsset from './types/imageAsset'\nimport imagePalette from './types/imagePalette'\nimport imagePaletteSwatch from './types/imagePaletteSwatch'\nimport imageDimensions from './types/imageDimensions'\nimport imageMetadata from './types/imageMetadata'\nimport fileAsset from './types/fileAsset'\n\nconst isError = (problem: SchemaValidationResult) => problem.severity === 'error'\n\nconst builtinTypes = [\n  assetSourceData,\n  slug,\n  geopoint,\n  // legacyRichDate,\n  imageAsset,\n  fileAsset,\n  imageCrop,\n  imageHotspot,\n  imageMetadata,\n  imageDimensions,\n  imagePalette,\n  imagePaletteSwatch,\n]\n\nexport function createSchema(schemaDef: {name: string; types: any[]}): Schema {\n  const validated = validateSchema(schemaDef.types).getTypes()\n  const validation = groupProblems(validated)\n  const hasErrors = validation.some((group) => group.problems.some(isError))\n\n  const compiled = SchemaBuilder.compile({\n    name: schemaDef.name,\n    types: hasErrors ? [] : [...schemaDef.types, ...builtinTypes].filter(Boolean),\n  })\n\n  // ;(compiled as any)._source = schemaDef\n  ;(compiled as any)._validation = validation\n\n  return inferValidation(compiled as Schema)\n}\n","export interface CorsOriginErrorOptions {\n  projectId?: string\n}\n\nexport class CorsOriginError extends Error {\n  projectId?: string\n\n  constructor({projectId}: CorsOriginErrorOptions) {\n    super('CorsOriginError')\n    this.projectId = projectId\n  }\n}\n","import {isEqual} from 'lodash'\nimport {useRef} from 'react'\n\n/**\n * This React hook should be considered an escape hatch â€“ to make sure that a value is the same\n * on every render. SHOULD NOT BE USED IN MOST CASES.\n *\n * @internal\n */\nexport function useUnique<ValueType>(value: ValueType): ValueType {\n  const valueRef = useRef<ValueType>(value)\n\n  if (!isEqual(valueRef.current, value)) {\n    valueRef.current = value\n  }\n\n  return valueRef.current\n}\n","import {useAsObservable, useObservable} from 'react-rx'\nimport {concat, Observable, of} from 'rxjs'\nimport {catchError, distinctUntilChanged, map, scan, switchMap} from 'rxjs/operators'\nimport shallowEquals from 'shallow-equals'\nimport {useUnique} from './useUnique'\n\nexport type LoadingTuple<T> = [T, boolean]\n\ntype ReactHook<TArgs extends unknown[], TResult> = (...args: TArgs) => TResult\n\ninterface CreateHookFromObservableFactoryOptions<T, TArgs extends unknown[]> {\n  /**\n   * Optionally provide an initial value that will show up initially if the\n   * observable resolves asynchronously. Prevents `undefined` as the initial\n   * value.\n   */\n  initialValue: T\n  /**\n   * Optionally provide a comparison function passed into `distinctUntilEqual`\n   * used for args comparison. The default function shallowly compares each\n   * argument.\n   */\n  argsAreEqual?: (prev: TArgs, next: TArgs) => boolean\n}\n\nfunction defaultArgsAreEqual<TArgs extends unknown[]>(prev: TArgs, next: TArgs) {\n  if (prev.length !== next.length) return false\n\n  for (let i = 0; i < next.length; i++) {\n    if (!shallowEquals(prev[i], next[i])) return false\n  }\n  return true\n}\n\n// overloads to handle types where an initial value is passed\nexport function createHookFromObservableFactory<T, TArgs extends unknown[]>(\n  observableFactory: (...args: TArgs) => Observable<T>,\n  options: CreateHookFromObservableFactoryOptions<T, TArgs>\n): ReactHook<TArgs, LoadingTuple<T>>\nexport function createHookFromObservableFactory<T, TArgs extends unknown[]>(\n  observableFactory: (...args: TArgs) => Observable<T>,\n  options: CreateHookFromObservableFactoryOptions<T | undefined, TArgs>\n): ReactHook<TArgs, LoadingTuple<T | undefined>>\nexport function createHookFromObservableFactory<T, TArgs extends unknown[]>(\n  observableFactory: (...args: TArgs) => Observable<T>,\n  options?: CreateHookFromObservableFactoryOptions<T | undefined, TArgs>\n): ReactHook<TArgs, LoadingTuple<T | undefined>>\n\n/**\n * A function that will create a hook from a function that returns an\n * observable. The parameters of the hook will be the parameters of the function\n * and the return of the hook will be a loading tuple with the value of the\n * observable at the first index and a boolean with the loading state as the\n * second index.\n *\n * The loading state will become true as soon as new incoming args are given and\n * will flip to false when the observable from the function emits the next\n * value.\n */\nexport function createHookFromObservableFactory<T, TArgs extends unknown[]>(\n  observableFactory: (...args: TArgs) => Observable<T>,\n  options?: CreateHookFromObservableFactoryOptions<T | undefined, TArgs>\n): ReactHook<TArgs, LoadingTuple<T | undefined>> {\n  const {initialValue, argsAreEqual = defaultArgsAreEqual} = options || {}\n  const initialLoadingTuple: LoadingTuple<T | undefined> = [initialValue, true]\n\n  const asLoadingTuple = (args$: Observable<TArgs>) =>\n    args$.pipe(\n      distinctUntilChanged(argsAreEqual),\n      switchMap((distinctArgs) =>\n        concat(\n          of({type: 'loading'} as const),\n          observableFactory(...distinctArgs).pipe(map((value) => ({type: 'value', value} as const)))\n        )\n      ),\n      scan(([prevValue], next): LoadingTuple<T | undefined> => {\n        if (next.type === 'loading') return [prevValue, true]\n        return [next.value, false]\n      }, initialLoadingTuple),\n      distinctUntilChanged(([prevValue, prevIsLoading], [nextValue, nextIsLoading]) => {\n        if (prevValue !== nextValue) return false\n        if (prevIsLoading !== nextIsLoading) return false\n        return true\n      }),\n      map((tuple) => ({type: 'tuple', tuple} as const)),\n      catchError((error) => of({type: 'error', error} as const))\n    )\n\n  return function useLoadableFromCreateLoadable(...args) {\n    const _args = useUnique(args)\n    const tuple$ = useAsObservable(_args, asLoadingTuple)\n    const result = useObservable(tuple$, {type: 'tuple', tuple: initialLoadingTuple})\n\n    if (result.type === 'error') throw result.error\n\n    return result.tuple\n  }\n}\n","/**\n * @internal\n */\nexport function isNonNullable<T>(value: T): value is NonNullable<T> {\n  return value !== null && value !== undefined\n}\n","import {SanityDocument} from '@sanity/types'\nimport {isNonNullable} from './isNonNullable'\n\n// nominal/opaque type hack\nexport type Opaque<T, K> = T & {__opaqueId__: K}\n\nexport type DraftId = Opaque<string, 'draftId'>\nexport type PublishedId = Opaque<string, 'publishedId'>\n\nexport const DRAFTS_FOLDER = 'drafts'\nconst DRAFTS_PREFIX = `${DRAFTS_FOLDER}.`\n\nexport function isDraft(document: SanityDocument): boolean {\n  return isDraftId(document._id)\n}\n\nexport function isDraftId(id: string): id is DraftId {\n  return id.startsWith(DRAFTS_PREFIX)\n}\n\nexport function getIdPair(id: string): {draftId: DraftId; publishedId: PublishedId} {\n  return {\n    draftId: getDraftId(id),\n    publishedId: getPublishedId(id),\n  }\n}\n\nexport function isPublishedId(id: string): id is PublishedId {\n  return !isDraftId(id)\n}\n\nexport function getDraftId(id: string): DraftId {\n  return isDraftId(id) ? id : ((DRAFTS_PREFIX + id) as DraftId)\n}\n\nexport function getPublishedId(id: string): PublishedId {\n  return (isDraftId(id) ? id.slice(DRAFTS_PREFIX.length) : id) as PublishedId\n}\n\nexport function createDraftFrom(document: SanityDocument): SanityDocument {\n  return {\n    ...document,\n    _id: getDraftId(document._id),\n  }\n}\n\nexport function newDraftFrom(document: SanityDocument): SanityDocument {\n  return {\n    ...document,\n    _id: DRAFTS_PREFIX,\n  }\n}\n\nexport function createPublishedFrom(document: SanityDocument): SanityDocument {\n  return {\n    ...document,\n    _id: getPublishedId(document._id),\n  }\n}\n\n/**\n * Takes a list of documents and collates draft/published pairs into single entries\n * `{id: <published id>, draft?: <draft document>, published?: <published document>}`\n *\n * Note: because Map is ordered by insertion key the resulting array will be ordered by whichever\n * version appeared first\n */\nexport interface CollatedHit<T extends {_id: string} = {_id: string}> {\n  id: string\n  type: string\n  draft?: T\n  published?: T\n}\n\nexport function collate<T extends {_id: string; _type: string}>(documents: T[]): CollatedHit<T>[] {\n  const byId = documents.reduce((res, doc) => {\n    const publishedId = getPublishedId(doc._id)\n    let entry = res.get(publishedId)\n    if (!entry) {\n      entry = {id: publishedId, type: doc._type, published: undefined, draft: undefined}\n      res.set(publishedId, entry)\n    }\n\n    entry[publishedId === doc._id ? 'published' : 'draft'] = doc\n    return res\n  }, new Map())\n\n  return Array.from(byId.values())\n}\n\n// Removes published documents that also has a draft\nexport function removeDupes(documents: SanityDocument[]): SanityDocument[] {\n  return collate(documents)\n    .map((entry) => entry.draft || entry.published)\n    .filter(isNonNullable)\n}\n","/**\n * @internal\n */\nexport function isRecord(value: unknown): value is Record<string, unknown> {\n  return Boolean(value) && typeof value === 'object' && !Array.isArray(value)\n}\n","export function isString(value: unknown): value is string {\n  return typeof value === 'string'\n}\n","import {ResizeObserver as Polyfill, ResizeObserverEntry} from '@juggle/resize-observer'\nimport createPubSub, {Subscriber} from 'nano-pubsub'\n\nconst ResizeObserver: typeof Polyfill =\n  typeof document === 'object' && typeof window === 'object' && window.ResizeObserver\n    ? window.ResizeObserver\n    : Polyfill\n\nexport interface SharedResizeObserver {\n  observe: (\n    element: Element,\n    observer: Subscriber<ResizeObserverEntry>,\n    options?: ResizeObserverOptions\n  ) => () => void\n}\n\nexport const createSharedResizeObserver = (): SharedResizeObserver => {\n  const event = createPubSub<ResizeObserverEntry[]>()\n\n  const resizeObserver = new ResizeObserver((entries: ResizeObserverEntry[]) =>\n    event.publish(entries)\n  )\n\n  return {\n    observe: (\n      element: Element,\n      observer: Subscriber<ResizeObserverEntry>,\n      options?: ResizeObserverOptions\n    ) => {\n      const unsubscribe = event.subscribe((entries) => {\n        const entry = entries.find((e) => e.target === element)\n        if (entry) {\n          observer(entry)\n        }\n      })\n\n      resizeObserver.observe(element, options)\n\n      return () => {\n        unsubscribe()\n        resizeObserver.unobserve(element)\n      }\n    },\n  }\n}\n\nexport const resizeObserver = createSharedResizeObserver()\n","import {Schema} from '@sanity/types'\n\nconst BUNDLED_DOC_TYPES = ['sanity.imageAsset', 'sanity.fileAsset']\n\n/**\n * @internal\n */\nexport function _isSanityDocumentTypeDefinition(\n  def: Schema.TypeDefinition\n): def is Schema.TypeDefinition<'document'> {\n  return def.type === 'document' && BUNDLED_DOC_TYPES.includes(def.name)\n}\n\n/**\n * @internal\n */\nexport function _isCustomDocumentTypeDefinition(\n  def: Schema.TypeDefinition\n): def is Schema.TypeDefinition<'document'> {\n  return def.type === 'document' && !_isSanityDocumentTypeDefinition(def)\n}\n","type SearchPathSegment = string | []\n\nconst GROQ_KEYWORDS = ['match', 'in', 'asc', 'desc', 'true', 'false', 'null']\nconst VALID_FIELD = /^[a-zA-Z_][a-zA-Z0-9_]*$/\n\nexport const fieldNeedsEscape = (fieldName: string): boolean =>\n  !VALID_FIELD.test(fieldName) || GROQ_KEYWORDS.includes(fieldName)\n\nexport const escapeField = (fieldName: string): string => `[\"${fieldName}\"]`\n\nconst escapeFirst = (fieldName: string): string => `@${escapeField(fieldName)}`\n\nconst isEmptyArray = (value: unknown): value is [] => Array.isArray(value) && value.length === 0\n\nexport const joinPath = (pathArray: SearchPathSegment[]): string => {\n  let path = ''\n  for (let i = 0; i < pathArray.length; i++) {\n    const pathSegment = pathArray[i]\n    if (isEmptyArray(pathSegment)) {\n      path += `[]`\n      continue\n    }\n\n    const isFirst = i === 0\n    const needsEscape = fieldNeedsEscape(pathSegment)\n\n    if (needsEscape) {\n      path = isFirst ? escapeFirst(pathSegment) : `${path}${escapeField(pathSegment)}`\n    } else {\n      path = isFirst ? pathSegment : `${path}.${pathSegment}`\n    }\n  }\n\n  return path\n}\n","import {useMemoObservable} from 'react-rx'\nimport {Observable, of, OperatorFunction} from 'rxjs'\nimport {catchError, map} from 'rxjs/operators'\n\nexport type LoadableState<T> = LoadingState | LoadedState<T> | ErrorState\n\nexport interface LoadingState {\n  value: undefined\n  error: null\n  isLoading: true\n}\n\nexport interface LoadedState<T> {\n  value: T\n  error: null\n  isLoading: false\n}\n\nexport interface ErrorState {\n  value: undefined\n  error: Error\n  isLoading: false\n}\n\nconst LOADING_STATE: LoadingState = {\n  isLoading: true,\n  value: undefined,\n  error: null,\n}\n\nexport function useLoadable<T>(value$: Observable<T>): LoadableState<T | undefined>\nexport function useLoadable<T>(value$: Observable<T>, initialValue: T): LoadableState<T>\nexport function useLoadable<T>(\n  value$: Observable<T>,\n  initialValue?: T\n): LoadableState<T | undefined> {\n  const initial: LoadableState<T> =\n    typeof initialValue === 'undefined'\n      ? LOADING_STATE\n      : {isLoading: false, value: initialValue, error: null}\n\n  return useMemoObservable(() => value$.pipe(asLoadable()), [value$], initial)\n}\n\nexport function asLoadable<T>(): OperatorFunction<T, LoadableState<T>> {\n  return (value$: Observable<T>) =>\n    value$.pipe(\n      map((value) => ({isLoading: false, value, error: null} as const)),\n      catchError((error): Observable<ErrorState> => of({isLoading: false, value: undefined, error}))\n    )\n}\n","import {throttle} from 'lodash'\nimport type {ThrottleSettings} from 'lodash'\nimport {useEffect, useMemo} from 'react'\n\n/**\n * @internal\n *\n * @example\n * ```tsx\n * // First create a callback using Reactâ€™s `useCallback` hook\n * const myCallback = useCallback(() => {\n *   // this is not throttled\n * }, [])\n *\n * // Then make a throttled version using the `useThrottledCallback` hook\n * const myThrottledCallback = useThrottledCallback(myCallback, 100)\n *\n * // Call the throttled callback\n * <Button onClick={myThrottledCallback} />\n * ```\n */\nexport function useThrottledCallback(\n  callback: (...args: any[]) => any,\n  wait: number,\n  options: ThrottleSettings\n): (...args: any[]) => any {\n  const throttledCallback = useMemo(\n    () => throttle(callback, wait, options),\n    [callback, options, wait]\n  )\n\n  useEffect(\n    () => () => {\n      // cleanup: invoke the last value\n      throttledCallback.flush()\n    },\n    [throttledCallback]\n  )\n\n  return throttledCallback\n}\n","const supportsLocalStorage = (() => {\n  const key = '__tmp_supports_local_storage'\n\n  try {\n    if (typeof localStorage === 'undefined') {\n      return false\n    }\n\n    localStorage.setItem(key, '---')\n    localStorage.removeItem(key)\n    return true\n  } catch (err) {\n    return false\n  }\n})()\n\nconst memStore: Record<string, string> = {}\n\nexport function setItem(key: string, value: string): void {\n  if (supportsLocalStorage) {\n    localStorage[key] = value\n  } else {\n    memStore[key] = value\n  }\n}\n\nexport function getItem(key: string): string | undefined {\n  return supportsLocalStorage ? localStorage[key] : memStore[key]\n}\n\nexport function removeItem(key: string): void {\n  if (supportsLocalStorage) {\n    localStorage.removeItem(key)\n  } else {\n    delete memStore[key]\n  }\n}\n","import {fromEvent, merge, Observable, of, Subject} from 'rxjs'\nimport {filter, map, shareReplay} from 'rxjs/operators'\nimport {isNonNullable} from '../../util'\nimport * as storage from './storage'\n\nexport interface BroadcastChannel<T> {\n  messages: Observable<T>\n  broadcast: (message: T) => void\n}\n\nexport function createBroadcastChannel<T>(namespace: string): BroadcastChannel<T> {\n  const storageEvents$ =\n    typeof window === 'undefined'\n      ? of<StorageEvent>() // No storage events in non-browser environments\n      : fromEvent<StorageEvent>(window, 'storage')\n\n  const storageKey = `__studio_local_storage_messaging_${namespace}`\n\n  // note: the the `storageEvents$` stream does not emit for the current\n  // window/tab. this subject is used to re-broadcast messages broadcast outward\n  // to itself\n  const broadcastedMessages$ = new Subject<T>()\n\n  const messages$ = merge(\n    broadcastedMessages$,\n    storageEvents$.pipe(\n      filter((event) => event.key === storageKey),\n      map((event) => event.newValue),\n      filter(isNonNullable),\n      map((newValue) => JSON.parse(newValue))\n    )\n  ).pipe(\n    // this is important to ensure all new subscribers get a message on subscribe\n    shareReplay(1)\n  )\n\n  function broadcast(message: T) {\n    try {\n      storage.setItem(storageKey, JSON.stringify(message))\n      // clear the value afterwards so that next message will still emit a\n      // new event even if it's identical to the previous one\n      storage.removeItem(storageKey)\n\n      broadcastedMessages$.next(message)\n    } catch (err) {\n      // intentional noop\n    }\n  }\n\n  return {messages: messages$, broadcast}\n}\n","const sidPattern = /sid=[^&]{20,}/\n\nfunction consumeSessionId(): string | null {\n  // Are we in a browser-like environment?\n  if (typeof window === 'undefined' || typeof window.location !== 'object') {\n    return null\n  }\n\n  // Does the hash contain a valid session ID?\n  const hash = window.location.hash\n  const [sidParam] = hash.match(sidPattern) || []\n  if (!sidParam) {\n    return null\n  }\n\n  // Extract just the sid from the hash\n  const sid = sidParam.slice(sidParam.indexOf('=') + 1)\n\n  // Remove the parameter from the URL\n  const newHash = hash.replace(sidPattern, '')\n  const newUrl = new URL(window.location.href)\n  newUrl.hash = newHash.length > 1 ? newHash : ''\n  history.replaceState(null, '', newUrl)\n\n  return sid\n}\n\n// this module consumes the session ID as a side-effect as soon as its loaded\n// to remove the session ID from the history (vs waiting to remove the sid hash\n// until react mounts)\nexport const sessionId = consumeSessionId()\n","import {Theme} from '@sanity/ui'\nimport React from 'react'\nimport styled, {css} from 'styled-components'\nimport {AuthProvider} from './createAuthStore'\n\nconst GithubRoot = styled.svg(({theme}: {theme: Theme}) => {\n  const {fg} = theme.sanity.color.base\n\n  return css`\n    fill: ${fg};\n  `\n})\n\nconst GithubLogo = () => (\n  <GithubRoot\n    // data-sanity-icon=\"google-logo\"\n    width=\"1em\"\n    height=\"1em\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 438.55 438.55\"\n  >\n    <path d=\"M409.13 114.57a218.32 218.32 0 0 0-79.8-79.8Q278.94 5.36 219.27 5.36T109.21 34.77a218.29 218.29 0 0 0-79.8 79.8Q0 165 0 224.63q0 71.67 41.83 128.91t108.06 79.23q7.71 1.43 11.42-2a11.17 11.17 0 0 0 3.69-8.57q0-.86-.14-15.42t-.14-25.41l-6.57 1.14a83.77 83.77 0 0 1-15.85 1 120.73 120.73 0 0 1-19.84-2 44.34 44.34 0 0 1-19.11-8.51 36.23 36.23 0 0 1-12.56-17.6l-2.86-6.57a71.34 71.34 0 0 0-9-14.56q-6.14-8-12.42-10.85l-2-1.43a21 21 0 0 1-3.71-3.43 15.66 15.66 0 0 1-2.57-4q-.86-2 1.43-3.29C61.2 310.42 64 310 68 310l5.71.85q5.71 1.14 14.13 6.85a46.08 46.08 0 0 1 13.85 14.84q6.57 11.71 15.85 17.85t18.7 6.14a81.19 81.19 0 0 0 16.27-1.42 56.78 56.78 0 0 0 12.85-4.29q2.57-19.14 14-29.41a195.49 195.49 0 0 1-29.36-5.13 116.52 116.52 0 0 1-26.83-11.14 76.86 76.86 0 0 1-23-19.13q-9.14-11.42-15-30t-5.8-42.81q0-34.55 22.56-58.82-10.57-26 2-58.24 8.28-2.57 24.55 3.85t23.84 11q7.57 4.56 12.13 7.71a206.2 206.2 0 0 1 109.64 0l10.85-6.85a153.65 153.65 0 0 1 26.26-12.56q15.13-5.71 23.13-3.14 12.84 32.26 2.28 58.24 22.55 24.27 22.56 58.82 0 24.27-5.85 43t-15.12 30a79.82 79.82 0 0 1-23.13 19 116.74 116.74 0 0 1-26.84 11.14 195.29 195.29 0 0 1-29.23 5.07q14.8 12.84 14.81 40.58v60.2a11.37 11.37 0 0 0 3.57 8.56q3.57 3.42 11.28 2 66.24-22 108.07-79.23t41.83-128.91q-.03-59.62-29.43-110.05z\" />\n  </GithubRoot>\n)\n\nconst GoogleLogo = () => (\n  <svg\n    // data-sanity-icon=\"google-logo\"\n    width=\"1em\"\n    height=\"1em\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    viewBox=\"0 0 48 48\"\n  >\n    <path\n      d=\"M11 24a13 13 0 0 1 .66-4.08l-7.4-5.66a22.18 22.18 0 0 0 0 19.49l7.4-5.67A13 13 0 0 1 11 24z\"\n      fill=\"#fbbc05\"\n    />\n    <path\n      d=\"M24 11a12.72 12.72 0 0 1 8.1 2.9l6.4-6.4a22 22 0 0 0-34.24 6.75l7.4 5.66A13 13 0 0 1 24 11z\"\n      fill=\"#ea4335\"\n    />\n    <path\n      d=\"M24 37a13 13 0 0 1-12.34-8.92l-7.4 5.66A21.93 21.93 0 0 0 24 46a21 21 0 0 0 14.33-5.48l-7-5.44A13.59 13.59 0 0 1 24 37zm-12.35-8.93l-7.4 5.67 7.4-5.66z\"\n      fill=\"#34a853\"\n    />\n    <path\n      d=\"M44.5 20H24v8.5h11.8a9.91 9.91 0 0 1-4.49 6.58l7 5.44C42.37 36.76 45 31.17 45 24a18.25 18.25 0 0 0-.5-4z\"\n      fill=\"#4285f4\"\n    />\n  </svg>\n)\n\nfunction CustomLogo(props: {provider: AuthProvider}) {\n  const {provider} = props\n\n  return (\n    provider.logo ? <img src={provider.logo} alt={`Logo for ${provider.name}`} /> : undefined\n  ) as any\n}\n\nexport const providerLogos: Record<string, React.ComponentType<{provider: AuthProvider}>> = {\n  google: GoogleLogo,\n  github: GithubLogo,\n  custom: CustomLogo,\n  // sanity: () => <SanityMonogram data-sanity-icon=\"\" />,\n}\n","import {SanityClient} from '@sanity/client'\nimport {Button, Flex, Heading, Spinner, Stack, Text} from '@sanity/ui'\nimport React, {useEffect, useState} from 'react'\nimport {Observable} from 'rxjs'\nimport {createHookFromObservableFactory} from '../../util'\nimport {providerLogos} from './providerLogos'\nimport {LoginComponentProps} from './types'\n\ninterface GetProvidersOptions {\n  client: SanityClient\n  mode?: 'append' | 'replace'\n  providers?: Array<{\n    name: string\n    title: string\n    url: string\n    logo?: string\n  }>\n}\n\ninterface ProvidersResponse {\n  thirdPartyLogin?: boolean\n  sso?: {\n    saml?: boolean\n  }\n  providers: Provider[]\n}\n\ninterface Provider {\n  name: string\n  title: string\n  url: string\n}\n\nasync function getProviders({client, mode, providers: customProviders = []}: GetProvidersOptions) {\n  const {providers, thirdPartyLogin, sso} = await client.request<ProvidersResponse>({\n    uri: '/auth/providers',\n  })\n\n  if (!customProviders.length) return providers\n\n  const custom = customProviders.map((provider) => {\n    // taken from here:\n    // https://github.com/sanity-io/sanity/blob/795637999b67c23de1657a3701091a337383f632/packages/%40sanity/default-login/src/util/getProviders.js#L19\n    // A user may want to remove certain login options (eg GitHub) and thus\n    // provide \"official\" login options through the config. These shouldn't be\n    // treated as custom login providers which require the third-party login\n    // feature, but as the official provider\n    const isOfficial = providers.some((official) => official.url === provider.url)\n    const isSupported = isOfficial || thirdPartyLogin || (sso && Object.values(sso).some(Boolean))\n    return {...provider, custom: !isOfficial, supported: isSupported}\n  })\n\n  if (mode === 'replace') return custom\n\n  // Append to the list of official providers, but replace any provider that has\n  // the same URL with the custom one (allows customizing the title, name)\n  return providers\n    .filter((official) => custom.some((provider) => provider.url !== official.url))\n    .concat(custom)\n}\n\ninterface CreateLoginComponentOptions {\n  getClient: () => Observable<SanityClient>\n  loginMethod: 'dual' | 'cookie'\n  mode?: 'append' | 'replace'\n  redirectOnSingle?: boolean\n  providers?: Array<{\n    name: string\n    title: string\n    url: string\n    logo?: string\n  }>\n}\n\ninterface CreateHrefForProviderOptions {\n  projectId: string\n  loginMethod: 'dual' | 'cookie'\n  url: string\n  basePath: string\n}\n\nfunction createHrefForProvider({\n  loginMethod,\n  projectId,\n  url,\n  basePath,\n}: CreateHrefForProviderOptions) {\n  const params = new URLSearchParams()\n  params.set('origin', `${window.location.origin}${basePath}`)\n  params.set('projectId', projectId)\n  params.set('type', loginMethod)\n  return `${url}?${params}`\n}\n\nexport function createLoginComponent({\n  getClient,\n  loginMethod,\n  redirectOnSingle,\n  ...providerOptions\n}: CreateLoginComponentOptions) {\n  const useClient = createHookFromObservableFactory(getClient)\n\n  function LoginComponent({projectId, basePath}: LoginComponentProps) {\n    const [providers, setProviders] = useState<Provider[] | null>(null)\n    const [error, setError] = useState<unknown>(null)\n    if (error) throw error\n\n    const [client] = useClient()\n\n    useEffect(() => {\n      if (!client) return\n\n      getProviders({client, ...providerOptions})\n        .then(setProviders)\n        .catch(setError)\n    }, [client])\n\n    // only create a direct URL if `redirectOnSingle` is true and there is only\n    // one provider available\n    const redirectUrl =\n      redirectOnSingle &&\n      providers?.length === 1 &&\n      providers?.[0] &&\n      createHrefForProvider({\n        loginMethod,\n        projectId,\n        url: providers[0].url,\n        basePath,\n      })\n\n    const loading = !providers || redirectUrl\n\n    useEffect(() => {\n      if (redirectUrl) {\n        window.location.href = redirectUrl\n      }\n    }, [redirectUrl])\n\n    if (loading) {\n      return (\n        <Flex\n          align=\"center\"\n          direction=\"column\"\n          gap={4}\n          justify=\"center\"\n          padding={6}\n          sizing=\"border\"\n        >\n          <Text muted>Loadingâ€¦</Text>\n          <Spinner muted />\n        </Flex>\n      )\n    }\n\n    return (\n      <Stack space={4}>\n        <Heading align=\"center\" size={1}>\n          Choose login provider\n        </Heading>\n\n        <Stack space={2}>\n          {providers.map((provider, index) => (\n            <Button\n              // eslint-disable-next-line react/no-array-index-key\n              icon={providerLogos[provider.name]}\n              key={`${provider.url}_${index}`}\n              as=\"a\"\n              href={createHrefForProvider({\n                loginMethod,\n                projectId,\n                url: provider.url,\n                basePath,\n              })}\n              mode=\"ghost\"\n              text={provider.title}\n            />\n          ))}\n        </Stack>\n      </Stack>\n    )\n  }\n\n  return LoginComponent\n}\n","import createClient, {SanityClient} from '@sanity/client'\nimport {defer} from 'rxjs'\nimport {map, shareReplay, startWith, switchMap} from 'rxjs/operators'\nimport {memoize} from 'lodash'\nimport {CorsOriginError} from '../cors'\nimport {AuthState, AuthStore} from './types'\nimport {createBroadcastChannel} from './createBroadcastChannel'\nimport {sessionId} from './sessionId'\nimport * as storage from './storage'\nimport {createLoginComponent} from './createLoginComponent'\n\nexport interface AuthProvider {\n  name: string\n  title: string\n  url: string\n  logo?: string\n}\n\nexport interface AuthStoreOptions {\n  projectId: string\n  dataset: string\n  /**\n   * Login method to use for the studio the studio. Can be one of:\n   * - `dual` (default) - attempt to use cookies where possible, falling back to\n   *   storing authentication token in `localStorage` otherwise\n   * - `cookie` - explicitly disable `localStorage` method, relying only on\n   *   cookies\n   */\n  loginMethod?: 'dual' | 'cookie'\n  /**\n   * Append the custom providers to the default providers or replace them.\n   */\n  mode?: 'append' | 'replace'\n  /**\n   * If true, don't show the choose provider logo screen, automatically redirect\n   * to the single provider login\n   */\n  redirectOnSingle?: boolean\n  /**\n   * The custom provider implementations\n   */\n  providers?: AuthProvider[]\n}\n\nconst getStorageKey = (projectId: string) => {\n  // Project ID is part of the localStorage key so that different projects can\n  // store their separate tokens, and it's easier to do book keeping.\n  if (!projectId) throw new Error('Invalid project id')\n  return `__studio_auth_token_${projectId}`\n}\n\nconst getToken = (projectId: string): string | null => {\n  try {\n    const item = storage.getItem(getStorageKey(projectId))\n    if (item) {\n      const {token} = JSON.parse(item) as {token: string}\n      if (token && typeof token === 'string') {\n        return token\n      }\n    }\n  } catch (err) {\n    console.error(err)\n  }\n  return null\n}\n\nconst clearToken = (projectId: string): void => {\n  try {\n    storage.removeItem(getStorageKey(projectId))\n  } catch (err) {\n    console.error(err)\n  }\n}\n\nconst saveToken = ({token, projectId}: {token: string; projectId: string}): void => {\n  try {\n    storage.setItem(\n      getStorageKey(projectId),\n      JSON.stringify({token, time: new Date().toISOString()})\n    )\n  } catch (err) {\n    console.error(err)\n  }\n}\n\nconst getCurrentUser = async (\n  client: SanityClient,\n  broadcastToken: (token: string | null) => void\n) => {\n  try {\n    const user = await client.request({\n      uri: '/users/me',\n      withCredentials: true,\n      tag: 'users.get-current',\n    })\n\n    // if the user came back with an id, assume it's a full CurrentUser\n    return typeof user?.id === 'string' ? user : null\n  } catch (err) {\n    // 401 means the user had some kind of credentials, but failed to authenticate,\n    // we should clear any local token in this case and treat it as if the used was\n    // logged out\n    if (err.statusCode === 401) {\n      clearToken(client.config().projectId || '')\n      broadcastToken(null)\n      return null\n    }\n\n    // Request failed for a non-auth reason, see if this was a CORS-error by\n    // checking the `/ping` endpoint, which allows all origins\n    const invalidCorsConfig = await client\n      .request({uri: '/ping', withCredentials: false, tag: 'cors-check'})\n      .then(\n        () => true, // Request succeeded, so likely the CORS origin is disallowed\n        () => false // Request failed, so likely a network error of some kind\n      )\n\n    if (invalidCorsConfig) {\n      // Throw a specific error on CORS-errors, to allow us to show a customized dialog\n      throw new CorsOriginError({projectId: client.config()?.projectId})\n    }\n\n    // Some non-CORS error - is it one of those undefinable network errors?\n    if (err.isNetworkError && !err.message && err.request && err.request.url) {\n      const host = new URL(err.request.url).host\n      throw new Error(`Unknown network error attempting to reach ${host}`)\n    }\n\n    // Some other error, just throw it\n    throw err\n  }\n}\n\n/**\n * @internal\n */\nexport function _createAuthStore({\n  projectId,\n  dataset,\n  loginMethod = 'dual',\n  ...providerOptions\n}: AuthStoreOptions): AuthStore {\n  // this broadcast channel receives either a token as a `string` or `null`.\n  // a new client will be created from it, otherwise, it'll only trigger a retry\n  // for cookie-based auth\n  const {broadcast, messages} = createBroadcastChannel<string | null>(`dual_mode_auth_${projectId}`)\n\n  // // TODO: there is currently a bug where the AuthBoundary flashes the\n  // // `NotAuthenticatedComponent` on the first load after a login with\n  // // cookieless mode. A potential solution to fix this bug is to delay\n  // // emitting `state$` until the session ID has been converted to a token\n  // const firstMessage = messages.pipe(first())\n\n  const token$ = messages.pipe(startWith(loginMethod === 'dual' ? getToken(projectId) : null))\n\n  const state$ = token$.pipe(\n    // // see above\n    // debounce(() => firstMessage),\n    map((token) =>\n      createClient({\n        projectId,\n        dataset,\n        apiVersion: '2021-06-07',\n        useCdn: false,\n        ...(token && {token}),\n        withCredentials: true,\n        requestTagPrefix: 'sanity.studio',\n        ignoreBrowserTokenWarning: true,\n        allowReconfigure: false,\n      })\n    ),\n    switchMap((client) =>\n      defer(async (): Promise<AuthState> => {\n        const currentUser = await getCurrentUser(client, broadcast)\n\n        return {\n          currentUser,\n          client,\n          authenticated: !!currentUser,\n        }\n      })\n    ),\n    shareReplay(1)\n  )\n\n  async function handleCallbackUrl() {\n    if (sessionId && loginMethod === 'dual') {\n      const requestClient = createClient({\n        projectId,\n        dataset,\n        useCdn: true,\n        withCredentials: true,\n        apiVersion: '2021-06-07',\n        requestTagPrefix: 'sanity.studio',\n      })\n\n      // try to get the current user by using the cookie credentials\n      const currentUser = await getCurrentUser(requestClient, broadcast)\n\n      if (currentUser) {\n        // if that worked, then we don't need to fetch a token\n        broadcast(null)\n      } else {\n        // if that didn't work, then we need to trade the session ID for a token\n        const {token} = await requestClient.request<{token: string}>({\n          method: 'GET',\n          uri: `/auth/fetch`,\n          query: {sid: sessionId},\n          tag: 'auth.fetch-token',\n        })\n\n        saveToken({token, projectId})\n        broadcast(token)\n      }\n    } else {\n      broadcast(loginMethod === 'dual' ? getToken(projectId) : null)\n    }\n  }\n\n  async function logout() {\n    const requestClient = createClient({\n      projectId,\n      dataset,\n      useCdn: true,\n      withCredentials: true,\n      apiVersion: '2021-06-07',\n      requestTagPrefix: 'sanity.studio',\n    })\n\n    clearToken(projectId)\n    await requestClient.auth.logout()\n    broadcast(null)\n  }\n\n  const LoginComponent = createLoginComponent({\n    ...providerOptions,\n    getClient: () => state$.pipe(map((state) => state.client)),\n    loginMethod,\n  })\n\n  return {\n    handleCallbackUrl,\n    token: token$,\n    state: state$,\n    LoginComponent,\n    logout,\n  }\n}\n\nfunction hash(value: unknown): string {\n  if (typeof value !== 'object' || value === null) return `${value}`\n\n  // note: this code path works for arrays as well as objects\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(value)\n        .sort(([a], [b]) => a.localeCompare(b, 'en'))\n        .map(([k, v]) => [k, hash(v)])\n    )\n  )\n}\n\n/**\n * @public\n */\nconst createAuthStore = memoize(_createAuthStore, hash)\n\nexport {createAuthStore}\n","import {Observable, OperatorFunction} from 'rxjs'\nimport {catchError, tap} from 'rxjs/operators'\n\ntype Selector<T, K> = (error: any, attemptNo: number, caught: Observable<T>) => Observable<K>\n\nexport function catchWithCount<T, K = T>(selector: Selector<T, K>): OperatorFunction<T, K>\n\nexport function catchWithCount<T, K = T>(selector: Selector<T, K>) {\n  return (input$: Observable<T>) => {\n    let errors: any[] = []\n\n    const errorOp: OperatorFunction<any, any> = catchError((err, caught: Observable<T>) => {\n      errors.push(err)\n      return selector(err, errors.length, caught).pipe(errorOp)\n    })\n    return input$.pipe(\n      tap(() => {\n        errors = []\n      }),\n      errorOp\n    )\n  }\n}\n","import {BifurClient} from '@sanity/bifur-client'\nimport {observableCallback} from 'observable-callback'\nimport {map, mergeMapTo, startWith, take, takeUntil} from 'rxjs/operators'\nimport {concat, fromEvent, merge, NEVER, Observable, of, throwError, timer} from 'rxjs'\nimport {catchWithCount} from './utils/catchWithCount'\n\nexport interface ConnectionStatusStore {\n  connectionStatus$: Observable<ConnectionStatus>\n}\n\nconst onOnline$ = typeof window === 'undefined' ? of({}) : fromEvent(window, 'online')\nconst onOffline$ = typeof window === 'undefined' ? of({}) : fromEvent(window, 'offline')\n\nconst expBackoff = (retryCount: number) => Math.pow(2, retryCount) * 100\n\nexport type ConnectingStatus = {\n  type: 'connecting'\n}\n\nexport type ErrorStatus = {\n  type: 'error'\n  error: Error\n  attemptNo: number\n  isOffline: boolean\n  retryAt: Date\n}\n\nexport type RetryingStatus = {\n  type: 'retrying'\n}\n\nexport type ConnectedStatus = {type: 'connected'; lastHeartbeat: Date}\n\nexport const CONNECTING: ConnectingStatus = {type: 'connecting'}\n\nexport type ConnectionStatus = ConnectingStatus | ErrorStatus | ConnectedStatus | RetryingStatus\n\nconst [onRetry$, onRetry] = observableCallback()\n\nexport {onRetry}\n\nconst createErrorStatus = ({\n  error,\n  isOffline,\n  attemptNo,\n  retryAt,\n}: {\n  error: Error\n  isOffline: boolean\n  attemptNo: number\n  retryAt: Date\n}): ErrorStatus => ({\n  type: 'error',\n  error,\n  attemptNo,\n  isOffline,\n  retryAt,\n})\n\nexport interface ConnectionStatusStoreOptions {\n  bifur: BifurClient\n}\n/**\n * This is the beginning of what should be the data store tracking connection status in the Sanity studio.\n */\n\nexport function createConnectionStatusStore({\n  bifur,\n}: ConnectionStatusStoreOptions): ConnectionStatusStore {\n  const connectionStatus$: Observable<ConnectionStatus> = merge(\n    bifur.heartbeats,\n    onOffline$.pipe(mergeMapTo(throwError(new Error('The browser went offline'))))\n  ).pipe(\n    map((ts): ConnectionStatus => ({type: 'connected', lastHeartbeat: ts})),\n    catchWithCount((error, successiveErrorsCount, caught) => {\n      const timeUntilRetry = Math.min(1000 * 240, expBackoff(successiveErrorsCount))\n      const retryAt = new Date(new Date().getTime() + timeUntilRetry)\n      const expiry$ = timer(retryAt)\n      const isOffline = !navigator.onLine\n      const initialErrorStatus = createErrorStatus({\n        error,\n        retryAt,\n        isOffline,\n        attemptNo: successiveErrorsCount,\n      })\n\n      const triggerRetry$ = NEVER.pipe(\n        takeUntil(isOffline ? onOnline$ : merge(expiry$, onOnline$, onRetry$))\n      )\n\n      return concat(of(initialErrorStatus), triggerRetry$.pipe(take(1)), caught)\n    }),\n    startWith(CONNECTING)\n  )\n\n  return {connectionStatus$}\n}\n","import {from, Observable, of} from 'rxjs'\nimport {filter, map, mergeMap, toArray} from 'rxjs/operators'\nimport {SanityClient} from '@sanity/client'\n\nexport interface CrossProjectTokenStore {\n  getTokenDocumentId: ({tokenId, projectId}: {tokenId?: string; projectId: string}) => string\n  getProjectIdFromTokenDocumentId: (id: string) => null | string\n  fetchCrossProjectToken: (\n    client: SanityClient,\n    {projectId, tokenId}: {projectId: string; tokenId?: string}\n  ) => Observable<string | undefined>\n  fetchAllCrossProjectTokens: () => Observable<\n    {\n      projectId: string\n      token: string\n    }[]\n  >\n}\n\nconst TOKEN_DOCUMENT_ID_BASE = `secrets.sanity.sharedContent`\n\nfunction isNonNullable<T>(value: T): value is NonNullable<T> {\n  return value !== null\n}\n\nexport interface CrossProjectTokenStoreOptions {\n  client: SanityClient\n}\n\n// eslint-disable-next-line camelcase\nexport function __tmp_wrap_crossProjectToken({\n  client: _client,\n}: CrossProjectTokenStoreOptions): CrossProjectTokenStore {\n  const versionedClient = _client.withConfig({apiVersion: '1'})\n\n  function fetchTokenDocument(client: SanityClient, id: string) {\n    return client.observable.fetch(`*[_id == $id]{_id, _type, _updatedAt, token}[0]`, {\n      id,\n    })\n  }\n\n  return {\n    getTokenDocumentId,\n    getProjectIdFromTokenDocumentId,\n    fetchCrossProjectToken,\n    fetchAllCrossProjectTokens,\n  }\n\n  // export\n  function getTokenDocumentId({tokenId, projectId}: {tokenId?: string; projectId: string}) {\n    return [TOKEN_DOCUMENT_ID_BASE, projectId, tokenId].filter(Boolean).join('.')\n  }\n\n  // export\n  function getProjectIdFromTokenDocumentId(id: string): null | string {\n    if (!id.startsWith(TOKEN_DOCUMENT_ID_BASE)) {\n      return null\n    }\n    //prettier-ignore\n    const [/*secrets*/, /*sanity*/, /*sharedContent*/, projectId] = id.split('.')\n    return projectId\n  }\n\n  // export\n  function fetchCrossProjectToken(\n    client: SanityClient,\n    {projectId, tokenId}: {projectId: string; tokenId?: string}\n  ): Observable<string | undefined> {\n    if (client.config().projectId === projectId) {\n      return of(undefined)\n    }\n    return fetchTokenDocument(client, getTokenDocumentId({projectId, tokenId})).pipe(\n      map((tokenDoc) => tokenDoc.token)\n    )\n  }\n\n  // export\n  function fetchAllCrossProjectTokens(): Observable<\n    {\n      projectId: string\n      token: string\n    }[]\n  > {\n    return versionedClient.observable\n      .fetch(`*[_id in path(\"${TOKEN_DOCUMENT_ID_BASE}.**\")]{_id, _type, _updatedAt, token}`)\n      .pipe(\n        mergeMap((tokenDocs: {_id: string; token: string}[]) => from(tokenDocs)),\n        map((doc) => {\n          const projectId = getProjectIdFromTokenDocumentId(doc._id)\n          return projectId ? {projectId, token: doc.token} : null\n        }),\n        filter(isNonNullable),\n        toArray()\n      )\n  }\n}\n","import {Menu, MenuButton, MenuButtonProps, MenuDivider, MenuItem} from '@sanity/ui'\nimport React from 'react'\nimport {CollapseMenuProps} from './CollapseMenu'\n\nconst MENU_BUTTON_POPOVER_PROPS: MenuButtonProps['popover'] = {\n  portal: true,\n  constrainSize: true,\n}\n\nexport function CollapseOverflowMenu(\n  props: Pick<\n    CollapseMenuProps,\n    'disableRestoreFocusOnClose' | 'menuButtonProps' | 'onMenuClose'\n  > & {menuOptionsArray: React.ReactElement[]; menuButton: React.ReactElement}\n) {\n  const {disableRestoreFocusOnClose, menuButton, menuButtonProps, menuOptionsArray, onMenuClose} =\n    props\n\n  return (\n    <MenuButton\n      __unstable_disableRestoreFocusOnClose={disableRestoreFocusOnClose}\n      id=\"menu-button\"\n      onClose={onMenuClose}\n      popover={MENU_BUTTON_POPOVER_PROPS}\n      {...menuButtonProps}\n      button={menuButton}\n      menu={\n        <Menu>\n          {menuOptionsArray.map((c, index) => {\n            const {\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              collapsedProps = {},\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              expandedProps = {},\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              tooltipProps = {},\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              tooltipText,\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              dividerBefore,\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              fontSize,\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              padding,\n              text,\n              icon,\n              selected,\n              ...rest\n            } = c.props\n\n            return (\n              <React.Fragment key={c.key}>\n                {dividerBefore && index !== 0 && <MenuDivider />}\n                <MenuItem text={text} icon={icon} pressed={selected} {...rest} />\n              </React.Fragment>\n            )\n          })}\n        </Menu>\n      }\n    />\n  )\n}\n","import {Flex} from '@sanity/ui'\nimport React, {useEffect, useState} from 'react'\n\ninterface ObserveElementProps {\n  children: React.ReactElement\n  options?: IntersectionObserverInit\n  callback: IntersectionObserverCallback\n}\n\nexport function ObserveElement(props: ObserveElementProps) {\n  const {callback, children, options, ...rest} = props\n  const [el, setEl] = useState<HTMLDivElement | null>(null)\n\n  useEffect(() => {\n    if (!el) return undefined\n\n    const io = new IntersectionObserver(callback, options)\n    io.observe(el)\n\n    return () => {\n      io.unobserve(el)\n      io.disconnect()\n    }\n  }, [el, callback, options])\n\n  return (\n    <Flex ref={setEl} {...rest}>\n      {children}\n    </Flex>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst DividerDiv = styled.div`\n  border-right: 1px solid var(--card-border-color);\n  height: auto;\n\n  &[data-hidden] {\n    opacity: 0;\n  }\n`\n\ninterface CollapseMenuDividerProps {\n  hidden?: boolean\n}\n\nexport function CollapseMenuDivider(props: CollapseMenuDividerProps) {\n  const {hidden, ...rest} = props\n\n  return (\n    <DividerDiv data-ui=\"CollapseMenuDivider\" data-hidden={hidden ? '' : undefined} {...rest} />\n  )\n}\n","import {EllipsisVerticalIcon} from '@sanity/icons'\nimport {Box, Button, Flex, MenuButtonProps, Text, Tooltip, useElementRect} from '@sanity/ui'\nimport React, {cloneElement, forwardRef, useCallback, useMemo, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport {CollapseOverflowMenu} from './CollapseOverflowMenu'\nimport {ObserveElement} from './ObserveElement'\nimport {CollapseMenuDivider} from './CollapseMenuDivider'\n\nexport interface CollapseMenuProps {\n  children: React.ReactNode\n  collapsed?: boolean\n  collapseText?: boolean\n  disableRestoreFocusOnClose?: boolean\n  gap?: number | number[]\n  menuButtonProps?: Omit<MenuButtonProps, 'id' | 'menu' | 'button'> & {\n    id?: string\n    button?: React.ReactElement\n  }\n  onMenuClose?: () => void\n}\n\nconst FOCUS_RING_PADDING = 3\n\nconst OPTION_STYLE = css`\n  list-style: none;\n  display: flex;\n  white-space: nowrap;\n\n  &[data-hidden='true'] {\n    opacity: 0;\n    visibility: hidden;\n  }\n`\n\nconst OuterFlex = styled(Flex)`\n  padding: ${FOCUS_RING_PADDING}px;\n  margin: -${FOCUS_RING_PADDING}px;\n  box-sizing: border-box;\n`\n\nconst RootFlex = styled(Flex)`\n  border-radius: inherit;\n  position: relative;\n`\n\nconst RowFlex = styled(Flex)`\n  width: max-content;\n\n  &[data-hidden='true'] {\n    height: 0px;\n    visibility: hidden;\n  }\n`\n\nconst OptionObserveElement = styled(ObserveElement)`\n  ${OPTION_STYLE}\n`\n\nconst OptionHiddenFlex = styled(Flex)`\n  ${OPTION_STYLE}\n`\n\nfunction _isReactElement(node: unknown): node is React.ReactElement {\n  return Boolean(node)\n}\n\nexport const CollapseMenu = forwardRef(function CollapseMenu(\n  props: CollapseMenuProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {\n    children: childrenProp,\n    collapsed,\n    collapseText = true,\n    disableRestoreFocusOnClose,\n    gap,\n    menuButtonProps,\n    onMenuClose,\n  } = props\n  const [rootEl, setRootEl] = useState<HTMLDivElement | null>(null)\n  const [hiddenRowEl, setHiddenRowEl] = useState<HTMLDivElement | null>(null)\n  const rootRect = useElementRect(rootEl)\n  const [menuOptions, setMenuOptions] = useState<React.ReactElement[]>([])\n\n  const hasOverflow = useMemo(() => {\n    if (rootRect && rootEl && hiddenRowEl) {\n      return rootRect.width < hiddenRowEl.scrollWidth\n    }\n    return false\n  }, [hiddenRowEl, rootEl, rootRect])\n\n  const menuButton = useMemo(\n    () => menuButtonProps?.button || <Button icon={EllipsisVerticalIcon} mode=\"bleed\" />,\n    [menuButtonProps]\n  )\n\n  const intersectionOptions = useMemo(\n    () => ({\n      root: rootEl,\n      threshold: 1,\n      rootMargin: '2px',\n    }),\n    [rootEl]\n  )\n\n  const children = useMemo(\n    () => React.Children.toArray(childrenProp).filter(_isReactElement),\n    [childrenProp]\n  )\n\n  const menuOptionsArray = useMemo(\n    // eslint-disable-next-line max-nested-callbacks\n    () => children.filter(({key}) => menuOptions.find((o: React.ReactElement) => o.key === key)),\n    [children, menuOptions]\n  )\n\n  const menuIsVisible = useMemo(\n    () => collapsed || menuOptionsArray.length > 0,\n    [collapsed, menuOptionsArray.length]\n  )\n\n  const isInMenu = useCallback(\n    (childKey) => menuOptionsArray.some((o) => o.key === childKey),\n    [menuOptionsArray]\n  )\n\n  const handleIntersection = useCallback(\n    (e: IntersectionObserverEntry, child: React.ReactElement) => {\n      const exists = isInMenu(child.key)\n\n      if (!e.isIntersecting && !exists) {\n        setMenuOptions((prev) => [child, ...prev])\n      }\n\n      if (e.isIntersecting && exists) {\n        const updatedOptions = menuOptionsArray.filter(({key}) => key !== child.key)\n\n        setMenuOptions(updatedOptions)\n      }\n    },\n    [isInMenu, menuOptionsArray]\n  )\n\n  const items = useMemo(\n    () =>\n      children.map((child) => {\n        const {collapsedProps, expandedProps} = child.props\n        const modeProps = hasOverflow ? collapsedProps : expandedProps\n        const text = hasOverflow && collapseText ? undefined : child.props.text\n\n        return cloneElement(child, {\n          ...modeProps,\n          text: text,\n        })\n      }),\n    [children, collapseText, hasOverflow]\n  )\n\n  if (collapsed) {\n    return (\n      <CollapseOverflowMenu\n        disableRestoreFocusOnClose={disableRestoreFocusOnClose}\n        menuButton={menuButton}\n        menuButtonProps={menuButtonProps}\n        menuOptionsArray={children}\n        onMenuClose={onMenuClose}\n      />\n    )\n  }\n\n  return (\n    <OuterFlex align=\"center\" data-ui=\"CollapseMenu\" overflow=\"hidden\" sizing=\"border\" ref={ref}>\n      <RootFlex direction=\"column\" flex={1} justify=\"center\" ref={setRootEl}>\n        {/* Content */}\n        <RowFlex gap={gap}>\n          {items.map((child, index) => {\n            const {dividerBefore, tooltipText = '', tooltipProps = {}} = child.props\n            const hidden = isInMenu(child.key)\n\n            return (\n              <React.Fragment key={child.key}>\n                {dividerBefore && index !== 0 && <CollapseMenuDivider hidden={hidden} />}\n\n                <OptionObserveElement\n                  options={intersectionOptions}\n                  // eslint-disable-next-line react/jsx-no-bind\n                  callback={(e) => handleIntersection(e[0], child)}\n                  aria-hidden={hidden}\n                  data-hidden={hidden}\n                >\n                  <Tooltip\n                    portal\n                    disabled={!tooltipText}\n                    content={\n                      <Box padding={2} sizing=\"border\">\n                        <Text size={1}>{tooltipText}</Text>\n                      </Box>\n                    }\n                    {...tooltipProps}\n                  >\n                    <Flex>\n                      {cloneElement(child, {\n                        disabled: child.props.disabled || hidden,\n                        'aria-hidden': hidden,\n                      })}\n                    </Flex>\n                  </Tooltip>\n                </OptionObserveElement>\n              </React.Fragment>\n            )\n          })}\n        </RowFlex>\n\n        {/* Hidden row used to detect when to collapse/collapse the layout  */}\n        <RowFlex data-hidden aria-hidden=\"true\" gap={gap} ref={setHiddenRowEl}>\n          {children.map((child, index) => {\n            const {dividerBefore} = child.props\n\n            return (\n              <React.Fragment key={child.key}>\n                {dividerBefore && index !== 0 && <CollapseMenuDivider />}\n                <OptionHiddenFlex key={child.key}>\n                  {cloneElement(child, {\n                    disabled: true,\n                    'aria-hidden': true,\n                  })}\n                </OptionHiddenFlex>\n              </React.Fragment>\n            )\n          })}\n        </RowFlex>\n      </RootFlex>\n\n      {menuIsVisible && (\n        <Flex marginLeft={gap}>\n          <CollapseOverflowMenu\n            disableRestoreFocusOnClose={disableRestoreFocusOnClose}\n            menuButton={menuButton}\n            menuButtonProps={menuButtonProps}\n            menuOptionsArray={menuOptionsArray}\n            onMenuClose={onMenuClose}\n          />\n        </Flex>\n      )}\n    </OuterFlex>\n  )\n})\n","import {Button, ButtonProps, TooltipProps} from '@sanity/ui'\nimport React, {forwardRef} from 'react'\n\nexport interface CommonProps extends Omit<ButtonProps, 'text' | 'icon' | 'iconRight'> {\n  as?: React.ElementType | keyof JSX.IntrinsicElements\n  dividerBefore?: boolean\n  focused?: boolean\n  tooltipProps?: TooltipProps\n  tooltipText?: React.ReactNode\n  icon?: React.ReactNode\n}\nexport interface CollapseMenuButtonProps extends CommonProps {\n  collapsedProps?: Omit<CommonProps, 'text'>\n  expandedProps?: CommonProps\n  icon: React.ReactNode\n  text: React.ReactNode\n}\n\nexport const CollapseMenuButton = forwardRef(function CollapseMenuButton(\n  props: CollapseMenuButtonProps & Omit<React.HTMLProps<HTMLButtonElement>, 'as'>,\n  ref: React.ForwardedRef<HTMLButtonElement>\n) {\n  const {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    collapsedProps = {},\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    expandedProps = {},\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    tooltipProps = {},\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    tooltipText,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    dividerBefore,\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ...rest\n  } = props\n\n  return <Button data-ui=\"CollapseMenuButton\" {...rest} ref={ref} />\n})\n","import {useCallback, useEffect, useState} from 'react'\nimport {RovingFocusProps} from './types'\n\nconst MUTATION_ATTRIBUTE_FILTER = ['aria-hidden', 'disabled', 'href']\n\nconst FOCUSABLE =\n  'a[href], button, input, textarea, select, details, [tabindex]:not([tabindex=\"-1\"])'\n\nfunction getFocusableElements(element: HTMLElement) {\n  return [...(element.querySelectorAll(FOCUSABLE) as any)].filter(\n    (el) => !el.hasAttribute('disabled') && el.getAttribute('aria-hidden') !== 'true'\n  ) as HTMLElement[]\n}\n\n/**\n * This hook handles focus with the keyboard arrows.\n *\n * @see {@link https://a11y-solutions.stevenwoodson.com/solutions/focus/roving-focus/ | Roving focus definition}\n *\n * @example\n * ```tsx\n * function MyComponent() {\n *   const [rootElement, setRootElement] = setRootElement(null)\n *\n *   useRovingFocus({\n *     rootElement: rootElement,\n *   })\n *\n *   return (\n *     <div ref={setRootElement}>\n *       <button>Button</button>\n *       <button>Button</button>\n *       <button>Button</button>\n *     </div>\n *   )\n * }\n * ```\n */\nexport function useRovingFocus(props: RovingFocusProps): undefined {\n  const {\n    direction = 'horizontal',\n    initialFocus,\n    loop = true,\n    navigation = ['arrows'],\n    pause = false,\n    rootElement,\n  } = props\n  const [focusedIndex, setFocusedIndex] = useState<number>(-1)\n  const [focusableElements, setFocusableElements] = useState<HTMLElement[]>([])\n\n  const focusableLen = focusableElements.length\n  const lastFocusableIndex = focusableLen - 1\n\n  /**\n   * Determine what keys to listen to depending on direction\n   */\n  const nextKey = direction === 'horizontal' ? 'ArrowRight' : 'ArrowDown'\n  const prevKey = direction === 'horizontal' ? 'ArrowLeft' : 'ArrowUp'\n\n  /**\n   * Set focusable elements in state\n   */\n  const handleSetElements = useCallback(() => {\n    if (rootElement) {\n      const els = getFocusableElements(rootElement)\n\n      setFocusableElements(els)\n    }\n  }, [rootElement])\n\n  /**\n   * Set focused index\n   */\n  const handleFocus = useCallback((index: number) => {\n    setFocusedIndex(index)\n  }, [])\n\n  /**\n   * Handle increment/decrement of focusedIndex\n   */\n  const handleKeyDown = useCallback(\n    (event) => {\n      if (pause) {\n        return\n      }\n\n      const focusPrev = () => {\n        event.preventDefault()\n        setFocusedIndex((prevIndex) => {\n          const next = (prevIndex + lastFocusableIndex) % focusableLen\n\n          if (!loop && next === lastFocusableIndex) {\n            return prevIndex\n          }\n\n          return next\n        })\n      }\n\n      const focusNext = () => {\n        event.preventDefault()\n        setFocusedIndex((prevIndex) => {\n          const next = (prevIndex + 1) % focusableLen\n\n          if (!loop && next === 0) {\n            return prevIndex\n          }\n\n          return next\n        })\n      }\n\n      if (event.key === 'Tab' && navigation.includes('tab')) {\n        if (event.shiftKey) {\n          focusPrev()\n        } else {\n          focusNext()\n        }\n      }\n\n      if (navigation.includes('arrows')) {\n        if (event.key === prevKey) {\n          focusPrev()\n        }\n\n        if (event.key === nextKey) {\n          focusNext()\n        }\n      }\n    },\n    [pause, prevKey, navigation, nextKey, lastFocusableIndex, focusableLen, loop]\n  )\n\n  /**\n   * Set focusable elements on mount\n   */\n  useEffect(() => {\n    handleSetElements()\n  }, [handleSetElements, initialFocus, direction])\n\n  /**\n   * Listen to DOM mutations to update focusableElements with latest state\n   */\n  useEffect(() => {\n    const mo = new MutationObserver(handleSetElements)\n\n    if (rootElement) {\n      mo.observe(rootElement, {\n        childList: true,\n        subtree: true,\n        attributeFilter: MUTATION_ATTRIBUTE_FILTER,\n      })\n    }\n\n    return () => {\n      mo.disconnect()\n    }\n  }, [focusableElements, handleSetElements, rootElement])\n\n  /**\n   * Set focus on elements in focusableElements depending on focusedIndex\n   */\n  useEffect(() => {\n    focusableElements.forEach((el, index) => {\n      if (index === focusedIndex) {\n        el.setAttribute('tabIndex', '0')\n        el.setAttribute('aria-selected', 'true')\n        el.focus()\n        el.onfocus = () => handleFocus(index)\n        el.onblur = () => handleFocus(-1)\n      } else {\n        el.setAttribute('tabIndex', '-1')\n        el.setAttribute('aria-selected', 'false')\n        el.onfocus = () => handleFocus(index)\n      }\n    })\n\n    if (focusedIndex === -1 && focusableElements) {\n      const initialIndex = initialFocus === 'last' ? lastFocusableIndex : 0\n      focusableElements[initialIndex]?.setAttribute('tabIndex', '0')\n    }\n  }, [focusableElements, focusedIndex, handleFocus, initialFocus, lastFocusableIndex])\n\n  /**\n   * Listen to key down events on rootElement\n   */\n  useEffect(() => {\n    rootElement?.addEventListener('keydown', handleKeyDown)\n\n    return () => {\n      rootElement?.removeEventListener('keydown', handleKeyDown)\n    }\n  }, [handleKeyDown, rootElement])\n\n  return undefined\n}\n","import React, {createContext, useContext, useEffect, useMemo, useState} from 'react'\nimport {studioTheme, ThemeColorSchemeKey, ThemeProvider, usePrefersDark} from '@sanity/ui'\n\nconst ColorSchemeContext = createContext<{\n  scheme: ThemeColorSchemeKey\n  setScheme: (colorScheme: ThemeColorSchemeKey) => void\n} | null>(null)\n\ninterface ColorSchemeProviderProps {\n  children: React.ReactNode\n  onSchemeChange?: (nextScheme: ThemeColorSchemeKey) => void\n  scheme?: ThemeColorSchemeKey\n}\n\nexport function ColorSchemeProvider({\n  children,\n  onSchemeChange,\n  scheme: schemeProp,\n}: ColorSchemeProviderProps) {\n  const prefersDark = usePrefersDark()\n  const [scheme, setScheme] = useState<ThemeColorSchemeKey>(schemeProp || 'light')\n\n  // if the preferred color scheme changes, then react to this change\n  useEffect(() => {\n    const nextScheme = prefersDark ? 'dark' : 'light'\n    setScheme(nextScheme)\n    onSchemeChange?.(nextScheme)\n  }, [onSchemeChange, prefersDark])\n\n  const colorScheme = useMemo(() => ({scheme, setScheme}), [scheme])\n\n  return (\n    <ColorSchemeContext.Provider value={colorScheme}>\n      {/* Note: this is a fallback ThemeProvider that is for any components */}\n      {/* that may render before the StudioThemeProvider renders. this is */}\n      {/* required because the StudioThemeProvider has a dependence on the */}\n      {/* active workspace provided via the ActiveWorkspaceMatcher */}\n      <ThemeProvider scheme={scheme} theme={studioTheme}>\n        {children}\n      </ThemeProvider>\n    </ColorSchemeContext.Provider>\n  )\n}\n\nexport function useColorScheme() {\n  const value = useContext(ColorSchemeContext)\n  if (!value) throw new Error('Could not find `colorScheme` context')\n  return value\n}\n","import React from 'react'\nimport {RouterContextValue} from './types'\n\n/**\n * @internal\n */\nexport const RouterContext = React.createContext<RouterContextValue | null>(null)\n","import {useContext} from 'react'\nimport {RouterContext} from './RouterContext'\nimport {RouterContextValue} from './types'\n\n/**\n * @public\n */\nexport function useRouter(): RouterContextValue {\n  const router = useContext(RouterContext)\n\n  if (!router) {\n    throw new Error('Router: missing context value')\n  }\n\n  return router\n}\n","import {useCallback} from 'react'\nimport {useRouter} from './useRouter'\n\nfunction isLeftClickEvent(event: React.MouseEvent) {\n  return event.button === 0\n}\n\nfunction isModifiedEvent(event: React.MouseEvent) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey)\n}\n\n/**\n * @public\n */\nexport function useLink(props: {\n  href?: string\n  onClick?: React.MouseEventHandler<HTMLElement>\n  replace?: boolean\n  target?: string\n}): {onClick: React.MouseEventHandler<HTMLElement>} {\n  const {onClick: onClickProp, href, target, replace = false} = props\n  const {navigateUrl} = useRouter()\n\n  const onClick = useCallback(\n    (event: React.MouseEvent<HTMLElement>): void => {\n      if (event.isDefaultPrevented()) {\n        return\n      }\n\n      if (!href) return\n\n      if (onClickProp) {\n        onClickProp(event)\n      }\n\n      if (isModifiedEvent(event) || !isLeftClickEvent(event)) {\n        return\n      }\n\n      // If target prop is set (e.g. to \"_blank\") let browser handle link.\n      if (target) {\n        return\n      }\n\n      event.preventDefault()\n\n      navigateUrl({path: href, replace})\n    },\n    [href, navigateUrl, onClickProp, replace, target]\n  )\n\n  return {onClick: onClick}\n}\n","import {IntentParameters} from './types'\nimport {useLink} from './useLink'\nimport {useRouter} from './useRouter'\n\n/**\n *\n * @example\n * ```tsx\n * import {useIntentLink} from 'sanity'\n *\n * const {onClick, href} = useIntentLink({\n *   intent: 'edit',\n *   params: {id: 'foo'}\n * })\n *\n * <a href={href} onClick={onClick}>Link to \"foo\" editor</a>\n * ```\n *\n * @public\n */\nexport function useIntentLink(props: {\n  intent: string\n  onClick?: React.MouseEventHandler<HTMLElement>\n  params?: IntentParameters\n  replace?: boolean\n  target?: string\n}): {\n  onClick: React.MouseEventHandler<HTMLElement>\n  href: string\n} {\n  const {intent, onClick: onClickProp, params, replace, target} = props\n  const {resolveIntentLink} = useRouter()\n  const href = resolveIntentLink(intent, params)\n  const {onClick} = useLink({href, onClick: onClickProp, replace, target})\n\n  return {onClick, href}\n}\n","import React, {ForwardedRef, forwardRef} from 'react'\nimport {IntentParameters} from './types'\nimport {useIntentLink} from './useIntentLink'\n\n/**\n * @public\n */\nexport interface IntentLinkProps {\n  intent: string\n  params?: IntentParameters\n  replace?: boolean\n}\n\n/**\n * @public\n */\nexport const IntentLink = forwardRef(function IntentLink(\n  props: IntentLinkProps & React.HTMLProps<HTMLAnchorElement>,\n  ref: ForwardedRef<HTMLAnchorElement>\n) {\n  const {intent, params, target, ...restProps} = props\n  const {onClick, href} = useIntentLink({\n    intent,\n    params,\n    target,\n    onClick: props.onClick,\n  })\n\n  return <a {...restProps} href={href} onClick={onClick} ref={ref} target={target} />\n})\n","import React, {forwardRef} from 'react'\nimport {useLink} from './useLink'\n\n/**\n * @public\n */\nexport interface LinkProps {\n  replace?: boolean\n}\n\n/**\n * @public\n */\nexport const Link = forwardRef(function Link(\n  props: LinkProps & React.HTMLProps<HTMLAnchorElement>,\n  ref: React.ForwardedRef<HTMLAnchorElement>\n) {\n  const {onClick: onClickProp, href, target, replace, ...restProps} = props\n  const {onClick} = useLink({onClick: onClickProp, href, target, replace})\n\n  return <a {...restProps} onClick={onClick} href={href} target={target} ref={ref} />\n})\n","const _hasOWn = Object.prototype.hasOwnProperty\n\nexport const hasOwn = _hasOWn.call.bind(_hasOWn)\n","import {hasOwn} from './hasOwn'\n\nexport function isEmpty(object: Record<string, unknown>): boolean {\n  for (const key in object) {\n    if (hasOwn(object, key)) {\n      return false\n    }\n  }\n\n  return true\n}\n","/* eslint-disable camelcase */\n\nimport React, {useCallback, useMemo} from 'react'\nimport {isEmpty} from './utils/isEmpty'\nimport {RouterContext} from './RouterContext'\nimport {NavigateOptions, RouterContextValue} from './types'\nimport {useRouter} from './useRouter'\n\nfunction addScope(\n  routerState: Record<string, any>,\n  scope: string,\n  scopedState: Record<string, any>\n) {\n  return (\n    scopedState && {\n      ...routerState,\n      [scope]: scopedState,\n    }\n  )\n}\n\n/**\n * @public\n */\nexport interface RouteScopeProps {\n  scope: string\n  children: React.ReactNode\n}\n\n/**\n * @public\n */\nexport function RouteScope(props: RouteScopeProps): React.ReactElement {\n  const {children, scope} = props\n  const parent = useRouter()\n  const {resolvePathFromState: parent_resolvePathFromState, navigate: parent_navigate} = parent\n\n  const resolvePathFromState = useCallback(\n    (nextState: Record<string, any>): string => {\n      const nextStateScoped: Record<string, any> = isEmpty(nextState)\n        ? {}\n        : addScope(parent.state, scope, nextState)\n\n      return parent_resolvePathFromState(nextStateScoped)\n    },\n    [parent_resolvePathFromState, parent.state, scope]\n  )\n\n  const navigate = useCallback(\n    (nextState: Record<string, any>, options?: NavigateOptions): void => {\n      const nextScopedState = addScope(parent.state, scope, nextState)\n      parent_navigate(nextScopedState, options)\n    },\n    [parent_navigate, parent.state, scope]\n  )\n\n  const scopedRouter: RouterContextValue = useMemo(\n    () => ({\n      ...parent,\n      navigate,\n      resolvePathFromState,\n      state: parent.state[scope] as any,\n    }),\n    [navigate, parent, resolvePathFromState, scope]\n  )\n\n  return <RouterContext.Provider value={scopedRouter}>{children}</RouterContext.Provider>\n}\n","import {isEqual} from 'lodash'\nimport React, {useCallback, useEffect, useMemo, useRef, useState} from 'react'\nimport {RouterContext} from './RouterContext'\nimport {IntentParameters, RouterContextValue, NavigateOptions, Router, RouterState} from './types'\n\n/**\n * @public\n */\nexport interface RouterProviderProps {\n  onNavigate: (opts: {path: string; replace?: boolean}) => void\n  router: Router\n  state: RouterState\n  children: React.ReactNode\n}\n\n/**\n * @example\n * ```tsx\n * import {\n *   NavigateOptions,\n *   route,\n *   RouterProvider,\n *   RouterState\n * } from 'sanity'\n * import {useCallback, useMemo} from 'react'\n *\n * function Root() {\n *   const router = useMemo(() => route.create('/'), [])\n *\n *   const [state, setState] = useState<RouterState>({})\n *\n *   const handleNavigate = useCallback((\n *     path: string,\n *     options?: NavigateOptions\n *   ) => {\n *     console.log('navigate', path, options)\n *\n *     setState(router.decode(path))\n *   }, [router])\n *\n *   return (\n *     <RouterProvider\n *       onNavigate={handleNavigate}\n *       router={router}\n *       state={state}\n *     >\n *       <div>This is a routed application</div>\n *     </RouterProvider>\n *   )\n * }\n * ```\n *\n * @public\n */\nexport function RouterProvider(props: RouterProviderProps): React.ReactElement {\n  // TODO: can we do nested routes?\n  const {onNavigate, router: routerProp, state: stateProp} = props\n  const [state, setState] = useState<RouterState>(stateProp)\n  const stateRef = useRef(state)\n\n  const navigateUrl = useCallback(\n    (opts: {path: string; replace?: boolean}) => {\n      onNavigate(opts)\n    },\n    [onNavigate]\n  )\n\n  const resolveIntentLink = useCallback(\n    (intentName: string, parameters?: IntentParameters): string => {\n      const [params, payload] = Array.isArray(parameters) ? parameters : [parameters]\n      return routerProp.encode({intent: intentName, params, payload})\n    },\n    [routerProp]\n  )\n\n  const resolvePathFromState = useCallback(\n    (nextState: Record<string, unknown>): string => {\n      return routerProp.encode(nextState)\n    },\n    [routerProp]\n  )\n\n  const navigate = useCallback(\n    (nextState: Record<string, unknown>, options: NavigateOptions = {}) => {\n      navigateUrl({path: resolvePathFromState(nextState), replace: options.replace})\n    },\n    [navigateUrl, resolvePathFromState]\n  )\n\n  const navigateIntent = useCallback(\n    (intentName: string, params?: IntentParameters, options: NavigateOptions = {}) => {\n      navigateUrl({path: resolveIntentLink(intentName, params), replace: options.replace})\n    },\n    [navigateUrl, resolveIntentLink]\n  )\n\n  const router: RouterContextValue = useMemo(\n    () => ({\n      navigate,\n      navigateIntent,\n      navigateUrl,\n      resolveIntentLink,\n      resolvePathFromState,\n      state,\n    }),\n    [navigate, navigateIntent, navigateUrl, resolveIntentLink, resolvePathFromState, state]\n  )\n\n  // Update state as new `state` prop comes in\n  useEffect(() => {\n    const prevState = stateRef.current\n    const nextState = stateProp\n\n    if (!isEqual(nextState, prevState)) {\n      setState(nextState)\n    }\n  }, [stateProp])\n\n  return <RouterContext.Provider value={router}>{props.children}</RouterContext.Provider>\n}\n","import React, {useMemo} from 'react'\nimport {useRouter} from './useRouter'\nimport {useLink} from './useLink'\n\nconst EMPTY_STATE = {}\n\n/**\n * @public\n */\nexport function useStateLink(props: {\n  onClick?: React.MouseEventHandler<HTMLElement>\n  replace?: boolean\n  state?: Record<string, unknown>\n  target?: string\n  toIndex?: boolean\n}): {\n  onClick: React.MouseEventHandler<HTMLElement>\n  href: string\n} {\n  const {onClick: onClickProp, replace, state, target, toIndex = false} = props\n\n  if (state && toIndex) {\n    throw new Error('Passing both `state` and `toIndex={true}` as props to StateLink is invalid')\n  }\n\n  if (!state && !toIndex) {\n    // eslint-disable-next-line no-console\n    console.error(\n      new Error(\n        'No state passed to StateLink. If you want to link to an empty state, its better to use the the `toIndex` property'\n      )\n    )\n  }\n\n  const {resolvePathFromState} = useRouter()\n\n  const href = useMemo(\n    () => resolvePathFromState(toIndex ? EMPTY_STATE : state || EMPTY_STATE),\n    [resolvePathFromState, state, toIndex]\n  )\n\n  const {onClick} = useLink({href, onClick: onClickProp, replace, target})\n\n  return {onClick, href}\n}\n","import React, {forwardRef} from 'react'\nimport {useStateLink} from './useStateLink'\n\n/**\n * @public\n */\nexport interface StateLinkProps {\n  replace?: boolean\n  state?: Record<string, unknown>\n  toIndex?: boolean\n}\n\n/**\n * @public\n */\nexport const StateLink = forwardRef(function StateLink(\n  props: StateLinkProps & Omit<React.HTMLProps<HTMLAnchorElement>, 'href'>,\n  ref: React.ForwardedRef<HTMLAnchorElement>\n) {\n  const {onClick: onClickProp, replace, state, target, toIndex = false, ...restProps} = props\n  const {onClick, href} = useStateLink({\n    onClick: onClickProp,\n    replace,\n    state,\n    target,\n    toIndex,\n  })\n\n  return <a {...restProps} href={href} onClick={onClick} ref={ref} />\n})\n","import {Route, RouteSegment} from './types'\n\nconst VALID_PARAM_SEGMENT = /^[a-zA-Z0-9_-]+$/\n\nfunction createSegment(segment: string): RouteSegment | null {\n  if (!segment) {\n    return null\n  }\n\n  if (segment.startsWith(':')) {\n    const paramName = segment.substring(1)\n\n    if (!VALID_PARAM_SEGMENT.test(paramName)) {\n      const addendum = segment.includes('*')\n        ? ' Splats are not supported. Consider using child routes instead'\n        : ''\n      // eslint-disable-next-line no-console\n      console.error(\n        new Error(`Warning: Param segments \"${segment}\" includes invalid characters.${addendum}`)\n      )\n    }\n\n    return {type: 'param', name: paramName}\n  }\n\n  return {type: 'dir', name: segment}\n}\n\n/** @internal */\nexport function _parseRoute(route: string): Route {\n  const [pathname] = route.split('?')\n\n  const segments = pathname.split('/').map(createSegment).filter(Boolean) as RouteSegment[]\n\n  return {\n    raw: route,\n    segments: segments,\n  }\n}\n","import Debug from 'debug'\n\nexport const debug = Debug('state-router')\n","export function arrayify<T>(val: Array<T> | T): Array<T> {\n  if (Array.isArray(val)) {\n    return val\n  }\n\n  return val ? [val] : []\n}\n","import {RouterNode} from './types'\nimport {debug} from './utils/debug'\nimport {arrayify} from './utils/arrayify'\n\nfunction matchPath(node: RouterNode, path: string): Record<string, string> | null {\n  const parts = path.split('/').filter(Boolean)\n  const segmentsLength = node.route.segments.length\n\n  if (parts.length < segmentsLength) {\n    return null\n  }\n\n  const state: Record<string, unknown> = {}\n  const isMatching = node.route.segments.every((segment, i) => {\n    if (segment.type === 'dir') {\n      return segment.name === parts[i]\n    }\n\n    const transform = node.transform && node.transform[segment.name]\n\n    state[segment.name] = transform ? transform.toState(parts[i]) : parts[i]\n\n    return true\n  })\n\n  if (!isMatching) {\n    return null\n  }\n\n  const rest = parts.slice(segmentsLength)\n\n  let childState: {\n    [key: string]: string\n  } | null = null\n\n  const children =\n    typeof node.children === 'function' ? arrayify(node.children(state)) : node.children\n\n  children.some((childNode) => {\n    // console.log('----childNode')\n    // console.log(childNode)\n    // console.log('----childNode')\n\n    if (childNode) {\n      childState = matchPath(childNode, rest.join('/'))\n\n      return childState\n    }\n\n    return undefined\n  })\n\n  if (rest.length > 0 && !childState) {\n    return null\n  }\n\n  const mergedState = {...state, ...(childState || {})}\n\n  return node.scope ? {[node.scope]: mergedState} : mergedState\n}\n\n/**\n * @internal\n */\nexport function _resolveStateFromPath(node: RouterNode, path: string): Record<string, any> | null {\n  debug('resolving state from path %s', path)\n\n  const pathMatch = matchPath(node, path.split('?')[0])\n\n  debug('resolved: %o', pathMatch || null)\n\n  return pathMatch || null\n}\n","import {difference, intersection, pick} from 'lodash'\nimport {isRecord} from '../util'\nimport {RouterNode, MatchResult} from './types'\nimport {arrayify} from './utils/arrayify'\n\nfunction createMatchResult(\n  nodes: RouterNode[],\n  missing: string[],\n  remaining: string[]\n): MatchResult {\n  return {nodes, missing, remaining}\n}\n\n/** @internal */\nexport function _findMatchingRoutes(\n  node: RouterNode,\n  _state?: Record<string, unknown>\n): MatchResult {\n  if (!_state) {\n    return createMatchResult([], [], [])\n  }\n\n  const state = node.scope ? _state[node.scope] : _state\n\n  const requiredParams = node.route.segments\n    .filter((seg) => seg.type === 'param')\n    .map((seg) => seg.name)\n\n  const stateKeys = isRecord(state) ? Object.keys(state) : []\n\n  const consumedParams = intersection(stateKeys, requiredParams)\n  const missingParams = difference(requiredParams, consumedParams)\n  const remainingParams = difference(stateKeys, consumedParams)\n\n  if (missingParams.length > 0) {\n    return createMatchResult([], missingParams, [])\n  }\n\n  if (remainingParams.length === 0) {\n    return createMatchResult([node], [], [])\n  }\n\n  const children = arrayify(\n    (typeof node.children === 'function'\n      ? node.children(isRecord(state) ? state : {})\n      : node.children) || []\n  )\n\n  if (remainingParams.length > 0 && children.length === 0) {\n    return createMatchResult([], remainingParams, [])\n  }\n\n  const remainingState = pick(state, remainingParams)\n\n  let matchingChild: MatchResult = {nodes: [], remaining: [], missing: []}\n\n  arrayify(children).some((childNode) => {\n    matchingChild = _findMatchingRoutes(childNode, remainingState)\n    return matchingChild.nodes.length > 0\n  })\n\n  if (matchingChild.nodes.length === 0) {\n    return createMatchResult([], missingParams, remainingParams)\n  }\n\n  return createMatchResult(\n    [node, ...matchingChild.nodes],\n    matchingChild.missing,\n    matchingChild.remaining\n  )\n}\n","import {flatten} from 'lodash'\nimport {_findMatchingRoutes} from './_findMatchingRoutes'\nimport {RouterNode, MatchResult} from './types'\nimport {debug} from './utils/debug'\n\n/** @internal */\nexport function _resolvePathFromState(node: RouterNode, state: Record<string, unknown>): string {\n  debug('Resolving path from state %o', state)\n\n  const match: MatchResult = _findMatchingRoutes(node, state)\n\n  if (match.remaining.length > 0) {\n    const remaining = match.remaining\n    throw new Error(\n      `Unable to find matching route for state. Could not map the following state key${\n        remaining.length == 1 ? '' : 's'\n      } to a valid url: ${remaining.join(', ')}`\n    )\n  }\n\n  if (match.nodes.length === 0) {\n    throw new Error(`Unable to resolve path from given state: ${JSON.stringify(state)}`)\n  }\n\n  let scopedState: Record<string, unknown> = state\n\n  const relative = flatten(\n    match.nodes.map((matchNode) => {\n      if (matchNode.scope && matchNode.scope in scopedState) {\n        scopedState = scopedState[matchNode.scope] as Record<string, unknown>\n      }\n\n      return matchNode.route.segments.map((segment) => {\n        if (segment.type === 'dir') {\n          return segment.name\n        }\n\n        const transform = matchNode.transform && matchNode.transform[segment.name]\n\n        return transform\n          ? transform.toPath(scopedState[segment.name] as any)\n          : scopedState[segment.name]\n      })\n    })\n  ).join('/')\n\n  debug('Resolved to /%s', relative)\n\n  return `/${relative}`\n}\n","export function decodeJsonParams(pathsegment = ''): Record<string, unknown> {\n  const segment = decodeURIComponent(pathsegment)\n\n  if (!segment) {\n    return {}\n  }\n\n  try {\n    return JSON.parse(atob(segment))\n  } catch (err) {\n    // Maybe try the old format (non-base64 encoded)\n  }\n\n  try {\n    return JSON.parse(segment)\n  } catch (err) {\n    console.warn('Failed to parse JSON parameters')\n  }\n\n  return {}\n}\n\nexport function encodeJsonParams(params?: Record<string, unknown>): string {\n  return params ? btoa(JSON.stringify(params)) : ''\n}\n","export function decodeParams(pathSegment: string): Record<string, string> {\n  return pathSegment.split(';').reduce<Record<string, string>>((params, pair) => {\n    const [key, value] = pair.split('=')\n\n    params[decodeURIComponent(key)] = decodeURIComponent(value)\n\n    return params\n  }, {})\n}\n\nexport function encodeParams(params: Record<string, string | undefined | null>): string {\n  return Object.entries(params)\n    .filter(([, value]) => value !== undefined && value !== null)\n    .map(([key, value]) => `${encodeURIComponent(key)}=${encodeURIComponent(value as string)}`)\n    .join(';')\n}\n","import {_parseRoute} from './_parseRoute'\nimport {_resolveStateFromPath} from './_resolveStateFromPath'\nimport {_resolvePathFromState} from './_resolvePathFromState'\nimport {RouteTransform, Router, RouteChildren} from './types'\nimport {decodeJsonParams, encodeJsonParams} from './utils/jsonParamsEncoding'\nimport {decodeParams, encodeParams} from './utils/paramsEncoding'\n\n/**\n * @public\n */\nexport type NodeOptions = {\n  path?: string\n  children?: RouteChildren\n  transform?: {\n    [key: string]: RouteTransform<any>\n  }\n  scope?: string\n}\n\n/**\n * @public\n */\nexport const route: {\n  create: (\n    routeOrOpts: NodeOptions | string,\n    childrenOrOpts?: NodeOptions | RouteChildren | null,\n    children?: Router | RouteChildren\n  ) => Router\n  intents: (base: string) => Router\n  scope: (scopeName: string, ...rest: any[]) => Router\n} = {create: createRoute, scope: routeScope, intents: routeIntents}\n\nfunction normalizeChildren(children: any): RouteChildren {\n  if (Array.isArray(children) || typeof children === 'function') {\n    return children\n  }\n  return children ? [children] : []\n}\n\nfunction isRoute(val?: NodeOptions | Router | RouteChildren) {\n  return val && '_isRoute' in val\n}\n\nfunction normalizeArgs(...args: any[]): NodeOptions\nfunction normalizeArgs(\n  path: string | NodeOptions,\n  childrenOrOpts?: NodeOptions | Router | RouteChildren,\n  children?: Router | RouteChildren\n): NodeOptions {\n  if (typeof path === 'object') {\n    return path\n  }\n\n  if (\n    Array.isArray(childrenOrOpts) ||\n    typeof childrenOrOpts === 'function' ||\n    isRoute(childrenOrOpts)\n  ) {\n    return {path, children: normalizeChildren(childrenOrOpts)}\n  }\n\n  if (children) {\n    return {path, ...childrenOrOpts, children: normalizeChildren(children)}\n  }\n\n  return {path, ...childrenOrOpts}\n}\n\nfunction createRoute(\n  routeOrOpts: NodeOptions | string,\n  childrenOrOpts?: NodeOptions | RouteChildren | null,\n  children?: Router | RouteChildren\n): Router {\n  return createNode(normalizeArgs(routeOrOpts, childrenOrOpts, children))\n}\n\nfunction routeScope(scopeName: string, ...rest: any[]): Router {\n  const options = normalizeArgs(...rest)\n\n  return createNode({\n    ...options,\n    scope: scopeName,\n  })\n}\n\nfunction normalize(...paths: string[]) {\n  return paths.reduce<string[]>((acc, path) => acc.concat(path.split('/')), []).filter(Boolean)\n}\n\nfunction routeIntents(base: string): Router {\n  const basePath = normalize(base).join('/')\n\n  return route.create(`${basePath}/:intent`, [\n    route.create(\n      ':params',\n      {\n        transform: {\n          params: {\n            toState: decodeParams,\n            toPath: encodeParams,\n          },\n        },\n      },\n      [\n        route.create(':payload', {\n          transform: {\n            payload: {\n              toState: decodeJsonParams,\n              toPath: encodeJsonParams,\n            },\n          },\n        }),\n      ]\n    ),\n  ])\n}\n\nconst EMPTY_STATE = {}\n\nfunction isRoot(pathname: string): boolean {\n  // it is the root if every segment is an empty string\n  return pathname.split('/').every((segment) => !segment)\n}\n\nfunction createNode(options: NodeOptions): Router {\n  const {path, scope, transform, children} = options\n\n  if (!path) {\n    throw new TypeError('Missing path')\n  }\n\n  const parsedRoute = _parseRoute(path)\n\n  return {\n    _isRoute: true, // todo: make a Router class instead\n    scope,\n    route: parsedRoute,\n    children: children || [],\n    transform,\n    encode(state) {\n      return _resolvePathFromState(this, state)\n    },\n    decode(_path) {\n      return _resolveStateFromPath(this, _path)\n    },\n    isRoot: isRoot,\n    isNotFound(pathname: string): boolean {\n      return this.decode(pathname) === null\n    },\n    getBasePath(): string {\n      return this.encode(EMPTY_STATE)\n    },\n    getRedirectBase(pathname: string): string | null {\n      if (isRoot(pathname)) {\n        const basePath = this.getBasePath()\n        // Check if basepath is something different than given\n        if (pathname !== basePath) {\n          return basePath\n        }\n      }\n      return null\n    },\n  }\n}\n","import {identity} from 'lodash'\nimport {useEffect, useState} from 'react'\nimport {RouterState} from './types'\nimport {useRouter} from './useRouter'\n\n/**\n * @public\n */\nexport function useRouterState<R = RouterState>(selector: (routerState: RouterState) => R): R\n\n/**\n * @public\n */\nexport function useRouterState(): RouterState\n\n/**\n * @public\n */\nexport function useRouterState(\n  selector: (routerState: RouterState) => unknown = identity\n): unknown {\n  const {state} = useRouter()\n  const [selectedState, setState] = useState(() => selector(state))\n\n  // reset the state when the `selector` prop changes\n  useEffect(() => setState(selector(state)), [selector, state])\n\n  return selectedState\n}\n","import React, {ComponentType, FunctionComponent} from 'react'\nimport {RouterContextValue} from './types'\nimport {useRouter} from './useRouter'\n\n/**\n * @public\n */\nexport function withRouter<Props extends {router: RouterContextValue}>(\n  Component: ComponentType<Props>\n): FunctionComponent<Omit<Props, 'router'>> {\n  function WithRouter(props: Omit<Props, 'router'>) {\n    const router = useRouter()\n\n    return <Component {...(props as Props)} router={router} />\n  }\n\n  WithRouter.displayName = `withRouter(${Component.displayName || Component.name})`\n\n  return WithRouter\n}\n\n/**\n * @public\n */\nexport interface WithRouterProps {\n  router: RouterContextValue\n  children: (router: RouterContextValue) => React.ReactElement\n}\n\n/**\n * @public\n */\nexport const WithRouter = withRouter((props: WithRouterProps) => props.children(props.router))\n","import React, {forwardRef, useMemo} from 'react'\nimport {StateLink, useRouterState} from '../../../../router'\n\nexport interface ToolLinkProps {\n  children: React.ReactNode\n  name: string\n}\n\nexport const ToolLink = forwardRef(function ToolLink(\n  props: ToolLinkProps & Omit<React.HTMLProps<HTMLAnchorElement>, 'href' | 'name'>,\n  ref: React.ForwardedRef<HTMLAnchorElement>\n) {\n  const {name, ...rest} = props\n  const routerState = useRouterState()\n\n  const state = useMemo(\n    () => ({...routerState, tool: name, [name]: undefined}),\n    [routerState, name]\n  )\n\n  return <StateLink state={state} {...rest} ref={ref} />\n})\n","import {UnknownIcon} from '@sanity/icons'\nimport React, {forwardRef, useMemo, useState} from 'react'\nimport {startCase} from 'lodash'\nimport {CollapseMenu, CollapseMenuButton} from '../../../../components/collapseMenu'\nimport {useRovingFocus} from '../../../../components/rovingFocus'\nimport {useColorScheme} from '../../../colorScheme'\nimport {Tool} from '../../../../config'\nimport {ToolLink, ToolLinkProps} from './ToolLink'\n\ninterface ToolCollapseMenuProps {\n  activeToolName?: string\n  tools: Tool[]\n}\n\nexport function ToolCollapseMenu(props: ToolCollapseMenuProps) {\n  const {activeToolName, tools} = props\n  const {scheme} = useColorScheme()\n  const [collapseMenuEl, setCollapseMenuEl] = useState<HTMLDivElement | null>(null)\n\n  useRovingFocus({\n    rootElement: collapseMenuEl,\n    navigation: ['arrows'],\n  })\n\n  const menuButtonProps = useMemo(\n    () => ({\n      popover: {\n        constrainSize: true,\n        portal: true,\n        scheme: scheme,\n      },\n    }),\n    [scheme]\n  )\n\n  const children = useMemo(\n    () =>\n      tools.map((tool, index) => {\n        const title = tool?.title || startCase(tool.name) || undefined\n\n        const Link = forwardRef(function Link(\n          linkProps: ToolLinkProps,\n          ref: React.Ref<HTMLAnchorElement>\n        ) {\n          return <ToolLink {...linkProps} ref={ref} name={tool.name} />\n        })\n\n        return (\n          <CollapseMenuButton\n            as={Link}\n            collapsedProps={{tooltipText: tool.title}}\n            icon={tool.icon || UnknownIcon}\n            // eslint-disable-next-line react/no-array-index-key\n            key={`${tool.name}-${index}`}\n            mode=\"bleed\"\n            selected={activeToolName === tool.name}\n            text={title}\n            tooltipProps={{scheme: scheme}}\n          />\n        )\n      }),\n    [activeToolName, scheme, tools]\n  )\n\n  return (\n    <CollapseMenu gap={1} menuButtonProps={menuButtonProps} ref={setCollapseMenuEl}>\n      {children}\n    </CollapseMenu>\n  )\n}\n","import React, {forwardRef, useMemo} from 'react'\nimport {Button, Stack} from '@sanity/ui'\nimport {PlugIcon} from '@sanity/icons'\nimport {startCase} from 'lodash'\nimport {Tool} from '../../../../config'\nimport {ToolLinkProps, ToolLink} from './ToolLink'\n\ninterface ToolVerticalMenuProps {\n  activeToolName?: string\n  isVisible: boolean\n  tools: Tool[]\n}\n\nexport function ToolVerticalMenu(props: ToolVerticalMenuProps) {\n  const {activeToolName, isVisible, tools} = props\n\n  return useMemo(\n    () => (\n      <Stack as=\"ul\" space={[1, 2]}>\n        {tools.map((tool) => {\n          const title = tool?.title || startCase(tool.name) || undefined\n\n          const Link = forwardRef(function Link(\n            linkProps: ToolLinkProps,\n            ref: React.Ref<HTMLAnchorElement>\n          ) {\n            return <ToolLink {...linkProps} ref={ref} name={tool.name} />\n          })\n\n          return (\n            <Stack as=\"li\" key={tool.name}>\n              <Button\n                as={Link}\n                icon={tool.icon || PlugIcon}\n                justify=\"flex-start\"\n                mode=\"bleed\"\n                selected={activeToolName === tool.name}\n                tabIndex={isVisible ? 0 : -1}\n                text={title}\n              />\n            </Stack>\n          )\n        })}\n      </Stack>\n    ),\n    [activeToolName, isVisible, tools]\n  )\n}\n","import React from 'react'\nimport {Tool} from '../../../../config'\nimport {ToolCollapseMenu} from './ToolCollapseMenu'\nimport {ToolVerticalMenu} from './ToolVerticalMenu'\n\nexport interface ToolMenuProps {\n  activeToolName?: string\n  context: 'drawer' | 'topbar'\n  isDrawerOpen: boolean\n  tools: Tool[]\n  closeDrawer: () => void\n}\n\nexport function ToolMenu(props: ToolMenuProps) {\n  const {context, isDrawerOpen, ...restProps} = props\n\n  if (context === 'drawer') {\n    return <ToolVerticalMenu isVisible={isDrawerOpen} {...restProps} />\n  }\n\n  return <ToolCollapseMenu {...restProps} />\n}\n","import {createContext} from 'react'\nimport {UserColorManager} from './types'\n\nexport const UserColorManagerContext = createContext<UserColorManager | null>(null)\n","import {useContext} from 'react'\nimport {empty} from 'rxjs'\nimport {useMemoObservable} from 'react-rx'\nimport {UserColorManagerContext} from './context'\nimport {UserColor, UserColorManager} from './types'\n\nexport function useUserColorManager(): UserColorManager {\n  const userColorManager = useContext(UserColorManagerContext)\n\n  if (!userColorManager) {\n    throw new Error('UserColorManager: missing context value')\n  }\n\n  return userColorManager\n}\n\nexport function useUserColor(userId: string | null): UserColor {\n  const manager = useUserColorManager()\n\n  return useMemoObservable(userId ? manager.listen(userId) : empty(), [userId], manager.get(null))\n}\n","import {Observable} from 'rxjs'\nimport {shareReplay} from 'rxjs/operators'\nimport {hues, ColorHueKey, COLOR_HUES} from '@sanity/color'\nimport {UserColorHue, UserColorManager, UserColor, UserId} from './types'\n\nexport interface UserColorManagerOptions {\n  anonymousColor?: UserColor\n  userStore?: {me: Observable<{id: string} | null>}\n  colors?: Record<UserColorHue, UserColor>\n  currentUserColor?: UserColorHue\n}\n\nconst defaultCurrentUserHue: ColorHueKey = 'purple'\n\n// Exclude green and red because they can be confused with \"add\" and \"remove\"\n// Exclude gray because it looks like \"color not found\"\nconst USER_COLOR_EXCLUDE_HUES = ['green', 'red', 'gray']\n\nconst defaultHues: ColorHueKey[] = COLOR_HUES.filter(\n  (hue) => !USER_COLOR_EXCLUDE_HUES.includes(hue)\n)\n\nconst defaultColors = defaultHues.reduce((colors, hue) => {\n  colors[hue] = {\n    name: hue,\n    background: hues[hue][100].hex,\n    border: hues[hue][300].hex,\n    text: hues[hue][700].hex,\n    tints: hues[hue],\n  }\n  return colors\n}, {} as Record<ColorHueKey, UserColor>)\n\nconst defaultAnonymousColor: UserColor = {\n  name: 'gray',\n  background: hues.gray[100].hex,\n  border: hues.gray[300].hex,\n  text: hues.gray[700].hex,\n  tints: hues.gray,\n}\n\nexport function createUserColorManager(options?: UserColorManagerOptions): UserColorManager {\n  const userColors = (options && options.colors) || defaultColors\n  const anonymousColor = options?.anonymousColor || defaultAnonymousColor\n  const currentUserColor = (options && options.currentUserColor) || defaultCurrentUserHue\n\n  if (!userColors.hasOwnProperty(currentUserColor)) {\n    throw new Error(`'colors' must contain 'currentUserColor' (${currentUserColor})`)\n  }\n\n  const userColorKeys: UserColorHue[] = Object.keys(userColors)\n  const subscriptions = new Map<UserId, Observable<UserColor>>()\n  const previouslyAssigned = new Map<UserId, UserColorHue>()\n  const assignedCounts: Record<UserColorHue, number> = userColorKeys.reduce((counts, color) => {\n    counts[color] = 0\n    return counts\n  }, {} as Record<UserColorHue, number>)\n\n  // This isn't really needed because we're reusing subscriptions,\n  // but is useful for debugging and poses a minimal overhead\n  const assigned = new Map<UserId, UserColorHue>()\n\n  let currentUserId: UserId | null\n\n  if (options?.userStore) {\n    options.userStore.me.subscribe((user) => setCurrentUser(user ? user.id : null))\n  }\n\n  return {get, listen}\n\n  function get(userId: UserId | null): UserColor {\n    if (!userId) {\n      return anonymousColor\n    }\n\n    return userColors[getUserHue(userId)]\n  }\n\n  function getUserHue(userId: UserId): UserColorHue {\n    if (userId === currentUserId) {\n      return currentUserColor\n    }\n\n    const assignedHue = assigned.get(userId)\n    if (assignedHue) {\n      return assignedHue\n    }\n\n    // Prefer to reuse the color previously assigned, BUT:\n    // ONLY if it's unused -or- there are no other unused colors\n    const prevHue = previouslyAssigned.get(userId)\n    if (prevHue && (assignedCounts[prevHue] === 0 || !hasUnusedColor())) {\n      return assignHue(userId, prevHue)\n    }\n\n    // Prefer \"static\" color based on user ID if unused\n    const preferredHue = getPreferredHue(userId)\n    if (assignedCounts[preferredHue] === 0) {\n      return assignHue(userId, preferredHue)\n    }\n\n    // Fall back to least used color, with a preference on the previous\n    // used color if there are ties for least used\n    return assignHue(userId, getLeastUsedHue(prevHue))\n  }\n\n  function listen(userId: string): Observable<UserColor> {\n    let subscription = subscriptions.get(userId)\n    if (subscription) {\n      return subscription\n    }\n\n    const hue = getUserHue(userId)\n    subscription = getObservableColor(userId, hue)\n    subscriptions.set(userId, subscription)\n    return subscription\n  }\n\n  function assignHue(userId: string, hue: UserColorHue): UserColorHue {\n    assigned.set(userId, hue)\n    previouslyAssigned.set(userId, hue)\n    assignedCounts[hue]++\n    return hue\n  }\n\n  function unassignHue(userId: string, hue: UserColorHue) {\n    assigned.delete(userId)\n    assignedCounts[hue]--\n  }\n\n  function getUnusedColor(): UserColorHue | undefined {\n    return userColorKeys.find((colorHue) => assignedCounts[colorHue] === 0)\n  }\n\n  function hasUnusedColor(): boolean {\n    return Boolean(getUnusedColor())\n  }\n\n  function getLeastUsedHue(tieBreakerPreference?: UserColorHue): UserColorHue {\n    let leastUses = +Infinity\n    let leastUsed: UserColorHue[] = []\n\n    userColorKeys.forEach((colorHue) => {\n      const uses = assignedCounts[colorHue]\n      if (uses === leastUses) {\n        leastUsed.push(colorHue)\n      } else if (uses < leastUses) {\n        leastUses = uses\n        leastUsed = [colorHue]\n      }\n    })\n\n    return tieBreakerPreference && leastUsed.includes(tieBreakerPreference)\n      ? tieBreakerPreference\n      : leastUsed[0]\n  }\n\n  function getObservableColor(userId: string, hue: UserColorHue): Observable<UserColor> {\n    return new Observable<UserColor>((subscriber) => {\n      const userColor = userColors[hue]\n      subscriber.next(userColor)\n      return () => {\n        subscriptions.delete(userId)\n        unassignHue(userId, hue)\n      }\n    }).pipe(shareReplay({refCount: true}))\n  }\n\n  function setCurrentUser(userId: string | null) {\n    currentUserId = userId\n    assignedCounts[currentUserColor] += userId ? 1 : -1\n  }\n\n  function getPreferredHue(userId: string): UserColorHue {\n    let hash = 0\n    for (let i = 0; i < userId.length; i++) {\n      // eslint-disable-next-line no-bitwise\n      hash = ((hash << 5) - hash + userId.charCodeAt(i)) | 0\n    }\n    return userColorKeys[Math.abs(hash) % userColorKeys.length]\n  }\n}\n","import React, {useMemo} from 'react'\nimport {UserColorManagerContext} from './context'\nimport {UserColorManager} from './types'\nimport {createUserColorManager} from './manager'\n\nexport interface UserColorManagerProviderProps {\n  children: React.ReactNode\n  manager?: UserColorManager\n}\n\nexport function UserColorManagerProvider({\n  children,\n  manager: managerFromProps,\n}: UserColorManagerProviderProps): React.ReactElement {\n  const manager = useMemo(() => {\n    return managerFromProps || createUserColorManager()\n  }, [managerFromProps])\n\n  return (\n    <UserColorManagerContext.Provider value={manager}>{children}</UserColorManagerContext.Provider>\n  )\n}\n","interface MultiKeyWeakMapNode {\n  type: 'multi-key-weak-map-node'\n  value: unknown\n  next: WeakMap<object, MultiKeyWeakMapNode>\n}\n\nexport interface MultiKeyWeakMap {\n  get<T>(keys: object[]): T | undefined\n  get(keys: object[]): unknown\n\n  set(keys: object[], value: unknown): void\n}\n\nexport function createMultiKeyWeakMap(): MultiKeyWeakMap {\n  const rootMap = new WeakMap<object, MultiKeyWeakMapNode>()\n  const idCache = new WeakMap<object, string>()\n\n  function randomId() {\n    return Array.from({length: 10})\n      .map(() =>\n        Math.floor(Math.random() * 255)\n          .toString(16)\n          .padStart(2, '0')\n      )\n      .join('')\n  }\n\n  function assignId(key: object) {\n    const cachedId = idCache.get(key)\n    if (cachedId) return cachedId\n    const id = randomId()\n    idCache.set(key, id)\n    return id\n  }\n\n  function arrangeKeys(keys: object[]) {\n    return Array.from(new Set(keys))\n      .map((key) => [assignId(key), key] as const)\n      .sort(([a], [b]) => a.localeCompare(b, 'en'))\n      .map(([, key]) => key)\n  }\n\n  function getDeep(keys: object[], map: WeakMap<object, MultiKeyWeakMapNode>): unknown {\n    if (!keys.length) return undefined\n    const [firstKey, ...restOfKeys] = keys\n    const node = map.get(firstKey)\n\n    if (!node) return undefined\n    if (!restOfKeys.length) return node.value\n    return getDeep(restOfKeys, node.next)\n  }\n\n  function setDeep(\n    keys: object[],\n    map: WeakMap<object, MultiKeyWeakMapNode>,\n    value: unknown\n  ): void {\n    if (!keys.length) return\n\n    const [firstKey, ...restOfKeys] = keys\n    const node = map.get(firstKey) || {\n      type: 'multi-key-weak-map-node',\n      value: undefined,\n      next: new WeakMap(),\n    }\n    map.set(firstKey, node)\n\n    if (!restOfKeys.length) {\n      node.value = value\n      return\n    }\n\n    setDeep(restOfKeys, node.next, value)\n  }\n\n  function get<T>(keys: object[]): T | undefined\n  function get(keys: object[]) {\n    return getDeep(arrangeKeys(keys), rootMap)\n  }\n\n  function set(keys: object[], value: unknown) {\n    setDeep(arrangeKeys(keys), rootMap, value)\n  }\n\n  return {get, set}\n}\n","import React, {createContext, useContext, useMemo} from 'react'\nimport {createMultiKeyWeakMap, MultiKeyWeakMap} from './createMultiKeyWeakMap'\n\ninterface ResourceCache {\n  get<T = unknown>(options: {namespace: string; dependencies: (object | null)[]}): T | undefined\n  set(options: {namespace: string; dependencies: (object | null)[]; value: unknown}): void\n}\n\nconst ResourceCacheContext = createContext<ResourceCache | null>(null)\n\ninterface CacheProviderProps {\n  children: React.ReactNode\n}\n\nexport function ResourceCacheProvider({children}: CacheProviderProps) {\n  const resourceCache = useMemo((): ResourceCache => {\n    const namespaces = new Map<string, MultiKeyWeakMap>()\n\n    // this is used to replace the `null` values in any `dependencies` so that\n    // they can be used in the `MultiKeyWeakMap` which doesn't accept null\n    const nullReplacer = {}\n\n    return {\n      get: ({namespace, dependencies}) => {\n        const dependenciesWithoutNull = dependencies.map((dep) =>\n          dep === null ? nullReplacer : dep\n        )\n        const namespaceMap = namespaces.get(namespace)\n        return namespaceMap?.get(dependenciesWithoutNull)\n      },\n\n      set: ({namespace, dependencies, value}) => {\n        const namespaceMap = namespaces.get(namespace) || createMultiKeyWeakMap()\n        const dependenciesWithoutNull = dependencies.map((dep) =>\n          dep === null ? nullReplacer : dep\n        )\n        namespaces.set(namespace, namespaceMap)\n        namespaceMap.set(dependenciesWithoutNull, value)\n      },\n    }\n  }, [])\n\n  return (\n    <ResourceCacheContext.Provider value={resourceCache}>{children}</ResourceCacheContext.Provider>\n  )\n}\n\nexport function useResourceCache() {\n  const cache = useContext(ResourceCacheContext)\n  if (!cache) throw new Error('Could not find `cache` context')\n  return cache\n}\n","import {createContext} from 'react'\nimport {History} from 'history'\nimport {WorkspaceSummary} from '../../config'\n\nexport interface ActiveWorkspaceMatcherContextValue {\n  activeWorkspace: WorkspaceSummary\n  setActiveWorkspace: (workspaceName: string) => void\n  /**\n   * @deprecated internal use only\n   */\n  __internal: {\n    history: History\n  }\n}\n\nexport const ActiveWorkspaceMatcherContext =\n  createContext<ActiveWorkspaceMatcherContextValue | null>(null)\n","import {createContext} from 'react'\nimport {WorkspaceSummary} from '../../config'\n\nexport type WorkspacesContextValue = WorkspaceSummary[]\n\nexport const WorkspacesContext = createContext<WorkspacesContextValue | null>(null)\n","import {useContext} from 'react'\nimport {WorkspaceSummary} from '../../config'\nimport {WorkspacesContext} from './WorkspacesContext'\n\nexport function useWorkspaces(): WorkspaceSummary[] {\n  const workspaces = useContext(WorkspacesContext)\n  if (!workspaces) throw new Error('Could not find `workspaces` context')\n  return workspaces\n}\n","import React, {useMemo} from 'react'\nimport {Config, prepareConfig} from '../../config'\nimport {WorkspacesContext} from './WorkspacesContext'\n\ninterface WorkspaceProviderProps {\n  config: Config\n  children: React.ReactNode\n}\n\nexport function WorkspacesProvider({config, children}: WorkspaceProviderProps) {\n  const {workspaces} = useMemo(() => prepareConfig(config), [config])\n  return <WorkspacesContext.Provider value={workspaces}>{children}</WorkspacesContext.Provider>\n}\n","import {escapeRegExp} from 'lodash'\nimport {WorkspaceLike} from '../workspaces'\n\ninterface MatchWorkspaceOptions<TWorkspace extends WorkspaceLike> {\n  workspaces: TWorkspace[]\n  pathname: string\n}\n\ntype MatchWorkspaceResult<TWorkspace extends WorkspaceLike> =\n  | {type: 'match'; workspace: TWorkspace}\n  | {type: 'redirect'; pathname: string}\n  | {type: 'not-found'}\n\n/**\n * Given a pathname and a list of workspaces, returns either a workspace match,\n * a redirect, or not-found.\n *\n * Throws if the workspace `basePaths` could result in ambiguous matches.\n */\nexport function matchWorkspace<TWorkspace extends WorkspaceLike>({\n  pathname,\n  workspaces,\n}: MatchWorkspaceOptions<TWorkspace>): MatchWorkspaceResult<TWorkspace> {\n  const normalized = workspaces.map((workspace) => ({\n    workspace,\n    name: workspace.name,\n    basePath: workspace.basePath || '/',\n  }))\n\n  const [firstWorkspace] = normalized\n  for (const {workspace, basePath} of normalized) {\n    // this regex ends with a `(\\\\/|$)` (forward slash or end) to prevent false\n    // matches where the pathname is a false subset of the current pathname.\n    // e.g. if the `workspace.basePath` is `/base/foobar` and the current\n    // pathname is `/base/foo`, then that should not be a match\n    if (new RegExp(`^${escapeRegExp(basePath)}(\\\\/|$)`, 'i').test(pathname) || basePath === '/') {\n      return {type: 'match', workspace}\n    }\n  }\n\n  const workspaceSegments = normalized.map((workspace) =>\n    // gets the segments from the basePath\n    workspace.basePath\n      // removes the leading `/`\n      .substring(1)\n      .split('/')\n  )\n\n  // if the pathname is only a leading slash, then return a redirect\n  if (pathname === '/') {\n    return {type: 'redirect', pathname: firstWorkspace.basePath}\n  }\n\n  // this common base path is used to check if we should redirect. it's the base\n  // path that is common between all the workspaces.\n  const commonBasePath = workspaceSegments.reduce((commonSegments, segments) => {\n    for (let i = 0; i < commonSegments.length; i++) {\n      const commonSegment = commonSegments[i]\n      const segment = segments[i].toLowerCase()\n\n      if (commonSegment !== segment) {\n        return commonSegments.slice(0, i)\n      }\n    }\n\n    return commonSegments\n  })\n\n  // recursively creates a matching expression\n  // `/foo/bar/baz` becomes `(\\/foo(\\/bar(\\/baz(\\/|$))?(\\/|$))?(\\/|$))?`\n  function createCommonBasePathRegex([first, ...rest]: string[]): string {\n    if (!first) return ''\n    return `(\\\\/${escapeRegExp(first)}${createCommonBasePathRegex(rest)}(\\\\/|$))?`\n  }\n\n  if (new RegExp(`^${createCommonBasePathRegex(commonBasePath)}$`, 'i').test(pathname)) {\n    // redirect to the first workspace configured\n    return {type: 'redirect', pathname: firstWorkspace.basePath}\n  }\n\n  // if the pathname was not a subset of the common base path, then the route\n  // the user is looking for is not present and we should show some sort of 404\n  // screen\n  return {type: 'not-found'}\n}\n","import React, {useCallback, useEffect, useMemo, useState} from 'react'\nimport {History, createBrowserHistory, createMemoryHistory} from 'history'\nimport {Observable} from 'rxjs'\nimport {map} from 'rxjs/operators'\nimport {useWorkspaces} from '../workspaces'\nimport {WorkspaceSummary} from '../../config'\nimport {\n  ActiveWorkspaceMatcherContext,\n  ActiveWorkspaceMatcherContextValue,\n} from './ActiveWorkspaceMatcherContext'\nimport {matchWorkspace} from './matchWorkspace'\n\ninterface ActiveWorkspaceMatcherProps {\n  children?: React.ReactChild\n  unstable_history?: History\n  NotFoundComponent: React.ComponentType<{onNavigateToDefaultWorkspace: () => void}>\n  LoadingComponent: React.ComponentType\n}\n\nconst createHistory = () =>\n  typeof document === 'undefined' ? createMemoryHistory() : createBrowserHistory()\n\nexport function ActiveWorkspaceMatcher({\n  children,\n  LoadingComponent,\n  NotFoundComponent,\n  unstable_history: historyProp,\n}: ActiveWorkspaceMatcherProps) {\n  const [error, setError] = useState<unknown>(null)\n\n  // Throw error to closest error boundary\n  if (error) throw error\n\n  const workspaces = useWorkspaces()\n\n  const [activeWorkspace, setActiveWorkspace] = useState<WorkspaceSummary | null>(null)\n  const [notFound, setNotFound] = useState(false)\n\n  const history = useMemo(() => historyProp || createHistory(), [historyProp])\n\n  useEffect(() => {\n    const pathname$ = new Observable<string>((observer) => {\n      const unlisten = history.listen((location) => observer.next(location.pathname))\n\n      // Emit initial pathname\n      observer.next(history.location.pathname || '/')\n\n      return unlisten\n    })\n\n    const subscription = pathname$\n      .pipe(map((pathname) => matchWorkspace({pathname, workspaces})))\n      .subscribe({\n        error: setError,\n        next: (result) => {\n          if (result.type === 'match') {\n            setNotFound(false)\n            setActiveWorkspace(result.workspace)\n          }\n\n          if (result.type === 'redirect') {\n            history.replace(result.pathname)\n          }\n\n          if (result.type === 'not-found') {\n            setNotFound(true)\n          }\n        },\n      })\n\n    return () => subscription.unsubscribe()\n  }, [history, workspaces])\n\n  const setActiveWorkspaceName = useCallback(\n    (workspaceName: string) => {\n      const foundWorkspace = workspaces.find((workspace) => workspace.name === workspaceName)\n      if (foundWorkspace) {\n        history.push(foundWorkspace.basePath)\n      }\n    },\n    [history, workspaces]\n  )\n\n  const defaultWorkspaceName = workspaces[0].name\n  const handleNavigateToDefaultWorkspace = useCallback(() => {\n    setActiveWorkspaceName(defaultWorkspaceName)\n  }, [setActiveWorkspaceName, defaultWorkspaceName])\n\n  const value = useMemo(\n    () => ({\n      __internal: {history},\n      activeWorkspace,\n      setActiveWorkspace: setActiveWorkspaceName,\n    }),\n    [history, activeWorkspace, setActiveWorkspaceName]\n  )\n\n  if (notFound) {\n    return <NotFoundComponent onNavigateToDefaultWorkspace={handleNavigateToDefaultWorkspace} />\n  }\n\n  if (!value.activeWorkspace) {\n    return <LoadingComponent />\n  }\n\n  return (\n    <ActiveWorkspaceMatcherContext.Provider value={value as ActiveWorkspaceMatcherContextValue}>\n      {children}\n    </ActiveWorkspaceMatcherContext.Provider>\n  )\n}\n","import {useContext} from 'react'\nimport {\n  ActiveWorkspaceMatcherContext,\n  ActiveWorkspaceMatcherContextValue,\n} from './ActiveWorkspaceMatcherContext'\n\nexport function useActiveWorkspace(): ActiveWorkspaceMatcherContextValue {\n  const value = useContext(ActiveWorkspaceMatcherContext)\n  if (!value) throw new Error('Could not find `ActiveWorkspaceMatcher` context')\n  return value\n}\n","import React from 'react'\nimport {ThemeProvider, LayerProvider} from '@sanity/ui'\nimport {useActiveWorkspace} from './activeWorkspaceMatcher'\nimport {useColorScheme} from './colorScheme'\n\ninterface StudioThemeProviderProps {\n  children: React.ReactChild\n}\n\nexport function StudioThemeProvider({children}: StudioThemeProviderProps) {\n  const theme = useActiveWorkspace().activeWorkspace.theme\n  const {scheme} = useColorScheme()\n\n  return (\n    <ThemeProvider scheme={scheme} theme={theme}>\n      <LayerProvider>{children}</LayerProvider>\n    </ThemeProvider>\n  )\n}\n","import type {GlobalErrorChannel} from '../components/globalErrorHandler'\n\n/**\n * Gets the global scope instance in a given environment.\n *\n * The strategy is to return the most modern, and if not, the most common:\n * - The `globalThis` variable is the modern approach to accessing the global scope\n * - The `window` variable is the global scope in a web browser\n * - The `self` variable is the global scope in workers and others\n * - The `global` variable is the global scope in Node.js\n */\nfunction getGlobalScope(): typeof globalThis & {__sanityErrorChannel?: GlobalErrorChannel} {\n  if (typeof globalThis !== 'undefined') return globalThis\n  if (typeof window !== 'undefined') return window\n  if (typeof self !== 'undefined') return self\n  if (typeof global !== 'undefined') return global\n\n  throw new Error('@sanity/ui: could not locate global scope')\n}\n\nexport const globalScope = getGlobalScope()\n","import React from 'react'\nimport {Flex, Spinner, Card, Text} from '@sanity/ui'\n\nexport function LoadingScreen() {\n  return (\n    // TODO: improve the design of this\n    // think about having it load in the `_document` too\n    <Flex\n      // TODO: currently this card is here to accommodate dark mode vs light\n      // mode backgrounds, however that logic should probably exist globally\n      as={Card}\n      justify=\"center\"\n      align=\"center\"\n      height=\"fill\"\n      direction=\"column\"\n      gap={4}\n    >\n      <Text muted>Loadingâ€¦</Text>\n      <Spinner muted />\n    </Flex>\n  )\n}\n","import {ErrorOutlineIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Breadcrumbs, Card, Flex, Stack, Text, ThemeColorToneKey} from '@sanity/ui'\nimport {generateHelpUrl} from '@sanity/generate-help-url'\nimport {SchemaValidationProblemGroup} from '@sanity/types'\nimport React, {useMemo} from 'react'\nimport styled from 'styled-components'\nimport {capitalize} from 'lodash'\n\nconst TONES: Record<'error' | 'warning', ThemeColorToneKey> = {\n  error: 'critical',\n  warning: 'caution',\n}\n\nconst SegmentSpan = styled.code`\n  && {\n    background: none;\n    color: inherit;\n  }\n`\n\nconst ErrorMessageText = styled(Text)`\n  white-space: pre-line;\n`\n\nexport function SchemaProblemGroups(props: {problemGroups: SchemaValidationProblemGroup[]}) {\n  const {problemGroups} = props\n\n  const items = useMemo(() => {\n    const ret = []\n\n    for (const problemGroup of problemGroups) {\n      for (const problem of problemGroup.problems) {\n        ret.push({group: problemGroup, problem})\n      }\n    }\n\n    return ret\n  }, [problemGroups])\n\n  return (\n    <Stack as=\"ul\" space={4}>\n      {items.map(({group, problem}, i) => {\n        const isError = problem.severity === 'error'\n        const isWarning = problem.severity === 'warning'\n        const schemaType = getTypeInfo(group)\n        return (\n          <Card border key={i} padding={4} radius={2} tone={TONES[problem.severity]}>\n            <Flex>\n              <Box marginRight={3}>\n                <Text muted size={1}>\n                  {isError && <ErrorOutlineIcon />}\n                  {isWarning && <WarningOutlineIcon />}\n                </Text>\n              </Box>\n\n              <Box flex={1}>\n                <Text size={1} weight=\"semibold\">\n                  {schemaType ? (\n                    <>\n                      {capitalize(schemaType.type)} type \"{schemaType.name}\"\n                    </>\n                  ) : null}\n                </Text>\n              </Box>\n            </Flex>\n            <Box marginTop={4}>\n              <Card border overflow=\"auto\" padding={2} tone=\"inherit\">\n                <Breadcrumbs\n                  separator={\n                    <Text muted size={1}>\n                      &rarr;\n                    </Text>\n                  }\n                >\n                  {group.path.map((segment, j) => {\n                    if (segment.kind === 'type') {\n                      return (\n                        <Text key={j} size={1}>\n                          <SegmentSpan>{`${_renderSegmentName(segment.name)}:${\n                            segment.type\n                          }`}</SegmentSpan>\n                        </Text>\n                      )\n                    }\n\n                    if (segment.kind === 'property') {\n                      return (\n                        <Text key={j} size={1}>\n                          <SegmentSpan>{segment.name}</SegmentSpan>\n                        </Text>\n                      )\n                    }\n\n                    return null\n                  })}\n                </Breadcrumbs>\n              </Card>\n            </Box>\n\n            <Box as=\"ul\" marginTop={4}>\n              <Box as=\"li\">\n                <Stack space={3}>\n                  <ErrorMessageText muted size={1}>\n                    {problem.message}\n                  </ErrorMessageText>\n\n                  {problem.helpId && (\n                    <Text muted size={1}>\n                      <a\n                        href={generateHelpUrl(problem.helpId)}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        View documentation &rarr;\n                      </a>\n                    </Text>\n                  )}\n                </Stack>\n              </Box>\n            </Box>\n          </Card>\n        )\n      })}\n    </Stack>\n  )\n}\n\nfunction getTypeInfo(problem: SchemaValidationProblemGroup): {name: string; type: string} | null {\n  // note: unsure if the first segment here can ever be anything else than a type\n  // a possible API improvement is to add schemaType info to the problem group interface itself\n  const first = problem.path[0]\n  if (first.kind === 'type') {\n    return {name: first.name, type: first.type}\n  }\n  return null\n}\n\nfunction _renderSegmentName(str: string) {\n  if (str.startsWith('<unnamed_type_@_index')) {\n    const parts = str.slice(1, -1).split('_')\n\n    return `[${parts[4]}]`\n  }\n\n  return str\n}\n","import {SchemaValidationProblemPath} from '@sanity/types'\n\nexport function renderPath(path: SchemaValidationProblemPath) {\n  return path\n    .map((segment) => {\n      if (segment.kind === 'type') {\n        return `${segment.name || '<unnamed>'}(${segment.type})`\n      }\n\n      if (segment.kind === 'property') {\n        return segment.name\n      }\n\n      return null\n    })\n    .filter(Boolean)\n    .join(' > ')\n}\n","import {Schema} from '@sanity/types'\nimport {renderPath} from './utils'\n\nexport function reportWarnings(schema: Schema) {\n  /* eslint-disable no-console */\n  const problemGroups = schema._validation\n\n  const groupsWithWarnings = problemGroups?.filter((group) =>\n    group.problems.some((problem) => problem.severity === 'warning')\n  )\n  if (groupsWithWarnings?.length === 0) {\n    return\n  }\n  console.groupCollapsed(`âš ï¸ Schema has ${groupsWithWarnings?.length} warnings`)\n  groupsWithWarnings?.forEach((group) => {\n    const path = renderPath(group.path)\n\n    console.group(`%cAt ${path}`, 'color: #FF7636')\n\n    group.problems.forEach((problem) => {\n      console.log(problem.message)\n    })\n\n    console.groupEnd()\n  })\n  console.groupEnd()\n  /* eslint-enable no-console */\n}\n","import {Schema} from '@sanity/types'\nimport {Card, Container, Heading, Stack} from '@sanity/ui'\nimport React, {useEffect} from 'react'\nimport {SchemaProblemGroups} from './SchemaProblemGroups'\nimport {reportWarnings} from './reportWarnings'\n\ninterface SchemaErrorsScreenProps {\n  schema: Schema\n}\n\nexport function SchemaErrorsScreen({schema}: SchemaErrorsScreenProps) {\n  const groupsWithErrors =\n    schema._validation?.filter((group) =>\n      group.problems.some((problem) => problem.severity === 'error')\n    ) || []\n\n  useEffect(() => reportWarnings(schema), [schema])\n\n  return (\n    <Card height=\"fill\" overflow=\"auto\" paddingY={[4, 5, 6, 7]} paddingX={4} sizing=\"border\">\n      <Container width={1}>\n        <Stack space={5}>\n          <Heading as=\"h1\">Schema errors</Heading>\n          <SchemaProblemGroups problemGroups={groupsWithErrors} />\n        </Stack>\n      </Container>\n    </Card>\n  )\n}\n","import {Button, Card, Flex, Heading, Inline, Stack} from '@sanity/ui'\nimport React from 'react'\n\nexport function NotFoundScreen(props: {onNavigateToDefaultWorkspace: () => void}) {\n  return (\n    <Card height=\"fill\" sizing=\"border\" tone=\"caution\" display=\"flex\">\n      <Flex direction=\"row\" justify=\"center\" flex={1} align=\"center\">\n        <Stack space={4}>\n          <Heading as=\"h1\">Workspace not found</Heading>\n          <Inline>\n            <Button\n              text=\"Go to default workspace\"\n              onClick={props.onNavigateToDefaultWorkspace}\n              mode=\"ghost\"\n            />\n          </Inline>\n        </Stack>\n      </Flex>\n    </Card>\n  )\n}\n","import {CheckmarkIcon} from '@sanity/icons'\nimport {Flex, Stack, Box, Text, Card} from '@sanity/ui'\nimport React, {createElement, isValidElement, useMemo} from 'react'\nimport {isValidElementType} from 'react-is'\nimport styled from 'styled-components'\n\nconst STATE_TITLES = {\n  'logged-in': '',\n  'logged-out': 'Signed out',\n  'no-access': '',\n}\n\nexport const MediaCard = styled(Card)`\n  width: 35px;\n  height: 35px;\n\n  svg {\n    width: 100%;\n    height: 100%;\n  }\n`\n\nconst createIcon = (icon: React.ComponentType | React.ReactNode) => {\n  if (isValidElementType(icon)) return createElement(icon)\n  if (isValidElement(icon)) return icon\n  return undefined\n}\n\nexport interface WorkspacePreviewProps {\n  icon?: React.ComponentType | React.ReactNode\n  iconRight?: React.ComponentType | React.ReactNode\n  selected?: boolean\n  state?: 'logged-in' | 'logged-out' | 'no-access'\n  subtitle?: string\n  title: string\n}\n\nexport function WorkspacePreview(props: WorkspacePreviewProps) {\n  const {state, subtitle, selected, title, icon, iconRight} = props\n\n  const iconComponent = useMemo(() => createIcon(icon), [icon])\n  const iconRightComponent = useMemo(() => createIcon(iconRight), [iconRight])\n\n  return (\n    <Flex align=\"center\" flex=\"none\" gap={3}>\n      <MediaCard radius={2} tone=\"transparent\">\n        {iconComponent}\n      </MediaCard>\n\n      <Stack flex={1} space={2}>\n        <Text textOverflow=\"ellipsis\" weight=\"medium\">\n          {title}\n        </Text>\n\n        {subtitle && (\n          <Text muted size={1} textOverflow=\"ellipsis\">\n            {subtitle}\n          </Text>\n        )}\n      </Stack>\n\n      {state && STATE_TITLES[state] && (\n        <Box paddingLeft={1}>\n          <Text size={1} muted textOverflow=\"ellipsis\">\n            {STATE_TITLES[state]}\n          </Text>\n        </Box>\n      )}\n\n      {(selected || iconRightComponent) && (\n        <Flex align=\"center\" gap={4} paddingLeft={3} paddingRight={2}>\n          {selected && (\n            <Text size={1} muted>\n              <CheckmarkIcon />\n            </Text>\n          )}\n\n          {iconRightComponent && (\n            <Text size={1} muted>\n              {iconRightComponent}\n            </Text>\n          )}\n        </Flex>\n      )}\n    </Flex>\n  )\n}\n","import {map} from 'rxjs/operators'\nimport {combineLatest} from 'rxjs'\nimport {WorkspaceSummary} from '../../../../../config'\nimport {createHookFromObservableFactory} from '../../../../../util'\n\nexport const useWorkspaceAuthStates = createHookFromObservableFactory(\n  (workspaces: WorkspaceSummary[]) =>\n    combineLatest(\n      workspaces.map((workspace) =>\n        // eslint-disable-next-line max-nested-callbacks\n        workspace.auth.state.pipe(map((state) => [workspace.name, state] as const))\n      )\n    ).pipe(map((entries) => Object.fromEntries(entries)))\n)\n","export const workspacesDocsUrl = 'https://beta.sanity.io/docs/platform/studio/workspaces'\n","import {SanityLogo} from '@sanity/logos'\nimport {Box, Card, Flex, Heading, Stack, Text} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\nconst LINKS = [\n  {\n    url: 'https://slack.sanity.io/',\n    title: 'Community',\n  },\n  {\n    url: 'https://www.sanity.io/docs',\n    title: 'Docs',\n  },\n  {\n    url: 'https://www.sanity.io/legal/privacy',\n    title: 'Privacy',\n  },\n  {\n    url: 'https://www.sanity.io',\n    title: 'sanity.io',\n  },\n]\n\nconst StyledText = styled(Text)`\n  a {\n    color: inherit;\n  }\n`\n\ninterface LayoutProps {\n  header?: React.ReactNode\n  children: React.ReactNode\n  footer?: React.ReactNode\n}\n\nexport function Layout(props: LayoutProps) {\n  const {children, footer, header} = props\n\n  return (\n    <Stack space={6}>\n      <Card border radius={3} overflow=\"auto\">\n        <Stack>\n          {typeof header === 'object' && <Box>{header}</Box>}\n          {typeof header === 'string' && (\n            <Box paddingY={4}>\n              <Heading align=\"center\" size={1}>\n                {header}\n              </Heading>\n            </Box>\n          )}\n\n          <Box paddingX={1}>\n            <Card borderTop={Boolean(header)} borderBottom={Boolean(footer)}>\n              {children}\n            </Card>\n          </Box>\n\n          {footer && <Box>{footer}</Box>}\n        </Stack>\n      </Card>\n\n      <Flex direction=\"column\" gap={4} justify=\"center\" align=\"center\">\n        <Text size={3}>\n          <SanityLogo />\n        </Text>\n\n        <Flex align=\"center\" gap={2}>\n          {LINKS.map((link, index) => (\n            <React.Fragment key={link.title}>\n              <StyledText muted size={1}>\n                <a href={link.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                  {link.title}\n                </a>\n              </StyledText>\n\n              {index < LINKS.length - 1 && (\n                <Text size={1} muted>\n                  â€¢\n                </Text>\n              )}\n            </React.Fragment>\n          ))}\n        </Flex>\n      </Flex>\n    </Stack>\n  )\n}\n","import {Box, Button, Card, Flex, Stack} from '@sanity/ui'\nimport React, {useCallback, useState} from 'react'\nimport {omit} from 'lodash'\nimport {AddIcon, ArrowLeftIcon, ChevronRightIcon} from '@sanity/icons'\nimport {useActiveWorkspace} from '../../../../activeWorkspaceMatcher'\nimport {useWorkspaces} from '../../../../workspaces'\nimport {WorkspacePreview} from '../WorkspacePreview'\nimport {useWorkspaceAuthStates} from '../hooks'\nimport {LoadingScreen} from '../../../../screens'\nimport {workspacesDocsUrl} from '../constants'\nimport {Layout} from './Layout'\n\nexport function WorkspaceAuth() {\n  const workspaces = useWorkspaces()\n  const {activeWorkspace, setActiveWorkspace} = useActiveWorkspace()\n  const [authStates] = useWorkspaceAuthStates(workspaces)\n  const [selectedWorkspaceName, setSelectedWorkspaceName] = useState<string | null>(\n    activeWorkspace?.name || null\n  )\n  const selectedWorkspace =\n    workspaces.length === 1\n      ? workspaces[0]\n      : workspaces.find((workspace) => workspace.name === selectedWorkspaceName)\n  const LoginComponent = selectedWorkspace?.auth?.LoginComponent\n\n  const handleBack = useCallback(() => setSelectedWorkspaceName(null), [])\n\n  if (!authStates) return <LoadingScreen />\n\n  if (LoginComponent && selectedWorkspace) {\n    return (\n      <Stack space={2}>\n        {workspaces.length > 1 && (\n          <Flex>\n            <Button\n              fontSize={1}\n              icon={ArrowLeftIcon}\n              mode=\"bleed\"\n              onClick={handleBack}\n              padding={2}\n              text=\"Choose another workspace\"\n            />\n          </Flex>\n        )}\n\n        <Layout\n          header={\n            <Box padding={3}>\n              <WorkspacePreview\n                icon={selectedWorkspace.icon}\n                title={selectedWorkspace.title}\n                subtitle={selectedWorkspace.dataset}\n              />\n            </Box>\n          }\n        >\n          <Stack padding={2} paddingBottom={3} paddingTop={4}>\n            <LoginComponent\n              {...omit(selectedWorkspace, ['type', '__internal'])}\n              key={selectedWorkspaceName}\n            />\n          </Stack>\n        </Layout>\n      </Stack>\n    )\n  }\n\n  return (\n    <Layout\n      header=\"Choose your workspace\"\n      footer={\n        <Stack padding={1}>\n          <Button\n            as=\"a\"\n            href={workspacesDocsUrl}\n            icon={AddIcon}\n            justify=\"flex-start\"\n            mode=\"bleed\"\n            rel=\"noopener noreferrer\"\n            target=\"__blank\"\n            text=\"Add workspace\"\n          />\n        </Stack>\n      }\n    >\n      <Stack space={1} paddingX={1} paddingY={2}>\n        {workspaces.map((workspace) => {\n          const authState = authStates[workspace.name]\n          // eslint-disable-next-line no-nested-ternary\n          const state = authState.authenticated\n            ? 'logged-in'\n            : workspace.auth.LoginComponent\n            ? 'logged-out'\n            : 'no-access'\n\n          const handleSelectWorkspace = () => {\n            if (state === 'logged-in' && workspace.name !== activeWorkspace.name) {\n              setActiveWorkspace(workspace.name)\n            }\n\n            if (state === 'logged-out') {\n              setSelectedWorkspaceName(workspace.name)\n            }\n          }\n\n          return (\n            <Card\n              as=\"button\"\n              radius={2}\n              key={workspace.name}\n              padding={2}\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={handleSelectWorkspace}\n            >\n              <WorkspacePreview\n                icon={workspace?.icon}\n                iconRight={ChevronRightIcon}\n                state={state}\n                subtitle={workspace.dataset}\n                title={workspace?.title || workspace.name}\n              />\n            </Card>\n          )\n        })}\n      </Stack>\n    </Layout>\n  )\n}\n","import {AddIcon, SelectIcon} from '@sanity/icons'\nimport {\n  Button,\n  MenuButton,\n  MenuItem,\n  Menu,\n  MenuButtonProps,\n  ButtonProps,\n  Box,\n  Card,\n  Label,\n} from '@sanity/ui'\nimport React, {useMemo} from 'react'\nimport styled from 'styled-components'\nimport {useActiveWorkspace} from '../../..'\nimport {useRouter} from '../../../../router'\nimport {useColorScheme} from '../../../colorScheme'\nimport {useWorkspaces} from '../../../workspaces'\nimport {workspacesDocsUrl} from './constants'\nimport {useWorkspaceAuthStates} from './hooks'\nimport {WorkspacePreview} from './WorkspacePreview'\n\nconst StyledMenu = styled(Menu)`\n  max-width: 350px;\n  min-width: 250px;\n`\n\nconst FooterCard = styled(Card)`\n  position: sticky;\n  bottom: 0;\n`\n\nexport function WorkspaceMenuButton(props: ButtonProps) {\n  const {scheme} = useColorScheme()\n  const workspaces = useWorkspaces()\n  const {activeWorkspace, setActiveWorkspace} = useActiveWorkspace()\n  const [authStates] = useWorkspaceAuthStates(workspaces)\n  const {navigateUrl} = useRouter()\n\n  const popoverProps: MenuButtonProps['popover'] = useMemo(\n    () => ({constrainSize: true, scheme, portal: true}),\n    [scheme]\n  )\n\n  return (\n    <MenuButton\n      button={<Button icon={SelectIcon} mode=\"bleed\" {...props} disabled={!authStates} />}\n      id=\"workspace-menu\"\n      menu={\n        <StyledMenu paddingBottom={0}>\n          <Box paddingX={3} paddingY={3}>\n            <Label size={1} muted>\n              Workspaces\n            </Label>\n          </Box>\n\n          {authStates &&\n            workspaces.map((workspace) => {\n              const authState = authStates[workspace.name]\n\n              // eslint-disable-next-line no-nested-ternary\n              const state = authState.authenticated\n                ? 'logged-in'\n                : workspace.auth.LoginComponent\n                ? 'logged-out'\n                : 'no-access'\n\n              const handleSelectWorkspace = () => {\n                if (state === 'logged-in' && workspace.name !== activeWorkspace.name) {\n                  setActiveWorkspace(workspace.name)\n                }\n\n                // Navigate to the base path of the workspace to authenticate\n                if (state === 'logged-out') {\n                  navigateUrl({path: workspace.basePath})\n                }\n              }\n\n              return (\n                <MenuItem\n                  key={workspace.name}\n                  // eslint-disable-next-line react/jsx-no-bind\n                  onClick={handleSelectWorkspace}\n                  padding={2}\n                  pressed={workspace.name === activeWorkspace.name}\n                >\n                  <WorkspacePreview\n                    icon={workspace?.icon}\n                    selected={workspace.name === activeWorkspace.name}\n                    state={state}\n                    subtitle={workspace.dataset}\n                    title={workspace?.title || workspace.name}\n                  />\n                </MenuItem>\n              )\n            })}\n\n          <FooterCard borderTop paddingY={1}>\n            <MenuItem\n              as=\"a\"\n              href={workspacesDocsUrl}\n              icon={AddIcon}\n              rel=\"noopener noreferrer\"\n              target=\"__blank\"\n              text=\"Add workspace\"\n            />\n          </FooterCard>\n        </StyledMenu>\n      }\n      popover={popoverProps}\n    />\n  )\n}\n","import {Flex, Card, Container} from '@sanity/ui'\nimport React from 'react'\nimport {WorkspaceAuth} from '../components/navbar/workspace'\n\nexport function AuthenticateScreen() {\n  return (\n    <Card height=\"fill\">\n      <Flex align=\"center\" justify=\"center\" height=\"fill\">\n        <Container width={0}>\n          <WorkspaceAuth />\n        </Container>\n      </Flex>\n    </Card>\n  )\n}\n","import React from 'react'\n\n// const Root = styled(Card).attrs({height: 'fill', overflow: 'auto'})``\n// const Content = styled(Box).attrs({padding: 4})`\n//   margin: auto;\n//   width: 640px;\n//   max-width: 100%;\n// `\n\nexport function ConfigErrorsScreen() {\n  return <>TODO: implement config errors screen</>\n  // return (\n  //   <Root forwardedAs={Flex}>\n  //     <Content forwardedAs={Flex} direction=\"column\" gap={4}>\n  //       <Flex direction=\"column\" gap={2}>\n  //         <Box>\n  //           <Heading as=\"h1\">Configuration Error</Heading>\n  //         </Box>\n  //         <Box muted>\n  //           <Text>An error occurred while trying to resolve your Studio's configuration.</Text>\n  //         </Box>\n  //         <Box>\n  //           <Text size={1} muted>\n  //             Note: the design of this page may change.\n  //           </Text>\n  //         </Box>\n  //       </Flex>\n  //       <Card shadow={1}>\n  //         {errors.map((errorInfo, index) => (\n  //           // eslint-disable-next-line react/no-array-index-key\n  //           <ErrorMessage key={index} {...errorInfo} />\n  //         ))}\n  //       </Card>\n  //       <Button\n  //         tone=\"primary\"\n  //         // eslint-disable-next-line react/jsx-no-bind\n  //         onClick={() => window.location.reload()}\n  //         type=\"button\"\n  //         text=\"Retry\"\n  //       />\n  //     </Content>\n  //   </Root>\n  // )\n}\n","export const getProviderTitle = (provider?: string): string | undefined => {\n  if (provider === 'google') {\n    return 'Google'\n  }\n\n  if (provider === 'github') {\n    return 'GitHub'\n  }\n\n  if (provider === 'sanity') {\n    return 'Sanity'\n  }\n\n  if (provider?.startsWith('saml-')) {\n    return 'SAML/SSO'\n  }\n\n  return undefined\n}\n","import {CurrentUser} from '@sanity/types'\nimport {Button, Card, Dialog, Stack, Text} from '@sanity/ui'\nimport React, {useCallback, useEffect, useState} from 'react'\nimport {getProviderTitle} from '../../datastores/authStore/providerTitle'\nimport {useActiveWorkspace} from '../activeWorkspaceMatcher'\n\nexport function NotAuthenticatedScreen() {\n  const [currentUser, setCurrentUser] = useState<CurrentUser | null>(null)\n  const [error, handleError] = useState<unknown>(null)\n\n  if (error) throw error\n\n  const {activeWorkspace} = useActiveWorkspace()\n\n  const handleLogout = useCallback(() => {\n    activeWorkspace.auth.logout?.()\n  }, [activeWorkspace])\n\n  useEffect(() => {\n    const subscription = activeWorkspace.auth.state.subscribe({\n      next: ({currentUser: user}) => {\n        setCurrentUser(user)\n      },\n      error: handleError,\n    })\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [activeWorkspace])\n\n  const providerTitle = getProviderTitle(currentUser?.provider)\n  const providerHelp = providerTitle ? ` through ${providerTitle}` : ''\n\n  return (\n    <Card height=\"fill\">\n      <Dialog\n        id=\"not-authorized-dialog\"\n        header=\"Not authorized\"\n        width={1}\n        footer={\n          <Stack paddingX={3} paddingY={2}>\n            <Button text=\"Sign out\" onClick={handleLogout} />\n          </Stack>\n        }\n      >\n        <Stack paddingX={4} paddingY={5} space={4}>\n          <Text>\n            You are not authorized to access this studio. Maybe you could ask someone to invite you\n            to collaborate on this project?\n          </Text>\n\n          <Text>\n            If you think this is an error, verify that you are signed in with the correct account.\n            You are currently signed in as{' '}\n            <strong>\n              {currentUser?.name} ({currentUser?.email})\n            </strong>\n            {providerHelp}.\n          </Text>\n        </Stack>\n      </Dialog>\n    </Card>\n  )\n}\n","import {Card, Dialog, Stack, Button, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\n\ninterface CorsOriginErrorScreenProps {\n  projectId?: string\n}\n\nexport function CorsOriginErrorScreen(props: CorsOriginErrorScreenProps) {\n  const {projectId} = props\n\n  const corsUrl = `https://sanity.io/manage/project/${projectId}/settings/api`\n  const origin = window.location.origin\n\n  const handleRetry = useCallback(() => {\n    window.location.reload()\n  }, [])\n\n  return (\n    <Card height=\"fill\">\n      <Dialog\n        id=\"cors-error-dialog\"\n        header=\"Error\"\n        width={1}\n        footer={\n          <Stack paddingX={3} paddingY={2}>\n            <Button text=\"Retry\" onClick={handleRetry} />\n          </Stack>\n        }\n      >\n        <Stack paddingX={4} paddingY={5} space={4}>\n          <Text>\n            It looks like the error is being caused by the current origin (<code>{origin}</code>)\n            not being allowed for this project.\n          </Text>\n\n          <Text>\n            If you are a project administrator or developer, you can head to{' '}\n            <a rel=\"noopener noreferrer\" target=\"_blank\" href={corsUrl}>\n              the project management\n            </a>{' '}\n            interface to configure CORS origins for this project.\n          </Text>\n\n          <Text>\n            <a\n              href=\"https://www.sanity.io/docs/front-ends/cors\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              Read more about CORS Origins\n            </a>\n            .\n          </Text>\n        </Stack>\n      </Dialog>\n    </Card>\n  )\n}\n","import React, {useCallback, useEffect, useState} from 'react'\nimport {Button, Card, Code, Container, ErrorBoundary, Heading, Stack, useToast} from '@sanity/ui'\nimport {useHotModuleReload} from 'use-hot-module-reload'\nimport {SchemaError} from '../config'\nimport {isRecord} from '../util'\nimport {globalScope} from '../util/globalScope'\nimport {CorsOriginError} from '../datastores'\nimport {CorsOriginErrorScreen, SchemaErrorsScreen} from './screens'\n\ninterface StudioErrorBoundaryProps {\n  children: React.ReactNode\n}\n\nconst errorChannel = globalScope.__sanityErrorChannel\n\nfunction isKnownError(err: Error): boolean {\n  if (err instanceof SchemaError) {\n    return true\n  }\n\n  if (err instanceof CorsOriginError) {\n    return true\n  }\n\n  return false\n}\n\nexport function StudioErrorBoundary({children}: StudioErrorBoundaryProps) {\n  const [{error}, setError] = useState<{error: unknown}>({error: null})\n  const {push: pushToast} = useToast()\n\n  const message = isRecord(error) && typeof error.message === 'string' && error.message\n  const stack = isRecord(error) && typeof error.stack === 'string' && error.stack\n\n  const handleResetError = useCallback(() => setError({error: null}), [setError])\n\n  useHotModuleReload(handleResetError)\n\n  useEffect(() => {\n    if (!errorChannel) return undefined\n\n    return errorChannel.subscribe((msg) => {\n      // NOTE: Certain errors (such as the `ResizeObserver loop limit exceeded` error) is thrown\n      // by the browser, and does not include an `error` property. We ignore these errors.\n      if (!msg.error) {\n        return\n      }\n\n      // For errors that we \"expect\", eg have specific error screens for, do not push a toast\n      if (isKnownError(msg.error)) {\n        return\n      }\n\n      console.error(msg.error)\n\n      pushToast({\n        closable: true,\n        description: msg.error.message,\n        duration: 5000,\n        title: 'Uncaught error',\n        status: 'error',\n      })\n    })\n  }, [pushToast])\n\n  if (error instanceof CorsOriginError) {\n    return <CorsOriginErrorScreen projectId={error?.projectId} />\n  }\n\n  if (error instanceof SchemaError) {\n    return <SchemaErrorsScreen schema={error.schema} />\n  }\n\n  if (error) {\n    return (\n      <Card\n        height=\"fill\"\n        overflow=\"auto\"\n        paddingY={[4, 5, 6, 7]}\n        paddingX={4}\n        sizing=\"border\"\n        tone=\"critical\"\n      >\n        <Container width={3}>\n          <Stack space={4}>\n            {/* TODO: better error boundary */}\n\n            <Heading>An error occurred</Heading>\n\n            <div>\n              <Button onClick={handleResetError} text=\"Retry\" tone=\"default\" />\n            </div>\n\n            <Card border radius={2} overflow=\"auto\" padding={4} tone=\"inherit\">\n              <Stack space={4}>\n                {message && (\n                  <Code size={1}>\n                    <strong>Error: {message}</strong>\n                  </Code>\n                )}\n                {stack && <Code size={1}>{stack}</Code>}\n              </Stack>\n            </Card>\n          </Stack>\n        </Container>\n      </Card>\n    )\n  }\n\n  return <ErrorBoundary onCatch={setError}>{children}</ErrorBoundary>\n}\n","import React, {useEffect} from 'react'\nimport {Flex, Box, Card, Code, Text} from '@sanity/ui'\nimport {startCase} from 'lodash'\nimport styled from 'styled-components'\n\nconst ListItem = styled(Flex)``\n\nconst ErrorMessageRoot = styled(Box).attrs({padding: 4})``\n\nexport interface ErrorMessageProps {\n  message: string\n  stack?: string\n  error: unknown\n  path: Array<{name: string; type: string}>\n}\n\nexport function ErrorMessage({error, message, path, stack}: ErrorMessageProps) {\n  useEffect(() => {\n    console.error(error)\n  }, [error])\n\n  const last = path[path.length - 1]\n\n  return (\n    <ErrorMessageRoot forwardedAs={Flex} direction=\"column\" gap={4}>\n      <Flex direction=\"column\" gap={2}>\n        <Text weight=\"semibold\" size={3}>\n          {startCase(last.type)} Error\n        </Text>\n      </Flex>\n\n      <Card tone=\"critical\" overflow=\"auto\" padding={4}>\n        <Code>{message}</Code>\n      </Card>\n\n      <Flex as=\"ul\" direction=\"column\" gap={2}>\n        {path.map(({name, type}, index) => (\n          <ListItem forwardedAs=\"li\" gap={2} align=\"center\" key={index}>\n            <Box>\n              <Code>{name}</Code>\n            </Box>\n            <Box>\n              <Text muted size={1}>\n                {type}\n              </Text>\n            </Box>\n          </ListItem>\n        ))}\n      </Flex>\n\n      {stack && (\n        <details>\n          <Text as=\"summary\">Stack Trace</Text>\n\n          <Box overflow=\"auto\" marginTop={4}>\n            <Code>{stack}</Code>\n          </Box>\n        </details>\n      )}\n    </ErrorMessageRoot>\n  )\n}\n","import {Tool} from '../../config'\nimport {route, Router} from '../../router'\n\nexport function createRouter(opts: {basePath?: string; tools: Tool[]}): Router {\n  const {basePath = '/', tools} = opts\n\n  const toolRoute = route.create('/:tool', (toolParams) => {\n    const tool = tools.find((current) => current.name === toolParams.tool)\n    return tool ? route.scope(tool.name, '/', tool.router) : route.create('/')\n  })\n\n  return route.create(basePath, [route.intents('/intent'), toolRoute])\n}\n","import {Tool} from '../../../config'\n\nexport function getOrderedTools(tools: Tool[]): Tool[] {\n  const pluginConfig: {toolSwitcher?: {order?: string[]; hidden?: string[]}} = {}\n  const config = pluginConfig.toolSwitcher || {}\n  const order = config.order || []\n  const hidden = config.hidden || []\n\n  if (!order.length && !hidden.length) {\n    return tools\n  }\n\n  const keyed = tools.reduce<Record<string, {index: number; tool: Tool}>>((target, tool) => {\n    const title = tool.title || '<unknown>'\n\n    if (!tool.name) {\n      console.warn(`Tool \"${title}\" does not have the required \"name\" property`)\n      return target\n    }\n\n    if (target[tool.name]) {\n      const existing = target[tool.name].tool.title\n      console.warn(`Tools with duplicate name \"${tool.name}\" found (\"${title}\" and \"${existing}\")`)\n      return target\n    }\n\n    const toolIndex = order.indexOf(tool.name)\n\n    target[tool.name] = {\n      tool: tool,\n      index: toolIndex === -1 ? +Infinity : toolIndex,\n    }\n\n    return target\n  }, {})\n\n  const isVisible = (tool: Tool) => hidden.indexOf(tool.name) === -1\n\n  const ret = tools.filter(isVisible)\n\n  ret.sort((tool1, tool2) => {\n    const toolA = keyed[tool1.name]\n    const toolB = keyed[tool2.name]\n\n    const indexA = toolA ? toolA.index : +Infinity\n    const indexB = toolB ? toolB.index : +Infinity\n\n    if (indexA === indexB) {\n      return 0\n    }\n\n    return indexA - indexB\n  })\n\n  return ret\n}\n","import {Tool} from '../../config'\nimport {RouterState, Router} from '../../router'\nimport {isRecord} from '../../util/isRecord'\nimport {RouterEvent, RouterStateEvent} from './types'\nimport {getOrderedTools} from './util/getOrderedTools'\n\nfunction resolveUrlStateWithDefaultTool(tools: Tool[], state: Record<string, unknown> | null) {\n  const orderedTools = getOrderedTools(tools)\n  const defaultTool = orderedTools[0]\n\n  if (!state || state.tool || !defaultTool) {\n    return state\n  }\n\n  return Object.assign({}, state, {\n    tool: defaultTool.name,\n  })\n}\n\nfunction makeBackwardsCompatible(\n  tools: Tool[],\n  state: Record<string, unknown> | null\n): Record<string, unknown> | null {\n  if (!state) {\n    return state\n  }\n\n  if (getOrderedTools(tools).find((tool) => tool.name === state.space)) {\n    return {...state, tool: state.space, space: undefined}\n  }\n\n  return state\n}\n\nexport function resolveDefaultState(\n  tools: Tool[],\n  state: Record<string, unknown> | null\n): RouterState | null {\n  const urlStateWithDefaultTool = resolveUrlStateWithDefaultTool(\n    tools,\n    makeBackwardsCompatible(tools, state)\n  )\n\n  return urlStateWithDefaultTool\n}\n\nexport function resolveIntentState(\n  tools: Tool[],\n  currentState: RouterState | null,\n  intentState: RouterState\n): RouterEvent {\n  const {intent, params, payload} = intentState\n\n  if (typeof intent !== 'string') {\n    throw new Error('intent must be a string')\n  }\n\n  if (!isRecord(params)) {\n    throw new Error('intent params must be a string')\n  }\n\n  const orderedTools = getOrderedTools(tools)\n\n  const currentTool = currentState?.tool\n    ? orderedTools.find((tool) => tool.name === currentState.tool)\n    : null\n\n  // If current tool can handle intent and if so, give it precedence\n  const matchingTool = (currentTool ? [currentTool, ...orderedTools] : orderedTools).find(\n    (tool) =>\n      tool &&\n      typeof tool.canHandleIntent === 'function' &&\n      tool.canHandleIntent(intent, params, currentState && currentState[tool.name])\n  )\n\n  if (matchingTool?.getIntentState) {\n    const toolState = matchingTool.getIntentState(\n      intent,\n      params as any,\n      currentState && (currentState[matchingTool.name] as any),\n      payload\n    )\n\n    return {\n      type: 'state',\n      isNotFound: false,\n      state: {\n        ...currentState,\n        tool: matchingTool.name,\n        [matchingTool.name]: toolState,\n      },\n    }\n  }\n\n  return {\n    type: 'intent',\n    isNotFound: true,\n    intent: {name: intent, params},\n  }\n}\n\nexport function decodeUrlState(rootRouter: Router, pathname: string): RouterStateEvent {\n  return {\n    type: 'state',\n    state: rootRouter.decode(pathname) || {},\n    isNotFound: rootRouter.isNotFound(pathname),\n  }\n}\n\nexport function isNonNullable<T>(value: T): value is NonNullable<T> {\n  return value !== null && value !== undefined\n}\n","import {escapeRegExp, isEqual} from 'lodash'\nimport {EMPTY, Observable, of} from 'rxjs'\nimport {distinctUntilChanged, filter, map, mergeScan, shareReplay} from 'rxjs/operators'\nimport {History, Location} from 'history'\nimport {Tool} from '../../config'\nimport {Router} from '../../router'\nimport {decodeUrlState, isNonNullable, resolveDefaultState, resolveIntentState} from './helpers'\nimport {RouterEvent} from './types'\n\ninterface RouterEventStreamOptions {\n  unstable_history: History\n  router: Router\n  tools: Tool[]\n}\n\n/**\n * @internal\n */\nexport function createRouterEventStream({\n  unstable_history: history,\n  router,\n  tools,\n}: RouterEventStreamOptions): Observable<RouterEvent> {\n  function maybeHandleIntent(\n    prevEvent: RouterEvent | null,\n    currentEvent: RouterEvent\n  ): Observable<RouterEvent> {\n    if (currentEvent?.type === 'state' && currentEvent.state?.intent) {\n      const redirectState = resolveIntentState(\n        tools,\n        prevEvent?.type === 'state' ? prevEvent.state : {},\n        currentEvent.state\n      )\n\n      if (redirectState?.type === 'state') {\n        history.replace(router.encode(redirectState.state))\n        // This will not push anything downstream and preserve the prevEvent for the next received value\n        // Since we are calling history.replace here, a new event will be received immediately\n        return EMPTY\n      }\n    }\n\n    return of(currentEvent)\n  }\n\n  function maybeRedirectDefaultState(event: RouterEvent) {\n    if (event.type === 'state') {\n      const defaultState = resolveDefaultState(tools, event.state)\n\n      if (defaultState && defaultState !== event.state) {\n        history.replace(router.encode(defaultState))\n        return null\n      }\n    }\n\n    return event\n  }\n\n  const routerBasePath = router.getBasePath()\n\n  const state$: Observable<RouterEvent> = new Observable<Location>((observer) => {\n    const unlisten = history.listen((location) => observer.next(location))\n\n    // emit on mount\n    observer.next(history.location)\n    return unlisten\n  }).pipe(\n    // this is necessary to prevent emissions intended for other workspaces.\n    //\n    // this regex ends with a `(\\\\/|$)` (forward slash or end) to prevent false\n    // matches where the pathname is a false subset of the current pathname.\n    filter(({pathname}) =>\n      routerBasePath === '/'\n        ? true\n        : new RegExp(`^${escapeRegExp(routerBasePath)}(\\\\/|$)`, 'i').test(pathname)\n    ),\n    map(({pathname}) => decodeUrlState(router, pathname)),\n    mergeScan(maybeHandleIntent, null),\n    filter(isNonNullable),\n    map(maybeRedirectDefaultState),\n    filter(isNonNullable),\n    distinctUntilChanged(isEqual),\n    shareReplay(1)\n  )\n\n  return state$\n}\n","import React, {createContext, useContext} from 'react'\nimport {Workspace} from '../config'\n\nexport interface WorkspaceProviderProps {\n  workspace: Workspace\n  children?: React.ReactChild\n}\nconst WorkspaceContext = createContext<Workspace | null>(null)\nexport function WorkspaceProvider({children, workspace}: WorkspaceProviderProps) {\n  return <WorkspaceContext.Provider value={workspace}>{children}</WorkspaceContext.Provider>\n}\nexport function useWorkspace() {\n  const workspace = useContext(WorkspaceContext)\n  if (!workspace) throw new Error('Could not find `workspace` context')\n  return workspace\n}\n","import React, {createContext, useContext} from 'react'\nimport {Source} from '../config'\nimport {useWorkspace} from './workspace'\n\nexport type SourceProviderProps =\n  | {source: Source; children?: React.ReactNode}\n  | {name: string; children?: React.ReactNode}\n\nconst SourceContext = createContext<Source | null>(null)\n\nexport function SourceProvider({children, ...props}: SourceProviderProps) {\n  const parentSource = useContext(SourceContext)\n  const {unstable_sources: sources} = useWorkspace()\n\n  if ('source' in props) {\n    const {source} = props\n    return <SourceContext.Provider value={source}>{children}</SourceContext.Provider>\n  }\n\n  if ('name' in props) {\n    const {name} = props\n    const source = sources.find((s) => s.name === name)\n    if (!source) {\n      throw new Error(`Could not find source with name \\`${name}\\` in current workspace`)\n    }\n    if (parentSource === source) return <>{children}</>\n    return <SourceContext.Provider value={source}>{children}</SourceContext.Provider>\n  }\n\n  throw new Error(\n    'Invalid props passed into SourceProvider. A `name` or a `source` object is required.'\n  )\n}\n\n/**\n * @internal\n * @deprecated INTERNAL USE ONLY\n */\nexport function useSource(): Source {\n  const source = useContext(SourceContext)\n  if (!source) throw new Error('Could not find `source` context')\n  return source\n}\n","import React, {useCallback, useEffect, useMemo, useState} from 'react'\nimport {map, filter, scan, catchError} from 'rxjs/operators'\nimport {combineLatest, of} from 'rxjs'\nimport {History} from 'history'\nimport {ErrorBoundary} from '@sanity/ui'\nimport {createHookFromObservableFactory} from '../../util'\nimport {ConfigResolutionError, Tool, Source, Workspace} from '../../config'\nimport {Router, RouterProvider, RouterState} from '../../router'\nimport {createRouter, createRouterEventStream} from '../router'\nimport {useActiveWorkspace} from '../activeWorkspaceMatcher'\nimport {WorkspaceProvider} from '../workspace'\nimport {SourceProvider} from '../source'\n// TODO: work on error handler\n// import {flattenErrors} from './flattenErrors'\n\nconst isStateEvent = <T extends {type: string}>(e: T): e is Extract<T, {type: 'state'}> =>\n  e.type === 'state'\n\nconst initialState: StudioRouterState = {isNotFound: true, state: {}}\n\ninterface StudioRouterState {\n  isNotFound: boolean\n  state: RouterState\n}\n\ninterface UseRouterStateOptions {\n  unstable_history: History\n  router: Router | undefined\n  tools: Tool[] | undefined\n}\n\nconst useRouterState = createHookFromObservableFactory(\n  ({tools, unstable_history, router}: UseRouterStateOptions) => {\n    if (!router || !tools) return of(initialState)\n\n    return createRouterEventStream({\n      unstable_history,\n      router,\n      tools,\n    }).pipe(\n      filter(isStateEvent),\n      scan((prevState, event) => {\n        return {\n          ...prevState,\n          isNotFound: event.isNotFound,\n          state: event.state,\n        }\n      }, initialState)\n    )\n  },\n  {initialValue: initialState}\n)\n\ninterface WorkspaceLoaderProps {\n  children: React.ReactNode\n  ConfigErrorsComponent: React.ComponentType\n  LoadingComponent: React.ComponentType\n}\n\nfunction WorkspaceLoader({\n  children,\n  LoadingComponent,\n}: Omit<WorkspaceLoaderProps, 'ConfigErrorsComponent'>) {\n  const [error, handleError] = useState<unknown>(null)\n  if (error) throw error\n\n  const {\n    activeWorkspace,\n    __internal: {history},\n  } = useActiveWorkspace()\n  const [workspace, setWorkspace] = useState<Workspace | null>(null)\n\n  const handleNavigate = useCallback(\n    (opts: {path: string; replace?: boolean}) => {\n      if (opts.replace) {\n        history.replace(opts.path)\n      } else {\n        history.push(opts.path)\n      }\n    },\n    [history]\n  )\n\n  useEffect(() => {\n    const subscription = combineLatest(\n      activeWorkspace.__internal.sources.map(({source}) =>\n        source.pipe(\n          catchError((err) => {\n            if (err instanceof ConfigResolutionError) return of(err)\n            throw err\n          })\n        )\n      )\n    )\n      .pipe(\n        map((results): Source[] => {\n          const errors = results.filter((result) => result instanceof ConfigResolutionError)\n          if (errors.length) {\n            throw new ConfigResolutionError({\n              name: activeWorkspace.name,\n              causes: errors,\n              type: 'workspace',\n            })\n          }\n\n          return results as Source[]\n        }),\n        map(\n          ([rootSource, ...restOfSources]): Workspace => ({\n            ...activeWorkspace,\n            ...rootSource,\n            unstable_sources: [rootSource, ...restOfSources],\n            type: 'workspace',\n          })\n        )\n      )\n      .subscribe({\n        next: setWorkspace,\n        error: handleError,\n      })\n\n    return () => subscription.unsubscribe()\n  }, [activeWorkspace])\n\n  const tools = workspace?.tools\n  const router = useMemo(() => {\n    if (!workspace) return undefined\n    return createRouter(workspace)\n  }, [workspace])\n\n  const [routerState] = useRouterState({unstable_history: history, router, tools})\n  if (!router || !workspace) return <LoadingComponent />\n\n  // TODO: may need a screen if one of the sources is not logged in. e.g. it\n  // is currently possible for the user to be logged into the current workspace\n  // but not all of its nested sources.\n  // if (!allSourcesLoggedIn) return <NotAllSourcesAuthenticatedComponent />\n\n  return (\n    <WorkspaceProvider workspace={workspace}>\n      <SourceProvider\n        // the first source is always the root source and is always present\n        source={workspace.unstable_sources[0]}\n      >\n        <RouterProvider onNavigate={handleNavigate} router={router} state={routerState.state}>\n          {children}\n        </RouterProvider>\n      </SourceProvider>\n    </WorkspaceProvider>\n  )\n}\n\nfunction WorkspaceLoaderBoundary({ConfigErrorsComponent, ...props}: WorkspaceLoaderProps) {\n  const [{error}, setError] = useState<{error: unknown}>({error: null})\n\n  // TODO: implement this\n  // const errors = useMemo(() => flattenErrors(error, []), [error])\n\n  if (error instanceof ConfigResolutionError) return <ConfigErrorsComponent />\n\n  // otherwise hand off to other boundaries\n  if (error) throw error\n\n  return (\n    <ErrorBoundary onCatch={setError}>\n      <WorkspaceLoader {...props} />\n    </ErrorBoundary>\n  )\n}\n\nexport {WorkspaceLoaderBoundary as WorkspaceLoader}\n","import React, {useEffect, useState} from 'react'\nimport {LoadingScreen, AuthenticateScreen, NotAuthenticatedScreen} from './screens'\nimport {useActiveWorkspace} from './activeWorkspaceMatcher'\n\ninterface AuthBoundaryProps {\n  children: React.ReactNode\n  AuthenticateComponent?: React.ComponentType\n  LoadingComponent?: React.ComponentType\n  NotAuthenticatedComponent?: React.ComponentType\n}\n\nexport function AuthBoundary({\n  children,\n  AuthenticateComponent = AuthenticateScreen,\n  LoadingComponent = LoadingScreen,\n  NotAuthenticatedComponent = NotAuthenticatedScreen,\n}: AuthBoundaryProps) {\n  const [error, handleError] = useState<unknown>(null)\n  if (error) throw error\n\n  const [loggedIn, setLoggedIn] = useState<'logged-in' | 'logged-out' | 'loading' | 'unauthorized'>(\n    'loading'\n  )\n  const {activeWorkspace} = useActiveWorkspace()\n\n  useEffect(() => {\n    activeWorkspace.auth.handleCallbackUrl?.().catch(handleError)\n  }, [activeWorkspace.auth])\n\n  useEffect(() => {\n    const subscription = activeWorkspace.auth.state.subscribe({\n      next: ({authenticated, currentUser}) => {\n        if (currentUser?.roles?.length === 0) {\n          setLoggedIn('unauthorized')\n\n          return\n        }\n\n        setLoggedIn(authenticated ? 'logged-in' : 'logged-out')\n      },\n      error: handleError,\n    })\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [activeWorkspace])\n\n  if (loggedIn === 'loading') return <LoadingComponent />\n\n  if (loggedIn === 'unauthorized') return <NotAuthenticatedComponent />\n\n  // NOTE: there is currently a bug where the `AuthenticateComponent` will\n  // flash after the first login with cookieless mode. See `createAuthStore`\n  // for details\n  if (loggedIn === 'logged-out') return <AuthenticateComponent />\n\n  return <>{children}</>\n}\n","export const Z_OFFSET = {\n  toast: [100, 11000],\n}\n","import React, {Fragment, useMemo} from 'react'\nimport Refractor from 'react-refractor'\nimport bash from 'refractor/lang/bash'\nimport javascript from 'refractor/lang/javascript'\nimport json from 'refractor/lang/json'\nimport jsx from 'refractor/lang/jsx'\nimport typescript from 'refractor/lang/typescript'\nimport {History} from 'history'\nimport {ThemeColorSchemeKey, ToastProvider} from '@sanity/ui'\nimport {Config} from '../config'\nimport {UserColorManagerProvider} from '../user-color'\nimport {ResourceCacheProvider} from '../datastores/ResourceCacheProvider'\nimport {ColorSchemeProvider} from './colorScheme'\nimport {ActiveWorkspaceMatcher} from './activeWorkspaceMatcher'\nimport {StudioThemeProvider} from './StudioThemeProvider'\nimport {StudioErrorBoundary} from './StudioErrorBoundary'\nimport {WorkspaceLoader} from './workspaceLoader'\nimport {\n  ConfigErrorsScreen,\n  LoadingScreen,\n  AuthenticateScreen,\n  NotFoundScreen,\n  NotAuthenticatedScreen,\n} from './screens'\nimport {WorkspacesProvider} from './workspaces'\nimport {AuthBoundary} from './AuthBoundary'\nimport {Z_OFFSET} from './constants'\n\nRefractor.registerLanguage(bash)\nRefractor.registerLanguage(javascript)\nRefractor.registerLanguage(json)\nRefractor.registerLanguage(jsx)\nRefractor.registerLanguage(typescript)\n\nexport interface StudioProviderProps {\n  children: React.ReactNode\n  config: Config\n  onSchemeChange?: (nextScheme: ThemeColorSchemeKey) => void\n  scheme?: ThemeColorSchemeKey\n  unstable_history?: History\n  unstable_noAuthBoundary?: boolean\n}\n\nexport function StudioProvider({\n  children,\n  config,\n  onSchemeChange,\n  scheme,\n  unstable_history: history,\n  unstable_noAuthBoundary: noAuthBoundary,\n}: StudioProviderProps) {\n  const ConditionalAuthBoundary = useMemo(\n    () => (noAuthBoundary ? Fragment : AuthBoundary),\n    [noAuthBoundary]\n  )\n\n  return (\n    <ColorSchemeProvider onSchemeChange={onSchemeChange} scheme={scheme}>\n      <ToastProvider paddingY={7} zOffset={Z_OFFSET.toast}>\n        <StudioErrorBoundary>\n          <WorkspacesProvider config={config}>\n            <ActiveWorkspaceMatcher\n              unstable_history={history}\n              NotFoundComponent={NotFoundScreen}\n              LoadingComponent={LoadingScreen}\n            >\n              <StudioThemeProvider>\n                <UserColorManagerProvider>\n                  <ConditionalAuthBoundary\n                    LoadingComponent={LoadingScreen}\n                    AuthenticateComponent={AuthenticateScreen}\n                    NotAuthenticatedComponent={NotAuthenticatedScreen}\n                  >\n                    <WorkspaceLoader\n                      LoadingComponent={LoadingScreen}\n                      ConfigErrorsComponent={ConfigErrorsScreen}\n                    >\n                      <ResourceCacheProvider>{children}</ResourceCacheProvider>\n                    </WorkspaceLoader>\n                  </ConditionalAuthBoundary>\n                </UserColorManagerProvider>\n              </StudioThemeProvider>\n            </ActiveWorkspaceMatcher>\n          </WorkspacesProvider>\n        </StudioErrorBoundary>\n      </ToastProvider>\n    </ColorSchemeProvider>\n  )\n}\n","// eslint-disable-next-line no-process-env\nexport const isDev = process.env.NODE_ENV !== 'production'\nexport const isProd = !isDev\n","import {Avatar, AvatarPosition, AvatarSize, AvatarStatus, Box, Text, Tooltip} from '@sanity/ui'\nimport React, {forwardRef, useState} from 'react'\nimport type {User} from '@sanity/types'\nimport {useUser} from '../datastores'\nimport {useUserColor} from '../user-color'\nimport {isRecord} from '../util'\n\nexport interface UserAvatarProps {\n  animateArrowFrom?: AvatarPosition\n  position?: AvatarPosition\n  size?: AvatarSize\n  status?: AvatarStatus\n  tone?: 'navbar'\n  user: User | string\n  withTooltip?: boolean\n}\n\nconst symbols = /[^\\p{Alpha}\\p{White_Space}]/gu\nconst whitespace = /\\p{White_Space}+/u\n\nconst LEGACY_TO_UI_AVATAR_SIZES: {[key: string]: AvatarSize | undefined} = {\n  small: 0,\n  medium: 1,\n  large: 2,\n}\n\nfunction nameToInitials(fullName: string) {\n  const namesArray = fullName.replace(symbols, '').split(whitespace)\n\n  if (namesArray.length === 1) {\n    return `${namesArray[0].charAt(0)}`.toUpperCase()\n  }\n\n  return `${namesArray[0].charAt(0)}${namesArray[namesArray.length - 1].charAt(0)}`\n}\n\nexport function UserAvatar(props: UserAvatarProps) {\n  const {user, ...restProps} = props\n\n  if (isRecord(user)) {\n    if (restProps.withTooltip) {\n      return <TooltipUserAvatar {...restProps} user={user as User} />\n    }\n\n    return <StaticUserAvatar {...restProps} user={user as User} />\n  }\n\n  return <UserAvatarLoader {...props} user={user as string} />\n}\n\nfunction TooltipUserAvatar(props: Omit<UserAvatarProps, 'user'> & {user: User}) {\n  const {\n    user: {displayName},\n  } = props\n\n  return (\n    <Tooltip\n      content={\n        <Box padding={2}>\n          <Text size={1}>{displayName}</Text>\n        </Box>\n      }\n      placement=\"top\"\n      portal\n    >\n      <div style={{display: 'inline-block'}}>\n        <StaticUserAvatar {...props} />\n      </div>\n    </Tooltip>\n  )\n}\n\nconst StaticUserAvatar = forwardRef(function StaticUserAvatar(\n  props: Omit<UserAvatarProps, 'user'> & {user: User},\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {user, animateArrowFrom, position, size, status, tone} = props\n  const [imageLoadError, setImageLoadError] = useState<null | Error>(null)\n  const userColor = useUserColor(user.id)\n  const imageUrl = imageLoadError ? undefined : user?.imageUrl\n\n  return (\n    <Avatar\n      animateArrowFrom={animateArrowFrom}\n      arrowPosition={position}\n      color={userColor.name}\n      data-legacy-tone={tone}\n      initials={user?.displayName && nameToInitials(user.displayName)}\n      src={imageUrl}\n      onImageLoadError={setImageLoadError}\n      ref={ref}\n      size={typeof size === 'string' ? LEGACY_TO_UI_AVATAR_SIZES[size] : size}\n      status={status}\n    />\n  )\n})\n\nfunction UserAvatarLoader({user, ...loadedProps}: Omit<UserAvatarProps, 'user'> & {user: string}) {\n  const [value] = useUser(user)\n\n  if (!value) {\n    // @todo How do we handle this?\n    return null\n  }\n\n  return <UserAvatar {...loadedProps} user={value} />\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {SanityMonogram} from '@sanity/logos'\n\nconst Root = styled.div`\n  position: absolute;\n  width: 18px;\n  height: 18px;\n  background: var(--card-bg-color);\n  bottom: -4px;\n  right: -4px;\n  border-radius: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 1px solid var(--card-bg-color);\n  box-sizing: content-box;\n\n  svg {\n    box-sizing: content-box;\n    border: 1px solid var(--card-hairline-soft-color);\n    border-radius: 50%;\n    padding: 2px;\n    width: 12px;\n    height: 12px;\n  }\n\n  &[data-logo='github'] {\n    svg {\n      path {\n        fill: var(--card-fg-color);\n      }\n    }\n  }\n\n  &[data-logo='saml'] {\n    svg {\n      path {\n        fill: var(--card-fg-color);\n      }\n    }\n  }\n`\n\nconst Google = (\n  <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g clipPath=\"url(#clip0)\">\n      <path\n        d=\"M12 6.13764C12 5.72977 11.9663 5.31971 11.8943 4.91846H6.12036V7.22895H9.42684C9.28963 7.97412 8.84876 8.63332 8.20322 9.05221V10.5514H10.1759C11.3342 9.50637 12 7.9631 12 6.13764Z\"\n        fill=\"#4285F4\"\n      />\n      <path\n        d=\"M6.12019 12.0002C7.77118 12.0002 9.16349 11.4688 10.1779 10.5517L8.20529 9.05253C7.65646 9.41851 6.94793 9.62574 6.12244 9.62574C4.52544 9.62574 3.17136 8.56971 2.68552 7.1499H0.649902V8.69537C1.68908 10.7215 3.80567 12.0002 6.12019 12.0002V12.0002Z\"\n        fill=\"#34A853\"\n      />\n      <path\n        d=\"M2.68332 7.14986C2.4269 6.40469 2.4269 5.59778 2.68332 4.8526V3.30713H0.649951C-0.218278 5.00252 -0.218278 6.99995 0.649951 8.69533L2.68332 7.14986V7.14986Z\"\n        fill=\"#FBBC04\"\n      />\n      <path\n        d=\"M6.12019 2.37483C6.99291 2.3616 7.8364 2.68348 8.46845 3.27433L10.2161 1.56131C9.1095 0.542752 7.64071 -0.017233 6.12019 0.000404333C3.80566 0.000404333 1.68908 1.27911 0.649902 3.3074L2.68326 4.85288C3.16686 3.43087 4.52319 2.37483 6.12019 2.37483V2.37483Z\"\n        fill=\"#EA4335\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0\">\n        <rect width=\"12\" height=\"12\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n)\n\nconst GitHub = (\n  <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g clipPath=\"url(#clip0)\">\n      <path\n        d=\"M11.195 3.13503C10.6711 2.22838 9.91808 1.47537 9.01144 0.951471C8.09222 0.414976 7.08837 0.146729 5.99987 0.146729C4.91137 0.146729 3.90752 0.414976 2.98831 0.951471C2.08163 1.47534 1.32862 2.22836 0.804744 3.13503C0.268248 4.05497 0 5.05883 0 6.14659C0 7.45399 0.381531 8.62978 1.14459 9.67394C1.90765 10.7181 2.89327 11.4408 4.10143 11.8419C4.24208 11.868 4.34624 11.8497 4.41392 11.7872C4.44666 11.7577 4.47263 11.7215 4.49006 11.681C4.50749 11.6405 4.51595 11.5967 4.51488 11.5527C4.51488 11.537 4.51361 11.3963 4.51105 11.1307C4.5085 10.8651 4.50722 10.6334 4.50722 10.4355L4.32745 10.4666C4.18407 10.4895 4.03885 10.4986 3.89375 10.494C3.71159 10.4908 3.53001 10.4725 3.35087 10.4393C3.16049 10.4045 2.98119 10.3246 2.82796 10.2064C2.66705 10.0846 2.54715 9.91661 2.48428 9.72484L2.40602 9.54506C2.34022 9.40286 2.25754 9.2691 2.15976 9.14666C2.04775 9.00072 1.93447 8.90176 1.81991 8.84977L1.76518 8.81064C1.72769 8.78356 1.6936 8.75205 1.66367 8.71679C1.63479 8.6841 1.61108 8.64719 1.59334 8.60734C1.57766 8.57085 1.5907 8.54085 1.63247 8.51731C1.67461 8.49405 1.75123 8.48256 1.86068 8.48256L2.01692 8.50582C2.12108 8.52662 2.24996 8.5891 2.40356 8.69326C2.5585 8.79876 2.68797 8.93748 2.78254 9.09932C2.90239 9.31294 3.04695 9.47575 3.21624 9.58775C3.38552 9.69976 3.55609 9.75576 3.72793 9.75576C3.87725 9.7578 4.02641 9.74479 4.17312 9.7169C4.29459 9.69195 4.41264 9.65254 4.52473 9.59952C4.57162 9.25037 4.69931 8.98212 4.90782 8.79477C4.63684 8.76849 4.36827 8.72157 4.10444 8.6544C3.84797 8.58382 3.60133 8.48141 3.37029 8.34958C3.12825 8.218 2.91442 8.04015 2.74095 7.82613C2.57421 7.6178 2.4374 7.34417 2.3305 7.00524C2.2236 6.6663 2.1707 6.27584 2.1718 5.83383C2.1718 5.20357 2.37757 4.66708 2.7891 4.22435C2.59629 3.75006 2.61453 3.21885 2.84383 2.63073C2.99487 2.58385 3.21879 2.61897 3.51559 2.73608C3.81239 2.85319 4.02983 2.95352 4.16792 3.03707C4.30601 3.12025 4.41665 3.19058 4.49983 3.24804C5.48153 2.9773 6.51821 2.9773 7.49991 3.24804L7.79679 3.0606C8.0249 2.92356 8.26549 2.80849 8.51535 2.71693C8.79135 2.61276 9.00231 2.58412 9.14825 2.63101C9.38248 3.21949 9.40327 3.7507 9.21064 4.22462C9.62199 4.66735 9.82776 5.20385 9.82795 5.83411C9.82795 6.27684 9.77459 6.66904 9.66787 7.01071C9.56116 7.35238 9.42325 7.62601 9.25415 7.8316C9.07785 8.04326 8.86311 8.21966 8.62124 8.35149C8.39008 8.48329 8.14337 8.5857 7.88682 8.65632C7.62412 8.72277 7.35674 8.76915 7.087 8.79505C7.35698 9.02927 7.49206 9.3994 7.49225 9.90543V11.5527C7.49115 11.5964 7.49929 11.6398 7.51612 11.6802C7.53295 11.7206 7.5581 11.7569 7.58993 11.7869C7.65505 11.8493 7.75794 11.8675 7.89858 11.8416C9.10693 11.4403 10.0926 10.7177 10.8557 9.67367C11.6188 8.62968 12.0003 7.4539 12.0003 6.14632C11.9997 5.05873 11.7313 4.05497 11.195 3.13503V3.13503Z\"\n        fill=\"black\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0\">\n        <rect width=\"12\" height=\"12\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n)\n\nconst Saml = (\n  <svg width=\"17\" height=\"9\" viewBox=\"0 0 17 9\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M0.0691681 5.98162C0.115833 7.24157 1.07247 8.00221 2.59841 8.00221C4.17102 8.00221 5.12299 7.19957 5.12299 5.86962C5.12299 4.83832 4.55367 4.25501 3.25172 3.96569L2.56108 3.80703C1.8331 3.64837 1.53445 3.38704 1.53445 2.91106C1.53445 2.40708 1.94977 2.09442 2.61708 2.09442C3.27505 2.09442 3.6997 2.43508 3.75103 2.99039H5.00166C4.95966 1.78643 4.01236 0.997795 2.60308 0.997795C1.14713 0.997795 0.218496 1.79577 0.218496 3.05105C0.218496 4.04968 0.815808 4.69366 2.03376 4.96898L2.73374 5.13231C3.51304 5.30497 3.8117 5.54763 3.8117 6.00495C3.8117 6.55093 3.34972 6.90092 2.62174 6.90092C1.85644 6.90092 1.38045 6.56493 1.31979 5.98162H0.0691681Z\" />\n    <path d=\"M5.97695 5.98162C6.02362 7.24157 6.98025 8.00221 8.5062 8.00221C10.0788 8.00221 11.0308 7.19957 11.0308 5.86962C11.0308 4.83832 10.4615 4.25501 9.15951 3.96569L8.46886 3.80703C7.74089 3.64837 7.44223 3.38704 7.44223 2.91106C7.44223 2.40708 7.85755 2.09442 8.52486 2.09442C9.18284 2.09442 9.60749 2.43508 9.65882 2.99039H10.9094C10.8674 1.78643 9.92015 0.997795 8.51086 0.997795C7.05492 0.997795 6.12628 1.79577 6.12628 3.05105C6.12628 4.04968 6.72359 4.69366 7.94155 4.96898L8.64153 5.13231C9.42083 5.30497 9.71949 5.54763 9.71949 6.00495C9.71949 6.55093 9.2575 6.90092 8.52953 6.90092C7.76422 6.90092 7.28824 6.56493 7.22758 5.98162H5.97695Z\" />\n    <path d=\"M16.9852 5.01565V3.98435C16.9852 2.11309 16.0099 0.997795 14.3953 0.997795C12.7807 0.997795 11.8054 2.11309 11.8054 3.98435V5.01565C11.8054 6.88692 12.7807 8.00221 14.3953 8.00221C16.0099 8.00221 16.9852 6.88692 16.9852 5.01565ZM14.3953 6.82625C13.5833 6.82625 13.154 6.21494 13.154 5.00165V3.99835C13.154 2.78506 13.5833 2.17375 14.3953 2.17375C15.2073 2.17375 15.6366 2.78506 15.6366 3.99835V5.00165C15.6366 6.21494 15.2073 6.82625 14.3953 6.82625Z\" />\n  </svg>\n)\n\ninterface Props {\n  provider: string | undefined\n}\n\nexport const LoginProviderLogo = ({provider}: Props) => {\n  const isSaml = provider?.startsWith('saml-')\n  const logoName = isSaml ? 'saml' : provider\n\n  return (\n    <Root data-logo={logoName}>\n      {provider === 'google' && Google}\n      {provider === 'github' && GitHub}\n      {provider === 'sanity' && <SanityMonogram />}\n      {isSaml && Saml}\n    </Root>\n  )\n}\n","import {SunIcon, MoonIcon, LeaveIcon, ChevronDownIcon, CogIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Card,\n  Flex,\n  Label,\n  Menu,\n  MenuButton,\n  MenuButtonProps,\n  MenuDivider,\n  MenuItem,\n  Stack,\n  Text,\n  Tooltip,\n} from '@sanity/ui'\nimport React, {useCallback, useMemo} from 'react'\nimport styled from 'styled-components'\nimport {UserAvatar} from '../../../../components/UserAvatar'\nimport {getProviderTitle} from '../../../../datastores/authStore/providerTitle'\nimport {useColorScheme} from '../../../colorScheme'\nimport {useWorkspace} from '../../../workspace'\nimport {LoginProviderLogo} from './LoginProviderLogo'\n\nconst StyledMenu = styled(Menu)`\n  min-width: 125px;\n  max-width: 350px;\n`\n\nconst AvatarBox = styled(Box)`\n  position: relative;\n`\n\nexport function UserMenu() {\n  const {currentUser, projectId, auth} = useWorkspace()\n  const {scheme, setScheme} = useColorScheme()\n\n  const providerTitle = getProviderTitle(currentUser?.provider)\n\n  const popoverProps: MenuButtonProps['popover'] = useMemo(\n    () => ({\n      placement: 'bottom-end',\n      portal: true,\n      preventOverflow: true,\n      scheme: scheme,\n    }),\n    [scheme]\n  )\n\n  const handleToggleScheme = useCallback(() => {\n    setScheme(scheme === 'dark' ? 'light' : 'dark')\n  }, [scheme, setScheme])\n\n  return (\n    <MenuButton\n      button={\n        <Button mode=\"bleed\" padding={0} paddingX={1}>\n          <Flex align=\"center\" gap={1}>\n            <UserAvatar user=\"me\" size={1} />\n            <Text size={1} muted>\n              <ChevronDownIcon />\n            </Text>\n          </Flex>\n        </Button>\n      }\n      id=\"user-menu\"\n      menu={\n        <StyledMenu>\n          <Card padding={2}>\n            <Box marginBottom={3}>\n              <Label size={1} muted>\n                Signed in as\n              </Label>\n            </Box>\n\n            <Flex align=\"center\">\n              <Tooltip\n                disabled={!providerTitle}\n                portal\n                content={\n                  providerTitle && (\n                    <Box padding={2}>\n                      <Text size={1}>Signed in with {providerTitle}</Text>\n                    </Box>\n                  )\n                }\n              >\n                <AvatarBox marginRight={3}>\n                  <UserAvatar size={1} user=\"me\" />\n                  {currentUser?.provider && <LoginProviderLogo provider={currentUser.provider} />}\n                </AvatarBox>\n              </Tooltip>\n\n              <Stack space={2} flex={1}>\n                <Text size={1} weight=\"semibold\" textOverflow=\"ellipsis\">\n                  {currentUser?.name}\n                </Text>\n\n                <Text size={1} muted textOverflow=\"ellipsis\">\n                  {currentUser?.email}\n                </Text>\n              </Stack>\n            </Flex>\n          </Card>\n\n          <MenuDivider />\n\n          <MenuItem\n            icon={scheme === 'dark' ? SunIcon : MoonIcon}\n            onClick={handleToggleScheme}\n            text={scheme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode'}\n          />\n\n          <MenuDivider />\n\n          <MenuItem\n            as=\"a\"\n            href={`https://sanity.io/manage/project/${projectId}`}\n            target=\"_blank\"\n            text=\"Manage project\"\n            icon={CogIcon}\n          />\n\n          {auth.logout && (\n            <>\n              <MenuDivider />\n              <MenuItem\n                iconRight={LeaveIcon}\n                text=\"Sign out\"\n                disabled={!auth.logout}\n                {...(auth.logout && {onClick: auth.logout})}\n              />\n            </>\n          )}\n        </StyledMenu>\n      }\n      popover={popoverProps}\n    />\n  )\n}\n","import {PreviewLayoutKey} from './types'\n\nexport const PREVIEW_MEDIA_SIZE: Record<PreviewLayoutKey, {width: number; height: number}> = {\n  block: {width: 33, height: 33},\n  blockImage: {width: 600, height: 400},\n  default: {width: 35, height: 35},\n  detail: {width: 75, height: 75},\n  inline: {width: 15, height: 15},\n  media: {width: 160, height: 160},\n}\n\nexport const PREVIEW_ICON_SIZE: Record<PreviewLayoutKey, number | undefined> = {\n  block: 31,\n  blockImage: 45,\n  default: 33,\n  detail: 45,\n  inline: 15,\n  media: 45,\n}\n","import {rem} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {PREVIEW_ICON_SIZE} from '../constants'\nimport {PreviewLayoutKey, PreviewMediaDimensions} from '../types'\n\nexport const MediaWrapper = styled.span<{\n  $dimensions: PreviewMediaDimensions\n  $layout: PreviewLayoutKey\n  $radius: number\n  $responsive: boolean\n}>((props) => {\n  const {$dimensions, $layout, $radius, $responsive} = props\n  const width = $dimensions.width || 0\n  const height = $dimensions.width || 0\n  const iconSize = PREVIEW_ICON_SIZE[$layout]\n\n  return css`\n    position: relative;\n    width: ${$responsive ? '100%' : rem(width)};\n    height: ${$responsive ? '100%' : rem(height)};\n    min-width: ${$responsive ? undefined : rem(width)};\n    border-radius: ${({theme}) => rem(theme.sanity.radius[$radius])};\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    & img {\n      position: absolute;\n      left: 0;\n      top: 0;\n      width: 100%;\n      height: 100%;\n      object-fit: contain;\n      border-radius: inherit;\n    }\n\n    & svg {\n      display: block;\n      font-size: calc(21 / 16 * 1em);\n    }\n\n    & [data-sanity-icon] {\n      display: block;\n      font-size: calc(${iconSize} / 16 * 1em);\n    }\n\n    /*\n      NOTE on why we canâ€™t use the \":after\" pseudo-element:\n      The thing is we only want the shadow when then <MediaWrapper> contains\n      something else than <svg> â€“ icons should not have the shadow.\n      This is why we use the \"*:not(svg) + span\" selector to target only that\n      situation to render the shadow.\n    */\n    & *:not(svg) + span {\n      display: block;\n      position: absolute;\n      left: 0;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      box-shadow: inset 0 0 0 1px var(--card-fg-color);\n      opacity: 0.2;\n      border-radius: inherit;\n    }\n  `\n})\n\nMediaWrapper.displayName = 'MediaWrapper'\n","import {Text} from '@sanity/ui'\nimport React, {createElement, isValidElement} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {PreviewMediaDimensions, PreviewLayoutKey, PreviewProps} from '../types'\nimport {MediaWrapper} from './Media.styled'\n\nexport interface MediaProps {\n  border?: boolean\n  dimensions: PreviewMediaDimensions\n  layout: PreviewLayoutKey\n  media: PreviewProps['media']\n  radius?: number\n  responsive?: boolean\n  styles?: {\n    media?: string\n    mediaString?: string\n  }\n}\n\nexport function Media(props: MediaProps) {\n  const {border = true, dimensions, layout, media, radius = 1, responsive = false, styles} = props\n\n  return (\n    <MediaWrapper\n      $dimensions={dimensions}\n      $layout={layout}\n      $radius={radius}\n      $responsive={responsive}\n      className={styles?.media}\n      data-testid=\"Media\"\n    >\n      {renderMedia({dimensions, layout, media})}\n      {border && <span />}\n    </MediaWrapper>\n  )\n}\n\nfunction renderMedia(props: {\n  dimensions: PreviewMediaDimensions\n  layout: PreviewLayoutKey\n  media: PreviewProps['media']\n  styles?: {\n    media?: string\n    mediaString?: string\n  }\n}) {\n  const {dimensions, layout, media, styles} = props\n\n  if (isValidElementType(media)) {\n    return createElement(media, {dimensions, layout})\n  }\n\n  if (typeof media === 'string') {\n    return (\n      <Text as=\"span\" className={styles?.mediaString}>\n        {media}\n      </Text>\n    )\n  }\n\n  if (isValidElement(media)) {\n    return media\n  }\n\n  return null\n}\n","import React, {createElement} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {PreviewLayoutKey, PreviewMediaDimensions} from './types'\n\nexport function renderPreviewMedia<Layout = PreviewLayoutKey>(\n  value:\n    | React.ReactNode\n    | React.ComponentType<{layout: Layout; dimensions: PreviewMediaDimensions}>,\n  layout: Layout,\n  dimensions: PreviewMediaDimensions\n) {\n  if (isValidElementType(value)) {\n    return createElement(value, {layout, dimensions})\n  }\n\n  if (typeof value === 'string') {\n    return <div>{value}</div>\n  }\n\n  return value\n}\n\nexport function renderPreviewNode<Layout = PreviewLayoutKey>(\n  value: React.ReactNode | React.ComponentType<{layout: Layout}>,\n  layout: Layout,\n  fallbackNode?: React.ReactNode\n) {\n  if (typeof value === 'string') {\n    return value\n  }\n\n  if (isValidElementType(value)) {\n    return createElement(value, {layout})\n  }\n\n  return value || fallbackNode\n}\n","import React from 'react'\nimport {Box, Flex, Stack, Text, Skeleton, TextSkeleton, rem} from '@sanity/ui'\nimport classNames from 'classnames'\nimport styled from 'styled-components'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {renderPreviewNode} from '../helpers'\n\nexport interface DefaultPreviewProps extends Omit<PreviewProps<'default'>, 'schemaType'> {\n  styles?: {\n    root?: string\n    placeholder?: string\n    media?: string\n    heading?: string\n    title?: string\n    subtitle?: string\n    hasSubtitle?: string\n    mediaString?: string\n    status?: string\n    children?: string\n  }\n}\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.default,\n  aspect: 1,\n  fit: 'crop',\n  dpr: getDevicePixelRatio(),\n}\n\nconst Root = styled(Flex)`\n  height: ${rem(PREVIEW_MEDIA_SIZE.default.height)};\n`\n\nconst TitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1})`\n  max-width: ${rem(160)};\n  width: 80%;\n`\n\nconst SubtitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1, size: 1})`\n  max-width: ${rem(120)};\n  width: 60%;\n`\n\nexport function DefaultPreview(props: DefaultPreviewProps) {\n  const {title, subtitle, media, status, isPlaceholder, children, styles} = props\n  const rootClassName = classNames(styles?.root, Boolean(subtitle) && styles?.hasSubtitle)\n\n  const statusNode = status && (\n    <Box\n      className={styles?.status}\n      data-testid=\"default-preview__status\"\n      paddingLeft={3}\n      paddingRight={1}\n    >\n      {renderPreviewNode(status, 'default')}\n    </Box>\n  )\n\n  if (isPlaceholder) {\n    return (\n      <Root align=\"center\" className={styles?.placeholder} data-testid=\"default-preview\">\n        {media !== false && (\n          <Skeleton animated marginRight={2} radius={2} style={PREVIEW_MEDIA_SIZE.default} />\n        )}\n\n        <Stack\n          data-testid=\"default-preview__heading\"\n          flex={1}\n          paddingLeft={media === false ? 1 : 2}\n          paddingRight={status ? 0 : 1}\n          space={2}\n        >\n          <TitleSkeleton />\n          <SubtitleSkeleton />\n        </Stack>\n\n        {statusNode}\n      </Root>\n    )\n  }\n\n  return (\n    <Root align=\"center\" className={rootClassName} data-testid=\"default-preview\">\n      {media !== false && media !== undefined && (\n        <Media\n          dimensions={DEFAULT_MEDIA_DIMENSIONS}\n          layout=\"default\"\n          media={media}\n          styles={styles}\n        />\n      )}\n\n      <Stack\n        className={styles?.heading}\n        data-testid=\"default-preview__header\"\n        flex={1}\n        paddingLeft={media ? 2 : 1}\n        paddingRight={status ? 0 : 1}\n        space={2}\n      >\n        <Text className={styles?.title} style={{color: 'inherit'}} textOverflow=\"ellipsis\">\n          {title && renderPreviewNode(title, 'default')}\n          {!title && <span style={{color: 'var(--card-muted-fg-color)'}}>Untitled</span>}\n        </Text>\n\n        {subtitle && (\n          <Text muted size={1} textOverflow=\"ellipsis\" className={styles?.subtitle}>\n            {renderPreviewNode(subtitle, 'default')}\n          </Text>\n        )}\n\n        {children && <div className={styles?.children}>{children}</div>}\n      </Stack>\n\n      {statusNode}\n    </Root>\n  )\n}\n","import {Box, Flex, rem, Skeleton, Text, TextSkeleton} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\n\nexport const RootFlex = styled(Flex).attrs({align: 'center'})`\n  height: ${rem(PREVIEW_MEDIA_SIZE.detail.height)};\n`\n\nexport const StatusBox = styled(Box)`\n  white-space: nowrap;\n`\n\nexport const MediaSkeleton = styled(Skeleton).attrs({animated: true, radius: 2})`\n  width: ${rem(PREVIEW_MEDIA_SIZE.detail.width)};\n  height: ${rem(PREVIEW_MEDIA_SIZE.detail.height)};\n`\n\nexport const TitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1})`\n  max-width: ${rem(160)}; /* 80% of 200px */\n  width: 80%;\n`\n\nexport const SubtitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1, size: 1})`\n  max-width: ${rem(120)}; /* 60% of 200px */\n  width: 60%;\n`\n\nexport const DescriptionSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1, size: 1})`\n  max-width: ${rem(180)}; /* 90% of 200px */\n  width: 90%;\n`\n\nexport const DescriptionText = styled(Text)(({theme}) => {\n  const {fonts} = theme.sanity\n  const textSize1 = fonts.text.sizes[1]\n  const maxLines = 2\n  const maxHeight = textSize1.lineHeight * maxLines\n\n  return css`\n    & > span {\n      max-height: ${rem(maxHeight)};\n\n      /* Multi-line text overflow */\n      display: -webkit-box;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      -webkit-line-clamp: ${maxLines};\n      -webkit-box-orient: vertical;\n    }\n  `\n})\n","import React from 'react'\nimport {Box, Flex, Stack, Text} from '@sanity/ui'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {renderPreviewNode} from '../helpers'\nimport {\n  DescriptionSkeleton,\n  DescriptionText,\n  MediaSkeleton,\n  RootFlex,\n  StatusBox,\n  SubtitleSkeleton,\n  TitleSkeleton,\n} from './DetailPreview.styled'\n\nexport type DetailPreviewProps = PreviewProps<'detail'>\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.detail,\n  fit: 'crop',\n  aspect: 1,\n  dpr: getDevicePixelRatio(),\n}\n\nexport function DetailPreview(props: DetailPreviewProps) {\n  const {\n    title,\n    subtitle,\n    description,\n    mediaDimensions = DEFAULT_MEDIA_DIMENSIONS,\n    media,\n    status,\n    children,\n    isPlaceholder,\n  } = props\n\n  const statusNode = status && (\n    <StatusBox marginLeft={3} paddingRight={1}>\n      {renderPreviewNode(status, 'detail')}\n    </StatusBox>\n  )\n\n  if (isPlaceholder) {\n    return (\n      <RootFlex data-testid=\"detail-preview\">\n        {media !== false && <MediaSkeleton data-testid=\"detail-preview__media\" />}\n\n        <Box flex={1} paddingLeft={media === false ? 1 : 2}>\n          <Flex align=\"center\" data-testid=\"detail-preview__header\">\n            <Stack flex={1} space={2}>\n              <TitleSkeleton />\n              <SubtitleSkeleton />\n            </Stack>\n\n            {statusNode}\n          </Flex>\n\n          {description && (\n            <Box marginTop={3}>\n              <DescriptionSkeleton />\n            </Box>\n          )}\n        </Box>\n      </RootFlex>\n    )\n  }\n\n  return (\n    <RootFlex data-testid=\"detail-preview\">\n      {media !== false && <Media dimensions={mediaDimensions} layout=\"detail\" media={media} />}\n\n      <Box flex={1} paddingLeft={media === false ? 1 : 2}>\n        <Flex align=\"center\" data-testid=\"detail-preview__header\">\n          <Stack flex={1} space={2}>\n            <Text textOverflow=\"ellipsis\" style={{color: 'inherit'}}>\n              {title && renderPreviewNode(title, 'detail')}\n              {!title && <>Untitled</>}\n            </Text>\n\n            {subtitle && (\n              <Text muted size={1} textOverflow=\"ellipsis\">\n                {renderPreviewNode(subtitle, 'detail')}\n              </Text>\n            )}\n          </Stack>\n\n          {statusNode}\n        </Flex>\n\n        {description && (\n          <Box marginTop={3}>\n            <DescriptionText muted size={1}>\n              {renderPreviewNode(description, 'detail')}\n            </DescriptionText>\n          </Box>\n        )}\n      </Box>\n\n      {children}\n    </RootFlex>\n  )\n}\n","import {hues} from '@sanity/color'\nimport {Theme} from '@sanity/ui'\nimport React from 'react'\nimport styled, {css} from 'styled-components'\n\nconst SIZE = 43\nconst STROKE_WIDTH = 3\n\nconst Root = styled.svg`\n  width: ${SIZE}px;\n  height: ${SIZE}px;\n  transform: rotate(-90deg);\n`\n\nconst BgCircle = styled.circle(({theme}: {theme: Theme}) => {\n  const {color} = theme.sanity\n\n  return css`\n    fill: none;\n    stroke: ${hues.gray[color.dark ? 900 : 100].hex};\n    stroke-width: ${STROKE_WIDTH}px;\n  `\n})\n\nconst ProgressCircle = styled.circle(({theme}: {theme: Theme}) => {\n  const {color} = theme.sanity\n\n  return css`\n    fill: none;\n    stroke: ${hues.blue[color.dark ? 400 : 500].hex};\n    stroke-width: ${STROKE_WIDTH}px;\n    transition: stroke-dashoffset 75ms;\n  `\n})\n\nexport function CircularProgress(props: {\n  /** Percentage */\n  value: number\n}) {\n  const {value: valueProp} = props\n  const value = Math.min(Math.max(valueProp, 0), 100)\n  const radius = SIZE / 2 - STROKE_WIDTH / 2\n  const circ = 2 * Math.PI * radius\n  const offset = ((100 - value) / 100) * circ\n  const viewBox = `${SIZE / 2} ${SIZE / 2} ${SIZE} ${SIZE}`\n\n  return (\n    <Root viewBox={viewBox}>\n      <BgCircle cx={SIZE} cy={SIZE} r={radius} />\n      <ProgressCircle\n        cx={SIZE}\n        cy={SIZE}\n        r={radius}\n        style={{\n          strokeDasharray: circ,\n          strokeDashoffset: `${offset}px`,\n        }}\n      />\n    </Root>\n  )\n}\n","import {hues} from '@sanity/color'\nimport {Theme, Card} from '@sanity/ui'\nimport React from 'react'\nimport styled, {css} from 'styled-components'\n\nconst STROKE_WIDTH = 0.5\n\nconst Root = styled(Card)`\n  overflow: hidden;\n`\n\nconst Bar = styled(Card)(({theme}: {theme: Theme}) => {\n  const {color} = theme.sanity\n\n  return css`\n    height: ${STROKE_WIDTH}rem;\n    background: ${hues.blue[color.dark ? 400 : 500].hex};\n    transition: transform 75ms;\n  `\n})\n\nexport function LinearProgress(props: {\n  /** Percentage */\n  value: number\n}) {\n  const {value} = props\n\n  return (\n    <Root radius={5}>\n      <Bar radius={5} style={{transform: `translate3d(${value - 100}%, 0, 0)`}} />\n    </Root>\n  )\n}\n","import {Box, Flex, rem, Skeleton, Stack} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const RootBox = styled(Box)`\n  position: relative;\n`\n\nexport const MediaFlex = styled(Flex).attrs({align: 'center', justify: 'center'})`\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n`\n\nexport const MediaSkeleton = styled(Skeleton).attrs({animated: true, radius: 2})`\n  width: 100%;\n  height: 100%;\n`\n\nexport const ProgressFlex = styled(Flex).attrs({align: 'center', justify: 'center'})`\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n\n  &:before {\n    background-color: var(--card-bg-color);\n    opacity: 0.75;\n    content: '';\n    display: block;\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n  }\n\n  > svg {\n    position: relative;\n    z-index: 2;\n  }\n`\n\nexport const TooltipContentStack = styled(Stack).attrs({padding: 2, space: 2})`\n  max-width: ${rem(200)};\n`\n","import React, {useMemo} from 'react'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {Text, Tooltip} from '@sanity/ui'\nimport {CircularProgress} from '../../progress'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {renderPreviewNode} from '../helpers'\nimport {\n  MediaSkeleton,\n  MediaFlex,\n  ProgressFlex,\n  RootBox,\n  TooltipContentStack,\n} from './MediaPreview.styled'\n\nexport type MediaPreviewProps = PreviewProps<'media'>\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.media,\n  aspect: 1,\n  fit: 'crop',\n  dpr: getDevicePixelRatio(),\n}\n\nexport function MediaPreview(props: MediaPreviewProps) {\n  const {\n    media,\n    mediaDimensions = DEFAULT_MEDIA_DIMENSIONS,\n    children,\n    isPlaceholder,\n    progress = -1,\n    subtitle,\n    title,\n    withBorder = true,\n    withRadius = true,\n  } = props\n\n  const aspect = mediaDimensions.aspect || 1\n\n  const STYLES_PADDER = useMemo(() => ({paddingBottom: `${100 / aspect}%`}), [aspect])\n\n  const tooltipContent = useMemo(() => {\n    if (!title || !subtitle) {\n      return null\n    }\n\n    return (\n      <TooltipContentStack>\n        {title && (\n          <Text align=\"center\" size={1} weight=\"semibold\">\n            {renderPreviewNode(title, 'media')}\n          </Text>\n        )}\n\n        {subtitle && (\n          <Text align=\"center\" muted size={1}>\n            {renderPreviewNode(subtitle, 'media')}\n          </Text>\n        )}\n      </TooltipContentStack>\n    )\n  }, [subtitle, title])\n\n  return (\n    <RootBox data-testid=\"media-preview\" overflow=\"hidden\" flex={1}>\n      <div style={STYLES_PADDER} />\n\n      <Tooltip content={tooltipContent} disabled={!tooltipContent} placement=\"top\" portal>\n        <MediaFlex>\n          {isPlaceholder ? (\n            <MediaSkeleton />\n          ) : (\n            <Media\n              border={withBorder}\n              dimensions={mediaDimensions}\n              layout=\"media\"\n              media={media}\n              radius={withRadius ? 1 : 0}\n              responsive\n            />\n          )}\n\n          {typeof progress === 'number' && progress > -1 && (\n            <ProgressFlex>\n              <CircularProgress value={progress} />\n            </ProgressFlex>\n          )}\n        </MediaFlex>\n      </Tooltip>\n\n      {children}\n    </RootBox>\n  )\n}\n","import {Box, Card, Flex, rem} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\n\nexport const HeaderFlex = styled(Flex).attrs({align: 'center'})`\n  box-shadow: 0 0 0 1px var(--card-border-color);\n  height: ${rem(PREVIEW_MEDIA_SIZE.block.height)};\n  white-space: nowrap;\n  position: relative;\n  z-index: 1;\n`\n\nexport const MediaCard = styled(Card)<{$ratio: number}>`\n  position: relative;\n  padding-bottom: ${({$ratio}) => $ratio}%;\n\n  & > span {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n  }\n`\n\nexport const RootBox = styled(Box).attrs({overflow: 'hidden'})`\n  border-radius: ${({theme}) => theme.sanity.radius[1]}px;\n`\n","import {Box, Flex, Stack, Text} from '@sanity/ui'\nimport React from 'react'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {renderPreviewNode} from '../helpers'\nimport {HeaderFlex, MediaCard, RootBox} from './BlockImagePreview.styled'\n\nexport type BlockImagePreviewProps = PreviewProps<'blockImage'>\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.blockImage,\n  fit: 'fillmax',\n  dpr: getDevicePixelRatio(),\n}\n\nconst getRatio = (dimensions: PreviewMediaDimensions) => {\n  const {height, width} = dimensions\n\n  if (!height || !width) {\n    return 1\n  }\n\n  return (height / width) * 100\n}\n\nexport function BlockImagePreview(props: BlockImagePreviewProps) {\n  const {\n    actions,\n    title,\n    subtitle,\n    description,\n    fallbackTitle = 'Untitled',\n    mediaDimensions = DEFAULT_MEDIA_DIMENSIONS,\n    media,\n    children,\n    status,\n  } = props\n\n  return (\n    <RootBox>\n      <Stack>\n        <HeaderFlex paddingLeft={2} paddingRight={1} paddingY={1}>\n          <Stack flex={1} space={2}>\n            <Text size={1} textOverflow=\"ellipsis\" weight=\"semibold\">\n              {title || fallbackTitle}\n            </Text>\n\n            {subtitle && (\n              <Text muted size={1} textOverflow=\"ellipsis\">\n                {renderPreviewNode(subtitle, 'block')}\n              </Text>\n            )}\n          </Stack>\n\n          <Flex gap={1} paddingLeft={1}>\n            {status && (\n              <Box paddingX={2} paddingY={3}>\n                {renderPreviewNode(status, 'block')}\n              </Box>\n            )}\n\n            {actions}\n          </Flex>\n        </HeaderFlex>\n\n        <MediaCard\n          $ratio={getRatio(mediaDimensions)}\n          __unstable_checkered\n          display=\"flex\"\n          sizing=\"border\"\n          tone=\"inherit\"\n        >\n          <Media\n            border={false}\n            dimensions={mediaDimensions}\n            layout=\"blockImage\"\n            media={media}\n            radius={0}\n            responsive\n          />\n        </MediaCard>\n      </Stack>\n\n      {description && (\n        <Box paddingX={2} paddingY={3}>\n          <Text muted size={1}>\n            {renderPreviewNode(description, 'block')}\n          </Text>\n        </Box>\n      )}\n\n      {children && <div>{children}</div>}\n    </RootBox>\n  )\n}\n","import {Box, Flex, rem, Stack, Text} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {renderPreviewNode} from '../helpers'\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.block,\n  aspect: 1,\n  fit: 'crop',\n  dpr: getDevicePixelRatio(),\n}\n\nconst HeaderFlex = styled(Flex).attrs({align: 'center'})`\n  min-height: ${rem(PREVIEW_MEDIA_SIZE.block.height)};\n`\n\nexport function BlockPreview(props: PreviewProps<'block'>) {\n  const {\n    actions,\n    title,\n    subtitle,\n    description,\n    mediaDimensions = DEFAULT_MEDIA_DIMENSIONS,\n    media,\n    status,\n    children,\n  } = props\n\n  return (\n    <Stack data-testid=\"block-preview\" space={1}>\n      <HeaderFlex data-testid=\"block-preview__header\">\n        {media && <Media dimensions={mediaDimensions} layout=\"block\" media={media} />}\n\n        <Box flex={1} paddingLeft={media ? 2 : 1}>\n          <Text size={1} textOverflow=\"ellipsis\" weight=\"semibold\">\n            {title && renderPreviewNode(title, 'block')}\n            {!title && <>Untitled</>}\n          </Text>\n\n          {subtitle && (\n            <Box marginTop={2}>\n              <Text muted size={1} textOverflow=\"ellipsis\">\n                {renderPreviewNode(subtitle, 'block')}\n              </Text>\n            </Box>\n          )}\n\n          {description && (\n            <Box marginTop={3}>\n              <Text muted size={1} textOverflow=\"ellipsis\">\n                {renderPreviewNode(description, 'block')}\n              </Text>\n            </Box>\n          )}\n        </Box>\n\n        <Flex gap={1} paddingLeft={1}>\n          {status && (\n            <Box paddingX={2} paddingY={3}>\n              {renderPreviewNode(status, 'block')}\n            </Box>\n          )}\n\n          {actions}\n        </Flex>\n      </HeaderFlex>\n\n      {children && <div data-testid=\"block-preview__children\">{children}</div>}\n    </Stack>\n  )\n}\n","import {rem, Text, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const RootSpan = styled.span`\n  display: inline-flex;\n  align-items: center;\n  vertical-align: top;\n  height: calc(1em - 1px);\n  max-width: 100%;\n`\n\nexport const MediaSpan = styled.span`\n  position: relative;\n  display: inline-block;\n  width: calc(1em - 1px);\n  height: calc(1em - 1px);\n  min-width: calc(1em - 1px);\n\n  & img {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    border-radius: ${({theme}) => rem(theme.sanity.radius[1])};\n  }\n\n  & img + span {\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    box-shadow: inset 0 0 0 1px var(--card-fg-color);\n    opacity: 0.2;\n    border-radius: ${({theme}) => rem(theme.sanity.radius[1])};\n  }\n\n  & svg {\n    display: block;\n    font-size: calc(14 / 16 * 1em);\n    margin: 1px 0;\n\n    &[data-sanity-icon] {\n      font-size: calc(18 / 16 * 1em);\n      margin: calc(1px + (2 / 18 * -1em)) 0;\n    }\n  }\n`\n\nexport const TextSpan = styled(Text).attrs({forwardedAs: 'span'})(({theme}: {theme: Theme}) => {\n  const textFont = theme.sanity.fonts.text\n  const textSize = textFont.sizes[1]\n\n  return css`\n    font-size: calc(${textSize.fontSize} / 16 * 1em);\n    font-weight: ${textFont.weights.medium};\n    box-sizing: border-box;\n    display: inline-block;\n    vertical-align: top;\n    line-height: ${textSize.lineHeight / textSize.fontSize};\n    padding-left: 0.5em;\n    padding-right: calc(0.5em - 2px);\n    min-width: 0;\n\n    & > span {\n      display: block;\n      white-space: nowrap;\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n  `\n})\n","import React from 'react'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\nimport {renderPreviewMedia, renderPreviewNode} from '../helpers'\nimport {PreviewMediaDimensions, PreviewProps} from '../types'\nimport {RootSpan, MediaSpan, TextSpan} from './InlinePreview.styled'\n\nexport type InlinePreviewProps = PreviewProps<'inline'>\n\nconst DEFAULT_MEDIA_DIMENSIONS: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.inline,\n  fit: 'crop',\n  aspect: 1,\n  dpr: getDevicePixelRatio(),\n}\n\nexport function InlinePreview(props: InlinePreviewProps) {\n  const {\n    title,\n    fallbackTitle = 'Untitled',\n    media,\n    mediaDimensions = DEFAULT_MEDIA_DIMENSIONS,\n  } = props\n\n  return (\n    <RootSpan data-testid=\"inline-preview\">\n      {media && (\n        <MediaSpan data-testid=\"inline-preview-media\">\n          {renderPreviewMedia(media, 'inline', mediaDimensions)}\n          <span />\n        </MediaSpan>\n      )}\n\n      <TextSpan data-testid=\"inline-preview-title\" size={1}>\n        {renderPreviewNode(title, 'inline', fallbackTitle)}\n      </TextSpan>\n    </RootSpan>\n  )\n}\n","import React from 'react'\nimport {Box, Flex, rem, Stack, Text, TextSkeleton} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {getDevicePixelRatio} from 'use-device-pixel-ratio'\nimport {PreviewMediaDimensions} from '../types'\nimport {Media} from '../_common/Media'\nimport {PREVIEW_MEDIA_SIZE} from '../constants'\n\nexport interface TemplatePreviewProps {\n  description?: React.ReactNode | React.FunctionComponent<unknown>\n  isPlaceholder?: boolean\n  media?: React.ReactNode | React.FunctionComponent<unknown>\n  mediaDimensions?: PreviewMediaDimensions\n  subtitle?: React.ReactNode | React.FunctionComponent<{layout: 'default'}>\n  title?: React.ReactNode | React.FunctionComponent<unknown>\n}\n\nconst DEFAULT_MEDIA_DIMENSION: PreviewMediaDimensions = {\n  ...PREVIEW_MEDIA_SIZE.default,\n  aspect: 1,\n  fit: 'crop',\n  dpr: getDevicePixelRatio(),\n}\n\nconst Root = styled(Box)`\n  height: 100%;\n\n  a {\n    color: currentColor;\n    text-decoration: none;\n  }\n\n  svg[data-sanity-icon] {\n    margin: 0;\n  }\n`\n\nconst HeaderFlex = styled(Flex).attrs({align: 'center'})`\n  height: ${rem(PREVIEW_MEDIA_SIZE.default.height)};\n`\n\nconst TitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1})`\n  max-width: ${rem(160)};\n  width: 80%;\n`\n\nconst SubtitleSkeleton = styled(TextSkeleton).attrs({animated: true, radius: 1, size: 1})`\n  max-width: ${rem(120)};\n  width: 60%;\n`\n\nexport function TemplatePreview(props: TemplatePreviewProps) {\n  const {\n    description,\n    isPlaceholder,\n    media,\n    mediaDimensions = DEFAULT_MEDIA_DIMENSION,\n    subtitle,\n    title = 'Untitled',\n  } = props\n\n  if (isPlaceholder) {\n    return (\n      <Root>\n        <HeaderFlex>\n          <Stack flex={1} space={2}>\n            <TitleSkeleton />\n            <SubtitleSkeleton />\n          </Stack>\n        </HeaderFlex>\n      </Root>\n    )\n  }\n\n  return (\n    <Root>\n      <HeaderFlex>\n        <Stack flex={1} space={2}>\n          <Text textOverflow=\"ellipsis\">\n            {typeof title !== 'function' && title}\n            {typeof title === 'function' && title({layout: 'default'})}\n          </Text>\n\n          {subtitle && (\n            <Text muted size={1} textOverflow=\"ellipsis\">\n              {(typeof subtitle === 'function' && subtitle({layout: 'default'})) || subtitle}\n            </Text>\n          )}\n        </Stack>\n\n        {media && (\n          <Flex align=\"flex-start\" paddingLeft={2}>\n            <Media dimensions={mediaDimensions} layout=\"default\" media={media} />\n          </Flex>\n        )}\n      </HeaderFlex>\n\n      {description && (\n        <Box marginTop={3}>\n          <Text muted size={1} style={{whiteSpace: 'break-spaces'}}>\n            {description}\n          </Text>\n        </Box>\n      )}\n    </Root>\n  )\n}\n","import {AccessDeniedIcon} from '@sanity/icons'\nimport {CurrentUser} from '@sanity/types'\nimport {Text, Inline, Box} from '@sanity/ui'\nimport React from 'react'\n\nexport interface InsufficientPermissionsMessageProps {\n  title?: string\n  operationLabel?: string\n  currentUser?: CurrentUser | null\n}\n\nexport function InsufficientPermissionsMessage(props: InsufficientPermissionsMessageProps) {\n  const {\n    currentUser,\n    title = 'Insufficient permissions',\n    operationLabel = 'access this feature',\n  } = props\n\n  const roles = currentUser?.roles || []\n  const plural = roles.length !== 1\n\n  return (\n    <Box padding={2}>\n      <Inline space={2}>\n        <Text size={1}>\n          <AccessDeniedIcon />\n        </Text>\n        <Text weight=\"semibold\">{title}</Text>\n      </Inline>\n      <Inline marginTop={4}>\n        <Text size={1}>\n          {roles.length === 0 ? (\n            <>You have no role that grants you permission to {operationLabel}</>\n          ) : (\n            <>\n              Your role{plural && 's'}{' '}\n              {join(\n                roles.map((r) => <code key={r.name}>{r.title}</code>),\n                <>, </>\n              )}{' '}\n              do{plural || 'es'} not have permissions to {operationLabel}\n            </>\n          )}\n        </Text>\n      </Inline>\n    </Box>\n  )\n}\n\nfunction join(array: React.ReactElement[], sep: React.ReactElement) {\n  return array.reduce<React.ReactElement[] | null>(\n    (result, item) => (result === null ? [item] : [...result, sep, item]),\n    null\n  )\n}\n","import React, {useCallback, useMemo, useState} from 'react'\nimport {Dialog, Grid, Button, Flex, Box, Tooltip, Spinner, Text} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {ComposeIcon} from '@sanity/icons'\nimport {DefaultPreview} from '../../../components/previews'\nimport {InsufficientPermissionsMessage} from '../../../components/InsufficientPermissionsMessage'\nimport {TemplatePermissionsResult, useTemplatePermissions} from '../../../datastores'\nimport {IntentLink} from '../../../router'\nimport {useSource} from '../../source'\nimport {useColorScheme} from '../../colorScheme'\n\nconst DocumentButton = styled(Button)`\n  text-decoration: none;\n`\n\nconst TooltipContentBox = styled(Box)`\n  max-width: 300px;\n`\n\nconst DisabledButtonWrapper = styled.div`\n  & > * {\n    width: 100%;\n  }\n`\n\nexport function NewDocumentButton() {\n  const [newDocumentButtonEl, setNewDocumentButtonEl] = useState<HTMLButtonElement | null>(null)\n  const [open, setOpen] = useState<boolean>(false)\n\n  const {scheme} = useColorScheme()\n\n  const {\n    __internal: {staticInitialValueTemplateItems},\n    currentUser,\n  } = useSource()\n\n  const [permissions, loading] = useTemplatePermissions({\n    templateItems: staticInitialValueTemplateItems,\n  })\n\n  const keyedPermissions = useMemo(() => {\n    if (!permissions) return {}\n    return permissions.reduce<Record<string, TemplatePermissionsResult>>((acc, next) => {\n      acc[next.id] = next\n      return acc\n    }, {})\n  }, [permissions])\n\n  const hasNewDocumentOptions = staticInitialValueTemplateItems.length > 0\n\n  const canCreateDocument = staticInitialValueTemplateItems.some(\n    (t) => keyedPermissions[t.id]?.granted\n  )\n\n  const tooltipContent = useMemo(() => {\n    if (!hasNewDocumentOptions) {\n      return <Text size={1}>No document types</Text>\n    }\n\n    if (canCreateDocument) {\n      return <Text size={1}>New document...</Text>\n    }\n\n    return (\n      <InsufficientPermissionsMessage\n        currentUser={currentUser}\n        operationLabel=\"create any document\"\n      />\n    )\n  }, [canCreateDocument, currentUser, hasNewDocumentOptions])\n\n  const handleOpen = useCallback(() => {\n    setOpen(true)\n  }, [])\n\n  const handleClose = useCallback(() => {\n    setOpen(false)\n    newDocumentButtonEl?.focus()\n  }, [newDocumentButtonEl])\n\n  const handleLinkClick = useCallback(() => {\n    setOpen(false)\n  }, [])\n\n  return (\n    <>\n      <Tooltip\n        content={<TooltipContentBox padding={2}>{tooltipContent}</TooltipContentBox>}\n        disabled={loading}\n        placement=\"bottom\"\n        portal\n        scheme={scheme}\n      >\n        <Box>\n          <Button\n            aria-label=\"New documentâ€¦\"\n            disabled={!canCreateDocument || !hasNewDocumentOptions || loading}\n            icon={ComposeIcon}\n            mode=\"bleed\"\n            onClick={handleOpen}\n            ref={setNewDocumentButtonEl}\n            style={{\n              cursor: !canCreateDocument || !hasNewDocumentOptions ? 'not-allowed' : undefined,\n            }}\n          />\n        </Box>\n      </Tooltip>\n\n      {open && (\n        <Dialog\n          header=\"New document\"\n          id=\"new-document-dialog\"\n          onClickOutside={handleClose}\n          onClose={handleClose}\n          scheme={scheme}\n          width={2}\n        >\n          {loading && (\n            <Flex padding={4} align=\"center\" justify=\"center\">\n              <Spinner muted aria-label=\"Loadingâ€¦\" />\n            </Flex>\n          )}\n\n          {!loading && (\n            <Grid padding={4} columns={[1, 1, 2, 3]} gap={3}>\n              {staticInitialValueTemplateItems.map((template) => {\n                if (keyedPermissions[template.id]?.granted) {\n                  return (\n                    <DocumentButton\n                      forwardedAs={IntentLink}\n                      intent=\"create\"\n                      key={template.id}\n                      mode=\"ghost\"\n                      onClick={handleLinkClick}\n                      padding={2}\n                      params={{template: template.templateId, type: template.schemaType}}\n                    >\n                      <DefaultPreview\n                        media={template.icon}\n                        subtitle={template.subtitle}\n                        title={template.title}\n                      />\n                    </DocumentButton>\n                  )\n                }\n\n                return (\n                  <Tooltip\n                    key={template.id}\n                    content={\n                      <TooltipContentBox padding={2}>\n                        <InsufficientPermissionsMessage\n                          currentUser={currentUser}\n                          operationLabel=\"create this document\"\n                        />\n                      </TooltipContentBox>\n                    }\n                  >\n                    {/* this wrapper is required for the tooltip to show up */}\n                    <DisabledButtonWrapper>\n                      <DocumentButton key={template.id} mode=\"ghost\" padding={2} disabled>\n                        <DefaultPreview\n                          media={template.icon}\n                          subtitle={template.subtitle}\n                          title={template.title}\n                        />\n                      </DocumentButton>\n                    </DisabledButtonWrapper>\n                  </Tooltip>\n                )\n              })}\n            </Grid>\n          )}\n        </Dialog>\n      )}\n    </>\n  )\n}\n","import {Button, ButtonTone, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nconst dot = css`\n  &:after {\n    content: '';\n    width: 6px;\n    height: 6px;\n    background-color: var(--status-button-dot-bg);\n    position: absolute;\n    top: 0;\n    right: 0;\n    border-radius: 50%;\n    transform: translate(-7px, 7px);\n    border: 1px solid var(--card-bg-color);\n  }\n`\n\nexport const StatusButton = styled(Button)(\n  ({theme, active, statusTone}: {theme: Theme; active: boolean; statusTone: ButtonTone}) => {\n    const {color} = theme.sanity\n\n    const tone = color.selectable && color.selectable[statusTone].selected.bg\n    const showDot = active && tone\n\n    return css`\n      position: relative;\n      --status-button-dot-bg: ${tone};\n\n      ${showDot && dot}\n    `\n  }\n)\n","import React, {forwardRef, memo, useMemo} from 'react'\nimport {orderBy} from 'lodash'\nimport * as PathUtils from '@sanity/util/paths'\nimport {Box, Card, Flex, MenuItem, Text} from '@sanity/ui'\nimport {LinkIcon} from '@sanity/icons'\nimport styled from 'styled-components'\nimport {UserAvatar} from '../../../../components/UserAvatar'\nimport {GlobalPresence} from '../../../../datastores'\nimport {IntentLink} from '../../../../router'\n\nconst AvatarCard = styled(Card)`\n  background: transparent;\n  margin: calc((-35px + 11px) / 2);\n`\n\ninterface PresenceListRowProps {\n  presence: GlobalPresence\n}\n\nexport const PresenceMenuItem = memo(function PresenceMenuItem({presence}: PresenceListRowProps) {\n  const lastActiveLocation = orderBy(presence.locations || [], ['lastActiveAt'], ['desc']).find(\n    (location) => location.documentId\n  )\n  const hasLink = Boolean(lastActiveLocation?.documentId)\n\n  const LinkComponent = useMemo(\n    () =>\n      // eslint-disable-next-line @typescript-eslint/no-shadow\n      forwardRef(function LinkComponent(linkProps, ref: React.ForwardedRef<HTMLAnchorElement>) {\n        if (!lastActiveLocation?.path) return null\n\n        return (\n          <IntentLink\n            {...linkProps}\n            intent=\"edit\"\n            params={{\n              id: lastActiveLocation?.documentId,\n              path: PathUtils.toString(lastActiveLocation?.path),\n            }}\n            ref={ref}\n          />\n        )\n      }),\n    [lastActiveLocation]\n  )\n\n  return (\n    <MenuItem\n      as={lastActiveLocation ? LinkComponent : 'div'}\n      data-as={lastActiveLocation ? 'a' : 'div'}\n      padding={4}\n      paddingRight={3}\n    >\n      <Flex align=\"center\">\n        <AvatarCard>\n          <UserAvatar size={1} key={presence.user.id} user={presence.user} />\n        </AvatarCard>\n\n        <Box flex={1} marginLeft={4}>\n          <Text textOverflow=\"ellipsis\">{presence.user.displayName}</Text>\n        </Box>\n\n        {hasLink && (\n          <Box marginLeft={3}>\n            <Text>\n              <LinkIcon />\n            </Text>\n          </Box>\n        )}\n      </Flex>\n    </MenuItem>\n  )\n})\n","import {CogIcon, UsersIcon} from '@sanity/icons'\nimport {\n  AvatarStack,\n  Box,\n  Button,\n  Card,\n  Menu,\n  MenuButton,\n  MenuDivider,\n  MenuItem,\n  Stack,\n  Text,\n} from '@sanity/ui'\nimport React, {useMemo} from 'react'\nimport styled from 'styled-components'\nimport {UserAvatar} from '../../../../components/UserAvatar'\nimport {useGlobalPresence} from '../../../../datastores'\nimport {useColorScheme} from '../../../colorScheme'\nimport {useWorkspace} from '../../../workspace'\nimport {StatusButton} from '../../StatusButton'\nimport {PresenceMenuItem} from './PresenceMenuItem'\n\nconst MAX_AVATARS = 4\n\nconst AvatarStackCard = styled(Card)`\n  background: transparent;\n`\n\nconst StyledMenu = styled(Menu)`\n  max-width: 350px;\n  min-width: 250px;\n`\n\nconst FooterStack = styled(Stack)`\n  position: sticky;\n  bottom: 0;\n`\n\ninterface PresenceMenuProps {\n  collapse?: boolean\n}\n\nexport function PresenceMenu(props: PresenceMenuProps) {\n  const {collapse} = props\n  const presence = useGlobalPresence()\n  const {projectId} = useWorkspace()\n  const hasPresence = presence.length > 0\n  const {scheme} = useColorScheme()\n\n  const button = useMemo(() => {\n    if (collapse) {\n      return (\n        <StatusButton icon={UsersIcon} mode=\"bleed\" active={hasPresence} statusTone=\"positive\" />\n      )\n    }\n\n    return (\n      <Button mode=\"bleed\" padding={1}>\n        <AvatarStackCard>\n          <AvatarStack maxLength={MAX_AVATARS}>\n            {presence.map((item) => (\n              <UserAvatar key={item.user.id} user={item.user} />\n            ))}\n          </AvatarStack>\n        </AvatarStackCard>\n      </Button>\n    )\n  }, [collapse, hasPresence, presence])\n\n  const popoverProps = useMemo(\n    () => ({\n      constrainSize: true,\n      portal: true,\n      scheme: scheme,\n    }),\n    [scheme]\n  )\n\n  return (\n    <MenuButton\n      id=\"global-presence-menu\"\n      button={button}\n      menu={\n        <StyledMenu padding={1}>\n          {hasPresence && (\n            <Stack space={2}>\n              {presence.map((item) => (\n                <PresenceMenuItem key={item.user.id} presence={item} />\n              ))}\n            </Stack>\n          )}\n\n          {!hasPresence && (\n            <Box paddingX={3} paddingY={4}>\n              <Stack space={3}>\n                <Text weight=\"semibold\" size={2}>\n                  No one else is here\n                </Text>\n\n                <Text size={1} muted>\n                  Invite people to the project to see their online status.\n                </Text>\n              </Stack>\n            </Box>\n          )}\n\n          <FooterStack space={1}>\n            <MenuDivider />\n\n            <MenuItem\n              as=\"a\"\n              href={`https://sanity.io/manage/project/${projectId}`}\n              iconRight={CogIcon}\n              paddingY={4}\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n              text=\"Manage members\"\n            />\n          </FooterStack>\n        </StyledMenu>\n      }\n      popover={popoverProps}\n    />\n  )\n}\n","import {Layer, Card, Flex, Text, Box, Button, Stack, useGlobalKeyDown} from '@sanity/ui'\nimport {CloseIcon, LeaveIcon} from '@sanity/icons'\nimport React, {memo, useEffect, useState} from 'react'\nimport styled from 'styled-components'\nimport {UserAvatar} from '../../../components/UserAvatar'\nimport {useWorkspace} from '../../workspace'\nimport {useRovingFocus} from '../../../components/rovingFocus'\nimport {Tool} from '../../../config'\nimport {ToolMenu as DefaultToolMenu} from './tools/ToolMenu'\nimport {WorkspaceMenuButton} from './workspace'\n\nconst Root = styled(Layer)`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n`\n\nconst Backdrop = styled(Card)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: var(--card-shadow-penumbra-color);\n  transition: 200ms opacity ease-in-out;\n  pointer-events: none;\n  opacity: 0;\n\n  &[data-open='true'] {\n    opacity: 1;\n    pointer-events: all;\n  }\n`\n\nconst InnerCard = styled(Card)`\n  position: relative;\n  pointer-events: all;\n  flex-direction: column;\n  min-width: 200px;\n  max-width: 280px;\n  transition: 200ms transform ease-in-out;\n  transform: translate3d(calc(-100% - 1px), 0, 0);\n\n  &[data-open='true'] {\n    transform: translate3d(0, 0, 0);\n  }\n`\n\ninterface NavDrawerProps {\n  activeToolName?: string\n  isOpen: boolean\n  onClose: () => void\n  tools: Tool[]\n}\n\nexport const NavDrawer = memo(function NavDrawer(props: NavDrawerProps) {\n  const {activeToolName, isOpen, onClose, tools} = props\n  const [closeButtonElement, setCloseButtonElement] = useState<HTMLButtonElement | null>(null)\n  const [innerCardElement, setInnerCardElement] = useState<HTMLDivElement | null>(null)\n  const tabIndex = isOpen ? 0 : -1\n\n  const {currentUser, navbar, auth} = useWorkspace()\n\n  const {ToolMenu = DefaultToolMenu} = navbar?.components || {}\n\n  useRovingFocus({\n    rootElement: innerCardElement,\n    navigation: ['tab'],\n  })\n\n  useGlobalKeyDown((e: KeyboardEvent) => {\n    if (e.key === 'Escape' && isOpen) {\n      onClose()\n    }\n  })\n\n  useEffect(() => {\n    if (isOpen) {\n      closeButtonElement?.focus()\n    }\n  }, [closeButtonElement, isOpen])\n\n  return (\n    <Root>\n      <Backdrop data-open={isOpen} onClick={onClose} />\n\n      <InnerCard\n        display=\"flex\"\n        height=\"fill\"\n        data-open={isOpen}\n        shadow={1}\n        ref={setInnerCardElement}\n      >\n        <Card borderBottom>\n          <Stack space={3} padding={[3, 3, 4]}>\n            <Flex align=\"center\">\n              <Flex flex={1} align=\"center\" paddingRight={2}>\n                <Flex flex={1} align=\"center\">\n                  <Box>\n                    <UserAvatar size={1} user=\"me\" />\n                  </Box>\n\n                  <Box flex={1} marginLeft={2} title={currentUser?.name || currentUser?.email}>\n                    <Text textOverflow=\"ellipsis\">{currentUser?.name || currentUser?.email}</Text>\n                  </Box>\n                </Flex>\n              </Flex>\n\n              <Box>\n                <Button\n                  icon={CloseIcon}\n                  mode=\"bleed\"\n                  onClick={onClose}\n                  ref={setCloseButtonElement}\n                  tabIndex={tabIndex}\n                  title=\"Close menu\"\n                />\n              </Box>\n            </Flex>\n\n            <WorkspaceMenuButton text=\"Select workspace\" justify=\"flex-start\" />\n          </Stack>\n        </Card>\n\n        <Box flex=\"auto\" overflow=\"auto\" padding={[3, 3, 4]}>\n          <ToolMenu\n            activeToolName={activeToolName}\n            closeDrawer={onClose}\n            context=\"drawer\"\n            isDrawerOpen={isOpen}\n            tools={tools}\n          />\n        </Box>\n\n        {auth.logout && (\n          <Card flex=\"none\" padding={[3, 3, 4]} borderTop>\n            <Stack>\n              <Button\n                iconRight={LeaveIcon}\n                justify=\"flex-start\"\n                mode=\"bleed\"\n                // eslint-disable-next-line react/jsx-handler-names\n                onClick={auth.logout}\n                tabIndex={tabIndex}\n                text=\"Sign out\"\n              />\n            </Stack>\n          </Card>\n        )}\n      </InnerCard>\n    </Root>\n  )\n})\n","import {ObjectSchemaType, Schema, SchemaType} from '@sanity/types'\nimport {isNonNullable} from '../../util/isNonNullable'\n\nconst isDocumentType = (type: SchemaType): type is ObjectSchemaType =>\n  Boolean(type.type && type.type.name === 'document')\n\nconst isSanityType = (type: SchemaType): boolean => type.name.startsWith('sanity.')\n\nexport const getSearchableTypes = (\n  schema: Schema\n  // eslint-disable-next-line camelcase\n): {name: string; __experimental_search?: ObjectSchemaType['__experimental_search']}[] =>\n  schema\n    .getTypeNames()\n    .map((typeName) => schema.get(typeName))\n    .filter(isNonNullable)\n    .filter((schemaType) => isDocumentType(schemaType))\n    .filter((type) => !isSanityType(type)) as ObjectSchemaType[]\n","const SPECIAL_CHARS = /([^!@#$%^&*(),\\\\/?\";:{}|[\\]+<>\\s-])+/g\nconst STRIP_EDGE_CHARS = /(^[.]+)|([.]+$)/\n\nexport function tokenize(string: string): string[] {\n  return (string.match(SPECIAL_CHARS) || []).map((token) => token.replace(STRIP_EDGE_CHARS, ''))\n}\n","import {words, uniq, compact, union, intersection, keyBy, toLower} from 'lodash'\nimport {SearchHit, WeightedHit, SearchSpec} from './types'\n\n// takes a set of terms and a value and returns a [score, story] pair where score is a value between 0, 1 and story is the explanation\nexport const calculateScore = (searchTerms: string[], value: string): [number, string] => {\n  const uniqueValueTerms = uniq(compact(words(toLower(value))))\n  const uniqueSearchTerms = uniq(searchTerms.map(toLower))\n  const matches = intersection(uniqueSearchTerms, uniqueValueTerms)\n  const all = union(uniqueValueTerms, uniqueSearchTerms)\n  const fieldScore = matches.length / all.length\n  return fieldScore === 1\n    ? [1, 'Exact match']\n    : [fieldScore / 2, `Matched ${matches.length} of ${all.length} terms: [${matches.join(', ')}]`]\n}\n\nconst stringify = (value: unknown): string =>\n  typeof value === 'string' ? value : JSON.stringify(value)\n\nexport function applyWeights(\n  searchSpec: SearchSpec[],\n  hits: SearchHit[],\n  terms: string[] = []\n): WeightedHit[] {\n  const specByType = keyBy(searchSpec, (spec) => spec.typeName)\n  return hits.map((hit, index) => {\n    const typeSpec = specByType[hit._type]\n    const stories =\n      typeSpec.paths?.map((pathSpec, idx) => {\n        const value = stringify(hit[`w${idx}`])\n        if (!value) {\n          return {path: pathSpec.path, score: 0, why: 'No match'}\n        }\n        const [score, why] = calculateScore(terms, value)\n        return {\n          path: pathSpec.path,\n          score: score * pathSpec.weight,\n          why: `${why} (*${pathSpec.weight})`,\n        }\n      }) || []\n\n    const totalScore = stories.reduce((acc, rank) => acc + rank.score, 0)\n\n    return {hit, resultIndex: hits.length - index, score: totalScore, stories: stories}\n  })\n}\n","/* eslint-disable import/prefer-default-export */\nimport type {SanityClient} from '@sanity/client'\nimport type {ObjectSchemaType} from '@sanity/types'\nimport type {Observable} from 'rxjs'\nimport {compact, toLower, flatten, uniq, flow, sortBy, union} from 'lodash'\nimport {map, tap} from 'rxjs/operators'\nimport {joinPath} from '../../util/searchUtils'\nimport {tokenize} from '../common/tokenize'\nimport {removeDupes} from '../../util/draftUtils'\nimport {applyWeights} from './applyWeights'\nimport {\n  WeightedHit,\n  WeightedSearchOptions,\n  SearchOptions,\n  SearchPath,\n  SearchHit,\n  SearchSpec,\n} from './types'\n\nconst combinePaths = flow([flatten, union, compact])\n\nconst toGroqParams = (terms: string[]): Record<string, string> => {\n  const params: Record<string, string> = {}\n  return terms.reduce((acc, term, i) => {\n    acc[`t${i}`] = `${term}*` // \"t\" is short for term\n    return acc\n  }, params)\n}\n\nconst pathWithMapper = ({mapWith, path}: SearchPath): string =>\n  mapWith ? `${mapWith}(${path})` : path\n\nexport function createWeightedSearch(\n  // eslint-disable-next-line camelcase\n  types: {name: string; __experimental_search?: ObjectSchemaType['__experimental_search']}[],\n  client: SanityClient,\n  options: WeightedSearchOptions = {}\n): (query: string, opts?: SearchOptions) => Observable<WeightedHit[]> {\n  if (!types) {\n    throw new Error('missing types')\n  }\n\n  const {filter, params, tag} = options\n  const searchSpec: SearchSpec[] = types.map((type) => ({\n    typeName: type.name,\n    paths: type.__experimental_search?.map((config) => ({\n      weight: config.weight,\n      path: joinPath(config.path),\n      mapWith: config.mapWith,\n    })),\n  }))\n\n  const combinedSearchPaths = combinePaths(\n    searchSpec.map((configForType) => configForType.paths?.map((opt) => pathWithMapper(opt)))\n  )\n\n  const selections = searchSpec.map((spec) => {\n    const constraint = `_type == \"${spec.typeName}\" => `\n    const selection = `{ ${spec.paths?.map((cfg, i) => `\"w${i}\": ${pathWithMapper(cfg)}`)} }`\n    return `${constraint}${selection}`\n  })\n\n  // this is the actual search function that takes the search string and returns the hits\n  return function search(queryString: string, searchOpts: SearchOptions = {}) {\n    const terms = uniq(compact(tokenize(toLower(queryString))))\n    const constraints = terms\n      .map((term, i) => combinedSearchPaths.map((joinedPath: any) => `${joinedPath} match $t${i}`))\n      .filter((constraint) => constraint.length > 0)\n\n    const filters = [\n      '_type in $__types',\n      searchOpts.includeDrafts === false && `!(_id in path('drafts.**'))`,\n      ...constraints.map((constraint) => `(${constraint.join('||')})`),\n      filter ? `(${filter})` : '',\n    ].filter(Boolean)\n\n    const selection = selections.length > 0 ? `...select(${selections.join(',\\n')})` : ''\n    const query = `*[${filters.join('&&')}][0...$__limit]{_type, _id, ${selection}}`\n\n    return client.observable\n      .fetch(\n        query,\n        {\n          ...toGroqParams(terms),\n          __types: searchSpec.map((spec) => spec.typeName),\n          __limit: searchOpts.limit ?? 1000,\n          ...(params || {}),\n        },\n        {tag}\n      )\n      .pipe(\n        options.unique ? map(removeDupes) : tap(),\n        map((hits: SearchHit[]) => applyWeights(searchSpec, hits, terms)),\n        map((hits) => sortBy(hits, (hit) => -hit.score))\n      )\n  }\n}\n","import {SanityClient} from '@sanity/client'\nimport {Schema} from '@sanity/types'\nimport {Observable} from 'rxjs'\nimport {getSearchableTypes} from './common/utils'\nimport {createWeightedSearch} from './weighted/createWeightedSearch'\nimport {SearchOptions, WeightedHit} from './weighted/types'\n\nexport function createSearch(\n  client: SanityClient,\n  schema: Schema\n): (query: string, opts?: SearchOptions) => Observable<WeightedHit[]> {\n  const searchClient = client.withConfig({\n    // Use >= 2021-03-25 for pt::text() support\n    apiVersion: '2021-03-25',\n  })\n\n  return createWeightedSearch(getSearchableTypes(schema), searchClient, {\n    unique: true,\n    tag: 'search.global',\n  })\n}\n","import type {SourceClientOptions} from './config'\n\n/**\n * Unless otherwise specified, this is the API version we use for controlled\n * requests on internal studio APIs. The user should always ask for a specific\n * API version when using the client - this way we can upgrade which version we\n * use internally without having the users code break unexpectedly. It also\n * means the user can easily upgrade to newer versions of GROQ when it arrives.\n *\n * @internal\n */\nexport const DEFAULT_STUDIO_CLIENT_OPTIONS: SourceClientOptions = {\n  apiVersion: '2022-09-09',\n}\n","import {useEffect, useMemo, useState} from 'react'\nimport {concat, EMPTY, Observable, of, Subject, timer} from 'rxjs'\nimport {\n  catchError,\n  distinctUntilChanged,\n  filter,\n  map,\n  mergeMapTo,\n  share,\n  switchMap,\n} from 'rxjs/operators'\nimport {useClient, useSchema} from '../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../studioClient'\nimport {isNonNullable} from '../util'\nimport {createSearch} from './search'\nimport {WeightedHit} from './weighted/types'\n\nexport interface DocumentSearchParams {\n  options: {includeDrafts: boolean; limit: number}\n  query: string\n}\n\nexport interface DocumentSearchResultsState {\n  loading: boolean\n  error: Error | null\n  value: WeightedHit[]\n}\n\nconst EMPTY_STATE: DocumentSearchResultsState = {\n  loading: false,\n  error: null,\n  value: [],\n}\n\nconst LOADING_STATE: DocumentSearchResultsState = {\n  loading: true,\n  error: null,\n  value: [],\n}\n\n// This value is used to improve performance by minimizing the number\n// of API requests, as well as improving the user experience by waiting\n// to display the search results until the user has finished typing.\nconst DEBOUNCE_VALUE = 400\n\nexport function useDocumentSearchResults(props: {\n  includeDrafts?: boolean\n  limit?: number\n  query: string\n}): DocumentSearchResultsState {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const schema = useSchema()\n  const {includeDrafts = false, limit = 1000, query: queryProp} = props\n  const [state, setState] = useState<DocumentSearchResultsState>(EMPTY_STATE)\n  const paramsSubject = useMemo(() => new Subject<DocumentSearchParams>(), [])\n\n  const search = useMemo(() => createSearch(client, schema), [client, schema])\n\n  const state$ = useMemo(\n    () =>\n      paramsSubject.asObservable().pipe(\n        share(),\n        distinctUntilChanged(),\n        filter(isNonNullable),\n        switchMap(\n          ({query, options}): Observable<DocumentSearchResultsState> =>\n            query\n              ? concat(\n                  of(LOADING_STATE),\n                  timer(DEBOUNCE_VALUE).pipe(mergeMapTo(EMPTY)),\n                  search(query, options).pipe(\n                    map((results) => ({loading: false, error: null, value: results})),\n                    catchError((error) => {\n                      return of({loading: false, error, value: []})\n                    })\n                  )\n                )\n              : of(EMPTY_STATE)\n        )\n      ),\n    [paramsSubject, search]\n  )\n\n  useEffect(() => {\n    paramsSubject.next({\n      options: {includeDrafts, limit},\n      query: queryProp,\n    })\n  }, [includeDrafts, limit, queryProp, paramsSubject])\n\n  useEffect(() => {\n    const sub = state$.subscribe(setState)\n\n    return () => {\n      sub.unsubscribe()\n    }\n  }, [state$])\n\n  return state\n}\n","import {Card, CardProps, Portal} from '@sanity/ui'\nimport React, {forwardRef} from 'react'\nimport styled from 'styled-components'\nimport {useColorScheme} from '../../../colorScheme'\n\nconst StyledCard = styled(Card)`\n  flex-direction: column;\n`\n\nexport const SearchFullscreenContent = forwardRef(function SearchFullscreenContent(\n  props: CardProps & {children: React.ReactNode; hidden?: boolean},\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {scheme} = useColorScheme()\n\n  return (\n    <Portal>\n      <StyledCard display=\"flex\" flex={1} ref={ref} scheme={scheme} {...props} />\n    </Portal>\n  )\n})\n","import {Card, CardProps} from '@sanity/ui'\nimport React, {createContext, forwardRef, useContext} from 'react'\nimport styled, {css} from 'styled-components'\n\nexport const StyledCard = styled(Card)(() => {\n  return css`\n    /* TextWithTone uses its own logic to set color, and we therefore need */\n    /* to override this logic in order to set the correct color in different states */\n    &[data-selected],\n    &[data-pressed],\n    &:active {\n      [data-ui='TextWithTone'] {\n        color: inherit;\n      }\n    }\n  `\n})\n\nexport interface PreviewCardContextValue {\n  selected?: boolean\n}\n\nconst PreviewCardContext = createContext<PreviewCardContextValue>({selected: false})\n\nexport function usePreviewCard(): PreviewCardContextValue {\n  const context = useContext(PreviewCardContext)\n\n  if (!context) {\n    throw new Error('PreviewCard: missing context value')\n  }\n\n  return context\n}\n\nexport const PreviewCard = forwardRef(function PreviewCard(\n  props: CardProps & Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'height'>,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {children, selected, as, ...rest} = props\n\n  return (\n    <StyledCard data-ui=\"PreviewCard\" {...rest} forwardedAs={as} selected={selected} ref={ref}>\n      <PreviewCardContext.Provider value={{selected}}>{children}</PreviewCardContext.Provider>\n    </StyledCard>\n  )\n})\n","import {AvatarStack, Box, Card, Text, Theme, Tooltip, TooltipProps} from '@sanity/ui'\nimport React, {useMemo} from 'react'\nimport styled, {css, useTheme} from 'styled-components'\nimport {usePreviewCard} from '../components/PreviewCard'\nimport {UserAvatar} from '../components/UserAvatar'\nimport {DocumentPresence} from '../datastores'\nimport {isNonNullable} from '../util/isNonNullable'\n\nexport interface DocumentPreviewPresenceProps {\n  presence: Omit<DocumentPresence, 'path'>[]\n}\n\nconst PRESENCE_MENU_POPOVER_PROPS: TooltipProps = {\n  portal: true,\n}\n\nconst AvatarStackCard = styled(Card)(({theme, $selected}: {theme: Theme; $selected?: boolean}) => {\n  const {color} = theme.sanity\n\n  return css`\n    --card-bg-color: inherit;\n    --card-fg-color: inherit;\n    --card-hairline-hard-color: ${$selected ? color.selectable?.default.pressed.border : undefined};\n  `\n})\n\nconst TooltipContentBox = styled(Box)`\n  max-width: 150px;\n`\n\nconst getTooltipText = (presence: Omit<DocumentPresence, 'path'>[]) => {\n  if (presence.length === 1) {\n    return `${presence[0].user.displayName} is editing this document`\n  }\n\n  if (presence.length > 1) {\n    return `${presence.length} people are editing this document right now`\n  }\n\n  return undefined\n}\n\nexport function DocumentPreviewPresence(props: DocumentPreviewPresenceProps) {\n  const {presence} = props\n  const {color} = useTheme().sanity\n  const invertedScheme = color.dark ? 'light' : 'dark'\n  const {selected} = usePreviewCard()\n\n  const uniqueUsers = useMemo(\n    () =>\n      Array.from(new Set(presence.map((a) => a.user.id)))\n        .map((id) => {\n          return presence.find((a) => a.user.id === id)\n        })\n        .filter(isNonNullable),\n    [presence]\n  )\n\n  const tooltipContent = useMemo(() => {\n    return (\n      <TooltipContentBox padding={2}>\n        <Text align=\"center\" size={1}>\n          {getTooltipText(uniqueUsers)}\n        </Text>\n      </TooltipContentBox>\n    )\n  }, [uniqueUsers])\n\n  return (\n    <Tooltip content={tooltipContent} {...PRESENCE_MENU_POPOVER_PROPS}>\n      <AvatarStackCard scheme={selected ? invertedScheme : undefined} $selected={selected}>\n        <AvatarStack maxLength={2}>\n          {uniqueUsers.map((item) => (\n            <UserAvatar key={item.user.id} user={item.user} />\n          ))}\n        </AvatarStack>\n      </AvatarStackCard>\n    </Tooltip>\n  )\n}\n","// disable overlay rendering entirely and only display presence in fields\nexport const DISABLE_OVERLAY = false\n\n// number of avatars to display on each fields (will be stacked and have a counter if more than 3 users in a field)\nexport const MAX_AVATARS_DOCK = 3\nexport const MAX_AVATARS_GLOBAL = 3\nexport const DEFAULT_MAX_AVATARS_FIELDS = 3\n\n// distance between avatars in pixels (negative number means overlap)\nexport const AVATAR_DISTANCE = -4\n\n// height/width of the avatars in pixels\nexport const AVATAR_SIZE = 23\n\nexport const AVATAR_ARROW_HEIGHT = 4\n\n// these are the thresholds in which the intersection observers will notify about regions going in/out of viewport\n// these will affect the thresholds below, so make sure to coordinate edits\nexport const INTERSECTION_THRESHOLDS = [0, 0.25, 0.75, 1]\n\n// The elements that reports intersection changes are padded top+bottom in order to detect when entering leaving\nexport const INTERSECTION_ELEMENT_PADDING = 23\n\n// Make the avatars snap to the top dock when they are closer than this from the top\nexport const SNAP_TO_DOCK_DISTANCE_TOP = 8\n\n// Make the avatars snap to the bottom dock when they are closer than this from the bottom\nexport const SNAP_TO_DOCK_DISTANCE_BOTTOM = 8\n\n// The avatar will move to the right when this close (in pixels) to the top\nexport const SLIDE_RIGHT_THRESHOLD_TOP = 20\n\n// The avatar will move to the right when this close (in pixels) to the bottom\nexport const SLIDE_RIGHT_THRESHOLD_BOTTOM = 20\n\n// Switch on debug mode (will display regions)\nexport const DEBUG = false\n","export const splitRight = <T>(array: T[], max: number): [T[], T[]] => {\n  const indexFromMax = array.length > max ? max - 1 : max\n  const idx = Math.max(0, array.length - indexFromMax)\n  return [array.slice(0, idx), array.slice(idx)]\n}\n\n// export const splitRight = <T>(array: T[], index: number): [T[], T[]] => {\n//   const idx = Math.max(0, array.length - index)\n//   return [array.slice(0, idx), array.slice(idx)]\n// }\n//\nexport const split = <T>(array: T[], index: number): [T[], T[]] => {\n  const idx = Math.max(0, index)\n  return [array.slice(0, idx), array.slice(idx)]\n}\n","import styled from 'styled-components'\nimport {Flex} from '@sanity/ui'\n\nexport const FlexWrapper = styled(Flex)`\n  & > div:first-child {\n    flex: 1;\n    min-width: 0;\n  }\n`\n\nexport const InnerBox = styled(Flex)`\n  height: 23px;\n  min-width: 23px;\n  vertical-align: top;\n`\n","import React from 'react'\nimport {FormFieldPresence} from './types'\n\nexport const FormFieldPresenceContext = React.createContext<FormFieldPresence[]>([])\n","import React, {useMemo} from 'react'\nimport {Box, Flex, Stack, Text, Tooltip} from '@sanity/ui'\nimport {UserAvatar} from '../components/UserAvatar'\nimport {NodePresence} from '../form'\n\ninterface PresenceTooltipProps {\n  children?: React.ReactElement\n  items: NodePresence[]\n}\n\n/**\n * The \"documentScrollElement\" is being passed to the PortalProvider in DocumentPanel.\n * The default portal element provided by the PortalProvider causes some layout issues with the Tooltip.\n * Therefore, another portal element (i.e. the \"documentScrollElement\") is being used to solve this.\n */\n\nexport function PresenceTooltip(props: PresenceTooltipProps) {\n  const {children, items} = props\n\n  const content = useMemo(\n    () => (\n      <Stack padding={1}>\n        {items.map((item) => (\n          <Flex align=\"center\" gap={2} padding={1} key={item.user.id}>\n            <div>\n              <UserAvatar user={item.user} status=\"online\" />\n            </div>\n\n            <Text size={1}>{item.user.displayName}</Text>\n          </Flex>\n        ))}\n      </Stack>\n    ),\n    [items]\n  )\n\n  return (\n    <Tooltip content={content} placement=\"top\" portal=\"documentScrollElement\">\n      {children}\n    </Tooltip>\n  )\n}\n","import React from 'react'\nimport {TrackerContext} from './types'\n\nexport type ReporterHook<Payload> = (\n  id: string | null,\n  value: Payload | (() => Payload),\n  isEqual?: (a: Payload, b: Payload) => boolean\n) => void\n\nfunction isFunc<T>(value: T | (() => T)): value is () => T {\n  return typeof value === 'function'\n}\n\nfunction read<T>(value: T | (() => T)): T {\n  return isFunc(value) ? value() : value\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst noop = () => undefined\n\nexport type IsEqualFunction<Value> = (a: Value, b: Value) => boolean\n\nexport function createUseReporter<Value>(\n  Context: React.Context<TrackerContext<Value>>\n): ReporterHook<Value> {\n  return function useReporter(\n    // No reporting will happen if id=null\n    id: string | null,\n    value: Value | (() => Value),\n    isEqual: IsEqualFunction<Value> = Object.is\n  ) {\n    const {add, update, remove} = React.useContext(Context)\n    const previous = React.useRef<Value>()\n\n    React.useLayoutEffect(() => {\n      if (id === null) {\n        return noop\n      }\n      const current = read(value)\n      add(id, current)\n      previous.current = current\n      return () => {\n        remove(id)\n      }\n    }, [add, id, remove, value])\n\n    React.useLayoutEffect(() => {\n      const current = read(value)\n      if (\n        typeof previous.current !== 'undefined' &&\n        !isEqual(previous.current, current) &&\n        id !== null\n      ) {\n        update(id, current)\n      }\n      previous.current = current\n    })\n  }\n}\n","import {debounce} from 'lodash'\nimport createPubsub from 'nano-pubsub'\nimport {Reported} from './types'\n\nexport function createStore<Value>() {\n  const reportedValues = new Map<string, Value>()\n  const {publish, subscribe} = createPubsub<Reported<Value>[]>()\n\n  const debouncedPublish = debounce(publish, 10, {trailing: true})\n  const read = () => Array.from(reportedValues.entries())\n\n  function add(id: string, value: Value) {\n    if (reportedValues.has(id)) {\n      // eslint-disable-next-line no-console\n      // console.error(\n      //   new Error(\n      //     `Invalid call to useReporter(${id}): A component reporting on \"${id}\" is already mounted in the subtree. Make sure that all reporters within the same <Tracker> subtree have unique ids.`\n      //   )\n      // )\n    }\n    reportedValues.set(id, value)\n    debouncedPublish(read())\n  }\n\n  function update(id: string, value: Value) {\n    if (!reportedValues.has(id)) {\n      // throw new Error(`A reporter with id \"${id}\" is not known.`)\n    }\n    reportedValues.set(id, value)\n    debouncedPublish(read())\n  }\n\n  function remove(id: string) {\n    if (!reportedValues.has(id)) {\n      // throw new Error(`A reporter with id \"${id}\" is not known`)\n    }\n    reportedValues.delete(id)\n    debouncedPublish(read())\n  }\n\n  return {\n    add,\n    remove,\n    update,\n    read,\n    subscribe,\n  }\n}\n","import React from 'react'\nimport {Reported, TrackerContext} from './types'\nimport {createUseReporter, IsEqualFunction} from './createUseReporter'\nimport {createStore} from './createStore'\n\n// Todo: consider memozing individual functions or move the context assertion/guard to a separate step.\nlet didWarn = false\nconst useReporterGuard = (id: string): void => {\n  if (!didWarn) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      new Error(\n        `No context provided for reporter. Make sure that the component calling \"useReporter(${id}, ...)\", is wrapped in a <Tracker> element`\n      )\n    )\n  }\n  didWarn = true\n}\n\nfunction useReportedValueGuard(): Reported<unknown>[] {\n  if (!didWarn) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      new Error(\n        'No context provided for reporter. Make sure that the component calling \"useReportedValues()\", is wrapped inside a <Tracker> element'\n      )\n    )\n  }\n  didWarn = true\n  return []\n}\n\nconst useSubscribeGuard = () => {\n  if (!didWarn) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      new Error(\n        'No context provided for reporter. Make sure that the component calling \"useReportedValues()\", is wrapped inside a <Tracker> element'\n      )\n    )\n  }\n  didWarn = true\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  return () => {}\n}\n\nconst DEFAULT_CONTEXT: TrackerContext<unknown> = {\n  add: useReporterGuard,\n  update: useReporterGuard,\n  remove: useReporterGuard,\n  subscribe: useSubscribeGuard,\n  read: useReportedValueGuard,\n}\n\nlet id = 0\nconst getNextId = () => ++id\n\nexport function createScope<Value>() {\n  const Context = React.createContext(DEFAULT_CONTEXT as TrackerContext<Value>)\n\n  function useReportedValues() {\n    const context = React.useContext(Context)\n    const [values, setValues] = React.useState(context.read())\n    React.useLayoutEffect(() => {\n      setValues(context.read())\n      return context.subscribe(setValues)\n    }, [context])\n    return values\n  }\n\n  function Tracker(props: {children: React.ReactNode}) {\n    const store = React.useMemo(() => createStore<Value>(), [])\n    return <Context.Provider value={store}>{props.children}</Context.Provider>\n  }\n\n  const useReporter = createUseReporter(Context)\n\n  return {\n    Tracker,\n    useReportedValues,\n    useReporter,\n    useAutoIdReporter: (\n      value: Value | (() => Value),\n      isEqual: IsEqualFunction<Value> = Object.is\n    ) => useReporter(`element-${React.useRef(getNextId()).current}`, value, isEqual),\n  }\n}\n","import {createScope, Reported} from '../../components/react-track-elements'\nimport {FieldPresenceData} from '../types'\nexport type ReportedPresenceData = Reported<FieldPresenceData>\n\nconst {Tracker, useReporter, useReportedValues} = createScope<FieldPresenceData>()\n\nexport {Tracker, useReporter, useReportedValues}\n","import React, {memo, useContext} from 'react'\nimport {sortBy, uniqBy} from 'lodash'\nimport {AvatarCounter, AvatarPosition} from '@sanity/ui'\nimport {useId} from '@reach/auto-id'\nimport {UserAvatar} from '../components/UserAvatar'\nimport {NodePresence} from '../form'\nimport {\n  AVATAR_DISTANCE,\n  AVATAR_SIZE,\n  DEFAULT_MAX_AVATARS_FIELDS,\n  DISABLE_OVERLAY,\n} from './constants'\nimport {splitRight} from './utils'\nimport {FlexWrapper, InnerBox} from './FieldPresence.styled'\nimport {FormFieldPresenceContext} from './context'\nimport {PresenceTooltip} from './PresenceTooltip'\nimport {useReporter} from './overlay/tracker'\n\nexport interface FieldPresenceProps {\n  presence: NodePresence[]\n  maxAvatars: number\n}\n\nexport const FieldPresence = DISABLE_OVERLAY\n  ? FieldPresenceWithoutOverlay\n  : FieldPresenceWithOverlay\n\nexport function FieldPresenceWithOverlay(props: FieldPresenceProps) {\n  const contextPresence = useContext(FormFieldPresenceContext)\n  const {presence = contextPresence, maxAvatars = DEFAULT_MAX_AVATARS_FIELDS} = props\n  const ref = React.useRef(null)\n\n  useReporter(useId() || '', () => ({presence, element: ref.current!, maxAvatars: maxAvatars}))\n\n  const minWidth = -AVATAR_DISTANCE + (AVATAR_SIZE + AVATAR_DISTANCE) * props.maxAvatars\n\n  return (\n    <FlexWrapper\n      justify=\"flex-end\"\n      ref={ref}\n      style={{minWidth: minWidth, minHeight: AVATAR_SIZE}}\n    />\n  )\n}\n\nexport function FieldPresenceWithoutOverlay(props: FieldPresenceProps) {\n  const contextPresence = useContext(FormFieldPresenceContext)\n  const {presence = contextPresence, maxAvatars = DEFAULT_MAX_AVATARS_FIELDS} = props\n\n  if (!presence.length) {\n    return null\n  }\n\n  return <FieldPresenceInner presence={presence} maxAvatars={maxAvatars} />\n}\n\nexport interface FieldPresenceInnerProps {\n  maxAvatars?: number\n  presence: NodePresence[]\n  stack?: boolean\n  position?: AvatarPosition\n  animateArrowFrom?: AvatarPosition\n}\n\nfunction calcAvatarStackWidth(len: number) {\n  return -AVATAR_DISTANCE + (AVATAR_SIZE + AVATAR_DISTANCE) * len\n}\n\nexport const FieldPresenceInner = memo(function FieldPresenceInner({\n  presence,\n  position = 'inside',\n  animateArrowFrom = 'inside',\n  maxAvatars = DEFAULT_MAX_AVATARS_FIELDS,\n  stack = true,\n}: FieldPresenceInnerProps) {\n  const uniquePresence = uniqBy(presence || [], (item) => item.user.id)\n  const sorted = sortBy(uniquePresence, (_presence) => _presence.lastActiveAt)\n  const [hidden, visible] = stack ? splitRight(sorted, maxAvatars) : [[], sorted]\n\n  const avatars = [\n    ...visible.reverse().map((_visible) => ({\n      key: _visible.user.id,\n      element: (\n        <UserAvatar\n          animateArrowFrom={animateArrowFrom}\n          position={position}\n          status=\"online\"\n          user={_visible.user}\n        />\n      ),\n    })),\n    hidden.length >= 2\n      ? {\n          key: 'counter',\n          element: <AvatarCounter count={hidden.length} />,\n        }\n      : null,\n  ].filter(Boolean)\n\n  const maxWidth = calcAvatarStackWidth(maxAvatars)\n  const currWidth = Math.min(calcAvatarStackWidth(uniquePresence.length), maxWidth)\n\n  return (\n    <FlexWrapper justify=\"flex-end\" style={{width: maxWidth}}>\n      <div />\n\n      <PresenceTooltip items={uniquePresence}>\n        <InnerBox direction=\"row-reverse\" style={{width: currWidth}}>\n          {avatars.map(\n            (av, i) =>\n              av && (\n                <div\n                  key={av.key}\n                  style={{\n                    position: 'absolute',\n                    transform: `translate3d(${-i * (AVATAR_SIZE + AVATAR_DISTANCE)}px, 0px, 0px)`,\n                    transitionProperty: 'transform',\n                    transitionDuration: '200ms',\n                    transitionTimingFunction: 'cubic-bezier(0.85, 0, 0.15, 1)',\n                    zIndex: 100 - i,\n                  }}\n                >\n                  {av.element}\n                </div>\n              )\n          )}\n        </InnerBox>\n      </PresenceTooltip>\n    </FlexWrapper>\n  )\n})\n","import {Subject, Observable} from 'rxjs'\nimport {filter} from 'rxjs/operators'\n\nexport interface ObservableIntersectionObserver {\n  observe: (element: Element) => Observable<IntersectionObserverEntry>\n}\n\nexport const createIntersectionObserver = (\n  options?: IntersectionObserverInit\n): ObservableIntersectionObserver => {\n  const entries$ = new Subject<IntersectionObserverEntry>()\n  const intersectionObserver = new IntersectionObserver((entries) => {\n    entries.forEach((entry) => {\n      entries$.next(entry)\n    })\n  }, options)\n  return {\n    observe: (element: Element) => {\n      return new Observable<IntersectionObserverEntry>((subscriber) => {\n        const subscription = entries$\n          .pipe(filter((entry) => entry.target === element))\n          .subscribe(subscriber)\n        intersectionObserver.observe(element)\n        return () => {\n          subscription.unsubscribe()\n          intersectionObserver.unobserve(element)\n        }\n      })\n    },\n  }\n}\n","import React from 'react'\nimport {tap} from 'rxjs/operators'\nimport type {ObservableIntersectionObserver} from './intersectionObserver'\n\nexport interface WithIntersectionProps {\n  onIntersection: (id: string, entry: IntersectionObserverEntry) => void\n  io: ObservableIntersectionObserver\n  id: string\n}\n\nexport const WithIntersection = (\n  props: WithIntersectionProps & React.HTMLProps<HTMLDivElement>\n) => {\n  const {onIntersection, io, id, ...rest} = props\n  const element = React.useRef<HTMLDivElement | null>(null)\n  React.useEffect(() => {\n    const el = element.current\n    if (!el) return undefined\n    const subscription = io\n      .observe(el)\n      .pipe(tap((entry) => onIntersection(id, entry)))\n      .subscribe()\n    return () => subscription.unsubscribe()\n  }, [io, id, onIntersection])\n  return <div ref={element} {...rest} />\n}\n","import styled, {css} from 'styled-components'\nimport {WithIntersection} from './WithIntersection'\n\ninterface StyleProps {\n  $debug: boolean\n  margins?: [number, number, number, number]\n}\n\nexport const RootWrapper = styled.div`\n  position: relative;\n`\n\nexport const OverlayWrapper = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  pointer-events: none;\n  z-index: 13;\n`\n\nexport const RegionWrapper = css`\n  overflow: hidden;\n  pointer-events: none;\n  position: absolute;\n`\n\nexport const TopRegionWrapper = styled(WithIntersection)(({$debug, margins}: StyleProps) => {\n  return css`\n    ${RegionWrapper}\n\n    z-index: 100;\n    position: sticky;\n    height: 1px;\n    top: ${margins ? `${margins[0] - 1}px` : undefined};\n    background-color: ${$debug ? 'red' : 'none'};\n  `\n})\n\nexport const MiddleRegionWrapper = styled(WithIntersection)(({$debug}: StyleProps) => {\n  return css`\n    ${RegionWrapper}\n\n    visibility: none;\n\n    ${$debug &&\n    css`\n      background: rgba(255, 0, 0, 0.25);\n      outline: 1px solid #00b;\n      visibility: visible;\n    `}\n  `\n})\n\nexport const BottomRegionWrapper = styled(WithIntersection)(({$debug}: StyleProps) => {\n  return css`\n    ${RegionWrapper}\n\n    position: sticky;\n    bottom: -1px;\n    height: 1px;\n    background-color: ${$debug ? 'blue' : 'transparent'};\n  `\n})\n","import React, {forwardRef, useCallback, useMemo, useRef, useState} from 'react'\nimport {\n  SNAP_TO_DOCK_DISTANCE_BOTTOM,\n  SNAP_TO_DOCK_DISTANCE_TOP,\n  DEBUG,\n  INTERSECTION_ELEMENT_PADDING,\n  INTERSECTION_THRESHOLDS,\n} from '../constants'\nimport {ReportedRegionWithRect, RegionWithIntersectionDetails, FieldPresenceData} from '../types'\nimport {createIntersectionObserver} from './intersectionObserver'\n\nimport {\n  RootWrapper,\n  OverlayWrapper,\n  TopRegionWrapper,\n  MiddleRegionWrapper,\n  BottomRegionWrapper,\n} from './RegionsWithIntersections.styled'\n\ninterface RegionsWithIntersectionsProps {\n  regions: ReportedRegionWithRect<FieldPresenceData>[]\n  render: (\n    regionsWithIntersectionDetails: RegionWithIntersectionDetails[],\n    containerWidth: number\n  ) => React.ReactNode | null\n  children: React.ReactNode\n  margins: [number, number, number, number]\n}\n\nconst toPx = (num: number) => `${num}px`\nconst negate = (num: number) => 0 - num\n\nexport const RegionsWithIntersections = forwardRef(function RegionsWithIntersections(\n  props: RegionsWithIntersectionsProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {regions, render, children, margins: marginsProp} = props\n\n  const overlayRef = useRef<HTMLDivElement | null>(null)\n\n  // Make sure `margins` is memoized\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const margins = useMemo(() => marginsProp, [JSON.stringify(marginsProp)])\n\n  const io = useMemo(\n    () =>\n      createIntersectionObserver({\n        rootMargin: margins.map(negate).map(toPx).join(' '),\n        threshold: INTERSECTION_THRESHOLDS,\n      }),\n    [margins]\n  )\n\n  const [intersections, setIntersections] = useState<\n    Record<\n      string,\n      | {\n          boundingClientRect: {top: number; bottom: number}\n          isIntersecting: boolean\n          intersectionRect: {top: number; bottom: number}\n        }\n      | undefined\n    >\n  >({})\n\n  const onIntersection = useCallback((id, entry) => {\n    setIntersections((current) => ({...current, [id]: entry}))\n  }, [])\n\n  const top = intersections['::top']\n  const bottom = intersections['::bottom']\n  const regionsWithIntersectionDetails: RegionWithIntersectionDetails[] = useMemo(\n    () =>\n      (top && bottom\n        ? regions\n            .filter((region) => region.presence?.length > 0)\n            .map((region): RegionWithIntersectionDetails | null => {\n              const intersection = intersections[region.id]\n\n              if (!intersection) {\n                return null\n              }\n\n              const {bottom: boundsBottom, top: boundsTop} = intersection.boundingClientRect\n\n              const aboveTop = intersection.boundingClientRect.top < top.boundingClientRect.bottom\n              const belowBottom =\n                intersection.boundingClientRect.top < bottom.boundingClientRect.top\n\n              // eslint-disable-next-line no-nested-ternary\n              const distanceTop = intersection.isIntersecting\n                ? boundsTop - (intersection.intersectionRect.top - INTERSECTION_ELEMENT_PADDING)\n                : aboveTop\n                ? -top.boundingClientRect.bottom\n                : bottom.boundingClientRect.top\n\n              // eslint-disable-next-line no-nested-ternary\n              const distanceBottom = intersection.isIntersecting\n                ? -(\n                    boundsBottom -\n                    (intersection.intersectionRect.bottom + INTERSECTION_ELEMENT_PADDING)\n                  )\n                : belowBottom\n                ? bottom.boundingClientRect.top\n                : -top.boundingClientRect.bottom\n\n              const position =\n                // eslint-disable-next-line no-nested-ternary\n                distanceTop <= SNAP_TO_DOCK_DISTANCE_TOP\n                  ? 'top'\n                  : distanceBottom <= SNAP_TO_DOCK_DISTANCE_BOTTOM\n                  ? 'bottom'\n                  : 'inside'\n\n              return {\n                distanceTop,\n                distanceBottom,\n                region,\n                position,\n              }\n            })\n            .filter(Boolean)\n        : []) as RegionWithIntersectionDetails[],\n    [bottom, intersections, regions, top]\n  )\n\n  return (\n    <RootWrapper ref={ref}>\n      <TopRegionWrapper\n        $debug={DEBUG}\n        io={io}\n        id=\"::top\"\n        onIntersection={onIntersection}\n        margins={margins}\n      />\n      <div>{children}</div>\n      <OverlayWrapper ref={overlayRef}>\n        {overlayRef.current &&\n          render(regionsWithIntersectionDetails, overlayRef.current.offsetWidth)}\n      </OverlayWrapper>\n      {regions.map((region) => {\n        const forceWidth = region.rect.width === 0\n        return (\n          <MiddleRegionWrapper\n            $debug={DEBUG}\n            io={io}\n            onIntersection={onIntersection}\n            key={region.id}\n            id={region.id}\n            style={{\n              width: forceWidth ? 1 : region.rect.width,\n              left: region.rect.left - (forceWidth ? 1 : 0),\n              top: region.rect.top - INTERSECTION_ELEMENT_PADDING,\n              height: region.rect.height + INTERSECTION_ELEMENT_PADDING * 2,\n            }}\n          />\n        )\n      })}\n      <BottomRegionWrapper $debug={DEBUG} id=\"::bottom\" io={io} onIntersection={onIntersection} />\n    </RootWrapper>\n  )\n})\n","/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport React, {memo, useMemo} from 'react'\nimport {flatten, groupBy, orderBy, sortBy} from 'lodash'\nimport {\n  AVATAR_ARROW_HEIGHT,\n  AVATAR_DISTANCE,\n  AVATAR_SIZE,\n  DEBUG,\n  MAX_AVATARS_DOCK,\n  SLIDE_RIGHT_THRESHOLD_BOTTOM,\n  SLIDE_RIGHT_THRESHOLD_TOP,\n} from '../constants'\nimport {\n  FieldPresenceData,\n  Rect,\n  ReportedRegionWithRect,\n  RegionWithIntersectionDetails,\n} from '../types'\nimport {FieldPresenceInner} from '../FieldPresence'\n\nimport {RegionsWithIntersections} from './RegionsWithIntersections'\nimport {ReportedPresenceData, useReportedValues} from './tracker'\n\nconst ITEM_TRANSITION: React.CSSProperties = {\n  transitionProperty: 'transform',\n  transitionDuration: '200ms',\n  transitionTimingFunction: 'cubic-bezier(0.85, 0, 0.15, 1)',\n}\n\nconst bottom = (rect: {top: number; height: number}) => rect.top + rect.height\n\ntype RegionWithSpacerHeight = RegionWithIntersectionDetails & {\n  spacerHeight: number\n}\n\nfunction withSpacerHeight(\n  regionsWithIntersectionDetails: RegionWithIntersectionDetails[]\n): RegionWithSpacerHeight[] {\n  return regionsWithIntersectionDetails.map(\n    (withIntersection, idx, _regionsWithIntersectionDetails) => {\n      const prevRect = _regionsWithIntersectionDetails[idx - 1]?.region.rect\n      const prevBottom = prevRect ? bottom(prevRect) : 0\n      return {...withIntersection, spacerHeight: withIntersection.region.rect.top - prevBottom}\n    }\n  )\n}\n\nconst orderByTop = (regionsWithIntersectionDetails: RegionWithIntersectionDetails[]) =>\n  orderBy(regionsWithIntersectionDetails, (withIntersection) => withIntersection.region.rect.top)\n\nconst plus = (a: number, b: number) => a + b\nconst sum = (array: number[]) => array.reduce(plus, 0)\n\ntype Margins = [number, number, number, number]\ntype RegionWithSpacerHeightAndIndent = RegionWithSpacerHeight & {indent: number}\n\nfunction group(regionsWithIntersectionDetails: RegionWithIntersectionDetails[]): {\n  top: RegionWithSpacerHeightAndIndent[]\n  inside: RegionWithSpacerHeightAndIndent[]\n  bottom: RegionWithSpacerHeightAndIndent[]\n} {\n  const regionsWithSpacerHeight = withSpacerHeight(orderByTop(regionsWithIntersectionDetails))\n  const grouped: {\n    top: RegionWithSpacerHeight[]\n    inside: RegionWithSpacerHeight[]\n    bottom: RegionWithSpacerHeight[]\n  } = {\n    top: [],\n    inside: [],\n    bottom: [],\n    ...groupBy(regionsWithSpacerHeight, (_withSpacerHeight) => _withSpacerHeight.position),\n  }\n\n  return {\n    top: orderByTop(grouped.top).map(\n      (withIntersection, i, grp): RegionWithSpacerHeightAndIndent => ({\n        ...(withIntersection as RegionWithSpacerHeight),\n        indent: grp\n          .slice(i + 1)\n          .reduce((w, _withIntersection) => w + _withIntersection.region.rect.width, 0),\n      })\n    ),\n    inside: orderByTop(grouped.inside).map(\n      (withIntersection): RegionWithSpacerHeightAndIndent => ({\n        ...(withIntersection as RegionWithSpacerHeight),\n        indent: 0,\n      })\n    ),\n    bottom: orderByTop(grouped.bottom).map(\n      (withIntersection, i, grp): RegionWithSpacerHeightAndIndent => ({\n        ...(withIntersection as RegionWithSpacerHeight),\n        indent: grp\n          .slice(0, i)\n          .reduce((w, _withIntersection) => w + _withIntersection.region.rect.width, 0),\n      })\n    ),\n  }\n}\n\nconst Spacer = ({height, ...rest}: {height: number; style?: React.CSSProperties}) => (\n  <div style={{height: Math.max(0, height), ...rest?.style}} />\n)\n\nconst DEFAULT_MARGINS: Margins = [0, 0, 0, 0]\n\nconst getOffsetsTo = (source: HTMLElement, target: HTMLElement) => {\n  let el: HTMLElement | null = source\n  let top = -el.scrollTop\n  let left = 0\n  while (el && el !== target) {\n    top += el.offsetTop - el.scrollTop\n    left += el.offsetLeft\n    el = el.offsetParent instanceof HTMLElement ? el.offsetParent : null\n  }\n  return {top, left}\n}\n\nfunction getRelativeRect(element: HTMLElement, parent: HTMLElement): Rect {\n  return {\n    ...getOffsetsTo(element, parent),\n    width: element.offsetWidth,\n    height: element.offsetHeight,\n  }\n}\n\nfunction regionsWithComputedRects(\n  regions: ReportedPresenceData[],\n  parent: HTMLElement\n): ReportedRegionWithRect<FieldPresenceData>[] {\n  return regions.map(([id, region]) => ({\n    ...region,\n    id,\n    rect: getRelativeRect(region.element, parent),\n  }))\n}\n\ntype Props = {margins: Margins; children: React.ReactNode}\nexport function StickyOverlay(props: Props) {\n  const {children, margins = DEFAULT_MARGINS} = props\n  const reportedValues = useReportedValues()\n  const ref = React.useRef<HTMLDivElement | null>(null)\n  const regions = React.useMemo(\n    () => (ref.current ? regionsWithComputedRects(reportedValues, ref.current) : EMPTY_ARRAY),\n    [reportedValues]\n  )\n\n  const renderCallback = React.useCallback(\n    (regionsWithIntersectionDetails: RegionWithIntersectionDetails[], containerWidth) => {\n      const grouped = group(\n        regionsWithIntersectionDetails.filter((item) => item.region.presence.length > 0)\n      )\n      const topSpacing = sum(grouped.top.map((n) => n.region.rect.height + n.spacerHeight))\n      const bottomSpacing = sum(\n        [...grouped.inside, ...grouped.bottom].map((n) => n.region.rect.height + n.spacerHeight)\n      )\n\n      // todo: this needs cleaning up, should process all the needed layout data in one go\n      const counts = grouped.inside.reduce(\n        (_counts, withIntersection) => {\n          const {distanceTop, distanceBottom} = withIntersection\n\n          const nearTop = distanceTop <= SLIDE_RIGHT_THRESHOLD_TOP\n          const nearBottom = distanceBottom <= SLIDE_RIGHT_THRESHOLD_BOTTOM\n          return {\n            nearTop: _counts.nearTop + (nearTop ? withIntersection.region.presence.length : 0),\n            nearBottom:\n              _counts.nearBottom + (nearBottom ? withIntersection.region.presence.length : 0),\n          }\n        },\n        {nearTop: 0, nearBottom: 0}\n      )\n\n      return (\n        <>\n          <PresenceDock\n            closeCount={counts.nearTop}\n            margins={margins}\n            position=\"top\"\n            regionsWithIntersectionDetails={grouped.top}\n          />\n          <Spacer height={topSpacing} />\n          <PresenceInside\n            containerWidth={containerWidth}\n            regionsWithIntersectionDetails={grouped.inside}\n          />\n          <Spacer height={bottomSpacing} />\n          <PresenceDock\n            closeCount={counts.nearBottom}\n            margins={margins}\n            position=\"bottom\"\n            regionsWithIntersectionDetails={grouped.bottom}\n          />\n        </>\n      )\n    },\n    [margins]\n  )\n\n  return (\n    <RegionsWithIntersections ref={ref} margins={margins} regions={regions} render={renderCallback}>\n      {children}\n    </RegionsWithIntersections>\n  )\n}\n\nconst EMPTY_ARRAY: never[] = []\n\nconst PresenceDock = memo(function PresenceDock(props: {\n  closeCount: number\n  margins: Margins\n  position: 'top' | 'bottom'\n  regionsWithIntersectionDetails: RegionWithIntersectionDetails[]\n}) {\n  const {closeCount, margins, position, regionsWithIntersectionDetails} = props\n  const dir = position === 'top' ? 1 : -1\n  const allPresenceItems = useMemo(() => {\n    if (!regionsWithIntersectionDetails.length) {\n      return EMPTY_ARRAY\n    }\n\n    return flatten(\n      sortBy(regionsWithIntersectionDetails, (r) => r.region.rect.top * dir).map(\n        (withIntersection) => withIntersection.region.presence || EMPTY_ARRAY\n      )\n    )\n  }, [dir, regionsWithIntersectionDetails])\n  const [topMargin, rightMargin, bottomMargin, leftMargin] = margins\n  const leftOffset =\n    (leftMargin || 0) +\n    (allPresenceItems.length > 0 ? -closeCount * (AVATAR_SIZE + AVATAR_DISTANCE) : 0) -\n    rightMargin\n\n  const margin = position === 'top' ? topMargin : bottomMargin\n\n  const style: React.CSSProperties = useMemo(\n    () => ({\n      zIndex: 2,\n      position: 'sticky',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'flex-end',\n      ...ITEM_TRANSITION,\n      transform: `translate3d(${leftOffset}px, 0px, 0px)`,\n      top: AVATAR_ARROW_HEIGHT + 1 + margin,\n      bottom: AVATAR_ARROW_HEIGHT + 1 + margin,\n    }),\n    [leftOffset, margin]\n  )\n\n  return (\n    <div data-dock={position} key={`sticky-${position}`} style={style}>\n      <FieldPresenceInner\n        position={position}\n        maxAvatars={MAX_AVATARS_DOCK}\n        presence={allPresenceItems}\n      />\n    </div>\n  )\n})\n\nfunction PresenceInside(props: {\n  containerWidth: number\n  regionsWithIntersectionDetails: RegionWithSpacerHeight[]\n}) {\n  const {regionsWithIntersectionDetails, containerWidth} = props\n\n  return (\n    <>\n      {regionsWithIntersectionDetails.map((withIntersection) => {\n        const originalLeft = withIntersection.region.rect.left\n        const {distanceTop, distanceBottom} = withIntersection\n\n        const nearTop = distanceTop <= SLIDE_RIGHT_THRESHOLD_TOP\n        const nearBottom = distanceBottom <= SLIDE_RIGHT_THRESHOLD_BOTTOM\n\n        const diffRight = containerWidth - originalLeft - withIntersection.region.rect.width\n\n        const {presence, maxAvatars} = withIntersection.region\n        return (\n          <React.Fragment key={withIntersection.region.id}>\n            <div\n              style={{\n                zIndex: 2,\n                position: 'absolute',\n                pointerEvents: 'all',\n                ...ITEM_TRANSITION,\n                left: originalLeft,\n                transform: `translate3d(${nearTop || nearBottom ? diffRight : 0}px, 0px, 0px)`,\n                height: withIntersection.region.rect.height,\n                top: withIntersection.region.rect.top,\n              }}\n            >\n              <DebugValue value={() => `â¤’${distanceTop} | ${distanceBottom}â¤“`}>\n                <FieldPresenceInner\n                  stack={!nearTop && !nearBottom}\n                  // eslint-disable-next-line no-nested-ternary\n                  position={nearTop ? 'top' : nearBottom ? 'bottom' : 'inside'}\n                  maxAvatars={maxAvatars}\n                  presence={presence}\n                />\n              </DebugValue>\n            </div>\n          </React.Fragment>\n        )\n      })}\n    </>\n  )\n}\n\nconst PassThrough = (props: {children: React.ReactElement; [prop: string]: any}) => props.children\n\nconst DebugValue = DEBUG\n  ? function DebugValue(props: any) {\n      return (\n        <div style={{position: 'absolute'}}>\n          {props.children}\n          <span\n            style={{\n              top: 0,\n              left: -15,\n              fontSize: 11,\n              right: -15,\n              textAlign: 'center',\n              height: AVATAR_SIZE,\n              color: 'white',\n              backgroundColor: 'rgba(0, 0, 0, 0.8)',\n              position: 'absolute',\n              zIndex: 1000,\n            }}\n          >\n            {props.value()}\n          </span>\n        </div>\n      )\n    }\n  : PassThrough\n","import React from 'react'\nimport {DISABLE_OVERLAY} from '../constants'\nimport {Tracker} from './tracker'\nimport {StickyOverlay} from './StickyOverlay'\n\nexport interface PresenceOverlayProps {\n  children: React.ReactNode\n  margins?: [number, number, number, number]\n}\n\nconst DEFAULT_MARGINS: [number, number, number, number] = [0, 0, 0, 0]\n\nfunction OverlayEnabled({children, margins}: PresenceOverlayProps) {\n  return (\n    <Tracker>\n      <StickyOverlay margins={margins || DEFAULT_MARGINS}>{children}</StickyOverlay>\n    </Tracker>\n  )\n}\n\nexport function OverlayDisabled(props: PresenceOverlayProps) {\n  return props.children as JSX.Element\n}\n\nexport const PresenceOverlay = DISABLE_OVERLAY ? OverlayDisabled : OverlayEnabled\n","import {UploadState} from '@sanity/types'\nimport {isRecord, isString} from '../../util'\n\nexport function _extractUploadState(value: unknown): {\n  _upload?: UploadState\n  value: unknown\n} {\n  if (isRecord(value)) {\n    const {_upload, ...restValue} = value\n\n    return {\n      _upload: _resolveUploadValue(_upload),\n      value: restValue,\n    }\n  }\n\n  return {_upload: undefined, value}\n}\n\nfunction _resolveUploadValue(value: unknown): UploadState | undefined {\n  if (!isRecord(value)) return undefined\n\n  const progress = typeof value.progress === 'number' ? value.progress : undefined\n  const initiated = isString(value.initiated) ? value.initiated : undefined\n  const updated = isString(value.updated) ? value.updated : undefined\n  const fileName = isRecord(value.file) && isString(value.file.name) ? value.file.name : undefined\n  const fileType = isRecord(value.file) && isString(value.file.type) ? value.file.type : undefined\n  const previewImage = isString(value.previewImage) ? value.previewImage : undefined\n\n  if (progress && initiated && updated && fileName && fileType) {\n    return {\n      progress,\n      initiated,\n      updated,\n      file: {name: fileName, type: fileType},\n      previewImage,\n    }\n  }\n\n  return undefined\n}\n","import {ComponentType} from 'react'\nimport {\n  BlockImagePreview,\n  BlockPreview,\n  DefaultPreview,\n  DetailPreview,\n  InlinePreview,\n  MediaPreview,\n  PreviewLayoutKey,\n  PreviewProps,\n} from '../../components/previews'\n\nexport const _previewComponents: {\n  [TLayoutKey in PreviewLayoutKey]: ComponentType<PreviewProps<TLayoutKey>>\n} = {\n  default: DefaultPreview,\n  media: MediaPreview,\n  detail: DetailPreview,\n  inline: InlinePreview,\n  block: BlockPreview,\n  blockImage: BlockImagePreview,\n}\n","import {DocumentIcon} from '@sanity/icons'\nimport imageUrlBuilder from '@sanity/image-url'\nimport {ImageUrlFitMode, isImage, isReference} from '@sanity/types'\nimport React, {\n  ComponentType,\n  createElement,\n  isValidElement,\n  ReactElement,\n  useCallback,\n  useMemo,\n} from 'react'\nimport {PreviewProps} from '../../components/previews'\nimport {useClient} from '../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../studioClient'\nimport {isRecord, isString} from '../../util'\nimport {_extractUploadState} from './_extractUploadState'\nimport {_previewComponents} from './_previewComponents'\n\nfunction FallbackIcon() {\n  return <DocumentIcon className=\"sanity-studio__preview-fallback-icon\" />\n}\n\nexport interface SanityDefaultPreviewProps extends Omit<PreviewProps, 'value'> {\n  error?: Error | null\n  icon?: ComponentType | false\n  value?: unknown\n}\n\nexport function SanityDefaultPreview(props: SanityDefaultPreviewProps): ReactElement {\n  const {\n    description: descriptionProp,\n    icon,\n    layout,\n    media: mediaProp,\n    subtitle: subtitleProp,\n    title: titleProp,\n    value: valueProp,\n    ...restProps\n  } = props\n\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const imageBuilder = useMemo(() => imageUrlBuilder(client), [client])\n\n  const component = (_previewComponents[layout || 'default'] ||\n    _previewComponents.default) as ComponentType<PreviewProps>\n\n  const {_upload, value} = useMemo(() => {\n    return valueProp ? _extractUploadState(valueProp) : {_upload: undefined, value: undefined}\n  }, [valueProp])\n\n  const description: PreviewProps['description'] =\n    descriptionProp ||\n    (isRecord(value) && value?.description ? String(value?.description) : undefined)\n\n  const title: PreviewProps['title'] =\n    titleProp || (isRecord(value) && value?.title ? String(value?.title) : undefined)\n\n  const subtitle: PreviewProps['subtitle'] =\n    subtitleProp || (isRecord(value) && value?.subtitle ? String(value?.subtitle) : undefined)\n\n  // NOTE: This function exists because the previews provides options\n  // for the rendering of the media (dimensions)\n  const renderMedia = useCallback(\n    (options: {\n      dimensions: {width?: number; height?: number; fit: ImageUrlFitMode; dpr?: number}\n    }) => {\n      if (!isImage(mediaProp)) {\n        return null\n      }\n\n      const {dimensions} = options\n\n      // Handle sanity image\n      return (\n        <img\n          alt={isString(title) ? title : undefined}\n          referrerPolicy=\"strict-origin-when-cross-origin\"\n          src={\n            imageBuilder\n              .image(mediaProp)\n              .width(dimensions.width || 100)\n              .height(dimensions.height || 100)\n              .fit(dimensions.fit)\n              .dpr(dimensions.dpr || 1)\n              .url() || ''\n          }\n        />\n      )\n    },\n    [imageBuilder, mediaProp, title]\n  )\n\n  const renderIcon = useCallback(() => {\n    return createElement(icon || FallbackIcon)\n  }, [icon])\n\n  const media = useMemo(() => {\n    if (icon === false) {\n      // Explicitly disabled\n      return false\n    }\n\n    if (typeof mediaProp === 'function') {\n      return mediaProp\n    }\n\n    if (isValidElement(mediaProp)) {\n      return mediaProp\n    }\n\n    // If the asset is on media\n    if (isReference(mediaProp) && mediaProp._type === 'reference') {\n      return renderMedia\n    }\n\n    // Handle sanity image\n    if (isImage(mediaProp)) {\n      return renderMedia\n    }\n\n    // Render fallback icon\n    return renderIcon\n  }, [icon, mediaProp, renderIcon, renderMedia])\n\n  return createElement(component, {\n    imageUrl: _upload?.previewImage,\n    progress: _upload?.progress,\n    ...restProps,\n    media,\n    description,\n    title,\n    subtitle,\n    value,\n  })\n}\n","import {PreviewValue, SchemaType, SortOrdering} from '@sanity/types'\nimport {useEffect, useState} from 'react'\nimport {useDocumentPreviewStore} from '../datastores'\nimport {Previewable} from './types'\n\nexport {useDocumentPreview as unstable_useDocumentPreview}\n\n/**\n * @deprecated FOR INTERNAL USE.\n */\nfunction useDocumentPreview(props: {\n  enabled?: boolean\n  ordering?: SortOrdering\n  schemaType?: SchemaType\n  value: Previewable | undefined\n}): {error: Error | null; value: PreviewValue | null} {\n  const {enabled = true, ordering, schemaType, value: previewValue} = props || {}\n  const {observeForPreview} = useDocumentPreviewStore()\n  const [error, setError] = useState<Error | null>(null)\n  const [value, setValue] = useState<PreviewValue | null>(null)\n\n  useEffect(() => {\n    if (!enabled || !previewValue || !schemaType) return undefined\n\n    const snapshotEvent$ = observeForPreview(previewValue, schemaType, {ordering})\n\n    const sub = snapshotEvent$.subscribe({\n      error(nextError) {\n        setError(nextError)\n      },\n      next(nextValue) {\n        setValue(nextValue.snapshot || null)\n      },\n    })\n\n    return () => sub.unsubscribe()\n  }, [enabled, observeForPreview, ordering, schemaType, previewValue])\n\n  return {error, value}\n}\n","import {EMPTY, fromEvent} from 'rxjs'\nimport {shareReplay} from 'rxjs/operators'\n\nexport const resize$ =\n  typeof window === 'undefined' ? EMPTY : fromEvent(window, 'resize').pipe(shareReplay(1))\n","import {EMPTY, fromEvent} from 'rxjs'\nimport {shareReplay} from 'rxjs/operators'\n\nexport const scroll$ =\n  typeof window === 'undefined'\n    ? EMPTY\n    : fromEvent(window, 'scroll', {passive: true, capture: true}).pipe(shareReplay(1))\n","import {EMPTY, fromEvent} from 'rxjs'\nimport {shareReplay} from 'rxjs/operators'\n\nexport const orientationChange$ =\n  typeof window === 'undefined'\n    ? EMPTY\n    : fromEvent(window, 'orientationchange').pipe(shareReplay(1))\n","import {Subject, Observable, merge, of as observableOf} from 'rxjs'\nimport {map, mergeMap, filter} from 'rxjs/operators'\nimport {resize$} from './resize'\nimport {scroll$} from './scroll'\nimport {orientationChange$} from './orientationChange'\n\nconst ROOT_MARGIN_PX = 150\n\n/*\n  Adapted from the polyfill at https://github.com/WICG/IntersectionObserver\n*/\nfunction isIntersectionObserverSupported() {\n  if (\n    typeof window !== 'undefined' &&\n    'IntersectionObserver' in window &&\n    'IntersectionObserverEntry' in window &&\n    'intersectionRatio' in IntersectionObserverEntry.prototype\n  ) {\n    // Minimal polyfill for Edge 15's lack of `isIntersecting`\n    // See: https://github.com/WICG/IntersectionObserver/issues/211\n    if (!('isIntersecting' in IntersectionObserverEntry.prototype)) {\n      Object.defineProperty(IntersectionObserverEntry.prototype, 'isIntersecting', {\n        get() {\n          return this.intersectionRatio > 0\n        },\n      })\n    }\n    return true\n  }\n  return false\n}\n\ntype IntersectionEvent = {isIntersecting: boolean}\n\nexport const intersectionObservableFor = isIntersectionObserverSupported()\n  ? createIntersectionObserverBased()\n  : createLegacyBased()\n\ntype IntersectionObservableFor = (element: Element) => Observable<IntersectionEvent>\n\nfunction createIntersectionObserverBased(): IntersectionObservableFor {\n  const intersectionObserverEntriesSubject = new Subject<IntersectionObserverEntry>()\n\n  const intersectionObserver = new IntersectionObserver(\n    (entries) => {\n      entries.forEach((entry) => {\n        intersectionObserverEntriesSubject.next(entry)\n      })\n    },\n    {\n      threshold: 0,\n      rootMargin: `${ROOT_MARGIN_PX}px`,\n    }\n  )\n\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  return function intersectionObservableFor(element) {\n    return new Observable((observer) => {\n      intersectionObserver.observe(element)\n      observer.next()\n      return () => intersectionObserver.unobserve(element)\n    }).pipe(\n      mergeMap(() => intersectionObserverEntriesSubject.asObservable()),\n      filter((entry: IntersectionObserverEntry) => entry.target === element),\n      map((ev) => ({\n        isIntersecting: ev.isIntersecting,\n      }))\n    )\n  }\n}\n\n// This can be removed when intersection observer are supported by the browsers we support\nfunction createLegacyBased() {\n  function getViewport() {\n    return {\n      left: 0,\n      right: window.innerWidth,\n      top: 0,\n      bottom: window.innerHeight,\n    }\n  }\n\n  function intersects(\n    rect: DOMRect,\n    viewport: {left: number; right: number; top: number; bottom: number},\n    margin: number\n  ) {\n    return (\n      rect.left <= viewport.right + margin &&\n      rect.right >= viewport.left - margin &&\n      rect.top <= viewport.bottom + margin &&\n      rect.bottom >= viewport.top - margin\n    )\n  }\n\n  function inViewport(element: HTMLElement) {\n    return () => intersects(element.getBoundingClientRect(), getViewport(), ROOT_MARGIN_PX)\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  return function intersectionObservableFor(element: HTMLElement): Observable<IntersectionEvent> {\n    const isElementInViewport = inViewport(element)\n    return merge(observableOf(isElementInViewport()), resize$, scroll$, orientationChange$).pipe(\n      // @todo: consider \"faking\" more of the IntersectionObserverEntry api if possible\n      map(isElementInViewport),\n      map((isIntersecting) => ({isIntersecting}))\n    )\n  }\n}\n","import {EMPTY, fromEvent, Observable} from 'rxjs'\nimport {shareReplay} from 'rxjs/operators'\n\nexport const visibilityChange$: Observable<Event> =\n  typeof window === 'undefined'\n    ? EMPTY\n    : fromEvent(document, 'visibilitychange').pipe(shareReplay(1))\n","import {useEffect, useState} from 'react'\nimport {concat, of} from 'rxjs'\nimport {delay, distinctUntilChanged, map, switchMap} from 'rxjs/operators'\nimport {intersectionObservableFor} from './streams/intersectionObservableFor'\nimport {visibilityChange$} from './streams/visibilityChange'\n\nexport function useVisibility(props: {element: HTMLElement | null; hideDelay?: number}): boolean {\n  const {element, hideDelay = 0} = props\n  const [visible, setVisible] = useState(false)\n\n  useEffect(() => {\n    if (!element) {\n      return undefined\n    }\n\n    const isDocumentVisible$ = concat(\n      of(!document.hidden),\n      visibilityChange$.pipe(\n        map((event) => (event.target instanceof Document ? !event?.target?.hidden : false))\n      )\n    ).pipe(distinctUntilChanged())\n\n    const inViewport$ = intersectionObservableFor(element).pipe(\n      map((event) => event.isIntersecting)\n    )\n\n    const visible$ = isDocumentVisible$.pipe(\n      switchMap((isDocumentVisible) => (isDocumentVisible ? inViewport$ : of(false))),\n      switchMap((isVisible) => (isVisible ? of(true) : of(false).pipe(delay(hideDelay)))),\n      distinctUntilChanged()\n    )\n\n    const sub = visible$.subscribe(setVisible)\n\n    return () => sub.unsubscribe()\n  }, [element, hideDelay])\n\n  return visible\n}\n","export const _HIDE_DELAY = 1000 * 2 // 2 seconds\n","import {SchemaType} from '@sanity/types'\nimport {ComponentType} from 'react'\nimport {PreviewProps} from '../../components/previews'\nimport {SanityDefaultPreview} from './SanityDefaultPreview'\n\nexport function _resolvePreviewComponent(type: SchemaType): ComponentType<\n  PreviewProps & {\n    icon?: ComponentType\n    schemaType?: SchemaType\n  }\n> {\n  return type.components?.preview || SanityDefaultPreview\n}\n","import {isImage, SchemaType} from '@sanity/types'\nimport React, {createElement, CSSProperties, useCallback, useMemo, useState} from 'react'\nimport {PreviewProps} from '../../components/previews'\nimport {Previewable, SortOrdering} from '../types'\nimport {unstable_useDocumentPreview as useDocumentPreview} from '../useDocumentPreview'\nimport {useVisibility} from '../useVisibility'\nimport {_HIDE_DELAY} from './_constants'\nimport {_resolvePreviewComponent} from './_resolvePreviewComponent'\n\nexport interface SanityPreviewProps extends Omit<PreviewProps, 'value'> {\n  ordering?: SortOrdering\n  schemaType: SchemaType\n  value: Previewable\n}\n\nexport function SanityPreview(props: SanityPreviewProps & {style?: CSSProperties}) {\n  const {\n    layout = 'default',\n    ordering,\n    schemaType,\n    style: styleProp,\n    value: valueProp,\n    ...restProps\n  } = props\n  const component = _resolvePreviewComponent(schemaType)\n  const [element, setElement] = useState<HTMLDivElement | null>(null)\n  const isPTE = ['inline', 'block', 'blockImage'].includes(layout)\n\n  // Subscribe to visiblity\n  const visibility = useVisibility({\n    // NOTE: disable when PTE preview\n    element: isPTE ? null : element,\n    hideDelay: _HIDE_DELAY,\n  })\n\n  // Subscribe document preview value\n  const {error, value} = useDocumentPreview({\n    enabled: isPTE || visibility,\n    ordering,\n    schemaType,\n    value: valueProp,\n  })\n\n  const setRef = useCallback((refValue: HTMLDivElement | null) => {\n    setElement(refValue)\n  }, [])\n\n  const style: CSSProperties = useMemo(\n    () => ({\n      ...styleProp,\n      minWidth: styleProp?.minWidth || 1,\n      minHeight: styleProp?.minHeight || 1,\n    }),\n    [styleProp]\n  )\n\n  return (\n    <div ref={setRef} style={style}>\n      {createElement(component, {\n        ...restProps,\n        description: value?.description,\n        error,\n        isPlaceholder: !value,\n        layout,\n        media: isImage(valueProp) ? valueProp : value?.media,\n        schemaType,\n        subtitle: value?.subtitle,\n        title: value?.title,\n        value,\n      })}\n    </div>\n  )\n}\n","import {SchemaType} from '@sanity/types'\nimport {Path} from '../types'\n\nexport function getPreviewPaths(preview: SchemaType['preview']): Path[] | undefined {\n  const selection = preview?.select\n\n  if (!selection) return undefined\n\n  return Object.values(selection).map((value) => String(value).split('.'))\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport {PreviewValue} from '@sanity/types'\nimport React from 'react'\n\nexport const INCLUDE_FIELDS_QUERY = ['_id', '_rev', '_type']\nexport const INCLUDE_FIELDS = [...INCLUDE_FIELDS_QUERY, '_key']\n\nexport const AVAILABILITY_READABLE = {\n  available: true,\n  reason: 'READABLE',\n} as const\n\nexport const AVAILABILITY_PERMISSION_DENIED = {\n  available: false,\n  reason: 'PERMISSION_DENIED',\n} as const\n\nexport const AVAILABILITY_NOT_FOUND = {\n  available: false,\n  reason: 'NOT_FOUND',\n} as const\n\nexport const INVALID_PREVIEW_FALLBACK: PreviewValue = {\n  title: 'Invalid preview config',\n  subtitle: 'Check the error log in the console',\n  media: <WarningOutlineIcon />,\n}\n","import {Block, isBlock, isSpan} from '@sanity/types'\n\nexport function isPortableTextArray(blocks: unknown): blocks is Block[] {\n  return Array.isArray(blocks) && (blocks.length === 0 || blocks.some(isBlock))\n}\n\nexport function extractTextFromBlocks(blocks: Block[]): string {\n  const firstBlock = blocks.find(isBlock)\n  if (!firstBlock || !firstBlock.children) {\n    return ''\n  }\n\n  return firstBlock.children\n    .filter(isSpan)\n    .map((span) => span.text)\n    .join('')\n}\n","export function keysOf<T extends object>(value: T) {\n  return Object.keys(value) as (keyof T)[]\n}\n","import {isTitledListValue, PreviewValue, SchemaType, TitledListValue} from '@sanity/types'\nimport {debounce, flatten, get, isPlainObject, pick, uniqBy} from 'lodash'\nimport {INVALID_PREVIEW_FALLBACK} from '../constants'\nimport {isPortableTextArray, extractTextFromBlocks} from '../utils/portableText'\nimport {PrepareViewOptions, PreviewableType} from '../types'\nimport {isRecord} from '../../util/isRecord'\nimport {keysOf} from './keysOf'\n\nconst PRESERVE_KEYS = ['_id', '_type', '_upload', '_createdAt', '_updatedAt']\nconst EMPTY: never[] = []\n\ntype SelectedValue = Record<string, unknown>\n\nexport type PrepareInvocationResult = {\n  selectedValue?: SelectedValue\n  returnValue: null | PreviewValue\n  errors: Error[]\n}\n\nconst errorCollector = (() => {\n  let errorsByType: Record<string, {error: Error; type: SchemaType; value: SelectedValue}[]> = {}\n\n  return {\n    add: (type: SchemaType, value: SelectedValue, error: Error) => {\n      if (!errorsByType[type.name]) {\n        errorsByType[type.name] = []\n      }\n      errorsByType[type.name].push({error: error, type: type, value})\n    },\n    getAll() {\n      return errorsByType\n    },\n    clear() {\n      errorsByType = {}\n    },\n  }\n})()\n\nconst reportErrors = debounce(() => {\n  /* eslint-disable no-console */\n  const errorsByType = errorCollector.getAll()\n  const uniqueErrors = flatten(\n    Object.keys(errorsByType).map((typeName) => {\n      const entries = errorsByType[typeName]\n      return uniqBy(entries, (entry) => entry.error.message)\n    })\n  )\n  const errorCount = uniqueErrors.length\n  if (errorCount === 0) {\n    return\n  }\n\n  console.groupCollapsed(\n    `%cHeads up! Got ${\n      errorCount === 1 ? 'error' : `${errorCount} errors`\n    } while preparing data for preview. Click for details.`,\n    'color: #ff7e7c'\n  )\n\n  Object.keys(errorsByType).forEach((typeName) => {\n    const entries = errorsByType[typeName]\n    const first = entries[0]\n    console.group(`Check the preview config for schema type \"${typeName}\": %o`, first.type.preview)\n    const uniqued = uniqBy(entries, (entry) => entry.error.message)\n    uniqued.forEach((entry) => {\n      if ((entry.error as any).type === 'returnValueError') {\n        const hasPrepare = typeof entry.type.preview?.prepare === 'function'\n        const {value, error} = entry\n        console.log(\n          `Encountered an invalid ${\n            hasPrepare\n              ? 'return value when calling prepare(%o)'\n              : 'value targeted by preview.select'\n          }:`,\n          value\n        )\n        console.error(error)\n      }\n      if ((entry.error as any).type === 'prepareError') {\n        const {value, error} = entry\n        console.log('Encountered an error when calling prepare(%o):', value)\n        console.error(error)\n      }\n    })\n    console.groupEnd()\n  })\n  console.groupEnd()\n  errorCollector.clear()\n  /* eslint-enable no-console */\n}, 1000)\n\nconst isRenderable =\n  (fieldName: string) =>\n  (value: unknown): Error[] => {\n    const type = typeof value\n    if (\n      value === null ||\n      type === 'undefined' ||\n      type === 'string' ||\n      type === 'number' ||\n      type === 'boolean'\n    ) {\n      return EMPTY\n    }\n    return [\n      assignType(\n        'returnValueError',\n        new Error(\n          `The \"${fieldName}\" field should be a string, number, boolean, undefined or null, instead saw ${inspect(\n            value\n          )}`\n        )\n      ),\n    ]\n  }\nconst FIELD_NAME_VALIDATORS: Record<string, (value: unknown) => Error[]> = {\n  media: () => {\n    // not sure how to validate media as it would  possibly involve executing a function and check the\n    // return value\n    return EMPTY\n  },\n  title: isRenderable('title'),\n  subtitle: isRenderable('subtitle'),\n  description: isRenderable('description'),\n  imageUrl: isRenderable('imageUrl'),\n  date: isRenderable('date'),\n}\n\nfunction inspect(val: unknown, prefixType = true): string {\n  if (isRecord(val)) {\n    const keys = Object.keys(val)\n    const ellipse = keys.length > 3 ? '...' : ''\n    const prefix = `object with keys `\n    return `${prefixType ? prefix : ''}{${keys.slice(0, 3).join(', ')}${ellipse}}`\n  }\n  if (Array.isArray(val)) {\n    const ellipse = val.length > 3 ? '...' : ''\n    const prefix = `array with `\n    return `${prefixType ? prefix : ''}[${val.map((v) => inspect(v, false))}${ellipse}]`\n  }\n  return `the ${typeof val} ${val}`\n}\n\nfunction validateFieldValue(fieldName: string, fieldValue: unknown) {\n  if (typeof fieldValue === 'undefined') {\n    return EMPTY\n  }\n  const validator = FIELD_NAME_VALIDATORS[fieldName]\n  return (validator && validator(fieldValue)) || EMPTY\n}\n\nfunction assignType(type: string, error: Error) {\n  return Object.assign(error, {type})\n}\n\nfunction validatePreparedValue(preparedValue: PreviewValue | null) {\n  if (!isPlainObject(preparedValue) || preparedValue === null) {\n    return [\n      assignType(\n        'returnValueError',\n        new Error(\n          `Invalid return value. Expected a plain object with at least a 'title' field, instead saw ${inspect(\n            preparedValue\n          )}`\n        )\n      ),\n    ]\n  }\n\n  return Object.entries(preparedValue).reduce<Error[]>((acc, [fieldName, fieldValue]) => {\n    return [...acc, ...validateFieldValue(fieldName, fieldValue)]\n  }, EMPTY)\n}\n\nfunction validateReturnedPreview(result: PrepareInvocationResult) {\n  return {\n    ...result,\n    errors: [...(result.errors || []), ...validatePreparedValue(result.returnValue)],\n  }\n}\n\nfunction defaultPrepare(value: SelectedValue) {\n  return keysOf(value).reduce((acc: SelectedValue, fieldName: keyof SelectedValue) => {\n    const val = value[fieldName]\n    return {\n      ...acc,\n      [fieldName]: isPortableTextArray(val) ? extractTextFromBlocks(val) : value[fieldName],\n    }\n  }, {})\n}\n\nexport function invokePrepare(\n  type: PreviewableType,\n  value: SelectedValue,\n  viewOptions: PrepareViewOptions = {}\n): PrepareInvocationResult {\n  const prepare = type.preview?.prepare\n  try {\n    return {\n      returnValue: prepare\n        ? (prepare(value, viewOptions) as Record<string, unknown>)\n        : defaultPrepare(value),\n      errors: EMPTY,\n    }\n  } catch (error) {\n    return {\n      returnValue: null,\n      errors: [assignType('prepareError', error)],\n    }\n  }\n}\n\nfunction withErrors(\n  result: {errors: Error[]},\n  type: SchemaType,\n  selectedValue: SelectedValue\n): PreviewValue {\n  result.errors.forEach((error) => errorCollector.add(type, selectedValue, error))\n  reportErrors()\n\n  return INVALID_PREVIEW_FALLBACK\n}\n\ninterface EnumListOptions {\n  list: TitledListValue[] | unknown[]\n}\n\nfunction hasEnumListOptions(\n  type: SchemaType\n): type is SchemaType & {options: SchemaType['options'] & EnumListOptions} {\n  const options = type.options && typeof type.options === 'object' ? type.options : false\n  if (!options || !('list' in options)) {\n    return false\n  }\n\n  const listOptions = (options as EnumListOptions).list\n  return Array.isArray(listOptions)\n}\n\nfunction getListOptions(type: SchemaType): TitledListValue[] | undefined {\n  if (!hasEnumListOptions(type)) {\n    return undefined\n  }\n\n  const listOptions = type.options.list as EnumListOptions['list']\n  return listOptions.map((option) =>\n    isTitledListValue(option) ? option : ({title: option, value: option} as TitledListValue)\n  )\n}\n\nexport function prepareForPreview(\n  rawValue: unknown,\n  type: SchemaType,\n  viewOptions: PrepareViewOptions = {}\n): PreviewValue & {_createdAt?: string; _updatedAt?: string} {\n  const hasCustomPrepare = typeof type.preview?.prepare === 'function'\n  const selection: Record<string, string> = type.preview?.select || {}\n  const targetKeys = Object.keys(selection)\n\n  const selectedValue = targetKeys.reduce<Record<string, unknown>>((acc, key) => {\n    // Find the field the value belongs to\n    const typeWithFields = 'fields' in type ? type : null\n    const targetFieldName = selection[key]\n    const valueField = typeWithFields?.fields?.find((f) => f.name === targetFieldName)\n    const listOptions = valueField && getListOptions(valueField.type)\n\n    // If the user has _not_ specified a `prepare()` function for the preview, and the\n    // field type has an `options.list`, we want to use the title of the selected item\n    // as the preview value. If, however, there _is_ a custom `prepare()`, we leave this\n    // mapping up to the user to perform should they want to. This is both to maintain\n    // backwards compatiblity, but also to allow using the raw value for prepare operations\n    if (!hasCustomPrepare && listOptions) {\n      // Find the selected option that matches the raw value\n      const selectedOption =\n        listOptions && listOptions.find((opt) => opt.value === get(rawValue, selection[key]))\n      acc[key] = selectedOption ? selectedOption.value : get(rawValue, selection[key])\n    } else {\n      acc[key] = get(rawValue, selection[key])\n    }\n\n    return acc\n  }, {})\n\n  const prepareResult = invokePrepare(type, selectedValue, viewOptions)\n  if (prepareResult.errors.length > 0) {\n    return withErrors(prepareResult, type, selectedValue)\n  }\n\n  const returnValueResult = validateReturnedPreview(invokePrepare(type, selectedValue, viewOptions))\n  return returnValueResult.errors.length > 0\n    ? withErrors(returnValueResult, type, selectedValue)\n    : {...pick(rawValue, PRESERVE_KEYS), ...prepareResult.returnValue}\n}\n","import {Observable, of as observableOf, from as observableFrom, isObservable} from 'rxjs'\nimport {map, mergeAll, combineAll, switchMap, scan} from 'rxjs/operators'\nimport {keysOf} from './keysOf'\n\nfunction setKey(source: Record<string, unknown>, key: any, value: unknown) {\n  return {\n    ...source,\n    [key]: value,\n  }\n}\n\ntype Props<K extends keyof any, T> = {\n  [P in K]: T | Observable<T>\n}\n\nexport function props<K extends keyof any, T>(options: {wait?: boolean} = {}) {\n  return (source: Observable<Props<K, T>>) => {\n    return new Observable<Props<K, T>>((observer) => source.subscribe(observer)).pipe(\n      switchMap((object) => {\n        const keyObservables = keysOf(object).map((key) => {\n          const value = object[key]\n          return isObservable(value)\n            ? observableFrom(value).pipe(map((val) => [key, val]))\n            : observableOf([key, value])\n        })\n\n        return options.wait\n          ? observableFrom(keyObservables).pipe(\n              combineAll(),\n              map((pairs) => pairs.reduce((acc, [key, value]) => setKey(acc, key, value), {}))\n            )\n          : observableFrom(keyObservables).pipe(\n              mergeAll(),\n              scan((acc, [key, value]) => setKey(acc, key, value), {})\n            )\n      })\n    )\n  }\n}\n","import {isReference} from '@sanity/types'\nimport {isString, uniq} from 'lodash'\nimport {Observable, of as observableOf} from 'rxjs'\nimport {switchMap} from 'rxjs/operators'\nimport {isRecord} from '../util'\nimport {FieldName, Path, Previewable, ApiConfig} from './types'\nimport {props} from './utils/props'\n\nfunction createEmpty(fields: FieldName[]) {\n  return fields.reduce((result: Record<string, undefined>, field) => {\n    result[field] = undefined\n    return result\n  }, {})\n}\n\nfunction resolveMissingHeads(value: Record<string, unknown>, paths: string[][]) {\n  return paths.filter((path) => !(path[0] in value))\n}\n\ntype ObserveFieldsFn = (\n  id: string,\n  fields: FieldName[],\n  apiConfig?: ApiConfig\n) => Observable<Record<string, unknown> | null>\n\nfunction observePaths(\n  value: Previewable,\n  paths: Path[],\n  observeFields: ObserveFieldsFn,\n  apiConfig?: ApiConfig\n): Observable<Record<string, unknown> | null> {\n  if (!value || typeof value !== 'object') {\n    // Reached a leaf. Return as is\n    return observableOf(value as null) // @todo\n  }\n\n  const id: string | undefined = isReference(value) ? value._ref : value._id\n\n  const currentValue: Record<string, unknown> = {...value, _id: id}\n\n  if (currentValue._type === 'reference') {\n    delete currentValue._type\n    delete currentValue._ref\n    delete currentValue._weak\n    delete currentValue._dataset\n    delete currentValue._projectId\n    delete currentValue._strengthenOnPublish\n  }\n\n  const pathsWithMissingHeads = resolveMissingHeads(currentValue, paths)\n\n  if (id && pathsWithMissingHeads.length > 0) {\n    // Reached a node that is either a document (with _id), or a reference (with _ref) that\n    // needs to be \"materialized\"\n\n    const nextHeads: string[] = uniq(pathsWithMissingHeads.map((path: string[]) => path[0]))\n\n    const dataset = isRecord(value) && isString(value._dataset) ? value._dataset : undefined\n    const projectId = isRecord(value) && isString(value._projectId) ? value._projectId : undefined\n\n    const refApiConfig =\n      // if it's a cross dataset reference we want to use it's `_projectId` + `_dataset`\n      // attributes as api config\n      dataset && projectId ? {projectId: projectId, dataset: dataset} : apiConfig\n\n    return observeFields(id, nextHeads, refApiConfig).pipe(\n      switchMap((snapshot) => {\n        if (snapshot === null) {\n          return observableOf(null)\n        }\n\n        return observePaths(\n          {\n            ...createEmpty(nextHeads),\n            ...(isReference(value) ? {...value, ...refApiConfig} : value),\n            ...snapshot,\n          } as Previewable,\n          paths,\n          observeFields,\n          refApiConfig\n        )\n      })\n    )\n  }\n\n  // We have all the fields needed already present on value\n  const leads: Record<string, string[][]> = {}\n  paths.forEach((path) => {\n    const [head, ...tail] = path\n    if (!leads[head]) {\n      leads[head] = []\n    }\n    leads[head].push(tail)\n  })\n\n  const next = Object.keys(leads).reduce((res: Record<string, unknown>, head) => {\n    const tails = leads[head].filter((tail) => tail.length > 0)\n    if (tails.length === 0) {\n      res[head] = isRecord(value) ? value[head] : undefined\n    } else {\n      res[head] = observePaths((value as any)[head], tails, observeFields, apiConfig)\n    }\n    return res\n  }, currentValue)\n\n  return observableOf(next).pipe(props({wait: true}))\n}\n\n// Normalizes path arguments so it supports both dot-paths and array paths, e.g.\n// - ['propA.propB', 'propA.propC']\n// - [['propA', 'propB'], ['propA', 'propC']]\nfunction normalizePaths(path: (FieldName | Path)[]): Path[] {\n  return path.map((segment: FieldName | Path) =>\n    typeof segment === 'string' ? segment.split('.') : segment\n  )\n}\n\nexport function createPathObserver(context: {observeFields: ObserveFieldsFn}) {\n  const {observeFields} = context\n\n  return {\n    observePaths(\n      value: Previewable,\n      paths: (FieldName | Path)[],\n      apiConfig?: ApiConfig\n    ): Observable<Record<string, unknown> | null> {\n      return observePaths(value, normalizePaths(paths), observeFields, apiConfig)\n    },\n  }\n}\n","import {Observable, of as observableOf} from 'rxjs'\nimport {map, switchMap} from 'rxjs/operators'\nimport {\n  isCrossDatasetReference,\n  isCrossDatasetReferenceSchemaType,\n  isReferenceSchemaType,\n} from '@sanity/types'\nimport {isPlainObject} from 'lodash'\nimport {invokePrepare, prepareForPreview} from './utils/prepareForPreview'\nimport type {ApiConfig, Path, PreparedSnapshot, PrepareViewOptions} from './types'\nimport {getPreviewPaths} from './utils/getPreviewPaths'\nimport {Previewable, PreviewableType} from './types'\n\nexport function isRecord(value: unknown): value is Record<string, unknown> {\n  return isPlainObject(value)\n}\n\nexport function isReference(value: unknown): value is {_ref: string} {\n  return isPlainObject(value)\n}\n\n// Takes a value and its type and prepares a snapshot for it that can be passed to a preview component\nexport function createPreviewObserver(context: {\n  observeDocumentTypeFromId: (id: string, apiConfig?: ApiConfig) => Observable<string | undefined>\n  observePaths: (value: Previewable, paths: Path[], apiConfig?: ApiConfig) => any\n}): (\n  value: Previewable,\n  type: PreviewableType,\n  viewOptions?: PrepareViewOptions,\n  apiConfig?: ApiConfig\n) => Observable<PreparedSnapshot> {\n  const {observeDocumentTypeFromId, observePaths} = context\n\n  return function observeForPreview(\n    value: Previewable,\n    type: PreviewableType,\n    viewOptions?: PrepareViewOptions,\n    apiConfig?: ApiConfig\n  ): Observable<PreparedSnapshot> {\n    if (isCrossDatasetReferenceSchemaType(type)) {\n      // if the value is of type crossDatasetReference, but has no _ref property, we cannot prepare any value for the preview\n      // and the most appropriate thing to do is to return `undefined` for snapshot\n      if (!isCrossDatasetReference(value)) {\n        return observableOf({snapshot: undefined})\n      }\n\n      const refApiConfig = {projectId: value._projectId, dataset: value._dataset}\n\n      return observeDocumentTypeFromId(value._ref, refApiConfig).pipe(\n        switchMap((typeName) => {\n          if (typeName) {\n            const refType = type.to.find((toType) => toType.type === typeName)\n            return observeForPreview(value, refType as any, {}, refApiConfig)\n          }\n          return observableOf({snapshot: undefined})\n        })\n      )\n    }\n    if (isReferenceSchemaType(type)) {\n      // if the value is of type reference, but has no _ref property, we cannot prepare any value for the preview\n      // and the most appropriate thing to do is to return `undefined` for snapshot\n      if (!isReference(value)) {\n        return observableOf({snapshot: undefined})\n      }\n      // Previewing references actually means getting the referenced value,\n      // and preview using the preview config of its type\n      // todo: We need a way of knowing the type of the referenced value by looking at the reference record alone\n      return observeDocumentTypeFromId(value._ref).pipe(\n        switchMap((typeName) => {\n          if (typeName) {\n            const refType = type.to.find((toType) => toType.name === typeName)\n            return observeForPreview(value, refType as any)\n          }\n          // todo: in case we can't read the document type, we can figure out the reason why e.g. whether it's because\n          //  the document doesn't exist or it's not readable due to lack of permission.\n          //  We can use the \"observeDocumentAvailability\" function\n          //  for this, but currently not sure if needed\n          return observableOf({snapshot: undefined})\n        })\n      )\n    }\n    const paths = getPreviewPaths(type.preview)\n    if (paths) {\n      return observePaths(value, paths, apiConfig).pipe(\n        map((snapshot) => ({\n          type: type,\n          snapshot: snapshot && prepareForPreview(snapshot, type as any, viewOptions),\n        }))\n      )\n    }\n\n    // Note: this case is typically rare (or non-existent) and occurs only if\n    // the SchemaType doesn't have a `select` field. The schema compiler\n    // provides a default `preview` implementation for `object`s, `image`s,\n    // `file`s, and `document`s\n    return observableOf({\n      type,\n      snapshot:\n        value && isRecord(value) ? invokePrepare(type, value, viewOptions).returnValue : null,\n    })\n  }\n}\n","import {Observable, Subscriber} from 'rxjs'\nimport {isNonNullable} from '../../util/isNonNullable'\n\ninterface QueueItem {\n  args: any[]\n  observer: Subscriber<any>\n  completed: boolean\n}\n\n// Takes an observable returning function and returns a debounced function that, when called\n// collects its passed arguments until wait time has passed without receiving new calls.\n// When wait period is over, calls the original function with the collected arguments\nexport function debounceCollect<Fn extends (...args: any[]) => Observable<any[]>>(\n  fn: Fn,\n  wait: number\n): Fn extends (collectedArgs: [...infer TArgs][]) => Observable<(infer TReturnValue)[]>\n  ? (...args: TArgs) => Observable<TReturnValue>\n  : never\nexport function debounceCollect(fn: any, wait: number) {\n  let timer: NodeJS.Timeout\n  let queue: Record<number | string, QueueItem | undefined> = {}\n  let idx = 0\n  return function debounced(...args: any[]) {\n    return new Observable((obs) => {\n      clearTimeout(timer)\n      timer = setTimeout(flush, wait)\n      const queueItem: QueueItem = {\n        args: args,\n        observer: obs,\n        completed: false,\n      }\n      const id = idx++\n      queue[id] = queueItem\n      return () => {\n        // console.log('completed', queueItem.args)\n        queueItem.completed = true\n      }\n    })\n  }\n\n  function flush() {\n    const currentlyFlushingQueue = queue\n    queue = {}\n\n    const queueItemIds = Object.keys(currentlyFlushingQueue) // Todo: use debug\n      // .map(id => {\n      //   if (currentlyFlushingQueue[id].completed) {\n      //     console.log('Dropped', currentlyFlushingQueue[id].args)\n      //   }\n      //   return id\n      // })\n      .filter((id) => {\n        const queueItem = currentlyFlushingQueue[id]\n\n        return queueItem && !queueItem.completed\n      })\n\n    if (queueItemIds.length === 0) {\n      // nothing to do\n      return\n    }\n    const collectedArgs = queueItemIds\n      .map((id) => {\n        const queueItem = currentlyFlushingQueue[id]\n\n        return queueItem && queueItem.args\n      })\n      .filter(isNonNullable)\n    fn(collectedArgs).subscribe({\n      next(results: any[]) {\n        results.forEach((result, i) => {\n          const queueItem = currentlyFlushingQueue[queueItemIds[i]]\n          if (queueItem && !queueItem.completed) {\n            queueItem.observer.next(results[i])\n          }\n        })\n      },\n      complete() {\n        queueItemIds.forEach((id) => {\n          const entry = currentlyFlushingQueue[id]\n          if (entry && !entry.completed) {\n            entry.observer.complete()\n          }\n        })\n      },\n      error(err: Error) {\n        queueItemIds.forEach((id) => {\n          const entry = currentlyFlushingQueue[id]\n          if (entry && !entry.completed) {\n            entry.observer.error(err)\n          }\n        })\n      },\n    })\n  }\n}\n","import {identity, sortBy, values} from 'lodash'\nimport {escapeField, fieldNeedsEscape} from '../../util/searchUtils'\nimport {FieldName, Id, Selection} from '../types'\nimport {INCLUDE_FIELDS_QUERY} from '../constants'\n\ntype CombinedSelection = {\n  ids: Id[]\n  fields: FieldName[]\n  map: number[]\n}\n\ntype Doc = {\n  _id: string\n}\n\ntype Result = Doc[]\n\nexport function combineSelections(selections: Selection[]): CombinedSelection[] {\n  return values(\n    selections.reduce((output: {[key: string]: any}, [id, fields], index) => {\n      const key = sortBy(fields.join(','), identity).join('.')\n      if (!output[key]) {\n        output[key] = {fields: fields, ids: [], map: []}\n      }\n      const idx = output[key].ids.length\n      output[key].ids[idx] = id\n      output[key].map[idx] = index\n      return output\n    }, {})\n  )\n}\n\nfunction stringifyId(id: string) {\n  return JSON.stringify(id)\n}\n\nconst maybeEscape = (fieldName: string) =>\n  fieldNeedsEscape(fieldName) ? `\"${fieldName}\": @${escapeField(fieldName)}` : fieldName\n\nfunction toSubQuery({ids, fields}: {ids: string[]; fields: string[]}) {\n  const allFields = [...INCLUDE_FIELDS_QUERY, ...fields]\n  return `*[_id in [${ids.map(stringifyId).join(',')}]][0...${ids.length}]{${allFields\n    .map(maybeEscape)\n    .join(',')}}`\n}\n\nexport function toQuery(combinedSelections: CombinedSelection[]): string {\n  return `[${combinedSelections.map(toSubQuery).join(',')}][0...${combinedSelections.length}]`\n}\n\nexport function reassemble(\n  queryResult: Result[],\n  combinedSelections: CombinedSelection[]\n): (Doc | null)[] {\n  return queryResult.reduce((reprojected: (Doc | null)[], subResult, index) => {\n    const map = combinedSelections[index].map\n    map.forEach((resultIdx, i) => {\n      const id = combinedSelections[index].ids[i]\n      const found = subResult.find((doc) => doc._id === id)\n      reprojected[resultIdx] = found || null\n    })\n    return reprojected\n  }, [])\n}\n","export function hasEqualFields(fields: string[]) {\n  return (object: Record<string, any> | null, otherObject: Record<string, any> | null) => {\n    if (object === otherObject) {\n      return true\n    }\n    if (!object || !otherObject) {\n      return false\n    }\n    if (typeof object !== 'object' || typeof otherObject !== 'object') {\n      return false\n    }\n    return fields.every((field) => object[field] === otherObject[field])\n  }\n}\n","const id = <T>(value: T): T => value\n\ntype ItemSelector<T> = (element: T) => any\n\n// Takes an array and checks if each item is unique,\n// optionally by specifying an itemSelector function that will be called with\n// each item, returning the value to compare for uniqueness\nexport function isUniqueBy<T>(array: Array<T>, itemSelector: ItemSelector<T> = id): boolean {\n  let prevItem\n  let currItem\n  for (let i = 0; i < array.length; i++) {\n    if (i === 0) {\n      prevItem = itemSelector(array[i])\n      continue\n    }\n    currItem = itemSelector(array[i])\n    if (prevItem !== currItem) {\n      return false\n    }\n    prevItem = currItem\n  }\n  return true\n}\n","import {\n  combineLatest,\n  concat,\n  defer,\n  EMPTY,\n  from,\n  fromEvent,\n  merge,\n  Observable,\n  of as observableOf,\n  timer,\n} from 'rxjs'\nimport {\n  distinctUntilChanged,\n  filter,\n  map,\n  mergeMap,\n  publishReplay,\n  refCount,\n  share,\n  startWith,\n  switchMap,\n  tap,\n} from 'rxjs/operators'\nimport {difference, flatten, memoize} from 'lodash'\nimport {SanityClient} from '@sanity/client'\nimport {CrossProjectTokenStore} from '../datastores/crossProjectToken'\nimport {debounceCollect} from './utils/debounceCollect'\nimport {combineSelections, reassemble, toQuery} from './utils/optimizeQuery'\nimport {ApiConfig, FieldName, Id, ObservePathsFn, Path, Selection} from './types'\nimport {INCLUDE_FIELDS} from './constants'\nimport {hasEqualFields} from './utils/hasEqualFields'\nimport {isUniqueBy} from './utils/isUniqueBy'\n\ninterface CrossProjectToken {\n  projectId: string\n  value: string\n}\n\ntype CachedFieldObserver = {\n  id: Id\n  fields: FieldName[]\n  changes$: Observable<any>\n}\n\ntype Cache = {\n  [id: string]: CachedFieldObserver[]\n}\n\nexport function create_preview_observeFields(context: {\n  crossProjectTokenStore: CrossProjectTokenStore\n  observePaths: ObservePathsFn\n  versionedClient: SanityClient\n}) {\n  const {crossProjectTokenStore, observePaths, versionedClient} = context\n\n  let _globalListener: any\n\n  const getGlobalEvents = () => {\n    if (!_globalListener) {\n      const allEvents$ = from(\n        versionedClient.listen(\n          '*[!(_id in path(\"_.**\"))]',\n          {},\n          {\n            events: ['welcome', 'mutation'],\n            includeResult: false,\n            visibility: 'query',\n            tag: 'preview.global',\n          }\n        )\n      ).pipe(share())\n\n      // This is a stream of welcome events from the server, each telling us that we have established listener connection\n      // We map these to snapshot fetch/sync. It is good to wait for the first welcome event before fetching any snapshots as, we may miss\n      // events that happens in the time period after initial fetch and before the listener is established.\n      const welcome$ = allEvents$.pipe(\n        filter((event: any) => event.type === 'welcome'),\n        publishReplay(1),\n        refCount()\n      )\n\n      // This will keep the listener active forever and in turn reduce the number of initial fetches\n      // as less 'welcome' events will be emitted.\n      // @todo: see if we can delay unsubscribing or connect with some globally defined shared listener\n      welcome$.subscribe()\n\n      const mutations$ = allEvents$.pipe(filter((event: any) => event.type === 'mutation'))\n\n      _globalListener = {\n        welcome$,\n        mutations$,\n      }\n    }\n\n    return _globalListener\n  }\n\n  function listen(id: Id) {\n    const globalEvents = getGlobalEvents()\n    return merge(\n      globalEvents.welcome$,\n      globalEvents.mutations$.pipe(filter((event: any) => event.documentId === id))\n    )\n  }\n\n  function fetchAllDocumentPathsWith(client: SanityClient, token?: CrossProjectToken) {\n    const headers = token ? {'sanity-project-tokens': `${token.projectId}=${token.value}`} : {}\n\n    return function fetchAllDocumentPath(selections: Selection[]) {\n      const combinedSelections = combineSelections(selections)\n      return client.observable\n        .fetch(toQuery(combinedSelections), {}, {tag: 'preview.document-paths', headers} as any)\n        .pipe(map((result: any) => reassemble(result, combinedSelections)))\n    }\n  }\n\n  const fetchDocumentPathsFast = debounceCollect(fetchAllDocumentPathsWith(versionedClient), 100)\n  const fetchDocumentPathsSlow = debounceCollect(fetchAllDocumentPathsWith(versionedClient), 1000)\n\n  function currentDatasetListenFields(id: Id, fields: Path[]) {\n    return listen(id).pipe(\n      switchMap((event: any) => {\n        if (event.type === 'welcome' || event.visibility === 'query') {\n          return fetchDocumentPathsFast(id, fields as any).pipe(\n            mergeMap((result) => {\n              return concat(\n                observableOf(result),\n                result === undefined // hack: if we get undefined as result here it can be because the document has\n                  ? // just been created and is not yet indexed. We therefore need to wait a bit\n                    // and then re-fetch.\n                    fetchDocumentPathsSlow(id, fields as any)\n                  : []\n              )\n            })\n          )\n        }\n        return fetchDocumentPathsSlow(id, fields as any)\n      })\n    )\n  }\n\n  // keep for debugging purposes for now\n  // function fetchDocumentPaths(id, selection) {\n  //   return client.observable.fetch(`*[_id==$id]{_id,_type,${selection.join(',')}}`, {id})\n  //     .map(result => result[0])\n  // }\n\n  const CACHE: Cache = {} // todo: use a LRU cache instead (e.g. hashlru or quick-lru)\n\n  const getBatchFetcherForDataset = memoize(\n    function getBatchFetcherForDataset(\n      apiConfig: ApiConfig,\n      token?: CrossProjectToken | undefined\n    ) {\n      const client = versionedClient.withConfig(apiConfig)\n      const fetchAll = fetchAllDocumentPathsWith(client, token)\n      return debounceCollect(fetchAll, 10)\n    },\n    (apiConfig) => apiConfig.dataset + apiConfig.projectId\n  )\n\n  const CROSS_DATASET_PREVIEW_POLL_INTERVAL = 10000\n  // We want to poll for changes in the other dataset, but only when window/tab is visible\n  // This sets up a shared stream that emits an event every `POLL_INTERVAL` milliseconds as long as the\n  // document is visible. It starts emitting immediately (if the page is visible)\n  const visiblePoll$ = fromEvent(document, 'visibilitychange').pipe(\n    startWith(0),\n    map(() => document.visibilityState === 'visible'),\n    switchMap((visible) => (visible ? timer(0, CROSS_DATASET_PREVIEW_POLL_INTERVAL) : EMPTY)),\n    share()\n  )\n\n  function crossDatasetListenFields(id: Id, fields: Path[], apiConfig: ApiConfig) {\n    const token$ = observePaths(\n      {\n        _type: 'reference',\n        _ref: crossProjectTokenStore.getTokenDocumentId({projectId: apiConfig.projectId}),\n      },\n      ['token']\n    ).pipe(map((document) => (document as any)?.token as string | undefined))\n    return combineLatest([token$, visiblePoll$.pipe(startWith(0))]).pipe(\n      switchMap(([token]) => {\n        const batchFetcher = getBatchFetcherForDataset(\n          apiConfig,\n          token\n            ? {\n                projectId: apiConfig.projectId,\n                value: token as any,\n              }\n            : undefined\n        )\n        return batchFetcher(id, fields as any)\n      })\n    )\n  }\n\n  function createCachedFieldObserver<T>(\n    id: any,\n    fields: any,\n    apiConfig: ApiConfig\n  ): CachedFieldObserver {\n    let latest: T | null = null\n    const changes$ = merge<T | null>(\n      defer(() => (latest === null ? EMPTY : observableOf(latest))),\n      (apiConfig\n        ? (crossDatasetListenFields(id, fields, apiConfig) as any)\n        : currentDatasetListenFields(id, fields)) as Observable<T>\n    ).pipe(\n      tap((v: T | null) => (latest = v)),\n      publishReplay(1),\n      refCount()\n    )\n\n    return {id, fields, changes$}\n  }\n\n  function cachedObserveFields(id: Id, fields: FieldName[], apiConfig?: ApiConfig) {\n    const cacheKey = apiConfig\n      ? `${apiConfig.projectId}:${apiConfig.dataset}:${id}`\n      : `$current$-${id}`\n\n    if (!(cacheKey in CACHE)) {\n      CACHE[cacheKey] = []\n    }\n\n    const existingObservers = CACHE[cacheKey]\n    const missingFields = difference(\n      fields,\n      flatten(existingObservers.map((cachedFieldObserver) => cachedFieldObserver.fields))\n    )\n\n    if (missingFields.length > 0) {\n      existingObservers.push(createCachedFieldObserver(id, fields, apiConfig as any))\n    }\n\n    const cachedFieldObservers = existingObservers\n      .filter((observer) => observer.fields.some((fieldName) => fields.includes(fieldName)))\n      .map((cached) => cached.changes$)\n\n    return combineLatest(cachedFieldObservers).pipe(\n      // in the event that a document gets deleted, the cached values will be updated to store `undefined`\n      // if this happens, we should not pick any fields from it, but rather just return null\n      map((snapshots) => snapshots.filter(Boolean)), // make sure all snapshots agree on same revision\n      filter((snapshots) => isUniqueBy(snapshots, (snapshot) => snapshot._rev)), // pass on value with the requested fields (or null if value is deleted)\n      map((snapshots) => (snapshots.length === 0 ? null : pickFrom(snapshots, fields))), // emit values only if changed\n      distinctUntilChanged(hasEqualFields(fields))\n    )\n  }\n\n  // API\n  return {observeFields: cachedObserveFields}\n\n  function pickFrom(objects: Record<string, any>[], fields: string[]) {\n    return [...INCLUDE_FIELDS, ...fields].reduce((result, fieldName) => {\n      const value = getFirstFieldValue(objects, fieldName)\n      if (value !== undefined) {\n        ;(result as any)[fieldName] = value\n      }\n      return result\n    }, {})\n  }\n\n  function getFirstFieldValue(objects: Record<string, any>[], fieldName: string) {\n    let value\n    objects.some((object) => {\n      if (fieldName in object) {\n        value = object[fieldName]\n        return true\n      }\n      return false\n    })\n    return value\n  }\n}\n","/* eslint-disable max-nested-callbacks */\n\nimport type {SanityClient} from '@sanity/client'\nimport {combineLatest, defer, from, Observable, of} from 'rxjs'\nimport {distinctUntilChanged, map, mergeMap, switchMap} from 'rxjs/operators'\nimport shallowEquals from 'shallow-equals'\nimport {flatten, keyBy} from 'lodash'\nimport {isRecord} from '../util/isRecord'\nimport {getDraftId, getPublishedId} from '../util/draftUtils'\nimport type {\n  AvailabilityResponse,\n  DocumentAvailability,\n  DraftsModelDocumentAvailability,\n  Previewable,\n} from './types'\nimport {debounceCollect} from './utils/debounceCollect'\nimport {\n  AVAILABILITY_NOT_FOUND,\n  AVAILABILITY_PERMISSION_DENIED,\n  AVAILABILITY_READABLE,\n} from './constants'\nimport {ObservePathsFn} from './types'\n\nconst MAX_DOCUMENT_ID_CHUNK_SIZE = 11164\n\n/**\n * Takes an array of document IDs and puts them into individual chunks.\n * Because document IDs can vary greatly in size, we want to chunk by the length of the\n * combined comma-separated ID set. We try to stay within 11164 bytes - this is about the\n * same length the Sanity client uses for max query size, and accounts for rather large\n * headers to be present - so this _should_ be safe.\n *\n * @param documentIds - Unique document IDs to chunk\n * @returns Array of document ID chunks\n */\nfunction chunkDocumentIds(documentIds: string[]): string[][] {\n  let chunk: string[] = []\n  let chunkSize = 0\n\n  const chunks: string[][] = []\n\n  for (const documentId of documentIds) {\n    // Reached the max length? start a new chunk\n    if (chunkSize + documentId.length + 1 >= MAX_DOCUMENT_ID_CHUNK_SIZE) {\n      chunks.push(chunk)\n      chunk = []\n      chunkSize = 0\n    }\n\n    chunkSize += documentId.length + 1 // +1 is to account for a comma between IDs\n    chunk.push(documentId)\n  }\n\n  if (!chunks.includes(chunk)) {\n    chunks.push(chunk)\n  }\n\n  return chunks\n}\n\nexport function create_preview_availability(\n  versionedClient: SanityClient,\n  observePaths: ObservePathsFn\n): {\n  observeDocumentPairAvailability(value: Previewable): Observable<DraftsModelDocumentAvailability>\n} {\n  /**\n   * Returns an observable of metadata for a given drafts model document\n   */\n  function observeDocumentPairAvailability(\n    value: Previewable\n  ): Observable<DraftsModelDocumentAvailability> {\n    const draftId = getDraftId('_id' in value ? value._id : value._ref)\n    const publishedId = getPublishedId('_id' in value ? value._id : value._ref)\n    return combineLatest([\n      observeDocumentAvailability({_type: 'reference', _ref: draftId}),\n      observeDocumentAvailability({_type: 'reference', _ref: publishedId}),\n    ]).pipe(\n      distinctUntilChanged(shallowEquals),\n      map(([draftReadability, publishedReadability]) => {\n        return {\n          draft: draftReadability,\n          published: publishedReadability,\n        }\n      })\n    )\n  }\n\n  /**\n   * Observable of metadata for the document with the given id\n   * If we can't read a document it is either because it's not readable or because it doesn't exist\n   *\n   * @internal\n   */\n  function observeDocumentAvailability(value: Previewable): Observable<DocumentAvailability> {\n    const id = '_id' in value ? value._id : value._ref\n\n    // check for existence\n    return observePaths(value, [['_rev']]).pipe(\n      map((res) => isRecord(res) && Boolean('_rev' in res && res?._rev)),\n      distinctUntilChanged(),\n      switchMap((hasRev) => {\n        return hasRev\n          ? // short circuit: if we can read the _rev field we know it both exists and is readable\n            of(AVAILABILITY_READABLE)\n          : // we can't read the _rev field for two possible reasons: 1) the document isn't readable or 2) the document doesn't exist\n            fetchDocumentReadability(id)\n      })\n    )\n  }\n\n  const fetchDocumentReadability = debounceCollect(function fetchDocumentReadability(\n    args: string[][]\n  ): Observable<DocumentAvailability[]> {\n    const uniqueIds = [...new Set(flatten(args))]\n    return from(chunkDocumentIds(uniqueIds)).pipe(\n      mergeMap(fetchDocumentReadabilityChunked, 10),\n      map((res) => args.map(([id]) => res[uniqueIds.indexOf(id)]))\n    )\n  },\n  1)\n\n  function fetchDocumentReadabilityChunked(ids: string[]): Observable<DocumentAvailability[]> {\n    return defer(() => {\n      const requestOptions = {\n        uri: versionedClient.getDataUrl('doc', ids.join(',')),\n        json: true,\n        query: {excludeContent: 'true'},\n        tag: 'preview.documents-availability',\n      }\n      return versionedClient.observable.request<AvailabilityResponse>(requestOptions).pipe(\n        map((response) => {\n          const omitted = keyBy(response.omitted || [], (entry) => entry.id)\n          return ids.map((id) => {\n            const omittedEntry = omitted[id]\n            if (!omittedEntry) {\n              // it's not omitted, so it exists and is readable\n              return AVAILABILITY_READABLE\n            }\n            if (omittedEntry.reason === 'existence') {\n              return AVAILABILITY_NOT_FOUND\n            }\n            if (omittedEntry.reason === 'permission') {\n              // it's not omitted, so it exists and is readable\n              return AVAILABILITY_PERMISSION_DENIED\n            }\n            throw new Error(`Unexpected reason for omission: \"${omittedEntry.reason}\"`)\n          })\n        })\n      )\n    })\n  }\n\n  return {observeDocumentPairAvailability}\n}\n","import {SanityClient} from '@sanity/client'\nimport {combineLatest, Observable, of} from 'rxjs'\nimport {map, switchMap} from 'rxjs/operators'\nimport {SanityDocument} from '@sanity/types'\nimport {getIdPair} from '../util/draftUtils'\nimport {isRecord} from '../util/isRecord'\nimport {DraftsModelDocument, ObservePathsFn, Path, Previewable} from './types'\nimport {create_preview_availability} from './availability'\n\nexport function create_preview_documentPair(\n  versionedClient: SanityClient,\n  observePaths: ObservePathsFn\n): {\n  observePathsDocumentPair: <T extends SanityDocument = SanityDocument>(\n    value: Previewable,\n    paths: Path[]\n  ) => Observable<DraftsModelDocument<T>>\n} {\n  const {observeDocumentPairAvailability} = create_preview_availability(\n    versionedClient,\n    observePaths\n  )\n\n  const ALWAYS_INCLUDED_SNAPSHOT_PATHS: Path[] = [['_updatedAt'], ['_createdAt'], ['_type']]\n\n  return {observePathsDocumentPair}\n\n  function observePathsDocumentPair<T extends SanityDocument = SanityDocument>(\n    value: Previewable,\n    paths: Path[]\n  ): Observable<DraftsModelDocument<T>> {\n    const {draftId, publishedId} = getIdPair('_id' in value ? value._id : value._ref)\n\n    return observeDocumentPairAvailability(value).pipe(\n      switchMap((availability) => {\n        if (!availability.draft.available && !availability.published.available) {\n          // short circuit, neither draft nor published is available so no point in trying to get a snapshot\n          return of({\n            id: publishedId,\n            type: null,\n            draft: {\n              availability: availability.draft,\n              snapshot: undefined,\n            },\n            published: {\n              availability: availability.published,\n              snapshot: undefined,\n            },\n          })\n        }\n\n        const snapshotPaths = [...paths, ...ALWAYS_INCLUDED_SNAPSHOT_PATHS]\n\n        return combineLatest([\n          observePaths({_type: 'reference', _ref: draftId}, snapshotPaths),\n          observePaths({_type: 'reference', _ref: publishedId}, snapshotPaths),\n        ]).pipe(\n          map(([draftSnapshot, publishedSnapshot]) => {\n            // note: assume type is always the same\n            const type =\n              (isRecord(draftSnapshot) && '_type' in draftSnapshot && draftSnapshot._type) ||\n              (isRecord(publishedSnapshot) &&\n                '_type' in publishedSnapshot &&\n                publishedSnapshot._type) ||\n              null\n\n            return {\n              id: publishedId,\n              type: typeof type === 'string' ? type : null,\n              draft: {\n                availability: availability.draft,\n                snapshot: draftSnapshot as T,\n              },\n              published: {\n                availability: availability.published,\n                snapshot: publishedSnapshot as T,\n              },\n            }\n          })\n        )\n      })\n    )\n  }\n}\n","import {Observable} from 'rxjs'\nimport {distinctUntilChanged, map} from 'rxjs/operators'\nimport {SanityClient} from '@sanity/client'\nimport {PrepareViewOptions, SanityDocument} from '@sanity/types'\nimport {isRecord} from '../util'\nimport {CrossProjectTokenStore} from '../datastores'\nimport {createPathObserver} from './createPathObserver'\nimport {createPreviewObserver} from './createPreviewObserver'\nimport {create_preview_observeFields} from './observeFields'\nimport {\n  ApiConfig,\n  DraftsModelDocument,\n  DraftsModelDocumentAvailability,\n  ObservePathsFn,\n  Path,\n  PreparedSnapshot,\n  Previewable,\n  PreviewableType,\n} from './types'\nimport {create_preview_availability} from './availability'\nimport {create_preview_documentPair} from './documentPair'\n\nexport type ObserveForPreviewFn = (\n  value: Previewable,\n  type: PreviewableType,\n  viewOptions?: PrepareViewOptions,\n  apiConfig?: ApiConfig\n) => Observable<PreparedSnapshot>\n\nexport interface DocumentPreviewStore {\n  observePaths: ObservePathsFn\n  observeForPreview: ObserveForPreviewFn\n  observeDocumentTypeFromId: (id: string, apiConfig?: ApiConfig) => Observable<string | undefined>\n\n  /**\n   * @beta\n   */\n  unstable_observeDocumentPairAvailability: (\n    id: Previewable\n  ) => Observable<DraftsModelDocumentAvailability>\n\n  unstable_observePathsDocumentPair: <T extends SanityDocument = SanityDocument>(\n    id: Previewable,\n    paths: Path[]\n  ) => Observable<DraftsModelDocument<T>>\n}\n\ninterface DocumentPreviewStoreOptions {\n  crossProjectTokenStore: CrossProjectTokenStore\n  client: SanityClient\n}\n\nexport function createDocumentPreviewStore({\n  crossProjectTokenStore,\n  client,\n}: DocumentPreviewStoreOptions): DocumentPreviewStore {\n  const versionedClient = client.withConfig({apiVersion: '1'})\n\n  // NOTE: this is workaroudn for circumventing a circular dependency between `observePaths` and\n  // `observeFields`.\n  // eslint-disable-next-line camelcase\n  const __proxy_observePaths: ObservePathsFn = (value, paths, apiConfig) => {\n    return observePaths(value, paths, apiConfig)\n  }\n\n  const {observeFields} = create_preview_observeFields({\n    crossProjectTokenStore,\n    observePaths: __proxy_observePaths,\n    versionedClient,\n  })\n\n  const {observePaths} = createPathObserver({observeFields})\n\n  function observeDocumentTypeFromId(\n    id: string,\n    apiConfig?: ApiConfig\n  ): Observable<string | undefined> {\n    return observePaths({_type: 'reference', _ref: id}, ['_type']).pipe(\n      map((res) => (isRecord(res) && typeof res._type === 'string' ? res._type : undefined)),\n      distinctUntilChanged()\n    )\n  }\n\n  // const {createPreviewObserver} = create_preview_createPreviewObserver(observeDocumentTypeFromId)\n  const observeForPreview = createPreviewObserver({observeDocumentTypeFromId, observePaths})\n  const {observeDocumentPairAvailability} = create_preview_availability(\n    versionedClient,\n    observePaths\n  )\n  const {observePathsDocumentPair} = create_preview_documentPair(versionedClient, observePaths)\n\n  // @todo: explain why the API is like this now, and that it should not be like this in the future!\n  return {\n    observePaths,\n    observeForPreview,\n    observeDocumentTypeFromId,\n\n    // eslint-disable-next-line camelcase\n    unstable_observeDocumentPairAvailability: observeDocumentPairAvailability,\n    unstable_observePathsDocumentPair: observePathsDocumentPair,\n  }\n}\n","import React, {forwardRef, useMemo} from 'react'\nimport {Inline, Label, ResponsivePaddingProps} from '@sanity/ui'\nimport {PreviewCard} from '../../../../components/PreviewCard'\nimport {useSchema} from '../../../../hooks'\nimport {DocumentPreviewPresence} from '../../../../presence'\nimport {IntentLink} from '../../../../router'\nimport {SanityPreview} from '../../../../preview'\nimport {useDocumentPresence} from '../../../../datastores'\nimport {getPublishedId} from '../../../../util'\n\ninterface SearchItemProps extends ResponsivePaddingProps {\n  onClick?: () => void\n  documentId: string\n  documentType: string\n}\n\nexport function SearchItem(props: SearchItemProps) {\n  const {documentId, documentType, onClick, ...restProps} = props\n  const documentPresence = useDocumentPresence(documentId)\n  const schema = useSchema()\n  const schemaType = schema.get(documentType)\n  const params = useMemo(\n    () => ({id: getPublishedId(documentId), type: documentType}),\n    [documentId, documentType]\n  )\n  const previewValue = useMemo(\n    () => ({_id: documentId, _type: documentType}),\n    [documentId, documentType]\n  )\n\n  const LinkComponent = useMemo(\n    () =>\n      // eslint-disable-next-line @typescript-eslint/no-shadow\n      forwardRef(function LinkComponent(linkProps, ref: React.ForwardedRef<HTMLAnchorElement>) {\n        return <IntentLink {...linkProps} intent=\"edit\" params={params} tabIndex={-1} ref={ref} />\n      }),\n    [params]\n  )\n\n  if (!schemaType) return null\n\n  return (\n    <PreviewCard data-as=\"a\" as={LinkComponent} onClick={onClick} {...restProps} radius={2}>\n      <SanityPreview\n        layout=\"default\"\n        schemaType={schemaType}\n        status={\n          <Inline space={3}>\n            {documentPresence && documentPresence.length > 0 && (\n              <DocumentPreviewPresence presence={documentPresence} />\n            )}\n\n            <Label size={0} muted>\n              {documentType || 'NONE'}\n            </Label>\n          </Inline>\n        }\n        value={previewValue}\n      />\n    </PreviewCard>\n  )\n}\n","import {Popover, PopoverProps} from '@sanity/ui'\nimport React, {forwardRef} from 'react'\nimport styled from 'styled-components'\nimport {useColorScheme} from '../../../colorScheme'\n\nconst ResultsPopover = styled(Popover)`\n  & > div {\n    min-height: 43px;\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n\n  &[data-popper-reference-hidden='true'] {\n    display: none;\n  }\n`\n\nexport const SearchPopoverContent = forwardRef(function SearchPopoverContent(\n  props: PopoverProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {scheme} = useColorScheme()\n\n  return (\n    <ResultsPopover\n      arrow={false}\n      constrainSize\n      matchReferenceWidth\n      placement=\"bottom\"\n      portal\n      radius={2}\n      ref={ref}\n      scheme={scheme}\n      {...props}\n    />\n  )\n})\n","import React, {useCallback, useMemo, useState} from 'react'\nimport {Text, Flex, Autocomplete, Box, PortalProvider} from '@sanity/ui'\nimport {SearchIcon} from '@sanity/icons'\nimport styled from 'styled-components'\nimport {useDocumentSearchResults} from '../../../../search'\nimport {getPublishedId} from '../../../../util'\nimport {SearchFullscreenContent} from './SearchFullscreenContent'\nimport {SearchItem} from './SearchItem'\nimport {SearchPopoverContent} from './SearchPopoverContent'\n\nconst StyledText = styled(Text)`\n  word-break: break-word;\n`\n\nconst filterOption = () => true\n\ninterface SearchFieldProps {\n  fullScreen: boolean\n  onSearchItemClick: () => void\n  portalElement: HTMLElement | null\n  setSearchInputElement: (el: HTMLInputElement | null) => void\n  relatedElements?: HTMLElement[]\n}\n\nexport function SearchField(props: SearchFieldProps) {\n  const {fullScreen, onSearchItemClick, portalElement, relatedElements, setSearchInputElement} =\n    props\n  const [query, setQuery] = useState<string | null>(null)\n\n  const results = useDocumentSearchResults({\n    includeDrafts: true,\n    query: query || '',\n  })\n\n  const handleClickItem = useCallback(() => {\n    if (fullScreen && onSearchItemClick) {\n      onSearchItemClick()\n    }\n  }, [fullScreen, onSearchItemClick])\n\n  const renderOption = useCallback(\n    (option) => {\n      const {data} = option.payload\n      const documentId = data.hit._id\n      const documentType = data.hit._type\n\n      return (\n        <SearchItem\n          key={documentId}\n          onClick={handleClickItem}\n          padding={2}\n          documentId={documentId}\n          documentType={documentType}\n        />\n      )\n    },\n    [handleClickItem]\n  )\n\n  const renderPopoverFullscreen = useCallback(\n    (popoverProps, ref) => {\n      if (!popoverProps.hidden && results.error) {\n        return (\n          <SearchFullscreenContent tone=\"critical\">\n            <Flex\n              align=\"center\"\n              flex={1}\n              height=\"fill\"\n              justify=\"center\"\n              padding={4}\n              sizing=\"border\"\n            >\n              <StyledText align=\"center\" muted>\n                {results?.error?.message || 'Something went wrong while searching'}\n              </StyledText>\n            </Flex>\n          </SearchFullscreenContent>\n        )\n      }\n\n      if (!popoverProps.hidden && query && !results.loading && results.value.length === 0) {\n        return (\n          <SearchFullscreenContent>\n            <Flex\n              align=\"center\"\n              flex={1}\n              height=\"fill\"\n              justify=\"center\"\n              padding={4}\n              sizing=\"border\"\n            >\n              <StyledText align=\"center\" muted>\n                No results for <strong>â€˜{query}â€™</strong>\n              </StyledText>\n            </Flex>\n          </SearchFullscreenContent>\n        )\n      }\n\n      if (!popoverProps.hidden && results.value.length > 0) {\n        return (\n          <SearchFullscreenContent hidden={popoverProps.hidden} ref={ref}>\n            {popoverProps.content}\n          </SearchFullscreenContent>\n        )\n      }\n\n      return undefined\n    },\n    [query, results]\n  )\n\n  const renderPopover = useCallback(\n    (popoverProps, ref) => {\n      if (!popoverProps.hidden && results.error) {\n        return (\n          <SearchPopoverContent\n            content={\n              <Box padding={4}>\n                <Flex align=\"center\" height=\"fill\" justify=\"center\">\n                  <StyledText align=\"center\" muted>\n                    {results?.error?.message || 'Something went wrong while searching'}\n                  </StyledText>\n                </Flex>\n              </Box>\n            }\n            open={!popoverProps.hidden}\n            ref={ref}\n            referenceElement={popoverProps.inputElement}\n          />\n        )\n      }\n\n      if (!popoverProps.hidden && query && !results.loading && results.value.length === 0) {\n        return (\n          <SearchPopoverContent\n            content={\n              <Box padding={4}>\n                <Flex align=\"center\" height=\"fill\" justify=\"center\">\n                  <StyledText align=\"center\" muted>\n                    No results for <strong>â€œ{query}â€</strong>\n                  </StyledText>\n                </Flex>\n              </Box>\n            }\n            open={!popoverProps.hidden}\n            ref={ref}\n            referenceElement={popoverProps.inputElement}\n          />\n        )\n      }\n\n      if (!popoverProps.hidden && results.value.length > 0) {\n        return (\n          <SearchPopoverContent\n            content={popoverProps.content}\n            open={!popoverProps.hidden}\n            ref={ref}\n            referenceElement={popoverProps.inputElement}\n          />\n        )\n      }\n\n      return undefined\n    },\n    [query, results]\n  )\n\n  const autoComplete = useMemo(\n    () => (\n      <Autocomplete\n        filterOption={filterOption}\n        icon={SearchIcon}\n        id=\"studio-search\"\n        key=\"studio-search\"\n        listBox={{padding: fullScreen ? 2 : 1}}\n        loading={results.loading}\n        onQueryChange={setQuery}\n        options={results.value.map((hit) => {\n          return {\n            value: hit.hit._id,\n            payload: {\n              data: hit,\n            },\n          }\n        })}\n        placeholder=\"Search\"\n        radius={2}\n        ref={setSearchInputElement}\n        relatedElements={relatedElements}\n        renderOption={renderOption}\n        renderPopover={fullScreen ? renderPopoverFullscreen : renderPopover}\n      />\n    ),\n    [\n      fullScreen,\n      relatedElements,\n      renderOption,\n      renderPopover,\n      renderPopoverFullscreen,\n      results.loading,\n      results.value,\n      setSearchInputElement,\n    ]\n  )\n\n  return <PortalProvider element={fullScreen ? portalElement : null}>{autoComplete}</PortalProvider>\n}\n","import {css} from 'styled-components'\n\nexport const listStyles = css`\n  --margin-top: ${({theme}) => theme.sanity.space[1]}px;\n\n  &:not([data-list-type='number']) {\n    counter-reset: section;\n  }\n\n  &[data-list-type='bullet'] {\n    --bullet-marker: 'â—';\n    margin-top: var(--margin-top);\n\n    [data-list-type='bullet'] {\n      --bullet-marker: 'â—‹';\n      margin-top: var(--margin-top);\n\n      [data-list-type='bullet'] {\n        --bullet-marker: 'â– ';\n        margin-top: var(--margin-top);\n\n        [data-list-type='bullet'] {\n          --bullet-marker: 'â—';\n          margin-top: var(--margin-top);\n\n          [data-list-type='bullet'] {\n            --bullet-marker: 'â—‹';\n            margin-top: var(--margin-top);\n\n            [data-list-type='bullet'] {\n              --bullet-marker: 'â– ';\n              margin-top: var(--margin-top);\n\n              [data-list-type='bullet'] {\n                --bullet-marker: 'â—';\n                margin-top: var(--margin-top);\n\n                [data-list-type='bullet'] {\n                  --bullet-marker: 'â—‹';\n                  margin-top: var(--margin-top);\n\n                  [data-list-type='bullet'] {\n                    --bullet-marker: 'â– ';\n                    margin-top: var(--margin-top);\n\n                    [data-list-type='bullet'] {\n                      --bullet-marker: 'â—';\n                      margin-top: var(--margin-top);\n\n                      [data-list-type='bullet'] {\n                        --bullet-marker: 'â—‹';\n                        margin-top: var(--margin-top);\n\n                        [data-list-type='bullet'] {\n                          --bullet-marker: 'â– ';\n                          margin-top: var(--margin-top);\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  &[data-list-type='number'] {\n    --bullet-marker: counter(section, number) '. ';\n    counter-reset: section;\n    margin-top: var(--margin-top);\n\n    [data-list-type='number'] {\n      --bullet-marker: counter(section, lower-alpha) '. ';\n      counter-reset: section;\n      margin-top: var(--margin-top);\n\n      [data-list-type='number'] {\n        --bullet-marker: counter(section, lower-roman) '. ';\n        counter-reset: section;\n        margin-top: var(--margin-top);\n\n        [data-list-type='number'] {\n          --bullet-marker: counter(section, number) '. ';\n          counter-reset: section;\n          margin-top: var(--margin-top);\n\n          [data-list-type='number'] {\n            --bullet-marker: counter(section, lower-alpha) '. ';\n            counter-reset: section;\n            margin-top: var(--margin-top);\n\n            [data-list-type='number'] {\n              --bullet-marker: counter(section, lower-roman) '. ';\n              counter-reset: section;\n              margin-top: var(--margin-top);\n\n              [data-list-type='number'] {\n                --bullet-marker: counter(section, number) '. ';\n                counter-reset: section;\n                margin-top: var(--margin-top);\n\n                [data-list-type='number'] {\n                  --bullet-marker: counter(section, lower-alpha) '. ';\n                  counter-reset: section;\n                  margin-top: var(--margin-top);\n\n                  [data-list-type='number'] {\n                    --bullet-marker: counter(section, lower-roman) '. ';\n                    counter-reset: section;\n                    margin-top: var(--margin-top);\n\n                    [data-list-type='number'] {\n                      --bullet-marker: counter(section, number) '. ';\n                      counter-reset: section;\n                      margin-top: var(--margin-top);\n\n                      [data-list-type='number'] {\n                        --bullet-marker: counter(section, lower-alpha) '. ';\n                        counter-reset: section;\n                        margin-top: var(--margin-top);\n\n                        [data-list-type='number'] {\n                          --bullet-marker: counter(section, lower-roman) '. ';\n                          counter-reset: section;\n                          margin-top: var(--margin-top);\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`\n","import {Box, Card} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {listStyles} from './listStyles'\n\nexport const SpaceBox = styled(Box)`\n  ${listStyles};\n`\n\nexport const RootBox = styled(Box)`\n  ${SpaceBox}:first-child {\n    &:not([data-list-type='number'], [data-list-type='bullet']) {\n      margin-top: 0;\n    }\n  }\n\n  ${SpaceBox}:last-child {\n    margin-bottom: 0;\n  }\n`\n\nexport const ListBoxOuter = styled(Box)`\n  line-height: 1;\n`\n\nexport const ListBox = styled(Box)(() => {\n  return css`\n    &:not([hidden]) {\n      position: relative;\n      padding-left: 2rem;\n      display: inline-flex;\n    }\n\n    & > [data-list-prefix] {\n      position: absolute;\n      width: 3rem;\n      left: -2rem;\n      text-align: right;\n\n      &[data-list-prefix='bullet'] {\n        top: -0.1875em;\n\n        & > span:before {\n          content: var(--bullet-marker);\n          font-size: 0.46666em;\n        }\n      }\n\n      &[data-list-prefix='number'] {\n        counter-increment: section;\n\n        & > span:before {\n          font-size: 1em;\n          content: var(--bullet-marker);\n        }\n      }\n    }\n  `\n})\n\nexport const ImageCard = styled(Card)<{$aspectRatio: number; $lqip?: string}>`\n  position: relative;\n  padding-bottom: ${({$aspectRatio}) => $aspectRatio}%;\n  background-image: ${({$lqip}) => `url(${$lqip})`};\n  background-size: cover;\n\n  img {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n  }\n`\n","import React from 'react'\nimport {PortableText, PortableTextComponents} from '@portabletext/react'\nimport {Box, Card, Code, Heading, Stack, Text} from '@sanity/ui'\nimport urlBuilder from '@sanity/image-url'\nimport {getProject} from '@sanity/asset-utils'\nimport {StudioBlockContent, MaterializedImage, CodeBlock} from '../../../../../module-status'\nimport {ImageCard, ListBox, ListBoxOuter, RootBox, SpaceBox} from './PortableTextContent.styles'\n\ninterface PortableTextContentProps {\n  value: StudioBlockContent[]\n}\n\nfunction Image({value}: {value: MaterializedImage}) {\n  if (!value?.asset) {\n    return null\n  }\n\n  const project = getProject(value.asset)\n  const url = urlBuilder(project).image(value).fit('max').auto('format').url()\n\n  const {asset, alt, caption} = value\n  const {dimensions, lqip} = asset?.metadata || {}\n  const aspectRatio = (dimensions.height / dimensions.width) * 100\n\n  return (\n    <SpaceBox marginY={4}>\n      <Stack space={3} as=\"figure\">\n        <ImageCard radius={1} shadow={1} overflow=\"hidden\" $aspectRatio={aspectRatio} $lqip={lqip}>\n          <img src={url} alt={alt || caption} referrerPolicy=\"strict-origin-when-cross-origin\" />\n        </ImageCard>\n        {caption && (\n          <Text align=\"center\" as=\"figcaption\" muted size={1}>\n            {value.caption}\n          </Text>\n        )}\n      </Stack>\n    </SpaceBox>\n  )\n}\n\nconst components: PortableTextComponents = {\n  types: {\n    image: ({value}) => <Image value={value} />,\n    code: ({value}: {value: CodeBlock}) => (\n      <SpaceBox marginY={4}>\n        <Card padding={3} tone=\"transparent\" radius={1} overflow=\"auto\">\n          <Code size={1} language={value?.language}>\n            {value?.code}\n          </Code>\n        </Card>\n      </SpaceBox>\n    ),\n  },\n  block: {\n    h1: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={5}>{children}</Heading>\n      </SpaceBox>\n    ),\n    h2: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={4}>{children}</Heading>\n      </SpaceBox>\n    ),\n    h3: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={3}>{children}</Heading>\n      </SpaceBox>\n    ),\n    h4: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={2}>{children}</Heading>\n      </SpaceBox>\n    ),\n    h5: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={1}>{children}</Heading>\n      </SpaceBox>\n    ),\n    h6: ({children}) => (\n      <SpaceBox marginBottom={4} marginTop={5}>\n        <Heading size={0}>{children}</Heading>\n      </SpaceBox>\n    ),\n    normal: ({children}) => (\n      <SpaceBox marginY={4}>\n        <Text as=\"p\" muted size={1}>\n          {children}\n        </Text>\n      </SpaceBox>\n    ),\n  },\n  list: {\n    bullet: ({children}) => (\n      <SpaceBox data-list-type=\"bullet\" marginBottom={4}>\n        <Box as=\"ul\">{children}</Box>\n      </SpaceBox>\n    ),\n    number: ({children}) => (\n      <SpaceBox data-list-type=\"number\" marginBottom={4}>\n        <Box as=\"ol\">{children}</Box>\n      </SpaceBox>\n    ),\n  },\n  listItem: {\n    bullet: ({children}) => (\n      <ListBoxOuter marginBottom={1} forwardedAs=\"li\">\n        <ListBox>\n          <Text muted size={1} data-list-prefix=\"bullet\" />\n          <Text muted size={1}>\n            {children}\n          </Text>\n        </ListBox>\n      </ListBoxOuter>\n    ),\n    number: ({children}) => (\n      <ListBoxOuter marginBottom={1} forwardedAs=\"li\">\n        <ListBox>\n          <Text muted data-list-prefix=\"number\" size={1} />\n          <Text muted size={1}>\n            {children}\n          </Text>\n        </ListBox>\n      </ListBoxOuter>\n    ),\n  },\n}\n\nexport function PortableTextContent(props: PortableTextContentProps) {\n  const {value} = props\n\n  return (\n    <RootBox>\n      <PortableText value={value} components={components} />\n    </RootBox>\n  )\n}\n","import {Card, Stack, Label, Heading} from '@sanity/ui'\nimport React from 'react'\nimport type {ChangelogItem as ChangeItem} from '../../../../module-status'\nimport {PortableTextContent} from './portableTextContent'\n\nconst LABELS: Record<'bugfix' | 'feature', string> = {\n  bugfix: 'Bugfixes',\n  feature: 'Feature',\n}\n\nexport function ChangelogItem(props: ChangeItem) {\n  const {changeType, description, title} = props\n  const label = LABELS[changeType]\n\n  return (\n    <Card padding={4} shadow={1} radius={2}>\n      <Stack space={title ? 4 : 3}>\n        {label && <Label size={1}>{label}</Label>}\n\n        <Stack space={3}>\n          {title && <Heading size={1}>{title}</Heading>}\n\n          {description && <PortableTextContent value={description} />}\n        </Stack>\n      </Stack>\n    </Card>\n  )\n}\n","import {Stack, Flex, Heading, Badge, Text} from '@sanity/ui'\nimport React from 'react'\nimport type {ChangelogItem as ChangeItem} from '../../../../module-status'\nimport {ChangelogItem} from './ChangelogItem'\n\ninterface ChangelogListProps {\n  changeItems: ChangeItem[]\n  isLatest: boolean\n  version: string\n}\n\nexport function ChangelogList(props: ChangelogListProps) {\n  const {changeItems, isLatest, version} = props\n\n  const features = changeItems.filter((c) => c.changeType === 'feature')\n  const bugfixes = changeItems.filter((c) => c.changeType === 'bugfix')\n  const bugFixesDescription = bugfixes.map(({description}) => description).flat()\n\n  return (\n    <Stack space={4}>\n      <Flex align=\"center\" gap={2}>\n        <Heading size={1}>v{version}</Heading>\n\n        {isLatest && <Badge tone=\"positive\">Latest</Badge>}\n      </Flex>\n\n      <Stack space={3}>\n        {features?.map((change) => (\n          <ChangelogItem\n            key={change.title}\n            changeType={change.changeType}\n            description={change?.description}\n            title={change.title}\n          />\n        ))}\n\n        {bugFixesDescription.length > 0 && (\n          <ChangelogItem changeType=\"bugfix\" description={bugFixesDescription} />\n        )}\n      </Stack>\n\n      <Flex justify=\"flex-end\">\n        <Text size={1}>\n          <a\n            href=\"https://github.com/sanity-io/sanity/releases\"\n            rel=\"noreferrer noopener\"\n            target=\"_blank\"\n          >\n            See full changelog on GitHub\n          </a>\n        </Text>\n      </Flex>\n    </Stack>\n  )\n}\n","import {Box, Card, Dialog, DialogProps, MenuDivider, Stack, Text} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport type {Changelog} from '../../../../module-status'\nimport {ChangelogList} from './ChangelogList'\n\nconst StickyBox = styled(Box)`\n  position: sticky;\n  top: 0;\n  z-index: 1;\n`\n\nconst EMPTY_ARRAY: [] = []\n\ninterface ChangelogDialogProps {\n  changelog: Changelog\n  currentVersion?: string\n  dialogProps?: Omit<DialogProps, 'id'>\n  latestVersion?: string\n}\n\nexport function ChangelogDialog(props: ChangelogDialogProps) {\n  const {changelog, currentVersion, dialogProps, latestVersion} = props\n\n  const changelogWithChangeItems = (changelog || EMPTY_ARRAY).filter(\n    (c) => (c?.changeItems || EMPTY_ARRAY)?.length > 0\n  )\n  const hasChangelog = changelogWithChangeItems.length > 0\n\n  return (\n    <Dialog header=\"Upgrade the Sanity Studio\" width={1} {...dialogProps} id=\"changelog-dialog\">\n      <>\n        <StickyBox>\n          <Card padding={4} borderBottom={hasChangelog}>\n            <Stack space={4}>\n              <Stack space={3}>\n                {hasChangelog && <Text weight=\"semibold\">Changelog</Text>}\n\n                {currentVersion && latestVersion && (\n                  <Text muted size={1}>\n                    Your Sanity Studio is version <code>{currentVersion}</code>. The latest version\n                    is <code>{latestVersion}</code>.\n                  </Text>\n                )}\n              </Stack>\n            </Stack>\n          </Card>\n        </StickyBox>\n\n        {hasChangelog && (\n          <Stack space={5} paddingY={4}>\n            {changelogWithChangeItems?.map((log, index) => {\n              const {changeItems, version} = log\n              const showDivider = index < changelogWithChangeItems.length - 1\n              const isLatest = version === latestVersion\n\n              return (\n                <React.Fragment key={version}>\n                  <Box paddingX={4}>\n                    <ChangelogList\n                      changeItems={changeItems || EMPTY_ARRAY}\n                      version={version}\n                      isLatest={isLatest}\n                    />\n                  </Box>\n\n                  {showDivider && <MenuDivider />}\n                </React.Fragment>\n              )\n            })}\n          </Stack>\n        )}\n      </>\n    </Dialog>\n  )\n}\n","import type {Observable} from 'rxjs'\nimport {map, shareReplay} from 'rxjs/operators'\nimport {SANITY_VERSION} from '../version'\nimport {CheckModuleVersionsOptions, VersionsResponse, ModuleStatusResponse} from './types'\n\nconst sanityModuleVersions = {sanity: SANITY_VERSION}\n\n// Used to keep track of lookups to prevent multiple requests\nconst CACHED_LOOKUPS = new Map<string, Observable<ModuleStatusResponse>>()\n\n/**\n * Retrieve whether or not the installed (or passed) `@sanity`-modules are up\n * to date and/or supported, and if they are outdated; which versions are is\n * the latest available on npm vs which ones are installed locally.\n *\n * @param options - Options to use for resolving module status\n * @internal Not a stable API yet\n */\nexport function checkModuleStatus(\n  options: CheckModuleVersionsOptions\n): Observable<ModuleStatusResponse> {\n  const {moduleVersions = getInstalledModules(), client} = options\n  const query = buildQueryString(moduleVersions)\n  const hash = hashQuery(query.m)\n\n  let request$ = CACHED_LOOKUPS.get(hash)\n  if (request$) {\n    return request$\n  }\n\n  request$ = client.observable\n    .request<VersionsResponse>({\n      url: '/versions',\n      query,\n      json: true,\n      tag: 'module.version-check',\n    })\n    .pipe(\n      map((result) => ({...result, installed: moduleVersions})),\n      shareReplay(1)\n    )\n\n  CACHED_LOOKUPS.set(hash, request$)\n  return request$\n}\n\n/**\n * Returns the currently installed version of the given module\n *\n * @param moduleName - Name of module to get version number for\n * @internal Not a stable API yet\n */\nexport function getInstalledModuleVersion(moduleName: string): string | undefined {\n  const versions = getInstalledModules()\n  return versions[moduleName]\n}\n\n/**\n * Builds to: `{m: ['sanity@3.0.2', '@sanity/vision@3.14.3']}`\n * Serializes to: `?m=sanity@3.0.2&m=@sanity/vision@3.14.3`\n */\nfunction buildQueryString(versions: Record<string, string>): {m: string[]} {\n  return {\n    m: Object.keys(versions)\n      .sort()\n      .filter((pkg) => versions[pkg])\n      .map((pkg) => `${pkg}@${versions[pkg]}`),\n  }\n}\n\n/**\n * Returns an object of installed `@sanity`-modules and their installed version numbers\n */\nfunction getInstalledModules(): Record<string, string> {\n  // Ugly hack, but this allows for testing the version checker even when running\n  // the latest module versions, by pretending we're using an outdated module\n  const fakeOutdatedModule = false\n  if (fakeOutdatedModule) {\n    return {...sanityModuleVersions, '@sanity/vision': '1.118.0'}\n  }\n\n  return sanityModuleVersions\n}\n\n/**\n * Reduce the module array string by stripping sanity-prefixes and joining them together\n */\nfunction hashQuery(items: string[]): string {\n  return items.join(',').replace(/@?sanity[/-]/g, '')\n}\n","import {useMemo} from 'react'\nimport {LoadableState, useLoadable} from '../util/useLoadable'\nimport {checkModuleStatus} from './moduleStatus'\nimport {CheckModuleVersionsOptions, ModuleStatusResponse} from './types'\n\n/**\n * Retrieve whether or not the installed (or passed) `@sanity`-modules are up\n * to date and/or supported, and if they are outdated; which versions are is\n * the latest available on npm vs which ones are installed locally.\n *\n * @param options Options to use for resolving module status\n * @internal Not a stable API yet\n */\nexport function useModuleStatus(\n  options: CheckModuleVersionsOptions\n): LoadableState<ModuleStatusResponse | undefined> {\n  const moduleStatus$ = useMemo(() => checkModuleStatus(options), [options])\n\n  return useLoadable(moduleStatus$)\n}\n","import {ToggleArrowRightIcon} from '@sanity/icons'\nimport {Card, Stack, Button, Text, Code, Box} from '@sanity/ui'\nimport React, {useCallback, useState} from 'react'\nimport styled from 'styled-components'\n\nconst COMMANDS = ['npm i @sanity/cli -g', 'sanity upgrade']\n\nconst Icon = styled(ToggleArrowRightIcon)`\n  &[data-rotate='true'] {\n    transform: rotate(90deg);\n  }\n`\n\ninterface ChangelogAccordionProps {\n  defaultOpen: boolean\n}\n\nexport function ChangelogAccordion(props: ChangelogAccordionProps) {\n  const {defaultOpen} = props\n  const [open, setOpen] = useState<boolean>(defaultOpen)\n\n  const handleClick = useCallback(() => setOpen((v) => !v), [])\n\n  return (\n    <Card overflow=\"hidden\">\n      <Stack>\n        <Button\n          aria-controls=\"upgrade-commands\"\n          icon={<Icon data-rotate={open} />}\n          justify=\"flex-start\"\n          mode=\"bleed\"\n          onClick={handleClick}\n          padding={4}\n          radius={0}\n          space={2}\n          text=\"How to upgrade\"\n        />\n      </Stack>\n\n      <Card\n        aria-hidden={!open}\n        hidden={!open}\n        id=\"upgrade-commands\"\n        overflow=\"auto\"\n        paddingX={4}\n        paddingY={2}\n        role=\"region\"\n        tone=\"inherit\"\n      >\n        <Stack space={2}>\n          <Card tone=\"transparent\" padding={3} radius={2}>\n            <Stack space={3}>\n              <Code language=\"bash\" size={1}>\n                {[`# Run these commands to upgrade`, ...COMMANDS].join('\\n')}\n              </Code>\n            </Stack>\n          </Card>\n\n          <Box paddingX={2} paddingY={3}>\n            <Text size={1} muted>\n              If you have problems upgrading, please get in touch with us in the{' '}\n              <a href=\"https://slack.sanity.io/\" rel=\"noopener noreferrer\" target=\"_blank\">\n                Sanity Community\n              </a>\n              .\n            </Text>\n          </Box>\n        </Stack>\n      </Card>\n    </Card>\n  )\n}\n","import React, {useCallback, useMemo, useState} from 'react'\nimport {PackageIcon} from '@sanity/icons'\nimport {DialogProps} from '@sanity/ui'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../studioClient'\nimport {useModuleStatus} from '../../../../module-status'\nimport {StatusButton} from '../../StatusButton'\nimport {isDev} from '../../../../environment'\nimport {useClient} from '../../../../hooks'\nimport {useColorScheme} from '../../../colorScheme'\nimport {ChangelogDialog} from './ChangelogDialog'\nimport {ChangelogAccordion} from './ChangelogAccordion'\n\nconst EMPTY_ARRAY: [] = []\n\nexport function ChangelogButton() {\n  const [open, setOpen] = useState<boolean>(false)\n  const [buttonElement, setButtonElement] = useState<HTMLButtonElement | null>(null)\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const versionedClient = useMemo(\n    () =>\n      client.withConfig({\n        apiVersion: '1',\n      }),\n    [client]\n  )\n\n  // get root scheme\n  const {scheme} = useColorScheme()\n\n  const {value, error, isLoading} = useModuleStatus({\n    client: versionedClient,\n  })\n\n  const {changelog, currentVersion, latestVersion, isUpToDate} = value || {}\n\n  const handleOpen = useCallback(() => setOpen(true), [])\n\n  const handleClose = useCallback(() => {\n    setOpen(false)\n\n    if (buttonElement) {\n      buttonElement.focus()\n    }\n  }, [buttonElement])\n\n  const dialogProps: Omit<DialogProps, 'id'> = useMemo(\n    () => ({\n      footer: <ChangelogAccordion defaultOpen={isDev} />,\n      onClickOutside: handleClose,\n      onClose: handleClose,\n      // force root scheme here to \"break out\" of the navbar's dark scheme\n      scheme,\n    }),\n    [handleClose, scheme]\n  )\n\n  if (error || isLoading || isUpToDate) {\n    return null\n  }\n\n  return (\n    <>\n      <StatusButton\n        active\n        icon={PackageIcon}\n        mode=\"bleed\"\n        onClick={handleOpen}\n        ref={setButtonElement}\n        selected={open}\n        statusTone=\"primary\"\n      />\n\n      {open && (\n        <ChangelogDialog\n          changelog={changelog || EMPTY_ARRAY}\n          currentVersion={currentVersion}\n          dialogProps={dialogProps}\n          latestVersion={latestVersion}\n        />\n      )}\n    </>\n  )\n}\n","import React, {useCallback, useState} from 'react'\nimport {Box, Button, Dialog, Heading, Stack, Text, Tooltip} from '@sanity/ui'\nimport {WarningOutlineIcon} from '@sanity/icons'\nimport {useId} from '@reach/auto-id'\nimport {useSchema} from '../../../../hooks'\nimport {SchemaProblemGroups} from '../../../screens/schemaErrors/SchemaProblemGroups'\nimport {useColorScheme} from '../../../colorScheme'\n\nexport function ConfigIssuesButton() {\n  const schema = useSchema()\n  const groupsWithWarnings =\n    schema._validation?.filter((group) =>\n      group.problems.some((problem) => problem.severity === 'warning')\n    ) || []\n\n  // get root scheme\n  const {scheme} = useColorScheme()\n\n  const dialogId = useId() || 'config-issues-dialog'\n\n  const [isDialogOpen, setDialogOpen] = useState(false)\n  const [buttonElement, setButtonElement] = useState<HTMLButtonElement | null>(null)\n  const handleOpen = useCallback(() => setDialogOpen(true), [])\n\n  const handleClose = useCallback(() => {\n    setDialogOpen(false)\n\n    if (buttonElement) {\n      buttonElement.focus()\n    }\n  }, [buttonElement])\n\n  if (groupsWithWarnings.length === 0) {\n    return null\n  }\n\n  return (\n    <>\n      <Tooltip\n        content={\n          <Box padding={2}>\n            <Text size={1}>Found configuration issues</Text>\n          </Box>\n        }\n        placement=\"bottom\"\n        portal\n        scheme={scheme}\n      >\n        <Box>\n          <Button\n            icon={WarningOutlineIcon}\n            mode=\"bleed\"\n            tone=\"caution\"\n            onClick={handleOpen}\n            ref={setButtonElement}\n            selected={isDialogOpen}\n          />\n        </Box>\n      </Tooltip>\n\n      {isDialogOpen && (\n        <Dialog\n          header={\n            <Stack space={3}>\n              <Text weight=\"semibold\">Configuration issues</Text>\n              <Text muted size={1}>\n                Configuration checks are only performed during development and will not be visible\n                in production builds\n              </Text>\n            </Stack>\n          }\n          width={2}\n          onClickOutside={handleClose}\n          onClose={handleClose}\n          // force root scheme here to \"break out\" of the navbar's dark scheme\n          scheme={scheme}\n          id={dialogId}\n        >\n          <Stack space={4} padding={4}>\n            <Heading as=\"h2\" size={1}>\n              Found {groupsWithWarnings.length} schema warnings\n            </Heading>\n            <SchemaProblemGroups problemGroups={groupsWithWarnings} />\n          </Stack>\n        </Dialog>\n      )}\n    </>\n  )\n}\n","import {CloseIcon, MenuIcon, SearchIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Card,\n  Flex,\n  Layer,\n  Text,\n  Tooltip,\n  useGlobalKeyDown,\n  useMediaIndex,\n} from '@sanity/ui'\nimport React, {\n  createElement,\n  useCallback,\n  useState,\n  isValidElement,\n  useMemo,\n  useEffect,\n  useRef,\n} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {startCase} from 'lodash'\nimport styled from 'styled-components'\nimport {useWorkspace} from '../../workspace'\nimport {useColorScheme} from '../../colorScheme'\nimport {RouterState, useRouterState, useStateLink} from '../../../router'\nimport {useWorkspaces} from '../../workspaces'\nimport {isDev} from '../../../environment'\nimport {UserMenu} from './userMenu'\nimport {NewDocumentButton} from './NewDocumentButton'\nimport {PresenceMenu} from './presence'\nimport {NavDrawer} from './NavDrawer'\nimport {SearchField} from './search'\nimport {ToolMenu as DefaultToolMenu} from './tools/ToolMenu'\nimport {ChangelogButton} from './changelog'\nimport {WorkspaceMenuButton} from './workspace'\nimport {ConfigIssuesButton} from './configIssues/ConfigIssuesButton'\n\nconst RootLayer = styled(Layer)`\n  min-height: auto;\n  position: relative;\n\n  &[data-search-open='true'] {\n    top: 0;\n    position: sticky;\n  }\n`\n\nconst SearchCard = styled(Card)`\n  z-index: 1;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n\n  &[data-fullscreen='true'] {\n    position: absolute;\n  }\n\n  &[data-fullscreen='false'] {\n    min-width: 253px;\n    max-width: 350px;\n  }\n`\n\nconst LeftFlex = styled(Flex)`\n  width: max-content;\n`\n\ninterface NavbarProps {\n  onSearchOpenChange: (open: boolean) => void\n  fullscreenSearchPortalEl: HTMLElement | null\n}\n\nexport function Navbar(props: NavbarProps) {\n  const {fullscreenSearchPortalEl, onSearchOpenChange} = props\n  const {name, logo, navbar, tools, ...workspace} = useWorkspace()\n  const workspaces = useWorkspaces()\n  const routerState = useRouterState()\n  const ToolMenu = navbar?.components?.ToolMenu || DefaultToolMenu\n  const {scheme} = useColorScheme()\n  const {href: rootHref, onClick: handleRootClick} = useStateLink({state: {}})\n  const mediaIndex = useMediaIndex()\n  const activeToolName = typeof routerState.tool === 'string' ? routerState.tool : undefined\n\n  const [searchOpen, setSearchOpen] = useState<boolean>(false)\n  const [drawerOpen, setDrawerOpen] = useState<boolean>(false)\n\n  const routerStateRef = useRef<RouterState>(routerState)\n  const workspaceNameRef = useRef<string>(name)\n\n  // Close the NavDrawer when changing tool or workspace\n  useEffect(() => {\n    if (routerStateRef.current.tool !== routerState.tool || name !== workspaceNameRef.current) {\n      setDrawerOpen(false)\n    }\n\n    routerStateRef.current = routerState\n    workspaceNameRef.current = name\n  }, [name, routerState])\n\n  const [drawerButtonEl, setDrawerButtonEl] = useState<HTMLButtonElement | null>(null)\n  const [searchInputElement, setSearchInputElement] = useState<HTMLInputElement | null>(null)\n  const [searchOpenButtonEl, setSearchOpenButtonEl] = useState<HTMLButtonElement | null>(null)\n  const [searchCloseButtonEl, setSearchCloseButtonEl] = useState<HTMLButtonElement | null>(null)\n\n  const shouldRender = useMemo(\n    () => ({\n      brandingCenter: mediaIndex <= 1,\n      changelog: mediaIndex > 1,\n      collapsedPresenceMenu: mediaIndex <= 1,\n      loginStatus: mediaIndex > 1,\n      searchFullscreen: mediaIndex <= 1,\n      configIssues: mediaIndex > 1 && isDev,\n      workspaces: mediaIndex >= 3 && workspaces.length > 1,\n      tools: mediaIndex >= 3,\n    }),\n    [mediaIndex, workspaces.length]\n  )\n  const formattedName = typeof name === 'string' && name !== 'root' ? startCase(name) : null\n  const title = workspace.title || formattedName || 'Studio'\n\n  useEffect(() => {\n    onSearchOpenChange(searchOpen)\n    if (searchOpen) searchInputElement?.focus()\n  }, [searchOpen, searchInputElement, onSearchOpenChange])\n\n  useGlobalKeyDown((e) => {\n    if (e.key === 'Escape' && searchOpen) {\n      handleCloseSearch()\n    }\n  })\n\n  const handleOpenSearch = useCallback(() => {\n    setSearchOpen(true)\n  }, [])\n\n  const handleCloseSearch = useCallback(() => {\n    setSearchOpen(false)\n    searchOpenButtonEl?.focus()\n  }, [searchOpenButtonEl])\n\n  const handleCloseDrawer = useCallback(() => {\n    setDrawerOpen(false)\n    drawerButtonEl?.focus()\n  }, [drawerButtonEl])\n\n  const handleOpenDrawer = useCallback(() => {\n    setDrawerOpen(true)\n  }, [])\n\n  const rootLinkContent = (() => {\n    if (isValidElementType(logo)) return createElement(logo)\n    if (isValidElement(logo)) return logo\n    return <Text weight=\"bold\">{title}</Text>\n  })()\n\n  const brandingComponent = useMemo(\n    () => (\n      <Button\n        aria-label={title}\n        as=\"a\"\n        href={rootHref}\n        mode=\"bleed\"\n        onClick={handleRootClick}\n        padding={3}\n      >\n        {rootLinkContent}\n      </Button>\n    ),\n    [handleRootClick, rootHref, rootLinkContent, title]\n  )\n\n  // The HTML elements that are part of the search view (i.e. the \"close\" button that is visible\n  // when in fullscreen mode on narrow devices) needs to be passed to `<Autocomplete />` so it knows\n  // how to make the search experience work properly for non-sighted users.\n  // Specifically â€“ without passing `relatedElements`, the listbox with results will close when you\n  // TAB to focus the \"close\" button, and thatâ€˜s not a good experience for anyone.\n  const searchRelatedElements = useMemo(\n    () => [searchCloseButtonEl].filter(Boolean) as HTMLElement[],\n    [searchCloseButtonEl]\n  )\n\n  return (\n    <RootLayer zOffset={100} data-search-open={searchOpen}>\n      <Card\n        scheme=\"dark\"\n        shadow={scheme === 'dark' ? 1 : undefined}\n        style={{lineHeight: 0}}\n        padding={2}\n        sizing=\"border\"\n        data-ui=\"Navbar\"\n      >\n        <Flex align=\"center\" justify=\"space-between\">\n          <LeftFlex align=\"center\" flex={shouldRender.brandingCenter ? undefined : 1}>\n            {!shouldRender.tools && (\n              <Box marginRight={1}>\n                <Button\n                  mode=\"bleed\"\n                  icon={MenuIcon}\n                  onClick={handleOpenDrawer}\n                  ref={setDrawerButtonEl}\n                />\n              </Box>\n            )}\n\n            {!shouldRender.brandingCenter && <Box marginRight={1}>{brandingComponent}</Box>}\n\n            {shouldRender.workspaces && (\n              <Box marginRight={2}>\n                <Tooltip\n                  content={\n                    <Box padding={2}>\n                      <Text size={1}>Select workspace</Text>\n                    </Box>\n                  }\n                  placement=\"bottom\"\n                  portal\n                  scheme={scheme}\n                >\n                  <Box>\n                    <WorkspaceMenuButton />\n                  </Box>\n                </Tooltip>\n              </Box>\n            )}\n\n            <Box marginRight={shouldRender.brandingCenter ? undefined : 2}>\n              <NewDocumentButton />\n            </Box>\n\n            {(searchOpen || !shouldRender.searchFullscreen) && (\n              <SearchCard\n                data-fullscreen={shouldRender.searchFullscreen}\n                data-ui=\"SearchRoot\"\n                flex={1}\n                padding={shouldRender.searchFullscreen ? 2 : undefined}\n                scheme={shouldRender.searchFullscreen ? 'light' : undefined}\n                shadow={shouldRender.searchFullscreen ? 1 : undefined}\n              >\n                <Flex>\n                  <Box flex={1} marginRight={shouldRender.tools ? undefined : [1, 1, 2]}>\n                    <SearchField\n                      fullScreen={shouldRender.searchFullscreen}\n                      onSearchItemClick={handleCloseSearch}\n                      portalElement={fullscreenSearchPortalEl}\n                      setSearchInputElement={setSearchInputElement}\n                      relatedElements={searchRelatedElements}\n                    />\n                  </Box>\n\n                  {shouldRender.searchFullscreen && (\n                    <Button\n                      aria-label=\"Close search\"\n                      icon={CloseIcon}\n                      mode=\"bleed\"\n                      onClick={handleCloseSearch}\n                      ref={setSearchCloseButtonEl}\n                    />\n                  )}\n                </Flex>\n              </SearchCard>\n            )}\n\n            {shouldRender.tools && (\n              <Card borderRight flex={1} marginX={2} overflow=\"visible\" paddingRight={1}>\n                <ToolMenu\n                  activeToolName={activeToolName}\n                  context=\"topbar\"\n                  isDrawerOpen={false}\n                  tools={tools}\n                  closeDrawer={handleCloseDrawer}\n                />\n              </Card>\n            )}\n          </LeftFlex>\n\n          {shouldRender.brandingCenter && <Box marginX={1}>{brandingComponent}</Box>}\n\n          <Flex align=\"center\">\n            <Box marginRight={1}>\n              <PresenceMenu collapse={shouldRender.collapsedPresenceMenu} />\n            </Box>\n\n            {shouldRender.changelog && (\n              <Box marginRight={1}>\n                <ChangelogButton />\n              </Box>\n            )}\n\n            {shouldRender.configIssues && (\n              <Box marginRight={2}>\n                <ConfigIssuesButton />\n              </Box>\n            )}\n\n            {shouldRender.tools && (\n              <Box>\n                <UserMenu />\n              </Box>\n            )}\n\n            {shouldRender.searchFullscreen && (\n              <Button\n                aria-label=\"Open search\"\n                icon={SearchIcon}\n                mode=\"bleed\"\n                onClick={handleOpenSearch}\n                ref={setSearchOpenButtonEl}\n              />\n            )}\n          </Flex>\n        </Flex>\n      </Card>\n\n      {!shouldRender.tools && (\n        <NavDrawer\n          activeToolName={activeToolName}\n          isOpen={drawerOpen}\n          onClose={handleCloseDrawer}\n          tools={tools}\n        />\n      )}\n    </RootLayer>\n  )\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Container, Flex, Stack, Text} from '@sanity/ui'\nimport React from 'react'\n\nexport function NoToolsScreen() {\n  return (\n    <Card height=\"fill\">\n      <Flex align=\"center\" height=\"fill\" justify=\"center\" padding={4} sizing=\"border\">\n        <Container width={0}>\n          <Card padding={4} radius={2} shadow={1} tone=\"caution\">\n            <Flex>\n              <Box>\n                <Text size={1}>\n                  <WarningOutlineIcon />\n                </Text>\n              </Box>\n              <Stack flex={1} marginLeft={3} space={3}>\n                <Text as=\"h1\" size={1} weight=\"bold\">\n                  No configured tools!\n                </Text>\n                <Text as=\"p\" muted size={1}>\n                  Please configure a tool in your Studio configuration.\n                </Text>\n                <Text as=\"p\" hidden muted size={1}>\n                  <a href=\"\">Learn how to add a tool &rarr;</a>\n                </Text>\n              </Stack>\n            </Flex>\n          </Card>\n        </Container>\n      </Flex>\n    </Card>\n  )\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Container, Flex, Stack, Text} from '@sanity/ui'\nimport React from 'react'\n\nexport function ToolNotFoundScreen(props: {toolName: string}) {\n  const {toolName} = props\n\n  return (\n    <Card height=\"fill\">\n      <Flex align=\"center\" height=\"fill\" justify=\"center\" padding={4} sizing=\"border\">\n        <Container width={0}>\n          <Card padding={4} radius={2} shadow={1} tone=\"caution\">\n            <Flex>\n              <Box>\n                <Text size={1}>\n                  <WarningOutlineIcon />\n                </Text>\n              </Box>\n              <Stack flex={1} marginLeft={3} space={3}>\n                <Text as=\"h1\" size={1} weight=\"bold\">\n                  Tool not found: <code>{toolName}</code>\n                </Text>\n              </Stack>\n            </Flex>\n          </Card>\n        </Container>\n      </Flex>\n    </Card>\n  )\n}\n","import {Box, Button, Card, Code, ErrorBoundary, Flex, Heading, Spinner} from '@sanity/ui'\nimport {startCase} from 'lodash'\nimport React, {createElement, Suspense, useCallback, useEffect, useMemo, useState} from 'react'\nimport styled from 'styled-components'\nimport {useHotModuleReload} from 'use-hot-module-reload'\nimport {RouteScope, useRouter} from '../router'\nimport {Navbar} from './components'\nimport {NoToolsScreen} from './screens/NoToolsScreen'\nimport {ToolNotFoundScreen} from './screens/ToolNotFoundScreen'\nimport {useWorkspace} from './workspace'\n\nconst SearchFullscreenPortalCard = styled(Card)`\n  display: flex;\n  flex-direction: column;\n  min-height: 100%;\n  flex: 1;\n`\n\nexport function StudioLayout() {\n  const {state: routerState} = useRouter()\n  const {name, title, tools} = useWorkspace()\n  const activeToolName = typeof routerState.tool === 'string' ? routerState.tool : undefined\n  const activeTool = tools.find((tool) => tool.name === activeToolName)\n  const [toolError, setToolError] = useState<{error: Error; info: React.ErrorInfo} | null>(null)\n  const [searchOpen, setSearchOpen] = useState<boolean>(false)\n  const [fullscreenSearchPortalEl, setFullscreenSearchPortalEl] = useState<HTMLDivElement | null>(\n    null\n  )\n\n  const documentTitle = useMemo(() => {\n    const mainTitle = title || startCase(name)\n\n    if (activeToolName) {\n      return `${mainTitle} â€“ ${startCase(activeToolName)}`\n    }\n\n    return mainTitle\n  }, [activeToolName, name, title])\n\n  useEffect(() => {\n    document.title = documentTitle\n  }, [documentTitle])\n\n  const handleSearchOpenChange = useCallback((open: boolean) => {\n    setSearchOpen(open)\n  }, [])\n\n  const resetToolError = useCallback(() => setToolError(null), [setToolError])\n\n  useEffect(resetToolError, [activeToolName, resetToolError])\n  useHotModuleReload(resetToolError)\n\n  return (\n    <Flex data-ui=\"ToolScreen\" direction=\"column\" height=\"fill\">\n      <Navbar\n        onSearchOpenChange={handleSearchOpenChange}\n        fullscreenSearchPortalEl={fullscreenSearchPortalEl}\n      />\n\n      {tools.length === 0 && <NoToolsScreen />}\n\n      {tools.length > 0 && !activeTool && activeToolName && (\n        <ToolNotFoundScreen toolName={activeToolName} />\n      )}\n\n      {toolError && activeTool && (\n        <Card flex={1} overflow=\"auto\" padding={4}>\n          <Heading as=\"h1\">\n            The <code>{activeToolName}</code> tool crashed\n          </Heading>\n          <Box marginTop={4}>\n            <Button onClick={resetToolError} text=\"Retry\" />\n          </Box>\n          <Card marginTop={4} overflow=\"auto\" padding={3} tone=\"critical\">\n            <Code size={1}>{toolError.error.stack}</Code>\n          </Card>\n          <Card marginTop={4} overflow=\"auto\" padding={3} tone=\"critical\">\n            <Code size={1}>{toolError.info.componentStack}</Code>\n          </Card>\n        </Card>\n      )}\n\n      {searchOpen && (\n        <SearchFullscreenPortalCard ref={setFullscreenSearchPortalEl} overflow=\"auto\" />\n      )}\n\n      <Card flex={1} hidden={searchOpen}>\n        {!toolError && activeTool && activeToolName && (\n          <RouteScope scope={activeToolName}>\n            <ErrorBoundary onCatch={setToolError}>\n              <Suspense fallback={<LoadingTool />}>\n                {createElement(activeTool.component, {tool: activeTool})}\n              </Suspense>\n            </ErrorBoundary>\n          </RouteScope>\n        )}\n      </Card>\n    </Flex>\n  )\n}\n\nfunction LoadingTool() {\n  return (\n    <Flex align=\"center\" height=\"fill\" justify=\"center\">\n      <Spinner muted />\n    </Flex>\n  )\n}\n","import type {SanityClient} from '@sanity/client'\nimport type {SourceClientOptions} from '../config'\nimport {useSource} from '../studio'\n\n/**\n * @public\n */\nexport function useClient(clientOptions?: SourceClientOptions): SanityClient {\n  const source = useSource()\n  if (!clientOptions) {\n    console.warn(\n      'Calling `useClient()` without specifying an API version is deprecated and will stop working in the next dev-preview release - please migrate to use `useClient({apiVersion: \"2021-06-07\"})`.'\n    )\n    return source.getClient({apiVersion: '2021-06-07'})\n  }\n\n  return source.getClient(clientOptions)\n}\n","import {useSource} from '../studio'\n\n/**\n * @public\n */\nexport function useDataset(): string {\n  return useSource().dataset\n}\n","import {useSource} from '../studio'\n\n/**\n * @public\n */\nexport function useProjectId(): string {\n  return useSource().projectId\n}\n","import {Schema} from '@sanity/types'\nimport {useSource} from '../studio'\n\n/**\n * @public\n */\nexport function useSchema(): Schema {\n  return useSource().schema\n}\n","import {useSource} from '../studio'\nimport {Template} from '../templates'\n\n/**\n * @public\n */\nexport function useTemplates(): Template[] {\n  return useSource().templates\n}\n","import {useEffect, useState} from 'react'\nimport {\n  format,\n  differenceInSeconds,\n  differenceInMinutes,\n  differenceInHours,\n  differenceInDays,\n  differenceInWeeks,\n  differenceInMonths,\n  differenceInYears,\n} from 'date-fns'\nimport pluralize from 'pluralize-esm'\n\ninterface TimeSpec {\n  timestamp: string\n  refreshInterval: number\n}\n\nconst FIVE_SECONDS = 1000 * 5\nconst TWENTY_SECONDS = 1000 * 20\nconst ONE_MINUTE = 1000 * 60\nconst ONE_HOUR = ONE_MINUTE * 60\n\nexport interface TimeAgoOpts {\n  minimal?: boolean\n  agoSuffix?: boolean\n}\n\nexport function useTimeAgo(time: Date | string, {minimal, agoSuffix}: TimeAgoOpts = {}): string {\n  const [resolved, setResolved] = useState(() => formatRelativeTime(time, {minimal, agoSuffix}))\n\n  useEffect(() => {\n    setResolved(formatRelativeTime(time, {minimal, agoSuffix}))\n  }, [time, minimal, agoSuffix])\n\n  useEffect(() => {\n    const id: number | undefined = Number.isFinite(resolved.refreshInterval)\n      ? window.setInterval(\n          () => setResolved(formatRelativeTime(time, {minimal, agoSuffix})),\n          resolved.refreshInterval\n        )\n      : undefined\n\n    return () => clearInterval(id)\n  }, [time, minimal, resolved.refreshInterval, agoSuffix])\n\n  return resolved.timestamp\n}\n\nfunction formatRelativeTime(date: Date | string, opts: TimeAgoOpts = {}): TimeSpec {\n  const parsedDate = date instanceof Date ? date : new Date(date)\n\n  // Invalid date? Return empty timestamp and inifinite refresh interval, to save us from\n  // continuously trying to format an invalid date. The `useEffect` calls in the hook will\n  // trigger a re-evaluation of the timestamp when the date changes, so this is safe.\n  if (!parsedDate.getTime()) {\n    return {\n      timestamp: '',\n      refreshInterval: +Infinity,\n    }\n  }\n\n  const now = Date.now()\n  const diffMonths = differenceInMonths(now, parsedDate)\n  const diffYears = differenceInYears(now, parsedDate)\n\n  if (diffMonths || diffYears) {\n    if (opts.minimal && diffYears === 0) {\n      // same year\n      return {\n        timestamp: format(parsedDate, 'MMM d'),\n        refreshInterval: +Infinity,\n      }\n    }\n\n    if (opts.minimal) {\n      return {\n        timestamp: format(parsedDate, 'MMM d, yyyy'),\n        refreshInterval: +Infinity,\n      }\n    }\n\n    return {\n      timestamp: format(parsedDate, 'MMM d, yyyy, hh:mm a'),\n      refreshInterval: +Infinity,\n    }\n  }\n\n  const diffWeeks = differenceInWeeks(now, parsedDate)\n  const weekSuffix = pluralize('week', diffWeeks)\n\n  if (diffWeeks) {\n    if (opts.minimal) {\n      return {\n        timestamp: opts.agoSuffix ? `${diffWeeks}w ago` : `${diffWeeks}w`,\n        refreshInterval: ONE_HOUR,\n      }\n    }\n\n    return {\n      timestamp: opts.agoSuffix ? `${diffWeeks} ${weekSuffix} ago` : `${diffWeeks} ${weekSuffix}`,\n      refreshInterval: ONE_HOUR,\n    }\n  }\n\n  const diffDays = differenceInDays(now, parsedDate)\n  const daysSuffix = pluralize('days', diffDays)\n\n  if (diffDays) {\n    if (opts.minimal) {\n      const daysSince = opts.agoSuffix ? `${diffDays}d ago` : `${diffDays}d`\n      return {\n        timestamp: diffDays === 1 ? 'yesterday' : daysSince,\n        refreshInterval: ONE_HOUR,\n      }\n    }\n    const daysSince = opts.agoSuffix ? `${diffDays} ${daysSuffix} ago` : `${diffDays} ${daysSuffix}`\n    return {\n      timestamp: diffDays === 1 ? 'yesterday' : daysSince,\n      refreshInterval: ONE_HOUR,\n    }\n  }\n\n  const diffHours = differenceInHours(now, parsedDate)\n  const hoursSuffix = pluralize('hour', diffHours)\n\n  if (diffHours) {\n    if (opts.minimal) {\n      return {\n        timestamp: opts.agoSuffix ? `${diffHours}h ago` : `${diffHours}h`,\n        refreshInterval: ONE_MINUTE,\n      }\n    }\n\n    return {\n      timestamp: opts.agoSuffix ? `${diffHours} ${hoursSuffix} ago` : `${diffHours} ${hoursSuffix}`,\n      refreshInterval: ONE_MINUTE,\n    }\n  }\n\n  const diffMins = differenceInMinutes(now, parsedDate)\n  const minsSuffix = pluralize('minute', diffMins)\n\n  if (diffMins) {\n    if (opts.minimal) {\n      return {\n        timestamp: opts.agoSuffix ? `${diffMins}m ago` : `${diffMins}m`,\n        refreshInterval: TWENTY_SECONDS,\n      }\n    }\n    return {\n      timestamp: opts.agoSuffix ? `${diffMins} ${minsSuffix} ago` : `${diffMins} ${minsSuffix}`,\n      refreshInterval: TWENTY_SECONDS,\n    }\n  }\n\n  const diffSeconds = differenceInSeconds(now, parsedDate)\n  const secsSuffix = pluralize('second', diffSeconds)\n\n  if (diffSeconds > 10) {\n    if (opts.minimal) {\n      return {\n        timestamp: opts.agoSuffix ? `${diffSeconds}s ago` : `${diffSeconds}s`,\n        refreshInterval: FIVE_SECONDS,\n      }\n    }\n\n    return {\n      timestamp: opts.agoSuffix\n        ? `${diffSeconds} ${secsSuffix} ago`\n        : `${diffSeconds} ${secsSuffix}`,\n      refreshInterval: FIVE_SECONDS,\n    }\n  }\n\n  return {timestamp: 'just now', refreshInterval: FIVE_SECONDS}\n}\n","import {distinctUntilChanged, map, mapTo, startWith, switchMap} from 'rxjs/operators'\nimport {of, timer} from 'rxjs'\nimport {useMemoObservable} from 'react-rx'\nimport {useDocumentStore} from '../datastores'\n\nexport type ConnectionState = 'connecting' | 'reconnecting' | 'connected'\n\nconst INITIAL: ConnectionState = 'connecting'\n\nexport function useConnectionState(publishedDocId: string, docTypeName: string): ConnectionState {\n  const documentStore = useDocumentStore()\n\n  return useMemoObservable(\n    () =>\n      documentStore.pair.documentEvents(publishedDocId, docTypeName).pipe(\n        map((ev: {type: string}) => ev.type),\n        map((eventType) => eventType !== 'reconnect'),\n        switchMap((isConnected) =>\n          isConnected ? of('connected') : timer(200).pipe(mapTo('reconnecting'))\n        ),\n        startWith(INITIAL as any),\n        distinctUntilChanged()\n      ),\n    [publishedDocId, docTypeName],\n    INITIAL\n  )\n}\n","import {useMemo} from 'react'\nimport {useObservable} from 'react-rx'\nimport {useDocumentStore} from '../datastores'\nimport {OperationsAPI} from '../datastores/document/document-pair/operations'\n\nexport function useDocumentOperation(publishedDocId: string, docTypeName: string): OperationsAPI {\n  const documentStore = useDocumentStore()\n\n  const operations$ = useMemo(() => {\n    return documentStore.pair.editOperations(publishedDocId, docTypeName)\n  }, [documentStore, publishedDocId, docTypeName])\n\n  return useObservable(operations$)!\n}\n","import {useMemoObservable} from 'react-rx'\nimport {useDocumentStore} from '../datastores'\n\nexport function useDocumentOperationEvent(publishedDocId: string, docTypeName: string) {\n  const documentStore = useDocumentStore()\n\n  return useMemoObservable(\n    () => documentStore.pair.operationEvents(publishedDocId, docTypeName),\n    [publishedDocId, docTypeName]\n  )\n}\n","import {useMemoObservable} from 'react-rx'\nimport {useDocumentStore} from '../datastores'\nimport type {EditStateFor} from '../datastores/document/document-pair/editState'\n\nexport function useEditState(publishedDocId: string, docTypeName: string): EditStateFor {\n  const documentStore = useDocumentStore()\n\n  return useMemoObservable(\n    () => documentStore.pair.editState(publishedDocId, docTypeName),\n    [publishedDocId, docTypeName]\n  ) as EditStateFor\n}\n","import {useMemoObservable} from 'react-rx'\nimport {map} from 'rxjs/operators'\nimport {useDocumentStore} from '../datastores'\n\nexport interface SyncState {\n  isSyncing: boolean\n}\n\nconst SYNCING = {isSyncing: true}\nconst NOT_SYNCING = {isSyncing: false}\n\nexport function useSyncState(publishedDocId: string, documentType: string): SyncState {\n  const documentStore = useDocumentStore()\n\n  return useMemoObservable<SyncState>(\n    () =>\n      documentStore.pair\n        .consistencyStatus(publishedDocId, documentType)\n        .pipe(map((isConsistent) => (isConsistent ? NOT_SYNCING : SYNCING))),\n    [publishedDocId],\n    NOT_SYNCING\n  )\n}\n","import {ValidationMarker} from '@sanity/types'\nimport {useMemoObservable} from 'react-rx'\nimport {useDocumentStore} from '../datastores'\n\nexport interface ValidationStatus {\n  isValidating: boolean\n  validation: ValidationMarker[]\n}\n\nconst INITIAL: ValidationStatus = {validation: [], isValidating: false}\n\nexport function useValidationStatus(publishedDocId: string, docTypeName: string): ValidationStatus {\n  const documentStore = useDocumentStore()\n\n  return useMemoObservable(\n    () => documentStore.pair.validation(publishedDocId, docTypeName),\n    [publishedDocId, docTypeName],\n    INITIAL\n  )\n}\n","import {BufferedDocument, Mutation} from '@sanity/mutator'\nimport {SanityDocument} from '@sanity/types'\nimport {BehaviorSubject, EMPTY, merge, Observable, Subject} from 'rxjs'\nimport {\n  distinctUntilChanged,\n  filter,\n  map,\n  mergeMap,\n  mergeMapTo,\n  publishReplay,\n  refCount,\n  scan,\n  share,\n  take,\n  tap,\n  withLatestFrom,\n} from 'rxjs/operators'\nimport {ListenerEvent, MutationEvent} from '../getPairListener'\nimport {\n  CommitFunction,\n  DocumentMutationEvent,\n  DocumentRebaseEvent,\n  MutationPayload,\n  SnapshotEvent,\n  DocumentRemoteMutationEvent,\n  RemoteSnapshotEvent,\n} from './types'\n\ninterface MutationAction {\n  type: 'mutation'\n  mutations: MutationPayload[]\n}\n\ninterface CommitAction {\n  type: 'commit'\n}\n\ntype Action = MutationAction | CommitAction\n\n// BufferedDocument.LOCAL never updates its revision due to its internal consistency checks\n// but we sometimes we need the most current _rev on the document in UI land, e.g.\n// in order to do optimistic locking on the edited document to make sure we publish the document the user\n// actually are looking at, and not the one currently at the server\n// Also - the mutator is not setting _updatedAt on patches applied optimistically or\n// when they are received from server\nconst getUpdatedSnapshot = (bufferedDocument: BufferedDocument) => {\n  const LOCAL = bufferedDocument.LOCAL\n  const HEAD = bufferedDocument.document.HEAD\n  if (!LOCAL) {\n    return LOCAL\n  }\n\n  return {\n    ...LOCAL,\n    _type: (HEAD || LOCAL)._type,\n    _rev: (HEAD || LOCAL)._rev,\n    _updatedAt: new Date().toISOString(),\n  }\n}\n\nconst toSnapshotEvent = (document: SanityDocument): SnapshotEvent => ({type: 'snapshot', document})\nconst getDocument = <T extends {document: any}>(event: T): T['document'] => event.document\n\n// This is an observable interface for BufferedDocument in an attempt\n// to make it easier to work with the api provided by it\nexport const createObservableBufferedDocument = (\n  listenerEvent$: Observable<ListenerEvent>,\n  commitMutations: CommitFunction\n) => {\n  // Incoming local actions (e.g. a request to mutate, a request to commit pending changes, etc.)\n  const actions$ = new Subject<Action>()\n\n  // Stream of commit requests. Must be handled by a commit handler\n  const consistency$ = new BehaviorSubject<boolean>(true)\n\n  // Stream of mutations for this document\n  // NOTE: this will *not* include remote mutations received over the listener\n  // that has *already* applied locally/optimistically\n  const mutations$ = new Subject<DocumentMutationEvent>()\n\n  // a stream of rebase events emitted from the mutator\n  const rebase$ = new Subject<DocumentRebaseEvent>()\n\n  // a stream of remote mutations with effetcs\n  const remoteMutations = new Subject<DocumentRemoteMutationEvent>()\n\n  const createInitialBufferedDocument = (initialSnapshot: SanityDocument | null) => {\n    const bufferedDocument = new BufferedDocument(initialSnapshot)\n    bufferedDocument.onMutation = ({mutation, remote}: any) => {\n      // this is called after either when:\n      // 1) local mutations has been added, optimistically applied and queued for sending\n      // 2) remote mutations originating from another client has arrived and been applied\n      mutations$.next({\n        type: 'mutation',\n        document: getUpdatedSnapshot(bufferedDocument) as any,\n        mutations: mutation.mutations,\n        origin: remote ? 'remote' : 'local',\n      })\n    }\n    ;(bufferedDocument as any).onRemoteMutation = (mutation: any) => {\n      remoteMutations.next({\n        type: 'remoteMutation',\n        head: bufferedDocument.document.HEAD as any,\n        transactionId: mutation.transactionId,\n        timestamp: mutation.timestamp,\n        author: mutation.identity,\n        effects: mutation.effects,\n      })\n    }\n\n    bufferedDocument.onRebase = (edge: any, nextRemoteMutations: any, localMutations: any) => {\n      rebase$.next({\n        type: 'rebase',\n        document: edge,\n        remoteMutations: nextRemoteMutations,\n        localMutations,\n      })\n    }\n\n    bufferedDocument.onConsistencyChanged = (isConsistent) => {\n      consistency$.next(isConsistent)\n    }\n\n    bufferedDocument.commitHandler = (opts: {\n      success: () => void\n      failure: () => void\n      cancel: (error: Error) => void\n      mutation: Mutation\n    }) => {\n      const {resultRev, ...mutation} = opts.mutation.params\n      commitMutations(mutation).then(opts.success, (error) => {\n        const isBadRequest =\n          'statusCode' in error &&\n          typeof error.statusCode === 'number' &&\n          error.statusCode >= 400 &&\n          error.statusCode <= 500\n        if (isBadRequest) {\n          opts.cancel(error)\n        } else {\n          opts.failure()\n        }\n        return Promise.reject(error)\n      })\n    }\n    return bufferedDocument\n  }\n\n  const currentBufferedDocument$ = listenerEvent$.pipe(\n    scan((bufferedDocument: BufferedDocument | null, listenerEvent) => {\n      // consider renaming 'snapshot' to initial/welcome\n      if (listenerEvent.type === 'snapshot') {\n        if (bufferedDocument) {\n          // we received a new snapshot and already got an old one. When we receive a snapshot again\n          // it is usually because the connection has been down. Attempt to save pending changes (if any)\n          bufferedDocument.commit()\n        }\n        return createInitialBufferedDocument(listenerEvent.document || null)\n      }\n      if (bufferedDocument === null) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          'Ignoring event of type \"%s\" since buffered document has not yet been set up with snapshot',\n          listenerEvent.type\n        )\n        return null\n      }\n      return bufferedDocument\n    }, null),\n    distinctUntilChanged(),\n    publishReplay(1),\n    refCount()\n  )\n\n  // this is a stream of document snapshots where each new snapshot are emitted after listener mutations\n  // has been applied. Since the optimistic patches is not emitted on the mutation$ stream, we need this\n  // in order to update the document with a new _rev (and _updatedAt)\n  const snapshotAfterSync$ = listenerEvent$.pipe(\n    filter((ev): ev is MutationEvent => ev.type === 'mutation'),\n    withLatestFrom(currentBufferedDocument$),\n    map(([mutationEvent, bufferedDocument]) => {\n      bufferedDocument!.arrive(new Mutation(mutationEvent))\n      return getUpdatedSnapshot(bufferedDocument!)\n    })\n  )\n\n  // this is where the side effects mandated by local actions actually happens\n  const actionHandler$ = actions$.pipe(\n    withLatestFrom(currentBufferedDocument$),\n    tap(([action, bufferedDocument]) => {\n      if (action.type === 'mutation') {\n        bufferedDocument!.add(new Mutation({mutations: action.mutations}))\n      }\n      if (action.type === 'commit') {\n        bufferedDocument!.commit()\n      }\n    }),\n    // We subscribe to this only for the side effects\n    mergeMapTo(EMPTY),\n    share()\n  )\n\n  const emitAction = (action: any) => actions$.next(action)\n\n  const addMutations = (mutations: MutationPayload[]) => emitAction({type: 'mutation', mutations})\n  const addMutation = (mutation: MutationPayload) => addMutations([mutation])\n\n  const commit = () => {\n    return currentBufferedDocument$.pipe(\n      take(1),\n      mergeMap((bufferedDocument) => bufferedDocument!.commit()),\n      mergeMapTo(EMPTY)\n    )\n  }\n\n  // A stream of this document's snapshot\n  const snapshot$ = merge(\n    currentBufferedDocument$.pipe(map((bufferedDocument) => bufferedDocument!.LOCAL)),\n    mutations$.pipe(map(getDocument)),\n    rebase$.pipe(map(getDocument)),\n    snapshotAfterSync$\n  ).pipe(map(toSnapshotEvent as any), publishReplay(1), refCount())\n\n  const remoteSnapshot$: Observable<RemoteSnapshotEvent> = merge(\n    currentBufferedDocument$.pipe(\n      map((bufferedDocument) => bufferedDocument!.document.HEAD as any),\n      map(toSnapshotEvent)\n    ),\n    remoteMutations\n  ).pipe(publishReplay(1), refCount())\n\n  return {\n    updates$: merge(snapshot$, actionHandler$, mutations$, rebase$),\n    consistency$: consistency$.pipe(distinctUntilChanged(), publishReplay(1), refCount()),\n    remoteSnapshot$,\n    addMutation,\n    addMutations,\n    commit,\n  }\n}\n","import {SanityDocument} from '@sanity/types'\nimport {Observable} from 'rxjs'\nimport {ListenerEvent} from '../getPairListener'\nimport {Mutation} from '../types'\nimport {createObservableBufferedDocument} from './createObservableBufferedDocument'\nimport {\n  CommitFunction,\n  CommittedEvent,\n  DocumentMutationEvent,\n  DocumentRebaseEvent,\n  SnapshotEvent,\n  RemoteSnapshotEvent,\n} from './types'\n\nexport type BufferedDocumentEvent =\n  | SnapshotEvent\n  | DocumentRebaseEvent\n  | DocumentMutationEvent\n  | CommittedEvent\n\nconst prepare = (id: string) => (document: Partial<SanityDocument>) => {\n  const {_id, _rev, _updatedAt, ...rest} = document\n  return {_id: id, ...rest}\n}\n\nexport interface BufferedDocumentWrapper {\n  consistency$: Observable<boolean>\n  remoteSnapshot$: Observable<RemoteSnapshotEvent>\n  events: Observable<BufferedDocumentEvent>\n  // helper functions\n  patch: (patches: any[]) => Mutation[]\n  create: (document: Partial<SanityDocument>) => Mutation\n  createIfNotExists: (document: SanityDocument) => Mutation\n  createOrReplace: (document: SanityDocument) => Mutation\n  delete: () => Mutation\n\n  mutate: (mutations: Mutation[]) => void\n  commit: () => Observable<never>\n}\n\nexport const createBufferedDocument = (\n  documentId: string,\n  // consider naming it remoteEvent$\n  listenerEvent$: Observable<ListenerEvent>,\n  commitMutations: CommitFunction\n): BufferedDocumentWrapper => {\n  const bufferedDocument = createObservableBufferedDocument(listenerEvent$, commitMutations)\n\n  const prepareDoc = prepare(documentId)\n\n  const DELETE = {delete: {id: documentId}}\n\n  return {\n    events: bufferedDocument.updates$ as any,\n    consistency$: bufferedDocument.consistency$,\n    remoteSnapshot$: bufferedDocument.remoteSnapshot$,\n\n    patch: (patches) => patches.map((patch) => ({patch: {...patch, id: documentId}})),\n    create: (document) => ({create: prepareDoc(document)}),\n    createIfNotExists: (document) => ({createIfNotExists: prepareDoc(document)}),\n    createOrReplace: (document) => ({createOrReplace: prepareDoc(document)}),\n    delete: () => DELETE,\n\n    mutate: (mutations: Mutation[]) => bufferedDocument.addMutations(mutations),\n    commit: () => bufferedDocument.commit(),\n  }\n}\n","/* eslint-disable @typescript-eslint/no-use-before-define */\nimport type {SanityDocument} from '@sanity/types'\nimport {defer, of as observableOf, Observable} from 'rxjs'\nimport {concatMap, map} from 'rxjs/operators'\nimport type {IdPair, MutationEvent, ReconnectEvent, SanityClient, WelcomeEvent} from './types'\n\ninterface Snapshots {\n  draft: SanityDocument | null\n  published: SanityDocument | null\n}\n\nexport interface InitialSnapshotEvent {\n  type: 'snapshot'\n  documentId: string\n  document: SanityDocument | null\n}\n\nexport interface PairListenerOptions {\n  tag?: string\n}\n\nexport type {MutationEvent}\n\nexport type ListenerEvent = MutationEvent | ReconnectEvent | InitialSnapshotEvent\n\nexport function getPairListener(\n  client: SanityClient,\n  idPair: IdPair,\n  options: PairListenerOptions = {}\n): Observable<ListenerEvent> {\n  const {publishedId, draftId} = idPair\n  return defer(\n    () =>\n      client.observable.listen(\n        `*[_id == $publishedId || _id == $draftId]`,\n        {\n          publishedId,\n          draftId,\n        },\n        {\n          includeResult: false,\n          events: ['welcome', 'mutation', 'reconnect'],\n          effectFormat: 'mendoza',\n          tag: options.tag || 'document.pair-listener',\n        }\n      ) as Observable<WelcomeEvent | MutationEvent | ReconnectEvent>\n  ).pipe(\n    concatMap((event) =>\n      event.type === 'welcome'\n        ? fetchInitialDocumentSnapshots().pipe(\n            concatMap((snapshots) => [\n              createSnapshotEvent(draftId, snapshots.draft),\n              createSnapshotEvent(publishedId, snapshots.published),\n            ])\n          )\n        : observableOf(event)\n    )\n  )\n\n  function fetchInitialDocumentSnapshots(): Observable<Snapshots> {\n    return client.observable\n      .getDocuments<SanityDocument>([draftId, publishedId], {tag: 'document.snapshots'})\n      .pipe(\n        map(([draft, published]) => ({\n          draft,\n          published,\n        }))\n      )\n  }\n}\n\nfunction createSnapshotEvent(\n  documentId: string,\n  document: null | SanityDocument\n): InitialSnapshotEvent {\n  return {\n    type: 'snapshot',\n    documentId,\n    document,\n  }\n}\n","import {SanityClient} from '@sanity/client'\nimport {merge, Observable} from 'rxjs'\nimport {filter, map, share} from 'rxjs/operators'\nimport {SanityDocument} from '@sanity/types'\nimport {getPairListener, ListenerEvent} from '../getPairListener'\nimport {BufferedDocumentEvent, createBufferedDocument} from '../buffered-doc'\nimport {IdPair, Mutation, ReconnectEvent} from '../types'\nimport {RemoteSnapshotEvent} from '../buffered-doc/types'\n\nconst isEventForDocId =\n  (id: string) =>\n  (event: ListenerEvent): boolean =>\n    event.type !== 'reconnect' && event.documentId === id\n\nfunction commitMutations(client: SanityClient, mutations: any[]) {\n  return client.dataRequest('mutate', mutations, {\n    visibility: 'async',\n    returnDocuments: false,\n    tag: 'document.commit',\n  })\n}\n\nexport type WithVersion<T> = T & {version: 'published' | 'draft'}\n\nexport type DocumentVersionEvent = WithVersion<ReconnectEvent | BufferedDocumentEvent>\nexport type RemoteSnapshotVersionEvent = WithVersion<RemoteSnapshotEvent>\n\nexport interface DocumentVersion {\n  consistency$: Observable<boolean>\n  remoteSnapshot$: Observable<RemoteSnapshotVersionEvent>\n  events: Observable<DocumentVersionEvent>\n\n  patch: (patches: any[]) => Mutation[]\n  create: (document: Partial<SanityDocument>) => Mutation\n  createIfNotExists: (document: SanityDocument) => Mutation\n  createOrReplace: (document: SanityDocument) => Mutation\n  delete: () => Mutation\n\n  mutate: (mutations: Mutation[]) => void\n  commit: () => Observable<never>\n}\n\nexport interface Pair {\n  published: DocumentVersion\n  draft: DocumentVersion\n}\n\nfunction setVersion<T>(version: 'draft' | 'published') {\n  return (ev: T): T & {version: 'draft' | 'published'} => ({...ev, version})\n}\n\nexport function checkoutPair(client: SanityClient, idPair: IdPair): Pair {\n  const {publishedId, draftId} = idPair\n\n  const listenerEvents$ = getPairListener(client, idPair).pipe(share())\n\n  const reconnect$ = listenerEvents$.pipe(\n    filter((ev) => ev.type === 'reconnect')\n  ) as Observable<ReconnectEvent>\n\n  const draft = createBufferedDocument(\n    draftId,\n    listenerEvents$.pipe(filter(isEventForDocId(draftId))),\n    (mut: any) => commitMutations(client, mut)\n  )\n\n  const published = createBufferedDocument(\n    publishedId,\n    listenerEvents$.pipe(filter(isEventForDocId(publishedId))),\n    (mut: any) => commitMutations(client, mut)\n  )\n\n  return {\n    draft: {\n      ...draft,\n      events: merge(reconnect$, draft.events).pipe(map(setVersion('draft'))),\n      consistency$: draft.consistency$,\n      remoteSnapshot$: draft.remoteSnapshot$.pipe(map(setVersion('draft'))),\n    },\n    published: {\n      ...published,\n      events: merge(reconnect$, published.events).pipe(map(setVersion('published'))),\n      consistency$: published.consistency$,\n      remoteSnapshot$: published.remoteSnapshot$.pipe(map(setVersion('published'))),\n    },\n  }\n}\n","import {Observable} from 'rxjs'\n\nexport function memoize<T, Arg1>(\n  fn: (arg1: Arg1) => Observable<T>,\n  keyGen: (arg1: Arg1) => string\n): (arg1: Arg1) => Observable<T>\nexport function memoize<T, Arg1, Arg2>(\n  fn: (arg1: Arg1, arg2: Arg2) => Observable<T>,\n  keyGen: (arg1: Arg1, arg2: Arg2) => string\n): (arg1: Arg1, arg2: Arg2) => Observable<T>\n\nexport function memoize<T, Arg1, Arg2, Arg3>(\n  fn: (arg1: Arg1, arg2: Arg2, arg3: Arg3) => Observable<T>,\n  keyGen: (arg1: Arg1, arg2: Arg2, arg3: Arg3) => string\n): (arg1: Arg1, arg2: Arg2, arg3: Arg3) => Observable<T>\n\nexport function memoize<T, Arg1, Arg2, Arg3, Arg4>(\n  fn: (arg1: Arg1, arg2: Arg2, arg3: Arg3, arg4: Arg4) => Observable<T>,\n  keyGen: (arg1: Arg1, arg2: Arg2, arg3: Arg3, arg4: Arg4) => string\n): (arg1: Arg1, arg2: Arg2, arg3: Arg3, arg4: Arg4) => Observable<T>\n\nexport function memoize<T, Args>(\n  fn: (...args: Args[]) => Observable<T>,\n  keyGen: (...args: Args[]) => string\n) {\n  const MEMO: {[key: string]: Observable<T>} = Object.create(null)\n  return (...args: any[]) => {\n    const key = keyGen(...args)\n    if (!(key in MEMO)) {\n      MEMO[key] = fn(...args)\n    }\n    return MEMO[key]\n  }\n}\n","import {SanityClient} from '@sanity/client'\nimport {Observable} from 'rxjs'\nimport {publishReplay, refCount} from 'rxjs/operators'\nimport {IdPair} from '../types'\nimport {memoize} from '../utils/createMemoizer'\nimport {checkoutPair, Pair} from './checkoutPair'\n\nexport const memoizedPair: (\n  client: SanityClient,\n  idPair: IdPair,\n  _typeName?: string\n) => Observable<Pair> = memoize(\n  (client: SanityClient, idPair: IdPair, _typeName?: string): Observable<Pair> => {\n    return new Observable<Pair>((subscriber) => {\n      subscriber.next(checkoutPair(client, idPair))\n    }).pipe(publishReplay(1), refCount())\n  },\n  (_client, idPair) => idPair.publishedId\n)\n","import {SanityClient} from '@sanity/client'\nimport {SanityDocument} from '@sanity/types'\nimport {filter, map, publishReplay, refCount} from 'rxjs/operators'\nimport {Observable} from 'rxjs'\nimport {IdPair, Mutation, ReconnectEvent} from '../types'\nimport {BufferedDocumentEvent} from '../buffered-doc/createBufferedDocument'\nimport {SnapshotEvent} from '../buffered-doc/types'\nimport {memoize} from '../utils/createMemoizer'\nimport {memoizedPair} from './memoizedPair'\nimport {DocumentVersion} from './checkoutPair'\n\n// return true if the event comes with a document snapshot\nfunction isSnapshotEvent(event: BufferedDocumentEvent | ReconnectEvent): event is SnapshotEvent & {\n  version: 'published' | 'draft'\n} {\n  return event.type === 'snapshot'\n}\n\nfunction withSnapshots(pair: DocumentVersion): DocumentVersionSnapshots {\n  return {\n    snapshots$: pair.events.pipe(\n      filter(isSnapshotEvent),\n      map((event) => event.document),\n      publishReplay(1),\n      refCount()\n    ),\n\n    patch: pair.patch,\n    create: pair.create,\n    createIfNotExists: pair.createIfNotExists,\n    createOrReplace: pair.createOrReplace,\n    delete: pair.delete,\n\n    mutate: pair.mutate,\n    commit: pair.commit,\n  }\n}\nexport interface DocumentVersionSnapshots {\n  snapshots$: Observable<SanityDocument>\n\n  // helper functions\n  patch: (patches: any[]) => Mutation[]\n  create: (document: any) => Mutation\n  createIfNotExists: (document: any) => Mutation\n  createOrReplace: (document: any) => Mutation\n  delete: () => Mutation\n\n  mutate: (mutations: Mutation[]) => void\n  commit: () => Observable<never>\n}\n\nexport interface SnapshotPair {\n  draft: DocumentVersionSnapshots\n  published: DocumentVersionSnapshots\n}\n\nexport const snapshotPair = memoize(\n  (client: SanityClient, idPair: IdPair, typeName: string) => {\n    return memoizedPair(client, idPair, typeName).pipe(\n      map(({published, draft}): SnapshotPair => {\n        return {\n          published: withSnapshots(published),\n          draft: withSnapshots(draft),\n        }\n      }),\n      publishReplay(1),\n      refCount()\n    )\n  },\n  (_client, idPair, typeName) => idPair.publishedId + typeName\n)\n","/* eslint-disable @typescript-eslint/no-use-before-define */\n\nimport {SanityClient} from '@sanity/client'\nimport {Schema} from '@sanity/types'\nimport {combineLatest, Observable} from 'rxjs'\nimport {map, publishReplay, refCount, switchMap} from 'rxjs/operators'\nimport {HistoryStore} from '../../history'\nimport {IdPair, OperationArgs} from '../types'\nimport {memoize} from '../utils/createMemoizer'\nimport {snapshotPair} from './snapshotPair'\n\nexport const operationArgs = memoize(\n  (\n    ctx: {\n      client: SanityClient\n      historyStore: HistoryStore\n      schema: Schema\n    },\n    idPair: IdPair,\n    typeName: string\n  ): Observable<OperationArgs> => {\n    return snapshotPair(ctx.client, idPair, typeName).pipe(\n      switchMap((versions) =>\n        combineLatest([versions.draft.snapshots$, versions.published.snapshots$]).pipe(\n          map(\n            ([draft, published]): OperationArgs => ({\n              ...ctx,\n              idPair,\n              typeName: typeName,\n              snapshots: {draft, published},\n              draft: versions.draft,\n              published: versions.published,\n            })\n          )\n        )\n      ),\n      publishReplay(1),\n      refCount()\n    )\n  },\n  (_ctx, idPair, typeName) => idPair.publishedId + typeName\n)\n","import {Schema} from '@sanity/types'\n\nexport const isLiveEditEnabled = (schema: Schema, typeName: string): boolean =>\n  schema.get(typeName)?.liveEdit === true\n","import type {SanityClient} from '@sanity/client'\nimport {SanityDocument, Schema} from '@sanity/types'\nimport {Observable} from 'rxjs'\nimport {map, publishReplay, refCount, startWith} from 'rxjs/operators'\nimport {HistoryStore} from '../../history'\nimport {IdPair} from '../types'\nimport {operationArgs} from './operationArgs'\nimport {isLiveEditEnabled} from './utils/isLiveEditEnabled'\n\n// TODO: should we rename this?\nexport interface EditStateFor {\n  id: string\n  type: string\n  draft: SanityDocument | null\n  published: SanityDocument | null\n  liveEdit: boolean\n  ready: boolean\n}\n\nexport const editState = (\n  ctx: {\n    client: SanityClient\n    historyStore: HistoryStore\n    schema: Schema\n  },\n  idPair: IdPair,\n  typeName: string\n): Observable<EditStateFor> => {\n  const liveEdit = isLiveEditEnabled(ctx.schema, typeName)\n  return operationArgs(ctx, idPair, typeName).pipe(\n    map(({snapshots}) => ({\n      id: idPair.publishedId,\n      type: typeName,\n      draft: snapshots.draft,\n      published: snapshots.published,\n      liveEdit,\n      ready: true,\n    })),\n    startWith({\n      id: idPair.publishedId,\n      type: typeName,\n      draft: null,\n      published: null,\n      liveEdit,\n      ready: false,\n    }),\n    publishReplay(1),\n    refCount()\n  )\n}\n","import type {Observable} from 'rxjs'\nimport type {MultipleMutationResult} from '@sanity/client'\nimport type {OperationArgs} from '../../types'\nimport {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\n\nexport const del = {\n  disabled: ({snapshots}: OperationArgs): 'NOTHING_TO_DELETE' | false =>\n    snapshots.draft || snapshots.published ? false : 'NOTHING_TO_DELETE',\n  execute: ({\n    client,\n    idPair,\n    schema,\n    typeName,\n  }: OperationArgs): Observable<MultipleMutationResult> => {\n    const tx = client.observable.transaction().delete(idPair.publishedId)\n\n    if (isLiveEditEnabled(schema, typeName)) {\n      return tx.commit({tag: 'document.delete'})\n    }\n\n    return tx.delete(idPair.draftId).commit({\n      tag: 'document.delete',\n      visibility: 'async',\n      // this disables referential integrity for cross-dataset references. we\n      // have this set because we warn against deletes in the `ConfirmDeleteDialog`\n      // UI. This operation is run when \"delete anyway\" is clicked\n      skipCrossDatasetReferenceValidation: true,\n    })\n  },\n}\n","import {omit} from 'lodash'\nimport {isReference} from '@sanity/types'\nimport type {Observable} from 'rxjs'\nimport type {MultipleMutationResult} from '@sanity/client'\nimport type {OperationArgs} from '../../types'\nimport {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\n\nfunction strengthenOnPublish(obj: unknown): any {\n  if (isReference(obj)) {\n    if (obj._strengthenOnPublish) {\n      return omit(\n        obj,\n        ['_strengthenOnPublish'].concat(obj._strengthenOnPublish.weak ? [] : ['_weak'])\n      )\n    }\n    return obj\n  }\n  if (typeof obj !== 'object' || !obj) return obj\n  if (Array.isArray(obj)) return obj.map(strengthenOnPublish)\n  return Object.fromEntries(\n    Object.entries(obj).map(([key, value]) => [key, strengthenOnPublish(value)] as const)\n  )\n}\n\nexport const publish = {\n  disabled: ({\n    schema,\n    typeName,\n    snapshots,\n  }: OperationArgs): 'LIVE_EDIT_ENABLED' | 'ALREADY_PUBLISHED' | 'NO_CHANGES' | false => {\n    if (isLiveEditEnabled(schema, typeName)) {\n      return 'LIVE_EDIT_ENABLED'\n    }\n    if (!snapshots.draft) {\n      return snapshots.published ? 'ALREADY_PUBLISHED' : 'NO_CHANGES'\n    }\n    return false\n  },\n  execute: ({client, idPair, snapshots}: OperationArgs): Observable<MultipleMutationResult> => {\n    const tx = client.observable.transaction()\n\n    if (!snapshots.draft) {\n      throw new Error('cannot execute \"publish\" when draft is missing')\n    }\n\n    const value = strengthenOnPublish(omit(snapshots.draft, '_updatedAt'))\n\n    if (snapshots.published) {\n      // If it exists already, we only want to update it if the revision on the remote server\n      // matches what our local state thinks it's at\n      tx.patch(idPair.publishedId, {\n        // Hack until other mutations support revision locking\n        unset: ['_revision_lock_pseudo_field_'],\n        ifRevisionID: snapshots.published._rev,\n      })\n\n      tx.createOrReplace({\n        ...value,\n        _id: idPair.publishedId,\n        _type: snapshots.draft._type,\n      })\n    } else {\n      // If the document has not been published, we want to create it - if it suddenly exists\n      // before being created, we don't want to overwrite if, instead we want to yield an error\n      tx.create({\n        ...value,\n        _id: idPair.publishedId,\n        _type: snapshots.draft._type,\n      })\n    }\n\n    tx.delete(idPair.draftId)\n\n    return tx.commit({tag: 'document.publish', visibility: 'async'})\n  },\n}\n","import type {OperationArgs} from '../../types'\nimport {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\n\n// todo: we could also consider exposing 'mutate' directly\nexport const patch = {\n  disabled: (): false => false,\n  execute: (\n    {schema, snapshots, idPair, draft, published, typeName}: OperationArgs,\n    patches = [],\n    initialValue: any\n  ): void => {\n    if (isLiveEditEnabled(schema, typeName)) {\n      // No drafting, so patch and commit the published document\n      published.mutate([\n        published.createIfNotExists({\n          _type: typeName,\n          ...initialValue,\n        }),\n        ...published.patch(patches),\n      ])\n    } else {\n      draft.mutate([\n        draft.createIfNotExists({\n          ...initialValue,\n          ...snapshots.published,\n          _id: idPair.draftId,\n          _type: typeName,\n        }),\n        ...draft.patch(patches),\n      ])\n    }\n  },\n}\n","import {merge, Observable} from 'rxjs'\nimport type {OperationArgs} from '../../types'\n\nexport const commit = {\n  disabled: (): false => false,\n  execute: ({draft, published}: OperationArgs): Observable<never> => {\n    return merge(draft.commit(), published.commit())\n  },\n}\n","import type {Observable} from 'rxjs'\nimport type {MultipleMutationResult} from '@sanity/client'\nimport type {OperationArgs} from '../../types'\n\nexport const discardChanges = {\n  disabled: ({snapshots}: OperationArgs): 'NO_CHANGES' | 'NOT_PUBLISHED' | false => {\n    if (!snapshots.draft) {\n      return 'NO_CHANGES'\n    }\n    if (!snapshots.published) {\n      return 'NOT_PUBLISHED'\n    }\n    return false\n  },\n  execute: ({client, idPair}: OperationArgs): Observable<MultipleMutationResult> => {\n    return client.observable\n      .transaction()\n      .delete(idPair.draftId)\n      .commit({tag: 'document.discard-changes', visibility: 'async'})\n  },\n}\n","import {omit} from 'lodash'\nimport type {Observable} from 'rxjs'\nimport type {MultipleMutationResult} from '@sanity/client'\nimport type {OperationArgs} from '../../types'\nimport {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\n\nexport const unpublish = {\n  disabled: ({\n    schema,\n    snapshots,\n    typeName,\n  }: OperationArgs): 'LIVE_EDIT_ENABLED' | 'NOT_PUBLISHED' | false => {\n    if (isLiveEditEnabled(schema, typeName)) {\n      return 'LIVE_EDIT_ENABLED'\n    }\n    return snapshots.published ? false : 'NOT_PUBLISHED'\n  },\n  execute: ({client, idPair, snapshots}: OperationArgs): Observable<MultipleMutationResult> => {\n    let tx = client.observable.transaction().delete(idPair.publishedId)\n\n    if (snapshots.published) {\n      tx = tx.createIfNotExists({\n        ...omit(snapshots.published, '_updatedAt'),\n        _id: idPair.draftId,\n        _type: snapshots.published._type,\n      })\n    }\n\n    return tx.commit({\n      tag: 'document.unpublish',\n      visibility: 'async',\n      // this disables referential integrity for cross-dataset references. we\n      // have this set because we warn against unpublishes in the `ConfirmDeleteDialog`\n      // UI. This operation is run when \"unpublish anyway\" is clicked\n      skipCrossDatasetReferenceValidation: true,\n    })\n  },\n}\n","import {omit} from 'lodash'\nimport type {Observable} from 'rxjs'\nimport type {SanityDocument} from '@sanity/client'\nimport type {OperationArgs} from '../../types'\nimport {getDraftId} from '../../../../util/draftUtils'\nimport {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\n\nconst omitProps = ['_createdAt', '_updatedAt']\n\nexport const duplicate = {\n  disabled: ({snapshots}: OperationArgs): 'NOTHING_TO_DUPLICATE' | false => {\n    return snapshots.published || snapshots.draft ? false : 'NOTHING_TO_DUPLICATE'\n  },\n  execute: (\n    {client, schema, snapshots, typeName}: OperationArgs,\n    dupeId: string\n  ): Observable<SanityDocument> => {\n    const source = snapshots.draft || snapshots.published\n\n    if (!source) {\n      throw new Error('cannot execute on empty document')\n    }\n\n    return client.observable.create(\n      {\n        ...omit(source, omitProps),\n        _id: isLiveEditEnabled(schema, typeName) ? dupeId : getDraftId(dupeId),\n        _type: source._type,\n      },\n      {\n        visibility: 'async',\n        tag: 'document.duplicate',\n      }\n    )\n  },\n}\n","import type {SanityDocument} from '@sanity/client'\nimport type {Observable} from 'rxjs'\nimport type {OperationArgs} from '../../types'\nimport {isLiveEditEnabled} from '../utils/isLiveEditEnabled'\n\nexport const restore = {\n  disabled: (): false => false,\n  execute: (\n    {historyStore, idPair, schema, typeName}: OperationArgs,\n    fromRevision: string\n  ): Observable<SanityDocument> => {\n    const targetId = isLiveEditEnabled(schema, typeName) ? idPair.publishedId : idPair.draftId\n    return historyStore.restore(idPair.publishedId, targetId, fromRevision)\n  },\n}\n","import {SanityClient} from '@sanity/client'\nimport {Observable, combineLatest} from 'rxjs'\nimport {distinctUntilChanged, map, publishReplay, refCount, switchMap} from 'rxjs/operators'\nimport {memoize} from '../utils/createMemoizer'\nimport {IdPair} from '../types'\nimport {memoizedPair} from './memoizedPair'\n\n// A stream of all events related to either published or draft, each event comes with a 'target'\n// that specifies which version (draft|published) the event is about\nexport const consistencyStatus: (\n  client: SanityClient,\n  idPair: IdPair,\n  typeName: string\n) => Observable<boolean> = memoize(\n  (client: SanityClient, idPair: IdPair, typeName: string) => {\n    return memoizedPair(client, idPair, typeName).pipe(\n      switchMap(({draft, published}) =>\n        combineLatest([draft.consistency$, published.consistency$])\n      ),\n      map(\n        ([draftIsConsistent, publishedIsConsistent]) => draftIsConsistent && publishedIsConsistent\n      ),\n      distinctUntilChanged(),\n      publishReplay(1),\n      refCount()\n    )\n  },\n  (_client, idPair, typeName) => idPair.publishedId + typeName\n)\n","import {SanityClient} from '@sanity/client'\nimport {defer, asyncScheduler, merge, Observable, of, Subject, EMPTY} from 'rxjs'\nimport {\n  catchError,\n  filter,\n  groupBy,\n  last,\n  map,\n  mergeMap,\n  mergeMapTo,\n  share,\n  switchMap,\n  take,\n  tap,\n  throttleTime,\n} from 'rxjs/operators'\nimport {Schema} from '@sanity/types'\nimport {IdPair, OperationArgs} from '../types'\nimport {HistoryStore} from '../../history'\nimport {OperationImpl, OperationsAPI} from './operations'\nimport {operationArgs} from './operationArgs'\nimport {del} from './operations/delete'\nimport {publish} from './operations/publish'\nimport {patch} from './operations/patch'\nimport {commit} from './operations/commit'\nimport {discardChanges} from './operations/discardChanges'\nimport {unpublish} from './operations/unpublish'\nimport {duplicate} from './operations/duplicate'\nimport {restore} from './operations/restore'\nimport {consistencyStatus} from './consistencyStatus'\n\ninterface ExecuteArgs {\n  operationName: keyof OperationsAPI\n  idPair: IdPair\n  typeName: string\n  extraArgs: any[]\n}\n\nfunction maybeObservable(v: void | Observable<any>) {\n  return typeof v === 'undefined' ? of(null) : v\n}\n\nconst operationImpls: {[name: string]: OperationImpl<any>} = {\n  del: del,\n  delete: del,\n  publish,\n  patch,\n  commit,\n  discardChanges,\n  unpublish,\n  duplicate,\n  restore,\n}\n\nconst execute = (\n  operationName: keyof typeof operationImpls,\n  operationArguments: OperationArgs,\n  extraArgs: any[]\n): Observable<any> => {\n  const operation = operationImpls[operationName]\n  return defer(() =>\n    merge(of(null), maybeObservable(operation.execute(operationArguments, ...extraArgs)))\n  ).pipe(last())\n}\n\nconst operationCalls$ = new Subject<ExecuteArgs>()\n\nexport function emitOperation(\n  operationName: keyof OperationsAPI,\n  idPair: IdPair,\n  typeName: string,\n  extraArgs: any[]\n): void {\n  operationCalls$.next({operationName, idPair, typeName, extraArgs})\n}\n\n// These are the operations that cannot be performed while the document is in an inconsistent state\nconst REQUIRES_CONSISTENCY = ['publish', 'unpublish', 'discardChanges', 'delete']\n\nexport interface OperationError {\n  type: 'error'\n  op: keyof OperationsAPI\n  id: string\n  error: Error\n}\n\nexport interface OperationSuccess {\n  type: 'success'\n  op: keyof OperationsAPI\n  id: string\n}\n\ninterface IntermediarySuccess {\n  type: 'success'\n  args: ExecuteArgs\n}\n\ninterface IntermediaryError {\n  type: 'error'\n  args: ExecuteArgs\n  error: any\n}\n\nexport type OperationEventsListener = (\n  idPair: IdPair,\n  typeName?: string\n) => Observable<OperationSuccess | OperationError>\n\nconst listenerCache = new Map<string, OperationEventsListener>()\n\nexport function getOperationEvents(ctx: {\n  client: SanityClient\n  historyStore: HistoryStore\n  schema: Schema\n}): OperationEventsListener {\n  const {dataset, projectId} = ctx.client.config()\n  const cacheKey = `${projectId}-${dataset}`\n  if (listenerCache.has(cacheKey)) {\n    return listenerCache.get(cacheKey)!\n  }\n\n  const result$: Observable<IntermediarySuccess | IntermediaryError> = operationCalls$.pipe(\n    groupBy((op) => op.idPair.publishedId),\n    mergeMap((groups$) =>\n      groups$.pipe(\n        // although it might look like a but, dropping pending async operations here is actually a feature\n        // E.g. if the user types `publish` which is async and then starts patching (sync) then the publish\n        // should be cancelled\n        switchMap((args) =>\n          operationArgs(ctx, args.idPair, args.typeName).pipe(\n            take(1),\n            switchMap((operationArguments) => {\n              const requiresConsistency = REQUIRES_CONSISTENCY.includes(args.operationName)\n              if (requiresConsistency) {\n                operationArguments.published.commit()\n                operationArguments.draft.commit()\n              }\n              const isConsistent$ = consistencyStatus(ctx.client, args.idPair, args.typeName).pipe(\n                filter(Boolean)\n              )\n              const ready$ = requiresConsistency ? isConsistent$.pipe(take(1)) : of(null)\n              return ready$.pipe(\n                // eslint-disable-next-line max-nested-callbacks\n                mergeMap(() => execute(args.operationName, operationArguments, args.extraArgs))\n              )\n            }),\n            map((): IntermediarySuccess => ({type: 'success', args})),\n            catchError(\n              (err): Observable<IntermediaryError> => of({type: 'error', args, error: err})\n            )\n          )\n        )\n      )\n    ),\n    share()\n  )\n\n  // this enables autocommit after patch operations\n  const AUTOCOMMIT_INTERVAL = 1000\n  const autoCommit$ = result$.pipe(\n    filter((result) => result.type === 'success' && result.args.operationName === 'patch'),\n    throttleTime(AUTOCOMMIT_INTERVAL, asyncScheduler, {leading: true, trailing: true}),\n    tap((result) => {\n      emitOperation('commit', result.args.idPair, result.args.typeName, [])\n    })\n  )\n\n  const cache = new Map<string, Observable<OperationSuccess | OperationError>>()\n\n  function listener(\n    idPair: IdPair,\n    typeName?: string\n  ): Observable<OperationSuccess | OperationError> {\n    const key = `${idPair.publishedId}:${typeName}`\n\n    let ret = cache.get(key)\n\n    if (!ret) {\n      ret = merge(result$, autoCommit$.pipe(mergeMapTo(EMPTY))).pipe(\n        filter((result) => result.args.idPair.publishedId === idPair.publishedId),\n        map((result): OperationSuccess | OperationError => {\n          const {operationName, idPair: documentIds} = result.args\n          return result.type === 'success'\n            ? {type: 'success', op: operationName, id: documentIds.publishedId}\n            : {type: 'error', op: operationName, id: documentIds.publishedId, error: result.error}\n        })\n      )\n\n      cache.set(key, ret)\n    }\n\n    return ret\n  }\n\n  listenerCache.set(cacheKey, listener)\n\n  return listener\n}\n","import {IdPair, OperationArgs} from '../../types'\nimport {emitOperation} from '../operationEvents'\nimport {del} from './delete'\nimport {publish} from './publish'\nimport {patch} from './patch'\nimport {commit} from './commit'\nimport {discardChanges} from './discardChanges'\nimport {unpublish} from './unpublish'\nimport {duplicate} from './duplicate'\nimport {restore} from './restore'\n\n/* Ok, this became a bit messy - sorry\n *  The important thing to consider here is the PublicOperations interface -\n *  as long as this is properly typed, how everything else is implemented doesn't matter\n *  */\n\nexport interface GuardedOperation {\n  disabled: 'NOT_READY'\n  execute: () => never\n}\n\nexport type WrappedOperation<ErrorStrings> = {\n  disabled: false | ErrorStrings\n  execute: () => void\n}\n\nexport type OperationImpl<ErrorStrings> = {\n  disabled: (args: OperationArgs) => false | ErrorStrings\n  execute(args: OperationArgs, ...extra: any[]): void\n}\n\nexport type Operation<DisabledReasons = false> =\n  | GuardedOperation\n  | WrappedOperation<DisabledReasons>\n\n// Note: Changing this interface in a backwards incompatible manner will be a breaking change\nexport interface OperationsAPI {\n  commit: Operation\n  delete: Operation<'NOTHING_TO_DELETE'>\n  del: Operation<'NOTHING_TO_DELETE'>\n  publish: Operation<'LIVE_EDIT_ENABLED' | 'ALREADY_PUBLISHED' | 'NO_CHANGES'>\n  patch: Operation<(patches: any[]) => void>\n  discardChanges: Operation<'NO_CHANGES' | 'NOT_PUBLISHED'>\n  unpublish: Operation<'LIVE_EDIT_ENABLED' | 'NOT_PUBLISHED'>\n  duplicate: Operation<'NOTHING_TO_DUPLICATE'>\n  restore: Operation<(revision: string) => Promise<void>>\n}\n\nfunction createOperationGuard(opName: string): GuardedOperation {\n  return {\n    disabled: 'NOT_READY',\n    execute: () => {\n      throw new Error(`Called ${opName} before it was ready.`)\n    },\n  }\n}\n\n// This creates a version of the operations api that will throw if called.\n// Most operations depend on having the \"current document state\" available locally and if an action gets called\n// before we have the state available, we throw an error to signal \"premature\" invocation before ready\nexport const GUARDED: OperationsAPI = {\n  commit: createOperationGuard('commit'),\n  delete: createOperationGuard('delete'),\n  del: createOperationGuard('del'),\n  publish: createOperationGuard('publish'),\n  patch: createOperationGuard('patch'),\n  discardChanges: createOperationGuard('discardChanges'),\n  unpublish: createOperationGuard('unpublish'),\n  duplicate: createOperationGuard('duplicate'),\n  restore: createOperationGuard('restore'),\n}\n\nconst createEmitter = (operationName: keyof OperationsAPI, idPair: IdPair, typeName: string) => {\n  return (...executeArgs: any[]) => {\n    return emitOperation(operationName, idPair, typeName, executeArgs)\n  }\n}\n\nfunction wrap<ErrorStrings>(\n  opName: keyof OperationsAPI,\n  op: OperationImpl<ErrorStrings>,\n  operationArgs: OperationArgs\n): WrappedOperation<ErrorStrings> {\n  const disabled = op.disabled(operationArgs)\n  return {\n    disabled,\n    execute: createEmitter(opName, operationArgs.idPair, operationArgs.typeName),\n  }\n}\n\nexport function createOperationsAPI(args: OperationArgs): OperationsAPI {\n  return {\n    commit: wrap('commit', commit, args),\n    delete: wrap('delete', del, args),\n    del: wrap('delete', del, args),\n    publish: wrap('publish', publish, args),\n    patch: wrap('patch', patch, args),\n    discardChanges: wrap('discardChanges', discardChanges, args),\n    unpublish: wrap('unpublish', unpublish, args),\n    duplicate: wrap('duplicate', duplicate, args),\n    restore: wrap('restore', restore, args),\n  }\n}\n","import {SanityClient} from '@sanity/client'\nimport {merge} from 'rxjs'\nimport {switchMap} from 'rxjs/operators'\nimport {IdPair} from '../types'\nimport {memoize} from '../utils/createMemoizer'\nimport {memoizedPair} from './memoizedPair'\n\nexport const remoteSnapshots = memoize(\n  (client: SanityClient, idPair: IdPair, typeName: string) => {\n    return memoizedPair(client, idPair, typeName).pipe(\n      switchMap(({published, draft}) => merge(published.remoteSnapshot$, draft.remoteSnapshot$))\n    )\n  },\n  (_client, idPair, typeName) => idPair.publishedId + typeName\n)\n","import type {SanityClient} from '@sanity/client'\nimport {concat, of, combineLatest, defer, from, Observable} from 'rxjs'\nimport {\n  map,\n  scan,\n  switchMap,\n  mergeMap,\n  publishReplay,\n  refCount,\n  share,\n  distinctUntilChanged,\n  debounceTime,\n  first,\n} from 'rxjs/operators'\nimport {validateDocument} from '@sanity/validation'\nimport {ValidationMarker, ValidationContext, isReference, Schema} from '@sanity/types'\nimport reduceJSON from 'json-reduce'\nimport {SourceClientOptions} from '../../../config'\nimport {memoize} from '../utils/createMemoizer'\nimport {IdPair} from '../types'\nimport {HistoryStore} from '../../history'\nimport {DocumentPreviewStore} from '../../../preview'\nimport {editState} from './editState'\n\nexport interface ValidationStatus {\n  isValidating: boolean\n  validation: ValidationMarker[]\n}\n\nconst INITIAL_VALIDATION_STATUS: ValidationStatus = {isValidating: true, validation: []}\n\nfunction findReferenceIds(obj: any): Set<string> {\n  return reduceJSON(\n    obj,\n    (acc, node) => {\n      if (isReference(node)) {\n        acc.add(node._ref)\n      }\n      return acc\n    },\n    new Set<string>()\n  )\n}\n\ntype GetDocumentExists = NonNullable<ValidationContext['getDocumentExists']>\n\nconst listenDocumentExists = (\n  previewStore: DocumentPreviewStore,\n  id: string\n): Observable<boolean> =>\n  previewStore\n    .unstable_observeDocumentPairAvailability({_type: 'reference', _ref: id})\n    .pipe(map(({published}) => published.available))\n\nexport const validation = memoize(\n  (\n    ctx: {\n      client: SanityClient\n      getClient: (options: SourceClientOptions) => SanityClient\n      documentPreviewStore: DocumentPreviewStore\n      historyStore: HistoryStore\n      schema: Schema\n    },\n    {draftId, publishedId}: IdPair,\n    typeName: string\n  ): Observable<ValidationStatus> => {\n    const getDocumentExists: GetDocumentExists = ({id}) =>\n      listenDocumentExists(ctx.documentPreviewStore, id).pipe(first()).toPromise()\n\n    const document$ = editState(ctx, {draftId, publishedId}, typeName).pipe(\n      map(({draft, published}) => draft || published),\n      // this debounce is needed for performance. it prevents the validation\n      // from being run on every keypress\n      debounceTime(300),\n      share()\n    )\n\n    const referenceIds$ = document$.pipe(\n      map((document) => findReferenceIds(document)),\n      distinctUntilChanged((curr, next) => {\n        if (curr.size !== next.size) return false\n        for (const item of curr) {\n          if (!next.has(item)) return false\n        }\n        return true\n      })\n    )\n\n    const referencedDocumentUpdate$ = referenceIds$.pipe(\n      switchMap((idSet) =>\n        from(idSet).pipe(\n          mergeMap((id) =>\n            listenDocumentExists(ctx.documentPreviewStore, id).pipe(\n              map(\n                // eslint-disable-next-line max-nested-callbacks\n                (result) => [id, result] as const\n              )\n            )\n          ),\n          // the `debounceTime` in the next stream removes multiple emissions\n          // caused by this scan\n          scan(\n            (acc, [id, result]) => ({\n              ...acc,\n              [id]: result,\n            }),\n            {} as Record<string, boolean>\n          )\n        )\n      ),\n      distinctUntilChanged((curr, next) => {\n        const currKeys = Object.keys(curr)\n        const nextKeys = Object.keys(next)\n        if (currKeys.length !== nextKeys.length) return false\n        for (const key of currKeys) {\n          if (curr[key] !== next[key]) return false\n        }\n        return true\n      })\n    )\n\n    return combineLatest([\n      // from document edits\n      document$,\n      // and from document dependency events\n      concat(\n        // note: that the `referencedDocumentUpdate$` may not pre-emit any\n        // events (unlike `editState` which includes `publishReplay(1)`), so\n        // we `concat` the stream with an empty emission so `combineLatest` will\n        // emit as soon as `editState` emits\n        //\n        // > Be aware that `combineLatest` will not emit an initial value until\n        // > each observable emits at least one value.\n        // https://www.learnrxjs.io/learn-rxjs/operators/combination/combinelatest#why-use-combinelatest\n        of(null),\n        referencedDocumentUpdate$\n      ).pipe(\n        // don't remove, see `debounceTime` comment above\n        debounceTime(50)\n      ),\n    ]).pipe(\n      map(([document]) => document),\n      switchMap((document) =>\n        concat(\n          of({isValidating: true}),\n          defer(async () => {\n            if (!document?._type) {\n              return {validation: [], isValidating: false}\n            }\n\n            // TODO: consider cancellation eventually\n            const markers = await validateDocument(ctx.getClient, document, ctx.schema, {\n              getDocumentExists,\n            })\n\n            return {validation: markers, isValidating: false}\n          })\n        )\n      ),\n      scan((acc, next) => ({...acc, ...next}), INITIAL_VALIDATION_STATUS),\n      publishReplay(1),\n      refCount()\n    )\n  },\n  (_ctx, idPair) => idPair.publishedId\n)\n","import {SanityClient} from '@sanity/client'\nimport {merge, Observable} from 'rxjs'\nimport {switchMap} from 'rxjs/operators'\nimport {IdPair} from '../types'\nimport {DocumentVersionEvent} from './checkoutPair'\nimport {memoizedPair} from './memoizedPair'\n\n// A stream of all events related to either published or draft, each event comes with a 'target'\n// that specifies which version (draft|published) the event is about\nexport function documentEvents(\n  client: SanityClient,\n  idPair: IdPair,\n  typeName?: string\n): Observable<DocumentVersionEvent> {\n  return memoizedPair(client, idPair).pipe(\n    switchMap(({draft, published}) => merge(draft.events, published.events))\n  )\n}\n","import {SanityClient} from '@sanity/client'\nimport {Schema} from '@sanity/types'\nimport {concat, merge, Observable, of, EMPTY} from 'rxjs'\nimport {map, publishReplay, refCount, mergeMapTo} from 'rxjs/operators'\nimport {HistoryStore} from '../../history'\nimport {IdPair} from '../types'\nimport {operationArgs} from './operationArgs'\nimport {getOperationEvents} from './operationEvents'\nimport {createOperationsAPI, GUARDED, OperationsAPI} from './operations'\n\nconst cache = new Map<string, Observable<OperationsAPI>>()\n\nexport const editOperations = (\n  ctx: {\n    client: SanityClient\n    historyStore: HistoryStore\n    schema: Schema\n  },\n  idPair: IdPair,\n  typeName: string\n): Observable<OperationsAPI> => {\n  const key = `${idPair.publishedId}:${typeName}`\n  let ret = cache.get(key)\n\n  if (!ret) {\n    const operationEvents = getOperationEvents(ctx)\n\n    // To makes sure we connect the stream that actually performs the operations\n    const operationResults$: Observable<never> = operationEvents(idPair, typeName).pipe(\n      mergeMapTo(EMPTY)\n    )\n\n    const operationArgs$ = operationArgs(ctx, idPair, typeName)\n\n    const operations$ = operationArgs$.pipe(map(createOperationsAPI))\n\n    ret = concat(of(GUARDED), merge(operationResults$, operations$)).pipe(\n      publishReplay(1),\n      refCount()\n    )\n\n    cache.set(key, ret)\n  }\n\n  return ret\n}\n","import {SanityClient} from '@sanity/client'\nimport {defer, partition, merge, of, throwError, asyncScheduler, Observable} from 'rxjs'\nimport {mergeMap, throttleTime, share, take, filter} from 'rxjs/operators'\nimport {exhaustMapToWithTrailing} from 'rxjs-exhaustmap-with-trailing'\nimport {ReconnectEvent, WelcomeEvent, MutationEvent} from './types'\n\nexport type ListenQueryParams = Record<string, string | number | boolean | string[]>\n\nexport interface ListenQueryOptions {\n  tag?: string\n  apiVersion?: string\n  throttleTime?: number\n  transitions?: ('update' | 'appear' | 'disappear')[]\n}\n\nconst fetch = (\n  client: SanityClient,\n  query: string,\n  params: ListenQueryParams,\n  options: ListenQueryOptions\n) =>\n  defer(() =>\n    // getVersionedClient(options.apiVersion)\n    client.observable.fetch(query, params, {\n      tag: options.tag,\n      filterResponse: true,\n    })\n  )\n\nconst listen = (\n  client: SanityClient,\n  query: string,\n  params: ListenQueryParams,\n  options: ListenQueryOptions\n) =>\n  defer(() =>\n    // getVersionedClient(options.apiVersion)\n    client.listen(query, params, {\n      events: ['welcome', 'mutation', 'reconnect'],\n      includeResult: false,\n      visibility: 'query',\n      tag: options.tag,\n    })\n  ) as Observable<ReconnectEvent | WelcomeEvent | MutationEvent>\n\nfunction isWelcomeEvent(\n  event: MutationEvent | ReconnectEvent | WelcomeEvent\n): event is WelcomeEvent {\n  return event.type === 'welcome'\n}\n\n// todo: promote as building block for better re-use\n// todo: optimize by patching collection in-place\nexport const listenQuery = (\n  client: SanityClient,\n  query: string | {fetch: string; listen: string},\n  params: ListenQueryParams = {},\n  options: ListenQueryOptions = {}\n) => {\n  const fetchQuery = typeof query === 'string' ? query : query.fetch\n  const listenerQuery = typeof query === 'string' ? query : query.listen\n\n  const fetchOnce$ = fetch(client, fetchQuery, params, options)\n\n  const events$ = listen(client, listenerQuery, params, options).pipe(\n    mergeMap((ev, i) => {\n      const isFirst = i === 0\n      if (isFirst && !isWelcomeEvent(ev)) {\n        // if the first event is not welcome, it is most likely a reconnect and\n        // if it's not a reconnect something is very wrong\n        return throwError(\n          new Error(\n            ev.type === 'reconnect'\n              ? 'Could not establish EventSource connection'\n              : `Received unexpected type of first event \"${ev.type}\"`\n          )\n        )\n      }\n      return of(ev)\n    }),\n    share()\n  )\n\n  const [welcome$, mutationAndReconnect$] = partition(events$, isWelcomeEvent)\n  const isRelevantEvent = (event: MutationEvent | ReconnectEvent | WelcomeEvent): boolean => {\n    if (!options.transitions || event.type !== 'mutation') {\n      return true\n    }\n\n    return options.transitions.includes(event.transition)\n  }\n\n  return merge(\n    welcome$.pipe(take(1)),\n    mutationAndReconnect$.pipe(\n      filter(isRelevantEvent),\n      throttleTime(options.throttleTime || 1000, asyncScheduler, {leading: true, trailing: true})\n    )\n  ).pipe(exhaustMapToWithTrailing(fetchOnce$))\n}\n","import {SanityClient} from '@sanity/client'\nimport type {Observable} from 'rxjs'\nimport {of} from 'rxjs'\nimport {map} from 'rxjs/operators'\nimport {getPublishedId, getDraftId} from '../../util/draftUtils'\n\nexport function resolveTypeForDocument(\n  client: SanityClient,\n  id: string,\n  specifiedType = '*'\n): Observable<string> {\n  // if is resolved document type\n  if (specifiedType && specifiedType !== '*') {\n    return of(specifiedType)\n  }\n\n  const query = '*[_id in [$documentId, $draftId]]._type'\n  const documentId = getPublishedId(id)\n  const draftId = getDraftId(documentId)\n\n  return client.observable.fetch(query, {documentId, draftId}).pipe(map((types) => types[0]))\n}\n","import {isPlainObject} from 'lodash'\n\nexport function isRecord(value: unknown): value is Record<string, unknown> {\n  return isPlainObject(value)\n}\n","import {toString as pathToString} from '@sanity/util/paths'\nimport {randomKey} from '@sanity/util/content'\nimport {Schema} from '@sanity/types'\nimport {TemplateParameter, Template} from './types'\nimport {isRecord} from './util/isRecord'\n\nconst ALLOWED_REF_PROPS = ['_key', '_ref', '_weak', '_type']\nconst REQUIRED_TEMPLATE_PROPS: (keyof Template)[] = ['id', 'title', 'schemaType', 'value']\n\nfunction templateId(template: Template, i: number) {\n  return quote(template.id || template.title) || (typeof i === 'number' && `at index ${i}`) || ''\n}\n\nfunction quote(str: string) {\n  return str && str.length > 0 ? `\"${str}\"` : str\n}\n\nexport function validateTemplates(schema: Schema, templates: Template[]): Template[] {\n  const idMap = new Map()\n\n  templates.forEach((template, i) => {\n    const id = templateId(template, i)\n\n    if (typeof (template as {[key: string]: any}).values !== 'undefined' && !template.value) {\n      throw new Error(`Template ${id} is missing \"value\" property, but contained \"values\". Typo?`)\n    }\n\n    const missing = REQUIRED_TEMPLATE_PROPS.filter((prop) => !template[prop])\n    if (missing.length > 0) {\n      throw new Error(`Template ${id} is missing required properties: ${missing.join(', ')}`)\n    }\n\n    if (typeof template.value !== 'function' && !isRecord(template.value)) {\n      throw new Error(\n        `Template ${id} has an invalid \"value\" property; should be a function or an object`\n      )\n    }\n\n    if (typeof template.parameters !== 'undefined') {\n      if (Array.isArray(template.parameters)) {\n        template.parameters.forEach((param, j) => validateParameter(schema, param, template, j))\n      } else {\n        throw new Error(`Template ${id} has an invalid \"parameters\" property; must be an array`)\n      }\n    }\n\n    if (idMap.has(template.id)) {\n      const dupeIndex = idMap.get(template.id)\n      const dupe = `${quote(templates[dupeIndex].title)} at index ${dupeIndex}`\n      throw new Error(\n        `Template \"${template.title}\" at index ${i} has the same ID (\"${template.id}\") as template ${dupe}`\n      )\n    }\n\n    idMap.set(template.id, i)\n  })\n\n  return templates\n}\n\nexport function validateInitialObjectValue<T extends Record<string, unknown>>(\n  value: T,\n  template: Template\n): T {\n  const contextError = (msg: string) => `Template \"${template.id}\" initial value: ${msg}`\n\n  if (!isRecord(value)) {\n    throw new Error(contextError(`resolved to a non-object`))\n  }\n\n  if (value._type && template.schemaType !== value._type) {\n    throw new Error(\n      contextError(\n        `includes \"_type\"-property (${value._type}) that does not match template (${template.schemaType})`\n      )\n    )\n  }\n\n  try {\n    return validateValue(value)\n  } catch (err) {\n    err.message = contextError(err.message)\n    throw err\n  }\n}\n\nfunction validateValue(value: unknown, path: (string | number)[] = [], parentIsArray = false): any {\n  if (Array.isArray(value)) {\n    return value.map((item, i) => {\n      if (Array.isArray(item)) {\n        throw new Error(\n          `multidimensional arrays are not supported (at path \"${pathToString(path)}\")`\n        )\n      }\n\n      return validateValue(item, path.concat(i), true)\n    })\n  }\n\n  if (!isRecord(value)) {\n    return value\n  }\n\n  // Apply missing keys is the parent is an array\n  const initial: {[key: string]: any} = parentIsArray && !value._key ? {_key: randomKey()} : {}\n\n  // Ensure non-root objects have _type\n  if (path.length > 0 && !value._type) {\n    if (value._ref) {\n      // In the case of references, we know what the type should be, so apply it\n      initial._type = 'reference'\n    } else {\n      // todo: consider if we need to re-instantiate this. It currently makes the valid case of having an initial object value for a field fail\n      // throw new Error(`missing \"_type\" property at path \"${pathToString(path)}\"`)\n    }\n  }\n\n  if (value._ref) {\n    validateReference(value, path)\n  }\n\n  // Validate deeply\n  return Object.keys(value).reduce((acc, key) => {\n    acc[key] = validateValue(value[key], path.concat([key]))\n    return acc\n  }, initial)\n}\n\nfunction validateParameter(\n  schema: Schema,\n  parameter: TemplateParameter,\n  template: Template,\n  index: number\n) {\n  // const schema = getDefaultSchema()\n\n  if (!parameter.name) {\n    throw new Error(\n      `Template ${template.id} has a parameter at index ${index} that is missing its \"name\"-property`\n    )\n  }\n\n  // I know, this is a weird one\n  if (parameter.name === 'template') {\n    throw new Error(\n      `Template parameters cannot be named \"template\", see parameter #${index} for template ${template.id}`\n    )\n  }\n\n  if (!schema.get(parameter.type)) {\n    throw new Error(\n      `Template parameter \"${parameter.name}\" has an invalid/unknown type: \"${parameter.type}\"`\n    )\n  }\n}\n\nfunction validateReference(\n  value: {_type?: unknown; type?: unknown},\n  path: (string | number)[] = []\n) {\n  if (!value._type && value.type) {\n    throw new Error(\n      `Reference is missing \"_type\", but has a \"type\" property at path \"${pathToString(path)}\"`\n    )\n  }\n\n  const disallowed = Object.keys(value).filter((key) => !ALLOWED_REF_PROPS.includes(key))\n  if (disallowed.length > 0) {\n    const plural = disallowed.length > 1 ? 'properties' : 'property'\n    throw new Error(\n      `Disallowed ${plural} found in reference: ${disallowed\n        .map(quote)\n        .join(', ')} at path \"${pathToString(path)}\"`\n    )\n  }\n}\n","import {isRecord} from './isRecord'\n\n// deep object assign for objects\n// note: doesn't mutate target\nexport default function deepAssign(\n  target: Record<string, unknown>,\n  source: Record<string, unknown>\n): Record<string, unknown> {\n  const result = {...target, ...source}\n\n  Object.keys(result).forEach((key) => {\n    const sourceVal = source[key]\n    const targetVal = target[key]\n    if (isRecord(sourceVal) && isRecord(targetVal)) {\n      result[key] = deepAssign(targetVal, sourceVal)\n    }\n  })\n  return result\n}\n","import {\n  ArraySchemaType,\n  InitialValueProperty,\n  InitialValueResolver,\n  InitialValueResolverContext,\n  isArraySchemaType,\n  isObjectSchemaType,\n  ObjectSchemaType,\n  Schema,\n  SchemaType,\n} from '@sanity/types'\nimport {isEmpty, randomKey, resolveTypeName} from '@sanity/util/content'\nimport {isRecord} from './util/isRecord'\nimport {Template} from './types'\nimport {validateInitialObjectValue} from './validate'\nimport deepAssign from './util/deepAssign'\n\ntype Serializeable<T> = {\n  serialize(): T\n}\n\nexport function isBuilder(template: unknown): template is Serializeable<Template> {\n  return isRecord(template) && typeof template.serialize === 'function'\n}\n\n// returns the \"resolved\" value from an initial value property (e.g. type.initialValue)\n// eslint-disable-next-line require-await\nexport async function resolveValue<Params, InitialValue>(\n  initialValueOpt: InitialValueProperty<Params, InitialValue>,\n  params: Params | undefined,\n  context: InitialValueResolverContext\n): Promise<InitialValue | undefined> {\n  return typeof initialValueOpt === 'function'\n    ? (initialValueOpt as InitialValueResolver<Params, InitialValue>)(params, context)\n    : initialValueOpt\n}\n\nexport async function resolveInitialValue(\n  schema: Schema,\n  template: Template,\n  params: {[key: string]: any} = {},\n  context: InitialValueResolverContext\n): Promise<{[key: string]: any}> {\n  // Template builder?\n  if (isBuilder(template)) {\n    return resolveInitialValue(schema, template.serialize(), params, context)\n  }\n\n  const {id, schemaType: schemaTypeName, value} = template\n  if (!value) {\n    throw new Error(`Template \"${id}\" has invalid \"value\" property`)\n  }\n\n  let resolvedValue = await resolveValue(value, params, context)\n\n  if (!isRecord(resolvedValue)) {\n    throw new Error(\n      `Template \"${id}\" has invalid \"value\" property - must be a plain object or a resolver function returning a plain object`\n    )\n  }\n\n  // validate default document initial values\n  resolvedValue = validateInitialObjectValue(resolvedValue, template)\n\n  // Get deep initial values from schema types (note: the initial value from template overrides the types)\n  const schemaType = schema.get(schemaTypeName)\n  if (!schemaType) {\n    throw new Error(`Could not find schema type with name \"${schemaTypeName}\".`)\n  }\n\n  const newValue = deepAssign(\n    (await resolveInitialValueForType(schemaType, params, DEFAULT_MAX_RECURSION_DEPTH, context)) ||\n      {},\n    resolvedValue as Record<string, unknown>\n  )\n\n  // revalidate and return new initial values\n  // todo: would be better to do validation as part of type resolution\n  return validateInitialObjectValue(newValue, template)\n}\n\nexport function getItemType(arrayType: ArraySchemaType, item: unknown): SchemaType | undefined {\n  const itemTypeName = resolveTypeName(item)\n\n  return itemTypeName === 'object' && arrayType.of.length === 1\n    ? arrayType.of[0]\n    : arrayType.of.find((memberType) => memberType.name === itemTypeName)\n}\n\nexport const DEFAULT_MAX_RECURSION_DEPTH = 10\n\n/**\n * Resolve initial value for the given schema type (recursively)\n */\nexport function resolveInitialValueForType<Params extends Record<string, unknown>>(\n  /**\n   * This is the name of the document.\n   */\n  type: SchemaType,\n  /**\n   * Params is a sanity context object passed to every initial value function.\n   */\n  params: Params,\n  /**\n   * Maximum recursion depth (default 9).\n   */\n  maxDepth = DEFAULT_MAX_RECURSION_DEPTH,\n  context: InitialValueResolverContext\n): Promise<any> {\n  if (maxDepth <= 0) {\n    return Promise.resolve(undefined)\n  }\n\n  if (isObjectSchemaType(type)) {\n    return resolveInitialObjectValue(type, params, maxDepth, context)\n  }\n\n  if (isArraySchemaType(type)) {\n    return resolveInitialArrayValue(type, params, maxDepth, context)\n  }\n\n  return resolveValue(type.initialValue, params, context)\n}\n\nasync function resolveInitialArrayValue<Params extends Record<string, unknown>>(\n  type: SchemaType,\n  params: Params,\n  maxDepth: number,\n  context: InitialValueResolverContext\n): Promise<any> {\n  const initialArray = await resolveValue(type.initialValue, undefined, context)\n\n  if (!Array.isArray(initialArray)) {\n    return undefined\n  }\n\n  return Promise.all(\n    initialArray.map(async (initialItem) => {\n      const itemType = getItemType(type as ArraySchemaType, initialItem)!\n      return isObjectSchemaType(itemType)\n        ? {\n            ...initialItem,\n            ...(await resolveInitialValueForType(itemType, params, maxDepth - 1, context)),\n            _key: randomKey(),\n          }\n        : initialItem\n    })\n  )\n}\n\nexport async function resolveInitialObjectValue<Params extends Record<string, unknown>>(\n  type: ObjectSchemaType,\n  params: Params,\n  maxDepth: number,\n  context: InitialValueResolverContext\n): Promise<any> {\n  const initialObject: Record<string, unknown> = {\n    ...((await resolveValue(type.initialValue, params, context)) || {}),\n  }\n\n  const fieldValues: Record<string, any> = {}\n  await Promise.all(\n    type.fields.map(async (field) => {\n      const initialFieldValue = await resolveInitialValueForType(\n        field.type,\n        params,\n        maxDepth - 1,\n        context\n      )\n      if (initialFieldValue !== undefined && initialFieldValue !== null) {\n        fieldValues[field.name] = initialFieldValue\n      }\n    })\n  )\n\n  const merged = deepAssign(fieldValues, initialObject)\n\n  if (isEmpty(merged)) {\n    return undefined\n  }\n\n  if (type.name !== 'object') {\n    merged._type = type.name\n  }\n\n  return merged\n}\n","import {InitialValueResolverContext, Schema} from '@sanity/types'\nimport {from, merge, Observable, of} from 'rxjs'\nimport {\n  map,\n  switchMap,\n  scan,\n  filter,\n  distinctUntilChanged,\n  catchError,\n  debounceTime,\n  startWith,\n} from 'rxjs/operators'\nimport {DocumentPreviewStore} from '../../../preview'\nimport {Template, resolveInitialValue} from '../../../templates'\nimport {getDraftId, getPublishedId} from '../../../util'\nimport {\n  InitialValueErrorMsg,\n  InitialValueLoadingMsg,\n  InitialValueSuccessMsg,\n  InitialValueMsg,\n} from './types'\n\nexport interface InitialValueOptions {\n  documentId: string\n  documentType: string\n  templateName?: string\n  templateParams?: Record<string, any>\n}\n\nconst LOADING_MSG: InitialValueLoadingMsg = {type: 'loading'}\n\n/**\n * @internal\n */\nexport function getInitialValueStream(\n  schema: Schema,\n  initialValueTemplates: Template[],\n  documentPreviewStore: DocumentPreviewStore,\n  opts: InitialValueOptions,\n  context: InitialValueResolverContext\n): Observable<InitialValueMsg> {\n  const draft$ = documentPreviewStore.observePaths(\n    {_type: 'reference', _ref: getDraftId(opts.documentId)},\n    ['_type']\n  )\n\n  const published$ = documentPreviewStore.observePaths(\n    {_type: 'reference', _ref: getPublishedId(opts.documentId)},\n    ['_type']\n  )\n\n  const value$ = merge(\n    draft$.pipe(map((draft) => ({draft}))),\n    published$.pipe(map((published) => ({published})))\n  ).pipe(\n    scan((prev, res) => ({...prev, ...res}), {}),\n    // Wait until we know the state of both draft and published\n    filter((res) => 'draft' in res && 'published' in res),\n    map((res: any) => res.draft || res.published),\n    // Only update if we didn't previously have a document but we now do\n    distinctUntilChanged((prev, next) => Boolean(prev) !== Boolean(next)),\n    // Prevent rapid re-resolving when transitioning between different templates\n    debounceTime(25)\n  )\n\n  return value$.pipe(\n    switchMap((document) => {\n      // Already exists, so no initial value is needed\n      if (document) {\n        return of({type: 'success', value: null})\n      }\n\n      if (!opts.templateName) {\n        // @todo: Make sure this is the correct behavior\n        return of({isResolving: false, initialValue: undefined})\n      }\n\n      const template = initialValueTemplates.find((t) => t.id === opts.templateName)\n\n      if (!template) {\n        // eslint-disable-next-line no-console\n        console.warn('Template \"%s\" not defined, using empty initial value', opts.templateName)\n        return of({isResolving: false, initialValue: undefined})\n      }\n\n      const initialValueWithParams$ = from(\n        resolveInitialValue(schema, template, opts.templateParams, context)\n      )\n        .pipe(map((initialValue) => ({isResolving: false, initialValue})))\n        .pipe(\n          catchError((resolveError) => {\n            /* eslint-disable no-console */\n            console.group('Failed to resolve initial value')\n            console.error(resolveError)\n            console.error('Template ID: %s', opts.templateName)\n            console.error('Parameters: %o', opts.templateParams)\n            console.groupEnd()\n            /* eslint-enable no-console */\n\n            const msg: InitialValueErrorMsg = {type: 'error', error: resolveError}\n\n            return of(msg)\n          })\n        )\n\n      return merge(of({isResolving: true}), initialValueWithParams$).pipe(\n        switchMap(({isResolving, initialValue, resolveError}: any) => {\n          if (resolveError) {\n            return of({type: 'error', message: 'Failed to resolve initial value'})\n          }\n\n          if (isResolving) {\n            return of(LOADING_MSG)\n          }\n\n          const msg: InitialValueSuccessMsg = {type: 'success', value: initialValue}\n\n          return of(msg)\n        })\n      )\n    }),\n\n    startWith(LOADING_MSG),\n    distinctUntilChanged()\n  ) as Observable<InitialValueMsg>\n}\n","import type {SanityClient} from '@sanity/client'\nimport type {InitialValueResolverContext, Schema} from '@sanity/types'\nimport type {Observable} from 'rxjs'\nimport type {SourceClientOptions} from '../../config'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../studioClient'\nimport {getDraftId, isDraftId} from '../../util'\nimport type {HistoryStore} from '../history'\nimport type {DocumentPreviewStore} from '../../preview'\nimport type {Template} from '../../templates'\nimport {checkoutPair, DocumentVersionEvent, Pair} from './document-pair/checkoutPair'\nimport {consistencyStatus} from './document-pair/consistencyStatus'\nimport {documentEvents} from './document-pair/documentEvents'\nimport {editOperations} from './document-pair/editOperations'\nimport {editState, EditStateFor} from './document-pair/editState'\nimport {getOperationEvents, OperationError, OperationSuccess} from './document-pair/operationEvents'\nimport {OperationsAPI} from './document-pair/operations'\nimport {validation, ValidationStatus} from './document-pair/validation'\nimport {listenQuery, ListenQueryOptions} from './listenQuery'\nimport {resolveTypeForDocument} from './resolveTypeForDocument'\nimport type {IdPair} from './types'\nimport {getInitialValueStream, InitialValueMsg, InitialValueOptions} from './initialValue'\n\nexport type QueryParams = Record<string, string | number | boolean | string[]>\n\nfunction getIdPairFromPublished(publishedId: string): IdPair {\n  if (isDraftId(publishedId)) {\n    throw new Error('editOpsOf does not expect a draft id.')\n  }\n\n  return {publishedId, draftId: getDraftId(publishedId)}\n}\n\nexport interface DocumentStore {\n  checkoutPair: (idPair: IdPair) => Pair\n  initialValue: (\n    opts: InitialValueOptions,\n    context: InitialValueResolverContext\n  ) => Observable<InitialValueMsg>\n  listenQuery: (\n    query: string | {fetch: string; listen: string},\n    params: QueryParams,\n    options: ListenQueryOptions\n  ) => Observable<any>\n  resolveTypeForDocument: (id: string, specifiedType?: string) => Observable<string>\n\n  pair: {\n    consistencyStatus: (publishedId: string, type: string) => Observable<boolean>\n    documentEvents: (publishedId: string, type: string) => Observable<DocumentVersionEvent>\n    editOperations: (publishedId: string, type: string) => Observable<OperationsAPI>\n    editState: (publishedId: string, type: string) => Observable<EditStateFor>\n    operationEvents: (\n      publishedId: string,\n      type: string\n    ) => Observable<OperationSuccess | OperationError>\n    validation: (publishedId: string, type: string) => Observable<ValidationStatus>\n  }\n}\n\nexport interface DocumentStoreOptions {\n  getClient: (options: SourceClientOptions) => SanityClient\n  documentPreviewStore: DocumentPreviewStore\n  historyStore: HistoryStore\n  schema: Schema\n  initialValueTemplates: Template[]\n}\n\nexport function createDocumentStore({\n  getClient,\n  documentPreviewStore,\n  historyStore,\n  initialValueTemplates,\n  schema,\n}: DocumentStoreOptions): DocumentStore {\n  // Note that we're both passing a shared `client` here which is used by the\n  // internal operations, and a `getClient` method that we expose to user-land\n  // for things like validations\n  const client = getClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const ctx = {client, getClient, documentPreviewStore, historyStore, schema}\n\n  const caches = {\n    pair: {\n      editOperations: new Map<string, Observable<OperationsAPI>>(),\n      editState: new Map<string, Observable<EditStateFor>>(),\n    },\n  }\n\n  const operationEvents = getOperationEvents(ctx)\n\n  return {\n    // Public API\n    checkoutPair(idPair) {\n      return checkoutPair(client, idPair)\n    },\n    initialValue(opts, context) {\n      return getInitialValueStream(\n        schema,\n        initialValueTemplates,\n        documentPreviewStore,\n        opts,\n        context\n      )\n    },\n    listenQuery(query, params, options) {\n      return listenQuery(client, query, params, options)\n    },\n    resolveTypeForDocument(id, specifiedType) {\n      return resolveTypeForDocument(client, id, specifiedType)\n    },\n    pair: {\n      consistencyStatus(publishedId, type) {\n        return consistencyStatus(ctx.client, getIdPairFromPublished(publishedId), type)\n      },\n      documentEvents(publishedId, type) {\n        return documentEvents(ctx.client, getIdPairFromPublished(publishedId), type)\n      },\n      editOperations(publishedId, type) {\n        const cache = caches.pair.editOperations\n        const key = `${publishedId}:${type}`\n        const cached = cache.get(key)\n        if (cached) {\n          return cached\n        }\n\n        const ops = editOperations(ctx, getIdPairFromPublished(publishedId), type)\n        cache.set(key, ops)\n        return ops\n      },\n      editState(publishedId, type) {\n        const cache = caches.pair.editState\n        const key = `${publishedId}:${type}`\n        const cached = cache.get(key)\n        if (cached) {\n          return cached\n        }\n\n        const state = editState(ctx, getIdPairFromPublished(publishedId), type)\n        cache.set(key, state)\n        return state\n      },\n      operationEvents(publishedId, type) {\n        return operationEvents(getIdPairFromPublished(publishedId), type)\n      },\n      validation(publishedId, type) {\n        return validation(ctx, getIdPairFromPublished(publishedId), type)\n      },\n    },\n  }\n}\n","import {useEffect, useMemo, useState} from 'react'\nimport {getPublishedId} from '../../../util/draftUtils'\nimport {useDocumentStore} from '../../datastores'\n\nexport interface DocumentTypeResolveState {\n  isLoaded: boolean\n  documentType: string | undefined\n}\n\nconst LOADING_STATE: DocumentTypeResolveState = {\n  isLoaded: false,\n  documentType: undefined,\n}\n\nexport function useDocumentType(documentId: string, specifiedType = '*'): DocumentTypeResolveState {\n  const documentStore = useDocumentStore()\n  const publishedId = getPublishedId(documentId)\n  const isResolved = Boolean(specifiedType && specifiedType !== '*')\n\n  // Memoize what a synchronously resolved state looks like (eg specified type is present),\n  // in order to return the same object each time. Note that this can be \"incorrect\", but\n  // that we won't be returning it in that case, eg: `{documentType: '*', isResolved: true}\n  const SYNC_RESOLVED_STATE = useMemo(\n    () => ({documentType: specifiedType, isLoaded: true}),\n    [specifiedType]\n  )\n\n  // Set up our state that we'll only use when we need to reach out to the API to find\n  // the document type for a given document. Otherwise we'll be using SYNC_RESOLVED_STATE.\n  // For consistency (between different document ids/types), we're setting the sync resolved\n  // state here as well, but it isn't strictly necessary for correct rendering.\n  const [resolvedState, setDocumentType] = useState<DocumentTypeResolveState>(\n    isResolved ? SYNC_RESOLVED_STATE : LOADING_STATE\n  )\n\n  // Reset documentType when documentId changes. Note that we're using the referentially\n  // stable LOADING_STATE in order to prevent double rendering on initial load.\n  useEffect(() => setDocumentType(LOADING_STATE), [publishedId, specifiedType])\n\n  // Load the documentType from Content Lake, unless we're already in a resolved state\n  useEffect(() => {\n    if (isResolved) {\n      return undefined\n    }\n\n    const sub = documentStore\n      .resolveTypeForDocument(publishedId, specifiedType)\n      .subscribe((documentType: string) => setDocumentType({documentType, isLoaded: true}))\n\n    return () => sub.unsubscribe()\n  }, [documentStore, publishedId, specifiedType, isResolved])\n\n  return isResolved\n    ? // `isResolved` is only true when we're _synchronously_ resolved\n      SYNC_RESOLVED_STATE\n    : // Using the document type resolved from the API\n      resolvedState\n}\n","import {useMemo} from 'react'\nimport {Observable, of} from 'rxjs'\nimport {LoadableState, useLoadable} from '../../../util'\nimport {useDocumentPreviewStore} from '../../datastores'\n\nexport function useDocumentValues<T = Record<string, unknown>>(\n  documentId: string,\n  paths: string[]\n): LoadableState<T | undefined> {\n  const documentPreviewStore = useDocumentPreviewStore()\n\n  const documentValues$ = useMemo(\n    () =>\n      documentId\n        ? (documentPreviewStore.observePaths(\n            {_type: 'reference', _ref: documentId},\n            paths\n          ) as Observable<T>)\n        : of(undefined),\n    [documentId, documentPreviewStore, paths]\n  )\n\n  return useLoadable(documentValues$)\n}\n","import {CurrentUser, User} from '@sanity/types'\nimport {from} from 'rxjs'\nimport {useSource} from '../../studio'\nimport {useUserStore} from '../datastores'\nimport {createHookFromObservableFactory, LoadingTuple} from '../../util'\nimport {UserStore} from './userStore'\n\nconst useUserViaUserStore = createHookFromObservableFactory(\n  (userStore: UserStore, userId: string) => from(userStore.getUser(userId))\n)\n\nexport function useUser(userId: string): LoadingTuple<User | null | undefined> {\n  const userStore = useUserStore()\n  return useUserViaUserStore(userStore, userId)\n}\n\nexport function useCurrentUser(): CurrentUser | null {\n  const {currentUser} = useSource()\n  return currentUser\n}\n","import {SanityClient} from '@sanity/client'\nimport {CurrentUser, User} from '@sanity/types'\nimport DataLoader from 'dataloader'\nimport raf from 'raf'\nimport {isRecord} from '../../util'\n\nexport interface UserStoreOptions {\n  client: SanityClient\n  currentUser: CurrentUser | null\n}\n\nexport interface UserStore {\n  getUser(userId: string): Promise<User | null>\n  getUsers(userIds: string[]): Promise<User[]>\n}\n\n/**\n * Given a `client` and a `currentUser` creates a datastore that handles\n * fetching, batch fetching, and caching users.\n */\nexport function createUserStore({client: _client, currentUser}: UserStoreOptions): UserStore {\n  const client = _client.withConfig({apiVersion: '2021-06-07'})\n\n  const userLoader = new DataLoader<string, User | null>(\n    async (userIds) => {\n      const value = await client.request<(User | null)[]>({\n        uri: `/users/${userIds.join(',')}`,\n        withCredentials: true,\n        tag: 'users.get',\n      })\n      const response = Array.isArray(value) ? value : [value]\n      const users = response.reduce((acc, next) => {\n        if (next?.id) {\n          acc[next.id] = next\n        }\n        return acc\n      }, {} as Record<string, User | null>)\n      return userIds.map((id) => users[id] || null)\n    },\n    {batchScheduleFn: (cb) => raf(cb)}\n  )\n\n  const userFromCurrentUser: User | null = currentUser && {\n    id: currentUser.id,\n    displayName: currentUser.name,\n    imageUrl: currentUser.profileImage,\n  }\n\n  userLoader.prime('me', userFromCurrentUser)\n\n  if (userFromCurrentUser?.id) {\n    userLoader.prime(userFromCurrentUser.id, userFromCurrentUser)\n  }\n\n  return {\n    getUser: (userId) => userLoader.load(userId),\n    getUsers: async (userIds) => {\n      const results = await userLoader.loadMany(userIds)\n      // remove `Error`s from the the results\n      return results.filter(\n        (result): result is User => isRecord(result) && typeof result.id === 'string'\n      )\n    },\n  }\n}\n","import {InitialValueResolverContext, SanityDocumentLike} from '@sanity/types'\nimport {useEffect, useMemo, useState} from 'react'\nimport {useSource} from '../../studio'\nimport {useUnique} from '../../util/useUnique'\nimport {useDocumentStore} from '../datastores'\nimport {useDataset, useProjectId, useSchema} from '../../hooks'\nimport {useCurrentUser} from '../user'\nimport {InitialValueState} from './initialValue/types'\n\n/**\n * @internal\n */\nexport function useInitialValue(props: {\n  documentId: string\n  documentType: string\n  templateName?: string\n  templateParams?: Record<string, unknown>\n}): InitialValueState {\n  const {documentId, documentType, templateName, templateParams: templateParamsRaw} = props\n  const templateParams = useUnique(templateParamsRaw)\n  const documentStore = useDocumentStore()\n  const context = useInitialValueResolverContext()\n\n  const defaultValue: SanityDocumentLike = useMemo(\n    () => ({_id: documentId, _type: documentType}),\n    [documentId, documentType]\n  )\n\n  const [state, setState] = useState<InitialValueState>({\n    loading: false,\n    error: null,\n    value: defaultValue,\n  })\n\n  useEffect(() => {\n    const initialValueOptions = {documentId, documentType, templateName, templateParams}\n\n    if (!templateName) {\n      setState({loading: true, error: null, value: defaultValue})\n      return undefined\n    }\n\n    const initialValueMsg$ = documentStore.initialValue(initialValueOptions, context)\n\n    const sub = initialValueMsg$.subscribe((msg) => {\n      if (msg.type === 'loading') {\n        setState({loading: true, error: null, value: defaultValue})\n      }\n\n      if (msg.type === 'success') {\n        setState({\n          loading: false,\n          error: null,\n          value: msg.value ? {...defaultValue, ...msg.value} : defaultValue,\n        })\n      }\n\n      if (msg.type === 'error') {\n        setState({loading: false, error: msg.error, value: defaultValue})\n      }\n    })\n\n    setState({loading: true, error: null, value: defaultValue})\n\n    return () => sub.unsubscribe()\n  }, [defaultValue, documentId, documentStore, documentType, templateName, templateParams, context])\n\n  return state\n}\n\n/**\n * @internal\n */\nexport function useInitialValueResolverContext(): InitialValueResolverContext {\n  const source = useSource()\n  const schema = useSchema()\n  const currentUser = useCurrentUser()\n  const projectId = useProjectId()\n  const dataset = useDataset()\n  const getClient = source.getClient\n\n  return useMemo(() => {\n    return {\n      projectId,\n      dataset,\n      getClient,\n      schema,\n      currentUser,\n    }\n  }, [getClient, schema, currentUser, projectId, dataset])\n}\n","import {SchemaType} from '@sanity/types'\nimport {useCallback} from 'react'\nimport {resolveInitialValueForType} from '../../templates'\nimport {DEFAULT_MAX_RECURSION_DEPTH} from '../../templates/resolve'\nimport {useInitialValueResolverContext} from './useInitialValue'\n\nexport function useResolveInitialValueForType<Params extends Record<string, unknown>>(): (\n  /**\n   * This is the name of the document.\n   */\n  type: SchemaType,\n  /**\n   * Params is a sanity context object passed to every initial value function.\n   */\n  params: Params\n) => Promise<any> {\n  const initialValueContext = useInitialValueResolverContext()\n\n  return useCallback(\n    (type: SchemaType, params: Params) => {\n      return resolveInitialValueForType(\n        type,\n        params,\n        DEFAULT_MAX_RECURSION_DEPTH,\n        initialValueContext\n      )\n    },\n    [initialValueContext]\n  )\n}\n","import {SanityClient} from '@sanity/client'\nimport {SanityDocument, Schema, SchemaType} from '@sanity/types'\nimport {Observable, combineLatest, of} from 'rxjs'\nimport {switchMap, map} from 'rxjs/operators'\nimport {createHookFromObservableFactory} from '../../util/createHookFromObservableFactory'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../studioClient'\nimport {snapshotPair} from '../document/document-pair/snapshotPair'\nimport {getDraftId, getPublishedId} from '../../util/draftUtils'\nimport {useGrantsStore} from '../datastores'\nimport {PartialExcept} from '../../util/PartialExcept'\nimport {useClient, useSchema} from '../../hooks'\nimport {GrantsStore, PermissionCheckResult} from './types'\n\nfunction getSchemaType(schema: Schema, typeName: string): SchemaType {\n  const type = schema.get(typeName)\n\n  if (!type) {\n    throw new Error(`No such schema type: ${typeName}`)\n  }\n\n  return type\n}\n\ninterface PairPermissionsOptions {\n  grantsStore: GrantsStore\n  permission: DocumentPermission\n  draft: SanityDocument | null\n  published: SanityDocument | null\n  liveEdit: boolean\n}\n\nfunction getPairPermissions({\n  grantsStore,\n  permission,\n  draft,\n  published,\n  liveEdit,\n}: PairPermissionsOptions): Array<[string, Observable<PermissionCheckResult>] | null> {\n  // this was introduced because we ran into a bug where a user with publish\n  // access was marked as not allowed to duplicate a document unless it had a\n  // draft variant. this would happen in non-live edit cases where the document\n  // pair only had a published variant with the draft variant being null.\n  //\n  // note: this should _not_ be used if the draft and published versions should\n  // be considered separately/explicitly in the permissions.\n  const effectiveVersion = draft || published\n  const effectiveVersionType = effectiveVersion === draft ? 'draft' : 'published'\n\n  const {checkDocumentPermission} = grantsStore\n\n  switch (permission) {\n    case 'delete': {\n      if (liveEdit) {\n        return [\n          ['delete published document (live-edit)', checkDocumentPermission('update', published)],\n        ]\n      }\n\n      return [\n        ['delete draft document', checkDocumentPermission('update', draft)],\n        ['delete published document', checkDocumentPermission('update', published)],\n      ]\n    }\n\n    case 'discardDraft': {\n      if (liveEdit) return []\n\n      return [['delete draft document', checkDocumentPermission('update', draft)]]\n    }\n\n    case 'publish': {\n      if (liveEdit) return []\n\n      return [\n        // precondition\n        [\n          'update published document at its current state',\n          checkDocumentPermission('update', published),\n        ],\n\n        // post condition\n        ['delete draft document', checkDocumentPermission('update', draft)],\n        [\n          'create published document from draft',\n          checkDocumentPermission('create', draft && {...draft, _id: getPublishedId(draft._id)}),\n        ],\n      ]\n    }\n\n    case 'unpublish': {\n      if (liveEdit) return []\n\n      return [\n        // precondition\n        ['update draft document at its current state', checkDocumentPermission('create', draft)],\n\n        // post condition\n        ['delete published document', checkDocumentPermission('update', published)],\n        [\n          'create draft document from published version',\n          checkDocumentPermission(\n            'create',\n            published && {...published, _id: getDraftId(published._id)}\n          ),\n        ],\n      ]\n    }\n\n    case 'update': {\n      if (liveEdit) {\n        return [\n          ['update published document (live-edit)', checkDocumentPermission('update', published)],\n        ]\n      }\n\n      return [\n        [\n          `update ${effectiveVersionType} document`,\n          checkDocumentPermission('update', effectiveVersion),\n        ],\n      ]\n    }\n\n    case 'duplicate': {\n      if (liveEdit) {\n        return [\n          [\n            'create new published document from existing document (live-edit)',\n            checkDocumentPermission('create', {...published, _id: 'dummy-id'}),\n          ],\n        ]\n      }\n\n      return [\n        [\n          `create new draft document from existing ${effectiveVersionType} document`,\n          checkDocumentPermission('create', {...effectiveVersion, _id: getDraftId('dummy-id')}),\n        ],\n      ]\n    }\n\n    default: {\n      throw new Error(`Could not match permission: ${permission}`)\n    }\n  }\n}\n\nexport type DocumentPermission =\n  | 'delete'\n  | 'discardDraft'\n  | 'publish'\n  | 'unpublish'\n  | 'update'\n  | 'duplicate'\n\nexport interface DocumentPairPermissionsOptions {\n  client: SanityClient\n  schema: Schema\n  grantsStore: GrantsStore\n  id: string\n  type: string\n  permission: DocumentPermission\n}\n\n/**\n * The observable version of `useDocumentPairPermissions`\n *\n * @see useDocumentPairPermissions\n */\nexport function getDocumentPairPermissions({\n  client,\n  grantsStore,\n  schema,\n  id,\n  permission,\n  type,\n}: DocumentPairPermissionsOptions): Observable<PermissionCheckResult> {\n  // this case was added to fix a crash that would occur if the `schemaType` was\n  // omitted from `S.documentList()`\n  //\n  // see `resolveTypeForDocument` which returns `'*'` if no type is provided\n  // https://github.com/sanity-io/sanity/blob/4d49b83a987d5097064d567f75d21b268a410cbf/packages/%40sanity/base/src/datastores/document/resolveTypeForDocument.ts#L7\n  if (type === '*') {\n    return of({granted: false, reason: 'Type specified was `*`'})\n  }\n\n  const liveEdit = Boolean(getSchemaType(schema, type).liveEdit)\n\n  return snapshotPair(\n    client,\n    {draftId: getDraftId(id), publishedId: getPublishedId(id)},\n    type\n  ).pipe(\n    switchMap((pair) =>\n      combineLatest([pair.draft.snapshots$, pair.published.snapshots$]).pipe(\n        map(([draft, published]) => ({draft, published}))\n      )\n    ),\n    switchMap(({draft, published}) => {\n      const pairPermissions = getPairPermissions({\n        grantsStore,\n        permission,\n        draft,\n        published,\n        liveEdit,\n      }).map(([label, observable]: any) =>\n        observable.pipe(\n          map(({granted, reason}: any) => ({\n            granted,\n            reason: granted ? '' : `not allowed to ${label}: ${reason}`,\n            label,\n            permission,\n          }))\n        )\n      )\n\n      if (!pairPermissions.length) return of({granted: true, reason: ''})\n\n      return combineLatest(pairPermissions).pipe(\n        map((permissionResults: any[]) => {\n          const granted = permissionResults.every((permissionResult) => permissionResult.granted)\n          const reason = granted\n            ? ''\n            : `Unable to ${permission}:\\n\\t${permissionResults\n                .filter((permissionResult) => !permissionResult.granted)\n                .map((permissionResult) => permissionResult.reason)\n                .join('\\n\\t')}`\n\n          return {granted, reason}\n        })\n      )\n    })\n  )\n}\n\n/**\n * Gets document pair permissions based on a document ID and a type.\n *\n * This permissions API is a high-level permissions API that is draft-model\n * aware. In order to determine whether or not the user has the given\n * permission, both the draft and published documents are pulled and run through\n * all of the user's grants. If any pre or post conditions fail a permissions\n * checks, the operations will not be granted.\n *\n * The operations this hook accepts are only relevant to document pairs. E.g.\n * `'create'` is not included as an operation because it's not possible to tell\n * if a document can be created by only using the initial ID and type because an\n * initial template value may not have a matching grant (e.g. locked-document\n * pattern `!locked`). In contrast, the operation `'duplicate'` is supported\n * because the draft value of the document can be live queried and checked for\n * matching grants.\n *\n * Note: for live-edit documents, non-applicable operations (e.g. publish) will\n * return as true.\n *\n * @see useDocumentValuePermissions\n */\nexport const useDocumentPairPermissionsFromHookFactory = createHookFromObservableFactory(\n  getDocumentPairPermissions\n)\n\nexport function useDocumentPairPermissions({\n  id,\n  type,\n  permission,\n  ...rest\n}: PartialExcept<DocumentPairPermissionsOptions, 'id' | 'type' | 'permission'>): ReturnType<\n  typeof useDocumentPairPermissionsFromHookFactory\n> {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const schema = useSchema()\n  const grantsStore = useGrantsStore()\n\n  return useDocumentPairPermissionsFromHookFactory({\n    client: rest.client || client,\n    grantsStore: rest.grantsStore || grantsStore,\n    schema: rest.schema || schema,\n    id,\n    permission,\n    type,\n  })\n}\n","import {Observable} from 'rxjs'\nimport {createHookFromObservableFactory} from '../../util/createHookFromObservableFactory'\nimport {PartialExcept} from '../../util/PartialExcept'\nimport {useGrantsStore} from '../datastores'\nimport {DocumentValuePermission, GrantsStore, PermissionCheckResult} from './types'\n\nexport interface DocumentValuePermissionsOptions {\n  grantsStore: GrantsStore\n  document: Record<string, unknown>\n  permission: DocumentValuePermission\n}\n\n/**\n * The observable version of `useDocumentValuePermissions`\n *\n * @see useDocumentValuePermissions\n */\nexport function getDocumentValuePermissions({\n  grantsStore,\n  document,\n  permission,\n}: DocumentValuePermissionsOptions): Observable<PermissionCheckResult> {\n  const {checkDocumentPermission} = grantsStore\n\n  return checkDocumentPermission(permission, document)\n}\n\n/**\n * Gets permissions based on the value of the document passed into the hook\n * (stateless).\n *\n * Note: this is a lower-level API (compared to `useDocumentPairPermissions`)\n * that is _not_ draft-model aware.\n *\n * As a consequence, the operations it accepts are also low-level. (e.g.\n * `'publish'` permissions can't be determined with this API). This is because\n * it's not possible to tell if a user can do high-level document pair\n * operations on document using only one document value.\n *\n * For example, in order to determine if a user can publish, the current value\n * of the published document needs to be pulled and checked against the user's\n * grants. If there are no matching grants, then it fails the pre-condition and\n * no operation is allowed regardless of the given document.\n *\n * @see useDocumentPairPermissions\n */\nexport const useDocumentValuePermissionsFromHookFactory = createHookFromObservableFactory(\n  getDocumentValuePermissions\n)\n\nexport function useDocumentValuePermissions({\n  document,\n  permission,\n  ...rest\n}: PartialExcept<DocumentValuePermissionsOptions, 'permission' | 'document'>): ReturnType<\n  typeof useDocumentValuePermissionsFromHookFactory\n> {\n  const grantsStore = useGrantsStore()\n\n  return useDocumentValuePermissionsFromHookFactory({\n    grantsStore: rest.grantsStore || grantsStore,\n    document,\n    permission,\n  })\n}\n\nexport type {DocumentValuePermission}\n","import {combineLatest, from, Observable, of} from 'rxjs'\nimport {map, switchMap} from 'rxjs/operators'\nimport {InitialValueResolverContext, Schema} from '@sanity/types'\nimport {useSchema, useTemplates} from '../../hooks'\nimport {InitialValueTemplateItem, resolveInitialValue, Template} from '../../templates'\nimport {createHookFromObservableFactory} from '../../util/createHookFromObservableFactory'\nimport {getDraftId, getPublishedId} from '../../util/draftUtils'\nimport {useGrantsStore} from '../datastores'\nimport {PartialExcept} from '../../util/PartialExcept'\nimport {useInitialValueResolverContext} from '../document'\nimport {GrantsStore, PermissionCheckResult} from './types'\nimport {getDocumentValuePermissions} from './documentValuePermissions'\n\nexport interface TemplatePermissionsResult<TInitialValue = Record<string, unknown>>\n  extends PermissionCheckResult,\n    InitialValueTemplateItem {\n  granted: boolean\n  reason: string\n  resolvedInitialValue: TInitialValue\n  subtitle?: string\n  template: Template\n}\n\ntype Serializable<T> = {serialize(): T}\n\nfunction serialize<T>(item: T | Serializable<T>): T {\n  if (item && 'serialize' in item) return serialize(item.serialize())\n  return item as T\n}\n\nexport interface TemplatePermissionsOptions {\n  grantsStore: GrantsStore\n  schema: Schema\n  templates: Template[]\n  templateItems: InitialValueTemplateItem[]\n  context: InitialValueResolverContext\n}\n\n/**\n * The observable version of `useTemplatePermissions`\n */\nexport function getTemplatePermissions({\n  grantsStore,\n  templateItems,\n  templates,\n  schema,\n  context,\n}: TemplatePermissionsOptions): Observable<\n  Array<TemplatePermissionsResult<Record<string, unknown>>>\n> {\n  if (!templateItems?.length) return of([])\n\n  return combineLatest(\n    templateItems\n      .map(serialize)\n      .map(async (item) => {\n        const template = templates.find((t) => t.id === item.templateId)\n\n        if (!template) {\n          throw new Error(`template not found: \"${item.templateId}\"`)\n        }\n\n        const resolvedInitialValue = await resolveInitialValue(\n          schema,\n          template,\n          item.parameters,\n          context\n        )\n\n        return {template, item, resolvedInitialValue}\n      })\n      .map((promise) =>\n        from(promise).pipe(\n          switchMap(({item, resolvedInitialValue, template}) => {\n            const schemaType = schema.get(template.schemaType)\n\n            if (!schemaType) {\n              throw new Error(`schema type not found: \"${template.schemaType}\"`)\n            }\n\n            const liveEdit = schemaType?.liveEdit\n            const {initialDocumentId = 'dummy-id'} = item\n\n            return getDocumentValuePermissions({\n              grantsStore,\n              permission: 'create',\n              document: {\n                _id: liveEdit ? getPublishedId(initialDocumentId) : getDraftId(initialDocumentId),\n                ...resolvedInitialValue,\n              },\n            }).pipe(\n              map(({granted, reason}) => {\n                const title = item.title || template.title\n                const result: TemplatePermissionsResult = {\n                  ...item,\n                  granted,\n                  reason,\n                  resolvedInitialValue,\n                  template,\n                  title,\n                  subtitle: schemaType.title === title ? undefined : schemaType.title,\n                  description: item.description || template.description,\n                  icon: item.icon || template.icon,\n                }\n\n                return result\n              })\n            )\n          })\n        )\n      )\n  )\n}\n\n/**\n * Takes in an array of initial template values and returns an object of\n * `TemplatePermissionsResult` keyed by the IDs of the initial template values\n * given.\n *\n * The `TemplatePermissionsResult` is an object that contains a `granted`\n * boolean per key and can be used to determine if a user has the ability to\n * create documents using the given initial value template items.\n *\n * For each initial template value item, the corresponding template is found and\n * resolved against the parameters in each the initial template value item. The\n * resolved value is then run through the document-value permissions. If there\n * are any matching grants for the resolved initial template value, the\n * `TemplatePermissionsResult` will include `granted: true`.\n */\nexport const useTemplatePermissionsFromHookFactory =\n  createHookFromObservableFactory(getTemplatePermissions)\n\nexport function useTemplatePermissions({\n  templateItems,\n  ...rest\n}: PartialExcept<TemplatePermissionsOptions, 'templateItems'>): ReturnType<\n  typeof useTemplatePermissionsFromHookFactory\n> {\n  const schema = useSchema()\n  const templates = useTemplates()\n  const grantsStore = useGrantsStore()\n  const initialValueContext = useInitialValueResolverContext()\n\n  return useTemplatePermissionsFromHookFactory({\n    templateItems,\n    grantsStore: rest.grantsStore || grantsStore,\n    schema: rest.schema || schema,\n    templates: rest.templates || templates,\n    context: initialValueContext,\n  })\n}\n","import {concat, of, fromEvent} from 'rxjs'\nimport {distinctUntilChanged, map} from 'rxjs/operators'\n\nconst DEBUG_PREFIX = '_debug_'\n\nconst hashchange$ = typeof window === 'undefined' ? of({}) : fromEvent(window, 'hashchange')\n\nexport const debugParams$ = concat(of(0), hashchange$).pipe(\n  map(() => (typeof document === 'undefined' ? '#' : document.location.hash)),\n  distinctUntilChanged(),\n  map((hash) =>\n    hash\n      .substring(1)\n      .split(';')\n      .filter((p) => p.toLowerCase().startsWith(DEBUG_PREFIX))\n      .map((param) => param.substring(DEBUG_PREFIX.length))\n  )\n)\n\nexport const debugRolesParam$ = debugParams$.pipe(\n  map((args) => args.find((arg) => arg.startsWith('roles='))),\n  map(\n    (arg) =>\n      arg\n        ?.split('roles=')[1]\n        .split(',')\n        .map((r) => r.trim()) || []\n  )\n)\n","// NOTE: these example grants are used in other test files.\n// if you change this file, check to see if other files need to be updated too\nimport {Grant} from '../types'\n\nexport const administrator: Grant[] = [\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read', 'create', 'history', 'update'],\n  },\n]\n\nexport const editor: Grant[] = [\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read', 'create', 'history', 'update'],\n  },\n]\n\nexport const developer: Grant[] = [\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read', 'create', 'history', 'update'],\n  },\n]\n\nexport const contributor: Grant[] = [\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read'],\n  },\n  {\n    filter: '_id in path(\"drafts.**\")',\n    permissions: ['create', 'history', 'update'],\n  },\n]\n\nexport const viewer: Grant[] = [\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read', 'history'],\n  },\n]\n\nexport const requiresApproval: Grant[] = [\n  {\n    filter: '!locked',\n    permissions: ['read', 'create', 'update'],\n  },\n]\n\nexport const restricted: Grant[] = [\n  {\n    filter:\n      '_id in path(\"drafts.**\") && _type in [\"stringsTest\", \"book\", \"author\", \"referenceTest\"]',\n    permissions: ['read', 'create', 'history', 'update'],\n  },\n  {\n    filter: '_id in path(\"**\")',\n    permissions: ['read'],\n  },\n]\n","import {map} from 'rxjs/operators'\nimport {debugRolesParam$} from '../../debugParams'\nimport {Grant} from '../types'\nimport * as grants from './exampleGrants'\nimport {ExampleRoleName} from './exampleRoles'\n\nconst DEBUG_ROLE_GRANTS_MAP: Record<ExampleRoleName, Grant[]> = {\n  // basic\n  administrator: grants.administrator,\n  editor: grants.editor,\n  developer: grants.developer,\n  contributor: grants.contributor,\n  viewer: grants.viewer,\n\n  // custom\n  restricted: grants.restricted,\n  requiresApproval: grants.requiresApproval,\n\n  // legacy\n  read: grants.viewer,\n  write: grants.editor,\n}\n\n// todo: merge other resource keys(?)\nexport const debugGrants$ = debugRolesParam$.pipe(\n  map((roles) => {\n    if (!roles.length) return null\n\n    return roles\n      .filter((value) => Boolean(value) && value in DEBUG_ROLE_GRANTS_MAP)\n      .flatMap((roleName: ExampleRoleName) => DEBUG_ROLE_GRANTS_MAP[roleName] || [])\n  })\n)\n","import {SanityClient} from '@sanity/client'\nimport {CurrentUser, SanityDocument} from '@sanity/types'\nimport {evaluate, parse} from 'groq-js'\nimport {defer, of} from 'rxjs'\nimport {distinctUntilChanged, publishReplay, switchMap} from 'rxjs/operators'\nimport {refCountDelay} from 'rxjs-etc/operators'\nimport shallowEquals from 'shallow-equals'\nimport {debugGrants$} from './debug'\nimport {\n  GrantsStore,\n  DocumentValuePermission,\n  Grant,\n  PermissionCheckResult,\n  EvaluationParams,\n} from './types'\n\nasync function getDatasetGrants(\n  client: SanityClient,\n  projectId: string,\n  dataset: string\n): Promise<Grant[]> {\n  // `acl` stands for access control list and returns a list of grants\n  const grants: Grant[] = await client.request({\n    uri: `/projects/${projectId}/datasets/${dataset}/acl`,\n    tag: 'acl.get',\n    withCredentials: true,\n  })\n\n  return grants\n}\n\nfunction getParams(currentUser: CurrentUser | null): EvaluationParams {\n  const params: EvaluationParams = {}\n\n  if (currentUser !== null) {\n    params.identity = currentUser.id\n  }\n\n  return params\n}\n\nconst PARSED_FILTERS_MEMO = new Map()\nasync function matchesFilter(\n  currentUser: CurrentUser | null,\n  filter: string,\n  document: SanityDocument\n) {\n  if (!PARSED_FILTERS_MEMO.has(filter)) {\n    // note: it might be tempting to also memoize the result of the evaluation here,\n    // Currently these filters are typically evaluated whenever a document change, which means they will be evaluated\n    // quite frequently with different versions of the document. There might be some gains in finding out which subset of document\n    // properties to use as key (e.g. by looking at the parsed filter and see what properties the filter cares about)\n    // But as always, it's worth considering if the complexity/memory usage is worth the potential perf gainâ€¦\n    PARSED_FILTERS_MEMO.set(filter, parse(`*[${filter}]`))\n  }\n  const parsed = PARSED_FILTERS_MEMO.get(filter)\n\n  const params = getParams(currentUser)\n  const data = await (await evaluate(parsed, {dataset: [document], params})).get()\n  return data?.length === 1\n}\n\nexport interface GrantsStoreOptions {\n  client: SanityClient\n  currentUser: CurrentUser | null\n}\n\nexport function createGrantsStore({client, currentUser}: GrantsStoreOptions): GrantsStore {\n  const versionedClient = client.withConfig({apiVersion: '2021-06-07'})\n\n  const datasetGrants$ = defer(() => of(versionedClient.config())).pipe(\n    switchMap(({projectId, dataset}) => {\n      if (!projectId || !dataset) {\n        throw new Error('Missing projectId or dataset')\n      }\n      return getDatasetGrants(versionedClient, projectId, dataset)\n    })\n  )\n\n  const currentUserDatasetGrants = debugGrants$.pipe(\n    switchMap((debugGrants) => (debugGrants ? of(debugGrants) : datasetGrants$)),\n    publishReplay(1),\n    refCountDelay(1000)\n  )\n\n  return {\n    checkDocumentPermission(permission: DocumentValuePermission, document: SanityDocument) {\n      return currentUserDatasetGrants.pipe(\n        switchMap((grants) => grantsPermissionOn(currentUser, grants, permission, document)),\n        distinctUntilChanged(shallowEquals)\n      )\n    },\n  }\n}\n\n/**\n * takes a grants object, a permission and a document\n * checks whether the the permission is granted for the given document\n */\nasync function grantsPermissionOn(\n  currentUser: CurrentUser | null,\n  grants: Grant[],\n  permission: DocumentValuePermission,\n  document: SanityDocument | null\n): Promise<PermissionCheckResult> {\n  if (!document) {\n    // we say it's granted if null due to initial states\n    return {granted: true, reason: 'Null document, nothing to check'}\n  }\n\n  if (!grants.length) {\n    return {granted: false, reason: 'No document grants'}\n  }\n\n  const matchingGrants: Grant[] = []\n\n  for (const grant of grants) {\n    if (await matchesFilter(currentUser, grant.filter, document)) {\n      matchingGrants.push(grant)\n    }\n  }\n\n  const foundMatch = matchingGrants.some((grant) => grant.permissions.some((p) => p === permission))\n\n  return {\n    granted: foundMatch,\n    reason: foundMatch ? `Matching grant` : `No matching grants found`,\n  }\n}\n","import type {TransactionLogEventWithEffects} from '@sanity/types'\n\ntype StreamResult = TransactionLogEventWithEffects | {error: {description?: string; type: string}}\n\nexport async function getJsonStream(\n  url: string,\n  token: string | undefined\n): Promise<ReadableStream<StreamResult>> {\n  const options: RequestInit = token\n    ? {headers: {Authorization: `Bearer ${token}`}}\n    : {credentials: 'include'}\n  const response = await fetch(url, options)\n  return getStream(response)\n}\n\nfunction getStream(response: Response): ReadableStream<StreamResult> {\n  const body = response.body\n  if (!body) {\n    throw new Error('Failed to read body from response')\n  }\n\n  let reader: ReadableStreamDefaultReader<Uint8Array>\n  let cancelled = false\n\n  return new ReadableStream<TransactionLogEventWithEffects>({\n    start(controller): void | PromiseLike<void> {\n      reader = body.getReader()\n      const decoder = new TextDecoder()\n      let buffer = ''\n\n      reader\n        .read()\n        .then(function processResult(result): void | Promise<void> {\n          if (result.done) {\n            if (cancelled) {\n              return\n            }\n\n            buffer = buffer.trim()\n            if (buffer.length === 0) {\n              controller.close()\n              return\n            }\n\n            controller.enqueue(JSON.parse(buffer))\n            controller.close()\n            return\n          }\n\n          buffer += decoder.decode(result.value, {stream: true})\n          const lines = buffer.split('\\n')\n\n          for (let i = 0; i < lines.length - 1; ++i) {\n            const line = lines[i].trim()\n            if (line.length === 0) {\n              continue\n            }\n\n            try {\n              controller.enqueue(JSON.parse(line))\n            } catch (err) {\n              controller.error(err)\n              cancelled = true\n              reader.cancel()\n              return\n            }\n          }\n\n          buffer = lines[lines.length - 1]\n\n          // eslint-disable-next-line consistent-return\n          return reader\n            .read()\n            .then(processResult)\n            .catch((err) => controller.error(err))\n        })\n        .catch((err) => controller.error(err))\n    },\n\n    cancel(): void {\n      cancelled = true\n      reader.cancel()\n    },\n  })\n}\n","import type {SanityDocument, TransactionLogEventWithEffects} from '@sanity/types'\nimport {applyPatch} from 'mendoza'\nimport {RemoteSnapshotVersionEvent} from '../../document/document-pair/checkoutPair'\nimport {Timeline} from './Timeline'\nimport type {DocumentRemoteMutationVersionEvent, CombinedDocument} from './types'\n\ntype VersionState = {\n  id: string\n  hasAttrs: boolean\n  attrs: Record<string, unknown> | null\n  rev: string | null\n  events: Array<DocumentRemoteMutationVersionEvent>\n  aligned: boolean\n}\n\nfunction emptyVersionState(id: string): VersionState {\n  return {\n    id,\n    hasAttrs: false,\n    attrs: null,\n    rev: null,\n    events: [],\n    aligned: false,\n  }\n}\n\nfunction align(history: TransactionLogEventWithEffects, state: VersionState): number {\n  const idx = state.events.findIndex((evt) => history.id === evt.transactionId)\n  if (idx >= 0) {\n    // Return the next event as we don't want this to be included.\n    return idx + 1\n  }\n\n  if (state.rev) {\n    return state.rev === history.id ? 0 : -1\n  }\n\n  // At this point the document doesn't exist and we were not able to match\n  // it up with a received mutation. This is a bit unfortunate as we don't\n  // have a _reliably_ way of aligning it. For now we just always assume\n  // that it's consistent.\n\n  return 0\n}\n\nfunction startFromSnapshot(state: VersionState, doc: SanityDocument) {\n  state.hasAttrs = true\n\n  if (doc) {\n    state.attrs = {...doc}\n    if (typeof state.attrs._rev != 'string') throw new Error('snapshot has no _rev')\n    state.rev = state.attrs._rev\n    delete state.attrs._rev\n  } else {\n    state.attrs = null\n    state.rev = null\n  }\n\n  state.events = []\n}\n\n/**\n * The timeline consists of data from (1) the history, (2) live draft mutations, and\n * (3) live published mutations. It's critical for us that the chain of transactions\n * is complete and without holes. The following class can be used as a layer in front\n * of Timeline to ensure this:\n *\n * - Invoke `appendRemoteSnapshotEvent` when there's an incoming remote mutation.\n *   These mutations are buffered internally and _not_ passed to the timeline quite yet.\n *\n * - Once we've received snapshots for both draft and published, then `acceptsHistory`\n *   becomes true and the caller can fetch a chunk of the translog. The flag\n *   `earliestTransactionId` can be used to figure out where to fetch transactions from.\n *\n * - The caller invokes `prependHistoryEvent` for each of the events. These history events\n *   are always pushed to the timeline and it will become available immediately.\n *\n * - Internally this class will then try to align the history event to the received\n *   mutations and then dispatch to the timeline.\n *\n * - The aligner also maintains the latest version for both the draft and the published version.\n *\n *\n */\nexport class Aligner {\n  timeline: Timeline\n  earliestTransactionId: string | null = null\n\n  constructor(timeline: Timeline) {\n    this.timeline = timeline\n    this._states = {\n      draft: emptyVersionState(timeline.draftId),\n      published: emptyVersionState(timeline.publishedId),\n    }\n  }\n\n  private _states: {\n    draft: VersionState\n    published: VersionState\n  }\n\n  appendRemoteSnapshotEvent(evt: RemoteSnapshotVersionEvent): void {\n    const state = this._states[evt.version]\n\n    if (evt.type === 'snapshot') {\n      this._maybeInvalidateHistory()\n\n      startFromSnapshot(state, evt.document)\n      return\n    }\n\n    if (evt.type === 'remoteMutation') {\n      if (state.aligned) {\n        this._apply(state, evt)\n        this.timeline.addRemoteMutation(evt)\n      } else if (state.hasAttrs) {\n        state.events.push(evt)\n      } else {\n        startFromSnapshot(state, evt.head)\n      }\n    }\n  }\n\n  prependHistoryEvent(evt: TransactionLogEventWithEffects): void {\n    if (!this.acceptsHistory) throw new Error('cannot prepend history at this point')\n\n    for (const state of Object.values(this._states)) {\n      if (!state.aligned) {\n        const idx = align(evt, state)\n\n        if (idx >= 0) {\n          this._alignAtIndex(state, idx)\n        }\n      }\n    }\n\n    this.timeline.addTranslogEntry(evt)\n    this.earliestTransactionId = evt.id\n  }\n\n  didReachEarliestEntry(): void {\n    for (const state of Object.values(this._states)) {\n      if (!state.aligned) {\n        if (state.attrs !== null) throw new Error('unable to find translog entry to align to')\n        this._alignAtIndex(state, 0)\n      }\n    }\n    this.timeline.didReachEarliestEntry()\n  }\n\n  get isAligned(): boolean {\n    return Object.values(this._states).every((state) => state.aligned)\n  }\n\n  get acceptsHistory(): boolean {\n    return this._isComplete\n  }\n\n  get currentDocument(): CombinedDocument {\n    return {draft: this._states.draft.attrs, published: this._states.published.attrs}\n  }\n\n  private _alignAtIndex(state: VersionState, idx: number) {\n    // These we must only apply locally since they are present in the fetched translog.\n    for (const mutEvt of state.events.slice(0, idx)) {\n      this._apply(state, mutEvt)\n    }\n\n    // ... while these must also be pushed to the timeline:\n    for (const mutEvt of state.events.slice(idx)) {\n      this._apply(state, mutEvt)\n      this.timeline.addRemoteMutation(mutEvt)\n    }\n\n    state.events = []\n    state.aligned = true\n  }\n\n  private get _isComplete(): boolean {\n    return Object.values(this._states).every((state) => state.hasAttrs)\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  private _apply(state: VersionState, evt: DocumentRemoteMutationVersionEvent) {\n    state.attrs = applyPatch(state.attrs, evt.effects.apply as any)\n    state.rev = evt.transactionId\n  }\n\n  private _maybeInvalidateHistory() {\n    if (this._isComplete) {\n      for (const state of Object.values(this._states)) {\n        state.aligned = false\n      }\n      this.earliestTransactionId = null\n      this.timeline.reset()\n    }\n  }\n}\n","import {Diff} from '@sanity/diff'\nimport {Annotation} from '../../../field'\nimport {Timeline} from './Timeline'\nimport {CombinedDocument, Chunk} from './types'\n\n/**\n * A reconstruction represents a single reconstruction of a\n */\nexport class Reconstruction {\n  timeline: Timeline\n  start: Chunk | null\n  end: Chunk\n  doc: CombinedDocument\n\n  constructor(timeline: Timeline, doc: CombinedDocument, start: Chunk | null, end: Chunk) {\n    this.timeline = timeline\n    this.start = start\n    this.end = end\n    this.doc = doc\n  }\n\n  same(start: Chunk | null, end: Chunk): boolean {\n    return this.start === start && this.end === end\n  }\n\n  private _startDocument?: CombinedDocument\n  private _endDocument?: CombinedDocument\n  private _diff?: Diff<Annotation>\n\n  /** Returns the attributes as seen at the end of the range. */\n  endAttributes(): Record<string, unknown> | null {\n    return getAttrs(this.endDocument())\n  }\n\n  endDocument(): CombinedDocument {\n    if (!this._endDocument) {\n      this._endDocument = this.timeline.replayBackwardsUntil(this.end.end, this.doc)\n    }\n\n    return this._endDocument\n  }\n\n  /** Returns the attributes as seen at the end of the range. */\n  startAttributes(): Record<string, unknown> | null {\n    return getAttrs(this.startDocument())\n  }\n\n  startDocument(): CombinedDocument {\n    if (!this.start) throw new Error('start required')\n\n    if (!this._startDocument) {\n      this._startDocument = this.timeline.replayBackwardsBetween(\n        this.start.end,\n        this.end.end - 1,\n        this.endDocument()\n      )\n    }\n\n    return this._startDocument\n  }\n\n  diff(): Diff<Annotation> {\n    if (!this._diff) {\n      if (!this.start) throw new Error('start required')\n\n      this._diff = this.timeline.calculateDiff(\n        this.startDocument(),\n        this.endDocument(),\n        this.start.index + 1,\n        this.end.index\n      )\n    }\n\n    return this._diff\n  }\n}\n\nfunction getAttrs(doc: CombinedDocument) {\n  return doc.draft || doc.published\n}\n","import type {SanityClient} from '@sanity/client'\nimport {Diff, ObjectDiff} from '@sanity/diff'\nimport {Observable} from 'rxjs'\nimport {Annotation} from '../../../field'\nimport {RemoteSnapshotVersionEvent} from '../../document/document-pair/checkoutPair'\nimport {remoteSnapshots} from '../../document/document-pair/remoteSnapshots'\nimport {Timeline, ParsedTimeRef} from './Timeline'\nimport {getJsonStream} from './getJsonStream'\nimport {Chunk} from './types'\nimport {Aligner} from './Aligner'\nimport {Reconstruction} from './Reconstruction'\n\nconst TRANSLOG_ENTRY_LIMIT = 50\n\nexport type TimelineControllerOptions = {\n  timeline: Timeline\n  client: SanityClient\n  documentId: string\n  documentType: string\n  handler: (err: Error | null, controller: TimelineController) => void\n}\n\n/**\n * The controller is responsible for fetching information\n * about a document and maintaining a Timeline.\n */\nexport class TimelineController {\n  timeline: Timeline\n  client: SanityClient\n  handler: TimelineControllerOptions['handler']\n\n  version = 0\n\n  /**\n   * The selection state represents the  different states of the current selection:\n   * - inactive: No selection is active.\n   * - rev: A selection is active for a single revision.\n   * - range: A selection is active for a range and we have all the data needed to render it.\n   * - loading: A selection is active, but we don't have the entries yet.\n   * - invalid: The selection picked is invalid.\n   */\n  selectionState: 'inactive' | 'rev' | 'range' | 'loading' | 'invalid' = 'inactive'\n\n  constructor(options: TimelineControllerOptions) {\n    this.timeline = options.timeline\n    this.client = options.client\n    this.handler = options.handler\n    this._aligner = new Aligner(this.timeline)\n\n    this.markChange()\n  }\n\n  private _aligner: Aligner\n\n  private _fetchMore = false\n  private _fetchAtLeast = 0\n  private _isRunning = false\n  private _didErr = false\n\n  private _since: string | null = null\n  private _sinceTime: ParsedTimeRef | null = null\n  private _rev: string | null = null\n  private _revTime: ParsedTimeRef | null = null\n\n  private _reconstruction?: Reconstruction\n\n  clearRange(): void {\n    this.setRange(null, null)\n  }\n\n  setRange(since: string | null, rev: string | null): void {\n    if (rev !== this._rev) this.setRevTime(rev)\n    if (since !== this._since) this.setSinceTime(since)\n\n    let _fetchAtLeast = 10\n\n    if (this._sinceTime === 'loading' || this._revTime === 'loading' || !this._aligner.isAligned) {\n      this.selectionState = 'loading'\n    } else if (this._sinceTime === 'invalid' || this._revTime === 'invalid') {\n      this.selectionState = 'invalid'\n    } else if (this._sinceTime) {\n      this.selectionState = 'range'\n\n      const targetRev = this._revTime || this.timeline.lastChunk()\n\n      if (this._sinceTime.index > targetRev.index) {\n        this._revTime = 'invalid'\n        this.selectionState = 'invalid'\n      } else {\n        this.setReconstruction(this._sinceTime, targetRev)\n      }\n    } else if (this._revTime) {\n      this.selectionState = 'rev'\n      this.setReconstruction(null, this._revTime)\n    } else {\n      this.selectionState = 'inactive'\n      _fetchAtLeast = 0\n    }\n\n    this._fetchAtLeast = _fetchAtLeast\n\n    this.start()\n  }\n\n  setLoadMore(flag: boolean): void {\n    this._fetchMore = flag\n    this.start()\n  }\n\n  get sinceTime(): Chunk | null {\n    return this._sinceTime && typeof this._sinceTime === 'object' ? this._sinceTime : null\n  }\n\n  get revTime(): Chunk | null {\n    return this._revTime && typeof this._revTime === 'object' ? this._revTime : null\n  }\n\n  get realRevChunk(): Chunk {\n    return this.revTime || this.timeline.lastChunk()\n  }\n\n  /** Returns true when there's an older revision we want to render. */\n  onOlderRevision(): boolean {\n    return Boolean(this._rev) && (this.selectionState === 'range' || this.selectionState === 'rev')\n  }\n\n  /** Returns true when the changes panel should be active. */\n  changesPanelActive(): boolean {\n    return Boolean(this._since) && this.selectionState === 'range'\n  }\n\n  findRangeForNewRev(rev: Chunk): [string | null, string | null] {\n    const revTimeId = this.timeline.isLatestChunk(rev) ? null : this.timeline.createTimeId(rev)\n\n    if (!this._since) {\n      return [null, revTimeId]\n    }\n\n    const sinceChunk = this.sinceTime\n    if (sinceChunk && sinceChunk.index < rev.index) {\n      return [this._since, revTimeId]\n    }\n\n    return ['@lastPublished', revTimeId]\n  }\n\n  findRangeForNewSince(since: Chunk): [string, string | null] {\n    const revChunk = this.revTime\n\n    // If the the `since` timestamp is earlier than the `rev`, then we can\n    // accept it. Otherwise we'll move the current revision to the current draft.\n\n    if (revChunk && since.index < revChunk.index) {\n      return [this.timeline.createTimeId(since), this._rev]\n    }\n\n    return [this.timeline.createTimeId(since), null]\n  }\n\n  setRevTime(rev: string | null): void {\n    this._rev = rev\n    this._revTime = rev ? this.timeline.parseTimeId(rev) : null\n\n    if (this._since === '@lastPublished') {\n      // Make sure we invalidate it since this depends on the _rev.\n      this._since = null\n      this._sinceTime = null\n    }\n  }\n\n  setSinceTime(since: string | null): void {\n    if (since === '@lastPublished') {\n      if (typeof this._revTime === 'string') {\n        this._sinceTime = this._revTime\n      } else {\n        this._sinceTime = this.timeline.findLastPublishedBefore(this._revTime)\n      }\n    } else {\n      this._sinceTime = since ? this.timeline.parseTimeId(since) : null\n    }\n\n    this._since = since\n  }\n\n  sinceAttributes(): Record<string, unknown> | null {\n    return this._sinceTime && this._reconstruction ? this._reconstruction.startAttributes() : null\n  }\n\n  displayed(): Record<string, unknown> | null {\n    return this._revTime && this._reconstruction ? this._reconstruction.endAttributes() : null\n  }\n\n  setReconstruction(since: Chunk | null, rev: Chunk): void {\n    if (this._reconstruction && this._reconstruction.same(since, rev)) return\n    this._reconstruction = new Reconstruction(\n      this.timeline,\n      this._aligner.currentDocument,\n      since,\n      rev\n    )\n  }\n\n  currentDiff(): Diff<Annotation> | null {\n    return this._reconstruction ? this._reconstruction.diff() : null\n  }\n\n  currentObjectDiff(): ObjectDiff<Annotation> | null {\n    const diff = this.currentDiff()\n    if (diff) {\n      if (diff.type === 'null') return null\n      if (diff.type !== 'object') throw new Error(`ObjectDiff expected, got ${diff.type}`)\n    }\n\n    return diff as ObjectDiff<Annotation>\n  }\n\n  handleRemoteMutation(ev: RemoteSnapshotVersionEvent): void {\n    this._aligner.appendRemoteSnapshotEvent(ev)\n    this.markChange()\n\n    // Make sure we fetch history as soon as possible.\n    if (this._aligner.acceptsHistory) this.start()\n  }\n\n  start(): void {\n    if (this._didErr) return\n\n    if (!this._isRunning) {\n      this._isRunning = true\n\n      this.tick().then(() => {\n        this._isRunning = false\n      })\n    }\n  }\n\n  private async tick() {\n    const shouldFetchMore =\n      this._aligner.acceptsHistory &&\n      !this.timeline.reachedEarliestEntry &&\n      (this.selectionState === 'loading' ||\n        this._fetchMore ||\n        this.timeline.chunkCount <= this._fetchAtLeast)\n\n    if (!shouldFetchMore) {\n      return\n    }\n\n    try {\n      await this.fetchMoreTransactions()\n    } catch (err) {\n      this._didErr = true\n      this.handler(err, this)\n      return\n    }\n\n    await this.tick()\n  }\n\n  private async fetchMoreTransactions() {\n    const publishedId = this.timeline.publishedId\n    const draftId = this.timeline.draftId\n    const {dataset, token} = this.client.config()\n    const limit = TRANSLOG_ENTRY_LIMIT\n\n    let queryParams = `tag=sanity.studio.desk.history&effectFormat=mendoza&excludeContent=true&excludeMutations=true&includeIdentifiedDocumentsOnly=true&reverse=true&limit=${limit}`\n    let tid = this._aligner.earliestTransactionId\n    if (tid) {\n      queryParams += `&toTransaction=${tid}`\n    }\n\n    const url = `/data/history/${dataset}/transactions/${publishedId},${draftId}?${queryParams}`\n\n    const stream = await getJsonStream(this.client.getUrl(url), token)\n    const reader = stream.getReader()\n    let count = 0\n\n    for (;;) {\n      // eslint-disable-next-line no-await-in-loop\n      const result = await reader.read()\n      if (result.done) break\n\n      if ('error' in result.value) {\n        throw new Error(result.value.error.description || result.value.error.type)\n      }\n\n      count++\n\n      if (result.value.id === tid) {\n        // toTransaction is inclusive so we must ignore it when we fetch the next page\n        continue\n      }\n\n      // For some reason, the aligner is now interested in a different set of entries.\n      // This can happen if a new snapshot comes in as we're streaming the translog.\n      // In this case it's safe to abort, and the run-loop will re-schedule it correctly.\n      if (this._aligner.earliestTransactionId !== tid || !this._aligner.acceptsHistory) {\n        return\n      }\n\n      this._aligner.prependHistoryEvent(result.value)\n      tid = this._aligner.earliestTransactionId\n    }\n\n    // Same consistency checking here:\n    if (this._aligner.earliestTransactionId !== tid || !this._aligner.acceptsHistory) {\n      return\n    }\n\n    if (count < limit) {\n      this._aligner.didReachEarliestEntry()\n    }\n\n    this.markChange()\n  }\n\n  private markChange() {\n    this.timeline.updateChunks()\n\n    this.setRevTime(this._rev)\n    this.setSinceTime(this._rev)\n\n    this.version++\n    this.handler(null, this)\n  }\n}\n\nexport function createObservableController(\n  options: Omit<TimelineControllerOptions, 'handler'>\n): Observable<{historyController: TimelineController}> {\n  return new Observable((observer) => {\n    const controller = new TimelineController({\n      ...options,\n      handler: (err, innerController) => {\n        if (err) {\n          observer.error(err)\n        } else {\n          observer.next({historyController: innerController})\n        }\n      },\n    })\n\n    return remoteSnapshots(\n      options.client,\n      {\n        publishedId: options.documentId,\n        draftId: `drafts.${options.documentId}`,\n      },\n      options.documentType\n    ).subscribe((ev) => {\n      controller.handleRemoteMutation(ev)\n    })\n  })\n}\n","import {Annotation} from '../../../field'\nimport {CombinedDocument} from './types'\n\nexport function isSameAnnotation(a: Annotation, b: Annotation): boolean {\n  if (a && b) {\n    return a.author === b.author && a.chunk === b.chunk\n  }\n\n  if (!a && !b) {\n    return true\n  }\n\n  return false\n}\n\nexport function getAttrs(doc: CombinedDocument): Record<string, unknown> | null {\n  return doc.draft || doc.published\n}\n","import {incremental} from 'mendoza'\nimport {Input, ArrayInput, ObjectInput, StringInput, wrap, Diff, diffInput} from '@sanity/diff'\nimport {Chunk, Annotation} from '../../../field'\nimport {Timeline} from './Timeline'\nimport {isSameAnnotation} from './utils'\n\nexport type Meta = {chunk: Chunk; transactionIndex: number} | null\n\nexport type AnnotationExtractor = {\n  fromValue(value: incremental.Value<Meta>): Annotation\n  fromMeta(meta: Meta): Annotation\n}\n\nclass ArrayContentWrapper implements ArrayInput<Annotation> {\n  type: 'array' = 'array'\n  value: unknown[]\n  length: number\n  annotation: Annotation\n  extractor: AnnotationExtractor\n\n  private content: incremental.ArrayContent<Meta>\n  private elements: Input<Annotation>[] = []\n\n  constructor(\n    content: incremental.ArrayContent<Meta>,\n    value: unknown[],\n    annotation: Annotation,\n    extractor: AnnotationExtractor\n  ) {\n    this.content = content\n    this.value = value\n    this.annotation = annotation\n    this.extractor = extractor\n    this.length = content.elements.length\n  }\n\n  at(idx: number) {\n    if (idx >= this.length) throw new Error('out of bounds')\n    const input = this.elements[idx]\n    if (input) {\n      return input\n    }\n    return (this.elements[idx] = wrapValue(\n      this.content.elements[idx],\n      this.value[idx],\n      this.extractor\n    ))\n  }\n\n  annotationAt(idx: number): Annotation {\n    const meta = this.content.metas[idx]\n    return this.extractor.fromMeta(meta)\n  }\n}\n\nclass ObjectContentWrapper implements ObjectInput<Annotation> {\n  type: 'object' = 'object'\n  value: Record<string, unknown>\n  keys: string[]\n  annotation: Annotation\n  extractor: AnnotationExtractor\n\n  private content: incremental.ObjectContent<Meta>\n  private fields: Record<string, Input<Annotation>> = {}\n\n  constructor(\n    content: incremental.ObjectContent<Meta>,\n    value: Record<string, unknown>,\n    annotation: Annotation,\n    extractor: AnnotationExtractor\n  ) {\n    this.content = content\n    this.value = value\n    this.annotation = annotation\n    this.extractor = extractor\n    this.keys = Object.keys(content.fields)\n  }\n\n  get(key: string) {\n    const input = this.fields[key]\n    if (input) {\n      return input\n    }\n    const value = this.content.fields[key]\n    if (!value) return undefined\n    return (this.fields[key] = wrapValue(value, this.value[key], this.extractor))\n  }\n}\n\nclass StringContentWrapper implements StringInput<Annotation> {\n  type: 'string' = 'string'\n  value: string\n  annotation: Annotation\n  extractor: AnnotationExtractor\n\n  private content: incremental.StringContent<Meta>\n\n  constructor(\n    content: incremental.StringContent<Meta>,\n    value: string,\n    annotation: Annotation,\n    extractor: AnnotationExtractor\n  ) {\n    this.content = content\n    this.value = value\n    this.annotation = annotation\n    this.extractor = extractor\n  }\n\n  sliceAnnotation(start: number, end: number): {text: string; annotation: Annotation}[] {\n    const result: {text: string; annotation: Annotation}[] = []\n    let idx = 0\n\n    function push(text: string, annotation: Annotation) {\n      if (result.length > 0) {\n        const lst = result[result.length - 1]\n        if (isSameAnnotation(lst.annotation, annotation)) {\n          lst.text += text\n          return\n        }\n      }\n\n      result.push({text, annotation})\n    }\n\n    for (const part of this.content.parts) {\n      const length = part.value.length\n\n      const subStart = Math.max(0, start - idx)\n      if (subStart < length) {\n        // The start of the slice is inside this part somewhere.\n\n        // Figure out where the end is:\n        const subEnd = Math.min(length, end - idx)\n\n        // If the end of the slice is before this part, then we're guaranteed\n        // that there are no more parts.\n        if (subEnd <= 0) break\n\n        push(part.value.slice(subStart, subEnd), this.extractor.fromValue(part))\n      }\n\n      idx += length\n    }\n\n    return result\n  }\n}\n\nfunction wrapValue(\n  value: incremental.Value<Meta>,\n  raw: unknown,\n  extractor: AnnotationExtractor\n): Input<Annotation> {\n  const annotation = extractor.fromValue(value)\n\n  if (value.content) {\n    switch (value.content.type) {\n      case 'array':\n        return new ArrayContentWrapper(value.content, raw as unknown[], annotation, extractor)\n      case 'object':\n        return new ObjectContentWrapper(\n          value.content,\n          raw as Record<string, unknown>,\n          annotation,\n          extractor\n        )\n      case 'string':\n        return new StringContentWrapper(value.content, raw as string, annotation, extractor)\n      default:\n      // do nothing\n    }\n  }\n\n  return wrap(raw, annotation)\n}\n\nfunction extractAnnotationForFromInput(\n  timeline: Timeline,\n  firstChunk: Chunk | null,\n  meta: Meta\n): Annotation {\n  if (meta) {\n    // The next transaction is where it disappeared:\n    return annotationForTransactionIndex(timeline, meta.transactionIndex + 1, meta.chunk.index)\n  } else if (firstChunk) {\n    return annotationForTransactionIndex(timeline, firstChunk.start, firstChunk.index)\n  }\n\n  return null\n}\n\nfunction extractAnnotationForToInput(timeline: Timeline, meta: Meta): Annotation {\n  if (meta) {\n    return annotationForTransactionIndex(timeline, meta.transactionIndex, meta.chunk.index)\n  }\n\n  return null\n}\n\nfunction annotationForTransactionIndex(timeline: Timeline, idx: number, chunkIdx?: number) {\n  const tx = timeline.transactionByIndex(idx)\n  if (!tx) return null\n\n  const chunk = timeline.chunkByTransactionIndex(idx, chunkIdx)\n  if (!chunk) return null\n\n  return {\n    chunk,\n    timestamp: tx.timestamp,\n    author: tx.author,\n  }\n}\n\n// eslint-disable-next-line max-params\nexport function diffValue(\n  timeline: Timeline,\n  firstChunk: Chunk | null,\n  from: incremental.Value<Meta>,\n  fromRaw: unknown,\n  to: incremental.Value<Meta>,\n  toRaw: unknown\n): Diff<Annotation> {\n  const fromInput = wrapValue(from, fromRaw, {\n    fromValue(value) {\n      return extractAnnotationForFromInput(timeline, firstChunk, value.endMeta)\n    },\n    fromMeta(meta) {\n      return extractAnnotationForFromInput(timeline, firstChunk, meta)\n    },\n  })\n\n  const toInput = wrapValue(to, toRaw, {\n    fromValue(value) {\n      return extractAnnotationForToInput(timeline, value.startMeta)\n    },\n    fromMeta(meta) {\n      return extractAnnotationForToInput(timeline, meta)\n    },\n  })\n  return diffInput(fromInput, toInput)\n}\n","export type Merger<T> = (left: T, right: T) => T | [T, T]\n\n/**\n * The two ended array supports pushing both at the beginning and\n * at the end while preserving indicies.\n */\nexport class TwoEndedArray<T extends {index: number}> {\n  private _postive: T[] = []\n  private _negative: T[] = []\n\n  addToEnd(elem: T): void {\n    elem.index = this._postive.length\n    this._postive.push(elem)\n  }\n\n  addToBeginning(elem: T): void {\n    // Prefer to place things at the positive side if possible.\n    if (this.length == 0) {\n      this.addToEnd(elem)\n      return\n    }\n\n    elem.index = -(this._negative.length + 1)\n    this._negative.push(elem)\n  }\n\n  mergeAtEnd(value: T, merger: Merger<T>): void {\n    if (this.length === 0) {\n      this.addToEnd(value)\n      return\n    }\n\n    const idx = this.lastIdx\n    const result = merger(this.get(idx), value)\n    if (Array.isArray(result)) {\n      this.set(idx, result[0])\n      this.addToEnd(result[1])\n    } else {\n      this.set(idx, result)\n    }\n  }\n\n  mergeAtBeginning(value: T, merger: Merger<T>): void {\n    if (this.length === 0) {\n      this.addToEnd(value)\n      return\n    }\n\n    const idx = this.firstIdx\n    const result = merger(value, this.get(idx))\n    if (Array.isArray(result)) {\n      this.set(idx, result[1])\n      this.addToBeginning(result[0])\n    } else {\n      this.set(idx, result)\n    }\n  }\n\n  removeFromEnd(): void {\n    if (this._postive.length === 0) {\n      this._negative.shift()\n    } else {\n      this._postive.pop()\n    }\n  }\n\n  has(idx: number): boolean {\n    if (idx >= 0) {\n      return idx < this._postive.length\n    }\n\n    return -(idx + 1) < this._negative.length\n  }\n\n  get(idx: number): T {\n    if (idx >= 0) {\n      return this._postive[idx]\n    }\n\n    return this._negative[-(idx + 1)]\n  }\n\n  set(idx: number, value: T): void {\n    if (idx >= 0) {\n      value.index = idx\n      this._postive[idx] = value\n    } else {\n      value.index = idx\n      this._negative[-(idx + 1)] = value\n    }\n  }\n\n  get lastIdx(): number {\n    // Note: This also works correctly when _positive is empty (it returns -1)\n    return this._postive.length - 1\n  }\n\n  get last(): T {\n    return this.get(this.lastIdx)\n  }\n\n  get firstIdx(): number {\n    // Note: This also works correctly when _negative is empty (it returns 0)\n    return -this._negative.length\n  }\n\n  get first(): T {\n    return this.get(this.firstIdx)\n  }\n\n  get length(): number {\n    return this._postive.length + this._negative.length\n  }\n}\n","/* eslint-disable no-nested-ternary */\nimport type {MendozaEffectPair, MendozaPatch} from '@sanity/types'\nimport type {Transaction, ChunkType, Chunk} from './types'\n\nfunction canMergeEdit(type: ChunkType) {\n  return type === 'create' || type === 'editDraft'\n}\n\nconst CHUNK_WINDOW = 5 * 60 * 1000 // 5 minutes\n\nfunction isWithinMergeWindow(a: string, b: string) {\n  return Date.parse(b) - Date.parse(a) < CHUNK_WINDOW\n}\n\nexport function mergeChunk(left: Chunk, right: Chunk): Chunk | [Chunk, Chunk] {\n  if (left.end !== right.start) throw new Error('chunks are not next to each other')\n\n  // TODO: How to detect first squash/create\n\n  const draftState = combineState(left.draftState, right.draftState)\n  const publishedState = combineState(left.publishedState, right.publishedState)\n\n  if (left.type === 'delete' && right.type === 'editDraft') {\n    return [left, {...right, type: 'create', draftState, publishedState}]\n  }\n\n  // Convert deletes into either discardDraft or unpublish depending on what's been deleted.\n  if (right.type === 'delete') {\n    if (draftState === 'missing' && publishedState === 'present') {\n      return [left, {...right, type: 'discardDraft', draftState, publishedState}]\n    }\n\n    if (draftState === 'present' && publishedState === 'missing') {\n      return [left, {...right, type: 'unpublish', draftState, publishedState}]\n    }\n  }\n\n  if (\n    canMergeEdit(left.type) &&\n    right.type === 'editDraft' &&\n    isWithinMergeWindow(left.endTimestamp, right.startTimestamp)\n  ) {\n    const authors = new Set<string>()\n    for (const author of left.authors) authors.add(author)\n    for (const author of right.authors) authors.add(author)\n\n    return {\n      index: 0,\n      id: right.id,\n      type: left.type,\n      start: left.start,\n      end: right.end,\n      startTimestamp: left.startTimestamp,\n      endTimestamp: right.endTimestamp,\n      authors,\n      draftState,\n      publishedState,\n    }\n  }\n\n  return [left, {...right, draftState, publishedState}]\n}\n\ntype ChunkState = 'unedited' | 'deleted' | 'upsert'\nfunction getChunkState(effect?: MendozaEffectPair): ChunkState {\n  const modified = Boolean(effect)\n  const deleted = effect && isDeletePatch(effect?.apply)\n\n  if (deleted) {\n    return 'deleted'\n  }\n\n  if (modified) {\n    return 'upsert'\n  }\n\n  return 'unedited'\n}\n\n/*\n * getChunkType tries to determine what effect the given transaction had on the document\n * More information about the logic can be found here https://github.com/sanity-io/sanity/pull/2633#issuecomment-886461812\n *\n * |                    | draft unedited | draft deleted | draft upsert |\n * |--------------------|----------------|---------------|--------------|\n * | published unedited | X              | delete        | editDraft    |\n * | published deleted  | delete         | delete        | delete       |\n * | published upsert   | liveEdit       | publish       | liveEdit     |\n */\nfunction getChunkType(transaction: Transaction): ChunkType {\n  const draftState = getChunkState(transaction.draftEffect)\n  const publishedState = getChunkState(transaction.publishedEffect)\n\n  if (publishedState === 'unedited') {\n    if (draftState === 'deleted') {\n      return 'delete'\n    }\n\n    if (draftState === 'upsert') {\n      return 'editDraft'\n    }\n  }\n\n  if (publishedState === 'deleted') {\n    return 'delete'\n  }\n\n  if (publishedState === 'upsert') {\n    if (draftState === 'unedited') {\n      return 'editLive'\n    }\n\n    if (draftState === 'deleted') {\n      return 'publish'\n    }\n\n    if (draftState === 'upsert') {\n      return 'editLive'\n    }\n  }\n\n  return 'editLive'\n}\n\nexport function chunkFromTransaction(transaction: Transaction): Chunk {\n  const modifiedDraft = Boolean(transaction.draftEffect)\n  const modifiedPublished = Boolean(transaction.publishedEffect)\n\n  const draftDeleted = transaction.draftEffect && isDeletePatch(transaction.draftEffect.apply)\n  const publishedDeleted =\n    transaction.publishedEffect && isDeletePatch(transaction.publishedEffect.apply)\n\n  const type = getChunkType(transaction)\n\n  return {\n    index: 0,\n    id: transaction.id,\n    type,\n    start: transaction.index,\n    end: transaction.index + 1,\n    startTimestamp: transaction.timestamp,\n    endTimestamp: transaction.timestamp,\n    authors: new Set([transaction.author]),\n    draftState: modifiedDraft ? (draftDeleted ? 'missing' : 'present') : 'unknown',\n    publishedState: modifiedPublished ? (publishedDeleted ? 'missing' : 'present') : 'unknown',\n  }\n}\n\nfunction combineState(\n  left: 'present' | 'missing' | 'unknown',\n  right: 'present' | 'missing' | 'unknown'\n) {\n  return right === 'unknown' ? left : right\n}\n\nexport function isDeletePatch(patch: MendozaPatch): boolean {\n  return patch[0] === 0 && patch[1] === null\n}\n","import type {TransactionLogEventWithEffects} from '@sanity/types'\nimport {Diff} from '@sanity/diff'\nimport {applyPatch, incremental} from 'mendoza'\nimport {Chunk, Annotation} from '../../../field'\nimport {Transaction, DocumentRemoteMutationVersionEvent, CombinedDocument} from './types'\nimport {diffValue, Meta} from './diffValue'\nimport {TwoEndedArray} from './TwoEndedArray'\nimport {mergeChunk, chunkFromTransaction} from './chunker'\nimport {TraceEvent} from './replay'\nimport {getAttrs} from './utils'\n\nexport type ParsedTimeRef = Chunk | 'loading' | 'invalid'\n\nexport interface TimelineOptions {\n  publishedId: string\n  enableTrace?: boolean\n}\n\n/**\n * Timeline maintains information about the history of a document:\n * Grouping raw translog entries into sensible groups, replaying and\n * reconstructing different versions and abstract other details.\n *\n * Note that this class by itself is not capable of _fetching_ information,\n * but will only organize and structure the incoming translog entries.\n */\nexport class Timeline {\n  reachedEarliestEntry = false\n\n  publishedId: string\n  draftId: string\n  private _transactions = new TwoEndedArray<Transaction>()\n  private _chunks = new TwoEndedArray<Chunk>()\n\n  // These two properties are here to handle the case\n  private _possiblePendingTransactions = new Map<\n    string,\n    {\n      transaction: Transaction\n      idx: number\n    }\n  >()\n  private _recreateTransactionsFrom?: number\n  private _trace?: TraceEvent[]\n\n  constructor(opts: TimelineOptions) {\n    this.publishedId = opts.publishedId\n    this.draftId = `drafts.${opts.publishedId}`\n\n    if (opts.enableTrace) {\n      this._trace = []\n      this._trace.push({\n        type: 'initial',\n        publishedId: opts.publishedId,\n      })\n      ;(window as any).__sanityTimelineTrace = this._trace\n    }\n  }\n\n  get chunkCount(): number {\n    return this._chunks.length\n  }\n\n  /** Maps over the chunk from newest to oldest. */\n  mapChunks<T>(mapper: (chunk: Chunk, idx: number) => T): T[] {\n    const result: T[] = []\n\n    const firstIdx = this._chunks.firstIdx\n    const lastIdx = this._chunks.lastIdx\n\n    for (let idx = lastIdx; idx >= firstIdx; idx--) {\n      result.push(mapper(this._chunks.get(idx), idx))\n    }\n\n    return result\n  }\n\n  reset(): void {\n    this._transactions = new TwoEndedArray()\n    this._chunks = new TwoEndedArray()\n    this._possiblePendingTransactions = new Map()\n    this._recreateTransactionsFrom = undefined\n    this.reachedEarliestEntry = false\n  }\n\n  /**\n   * Adds a remote mutation to the timeline. This methods assumes that the remote mutations\n   * come in correct order for their respective version, but has no ordering requirements\n   * across draft/published.\n   *\n   * Example: [D1, D2, P1] (where D1 and P1 were mutations done to the draft and published\n   * version in the same transaction) is a valid input. [P1, D2, D1] is _not_ valid since\n   * the mutation for the draft is out of order.\n   */\n  addRemoteMutation(entry: DocumentRemoteMutationVersionEvent): void {\n    if (this._trace) this._trace.push({type: 'addRemoteMutation', event: entry})\n\n    const pending = this._possiblePendingTransactions.get(entry.transactionId)\n\n    const transaction: Transaction = pending\n      ? pending.transaction\n      : {\n          index: 0,\n          id: entry.transactionId,\n          timestamp: entry.timestamp.toISOString(),\n          author: entry.author,\n        }\n\n    if (entry.version === 'draft') {\n      transaction.draftEffect = entry.effects as any\n    } else {\n      transaction.publishedEffect = entry.effects as any\n    }\n\n    if (pending) {\n      this._possiblePendingTransactions.delete(entry.transactionId)\n      this._invalidateTransactionFrom(pending.idx)\n    } else {\n      this._transactions.addToEnd(transaction)\n      this._possiblePendingTransactions.set(entry.transactionId, {\n        transaction,\n        idx: this._transactions.lastIdx,\n      })\n    }\n  }\n\n  addTranslogEntry(event: TransactionLogEventWithEffects): void {\n    if (this._trace) this._trace.push({type: 'addTranslogEntry', event})\n\n    this._transactions.addToBeginning({\n      index: 0,\n      id: event.id,\n      author: event.author,\n      timestamp: event.timestamp,\n      draftEffect: event.effects[this.draftId],\n      publishedEffect: event.effects[this.publishedId],\n    })\n  }\n\n  /** Mark that we've reached the earliest entry. */\n  didReachEarliestEntry(): void {\n    if (this._trace) this._trace.push({type: 'didReachEarliestEntry'})\n\n    this.reachedEarliestEntry = true\n  }\n\n  /**\n   * updateChunks synchronizes the chunks to match the current state\n   * of the transactions array. After calling this method you need\n   * to invalidate all Chunks.\n   */\n  updateChunks(): void {\n    if (this._trace) this._trace.push({type: 'updateChunks'})\n\n    this._removeInvalidatedChunks()\n    this._addChunksFromTransactions()\n    this._createInitialChunk()\n  }\n\n  private _removeInvalidatedChunks() {\n    if (this._recreateTransactionsFrom) {\n      while (this._chunks.length > 0) {\n        const chunk = this._chunks.last\n        if (this._recreateTransactionsFrom < chunk.end) {\n          this._chunks.removeFromEnd()\n        } else {\n          break\n        }\n      }\n      this._recreateTransactionsFrom = undefined\n    }\n  }\n\n  private _addChunksFromTransactions() {\n    const firstIdx = this._transactions.firstIdx\n    const lastIdx = this._transactions.lastIdx\n\n    // Add transactions at the end:\n    const nextTransactionToChunk = this._chunks.length > 0 ? this._chunks.last.end : firstIdx\n    for (let idx = nextTransactionToChunk; idx <= lastIdx; idx++) {\n      const transaction = this._transactions.get(idx)\n      this._chunks.mergeAtEnd(chunkFromTransaction(transaction), mergeChunk)\n    }\n\n    // Add transactions at the beginning:\n    if (this._chunks.length == 0) return\n\n    const firstTransactionChunked = this._chunks.first.start\n\n    for (let idx = firstTransactionChunked - 1; idx >= firstIdx; idx--) {\n      const transaction = this._transactions.get(idx)\n      this._chunks.mergeAtBeginning(chunkFromTransaction(transaction), mergeChunk)\n    }\n  }\n\n  private _invalidateTransactionFrom(idx: number) {\n    if (this._recreateTransactionsFrom === undefined || idx < this._recreateTransactionsFrom) {\n      this._recreateTransactionsFrom = idx\n    }\n  }\n\n  private _createInitialChunk() {\n    if (this.reachedEarliestEntry) {\n      if (this._chunks.first?.type === 'initial') return\n\n      const firstTx = this._transactions.first\n      if (!firstTx) return\n      const initialChunk = chunkFromTransaction(firstTx)\n      initialChunk.type = 'initial'\n      initialChunk.id = '@initial'\n      initialChunk.end = initialChunk.start\n      this._chunks.addToBeginning(initialChunk)\n    }\n  }\n\n  /**\n   * Resolves a time reference.\n   *\n   * Note that the chunk returned is only valid if the timeline stays constant.\n   * Once the timeline is updated, you must re-parse all references.\n   */\n  parseTimeId(id: string): ParsedTimeRef {\n    if (this._chunks.length === 0) {\n      return this.reachedEarliestEntry ? 'invalid' : 'loading'\n    }\n\n    const [timestampStr, chunkId] = id.split('/', 3)\n    const timestamp = Number(timestampStr)\n\n    for (let idx = this._chunks.lastIdx; idx >= this._chunks.firstIdx; idx--) {\n      const chunk = this._chunks.get(idx)\n      if (chunk.id === chunkId) {\n        return chunk\n      }\n\n      if (Date.parse(chunk.endTimestamp) + 60 * 60 * 1000 < timestamp) {\n        // The chunk ended _before_ the timestamp we're asking for. This means that there\n        // is no point in looking further and the chunk is invalid.\n\n        // We add 1 hour to allow some slack since transactions are not guaranteed to be in order.\n        return 'invalid'\n      }\n    }\n\n    return this.reachedEarliestEntry ? 'invalid' : 'loading'\n  }\n\n  findLastPublishedBefore(chunk: Chunk | null): ParsedTimeRef {\n    for (\n      let chunkIdx = chunk ? chunk.index - 1 : this._chunks.lastIdx;\n      chunkIdx >= this._chunks.firstIdx;\n      chunkIdx--\n    ) {\n      const currentChunk = this._chunks.get(chunkIdx)\n      if (currentChunk.type === 'publish' || currentChunk.type === 'initial') {\n        return currentChunk\n      }\n    }\n\n    if (!this.reachedEarliestEntry) return 'loading'\n\n    return this._chunks.first\n  }\n\n  isLatestChunk(chunk: Chunk): boolean {\n    return chunk === this._chunks.last\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  createTimeId(chunk: Chunk): string {\n    return `${chunk.endTimestamp.valueOf()}/${chunk.id}`\n  }\n\n  lastChunk(): Chunk {\n    return this._chunks.last\n  }\n\n  transactionByIndex(idx: number): Transaction | null {\n    if (!this._transactions.has(idx)) return null\n    return this._transactions.get(idx)\n  }\n\n  chunkByTransactionIndex(idx: number, startChunkIdx = 0): Chunk {\n    let chunkIdx = startChunkIdx\n    for (;;) {\n      const chunk = this._chunks.get(chunkIdx)\n      if (!chunk) throw new Error('transaction does not belong in any chunk')\n\n      if (idx >= chunk.end) {\n        chunkIdx++\n      } else if (idx < chunk.start) {\n        chunkIdx--\n      } else {\n        return chunk\n      }\n    }\n  }\n\n  replayBackwardsBetween(\n    firstIdx: number,\n    lastIdx: number,\n    doc: CombinedDocument\n  ): CombinedDocument {\n    let draft = doc.draft\n    let published = doc.published\n\n    for (let idx = lastIdx; idx >= firstIdx; idx--) {\n      const transaction = this._transactions.get(idx)\n\n      if (transaction.draftEffect) {\n        draft = applyPatch(draft, transaction.draftEffect.revert)\n      }\n\n      if (transaction.publishedEffect) {\n        published = applyPatch(published, transaction.publishedEffect.revert)\n      }\n    }\n\n    return {draft, published}\n  }\n\n  replayBackwardsUntil(firstIdx: number, doc: CombinedDocument): CombinedDocument {\n    return this.replayBackwardsBetween(firstIdx, this._transactions.lastIdx, doc)\n  }\n\n  calculateDiff(\n    initialDoc: CombinedDocument,\n    finalDoc: CombinedDocument,\n    firstIdx: number,\n    lastIdx: number\n  ): Diff<Annotation> {\n    let draftValue = incremental.wrap<Meta>(initialDoc.draft, null)\n    let publishedValue = incremental.wrap<Meta>(initialDoc.published, null)\n\n    const initialValue = getValue(draftValue, publishedValue)\n    const initialAttributes = getAttrs(initialDoc)\n    let firstChunk: Chunk | null = null\n\n    // Loop over all of the chunks:\n    for (let chunkIdx = firstIdx; chunkIdx <= lastIdx; chunkIdx++) {\n      const chunk = this._chunks.get(chunkIdx)\n      if (!firstChunk) firstChunk = chunk\n\n      for (let idx = chunk.start; idx < chunk.end; idx++) {\n        const transaction = this._transactions.get(idx)\n\n        const meta = {\n          chunk,\n          transactionIndex: idx,\n        }\n\n        const preDraftValue = draftValue\n        const prePublishedValue = publishedValue\n\n        if (transaction.draftEffect) {\n          draftValue = incremental.applyPatch(draftValue, transaction.draftEffect.apply, meta)\n        }\n\n        if (transaction.publishedEffect) {\n          publishedValue = incremental.applyPatch(\n            publishedValue,\n            transaction.publishedEffect.apply,\n            meta\n          )\n        }\n\n        const didHaveDriaft = incremental.getType(preDraftValue) !== 'null'\n        const haveDraft = incremental.getType(draftValue) !== 'null'\n        const havePublished = incremental.getType(publishedValue) !== 'null'\n\n        if (havePublished && !haveDraft) {\n          publishedValue = incremental.rebaseValue(preDraftValue, publishedValue)\n        }\n\n        if (haveDraft && !didHaveDriaft) {\n          draftValue = incremental.rebaseValue(prePublishedValue, draftValue)\n        }\n      }\n    }\n\n    const finalValue = incremental.getType(draftValue) === 'null' ? publishedValue : draftValue\n    const finalAttributes = getAttrs(finalDoc)\n\n    return diffValue(this, firstChunk, initialValue, initialAttributes, finalValue, finalAttributes)\n  }\n}\n\nfunction getValue(draftValue: incremental.Value<Meta>, publishedValue: incremental.Value<Meta>) {\n  return incremental.getType(draftValue) === 'null' ? publishedValue : draftValue\n}\n","import type {SanityClient} from '@sanity/client'\nimport {\n  isReference,\n  Reference,\n  SanityDocument,\n  TransactionLogEventWithMutations,\n} from '@sanity/types'\nimport jsonReduce from 'json-reduce'\nimport {from, Observable} from 'rxjs'\nimport {map, mergeMap} from 'rxjs/operators'\nimport {getDraftId, getPublishedId, isRecord} from '../../util'\nimport {Timeline, TimelineController, createObservableController} from './history'\n\nexport interface HistoryStore {\n  getDocumentAtRevision: (\n    documentId: string,\n    revision: string\n  ) => Promise<SanityDocument | undefined>\n\n  getHistory: (\n    documentIds: string[],\n    options?: {time?: string; revision?: string}\n  ) => Promise<{documents: SanityDocument[]}>\n\n  getTransactions: (documentIds: string[]) => Promise<TransactionLogEventWithMutations[]>\n\n  restore: (id: string, targetId: string, rev: string) => Observable<SanityDocument>\n\n  getTimeline: (options: {publishedId: string; enableTrace?: boolean}) => Timeline\n\n  getTimelineController: (options: {\n    client: SanityClient\n    documentId: string\n    documentType: string\n    timeline: Timeline\n  }) => Observable<{historyController: TimelineController}>\n}\n\nconst documentRevisionCache: Record<string, Promise<SanityDocument | undefined> | undefined> =\n  Object.create(null)\n\nconst getHistory = (\n  client: SanityClient,\n  documentIds: string[],\n  options: {time?: string; revision?: string} = {}\n): Promise<{documents: SanityDocument[]}> => {\n  const ids = Array.isArray(documentIds) ? documentIds : [documentIds]\n  const {time, revision} = options\n\n  if (time && revision) {\n    throw new Error(`getHistory can't handle both time and revision parameters`)\n  }\n\n  const dataset = client.clientConfig.dataset\n  let url = `/data/history/${dataset}/documents/${ids.join(',')}`\n\n  if (revision) {\n    url = `${url}?revision=${revision}`\n  } else {\n    const timestamp = time || new Date().toISOString()\n\n    url = `${url}?time=${timestamp}`\n  }\n\n  return client.request({url})\n}\n\nconst getDocumentAtRevision = (\n  client: SanityClient,\n  documentId: string,\n  revision: string\n): Promise<SanityDocument | undefined> => {\n  const publishedId = getPublishedId(documentId)\n  const draftId = getDraftId(documentId)\n  const cacheKey = `${publishedId}@${revision}`\n  const cached = documentRevisionCache[cacheKey]\n  if (cached) {\n    return cached\n  }\n\n  const dataset = client.clientConfig.dataset\n  const url = `/data/history/${dataset}/documents/${publishedId},${draftId}?revision=${revision}`\n\n  const entry = client.request<{documents?: SanityDocument[]}>({url}).then((result) => {\n    const documents = result.documents || []\n    const published = documents.find((res) => res._id === publishedId)\n    const draft = documents.find((res) => res._id === draftId)\n    return draft || published\n  })\n\n  documentRevisionCache[cacheKey] = entry\n  return entry\n}\n\nconst getTransactions = async (\n  client: SanityClient,\n  documentIds: string | string[]\n): Promise<TransactionLogEventWithMutations[]> => {\n  const ids = Array.isArray(documentIds) ? documentIds : [documentIds]\n  const dataset = client.clientConfig.dataset\n  const query = {excludeContent: 'true', includeIdentifiedDocumentsOnly: 'true'}\n  const url = `/data/history/${dataset}/transactions/${ids.join(',')}`\n  const result = await client.request({url, query})\n  const transactions = result\n    .toString('utf8')\n    .split('\\n')\n    .filter(Boolean)\n    .map((line: string) => JSON.parse(line))\n\n  return transactions\n}\n\nconst getAllRefIds = (doc: SanityDocument): string[] =>\n  jsonReduce(\n    doc as any,\n    (acc: any, node) => (isReference(node) && !acc.includes(node._ref) ? [...acc, node._ref] : acc),\n    []\n  )\n\nfunction jsonMap(value: unknown, mapFn: any): any {\n  if (Array.isArray(value)) {\n    return mapFn(\n      value.map((item) => jsonMap(item, mapFn)).filter((item) => typeof item !== 'undefined')\n    )\n  }\n\n  if (isRecord(value)) {\n    return mapFn(\n      Object.keys(value).reduce<Record<string, unknown>>((res, key) => {\n        const mappedValue = jsonMap(value[key], mapFn)\n        if (typeof mappedValue !== 'undefined') {\n          res[key] = mappedValue\n        }\n\n        return res\n      }, {})\n    )\n  }\n\n  return mapFn(value)\n}\n\nconst mapRefNodes = (doc: SanityDocument, mapFn: (node: Reference) => Reference | undefined) =>\n  jsonMap(doc, (node: unknown) => (isReference(node) ? mapFn(node) : node))\n\nexport const removeMissingReferences = (\n  doc: SanityDocument,\n  existingIds: Record<string, boolean | undefined>\n): SanityDocument =>\n  mapRefNodes(doc, (refNode) => {\n    const documentExists = existingIds[refNode._ref]\n    return documentExists ? refNode : undefined\n  })\n\nfunction restore(client: SanityClient, documentId: string, targetDocumentId: string, rev: string) {\n  return from(getDocumentAtRevision(client, documentId, rev)).pipe(\n    mergeMap((documentAtRevision) => {\n      if (!documentAtRevision) {\n        throw new Error(`Unable to find document with ID ${documentId} at revision ${rev}`)\n      }\n\n      const existingIdsQuery = getAllRefIds(documentAtRevision)\n        .map((refId) => `\"${refId}\": defined(*[_id==\"${refId}\"]._id)`)\n        .join(',')\n\n      return client.observable\n        .fetch<Record<string, boolean | undefined>>(`{${existingIdsQuery}}`)\n        .pipe(map((existingIds) => removeMissingReferences(documentAtRevision, existingIds)))\n    }),\n    map((documentAtRevision) => {\n      // Remove _updatedAt and create a new draft from the document at given revision\n      const {_updatedAt, ...document} = documentAtRevision\n      return {...document, _id: targetDocumentId}\n    }),\n    mergeMap((restoredDraft) =>\n      client.observable.createOrReplace(restoredDraft, {visibility: 'async'})\n    )\n  )\n}\n\nexport interface HistoryStoreOptions {\n  client: SanityClient\n}\n\nexport function createHistoryStore({client}: HistoryStoreOptions): HistoryStore {\n  return {\n    getDocumentAtRevision: (documentId, revision) =>\n      getDocumentAtRevision(client, documentId, revision),\n\n    getHistory: (documentIds, options) => getHistory(client, documentIds, options),\n\n    getTransactions: (documentIds) => getTransactions(client, documentIds),\n\n    restore: (id, targetId, rev) => restore(client, id, targetId, rev),\n\n    getTimeline: (options: {publishedId: string; enableTrace?: boolean}) => new Timeline(options),\n\n    getTimelineController: (options: {\n      client: SanityClient\n      documentId: string\n      documentType: string\n      timeline: Timeline\n    }) => createObservableController(options),\n  }\n}\n","import {defer, timer} from 'rxjs'\nimport {map, mergeMapTo, shareReplay} from 'rxjs/operators'\nimport {sample} from 'lodash'\nimport {StateEvent} from './message-transports/transport'\n\nconst USERIDS = [\n  'pqSMwf6hH',\n  'pnLYqNfv5',\n  'priDVVmy8',\n  'p0NFOU0j8',\n  'pTDl2jw8d',\n  'pHMeQnTse',\n  'pDQYzJbyS',\n  'pZyoPHKUs',\n  'p4Tyi2Be5',\n  'pb9vii060',\n  'pE8yhOisw',\n  'p7Fd2C6Cj',\n  'p3exSgYCx',\n  'pbIQRYViC',\n  'p8GJaTEhN',\n  'p27ewL8aM',\n  'pYg97z75S',\n  'pdLr4quHv',\n  'pkJXiDgg6',\n  'pkl4UAKcA',\n\n  // Included to ensure we handle the case when a user profile cannot\n  // be fetched due to insufficient privileges or similar\n  'pNoExists',\n]\n\nconst PATHS = [\n  ['nested', 'first'],\n  ['nested', 'second'],\n  [\n    'nestedArray',\n    {_key: '565c867c8dac'},\n    'arrayNo1',\n    {_key: 'a645548a8f01'},\n    'arrayNo1',\n    {_key: '1685e372c40f'},\n    'fieldNo0',\n  ],\n  ['nestedArray', {_key: '565c867c8dac'}, 'fieldNo0'],\n  ['nestedArray', {_key: '565c867c8dac'}, 'arrayNo19', {_key: 'a02e7a93e2a2'}, 'fieldNo0'],\n  ['nestedArray', {_key: '565c867c8dac'}, 'arrayNo19', {_key: 'a02e7a93e2a2'}, 'fieldNo19'],\n  ['address', 'country'],\n  ['address', 'street'],\n  ['customInputWithDefaultPresence', 'row3', 'cell3'],\n]\n\nexport const mock$ = defer(() => timer(0, 10000)).pipe(\n  mergeMapTo(USERIDS),\n  map(\n    (id, n): StateEvent => ({\n      type: 'state',\n      userId: id,\n      sessionId: id + n,\n      timestamp: new Date().toISOString(),\n      locations: [\n        {\n          type: 'document',\n          documentId: 'presence-debug',\n          lastActiveAt: new Date().toISOString(),\n          path: sample(PATHS),\n        },\n      ] as any,\n    })\n  ),\n  shareReplay()\n)\n","import {Observable, EMPTY} from 'rxjs'\nimport {map, share} from 'rxjs/operators'\nimport {BifurClient} from '@sanity/bifur-client'\nimport {PresenceLocation} from '../types'\nimport {Transport, TransportEvent, TransportMessage} from './transport'\n\ntype BifurStateMessage = {\n  type: 'state'\n  i: string\n  m: {\n    sessionId: string\n    locations: PresenceLocation[]\n  }\n}\n\ntype BifurDisconnectMessage = {\n  type: 'disconnect'\n  i: string\n  m: {session: string}\n}\n\ntype RollCallEvent = {\n  type: 'rollCall'\n  i: string\n  session: string\n}\n\ntype IncomingBifurEvent<T> = RollCallEvent | BifurStateMessage | BifurDisconnectMessage\n\nconst handleIncomingMessage = (event: IncomingBifurEvent<Location[]>): TransportEvent => {\n  if (event.type === 'rollCall') {\n    return {\n      type: 'rollCall',\n      userId: event.i,\n      sessionId: event.session,\n    }\n  }\n  if (event.type === 'state') {\n    const {sessionId, locations} = event.m\n    return {\n      type: 'state',\n      userId: event.i,\n      sessionId: sessionId,\n      timestamp: new Date().toISOString(),\n      locations,\n    }\n  }\n\n  if (event.type === 'disconnect') {\n    return {\n      type: 'disconnect',\n      userId: event.i,\n      sessionId: event.m.session,\n      timestamp: new Date().toISOString(),\n    }\n  }\n\n  throw new Error(`Got unknown presence event: ${JSON.stringify(event)}`)\n}\n\nexport const createBifurTransport = (bifur: BifurClient, sessionId: string): Transport => {\n  const incomingEvents$: Observable<TransportEvent> = bifur\n    .request<IncomingBifurEvent<Location[]>>('presence')\n    .pipe(map(handleIncomingMessage))\n\n  const dispatchMessage = (message: TransportMessage): Observable<undefined> => {\n    if (message.type === 'rollCall') {\n      return bifur.request('presence_rollcall', {session: sessionId})\n    }\n\n    if (message.type === 'state') {\n      return bifur.request('presence_announce', {\n        data: {locations: message.locations, sessionId},\n      })\n    }\n\n    if (message.type === 'disconnect') {\n      return bifur.request('presence_disconnect', {session: sessionId})\n    }\n\n    return EMPTY\n  }\n\n  return [incomingEvents$.pipe(share()), dispatchMessage]\n}\n","/* eslint-disable camelcase */\n\nimport {BehaviorSubject, defer, EMPTY, from, fromEvent, merge, NEVER, Observable, timer} from 'rxjs'\nimport {\n  auditTime,\n  distinctUntilChanged,\n  filter,\n  flatMap,\n  map,\n  mergeMapTo,\n  scan,\n  share,\n  shareReplay,\n  switchMap,\n  switchMapTo,\n  takeUntil,\n  tap,\n  toArray,\n  withLatestFrom,\n} from 'rxjs/operators'\nimport {flatten, groupBy, omit, uniq} from 'lodash'\nimport {nanoid} from 'nanoid'\nimport {User} from '@sanity/types'\nimport {BifurClient} from '@sanity/bifur-client'\nimport {debugParams$} from '../debugParams'\nimport {ConnectionStatusStore} from '../connection-status/connection-status-store'\nimport {UserStore} from '../user'\nimport {\n  DisconnectEvent,\n  RollCallEvent,\n  StateEvent,\n  TransportEvent,\n} from './message-transports/transport'\nimport {mock$} from './mock-events'\nimport {createBifurTransport} from './message-transports/bifurTransport'\nimport {DocumentPresence, GlobalPresence, PresenceLocation, Session, UserSessionPair} from './types'\n\nexport interface PresenceStore {\n  /**\n   * @internal\n   */\n  documentPresence: (documentId: string) => Observable<DocumentPresence[]>\n\n  /**\n   * @internal\n   */\n  globalPresence$: Observable<GlobalPresence[]>\n\n  /**\n   * @internal\n   */\n  reportLocations: (locations: PresenceLocation[]) => Observable<void>\n\n  /**\n   * @internal\n   */\n  setLocation: (nextLocation: PresenceLocation[]) => void\n\n  /**\n   * @internal\n   */\n  debugPresenceParam$: Observable<string[]>\n}\n\nconst KEY = 'presence_session_id'\nconst generate = () => nanoid(16)\n\n// We're keeping the session id in sessionStorage as it will survive page reloads.\n// todo:\n//  There's a potential issue with window.open(...) here as it inherits the top level session storage and thus will\n//  re-use session ids:\n//    > Opening a page in a new tab or window creates a new session with the value of the top-level browsing context,\n//      which differs from how session cookies work.\n//      More at https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage\n//  This is _probably_ a quite marginal case and not going to be much of a issue in practice\nfunction getSessionId() {\n  try {\n    return window.sessionStorage.getItem(KEY)\n  } catch (err) {\n    // We don't want to fail hard if session storage can't be accessed for some reason\n  }\n  return null\n}\n\nfunction setSessionId(id: string) {\n  try {\n    window.sessionStorage.setItem(KEY, id)\n  } catch (err) {\n    // We don't want to fail hard if session storage can't be accessed for some reason\n  }\n  return id\n}\n\nexport const SESSION_ID = getSessionId() || setSessionId(generate())\n\nexport function __tmp_wrap_presenceStore(context: {\n  bifur: BifurClient\n  connectionStatusStore: ConnectionStatusStore\n  userStore: UserStore\n}): PresenceStore {\n  const {bifur, connectionStatusStore, userStore} = context\n\n  const [presenceEvents$, sendMessage] = createBifurTransport(bifur, SESSION_ID)\n\n  const currentLocation$ = new BehaviorSubject<PresenceLocation[]>([])\n  const locationChange$ = currentLocation$.pipe(distinctUntilChanged())\n\n  // export\n  const setLocation = (nextLocation: PresenceLocation[]) => {\n    currentLocation$.next(nextLocation)\n  }\n\n  // export\n  const reportLocations = (locations: PresenceLocation[]) =>\n    sendMessage({type: 'state', locations: locations})\n\n  const requestRollCall = () => sendMessage({type: 'rollCall'})\n\n  const rollCallRequests$ = presenceEvents$.pipe(\n    filter((event: TransportEvent): event is RollCallEvent => event.type === 'rollCall'),\n    // do not respond to my own rollcall requests\n    filter((event: RollCallEvent) => event.sessionId !== SESSION_ID)\n  )\n\n  const REPORT_MIN_INTERVAL = 30000\n\n  // Interval to report my own location at\n  const reportLocationInterval$ = timer(0, REPORT_MIN_INTERVAL)\n\n  const reportLocation$ = defer(() => merge(locationChange$, rollCallRequests$)).pipe(\n    switchMap(() => reportLocationInterval$),\n    withLatestFrom(currentLocation$),\n    map(([, locations]) => locations),\n    auditTime(200),\n    switchMap((locations) => reportLocations(locations)),\n    mergeMapTo(EMPTY),\n    share()\n  )\n\n  // This represents my rollcall request to other clients\n  // Note: We are requesting a rollcall whenever we (re)connect\n  const myRollCall$ = defer(() => requestRollCall()).pipe(mergeMapTo(EMPTY))\n\n  const connectionChange$ = connectionStatusStore.connectionStatus$.pipe(\n    map((status) => status.type),\n    filter((statusType) => statusType === 'connected' || statusType === 'error'),\n    distinctUntilChanged()\n  )\n\n  // export\n  const debugPresenceParam$ = debugParams$.pipe(\n    map((args) => args.find((arg) => arg.startsWith('presence='))),\n    map(\n      (arg) =>\n        arg\n          ?.split('presence=')[1]\n          .split(',')\n          .map((r) => r.trim()) || []\n    )\n  )\n\n  const useMock$ = debugPresenceParam$.pipe(\n    filter((args) => args.includes('fake_others')),\n    tap(() => {\n      // eslint-disable-next-line no-console\n      console.log(\n        'Faking other users present in the studio. They will hang out in the document with _type: \"presence\" and _id: \"presence-debug\"'\n      )\n    }),\n    switchMapTo(mock$)\n  )\n\n  const debugIntrospect$ = debugPresenceParam$.pipe(map((args) => args.includes('show_own')))\n\n  const syncEvent$ = merge(myRollCall$, presenceEvents$).pipe(\n    filter(\n      (event: TransportEvent): event is StateEvent | DisconnectEvent =>\n        event.type === 'state' || event.type === 'disconnect'\n    )\n  )\n\n  const stateEventToSession = (stateEvent: StateEvent): Session => {\n    return {\n      lastActiveAt: stateEvent.timestamp,\n      locations: stateEvent.locations,\n      sessionId: stateEvent.sessionId,\n      userId: stateEvent.userId,\n    }\n  }\n\n  const states$: Observable<{[sessionId: string]: Session}> = merge(syncEvent$, useMock$).pipe(\n    scan(\n      (keyed, event: StateEvent | DisconnectEvent): {[sessionId: string]: Session} =>\n        event.type === 'disconnect'\n          ? omit(keyed, event.sessionId)\n          : {...keyed, [event.sessionId]: stateEventToSession(event)},\n      {}\n    )\n  )\n\n  const allSessions$: Observable<UserSessionPair[]> = connectionChange$.pipe(\n    switchMap((status) => (status === 'connected' ? merge(states$, reportLocation$) : NEVER)),\n    map((keyedSessions) => Object.values(keyedSessions)),\n    switchMap((sessions) => {\n      const userIds = uniq(sessions.map((sess) => sess.userId))\n      return from(userStore.getUsers(userIds)).pipe(\n        map((users) =>\n          sessions\n            .map((session) => ({\n              // eslint-disable-next-line max-nested-callbacks\n              user: users.find((res) => res.id === session.userId),\n              session: session,\n            }))\n            // If we failed to find a user profile for a session, remove it\n            .filter(userSessionPairHasUser)\n        )\n      )\n    }),\n    takeUntil(\n      fromEvent(window, 'beforeunload').pipe(switchMap(() => sendMessage({type: 'disconnect'})))\n    ),\n    shareReplay({refCount: true, bufferSize: 1})\n  )\n\n  function userSessionPairHasUser(pair: Partial<UserSessionPair>): pair is UserSessionPair {\n    return Boolean(pair.user && pair.session)\n  }\n\n  // export\n  const globalPresence$: Observable<GlobalPresence[]> = allSessions$.pipe(\n    map((sessions): {user: User; sessions: Session[]}[] => {\n      const grouped = groupBy(\n        sessions.map((s) => s.session),\n        (e) => e.userId\n      )\n\n      return Object.keys(grouped).map((userId): {user: User; sessions: Session[]} => ({\n        user: sessions.find((s) => s.user.id === userId)?.user as User,\n        sessions: grouped[userId],\n      }))\n    }),\n    withLatestFrom(debugIntrospect$),\n    map(([userAndSessions, debugIntrospect]) =>\n      userAndSessions.filter((userAndSession) => {\n        if (debugIntrospect) {\n          return true\n        }\n\n        const isCurrent = userAndSession.sessions.some((sess) => sess.sessionId === SESSION_ID)\n\n        return !isCurrent\n      })\n    ),\n    map((userAndSessions) =>\n      userAndSessions.map((userAndSession) => ({\n        user: userAndSession.user,\n        status: 'online',\n        lastActiveAt: userAndSession.sessions.sort()[0]?.lastActiveAt,\n        locations: flatten(\n          (userAndSession.sessions || []).map((session) => session.locations || [])\n        )\n          .map((location) => ({\n            type: location.type,\n            documentId: location.documentId,\n            path: location.path,\n            lastActiveAt: location.lastActiveAt,\n          }))\n          .reduce((prev, curr) => prev.concat(curr), [] as PresenceLocation[]),\n      }))\n    )\n  )\n\n  // export\n  const documentPresence = (documentId: string): Observable<DocumentPresence[]> => {\n    return allSessions$.pipe(\n      withLatestFrom(debugIntrospect$),\n      switchMap(([userAndSessions, debugIntrospect]) =>\n        from(userAndSessions).pipe(\n          filter(\n            (userAndSession) => debugIntrospect || userAndSession.session.sessionId !== SESSION_ID\n          ),\n          flatMap((userAndSession) =>\n            (userAndSession.session.locations || [])\n              .filter((item) => item.documentId === documentId)\n              .map((location) => ({\n                user: userAndSession.user,\n                lastActiveAt: userAndSession.session.lastActiveAt,\n                path: location.path || [],\n                sessionId: userAndSession.session.sessionId,\n              }))\n          ),\n          toArray()\n        )\n      )\n    )\n  }\n\n  return {setLocation, reportLocations, debugPresenceParam$, globalPresence$, documentPresence}\n}\n","import {useState, useEffect} from 'react'\nimport {usePresenceStore} from '../datastores'\nimport {GlobalPresence} from './types'\n\nexport function useGlobalPresence(): GlobalPresence[] {\n  const [presence, setPresence] = useState<GlobalPresence[]>([])\n  const presenceStore = usePresenceStore()\n\n  useEffect(() => {\n    const subscription = presenceStore.globalPresence$.subscribe(setPresence)\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [presenceStore])\n\n  return presence\n}\n","import {useState, useEffect} from 'react'\nimport {usePresenceStore} from '../datastores'\nimport {DocumentPresence} from './types'\n\nexport function useDocumentPresence(documentId: string): DocumentPresence[] {\n  const presenceStore = usePresenceStore()\n  const [presence, setPresence] = useState<DocumentPresence[]>([])\n\n  useEffect(() => {\n    const subscription = presenceStore.documentPresence(documentId).subscribe(setPresence)\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [documentId, presenceStore])\n\n  return presence\n}\n","import {SanityClient} from '@sanity/client'\nimport {Observable} from 'rxjs'\nimport {ProjectData, ProjectStore} from './types'\n\nexport function createProjectStore(context: {client: SanityClient}): ProjectStore {\n  const {client} = context\n  const projectId = client.config().projectId\n  const versionedClient = client.withConfig({apiVersion: '2021-12-15'})\n\n  function get(): Observable<ProjectData> {\n    return versionedClient.observable.request({\n      url: `/projects/${projectId}`,\n    })\n  }\n\n  function getDatasets() {\n    return versionedClient.observable.request({\n      url: `/projects/${projectId}/datasets`,\n    })\n  }\n\n  return {get, getDatasets}\n}\n","import {Observable, of as observableOf} from 'rxjs'\nimport {Backend} from './types'\n\nconst tryParse = (val: string, defValue: unknown) => {\n  try {\n    return JSON.parse(val)\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.warn(`Failed to parse settings: ${err.message}`)\n    return defValue\n  }\n}\n\nconst get = (key: string, defValue: unknown): Observable<unknown> => {\n  const val = localStorage.getItem(key)\n\n  return observableOf(val === null ? defValue : tryParse(val, defValue))\n}\n\nconst set = (key: string, nextValue: unknown): Observable<unknown> => {\n  // Can't stringify undefined, and nulls are what\n  // `getItem` returns when key does not exist\n  if (typeof nextValue === 'undefined' || nextValue === null) {\n    localStorage.removeItem(key)\n  } else {\n    localStorage.setItem(key, JSON.stringify(nextValue))\n  }\n\n  return observableOf(nextValue)\n}\n\nexport const localStorageBackend: Backend = {get, set}\n","import {Observable, of as observableOf} from 'rxjs'\nimport {Backend} from './types'\n\nconst DB = Object.create(null)\n\nconst get = (key: string, defValue: unknown): Observable<unknown> =>\n  observableOf(key in DB ? DB[key] : defValue)\n\nconst set = (key: string, nextValue: unknown): Observable<unknown> => {\n  if (typeof nextValue === 'undefined' || nextValue === null) {\n    delete DB[key]\n  } else {\n    DB[key] = nextValue\n  }\n\n  return observableOf(nextValue)\n}\n\nexport const memoryBackend: Backend = {get, set}\n","import {localStorageBackend} from './localStorage'\nimport {memoryBackend} from './memory'\nimport {Backend} from './types'\n\nlet isSupported: boolean | null = null\nfunction supportsLocalStorage() {\n  if (isSupported !== null) {\n    return isSupported\n  }\n\n  const testKey = '__test__'\n  try {\n    localStorage.setItem(testKey, testKey)\n    localStorage.removeItem(testKey)\n    isSupported = true\n  } catch (evt) {\n    isSupported = false\n  }\n\n  return isSupported\n}\n\nexport function resolveBackend(): Backend {\n  return supportsLocalStorage() ? localStorageBackend : memoryBackend\n}\n","import {merge, Observable, Subject} from 'rxjs'\nimport {filter, map, switchMap} from 'rxjs/operators'\nimport {resolveBackend} from './backends/resolve'\nimport {Settings, SettingsStore} from './types'\n\nexport function createSettingsStore(): SettingsStore {\n  const storageBackend = resolveBackend()\n\n  const set$ = new Subject<{key: string; value: unknown}>()\n\n  const prefixNamespace = (ns: string, key: string) => `${ns}::${key}`\n\n  const updates$ = set$.pipe(\n    switchMap((event) =>\n      storageBackend.set(event.key, event.value).pipe(\n        map((nextValue) => ({\n          key: event.key,\n          value: nextValue,\n        }))\n      )\n    )\n  )\n\n  const listen = (key: string, defValue: unknown): Observable<unknown> => {\n    return merge(\n      storageBackend.get(key, defValue),\n      updates$.pipe(\n        filter((update) => update.key === key),\n        map((update) => update.value)\n      )\n    )\n  }\n\n  const set = (key: string, value: unknown) => {\n    set$.next({key, value})\n  }\n\n  const forNamespace = (ns: string): Settings => {\n    return {\n      forKey: (key: string) => {\n        const namespacedKey = prefixNamespace(ns, key)\n\n        return {\n          listen: (defaultValue: unknown) => listen(namespacedKey, defaultValue),\n          set: (value: unknown) => set(namespacedKey, value),\n          del: () => set(namespacedKey, undefined),\n        }\n      },\n      listen: (key: string, defaultValue: unknown) => {\n        return listen(prefixNamespace(ns, key), defaultValue)\n      },\n      set: (key: string, value: unknown) => {\n        return set(prefixNamespace(ns, key), value)\n      },\n      del: (key: string) => {\n        return set(prefixNamespace(ns, key), undefined)\n      },\n      forNamespace: (sub: string) => {\n        return forNamespace(prefixNamespace(ns, sub))\n      },\n    }\n  }\n\n  return {forNamespace}\n}\n","/* eslint-disable camelcase */\n\nimport {useMemo} from 'react'\nimport {useClient, useSchema, useTemplates} from '../hooks'\nimport {useSource, useWorkspace} from '../studio'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../studioClient'\nimport {createDocumentPreviewStore, DocumentPreviewStore} from '../preview'\nimport {\n  ConnectionStatusStore,\n  createConnectionStatusStore,\n} from './connection-status/connection-status-store'\nimport {CrossProjectTokenStore, __tmp_wrap_crossProjectToken} from './crossProjectToken'\nimport {createDocumentStore, DocumentStore} from './document'\nimport {createGrantsStore, GrantsStore} from './grants'\nimport {createHistoryStore, HistoryStore} from './history'\nimport {PresenceStore, __tmp_wrap_presenceStore} from './presence'\nimport {createProjectStore, ProjectStore} from './project'\nimport {useResourceCache} from './ResourceCacheProvider'\nimport {createSettingsStore, SettingsStore} from './settings'\nimport {createUserStore, useCurrentUser, UserStore} from './user'\n\nexport function useUserStore(): UserStore {\n  const {getClient, currentUser} = useSource()\n  const resourceCache = useResourceCache()\n  const client = getClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  return useMemo(() => {\n    const userStore =\n      resourceCache.get<UserStore>({\n        namespace: 'userStore',\n        dependencies: [client, currentUser],\n      }) || createUserStore({client, currentUser})\n\n    resourceCache.set({\n      namespace: 'userStore',\n      dependencies: [client, currentUser],\n      value: userStore,\n    })\n\n    return userStore\n  }, [client, currentUser, resourceCache])\n}\n\nexport function useGrantsStore(): GrantsStore {\n  const {getClient} = useSource()\n  const client = getClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const currentUser = useCurrentUser()\n  const resourceCache = useResourceCache()\n\n  return useMemo(() => {\n    const grantsStore =\n      resourceCache.get<GrantsStore>({\n        namespace: 'grantsStore',\n        dependencies: [client, currentUser],\n      }) || createGrantsStore({client, currentUser})\n\n    resourceCache.set({\n      namespace: 'grantsStore',\n      dependencies: [client, currentUser],\n      value: grantsStore,\n    })\n\n    return grantsStore\n  }, [client, currentUser, resourceCache])\n}\n\nexport function useHistoryStore(): HistoryStore {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const resourceCache = useResourceCache()\n\n  return useMemo(() => {\n    const historyStore =\n      resourceCache.get<HistoryStore>({\n        namespace: 'historyStore',\n        dependencies: [client],\n      }) || createHistoryStore({client})\n\n    resourceCache.set({\n      namespace: 'historyStore',\n      dependencies: [client],\n      value: historyStore,\n    })\n\n    return historyStore\n  }, [client, resourceCache])\n}\n\nexport function useDocumentPreviewStore(): DocumentPreviewStore {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const resourceCache = useResourceCache()\n  const crossProjectTokenStore = useCrossProjectTokenStore()\n\n  return useMemo(() => {\n    const documentPreviewStore =\n      resourceCache.get<DocumentPreviewStore>({\n        namespace: 'documentPreviewStore',\n        dependencies: [client, crossProjectTokenStore],\n      }) || createDocumentPreviewStore({client, crossProjectTokenStore})\n\n    resourceCache.set({\n      namespace: 'documentPreviewStore',\n      dependencies: [client, crossProjectTokenStore],\n      value: documentPreviewStore,\n    })\n\n    return documentPreviewStore\n  }, [client, resourceCache, crossProjectTokenStore])\n}\n\nexport function useCrossProjectTokenStore() {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const resourceCache = useResourceCache()\n\n  return useMemo(() => {\n    const crossProjectTokenStore =\n      resourceCache.get<CrossProjectTokenStore>({\n        namespace: 'crossProjectTokenStore',\n        dependencies: [client],\n      }) || __tmp_wrap_crossProjectToken({client})\n\n    resourceCache.set({\n      namespace: 'crossProjectTokenStore',\n      dependencies: [client],\n      value: crossProjectTokenStore,\n    })\n\n    return crossProjectTokenStore\n  }, [client, resourceCache])\n}\n\nexport function useDocumentStore(): DocumentStore {\n  const getClient = useSource().getClient\n  const schema = useSchema()\n  const templates = useTemplates()\n  const resourceCache = useResourceCache()\n  const historyStore = useHistoryStore()\n  const documentPreviewStore = useDocumentPreviewStore()\n\n  return useMemo(() => {\n    const documentStore =\n      resourceCache.get<DocumentStore>({\n        namespace: 'documentStore',\n        dependencies: [getClient, documentPreviewStore, historyStore, schema],\n      }) ||\n      createDocumentStore({\n        getClient,\n        documentPreviewStore,\n        historyStore,\n        initialValueTemplates: templates,\n        schema,\n      })\n\n    resourceCache.set({\n      namespace: 'documentStore',\n      dependencies: [getClient, documentPreviewStore, historyStore, schema],\n      value: documentStore,\n    })\n\n    return documentStore\n  }, [getClient, documentPreviewStore, historyStore, resourceCache, schema, templates])\n}\n\nexport function useConnectionStatusStore(): ConnectionStatusStore {\n  const {bifur} = useSource().__internal\n  const resourceCache = useResourceCache()\n\n  return useMemo(() => {\n    const connectionStatusStore =\n      resourceCache.get<ConnectionStatusStore>({\n        namespace: 'connectionStatusStore',\n        dependencies: [bifur],\n      }) || createConnectionStatusStore({bifur})\n\n    resourceCache.set({\n      namespace: 'connectionStatusStore',\n      dependencies: [bifur],\n      value: connectionStatusStore,\n    })\n\n    return connectionStatusStore\n  }, [bifur, resourceCache])\n}\n\nexport function usePresenceStore(): PresenceStore {\n  const {\n    __internal: {bifur},\n  } = useSource()\n  const resourceCache = useResourceCache()\n  const userStore = useUserStore()\n  const connectionStatusStore = useConnectionStatusStore()\n\n  return useMemo(() => {\n    const presenceStore =\n      resourceCache.get<PresenceStore>({\n        namespace: 'presenceStore',\n        dependencies: [bifur, connectionStatusStore, userStore],\n      }) || __tmp_wrap_presenceStore({bifur, connectionStatusStore, userStore})\n\n    resourceCache.set({\n      namespace: 'presenceStore',\n      dependencies: [bifur, connectionStatusStore, userStore],\n      value: presenceStore,\n    })\n\n    return presenceStore\n  }, [bifur, connectionStatusStore, resourceCache, userStore])\n}\n\nexport function useProjectStore(): ProjectStore {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const resourceCache = useResourceCache()\n\n  return useMemo(() => {\n    const projectStore =\n      resourceCache.get<ProjectStore>({\n        namespace: 'projectStore',\n        dependencies: [client],\n      }) || createProjectStore({client})\n\n    resourceCache.set({\n      namespace: 'projectStore',\n      dependencies: [client],\n      value: projectStore,\n    })\n\n    return projectStore\n  }, [client, resourceCache])\n}\n\nexport function useSettingsStore(): SettingsStore {\n  const resourceCache = useResourceCache()\n  const workspace = useWorkspace()\n\n  return useMemo(() => {\n    const settingsStore =\n      resourceCache.get<SettingsStore>({\n        dependencies: [workspace],\n        namespace: 'settingsStore',\n      }) || createSettingsStore()\n\n    resourceCache.set({\n      dependencies: [workspace],\n      namespace: 'settingsStore',\n      value: settingsStore,\n    })\n\n    return settingsStore\n  }, [resourceCache, workspace])\n}\n","import {Flex, Layer, Spinner} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\nconst FullscreenLayer = styled(Layer)`\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n`\n\nexport function FullscreenSpinner() {\n  return (\n    <FullscreenLayer>\n      <Flex height=\"fill\" align=\"center\" justify=\"center\">\n        <Spinner />\n      </Flex>\n    </FullscreenLayer>\n  )\n}\n","import {SanityDocument} from '@sanity/types'\nimport {withPropsStream} from 'react-props-stream'\nimport {concat, Observable, of} from 'rxjs'\nimport {distinctUntilChanged, map, switchMap} from 'rxjs/operators'\nimport {DocumentStore} from '../datastores'\n\nexport const WithReferringDocuments = withPropsStream(\n  connect,\n  function _WithReferringDocuments({children, ...props}) {\n    return children(props)\n  }\n)\n\nfunction connect(\n  receivedProps$: Observable<{\n    children: (props: {\n      documentStore: DocumentStore\n      id: string\n      isLoading: boolean\n      referringDocuments: SanityDocument[]\n    }) => React.ReactElement\n    documentStore: DocumentStore\n    id: string\n  }>\n) {\n  return receivedProps$.pipe(\n    distinctUntilChanged((prev, next) => prev.id === next.id),\n    switchMap((receivedProps) =>\n      concat(\n        of({...receivedProps, referringDocuments: [], isLoading: true}),\n        receivedProps.documentStore\n          .listenQuery(\n            '*[references($docId)] [0...101]',\n            {docId: receivedProps.id},\n            {tag: 'with-referring-documents'}\n          )\n          .pipe(\n            map((docs: any[]) => ({\n              ...receivedProps,\n              referringDocuments: docs,\n              isLoading: false,\n            }))\n          )\n      )\n    )\n  )\n}\n","import {Box, Flex, Spinner, Text} from '@sanity/ui'\nimport React from 'react'\n\nexport function SpinnerWithText(props: {text: string}) {\n  const {text} = props\n\n  return (\n    <Flex direction=\"row\" justify=\"center\" align=\"center\">\n      <Spinner />\n      <Box marginLeft={2}>\n        <Text>{text}</Text>\n      </Box>\n    </Flex>\n  )\n}\n","import React, {useCallback} from 'react'\nimport {Card, Text, Flex} from '@sanity/ui'\nimport {Asset as AssetType, SanityDocument} from '@sanity/types'\nimport {SanityPreview} from '../../../preview'\nimport {IntentLink} from '../../../router'\nimport {useSchema} from '../../../hooks'\n\nexport const DocumentList = ({\n  asset,\n  assetType,\n  referringDocuments,\n}: {\n  asset: AssetType\n  assetType: 'image' | 'file'\n  referringDocuments: SanityDocument[]\n}) => {\n  const count = referringDocuments.length\n  const hasResults = count > 0\n  const filenamePlaceholder = asset.originalFilename ? (\n    <strong>{asset.originalFilename}</strong>\n  ) : (\n    `this ${assetType}`\n  )\n\n  if (!hasResults) {\n    return (\n      <Text size={[1, 1, 2, 2]} as=\"h2\" weight=\"regular\">\n        No documents are using {filenamePlaceholder}\n      </Text>\n    )\n  }\n\n  return (\n    <>\n      <Card borderBottom marginTop={2} paddingBottom={2} marginBottom={1}>\n        <Text as=\"h2\" size={[1, 1, 2, 2]} weight=\"regular\" textOverflow=\"ellipsis\">\n          {count} {count === 1 ? `document is` : `documents are`} using {filenamePlaceholder}\n        </Text>\n      </Card>\n      {referringDocuments.map((document: SanityDocument) => (\n        <DocumentLink key={document._id} document={document} />\n      ))}\n    </>\n  )\n}\n\nconst DocumentLink = ({document}: {document: SanityDocument}) => {\n  const schema = useSchema()\n\n  const LinkComponent = useCallback(\n    (linkProps: Omit<React.HTMLProps<HTMLAnchorElement>, 'ref'>) => (\n      <IntentLink {...linkProps} params={{id: document._id, type: document._type}} intent=\"edit\" />\n    ),\n\n    [document]\n  )\n\n  return (\n    <Card\n      as={LinkComponent}\n      paddingY={2}\n      paddingX={1}\n      radius={2}\n      key={document._id}\n      data-as=\"a\"\n      tabIndex={0}\n    >\n      <Flex align=\"center\" gap={2}>\n        <SanityPreview\n          layout=\"default\"\n          value={{_type: 'reference', _ref: document._id}}\n          schemaType={schema.get(document._type)!}\n        />\n      </Flex>\n    </Card>\n  )\n}\n","import React, {CSSProperties} from 'react'\nimport {WarningOutlineIcon} from '@sanity/icons'\nimport {Card, Text, Grid, Flex} from '@sanity/ui'\nimport {UsageDialogProps} from './AssetUsageDialog'\n\ntype ConfirmMessageProps = Omit<UsageDialogProps, 'onClose' | 'onDelete'> & {\n  hasResults?: boolean\n}\n\nconst STYLE_ASSET_IMAGE: CSSProperties = {\n  maxWidth: '100%',\n  height: '120px',\n  objectFit: 'contain',\n  objectPosition: 'center',\n}\nconst STYLE_CONFIRM_CARD: CSSProperties = {\n  gridColumn: 'span 1',\n  overflow: 'hidden',\n  display: 'flex',\n  alignSelf: 'center',\n  justifyContent: 'center',\n}\nconst STYLE_IMAGE_WRAPPER: CSSProperties = {height: '100%'}\n\nexport const ConfirmMessage = ({asset, assetType, hasResults = false}: ConfirmMessageProps) => {\n  const isImage = assetType === 'image'\n  const filenamePlaceholder = asset.originalFilename ? (\n    <>\n      The {assetType} <strong>{asset.originalFilename}</strong>\n    </>\n  ) : (\n    `this ${assetType}`\n  )\n\n  if (hasResults) {\n    return (\n      <Card tone=\"caution\" padding={[3, 3, 4]} border radius={2} marginBottom={3}>\n        <Grid columns={3} gap={[2, 3, 4]}>\n          <Flex gap={[3, 4]} align=\"center\" style={{gridColumn: isImage ? 'span 2' : 'span 3'}}>\n            <Text>\n              <WarningOutlineIcon />\n            </Text>\n            <Text size={1}>\n              {filenamePlaceholder} cannot be deleted because it's being used. In order to delete\n              the {assetType} you need the remove all uses of it.\n            </Text>\n          </Flex>\n          {isImage && (\n            <Card __unstable_checkered border radius={1} style={STYLE_CONFIRM_CARD}>\n              <Flex align=\"center\" justify=\"center\" style={STYLE_IMAGE_WRAPPER}>\n                <img\n                  src={`${asset.url}?w=200`}\n                  style={STYLE_ASSET_IMAGE}\n                  alt=\"Preview of image\"\n                  referrerPolicy=\"strict-origin-when-cross-origin\"\n                />\n              </Flex>\n            </Card>\n          )}\n        </Grid>\n      </Card>\n    )\n  }\n\n  return (\n    <Card paddingX={[2, 3, 4]} paddingY={[3, 3, 3, 4]}>\n      <Grid columns={3} gap={3}>\n        <Flex style={{gridColumn: isImage ? 'span 2' : 'span 3'}} align=\"center\">\n          <Text>\n            You are about to delete the {assetType}\n            {asset.originalFilename && (\n              <>\n                {' '}\n                <strong>{asset.originalFilename}</strong>\n              </>\n            )}{' '}\n            and its metadata.\n            <br />\n            <br />\n            Are you sure?\n          </Text>\n        </Flex>\n        {isImage && (\n          <Card __unstable_checkered border radius={1} style={STYLE_CONFIRM_CARD}>\n            <Flex align=\"center\" justify=\"center\" style={STYLE_IMAGE_WRAPPER}>\n              <img\n                src={`${asset.url}?w=200`}\n                style={STYLE_ASSET_IMAGE}\n                alt=\"Preview of image\"\n                referrerPolicy=\"strict-origin-when-cross-origin\"\n              />\n            </Flex>\n          </Card>\n        )}\n      </Grid>\n    </Card>\n  )\n}\n","import React, {useEffect, useState} from 'react'\nimport {TrashIcon} from '@sanity/icons'\nimport {Box, Dialog, Grid, Button, Stack} from '@sanity/ui'\nimport {Asset as AssetType, SanityDocument} from '@sanity/types'\nimport {WithReferringDocuments} from '../../../components/WithReferringDocuments'\nimport {useDocumentStore} from '../../../datastores'\nimport {SpinnerWithText} from '../../components/SpinnerWithText'\nimport {DocumentList} from './DocumentList'\nimport {ConfirmMessage} from './ConfirmMessage'\n\nexport interface UsageDialogProps {\n  assetType?: 'file' | 'image'\n  mode?: 'listUsage' | 'confirmDelete'\n  asset: AssetType\n  isDeleting?: boolean\n  assetIsLoading?: boolean\n  referringDocuments?: SanityDocument[]\n  onClose: () => void\n  onDelete: () => void\n}\n\nconst MODE_CONFIRM_DELETE = 'confirmDelete'\nconst MODE_LIST_USAGE = 'listUsage'\n\nexport function AssetUsageDialog(props: UsageDialogProps) {\n  const documentStore = useDocumentStore()\n\n  return (\n    <WithReferringDocuments documentStore={documentStore} id={props.asset._id}>\n      {({isLoading, referringDocuments}) => (\n        <InnerAssetUsageDialog\n          {...props}\n          assetIsLoading={isLoading}\n          referringDocuments={referringDocuments}\n        />\n      )}\n    </WithReferringDocuments>\n  )\n}\n\nconst InnerAssetUsageDialog = ({\n  asset,\n  assetType = 'image',\n  mode = MODE_LIST_USAGE,\n  isDeleting = false,\n  assetIsLoading = false,\n  referringDocuments = [],\n  onClose,\n  onDelete,\n}: UsageDialogProps) => {\n  const isListMode = mode === MODE_LIST_USAGE\n  const defaultHeaderTitle = isListMode ? `Documents using ${assetType}` : `Delete ${assetType}`\n  const [canDelete, setCanDelete] = useState(false)\n  const [isLoadingParent, setIsLoadingParent] = useState(true)\n  const [publishedDocuments, setPublishedDocuments] = useState<SanityDocument[]>([])\n  const showActionFooter = mode === MODE_CONFIRM_DELETE\n  const hasResults = publishedDocuments.length > 0\n  const showDocumentList = mode === MODE_LIST_USAGE || hasResults\n  const noPaddingOnStack = mode === MODE_CONFIRM_DELETE && !hasResults\n  const footer = showActionFooter ? (\n    <Grid padding={2} gap={2} columns={2}>\n      <Button mode=\"bleed\" text=\"Cancel\" onClick={onClose} />\n      <Button\n        text=\"Delete\"\n        tone=\"critical\"\n        icon={TrashIcon}\n        onClick={onDelete}\n        loading={isDeleting}\n        disabled={!canDelete}\n      />\n    </Grid>\n  ) : undefined\n  useEffect(() => {\n    const drafts = referringDocuments.reduce<string[]>(\n      (acc, doc) => (doc._id.startsWith('drafts.') ? acc.concat(doc._id.slice(7)) : acc),\n      []\n    )\n\n    const documentsWithoutDrafts = referringDocuments.filter((doc) => !drafts.includes(doc._id))\n\n    setPublishedDocuments(documentsWithoutDrafts)\n    setCanDelete(documentsWithoutDrafts.length === 0 && !assetIsLoading)\n    setIsLoadingParent(assetIsLoading)\n  }, [assetIsLoading, referringDocuments])\n\n  return (\n    <Dialog\n      id=\"asset-dialog\"\n      header={defaultHeaderTitle}\n      width={1}\n      onClose={onClose}\n      footer={footer}\n      __unstable_autoFocus={!isLoadingParent}\n    >\n      {isLoadingParent && (\n        <Box padding={4}>\n          <SpinnerWithText text=\"Loading...\" />\n        </Box>\n      )}\n\n      {!isLoadingParent && (\n        <Stack\n          paddingX={noPaddingOnStack ? 0 : [2, 3, 4]}\n          paddingY={noPaddingOnStack ? 0 : [3, 3, 3, 4]}\n          space={1}\n        >\n          {mode === MODE_CONFIRM_DELETE && (\n            <ConfirmMessage asset={asset} assetType={assetType} hasResults={hasResults} />\n          )}\n\n          {showDocumentList && (\n            <DocumentList\n              asset={asset}\n              referringDocuments={publishedDocuments}\n              assetType={assetType}\n            />\n          )}\n        </Stack>\n      )}\n    </Dialog>\n  )\n}\n","import React from 'react'\nimport {LinkIcon, EllipsisVerticalIcon, TrashIcon} from '@sanity/icons'\nimport {Button, Menu, MenuItem, MenuButton} from '@sanity/ui'\nimport {AssetMenuAction} from './types'\n\nexport function AssetMenu({\n  isSelected,\n  border = true,\n  onAction,\n}: {\n  isSelected: boolean\n  border?: boolean\n  onAction: (action: AssetMenuAction) => void\n}) {\n  const triggerButtonMode = isSelected ? 'default' : 'bleed'\n  const triggerButtonTone = isSelected ? 'primary' : 'default'\n\n  return (\n    <MenuButton\n      button={\n        <Button\n          padding={2}\n          mode={border ? 'ghost' : triggerButtonMode}\n          icon={EllipsisVerticalIcon}\n          tone={border ? 'default' : triggerButtonTone}\n        />\n      }\n      id=\"asset-menu\"\n      portal\n      menu={\n        <Menu>\n          <MenuItem\n            text=\"Show uses\"\n            icon={LinkIcon}\n            onClick={() => {\n              onAction({type: 'showUsage'})\n            }}\n          />\n          <MenuItem\n            text=\"Delete\"\n            icon={TrashIcon}\n            tone=\"critical\"\n            onClick={() => {\n              onAction({type: 'delete'})\n            }}\n          />\n        </Menu>\n      }\n      placement=\"right\"\n    />\n  )\n}\n","import type {Subscription} from 'rxjs'\nimport React, {useState, useEffect, useRef, useCallback} from 'react'\nimport styled from 'styled-components'\nimport {Button, Card, useToast} from '@sanity/ui'\nimport {Asset as AssetType} from '@sanity/types'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {useClient} from '../../../hooks'\nimport {FullscreenSpinner} from '../../components/FullscreenSpinner'\nimport {AssetUsageDialog} from './AssetUsageDialog'\nimport {AssetMenu} from './AssetMenu'\nimport {AssetMenuAction} from './types'\n\ninterface AssetProps {\n  asset: AssetType\n  isSelected: boolean\n  onClick?: (...args: any[]) => any\n  onKeyPress?: (...args: any[]) => any\n  onDeleteFinished: (...args: any[]) => any\n}\n\n// Get pixel density of the current device\nconst DPI =\n  typeof window === 'undefined' || !window.devicePixelRatio\n    ? 1\n    : Math.round(window.devicePixelRatio)\n\nconst Image = styled.img`\n  position: absolute;\n  z-index: 1;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: block;\n  object-fit: contain;\n`\n\nconst Container = styled(Card)`\n  position: relative;\n  z-index: 1;\n  padding-bottom: 100%;\n`\n\nconst Root = styled.div`\n  position: relative;\n  display: inherit;\n`\n\nconst MenuContainer = styled.div`\n  box-sizing: border-box;\n  position: absolute;\n  z-index: 2;\n  display: none;\n  top: 3px;\n  right: 3px;\n\n  ${Root}:hover & {\n    display: block;\n  }\n`\n\nexport const AssetThumb = React.memo(function AssetThumb(props: AssetProps) {\n  const versionedClient = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const toast = useToast()\n  const deleteRef$ = useRef<Subscription>()\n  const {asset, onClick, onKeyPress, onDeleteFinished, isSelected} = props\n  const [showUsageDialog, setShowUsageDialog] = useState(false)\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false)\n  const [isDeleting, setIsDeleting] = useState(false)\n\n  useEffect(() => {\n    return () => {\n      if (deleteRef$.current) {\n        deleteRef$.current.unsubscribe()\n      }\n    }\n  }, [])\n\n  const handleConfirmDelete = useCallback(() => {\n    setShowDeleteDialog(true)\n  }, [setShowDeleteDialog])\n\n  const handleDialogClose = useCallback(() => {\n    setShowUsageDialog(false)\n    setShowDeleteDialog(false)\n  }, [setShowUsageDialog, setShowDeleteDialog])\n\n  const handleToggleUsageDialog = useCallback(() => {\n    setShowUsageDialog(true)\n  }, [setShowUsageDialog])\n\n  const handleDeleteError = useCallback(\n    (error) => {\n      toast.push({\n        closable: true,\n        status: 'error',\n        title: 'Image could not be deleted',\n        description: error.message,\n      })\n    },\n    [toast]\n  )\n\n  const handleDeleteSuccess = useCallback(() => {\n    toast.push({\n      status: 'success',\n      title: 'Image was deleted',\n    })\n  }, [toast])\n\n  const handleDeleteAsset = useCallback(() => {\n    setIsDeleting(true)\n\n    deleteRef$.current = versionedClient.observable.delete(asset._id).subscribe({\n      next: () => {\n        setIsDeleting(false)\n        onDeleteFinished(asset._id)\n        setShowDeleteDialog(false)\n        handleDeleteSuccess()\n      },\n      error: (err: Error) => {\n        setIsDeleting(false)\n        handleDeleteError(err)\n        // eslint-disable-next-line no-console\n        console.error('Could not delete asset', err)\n      },\n    })\n  }, [asset._id, handleDeleteError, handleDeleteSuccess, onDeleteFinished])\n\n  const handleMenuAction = useCallback(\n    (action: AssetMenuAction) => {\n      if (action.type === 'delete') {\n        handleConfirmDelete()\n      }\n\n      if (action.type === 'showUsage') {\n        handleToggleUsageDialog()\n      }\n    },\n    [handleConfirmDelete, handleToggleUsageDialog]\n  )\n\n  // const {asset, onClick, onKeyPress, isSelected} = props\n  const {originalFilename, _id, url} = asset\n  const imgH = 200 * Math.max(1, DPI)\n\n  // Mead can't convert gifs, so we might end up with large gifs that will cause the source window to use a lot of CPU\n  // We instead force them to display as jpgs\n  const imageUrl = url.includes('.gif')\n    ? `${url}?h=${imgH}&fit=max&fm=jpg`\n    : `${url}?h=${imgH}&fit=max`\n\n  return (\n    <Root>\n      <Button\n        tone=\"primary\"\n        selected={isSelected}\n        tabIndex={0}\n        data-id={_id}\n        mode=\"ghost\"\n        onKeyPress={onKeyPress}\n        padding={0}\n        style={{padding: 2}}\n      >\n        <Container __unstable_checkered>\n          <Image alt={originalFilename} src={imageUrl} onClick={onClick} data-id={_id} />\n          {isDeleting && <FullscreenSpinner />}\n        </Container>\n      </Button>\n      <MenuContainer>\n        <AssetMenu isSelected={isSelected} onAction={handleMenuAction} />\n      </MenuContainer>\n      {(showUsageDialog || showDeleteDialog) && (\n        <AssetUsageDialog\n          asset={asset}\n          mode={showDeleteDialog ? 'confirmDelete' : 'listUsage'}\n          onClose={handleDialogClose}\n          onDelete={handleDeleteAsset}\n          isDeleting={isDeleting}\n        />\n      )}\n    </Root>\n  )\n})\n","const BYTE_UNITS = ['B', 'kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\nconst BIBYTE_UNITS = ['B', 'kiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB']\nconst BIT_UNITS = ['b', 'kbit', 'Mbit', 'Gbit', 'Tbit', 'Pbit', 'Ebit', 'Zbit', 'Ybit']\nconst BIBIT_UNITS = ['b', 'kibit', 'Mibit', 'Gibit', 'Tibit', 'Pibit', 'Eibit', 'Zibit', 'Yibit']\n\n/**\n * Formats the given number using `Number#toLocaleString`.\n * - If locale is a string, the value is expected to be a locale-key (for example: `de`).\n * - If locale is true, the system default locale is used for translation.\n * - If no value for locale is specified, the number is returned unmodified.\n */\nconst toLocaleString = (\n  number: string | number,\n  locale: string | string[] | undefined | boolean,\n  options: Intl.NumberFormatOptions | undefined\n) => {\n  let result = number\n  if (typeof locale === 'string' || Array.isArray(locale)) {\n    result = number.toLocaleString(locale, options)\n  } else if (locale === true || options !== undefined) {\n    result = number.toLocaleString(undefined, options)\n  }\n\n  return result\n}\n\ninterface PrettyBytesOptions {\n  /**\n   * Include plus sign for positive numbers. If the difference is exactly zero a\n   * space character will be prepended instead for better alignment.\n   */\n  signed?: boolean\n  /**\n   * Format the number as bits instead of bytes. This can be useful when, for\n   * example, referring to bit rate.\n   */\n  bits?: boolean\n  /**\n   * Format the number using the Binary Prefix instead of the SI Prefix. This\n   * can be useful for presenting memory amounts. However, this should not be used for presenting file sizes.\n   */\n  binary?: boolean\n  /**\n   * Important: Only the number and decimal separator are localized. The unit\n   * title is not and will not be localized.\n   */\n  locale?: boolean | string | string[]\n  /**\n   * The minimum number of fraction digits to display.\n   *\n   * If neither minimumFractionDigits or maximumFractionDigits are set, the\n   * default behavior is to round to 3 significant digits.\n   */\n  minimumFractionDigits?: number\n  /**\n   * The maximum number of fraction digits to display.\n   *\n   * If neither minimumFractionDigits or maximumFractionDigits are set, the\n   * default behavior is to round to 3 significant digits.\n   */\n  maximumFractionDigits?: number\n}\n\n/**\n * Taken from here:\n * https://github.com/sindresorhus/pretty-bytes/blob/a0335ab397a1bc88831f317e4d6d46b7e03ea6be/index.js\n */\nexport function prettyBytes(\n  input: number,\n  {\n    bits = false,\n    binary = false,\n    signed = false,\n    minimumFractionDigits,\n    maximumFractionDigits,\n    locale,\n  }: PrettyBytesOptions = {}\n): string {\n  let number: string | number = input\n\n  if (!Number.isFinite(number)) {\n    throw new TypeError(`Expected a finite number, got ${typeof number}: ${number}`)\n  }\n\n  // eslint-disable-next-line no-nested-ternary\n  const UNITS = bits ? (binary ? BIBIT_UNITS : BIT_UNITS) : binary ? BIBYTE_UNITS : BYTE_UNITS\n\n  if (signed && number === 0) {\n    return ` 0 ${UNITS[0]}`\n  }\n\n  const isNegative = number < 0\n  // eslint-disable-next-line no-nested-ternary\n  const prefix = isNegative ? '-' : signed ? '+' : ''\n\n  if (isNegative) {\n    number = -number\n  }\n\n  let localeOptions: Intl.NumberFormatOptions | undefined\n\n  if (minimumFractionDigits !== undefined) {\n    localeOptions = {minimumFractionDigits}\n  }\n\n  if (maximumFractionDigits !== undefined) {\n    localeOptions = {maximumFractionDigits, ...localeOptions}\n  }\n\n  if (number < 1) {\n    const numberString = toLocaleString(number, locale, localeOptions)\n    return `${prefix + numberString} ${UNITS[0]}`\n  }\n\n  const exponent = Math.min(\n    Math.floor(binary ? Math.log(number) / Math.log(1024) : Math.log10(number) / 3),\n    UNITS.length - 1\n  )\n  number /= (binary ? 1024 : 1000) ** exponent\n\n  if (!localeOptions) {\n    number = number.toPrecision(3)\n  }\n\n  const numberString = toLocaleString(Number(number), locale, localeOptions)\n\n  const unit = UNITS[exponent]\n\n  return `${prefix + numberString} ${unit}`\n}\n","interface MimeTypeInfo {\n  title: string\n}\n\nconst MIME_TYPES: Record<string, MimeTypeInfo> = {\n  // Images\n  'image/bmp': {\n    title: 'Bitmap Image',\n  },\n  'image/jpeg': {\n    title: 'JPEG Image',\n  },\n  'image/gif': {\n    title: 'GIF Image',\n  },\n  'image/vnd.microsoft.icon': {\n    title: 'Icon',\n  },\n  'image/png': {\n    title: 'PNG Image',\n  },\n  'image/svg+xml': {\n    title: 'SVG Image',\n  },\n  'image/webp': {\n    title: 'WebP Image',\n  },\n  'image/tiff': {\n    title: 'TIFF Image',\n  },\n  'image/heic': {\n    title: 'HEIC Image',\n  },\n  // Audio\n  'audio/midi': {\n    title: 'MIDI Audio',\n  },\n  'audio/midi-x': {\n    title: 'MIDI Audio',\n  },\n  'audio/mpeg': {\n    title: 'MP3 Audio',\n  },\n  'audio/ogg': {\n    title: 'OGG Audio',\n  },\n  'audio/wav': {\n    title: 'WAV Audio',\n  },\n  'audio/webm': {\n    title: 'WebM Audio',\n  },\n  'audio/aac': {\n    title: 'AAC Audio',\n  },\n  // Video\n  'video/x-msvideo': {\n    title: 'AVI Video',\n  },\n  'video/mp4': {\n    title: 'MP4 Video',\n  },\n  'video/mpeg': {\n    title: 'MPEG Video',\n  },\n  'video/ogg': {\n    title: 'OGG Video',\n  },\n  'video/webm': {\n    title: 'WebM Video',\n  },\n  'video/quicktime': {\n    title: 'QuickTime Video',\n  },\n  // Documents\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet': {\n    title: 'Excel Spreadsheet',\n  },\n  'application/vnd.ms-excel': {\n    title: 'Excel Spreadsheet',\n  },\n  'text/plain': {\n    title: 'Text',\n  },\n  'text/javascript': {\n    title: 'JavaScript',\n  },\n  'text/markdown': {\n    title: 'Markdown',\n  },\n  'text/csv': {\n    title: 'CSV',\n  },\n  'text/css': {\n    title: 'CSS',\n  },\n  'application/pdf': {\n    title: 'PDF Document',\n  },\n  'application/xml': {\n    title: 'XML Document',\n  },\n  'text/xml': {\n    title: 'XML Document',\n  },\n  'application/zip': {\n    title: 'ZIP Archive',\n  },\n  'application/vnd.rar': {\n    title: 'RAR Archive',\n  },\n  'application/x-7z-compressed': {\n    title: '7-zip Archive',\n  },\n  'application/octet-stream': {\n    title: 'Binary',\n  },\n}\n\nfunction convertMimeTypeToSomethingNice(mimeType: string): string {\n  const part = mimeType.replace('x-', '').split('/')[1]\n\n  return part.charAt(0).toUpperCase() + part.slice(1)\n}\n\nexport function formatMimeType(mimeType: string): string {\n  if (MIME_TYPES?.[mimeType]) {\n    return MIME_TYPES[mimeType].title\n  }\n\n  return convertMimeTypeToSomethingNice(mimeType)\n}\n","import type {Subscription} from 'rxjs'\nimport React, {useRef, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport {Button, Box, Card, Flex, Stack, Label, Text, Tooltip, Grid, useToast} from '@sanity/ui'\nimport {DocumentIcon, ChevronUpIcon, ChevronDownIcon, LinkIcon, TrashIcon} from '@sanity/icons'\nimport {Asset as AssetType} from '@sanity/types'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {useClient, useTimeAgo} from '../../../hooks'\nimport {FIXME} from '../../types'\nimport {prettyBytes} from './prettyBytes'\nimport {AssetUsageDialog} from './AssetUsageDialog'\nimport {AssetMenu} from './AssetMenu'\nimport {AssetMenuAction} from './types'\nimport {formatMimeType} from './utils/mimeType'\n\ninterface RowProps {\n  isMobile?: boolean\n  asset: AssetType\n  isSelected?: boolean\n  onClick?: (...args: any[]) => any\n  onKeyPress?: (...args: any[]) => any\n  onDeleteFinished?: (...args: any[]) => any\n}\n\nconst CardIconWrapper = styled.span`\n  background-color: transparent;\n  flex-shrink: 0;\n`\n\n// These are here because using vanilla UI components caused a type issue inside of styled-components\nconst CustomFlex = styled(Flex)``\nconst CustomText = styled(Text)``\nconst CustomCard = styled(Card)<RowProps>`\n  &:hover-within ${CustomText} {\n    --card-muted-fg-color: var(--card-muted-fg-color);\n    --card-fg-color: var(--card-fg-color);\n  }\n\n  ${(props) =>\n    props.isSelected &&\n    css`\n      --card-muted-fg-color: var(--card-bg-color);\n      --card-fg-color: var(--card-bg-color);\n    `}\n`\n\nconst RowButton = styled(Button)<RowProps>`\n  box-shadow: none;\n  min-width: 0;\n  cursor: pointer;\n  position: initial;\n\n  &:before,\n  &:after {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    z-index: 2;\n  }\n\n  &:before {\n    z-index: 0;\n    pointer-events: none;\n    border-radius: 0.1875rem;\n  }\n\n  ${(props) =>\n    props.isSelected &&\n    css`\n      --card-muted-fg-color: var(--card-bg-color);\n      --card-fg-color: var(--card-bg-color);\n\n      &:before {\n        background-color: var(--card-focus-ring-color);\n      }\n\n      ${CardIconWrapper} {\n        --card-muted-fg-color: var(--card-bg-color);\n      }\n\n      ${CustomFlex} {\n        --card-muted-fg-color: var(--card-bg-color);\n        --card-fg-color: var(--card-bg-color);\n      }\n    `}\n\n  ${(props) =>\n    !props.isSelected &&\n    css`\n      &:hover:before {\n        background-color: var(--card-bg-color);\n      }\n\n      &:focus:before {\n        background-color: var(--card-code-bg-color);\n      }\n\n      &:focus-within:before {\n        background-color: var(--card-bg-color);\n      }\n    `}\n`\n\nconst STYLES_ROW_CARD = {position: 'relative' as FIXME}\nconst STYLES_ICON_CARD = {flexShrink: 0}\nconst STYLES_BUTTON_TEXT = {minWidth: 0}\nconst STYLES_ASSETMENU_WRAPPER = {\n  zIndex: 3,\n  marginTop: '-0.5rem',\n  marginBottom: '-0.5rem',\n}\n\nconst DISABLED_DELETE_TITLE = 'Cannot delete current file'\n\nexport const AssetRow = (props: RowProps) => {\n  const versionedClient = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const toast = useToast()\n  const deleteRef$ = useRef<Subscription>()\n  const [showUsageDialog, setShowUsageDialog] = useState(false)\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false)\n  const [isDeleting, setIsDeleting] = useState(false)\n  const [isOpen, setIsOpen] = useState(false)\n  const {asset, onClick, onKeyPress, onDeleteFinished, isSelected, isMobile} = props\n  const {originalFilename, _id, mimeType, size, _createdAt} = asset\n  const formattedTime = useTimeAgo(_createdAt, {agoSuffix: true})\n  const formattedMimeType = formatMimeType(mimeType)\n  const formattedSize = prettyBytes(size)\n  const showTooltip = (originalFilename || '').length > 37\n\n  const handleConfirmDelete = () => {\n    setShowDeleteDialog(true)\n  }\n\n  const handleDeleteError = (error: Error) => {\n    toast.push({\n      closable: true,\n      status: 'error',\n      title: 'File could not be deleted',\n      description: error.message,\n    })\n  }\n\n  const handleDeleteSuccess = () => {\n    toast.push({\n      status: 'success',\n      title: 'File was deleted',\n    })\n  }\n\n  const handleDeleteAsset = () => {\n    setIsDeleting(true)\n\n    deleteRef$.current = versionedClient.observable.delete(asset._id).subscribe({\n      next: () => {\n        setIsDeleting(false)\n        onDeleteFinished?.(asset._id)\n        setShowDeleteDialog(false)\n        handleDeleteSuccess()\n      },\n      error: (err: Error) => {\n        setIsDeleting(false)\n        handleDeleteError(err)\n        // eslint-disable-next-line no-console\n        console.error('Could not delete asset', err)\n      },\n    })\n  }\n\n  const handleDialogClose = () => {\n    setShowUsageDialog(false)\n    setShowDeleteDialog(false)\n  }\n\n  const handleToggleUsageDialog = () => {\n    setShowUsageDialog(true)\n  }\n\n  const handleToggleOpen = () => {\n    setIsOpen(!isOpen)\n  }\n\n  const handleMenuAction = (action: AssetMenuAction) => {\n    if (action.type === 'delete') {\n      handleConfirmDelete()\n    }\n\n    if (action.type === 'showUsage') {\n      handleToggleUsageDialog()\n    }\n  }\n\n  if (isMobile) {\n    return (\n      <Card paddingBottom={2} style={STYLES_ROW_CARD}>\n        <Grid\n          columns={4}\n          gap={1}\n          style={{\n            position: 'relative',\n            gridTemplateColumns: '1fr 30px',\n            opacity: isDeleting ? 0.5 : 1,\n          }}\n        >\n          <RowButton\n            asset={asset}\n            mode=\"bleed\"\n            padding={0}\n            data-id={_id}\n            onClick={onClick}\n            paddingY={1}\n          >\n            <Flex gap={2} flex={2} align=\"center\">\n              <Card as={CardIconWrapper} padding={2} tone=\"transparent\" radius={2}>\n                <Text muted size={2} style={STYLES_ICON_CARD}>\n                  <DocumentIcon />\n                </Text>\n              </Card>\n              <Text size={1} align=\"left\" textOverflow=\"ellipsis\" style={STYLES_BUTTON_TEXT}>\n                {originalFilename}\n              </Text>\n            </Flex>\n          </RowButton>\n          <Flex justify=\"flex-end\" align=\"center\" paddingRight={1} style={STYLES_ASSETMENU_WRAPPER}>\n            <Button\n              mode=\"bleed\"\n              fontSize={1}\n              padding={2}\n              onClick={handleToggleOpen}\n              icon={isOpen ? ChevronUpIcon : ChevronDownIcon}\n            />\n          </Flex>\n        </Grid>\n        {isOpen && (\n          <>\n            <Grid marginTop={3} columns={3} gap={1}>\n              <Stack space={2}>\n                <Label size={1} muted>\n                  Size\n                </Label>\n                <Text size={1} muted>\n                  {formattedSize}\n                </Text>\n              </Stack>\n              <Stack space={2}>\n                <Label size={1} muted>\n                  Type\n                </Label>\n                <Text size={1} muted>\n                  {formattedMimeType}\n                </Text>\n              </Stack>\n              <Stack space={2}>\n                <Label size={1} muted>\n                  Date added\n                </Label>\n                <Text size={1} muted>\n                  {formattedTime}\n                </Text>\n              </Stack>\n            </Grid>\n            <Stack space={2} marginTop={3}>\n              <Button\n                fontSize={1}\n                tone=\"default\"\n                mode=\"ghost\"\n                text=\"Show uses\"\n                onClick={handleToggleUsageDialog}\n                icon={LinkIcon}\n              />\n\n              <Button\n                fontSize={1}\n                tone=\"critical\"\n                mode=\"ghost\"\n                text=\"Delete\"\n                icon={TrashIcon}\n                disabled={isSelected}\n                title={isSelected ? DISABLED_DELETE_TITLE : 'Delete file'}\n                onClick={handleConfirmDelete}\n              />\n            </Stack>\n          </>\n        )}\n\n        {(showUsageDialog || showDeleteDialog) && (\n          <AssetUsageDialog\n            assetType=\"file\"\n            asset={asset}\n            mode={showDeleteDialog ? 'confirmDelete' : 'listUsage'}\n            onClose={handleDialogClose}\n            onDelete={handleDeleteAsset}\n            isDeleting={isDeleting}\n          />\n        )}\n      </Card>\n    )\n  }\n\n  return (\n    <CustomCard\n      asset={asset}\n      paddingBottom={1}\n      style={STYLES_ROW_CARD}\n      radius={0}\n      overflow={'hidden'}\n      isSelected={isSelected}\n      aria-selected=\"true\"\n    >\n      <Grid\n        columns={4}\n        gap={1}\n        data-id={_id}\n        paddingY={1}\n        style={{\n          position: 'relative',\n          gridTemplateColumns: '3fr 1fr 1fr 2fr 30px',\n          opacity: isDeleting ? 0.5 : 1,\n        }}\n      >\n        <RowButton\n          asset={asset}\n          mode=\"bleed\"\n          data-id={_id}\n          onClick={onClick}\n          padding={0}\n          onKeyPress={onKeyPress}\n          title={`Select the file ${originalFilename}`}\n          isSelected={isSelected}\n        >\n          <CustomFlex\n            gap={2}\n            flex={2}\n            paddingRight={1}\n            align=\"center\"\n            onClick={onClick}\n            onKeyPress={onKeyPress}\n            data-id={_id}\n            title={`Select the file ${originalFilename}`}\n          >\n            <Card\n              as={CardIconWrapper}\n              padding={2}\n              tone=\"transparent\"\n              radius={2}\n              style={STYLES_ICON_CARD}\n            >\n              <Text muted size={2}>\n                <DocumentIcon />\n              </Text>\n            </Card>\n            {showTooltip && (\n              <Tooltip\n                content={\n                  <Box padding={2}>\n                    <Text size={1}>{originalFilename}</Text>\n                  </Box>\n                }\n                fallbackPlacements={['right', 'left']}\n                placement=\"top\"\n                portal\n              >\n                <Text size={1} align=\"left\" textOverflow=\"ellipsis\" style={STYLES_BUTTON_TEXT}>\n                  {originalFilename}\n                </Text>\n              </Tooltip>\n            )}\n\n            {!showTooltip && (\n              <Text size={1} align=\"left\" textOverflow=\"ellipsis\" style={STYLES_BUTTON_TEXT}>\n                {originalFilename}\n              </Text>\n            )}\n          </CustomFlex>\n        </RowButton>\n        <CustomFlex align=\"center\">\n          <Text size={1} muted>\n            {formattedSize}\n          </Text>\n        </CustomFlex>\n        <CustomFlex align=\"center\">\n          <Text size={1} muted>\n            {formattedMimeType}\n          </Text>\n        </CustomFlex>\n        <CustomFlex align=\"center\">\n          <Text as=\"time\" size={1} muted dateTime={_createdAt}>\n            {formattedTime}\n          </Text>\n        </CustomFlex>\n        <CustomFlex\n          justify=\"flex-end\"\n          align=\"center\"\n          paddingX={1}\n          paddingY={1}\n          style={STYLES_ASSETMENU_WRAPPER}\n        >\n          <AssetMenu border={false} isSelected={false} onAction={handleMenuAction} />\n        </CustomFlex>\n      </Grid>\n      {(showUsageDialog || showDeleteDialog) && (\n        <AssetUsageDialog\n          assetType=\"file\"\n          asset={asset}\n          mode={showDeleteDialog ? 'confirmDelete' : 'listUsage'}\n          onClose={handleDialogClose}\n          onDelete={handleDeleteAsset}\n          isDeleting={isDeleting}\n        />\n      )}\n    </CustomCard>\n  )\n}\n","import React from 'react'\nimport {Box, Card, Flex, Grid, Label, Spinner, Stack, useMediaIndex} from '@sanity/ui'\nimport {Asset as AssetType} from '@sanity/types'\nimport {AssetRow} from './AssetRow'\n\ninterface Props {\n  onClick?: (...args: any[]) => any\n  onKeyPress?: (...args: any[]) => any\n  onDeleteFinished: (...args: any[]) => any\n  assets: AssetType[]\n  isLoading?: boolean\n  selectedAssets: AssetType[]\n}\n\nconst STYLES_FILENAME = {paddingLeft: '2.2rem'}\nconst STYLES_GRID = {gridTemplateColumns: '3fr 1fr 1fr 2fr 30px'}\n\nexport function TableList(props: Props) {\n  const mediaIndex = useMediaIndex()\n  const isMobile = mediaIndex < 2\n  const {assets, onClick, onKeyPress, onDeleteFinished, selectedAssets, isLoading} = props\n\n  return (\n    <Box padding={4}>\n      <Card borderBottom paddingBottom={2} marginBottom={1}>\n        {isMobile ? (\n          <Grid style={STYLES_GRID}>\n            <Box flex={2} paddingLeft={5}>\n              <Label muted size={1}>\n                Filename\n              </Label>\n            </Box>\n          </Grid>\n        ) : (\n          <Grid gap={1} style={STYLES_GRID}>\n            <Box flex={2} style={STYLES_FILENAME}>\n              <Label muted size={1}>\n                Filename\n              </Label>\n            </Box>\n            <Box flex={1}>\n              <Label muted size={1}>\n                Size\n              </Label>\n            </Box>\n            <Box flex={1}>\n              <Label muted size={1}>\n                Type\n              </Label>\n            </Box>\n            <Box flex={1}>\n              <Label muted size={1}>\n                Date added\n              </Label>\n            </Box>\n          </Grid>\n        )}\n      </Card>\n      <Stack>\n        {isLoading && assets.length === 0 && (\n          <Box paddingTop={4} paddingBottom={2}>\n            <Flex justify=\"center\">\n              <Spinner muted />\n            </Flex>\n          </Box>\n        )}\n        {assets.map((asset) => (\n          <AssetRow\n            key={asset._id}\n            asset={asset}\n            isMobile={isMobile}\n            isSelected={selectedAssets.some((selected) => selected._id === asset._id)}\n            onClick={onClick}\n            onKeyPress={onKeyPress}\n            onDeleteFinished={onDeleteFinished}\n          />\n        ))}\n      </Stack>\n    </Box>\n  )\n}\n","import type {Subscription} from 'rxjs'\nimport React, {useState, useRef, useCallback, useMemo, useEffect} from 'react'\nimport {DownloadIcon} from '@sanity/icons'\nimport {Box, Button, Card, Dialog, Flex, Grid, Spinner, Text} from '@sanity/ui'\nimport {Asset as AssetType, AssetFromSource, AssetSourceComponentProps} from '@sanity/types'\nimport {uniqueId} from 'lodash'\nimport styled from 'styled-components'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {useClient} from '../../../hooks'\nimport {AssetThumb} from './AssetThumb'\nimport {TableList} from './TableList'\n\nconst PER_PAGE = 200\nconst ASSET_TYPE_IMAGE = 'sanity.imageAsset'\nconst ASSET_TYPE_FILE = 'sanity.fileAsset'\n\nconst buildQuery = (start = 0, end = PER_PAGE, assetType = ASSET_TYPE_IMAGE) => `\n  *[_type == \"${assetType}\"] | order(_updatedAt desc) [${start}...${end}] {\n    _id,\n    _updatedAt,\n    _createdAt,\n    url,\n    originalFilename,\n    mimeType,\n    extension,\n    size,\n    metadata {dimensions}\n  }\n`\n\nconst ThumbGrid = styled(Grid)`\n  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n`\n\nconst CardLoadMore = styled(Card)`\n  border-top: 1px solid var(--card-border-color);\n  position: sticky;\n  bottom: 0;\n  z-index: 200;\n`\n\nconst DefaultAssetSource = function DefaultAssetSource(\n  props: AssetSourceComponentProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const versionedClient = useMemo(() => client.withConfig({apiVersion: '1'}), [client])\n  const _elementId = useRef(`default-asset-source-${uniqueId()}`)\n  const currentPageNumber = useRef(0)\n  const fetch$ = useRef<Subscription>()\n  const [assets, setAssets] = useState<AssetType[]>([])\n  const [isLastPage, setIsLastPage] = useState(false)\n  const [hasResetAutoFocus, setHasResetFocus] = useState(false)\n  const [isLoading, setIsLoading] = useState(true)\n  const {\n    selectedAssets,\n    assetType = 'image',\n    dialogHeaderTitle = 'Select image',\n    onClose,\n    onSelect,\n  } = props\n\n  const fetchPage = useCallback(\n    (pageNumber: number) => {\n      const start = pageNumber * PER_PAGE\n      const end = start + PER_PAGE\n      const isImageAssetType = assetType === 'image'\n      const tag = isImageAssetType ? 'asset.image-list' : 'asset.file-list'\n      const assetTypeParam = isImageAssetType ? ASSET_TYPE_IMAGE : ASSET_TYPE_FILE\n\n      setIsLoading(true)\n\n      fetch$.current = versionedClient.observable\n        .fetch(buildQuery(start, end, assetTypeParam), {}, {tag})\n        .subscribe((result) => {\n          setIsLastPage(result.length < PER_PAGE)\n          // eslint-disable-next-line max-nested-callbacks\n          setAssets((prevState) => prevState.concat(result))\n          setIsLoading(false)\n        })\n    },\n    [assetType, setIsLoading, setAssets, setIsLastPage, versionedClient]\n  )\n\n  const handleDeleteFinished = useCallback(\n    (id) => {\n      // eslint-disable-next-line max-nested-callbacks\n      setAssets((prevState) => prevState.filter((asset) => asset._id !== id))\n    },\n    [setAssets]\n  )\n\n  const select = useCallback(\n    (id) => {\n      const selected = assets.find((doc) => doc._id === id)\n\n      if (selected) {\n        const selectedSource: AssetFromSource[] = [{kind: 'assetDocumentId', value: id}]\n\n        onSelect(selectedSource)\n      }\n    },\n    [assets, onSelect]\n  )\n\n  const handleItemClick = useCallback(\n    (event: React.MouseEvent) => {\n      event.preventDefault()\n\n      select(event.currentTarget.getAttribute('data-id'))\n    },\n    [select]\n  )\n\n  const handleItemKeyPress = useCallback(\n    (event: React.KeyboardEvent) => {\n      if (event.key === 'Enter') {\n        event.preventDefault()\n        select(event.currentTarget.getAttribute('data-id'))\n      }\n    },\n    [select]\n  )\n\n  const handleClose = useCallback(() => {\n    if (onClose) {\n      onClose()\n    }\n  }, [onClose])\n\n  const handleFetchNextPage = useCallback(\n    (event) => {\n      event.preventDefault()\n      fetchPage(++currentPageNumber.current)\n    },\n    [fetchPage]\n  )\n\n  useEffect(() => {\n    fetchPage(currentPageNumber.current)\n\n    return () => {\n      if (fetch$.current) {\n        fetch$.current.unsubscribe()\n      }\n    }\n  }, [fetchPage])\n\n  useEffect(() => {\n    // We focus on the first item after we're doing loading, but only on initial load, as\n    // this will reset the scroll position to the top if we do it on the second page\n    if (!isLoading && (!currentPageNumber.current || currentPageNumber.current === 0)) {\n      setHasResetFocus(true)\n    }\n  }, [isLoading])\n\n  const renderedThumbView = useMemo(() => {\n    return (\n      <Box padding={4}>\n        <ThumbGrid gap={2}>\n          {assets.map((asset) => (\n            <AssetThumb\n              key={asset._id}\n              asset={asset}\n              isSelected={selectedAssets.some((selected) => selected._id === asset._id)}\n              onClick={handleItemClick}\n              onKeyPress={handleItemKeyPress}\n              onDeleteFinished={handleDeleteFinished}\n            />\n          ))}\n        </ThumbGrid>\n\n        {isLoading && assets.length === 0 && (\n          <Flex justify=\"center\">\n            <Spinner muted />\n          </Flex>\n        )}\n\n        {!isLoading && assets.length === 0 && (\n          <Text align=\"center\" muted>\n            No images\n          </Text>\n        )}\n      </Box>\n    )\n  }, [assets, handleDeleteFinished, handleItemClick, handleItemKeyPress, isLoading, selectedAssets])\n\n  const renderedTableView = useMemo(() => {\n    return (\n      <TableList\n        isLoading={isLoading}\n        assets={assets}\n        selectedAssets={selectedAssets}\n        onClick={handleItemClick}\n        onKeyPress={handleItemKeyPress}\n        onDeleteFinished={handleDeleteFinished}\n      />\n    )\n  }, [isLoading, assets, selectedAssets, handleItemClick, handleItemKeyPress, handleDeleteFinished])\n\n  return (\n    <Dialog\n      ref={ref}\n      id={_elementId.current}\n      header={dialogHeaderTitle}\n      width={2}\n      onClose={handleClose}\n      __unstable_autoFocus={hasResetAutoFocus}\n    >\n      {assetType === 'image' && renderedThumbView}\n      {assetType === 'file' && renderedTableView}\n      {assets.length > 0 && !isLastPage && (\n        <CardLoadMore tone=\"default\" padding={4}>\n          <Flex direction=\"column\">\n            <Button\n              type=\"button\"\n              icon={DownloadIcon}\n              loading={isLoading}\n              onClick={handleFetchNextPage}\n              text=\"Load more\"\n              tone=\"primary\"\n            />\n          </Flex>\n        </CardLoadMore>\n      )}\n    </Dialog>\n  )\n}\n\nexport const DefaultSource = React.memo(React.forwardRef(DefaultAssetSource))\n","import {ImageIcon, DocumentsIcon} from '@sanity/icons'\nimport {AssetSource} from '@sanity/types'\nimport {FIXME} from '../../types'\nimport {DefaultSource} from './DefaultSource'\n\nexport const ImageSource: AssetSource = {\n  name: 'sanity-default',\n  title: 'Uploaded images',\n  component: DefaultSource as FIXME,\n  icon: ImageIcon as FIXME,\n}\n\nexport const FileSource: AssetSource = {\n  name: 'sanity-default',\n  title: 'Uploaded files',\n  component: DefaultSource as FIXME,\n  icon: DocumentsIcon as FIXME,\n}\n","import {FileSource, ImageSource} from './studio/DefaultAssetSource'\n\nexport const defaultFileAssetSources = [FileSource]\nexport const defaultImageAssetSources = [ImageSource]\n","import type {WorkspaceLike} from './types'\nimport {getWorkspaceIdentifier} from './validateWorkspaces'\n\nexport interface WorkspaceValidationErrorOptions {\n  workspace: WorkspaceLike\n  index: number\n}\n\n/**\n * Thrown on workspace validation errors. Includes an identifier that is either the name of\n * the workspace, or in the case of a missing or invalid name, an index and a potential title\n */\nexport class WorkspaceValidationError extends Error {\n  index?: number\n  identifier?: string\n\n  constructor(message: string, options?: WorkspaceValidationErrorOptions) {\n    super(message)\n    this.index = options?.index\n    this.identifier = options?.workspace && getWorkspaceIdentifier(options.workspace, options.index)\n  }\n}\n","import type {WorkspaceLike} from './types'\nimport {WorkspaceValidationError} from './WorkspaceValidationError'\n\ninterface ValidateWorkspaceOptions {\n  workspaces: WorkspaceLike[]\n}\n\nexport const getWorkspaceIdentifier = getIdentifier\n\n/**\n * Validates workspace configuration, throwing if:\n *\n * - Workspaces do not all have base paths and names (if multiple given)\n * - Base paths or names are invalid\n * - Base paths or names are not unique\n */\nexport function validateWorkspaces({workspaces}: ValidateWorkspaceOptions): void {\n  if (workspaces.length === 0) {\n    throw new WorkspaceValidationError('At least one workspace is required.')\n  }\n\n  validateNames(workspaces)\n  validateBasePaths(workspaces)\n}\n\n/**\n * Validates the workspace names of every workspace\n * Only exported for testing purposes\n *\n * @param workspaces - An array of workspaces\n * @internal\n */\nexport function validateNames(workspaces: WorkspaceLike[]): void {\n  const isSingleWorkspace = workspaces.length === 1\n  const names = new Map<string, {index: number; workspace: WorkspaceLike}>()\n  workspaces.forEach((workspace, index) => {\n    const {name: rawName, title} = workspace\n    const thisIdentifier = getNamelessIdentifier(title, index)\n\n    if (!rawName && !isSingleWorkspace) {\n      throw new WorkspaceValidationError(\n        'All workspaces must have a `name`, unless only a single workspace is defined. ' +\n          `Workspace ${thisIdentifier} did not define a \\`name\\`.`,\n        {workspace, index}\n      )\n    }\n\n    const name = isSingleWorkspace && typeof rawName === 'undefined' ? 'default' : rawName\n\n    if (typeof name !== 'string') {\n      throw new WorkspaceValidationError(\n        `Workspace at index ${index} defined an invalid \\`name\\` - must be a string.`,\n        {workspace, index}\n      )\n    }\n\n    const normalized = name.toLowerCase()\n    const existingWorkspace = names.get(normalized)\n\n    if (existingWorkspace) {\n      const prevIdentifier = getNamelessIdentifier(\n        existingWorkspace.workspace.title,\n        existingWorkspace.index\n      )\n      throw new WorkspaceValidationError(\n        `\\`name\\`s must be unique. Workspace ${prevIdentifier} and ` +\n          `workspace ${thisIdentifier} both have the \\`name\\` \\`${name}\\``,\n        {workspace, index}\n      )\n    }\n\n    names.set(normalized, {index, workspace})\n\n    if (!/^[a-z0-9][a-z0-9_-]*$/i.test(name)) {\n      throw new WorkspaceValidationError(\n        `All workspace \\`name\\`s must consist of only a-z, 0-9, underscore and dashes, ` +\n          `and cannot begin with an underscore or dash. ` +\n          `Workspace ${thisIdentifier} has the invalid name \\`${name}\\``,\n        {workspace, index}\n      )\n    }\n  })\n}\n\n/**\n * Validates the base paths of every workspace\n * Only exported for testing purposes\n *\n * @param workspaces - An array of workspaces\n * @internal\n */\nexport function validateBasePaths(workspaces: WorkspaceLike[]): void {\n  // If we have more than a single workspace, every workspace needs a basepath\n  if (workspaces.length > 1) {\n    workspaces.every(hasBasePath) // Throws on missing basePath\n  }\n\n  workspaces.every(validateBasePath)\n\n  const [firstWorkspace, ...restOfWorkspaces] = workspaces\n  const firstWorkspaceSegmentCount = (firstWorkspace.basePath || '/')\n    // remove starting slash before splitting\n    .substring(1)\n    .split('/').length\n\n  restOfWorkspaces.forEach((workspace, index) => {\n    const workspaceSegmentCount = (workspace.basePath || '/')\n      // remove starting slash before splitting\n      .substring(1)\n      .split('/').length\n\n    if (firstWorkspaceSegmentCount !== workspaceSegmentCount) {\n      throw new WorkspaceValidationError(\n        `All workspace \\`basePath\\`s must have the same amount of segments. Workspace \\`${getIdentifier(\n          firstWorkspace,\n          index\n        )}\\` had ${firstWorkspaceSegmentCount} segment${\n          firstWorkspaceSegmentCount === 1 ? '' : 's'\n        } \\`${firstWorkspace.basePath}\\` but workspace \\`${getIdentifier(\n          workspace,\n          index\n        )}\\` had ${workspaceSegmentCount} segment${workspaceSegmentCount === 1 ? '' : 's'} \\`${\n          workspace.basePath\n        }\\``,\n        {workspace, index}\n      )\n    }\n  })\n\n  const basePaths = new Map<string, string>()\n  workspaces.forEach((workspace, index) => {\n    const basePath = (workspace.basePath || '').toLowerCase()\n\n    const existingWorkspace = basePaths.get(basePath)\n    if (existingWorkspace) {\n      throw new WorkspaceValidationError(\n        `\\`basePath\\`s must be unique. Workspaces \\`${existingWorkspace}\\` and ` +\n          `\\`${getIdentifier(workspace, index)}\\` both have the \\`basePath\\` \\`${basePath}\\``,\n        {workspace, index}\n      )\n    }\n\n    basePaths.set(basePath, getIdentifier(workspace, index))\n  })\n}\n\nfunction hasBasePath(workspace: WorkspaceLike, index: number) {\n  const {name, basePath} = workspace\n  if (basePath && typeof basePath === 'string') {\n    return true\n  }\n\n  if (typeof basePath === 'undefined') {\n    throw new WorkspaceValidationError(\n      `If more than one workspace is defined, every workspace must have a \\`basePath\\` defined. ` +\n        `Workspace \\`${name}\\` is missing a \\`basePath\\``,\n      {workspace, index}\n    )\n  }\n\n  throw new WorkspaceValidationError(\n    `If more than one workspace is defined, every workspace must have a \\`basePath\\` defined. ` +\n      `Workspace \\`${name}\\` has an invalid \\`basePath\\` (must be a non-empty string)`,\n    {workspace, index}\n  )\n}\n\nfunction validateBasePath(workspace: WorkspaceLike, index: number) {\n  const {name, basePath} = workspace\n\n  // Empty base paths are okay (we're validating uniqueness and presence on more\n  // than a single workspace in `validateBasePaths`)\n  if (!basePath || basePath === '/') {\n    return\n  }\n\n  if (!/^\\/[a-z0-9/_-]*[a-z0-9_-]+$/i.test(basePath)) {\n    throw new WorkspaceValidationError(\n      `All workspace \\`basePath\\`s must start with a leading \\`/\\`, ` +\n        `consist of only URL safe characters, ` +\n        `and cannot end with a trailing \\`/\\`. ` +\n        `Workspace \\`${name}\\`'s basePath is \\`${basePath}\\``,\n      {workspace, index}\n    )\n  }\n}\n\n/**\n * Gets a printable identifer for the workspace - either the name, or the index\n * and any potential title set for it\n *\n * @param workspace - The workspace to get the indentifier for\n * @param index - The index at which the workspace appeared in the source array\n * @returns Printable string (eg `intranet`, or `at index 5 (titled \"Intranet\")`)\n * @internal\n */\nfunction getIdentifier({name, title}: WorkspaceLike, index: number): string {\n  if (typeof name === 'string' && name.trim().length > 0) {\n    return name\n  }\n\n  return getNamelessIdentifier(title, index)\n}\n\nfunction getNamelessIdentifier(title: string | undefined, index: number): string {\n  const withTitle =\n    typeof title === 'string' && title.trim().length > 0 ? ` (titled \"${title}\")` : ''\n  return `at index ${index}${withTitle}`\n}\n","import {ActionHook} from './types'\n\nconst actionIds = new WeakMap<ActionHook<any, any>, string>()\n\nlet counter = 0\n\nexport function getHookId<T, K>(actionHook: ActionHook<T, K>): string {\n  const cachedId = actionIds.get(actionHook)\n\n  if (cachedId) return cachedId\n\n  const id = `${actionHook.name || (actionHook as any).displayName || '<anonymous>'}-${counter++}`\n\n  actionIds.set(actionHook, id)\n\n  return id\n}\n","import React, {memo, useEffect, useRef} from 'react'\nimport shallowEquals from 'shallow-equals'\n\nfunction useShallowCompareMemoize<T>(value: T): Array<T | undefined> {\n  const ref = useRef<T | undefined>(undefined)\n\n  if (!shallowEquals(value, ref.current)) {\n    ref.current = value\n  }\n\n  return [ref.current]\n}\n\nfunction useShallowCompareEffect(callback: React.EffectCallback, dependencies: any) {\n  useEffect(callback, useShallowCompareMemoize(dependencies))\n}\n\nexport const HookStateContainer = memo(\n  function HookStateContainer(props: any) {\n    const {hook, args, id, onNext, onReset, onRequestUpdate} = props\n\n    const hookState = hook({\n      ...args,\n      onComplete: () => {\n        onReset(id)\n      },\n    })\n\n    useShallowCompareEffect(() => {\n      onNext(id, hookState)\n      onRequestUpdate()\n      return () => {\n        onNext(id, null)\n        onRequestUpdate()\n      }\n    }, hookState)\n\n    return null\n  },\n  (prev, next) => prev.args === next.args\n)\n","const requestIdleCallbackShim: Window['requestIdleCallback'] = (callback) => {\n  const start = Date.now()\n\n  return setTimeout(() => {\n    callback({\n      didTimeout: false,\n      timeRemaining() {\n        return Math.max(0, Date.now() - start)\n      },\n    })\n  }, 1) as unknown as ReturnType<Window['requestIdleCallback']>\n}\n\nconst cancelIdleCallbackShim: Window['cancelIdleCallback'] = (handle: unknown) => {\n  return clearTimeout(handle as any)\n}\n\nconst _requestIdleCallback =\n  typeof requestIdleCallback === 'undefined' ? requestIdleCallbackShim : requestIdleCallback\nconst _cancelIdleCallback =\n  typeof cancelIdleCallback === 'undefined' ? cancelIdleCallbackShim : cancelIdleCallbackShim\n\nexport {_requestIdleCallback as requestIdleCallback}\nexport {_cancelIdleCallback as cancelIdleCallback}\n","import React, {useCallback, useEffect, useMemo, useRef, useState} from 'react'\nimport {isNonNullable} from '../../util/isNonNullable'\nimport {useThrottledCallback} from '../../util/useThrottledCallback'\nimport {getHookId} from './actionId'\nimport {HookStateContainer} from './HookStateContainer'\nimport {cancelIdleCallback, requestIdleCallback} from './requestIdleCallback'\nimport {ActionHook} from './types'\n\ninterface GetHookCollectionStateProps<T, K> {\n  args: T\n  children: (props: {states: K[]}) => React.ReactNode\n  hooks: ActionHook<T, K>[]\n  onReset?: () => void\n}\n\nexport function GetHookCollectionState<T, K>(props: GetHookCollectionStateProps<T, K>) {\n  const {hooks, args, children, onReset} = props\n\n  const statesRef = useRef<Record<string, {value: K}>>({})\n  const [tickId, setTick] = useState(0)\n\n  const [keys, setKeys] = useState<Record<string, number>>({})\n  const mountedRef = useRef(true)\n\n  useEffect(() => {\n    return () => {\n      mountedRef.current = false\n    }\n  }, [])\n\n  const ricHandle = useRef<number | null>(null)\n\n  const handleRequestUpdate = useCallback(() => {\n    if (ricHandle.current) {\n      cancelIdleCallback(ricHandle.current)\n    }\n\n    ricHandle.current = requestIdleCallback(() => {\n      ricHandle.current = null\n\n      if (mountedRef.current) {\n        setTick((tick) => tick + 1)\n      }\n    })\n  }, [])\n\n  const handleRequestUpdateThrottled = useThrottledCallback(handleRequestUpdate, 60, {\n    trailing: true,\n  })\n\n  const handleNext = useCallback((id, hookState) => {\n    if (hookState === null) {\n      delete statesRef.current[id]\n    } else {\n      const current = statesRef.current[id]\n      statesRef.current[id] = {...current, value: hookState}\n    }\n  }, [])\n\n  const handleReset = useCallback(\n    (id) => {\n      setKeys((currentKeys) => ({...currentKeys, [id]: (currentKeys[id] || 0) + 1}))\n\n      if (onReset) {\n        onReset()\n      }\n    },\n    [onReset]\n  )\n\n  const hookIds = useMemo(() => hooks.map((hook) => getHookId(hook)), [hooks])\n\n  const states = useMemo(\n    () => hookIds.map((id) => statesRef.current[id]?.value).filter(isNonNullable),\n    [hookIds, tickId]\n  )\n\n  return (\n    <>\n      {hooks.map((hook) => {\n        const id = getHookId(hook)\n        const key = keys[id] || 0\n\n        return (\n          <HookStateContainer\n            key={`${id}-${key}`}\n            hook={hook}\n            id={id}\n            args={args}\n            onNext={handleNext}\n            onRequestUpdate={handleRequestUpdateThrottled}\n            onReset={handleReset}\n          />\n        )\n      })}\n\n      {children({states})}\n    </>\n  )\n}\n","import React from 'react'\nimport {DocumentActionDescription, DocumentActionProps} from './types'\nimport {GetHookCollectionState} from './GetHookCollectionState'\n\ninterface Action<Args, Description> {\n  (args: Args): Description | null\n}\n\ninterface RenderActionCollectionProps {\n  actions: Action<DocumentActionProps, DocumentActionDescription>[]\n  actionProps: DocumentActionProps\n  children: (props: {states: DocumentActionDescription[]}) => React.ReactNode\n  onActionComplete?: () => void\n}\n\nexport const RenderActionCollectionState = (props: RenderActionCollectionProps) => {\n  const {actions, children, actionProps, onActionComplete} = props\n\n  return (\n    <GetHookCollectionState onReset={onActionComplete} hooks={actions} args={actionProps}>\n      {children}\n    </GetHookCollectionState>\n  )\n}\n","import {useId} from '@reach/auto-id'\nimport {EllipsisVerticalIcon} from '@sanity/icons'\nimport {Box, Button, Label, Menu, MenuButton, MenuDivider, MenuItem, PopoverProps} from '@sanity/ui'\nimport React, {forwardRef, Fragment, useCallback, useMemo} from 'react'\nimport {IntentLink} from '../../../router'\nimport {PaneMenuItem, PaneMenuItemGroup} from '../../types'\n\ninterface PaneContextMenuButtonProps {\n  items: PaneMenuItem[]\n  itemGroups?: PaneMenuItemGroup[]\n  onAction: (action: PaneMenuItem) => void\n}\n\ninterface MenuItemGroup {\n  id: string\n  title?: React.ReactNode\n  items: PaneMenuItem[]\n}\n\nconst CONTEXT_MENU_POPOVER_PROPS: PopoverProps = {\n  constrainSize: true,\n  placement: 'bottom',\n  portal: true,\n}\n\n/**\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\nexport function PaneContextMenuButton(props: PaneContextMenuButtonProps) {\n  const {items, itemGroups, onAction} = props\n  const id = useId() || ''\n\n  const groups = useMemo(() => {\n    if (!itemGroups || itemGroups.length === 0) {\n      return [{id: '$default', items}]\n    }\n\n    const defaultGroup: MenuItemGroup = {id: '$default', items: []}\n\n    const groupMap = itemGroups.reduce((acc: Record<string, MenuItemGroup>, group) => {\n      acc[group.id] = {id: group.id, title: group.title, items: []}\n      return acc\n    }, {})\n\n    for (const item of items) {\n      const group = groupMap[item.group || '$default'] || defaultGroup\n\n      group.items.push(item)\n    }\n\n    return Object.values(groupMap)\n      .concat([defaultGroup])\n      .filter((g) => g.items.length > 0)\n  }, [items, itemGroups])\n\n  return (\n    <MenuButton\n      button={<Button icon={EllipsisVerticalIcon} mode=\"bleed\" padding={3} title=\"Show menu\" />}\n      id={id}\n      menu={\n        <Menu>\n          {groups.map((group, groupIndex) => (\n            // eslint-disable-next-line react/no-array-index-key\n            <Fragment key={groupIndex}>\n              {groupIndex > 0 && <MenuDivider />}\n              {group.title && (\n                <Box paddingX={3} paddingTop={3} paddingBottom={2}>\n                  <Label muted>{group.title}</Label>\n                </Box>\n              )}\n              {group.items.map((item, itemIndex) => (\n                <PaneContextMenuItem\n                  item={item}\n                  // eslint-disable-next-line react/no-array-index-key\n                  key={`${itemIndex}-${item.title}`}\n                  onAction={onAction}\n                />\n              ))}\n            </Fragment>\n          ))}\n        </Menu>\n      }\n      popover={CONTEXT_MENU_POPOVER_PROPS}\n      portal\n    />\n  )\n}\n\nfunction PaneContextMenuItem(props: {\n  item: PaneMenuItem\n  onAction: (action: PaneMenuItem) => void\n}) {\n  const {item, onAction} = props\n\n  const handleClick = useCallback(() => {\n    onAction(item)\n  }, [item, onAction])\n\n  const hotkeys = useMemo(() => {\n    if (!item.shortcut) return undefined\n\n    return item.shortcut.split('+')\n  }, [item])\n\n  const IntentButtonOrActionButton = forwardRef((linkProps, linkRef: React.ForwardedRef<never>) =>\n    item.intent ? (\n      <IntentLink\n        {...linkProps}\n        intent={item.intent.type}\n        params={item.intent.params}\n        ref={linkRef}\n      />\n    ) : (\n      <button type=\"button\" {...linkProps} />\n    )\n  )\n\n  IntentButtonOrActionButton.displayName = 'Link'\n\n  return (\n    <MenuItem\n      as={IntentButtonOrActionButton}\n      data-as={item.intent ? 'a' : 'button'}\n      hotkeys={hotkeys}\n      icon={item.icon}\n      onClick={handleClick}\n      text={item.title}\n    />\n  )\n}\n","import {useToast} from '@sanity/ui'\nimport React, {forwardRef, useImperativeHandle} from 'react'\n\nexport interface ToastParams {\n  closable?: boolean\n  description?: React.ReactNode\n  duration?: number\n  onClose?: () => void\n  title?: React.ReactNode\n  status?: 'error' | 'warning' | 'success' | 'info'\n}\n\nexport const ImperativeToast = forwardRef((_, ref) => {\n  const {push} = useToast()\n\n  useImperativeHandle(ref, () => ({push}))\n\n  return null\n})\n\nImperativeToast.displayName = 'ImperativeToast'\n","import {ZIndexContextValue} from './types'\n\n/**\n * @internal\n */\nexport const defaults: ZIndexContextValue = {\n  navbar: 200,\n  navbarPopover: 500000,\n  navbarDialog: 500001,\n\n  // pane\n  pane: 100,\n  paneHeader: [110, 15000],\n  paneFooter: [120, 20000],\n  paneResizer: [130, 25000],\n\n  //\n  popover: 200,\n  modal: 200,\n  movingItem: 10000,\n  drawershade: 1000000,\n  drawer: 1000001,\n  fullscreen: 1200000,\n  toast: [100, 11000],\n\n  // NOT IN USE\n  portal: 200,\n  dropdown: 200,\n  navbarFixed: 1010,\n  fullscreenEdit: 1050,\n  popoverBackground: 1060,\n  tooltip: 200,\n  modalBackground: 2000,\n  spinner: 3000,\n}\n","import {createContext} from 'react'\nimport {ZIndexContextValue} from './types'\nimport {defaults} from './defaults'\n\n/**\n * @todo: Rename to `ZOffsetsContext`\n *\n * @internal\n */\nexport const ZIndexContext = createContext<ZIndexContextValue>(defaults)\n","import {useContext} from 'react'\nimport {ZIndexContextValue} from './types'\nimport {ZIndexContext} from './ZIndexContext'\n\n/**\n * @todo: Rename to `useZOffsets`\n *\n * @internal\n */\nexport function useZIndex(): ZIndexContextValue {\n  return useContext(ZIndexContext)\n}\n","import {LayerProvider} from '@sanity/ui'\nimport React from 'react'\nimport {useZIndex} from '../zOffsets/useZIndex'\nimport {ZIndexContextValue} from '../zOffsets/types'\n\nexport type ZIndexContextValueKey = keyof ZIndexContextValue\n\n/**\n * This component should only be used by core Sanity packages.\n * @internal\n */\nexport function LegacyLayerProvider({\n  children,\n  zOffset: zOffsetKey,\n}: {\n  children: React.ReactNode\n  zOffset: ZIndexContextValueKey\n}) {\n  const zIndex = useZIndex()\n  const zOffset = zIndex[zOffsetKey]\n\n  return <LayerProvider zOffset={zOffset}>{children}</LayerProvider>\n}\n","/**\n * @internal\n */\nexport const PANE_DEBUG = false\n\n/**\n * @internal\n */\nexport const PANE_COLLAPSED_WIDTH = 51\n\n/**\n * @internal\n */\nexport const PANE_DEFAULT_MIN_WIDTH = PANE_COLLAPSED_WIDTH * 4\n","import {createContext} from 'react'\nimport {PaneContextValue} from './types'\n\n/**\n * @internal\n */\nexport const PaneContext = createContext<PaneContextValue | null>(null)\n","import {createContext} from 'react'\nimport {PaneLayoutContextValue} from './types'\n\n/**\n * @internal\n */\nexport const PaneLayoutContext = createContext<PaneLayoutContextValue | null>(null)\n","import {useContext} from 'react'\nimport {PaneLayoutContext} from './PaneLayoutContext'\nimport {PaneLayoutContextValue} from './types'\n\n/**\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\nexport function usePaneLayout(): PaneLayoutContextValue {\n  const pane = useContext(PaneLayoutContext)\n\n  if (!pane) {\n    throw new Error('PaneLayout: missing context value')\n  }\n\n  return pane\n}\n","import {Layer} from '@sanity/ui'\nimport React, {useCallback, useState} from 'react'\nimport styled from 'styled-components'\nimport {usePaneLayout} from './usePaneLayout'\n\nconst Root = styled(Layer)`\n  position: relative;\n  width: 1px;\n  min-width: 1px;\n\n  &:before {\n    content: '';\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    width: 1px;\n    background-color: var(--card-border-color);\n  }\n\n  &:not([data-disabled]) {\n    cursor: ew-resize;\n    width: 9px;\n    min-width: 9px;\n    margin: 0 -4px;\n\n    &:before {\n      left: 4px;\n    }\n\n    &:after {\n      content: '';\n      display: block;\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 9px;\n      bottom: 0;\n      background-color: var(--card-border-color);\n      opacity: 0;\n      transition: opacity 150ms;\n    }\n\n    &[data-dragging]:after,\n    &:hover:after {\n      opacity: 0.2;\n    }\n  }\n`\n\n/**\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\nexport function PaneDivider({\n  disabled,\n  element,\n}: {\n  disabled?: boolean\n  element: HTMLElement | null\n}) {\n  const {resize} = usePaneLayout()\n  const [dragging, setDragging] = useState(false)\n\n  const handleMouseDown = useCallback(\n    (event) => {\n      if (!element) return\n\n      setDragging(true)\n\n      event.preventDefault()\n\n      const startX = event.pageX\n\n      resize('start', element, 0)\n\n      const handleMouseMove = (e: MouseEvent) => {\n        e.preventDefault()\n\n        const deltaX = e.pageX - startX\n\n        resize('move', element, deltaX)\n      }\n\n      const handleMouseUp = (e: MouseEvent) => {\n        e.preventDefault()\n\n        setDragging(false)\n\n        window.removeEventListener('mousemove', handleMouseMove)\n        window.removeEventListener('mouseup', handleMouseUp)\n\n        resize('end', element, 0)\n      }\n\n      window.addEventListener('mousemove', handleMouseMove)\n      window.addEventListener('mouseup', handleMouseUp)\n    },\n    [element, resize]\n  )\n\n  return (\n    <Root\n      data-disabled={disabled ? '' : undefined}\n      data-dragging={dragging ? '' : undefined}\n      onMouseDown={handleMouseDown}\n    />\n  )\n}\n","import {BoundaryElementProvider, Card, CardProps, Code, Flex, useForwardedRef} from '@sanity/ui'\nimport React, {forwardRef, useMemo, useState, useCallback, useEffect} from 'react'\nimport styled from 'styled-components'\nimport {LegacyLayerProvider} from '../../../components/transitional'\nimport {PANE_COLLAPSED_WIDTH, PANE_DEBUG, PANE_DEFAULT_MIN_WIDTH} from './constants'\nimport {PaneContext} from './PaneContext'\nimport {PaneDivider} from './PaneDivider'\nimport {usePaneLayout} from './usePaneLayout'\n\ninterface PaneProps {\n  children?: React.ReactNode\n  currentMinWidth?: number\n  currentMaxWidth?: number\n  flex?: number\n  id: string\n  minWidth?: number\n  maxWidth?: number\n  selected?: boolean\n}\n\nconst Root = styled(Card)`\n  outline: none;\n\n  // NOTE: This will render a border to the right side of each pane\n  // without taking up physical space.\n  box-shadow: 1px 0 0 var(--card-border-color);\n`\n\n/**\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\n// eslint-disable-next-line complexity\nexport const Pane = forwardRef(function Pane(\n  props: PaneProps &\n    Omit<CardProps, 'as' | 'overflow'> &\n    Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'height' | 'hidden' | 'id' | 'style'>,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {\n    children,\n    currentMinWidth: currentMinWidthProp,\n    currentMaxWidth: currentMaxWidthProp,\n    flex: flexProp = 1,\n    id,\n    minWidth: minWidthProp,\n    maxWidth: maxWidthProp,\n    selected = false,\n    ...restProps\n  } = props\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n  const {\n    collapse,\n    collapsed: layoutCollapsed,\n    expand,\n    expandedElement,\n    mount,\n    panes,\n  } = usePaneLayout()\n  const pane = panes.find((p) => p.element === rootElement)\n  const paneIndex = pane && panes.indexOf(pane)\n  const nextPane = typeof paneIndex === 'number' ? panes[paneIndex + 1] : undefined\n  const isLast = paneIndex === panes.length - 1\n  const expanded = expandedElement === rootElement\n  const collapsed = layoutCollapsed ? false : pane?.collapsed || false\n  const nextCollapsed = nextPane?.collapsed || false\n  const forwardedRef = useForwardedRef(ref)\n  const flex = pane?.flex ?? flexProp\n  const currentMinWidth = pane?.currentMinWidth ?? currentMinWidthProp\n  const currentMaxWidth = pane?.currentMaxWidth ?? currentMaxWidthProp\n\n  const setRef = useCallback(\n    (refValue: HTMLDivElement | null) => {\n      setRootElement(refValue)\n      forwardedRef.current = refValue\n    },\n    [forwardedRef]\n  )\n\n  useEffect(() => {\n    if (!rootElement) return undefined\n    return mount(rootElement, {\n      currentMinWidth: currentMinWidthProp,\n      currentMaxWidth: currentMaxWidthProp,\n      flex: flexProp,\n      id,\n      minWidth: minWidthProp,\n      maxWidth: maxWidthProp,\n    })\n  }, [\n    currentMinWidthProp,\n    currentMaxWidthProp,\n    flexProp,\n    id,\n    minWidthProp,\n    maxWidthProp,\n    mount,\n    rootElement,\n  ])\n\n  const handleCollapse = useCallback(() => {\n    if (!rootElement) return\n    collapse(rootElement)\n  }, [collapse, rootElement])\n\n  const handleExpand = useCallback(() => {\n    if (!rootElement) return\n    expand(rootElement)\n  }, [expand, rootElement])\n\n  const contextValue = useMemo(\n    () => ({\n      collapse: handleCollapse,\n      collapsed: layoutCollapsed ? false : collapsed,\n      expand: handleExpand,\n      index: paneIndex,\n      isLast,\n      rootElement,\n    }),\n    [collapsed, handleCollapse, handleExpand, isLast, layoutCollapsed, paneIndex, rootElement]\n  )\n\n  const minWidth = useMemo(() => {\n    if (layoutCollapsed) {\n      return undefined\n    }\n\n    if (collapsed) return PANE_COLLAPSED_WIDTH\n\n    if (currentMinWidth === 0) {\n      return minWidthProp || PANE_DEFAULT_MIN_WIDTH\n    }\n\n    if (isLast) {\n      return minWidthProp || PANE_DEFAULT_MIN_WIDTH\n    }\n\n    return currentMinWidth || minWidthProp || PANE_DEFAULT_MIN_WIDTH\n  }, [collapsed, currentMinWidth, isLast, layoutCollapsed, minWidthProp])\n\n  const maxWidth = useMemo(() => {\n    if (collapsed) return PANE_COLLAPSED_WIDTH\n\n    if (layoutCollapsed && isLast) {\n      return undefined\n    }\n\n    if (isLast) {\n      if (maxWidthProp) {\n        return currentMaxWidth ?? maxWidthProp\n      }\n\n      return undefined\n    }\n\n    return currentMaxWidth ?? maxWidthProp\n  }, [collapsed, currentMaxWidth, isLast, layoutCollapsed, maxWidthProp])\n\n  const hidden = layoutCollapsed && !isLast\n\n  const divider = useMemo(\n    () =>\n      !isLast &&\n      !layoutCollapsed && (\n        <LegacyLayerProvider zOffset=\"paneResizer\">\n          <PaneDivider disabled={collapsed || nextCollapsed} element={rootElement} />\n        </LegacyLayerProvider>\n      ),\n    [collapsed, isLast, layoutCollapsed, nextCollapsed, rootElement]\n  )\n\n  const style = useMemo(\n    () => ({\n      flex,\n      minWidth,\n      maxWidth: maxWidth === Infinity ? undefined : maxWidth,\n    }),\n    [flex, minWidth, maxWidth]\n  )\n\n  return (\n    <>\n      <LegacyLayerProvider zOffset=\"pane\">\n        <PaneContext.Provider value={contextValue}>\n          <Root\n            data-testid=\"pane\"\n            tone=\"inherit\"\n            hidden={hidden}\n            id={id}\n            overflow={layoutCollapsed ? undefined : 'hidden'}\n            {...restProps}\n            data-pane-collapsed={collapsed ? '' : undefined}\n            data-pane-index={paneIndex}\n            data-pane-selected={selected ? '' : undefined}\n            ref={setRef}\n            style={style}\n          >\n            {PANE_DEBUG && (\n              <Card padding={4} tone={expanded ? 'primary' : 'caution'}>\n                <Code size={1}>\n                  {[\n                    `#${paneIndex}`,\n                    `collapsed=${collapsed}`,\n                    `currentMinWidth=${currentMinWidth}`,\n                    `currentMaxWidth=${currentMaxWidth}`,\n                    `flex=${flex}`,\n                    `minWidth=${minWidth}`,\n                    `maxWidth=${maxWidth}`,\n                  ].join('\\n')}\n                </Code>\n              </Card>\n            )}\n\n            <BoundaryElementProvider element={rootElement}>\n              {!hidden && (\n                <Flex direction=\"column\" height=\"fill\">\n                  {children}\n                </Flex>\n              )}\n            </BoundaryElementProvider>\n          </Root>\n        </PaneContext.Provider>\n      </LegacyLayerProvider>\n\n      {divider}\n    </>\n  )\n})\n","import {useContext} from 'react'\nimport {PaneContext} from './PaneContext'\nimport {PaneContextValue} from './types'\n\n/**\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\nexport function usePane(): PaneContextValue {\n  const pane = useContext(PaneContext)\n\n  if (!pane) {\n    throw new Error('Pane: missing context value')\n  }\n\n  return pane\n}\n","import {Card} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const Root = styled(Card)`\n  position: relative;\n  outline: none;\n`\n\nRoot.displayName = 'PaneContent__root'\n","import {BoxOverflow} from '@sanity/ui'\nimport React, {forwardRef} from 'react'\nimport {usePane} from './usePane'\nimport {usePaneLayout} from './usePaneLayout'\nimport {Root} from './PaneContent.styles'\n\ninterface PaneContentProps {\n  as?: React.ElementType | keyof JSX.IntrinsicElements\n  overflow?: BoxOverflow\n  padding?: number | number[]\n}\n\n/**\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\nexport const PaneContent = forwardRef(function PaneContent(\n  props: PaneContentProps & Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'height' | 'ref'>,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {as, children, overflow, padding, ...restProps} = props\n  const {collapsed} = usePane()\n  const {collapsed: layoutCollapsed} = usePaneLayout()\n\n  return (\n    <Root\n      data-testid=\"pane-content\"\n      forwardedAs={as}\n      {...restProps}\n      flex={1}\n      hidden={collapsed}\n      overflow={layoutCollapsed ? undefined : overflow}\n      padding={padding}\n      ref={ref}\n      tone=\"inherit\"\n    >\n      {children}\n    </Root>\n  )\n})\n","import {Card, Layer} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const Root = styled(Layer)`\n  position: sticky;\n  bottom: 0;\n\n  &:before {\n    content: '';\n    display: block;\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: -1px;\n    border-bottom: 1px solid var(--card-shadow-outline-color);\n  }\n`\n\nexport const RootCard = styled(Card)`\n  padding-bottom: env(safe-area-inset-bottom);\n`\n","import {Box} from '@sanity/ui'\nimport React, {forwardRef} from 'react'\nimport {LegacyLayerProvider} from '../../../components/transitional'\nimport {usePane} from './usePane'\nimport {Root, RootCard} from './PaneFooter.styles'\n\ninterface PaneFooterProps {\n  children?: React.ReactNode\n  padding?: number | number[]\n}\n\n/**\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\nexport const PaneFooter = forwardRef(function PaneFooter(\n  props: PaneFooterProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {children, padding} = props\n  const {collapsed} = usePane()\n\n  return (\n    <LegacyLayerProvider zOffset=\"paneFooter\">\n      <Root data-testid=\"pane-footer\" hidden={collapsed} ref={ref}>\n        <RootCard tone=\"inherit\">\n          <Box padding={padding}>{children}</Box>\n        </RootCard>\n      </Root>\n    </LegacyLayerProvider>\n  )\n})\n","import {Box, Flex, Layer, rgba, TextSkeleton, Text, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const Root = styled(Layer)`\n  line-height: 0;\n  position: sticky;\n  top: 0;\n\n  &:not([data-collapsed]):after {\n    content: '';\n    display: block;\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: -1px;\n    border-bottom: 1px solid var(--card-shadow-outline-color);\n  }\n`\n\nexport const Layout = styled(Flex)`\n  transform-origin: calc(51px / 2);\n\n  [data-collapsed] > div > & {\n    transform: rotate(90deg);\n  }\n`\n\nexport const TitleBox = styled(Box)``\n\nexport const TitleTextSkeleton = styled(TextSkeleton)`\n  width: 66%;\n  max-width: 175px;\n`\n\nexport const TitleText = styled(Text)`\n  cursor: default;\n  outline: none;\n`\n\nconst TABS_SCROLL_PADDING = 100\n\nexport const TabsBox = styled(Box)(({theme}: {theme: Theme}) => {\n  const {color, space} = theme.sanity\n\n  return css`\n    margin: -${space[2]}px 0 -${space[2]}px -${space[3]}px;\n    overflow: hidden;\n    position: relative;\n\n    & > div {\n      white-space: nowrap;\n      padding: ${space[2]}px 0 calc(${TABS_SCROLL_PADDING}px + ${space[2]}px) ${space[3]}px;\n      margin-bottom: ${0 - TABS_SCROLL_PADDING}px;\n      overflow: auto;\n\n      /* right padding */\n      & > div:after {\n        content: '';\n        display: inline-block;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        width: ${space[3]}px;\n        height: 1px;\n      }\n    }\n\n    /* Gradient that makes it look like tabs disappear into nothing (looks nicer) */\n    &:after {\n      content: '';\n      display: block;\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      background: linear-gradient(to right, ${rgba(color.base.bg, 0)}, var(--card-bg-color));\n      width: ${space[3]}px;\n      pointer-events: none;\n    }\n  `\n})\n","import {useElementRect, Box, Card, Flex, LayerProvider} from '@sanity/ui'\nimport React, {useMemo, useCallback, forwardRef} from 'react'\nimport {LegacyLayerProvider} from '../../../components/transitional'\nimport {usePane} from './usePane'\nimport {Layout, Root, TabsBox, TitleBox, TitleTextSkeleton, TitleText} from './PaneHeader.styles'\n\ninterface PaneHeaderProps {\n  actions?: React.ReactNode\n  backButton?: React.ReactNode\n  loading?: boolean\n  subActions?: React.ReactNode\n  tabs?: React.ReactNode\n  title: React.ReactNode\n}\n\n/**\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\nexport const PaneHeader = forwardRef(function PaneHeader(\n  props: PaneHeaderProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {actions, backButton, loading, subActions, tabs, title} = props\n  const {collapse, collapsed, expand, rootElement: paneElement} = usePane()\n  const paneRect = useElementRect(paneElement || null)\n\n  const layoutStyle = useMemo(\n    () => ({\n      width: collapsed ? paneRect?.height || window.innerHeight : undefined,\n    }),\n    [collapsed, paneRect]\n  )\n\n  const handleTitleClick = useCallback(() => {\n    if (collapsed) return\n    collapse()\n  }, [collapse, collapsed])\n\n  const handleLayoutClick = useCallback(() => {\n    if (!collapsed) return\n    expand()\n  }, [collapsed, expand])\n\n  return (\n    <LayerProvider zOffset={100}>\n      <Root data-collapsed={collapsed ? '' : undefined} data-testid=\"pane-header\" ref={ref}>\n        <LegacyLayerProvider zOffset=\"paneHeader\">\n          <Card data-collapsed={collapsed ? '' : undefined} tone=\"inherit\">\n            <Layout\n              onClick={handleLayoutClick}\n              padding={2}\n              paddingBottom={tabs || subActions ? 1 : 2}\n              sizing=\"border\"\n              style={layoutStyle}\n            >\n              {backButton}\n\n              <TitleBox\n                flex={1}\n                onClick={handleTitleClick}\n                paddingY={3}\n                paddingLeft={backButton ? 1 : 3}\n              >\n                {loading && <TitleTextSkeleton animated radius={1} />}\n                {!loading && (\n                  <TitleText tabIndex={0} textOverflow=\"ellipsis\" weight=\"semibold\">\n                    {title}\n                  </TitleText>\n                )}\n              </TitleBox>\n\n              {actions && (\n                <Box hidden={collapsed} paddingLeft={1}>\n                  <LegacyLayerProvider zOffset=\"paneHeader\">{actions}</LegacyLayerProvider>\n                </Box>\n              )}\n            </Layout>\n\n            {(tabs || subActions) && (\n              <Flex\n                align=\"center\"\n                hidden={collapsed}\n                paddingTop={0}\n                paddingRight={2}\n                paddingBottom={2}\n                paddingLeft={3}\n                overflow=\"auto\"\n              >\n                <TabsBox flex={1} marginRight={subActions ? 3 : 0}>\n                  <div>{tabs}</div>\n                </TabsBox>\n\n                {subActions && <Box>{subActions}</Box>}\n              </Flex>\n            )}\n          </Card>\n        </LegacyLayerProvider>\n      </Root>\n    </LayerProvider>\n  )\n})\n","import {Card} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const Root = styled(Card)`\n  transition: opacity 200ms;\n  position: relative;\n  z-index: 1;\n  padding-left: env(safe-area-inset-left);\n  padding-right: env(safe-area-inset-right);\n  opacity: 0;\n\n  &:not([hidden]) {\n    display: flex;\n  }\n\n  &:not([data-collapsed]) {\n    overflow: auto;\n  }\n\n  &[data-mounted] {\n    opacity: 1;\n  }\n\n  &[data-resizing] {\n    pointer-events: none;\n  }\n`\n","import {PANE_DEFAULT_MIN_WIDTH} from '../constants'\nimport {PaneConfigOpts, PaneResizeCache} from '../types'\n\nexport function _calcPaneResize(\n  cache: PaneResizeCache,\n  left: PaneConfigOpts,\n  right: PaneConfigOpts,\n  deltaX: number\n): {leftFlex: number; leftW: number; rightFlex: number; rightW: number} {\n  const sum = {\n    flex: cache.left.flex + cache.right.flex,\n    width: cache.left.width + cache.right.width,\n  }\n\n  const leftMinWidth = left.minWidth ?? PANE_DEFAULT_MIN_WIDTH\n  const rightMinWidth = right.minWidth ?? PANE_DEFAULT_MIN_WIDTH\n\n  const leftMaxWidth = Math.min(left.maxWidth || Infinity, sum.width - rightMinWidth)\n  const rightMaxWidth = Math.min(right.maxWidth || Infinity, sum.width - leftMinWidth)\n\n  // Get min. delta X\n  let minDeltaX = leftMinWidth - cache.left.width\n  const rightMinDeltaX = cache.right.width - rightMaxWidth\n  if (minDeltaX < rightMinDeltaX) {\n    minDeltaX = rightMinDeltaX\n  }\n\n  // Get max. delta X\n  let maxDeltaX = cache.right.width - rightMinWidth\n  const leftMaxDeltaX = leftMaxWidth - cache.left.width\n  if (maxDeltaX > leftMaxDeltaX) {\n    maxDeltaX = leftMaxDeltaX\n  }\n\n  const _deltaX = Math.min(Math.max(deltaX, minDeltaX), maxDeltaX)\n\n  const leftW = cache.left.width + _deltaX\n  const rightW = cache.right.width - _deltaX\n\n  const leftFlex = (leftW / sum.width) * sum.flex\n  const rightFlex = (rightW / sum.width) * sum.flex\n\n  return {leftFlex, leftW, rightFlex, rightW}\n}\n","/**\n * @internal\n */\nexport function _getDOMPath(rootElement: HTMLElement, el: HTMLElement): number[] {\n  const path: number[] = []\n\n  let e = el\n\n  while (e !== rootElement) {\n    const parentElement = e.parentElement\n\n    if (!parentElement) return path\n\n    const children = Array.from(parentElement.childNodes)\n    const index = children.indexOf(e)\n\n    path.unshift(index)\n\n    if (parentElement === rootElement) {\n      return path\n    }\n\n    e = parentElement\n  }\n\n  return path\n}\n","import {_getDOMPath} from './_getDOMPath'\n\nconst EMPTY_PATH: number[] = []\n\n/**\n * @internal\n */\nexport function _sortElements(rootElement: HTMLElement, elements: HTMLElement[]): void {\n  // Create a map containing the DOM path of each pane element.\n  // The DOM path is relative to the `rootElement`, and is used in the next step for sorting.\n  const map = new WeakMap<HTMLElement, number[]>()\n\n  for (const element of elements) {\n    map.set(element, _getDOMPath(rootElement, element))\n  }\n\n  const _sortByElementPath = (a: HTMLElement, b: HTMLElement) => {\n    const _a = map.get(a) || EMPTY_PATH\n    const _b = map.get(b) || EMPTY_PATH\n\n    const len = Math.max(_a.length, _b.length)\n\n    // Loop until there are different indexes\n    for (let i = 0; i < len; i += 1) {\n      const aIndex = _a[i] || -1\n      const bIndex = _b[i] || -1\n\n      if (aIndex !== bIndex) {\n        return aIndex - bIndex\n      }\n    }\n\n    return 0\n  }\n\n  elements.sort(_sortByElementPath)\n}\n","import {PANE_COLLAPSED_WIDTH, PANE_DEFAULT_MIN_WIDTH} from './constants'\nimport {_calcPaneResize, _sortElements} from './helpers'\nimport {PaneConfigOpts, PaneData, PaneResizeCache, PaneResizeData} from './types'\n\nexport interface PaneLayoutState {\n  expandedElement: HTMLElement | null\n  panes: PaneData[]\n  resizing: boolean\n}\n\nexport type PaneLayoutStateObserver = (state: PaneLayoutState) => void\n\nexport interface PaneLayoutController {\n  collapse: (element: HTMLElement) => void\n  expand: (element: HTMLElement) => void\n  mount: (element: HTMLElement, options: PaneConfigOpts) => () => void\n  resize: (type: 'start' | 'move' | 'end', leftElement: HTMLElement, deltaX: number) => void\n  setRootElement: (nextRootElement: HTMLElement | null) => void\n  setRootWidth: (nextRootWidth: number) => void\n  subscribe: (observer: PaneLayoutStateObserver) => () => void\n}\n\nexport function createPaneLayoutController(): PaneLayoutController {\n  const observers: PaneLayoutStateObserver[] = []\n  const elements: HTMLElement[] = []\n  const optionsMap = new WeakMap<HTMLElement, PaneConfigOpts & {original: PaneConfigOpts}>()\n  const userCollapsedElementSet = new Set<HTMLElement>()\n  const cache: Partial<PaneResizeCache> = {}\n\n  // Mutable internal state\n  let rootElement: HTMLElement | null = null\n  let rootWidth = 0\n  let expandedElement: HTMLElement | null = null\n  let resizeDataMap = new Map<HTMLElement, PaneResizeData>()\n  let resizing = false\n\n  function collapse(element: HTMLElement) {\n    userCollapsedElementSet.add(element)\n\n    if (expandedElement === element) {\n      expandedElement = null\n    }\n\n    _notifyObservers()\n  }\n\n  function expand(element: HTMLElement) {\n    userCollapsedElementSet.delete(element)\n\n    expandedElement = element\n\n    _notifyObservers()\n  }\n\n  function mount(element: HTMLElement, options: PaneConfigOpts) {\n    optionsMap.set(element, {...options, original: options})\n\n    elements.push(element)\n\n    if (rootElement) {\n      _sortElements(rootElement, elements)\n    }\n\n    expand(element)\n\n    return () => {\n      const idx = elements.indexOf(element)\n\n      if (idx > -1) {\n        elements.splice(idx, 1)\n      }\n\n      optionsMap.delete(element)\n\n      _notifyObservers()\n    }\n  }\n\n  // eslint-disable-next-line complexity\n  function resize(type: 'start' | 'move' | 'end', leftElement: HTMLElement, deltaX: number) {\n    const leftIndex = elements.indexOf(leftElement)\n    const leftOptions = optionsMap.get(leftElement)\n\n    if (!leftOptions) return\n\n    const rightElement = elements[leftIndex + 1]\n    const rightOptions = optionsMap.get(rightElement)\n\n    if (!rightOptions) return\n\n    if (type === 'start') {\n      resizing = true\n\n      cache.left = {\n        element: leftElement,\n        flex: leftOptions.flex || 1,\n        width: leftElement.offsetWidth,\n      }\n\n      cache.right = {\n        element: rightElement,\n        flex: rightOptions.flex || 1,\n        width: rightElement.offsetWidth,\n      }\n\n      _notifyObservers()\n    }\n\n    if (type === 'move' && cache.left && cache.right) {\n      resizeDataMap = new Map<HTMLElement, PaneResizeData>()\n\n      const {leftW, rightW, leftFlex, rightFlex} = _calcPaneResize(\n        cache as PaneResizeCache,\n        leftOptions,\n        rightOptions,\n        deltaX\n      )\n\n      // update resize cache\n      resizeDataMap.set(leftElement, {flex: leftFlex, width: leftW})\n      resizeDataMap.set(rightElement, {flex: rightFlex, width: rightW})\n\n      _notifyObservers()\n    }\n\n    if (type === 'end') {\n      resizing = false\n\n      const leftResizeData = resizeDataMap.get(leftElement)\n      const rightResizeData = resizeDataMap.get(rightElement)\n\n      // Update left options\n      optionsMap.set(leftElement, {\n        ...leftOptions,\n        currentMinWidth: 0,\n        currentMaxWidth: leftOptions.maxWidth ?? Infinity,\n        flex: leftResizeData?.flex ?? leftOptions.flex,\n      })\n\n      // Update right options\n      optionsMap.set(rightElement, {\n        ...rightOptions,\n        currentMinWidth: 0,\n        currentMaxWidth: leftOptions.maxWidth ?? Infinity,\n        flex: rightResizeData?.flex ?? rightOptions.flex,\n      })\n\n      // Reset resize data map\n      resizeDataMap = new Map()\n\n      // Reset cache\n      delete cache.left\n      delete cache.right\n\n      _notifyObservers()\n    }\n  }\n\n  function setRootElement(nextRootElement: HTMLElement | null) {\n    rootElement = nextRootElement\n  }\n\n  function setRootWidth(nextRootWidth: number) {\n    rootWidth = nextRootWidth\n    _notifyObservers()\n  }\n\n  function subscribe(observer: PaneLayoutStateObserver) {\n    observers.push(observer)\n\n    return () => {\n      const idx = observers.push(observer)\n\n      if (idx > -1) {\n        observers.splice(idx, 1)\n      }\n    }\n  }\n\n  return {collapse, expand, mount, resize, setRootElement, setRootWidth, subscribe}\n\n  // eslint-disable-next-line complexity\n  function _notifyObservers() {\n    if (!rootWidth) return\n\n    // Create a reversed array of pane elements, so we can loop over them backwards.\n    // Place the expanded element first (so it has the least chance of being collapsed).\n    const _elements: HTMLElement[] = []\n    for (const element of elements) {\n      if (element !== expandedElement) {\n        _elements.unshift(element)\n      }\n    }\n    if (expandedElement) {\n      _elements.unshift(expandedElement)\n    }\n\n    const dataMap = new WeakMap<HTMLElement, PaneData>()\n    const len = _elements.length\n    const lastElement = _elements[0]\n    const collapsedWidth = (len - 1) * PANE_COLLAPSED_WIDTH\n\n    let remaingWidth = rootWidth - collapsedWidth\n\n    for (const element of _elements) {\n      const options = optionsMap.get(element)\n\n      if (!options) {\n        continue\n      }\n\n      const minWidth = options.currentMinWidth || options.minWidth || PANE_DEFAULT_MIN_WIDTH\n      const isLast = element === lastElement\n\n      // A pane is collapsed if:\n      // - itâ€™s explictly collapsed by the user\n      const userCollapsed = userCollapsedElementSet.has(element)\n      // - itâ€™s minimum width is larger than the remaining width\n      const sizeCollapsed = minWidth > remaingWidth\n      // - if the element is not the last (expanded pane)\n      const collapsed = isLast ? false : userCollapsed || sizeCollapsed\n\n      const resizeData = resizeDataMap.get(element)\n\n      // Collect pane data\n      dataMap.set(element, {\n        element: element,\n        collapsed: collapsed,\n        currentMinWidth: resizeData?.width ?? options.currentMinWidth,\n        currentMaxWidth: resizeData?.width ?? options.currentMaxWidth,\n        flex: resizeData?.flex ?? options.flex ?? 1,\n      })\n\n      // Update remaining width\n      if (collapsed) {\n        remaingWidth -= PANE_COLLAPSED_WIDTH\n      } else {\n        remaingWidth -= minWidth - PANE_COLLAPSED_WIDTH\n      }\n    }\n\n    const panes: PaneData[] = []\n\n    for (const element of elements) {\n      const data = dataMap.get(element)\n\n      if (data) panes.push(data)\n    }\n\n    for (const observer of observers) {\n      observer({\n        expandedElement: expandedElement || elements[elements.length - 1] || null,\n        panes,\n        resizing,\n      })\n    }\n  }\n}\n","import {CardProps, useElementRect} from '@sanity/ui'\nimport React, {useMemo, useState, useEffect} from 'react'\nimport {PaneLayoutContext} from './PaneLayoutContext'\nimport {PaneLayoutContextValue} from './types'\nimport {Root} from './PaneLayout.styles'\nimport {createPaneLayoutController, PaneLayoutState} from './paneLayoutController'\n\n/**\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\nexport interface PaneLayoutProps {\n  minWidth?: number\n  onCollapse?: () => void\n  onExpand?: () => void\n}\n\n/**\n * @beta This API will change. DO NOT USE IN PRODUCTION.\n */\nexport function PaneLayout(\n  props: PaneLayoutProps &\n    CardProps &\n    Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'height' | 'ref' | 'wrap'>\n) {\n  const {children, minWidth, onCollapse, onExpand, ...restProps} = props\n  const controller = useMemo(() => createPaneLayoutController(), [])\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n  const rootRect = useElementRect(rootElement)\n  const width = rootRect?.width || 0\n  const collapsed = width === undefined || !minWidth ? undefined : width < minWidth\n  const [state, setState] = useState<PaneLayoutState>({\n    expandedElement: null,\n    panes: [],\n    resizing: false,\n  })\n\n  // Set root element\n  useEffect(() => controller.setRootElement(rootElement), [controller, rootElement])\n\n  // Set root size\n  useEffect(() => controller.setRootWidth(width), [controller, width])\n\n  // Subscribe to state changes\n  useEffect(() => controller.subscribe(setState), [controller])\n\n  // Call the `onCollapse` and `onExpand` callbacks as the `collapsed` boolean changes\n  useEffect(() => {\n    if (collapsed === undefined) return\n    if (collapsed && onCollapse) onCollapse()\n    if (!collapsed && onExpand) onExpand()\n  }, [collapsed, onCollapse, onExpand])\n\n  // This is the context value that gives each pane the information they need\n  const paneLayout: PaneLayoutContextValue = useMemo(\n    () => ({\n      collapse: controller.collapse,\n      collapsed,\n      expand: controller.expand,\n      expandedElement: state.expandedElement,\n      mount: controller.mount,\n      panes: state.panes,\n      resize: controller.resize,\n      resizing: state.resizing,\n    }),\n    [collapsed, controller, state.expandedElement, state.panes, state.resizing]\n  )\n\n  return (\n    <PaneLayoutContext.Provider value={paneLayout}>\n      <Root\n        data-ui=\"PaneLayout\"\n        {...restProps}\n        data-collapsed={collapsed ? '' : undefined}\n        // The `data-resizing` attribute is used to improve cursor behavior\n        data-resizing={state.resizing ? '' : undefined}\n        // The `data-mounted` attribute is used to fade in the layout and prevent flash of\n        // non-collapsed panes\n        data-mounted={width ? '' : undefined}\n        ref={setRootElement}\n      >\n        {children}\n      </Root>\n    </PaneLayoutContext.Provider>\n  )\n}\n","import {Button} from '@sanity/ui'\nimport React, {forwardRef, useMemo} from 'react'\nimport {IntentLink} from '../../router'\nimport {PaneMenuItem} from '../types'\n\ntype RouterIntent = NonNullable<PaneMenuItem['intent']>\n\nexport const IntentButton = forwardRef(function IntentButton(\n  props: {intent: RouterIntent} & Omit<React.ComponentProps<typeof Button>, 'as' | 'href' | 'type'>,\n  ref: React.ForwardedRef<HTMLAnchorElement>\n) {\n  const {intent, ...restProps} = props\n\n  const Link = useMemo(\n    () =>\n      // eslint-disable-next-line @typescript-eslint/no-shadow\n      forwardRef(function Link(\n        linkProps: {children: React.ReactNode},\n        linkRef: React.ForwardedRef<HTMLAnchorElement>\n      ) {\n        return (\n          <IntentLink {...linkProps} intent={intent.type} params={intent.params} ref={linkRef} />\n        )\n      }),\n    [intent]\n  )\n\n  return props.disabled ? (\n    <Button {...props} as=\"a\" role=\"link\" aria-disabled=\"true\" />\n  ) : (\n    <Button\n      {...restProps}\n      as={Link}\n      data-as=\"a\"\n      ref={ref as React.ForwardedRef<HTMLButtonElement>}\n    />\n  )\n})\n","import {Tooltip, Text, Box} from '@sanity/ui'\nimport React from 'react'\nimport {InsufficientPermissionsMessage} from '../../../components/InsufficientPermissionsMessage'\nimport {useCurrentUser} from '../../../datastores'\n\ninterface InsufficientPermissionsMessageTooltipProps {\n  reveal: boolean\n  loading: boolean\n  children: React.ReactNode\n}\n\nexport function InsufficientPermissionsMessageTooltip({\n  reveal,\n  loading,\n  children,\n}: InsufficientPermissionsMessageTooltipProps) {\n  const currentUser = useCurrentUser()\n\n  if (!reveal) {\n    return <>{children}</>\n  }\n\n  return (\n    <Tooltip\n      content={\n        loading ? (\n          <Box padding={2}>\n            <Text>Loadingâ€¦</Text>\n          </Box>\n        ) : (\n          <InsufficientPermissionsMessage currentUser={currentUser} />\n        )\n      }\n      portal\n    >\n      {/* this wrapping div is to allow mouse events */}\n      {/* while the child element is disabled */}\n      <div>{children}</div>\n    </Tooltip>\n  )\n}\n","import {ComposeIcon} from '@sanity/icons'\nimport React, {useMemo, forwardRef} from 'react'\nimport {Box, Button, Label, Menu, MenuButton, MenuItem, PopoverProps} from '@sanity/ui'\nimport {Schema} from '@sanity/types'\nimport {IntentButton} from '../IntentButton'\nimport {useTemplatePermissions, TemplatePermissionsResult} from '../../../datastores'\nimport {IntentLink} from '../../../router'\nimport {Template, InitialValueTemplateItem} from '../../../templates'\nimport {useSchema, useTemplates} from '../../../hooks'\nimport {InsufficientPermissionsMessageTooltip} from './InsufficientPermissionsMessageTooltip'\n\nexport type PaneHeaderIntentProps = React.ComponentProps<typeof IntentButton>['intent']\n\nconst POPOVER_PROPS: PopoverProps = {\n  constrainSize: true,\n  placement: 'bottom',\n  portal: true,\n}\n\nconst getIntent = (\n  schema: Schema,\n  templates: Template[],\n  item: InitialValueTemplateItem\n): PaneHeaderIntentProps | null => {\n  const typeName = templates.find((t) => t.id === item.templateId)?.schemaType\n  if (!typeName) return null\n\n  const baseParams = {\n    template: item.templateId,\n    type: typeName,\n    id: item.initialDocumentId,\n  }\n\n  return {\n    type: 'create',\n    params: item.parameters ? [baseParams, item.parameters] : baseParams,\n  }\n}\n\ninterface PaneHeaderCreateButtonProps {\n  templateItems: InitialValueTemplateItem[]\n}\n\nexport function PaneHeaderCreateButton({templateItems}: PaneHeaderCreateButtonProps) {\n  const schema = useSchema()\n  const templates = useTemplates()\n\n  const [templatePermissions, isTemplatePermissionsLoading] = useTemplatePermissions({\n    templateItems,\n  })\n\n  const nothingGranted = useMemo(() => {\n    return (\n      !isTemplatePermissionsLoading &&\n      templatePermissions?.every((permission) => !permission.granted)\n    )\n  }, [isTemplatePermissionsLoading, templatePermissions])\n\n  const permissionsById = useMemo(() => {\n    if (!templatePermissions) return {}\n    return templatePermissions.reduce<Record<string, TemplatePermissionsResult | undefined>>(\n      (acc, permission) => {\n        acc[permission.id] = permission\n        return acc\n      },\n      {}\n    )\n  }, [templatePermissions])\n\n  if (nothingGranted) {\n    return (\n      <InsufficientPermissionsMessageTooltip reveal loading={isTemplatePermissionsLoading}>\n        <Button\n          aria-label=\"Insufficient permissions\"\n          icon={ComposeIcon}\n          mode=\"bleed\"\n          disabled\n          data-testid=\"action-intent-button\"\n        />\n      </InsufficientPermissionsMessageTooltip>\n    )\n  }\n\n  if (templateItems.length === 1) {\n    const firstItem = templateItems[0]\n    const permissions = permissionsById[firstItem.id]\n    const disabled = !permissions?.granted\n    const intent = getIntent(schema, templates, firstItem)\n    if (!intent) return null\n\n    return (\n      <InsufficientPermissionsMessageTooltip\n        reveal={disabled}\n        loading={isTemplatePermissionsLoading}\n      >\n        <IntentButton\n          aria-label={firstItem.title}\n          icon={firstItem.icon || ComposeIcon}\n          intent={intent}\n          mode=\"bleed\"\n          disabled={disabled}\n          data-testid=\"action-intent-button\"\n        />\n      </InsufficientPermissionsMessageTooltip>\n    )\n  }\n\n  return (\n    <MenuButton\n      button={\n        <Button\n          icon={ComposeIcon}\n          mode=\"bleed\"\n          padding={3}\n          data-testid=\"multi-action-intent-button\"\n        />\n      }\n      id=\"create-menu\"\n      menu={\n        <Menu>\n          <Box paddingX={3} paddingTop={3} paddingBottom={2}>\n            <Label muted>Create</Label>\n          </Box>\n\n          {templateItems.map((item, itemIndex) => {\n            const permissions = permissionsById[item.id]\n            const disabled = !permissions?.granted\n            const intent = getIntent(schema, templates, item)\n            const template = templates.find((t) => t.id === item.templateId)\n            if (!template || !intent) return null\n\n            const Link = forwardRef((linkProps, linkRef: React.ForwardedRef<never>) =>\n              disabled ? (\n                <button type=\"button\" disabled {...linkProps} ref={linkRef} />\n              ) : (\n                <IntentLink\n                  {...linkProps}\n                  intent={intent.type}\n                  params={intent.params}\n                  ref={linkRef}\n                />\n              )\n            )\n\n            Link.displayName = 'Link'\n\n            return (\n              <InsufficientPermissionsMessageTooltip\n                key={item.id}\n                reveal={disabled}\n                loading={isTemplatePermissionsLoading}\n              >\n                <MenuItem\n                  as={Link}\n                  data-as={disabled ? 'button' : 'a'}\n                  text={item.title || template.title}\n                  aria-label={disabled ? 'Insufficient permissions' : item.title || template.title}\n                  disabled={disabled}\n                  data-testid={`action-intent-button-${itemIndex}`}\n                />\n              </InsufficientPermissionsMessageTooltip>\n            )\n          })}\n        </Menu>\n      }\n      popover={POPOVER_PROPS}\n    />\n  )\n}\n","import {UnknownIcon} from '@sanity/icons'\nimport {Box, Button, Inline, Text, Tooltip} from '@sanity/ui'\nimport {partition, uniqBy} from 'lodash'\nimport React, {memo, useCallback, useMemo} from 'react'\nimport {useTemplates} from '../../../hooks'\nimport {InitialValueTemplateItem} from '../../../templates'\nimport {DeskToolPaneActionHandler, PaneMenuItem, PaneMenuItemGroup} from '../../types'\nimport {IntentButton} from '../IntentButton'\nimport {PaneContextMenuButton} from '../pane/PaneContextMenuButton'\nimport {PaneHeaderCreateButton} from './PaneHeaderCreateButton'\n\n// to preserve memory references\nconst emptyArray: never[] = []\nconst emptyObject = {}\n\nfunction isNonNullable<T>(value: T): value is NonNullable<T> {\n  return value !== null && value !== undefined\n}\n\n/**\n * hashes an object to a string where the order of the keys don't matter\n */\nconst hashObject = (value: unknown) => {\n  const sortObject = (v: unknown): unknown => {\n    if (typeof v !== 'object' || !v) return v\n    if (Array.isArray(v)) return v.map(sortObject)\n    return Object.entries(v).sort(([keyA], [keyB]) => keyA.localeCompare(keyB, 'en'))\n  }\n\n  const normalize = (v: unknown) => JSON.parse(JSON.stringify(v))\n\n  return JSON.stringify(sortObject(normalize(value)))\n}\n\ninterface PaneHeaderActionsProps {\n  initialValueTemplateItems?: InitialValueTemplateItem[]\n  menuItems?: PaneMenuItem[]\n  menuItemGroups?: PaneMenuItemGroup[]\n  actionHandlers?: Record<string, DeskToolPaneActionHandler>\n}\n\nexport const PaneHeaderActions = memo(\n  ({\n    initialValueTemplateItems: initialValueTemplateItemsFromStructure = emptyArray,\n    menuItems = emptyArray,\n    menuItemGroups = emptyArray,\n    actionHandlers = emptyObject,\n  }: PaneHeaderActionsProps) => {\n    const templates = useTemplates()\n\n    const handleAction = useCallback(\n      (item: PaneMenuItem) => {\n        if (typeof item.action === 'string' && !(item.action in actionHandlers)) {\n          console.warn('No handler for action:', item.action)\n          return false\n        }\n\n        const handler =\n          // eslint-disable-next-line no-nested-ternary\n          typeof item.action === 'function'\n            ? item.action\n            : typeof item.action === 'string'\n            ? actionHandlers[item.action]\n            : null\n\n        if (handler) {\n          handler(item.params as Record<string, string>)\n          return true\n        }\n\n        return false\n      },\n      [actionHandlers]\n    )\n\n    const [actionMenuItems, contextMenuItems] = useMemo(() => {\n      const nonCreateMenuItem = menuItems\n        // remove items with `create` intents because those will get combined\n        // into one action button later\n        .filter((item) => item.intent?.type !== 'create')\n\n      return partition(nonCreateMenuItem, (item) => item.showAsAction)\n    }, [menuItems])\n\n    const initialValueTemplateItemFromMenuItems = useMemo(() => {\n      return menuItems\n        .map((item, menuItemIndex) => {\n          if (item.intent?.type !== 'create') return null\n\n          const {params} = item.intent\n          if (!params) return null\n\n          const intentParams = Array.isArray(params) ? params[0] : params\n          const templateParams = Array.isArray(params) ? params[1] : undefined\n\n          // fallback to the schema type name as the template ID.\n          // by default, the initial template values are populated from every\n          // document type in the schema\n          const templateId = intentParams.template || intentParams.type\n          if (!templateId) return null\n\n          // eslint-disable-next-line max-nested-callbacks\n          const template = templates.find((t) => t.id === templateId)\n          // the template doesn't exist then the action might be disabled\n          if (!template) return null\n\n          const initialDocumentId = intentParams.id\n\n          return {\n            item,\n            template,\n            templateParams,\n            menuItemIndex,\n            initialDocumentId,\n          }\n        })\n        .filter(isNonNullable)\n        .map(({initialDocumentId, item, template, menuItemIndex, templateParams}) => {\n          const initialValueTemplateItem: InitialValueTemplateItem = {\n            id: `menuItem${menuItemIndex}`,\n            initialDocumentId,\n            templateId: template.id,\n            type: 'initialValueTemplateItem',\n            title: item.title || template.title,\n            icon: item.icon as InitialValueTemplateItem['icon'],\n            description: template.description,\n            parameters: templateParams,\n            schemaType: template.schemaType,\n          }\n\n          return initialValueTemplateItem\n        })\n    }, [menuItems, templates])\n\n    const combinedInitialValueTemplates = useMemo(() => {\n      // this de-dupes create actions\n      return uniqBy(\n        [...initialValueTemplateItemFromMenuItems, ...initialValueTemplateItemsFromStructure],\n        (item) => hashObject([item.initialDocumentId, item.templateId, item.parameters])\n      )\n    }, [initialValueTemplateItemFromMenuItems, initialValueTemplateItemsFromStructure])\n\n    return (\n      <Inline space={1}>\n        {[\n          Boolean(combinedInitialValueTemplates.length) && (\n            <PaneHeaderCreateButton\n              key=\"$CreateMenuButton\"\n              templateItems={combinedInitialValueTemplates}\n            />\n          ),\n          //\n          ...actionMenuItems.map((actionItem, actionIndex) => {\n            return (\n              <Tooltip\n                content={\n                  <Box padding={2}>\n                    <Text size={1}>{actionItem.title}</Text>\n                  </Box>\n                }\n                // eslint-disable-next-line react/no-array-index-key\n                key={`${actionIndex}-${actionItem.title}`}\n                placement=\"bottom\"\n              >\n                {actionItem.intent ? (\n                  <IntentButton\n                    intent={actionItem.intent}\n                    aria-label={actionItem.title}\n                    icon={actionItem.icon || UnknownIcon}\n                    mode=\"bleed\"\n                  />\n                ) : (\n                  <Button\n                    aria-label={actionItem.title}\n                    icon={actionItem.icon || UnknownIcon}\n                    mode=\"bleed\"\n                    // eslint-disable-next-line react/jsx-no-bind\n                    onClick={() => handleAction(actionItem)}\n                  />\n                )}\n              </Tooltip>\n            )\n          }),\n          //\n          Boolean(contextMenuItems.length) && (\n            <PaneContextMenuButton\n              items={contextMenuItems}\n              itemGroups={menuItemGroups}\n              key=\"$ContextMenu\"\n              onAction={handleAction}\n            />\n          ),\n        ]}\n      </Inline>\n    )\n  }\n)\n\nPaneHeaderActions.displayName = 'PaneHeaderActions'\n","import {createContext} from 'react'\nimport {DeskToolContextValue} from './types'\n\nexport const DeskToolContext = createContext<DeskToolContextValue | null>(null)\n","import {SerializePath} from './StructureNodes'\n\nexport class SerializeError extends Error {\n  public readonly path: SerializePath\n  public helpId?: HELP_URL\n\n  constructor(\n    message: string,\n    parentPath: SerializePath,\n    pathSegment: string | number | undefined,\n    hint?: string\n  ) {\n    super(message)\n    const segment = typeof pathSegment === 'undefined' ? '<unknown>' : `${pathSegment}`\n    this.path = (parentPath || []).concat(hint ? `${segment} (${hint})` : segment)\n  }\n\n  withHelpUrl(id: HELP_URL): SerializeError {\n    this.helpId = id\n    return this\n  }\n}\n\nexport enum HELP_URL {\n  ID_REQUIRED = 'structure-node-id-required',\n  TITLE_REQUIRED = 'structure-title-required',\n  FILTER_REQUIRED = 'structure-filter-required',\n  INVALID_LIST_ITEM = 'structure-invalid-list-item',\n  COMPONENT_REQUIRED = 'structure-view-component-required',\n  DOCUMENT_ID_REQUIRED = 'structure-document-id-required',\n  DOCUMENT_TYPE_REQUIRED = 'structure-document-type-required',\n  SCHEMA_TYPE_REQUIRED = 'structure-schema-type-required',\n  SCHEMA_TYPE_NOT_FOUND = 'structure-schema-type-not-found',\n  LIST_ITEMS_MUST_BE_ARRAY = 'structure-list-items-must-be-array',\n  QUERY_PROVIDED_FOR_FILTER = 'structure-query-provided-for-filter',\n  ACTION_OR_INTENT_REQUIRED = 'structure-action-or-intent-required',\n  LIST_ITEM_IDS_MUST_BE_UNIQUE = 'structure-list-item-ids-must-be-unique',\n  ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE = 'structure-action-and-intent-mutually-exclusive',\n}\n","import {SchemaType, SortOrderingItem} from '@sanity/types'\n\nconst IMPLICIT_FIELDS = ['_id', '_type', '_createdAt', '_updatedAt', '_rev']\n\n// Takes a path array and a schema type and builds a GROQ join every time it enters a reference field\nfunction joinReferences(schemaType: SchemaType, path: string[]): string {\n  const [head, ...tail] = path\n\n  if (!('fields' in schemaType)) {\n    return ''\n  }\n\n  const schemaField = schemaType.fields.find((field) => field.name === head)\n  if (!schemaField) {\n    if (!IMPLICIT_FIELDS.includes(head)) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        'The current ordering config targeted the nonexistent field \"%s\" on schema type \"%s\". It should be one of %o',\n        head,\n        schemaType.name,\n        schemaType.fields.map((field) => field.name)\n      )\n    }\n    return ''\n  }\n\n  if ('to' in schemaField.type && schemaField.type.name === 'reference') {\n    const refTypes = schemaField.type.to\n    return `${head}->{${refTypes.map((refType) => joinReferences(refType, tail)).join(',')}}`\n  }\n\n  const tailFields = tail.length > 0 && joinReferences(schemaField.type, tail)\n  const tailWrapper = tailFields ? `{${tailFields}}` : ''\n  return tail.length > 0 ? `${head}${tailWrapper}` : head\n}\n\nexport function getExtendedProjection(schemaType: SchemaType, orderBy: SortOrderingItem[]): string {\n  return orderBy.map((ordering) => joinReferences(schemaType, ordering.field.split('.'))).join(', ')\n}\n","import {SortOrdering} from '@sanity/types'\n\nexport const ORDER_BY_UPDATED_AT: SortOrdering = {\n  title: 'Last edited',\n  name: 'lastEditedDesc',\n  by: [{field: '_updatedAt', direction: 'desc'}],\n}\n\nexport const ORDER_BY_CREATED_AT: SortOrdering = {\n  title: 'Created',\n  name: 'lastCreatedDesc',\n  by: [{field: '_createdAt', direction: 'desc'}],\n}\n\nexport const DEFAULT_SELECTED_ORDERING_OPTION = ORDER_BY_UPDATED_AT\n\nexport const DEFAULT_ORDERING_OPTIONS: SortOrdering[] = [\n  ORDER_BY_UPDATED_AT, // _updatedAt\n  ORDER_BY_CREATED_AT, // _createdAt\n]\n","import {SchemaType, SortOrdering, SortOrderingItem} from '@sanity/types'\nimport {SortIcon} from '@sanity/icons'\nimport {getExtendedProjection} from './util/getExtendedProjection'\nimport {Intent} from './Intent'\nimport {DEFAULT_ORDERING_OPTIONS} from './Sort'\nimport {SerializeOptions, Serializable, SerializePath} from './StructureNodes'\nimport {SerializeError, HELP_URL} from './SerializeError'\nimport {StructureContext} from './types'\n\nexport function maybeSerializeMenuItem(\n  item: MenuItem | MenuItemBuilder,\n  index: number,\n  path: SerializePath\n): MenuItem {\n  return item instanceof MenuItemBuilder ? item.serialize({path, index}) : item\n}\n\nexport type MenuItemActionType =\n  | string\n  | ((params: Record<string, string> | undefined, scope?: any) => void)\n\nexport type MenuItemParamsType = Record<string, string | unknown | undefined>\n\nexport interface MenuItem {\n  title: string\n  action?: MenuItemActionType\n  intent?: Intent\n  group?: string\n  // TODO: align these with TemplateResponse['icon']\n  icon?: React.ComponentType | React.ReactNode\n  params?: MenuItemParamsType\n  showAsAction?: boolean\n}\n\nexport type PartialMenuItem = Partial<MenuItem>\n\nexport class MenuItemBuilder implements Serializable<MenuItem> {\n  protected spec: PartialMenuItem\n\n  constructor(protected _context: StructureContext, spec?: MenuItem) {\n    this.spec = spec ? spec : {}\n  }\n\n  action(action: MenuItemActionType): MenuItemBuilder {\n    return this.clone({action})\n  }\n\n  getAction(): PartialMenuItem['action'] {\n    return this.spec.action\n  }\n\n  intent(intent: Intent): MenuItemBuilder {\n    return this.clone({intent})\n  }\n\n  getIntent(): PartialMenuItem['intent'] {\n    return this.spec.intent\n  }\n\n  title(title: string): MenuItemBuilder {\n    return this.clone({title})\n  }\n\n  getTitle(): string | undefined {\n    return this.spec.title\n  }\n\n  group(group: string): MenuItemBuilder {\n    return this.clone({group})\n  }\n\n  getGroup(): PartialMenuItem['group'] {\n    return this.spec.group\n  }\n\n  icon(icon: React.ComponentType | React.ReactNode): MenuItemBuilder {\n    return this.clone({icon})\n  }\n\n  getIcon(): PartialMenuItem['icon'] {\n    return this.spec.icon\n  }\n\n  params(params: MenuItemParamsType): MenuItemBuilder {\n    return this.clone({params})\n  }\n\n  getParams(): PartialMenuItem['params'] {\n    return this.spec.params\n  }\n\n  showAsAction(showAsAction = true): MenuItemBuilder {\n    return this.clone({showAsAction: Boolean(showAsAction)})\n  }\n\n  getShowAsAction(): PartialMenuItem['showAsAction'] {\n    return this.spec.showAsAction\n  }\n\n  serialize(options: SerializeOptions = {path: []}): MenuItem {\n    const {title, action, intent} = this.spec\n    if (!title) {\n      const hint = typeof action === 'string' ? `action: \"${action}\"` : undefined\n      throw new SerializeError(\n        '`title` is required for menu item',\n        options.path,\n        options.index,\n        hint\n      ).withHelpUrl(HELP_URL.TITLE_REQUIRED)\n    }\n\n    if (!action && !intent) {\n      throw new SerializeError(\n        `\\`action\\` or \\`intent\\` required for menu item with title ${this.spec.title}`,\n        options.path,\n        options.index,\n        `\"${title}\"`\n      ).withHelpUrl(HELP_URL.ACTION_OR_INTENT_REQUIRED)\n    }\n\n    if (intent && action) {\n      throw new SerializeError(\n        'cannot set both `action` AND `intent`',\n        options.path,\n        options.index,\n        `\"${title}\"`\n      ).withHelpUrl(HELP_URL.ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE)\n    }\n\n    return {...this.spec, title}\n  }\n\n  clone(withSpec?: PartialMenuItem): MenuItemBuilder {\n    const builder = new MenuItemBuilder(this._context)\n    builder.spec = {...this.spec, ...(withSpec || {})}\n    return builder\n  }\n}\n\nexport interface SortMenuItem extends MenuItem {\n  params: {\n    by: SortOrderingItem[]\n  }\n}\n\nexport function getOrderingMenuItem(\n  context: StructureContext,\n  ordering: SortOrdering,\n  extendedProjection?: string\n): MenuItemBuilder {\n  return new MenuItemBuilder(context)\n    .group('sorting')\n    .title(`Sort by ${ordering.title}`)\n    .icon(SortIcon)\n    .action('setSortOrder')\n    .params({by: ordering.by, extendedProjection})\n}\n\nexport function getOrderingMenuItemsForSchemaType(\n  context: StructureContext,\n  typeName: SchemaType | string\n): MenuItemBuilder[] {\n  const {schema} = context\n  const type = typeof typeName === 'string' ? schema.get(typeName) : typeName\n  if (!type || !('orderings' in type)) {\n    return []\n  }\n\n  return (\n    type.orderings ? type.orderings.concat(DEFAULT_ORDERING_OPTIONS) : DEFAULT_ORDERING_OPTIONS\n  ).map((ordering: SortOrdering) =>\n    getOrderingMenuItem(context, ordering, getExtendedProjection(type, ordering.by))\n  )\n}\n","import {SerializeOptions, Serializable, SerializePath} from './StructureNodes'\nimport {SerializeError, HELP_URL} from './SerializeError'\nimport {StructureContext} from './types'\n\nexport function maybeSerializeMenuItemGroup(\n  item: MenuItemGroup | MenuItemGroupBuilder,\n  index: number,\n  path: SerializePath\n): MenuItemGroup {\n  return item instanceof MenuItemGroupBuilder ? item.serialize({path, index}) : item\n}\n\nexport interface MenuItemGroup {\n  id: string\n  title: string\n}\n\nexport class MenuItemGroupBuilder implements Serializable<MenuItemGroup> {\n  protected _id: string\n  protected _title: string\n\n  constructor(protected _context: StructureContext, spec?: MenuItemGroup) {\n    this._id = spec ? spec.id : ''\n    this._title = spec ? spec.title : ''\n  }\n\n  id(id: string): MenuItemGroupBuilder {\n    return new MenuItemGroupBuilder(this._context, {id, title: this._title})\n  }\n\n  getId(): string {\n    return this._id\n  }\n\n  title(title: string): MenuItemGroupBuilder {\n    return new MenuItemGroupBuilder(this._context, {id: this._id, title})\n  }\n\n  getTitle(): string {\n    return this._title\n  }\n\n  serialize(options: SerializeOptions = {path: []}): MenuItemGroup {\n    const {_id, _title} = this\n    if (!_id) {\n      throw new SerializeError(\n        '`id` is required for a menu item group',\n        options.path,\n        options.index,\n        _title\n      ).withHelpUrl(HELP_URL.ID_REQUIRED)\n    }\n\n    if (!_title) {\n      throw new SerializeError(\n        '`title` is required for a menu item group',\n        options.path,\n        _id\n      ).withHelpUrl(HELP_URL.TITLE_REQUIRED)\n    }\n\n    return {\n      id: _id,\n      title: _title,\n    }\n  }\n}\n","import {SerializeError} from '../SerializeError'\nimport {SerializePath} from '../StructureNodes'\n\nconst disallowedPattern = /([^A-Za-z0-9-_.])/\n\nexport function validateId(\n  id: string,\n  parentPath: SerializePath,\n  pathSegment: string | number | undefined\n): string {\n  if (typeof id !== 'string') {\n    throw new SerializeError(\n      `Structure node id must be of type string, got ${typeof id}`,\n      parentPath,\n      pathSegment\n    )\n  }\n\n  const [disallowedChar] = id.match(disallowedPattern) || []\n  if (disallowedChar) {\n    throw new SerializeError(\n      `Structure node id cannot contain character \"${disallowedChar}\"`,\n      parentPath,\n      pathSegment\n    )\n  }\n\n  if (id.startsWith('__edit__')) {\n    throw new SerializeError(\n      `Structure node id cannot start with __edit__`,\n      parentPath,\n      pathSegment\n    )\n  }\n\n  return id\n}\n","import {kebabCase} from 'lodash'\nimport {Serializable, SerializeOptions, SerializePath} from '../StructureNodes'\nimport {HELP_URL, SerializeError} from '../SerializeError'\nimport {validateId} from '../util/validateId'\nimport {ComponentViewBuilder} from './ComponentView'\nimport {FormViewBuilder} from './FormView'\nimport {View} from '../types'\n\nexport interface BaseView {\n  id: string\n  title: string\n  icon?: React.ComponentType | React.ReactNode\n}\n\nexport abstract class GenericViewBuilder<TView extends Partial<BaseView>, ConcreteImpl>\n  implements Serializable<BaseView>\n{\n  protected spec: TView = {} as TView\n\n  id(id: string): ConcreteImpl {\n    return this.clone({id})\n  }\n\n  getId(): TView['id'] {\n    return this.spec.id\n  }\n\n  title(title: string): ConcreteImpl {\n    return this.clone({title, id: this.spec.id || kebabCase(title)})\n  }\n\n  getTitle(): TView['title'] {\n    return this.spec.title\n  }\n\n  icon(icon: React.ComponentType | React.ReactNode): ConcreteImpl {\n    return this.clone({icon})\n  }\n\n  getIcon(): TView['icon'] {\n    return this.spec.icon\n  }\n\n  serialize(options: SerializeOptions = {path: []}): BaseView {\n    const {id, title, icon} = this.spec\n    if (!id) {\n      throw new SerializeError(\n        '`id` is required for view item',\n        options.path,\n        options.index\n      ).withHelpUrl(HELP_URL.ID_REQUIRED)\n    }\n\n    if (!title) {\n      throw new SerializeError(\n        '`title` is required for view item',\n        options.path,\n        options.index\n      ).withHelpUrl(HELP_URL.TITLE_REQUIRED)\n    }\n\n    return {\n      id: validateId(id, options.path, options.index),\n      title,\n      icon,\n    }\n  }\n\n  abstract clone(withSpec?: Partial<BaseView>): ConcreteImpl\n}\n\nfunction isSerializable(view: BaseView | Serializable<BaseView>): view is Serializable<BaseView> {\n  return typeof (view as Serializable<BaseView>).serialize === 'function'\n}\n\nexport function maybeSerializeView(\n  item: View | Serializable<View>,\n  index: number,\n  path: SerializePath\n): View {\n  return isSerializable(item) ? item.serialize({path, index}) : item\n}\n\nexport type ViewBuilder = ComponentViewBuilder | FormViewBuilder\n","import {SerializeOptions} from '../StructureNodes'\nimport {SerializeError, HELP_URL} from '../SerializeError'\nimport {isRecord} from '../../../util'\nimport type {UserViewComponent} from '../types'\nimport {BaseView, GenericViewBuilder} from './View'\n\nexport interface ComponentView<TOptions = Record<string, any>> extends BaseView {\n  type: 'component'\n  component: UserViewComponent\n  options: TOptions\n}\n\nconst isComponentSpec = (spec: unknown): spec is ComponentView =>\n  isRecord(spec) && spec.type === 'component'\n\nexport class ComponentViewBuilder extends GenericViewBuilder<\n  Partial<ComponentView>,\n  ComponentViewBuilder\n> {\n  protected spec: Partial<ComponentView>\n\n  constructor(componentOrSpec?: UserViewComponent | Partial<ComponentView>) {\n    const spec = isComponentSpec(componentOrSpec) ? {...componentOrSpec} : {options: {}}\n\n    super()\n    this.spec = spec\n\n    const userComponent =\n      typeof componentOrSpec === 'function' ? componentOrSpec : this.spec.component\n\n    if (userComponent) {\n      // Because we're cloning, this'll return a new instance, so grab the spec from it\n      this.spec = this.component(userComponent).spec\n    }\n  }\n\n  component(component: UserViewComponent): ComponentViewBuilder {\n    return this.clone({component})\n  }\n\n  getComponent(): Partial<ComponentView>['component'] {\n    return this.spec.component\n  }\n\n  options(options: {[key: string]: any}): ComponentViewBuilder {\n    return this.clone({options})\n  }\n\n  getOptions(): ComponentView['options'] {\n    return this.spec.options || {}\n  }\n\n  serialize(options: SerializeOptions = {path: []}): ComponentView {\n    const base = super.serialize(options)\n\n    const component = this.spec.component\n    if (typeof component !== 'function') {\n      throw new SerializeError(\n        '`component` is required and must be a function for `component()` view item',\n        options.path,\n        options.index\n      ).withHelpUrl(HELP_URL.COMPONENT_REQUIRED)\n    }\n\n    return {\n      ...base,\n      component,\n      options: this.spec.options || {},\n      type: 'component',\n    }\n  }\n\n  clone(withSpec?: Partial<ComponentView>): ComponentViewBuilder {\n    const builder = new ComponentViewBuilder()\n    builder.spec = {...this.spec, ...(withSpec || {})}\n    return builder\n  }\n}\n","import {SerializeOptions} from '../StructureNodes'\nimport {BaseView, GenericViewBuilder} from './View'\n\nexport interface FormView extends BaseView {\n  type: 'form'\n}\n\nexport class FormViewBuilder extends GenericViewBuilder<Partial<BaseView>, FormViewBuilder> {\n  protected spec: Partial<FormView>\n\n  constructor(spec?: Partial<FormView>) {\n    super()\n    this.spec = {id: 'editor', title: 'Editor', ...(spec ? spec : {})}\n  }\n\n  serialize(options: SerializeOptions = {path: []}): FormView {\n    return {\n      ...super.serialize(options),\n      type: 'form',\n    }\n  }\n\n  clone(withSpec?: Partial<FormView>): FormViewBuilder {\n    const builder = new FormViewBuilder()\n    builder.spec = {...this.spec, ...(withSpec || {})}\n    return builder\n  }\n}\n","import type {UserViewComponent} from '../types'\nimport {ComponentView, ComponentViewBuilder} from './ComponentView'\nimport {FormView, FormViewBuilder} from './FormView'\n\nexport * from './FormView'\nexport * from './ComponentView'\nexport * from './View'\n\nexport const form = (spec?: Partial<FormView>): FormViewBuilder => new FormViewBuilder(spec)\nexport const component = (\n  componentOrSpec?: UserViewComponent | Partial<ComponentView>\n): ComponentViewBuilder => new ComponentViewBuilder(componentOrSpec)\n","import {uniq, camelCase} from 'lodash'\nimport {SchemaType} from '@sanity/types'\nimport {ChildResolver} from './ChildResolver'\nimport {SerializeOptions, Serializable, Child, DocumentNode, EditorNode} from './StructureNodes'\nimport {SerializeError, HELP_URL} from './SerializeError'\nimport {validateId} from './util/validateId'\nimport {ViewBuilder, maybeSerializeView} from './views/View'\nimport {form} from './views'\nimport type {StructureContext, View} from './types'\n\nconst createDocumentChildResolver =\n  ({resolveDocumentNode}: StructureContext): ChildResolver =>\n  (itemId, {params, path}) => {\n    const {type} = params\n\n    const parentPath = path.slice(0, path.length - 1)\n    const currentSegment = path[path.length - 1]\n\n    if (!type) {\n      throw new SerializeError(\n        `Invalid link. Your link must contain a \\`type\\`.`,\n        parentPath,\n        currentSegment\n      )\n    }\n\n    return resolveDocumentNode({documentId: itemId, schemaType: type})\n  }\n\nexport interface DocumentOptions {\n  id: string\n  type: string\n  template?: string\n  templateParameters?: Record<string, unknown>\n}\n\nexport type PartialDocumentNode = {\n  id?: string\n  title?: string\n  child?: Child\n  views?: (View | ViewBuilder)[]\n  options?: Partial<DocumentOptions>\n}\n\nexport class DocumentBuilder implements Serializable<DocumentNode> {\n  protected spec: PartialDocumentNode\n\n  constructor(protected _context: StructureContext, spec?: PartialDocumentNode) {\n    this.spec = spec ? spec : {}\n  }\n\n  id(id: string): DocumentBuilder {\n    return this.clone({id})\n  }\n\n  getId(): PartialDocumentNode['id'] {\n    return this.spec.id\n  }\n\n  title(title: string): DocumentBuilder {\n    return this.clone({title, id: this.spec.id || camelCase(title)})\n  }\n\n  getTitle(): PartialDocumentNode['title'] {\n    return this.spec.title\n  }\n\n  child(child: Child): DocumentBuilder {\n    return this.clone({child})\n  }\n\n  getChild(): PartialDocumentNode['child'] {\n    return this.spec.child\n  }\n\n  documentId(documentId: string): DocumentBuilder {\n    // Let's try to be a bit helpful and assign an ID from document ID if none is specified\n    const paneId = this.spec.id || documentId\n    return this.clone({\n      id: paneId,\n      options: {\n        ...(this.spec.options || {}),\n        id: documentId,\n      },\n    })\n  }\n\n  getDocumentId(): Partial<DocumentOptions>['id'] {\n    return this.spec.options?.id\n  }\n\n  schemaType(documentType: SchemaType | string): DocumentBuilder {\n    return this.clone({\n      options: {\n        ...(this.spec.options || {}),\n        type: typeof documentType === 'string' ? documentType : documentType.name,\n      },\n    })\n  }\n\n  getSchemaType(): Partial<DocumentOptions>['type'] {\n    return this.spec.options?.type\n  }\n\n  initialValueTemplate(templateId: string, parameters?: Record<string, unknown>): DocumentBuilder {\n    return this.clone({\n      options: {\n        ...(this.spec.options || {}),\n        template: templateId,\n        templateParameters: parameters,\n      },\n    })\n  }\n\n  getInitialValueTemplate(): Partial<DocumentOptions>['template'] {\n    return this.spec.options?.template\n  }\n\n  getInitialValueTemplateParameters(): Partial<DocumentOptions>['templateParameters'] {\n    return this.spec.options?.templateParameters\n  }\n\n  views(views: (View | ViewBuilder)[]): DocumentBuilder {\n    return this.clone({views})\n  }\n\n  getViews(): (View | ViewBuilder)[] {\n    return this.spec.views || []\n  }\n\n  serialize({path = [], index, hint}: SerializeOptions = {path: []}): DocumentNode {\n    const urlId = path[index || path.length - 1]\n\n    // Try to grab document ID / editor ID from URL if not defined\n    const id = this.spec.id || (urlId && `${urlId}`) || ''\n    const options: Partial<DocumentOptions> = {\n      id,\n      type: undefined,\n      template: undefined,\n      templateParameters: undefined,\n      ...this.spec.options,\n    }\n\n    if (typeof id !== 'string' || !id) {\n      throw new SerializeError(\n        '`id` is required for document nodes',\n        path,\n        index,\n        hint\n      ).withHelpUrl(HELP_URL.ID_REQUIRED)\n    }\n\n    if (!options || !options.id) {\n      throw new SerializeError(\n        'document id (`id`) is required for document nodes',\n        path,\n        id,\n        hint\n      ).withHelpUrl(HELP_URL.DOCUMENT_ID_REQUIRED)\n    }\n\n    if (!options || !options.type) {\n      throw new SerializeError(\n        'document type (`schemaType`) is required for document nodes',\n        path,\n        id,\n        hint\n      )\n    }\n\n    const views = (this.spec.views && this.spec.views.length > 0 ? this.spec.views : [form()]).map(\n      (item, i) => maybeSerializeView(item, i, path)\n    )\n\n    const viewIds = views.map((view) => view.id)\n    const dupes = uniq(viewIds.filter((viewId, i) => viewIds.includes(viewId, i + 1)))\n    if (dupes.length > 0) {\n      throw new SerializeError(\n        `document node has views with duplicate IDs: ${dupes.join(',  ')}`,\n        path,\n        id,\n        hint\n      )\n    }\n\n    return {\n      ...this.spec,\n      child: this.spec.child || createDocumentChildResolver(this._context),\n      id: validateId(id, path, index),\n      type: 'document',\n      options: getDocumentOptions(options),\n      views,\n    }\n  }\n\n  clone(withSpec: PartialDocumentNode = {}): DocumentBuilder {\n    const builder = new DocumentBuilder(this._context)\n    const options = {...(this.spec.options || {}), ...(withSpec.options || {})}\n    builder.spec = {...this.spec, ...withSpec, options}\n    return builder\n  }\n}\n\nfunction getDocumentOptions(spec: Partial<DocumentOptions>): DocumentOptions {\n  const opts: DocumentOptions = {\n    id: spec.id || '',\n    type: spec.type || '*',\n  }\n\n  if (spec.template) {\n    opts.template = spec.template\n  }\n\n  if (spec.templateParameters) {\n    opts.templateParameters = spec.templateParameters\n  }\n\n  return opts\n}\n\nexport function documentFromEditor(context: StructureContext, spec?: EditorNode): DocumentBuilder {\n  let doc = spec?.type\n    ? // Use user-defined document fragment as base if possible\n      context.resolveDocumentNode({schemaType: spec.type})\n    : // Fall back to plain old document builder\n      new DocumentBuilder(context)\n\n  if (!spec) return doc\n\n  const {id, type, template, templateParameters} = spec.options\n  doc = doc.id(spec.id).documentId(id)\n\n  if (type) {\n    doc = doc.schemaType(type)\n  }\n  if (template) {\n    doc = doc.initialValueTemplate(template, templateParameters)\n  }\n  if (spec.child) {\n    doc = doc.child(spec.child)\n  }\n\n  return doc\n}\n\nexport function documentFromEditorWithInitialValue(\n  {resolveDocumentNode, templates}: StructureContext,\n  templateId: string,\n  parameters?: Record<string, unknown>\n): DocumentBuilder {\n  const template = templates.find((t) => t.id === templateId)\n\n  if (!template) {\n    throw new Error(`Template with ID \"${templateId}\" not defined`)\n  }\n\n  return resolveDocumentNode({schemaType: template.schemaType}).initialValueTemplate(\n    templateId,\n    parameters\n  )\n}\n","export const layoutOptions = ['default', 'card', 'media', 'detail', 'block']\n","import {PartialDocumentList, getTypeNamesFromFilter} from './DocumentList'\nimport {StructureNode} from './StructureNodes'\n\nexport type IntentJsonParams = {[key: string]: any}\n\nexport type BaseIntentParams = {\n  type?: string\n  id?: string\n  template?: string\n}\n\nexport const DEFAULT_INTENT_HANDLER = Symbol('Document type list canHandleIntent')\n\nexport type IntentParams = BaseIntentParams | [BaseIntentParams, IntentJsonParams]\n\n// TODO: intents should be unified somewhere\nexport interface Intent {\n  type: string\n  params?: IntentParams\n}\n\nexport interface IntentChecker {\n  (\n    intentName: string,\n    params: {[key: string]: any},\n    context: {pane: StructureNode; index: number}\n  ): boolean\n  identity?: symbol\n}\n\nexport const defaultIntentChecker: IntentChecker = (intentName, params, {pane}): boolean => {\n  const isEdit = intentName === 'edit'\n  const isCreate = intentName === 'create'\n  const typedSpec = pane as PartialDocumentList\n  const paneFilter = typedSpec.options?.filter || ''\n  const paneParams = typedSpec.options?.params || {}\n  const typeNames = typedSpec.schemaTypeName\n    ? [typedSpec.schemaTypeName]\n    : getTypeNamesFromFilter(paneFilter, paneParams)\n\n  const initialValueTemplates = typedSpec.initialValueTemplates || []\n\n  if (isCreate && params.template) {\n    return initialValueTemplates.some((tpl) => tpl.templateId === params.template)\n  }\n\n  return (\n    (isEdit && params.id && typeNames.includes(params.type)) ||\n    (isCreate && typeNames.includes(params.type))\n  )\n}\n\ndefaultIntentChecker.identity = DEFAULT_INTENT_HANDLER\n","import {pickBy} from 'lodash'\nimport {ComposeIcon} from '@sanity/icons'\nimport {InitialValueTemplateItem} from '../../templates'\nimport {HELP_URL, SerializeError} from './SerializeError'\nimport {Serializable, SerializeOptions, SerializePath} from './StructureNodes'\nimport {MenuItemBuilder, MenuItem} from './MenuItem'\nimport {IntentParams} from './Intent'\nimport {StructureContext} from './types'\n\nexport class InitialValueTemplateItemBuilder implements Serializable<InitialValueTemplateItem> {\n  protected spec: Partial<InitialValueTemplateItem>\n\n  constructor(protected _context: StructureContext, spec?: Partial<InitialValueTemplateItem>) {\n    this.spec = spec ? spec : {}\n  }\n\n  id(id: string): InitialValueTemplateItemBuilder {\n    return this.clone({id})\n  }\n\n  getId(): Partial<InitialValueTemplateItem>['id'] {\n    return this.spec.id\n  }\n\n  title(title: string): InitialValueTemplateItemBuilder {\n    return this.clone({title})\n  }\n\n  getTitle(): Partial<InitialValueTemplateItem>['title'] {\n    return this.spec.title\n  }\n\n  description(description: string): InitialValueTemplateItemBuilder {\n    return this.clone({description})\n  }\n\n  getDescription(): Partial<InitialValueTemplateItem>['description'] {\n    return this.spec.description\n  }\n\n  templateId(templateId: string): InitialValueTemplateItemBuilder {\n    // Let's try to be a bit helpful and assign an ID from template ID if none is specified\n    const paneId = this.spec.id || templateId\n    return this.clone({\n      id: paneId,\n      templateId,\n    })\n  }\n\n  getTemplateId(): Partial<InitialValueTemplateItem>['templateId'] {\n    return this.spec.templateId\n  }\n\n  parameters(parameters: {[key: string]: any}): InitialValueTemplateItemBuilder {\n    return this.clone({parameters})\n  }\n\n  getParameters(): Partial<InitialValueTemplateItem>['parameters'] {\n    return this.spec.parameters\n  }\n\n  serialize({path = [], index, hint}: SerializeOptions = {path: []}): InitialValueTemplateItem {\n    const {spec, _context} = this\n    const {templates} = _context\n\n    if (typeof spec.id !== 'string' || !spec.id) {\n      throw new SerializeError(\n        '`id` is required for initial value template item nodes',\n        path,\n        index,\n        hint\n      ).withHelpUrl(HELP_URL.ID_REQUIRED)\n    }\n\n    if (!spec.templateId) {\n      throw new SerializeError(\n        'template id (`templateId`) is required for initial value template item nodes',\n        path,\n        spec.id,\n        hint\n      ).withHelpUrl(HELP_URL.ID_REQUIRED)\n    }\n\n    const template = templates.find((t) => t.id === spec.templateId)\n\n    if (!template) {\n      throw new SerializeError(\n        'template id (`templateId`) is required for initial value template item nodes',\n        path,\n        spec.id,\n        hint\n      ).withHelpUrl(HELP_URL.ID_REQUIRED)\n    }\n\n    return {\n      id: spec.id,\n      templateId: spec.id,\n      schemaType: template.schemaType,\n      type: 'initialValueTemplateItem',\n      description: spec.description || template.description,\n      title: spec.title || template.title,\n      subtitle: spec.subtitle,\n      icon: spec.icon || template.icon,\n      initialDocumentId: spec.initialDocumentId,\n      parameters: spec.parameters,\n    }\n  }\n\n  clone(withSpec: Partial<InitialValueTemplateItem> = {}): InitialValueTemplateItemBuilder {\n    const builder = new InitialValueTemplateItemBuilder(this._context)\n    builder.spec = {...this.spec, ...withSpec}\n    return builder\n  }\n}\n\nexport function defaultInitialValueTemplateItems(\n  context: StructureContext\n): InitialValueTemplateItemBuilder[] {\n  const {schema, getStructureBuilder, templates} = context\n\n  // Sort templates by their schema type, in order or definition\n  const typeNames = schema.getTypeNames()\n  const ordered = templates\n    // Don't list templates that require parameters\n    // TODO: this should use the new-document template items instead maybe?\n    .filter((tpl) => !tpl.parameters?.length)\n    .sort((a, b) => typeNames.indexOf(a.schemaType) - typeNames.indexOf(b.schemaType))\n\n  // Create actual template items out of the templates\n  return ordered.map((tpl) => getStructureBuilder().initialValueTemplateItem(tpl.id))\n}\n\nexport function maybeSerializeInitialValueTemplateItem(\n  item: InitialValueTemplateItem | InitialValueTemplateItemBuilder,\n  index: number,\n  path: SerializePath\n): InitialValueTemplateItem {\n  return item instanceof InitialValueTemplateItemBuilder ? item.serialize({path, index}) : item\n}\n\nexport function menuItemsFromInitialValueTemplateItems(\n  context: StructureContext,\n  templateItems: InitialValueTemplateItem[]\n): MenuItem[] {\n  const {schema, templates} = context\n  return templateItems.map((item) => {\n    const template = templates.find((t) => t.id === item.templateId)\n    const title = item.title || template?.title || 'Create new'\n    const params = pickBy(\n      {type: template && template.schemaType, template: item.templateId},\n      Boolean\n    )\n    const intentParams: IntentParams = item.parameters ? [params, item.parameters] : params\n    const schemaType = template && schema.get(template.schemaType)\n\n    return new MenuItemBuilder(context)\n      .title(title)\n      .icon((template && template.icon) || schemaType?.icon || ComposeIcon)\n      .intent({type: 'create', params: intentParams})\n      .serialize()\n  })\n}\n","import {camelCase} from 'lodash'\nimport {InitialValueTemplateItem} from '../../templates'\nimport {StructureNode, SerializeOptions, Serializable, Child} from './StructureNodes'\nimport {layoutOptions} from './Layout'\nimport {MenuItem, MenuItemBuilder, maybeSerializeMenuItem} from './MenuItem'\nimport {MenuItemGroup, MenuItemGroupBuilder, maybeSerializeMenuItemGroup} from './MenuItemGroup'\nimport {IntentChecker, defaultIntentChecker} from './Intent'\nimport {SerializeError} from './SerializeError'\nimport {\n  InitialValueTemplateItemBuilder,\n  maybeSerializeInitialValueTemplateItem,\n} from './InitialValueTemplateItem'\nimport {validateId} from './util/validateId'\nimport {PreviewLayoutKey} from '../../components/previews'\n\nfunction noChildResolver() {\n  return undefined\n}\n\nexport const shallowIntentChecker: IntentChecker = (intentName, params, {pane, index}): boolean => {\n  return index <= 1 && defaultIntentChecker(intentName, params, {pane, index})\n}\n\nexport interface ListDisplayOptions {\n  showIcons?: boolean\n}\n\nexport interface BaseGenericList extends StructureNode {\n  defaultLayout?: PreviewLayoutKey\n  canHandleIntent?: IntentChecker\n  displayOptions?: ListDisplayOptions\n  child: Child\n  initialValueTemplates?: (InitialValueTemplateItem | InitialValueTemplateItemBuilder)[]\n}\n\n// \"POJO\"/verbatim-version - end result\nexport interface GenericList extends BaseGenericList {\n  type: string\n  menuItems: MenuItem[]\n  menuItemGroups: MenuItemGroup[]\n}\n\n// Used internally in builder classes to make everything optional\nexport interface BuildableGenericList extends Partial<BaseGenericList> {\n  menuItems?: (MenuItem | MenuItemBuilder)[]\n  menuItemGroups?: (MenuItemGroup | MenuItemGroupBuilder)[]\n}\n\n// Input version, allows builders and only requires things not inferrable\nexport interface GenericListInput extends StructureNode {\n  id: string\n  title: string\n  menuItems?: (MenuItem | MenuItemBuilder)[]\n  menuItemGroups?: (MenuItemGroup | MenuItemGroupBuilder)[]\n  initialValueTemplates?: (InitialValueTemplateItem | InitialValueTemplateItemBuilder)[]\n  defaultLayout?: PreviewLayoutKey\n  canHandleIntent?: IntentChecker\n  child?: Child\n}\n\nexport abstract class GenericListBuilder<TList extends BuildableGenericList, ConcreteImpl>\n  implements Serializable<GenericList>\n{\n  protected initialValueTemplatesSpecified = false\n  protected spec: TList = {} as TList\n\n  id(id: string): ConcreteImpl {\n    return this.clone({id})\n  }\n\n  getId(): TList['id'] {\n    return this.spec.id\n  }\n\n  title(title: string): ConcreteImpl {\n    return this.clone({title, id: this.spec.id || camelCase(title)})\n  }\n\n  getTitle(): TList['title'] {\n    return this.spec.title\n  }\n\n  defaultLayout(defaultLayout: PreviewLayoutKey): ConcreteImpl {\n    return this.clone({defaultLayout})\n  }\n\n  getDefaultLayout(): TList['defaultLayout'] {\n    return this.spec.defaultLayout\n  }\n\n  menuItems(menuItems: (MenuItem | MenuItemBuilder)[] | undefined): ConcreteImpl {\n    return this.clone({menuItems})\n  }\n\n  getMenuItems(): TList['menuItems'] {\n    return this.spec.menuItems\n  }\n\n  menuItemGroups(menuItemGroups: (MenuItemGroup | MenuItemGroupBuilder)[]): ConcreteImpl {\n    return this.clone({menuItemGroups})\n  }\n\n  getMenuItemGroups(): TList['menuItemGroups'] {\n    return this.spec.menuItemGroups\n  }\n\n  child(child: Child): ConcreteImpl {\n    return this.clone({child})\n  }\n\n  getChild(): TList['child'] {\n    return this.spec.child\n  }\n\n  canHandleIntent(canHandleIntent: IntentChecker): ConcreteImpl {\n    return this.clone({canHandleIntent})\n  }\n\n  getCanHandleIntent(): TList['canHandleIntent'] {\n    return this.spec.canHandleIntent\n  }\n\n  showIcons(enabled = true): ConcreteImpl {\n    return this.clone({\n      displayOptions: {...(this.spec.displayOptions || {}), showIcons: enabled},\n    })\n  }\n\n  getShowIcons(): boolean | undefined {\n    return this.spec.displayOptions ? this.spec.displayOptions.showIcons : undefined\n  }\n\n  initialValueTemplates(\n    templates:\n      | InitialValueTemplateItem\n      | InitialValueTemplateItemBuilder\n      | Array<InitialValueTemplateItem | InitialValueTemplateItemBuilder>\n  ): ConcreteImpl {\n    this.initialValueTemplatesSpecified = true\n    return this.clone({initialValueTemplates: Array.isArray(templates) ? templates : [templates]})\n  }\n\n  getInitialValueTemplates(): TList['initialValueTemplates'] {\n    return this.spec.initialValueTemplates\n  }\n\n  serialize(options: SerializeOptions = {path: []}): GenericList {\n    const id = this.spec.id || ''\n    const path = options.path\n\n    const defaultLayout = this.spec.defaultLayout\n    if (defaultLayout && !layoutOptions.includes(defaultLayout)) {\n      throw new SerializeError(\n        `\\`layout\\` must be one of ${layoutOptions.map((item) => `\"${item}\"`).join(', ')}`,\n        path,\n        id || options.index,\n        this.spec.title\n      )\n    }\n\n    const initialValueTemplates = (this.spec.initialValueTemplates || []).map((item, i) =>\n      maybeSerializeInitialValueTemplateItem(item, i, path)\n    )\n\n    return {\n      id: validateId(id, options.path, id || options.index),\n      title: this.spec.title,\n      type: 'genericList',\n      defaultLayout,\n      child: this.spec.child || noChildResolver,\n      canHandleIntent: this.spec.canHandleIntent || shallowIntentChecker,\n      displayOptions: this.spec.displayOptions,\n      initialValueTemplates,\n      menuItems: (this.spec.menuItems || []).map((item, i) =>\n        maybeSerializeMenuItem(item, i, path)\n      ),\n      menuItemGroups: (this.spec.menuItemGroups || []).map((item, i) =>\n        maybeSerializeMenuItemGroup(item, i, path)\n      ),\n    }\n  }\n\n  abstract clone(_withSpec?: object): ConcreteImpl\n}\n","import {SchemaType, SortOrderingItem} from '@sanity/types'\nimport {SanityClient} from '@sanity/client'\nimport {ComposeIcon} from '@sanity/icons'\nimport type {SourceClientOptions} from '../../config'\nimport {InitialValueTemplateItem} from '../../templates'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../studioClient'\nimport {SerializeError, HELP_URL} from './SerializeError'\nimport {SerializeOptions, Child} from './StructureNodes'\nimport {ChildResolver, ChildResolverOptions, ItemChild} from './ChildResolver'\nimport {\n  GenericListBuilder,\n  BuildableGenericList,\n  GenericList,\n  GenericListInput,\n} from './GenericList'\nimport {DocumentBuilder} from './Document'\nimport {StructureContext} from './types'\n\nconst resolveTypeForDocument = async (\n  getClient: (options: SourceClientOptions) => SanityClient,\n  id: string\n): Promise<string | undefined> => {\n  const query = '*[_id in [$documentId, $draftId]]._type'\n  const documentId = id.replace(/^drafts\\./, '')\n  const draftId = `drafts.${documentId}`\n\n  const types = await getClient(DEFAULT_STUDIO_CLIENT_OPTIONS).fetch(\n    query,\n    {documentId, draftId},\n    {tag: 'structure.resolve-type'}\n  )\n\n  return types[0]\n}\n\nconst validateFilter = (spec: PartialDocumentList, options: SerializeOptions) => {\n  const filter = spec.options?.filter.trim() || ''\n\n  if (['*', '{'].includes(filter[0])) {\n    throw new SerializeError(\n      `\\`filter\\` cannot start with \\`${filter[0]}\\` - looks like you are providing a query, not a filter`,\n      options.path,\n      spec.id,\n      spec.title\n    ).withHelpUrl(HELP_URL.QUERY_PROVIDED_FOR_FILTER)\n  }\n\n  return filter\n}\n\nconst createDocumentChildResolverForItem =\n  (context: StructureContext): ChildResolver =>\n  (itemId: string, options: ChildResolverOptions): ItemChild | Promise<ItemChild> | undefined => {\n    const parentItem = options.parent as DocumentList\n    const template = options.params?.template\n      ? context.templates.find((tpl) => tpl.id === options.params.template)\n      : undefined\n    const type = template\n      ? template.schemaType\n      : parentItem.schemaTypeName || resolveTypeForDocument(context.getClient, itemId)\n\n    return Promise.resolve(type).then((schemaType) =>\n      schemaType\n        ? context.resolveDocumentNode({schemaType, documentId: itemId})\n        : new DocumentBuilder(context).id('editor').documentId(itemId).schemaType('')\n    )\n  }\n\nexport interface PartialDocumentList extends BuildableGenericList {\n  options?: DocumentListOptions\n  schemaTypeName?: string\n}\n\nexport interface DocumentListInput extends GenericListInput {\n  options: DocumentListOptions\n}\n\nexport interface DocumentList extends GenericList {\n  type: 'documentList'\n  options: DocumentListOptions\n  child: Child\n  schemaTypeName?: string\n}\n\nexport interface DocumentListOptions {\n  filter: string\n  params?: Record<string, unknown>\n  apiVersion?: string\n  defaultOrdering?: SortOrderingItem[]\n}\n\nexport class DocumentListBuilder extends GenericListBuilder<\n  PartialDocumentList,\n  DocumentListBuilder\n> {\n  protected spec: PartialDocumentList\n\n  constructor(protected _context: StructureContext, spec?: DocumentListInput) {\n    super()\n    this.spec = spec || {}\n    this.initialValueTemplatesSpecified = Boolean(spec?.initialValueTemplates)\n  }\n\n  apiVersion(apiVersion: string): DocumentListBuilder {\n    return this.clone({options: {...(this.spec.options || {filter: ''}), apiVersion}})\n  }\n\n  getApiVersion(): string | undefined {\n    return this.spec.options?.apiVersion\n  }\n\n  filter(filter: string): DocumentListBuilder {\n    return this.clone({options: {...(this.spec.options || {}), filter}})\n  }\n\n  getFilter(): string | undefined {\n    return this.spec.options?.filter\n  }\n\n  schemaType(type: SchemaType | string): DocumentListBuilder {\n    const schemaTypeName = typeof type === 'string' ? type : type.name\n    return this.clone({schemaTypeName})\n  }\n\n  getSchemaType(): string | undefined {\n    return this.spec.schemaTypeName\n  }\n\n  params(params: Record<string, unknown>): DocumentListBuilder {\n    return this.clone({\n      options: {...(this.spec.options || {filter: ''}), params},\n    })\n  }\n\n  getParams(): Record<string, unknown> | undefined {\n    return this.spec.options?.params\n  }\n\n  defaultOrdering(ordering: SortOrderingItem[]): DocumentListBuilder {\n    if (!Array.isArray(ordering)) {\n      throw new Error('`defaultOrdering` must be an array of order clauses')\n    }\n\n    return this.clone({\n      options: {...(this.spec.options || {filter: ''}), defaultOrdering: ordering},\n    })\n  }\n\n  getDefaultOrdering(): SortOrderingItem[] | undefined {\n    return this.spec.options?.defaultOrdering\n  }\n\n  serialize(options: SerializeOptions = {path: []}): DocumentList {\n    if (typeof this.spec.id !== 'string' || !this.spec.id) {\n      throw new SerializeError(\n        '`id` is required for document lists',\n        options.path,\n        options.index,\n        this.spec.title\n      ).withHelpUrl(HELP_URL.ID_REQUIRED)\n    }\n\n    if (!this.spec.options || !this.spec.options.filter) {\n      throw new SerializeError(\n        '`filter` is required for document lists',\n        options.path,\n        this.spec.id,\n        this.spec.title\n      ).withHelpUrl(HELP_URL.FILTER_REQUIRED)\n    }\n\n    return {\n      ...super.serialize(options),\n      type: 'documentList',\n      schemaTypeName: this.spec.schemaTypeName,\n      child: this.spec.child || createDocumentChildResolverForItem(this._context),\n      options: {\n        ...this.spec.options,\n        apiVersion:\n          this.spec.options.apiVersion ||\n          // If this is a simple type filter, use modern API version - otherwise default to v1\n          (this.spec.options?.filter === '_type == $type' ? '2021-06-07' : '1'),\n        filter: validateFilter(this.spec, options),\n      },\n    }\n  }\n\n  clone(withSpec?: PartialDocumentList): DocumentListBuilder {\n    const builder = new DocumentListBuilder(this._context)\n    builder.spec = {...this.spec, ...(withSpec || {})}\n\n    if (!this.initialValueTemplatesSpecified) {\n      builder.spec.initialValueTemplates = inferInitialValueTemplates(this._context, builder.spec)\n    }\n\n    if (!builder.spec.schemaTypeName) {\n      builder.spec.schemaTypeName = inferTypeName(builder.spec)\n    }\n\n    return builder\n  }\n\n  getSpec(): PartialDocumentList {\n    return this.spec\n  }\n}\n\nfunction inferInitialValueTemplates(\n  context: StructureContext,\n  spec: PartialDocumentList\n): InitialValueTemplateItem[] | undefined {\n  const {document} = context\n  const {schemaTypeName, options} = spec\n  const {filter, params} = options || {filter: '', params: {}}\n  const typeNames = schemaTypeName\n    ? [schemaTypeName]\n    : Array.from(new Set(getTypeNamesFromFilter(filter, params)))\n\n  if (typeNames.length === 0) {\n    return undefined\n  }\n\n  return typeNames\n    .flatMap((schemaType) =>\n      document.resolveNewDocumentOptions({\n        type: 'structure',\n        schemaType,\n      })\n    )\n    .map((option) => ({...option, icon: ComposeIcon}))\n}\n\nfunction inferTypeName(spec: PartialDocumentList): string | undefined {\n  const {options} = spec\n  const {filter, params} = options || {filter: '', params: {}}\n  const typeNames = getTypeNamesFromFilter(filter, params)\n  return typeNames.length === 1 ? typeNames[0] : undefined\n}\n\nexport function getTypeNamesFromFilter(\n  filter: string,\n  params: Record<string, unknown> = {}\n): string[] {\n  let typeNames = getTypeNamesFromEqualityFilter(filter, params)\n\n  if (typeNames.length === 0) {\n    typeNames = getTypeNamesFromInTypesFilter(filter, params)\n  }\n\n  return typeNames\n}\n\n// From _type == \"movie\" || _type == $otherType\nfunction getTypeNamesFromEqualityFilter(\n  filter: string,\n  params: Record<string, unknown> = {}\n): string[] {\n  const pattern =\n    /\\b_type\\s*==\\s*(['\"].*?['\"]|\\$.*?(?:\\s|$))|\\B(['\"].*?['\"]|\\$.*?(?:\\s|$))\\s*==\\s*_type/g\n  const matches: string[] = []\n  let match\n  while ((match = pattern.exec(filter)) !== null) {\n    matches.push(match[1] || match[2])\n  }\n\n  return matches\n    .map((candidate) => {\n      const typeName = candidate[0] === '$' ? params[candidate.slice(1)] : candidate\n      const normalized = ((typeName as string) || '').trim().replace(/^[\"']|[\"']$/g, '')\n      return normalized\n    })\n    .filter(Boolean)\n}\n\n// From _type in [\"dog\", \"cat\", $otherSpecies]\nfunction getTypeNamesFromInTypesFilter(\n  filter: string,\n  params: Record<string, unknown> = {}\n): string[] {\n  const pattern = /\\b_type\\s+in\\s+\\[(.*?)\\]/\n  const matches = filter.match(pattern)\n  if (!matches) {\n    return []\n  }\n\n  return matches[1]\n    .split(/,\\s*/)\n    .map((match) => match.trim().replace(/^[\"']+|[\"']+$/g, ''))\n    .map((item) => (item[0] === '$' ? params[item.slice(1)] : item))\n    .filter(Boolean) as string[]\n}\n","/**\n * @internal\n */\nexport const _DEBUG = false\n\nexport const EMPTY_PARAMS = {}\nexport const LOADING_PANE = Symbol('LOADING_PANE')\n","import {RouterPaneSiblingContext} from '../types'\n\nexport interface PaneResolutionErrorOptions {\n  message: string\n  context?: RouterPaneSiblingContext\n  helpId?: string\n  cause?: Error\n}\n\n/**\n * An error thrown during pane resolving. This error is meant to be bubbled up\n * through react and handled in an error boundary. It includes a `cause`\n * property which is the original error caught\n */\nexport class PaneResolutionError extends Error {\n  cause: Error | undefined\n  context: RouterPaneSiblingContext | undefined\n  helpId: string | undefined\n\n  constructor({message, context, helpId, cause}: PaneResolutionErrorOptions) {\n    super(message)\n    this.context = context\n    this.helpId = helpId\n    this.cause = cause\n  }\n}\n","import {nanoid} from 'nanoid'\n\n// `WeakMap`s require the first type param to extend `object`\n// eslint-disable-next-line @typescript-eslint/ban-types\nconst randomIdCache = new WeakMap<object, string>()\n\n/**\n * given an object, this function randomly generates an ID and returns it. this\n * result is then saved in a WeakMap so subsequent requests for the same object\n * will receive the same ID\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function assignId(obj: object): string {\n  const cachedValue = randomIdCache.get(obj)\n  if (cachedValue) return cachedValue\n\n  const id = nanoid()\n  randomIdCache.set(obj, id)\n  return id\n}\n","/* eslint-disable @typescript-eslint/ban-types */\n\n// `WeakMap`s require the first type param to extend `object`\nconst bindCache = new WeakMap<object, Map<string, Function>>()\n\n/**\n * An alternative to `obj.method.bind(obj)` that utilizes a weakmap to return\n * the same memory reference for sequent binds.\n */\nexport function memoBind<\n  T extends object,\n  K extends keyof {[P in keyof T]: T[P] extends Function ? T[P] : never}\n>(obj: T, methodKey: K): T[K]\nexport function memoBind(obj: Record<string, unknown>, methodKey: string): Function {\n  const boundMethods = bindCache.get(obj) || new Map<string, Function>()\n  if (boundMethods) {\n    const bound = boundMethods.get(methodKey)\n    if (bound) return bound\n  }\n\n  const method = obj[methodKey]\n\n  if (typeof method !== 'function') {\n    throw new Error(\n      `Expected property \\`${methodKey}\\` to be a function but got ${typeof method} instead.`\n    )\n  }\n\n  const bound = method.bind(obj)\n  boundMethods.set(methodKey, bound)\n  bindCache.set(obj, boundMethods)\n\n  return bound\n}\n","import {Observable, of as observableOf, from as observableFrom, Subscribable} from 'rxjs'\nimport {publishReplay, refCount, switchMap} from 'rxjs/operators'\nimport {isRecord} from '../../util'\nimport {PaneNode, RouterPaneSiblingContext, UnresolvedPaneNode} from '../types'\nimport {PaneResolutionError} from './PaneResolutionError'\n\ninterface Serializable {\n  serialize: (...args: never[]) => unknown\n}\n\nconst isSubscribable = (thing: unknown): thing is Subscribable<unknown> | PromiseLike<unknown> => {\n  if (!isRecord(thing)) return false\n  return typeof thing.subscribe === 'function' || typeof thing.then === 'function'\n}\n\nconst isSerializable = (thing: unknown): thing is Serializable => {\n  if (!isRecord(thing)) return false\n  return typeof thing.serialize === 'function'\n}\n\n/**\n * The signature of the function used to take an `UnresolvedPaneNode` and turn\n * it into an `Observable<PaneNode>`.\n */\nexport type PaneResolver = (\n  unresolvedPane: UnresolvedPaneNode | undefined,\n  context: RouterPaneSiblingContext,\n  flatIndex: number\n) => Observable<PaneNode>\n\nexport type PaneResolverMiddleware = (paneResolveFn: PaneResolver) => PaneResolver\n\nconst rethrowWithPaneResolutionErrors: PaneResolverMiddleware =\n  (next) => (unresolvedPane, context, flatIndex) => {\n    try {\n      return next(unresolvedPane, context, flatIndex)\n    } catch (e) {\n      // re-throw errors that are already `PaneResolutionError`s\n      if (e instanceof PaneResolutionError) {\n        throw e\n      }\n\n      // anything else, wrap with `PaneResolutionError` and set the underlying\n      // error as a the `cause`\n      throw new PaneResolutionError({\n        message: typeof e?.message === 'string' ? e.message : '',\n        context,\n        cause: e,\n      })\n    }\n  }\n\nconst wrapWithPublishReplay: PaneResolverMiddleware =\n  (next) =>\n  (...args) => {\n    return next(...args).pipe(\n      // need to add publishReplay + refCount to ensure new subscribers always\n      // get an emission. without this, memoized observables may get stuck\n      // waiting for their first emissions resulting in a loading pane\n      publishReplay(1),\n      refCount()\n    )\n  }\n\nexport function createPaneResolver(middleware: PaneResolverMiddleware): PaneResolver {\n  // note: this API includes a middleware/wrapper function because the function\n  // is recursive. we want to call the wrapped version of the function always\n  // (even inside of nested calls) so the identifier invoked for the recursion\n  // should be the wrapped version\n  const resolvePane = rethrowWithPaneResolutionErrors(\n    wrapWithPublishReplay(\n      middleware((unresolvedPane, context, flatIndex) => {\n        if (!unresolvedPane) {\n          throw new PaneResolutionError({\n            message: 'Pane returned no child',\n            context,\n            helpId: 'structure-item-returned-no-child',\n          })\n        }\n\n        if (isSubscribable(unresolvedPane)) {\n          return observableFrom(unresolvedPane).pipe(\n            switchMap((result) => resolvePane(result, context, flatIndex))\n          )\n        }\n\n        if (isSerializable(unresolvedPane)) {\n          return resolvePane(unresolvedPane.serialize(context), context, flatIndex)\n        }\n\n        if (typeof unresolvedPane === 'function') {\n          return resolvePane(unresolvedPane(context.id, context), context, flatIndex)\n        }\n\n        return observableOf(unresolvedPane)\n      })\n    )\n  )\n\n  return resolvePane\n}\n","import {useContext} from 'react'\nimport {DeskToolContext} from './DeskToolContext'\nimport {DeskToolContextValue} from './types'\n\nexport function useDeskTool(): DeskToolContextValue {\n  const deskTool = useContext(DeskToolContext)\n\n  if (!deskTool) throw new Error(`DeskTool: missing context value`)\n\n  return deskTool\n}\n","import {generateHelpUrl} from '@sanity/generate-help-url'\nimport {isEqual} from 'lodash'\nimport {Observable, NEVER, of as observableOf, concat} from 'rxjs'\nimport {switchMap, map, scan, distinctUntilChanged, pairwise, startWith} from 'rxjs/operators'\nimport {\n  DocumentPaneNode,\n  PaneNode,\n  RouterPaneSiblingContext,\n  RouterPanes,\n  RouterPaneSibling,\n  PaneNodeResolver,\n  UnresolvedPaneNode,\n} from '../types'\nimport {StructureContext} from '../structureBuilder'\nimport {assignId} from './assignId'\nimport {createPaneResolver, PaneResolver, PaneResolverMiddleware} from './createPaneResolver'\nimport {memoBind} from './memoBind'\nimport {PaneResolutionError} from './PaneResolutionError'\n\n/**\n * the fallback editor child that is implicitly inserted into the structure tree\n * if the id starts with `__edit__`\n */\nconst fallbackEditorChild: PaneNodeResolver = (nodeId, context): DocumentPaneNode => {\n  const id = nodeId.replace(/^__edit__/, '')\n  const {\n    params,\n    payload,\n    structureContext: {resolveDocumentNode},\n  } = context\n  const {type, template} = params\n\n  if (!type) {\n    throw new Error(\n      `Document type for document with ID ${id} was not provided in the router params.`\n    )\n  }\n\n  let defaultDocumentBuilder = resolveDocumentNode({schemaType: type, documentId: id})\n\n  defaultDocumentBuilder = defaultDocumentBuilder.id('editor').title('Editor')\n\n  if (template) {\n    defaultDocumentBuilder = defaultDocumentBuilder.initialValueTemplate(\n      template,\n      payload as {[key: string]: unknown}\n    )\n  }\n\n  return defaultDocumentBuilder.serialize() as DocumentPaneNode\n}\n\n/**\n * takes in a `RouterPaneSiblingContext` and returns a normalized string\n * representation that can be used for comparisons\n */\nfunction hashContext(context: RouterPaneSiblingContext): string {\n  return `contextHash(${JSON.stringify({\n    id: context.id,\n    parentId: parent && assignId(parent),\n    path: context.path,\n    index: context.index,\n    splitIndex: context.splitIndex,\n    serializeOptionsIndex: context.serializeOptions?.index,\n    serializeOptionsPath: context.serializeOptions?.path,\n  })})`\n}\n\n/**\n * takes in `ResolvedPaneMeta` and returns a normalized string representation\n * that can be used for comparisons\n */\nconst hashResolvedPaneMeta = (meta: ResolvedPaneMeta): string => {\n  const normalized = {\n    type: meta.type,\n    id: meta.routerPaneSibling.id,\n    params: meta.routerPaneSibling.params || {},\n    payload: meta.routerPaneSibling.payload || null,\n    flatIndex: meta.flatIndex,\n    groupIndex: meta.groupIndex,\n    siblingIndex: meta.siblingIndex,\n    path: meta.path,\n    paneNode: meta.type === 'resolvedMeta' ? assignId(meta.paneNode) : null,\n  }\n\n  return `metaHash(${JSON.stringify(normalized)})`\n}\n\n/**\n * Represents one flattened \"router pane\", including the source group and\n * sibling indexes.\n *\n * @see RouterPanes\n */\ninterface FlattenedRouterPane {\n  routerPaneSibling: RouterPaneSibling\n  flatIndex: number\n  groupIndex: number\n  siblingIndex: number\n}\n\n/**\n * The state of the accumulator used to store and manage memo cache state\n */\ninterface CacheState {\n  /**\n   * Holds the memoization results keyed by a combination of `assignId` and a\n   * context hash.\n   */\n  resolvedPaneCache: Map<string, Observable<PaneNode>>\n  /**\n   * Acts as a dictionary that stores cache keys by their flat index. This is\n   * used to clean up the cache between different branches in the pane\n   * structure.\n   *\n   * @see createResolvedPaneNodeStream look inside the `scan` where `wrapFn` is\n   * defined\n   */\n  cacheKeysByFlatIndex: Array<Set<string>>\n  /**\n   * The resulting memoized `PaneResolver` function. This function closes over\n   * the `resolvedPaneCache`.\n   */\n  resolvePane: PaneResolver\n  flattenedRouterPanes: FlattenedRouterPane[]\n}\n\nexport interface CreateResolvedPaneNodeStreamOptions {\n  /**\n   * an input stream of `RouterPanes`\n   * @see RouterPanes\n   */\n  routerPanesStream: Observable<RouterPanes>\n  /**\n   * any `UnresolvedPaneNode` (could be an observable, promise, pane resolver etc)\n   */\n  rootPaneNode: UnresolvedPaneNode\n  /** used primarily for testing */\n  initialCacheState?: CacheState\n\n  structureContext: StructureContext\n}\n\n/**\n * The result of pane resolving\n */\nexport type ResolvedPaneMeta = {\n  groupIndex: number\n  siblingIndex: number\n  flatIndex: number\n  routerPaneSibling: RouterPaneSibling\n  path: string[]\n} & ({type: 'loading'; paneNode: null} | {type: 'resolvedMeta'; paneNode: PaneNode})\n\ninterface ResolvePaneTreeOptions {\n  resolvePane: PaneResolver\n  flattenedRouterPanes: FlattenedRouterPane[]\n  unresolvedPane: UnresolvedPaneNode | undefined\n  parent: PaneNode | null\n  path: string[]\n  structureContext: StructureContext\n}\n\n/**\n * A recursive pane resolving function. Starts at one unresolved pane node and\n * continues until there is no more flattened router panes that can be used as\n * input to the unresolved panes.\n */\nfunction resolvePaneTree({\n  unresolvedPane,\n  flattenedRouterPanes,\n  parent,\n  path,\n  resolvePane,\n  structureContext,\n}: ResolvePaneTreeOptions): Observable<ResolvedPaneMeta[]> {\n  const [current, ...rest] = flattenedRouterPanes\n  const next = rest[0] as FlattenedRouterPane | undefined\n\n  const context: RouterPaneSiblingContext = {\n    id: current.routerPaneSibling.id,\n    splitIndex: current.siblingIndex,\n    parent,\n    path: [...path, current.routerPaneSibling.id],\n    index: current.flatIndex,\n    params: current.routerPaneSibling.params || {},\n    payload: current.routerPaneSibling.payload,\n    structureContext,\n  }\n\n  try {\n    return resolvePane(unresolvedPane, context, current.flatIndex).pipe(\n      // this switch map receives a resolved pane\n      switchMap((paneNode) => {\n        // we can create a `resolvedMeta` type using it\n        const resolvedPaneMeta: ResolvedPaneMeta = {\n          type: 'resolvedMeta',\n          ...current,\n          paneNode: paneNode,\n          path: context.path,\n        }\n\n        // for the other unresolved panes, we can create \"loading panes\"\n        const loadingPanes = rest.map((i, restIndex) => {\n          const loadingPanePath = [\n            ...context.path,\n            ...rest.slice(restIndex).map((_, currentIndex) => `[${i.flatIndex + currentIndex}]`),\n          ]\n\n          const loadingPane: ResolvedPaneMeta = {\n            type: 'loading',\n            path: loadingPanePath,\n            paneNode: null,\n            ...i,\n          }\n\n          return loadingPane\n        })\n\n        if (!rest.length) {\n          return observableOf([resolvedPaneMeta])\n        }\n\n        let nextStream\n\n        if (\n          // the fallback editor case\n          next?.routerPaneSibling.id.startsWith('__edit__')\n        ) {\n          nextStream = resolvePaneTree({\n            unresolvedPane: fallbackEditorChild,\n            flattenedRouterPanes: rest,\n            parent,\n            path: context.path,\n            resolvePane,\n            structureContext,\n          })\n        } else if (current.groupIndex === next?.groupIndex) {\n          // if the next flattened router pane has the same group index as the\n          // current flattened router pane, then the next flattened router pane\n          // belongs to the same group (i.e. it is a split pane)\n          nextStream = resolvePaneTree({\n            unresolvedPane,\n            flattenedRouterPanes: rest,\n            parent,\n            path,\n            resolvePane,\n            structureContext,\n          })\n        } else {\n          // normal children resolving\n          nextStream = resolvePaneTree({\n            unresolvedPane:\n              typeof paneNode.child === 'function'\n                ? (memoBind(paneNode, 'child') as PaneNodeResolver)\n                : paneNode.child,\n            flattenedRouterPanes: rest,\n            parent: paneNode,\n            path: context.path,\n            resolvePane,\n            structureContext,\n          })\n        }\n\n        return concat(\n          // we emit the loading panes first in a concat (this emits immediately)\n          observableOf([resolvedPaneMeta, ...loadingPanes]),\n          // then whenever the next stream is done, the results will be combined.\n          nextStream.pipe(map((nextResolvedPanes) => [resolvedPaneMeta, ...nextResolvedPanes]))\n        )\n      })\n    )\n  } catch (e) {\n    if (e instanceof PaneResolutionError) {\n      if (e.context) {\n        console.warn(\n          `Pane resolution error at index ${e.context.index}${\n            e.context.splitIndex > 0 ? ` for split pane index ${e.context.splitIndex}` : ''\n          }: ${e.message}${e.helpId ? ` - see ${generateHelpUrl(e.helpId)}` : ''}`,\n          e\n        )\n      }\n\n      if (e.helpId === 'structure-item-returned-no-child') {\n        // returning an observable of an empty array will remove loading panes\n        // note: this one intentionally does not throw\n        return observableOf([])\n      }\n    }\n\n    throw e\n  }\n}\n\n/**\n * Takes in a stream of `RouterPanes` and an unresolved root pane and returns\n * a stream of `ResolvedPaneMeta`\n */\nexport function createResolvedPaneNodeStream({\n  routerPanesStream,\n  rootPaneNode,\n  initialCacheState = {\n    cacheKeysByFlatIndex: [],\n    flattenedRouterPanes: [],\n    resolvedPaneCache: new Map(),\n    resolvePane: () => NEVER,\n  },\n  structureContext,\n}: CreateResolvedPaneNodeStreamOptions): Observable<ResolvedPaneMeta[]> {\n  const resolvedPanes$ = routerPanesStream.pipe(\n    // add in implicit \"root\" router pane\n    map((rawRouterPanes) => [[{id: 'root'}], ...rawRouterPanes]),\n    // create flattened router panes\n    map((routerPanes) => {\n      const flattenedRouterPanes: FlattenedRouterPane[] = routerPanes\n        .flatMap((routerPaneGroup, groupIndex) =>\n          routerPaneGroup.map((routerPaneSibling, siblingIndex) => ({\n            routerPaneSibling,\n            groupIndex,\n            siblingIndex,\n          }))\n        )\n        // add in the flat index\n        .map((i, index) => ({...i, flatIndex: index}))\n\n      return flattenedRouterPanes\n    }),\n    // calculate a \"diffIndex\" used for clearing the memo cache\n    startWith([] as FlattenedRouterPane[]),\n    pairwise(),\n    map(([prev, curr]) => {\n      for (let i = 0; i < curr.length; i++) {\n        const prevValue = prev[i]\n        const currValue = curr[i]\n\n        if (!isEqual(prevValue, currValue)) {\n          return {\n            flattenedRouterPanes: curr,\n            diffIndex: i,\n          }\n        }\n      }\n\n      return {\n        flattenedRouterPanes: curr,\n        diffIndex: curr.length,\n      }\n    }),\n    // create the memoized `resolvePane` function and manage the memo cache\n    scan((acc, next) => {\n      const {cacheKeysByFlatIndex, resolvedPaneCache} = acc\n      const {flattenedRouterPanes, diffIndex} = next\n\n      // use the `cacheKeysByFlatIndex` like a dictionary to find cache keys to\n      // and cache keys to delete\n      const beforeDiffIndex = cacheKeysByFlatIndex.slice(0, diffIndex + 1)\n      const afterDiffIndex = cacheKeysByFlatIndex.slice(diffIndex + 1)\n\n      const keysToKeep = new Set(beforeDiffIndex.flatMap((keySet) => Array.from(keySet)))\n      const keysToDelete = afterDiffIndex\n        .flatMap((keySet) => Array.from(keySet))\n        .filter((key) => !keysToKeep.has(key))\n\n      for (const key of keysToDelete) {\n        resolvedPaneCache.delete(key)\n      }\n\n      // create a memoizing pane resolver middleware that utilizes the cache\n      // maintained above. this keeps the cache from growing indefinitely\n      const memoize: PaneResolverMiddleware = (nextFn) => (unresolvedPane, context, flatIndex) => {\n        const key = unresolvedPane && `${assignId(unresolvedPane)}-${hashContext(context)}`\n        const cachedResolvedPane = key && resolvedPaneCache.get(key)\n        if (cachedResolvedPane) return cachedResolvedPane\n\n        const result = nextFn(unresolvedPane, context, flatIndex)\n        if (!key) return result\n\n        const cacheKeySet = cacheKeysByFlatIndex[flatIndex] || new Set()\n        cacheKeySet.add(key)\n        cacheKeysByFlatIndex[flatIndex] = cacheKeySet\n        resolvedPaneCache.set(key, result)\n        return result\n      }\n\n      return {\n        flattenedRouterPanes,\n        cacheKeysByFlatIndex,\n        resolvedPaneCache,\n        resolvePane: createPaneResolver(memoize),\n      }\n    }, initialCacheState),\n    // run the memoized, recursive resolving\n    switchMap(({flattenedRouterPanes, resolvePane}) =>\n      resolvePaneTree({\n        unresolvedPane: rootPaneNode,\n        flattenedRouterPanes,\n        parent: null,\n        path: [],\n        resolvePane,\n        structureContext,\n      })\n    )\n  )\n\n  // after we've created a stream of `ResolvedPaneMeta[]`, we need to clean up\n  // the results to remove unwanted loading panes and prevent unnecessary\n  // emissions\n  return resolvedPanes$.pipe(\n    // this diffs the previous emission with the current one. if there is a new\n    // loading pane at the same position where a previous pane already had a\n    // resolved value (looking at the IDs to compare), then return the previous\n    // pane instead of the loading pane\n    scan(\n      (prev, next) =>\n        next.map((nextPane, index) => {\n          const prevPane = prev[index] as ResolvedPaneMeta | undefined\n          if (!prevPane) return nextPane\n          if (nextPane.type !== 'loading') return nextPane\n\n          if (prevPane.routerPaneSibling.id === nextPane.routerPaneSibling.id) {\n            return prevPane\n          }\n          return nextPane\n        }),\n      [] as ResolvedPaneMeta[]\n    ),\n    // this prevents duplicate emissions\n    distinctUntilChanged((prev, next) => {\n      if (prev.length !== next.length) return false\n\n      for (let i = 0; i < next.length; i++) {\n        const prevValue = prev[i]\n        const nextValue = next[i]\n        if (hashResolvedPaneMeta(prevValue) !== hashResolvedPaneMeta(nextValue)) {\n          return false\n        }\n      }\n\n      return true\n    })\n  )\n}\n","import {useEffect, useMemo, useState} from 'react'\nimport {ReplaySubject} from 'rxjs'\nimport {map} from 'rxjs/operators'\nimport {RouterState, useRouter} from '../../router'\nimport {LOADING_PANE} from '../constants'\nimport {RouterPanes, PaneNode, RouterPaneGroup} from '../types'\nimport {useDeskTool} from '../useDeskTool'\nimport {createResolvedPaneNodeStream} from './createResolvedPaneNodeStream'\n\ninterface PaneData {\n  active: boolean\n  childItemId: string | null\n  groupIndex: number\n  index: number\n  itemId: string\n  key: string\n  pane: PaneNode | typeof LOADING_PANE\n  params: Record<string, string | undefined>\n  path: string\n  payload: unknown\n  selected: boolean\n  siblingIndex: number\n}\n\ninterface Panes {\n  paneDataItems: PaneData[]\n  routerPanes: RouterPanes\n  resolvedPanes: (PaneNode | typeof LOADING_PANE)[]\n}\n\nfunction useRouterPanesStream() {\n  const routerStateSubject = useMemo(() => new ReplaySubject<RouterState>(1), [])\n  const routerPanes$ = useMemo(\n    () =>\n      routerStateSubject\n        .asObservable()\n        .pipe(map((_routerState) => (_routerState?.panes || []) as RouterPanes)),\n    [routerStateSubject]\n  )\n  const {state: routerState} = useRouter()\n  useEffect(() => {\n    routerStateSubject.next(routerState)\n  }, [routerState, routerStateSubject])\n\n  return routerPanes$\n}\n\nexport function useResolvedPanes(): Panes {\n  // used to propagate errors from async effect. throwing inside of the render\n  // will bubble the error to react where it can be picked up by standard error\n  // boundaries\n  const [error, setError] = useState<unknown>()\n  if (error) throw error\n\n  const {structureContext, rootPaneNode} = useDeskTool()\n\n  const [data, setData] = useState<Panes>({\n    paneDataItems: [],\n    resolvedPanes: [],\n    routerPanes: [],\n  })\n\n  const routerPanesStream = useRouterPanesStream()\n\n  useEffect(() => {\n    const resolvedPanes$ = createResolvedPaneNodeStream({\n      rootPaneNode,\n      routerPanesStream,\n      structureContext,\n    }).pipe(\n      map((resolvedPanes) => {\n        const routerPanes = resolvedPanes.reduce<RouterPanes>((acc, next) => {\n          const currentGroup = acc[next.groupIndex] || []\n          currentGroup[next.siblingIndex] = next.routerPaneSibling\n          acc[next.groupIndex] = currentGroup\n          return acc\n        }, [])\n\n        const groupsLen = routerPanes.length\n\n        const paneDataItems = resolvedPanes.map((pane) => {\n          const {groupIndex, flatIndex, siblingIndex, routerPaneSibling, path} = pane\n          const itemId = routerPaneSibling.id\n          const nextGroup = routerPanes[groupIndex + 1] as RouterPaneGroup | undefined\n\n          const paneDataItem: PaneData = {\n            active: groupIndex === groupsLen - 2,\n            childItemId: nextGroup?.[0].id ?? null,\n            index: flatIndex,\n            itemId: routerPaneSibling.id,\n            groupIndex,\n            key: `${\n              pane.type === 'loading' ? 'unknown' : pane.paneNode.id\n            }-${itemId}-${siblingIndex}`,\n            pane: pane.type === 'loading' ? LOADING_PANE : pane.paneNode,\n            params: routerPaneSibling.params || {},\n            path: path.join(';'),\n            payload: routerPaneSibling.payload,\n            selected: flatIndex === resolvedPanes.length - 1,\n            siblingIndex,\n          }\n\n          return paneDataItem\n        })\n\n        return {\n          paneDataItems,\n          routerPanes,\n          resolvedPanes: paneDataItems.map((pane) => pane.pane),\n        }\n      })\n    )\n\n    const subscription = resolvedPanes$.subscribe({\n      next: (result) => setData(result),\n      error: (e) => setError(e),\n    })\n\n    return () => subscription.unsubscribe()\n  }, [rootPaneNode, routerPanesStream, structureContext])\n\n  return data\n}\n","import React, {useEffect, useState} from 'react'\n\nexport function Delay({\n  children,\n  ms = 0,\n}: {\n  children?: React.ReactElement | (() => React.ReactElement)\n  ms?: number\n}): React.ReactElement {\n  const [ready, setReady] = useState(ms <= 0)\n\n  useEffect(() => {\n    if (ms <= 0) {\n      return undefined\n    }\n\n    const timeoutId = setTimeout(() => setReady(true), ms)\n\n    return () => {\n      clearTimeout(timeoutId)\n    }\n  }, [ms])\n\n  if (!ready || !children) {\n    return <></>\n  }\n\n  return typeof children === 'function' ? children() : children\n}\n","import {generateHelpUrl} from '@sanity/generate-help-url'\nimport {Box, Button, Card, Code, Container, Heading, Label, Stack, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport styled from 'styled-components'\nimport {SyncIcon} from '@sanity/icons'\nimport {SerializeError} from '../../structureBuilder'\nimport {PaneResolutionError} from '../../structureResolvers'\n\nconst PathSegment = styled.span`\n  &:not(:last-child)::after {\n    content: ' âž ';\n    opacity: 0.5;\n  }\n`\n\nfunction formatStack(stack: string) {\n  return (\n    stack\n      // Prettify builder functions\n      .replace(/\\(\\.\\.\\.\\)\\./g, '(...)\\n  .')\n      // Remove webpack cruft from function names\n      .replace(/__WEBPACK_IMPORTED_MODULE_\\d+_+/g, '')\n      // Remove default export postfix from function names\n      .replace(/___default\\./g, '.')\n      // Replace full host path, leave only path to JS-file\n      .replace(new RegExp(` \\\\(https?:\\\\/\\\\/${window.location.host}`, 'g'), ' (')\n  )\n}\n\ninterface StructureErrorProps {\n  error: unknown\n}\n\nexport function StructureError({error}: StructureErrorProps) {\n  if (!(error instanceof PaneResolutionError)) {\n    throw error\n  }\n  const {cause} = error\n\n  // Serialize errors are well-formatted and should be readable, in these cases a stack trace is\n  // usually not helpful. Build errors in dev (with HMR) usually also contains a bunch of garbage\n  // instead of an actual error message, so make sure we show the message in these cases as well\n  const stack = cause?.stack || error.stack\n  const showStack =\n    stack && !(cause instanceof SerializeError) && !error.message.includes('Module build failed:')\n\n  const path = cause instanceof SerializeError ? cause.path : []\n  const helpId = (cause instanceof SerializeError && cause.helpId) || error.helpId\n\n  const handleReload = useCallback(() => {\n    window.location.reload()\n  }, [])\n\n  return (\n    <Card height=\"fill\" overflow=\"auto\" padding={4} sizing=\"border\" tone=\"critical\">\n      <Container>\n        <Heading as=\"h2\">Encountered an error while reading structure</Heading>\n\n        <Card marginTop={4} padding={4} radius={2} overflow=\"auto\" shadow={1} tone=\"inherit\">\n          {path.length > 0 && (\n            <Stack space={2}>\n              <Label>Structure path</Label>\n              <Code>\n                {/* TODO: it seems like the path is off by one and includes */}\n                {/* `root` twice  */}\n                {path.slice(1).map((segment, i) => (\n                  // eslint-disable-next-line react/no-array-index-key\n                  <PathSegment key={`${segment}-${i}`}>{segment}</PathSegment>\n                ))}\n              </Code>\n            </Stack>\n          )}\n\n          <Stack marginTop={4} space={2}>\n            <Label>Error</Label>\n            <Code>{showStack ? formatStack(stack) : error.message}</Code>\n          </Stack>\n\n          {helpId && (\n            <Box marginTop={4}>\n              <Text>\n                <a href={generateHelpUrl(helpId)} rel=\"noopener noreferrer\" target=\"_blank\">\n                  View documentation\n                </a>\n              </Text>\n            </Box>\n          )}\n\n          <Box marginTop={4}>\n            <Button text=\"Reload\" icon={SyncIcon} tone=\"primary\" onClick={handleReload} />\n          </Box>\n        </Card>\n      </Container>\n    </Card>\n  )\n}\n","import {createContext} from 'react'\nimport {PaneRouterContextValue} from './types'\n\nfunction missingContext<T = unknown>(): T {\n  throw new Error('Pane is missing router context')\n}\n\n/**\n * @public\n */\nexport const PaneRouterContext = createContext<PaneRouterContextValue>({\n  index: 0,\n  groupIndex: 0,\n  siblingIndex: 0,\n  payload: undefined,\n  params: {},\n  hasGroupSiblings: false,\n  groupLength: 0,\n  routerPanesState: [],\n  BackLink: () => missingContext(),\n  ChildLink: () => missingContext(),\n  ReferenceChildLink: () => missingContext(),\n  handleEditReference: () => missingContext(),\n  ParameterizedLink: () => missingContext(),\n  replaceCurrent: () => missingContext(),\n  closeCurrent: () => missingContext(),\n  duplicateCurrent: () => missingContext(),\n  setView: () => missingContext(),\n  setParams: () => missingContext(),\n  setPayload: () => missingContext(),\n  navigateIntent: () => missingContext(),\n})\n","import React, {forwardRef, useContext, useMemo} from 'react'\nimport {StateLink} from '../../../router'\nimport {PaneRouterContext} from './PaneRouterContext'\nimport {BackLinkProps} from './types'\n\n/**\n * @internal\n */\nexport const BackLink = forwardRef(function BackLink(\n  props: BackLinkProps,\n  ref: React.ForwardedRef<HTMLAnchorElement>\n) {\n  const {routerPanesState, groupIndex} = useContext(PaneRouterContext)\n  const panes = useMemo(() => routerPanesState.slice(0, groupIndex), [groupIndex, routerPanesState])\n  const state = useMemo(() => ({panes}), [panes])\n\n  return <StateLink {...props} ref={ref} state={state} />\n}) as React.ComponentType<BackLinkProps>\n","import React, {forwardRef, useContext} from 'react'\nimport {StateLink} from '../../../router'\nimport {PaneRouterContext} from './PaneRouterContext'\nimport {ChildLinkProps} from './types'\n\n/**\n * @internal\n */\nexport const ChildLink = forwardRef(function ChildLink(\n  props: ChildLinkProps,\n  ref: React.ForwardedRef<HTMLAnchorElement>\n) {\n  const {childId, childPayload, childParameters, ...rest} = props\n  const {routerPanesState, groupIndex} = useContext(PaneRouterContext)\n\n  return (\n    <StateLink\n      {...rest}\n      ref={ref}\n      state={{\n        panes: [\n          ...routerPanesState.slice(0, groupIndex + 1),\n          [{id: childId, params: childParameters, payload: childPayload}],\n        ],\n      }}\n    />\n  )\n})\n","import React, {forwardRef} from 'react'\nimport {toString as pathToString} from '@sanity/util/paths'\nimport {ChildLink} from './ChildLink'\nimport {ReferenceChildLinkProps} from './types'\n\nexport const ReferenceChildLink = forwardRef(function ReferenceChildLink(\n  {documentId, documentType, parentRefPath, children, template, ...rest}: ReferenceChildLinkProps,\n  ref: React.ForwardedRef<HTMLAnchorElement>\n) {\n  return (\n    <ChildLink\n      {...rest}\n      ref={ref}\n      childId={documentId}\n      childPayload={template?.params}\n      childParameters={{\n        type: documentType,\n        parentRefPath: pathToString(parentRefPath),\n        ...(template && {template: template?.id}),\n      }}\n    >\n      {children}\n    </ChildLink>\n  )\n})\n","import React, {forwardRef, useContext, useMemo} from 'react'\nimport {StateLink} from '../../../router'\nimport {useUnique} from '../../../util'\nimport {PaneRouterContext} from './PaneRouterContext'\n\ninterface ParameterizedLinkProps {\n  params?: Record<string, string>\n  payload?: unknown\n  children?: React.ReactNode\n}\n\n/**\n * @internal\n */\nexport const ParameterizedLink = forwardRef(function ParameterizedLink(\n  props: ParameterizedLinkProps,\n  ref: React.ForwardedRef<HTMLAnchorElement>\n) {\n  const {routerPanesState: currentPanes, groupIndex, siblingIndex} = useContext(PaneRouterContext)\n  const {params, payload, ...rest} = props\n  const nextParams = useUnique(params)\n  const nextPayload = useUnique(payload)\n\n  const nextState = useMemo(() => {\n    const currentGroup = currentPanes[groupIndex]\n    const currentSibling = currentGroup[siblingIndex]\n\n    const nextSibling = {\n      ...currentSibling,\n      params: nextParams ?? currentSibling.params,\n      payload: nextPayload ?? currentSibling.payload,\n    }\n\n    const nextGroup = [\n      ...currentGroup.slice(0, siblingIndex),\n      nextSibling,\n      ...currentGroup.slice(siblingIndex + 1),\n    ]\n\n    const nextPanes = [\n      ...currentPanes.slice(0, groupIndex),\n      nextGroup,\n      ...currentPanes.slice(groupIndex + 1),\n    ]\n\n    return {panes: nextPanes}\n  }, [currentPanes, groupIndex, nextParams, nextPayload, siblingIndex])\n\n  return <StateLink ref={ref} {...rest} state={nextState} />\n})\n","import {omit} from 'lodash'\nimport React, {useCallback, useMemo} from 'react'\nimport {toString as pathToString} from '@sanity/util/paths'\nimport {RouterPaneGroup, RouterPanes, RouterPaneSibling} from '../../types'\nimport {useRouter, useRouterState} from '../../../router'\nimport {ChildLink} from './ChildLink'\nimport {BackLink} from './BackLink'\nimport {ReferenceChildLink} from './ReferenceChildLink'\nimport {PaneRouterContext} from './PaneRouterContext'\nimport {ParameterizedLink} from './ParameterizedLink'\nimport {PaneRouterContextValue} from './types'\n\nconst emptyArray: never[] = []\n\n/**\n * @internal\n */\nexport function PaneRouterProvider(props: {\n  children: React.ReactNode\n  flatIndex: number\n  index: number\n  params: Record<string, string | undefined>\n  payload: unknown\n  siblingIndex: number\n}) {\n  const {children, flatIndex, index, params, payload, siblingIndex} = props\n  const {navigate, navigateIntent} = useRouter()\n  const routerState = useRouterState()\n  const routerPaneGroups: RouterPaneGroup[] = useMemo(\n    () => (routerState?.panes || emptyArray) as RouterPanes,\n    [routerState?.panes]\n  )\n\n  const groupIndex = index - 1\n\n  const modifyCurrentGroup = useCallback(\n    (modifier: (siblings: RouterPaneGroup, item: RouterPaneSibling) => RouterPaneGroup) => {\n      const currentGroup = routerPaneGroups[groupIndex] || []\n      const currentItem = currentGroup[siblingIndex]\n      const nextGroup = modifier(currentGroup, currentItem)\n      const nextPanes = [\n        ...routerPaneGroups.slice(0, groupIndex),\n        nextGroup,\n        ...routerPaneGroups.slice(groupIndex + 1),\n      ]\n      const nextRouterState = {...(routerState || {}), panes: nextPanes}\n\n      setTimeout(() => navigate(nextRouterState), 0)\n\n      return nextRouterState\n    },\n    [groupIndex, navigate, routerPaneGroups, routerState, siblingIndex]\n  )\n\n  const setPayload: PaneRouterContextValue['setPayload'] = useCallback(\n    (nextPayload) => {\n      modifyCurrentGroup((siblings, item) => [\n        ...siblings.slice(0, siblingIndex),\n        {...item, payload: nextPayload},\n        ...siblings.slice(siblingIndex + 1),\n      ])\n    },\n    [modifyCurrentGroup, siblingIndex]\n  )\n\n  const setParams: PaneRouterContextValue['setParams'] = useCallback(\n    (nextParams) => {\n      modifyCurrentGroup((siblings, item) => [\n        ...siblings.slice(0, siblingIndex),\n        {...item, params: nextParams},\n        ...siblings.slice(siblingIndex + 1),\n      ])\n    },\n    [modifyCurrentGroup, siblingIndex]\n  )\n\n  const handleEditReference: PaneRouterContextValue['handleEditReference'] = useCallback(\n    ({id, parentRefPath, type, template}) => {\n      navigate({\n        panes: [\n          ...routerPaneGroups.slice(0, groupIndex + 1),\n          [\n            {\n              id,\n              params: {template: template.id, parentRefPath: pathToString(parentRefPath), type},\n              payload: template.params,\n            },\n          ],\n        ],\n      })\n    },\n    [groupIndex, navigate, routerPaneGroups]\n  )\n\n  const ctx: PaneRouterContextValue = useMemo(\n    () => ({\n      // Zero-based index (position) of pane, visually\n      index: flatIndex,\n\n      // Zero-based index of pane group (within URL structure)\n      groupIndex,\n\n      // Zero-based index of pane within sibling group\n      siblingIndex,\n\n      // Payload of the current pane\n      payload,\n\n      // Params of the current pane\n      params,\n\n      // Whether or not the pane has any siblings (within the same group)\n      hasGroupSiblings: routerPaneGroups[groupIndex]\n        ? routerPaneGroups[groupIndex].length > 1\n        : false,\n\n      // The length of the current group\n      groupLength: routerPaneGroups[groupIndex] ? routerPaneGroups[groupIndex].length : 0,\n\n      // Current router state for the \"panes\" property\n      routerPanesState: routerPaneGroups,\n\n      // Curried StateLink that passes the correct state automatically\n      ChildLink,\n\n      // Curried StateLink that pops off the last pane group\n      BackLink,\n\n      // A specialized `ChildLink` that takes in the needed props to open a\n      // referenced document to the right\n      ReferenceChildLink,\n\n      // Similar to `ReferenceChildLink` expect without the wrapping component\n      handleEditReference,\n\n      // Curried StateLink that passed the correct state, but merges params/payload\n      ParameterizedLink,\n\n      // Replaces the current pane with a new one\n      replaceCurrent: (opts = {}): void => {\n        modifyCurrentGroup(() => [\n          {id: opts.id || '', payload: opts.payload, params: opts.params || {}},\n        ])\n      },\n\n      // Removes the current pane from the group\n      closeCurrent: (): void => {\n        modifyCurrentGroup((siblings, item) =>\n          siblings.length > 1 ? siblings.filter((sibling) => sibling !== item) : siblings\n        )\n      },\n\n      // Duplicate the current pane, with optional overrides for payload, parameters\n      duplicateCurrent: (options): void => {\n        modifyCurrentGroup((siblings, item) => {\n          const duplicatedItem = {\n            ...item,\n            payload: options?.payload || item.payload,\n            params: options?.params || item.params,\n          }\n\n          return [\n            ...siblings.slice(0, siblingIndex),\n            duplicatedItem,\n            ...siblings.slice(siblingIndex),\n          ]\n        })\n      },\n\n      // Set the view for the current pane\n      setView: (viewId) => {\n        const restParams = omit(params, 'view')\n        return setParams(viewId ? {...restParams, view: viewId} : restParams)\n      },\n\n      // Set the parameters for the current pane\n      setParams,\n\n      // Set the payload for the current pane\n      setPayload,\n\n      // Proxied navigation to a given intent. Consider just exposing `router` instead?\n      navigateIntent,\n    }),\n    [\n      flatIndex,\n      groupIndex,\n      handleEditReference,\n      modifyCurrentGroup,\n      navigateIntent,\n      params,\n      payload,\n      routerPaneGroups,\n      setParams,\n      setPayload,\n      siblingIndex,\n    ]\n  )\n\n  return <PaneRouterContext.Provider value={ctx}>{children}</PaneRouterContext.Provider>\n}\n","import {useContext} from 'react'\nimport {PaneRouterContext} from './PaneRouterContext'\nimport {PaneRouterContextValue} from './types'\n\n/**\n * @public\n */\nexport function usePaneRouter(): PaneRouterContextValue {\n  return useContext(PaneRouterContext)\n}\n","import {Box, Text} from '@sanity/ui'\nimport React from 'react'\nimport {isRecord} from '../../../util'\nimport {Pane, PaneContent, PaneHeader} from '../../components/pane'\n\ninterface UnknownPaneProps {\n  isSelected: boolean\n  pane: unknown\n  paneKey: string\n}\n\n/**\n * @internal\n */\nexport function UnknownPane(props: UnknownPaneProps) {\n  const {isSelected, pane, paneKey} = props\n  const type = (isRecord(pane) && pane.type) || null\n\n  return (\n    <Pane id={paneKey} selected={isSelected}>\n      <PaneHeader title=\"Unknown pane type\" />\n      <PaneContent>\n        <Box padding={4}>\n          {typeof type === 'string' ? (\n            <Text as=\"p\" muted>\n              Structure item of type <code>{type}</code> is not a known entity.\n            </Text>\n          ) : (\n            <Text as=\"p\" muted>\n              Structure item is missing required <code>type</code> property.\n            </Text>\n          )}\n        </Box>\n      </PaneContent>\n    </Pane>\n  )\n}\n","import {Observable, of, merge} from 'rxjs'\nimport {mapTo, delay} from 'rxjs/operators'\nimport {isDev} from '../../../environment'\n\n/**\n * @internal\n */\nexport function getWaitMessages(path: string[]): Observable<string> {\n  const thresholds = [\n    {ms: 300, message: 'Loadingâ€¦'},\n    {ms: 5000, message: 'Still loadingâ€¦'},\n  ]\n\n  if (isDev) {\n    const message = [\n      'Check console for errors?',\n      'Is your observable/promise resolving?',\n      path.length > 0 ? `Structure path: ${path.join(' âž ')}` : '',\n    ]\n\n    thresholds.push({\n      ms: 10000,\n      message: message.join('\\n'),\n    })\n  }\n\n  const src = of(null)\n\n  return merge(...thresholds.map(({ms, message}) => src.pipe(mapTo(message), delay(ms))))\n}\n","import {Box, CardTone, Flex, Spinner, Text, _raf2} from '@sanity/ui'\nimport React, {memo, useMemo, useState, useEffect} from 'react'\nimport {Observable} from 'rxjs'\nimport styled from 'styled-components'\nimport {Delay} from '../../components/Delay'\nimport {Pane, PaneContent} from '../../components/pane'\nimport {getWaitMessages} from './getWaitMessages'\n\ninterface LoadingPaneProps {\n  delay?: number\n  flex?: number\n  message?: string | ((p: string[]) => string | Observable<string>)\n  minWidth?: number\n  paneKey: string\n  path?: string\n  selected?: boolean\n  title?: string\n  tone?: CardTone\n}\n\nconst DELAY = false\nconst DEFAULT_MESSAGE = 'Loadingâ€¦'\n\nconst Content = styled(Flex)`\n  opacity: 0;\n  transition: opacity 200ms;\n\n  &[data-mounted] {\n    opacity: 1;\n  }\n`\n\n/**\n * @internal\n */\nexport const LoadingPane = memo((props: LoadingPaneProps) => {\n  const {\n    delay = 300,\n    flex,\n    message: messageProp = getWaitMessages,\n    minWidth,\n    paneKey,\n    path,\n    selected,\n    title,\n    tone,\n  } = props\n\n  const resolvedMessage = useMemo(() => {\n    if (typeof messageProp === 'function') {\n      return messageProp(path ? path.split(';') : [])\n    }\n\n    return messageProp\n  }, [messageProp, path])\n\n  const [currentMessage, setCurrentMessage] = useState<string | null>(() => {\n    if (typeof resolvedMessage === 'string') return resolvedMessage\n    return DEFAULT_MESSAGE\n  })\n\n  useEffect(() => {\n    if (typeof resolvedMessage !== 'object') return undefined\n    if (typeof resolvedMessage.subscribe === 'function') return undefined\n\n    const sub = resolvedMessage.subscribe(setCurrentMessage)\n\n    return () => sub.unsubscribe()\n  }, [resolvedMessage])\n\n  const [contentElement, setContentElement] = useState<HTMLDivElement | null>(null)\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => {\n    if (!contentElement) return undefined\n    return _raf2(() => setMounted(true))\n  }, [contentElement])\n\n  const content = (\n    <Content\n      align=\"center\"\n      data-mounted={mounted ? '' : undefined}\n      direction=\"column\"\n      height=\"fill\"\n      justify=\"center\"\n      ref={setContentElement}\n    >\n      <Spinner muted />\n\n      {(title || currentMessage) && (\n        <Box marginTop={3}>\n          <Text align=\"center\" muted size={1}>\n            {title || currentMessage}\n          </Text>\n        </Box>\n      )}\n    </Content>\n  )\n\n  return (\n    <Pane flex={flex} id={paneKey} minWidth={minWidth} selected={selected} tone={tone}>\n      <PaneContent>{DELAY ? <Delay ms={delay}>{content}</Delay> : content}</PaneContent>\n    </Pane>\n  )\n})\n\nLoadingPane.displayName = 'LoadingPane'\n","import React, {memo, lazy, Suspense} from 'react'\nimport {isEqual} from 'lodash'\nimport {PaneNode} from '../types'\nimport {PaneRouterProvider} from '../components/paneRouter'\nimport {UnknownPane} from './unknown'\nimport {LoadingPane} from './loading'\n\ninterface DeskToolPaneProps {\n  active: boolean\n  childItemId: string | null\n  groupIndex: number\n  index: number\n  itemId: string\n  pane: PaneNode\n  paneKey: string\n  params: Record<string, string | undefined>\n  payload: unknown\n  selected: boolean\n  siblingIndex: number\n}\n\n// TODO: audit this creates separate chunks\nconst paneMap = {\n  component: lazy(() => import('./userComponent')),\n  document: lazy(() => import('./document')),\n  documentList: lazy(() => import('./documentList')),\n  list: lazy(() => import('./list')),\n}\n\n/**\n * NOTE: The same pane might appear multiple times (split pane), so use index as tiebreaker\n *\n * @internal\n */\nexport const DeskToolPane = memo(\n  function DeskToolPane(props: DeskToolPaneProps) {\n    const {\n      active,\n      childItemId,\n      groupIndex,\n      index,\n      itemId,\n      pane,\n      paneKey,\n      params,\n      payload,\n      selected,\n      siblingIndex,\n    } = props\n\n    const PaneComponent = paneMap[pane.type] || UnknownPane\n\n    return (\n      <PaneRouterProvider\n        flatIndex={index}\n        index={groupIndex}\n        params={params}\n        payload={payload}\n        siblingIndex={siblingIndex}\n      >\n        <Suspense fallback={<LoadingPane paneKey={paneKey} />}>\n          <PaneComponent\n            childItemId={childItemId || ''}\n            index={index}\n            itemId={itemId}\n            isActive={active}\n            isSelected={selected}\n            paneKey={paneKey}\n            // @ts-expect-error TS doesn't know how to handle this intersection\n            pane={pane}\n          />\n        </Suspense>\n      </PaneRouterProvider>\n    )\n  },\n  (\n    {params: prevParams = {}, payload: prevPayload = null, ...prev},\n    {params: nextParams = {}, payload: nextPayload = null, ...next}\n  ) => {\n    // deeply compare these objects (it's okay, they're small)\n    if (!isEqual(prevParams, nextParams)) return false\n    if (!isEqual(prevPayload, nextPayload)) return false\n\n    const keys = new Set([...Object.keys(prev), ...Object.keys(next)]) as Set<\n      keyof typeof next | keyof typeof prev\n    >\n\n    // then shallow equal the rest\n    for (const key of keys) {\n      if (prev[key] !== next[key]) return false\n    }\n\n    return true\n  }\n)\n","import React from 'react'\nimport {Box, CardTone} from '@sanity/ui'\nimport {Pane, PaneContent, PaneHeader} from '../../components/pane'\n\n/**\n * @internal\n */\nexport function ErrorPane(props: {\n  children?: React.ReactNode\n  flex?: number\n  minWidth?: number\n  paneKey: string\n  title?: React.ReactNode\n  tone?: CardTone\n}) {\n  const {children, flex, minWidth, paneKey, title = 'Error', tone = 'critical'} = props\n\n  return (\n    <Pane flex={flex} id={paneKey} minWidth={minWidth} tone={tone}>\n      <PaneHeader title={title} />\n      <PaneContent overflow=\"auto\">\n        <Box paddingX={4} paddingY={5}>\n          {children}\n        </Box>\n      </PaneContent>\n    </Pane>\n  )\n}\n","// Toggle tracking of change indicator DOM positions and connectors overlay rendering\nexport const ENABLED = true\n\nexport const CORNER_RADIUS = 4\n\nexport const INTERACTIVE_STROKE_WIDTH = 16\n\nexport const CONNECTOR_MARGIN = 8\nexport const ARROW_MARGIN_X = 8\nexport const ARROW_MARGIN_Y = 2\nexport const ARROW_SIZE = 4\nexport const ARROW_THRESHOLD = 12\nexport const STROKE_WIDTH = 2\n\nexport const DEBUG = false\nexport const DEBUG_LAYER_BOUNDS = DEBUG || false\n","import {Path} from '@sanity/types'\nimport {createScope} from '../react-track-elements'\nimport {ENABLED} from './constants'\nimport {createNoopTracker} from './noop-tracker'\n\nexport interface TrackedChange {\n  element: HTMLElement\n  path: Path\n  isChanged: boolean\n  hasFocus: boolean\n  hasHover: boolean\n  hasRevertHover: boolean\n  zIndex: number\n}\n\nexport interface TrackedArea {\n  element: HTMLElement\n}\n\nconst {Tracker, useReportedValues, useReporter} = ENABLED\n  ? createScope<TrackedChange | TrackedArea>()\n  : createNoopTracker<TrackedChange | TrackedArea>()\n\nexport {Tracker, useReportedValues, useReporter}\n","import {createContext} from 'react'\nimport {Path} from '@sanity/types'\n\nexport interface ConnectorContextValue {\n  isReviewChangesOpen: boolean\n  onOpenReviewChanges: () => void | undefined\n  onSetFocus: (nextPath: Path) => void | undefined\n}\n\nexport const ConnectorContext = createContext<ConnectorContextValue>({\n  isReviewChangesOpen: false,\n  onOpenReviewChanges: () => undefined,\n  onSetFocus: () => undefined,\n} as ConnectorContextValue)\n","import * as PathUtils from '@sanity/util/paths'\nimport React, {SyntheticEvent, useCallback} from 'react'\nimport {Path} from '@sanity/types'\nimport deepCompare from 'react-fast-compare'\nimport {useReporter} from './tracker'\nimport {ConnectorContext} from './ConnectorContext'\n\n/**\n * This is used to draw the bar that wraps the diff components in the changes panel\n */\nexport const ChangeFieldWrapper = (props: {\n  path: Path\n  children: React.ReactNode\n  hasHover: boolean\n}) => {\n  const ref = React.useRef<HTMLDivElement>(null)\n  const {onSetFocus} = React.useContext(ConnectorContext)\n  const [isHover, setHover] = React.useState(false)\n\n  const onMouseEnter = React.useCallback(() => {\n    setHover(true)\n  }, [])\n\n  const onMouseLeave = React.useCallback(() => {\n    setHover(false)\n  }, [])\n\n  useReporter(\n    `change-${PathUtils.toString(props.path)}`,\n    () => ({\n      element: ref.current!,\n      path: props.path,\n      isChanged: true,\n      hasFocus: false,\n      hasHover: isHover,\n      hasRevertHover: props.hasHover,\n    }),\n    // note: deepCompare should be ok here since we're not comparing deep values\n    deepCompare\n  )\n\n  const handleClick = useCallback(\n    (event: SyntheticEvent) => {\n      setFocusWithStopPropagation(event, onSetFocus, props.path)\n    },\n    [onSetFocus, props.path]\n  )\n\n  return (\n    <div ref={ref} onClick={handleClick} onMouseLeave={onMouseLeave} onMouseEnter={onMouseEnter}>\n      {props.children}\n    </div>\n  )\n}\n\n// Stop the propagation here, or it will trigger the parent diff component's onClick.\nfunction setFocusWithStopPropagation(\n  event: React.SyntheticEvent,\n  onSetFocus: (toPath: Path) => void,\n  path: Path\n): void {\n  event.stopPropagation()\n  onSetFocus(path)\n}\n","export const EMPTY_OBJECT: Record<string, unknown> = Object.freeze({})\nexport const EMPTY_ARRAY: never[] = Object.freeze([]) as never[]\n","import styled, {css} from 'styled-components'\nimport {Theme} from '@sanity/ui'\n\ninterface ThemeContext {\n  theme: Theme\n}\n\ninterface RootProps {\n  focus: boolean\n  hover: boolean\n  changed?: boolean\n  isReviewChangeOpen: boolean\n  disabled?: boolean\n  $withHoverEffect?: boolean\n}\n\nconst animationSpeed = 250\n\nexport const ChangeBarWrapper = styled.div(({changed, disabled, isReviewChangeOpen}: RootProps) => {\n  if (disabled)\n    return css`\n      ${ChangeBar} {\n        display: none;\n      }\n    `\n\n  return css`\n    --change-bar-offset: 2px;\n\n    display: flex;\n    position: relative;\n\n    @media (hover: hover) {\n      &:hover {\n        z-index: 10;\n      }\n    }\n\n    /* hide when field is not changed */\n    ${!changed &&\n    css`\n      ${ChangeBar} {\n        opacity: 0;\n        pointer-events: none;\n      }\n    `}\n\n    /* hide hover effect when review changes is open */\n    ${isReviewChangeOpen &&\n    css`\n      ${ChangeBarButton} {\n        opacity: 0;\n      }\n    `}\n  `\n})\n\nexport const FieldWrapper = styled.div`\n  flex-grow: 1;\n  min-width: 0;\n`\n\nexport const ChangeBar = styled.div<{$zIndex: number}>`\n  position: relative;\n  opacity: 1;\n  transition: opacity 100ms;\n  z-index: ${({$zIndex}) => $zIndex};\n`\n\nexport const ChangeBarMarker = styled.div(({theme}: ThemeContext) => {\n  /* these colours aren't freely available on the current theme */\n  const notSelectedColor = theme.sanity.color.spot.yellow\n  const screenMedium = theme.sanity.media[0]\n\n  return css`\n    position: absolute;\n    top: 0;\n    left: var(--change-bar-offset);\n    width: 2px;\n    bottom: 0;\n    background-color: ${notSelectedColor};\n    border-radius: 1px;\n\n    @media (min-width: ${screenMedium}px) {\n      display: unset;\n    }\n  `\n})\n\nexport const ChangeBarButton = styled.button(\n  ({theme, $withHoverEffect}: {theme: Theme; $withHoverEffect?: boolean}) => {\n    /* these colours aren't freely available on the current theme */\n    const notSelectedColor = theme.sanity.color.spot.yellow\n\n    return css`\n      appearance: none;\n      border: 0;\n      outline: 0;\n      display: block;\n      padding: 0;\n      background: transparent;\n      opacity: 0;\n      position: absolute;\n      height: 100%;\n      cursor: pointer;\n      pointer-events: all;\n      left: calc(-0.25rem + var(--change-bar-offset));\n      width: 1rem;\n      transition: opacity ${animationSpeed}ms;\n\n      &:focus {\n        border: 0;\n        outline: 0;\n      }\n\n      &:after {\n        content: '';\n        width: 16px;\n        height: calc(100% + 14px);\n        display: block;\n        position: absolute;\n        top: -7px;\n        left: -3px;\n        border-radius: 8px;\n        background: ${notSelectedColor};\n      }\n\n      &:focus {\n        border: 0;\n        outline: 0;\n      }\n\n      ${$withHoverEffect &&\n      css`\n        @media (hover: hover) {\n          &:hover {\n            opacity: 0.2;\n          }\n        }\n      `}\n    `\n  }\n)\n","import {useLayer} from '@sanity/ui'\nimport React, {useCallback, useMemo, useState} from 'react'\nimport {ConnectorContext} from './ConnectorContext'\nimport {\n  ChangeBarWrapper,\n  FieldWrapper,\n  ChangeBar,\n  ChangeBarMarker,\n  ChangeBarButton,\n} from './ElementWithChangeBar.styled'\n\nexport function ElementWithChangeBar(props: {\n  children: React.ReactNode\n  disabled?: boolean\n  hasFocus: boolean\n  isChanged?: boolean\n  withHoverEffect?: boolean\n}) {\n  const {children, disabled, hasFocus, isChanged, withHoverEffect = true} = props\n\n  const [hover, setHover] = useState(false)\n  const {onOpenReviewChanges, isReviewChangesOpen} = React.useContext(ConnectorContext)\n  const {zIndex} = useLayer()\n\n  const handleMouseEnter = useCallback(() => setHover(true), [])\n  const handleMouseLeave = useCallback(() => setHover(false), [])\n\n  const changeBar = useMemo(\n    () =>\n      disabled || !isChanged ? null : (\n        <ChangeBar data-testid=\"change-bar\" $zIndex={zIndex}>\n          <ChangeBarMarker data-testid=\"change-bar__marker\" />\n\n          <ChangeBarButton\n            aria-label=\"Review changes\"\n            data-testid=\"change-bar__button\"\n            onClick={isReviewChangesOpen ? undefined : onOpenReviewChanges}\n            onMouseEnter={handleMouseEnter}\n            onMouseLeave={handleMouseLeave}\n            tabIndex={-1}\n            type=\"button\"\n            $withHoverEffect={withHoverEffect}\n          />\n        </ChangeBar>\n      ),\n    [\n      disabled,\n      isChanged,\n      zIndex,\n      isReviewChangesOpen,\n      onOpenReviewChanges,\n      handleMouseEnter,\n      handleMouseLeave,\n      withHoverEffect,\n    ]\n  )\n\n  return (\n    <ChangeBarWrapper\n      changed={isChanged}\n      data-testid=\"change-bar-wrapper\"\n      disabled={disabled}\n      focus={hasFocus}\n      hover={hover}\n      isReviewChangeOpen={isReviewChangesOpen}\n    >\n      <FieldWrapper data-testid=\"change-bar__field-wrapper\">{children}</FieldWrapper>\n      {changeBar}\n    </ChangeBarWrapper>\n  )\n}\n","import {useLayer} from '@sanity/ui'\nimport React, {memo} from 'react'\nimport deepCompare from 'react-fast-compare'\nimport * as PathUtils from '@sanity/util/paths'\nimport {Path} from '@sanity/types'\nimport {EMPTY_ARRAY} from '../../form/utils/empty'\nimport {useReporter} from './tracker'\nimport {ElementWithChangeBar} from './ElementWithChangeBar'\n\nconst ChangeBarWrapper = memo(function ChangeBarWrapper(\n  props: Omit<React.ComponentProps<'div'>, 'onChange'> & {\n    disabled?: boolean\n    path: Path\n    hasFocus: boolean\n    isChanged?: boolean\n    withHoverEffect?: boolean\n  }\n) {\n  const {\n    children,\n    className,\n    disabled,\n    hasFocus,\n    isChanged,\n    path = EMPTY_ARRAY,\n    withHoverEffect,\n  } = props\n  const layer = useLayer()\n  const [hasHover, setHover] = React.useState(false)\n  const onMouseEnter = React.useCallback(() => setHover(true), [])\n  const onMouseLeave = React.useCallback(() => setHover(false), [])\n  const ref = React.useRef<HTMLDivElement | null>(null)\n  useReporter(\n    disabled ? null : `field-${PathUtils.toString(path)}`,\n    () => ({\n      element: ref.current!,\n      path: path,\n      isChanged: isChanged,\n      hasFocus: hasFocus,\n      hasHover: hasHover,\n      zIndex: layer.zIndex,\n    }),\n    deepCompare // note: deepCompare should be ok here since we're not comparing deep values\n  )\n\n  return (\n    <div ref={ref} className={className} onMouseEnter={onMouseEnter} onMouseLeave={onMouseLeave}>\n      <ElementWithChangeBar\n        hasFocus={hasFocus}\n        isChanged={isChanged}\n        disabled={disabled}\n        withHoverEffect={withHoverEffect}\n      >\n        {children}\n      </ElementWithChangeBar>\n    </div>\n  )\n})\n\nexport interface ChangeIndicatorProps {\n  children?: React.ReactNode\n  className?: string\n  disabled?: boolean\n  path: Path\n  hasFocus: boolean\n  isChanged: boolean\n  withHoverEffect?: boolean\n}\n\nexport function ChangeIndicator(props: ChangeIndicatorProps) {\n  const {children, className, disabled, hasFocus, isChanged, path, withHoverEffect} = props\n  return (\n    <ChangeBarWrapper\n      className={className}\n      disabled={disabled}\n      path={path}\n      hasFocus={hasFocus}\n      isChanged={isChanged}\n      withHoverEffect={withHoverEffect}\n    >\n      {children}\n    </ChangeBarWrapper>\n  )\n}\n","import React from 'react'\nimport {Path} from '@sanity/types'\n\nexport interface ChangeIndicatorContextValue {\n  value?: unknown\n  focusPath: Path\n  path: Path\n  fullPath: Path\n  isChanged: boolean\n}\n\nexport const ChangeIndicatorContext: React.Context<ChangeIndicatorContextValue> =\n  React.createContext({\n    path: [],\n    fullPath: [],\n    focusPath: [],\n    isChanged: false,\n  } as ChangeIndicatorContextValue)\n","import React from 'react'\nimport {PubSub} from 'nano-pubsub'\n\nexport const ScrollContext = React.createContext<null | PubSub<Event>>(null)\n","import React from 'react'\nimport {ScrollContext} from './scrollContext'\nimport {Subscriber} from 'nano-pubsub'\n\nexport function useOnScroll(callback: Subscriber<Event>) {\n  const parentContext = React.useContext(ScrollContext)\n  React.useEffect(() => {\n    return parentContext?.subscribe(callback)\n  }, [callback])\n}\n","import {useForwardedRef} from '@sanity/ui'\nimport createPubSub from 'nano-pubsub'\nimport React, {useContext, useEffect, useMemo} from 'react'\nimport {ScrollContext} from './scrollContext'\n\nexport interface ScrollContainerProps<T extends React.ElementType>\n  extends Omit<React.HTMLProps<T>, 'as' | 'onScroll'> {\n  as?: React.ElementType | keyof JSX.IntrinsicElements\n  onScroll?: (event: Event) => () => void\n}\n\nconst noop = () => undefined\n\n/**\n * This provides a utility function for use within Sanity Studios to create scrollable containers\n * It also provides a way for components inside a scrollable container to track onScroll on their first parent scroll container\n * Note: this is used by different studio utilities to track positions of elements on screen\n * Note: It will call any given `onScroll` callback with a Native DOM Event, and not a React Synthetic event\n * Note: It will not make sure the element is actually scrollable, this still needs to be done with css as usual\n */\nexport const ScrollContainer = React.forwardRef(function ScrollContainer<\n  T extends React.ElementType = 'div'\n>(props: ScrollContainerProps<T>, ref: React.ForwardedRef<HTMLDivElement>) {\n  const {as = 'div', onScroll, ...rest} = props\n  const forwardedRef = useForwardedRef(ref)\n\n  // const selfRef = useRef<HTMLElement | null>(null)\n  const parentContext = useContext(ScrollContext)\n  const childContext = useMemo(() => createPubSub<Event>(), [])\n\n  useEffect(() => {\n    if (onScroll) {\n      // emit scroll events from children\n      return childContext.subscribe(onScroll)\n    }\n    return noop\n  }, [childContext, onScroll])\n\n  useEffect(() => {\n    // let events bubble up\n    if (parentContext) {\n      return childContext.subscribe(parentContext.publish)\n    }\n    return noop\n  }, [parentContext, childContext])\n\n  useEffect(() => {\n    const handleScroll = (event: Event) => {\n      childContext.publish(event)\n    }\n\n    const el = forwardedRef.current\n\n    if (!el) {\n      return undefined\n    }\n\n    el.addEventListener('scroll', handleScroll, {\n      passive: true,\n      capture: true,\n    })\n\n    return () => {\n      el.removeEventListener('scroll', handleScroll)\n    }\n  }, [childContext, forwardedRef])\n\n  return (\n    <ScrollContext.Provider value={childContext}>\n      {React.createElement(as, {ref: forwardedRef, 'data-testid': 'scroll-container', ...rest})}\n    </ScrollContext.Provider>\n  )\n})\n","import React from 'react'\nimport {useOnScroll} from './hooks'\nimport {ScrollEventHandler} from './types'\n\nexport interface ScrollMonitorProps {\n  onScroll: ScrollEventHandler\n  children?: React.ReactNode\n}\n\nexport function ScrollMonitor({onScroll, children}: ScrollMonitorProps) {\n  useOnScroll(onScroll)\n  return <>{children}</>\n}\n","import {isKeyedObject} from '@sanity/types'\nimport * as PathUtils from '@sanity/util/paths'\nimport {TrackedChange, TrackedArea} from '../tracker'\n\nexport function findMostSpecificTarget(\n  targetType: 'change' | 'field',\n  id: string,\n  values: Map<string, TrackedChange | TrackedArea>\n): TrackedChange | undefined {\n  const pathString = id.slice(id.indexOf('-') + 1) || '[]'\n  const path = PathUtils.fromString(pathString)\n  const exactId = `${targetType}-${PathUtils.toString(path)}`\n  if (values.has(exactId)) {\n    return values.get(exactId) as TrackedChange\n  }\n\n  let mostSpecific: TrackedChange | undefined\n  for (const [targetId, target] of values) {\n    if (!('path' in target) || !targetId.startsWith(targetType)) {\n      continue\n    }\n\n    const numEqual = PathUtils.numEqualSegments(path, target.path)\n    const lastPathSegment = target.path[target.path.length - 1]\n    const pathOnlyDiffersByKey =\n      numEqual === target.path.length - 1 && isKeyedObject(lastPathSegment)\n\n    if (numEqual === 0) {\n      continue\n    } else if (numEqual !== target.path.length && !pathOnlyDiffersByKey) {\n      /*\n       * We only allow matching to shorter paths if the last element in the path is a keyed object.\n       * `foo.bar.portableTextField[_key=abc123]` should resolve to `foo.bar.portableTextField`.\n       *\n       * Otherwise we'll only get a connector line when you add new elements to a portable text\n       * field and not when you alter an existing part.\n       */\n      continue\n    }\n\n    mostSpecific = target\n\n    if (numEqual === path.length) {\n      // On exact match, return early\n      break\n    }\n  }\n\n  // if (!mostSpecific) {\n  //   throw new Error(`target not found: \"${id}\"`)\n  // }\n\n  return mostSpecific\n}\n","import {Reported} from '../../react-track-elements'\nimport {TrackedArea, TrackedChange} from '../tracker'\n\nexport function isChangeBar(\n  v: Reported<TrackedArea | TrackedChange>\n): v is Reported<TrackedChange> {\n  return v[0] !== 'changePanel'\n}\n","export function hasOverflowScroll(el: HTMLElement): boolean {\n  const overflow = getComputedStyle(el).overflow\n\n  return overflow.includes('auto') || overflow.includes('scroll')\n}\n\n// Check whether an element is currently scrollable (meaning it must both have overflow scroll *and* content overflowing)\nexport function isScrollable(el: HTMLElement): boolean {\n  const scrollableContent = el.scrollHeight !== el.offsetHeight || el.scrollWidth !== el.offsetWidth\n\n  return scrollableContent && hasOverflowScroll(el)\n}\n","import {Rect} from '../overlay/types'\nimport {isScrollable} from './scrollUtils'\n\nconst SCROLL_INTO_VIEW_TOP_PADDING = -15\n\nexport function scrollIntoView(field: {element: HTMLElement; rect: Rect; bounds: Rect}): void {\n  const element = field.element\n\n  /*\n   * Start at current element and check the parent for a scroll\n   * bar until a scrollable element has been found.\n   */\n  let parentElementWithScroll: HTMLElement | null = element\n\n  while (!isScrollable(parentElementWithScroll)) {\n    parentElementWithScroll = parentElementWithScroll.parentElement\n\n    /*\n     * If the parent element is null it means we are at the root\n     * element, which has no parent. Since no scroll bar has\n     * been found so far it does not make sense to scroll.\n     */\n    if (!parentElementWithScroll) {\n      return\n    }\n  }\n\n  parentElementWithScroll.scroll({\n    top:\n      parentElementWithScroll.scrollTop +\n      field.rect.top -\n      field.bounds.top +\n      SCROLL_INTO_VIEW_TOP_PADDING,\n    left: 0,\n    behavior: 'smooth',\n  })\n}\n","import {Rect} from '../overlay/types'\nimport {hasOverflowScroll} from './scrollUtils'\n\nexport const getOffsetsTo = (\n  source: HTMLElement,\n  target: HTMLElement\n): {rect: Rect; bounds: Rect} => {\n  const bounds: Rect = {\n    top: 0,\n    left: 0,\n    height: target.offsetHeight,\n    width: target.offsetWidth,\n  }\n\n  const rect: Rect = {\n    top: 0,\n    left: 0,\n    height: source.offsetHeight,\n    width: source.offsetWidth,\n  }\n\n  let foundScrollContainer = false\n  let el: HTMLElement | null = source\n\n  while (el && el !== target && target.contains(el)) {\n    if (foundScrollContainer) {\n      bounds.top += el.offsetTop\n      bounds.left += el.offsetLeft\n    }\n\n    if (hasOverflowScroll(el)) {\n      bounds.top = el.offsetTop\n      bounds.height = el.offsetHeight\n      bounds.left = el.offsetLeft\n      bounds.width = el.offsetWidth\n\n      foundScrollContainer = true\n    }\n\n    rect.top += el.offsetTop - el.scrollTop\n    rect.left += el.offsetLeft - el.scrollLeft\n\n    el = el.offsetParent as HTMLElement\n  }\n\n  return {rect, bounds}\n}\n","import {\n  ARROW_MARGIN_X,\n  ARROW_MARGIN_Y,\n  ARROW_SIZE,\n  ARROW_THRESHOLD,\n  CORNER_RADIUS,\n} from '../constants'\nimport {ConnectorLine} from './types'\n\nexport function arrowPath(x: number, y: number, dir: number): string {\n  return [\n    `M ${x - ARROW_SIZE} ${y - ARROW_SIZE * dir} `,\n    `L ${x} ${y}`,\n    `L ${x + ARROW_SIZE} ${y - ARROW_SIZE * dir}`,\n  ].join('')\n}\n\nfunction moveTo(x: number, y: number) {\n  return `M${x} ${y}`\n}\n\nfunction lineTo(x: number, y: number) {\n  return `L${x} ${y}`\n}\n\nfunction join(strings: string[], delim = '') {\n  return strings.join(delim)\n}\n\nfunction quadCurve(x1: number, y1: number, x: number, y: number) {\n  return `Q${x1} ${y1} ${x} ${y}`\n}\n\nexport function generateConnectorPath(line: ConnectorLine): string {\n  const {from, to} = line\n  const {left: fromX, top: fromY} = from\n  const {left: toX, top: toY} = to\n\n  const cmds: string[] = []\n\n  // Calculate maximum corner radius\n  const r1 = Math.min(CORNER_RADIUS, Math.abs(fromY - toY) / 2)\n\n  // FROM\n  if (from.isAbove) {\n    cmds.push(\n      moveTo(fromX + ARROW_MARGIN_X, fromY - ARROW_THRESHOLD + ARROW_MARGIN_Y),\n      lineTo(fromX + ARROW_MARGIN_X, fromY - CORNER_RADIUS),\n      quadCurve(fromX + ARROW_MARGIN_X, fromY, fromX + ARROW_MARGIN_X + CORNER_RADIUS, fromY)\n    )\n  } else if (from.isBelow) {\n    cmds.push(\n      moveTo(fromX + ARROW_MARGIN_X, fromY + ARROW_THRESHOLD - ARROW_MARGIN_Y),\n      lineTo(fromX + ARROW_MARGIN_X, fromY + CORNER_RADIUS),\n      quadCurve(fromX + ARROW_MARGIN_X, fromY, fromX + ARROW_MARGIN_X + CORNER_RADIUS, fromY)\n    )\n  } else {\n    cmds.push(moveTo(fromX, fromY))\n  }\n\n  // TO\n  if (to.isAbove) {\n    if (fromY < to.bounds.top) {\n      cmds.push(\n        lineTo(to.bounds.left - 8 - r1, fromY),\n        quadCurve(to.bounds.left - 8, fromY, to.bounds.left - 8, fromY + r1),\n        lineTo(to.bounds.left - 8, toY - r1),\n        quadCurve(to.bounds.left - 8, toY, to.bounds.left - 8 + r1, toY),\n        lineTo(to.bounds.left + ARROW_MARGIN_X - CORNER_RADIUS, toY),\n        quadCurve(\n          to.bounds.left + ARROW_MARGIN_X,\n          toY,\n          to.bounds.left + ARROW_MARGIN_X,\n          toY - CORNER_RADIUS\n        ),\n        lineTo(to.bounds.left + ARROW_MARGIN_X, toY - ARROW_THRESHOLD + ARROW_MARGIN_Y)\n      )\n    } else {\n      cmds.push(\n        lineTo(to.bounds.left + ARROW_MARGIN_X - CORNER_RADIUS, fromY),\n        quadCurve(\n          to.bounds.left + ARROW_MARGIN_X,\n          fromY,\n          to.bounds.left + ARROW_MARGIN_X,\n          fromY - CORNER_RADIUS\n        ),\n        lineTo(to.bounds.left + ARROW_MARGIN_X, toY - ARROW_THRESHOLD + ARROW_MARGIN_Y)\n      )\n    }\n  } else if (to.isBelow) {\n    if (fromY > to.bounds.top + to.bounds.height) {\n      // curl around\n      cmds.push(\n        lineTo(to.bounds.left - ARROW_MARGIN_X - r1, fromY),\n        quadCurve(\n          to.bounds.left - ARROW_MARGIN_X,\n          fromY,\n          to.bounds.left - ARROW_MARGIN_X,\n          fromY - r1\n        ),\n        lineTo(to.bounds.left - ARROW_MARGIN_X, toY + r1),\n        quadCurve(to.bounds.left - ARROW_MARGIN_X, toY, to.bounds.left - ARROW_MARGIN_X + r1, toY),\n        lineTo(to.bounds.left + ARROW_MARGIN_X - CORNER_RADIUS, toY),\n        quadCurve(\n          to.bounds.left + ARROW_MARGIN_X,\n          toY,\n          to.bounds.left + ARROW_MARGIN_X,\n          toY + CORNER_RADIUS\n        ),\n        lineTo(to.bounds.left + ARROW_MARGIN_X, toY + ARROW_THRESHOLD - ARROW_MARGIN_Y)\n      )\n    } else {\n      cmds.push(\n        lineTo(to.bounds.left + ARROW_MARGIN_X - CORNER_RADIUS, fromY),\n        quadCurve(\n          to.bounds.left + ARROW_MARGIN_X,\n          fromY,\n          to.bounds.left + ARROW_MARGIN_X,\n          fromY + CORNER_RADIUS\n        ),\n        lineTo(to.bounds.left + ARROW_MARGIN_X, toY + ARROW_THRESHOLD - ARROW_MARGIN_Y)\n      )\n    }\n  } else if (fromY < toY) {\n    cmds.push(\n      lineTo(to.bounds.left + ARROW_MARGIN_X - r1, fromY),\n      quadCurve(\n        to.bounds.left + ARROW_MARGIN_X,\n        fromY,\n        to.bounds.left + ARROW_MARGIN_X,\n        fromY + r1\n      ),\n      lineTo(to.bounds.left + ARROW_MARGIN_X, toY - r1),\n      quadCurve(to.bounds.left + ARROW_MARGIN_X, toY, to.bounds.left + ARROW_MARGIN_X + r1, toY),\n      lineTo(toX, toY)\n    )\n  } else {\n    cmds.push(\n      lineTo(to.bounds.left + ARROW_MARGIN_X - r1, fromY),\n      quadCurve(\n        to.bounds.left + ARROW_MARGIN_X,\n        fromY,\n        to.bounds.left + ARROW_MARGIN_X,\n        fromY - r1\n      ),\n      lineTo(to.bounds.left + ARROW_MARGIN_X, toY + r1),\n      quadCurve(to.bounds.left + ARROW_MARGIN_X, toY, to.bounds.left + ARROW_MARGIN_X + r1, toY),\n      lineTo(toX, toY)\n    )\n  }\n\n  return join(cmds)\n}\n","import {ARROW_MARGIN_Y, ARROW_THRESHOLD, CONNECTOR_MARGIN} from '../constants'\nimport {ConnectorLinePoint, Rect} from './types'\n\nfunction getConnectorLinePoint(rect: Rect, bounds: Rect): ConnectorLinePoint {\n  const centerY = rect.top + rect.height / 2\n  const isAbove = rect.top + rect.height < bounds.top + ARROW_MARGIN_Y\n  const isBelow = rect.top > bounds.top + bounds.height - ARROW_MARGIN_Y\n\n  return {\n    bounds: bounds,\n    left: rect.left,\n    top: centerY,\n    centerY,\n    startY: rect.top + CONNECTOR_MARGIN,\n    endY: rect.top + rect.height - CONNECTOR_MARGIN,\n    isAbove,\n    isBelow,\n    outOfBounds: isAbove || isBelow,\n  }\n}\n\ninterface Connector {\n  from: {rect: Rect; bounds: Rect}\n  to: {rect: Rect; bounds: Rect}\n}\n\nexport function mapConnectorToLine(connector: Connector): {\n  from: ConnectorLinePoint\n  to: ConnectorLinePoint\n} {\n  const fromBounds = {\n    top: connector.from.bounds.top + ARROW_THRESHOLD,\n    bottom: connector.from.bounds.top + connector.from.bounds.height - ARROW_THRESHOLD,\n    left: connector.from.bounds.left,\n    right: connector.from.bounds.left + connector.from.bounds.width,\n    width: connector.from.bounds.width,\n    height: connector.from.bounds.height - ARROW_THRESHOLD * 2,\n  }\n\n  const from = getConnectorLinePoint(connector.from.rect, fromBounds)\n  from.left = connector.from.rect.left + connector.from.rect.width + 1\n\n  const toBounds = {\n    top: connector.to.bounds.top + ARROW_THRESHOLD,\n    bottom: connector.to.bounds.top + connector.to.bounds.height - ARROW_THRESHOLD,\n    left: connector.to.bounds.left,\n    right: connector.to.bounds.left + connector.to.bounds.width,\n    width: connector.to.bounds.width,\n    height: connector.to.bounds.height - ARROW_THRESHOLD * 2,\n  }\n\n  const to = getConnectorLinePoint(connector.to.rect, toBounds)\n\n  const maxStartY = Math.max(to.startY, from.startY)\n\n  // Align from <-> to vertically\n  from.top = Math.min(maxStartY, from.endY)\n  if (from.top < toBounds.top) {\n    from.top = Math.min(toBounds.top, from.endY)\n  } else if (from.top > toBounds.bottom) {\n    from.top = Math.max(toBounds.bottom, from.startY)\n  }\n  to.top = Math.min(maxStartY, to.endY)\n  if (to.top < fromBounds.top) {\n    to.top = Math.min(fromBounds.top, to.endY)\n  } else if (to.top > fromBounds.bottom) {\n    to.top = Math.max(fromBounds.bottom, to.startY)\n  }\n\n  // Keep within bounds\n  from.top = Math.min(Math.max(from.top, fromBounds.top), fromBounds.bottom)\n  to.top = Math.min(Math.max(to.top, toBounds.top), toBounds.bottom)\n\n  return {from, to}\n}\n","import React from 'react'\nimport {Rect} from './types'\n\nexport function ClampedRect(\n  props: {top: number; left: number; height: number; width: number; bounds: Rect} & Omit<\n    React.ComponentProps<'rect'>,\n    'top' | 'left' | 'height' | 'width'\n  >\n) {\n  const {bounds, ...rest} = props\n  const x = Math.max(bounds.left, props.left)\n  const y = Math.max(props.top, bounds.top)\n  const height = Math.max(0, props.height - (y - props.top))\n  const width = Math.max(0, props.width - (x - props.left))\n\n  return <rect {...rest} x={x} y={y} height={height} width={width} />\n}\n","import {Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {ClampedRect} from './ClampedRect'\n\ninterface PathProps {\n  theme: Theme\n}\n\nexport const DebugRect = styled.rect`\n  stroke: #ccc;\n  fill: none;\n  pointer-events: none;\n  stroke-linecap: round;\n`\n\nexport const ConnectorPath = styled.path(({theme}: PathProps) => {\n  /* these colours aren't freely available on the current theme */\n  const strokeColor = theme.sanity.color.spot.yellow\n\n  return css`\n    fill: none;\n    pointer-events: none;\n    stroke-linecap: round;\n    stroke-linejoin: round;\n    stroke: ${strokeColor};\n  `\n})\n\nexport const InteractivePath = styled.path(({theme}: PathProps) => {\n  /* these colours aren't freely available on the current theme */\n  const strokeColor = theme.sanity.color.spot.yellow\n\n  return css`\n    fill: none;\n    pointer-events: stroke;\n    stroke: ${strokeColor};\n    cursor: pointer;\n    stroke-linecap: round;\n    stroke-linejoin: round;\n    opacity: 0;\n\n    &:hover {\n      opacity: 0.2;\n    }\n  `\n})\n\nexport const RightBarWrapper = styled(ClampedRect)(({theme}: PathProps) => {\n  /* these colours aren't freely available on the current theme */\n  const strokeColor = theme.sanity.color.spot.yellow\n\n  return css`\n    stroke: none;\n    pointer-events: none;\n    fill: ${strokeColor};\n  `\n})\n","import React, {memo} from 'react'\nimport {\n  ARROW_MARGIN_X,\n  ARROW_MARGIN_Y,\n  ARROW_THRESHOLD,\n  DEBUG,\n  INTERACTIVE_STROKE_WIDTH,\n  STROKE_WIDTH,\n} from '../constants'\nimport {arrowPath, generateConnectorPath} from './connectorPath'\nimport {mapConnectorToLine} from './mapConnectorToLine'\nimport {Rect} from './types'\nimport {DebugRect, ConnectorPath, InteractivePath, RightBarWrapper} from './Connector.styled'\n\ninterface Props {\n  from: {rect: Rect; bounds: Rect}\n  to: {rect: Rect; bounds: Rect}\n}\n\nexport const Connector = memo(function Connector({from, to}: Props) {\n  const line = mapConnectorToLine({from, to})\n\n  // If both ends of the connector are out of bounds, then do not render\n  if (line.from.outOfBounds && line.to.outOfBounds) {\n    return null\n  }\n\n  const linePathDescription = generateConnectorPath(line)\n\n  return (\n    <>\n      <InteractivePath d={linePathDescription} strokeWidth={INTERACTIVE_STROKE_WIDTH} />\n\n      <ConnectorPath d={linePathDescription} strokeWidth={STROKE_WIDTH} />\n      <RightBarWrapper\n        top={to.rect.top}\n        left={to.rect.left}\n        height={to.rect.height}\n        width={STROKE_WIDTH}\n        bounds={to.bounds}\n      />\n\n      {line.from.isAbove && (\n        <ConnectorPath\n          d={arrowPath(\n            line.from.left + ARROW_MARGIN_X,\n            line.from.bounds.top - ARROW_THRESHOLD + ARROW_MARGIN_Y,\n            -1\n          )}\n          strokeWidth={STROKE_WIDTH}\n        />\n      )}\n\n      {line.from.isBelow && (\n        <ConnectorPath\n          d={arrowPath(\n            line.from.left + ARROW_MARGIN_X,\n            line.from.bounds.top + line.from.bounds.height + ARROW_THRESHOLD - ARROW_MARGIN_Y,\n            1\n          )}\n          strokeWidth={STROKE_WIDTH}\n        />\n      )}\n\n      {line.to.isAbove && (\n        <ConnectorPath\n          d={arrowPath(\n            line.to.bounds.left + ARROW_MARGIN_X,\n            line.to.bounds.top - ARROW_THRESHOLD + ARROW_MARGIN_Y,\n            -1\n          )}\n          strokeWidth={STROKE_WIDTH}\n        />\n      )}\n\n      {line.to.isBelow && (\n        <ConnectorPath\n          d={arrowPath(\n            line.to.bounds.left + ARROW_MARGIN_X,\n            line.to.bounds.top + line.to.bounds.height + ARROW_THRESHOLD - ARROW_MARGIN_Y,\n            1\n          )}\n          strokeWidth={STROKE_WIDTH}\n        />\n      )}\n\n      {DEBUG && (\n        <>\n          <DebugRect\n            x={line.from.bounds.left}\n            y={line.from.bounds.top}\n            width={line.from.bounds.width}\n            height={line.from.bounds.height}\n            stroke=\"green\"\n          />\n\n          <DebugRect\n            x={line.to.bounds.left}\n            y={line.to.bounds.top}\n            width={line.to.bounds.width}\n            height={line.to.bounds.height}\n            stroke=\"yellow\"\n          />\n\n          {!line.from.outOfBounds && (\n            <g transform={`translate(${line.from.bounds.left} ${line.from.bounds.top})`}>\n              <DebugRect\n                width={line.from.bounds.width}\n                height={line.from.bounds.height}\n                strokeWidth={STROKE_WIDTH}\n                stroke=\"green\"\n              />\n            </g>\n          )}\n\n          {!line.to.outOfBounds && (\n            <g transform={`translate(${line.to.bounds.left} ${line.to.bounds.top})`}>\n              <DebugRect\n                width={line.to.bounds.width}\n                height={line.to.bounds.height}\n                strokeWidth={STROKE_WIDTH}\n                stroke=\"red\"\n              />\n            </g>\n          )}\n        </>\n      )}\n    </>\n  )\n})\n","import {useEffect} from 'react'\nimport {resizeObserver} from '../../../util'\n\nexport function useResizeObserver(\n  element: HTMLDivElement,\n  onResize: (event: ResizeObserverEntry) => void\n): void {\n  useEffect(() => resizeObserver.observe(element, onResize), [element, onResize])\n}\n","import styled from 'styled-components'\n\nexport const SvgWrapper = styled.svg`\n  pointer-events: none;\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n`\n","import React, {useCallback, useMemo, useState} from 'react'\nimport {sortBy} from 'lodash'\nimport {Path} from '@sanity/types'\nimport {ScrollMonitor} from '../../scroll'\nimport {isNonNullable} from '../../../util/isNonNullable'\nimport {findMostSpecificTarget} from '../helpers/findMostSpecificTarget'\nimport {isChangeBar} from '../helpers/isChangeBar'\nimport {scrollIntoView} from '../helpers/scrollIntoView'\nimport {DEBUG_LAYER_BOUNDS} from '../constants'\nimport {getOffsetsTo} from '../helpers/getOffsetsTo'\nimport {TrackedArea, TrackedChange, useReportedValues} from '../tracker'\nimport {Reported} from '../../react-track-elements'\nimport {Connector} from './Connector'\nimport {DebugLayers} from './DebugLayers'\nimport {useResizeObserver} from './useResizeObserver'\nimport {SvgWrapper} from './ConnectorsOverlay.styled'\n\nexport interface Rect {\n  height: number\n  width: number\n  top: number\n  left: number\n}\n\ninterface State {\n  connectors: {\n    field: TrackedChange & {id: string; rect: Rect; bounds: Rect}\n    change: TrackedChange & {id: string; rect: Rect; bounds: Rect}\n    hasFocus: boolean\n    hasHover: boolean\n    hasRevertHover: boolean\n  }[]\n  isHoverConnector: boolean\n}\n\ninterface ConnectorsOverlayProps {\n  rootElement: HTMLDivElement\n  onSetFocus: (nextFocusPath: Path) => void\n}\n\nfunction getState(\n  allReportedValues: Reported<TrackedChange | TrackedArea>[],\n  hovered: string | null,\n  byId: Map<string, TrackedChange | TrackedArea>,\n  rootElement: HTMLElement\n): State {\n  const changeBarsWithHover: Reported<TrackedChange>[] = []\n  const changeBarsWithFocus: Reported<TrackedChange>[] = []\n\n  for (const value of allReportedValues) {\n    if (!isChangeBar(value) || !value[1].isChanged) {\n      continue\n    }\n\n    const [id, reportedChangeBar] = value\n\n    if (id === hovered) {\n      changeBarsWithHover.push(value)\n      continue\n    }\n\n    if (reportedChangeBar.hasHover) {\n      changeBarsWithHover.push(value)\n      continue\n    }\n\n    if (reportedChangeBar.hasFocus) {\n      changeBarsWithFocus.push(value)\n      continue\n    }\n  }\n\n  const isHoverConnector = changeBarsWithHover.length > 0\n\n  const changeBars = isHoverConnector ? changeBarsWithHover : changeBarsWithFocus\n\n  const connectors = changeBars\n    .map(([id]) => {\n      const field = findMostSpecificTarget('field', id, byId)\n      const change = findMostSpecificTarget('change', id, byId)\n\n      if (!field || !change) return null\n\n      return {field: {id, ...field}, change: {id, ...change}}\n    })\n    .filter(isNonNullable)\n    // .filter(({field, change}) => field && change && field.element && change.element)\n    .map(({field, change}) => ({\n      hasHover: field.hasHover || change.hasHover,\n      hasFocus: field.hasFocus,\n      hasRevertHover: change.hasRevertHover,\n      field: {...field, ...getOffsetsTo(field.element, rootElement)},\n      change: {...change, ...getOffsetsTo(change.element, rootElement)},\n    }))\n\n  return {connectors, isHoverConnector}\n}\n\nexport function ConnectorsOverlay(props: ConnectorsOverlayProps) {\n  const {rootElement, onSetFocus} = props\n  const [hovered, setHovered] = React.useState<string | null>(null)\n  const allReportedValues = useReportedValues()\n  const byId: Map<string, TrackedChange | TrackedArea> = useMemo(\n    () => new Map(allReportedValues),\n    [allReportedValues]\n  )\n\n  const [{connectors}, setState] = useState<State>(() =>\n    getState(allReportedValues, hovered, byId, rootElement)\n  )\n\n  const visibleConnectors = useMemo(\n    () => sortBy(connectors, (c) => 0 - c.field.path.length).slice(0, 1),\n    [connectors]\n  )\n\n  const handleScrollOrResize = useCallback(() => {\n    setState(getState(allReportedValues, hovered, byId, rootElement))\n  }, [byId, allReportedValues, hovered, rootElement])\n\n  useResizeObserver(rootElement, handleScrollOrResize)\n\n  return (\n    <ScrollMonitor onScroll={handleScrollOrResize}>\n      <SvgWrapper style={{zIndex: visibleConnectors[0] && visibleConnectors[0].field.zIndex}}>\n        {visibleConnectors.map(({field, change}) => {\n          if (!change) {\n            return null\n          }\n\n          return (\n            <ConnectorGroup\n              field={field}\n              change={change}\n              key={field.id}\n              onSetFocus={onSetFocus}\n              setHovered={setHovered}\n            />\n          )\n        })}\n      </SvgWrapper>\n    </ScrollMonitor>\n  )\n}\n\ninterface ConnectorGroupProps {\n  field: TrackedChange & {id: string; rect: Rect; bounds: Rect}\n  change: TrackedChange & {id: string; rect: Rect; bounds: Rect}\n  setHovered: (id: string | null) => void\n  onSetFocus: (path: Path) => void\n}\n\nfunction ConnectorGroup(props: ConnectorGroupProps) {\n  const {change, field, onSetFocus, setHovered} = props\n\n  const onConnectorClick = useCallback(() => {\n    scrollIntoView(field)\n    scrollIntoView(change)\n    onSetFocus(field.path)\n  }, [field, change, onSetFocus])\n\n  const handleMouseEnter = useCallback(() => setHovered(field.id), [field, setHovered])\n  const handleMouseLeave = useCallback(() => setHovered(null), [setHovered])\n\n  const from = useMemo(\n    () => ({\n      rect: {\n        left: field.rect.left + 2,\n        top: field.rect.top,\n        height: field.rect.height,\n        width: field.rect.width,\n      },\n      bounds: field.bounds,\n    }),\n    [field.bounds, field.rect]\n  )\n\n  const to = useMemo(\n    () => ({rect: change.rect, bounds: change.bounds}),\n    [change.bounds, change.rect]\n  )\n\n  return (\n    <>\n      <g onClick={onConnectorClick} onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave}>\n        <Connector from={from} to={to} />\n      </g>\n\n      {DEBUG_LAYER_BOUNDS && <DebugLayers field={field} change={change} />}\n    </>\n  )\n}\n","import React, {useMemo} from 'react'\nimport {Path} from '@sanity/types'\nimport {ScrollContainer} from '../../scroll'\nimport {ConnectorContext} from '../ConnectorContext'\nimport {ENABLED} from '../constants'\nimport {Tracker} from '../tracker'\nimport {ConnectorsOverlay} from './ConnectorsOverlay'\n\nexport interface EnabledChangeConnectorRootProps {\n  children: React.ReactNode\n  className?: string\n  isReviewChangesOpen: boolean\n  onOpenReviewChanges: () => void\n  onSetFocus: (path: Path) => void\n}\n\nexport function EnabledChangeConnectorRoot({\n  children,\n  className,\n  isReviewChangesOpen,\n  onOpenReviewChanges,\n  onSetFocus,\n  ...restProps\n}: EnabledChangeConnectorRootProps) {\n  const [rootElement, setRootElement] = React.useState<HTMLDivElement | null>()\n\n  const contextValue = useMemo(\n    () => ({\n      isReviewChangesOpen,\n      onOpenReviewChanges,\n      onSetFocus,\n    }),\n    [isReviewChangesOpen, onOpenReviewChanges, onSetFocus]\n  )\n\n  return (\n    <ConnectorContext.Provider value={contextValue}>\n      <Tracker>\n        <ScrollContainer {...restProps} ref={setRootElement} className={className}>\n          {children}\n          {rootElement && <ConnectorsOverlay rootElement={rootElement} onSetFocus={onSetFocus} />}\n        </ScrollContainer>\n      </Tracker>\n    </ConnectorContext.Provider>\n  )\n}\n\nexport interface DisabledChangeConnectorRootProps {\n  className?: string\n  children: React.ReactNode\n}\n\nexport function DisabledChangeConnectorRoot({\n  children,\n  className,\n}: DisabledChangeConnectorRootProps) {\n  return <ScrollContainer className={className}>{children}</ScrollContainer>\n}\n\nexport const ChangeConnectorRoot = ENABLED\n  ? EnabledChangeConnectorRoot\n  : DisabledChangeConnectorRoot\n","import {createContext} from 'react'\nimport {ReviewChangesContextValue} from './types'\n\n/**\n * @internal\n */\nexport const ReviewChangesContext = createContext<ReviewChangesContextValue | null>(null)\n","import React, {ComponentType, createContext, HTMLProps, useContext, useMemo} from 'react'\nimport {Path} from '@sanity/types'\nimport {TemplatePermissionsResult} from '../../../datastores'\n\nconst Context = createContext<ReferenceInputOptions>({})\n\nexport interface TemplateOption {\n  id: string\n  params?: Record<string, string | number | boolean>\n}\n/**\n * unstable\n * @internal\n */\nexport interface EditReferenceOptions {\n  id: string\n  type: string\n  parentRefPath: Path\n  template: TemplateOption\n}\n\nexport interface EditReferenceLinkComponentProps {\n  documentId: string\n  documentType: string\n  parentRefPath: Path\n  template?: TemplateOption\n  children: React.ReactNode\n}\n\n/**\n * unstable\n * @internal\n */\nexport interface ReferenceInputOptions {\n  /**\n   * Represents the highlighted path if ths current document has a related open\n   * child (e.g. reference in place).\n   */\n  activePath?: {path: Path; state: 'selected' | 'pressed' | 'none'}\n  /**\n   * A specialized `EditReferenceLinkComponent` component that takes in the needed props to open a\n   * referenced document to the right\n   */\n  EditReferenceLinkComponent?: ComponentType<\n    Omit<HTMLProps<'a'>, 'children'> & EditReferenceLinkComponentProps\n  >\n\n  initialValueTemplateItems?: TemplatePermissionsResult[]\n\n  /**\n   * Similar to `EditReferenceChildLink` expect without the wrapping component\n   */\n  onEditReference?: (options: EditReferenceOptions) => void\n}\n\n/**\n * unstable\n * @internal\n */\nexport function useReferenceInputOptions() {\n  return useContext(Context)\n}\n\n/**\n * unstable\n * @internal\n */\nexport function ReferenceInputOptionsProvider(\n  props: ReferenceInputOptions & {children: React.ReactNode}\n) {\n  const {\n    children,\n    activePath,\n    EditReferenceLinkComponent,\n    onEditReference,\n    initialValueTemplateItems,\n  } = props\n\n  const contextValue = useMemo(\n    () => ({\n      activePath,\n      EditReferenceLinkComponent,\n      onEditReference,\n      initialValueTemplateItems,\n    }),\n    [activePath, EditReferenceLinkComponent, onEditReference, initialValueTemplateItems]\n  )\n\n  return <Context.Provider value={contextValue}>{children}</Context.Provider>\n}\n","import {FormPatch} from './types'\n\n/**\n * @internal\n */\nexport interface MutationPatchMsg {\n  type: 'mutation'\n  patches: FormPatch[]\n  snapshot: unknown\n}\n\n/**\n * @internal\n */\nexport interface RebasePatchMsg {\n  type: 'rebase'\n  patches: FormPatch[]\n  snapshot: unknown\n}\n\n/**\n * @internal\n */\nexport type PatchMsg = MutationPatchMsg | RebasePatchMsg\n\n/**\n * @internal\n */\nexport interface PatchMsgSubscriber {\n  (msg: PatchMsg): void\n}\n\n/**\n * @internal\n */\nexport interface PatchChannel {\n  publish: (msg: PatchMsg) => void\n  subscribe: (subscriber: PatchMsgSubscriber) => () => void\n}\n\n/**\n * @internal\n */\nexport function createPatchChannel(): PatchChannel {\n  const _subscribers: PatchMsgSubscriber[] = []\n\n  return {\n    publish(msg: PatchMsg) {\n      for (const subscriber of _subscribers) {\n        subscriber(msg)\n      }\n    },\n\n    subscribe(subscriber) {\n      _subscribers.push(subscriber)\n\n      return () => {\n        const idx = _subscribers.indexOf(subscriber)\n\n        if (idx > -1) {\n          _subscribers.splice(idx, 1)\n        }\n      }\n    },\n  }\n}\n","/* eslint-disable camelcase */\n\nimport {Path, PathSegment} from '@sanity/types'\nimport {\n  FormSetIfMissingPatch,\n  FormInsertPatch,\n  FormInsertPatchPosition,\n  FormSetPatch,\n  FormUnsetPatch,\n  FormIncPatch,\n  FormDecPatch,\n} from './types'\n\nexport function setIfMissing(value: any, path: Path = []): FormSetIfMissingPatch {\n  return {\n    type: 'setIfMissing',\n    path,\n    value,\n  }\n}\n\nexport function insert(\n  items: any[],\n  position: FormInsertPatchPosition,\n  path: Path = []\n): FormInsertPatch {\n  return {\n    type: 'insert',\n    path,\n    position,\n    items,\n  }\n}\n\nexport function set(value: any, path: Path = []): FormSetPatch {\n  return {type: 'set', path, value}\n}\n\nexport function unset(path: Path = []): FormUnsetPatch {\n  return {type: 'unset', path}\n}\n\nexport function inc(amount = 1, path: Path = []): FormIncPatch {\n  return {type: 'inc', path, value: amount}\n}\n\nexport function dec(amount = 1, path: Path = []): FormDecPatch {\n  return {type: 'dec', path, value: amount}\n}\n\nexport function prefixPath<T extends {path: Path}>(patch: T, segment: PathSegment): T {\n  return {\n    ...patch,\n    path: [segment, ...patch.path],\n  }\n}\n","import {PathSegment} from '@sanity/types'\nimport {flatten} from 'lodash'\nimport {prefixPath} from './patch'\nimport {FormPatch, PatchArg} from './types'\n\n/**\n * @internal\n */\nexport class PatchEvent {\n  static from(input: PatchArg | PatchEvent): PatchEvent {\n    if (input instanceof PatchEvent) {\n      return input\n    }\n    return new PatchEvent(Array.isArray(input) ? flatten(input) : [input])\n  }\n\n  patches: Array<FormPatch>\n\n  constructor(patches: Array<FormPatch>) {\n    this.patches = patches\n  }\n\n  prepend(...patches: PatchArg[]): PatchEvent {\n    return PatchEvent.from([...flatten(patches), ...this.patches])\n  }\n\n  append(...patches: PatchArg[]): PatchEvent {\n    return PatchEvent.from([...this.patches, ...flatten(patches)])\n  }\n\n  prefixAll(segment: PathSegment): PatchEvent {\n    return PatchEvent.from(this.patches.map((patch) => prefixPath(patch, segment)))\n  }\n}\n","import {AssetSource, ObjectSchemaType, Path, SanityDocument} from '@sanity/types'\nimport {createContext} from 'react'\nimport {PatchChannel} from './patch'\nimport {\n  FormBuilderArrayFunctionComponent,\n  FormBuilderCustomMarkersComponent,\n  FormBuilderFilterFieldFn,\n  FormBuilderMarkersComponent,\n  FormFieldGroup,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderItemCallback,\n  RenderPreviewCallback,\n} from './types'\nimport {ObjectMember, StateTree} from './store'\n\n/**\n * @alpha\n */\nexport interface FormBuilderContextValue {\n  /**\n   * @deprecated INTERNAL USE ONLY\n   */\n  __internal: {\n    components: {\n      ArrayFunctions: FormBuilderArrayFunctionComponent\n      CustomMarkers: FormBuilderCustomMarkersComponent\n      Markers: FormBuilderMarkersComponent\n    }\n    file: {\n      assetSources: AssetSource[]\n      directUploads: boolean\n    }\n    filterField: FormBuilderFilterFieldFn\n    image: {\n      assetSources: AssetSource[]\n      directUploads: boolean\n    }\n    getDocument: () => SanityDocument | undefined\n    patchChannel: PatchChannel\n  }\n\n  autoFocus?: boolean\n  changesOpen?: boolean\n  collapsedFieldSets: StateTree<boolean> | undefined\n  collapsedPaths: StateTree<boolean> | undefined\n  focusPath: Path\n  focused?: boolean\n  groups: FormFieldGroup[]\n  id: string\n  members: ObjectMember[]\n  readOnly?: boolean\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderItemCallback\n  renderPreview: RenderPreviewCallback\n  schemaType: ObjectSchemaType\n  value: {[field in string]: unknown} | undefined\n}\n\n/**\n * @internal\n */\nexport const FormBuilderContext = createContext<FormBuilderContextValue | null>(null)\n","import {useContext} from 'react'\nimport {FormBuilderContext, FormBuilderContextValue} from './FormBuilderContext'\n\n/**\n * @alpha\n */\nexport function useFormBuilder(): FormBuilderContextValue {\n  const formBuilder = useContext(FormBuilderContext)\n\n  if (!formBuilder) {\n    throw new Error('FormBuilder: missing context value')\n  }\n\n  return formBuilder\n}\n","/* eslint-disable react/no-unused-prop-types */\n\nimport {ArraySchemaType, isReferenceSchemaType} from '@sanity/types'\nimport {AddIcon} from '@sanity/icons'\nimport React, {useMemo} from 'react'\nimport {Box, Button, Grid, Menu, MenuButton, MenuItem, Tooltip, Text} from '@sanity/ui'\nimport {useId} from '@reach/auto-id'\nimport {FormArrayInputFunctionsProps} from '../../../types'\n\nexport function DefaultArrayInputFunctions<\n  SchemaType extends ArraySchemaType,\n  MemberType extends {_key: string}\n>(props: FormArrayInputFunctionsProps<SchemaType, MemberType>) {\n  const {type, readOnly, children, onCreateValue, onAppendItem} = props\n  const menuButtonId = useId()\n\n  const insertItem = React.useCallback(\n    (itemType) => {\n      const item = onCreateValue(itemType)\n\n      onAppendItem(item)\n    },\n    [onCreateValue, onAppendItem]\n  )\n\n  const handleAddBtnClick = React.useCallback(() => {\n    insertItem(type.of[0])\n  }, [type, insertItem])\n\n  const popoverProps = useMemo(() => ({constrainSize: true, portal: true}), [])\n\n  if (readOnly) {\n    return (\n      <Tooltip\n        portal\n        content={\n          <Box padding={2} sizing=\"border\">\n            <Text size={1} muted>\n              This field is read-only\n            </Text>\n          </Box>\n        }\n      >\n        <Grid>\n          <Button\n            icon={AddIcon}\n            mode=\"ghost\"\n            disabled\n            text={type.of.length === 1 ? 'Add item' : 'Add item...'}\n          />\n        </Grid>\n      </Tooltip>\n    )\n  }\n\n  return (\n    <Grid gap={1} style={{gridTemplateColumns: 'repeat(auto-fit, minmax(100px, 1fr))'}}>\n      {type.of.length === 1 ? (\n        <Button icon={AddIcon} mode=\"ghost\" onClick={handleAddBtnClick} text=\"Add item\" />\n      ) : (\n        <MenuButton\n          button={<Button icon={AddIcon} mode=\"ghost\" text=\"Add itemâ€¦\" />}\n          id={menuButtonId || ''}\n          menu={\n            <Menu>\n              {type.of.map((memberDef, i) => {\n                // Use reference icon if reference is to one type only\n                const referenceIcon =\n                  isReferenceSchemaType(memberDef) &&\n                  (memberDef.to || []).length === 1 &&\n                  memberDef.to[0].icon\n\n                const icon = memberDef.icon || memberDef.type?.icon || referenceIcon\n                return (\n                  <MenuItem\n                    key={i}\n                    text={memberDef.title || memberDef.type?.name}\n                    onClick={() => insertItem(memberDef)}\n                    icon={icon}\n                  />\n                )\n              })}\n            </Menu>\n          }\n          popover={popoverProps}\n        />\n      )}\n\n      {children}\n    </Grid>\n  )\n}\n\nDefaultArrayInputFunctions.__SANITY_INTERNAL_IMPLEMENTATION = true\n","import {ErrorOutlineIcon, InfoOutlineIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Flex, Stack, Text, Theme} from '@sanity/ui'\nimport React from 'react'\nimport styled, {css} from 'styled-components'\nimport {NodeValidation, PortableTextMarker, RenderCustomMarkers} from '../../../types'\nimport {useFormBuilder} from '../../../useFormBuilder'\n\nexport interface MarkersProps {\n  markers: PortableTextMarker[]\n  validation: NodeValidation[]\n  renderCustomMarkers?: RenderCustomMarkers\n}\n\nconst getIcon = (level: 'error' | 'warning' | 'info') => {\n  if (level === 'error') {\n    return <ErrorOutlineIcon />\n  }\n\n  if (level === 'warning') {\n    return <WarningOutlineIcon />\n  }\n\n  return <InfoOutlineIcon />\n}\n\nconst IconText = styled(Text)(({theme}: {theme: Theme}) => {\n  return css`\n    &[data-info] {\n      color: ${theme.sanity.color.muted.primary.enabled.fg};\n    }\n\n    &[data-warning] {\n      color: ${theme.sanity.color.muted.caution.enabled.fg};\n    }\n\n    &[data-error] {\n      color: ${theme.sanity.color.muted.critical.enabled.fg};\n    }\n  `\n})\n\nexport function DefaultMarkers(props: MarkersProps) {\n  const {markers, validation, renderCustomMarkers} = props\n  const {CustomMarkers} = useFormBuilder().__internal.components\n\n  if (markers.length === 0 && validation.length === 0) {\n    return null\n  }\n\n  return (\n    <Stack space={1}>\n      {validation.length > 0 &&\n        validation.map(({message, level}, index) => (\n          // eslint-disable-next-line react/no-array-index-key\n          <Flex key={`validationItem-${index}`}>\n            <Box marginRight={2} marginBottom={index + 1 === validation.length ? 0 : 2}>\n              <IconText\n                size={1}\n                data-error={level === 'error' ? '' : undefined}\n                data-warning={level === 'warning' ? '' : undefined}\n                data-info={level === 'info' ? '' : undefined}\n              >\n                {getIcon(level)}\n              </IconText>\n            </Box>\n            <Box>\n              <Text size={1}>{message || 'Error'}</Text>\n            </Box>\n          </Flex>\n        ))}\n\n      {markers.length > 0 && (\n        <Box marginTop={validation.length > 0 ? 3 : 0}>\n          {renderCustomMarkers && renderCustomMarkers(markers)}\n          {!renderCustomMarkers && <CustomMarkers markers={markers} />}\n        </Box>\n      )}\n    </Stack>\n  )\n}\n","import React from 'react'\nimport {Text} from '@sanity/ui'\n\n// This is the fallback marker renderer if the block editor didn't get the 'renderCustomMarkers' prop\n// You will probably only see this when you first start to play with custom markers as a developer\nexport function DefaultCustomMarkers() {\n  return (\n    <Text size={1}>\n      This is a example custom marker, please implement <code>renderCustomMarkers</code> function.\n    </Text>\n  )\n}\n","/* eslint-disable react/no-unused-prop-types */\nimport {Path} from '@sanity/types'\nimport React, {memo, useContext} from 'react'\nimport {PatchEvent} from '../../patch'\n\ninterface FormCallbacksValue {\n  onChange: (patchEvent: PatchEvent) => void\n  onPathFocus: (path: Path) => void\n  onPathBlur: (path: Path) => void\n  onPathOpen: (path: Path) => void\n  onSetPathCollapsed: (path: Path, collapsed: boolean) => void\n  onSetFieldSetCollapsed: (path: Path, collapsed: boolean) => void\n  onFieldGroupSelect: (path: Path, fieldGroupName: string) => void\n}\n\nconst FormCallbacksContext = React.createContext<FormCallbacksValue | null>(null)\n\nexport const FormCallbacksProvider = memo(function FormCallbacksProvider(\n  props: FormCallbacksValue & {children: React.ReactNode}\n) {\n  return (\n    <FormCallbacksContext.Provider value={props}>{props.children}</FormCallbacksContext.Provider>\n  )\n})\n\nexport function useFormCallbacks(): FormCallbacksValue {\n  const ctx = useContext(FormCallbacksContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx\n}\n","/* eslint-disable react/no-unused-prop-types */\nimport React, {useContext, createContext, useMemo} from 'react'\nimport {Path} from '@sanity/types'\nimport {startsWith} from '@sanity/util/paths'\nimport {FormFieldPresence} from '../../../presence'\n\nconst PresenceContext = createContext<FormFieldPresence[]>([])\n\nexport function PresenceProvider(props: {\n  presence: FormFieldPresence[]\n  children: React.ReactNode\n}) {\n  return (\n    <PresenceContext.Provider value={props.presence}>{props.children}</PresenceContext.Provider>\n  )\n}\n\nexport function useFormFieldPresence(): FormFieldPresence[] {\n  const ctx = useContext(PresenceContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx\n}\n\nexport function useChildPresence(path: Path): FormFieldPresence[] {\n  const presence = useFormFieldPresence()\n  return useMemo(() => presence.filter((item) => startsWith(path, item.path)), [path, presence])\n}\n","/* eslint-disable react/no-unused-prop-types */\nimport React, {createContext, useContext, useMemo} from 'react'\nimport {Path, ValidationMarker} from '@sanity/types'\nimport {startsWith} from '@sanity/util/paths'\nimport {NodeValidation} from '../../types'\n\nconst ValidationContext = createContext<ValidationMarker[]>([])\n\nexport function ValidationProvider(props: {\n  validation: ValidationMarker[]\n  children: React.ReactNode\n}) {\n  return (\n    <ValidationContext.Provider value={props.validation}>\n      {props.children}\n    </ValidationContext.Provider>\n  )\n}\n\nexport function useValidationMarkers(): ValidationMarker[] {\n  const ctx = useContext(ValidationContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx\n}\n\nexport function useChildValidation(path: Path): NodeValidation[] {\n  const validation = useValidationMarkers()\n  return useMemo(\n    () =>\n      validation\n        .filter((item) => startsWith(path, item.path))\n        .map((marker) => ({\n          message: marker.item.message,\n          level: marker.level,\n          path: marker.path,\n        })) as NodeValidation[],\n    [path, validation]\n  )\n}\n","/* eslint-disable camelcase */\n\nimport {AssetSource, ObjectSchemaType, Path, ValidationMarker} from '@sanity/types'\nimport React, {useEffect, useMemo, useRef} from 'react'\nimport {Source} from '../config'\nimport {FormFieldPresence} from '../presence'\nimport {FormBuilderContext, FormBuilderContextValue} from './FormBuilderContext'\nimport {\n  FIXME,\n  FormBuilderFilterFieldFn,\n  FormFieldGroup,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderItemCallback,\n  RenderPreviewCallback,\n} from './types'\nimport {ObjectMember, StateTree} from './store'\nimport {DefaultArrayInputFunctions} from './inputs/arrays/common/ArrayFunctions'\nimport {DefaultMarkers} from './inputs/PortableText/_legacyDefaultParts/Markers'\nimport {DefaultCustomMarkers} from './inputs/PortableText/_legacyDefaultParts/CustomMarkers'\nimport {PatchChannel, PatchEvent} from './patch'\nimport {FormCallbacksProvider} from './studio/contexts/FormCallbacks'\nimport {PresenceProvider} from './studio/contexts/Presence'\nimport {ValidationProvider} from './studio/contexts/Validation'\nimport {defaultFileAssetSources, defaultImageAssetSources} from './defaults'\n\nexport interface FormBuilderProviderProps {\n  /**\n   * @internal\n   */\n  __internal_patchChannel?: PatchChannel // eslint-disable-line camelcase\n  autoFocus?: boolean\n  changesOpen?: boolean\n  children?: React.ReactNode\n  collapsedFieldSets: StateTree<boolean> | undefined\n  collapsedPaths: StateTree<boolean> | undefined\n  file: Source['form']['file']\n  filterField?: FormBuilderFilterFieldFn\n  focusPath: Path\n  focused?: boolean\n  groups: FormFieldGroup[]\n  id: string\n  image: Source['form']['image']\n  members: ObjectMember[]\n  onChange: (event: PatchEvent) => void\n  onFieldGroupSelect: (path: Path, groupName: string) => void\n  onPathBlur: (path: Path) => void\n  onPathFocus: (path: Path) => void\n  onPathOpen: (path: Path) => void\n  onSetFieldSetCollapsed: (path: Path, collapsed: boolean) => void\n  onSetPathCollapsed: (path: Path, collapsed: boolean) => void\n  presence: FormFieldPresence[]\n  readOnly?: boolean\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderItemCallback\n  renderPreview: RenderPreviewCallback\n  schemaType: ObjectSchemaType\n  unstable?: Source['form']['unstable']\n  validation: ValidationMarker[]\n  value: {[field in string]: unknown} | undefined\n}\n\nconst missingPatchChannel: PatchChannel = {\n  publish: () => undefined,\n  subscribe: () => {\n    console.warn(\n      'No patch channel provided to form-builder. If you need input based patch updates, please provide one'\n    )\n\n    return () => undefined\n  },\n}\n\nexport function FormBuilderProvider(props: FormBuilderProviderProps) {\n  const {\n    __internal_patchChannel: patchChannel = missingPatchChannel,\n    autoFocus,\n    changesOpen,\n    children,\n    collapsedFieldSets,\n    collapsedPaths,\n    file,\n    filterField,\n    focusPath,\n    focused,\n    groups,\n    id,\n    image,\n    members,\n    onChange,\n    onFieldGroupSelect,\n    onPathBlur,\n    onPathFocus,\n    onPathOpen,\n    onSetFieldSetCollapsed,\n    onSetPathCollapsed,\n    presence,\n    readOnly,\n    renderField,\n    renderInput,\n    renderItem,\n    renderPreview,\n    schemaType,\n    unstable,\n    validation,\n    value: documentValue,\n  } = props\n\n  const documentValueRef = useRef(documentValue)\n\n  useEffect(() => {\n    documentValueRef.current = documentValue\n  }, [documentValue])\n\n  const __internal: FormBuilderContextValue['__internal'] = useMemo(\n    () => ({\n      patchChannel, // eslint-disable-line camelcase\n      components: {\n        ArrayFunctions: unstable?.ArrayFunctions || DefaultArrayInputFunctions,\n        CustomMarkers: unstable?.CustomMarkers || DefaultCustomMarkers,\n        Markers: unstable?.Markers || DefaultMarkers,\n      },\n      file: {\n        assetSources: file?.assetSources\n          ? _ensureArrayOfSources(file.assetSources) || defaultFileAssetSources\n          : defaultFileAssetSources,\n        directUploads: file?.directUploads !== false,\n      },\n      filterField: filterField || (() => true),\n      image: {\n        assetSources: image?.assetSources\n          ? _ensureArrayOfSources(image.assetSources) || defaultImageAssetSources\n          : defaultImageAssetSources,\n        directUploads: image?.directUploads !== false,\n      },\n      getDocument: () => documentValueRef.current as FIXME,\n      onChange,\n    }),\n    [file, filterField, image, onChange, patchChannel, unstable]\n  )\n\n  const formBuilder: FormBuilderContextValue = useMemo(\n    () => ({\n      __internal,\n      autoFocus,\n      changesOpen,\n      collapsedFieldSets,\n      collapsedPaths,\n      focusPath,\n      focused,\n      groups,\n      id,\n      members,\n      readOnly,\n      renderField,\n      renderInput,\n      renderItem,\n      renderPreview,\n      schemaType,\n      value: documentValue,\n    }),\n    [\n      __internal,\n      autoFocus,\n      changesOpen,\n      collapsedFieldSets,\n      collapsedPaths,\n      documentValue,\n      focusPath,\n      focused,\n      groups,\n      id,\n      members,\n      readOnly,\n      renderField,\n      renderInput,\n      renderItem,\n      renderPreview,\n      schemaType,\n    ]\n  )\n\n  return (\n    <FormBuilderContext.Provider value={formBuilder}>\n      <FormCallbacksProvider\n        onChange={onChange}\n        onFieldGroupSelect={onFieldGroupSelect}\n        onPathBlur={onPathBlur}\n        onPathFocus={onPathFocus}\n        onPathOpen={onPathOpen}\n        onSetPathCollapsed={onSetPathCollapsed}\n        onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      >\n        <PresenceProvider presence={presence}>\n          <ValidationProvider validation={validation}>{children}</ValidationProvider>\n        </PresenceProvider>\n      </FormCallbacksProvider>\n    </FormBuilderContext.Provider>\n  )\n}\n\nfunction _ensureArrayOfSources(sources: unknown): AssetSource[] | null {\n  if (Array.isArray(sources)) {\n    return sources\n  }\n\n  console.warn('Configured asset sources is not an array:', sources)\n\n  return null\n}\n","/* eslint-disable camelcase */\n\nimport {ObjectSchemaType, Path, ValidationMarker} from '@sanity/types'\nimport React from 'react'\nimport {useSource} from '../../studio'\nimport {PatchChannel, PatchEvent} from '../patch'\nimport {FormBuilderProvider} from '../FormBuilderProvider'\nimport {ObjectMember, StateTree} from '../store'\nimport {FormFieldGroup} from '../types'\nimport {FormFieldPresence} from '../../presence'\n\n/**\n * @alpha This API might change.\n */\nexport interface StudioFormBuilderProviderProps {\n  /**\n   * @internal Considered internal, do not use.\n   */\n  __internal_patchChannel: PatchChannel\n\n  autoFocus?: boolean\n  changesOpen?: boolean\n  children?: React.ReactNode\n  collapsedFieldSets: StateTree<boolean> | undefined\n  collapsedPaths: StateTree<boolean> | undefined\n  focusPath: Path\n  focused: boolean | undefined\n  groups: FormFieldGroup[]\n  id: string\n  members: ObjectMember[]\n  onChange: (changeEvent: PatchEvent) => void\n  onPathBlur: (path: Path) => void\n  onPathFocus: (path: Path) => void\n  onPathOpen: (path: Path) => void\n  onFieldGroupSelect: (path: Path, groupName: string) => void\n  onSetPathCollapsed: (path: Path, collapsed: boolean) => void\n  onSetFieldSetCollapsed: (path: Path, collapsed: boolean) => void\n  presence: FormFieldPresence[]\n  readOnly?: boolean\n  schemaType: ObjectSchemaType\n  validation: ValidationMarker[]\n  value: {[field in string]: unknown} | undefined\n}\n\n/**\n * Default wiring for `FormBuilderProvider` when used with Sanity\n *\n * @alpha This API might change.\n */\nexport function StudioFormBuilderProvider(props: StudioFormBuilderProviderProps) {\n  const {\n    __internal_patchChannel: patchChannel,\n    autoFocus,\n    changesOpen,\n    children,\n    collapsedFieldSets,\n    collapsedPaths,\n    focusPath,\n    focused,\n    groups,\n    id,\n    members,\n    onChange,\n    onPathBlur,\n    onPathFocus,\n    onPathOpen,\n    onFieldGroupSelect,\n    onSetPathCollapsed,\n    onSetFieldSetCollapsed,\n    presence,\n    readOnly,\n    schemaType,\n    validation,\n    value,\n  } = props\n\n  const {file, image, renderField, renderInput, renderItem, renderPreview} = useSource().form\n\n  return (\n    <FormBuilderProvider\n      __internal_patchChannel={patchChannel}\n      autoFocus={autoFocus}\n      changesOpen={changesOpen}\n      collapsedFieldSets={collapsedFieldSets}\n      collapsedPaths={collapsedPaths}\n      file={file}\n      focusPath={focusPath}\n      focused={focused}\n      groups={groups}\n      id={id}\n      image={image}\n      members={members}\n      onChange={onChange}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n      onPathOpen={onPathOpen}\n      onFieldGroupSelect={onFieldGroupSelect}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      presence={presence}\n      readOnly={readOnly}\n      renderField={renderField}\n      renderInput={renderInput}\n      renderItem={renderItem}\n      renderPreview={renderPreview}\n      schemaType={schemaType}\n      validation={validation}\n      value={value}\n    >\n      {children}\n    </FormBuilderProvider>\n  )\n}\n","/* eslint-disable camelcase */\n/* eslint-disable react/jsx-handler-names */\n\nimport {ObjectSchemaType, Path, ValidationMarker} from '@sanity/types'\nimport React, {useCallback, useRef} from 'react'\nimport {FormFieldPresence} from '../../presence'\nimport {FormPatch, PatchChannel, PatchEvent} from '../patch'\nimport {ObjectFormNode} from '../store/types/nodes'\nimport {ObjectInputProps} from '../types'\nimport {EMPTY_ARRAY} from '../utils/empty'\nimport {useFormBuilder} from '../useFormBuilder'\nimport {StateTree} from '../store'\nimport {StudioFormBuilderProvider} from './StudioFormBuilderProvider'\nimport {useFormCallbacks} from './contexts/FormCallbacks'\n\n/**\n * @alpha\n */\nexport interface StudioFormBuilderProps\n  extends Omit<ObjectFormNode, 'level' | 'path' | 'presence' | 'validation'> {\n  /**\n   * @internal Considered internal â€“ do not use.\n   */\n  __internal_patchChannel: PatchChannel\n\n  autoFocus?: boolean\n  changesOpen?: boolean\n  collapsedFieldSets: StateTree<boolean> | undefined\n  collapsedPaths: StateTree<boolean> | undefined\n  focusPath: Path\n  focused: boolean | undefined\n  id: string\n  onChange: (changeEvent: PatchEvent) => void\n  onPathBlur: (path: Path) => void\n  onPathFocus: (path: Path) => void\n  onPathOpen: (path: Path) => void\n  onFieldGroupSelect: (path: Path, groupName: string) => void\n  onSetFieldSetCollapsed: (path: Path, collapsed: boolean) => void\n  onSetPathCollapsed: (path: Path, collapsed: boolean) => void\n  presence: FormFieldPresence[]\n  readOnly?: boolean\n  schemaType: ObjectSchemaType\n  validation: ValidationMarker[]\n  value: {[field in string]: unknown} | undefined\n}\n\n/**\n * @alpha\n */\nexport function StudioFormBuilder(props: StudioFormBuilderProps) {\n  const {\n    __internal_patchChannel: patchChannel,\n    autoFocus,\n    changesOpen,\n    collapsedFieldSets,\n    collapsedPaths,\n    focusPath,\n    focused,\n    groups,\n    id,\n    members,\n    onChange,\n    onPathBlur,\n    onPathFocus,\n    onPathOpen,\n    onFieldGroupSelect,\n    onSetFieldSetCollapsed,\n    onSetPathCollapsed,\n    presence,\n    readOnly,\n    schemaType,\n    validation,\n    value,\n  } = props\n\n  return (\n    <StudioFormBuilderProvider\n      __internal_patchChannel={patchChannel}\n      autoFocus={autoFocus}\n      changesOpen={changesOpen}\n      collapsedFieldSets={collapsedFieldSets}\n      collapsedPaths={collapsedPaths}\n      focusPath={focusPath}\n      focused={focused}\n      groups={groups}\n      id={id}\n      members={members}\n      onChange={onChange}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n      onPathOpen={onPathOpen}\n      onFieldGroupSelect={onFieldGroupSelect}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      presence={presence}\n      validation={validation}\n      readOnly={readOnly}\n      schemaType={schemaType}\n      value={value}\n    >\n      <RootInput />\n    </StudioFormBuilderProvider>\n  )\n}\n\nfunction RootInput() {\n  const {\n    focusPath,\n    focused,\n    groups,\n    id,\n    members,\n    readOnly,\n    renderField,\n    renderInput,\n    renderItem,\n    renderPreview,\n    schemaType,\n    value,\n  } = useFormBuilder()\n\n  const {\n    onChange,\n    onFieldGroupSelect,\n    onPathBlur,\n    onPathFocus,\n    onPathOpen,\n    onSetFieldSetCollapsed,\n    onSetPathCollapsed,\n  } = useFormCallbacks()\n\n  const handleCollapseField = useCallback(\n    (fieldName: string) => onSetPathCollapsed([fieldName], true),\n    [onSetPathCollapsed]\n  )\n\n  const handleExpandField = useCallback(\n    (fieldName: string) => onSetPathCollapsed([fieldName], false),\n    [onSetPathCollapsed]\n  )\n\n  const handleBlur = useCallback(() => onPathBlur(EMPTY_ARRAY), [onPathBlur])\n\n  const handleFocus = useCallback(() => onPathFocus(EMPTY_ARRAY), [onPathFocus])\n\n  const handleChange = useCallback(\n    (patch: FormPatch | FormPatch[] | PatchEvent) => onChange(PatchEvent.from(patch)),\n    [onChange]\n  )\n\n  const focusRef = useRef(null)\n\n  const handleSelectFieldGroup = useCallback(\n    (groupName: string) => onFieldGroupSelect(EMPTY_ARRAY, groupName),\n    [onFieldGroupSelect]\n  )\n\n  const handleOpenField = useCallback((fieldName: string) => onPathOpen([fieldName]), [onPathOpen])\n\n  const handleCloseField = useCallback(() => onPathOpen([]), [onPathOpen])\n\n  const handleCollapseFieldSet = useCallback(\n    (fieldSetName: string) => onSetFieldSetCollapsed([fieldSetName], true),\n    [onSetFieldSetCollapsed]\n  )\n\n  const handleExpandFieldSet = useCallback(\n    (fieldSetName: string) => onSetFieldSetCollapsed([fieldSetName], false),\n    [onSetFieldSetCollapsed]\n  )\n\n  const rootInputProps: ObjectInputProps = {\n    focusPath,\n    elementProps: {ref: focusRef, id, onBlur: handleBlur, onFocus: handleFocus},\n    changed: members.some((m) => m.kind === 'field' && m.field.changed),\n    focused,\n    groups,\n    id,\n    level: 0,\n    members,\n    onChange: handleChange,\n    onCloseField: handleCloseField,\n    onCollapseField: handleCollapseField,\n    onCollapseFieldSet: handleCollapseFieldSet,\n    onExpandField: handleExpandField,\n    onExpandFieldSet: handleExpandFieldSet,\n    onFocusPath: onPathFocus,\n    onOpenField: handleOpenField,\n    onFieldGroupSelect: handleSelectFieldGroup,\n    path: EMPTY_ARRAY,\n    presence: EMPTY_ARRAY,\n    readOnly,\n    renderField,\n    renderInput,\n    renderItem,\n    renderPreview,\n    schemaType,\n    validation: EMPTY_ARRAY,\n    value,\n  }\n\n  return <>{renderInput(rootInputProps)}</>\n}\n","import {arrayToJSONMatchPath} from '@sanity/mutator'\nimport {Path, PathSegment} from '@sanity/types'\n\nconst IS_NUMERIC = /^\\d+$/\n\nfunction unquote(str: string) {\n  return str.replace(/^['\"]/, '').replace(/['\"]$/, '')\n}\n\nfunction splitAttr(segment: string) {\n  const [attr, key] = segment.split('==')\n  return {[attr]: unquote(key)}\n}\n\nfunction coerce(segment: string): PathSegment {\n  return IS_NUMERIC.test(segment) ? Number(segment) : segment\n}\n\nfunction parseGradientPath(focusPathStr: string): Path {\n  return focusPathStr\n    .split(/[[.\\]]/g)\n    .filter(Boolean)\n    .map((seg) => (seg.includes('==') ? splitAttr(seg) : coerce(seg))) as Path\n}\n\n/**\n * @internal\n */\nexport function encodePath(formBuilderPath: Path): string {\n  return arrayToJSONMatchPath(formBuilderPath)\n}\n\n/**\n * @internal\n */\nexport function decodePath(gradientPath: string): Path {\n  return parseGradientPath(gradientPath)\n}\n","import {isArraySchemaType, isObjectSchemaType, isPrimitiveSchemaType} from '@sanity/types'\nimport {\n  ArrayOfObjectsFormNode,\n  ArrayOfPrimitivesFormNode,\n  FieldMember,\n  ObjectFormNode,\n} from '../../store'\n\nexport function isMemberObject(member: FieldMember): member is FieldMember<ObjectFormNode> {\n  return isObjectSchemaType(member.field.schemaType)\n}\n\nexport function isMemberArrayOfPrimitives(\n  member: FieldMember\n): member is FieldMember<ArrayOfPrimitivesFormNode> {\n  return (\n    isArraySchemaType(member.field.schemaType) &&\n    member.field.schemaType.of.every((ofType) => isPrimitiveSchemaType(ofType))\n  )\n}\n\nexport function isMemberArrayOfObjects(\n  member: FieldMember\n): member is FieldMember<ArrayOfObjectsFormNode> {\n  return (\n    isArraySchemaType(member.field.schemaType) &&\n    member.field.schemaType.of.every((ofType) => isObjectSchemaType(ofType))\n  )\n}\n","import {\n  IndexTuple,\n  isIndexSegment,\n  isIndexTuple,\n  isKeyedObject,\n  isKeySegment,\n  KeyedSegment,\n  Path,\n  PathSegment,\n} from '@sanity/types'\nimport {isRecord} from '../../util/isRecord'\n\nconst rePropName =\n  /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g\nconst reKeySegment = /_key\\s*==\\s*['\"](.*)['\"]/\n\nexport function pathToString(path: Path): string {\n  if (!Array.isArray(path)) {\n    throw new Error('Path is not an array')\n  }\n\n  return path.reduce<string>((target, segment, i) => {\n    const segmentType = typeof segment\n    if (segmentType === 'number') {\n      return `${target}[${segment}]`\n    }\n\n    if (segmentType === 'string') {\n      const separator = i === 0 ? '' : '.'\n      return `${target}${separator}${segment}`\n    }\n\n    if (isKeySegment(segment) && segment._key) {\n      return `${target}[_key==\"${segment._key}\"]`\n    }\n\n    if (Array.isArray(segment)) {\n      const [from, to] = segment\n      return `${target}[${from}:${to}]`\n    }\n\n    throw new Error(`Unsupported path segment \\`${JSON.stringify(segment)}\\``)\n  }, '')\n}\n\nexport function getValueAtPath(rootValue: unknown, path: Path): unknown {\n  const segment = path[0]\n  if (!segment) {\n    return rootValue\n  }\n\n  const tail = path.slice(1)\n  if (isIndexSegment(segment)) {\n    return getValueAtPath(Array.isArray(rootValue) ? rootValue[segment] : undefined, tail)\n  }\n\n  if (isKeySegment(segment)) {\n    return getValueAtPath(\n      Array.isArray(rootValue) ? rootValue.find((item) => item._key === segment._key) : undefined,\n      tail\n    )\n  }\n\n  if (typeof segment === 'string') {\n    return getValueAtPath(isRecord(rootValue) ? rootValue[segment] : undefined, tail)\n  }\n\n  throw new Error(`Unknown segment type ${JSON.stringify(segment)}`)\n}\n\nexport function findIndex(array: unknown[], segment: PathSegment): number {\n  if (typeof segment !== 'number' && !isKeySegment(segment)) {\n    return -1\n  }\n\n  return typeof segment === 'number'\n    ? segment\n    : array.findIndex((item) => isKeyedObject(item) && item._key === segment._key)\n}\n\nexport function stringToPath(path: string): Path {\n  const segments = path.match(rePropName)\n  if (!segments) {\n    throw new Error('Invalid path string')\n  }\n\n  return segments.map(normalizePathSegment)\n}\n\nexport function normalizePathSegment(segment: string): PathSegment {\n  if (isIndexSegment(segment)) {\n    return normalizeIndexSegment(segment)\n  }\n\n  if (isKeySegment(segment)) {\n    return normalizeKeySegment(segment)\n  }\n\n  if (isIndexTuple(segment)) {\n    return normalizeIndexTupleSegment(segment)\n  }\n\n  return segment\n}\n\nexport function normalizeIndexSegment(segment: string): PathSegment {\n  return Number(segment.replace(/[^\\d]/g, ''))\n}\n\nexport function normalizeKeySegment(segment: string): KeyedSegment {\n  const segments = segment.match(reKeySegment)\n  if (!segments) {\n    throw new Error('Invalid key segment')\n  }\n\n  return {_key: segments[1]}\n}\n\nexport function normalizeIndexTupleSegment(segment: string): IndexTuple {\n  const [from, to] = segment.split(':').map((seg) => (seg === '' ? seg : Number(seg)))\n  return [from, to]\n}\n\nexport function pathsAreEqual(pathA: Path, pathB: Path): boolean {\n  if (pathA.length !== pathB.length) {\n    return false\n  }\n\n  return pathA.every((segmentA, index) => {\n    const segmentB = pathB[index]\n    if (isKeySegment(segmentA) && isKeySegment(segmentB)) {\n      return segmentA._key === segmentB._key\n    }\n\n    if (isIndexSegment(segmentA)) {\n      return Number(segmentA) === Number(segmentB)\n    }\n\n    if (isIndexTuple(segmentA) && isIndexTuple(segmentB)) {\n      return segmentA[0] === segmentB[0] && segmentA[1] === segmentB[1]\n    }\n\n    return segmentA === segmentB\n  })\n}\n\nexport function getItemKey(arrayItem: unknown): string | undefined {\n  return isKeyedObject(arrayItem) ? arrayItem._key : undefined\n}\n\nexport function getItemKeySegment(arrayItem: unknown): KeyedSegment | undefined {\n  const key = getItemKey(arrayItem)\n  return key ? {_key: key} : undefined\n}\n\nexport function isEmptyObject(item: unknown): boolean {\n  return typeof item === 'object' && item !== null && Object.keys(item).length <= 0\n}\n","import styled from 'styled-components'\nimport {Card, Flex} from '@sanity/ui'\n\nexport const OverlayContainer = styled.div`\n  position: relative;\n`\n\nexport const ContentContainer = styled.div`\n  z-index: 13;\n  opacity: 0;\n  transition: opacity 300ms linear;\n`\n\nexport const CardContainer = styled(Card)`\n  border: 1px solid var(--card-border-color);\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 12;\n  transition: opacity 150ms ease-in-out;\n  opacity: 0;\n  box-sizing: border-box;\n`\n\nexport const FlexContainer = styled(Flex)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n\n  :hover,\n  :focus {\n    & ${CardContainer} {\n      opacity: 0.9;\n    }\n\n    & ${ContentContainer} {\n      opacity: 1;\n    }\n  }\n`\n","// This is transitional in order to track usage of the ActivateOnFocusPart part from within the form-builder package\nimport React from 'react'\nimport {\n  OverlayContainer,\n  FlexContainer,\n  CardContainer,\n  ContentContainer,\n} from './ActivateOnFocus.styles'\n\n/**\n * @internal\n */\nexport interface ActivateOnFocusProps {\n  children: React.ReactNode\n  message?: React.ReactNode\n  onActivate?: () => void\n  isOverlayActive: boolean\n}\n\n/**\n * @internal\n */\nexport function ActivateOnFocus(props: ActivateOnFocusProps) {\n  const {children, message, onActivate, isOverlayActive} = props\n\n  function handleClick() {\n    if (onActivate) {\n      onActivate()\n    }\n  }\n\n  function handleBlur() {\n    if (onActivate && isOverlayActive) {\n      onActivate()\n    }\n  }\n\n  return (\n    <OverlayContainer onClick={handleClick} onBlur={handleBlur}>\n      {isOverlayActive && (\n        <FlexContainer tabIndex={0} align=\"center\" justify=\"center\">\n          <CardContainer\n            // Almost all input elements have radius=1, and this component is\n            // typically used for overlaying input elements.\n            // @todo Consider making `radius` a component property of `ActivateOnFocus`.\n            radius={1}\n          />\n          <ContentContainer>{message}</ContentContainer>\n        </FlexContainer>\n      )}\n      {children}\n    </OverlayContainer>\n  )\n}\n","// eslint-disable-next-line no-empty-function,@typescript-eslint/no-empty-function\n\nimport {isArraySchemaType, isBooleanSchemaType, isObjectSchemaType} from '@sanity/types'\nimport {ArrayOfObjectsInputProps, InputProps, ObjectInputProps} from '../types'\nimport {\n  BooleanFieldProps,\n  FieldProps,\n  ObjectFieldProps,\n  PrimitiveFieldProps,\n} from '../types/fieldProps'\n\nexport function assertType<T>(v: unknown): asserts v is T {}\n\nexport function isObjectInputProps(inputProps: InputProps): inputProps is ObjectInputProps {\n  return isObjectSchemaType(inputProps.schemaType)\n}\n\nexport function isArrayInputProps(inputProps: InputProps): inputProps is ArrayOfObjectsInputProps {\n  return isArraySchemaType(inputProps.schemaType)\n}\n\nexport function isPrimitiveField(fieldProps: FieldProps): fieldProps is PrimitiveFieldProps {\n  return !isObjectSchemaType(fieldProps.schemaType) && !isArraySchemaType(fieldProps.schemaType)\n}\n\nexport function isBooleanField(fieldProps: FieldProps): fieldProps is BooleanFieldProps {\n  return isBooleanSchemaType(fieldProps.schemaType)\n}\n\nexport function isObjectField(fieldProps: FieldProps): fieldProps is ObjectFieldProps {\n  return isObjectSchemaType(fieldProps.schemaType)\n}\n","import {useEffect, useRef} from 'react'\n\n/**\n * A hook that returns the previous value of a component variable\n * This might be provided by React in the future (https://reactjs.org/docs/hooks-faq.html#how-to-get-the-previous-props-or-state)\n */\nexport function usePrevious<T>(\n  /** The value to track. Will return undefined for first render*/\n  value: T\n): T | undefined\nexport function usePrevious<T>(\n  /** The value to track. Will return undefined for first render */\n  value: T,\n  initial: T\n): T\nexport function usePrevious<T>(value: T, initial?: T): T | null {\n  const ref = useRef<T | null>(initial || null)\n  useEffect(() => {\n    ref.current = value\n  }, [value])\n  return ref.current\n}\n","import {useEffect, useRef} from 'react'\nimport shallowEquals from 'shallow-equals'\nimport {usePrevious} from './usePrevious'\n\n/**\n * A hook for doing side effects as a response to a change in a hook value between renders\n *\n * @example\n * ```ts\n * useDidUpdate(hasFocus, (hadFocus, hasFocus) => {\n *  if (hasFocus) {\n *    scrollIntoView(elementRef.current)\n *   }\n * })\n * ```\n */\nexport function useDidUpdate<T>(\n  /** The value you want to respond to changes in. */\n  current: T,\n  /** Callback to run when the value changes. */\n  didUpdate: (previous: T | undefined, current: T) => void,\n  compare?: (previous: T | undefined, current: T) => boolean\n): void\nexport function useDidUpdate<T>(\n  current: T,\n  didUpdate: (previous: T | undefined, current: T | undefined) => void,\n  compare: (previous: T | undefined, current: T) => boolean = shallowEquals\n): void {\n  const previous = usePrevious<T>(current)\n  const initial = useRef<boolean>(true)\n  useEffect(() => {\n    if (initial.current) {\n      initial.current = false\n      return\n    }\n    if (!compare(previous, current)) {\n      didUpdate(previous, current)\n    }\n  }, [didUpdate, current, previous, compare])\n}\n","import getRandomValues from 'get-random-values-esm'\n\n// WHATWG crypto RNG - https://w3c.github.io/webcrypto/Overview.html\nfunction whatwgRNG(length = 16) {\n  const rnds8 = new Uint8Array(length)\n  getRandomValues(rnds8)\n  return rnds8\n}\n\nconst getByteHexTable = (() => {\n  let table: string[]\n  return () => {\n    if (table) {\n      return table\n    }\n    table = []\n    for (let i = 0; i < 256; ++i) {\n      table[i] = (i + 0x100).toString(16).substring(1)\n    }\n    return table\n  }\n})()\n\nexport function randomKey(length?: number) {\n  const table = getByteHexTable()\n  return whatwgRNG(length)\n    .reduce((str, n) => str + table[n], '')\n    .slice(0, length)\n}\n","import {randomKey} from '../inputs/arrays/common/randomKey'\n\nexport function ensureKey(item: any) {\n  return item._key ? item : {...item, _key: randomKey(12)}\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {Path} from '@sanity/types'\nimport {ArrayOfObjectsFormNode, FieldMember} from '../../store'\nimport {\n  ArrayFieldProps,\n  ArrayOfObjectsInputProps,\n  InsertItemEvent,\n  MoveItemEvent,\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../../types'\nimport {FormCallbacksProvider, useFormCallbacks} from '../../studio/contexts/FormCallbacks'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {insert, PatchArg, PatchEvent, setIfMissing, unset} from '../../patch'\nimport {ensureKey} from '../../utils/ensureKey'\nimport {useResolveInitialValueForType} from '../../../datastores'\n\n/**\n * Responsible for creating inputProps and fieldProps to pass to Â´renderInputÂ´ and Â´renderFieldÂ´ for an array input\n * Note: \"ArrayField\" in this context means an object field of an array type\n * @param props - Component props\n */\nexport function ArrayOfObjectsField(props: {\n  member: FieldMember<ArrayOfObjectsFormNode>\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}) {\n  const {\n    onPathBlur,\n    onPathFocus,\n    onChange,\n    onSetPathCollapsed,\n    onSetFieldSetCollapsed,\n    onPathOpen,\n    onFieldGroupSelect,\n  } = useFormCallbacks()\n\n  const {member, renderField, renderInput, renderItem, renderPreview} = props\n  const focusRef = useRef<Element & {focus: () => void}>()\n\n  useDidUpdate(member.field.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const handleFocus = useCallback(\n    (event: React.FocusEvent) => {\n      // We want to handle focus when the array input *itself* element receives\n      // focus, not when a child element receives focus, but React has decided\n      // to let focus bubble, so this workaround is needed\n      // Background: https://github.com/facebook/react/issues/6410#issuecomment-671915381\n      if (event.currentTarget === event.target && event.currentTarget === focusRef.current) {\n        onPathFocus(member.field.path)\n      }\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const handleBlur = useCallback(\n    (event: React.FocusEvent) => {\n      // We want to handle blur when the array input *itself* element receives\n      // blur, not when a child element receives blur, but React has decided\n      // to let focus events bubble, so this workaround is needed\n      // Background: https://github.com/facebook/react/issues/6410#issuecomment-671915381\n      if (event.currentTarget === event.target && event.currentTarget === focusRef.current) {\n        onPathBlur(member.field.path)\n      }\n    },\n    [member.field.path, onPathBlur]\n  )\n\n  const handleChange = useCallback(\n    (event: PatchEvent | PatchArg) => {\n      onChange(PatchEvent.from(event).prepend(setIfMissing([])).prefixAll(member.name))\n    },\n    [onChange, member.name]\n  )\n\n  const handleInsert = useCallback(\n    (event: InsertItemEvent) => {\n      onChange(\n        PatchEvent.from([\n          setIfMissing([]),\n          insert(\n            event.items.map((item) => ensureKey(item)),\n            event.position,\n            [event.referenceItem]\n          ),\n        ]).prefixAll(member.name)\n      )\n    },\n    [member.name, onChange]\n  )\n\n  const handleMoveItem = useCallback(\n    (event: MoveItemEvent) => {\n      const value = member.field.value\n      const item = value?.[event.fromIndex] as any\n      const refItem = value?.[event.toIndex] as any\n      if (event.fromIndex === event.toIndex) {\n        return\n      }\n\n      if (!(item as any)?._key || !(refItem as any)?._key) {\n        // eslint-disable-next-line no-console\n        console.error(\n          'Neither the item you are moving nor the item you are moving to have a key. Cannot continue.'\n        )\n\n        return\n      }\n\n      onChange(\n        PatchEvent.from([\n          unset([{_key: item._key}]),\n          insert([item], event.fromIndex > event.toIndex ? 'before' : 'after', [\n            {_key: refItem._key},\n          ]),\n        ]).prefixAll(member.name)\n      )\n    },\n    [member.field.value, member.name, onChange]\n  )\n\n  const handlePrependItem = useCallback(\n    (item) => {\n      onChange(\n        PatchEvent.from([setIfMissing([]), insert([ensureKey(item)], 'before', [0])]).prefixAll(\n          member.name\n        )\n      )\n    },\n    [member.name, onChange]\n  )\n  const handleAppendItem = useCallback(\n    (item) => {\n      onChange(\n        PatchEvent.from([setIfMissing([]), insert([ensureKey(item)], 'after', [-1])]).prefixAll(\n          member.name\n        )\n      )\n    },\n    [member.name, onChange]\n  )\n\n  const handleCollapse = useCallback(() => {\n    onSetPathCollapsed(member.field.path, true)\n  }, [onSetPathCollapsed, member.field.path])\n\n  const handleExpand = useCallback(() => {\n    onSetPathCollapsed(member.field.path, false)\n  }, [onSetPathCollapsed, member.field.path])\n\n  const handleCollapseItem = useCallback(\n    (itemKey: string) => {\n      onSetPathCollapsed(member.field.path.concat({_key: itemKey}), true)\n    },\n    [onSetPathCollapsed, member.field.path]\n  )\n\n  const handleExpandItem = useCallback(\n    (itemKey: string) => {\n      onSetPathCollapsed(member.field.path.concat({_key: itemKey}), false)\n    },\n    [onSetPathCollapsed, member.field.path]\n  )\n\n  const handleOpenItem = useCallback(\n    (path: Path) => {\n      onPathOpen(path)\n      onSetPathCollapsed(path, false)\n    },\n    [onPathOpen, onSetPathCollapsed]\n  )\n\n  const handleCloseItem = useCallback(() => {\n    onPathOpen(member.field.path)\n    onSetPathCollapsed(member.field.path, true)\n  }, [onPathOpen, member.field.path, onSetPathCollapsed])\n\n  const handleRemoveItem = useCallback(\n    (itemKey: string) => {\n      onChange(PatchEvent.from([unset(member.field.path.concat({_key: itemKey}))]))\n    },\n    [onChange, member.field.path]\n  )\n\n  const handleFocusChildPath = useCallback(\n    (path: Path) => {\n      onPathFocus(member.field.path.concat(path))\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const elementProps = useMemo(\n    (): ArrayOfObjectsInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.field.id,\n      ref: focusRef,\n    }),\n    [handleBlur, handleFocus, member.field.id]\n  )\n\n  const resolveInitialValue = useResolveInitialValueForType()\n\n  const inputProps = useMemo((): ArrayOfObjectsInputProps => {\n    return {\n      level: member.field.level,\n      members: member.field.members,\n      value: member.field.value as any,\n      readOnly: member.field.readOnly,\n      schemaType: member.field.schemaType,\n      changed: member.field.changed,\n      id: member.field.id,\n      onExpand: handleExpand,\n      onCollapse: handleCollapse,\n      onExpandItem: handleExpandItem,\n      onCollapseItem: handleCollapseItem,\n      onCloseItem: handleCloseItem,\n      onOpenItem: handleOpenItem,\n\n      focusPath: member.field.focusPath,\n      focused: member.field.focused,\n\n      path: member.field.path,\n\n      onChange: handleChange,\n      onInsert: handleInsert,\n      onMoveItem: handleMoveItem,\n      onRemoveItem: handleRemoveItem,\n      onAppendItem: handleAppendItem,\n      onPrependItem: handlePrependItem,\n      onFocusPath: handleFocusChildPath,\n      resolveInitialValue,\n\n      validation: member.field.validation,\n      presence: member.field.presence,\n      renderInput,\n      renderField,\n      renderItem,\n      renderPreview,\n      elementProps: elementProps,\n    }\n  }, [\n    member.field.level,\n    member.field.members,\n    member.field.value,\n    member.field.readOnly,\n    member.field.schemaType,\n    member.field.changed,\n    member.field.id,\n    member.field.focusPath,\n    member.field.focused,\n    member.field.path,\n    member.field.validation,\n    member.field.presence,\n    handleExpand,\n    handleCollapse,\n    handleExpandItem,\n    handleCollapseItem,\n    handleCloseItem,\n    handleOpenItem,\n    handleChange,\n    handleInsert,\n    handleMoveItem,\n    handleRemoveItem,\n    handleAppendItem,\n    handlePrependItem,\n    handleFocusChildPath,\n    renderInput,\n    renderField,\n    renderItem,\n    renderPreview,\n    elementProps,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const fieldProps = useMemo((): ArrayFieldProps => {\n    return {\n      name: member.name,\n      index: member.index,\n      level: member.field.level,\n      value: member.field.value,\n      title: member.field.schemaType.title,\n      description: member.field.schemaType.description,\n      collapsible: member.collapsible,\n      collapsed: member.collapsed,\n      changed: member.field.changed,\n      onCollapse: handleCollapse,\n      onExpand: handleExpand,\n      schemaType: member.field.schemaType,\n      inputId: member.field.id,\n      path: member.field.path,\n      presence: member.field.presence,\n      validation: member.field.validation,\n      children: renderedInput,\n      inputProps,\n    }\n  }, [\n    member.name,\n    member.index,\n    member.field.level,\n    member.field.value,\n    member.field.schemaType,\n    member.field.id,\n    member.field.path,\n    member.field.presence,\n    member.field.changed,\n    member.field.validation,\n    member.collapsible,\n    member.collapsed,\n    handleCollapse,\n    handleExpand,\n    renderedInput,\n    inputProps,\n  ])\n\n  return (\n    <FormCallbacksProvider\n      onFieldGroupSelect={onFieldGroupSelect}\n      onChange={handleChange}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onPathOpen={onPathOpen}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n    >\n      {useMemo(() => renderField(fieldProps), [fieldProps, renderField])}\n    </FormCallbacksProvider>\n  )\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {FieldMember} from '../../store'\nimport {\n  ArrayOfObjectsInputProps,\n  PrimitiveFieldProps,\n  PrimitiveInputProps,\n  RenderFieldCallback,\n  RenderInputCallback,\n} from '../../types'\nimport {FormPatch, PatchEvent, set, unset} from '../../patch'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {useFormCallbacks} from '../../studio/contexts/FormCallbacks'\nimport {isBooleanSchemaType, isNumberSchemaType} from '@sanity/types'\n\n/**\n * Responsible for creating inputProps and fieldProps to pass to Â´renderInputÂ´ and Â´renderFieldÂ´ for a primitive field/input\n * @param props - Component props\n */\nexport function PrimitiveField(props: {\n  member: FieldMember\n  renderInput: RenderInputCallback<PrimitiveInputProps>\n  renderField: RenderFieldCallback<PrimitiveFieldProps>\n}) {\n  const {member, renderInput, renderField} = props\n  const focusRef = useRef<{focus: () => void}>()\n\n  const {onPathBlur, onPathFocus, onChange} = useFormCallbacks()\n\n  useDidUpdate(member.field.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const handleBlur = useCallback(\n    (event: React.FocusEvent) => {\n      onPathBlur(member.field.path)\n    },\n    [member.field.path, onPathBlur]\n  )\n\n  const handleFocus = useCallback(\n    (event: React.FocusEvent) => {\n      onPathFocus(member.field.path)\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const handleChange = useCallback(\n    (event: FormPatch | FormPatch[] | PatchEvent) => {\n      onChange(PatchEvent.from(event).prefixAll(member.name))\n    },\n    [onChange, member.name]\n  )\n\n  const handleNativeChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      let inputValue: number | string | boolean = event.currentTarget.value\n      if (isNumberSchemaType(member.field.schemaType)) {\n        inputValue = event.currentTarget.valueAsNumber\n      } else if (isBooleanSchemaType(member.field.schemaType)) {\n        inputValue = event.currentTarget.checked\n      }\n\n      // `valueAsNumber` returns `NaN` on empty input\n      const hasEmptyValue =\n        inputValue === '' || (typeof inputValue === 'number' && isNaN(inputValue))\n\n      onChange(PatchEvent.from(hasEmptyValue ? unset() : set(inputValue)).prefixAll(member.name))\n    },\n    [member.name, member.field.schemaType, onChange]\n  )\n\n  const validationError =\n    useMemo(\n      () =>\n        member.field.validation\n          .filter((item) => item.level === 'error')\n          .map((item) => item.message)\n          .join('\\n'),\n      [member.field.validation]\n    ) || undefined\n\n  const elementProps = useMemo(\n    (): PrimitiveInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.field.id,\n      ref: focusRef,\n      onChange: handleNativeChange,\n      value: String(member.field.value || ''),\n      readOnly: Boolean(member.field.readOnly),\n      placeholder: member.field.schemaType.placeholder,\n    }),\n    [\n      handleBlur,\n      handleFocus,\n      handleNativeChange,\n      member.field.id,\n      member.field.readOnly,\n      member.field.schemaType.placeholder,\n      member.field.value,\n    ]\n  )\n\n  const inputProps = useMemo((): PrimitiveInputProps => {\n    return {\n      value: member.field.value as any,\n      readOnly: member.field.readOnly,\n      schemaType: member.field.schemaType as any,\n      changed: member.field.changed,\n      id: member.field.id,\n      path: member.field.path,\n      focused: member.field.focused,\n      level: member.field.level,\n      onChange: handleChange,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      validationError,\n      elementProps,\n    }\n  }, [\n    member.field.value,\n    member.field.readOnly,\n    member.field.schemaType,\n    member.field.changed,\n    member.field.id,\n    member.field.path,\n    member.field.focused,\n    member.field.level,\n    member.field.validation,\n    member.field.presence,\n    handleChange,\n    validationError,\n    elementProps,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const fieldProps = useMemo((): PrimitiveFieldProps => {\n    return {\n      name: member.name,\n      index: member.index,\n      level: member.field.level,\n      value: member.field.value as any,\n      schemaType: member.field.schemaType as any,\n      title: member.field.schemaType.title,\n      description: member.field.schemaType.description,\n      inputId: member.field.id,\n      path: member.field.path,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      children: renderedInput,\n      changed: member.field.changed,\n      inputProps: inputProps as any,\n    }\n  }, [\n    member.name,\n    member.index,\n    member.field.level,\n    member.field.value,\n    member.field.schemaType,\n    member.field.id,\n    member.field.path,\n    member.field.validation,\n    member.field.presence,\n    member.field.changed,\n    renderedInput,\n    inputProps,\n  ])\n\n  return <>{renderField(fieldProps)}</>\n}\n","import {isArraySchemaType, isObjectSchemaType, SchemaType} from '@sanity/types'\n\nexport function createProtoValue(type: SchemaType): any {\n  if (isObjectSchemaType(type)) {\n    return type.name === 'object' ? {} : {_type: type.name}\n  }\n  if (isArraySchemaType(type)) {\n    return []\n  }\n  if (type.jsonType === 'string') {\n    return ''\n  }\n  if (type.jsonType === 'number') {\n    return 0\n  }\n  if (type.jsonType === 'boolean') {\n    return false\n  }\n  return undefined\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {Path} from '@sanity/types'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {FieldMember, ObjectFormNode} from '../../store'\nimport {\n  ArrayOfObjectsInputProps,\n  ObjectFieldProps,\n  ObjectInputProps,\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../../types'\nimport {PatchArg, PatchEvent, setIfMissing} from '../../patch'\nimport {FormCallbacksProvider, useFormCallbacks} from '../../studio/contexts/FormCallbacks'\nimport {createProtoValue} from '../../utils/createProtoValue'\n\n/**\n * Responsible for creating inputProps and fieldProps to pass to Â´renderInputÂ´ and Â´renderFieldÂ´ for an object input\n * Note: \"ObjectField\" in this context means an object field of an object type (not \"a field of an object\")\n * @param props - Component props\n */\nexport const ObjectField = function ObjectField(props: {\n  member: FieldMember<ObjectFormNode>\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}) {\n  const {\n    onPathBlur,\n    onPathFocus,\n    onChange,\n    onPathOpen,\n    onSetPathCollapsed,\n    onSetFieldSetCollapsed,\n    onFieldGroupSelect,\n  } = useFormCallbacks()\n\n  const {member, renderField, renderInput, renderItem, renderPreview} = props\n  const focusRef = useRef<{focus: () => void}>()\n\n  useDidUpdate(member.field.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const handleBlur = useCallback(() => {\n    onPathBlur(member.field.path)\n  }, [member.field.path, onPathBlur])\n\n  const handleFocus = useCallback(() => {\n    onPathFocus(member.field.path)\n  }, [member.field.path, onPathFocus])\n\n  const handleFocusChildPath = useCallback(\n    (path: Path) => {\n      onPathFocus(member.field.path.concat(path))\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const handleChange = useCallback(\n    (event: PatchEvent | PatchArg) => {\n      onChange(\n        PatchEvent.from(event)\n          .prepend(setIfMissing(createProtoValue(member.field.schemaType)))\n          .prefixAll(member.name)\n      )\n    },\n    [onChange, member.field.schemaType, member.name]\n  )\n\n  const handleCollapse = useCallback(() => {\n    onSetPathCollapsed(member.field.path, true)\n  }, [onSetPathCollapsed, member.field.path])\n\n  const handleExpand = useCallback(() => {\n    onSetPathCollapsed(member.field.path, false)\n  }, [onSetPathCollapsed, member.field.path])\n\n  const handleCollapseField = useCallback(\n    (fieldName: string) => {\n      onSetPathCollapsed(member.field.path.concat(fieldName), true)\n    },\n    [onSetPathCollapsed, member.field.path]\n  )\n  const handleExpandField = useCallback(\n    (fieldName: string) => {\n      onSetPathCollapsed(member.field.path.concat(fieldName), false)\n    },\n    [onSetPathCollapsed, member.field.path]\n  )\n  const handleOpenField = useCallback(\n    (fieldName: string) => {\n      onPathOpen(member.field.path.concat(fieldName))\n    },\n    [onPathOpen, member.field.path]\n  )\n  const handleCloseField = useCallback(() => {\n    onPathOpen(member.field.path)\n  }, [onPathOpen, member.field.path])\n  const handleExpandFieldSet = useCallback(\n    (fieldsetName: string) => {\n      onSetFieldSetCollapsed(member.field.path.concat(fieldsetName), false)\n    },\n    [onSetFieldSetCollapsed, member.field.path]\n  )\n  const handleCollapseFieldSet = useCallback(\n    (fieldsetName: string) => {\n      onSetFieldSetCollapsed(member.field.path.concat(fieldsetName), true)\n    },\n    [onSetFieldSetCollapsed, member.field.path]\n  )\n\n  const handleOpen = useCallback(() => {\n    onPathOpen(member.field.path)\n  }, [onPathOpen, member.field.path])\n\n  const handleClose = useCallback(() => {\n    onPathOpen(member.field.path.slice(0, -1))\n  }, [onPathOpen, member.field.path])\n\n  const handleSelectFieldGroup = useCallback(\n    (groupName: string) => {\n      onFieldGroupSelect(member.field.path, groupName)\n    },\n    [onFieldGroupSelect, member.field.path]\n  )\n\n  const elementProps = useMemo(\n    (): ArrayOfObjectsInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.field.id,\n      ref: focusRef,\n    }),\n    [handleBlur, handleFocus, member.field.id]\n  )\n\n  const inputProps = useMemo((): ObjectInputProps => {\n    return {\n      elementProps,\n      level: member.field.level,\n      members: member.field.members,\n      value: member.field.value,\n      readOnly: member.field.readOnly,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      schemaType: member.field.schemaType,\n      changed: member.field.changed,\n      id: member.field.id,\n      onFieldGroupSelect: handleSelectFieldGroup,\n      onOpenField: handleOpenField,\n      onCloseField: handleCloseField,\n      onCollapseField: handleCollapseField,\n      onExpandField: handleExpandField,\n      onExpandFieldSet: handleExpandFieldSet,\n      onCollapseFieldSet: handleCollapseFieldSet,\n      onFocusPath: handleFocusChildPath,\n      path: member.field.path,\n      focusPath: member.field.focusPath,\n      focused: member.field.focused,\n      groups: member.field.groups,\n      onChange: handleChange,\n      renderField,\n      renderInput,\n      renderItem,\n      renderPreview,\n    }\n  }, [\n    member.field.level,\n    member.field.members,\n    member.field.value,\n    member.field.readOnly,\n    member.field.validation,\n    member.field.presence,\n    member.field.schemaType,\n    member.field.changed,\n    member.field.id,\n    member.field.path,\n    member.field.focusPath,\n    member.field.focused,\n    member.field.groups,\n    handleBlur,\n    handleSelectFieldGroup,\n    handleOpenField,\n    handleCloseField,\n    handleCollapseField,\n    handleExpandField,\n    handleExpandFieldSet,\n    handleCollapseFieldSet,\n    handleFocus,\n    handleFocusChildPath,\n    handleChange,\n    renderField,\n    renderInput,\n    renderItem,\n    renderPreview,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const fieldProps = useMemo((): ObjectFieldProps => {\n    return {\n      name: member.name,\n      index: member.index,\n      level: member.field.level,\n      value: member.field.value,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      title: member.field.schemaType.title,\n      description: member.field.schemaType.description,\n\n      collapsible: member.collapsible,\n      collapsed: member.collapsed,\n      onCollapse: handleCollapse,\n      onExpand: handleExpand,\n\n      open: member.open,\n      changed: member.field.changed,\n\n      onOpen: handleOpen,\n      onClose: handleClose,\n\n      schemaType: member.field.schemaType,\n      inputId: member.field.id,\n      path: member.field.path,\n      children: renderedInput,\n      inputProps,\n    }\n  }, [\n    member.name,\n    member.index,\n    member.field.changed,\n    member.field.level,\n    member.field.value,\n    member.field.validation,\n    member.field.presence,\n    member.field.schemaType,\n    member.field.id,\n    member.field.path,\n    member.collapsible,\n    member.collapsed,\n    member.open,\n    handleCollapse,\n    handleExpand,\n    handleOpen,\n    handleClose,\n    renderedInput,\n    inputProps,\n  ])\n\n  return (\n    <FormCallbacksProvider\n      onFieldGroupSelect={onFieldGroupSelect}\n      onChange={handleChange}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      onPathOpen={onPathOpen}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n    >\n      {useMemo(() => renderField(fieldProps), [fieldProps, renderField])}\n    </FormCallbacksProvider>\n  )\n}\n","import React, {MutableRefObject, useCallback, useMemo, useRef} from 'react'\nimport {ArrayOfPrimitivesFormNode, FieldMember} from '../../store'\nimport {\n  ArrayOfObjectsInputProps,\n  ArrayOfPrimitivesFieldProps,\n  ArrayOfPrimitivesInputProps,\n  FIXME,\n  MoveItemEvent,\n  RenderArrayOfPrimitivesItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../../types'\nimport {FormCallbacksProvider, useFormCallbacks} from '../../studio/contexts/FormCallbacks'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {PatchArg, PatchEvent, set, setIfMissing, unset} from '../../patch'\nimport {PrimitiveValue} from '../../inputs/arrays/ArrayOfPrimitivesInput/types'\n\nfunction move<T>(arr: T[], from: number, to: number): T[] {\n  const copy = arr.slice()\n  const val = copy[from]\n  copy.splice(from, 1)\n  copy.splice(to, 0, val)\n  return copy\n}\n\n/**\n * @example\n * Inserts \"hello\" at the beginning\n * ```ts\n * insertAfter(-1, [\"one\", \"two\"], \"hello\")\n * // => [\"hello\", \"one\", \"two\"]\n * ```\n */\nfunction insertAfter<T>(\n  /**\n   * index to insert item after. An index of -1 will prepend the item\n   */\n  index: number,\n  /**\n   * the array to insert the item into\n   */\n  arr: T[],\n  /**\n   * the item to insert\n   */\n  items: T[]\n): T[] {\n  const copy = arr.slice()\n  copy.splice(index + 1, 0, ...items)\n  return copy\n}\n\n/**\n * Responsible for creating inputProps and fieldProps to pass to Â´renderInputÂ´ and Â´renderFieldÂ´ for an array input\n * Note: \"ArrayField\" in this context means an object field of an array type\n * @param props - Component props\n */\nexport function ArrayOfPrimitivesField(props: {\n  member: FieldMember<ArrayOfPrimitivesFormNode>\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderArrayOfPrimitivesItemCallback\n  renderPreview: RenderPreviewCallback\n}) {\n  const {\n    onPathBlur,\n    onPathFocus,\n    onChange,\n    onPathOpen,\n    onSetPathCollapsed,\n    onSetFieldSetCollapsed,\n    onFieldGroupSelect,\n  } = useFormCallbacks()\n  const {member, renderField, renderInput, renderItem, renderPreview} = props\n\n  const focusRef = useRef<Element & {focus: () => void}>()\n\n  useDidUpdate(member.field.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const handleFocus = useCallback(\n    (event: React.FocusEvent) => {\n      // We want to handle focus when the array input *itself* element receives\n      // focus, not when a child element receives focus, but React has decided\n      // to let focus bubble, so this workaround is needed\n      // Background: https://github.com/facebook/react/issues/6410#issuecomment-671915381\n      if (event.currentTarget === event.target && event.currentTarget === focusRef.current) {\n        onPathFocus(member.field.path)\n      }\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const handleBlur = useCallback(\n    (event: React.FocusEvent) => {\n      // We want to handle blur when the array input *itself* element receives\n      // blur, not when a child element receives blur, but React has decided\n      // to let focus events bubble, so this workaround is needed\n      // Background: https://github.com/facebook/react/issues/6410#issuecomment-671915381\n      if (event.currentTarget === event.target && event.currentTarget === focusRef.current) {\n        onPathBlur(member.field.path)\n      }\n    },\n    [member.field.path, onPathBlur]\n  )\n\n  const handleChange = useCallback(\n    (event: PatchEvent | PatchArg) => {\n      onChange(PatchEvent.from(event).prepend(setIfMissing([])).prefixAll(member.name))\n    },\n    [onChange, member.name]\n  )\n\n  const handleSetCollapsed = useCallback(\n    (collapsed: boolean) => {\n      onSetPathCollapsed(member.field.path, collapsed)\n    },\n    [onSetPathCollapsed, member.field.path]\n  )\n\n  const handleCollapse = useCallback(() => {\n    onSetPathCollapsed(member.field.path, true)\n  }, [onSetPathCollapsed, member.field.path])\n  const handleExpand = useCallback(() => {\n    onSetPathCollapsed(member.field.path, false)\n  }, [onSetPathCollapsed, member.field.path])\n\n  const setValue = useCallback(\n    (nextValue: PrimitiveValue[]) => {\n      onChange(\n        PatchEvent.from(nextValue.length === 0 ? unset() : set(nextValue)).prefixAll(member.name)\n      )\n    },\n    [member.name, onChange]\n  )\n\n  const handleMoveItem = useCallback(\n    (event: MoveItemEvent) => {\n      const {value = []} = member.field\n      if (event.fromIndex === event.toIndex) {\n        return\n      }\n\n      setValue(move(value, event.fromIndex, event.toIndex))\n    },\n    [member.field, setValue]\n  )\n\n  const handleAppend = useCallback(\n    (itemValue: PrimitiveValue) => {\n      const {value = []} = member.field\n      setValue(value.concat(itemValue))\n    },\n    [member.field, setValue]\n  )\n\n  const handlePrepend = useCallback(\n    (itemValue: PrimitiveValue) => {\n      const {value = []} = member.field\n      setValue([itemValue].concat(value || []))\n    },\n    [member.field, setValue]\n  )\n\n  const handleInsert = useCallback(\n    (event: {items: PrimitiveValue[]; position: 'before' | 'after'; referenceIndex: number}) => {\n      const {value = []} = member.field\n\n      const insertIndex = event.referenceIndex + (event.position === 'before' ? -1 : 0)\n      setValue(insertAfter(insertIndex, value, event.items))\n    },\n    [member.field, setValue]\n  )\n\n  const handleRemoveItem = useCallback(\n    (index: number) => {\n      onChange(PatchEvent.from([unset(member.field.path.concat(index))]))\n    },\n    [onChange, member.field.path]\n  )\n\n  const handleFocusIndex = useCallback(\n    (index: number) => {\n      onPathFocus(member.field.path.concat([index]))\n    },\n    [member.field.path, onPathFocus]\n  )\n\n  const elementProps = useMemo(\n    (): ArrayOfObjectsInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.field.id,\n      ref: focusRef,\n    }),\n    [handleBlur, handleFocus, member.field.id]\n  )\n\n  const inputProps = useMemo((): ArrayOfPrimitivesInputProps => {\n    return {\n      level: member.field.level,\n      members: member.field.members,\n      value: member.field.value as any,\n      readOnly: member.field.readOnly,\n      onSetCollapsed: handleSetCollapsed,\n      schemaType: member.field.schemaType,\n      changed: member.field.changed,\n      id: member.field.id,\n      elementProps,\n      path: member.field.path,\n      focusPath: member.field.focusPath,\n      focused: member.field.focused,\n      onChange: handleChange,\n      onInsert: handleInsert,\n      onMoveItem: handleMoveItem,\n      onRemoveItem: handleRemoveItem,\n      onAppendItem: handleAppend,\n      onPrependItem: handlePrepend,\n      validation: member.field.validation,\n      presence: member.field.presence,\n      renderInput,\n      renderItem,\n      onFocusIndex: handleFocusIndex,\n      renderPreview,\n    }\n  }, [\n    member.field.level,\n    member.field.members,\n    member.field.value,\n    member.field.readOnly,\n    member.field.schemaType,\n    member.field.changed,\n    member.field.id,\n    member.field.path,\n    member.field.focusPath,\n    member.field.focused,\n    member.field.validation,\n    member.field.presence,\n    handleSetCollapsed,\n    elementProps,\n    handleChange,\n    handleInsert,\n    handleMoveItem,\n    handleRemoveItem,\n    handleAppend,\n    handlePrepend,\n    renderInput,\n    renderItem,\n    handleFocusIndex,\n    renderPreview,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const fieldProps = useMemo((): ArrayOfPrimitivesFieldProps => {\n    return {\n      name: member.name,\n      index: member.index,\n      level: member.field.level,\n      value: member.field.value,\n      title: member.field.schemaType.title,\n      description: member.field.schemaType.description,\n      collapsible: member.collapsible,\n      collapsed: member.collapsed,\n      onExpand: handleExpand,\n      changed: member.field.changed,\n      onCollapse: handleCollapse,\n      schemaType: member.field.schemaType,\n      inputId: member.field.id,\n      path: member.field.path,\n      presence: member.field.presence,\n      validation: member.field.validation,\n      children: renderedInput,\n      inputProps,\n    }\n  }, [\n    member.name,\n    member.index,\n    member.field.level,\n    member.field.value,\n    member.field.schemaType,\n    member.field.id,\n    member.field.path,\n    member.field.presence,\n    member.field.validation,\n    member.collapsible,\n    member.collapsed,\n    member.field.changed,\n    handleExpand,\n    handleCollapse,\n    renderedInput,\n    inputProps,\n  ])\n\n  return (\n    <FormCallbacksProvider\n      onFieldGroupSelect={onFieldGroupSelect}\n      onChange={handleChange}\n      onPathOpen={onPathOpen}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n    >\n      {useMemo(() => renderField(fieldProps as FIXME), [fieldProps, renderField])}\n    </FormCallbacksProvider>\n  )\n}\n","import React, {memo} from 'react'\nimport {FieldMember} from '../store'\nimport {\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderArrayOfObjectsItemCallback,\n  FIXME,\n  RenderPreviewCallback,\n} from '../types'\nimport {ArrayOfObjectsField} from './fields/ArrayOfObjectsField'\nimport {PrimitiveField} from './fields/PrimitiveField'\nimport {ObjectField} from './fields/ObjectField'\nimport {ArrayOfPrimitivesField} from './fields/ArrayOfPrimitivesField'\nimport {isMemberArrayOfObjects, isMemberArrayOfPrimitives, isMemberObject} from './fields/asserters'\n\nexport interface MemberFieldProps {\n  member: FieldMember\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}\n\nexport const MemberField = memo(function MemberField(props: MemberFieldProps) {\n  const {member, renderField, renderInput, renderItem, renderPreview} = props\n\n  if (isMemberObject(member)) {\n    // this field is of an object type\n    return (\n      <ObjectField\n        member={member}\n        renderField={renderField}\n        renderInput={renderInput}\n        renderItem={renderItem}\n        renderPreview={renderPreview}\n      />\n    )\n  }\n\n  if (isMemberArrayOfPrimitives(member)) {\n    return (\n      <ArrayOfPrimitivesField\n        member={member}\n        renderField={renderField}\n        renderInput={renderInput}\n        // todo: these have different signatures, so renderItem for a primitive input should not be the same as renderItem in array of object inputs\n        renderItem={renderItem as FIXME}\n        renderPreview={renderPreview}\n      />\n    )\n  }\n\n  if (isMemberArrayOfObjects(member)) {\n    return (\n      <ArrayOfObjectsField\n        member={member}\n        renderField={renderField}\n        renderInput={renderInput}\n        renderItem={renderItem}\n        renderPreview={renderPreview}\n      />\n    )\n  }\n\n  return <PrimitiveField member={member} renderField={renderField} renderInput={renderInput} />\n})\n","import {ErrorOutlineIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Flex, Text} from '@sanity/ui'\nimport React, {ComponentProps} from 'react'\nimport styled from 'styled-components'\n\ninterface AlertProps extends Omit<ComponentProps<typeof Card>, 'title'> {\n  title: React.ReactNode\n  status?: 'warning' | 'error'\n  suffix?: React.ReactNode\n}\n\nconst STATUS_TONES = {\n  warning: 'caution',\n  error: 'critical',\n} as const\n\nconst SuffixBox = styled(Box)`\n  border-top: 1px solid var(--card-border-color);\n`\n\nexport function Alert(props: AlertProps) {\n  const {children, status = 'warning', suffix, title, ...rest} = props\n\n  return (\n    <Card radius={2} tone={STATUS_TONES[status]} {...rest} data-ui=\"Alert\">\n      <Flex padding={4}>\n        <Box>\n          <Text size={1}>\n            {status === 'warning' && <WarningOutlineIcon />}\n            {status === 'error' && <ErrorOutlineIcon />}\n          </Text>\n        </Box>\n\n        <Box flex={1} marginLeft={3}>\n          <Text size={1} weight=\"semibold\">\n            {title}\n          </Text>\n\n          {children && <Box marginTop={3}>{children}</Box>}\n        </Box>\n      </Flex>\n\n      {suffix && <SuffixBox>{suffix}</SuffixBox>}\n    </Card>\n  )\n}\n","import {ToggleArrowRightIcon} from '@sanity/icons'\nimport {Box, Flex, Inline, Text} from '@sanity/ui'\nimport React, {useCallback, useEffect, useState} from 'react'\nimport styled from 'styled-components'\n\ninterface DetailsProps {\n  children?: React.ReactNode\n  margin?: number | number[]\n  marginX?: number | number[]\n  marginY?: number | number[]\n  marginTop?: number | number[]\n  marginRight?: number | number[]\n  marginBottom?: number | number[]\n  marginLeft?: number | number[]\n  open?: boolean\n  icon?: React.ReactNode\n  title?: React.ReactNode\n}\n\nconst HeaderButton = styled.button`\n  display: block;\n  -webkit-font-smoothing: inherit;\n  appearance: none;\n  font: inherit;\n  background: none;\n  width: 100%;\n  text-align: left;\n  border: 0;\n  margin: 0;\n  padding: 0;\n  outline: none;\n`\n\nconst ToggleArrow = styled(ToggleArrowRightIcon)<{open: boolean}>`\n  transform: ${(props) => (props.open ? 'rotate(90deg)' : '')};\n`\n\nconst Header = styled(Flex)`\n  cursor: default;\n`\n\nconst IconBox = styled(Box)`\n  & > div > svg {\n    transform: rotate(0);\n    transition: transform 100ms;\n  }\n\n  &[data-open] > div > svg {\n    transform: rotate(90deg);\n  }\n`\n\nexport function Details(props: DetailsProps) {\n  const {children, open: openProp, icon, title = 'Details', ...restProps} = props\n  const [open, setOpen] = useState(openProp || false)\n\n  const handleToggle = useCallback(() => setOpen((v) => !v), [])\n\n  useEffect(() => setOpen(openProp || false), [openProp])\n\n  return (\n    <Box {...restProps}>\n      <HeaderButton type=\"button\" onClick={handleToggle}>\n        <Header align=\"center\">\n          <Inline>\n            <IconBox data-open={open ? '' : undefined}>\n              <Text size={1}>\n                <ToggleArrow open={open} />\n              </Text>\n            </IconBox>\n            {icon && <Box marginLeft={1}>{icon}</Box>}\n            <Box flex={1} marginLeft={1}>\n              <Text size={1} weight=\"medium\">\n                {title}\n              </Text>\n            </Box>\n          </Inline>\n        </Header>\n      </HeaderButton>\n\n      <Box hidden={!open} marginTop={3}>\n        {children}\n      </Box>\n    </Box>\n  )\n}\n","import isValidDate from 'date-fns/isValid'\n\nconst TRUTHY_STRINGS = ['yes', 'true', '1']\nconst FALSEY_STRINGS = ['false', 'no', 'false', '0', 'null']\nconst BOOL_STRINGS = TRUTHY_STRINGS.concat(FALSEY_STRINGS)\n\nconst TRUE = (): true => true\n\nconst has = (prop: string) => (val?: Record<string, any>) => val && val[prop]\nconst is = (typeName: string) => (val?: Record<string, any>) => (val && val._type) === typeName\n\nfunction toLocalDate(input: Date) {\n  const newDate = new Date(input.getTime() + input.getTimezoneOffset() * 60 * 1000)\n  const offset = input.getTimezoneOffset() / 60\n  const hours = input.getHours()\n  newDate.setHours(hours - offset)\n  return newDate\n}\n\nfunction getTZName() {\n  try {\n    return Intl.DateTimeFormat().resolvedOptions().timeZone\n  } catch (e) {} // eslint-disable-line no-empty\n  return null\n}\n\nexport interface ValueConverter {\n  test: NumberConstructor | ((value: any) => boolean)\n  convert:\n    | NumberConstructor\n    | StringConstructor\n    | ((value: any) => boolean | Record<string, any> | string)\n}\n\nexport const converters: {[fromType: string]: {[toType: string]: ValueConverter}} = {\n  string: {\n    number: {\n      test: Number,\n      convert: Number,\n    },\n    boolean: {\n      test: (value: any) => BOOL_STRINGS.includes(value.toLowerCase()),\n      convert: (value: any) =>\n        TRUTHY_STRINGS.includes(value.toLowerCase()) ||\n        !FALSEY_STRINGS.includes(value.toLowerCase()),\n    },\n    richDate: {\n      test: (value: any) => isValidDate(value),\n      convert: (value: any): Record<string, any> => {\n        return {\n          _type: 'richDate',\n          local: toLocalDate(new Date(value)).toJSON(),\n          utc: new Date(value).toJSON(),\n          timezone: getTZName(),\n          offset: new Date().getTimezoneOffset(),\n        }\n      },\n    },\n  },\n  date: {\n    richDate: {\n      test: is('date'),\n      convert: (value: any) => Object.assign({}, value, {_type: 'richDate'}),\n    },\n  },\n  richDate: {\n    datetime: {\n      test: has('utc'),\n      convert: (value: any) => value.utc,\n    },\n  },\n  number: {\n    string: {\n      test: TRUE,\n      convert: String,\n    },\n    boolean: {\n      test: TRUE,\n      convert: Number,\n    },\n  },\n  boolean: {\n    string: {\n      test: TRUE,\n      convert: (value: any) => (value ? 'Yes' : 'No'),\n    },\n    number: {\n      test: TRUE,\n      convert: Number,\n    },\n  },\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {Button, Card, Code, Grid, Stack, Text} from '@sanity/ui'\nimport {useSchema} from '../../../hooks'\nimport {PatchEvent, setIfMissing, unset} from '../../patch'\nimport {Alert} from '../../components/Alert'\nimport {Details} from '../../components/Details'\nimport {isDev} from '../../../environment'\n\ninterface UntypedValueInputProps {\n  validTypes: string[]\n  value: Record<string, unknown>\n  onChange: (event: PatchEvent, value?: Record<string, unknown>) => void\n}\n\nfunction SetMissingTypeButton({\n  value,\n  targetType,\n  onChange,\n}: {\n  value: Record<string, unknown>\n  targetType: string\n  onChange: UntypedValueInputProps['onChange']\n}) {\n  const itemValue = useMemo(() => ({...value, _type: targetType}), [targetType, value])\n\n  const handleClick = useCallback(\n    () => onChange(PatchEvent.from(setIfMissing(targetType, ['_type'])), itemValue),\n    [itemValue, onChange, targetType]\n  )\n\n  return (\n    <Button\n      onClick={handleClick}\n      text={\n        <>\n          Convert to <code>{targetType}</code>\n        </>\n      }\n    />\n  )\n}\n\nfunction UnsetItemButton({\n  value,\n  onChange,\n  validTypes,\n}: {\n  value: Record<string, unknown>\n  validTypes: string[]\n  onChange: UntypedValueInputProps['onChange']\n}) {\n  // Doesn't matter which `_type` we use as long as it's allowed by the array\n  const itemValue = useMemo(() => ({...value, _type: validTypes[0]}), [validTypes, value])\n\n  const handleClick = useCallback(\n    () => onChange(PatchEvent.from(unset()), itemValue),\n    [itemValue, onChange]\n  )\n\n  return <Button onClick={handleClick} tone=\"critical\" text=\"Unset value\" />\n}\n\n/**\n * When the value does not have an `_type` property,\n * but the schema has a named type\n */\nexport function UntypedValueInput({validTypes, value, onChange}: UntypedValueInputProps) {\n  const schema = useSchema()\n  const isSingleValidType = validTypes.length === 1\n  const isHoistedType = schema.has(validTypes[0])\n\n  return (\n    <Alert\n      status=\"warning\"\n      title={\n        <>\n          Property value missing <code>_type</code>\n        </>\n      }\n    >\n      <Details open={isDev} title={<>Developer info</>}>\n        <Stack space={3}>\n          <Text as=\"p\" muted size={1}>\n            Encountered an object value without a <code>_type</code> property.\n          </Text>\n\n          {isSingleValidType && !isHoistedType && (\n            <Text as=\"p\" muted size={1}>\n              Either remove the <code>name</code> property of the object declaration, or set{' '}\n              <code>_type</code> property on items.\n            </Text>\n          )}\n\n          {!isSingleValidType && (\n            <Text as=\"p\" muted size={1}>\n              The following types are valid here according to schema:\n            </Text>\n          )}\n\n          {!isSingleValidType && (\n            <Stack as=\"ul\" space={2}>\n              {validTypes.map((validType) => (\n                <Text as=\"li\" key={validType} muted size={1}>\n                  <code>{validType}</code>\n                </Text>\n              ))}\n            </Stack>\n          )}\n\n          <Stack space={2}>\n            <Text as=\"h4\" weight=\"semibold\" size={1}>\n              Current value (<code>object</code>):\n            </Text>\n\n            <Card border overflow=\"auto\" padding={2} radius={2} tone=\"inherit\">\n              <Code language=\"json\">{JSON.stringify(value, null, 2)}</Code>\n            </Card>\n          </Stack>\n\n          <Grid columns={[1, 2, 2]} gap={1}>\n            {isSingleValidType && (\n              <SetMissingTypeButton onChange={onChange} targetType={validTypes[0]} value={value} />\n            )}\n\n            <UnsetItemButton onChange={onChange} validTypes={validTypes} value={value} />\n          </Grid>\n        </Stack>\n      </Details>\n    </Alert>\n  )\n}\n","import {Button, Card, Code, Stack, Text} from '@sanity/ui'\nimport React, {forwardRef, useCallback, useImperativeHandle, useMemo} from 'react'\nimport {isDev} from '../../../environment'\nimport {PatchEvent, set, unset} from '../../patch'\nimport {Alert} from '../../components/Alert'\nimport {Details} from '../../components/Details'\nimport {converters as CONVERTERS, ValueConverter} from './converters'\nimport {UntypedValueInput} from './UntypedValueInput'\n\ninterface Converter extends ValueConverter {\n  from: string\n  to: string\n}\n\nfunction getConverters(value: unknown, actualType: string, validTypes: string[]): Converter[] {\n  if (!(actualType in CONVERTERS)) {\n    return []\n  }\n\n  return Object.keys(CONVERTERS[actualType])\n    .filter((targetType) => validTypes.includes(targetType))\n    .map((targetType) => ({\n      from: actualType,\n      to: targetType,\n      ...CONVERTERS[actualType][targetType],\n    }))\n    .filter((converter) => converter.test(value))\n}\n\ninterface InvalidValueProps {\n  actualType: string\n  validTypes: string[]\n  value?: unknown\n  onChange: (event: PatchEvent) => void\n}\n\nexport const InvalidValueInput = forwardRef(\n  (props: InvalidValueProps, ref: React.Ref<{focus: () => void}>) => {\n    const {value, actualType, validTypes, onChange} = props\n\n    useImperativeHandle(ref, () => ({\n      // @todo\n      focus: () => undefined,\n    }))\n\n    const handleClearClick = useCallback(() => {\n      onChange(PatchEvent.from(unset()))\n    }, [onChange])\n\n    const handleConvertTo = useCallback(\n      (converted) => {\n        onChange(PatchEvent.from(set(converted)))\n      },\n      [onChange]\n    )\n\n    const converters = useMemo(\n      () => getConverters(value, actualType, validTypes),\n      [value, actualType, validTypes]\n    )\n\n    if (typeof value === 'object' && value !== null && !('_type' in value)) {\n      return (\n        <UntypedValueInput\n          value={value as Record<string, unknown>}\n          validTypes={validTypes}\n          onChange={onChange}\n        />\n      )\n    }\n\n    const suffix = (\n      <Stack padding={2}>\n        <Button onClick={handleClearClick} tone=\"critical\" text=\"Reset value\" />\n      </Stack>\n    )\n\n    return (\n      <Alert status=\"error\" suffix={suffix} title={<>Invalid property value</>}>\n        <Text as=\"p\" muted size={1}>\n          The property value is stored as a value type that does not match the expected type.\n        </Text>\n\n        <Details marginTop={4} open={isDev} title={<>Developer info</>}>\n          <Stack space={3}>\n            {validTypes.length === 1 && (\n              <Text as=\"p\" muted size={1}>\n                The value of this property must be of type <code>{validTypes[0]}</code> according to\n                the schema.\n              </Text>\n            )}\n\n            {validTypes.length === 1 && (\n              <Text as=\"p\" muted size={1}>\n                Mismatching value types typically occur when the schema has recently been changed.\n              </Text>\n            )}\n\n            {validTypes.length !== 1 && (\n              <Text as=\"p\" muted size={1}>\n                Only the following types are valid here according to schema:\n              </Text>\n            )}\n\n            {validTypes.length !== 1 && (\n              <Stack as=\"ul\" space={2}>\n                {validTypes.map((validType) => (\n                  <Text as=\"li\" key={validType}>\n                    <code>{validType}</code>\n                  </Text>\n                ))}\n              </Stack>\n            )}\n\n            <Stack marginTop={2} space={2}>\n              <Text size={1} weight=\"semibold\">\n                The current value (<code>{actualType}</code>)\n              </Text>\n\n              <Card border padding={2} radius={2} tone=\"inherit\">\n                <Code language=\"json\" size={1}>\n                  {JSON.stringify(value, null, 2)}\n                </Code>\n              </Card>\n            </Stack>\n\n            {converters.length > 0 && (\n              <Stack space={1}>\n                {converters.map((converter) => (\n                  <ConvertButton\n                    converter={converter}\n                    key={`${converter.from}-${converter.to}`}\n                    onConvert={handleConvertTo}\n                    value={value}\n                  />\n                ))}\n              </Stack>\n            )}\n          </Stack>\n        </Details>\n      </Alert>\n    )\n  }\n)\n\nInvalidValueInput.displayName = 'InvalidValueInput'\n\nfunction ConvertButton({\n  converter,\n  onConvert,\n  value,\n}: {\n  converter: Converter\n  onConvert: (v: string | number | boolean | Record<string, unknown>) => void\n  value: unknown\n}) {\n  const handleClick = useCallback(\n    () => onConvert(converter.convert(value)),\n    [converter, onConvert, value]\n  )\n\n  return (\n    <Button\n      onClick={handleClick}\n      text={\n        <>\n          Convert to <code>{converter.to}</code>\n        </>\n      }\n    />\n  )\n}\n","/* eslint-disable camelcase */\n\nimport {hues} from '@sanity/color'\nimport {ErrorOutlineIcon, InfoOutlineIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Flex, Placement, Stack, Text, Tooltip} from '@sanity/ui'\nimport React, {useMemo} from 'react'\nimport {NodeValidation} from '../../types/common'\n\nexport interface FormFieldValidationStatusProps {\n  /**\n   * @alpha\n   */\n  validation?: NodeValidation[]\n  /**\n   * @alpha\n   */\n  __unstable_showSummary?: boolean\n  fontSize?: number | number\n  placement?: Placement\n  portal?: boolean\n}\n\nconst EMPTY_ARRAY: never[] = []\n\nconst VALIDATION_COLORS: Record<'error' | 'warning' | 'info', string> = {\n  error: hues.red[500].hex,\n  warning: hues.yellow[500].hex,\n  info: hues.blue[500].hex,\n}\n\nconst VALIDATION_ICONS: Record<'error' | 'warning' | 'info', React.ReactElement> = {\n  error: <ErrorOutlineIcon data-testid=\"input-validation-icon-error\" />,\n  warning: <WarningOutlineIcon data-testid=\"input-validation-icon-warning\" />,\n  info: <InfoOutlineIcon data-testid=\"input-validation-icon-info\" />,\n}\n\nexport function FormFieldValidationStatus(props: FormFieldValidationStatusProps) {\n  const {\n    validation = EMPTY_ARRAY,\n    __unstable_showSummary: showSummary,\n    fontSize,\n    placement = 'top',\n    portal,\n  } = props\n\n  const errors = validation.filter((v) => v.level === 'error')\n  const warnings = validation.filter((v) => v.level === 'warning')\n  const info = validation.filter((v) => v.level === 'info')\n\n  const hasErrors = errors.length > 0\n  const hasWarnings = warnings.length > 0\n  const hasInfo = info.length > 0\n\n  const statusIcon = useMemo(() => {\n    if (hasErrors) return VALIDATION_ICONS.error\n    if (hasWarnings) return VALIDATION_ICONS.warning\n    if (hasInfo) return VALIDATION_ICONS.info\n    return undefined\n  }, [hasErrors, hasInfo, hasWarnings])\n\n  const statusColor = useMemo(() => {\n    if (hasErrors) return VALIDATION_COLORS.error\n    if (hasWarnings) return VALIDATION_COLORS.warning\n    if (hasInfo) return VALIDATION_COLORS.info\n    return undefined\n  }, [hasErrors, hasInfo, hasWarnings])\n\n  return (\n    <Tooltip\n      content={\n        <Stack padding={3} space={3}>\n          {showSummary && <FormFieldValidationSummary validation={validation} />}\n\n          {!showSummary && (\n            <>\n              {validation.map((item, itemIndex) => (\n                // eslint-disable-next-line react/no-array-index-key\n                <FormFieldValidationStatusItem validation={item} key={itemIndex} />\n              ))}\n            </>\n          )}\n        </Stack>\n      }\n      portal={portal}\n      placement={placement}\n      fallbackPlacements={['bottom', 'right', 'left']}\n    >\n      <div>\n        <Text muted size={fontSize} weight=\"semibold\" style={{color: statusColor}}>\n          {statusIcon}\n        </Text>\n      </div>\n    </Tooltip>\n  )\n}\n\nfunction FormFieldValidationStatusItem(props: {validation: NodeValidation}) {\n  const {validation} = props\n\n  const statusIcon = useMemo(() => {\n    if (validation.level === 'error') return VALIDATION_ICONS.error\n    if (validation.level === 'warning') return VALIDATION_ICONS.warning\n    if (validation.level === 'info') return VALIDATION_ICONS.info\n    return undefined\n  }, [validation])\n\n  const statusColor = useMemo(() => {\n    if (validation.level === 'error') return VALIDATION_COLORS.error\n    if (validation.level === 'warning') return VALIDATION_COLORS.warning\n    if (validation.level === 'info') return VALIDATION_COLORS.info\n    return undefined\n  }, [validation])\n\n  return (\n    <Flex>\n      <Box marginRight={2}>\n        <Text size={1} style={{color: statusColor}}>\n          {statusIcon}\n        </Text>\n      </Box>\n      <Box flex={1}>\n        <Text muted size={1}>\n          {validation.message}\n        </Text>\n      </Box>\n    </Flex>\n  )\n}\n\nfunction FormFieldValidationSummary({validation}: {validation: NodeValidation[]}) {\n  const errorMarkers = validation.filter((item) => item.level === 'error')\n  const warningMarkers = validation.filter((item) => item.level === 'warning')\n  const errorLen = errorMarkers.length\n  const warningLen = warningMarkers.length\n\n  const errorsStr = `error${errorLen === 1 ? '' : 's'}`\n  const warningsStr = `warning${warningLen === 1 ? '' : 's'}`\n  const errorText = errorLen && `${errorLen} ${errorsStr}`\n  const warningText = warningLen && `${warningLen} ${warningsStr}`\n\n  const hasErrors = errorLen > 0\n  const hasWarnings = warningLen > 0\n  const hasBoth = hasErrors && hasWarnings\n\n  return (\n    <Text muted size={1}>\n      {errorText || ''}\n      {hasBoth && <> and </>}\n      {warningText || ''}\n    </Text>\n  )\n}\n","/* eslint-disable camelcase */\n\nimport {Box, Flex, Stack, Text} from '@sanity/ui'\nimport React, {memo} from 'react'\nimport {NodeValidation} from '../../types'\nimport {FormFieldValidationStatus} from './FormFieldValidationStatus'\n\nexport interface FormFieldHeaderTextProps {\n  /**\n   * @alpha\n   */\n  validation?: NodeValidation[]\n  description?: React.ReactNode\n  /**\n   * The unique ID used to target the actual input element\n   */\n  inputId?: string\n  title?: React.ReactNode\n}\n\nconst EMPTY_ARRAY: never[] = []\n\nexport const FormFieldHeaderText = memo(function FormFieldHeaderText(\n  props: FormFieldHeaderTextProps\n) {\n  const {description, inputId, title, validation = EMPTY_ARRAY} = props\n  const hasValidations = validation.length > 0\n\n  return (\n    <Stack space={2}>\n      <Flex>\n        <Text as=\"label\" htmlFor={inputId} weight=\"semibold\" size={1}>\n          {title || <span style={{color: 'var(--card-muted-fg-color)'}}>Untitled</span>}\n        </Text>\n\n        {hasValidations && (\n          <Box marginLeft={2}>\n            <FormFieldValidationStatus fontSize={1} validation={validation} />\n          </Box>\n        )}\n      </Flex>\n\n      {description && (\n        <Text muted size={1}>\n          {description}\n        </Text>\n      )}\n    </Stack>\n  )\n})\n","/* eslint-disable camelcase */\n\nimport React, {memo} from 'react'\nimport {Box, Flex} from '@sanity/ui'\nimport {FieldPresence} from '../../../presence'\nimport {NodePresence, NodeValidation} from '../../types'\nimport {FormFieldHeaderText} from './FormFieldHeaderText'\n\nexport interface FormFieldHeaderProps {\n  /**\n   * @alpha\n   */\n  validation?: NodeValidation[]\n  /**\n   * @alpha\n   */\n  __unstable_presence?: NodePresence[]\n  description?: React.ReactNode\n  /**\n   * The unique ID used to target the actual input element\n   */\n  inputId?: string\n  title?: React.ReactNode\n}\n\nexport const FormFieldHeader = memo(function FormFieldHeader(props: FormFieldHeaderProps) {\n  const {validation, __unstable_presence: presence, description, inputId, title} = props\n\n  return (\n    <Flex align=\"flex-end\">\n      <Box flex={1} paddingY={2}>\n        <FormFieldHeaderText\n          validation={validation}\n          description={description}\n          inputId={inputId}\n          title={title}\n        />\n      </Box>\n\n      {presence && presence.length > 0 && (\n        <Box>\n          <FieldPresence maxAvatars={4} presence={presence} />\n        </Box>\n      )}\n    </Flex>\n  )\n})\n","/* eslint-disable camelcase */\n\nimport {Stack} from '@sanity/ui'\nimport React, {memo} from 'react'\n\nimport {NodePresence, NodeValidation} from '../../types/common'\nimport {FormFieldHeader} from './FormFieldHeader'\n\nexport interface FormFieldProps {\n  /**\n   * @alpha\n   */\n  validation?: NodeValidation[]\n  /**\n   * @alpha\n   */\n  __unstable_presence?: NodePresence[]\n  children: React.ReactNode\n  description?: React.ReactNode\n  /**\n   * The unique ID used to target the actual input element\n   */\n  inputId?: string\n  /**\n   * The nesting level of the form field\n   */\n  level?: number\n  title?: React.ReactNode\n}\n\nexport const FormField = memo(function FormField(\n  props: FormFieldProps & Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'height' | 'ref'>\n) {\n  const {\n    validation,\n    __unstable_presence: presence,\n    children,\n    description,\n    inputId,\n    level,\n    title,\n    ...restProps\n  } = props\n  return (\n    <Stack {...restProps} data-level={level} space={1}>\n      {/*\n        NOTE: Itâ€™s not ideal to hide validation, presence and description when there's no `title`.\n        So we might want to separate the concerns of input vs formfield components later on.\n      */}\n      {title && (\n        <FormFieldHeader\n          validation={validation}\n          __unstable_presence={presence}\n          description={description}\n          inputId={inputId}\n          title={title}\n        />\n      )}\n\n      <div>{children}</div>\n    </Stack>\n  )\n})\n","function focusRingBorderStyle(border: {color: string; width: number}): string {\n  return `inset 0 0 0 ${border.width}px ${border.color}`\n}\n\nexport function focusRingStyle(opts: {\n  base?: {bg: string}\n  border?: {color: string; width: number}\n  focusRing: {offset: number; width: number}\n}): string {\n  const {base, border, focusRing} = opts\n  const focusRingOutsetWidth = focusRing.offset + focusRing.width\n  const focusRingInsetWidth = 0 - focusRing.offset\n  const bgColor = base ? base.bg : 'var(--card-bg-color)'\n\n  return [\n    focusRingInsetWidth > 0 && `inset 0 0 0 ${focusRingInsetWidth}px var(--card-focus-ring-color)`,\n    border && focusRingBorderStyle(border),\n    focusRingInsetWidth < 0 && `0 0 0 ${0 - focusRingInsetWidth}px ${bgColor}`,\n    focusRingOutsetWidth > 0 && `0 0 0 ${focusRingOutsetWidth}px var(--card-focus-ring-color)`,\n  ]\n    .filter(Boolean)\n    .join(',')\n}\n","import {Box, Flex, rem, Text, Theme} from '@sanity/ui'\nimport React, {memo} from 'react'\nimport {ToggleArrowRightIcon} from '@sanity/icons'\nimport styled, {css} from 'styled-components'\nimport {focusRingStyle} from './styles'\n\nexport interface FormFieldSetLegendProps {\n  collapsed: boolean\n  collapsible?: boolean\n  onClick?: () => void\n  title: React.ReactNode\n}\n\nconst Root = styled.legend`\n  /* See: https://thatemil.com/blog/2015/01/03/reset-your-fieldset/ */\n  padding: 0;\n  display: table;\n`\n\nconst ToggleButton = styled(Flex).attrs({forwardedAs: 'button'})((props: {theme: Theme}) => {\n  const {theme} = props\n  const {focusRing, radius} = theme.sanity\n  const {base} = theme.sanity.color\n\n  return css`\n    appearance: none;\n    border: 0;\n    background: none;\n    color: inherit;\n    -webkit-font-smoothing: inherit;\n    font: inherit;\n    outline: none;\n    border-radius: ${rem(radius[1])};\n\n    &:not([hidden]) {\n      display: flex;\n    }\n\n    &:focus {\n      box-shadow: ${focusRingStyle({base, focusRing})};\n    }\n\n    &:focus:not(:focus-visible) {\n      box-shadow: none;\n    }\n  `\n})\n\nconst ToggleIconBox = styled(Box)`\n  width: 9px;\n  height: 9px;\n  margin-right: 3px;\n\n  & svg {\n    transition: transform 100ms;\n  }\n`\n\nexport const FormFieldSetLegend = memo(function FormFieldSetLegend(props: FormFieldSetLegendProps) {\n  const {collapsed, collapsible, onClick, title} = props\n\n  const text = (\n    <Text weight=\"semibold\" size={1}>\n      {title || <span style={{color: 'var(--card-muted-fg-color)'}}>Untitled</span>}\n    </Text>\n  )\n\n  if (!collapsible) {\n    return <Root>{text}</Root>\n  }\n\n  return (\n    <Root>\n      <ToggleButton type=\"button\" onClick={onClick}>\n        <ToggleIconBox>\n          <Text muted size={1}>\n            <ToggleArrowRightIcon\n              style={{\n                transform: `rotate(${collapsed ? '0' : '90deg'}) translate3d(0, 0, 0)`,\n              }}\n            />\n          </Text>\n        </ToggleIconBox>\n\n        {text}\n      </ToggleButton>\n    </Root>\n  )\n})\n","/* eslint-disable camelcase */\n\nimport {Box, Flex, Grid, rem, Stack, Text, Theme, useForwardedRef} from '@sanity/ui'\nimport React, {forwardRef, useCallback, useMemo} from 'react'\nimport styled, {css} from 'styled-components'\nimport {FieldPresence} from '../../../presence'\nimport {NodePresence, NodeValidation} from '../../types'\nimport {FormFieldValidationStatus} from './FormFieldValidationStatus'\nimport {FormFieldSetLegend} from './FormFieldSetLegend'\nimport {focusRingStyle} from './styles'\n\nexport interface FormFieldSetProps {\n  /**\n   * @alpha\n   */\n  __unstable_presence?: NodePresence[]\n  children: React.ReactNode | (() => React.ReactNode)\n  collapsed?: boolean\n  collapsible?: boolean\n  columns?: number | number[]\n  description?: React.ReactNode\n  /**\n   * The nesting level of the form field set\n   */\n  level?: number\n  onCollapse?: () => void\n  onExpand?: () => void\n  title?: React.ReactNode\n  /**\n   * @alpha\n   */\n  validation?: NodeValidation[]\n}\n\nfunction getChildren(children: React.ReactNode | (() => React.ReactNode)): React.ReactNode {\n  return typeof children === 'function' ? children() : children\n}\n\nconst Root = styled(Box).attrs({forwardedAs: 'fieldset'})`\n  border: none;\n\n  /* See: https://thatemil.com/blog/2015/01/03/reset-your-fieldset/ */\n  body:not(:-moz-handler-blocked) & {\n    display: table-cell;\n  }\n`\n\nconst Content = styled(Box)<{\n  /*\n   * @note: The dollar sign ($) prefix is a `styled-components` convention for\n   * denoting transient props. See:\n   * https://styled-components.com/docs/api#transient-props\n   */\n  $borderLeft: boolean\n  theme: Theme\n}>((props) => {\n  const {$borderLeft, theme} = props\n  const {focusRing, radius} = theme.sanity\n  const {base} = theme.sanity.color\n\n  return css`\n    outline: none;\n    border-left: ${$borderLeft ? '1px solid var(--card-border-color)' : undefined};\n    border-radius: ${rem(radius[1])};\n\n    &:focus {\n      box-shadow: ${focusRingStyle({base, focusRing: {...focusRing, offset: 2}})};\n    }\n\n    &:focus:not(:focus-visible) {\n      box-shadow: none;\n    }\n  `\n})\n\nconst EMPTY_ARRAY: never[] = []\n\nexport const FormFieldSet = forwardRef(function FormFieldSet(\n  props: FormFieldSetProps & Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'height' | 'ref'>,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {\n    validation = EMPTY_ARRAY,\n    __unstable_presence: presence = EMPTY_ARRAY,\n    children,\n    collapsible,\n    columns,\n    description,\n    level = 0,\n    onFocus,\n    onCollapse,\n    onExpand,\n    collapsed,\n    tabIndex,\n    title,\n    ...restProps\n  } = props\n\n  const hasValidationMarkers = validation.length > 0\n  const forwardedRef = useForwardedRef(ref)\n\n  const handleFocus = useCallback(\n    (event: React.FocusEvent<HTMLDivElement>) => {\n      const element = forwardedRef.current\n\n      if (element === event.target) {\n        if (onFocus) onFocus(event)\n      }\n    },\n    [forwardedRef, onFocus]\n  )\n\n  const handleToggle = useCallback(\n    () => (collapsed ? onExpand?.() : onCollapse?.()),\n    [collapsed, onCollapse, onExpand]\n  )\n\n  const content = useMemo(() => {\n    if (collapsed) {\n      return null\n    }\n    return (\n      <Grid columns={columns} gapX={4} gapY={5}>\n        {getChildren(children)}\n      </Grid>\n    )\n  }, [children, collapsed, columns])\n\n  return (\n    <Root data-level={level} {...restProps}>\n      {title && (\n        <Flex align=\"flex-end\">\n          <Box flex={1} paddingY={2}>\n            <Stack space={2}>\n              <Flex>\n                <FormFieldSetLegend\n                  collapsed={Boolean(collapsed)}\n                  collapsible={collapsible}\n                  onClick={collapsible ? handleToggle : undefined}\n                  title={title}\n                />\n\n                {hasValidationMarkers && (\n                  <Box marginLeft={2}>\n                    <FormFieldValidationStatus fontSize={1} validation={validation} />\n                  </Box>\n                )}\n              </Flex>\n\n              {description && (\n                <Text muted size={1}>\n                  {description}\n                </Text>\n              )}\n            </Stack>\n          </Box>\n\n          {presence.length > 0 && (\n            <Box>\n              <FieldPresence maxAvatars={4} presence={presence} />\n            </Box>\n          )}\n        </Flex>\n      )}\n\n      <Content\n        $borderLeft={level > 0}\n        hidden={collapsed}\n        marginTop={1}\n        paddingLeft={level === 0 ? 0 : 3}\n        onFocus={typeof tabIndex === 'number' && tabIndex > -1 ? handleFocus : undefined}\n        ref={forwardedRef}\n        tabIndex={tabIndex}\n      >\n        {!collapsed && content}\n      </Content>\n    </Root>\n  )\n})\n","import React from 'react'\nimport styled from 'styled-components'\n\nexport interface FieldStatusProps {\n  children?: React.ReactNode\n  maxAvatars?: number\n  position?: 'top' | 'bottom'\n}\n\nconst Root = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  box-sizing: border-box;\n  min-height: var(--avatar-height);\n  width: 77px;\n  margin-left: var(--small-padding);\n\n  &[data-max-avatars='1'] {\n    max-width: 23px;\n  }\n\n  &[data-position='top'] {\n    align-self: flex-start;\n  }\n\n  &[data-position='bottom'] {\n    align-self: flex-end;\n  }\n`\n\nexport function FormFieldStatus({children, maxAvatars, position = 'bottom'}: FieldStatusProps) {\n  return (\n    <Root data-max-avatars={maxAvatars} data-position={position}>\n      {children}\n    </Root>\n  )\n}\n","import {Button, Stack, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {randomKey} from '@sanity/util/content'\nimport {MissingKeysError} from '../../../store/types/memberErrors'\nimport {Details} from '../../../components/Details'\nimport {isDev} from '../../../../environment'\nimport {Alert} from '../../../components/Alert'\nimport {PatchEvent, setIfMissing} from '../../../patch'\nimport {FormField} from '../../../components/formField'\n\ninterface Props {\n  error: MissingKeysError\n  onChange: (patchEvent: PatchEvent) => void\n}\n\nexport function MissingKeysAlert(props: Props) {\n  const {error, onChange} = props\n  const handleFixMissingKeys = useCallback(() => {\n    onChange(\n      PatchEvent.from((error.value || []).map((val, i) => setIfMissing(randomKey(), [i, '_key'])))\n    )\n  }, [error.value, onChange])\n\n  return (\n    <FormField title={error.schemaType.title} description={error.schemaType.description}>\n      <Alert\n        status=\"warning\"\n        suffix={\n          <Stack padding={2}>\n            <Button onClick={handleFixMissingKeys} text=\"Add missing keys\" tone=\"caution\" />\n          </Stack>\n        }\n        title={<>Missing keys</>}\n      >\n        <Text as=\"p\" muted size={1}>\n          Some items in the list are missing their keys. This must be fixed in order to edit the\n          list.\n        </Text>\n\n        <Details marginTop={4} open={isDev} title={<>Developer info</>}>\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              This usually happens when items are created using an API client, and the{' '}\n              <code>_key</code> property has not been included.\n            </Text>\n\n            <Text as=\"p\" muted size={1}>\n              The value of the <code>_key</code> property must be a unique string.\n            </Text>\n          </Stack>\n        </Details>\n        {/* TODO: render array items and highlight the items with missing key */}\n      </Alert>\n    </FormField>\n  )\n}\n","import {Button, Stack, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {FormField} from '../../../components/formField'\nimport {Alert} from '../../../components/Alert'\nimport {DuplicateKeysError} from '../../../store/types/memberErrors'\nimport {PatchEvent, set} from '../../../patch'\nimport {Details} from '../../../components/Details'\nimport {isDev} from '../../../../environment'\n\ninterface Props {\n  error: DuplicateKeysError\n  onChange: (patchEvent: PatchEvent) => void\n}\n\nexport function DuplicateKeysAlert(props: Props) {\n  const {error, onChange} = props\n\n  const handleFixDuplicateKeys = useCallback(() => {\n    onChange(\n      PatchEvent.from(\n        (error.duplicates || []).map(([index, key]) =>\n          set(`${key}_deduped_${index}`, [index, '_key'])\n        )\n      )\n    )\n  }, [error.duplicates, onChange])\n\n  return (\n    <FormField title={error.schemaType.title} description={error.schemaType.description}>\n      <Alert\n        status=\"warning\"\n        suffix={\n          <Stack padding={2}>\n            <Button onClick={handleFixDuplicateKeys} text=\"Generate unique keys\" tone=\"caution\" />\n          </Stack>\n        }\n        title={<>Non-unique keys</>}\n      >\n        <Text as=\"p\" muted size={1}>\n          Several items in this list share the same identifier (key). Every item must have an unique\n          identifier.\n        </Text>\n\n        <Details marginTop={4} open={isDev} title={<>Developer info</>}>\n          <Stack space={3}>\n            <Text as=\"p\" muted size={1}>\n              This usually happens when items are created using an API client, and the{' '}\n              <code>_key</code> property of each elements has been generated non-uniquely.\n            </Text>\n\n            <Text as=\"p\" muted size={1}>\n              The value of the <code>_key</code> property must be a unique string.\n            </Text>\n          </Stack>\n        </Details>\n        {/* TODO: render array items and highlight the items with duplicate keys */}\n      </Alert>\n    </FormField>\n  )\n}\n","import React, {useCallback} from 'react'\nimport {Box} from '@sanity/ui'\nimport {FieldError} from '../store/types/memberErrors'\nimport {useFormCallbacks} from '../studio/contexts/FormCallbacks'\nimport {PatchEvent} from '../patch'\nimport {InvalidValueInput} from '../inputs/InvalidValueInput'\nimport {MissingKeysAlert} from '../inputs/arrays/errors/MissingKeysAlert'\nimport {DuplicateKeysAlert} from '../inputs/arrays/errors/DuplicateKeysAlert'\n\nexport function MemberFieldError(props: {member: FieldError}) {\n  const {member} = props\n  const {onChange} = useFormCallbacks()\n\n  const handleChange = useCallback(\n    (event: PatchEvent) => {\n      onChange(PatchEvent.from(event).prefixAll(member.fieldName))\n    },\n    [onChange, member.fieldName]\n  )\n  if (member.error.type === 'INCOMPATIBLE_TYPE') {\n    return (\n      <InvalidValueInput\n        value={member.error.value}\n        onChange={handleChange}\n        actualType={member.error.resolvedValueType}\n        validTypes={[member.error.expectedSchemaType.name]}\n      />\n    )\n  }\n  if (member.error.type === 'MISSING_KEYS') {\n    return <MissingKeysAlert error={member.error} onChange={handleChange} />\n  }\n  if (member.error.type === 'DUPLICATE_KEYS') {\n    return <DuplicateKeysAlert error={member.error} onChange={handleChange} />\n  }\n  return <Box>Unexpected error: {props.member.error.type}</Box>\n}\n","import React, {memo, useCallback} from 'react'\nimport {FieldSetMember} from '../store'\nimport {\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../types'\nimport {FormFieldSet} from '../components/formField'\nimport {useFormCallbacks} from '../studio/contexts/FormCallbacks'\nimport {MemberField} from './MemberField'\nimport {MemberFieldError} from './MemberFieldError'\n\nexport const MemberFieldSet = memo(function MemberFieldSet(props: {\n  member: FieldSetMember\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}) {\n  const {member, renderField, renderInput, renderItem, renderPreview} = props\n\n  const {onSetFieldSetCollapsed} = useFormCallbacks()\n\n  const handleCollapse = useCallback(() => {\n    onSetFieldSetCollapsed(member.fieldSet.path, true)\n  }, [member.fieldSet.path, onSetFieldSetCollapsed])\n\n  const handleExpand = useCallback(() => {\n    onSetFieldSetCollapsed(member.fieldSet.path, false)\n  }, [member.fieldSet.path, onSetFieldSetCollapsed])\n\n  return (\n    <FormFieldSet\n      title={member.fieldSet.title}\n      description={member.fieldSet.description}\n      level={member.fieldSet.level}\n      collapsible={member.fieldSet.collapsible}\n      collapsed={member.fieldSet.collapsed}\n      onCollapse={handleCollapse}\n      onExpand={handleExpand}\n      columns={member?.fieldSet?.columns}\n      data-testid={`fieldset-${member.fieldSet.name}`}\n    >\n      {member.fieldSet.members.map((fieldsetMember) => {\n        if (fieldsetMember.kind === 'error') {\n          return <MemberFieldError key={member.key} member={fieldsetMember} />\n        }\n        return (\n          <MemberField\n            member={fieldsetMember}\n            renderField={renderField}\n            renderInput={renderInput}\n            renderItem={renderItem}\n            renderPreview={renderPreview}\n            key={fieldsetMember.key}\n          />\n        )\n      })}\n    </FormFieldSet>\n  )\n})\n","export const IGNORE_KEYS = ['_key', '_type', '_weak']\n","import {ArraySchemaType, SchemaType} from '@sanity/types'\nimport {resolveTypeName} from '@sanity/util/content'\nimport {IGNORE_KEYS} from './constants'\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function isEmpty(value: Record<string, unknown>): value is Record<never, never> {\n  return Object.keys(value).every((key) => IGNORE_KEYS.includes(key))\n}\n\nexport function getItemType(arrayType: ArraySchemaType, item: any): SchemaType | undefined {\n  const itemTypeName = resolveTypeName(item)\n\n  return itemTypeName === 'object' && arrayType.of.length === 1\n    ? arrayType.of[0]\n    : arrayType.of.find((memberType) => memberType.name === itemTypeName)\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {Path} from '@sanity/types'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {\n  ObjectInputProps,\n  ObjectItemProps,\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from '../../types'\nimport {insert, PatchArg, PatchEvent, setIfMissing, unset} from '../../patch'\nimport {ensureKey} from '../../utils/ensureKey'\nimport {FormCallbacksProvider, useFormCallbacks} from '../../studio/contexts/FormCallbacks'\nimport {ArrayOfObjectsItemMember} from '../../store'\nimport {createProtoValue} from '../../utils/createProtoValue'\nimport {isEmpty} from '../../inputs/arrays/ArrayOfObjectsInput/item/helpers'\n\n/**\n * @alpha\n */\nexport interface MemberItemProps {\n  member: ArrayOfObjectsItemMember\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderField: RenderFieldCallback\n  renderInput: RenderInputCallback\n  renderPreview: RenderPreviewCallback\n}\n\n/**\n * @alpha\n */\nexport function ArrayOfObjectsItem(props: MemberItemProps) {\n  const focusRef = useRef<{focus: () => void}>()\n  const {member, renderItem, renderInput, renderField, renderPreview} = props\n\n  const {\n    onPathBlur,\n    onPathFocus,\n    onChange,\n    onPathOpen,\n    onSetPathCollapsed,\n    onSetFieldSetCollapsed,\n    onFieldGroupSelect,\n  } = useFormCallbacks()\n\n  useDidUpdate(member.item.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const onRemove = useCallback(() => {\n    onChange(PatchEvent.from([unset([{_key: member.key}])]))\n  }, [member.key, onChange])\n\n  const onInsert = useCallback(\n    (event: {items: unknown[]; position: 'before' | 'after'}) => {\n      onChange(\n        PatchEvent.from([\n          insert(\n            event.items.map((item) => ensureKey(item)),\n            event.position,\n            [{_key: member.key}]\n          ),\n        ])\n      )\n    },\n    [member.key, onChange]\n  )\n\n  const handleBlur = useCallback(() => {\n    onPathBlur(member.item.path)\n  }, [member.item.path, onPathBlur])\n\n  const handleFocus = useCallback(() => {\n    onPathFocus(member.item.path)\n  }, [member.item.path, onPathFocus])\n\n  const handleFocusChildPath = useCallback(\n    (path: Path) => {\n      onPathFocus(member.item.path.concat(path))\n    },\n    [member.item.path, onPathFocus]\n  )\n\n  const handleChange = useCallback(\n    (event: PatchEvent | PatchArg) => {\n      onChange(\n        PatchEvent.from(event)\n          .prepend(setIfMissing(createProtoValue(member.item.schemaType)))\n          .prefixAll({_key: member.key})\n      )\n    },\n    [onChange, member.item.schemaType, member.key]\n  )\n  const handleCollapse = useCallback(() => {\n    onSetPathCollapsed(member.item.path, true)\n  }, [onSetPathCollapsed, member.item.path])\n\n  const handleExpand = useCallback(() => {\n    onSetPathCollapsed(member.item.path, false)\n  }, [onSetPathCollapsed, member.item.path])\n\n  const handleCollapseField = useCallback(\n    (fieldName: string) => {\n      onSetPathCollapsed(member.item.path.concat(fieldName), true)\n    },\n    [onSetPathCollapsed, member.item.path]\n  )\n  const handleExpandField = useCallback(\n    (fieldName: string) => {\n      onSetPathCollapsed(member.item.path.concat(fieldName), false)\n    },\n    [onSetPathCollapsed, member.item.path]\n  )\n  const handleCloseField = useCallback(() => {\n    onPathOpen(member.item.path)\n  }, [onPathOpen, member.item.path])\n  const handleOpenField = useCallback(\n    (fieldName: string) => {\n      onPathOpen(member.item.path.concat(fieldName))\n    },\n    [onPathOpen, member.item.path]\n  )\n  const handleExpandFieldSet = useCallback(\n    (fieldsetName: string) => {\n      onSetFieldSetCollapsed(member.item.path.concat(fieldsetName), false)\n    },\n    [onSetFieldSetCollapsed, member.item.path]\n  )\n  const handleCollapseFieldSet = useCallback(\n    (fieldsetName: string) => {\n      onSetFieldSetCollapsed(member.item.path.concat(fieldsetName), true)\n    },\n    [onSetFieldSetCollapsed, member.item.path]\n  )\n\n  const handleOpen = useCallback(() => {\n    onPathOpen(member.item.path)\n  }, [onPathOpen, member.item.path])\n\n  const isEmptyValue = !member.item.value || isEmpty(member.item.value)\n  const handleClose = useCallback(() => {\n    if (isEmptyValue) {\n      onRemove()\n    }\n    onPathOpen(member.item.path.slice(0, -1))\n  }, [onPathOpen, member.item.path, isEmptyValue, onRemove])\n\n  const handleSelectFieldGroup = useCallback(\n    (groupName: string) => {\n      onFieldGroupSelect(member.item.path, groupName)\n    },\n    [onFieldGroupSelect, member.item.path]\n  )\n\n  const elementProps = useMemo(\n    (): ObjectInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.item.id,\n      ref: focusRef,\n    }),\n    [handleBlur, handleFocus, member.item.id]\n  )\n\n  const inputProps = useMemo((): ObjectInputProps => {\n    return {\n      changed: member.item.changed,\n      focusPath: member.item.focusPath,\n      focused: member.item.focused,\n      groups: member.item.groups,\n      id: member.item.id,\n      level: member.item.level,\n      members: member.item.members,\n      onChange: handleChange,\n      onCloseField: handleCloseField,\n      onCollapseField: handleCollapseField,\n      onCollapseFieldSet: handleCollapseFieldSet,\n      onExpandField: handleExpandField,\n      onExpandFieldSet: handleExpandFieldSet,\n      onFieldGroupSelect: handleSelectFieldGroup,\n      onFocusPath: handleFocusChildPath,\n      onOpenField: handleOpenField,\n      path: member.item.path,\n      presence: member.item.presence,\n      readOnly: member.item.readOnly,\n      renderField,\n      renderInput,\n      renderItem,\n      renderPreview,\n      schemaType: member.item.schemaType,\n      validation: member.item.validation,\n      value: member.item.value,\n      elementProps: elementProps,\n    }\n  }, [\n    elementProps,\n    handleChange,\n    handleCloseField,\n    handleCollapseField,\n    handleCollapseFieldSet,\n    handleExpandField,\n    handleExpandFieldSet,\n    handleFocusChildPath,\n    handleOpenField,\n    handleSelectFieldGroup,\n    member.item.changed,\n    member.item.focusPath,\n    member.item.focused,\n    member.item.groups,\n    member.item.id,\n    member.item.level,\n    member.item.members,\n    member.item.path,\n    member.item.presence,\n    member.item.readOnly,\n    member.item.schemaType,\n    member.item.validation,\n    member.item.value,\n    renderField,\n    renderInput,\n    renderItem,\n    renderPreview,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const itemProps = useMemo((): ObjectItemProps => {\n    return {\n      key: member.key,\n      index: member.index,\n      level: member.item.level,\n      value: member.item.value,\n      title: member.item.schemaType.title,\n      description: member.item.schemaType.description,\n      collapsible: member.collapsible,\n      collapsed: member.collapsed,\n      schemaType: member.item.schemaType,\n      onInsert,\n      onRemove,\n      presence: member.item.presence,\n      validation: member.item.validation,\n      open: member.open,\n      onOpen: handleOpen,\n      onClose: handleClose,\n      onExpand: handleExpand,\n      onCollapse: handleCollapse,\n      readOnly: member.item.readOnly,\n      focused: member.item.focused,\n      onFocus: handleFocus,\n      inputId: member.item.id,\n      path: member.item.path,\n      children: renderedInput,\n      changed: member.item.changed,\n    }\n  }, [\n    member.key,\n    member.index,\n    member.item.level,\n    member.item.value,\n    member.item.schemaType,\n    member.item.presence,\n    member.item.validation,\n    member.item.readOnly,\n    member.item.focused,\n    member.item.id,\n    member.item.path,\n    member.item.changed,\n    member.collapsible,\n    member.collapsed,\n    member.open,\n    onInsert,\n    onRemove,\n    handleOpen,\n    handleClose,\n    handleExpand,\n    handleCollapse,\n    handleFocus,\n    renderedInput,\n  ])\n\n  return (\n    <FormCallbacksProvider\n      onFieldGroupSelect={onFieldGroupSelect}\n      onChange={handleChange}\n      onPathOpen={onPathOpen}\n      onSetFieldSetCollapsed={onSetFieldSetCollapsed}\n      onSetPathCollapsed={onSetPathCollapsed}\n      onPathBlur={onPathBlur}\n      onPathFocus={onPathFocus}\n    >\n      {useMemo(() => renderItem(itemProps), [itemProps, renderItem])}\n    </FormCallbacksProvider>\n  )\n}\n","import {SchemaType} from '@sanity/types'\n\nexport function getEmptyValue(type: SchemaType): number | string | boolean {\n  switch (type.jsonType) {\n    case 'string': {\n      return ''\n    }\n    case 'number': {\n      return 0\n    }\n    case 'boolean': {\n      return false\n    }\n    default:\n      throw new Error(`Unable to create value from type \"${type.jsonType}\"`)\n  }\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {ArrayOfPrimitivesItemMember} from '../../store'\nimport {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {getEmptyValue} from '../../inputs/arrays/ArrayOfPrimitivesInput/getEmptyValue'\nimport {\n  FIXME,\n  PrimitiveInputProps,\n  PrimitiveItemProps,\n  RenderArrayOfPrimitivesItemCallback,\n  RenderInputCallback,\n} from '../../types'\nimport {insert, PatchArg, PatchEvent, set, unset} from '../../patch'\nimport {useFormCallbacks} from '../../studio/contexts/FormCallbacks'\nimport {isBooleanSchemaType, isNumberSchemaType} from '@sanity/types'\n\n/**\n * @alpha\n */\nexport interface PrimitiveMemberItemProps {\n  member: ArrayOfPrimitivesItemMember\n  renderItem: RenderArrayOfPrimitivesItemCallback\n  renderInput: RenderInputCallback\n}\n\n/**\n * @alpha\n */\nexport function ArrayOfPrimitivesItem(props: PrimitiveMemberItemProps) {\n  const focusRef = useRef<{focus: () => void}>()\n  const {member, renderItem, renderInput} = props\n\n  const {onPathBlur, onPathFocus, onChange} = useFormCallbacks()\n\n  useDidUpdate(member.item.focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus) {\n      focusRef.current?.focus()\n    }\n  })\n\n  const handleBlur = useCallback(\n    (event: React.FocusEvent) => {\n      onPathBlur(member.item.path)\n    },\n    [member.item.path, onPathBlur]\n  )\n\n  const handleFocus = useCallback(\n    (event: React.FocusEvent) => {\n      onPathFocus(member.item.path)\n    },\n    [member.item.path, onPathFocus]\n  )\n\n  const handleChange = useCallback(\n    (event: PatchEvent | PatchArg) => {\n      const patches = PatchEvent.from(event).patches.map((patch) =>\n        // Map direct unset patches to empty value instead in order to not *remove* elements as the user clears out the value\n        // note: this creates the rather \"weird\" case where the input renders Â´0Â´ when you try to clear it\n        patch.path.length === 0 && patch.type === 'unset'\n          ? set(getEmptyValue(member.item.schemaType))\n          : patch\n      )\n      onChange(PatchEvent.from(patches).prefixAll(member.index))\n    },\n    [onChange, member.item.schemaType, member.index]\n  )\n\n  const handleNativeChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      let inputValue: number | string | boolean = event.currentTarget.value\n      if (isNumberSchemaType(member.item.schemaType)) {\n        inputValue = event.currentTarget.valueAsNumber\n      } else if (isBooleanSchemaType(member.item.schemaType)) {\n        inputValue = event.currentTarget.checked\n      }\n\n      // `valueAsNumber` returns `NaN` on empty input\n      const hasEmptyValue =\n        inputValue === '' || (typeof inputValue === 'number' && isNaN(inputValue))\n\n      onChange(PatchEvent.from(hasEmptyValue ? unset() : set(inputValue)).prefixAll(member.index))\n    },\n    [member.index, member.item.schemaType, onChange]\n  )\n\n  const elementProps = useMemo(\n    (): PrimitiveInputProps['elementProps'] => ({\n      onBlur: handleBlur,\n      onFocus: handleFocus,\n      id: member.item.id,\n      ref: focusRef,\n      onChange: handleNativeChange,\n      value: String(member.item.value || ''),\n      readOnly: Boolean(member.item.readOnly),\n      placeholder: member.item.schemaType.placeholder,\n    }),\n    [\n      handleBlur,\n      handleFocus,\n      handleNativeChange,\n      member.item.id,\n      member.item.readOnly,\n      member.item.schemaType.placeholder,\n      member.item.value,\n    ]\n  )\n  const inputProps = useMemo((): PrimitiveInputProps => {\n    return {\n      changed: member.item.changed,\n      level: member.item.level,\n      value: member.item.value as FIXME,\n      readOnly: member.item.readOnly,\n      schemaType: member.item.schemaType as FIXME,\n      id: member.item.id,\n      path: member.item.path,\n      focused: member.item.focused,\n      onChange: handleChange,\n      validation: member.item.validation,\n      presence: member.item.presence,\n      elementProps,\n    }\n  }, [\n    member.item.changed,\n    member.item.level,\n    member.item.value,\n    member.item.readOnly,\n    member.item.schemaType,\n    member.item.id,\n    member.item.path,\n    member.item.focused,\n    member.item.validation,\n    member.item.presence,\n    handleChange,\n    elementProps,\n  ])\n\n  const renderedInput = useMemo(() => renderInput(inputProps), [inputProps, renderInput])\n\n  const onRemove = useCallback(() => {\n    onChange(PatchEvent.from([unset([member.index])]))\n  }, [member.index, onChange])\n\n  const onInsert = useCallback(\n    (event: {items: unknown[]; position: 'before' | 'after'}) => {\n      onChange(PatchEvent.from([insert(event.items, event.position, [member.index])]))\n    },\n    [member.index, onChange]\n  )\n\n  const itemProps = useMemo((): PrimitiveItemProps => {\n    return {\n      key: member.key,\n      index: member.index,\n      level: member.item.level,\n      value: member.item.value as FIXME,\n      title: member.item.schemaType.title,\n      description: member.item.schemaType.description,\n      schemaType: member.item.schemaType as FIXME,\n      onInsert,\n      onRemove,\n      presence: member.item.presence,\n      validation: member.item.validation,\n      readOnly: member.item.readOnly,\n      focused: member.item.focused,\n      onFocus: handleFocus,\n      inputId: member.item.id,\n      path: member.item.path,\n      children: renderedInput,\n    }\n  }, [\n    member.key,\n    member.index,\n    member.item.level,\n    member.item.value,\n    member.item.schemaType,\n    member.item.presence,\n    member.item.validation,\n    member.item.readOnly,\n    member.item.focused,\n    member.item.id,\n    member.item.path,\n    onInsert,\n    onRemove,\n    handleFocus,\n    renderedInput,\n  ])\n\n  return <>{useMemo(() => renderItem(itemProps), [itemProps, renderItem])}</>\n}\n","import {Box, Card, Code, Flex, Popover, Stack, Text, Theme, useClickOutside} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {BulbOutlineIcon, UnknownIcon} from '@sanity/icons'\nimport {resolveTypeName} from '@sanity/util/content'\nimport styled from 'styled-components'\n\nconst PopoverCard = styled(Card)`\n  max-width: ${({theme}: {theme: Theme}) => theme.sanity.container[1]}px;\n`\n\ninterface Props {\n  value: any\n  onFocus?: (event: React.FocusEvent) => void\n  vertical?: boolean\n}\n\nexport function ItemWithMissingType(props: Props) {\n  const {value, onFocus, vertical, ...rest} = props\n  const [showDetails, setShowDetails] = React.useState(false)\n  const [popoverRef, setPopoverRef] = React.useState<HTMLElement | null>(null)\n\n  useClickOutside(() => setShowDetails(false), [popoverRef])\n\n  const handleKeyDown = React.useCallback((e) => {\n    if (e.key === 'Escape' || e.key === 'Tab') {\n      setShowDetails(false)\n    }\n  }, [])\n\n  const handleShowDetails = useCallback(() => {\n    setShowDetails((v) => !v)\n  }, [])\n\n  const typeName = resolveTypeName(value)\n  return (\n    <Popover\n      open={showDetails}\n      ref={setPopoverRef}\n      onKeyDown={handleKeyDown}\n      portal\n      constrainSize\n      tone=\"default\"\n      content={\n        <PopoverCard margin={1} padding={3} onKeyDown={handleKeyDown} tabIndex={0} overflow=\"auto\">\n          <Stack space={4}>\n            <Box>\n              <Text weight=\"semibold\">Why is this happening?</Text>\n            </Box>\n            <Text size={1}>\n              The current schema does not declare items of type <code>{typeName}</code> as valid for\n              this list. This could mean that the type has been removed as a valid item type, or\n              that someone else has added it to their own local schema that is not yet deployed.\n            </Text>\n            <Box>\n              <Text size={1}>\n                <BulbOutlineIcon /> You can still move or delete this item, but it cannot be edited\n                since the schema definition for its type is nowhere to be found.\n              </Text>\n            </Box>\n            <Stack space={2}>\n              <Text size={1} weight=\"semibold\">\n                JSON representation of this item:\n              </Text>\n              <Card padding={2} overflow=\"auto\" border>\n                <Code size={1} as=\"pre\" language=\"json\">\n                  {JSON.stringify(value, null, 2)}\n                </Code>\n              </Card>\n            </Stack>\n          </Stack>\n        </PopoverCard>\n      }\n    >\n      <Card\n        as=\"button\"\n        type=\"button\"\n        radius={2}\n        tone=\"inherit\"\n        padding={2}\n        onFocus={onFocus}\n        onClick={handleShowDetails}\n        onKeyDown={handleKeyDown}\n        {...rest}\n      >\n        {vertical && (\n          <Stack space={4}>\n            <Text align=\"center\">\n              <UnknownIcon />\n            </Text>\n\n            <Text size={1} align=\"center\">\n              Item type <code>{typeName}</code> not defined for this list\n            </Text>\n          </Stack>\n        )}\n        {!vertical && (\n          <Flex align=\"center\">\n            <Box marginRight={3}>\n              <Text>\n                <UnknownIcon />\n              </Text>\n            </Box>\n\n            <Box flex={1}>\n              <Text size={1} textOverflow=\"ellipsis\">\n                Item type <code>{typeName}</code> not defined for this list\n              </Text>\n            </Box>\n          </Flex>\n        )}\n      </Card>\n    </Popover>\n  )\n}\n","import React from 'react'\nimport {ItemWithMissingType} from '../inputs/arrays/ArrayOfObjectsInput/item/ItemWithMissingType'\nimport {ArrayItemError} from '../store/types/memberErrors'\n\nexport function MemberItemError(props: {member: ArrayItemError}) {\n  const {member} = props\n\n  if (member.error.type === 'INVALID_ITEM_TYPE') {\n    return <ItemWithMissingType value={member.error.value} />\n  }\n  return <div>Unexpected Error: {member.error.type}</div>\n}\n","import React from 'react'\nimport {ObjectMember} from '../store'\nimport {\n  RenderInputCallback,\n  RenderFieldCallback,\n  RenderPreviewCallback,\n  RenderArrayOfObjectsItemCallback,\n} from '../types'\n\nimport {MemberField} from './MemberField'\nimport {MemberFieldError} from './MemberFieldError'\nimport {MemberFieldSet} from './MemberFieldset'\n\nexport interface ObjectMembersProps {\n  members: ObjectMember[]\n  renderInput: RenderInputCallback\n  renderField: RenderFieldCallback\n  renderItem: RenderArrayOfObjectsItemCallback\n  renderPreview: RenderPreviewCallback\n}\n/**\n * Convenience component for wrapping an object input\n * @beta\n */\n\nexport function ObjectMembers(props: ObjectMembersProps) {\n  const {members, renderInput, renderField, renderItem, renderPreview} = props\n  return (\n    <>\n      {members.map((member) => {\n        if (member.kind === 'field') {\n          return (\n            <MemberField\n              key={member.key}\n              member={member}\n              renderInput={renderInput}\n              renderField={renderField}\n              renderItem={renderItem}\n              renderPreview={renderPreview}\n            />\n          )\n        }\n        if (member.kind === 'error') {\n          return <MemberFieldError key={member.key} member={member} />\n        }\n        if (member.kind === 'fieldSet') {\n          return (\n            <MemberFieldSet\n              key={member.key}\n              member={member}\n              renderInput={renderInput}\n              renderField={renderField}\n              renderItem={renderItem}\n              renderPreview={renderPreview}\n            />\n          )\n        }\n        //@ts-expect-error The branching above should cover all possible cases\n        console.warn(new Error(`Unhandled member kind ${member.kind}`))\n        return null\n      })}\n    </>\n  )\n}\n","import React, {memo, useCallback, useMemo} from 'react'\nimport {isEqual, startsWith, trimLeft} from '@sanity/util/paths'\nimport {isKeySegment, Path} from '@sanity/types'\nimport {FieldMember} from './store'\nimport {\n  ArrayOfObjectsInputProps,\n  ObjectInputProps,\n  RenderArrayOfObjectsItemCallback,\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderPreviewCallback,\n} from './types'\nimport {isArrayInputProps, isObjectInputProps} from './utils/asserters'\nimport {MemberField, ArrayOfObjectsItem, MemberItemError} from './members'\n\nconst pass = ({children}: {children: React.ReactNode}) => children\n\nexport type FormInputAbsolutePathArg = {absolutePath: Path}\nexport type FormInputRelativePathArg = {relativePath: Path}\n\nfunction hasAbsolutePath(\n  a: FormInputAbsolutePathArg | FormInputRelativePathArg\n): a is FormInputAbsolutePathArg {\n  return 'absolutePath' in a\n}\n\nexport const FormInput = memo(function FormInput(\n  props: (ArrayOfObjectsInputProps | ObjectInputProps) &\n    (FormInputRelativePathArg | FormInputAbsolutePathArg) & {\n      /**\n       * Whether to include the field around the input. Defaults to false\n       */\n      includeField?: boolean\n    }\n) {\n  const absolutePath = useMemo(() => {\n    return hasAbsolutePath(props) ? props.absolutePath : props.path.concat(props.relativePath)\n  }, [props])\n\n  return (\n    <FormInputInner\n      {...props}\n      absolutePath={absolutePath}\n      destinationRenderField={props.renderField}\n      destinationRenderInput={props.renderInput}\n      destinationRenderItem={props.renderItem}\n      destinationRenderPreview={props.renderPreview}\n    />\n  )\n})\n\n/**\n * An input that takes input props for object or array and renders an input for a given sub-path\n */\nconst FormInputInner = memo(function FormInputInner(\n  props: (ArrayOfObjectsInputProps | ObjectInputProps) & {\n    absolutePath: Path\n    includeField?: boolean\n    destinationRenderInput: RenderInputCallback\n    destinationRenderField: RenderFieldCallback\n    destinationRenderItem: RenderArrayOfObjectsItemCallback\n    destinationRenderPreview: RenderPreviewCallback\n  }\n) {\n  const {\n    absolutePath,\n    destinationRenderInput,\n    destinationRenderItem,\n    destinationRenderField,\n    destinationRenderPreview,\n  } = props\n\n  const renderInput: RenderInputCallback = useCallback(\n    (inputProps) => {\n      const isDestinationReached =\n        isEqual(inputProps.path, absolutePath) || startsWith(absolutePath, inputProps.path)\n      if (isDestinationReached) {\n        // we have reached the destination node and can now render with the passed renderInput\n        return destinationRenderInput(inputProps)\n      }\n      if (!isObjectInputProps(inputProps) && !isArrayInputProps(inputProps)) {\n        throw new Error(\n          `Expected either object input props or array input props for: ${JSON.stringify(\n            inputProps.path\n          )}`\n        )\n      }\n      // we have not yet reached the destination path, so we'll continue recurse until we get there\n      return (\n        <FormInputInner\n          {...inputProps}\n          absolutePath={absolutePath}\n          destinationRenderInput={destinationRenderInput}\n          destinationRenderItem={destinationRenderItem}\n          destinationRenderField={destinationRenderField}\n          destinationRenderPreview={destinationRenderPreview}\n        />\n      )\n    },\n    [\n      absolutePath,\n      destinationRenderField,\n      destinationRenderInput,\n      destinationRenderItem,\n      destinationRenderPreview,\n    ]\n  )\n\n  const renderField: RenderFieldCallback = useCallback(\n    (fieldProps) => {\n      // we want to render the field around the input if either of these are true:\n      // 1. we have reached the destination path and the `includeField`-prop is passed as true\n      // 2. we are currently at a node somewhere below/inside the destination path\n      const shouldRenderField =\n        startsWith(absolutePath, fieldProps.path) &&\n        (props.includeField || !isEqual(absolutePath, fieldProps.path))\n      return shouldRenderField ? destinationRenderField(fieldProps) : pass(fieldProps)\n    },\n    [absolutePath, destinationRenderField, props.includeField]\n  )\n\n  if (isArrayInputProps(props)) {\n    const childPath = trimLeft(props.path, absolutePath)\n\n    const itemMember = props.members.find(\n      (member) =>\n        member.kind == 'item' && isKeySegment(childPath[0]) && member.key === childPath[0]._key\n    )\n\n    if (!itemMember) {\n      const relativePath = trimLeft(props.path, absolutePath)\n      const key = (relativePath[0] as any)._key\n      return (\n        <div>\n          No array item with _key <code>\"{key}\"</code> found at path {JSON.stringify(props.path)}\n        </div>\n      )\n    }\n    if (itemMember.kind === 'error') {\n      return <MemberItemError member={itemMember} />\n    }\n    return (\n      <ArrayOfObjectsItem\n        member={itemMember}\n        renderInput={renderInput}\n        renderField={renderField}\n        renderItem={pass}\n        renderPreview={destinationRenderPreview}\n      />\n    )\n  }\n\n  if (isObjectInputProps(props)) {\n    const childPath = trimLeft(props.path, absolutePath)\n    const fieldMember = props.members.find(\n      (member): member is FieldMember => member.kind == 'field' && childPath[0] === member.name\n    )\n\n    if (!fieldMember) {\n      const fieldName = childPath[0]\n      return (\n        <div>\n          Field {JSON.stringify(fieldName)} not found among members â€“ please verify that it's both\n          defined in the schema and that it has not been conditionally hidden.\n        </div>\n      )\n    }\n\n    return (\n      <MemberField\n        member={fieldMember}\n        renderInput={renderInput}\n        renderField={renderField}\n        renderItem={pass}\n        renderPreview={destinationRenderPreview}\n      />\n    )\n  }\n  throw new Error('FormInput can only be used with arrays or objects')\n})\n","import {normalizeBlock} from '@sanity/block-tools'\nimport {PortableTextBlock} from '@sanity/portable-text-editor'\nimport {FormPatch, insert} from '../../../patch'\nimport {InsertCallback} from './types'\n\nexport function createInsertCallback(options: {\n  allowedDecorators: string[]\n  block: PortableTextBlock\n  onChange: (patches: FormPatch[]) => void\n}): InsertCallback {\n  const {allowedDecorators, block, onChange} = options\n\n  let toInsert\n\n  return (givenBlock: PortableTextBlock | PortableTextBlock[]): void => {\n    toInsert = Array.isArray(givenBlock) ? givenBlock : [givenBlock]\n    toInsert = toInsert.map((blk) =>\n      normalizeBlock(blk, {\n        allowedDecorators,\n      })\n    )\n\n    const patches = [insert(toInsert, 'after', [{_key: block._key}])]\n\n    return onChange(patches)\n  }\n}\n","import {normalizeBlock} from '@sanity/block-tools'\nimport {PortableTextBlock} from '@sanity/portable-text-editor'\nimport {FormPatch, set} from '../../../patch'\nimport {SetCallback} from './types'\n\nexport function createSetCallback(options: {\n  allowedDecorators: string[]\n  block: PortableTextBlock\n  onChange: (patches: FormPatch[]) => void\n}): SetCallback {\n  const {allowedDecorators, block, onChange} = options\n\n  return (givenBlock: PortableTextBlock): void => {\n    const patches = [\n      set(\n        normalizeBlock(givenBlock, {\n          allowedDecorators,\n        }),\n\n        [{_key: block._key}]\n      ),\n    ]\n\n    return onChange(patches)\n  }\n}\n","import {PortableTextBlock} from '@sanity/portable-text-editor'\nimport {FormPatch, unset} from '../../../patch'\nimport {UnsetCallback} from './types'\n\nexport function createUnsetCallback(options: {\n  block: PortableTextBlock\n  onChange: (patches: FormPatch[]) => void\n}): UnsetCallback {\n  const {block, onChange} = options\n\n  return (): void => {\n    const patches = [unset([{_key: block._key}])]\n\n    return onChange(patches)\n  }\n}\n","import {\n  PortableTextEditor,\n  PortableTextBlock,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport React, {useCallback, useMemo} from 'react'\nimport styled from 'styled-components'\nimport {PatchArg} from '../../patch'\nimport {RenderBlockActionsCallback, RenderBlockActionsProps} from './types'\nimport {createInsertCallback, createSetCallback, createUnsetCallback} from './callbacks'\n\ninterface BlockActionsProps {\n  block: PortableTextBlock\n  onChange: (...patches: PatchArg[]) => void\n  renderBlockActions?: RenderBlockActionsCallback\n}\n\nconst Root = styled.div`\n  display: flex;\n  pointer-events: 'all';\n`\n\n// function isClassComponent(component: React.ComponentType) {\n//   return typeof component === 'function' && !!component.prototype?.isReactComponent\n// }\n\n// function isFunctionComponent(component: React.ComponentType) {\n//   return typeof component === 'function' && String(component).includes('return React.createElement')\n// }\n\nexport function BlockActions(props: BlockActionsProps) {\n  const editor = usePortableTextEditor()\n  const {block, onChange, renderBlockActions} = props\n  const decoratorValues = useMemo(\n    () => PortableTextEditor.getPortableTextFeatures(editor).decorators.map((d) => d.value),\n    [editor]\n  )\n\n  const blockActions = useMemo(() => {\n    if (renderBlockActions) {\n      const blockActionProps: RenderBlockActionsProps = {\n        block,\n        value: PortableTextEditor.getValue(editor),\n        set: createSetCallback({allowedDecorators: decoratorValues, block, onChange}),\n        unset: createUnsetCallback({block, onChange}),\n        insert: createInsertCallback({allowedDecorators: decoratorValues, block, onChange}),\n      }\n\n      // // Support returning a class component for renderBlockActions (to keep backward compatability as it was possible before)\n      // if (isClassComponent(renderBlockActions) || isFunctionComponent(renderBlockActions)) {\n      //   const RenderComponent = renderBlockActions\n      //   return <RenderComponent {...blockActionProps} />\n      // }\n      return renderBlockActions(blockActionProps)\n    }\n    return undefined\n  }, [renderBlockActions, block, editor, onChange, decoratorValues])\n\n  // Take focus away from the editor so dealing with block actions doesn't interfere with the editor focus\n  const handleClick = useCallback(() => {\n    PortableTextEditor.blur(editor)\n  }, [editor])\n\n  // Don't render anything if the renderBlockActions function returns null.\n  // Note that if renderBlockComponent is a React class, this will never be the case.\n  if (!blockActions) return null\n\n  return (\n    <Root contentEditable={false} onKeyDown={handleClick} onMouseDown={handleClick}>\n      {blockActions}\n    </Root>\n  )\n}\n","import {rgba} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const ReviewChangesHighlightBlock = styled.div(({theme}) => {\n  const {radius, space, color} = theme.sanity\n  const bg = rgba(color.spot.yellow, 0.2)\n\n  return css`\n    position: absolute;\n    border-radius: ${radius[3]}px;\n    top: -${space[2]}px;\n    bottom: -${space[1] + space[1]}px;\n    left: ${space[4] + space[1]}px;\n    right: 0;\n    background-color: ${bg};\n  `\n})\n","import styled, {css} from 'styled-components'\nimport {ChangeIndicator} from '../../../../components/changeIndicators'\n\nexport const StyledChangeIndicatorWithProvidedFullPath = styled(ChangeIndicator)(() => {\n  return css`\n    width: 1px;\n    height: 100%;\n\n    & > div {\n      height: 100%;\n    }\n  `\n})\n","import {SchemaType} from '@sanity/types'\nimport {ArrayOfObjectsFormNode, FieldMember, ObjectMember} from '../../store'\n\nexport function _isBlockType(type: SchemaType): boolean {\n  if (type.type) {\n    return _isBlockType(type.type)\n  }\n\n  return type.name === 'block'\n}\n\nexport function _isObjectFieldMember(\n  member: ObjectMember\n): member is FieldMember<ArrayOfObjectsFormNode> {\n  return member.kind === 'field' && member.field.schemaType.jsonType === 'object'\n}\n\nexport function _isArrayOfObjectsFieldMember(\n  member: ObjectMember\n): member is FieldMember<ArrayOfObjectsFormNode> {\n  return member.kind === 'field' && member.field.schemaType.jsonType === 'array'\n}\n","import {useMemo} from 'react'\nimport {BaseFormNode} from '../../../store'\nimport {EMPTY_ARRAY} from '../../../utils/empty'\nimport {useChildValidation} from '../../../studio/contexts/Validation'\nimport {_isBlockType} from '../_helpers'\n\nconst NONEXISTENT_PATH = ['@@_NONEXISTENT_PATH_@@']\n\nexport function useMemberValidation(member: BaseFormNode | undefined) {\n  const memberValidation = member?.validation || EMPTY_ARRAY\n  const childValidation = useChildValidation(member?.path || NONEXISTENT_PATH)\n\n  const validation = useMemo(\n    () =>\n      member?.schemaType && _isBlockType(member?.schemaType)\n        ? memberValidation\n        : memberValidation.concat(childValidation),\n    [childValidation, member, memberValidation]\n  )\n\n  const [hasError, hasWarning, hasInfo] = useMemo(\n    () => [\n      validation.filter((v) => v.level === 'error').length > 0,\n      validation.filter((v) => v.level === 'warning').length > 0,\n      validation.filter((v) => v.level === 'info').length > 0,\n    ],\n    [validation]\n  )\n\n  return useMemo(() => {\n    return {\n      validation,\n      hasError,\n      hasWarning,\n      hasInfo,\n    }\n  }, [validation, hasError, hasWarning, hasInfo])\n}\n","import React, {createContext} from 'react'\nimport {PortableTextMarker} from '../../../types'\n\nexport const PortableTextMarkersContext = createContext<PortableTextMarker[]>([])\n\nexport function PortableTextMarkersProvider(props: {\n  markers: PortableTextMarker[]\n  children: React.ReactNode\n}) {\n  return (\n    <PortableTextMarkersContext.Provider value={props.markers}>\n      {props.children}\n    </PortableTextMarkersContext.Provider>\n  )\n}\n","import {Path} from '@sanity/types'\nimport {isEqual} from '@sanity/util/paths'\nimport {useContext} from 'react'\nimport {PortableTextMarker} from '../../../types'\nimport {PortableTextMarkersContext} from '../contexts/PortableTextMarkers'\n\nexport function usePortableTextMarkers(path: Path): PortableTextMarker[] {\n  const ctx = useContext(PortableTextMarkersContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx.filter((m) => isEqual(m.path, path))\n}\n","import React, {createContext} from 'react'\nimport {PortableTextMemberItem} from '../PortableTextInput'\n\nexport const PortableTextMemberItemsContext = createContext<PortableTextMemberItem[]>([])\n\nexport function PortableTextMemberItemsProvider(props: {\n  memberItems: PortableTextMemberItem[]\n  children: React.ReactNode\n}) {\n  return (\n    <PortableTextMemberItemsContext.Provider value={props.memberItems}>\n      {props.children}\n    </PortableTextMemberItemsContext.Provider>\n  )\n}\n","import {useContext} from 'react'\nimport {PortableTextMemberItemsContext} from '../contexts/PortableTextMembers'\nimport {PortableTextMemberItem} from '../PortableTextInput'\n\nexport function usePortableTextMemberItem(key: string): PortableTextMemberItem | undefined {\n  const ctx = useContext(PortableTextMemberItemsContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx.find((m) => m.key === key)\n}\n\nexport function usePortableTextMemberItems(): PortableTextMemberItem[] {\n  const ctx = useContext(PortableTextMemberItemsContext)\n  if (!ctx) {\n    throw new Error('Form context not provided')\n  }\n  return ctx\n}\n","import {SchemaType} from '@sanity/types'\n\nconst PRIMITIVES = ['string', 'number', 'boolean']\n\nexport function is(typeName: string, type: SchemaType): boolean {\n  return type.name === typeName || Boolean(type.type && is(typeName, type.type))\n}\n\nexport {is as type}\n\nexport function primitive(type: SchemaType) {\n  return PRIMITIVES.some((typeName) => is(typeName, type))\n}\n","import {EditIcon, LinkIcon, TrashIcon, EyeOpenIcon, EllipsisVerticalIcon} from '@sanity/icons'\nimport {\n  PortableTextBlock,\n  PortableTextEditor,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport {\n  Box,\n  Button,\n  Flex,\n  Menu,\n  MenuButton,\n  MenuButtonProps,\n  MenuItem,\n  useGlobalKeyDown,\n  useLayer,\n} from '@sanity/ui'\nimport React, {forwardRef, MouseEvent, ReactElement, useCallback, useMemo, useRef} from 'react'\nimport {useId} from '@reach/auto-id'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {IntentLink} from '../../../../router'\nimport {FIXME, RenderPreviewCallback} from '../../../types'\nimport {is} from '../../../utils/is'\n\ninterface BlockObjectPreviewProps {\n  focused: boolean\n  type: ObjectSchemaType\n  value: PortableTextBlock\n  readOnly?: boolean\n  onClickingEdit: () => void\n  onClickingDelete: (event: MouseEvent) => void\n  renderPreview: RenderPreviewCallback\n}\n\nconst POPOVER_PROPS: MenuButtonProps['popover'] = {\n  constrainSize: true,\n  placement: 'bottom',\n  portal: 'default',\n  tone: 'default',\n}\n\nexport function BlockObjectPreview(props: BlockObjectPreviewProps): ReactElement {\n  const {focused, value, type, readOnly, onClickingEdit, onClickingDelete, renderPreview} = props\n  const {isTopLayer} = useLayer()\n  const editor = usePortableTextEditor()\n  const menuButtonId = useId() || ''\n  const menuButton = useRef<HTMLButtonElement | null>(null)\n  const isTabbing = useRef<boolean>(false)\n  const isCustomPreviewComponent = Boolean((type.preview as FIXME)?.component)\n  const isImageType = is('image', type)\n\n  const referenceLink = useMemo(\n    () =>\n      forwardRef(function ReferenceLink(linkProps: FIXME, ref: FIXME) {\n        return <IntentLink {...linkProps} intent=\"edit\" params={{id: value._ref}} ref={ref} />\n      }),\n    [value?._ref]\n  )\n\n  // Go to menu when tabbed to\n  // Focus block on escape\n  useGlobalKeyDown(\n    useCallback(\n      (event) => {\n        if (!focused) {\n          return\n        }\n        if (event.key === 'Escape' && isTopLayer) {\n          // event.preventDefault()\n          // event.stopPropagation()\n          isTabbing.current = false\n          PortableTextEditor.focus(editor)\n        }\n        if (event.key === 'Tab') {\n          if (menuButton.current && !isTabbing.current) {\n            event.preventDefault()\n            event.stopPropagation()\n            menuButton.current.focus()\n            isTabbing.current = true\n          }\n        }\n      },\n      [focused, isTopLayer, editor]\n    )\n  )\n\n  const actions = (\n    <MenuButton\n      button={\n        <Button\n          aria-label=\"Open menu\"\n          fontSize={1}\n          iconRight={EllipsisVerticalIcon}\n          mode=\"bleed\"\n          paddingX={2}\n        />\n      }\n      ref={menuButton}\n      id={menuButtonId}\n      menu={\n        <Menu>\n          {value?._ref && (\n            <MenuItem as={referenceLink} data-as=\"a\" icon={LinkIcon} text=\"Open reference\" />\n          )}\n\n          {readOnly && <MenuItem icon={EyeOpenIcon} onClick={onClickingEdit} text=\"View\" />}\n          {!readOnly && <MenuItem icon={EditIcon} onClick={onClickingEdit} text=\"Edit\" />}\n          {!readOnly && (\n            <MenuItem icon={TrashIcon} onClick={onClickingDelete} text=\"Delete\" tone=\"critical\" />\n          )}\n        </Menu>\n      }\n      popover={POPOVER_PROPS}\n    />\n  )\n\n  if (isCustomPreviewComponent) {\n    return (\n      <Flex>\n        <Box flex={1}>\n          {renderPreview({\n            layout: isImageType ? 'blockImage' : 'block',\n            schemaType: type,\n            value,\n          })}\n        </Box>\n        <Box marginLeft={1}>{actions}</Box>\n      </Flex>\n    )\n  }\n\n  return (\n    <>\n      {renderPreview({\n        actions,\n        layout: isImageType ? 'blockImage' : 'block',\n        schemaType: type,\n        value,\n      })}\n    </>\n  )\n}\n","import {hues} from '@sanity/color'\nimport {Card, Theme, Flex, Box} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const Root = styled(Card)((props: {theme: Theme}) => {\n  const {color, radius, space} = props.theme.sanity\n\n  const overlay = css`\n    pointer-events: none;\n    content: '';\n    position: absolute;\n    top: -${space[1]}px;\n    bottom: -${space[1]}px;\n    left: -${space[1]}px;\n    right: -${space[1]}px;\n    border-radius: ${radius[2]}px;\n    mix-blend-mode: ${color.dark ? 'screen' : 'multiply'};\n  `\n\n  return css`\n    box-shadow: 0 0 0 1px var(--card-border-color);\n    border-radius: ${radius[1]}px;\n    pointer-events: all;\n    position: relative;\n\n    &[data-focused] {\n      box-shadow: 0 0 0 1px ${color.selectable?.primary.selected.border};\n    }\n\n    &:not([data-focused]):not([data-selected]) {\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.input.default.hovered.border};\n        }\n      }\n    }\n\n    &[data-markers] {\n      &:after {\n        ${overlay}\n        background-color: ${color.dark ? hues.purple[950].hex : hues.purple[50].hex};\n      }\n    }\n\n    &[data-warning] {\n      &:after {\n        ${overlay}\n        background-color: ${color.muted.caution.hovered.bg};\n      }\n\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.muted.caution.hovered.border};\n        }\n      }\n    }\n\n    &[data-invalid] {\n      &:after {\n        ${overlay}\n        background-color: ${color.input.invalid.enabled.bg};\n      }\n\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.input.invalid.hovered.border};\n        }\n      }\n    }\n  `\n})\n\nexport const PreviewContainer = styled(Flex)`\n  user-select: none;\n  pointer-events: none;\n`\n\nexport const ChangeIndicatorWrapper = styled.div<{$hasChanges: boolean}>(\n  ({theme, $hasChanges}: {theme: Theme; $hasChanges: boolean}) => {\n    const {space} = theme.sanity\n\n    return css`\n      position: absolute;\n      width: ${space[2]}px;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      padding-left: ${space[1]}px;\n      user-select: none;\n\n      ${!$hasChanges &&\n      css`\n        display: none;\n      `}\n\n      [data-dragged] & {\n        visibility: hidden;\n      }\n    `\n  }\n)\n\nexport const InnerFlex = styled(Flex)`\n  position: relative;\n\n  [data-dragged] > & {\n    opacity: 0.5;\n  }\n`\n\nexport const BlockActionsOuter = styled(Box)`\n  width: 25px;\n  position: relative;\n\n  [data-dragged] & {\n    visibility: hidden;\n  }\n`\n\nexport const BlockActionsInner = styled(Flex)`\n  position: absolute;\n  right: 0;\n  [data-dragged] & {\n    visibility: hidden;\n  }\n`\n\nexport const TooltipBox = styled(Box)`\n  max-width: 250px;\n`\nexport const BlockPreview = styled(Box)((props: {theme: Theme}) => {\n  const color = props.theme.sanity.color.input\n  return css`\n    background-color: ${color.default.enabled.bg};\n  `\n})\n","import {\n  PortableTextEditor,\n  PortableTextBlock,\n  RenderAttributes,\n  EditorSelection,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport {ObjectSchemaType, Path} from '@sanity/types'\nimport {Tooltip, Flex, ResponsivePaddingProps} from '@sanity/ui'\nimport React, {useCallback, useMemo, useRef, useState} from 'react'\nimport {PatchArg} from '../../../patch'\nimport {RenderCustomMarkers, RenderPreviewCallback} from '../../../types'\nimport {RenderBlockActionsCallback} from '../types'\nimport {BlockActions} from '../BlockActions'\nimport {ReviewChangesHighlightBlock, StyledChangeIndicatorWithProvidedFullPath} from '../_common'\nimport {useFormBuilder} from '../../../useFormBuilder'\nimport {useMemberValidation} from '../hooks/useMemberValidation'\nimport {usePortableTextMarkers} from '../hooks/usePortableTextMarkers'\nimport {usePortableTextMemberItem} from '../hooks/usePortableTextMembers'\nimport {pathToString} from '../../../../field/paths'\nimport {BlockObjectPreview} from './BlockObjectPreview'\nimport {\n  Root,\n  PreviewContainer,\n  ChangeIndicatorWrapper,\n  InnerFlex,\n  BlockActionsOuter,\n  BlockActionsInner,\n  TooltipBox,\n  BlockPreview,\n} from './BlockObject.styles'\n\ninterface BlockObjectProps {\n  attributes: RenderAttributes\n  block: PortableTextBlock\n  isFullscreen?: boolean\n  onChange: (...patches: PatchArg[]) => void\n  onOpenItem: (path: Path) => void\n  readOnly?: boolean\n  renderBlockActions?: RenderBlockActionsCallback\n  renderCustomMarkers?: RenderCustomMarkers\n  renderPreview: RenderPreviewCallback\n  type: ObjectSchemaType\n}\n\nexport function BlockObject(props: BlockObjectProps) {\n  const {\n    attributes: {focused, selected, path},\n    block,\n    isFullscreen,\n    onChange,\n    onOpenItem,\n    readOnly,\n    renderBlockActions,\n    renderCustomMarkers,\n    renderPreview,\n    type,\n  } = props\n  const {Markers} = useFormBuilder().__internal.components\n  const elementRef = useRef<HTMLDivElement | null>(null)\n  const [reviewChangesHovered, setReviewChangesHovered] = useState<boolean>(false)\n  const markers = usePortableTextMarkers(path)\n  const editor = usePortableTextEditor()\n  const memberItem = usePortableTextMemberItem(pathToString(path))\n\n  const handleMouseOver = useCallback(() => setReviewChangesHovered(true), [])\n  const handleMouseOut = useCallback(() => setReviewChangesHovered(false), [])\n\n  const handleEdit = useCallback(() => {\n    if (memberItem) {\n      onOpenItem(memberItem.node.path)\n    }\n  }, [onOpenItem, memberItem])\n\n  const handleDoubleClickToOpen = useCallback(\n    (e) => {\n      e.preventDefault()\n      e.stopPropagation()\n      PortableTextEditor.blur(editor)\n      handleEdit()\n    },\n    [editor, handleEdit]\n  )\n\n  const handleDelete = useCallback(\n    (e) => {\n      e.stopPropagation()\n      e.preventDefault()\n      const sel: EditorSelection = {focus: {path, offset: 0}, anchor: {path, offset: 0}}\n      PortableTextEditor.delete(editor, sel, {mode: 'blocks'})\n      // Focus will not stick unless this is done through a timeout when deleted through clicking the menu button.\n      setTimeout(() => PortableTextEditor.focus(editor))\n    },\n    [editor, path]\n  )\n\n  const blockPreview = useMemo(() => {\n    return (\n      <BlockObjectPreview\n        type={type}\n        focused={focused}\n        value={block}\n        readOnly={readOnly}\n        onClickingDelete={handleDelete}\n        onClickingEdit={handleEdit}\n        renderPreview={renderPreview}\n      />\n    )\n  }, [focused, type, block, readOnly, handleDelete, handleEdit, renderPreview])\n\n  const tone = selected || focused ? 'primary' : 'default'\n\n  const innerPaddingProps: ResponsivePaddingProps = useMemo(() => {\n    if (isFullscreen && !renderBlockActions) {\n      return {paddingX: 5}\n    }\n\n    if (isFullscreen && renderBlockActions) {\n      return {paddingLeft: 5, paddingRight: 2}\n    }\n\n    if (renderBlockActions) {\n      return {\n        paddingLeft: 3,\n        paddingRight: 2,\n      }\n    }\n\n    return {paddingX: 3}\n  }, [isFullscreen, renderBlockActions])\n\n  const {validation, hasError, hasWarning, hasInfo} = useMemberValidation(memberItem?.node)\n\n  const hasMarkers = Boolean(markers.length > 0)\n\n  const isImagePreview = memberItem?.node.schemaType.name === 'image'\n\n  const tooltipEnabled = hasError || hasWarning || hasInfo || (hasMarkers && renderCustomMarkers)\n\n  return (\n    <Flex paddingBottom={1} marginY={3} contentEditable={false}>\n      <InnerFlex flex={1}>\n        <PreviewContainer flex={1} {...innerPaddingProps}>\n          <Tooltip\n            placement=\"top\"\n            portal=\"editor\"\n            disabled={!tooltipEnabled}\n            content={\n              tooltipEnabled && (\n                <TooltipBox padding={2}>\n                  <Markers\n                    markers={markers}\n                    validation={validation}\n                    renderCustomMarkers={renderCustomMarkers}\n                  />\n                </TooltipBox>\n              )\n            }\n          >\n            <Root\n              data-focused={focused ? '' : undefined}\n              data-image-preview={isImagePreview ? '' : undefined}\n              data-invalid={hasError ? '' : undefined}\n              data-markers={hasMarkers && renderCustomMarkers ? '' : undefined}\n              data-selected={selected ? '' : undefined}\n              data-testid=\"pte-block-object\"\n              data-warning={hasWarning ? '' : undefined}\n              flex={1}\n              onDoubleClick={handleDoubleClickToOpen}\n              padding={isImagePreview ? 0 : 1}\n              ref={elementRef}\n              tone={tone}\n            >\n              <BlockPreview ref={memberItem?.elementRef as React.RefObject<HTMLDivElement>}>\n                {blockPreview}\n              </BlockPreview>\n            </Root>\n          </Tooltip>\n        </PreviewContainer>\n\n        <BlockActionsOuter marginRight={1}>\n          <BlockActionsInner>\n            {renderBlockActions && block && focused && !readOnly && (\n              <BlockActions\n                onChange={onChange}\n                block={block}\n                renderBlockActions={renderBlockActions}\n              />\n            )}\n          </BlockActionsInner>\n        </BlockActionsOuter>\n\n        {isFullscreen && memberItem && (\n          <ChangeIndicatorWrapper\n            onMouseOver={handleMouseOver}\n            onMouseOut={handleMouseOut}\n            $hasChanges={memberItem.member.item.changed}\n          >\n            <StyledChangeIndicatorWithProvidedFullPath\n              withHoverEffect={false}\n              hasFocus={focused}\n              path={memberItem.member.item.path}\n              isChanged={memberItem.member.item.changed}\n            />\n          </ChangeIndicatorWrapper>\n        )}\n\n        {reviewChangesHovered && <ReviewChangesHighlightBlock />}\n      </InnerFlex>\n    </Flex>\n  )\n}\n","import React, {useRef, useCallback, useEffect} from 'react'\nimport {\n  Box,\n  Button,\n  Inline,\n  Popover,\n  PopoverProps,\n  Text,\n  useGlobalKeyDown,\n  useTheme,\n} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {EditIcon, TrashIcon} from '@sanity/icons'\n\nconst ToolbarPopover = styled(Popover)`\n  &[data-popper-reference-hidden='true'] {\n    display: none !important;\n  }\n`\n\nconst POPOVER_FALLBACK_PLACEMENTS: PopoverProps['fallbackPlacements'] = ['top', 'bottom']\n\ninterface InlineObjectToolbarPopoverProps {\n  onDelete: (event: React.MouseEvent<HTMLButtonElement>) => void\n  onEdit: (event: React.MouseEvent<HTMLButtonElement>) => void\n  open: boolean\n  referenceElement: HTMLElement | null\n  scrollElement: HTMLElement | null\n  setOpen: (open: boolean) => void\n  title: string\n}\n\nexport function InlineObjectToolbarPopover(props: InlineObjectToolbarPopoverProps) {\n  const {open, onEdit, onDelete, referenceElement, scrollElement, setOpen, title} = props\n  const {sanity} = useTheme()\n  const editButtonRef = useRef<HTMLButtonElement | null>(null)\n  const popoverScheme = sanity.color.dark ? 'light' : 'dark'\n  const isTabbing = useRef<boolean>(false)\n\n  // Close floating toolbar on Escape\n  // Focus to edit button on Tab\n  useGlobalKeyDown(\n    useCallback(\n      (event) => {\n        if (!open) {\n          return\n        }\n        if (event.key === 'Escape') {\n          event.preventDefault()\n          event.stopPropagation()\n          isTabbing.current = false\n          setOpen(false)\n        }\n        if (event.key === 'Tab') {\n          if (!isTabbing.current) {\n            event.preventDefault()\n            event.stopPropagation()\n            editButtonRef.current?.focus()\n            isTabbing.current = true\n          }\n        }\n      },\n      [open, setOpen]\n    )\n  )\n\n  useEffect(() => {\n    if (open && isTabbing.current) {\n      editButtonRef.current?.focus()\n    }\n  }, [open])\n\n  return (\n    <div contentEditable={false}>\n      <ToolbarPopover\n        boundaryElement={scrollElement}\n        constrainSize\n        content={\n          <Box padding={1}>\n            <Inline space={1}>\n              <Box padding={2}>\n                <Text weight=\"semibold\" size={1}>\n                  {title}\n                </Text>\n              </Box>\n              <Button\n                icon={EditIcon}\n                mode=\"bleed\"\n                onClick={onEdit}\n                padding={2}\n                ref={editButtonRef}\n                alt=\"Edit object\"\n              />\n              <Button\n                icon={TrashIcon}\n                mode=\"bleed\"\n                padding={2}\n                onClick={onDelete}\n                tone=\"critical\"\n                alt=\"Remove object\"\n              />\n            </Inline>\n          </Box>\n        }\n        fallbackPlacements={POPOVER_FALLBACK_PLACEMENTS}\n        open\n        placement=\"top\"\n        portal=\"editor\"\n        referenceElement={referenceElement}\n        scheme={popoverScheme}\n      />\n    </div>\n  )\n}\n","import {hues} from '@sanity/color'\nimport {\n  PortableTextChild,\n  Type,\n  RenderAttributes,\n  PortableTextEditor,\n  usePortableTextEditor,\n  usePortableTextEditorSelection,\n} from '@sanity/portable-text-editor'\nimport {Path} from '@sanity/types'\nimport React, {useCallback, useEffect, useMemo, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport {Box, Card, Theme, Tooltip} from '@sanity/ui'\nimport {RenderCustomMarkers, FIXME, RenderPreviewCallback} from '../../../types'\nimport {useFormBuilder} from '../../../useFormBuilder'\nimport {PortableTextEditorElement} from '../Compositor'\nimport {usePortableTextMarkers} from '../hooks/usePortableTextMarkers'\nimport {useMemberValidation} from '../hooks/useMemberValidation'\nimport {usePortableTextMemberItem} from '../hooks/usePortableTextMembers'\nimport {pathToString} from '../../../../field/paths'\nimport {InlineObjectToolbarPopover} from './InlineObjectToolbarPopover'\n\ninterface InlineObjectProps {\n  attributes: RenderAttributes\n  onOpenItem: (path: Path) => void\n  readOnly?: boolean\n  renderCustomMarkers?: RenderCustomMarkers\n  renderPreview: RenderPreviewCallback\n  scrollElement: HTMLElement | null\n  type: Type\n  value: PortableTextChild\n}\n\nfunction rootStyle({theme}: {theme: Theme}) {\n  const {color, radius} = theme.sanity\n\n  return css`\n    line-height: 0;\n    border-radius: ${radius[2]}px;\n    padding: 2px;\n    box-shadow: inset 0 0 0 1px var(--card-border-color);\n    height: calc(1em - 1px);\n    margin-top: 0.0625em;\n    cursor: default;\n\n    &:not([hidden]) {\n      display: inline-flex;\n      align-items: center;\n      vertical-align: top;\n    }\n\n    &[data-ready-only] {\n      cursor: default;\n    }\n\n    &[data-focused] {\n      box-shadow: inset 0 0 0 1px ${color.selectable?.primary.selected.border};\n      color: ${color.selectable?.primary.pressed.fg};\n    }\n\n    &[data-selected] {\n      background-color: ${color.selectable?.primary.pressed.bg};\n    }\n\n    &:not([data-focused]):not([data-selected]) {\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.input.default.hovered.border};\n        }\n      }\n    }\n\n    &[data-markers] {\n      --card-bg-color: ${color.dark ? hues.purple[950].hex : hues.purple[50].hex};\n    }\n\n    &[data-warning] {\n      --card-bg-color: ${color.muted.caution.hovered.bg};\n\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.muted.caution.hovered.border};\n        }\n      }\n    }\n\n    &[data-invalid] {\n      --card-bg-color: ${color.input.invalid.enabled.bg};\n      --card-border-color: ${color.input.invalid.enabled.border};\n\n      @media (hover: hover) {\n        &:hover {\n          --card-border-color: ${color.input.invalid.hovered.border};\n        }\n      }\n    }\n  `\n}\n\nconst Root = styled(Card)(rootStyle)\n\nconst PreviewSpan = styled.span`\n  display: block;\n  max-width: calc(5em + 80px);\n  position: relative;\n`\n\nconst TooltipBox = styled(Box)`\n  max-width: 250px;\n`\n\nexport const InlineObject = React.forwardRef(function InlineObject(\n  props: InlineObjectProps,\n  forwardedRef: React.ForwardedRef<PortableTextEditorElement>\n) {\n  const {\n    attributes: {focused, selected, path},\n    onOpenItem,\n    readOnly,\n    renderCustomMarkers,\n    renderPreview,\n    scrollElement,\n    type,\n    value,\n  } = props\n  const {Markers} = useFormBuilder().__internal.components\n  const editor = usePortableTextEditor()\n  const editorSelection = usePortableTextEditorSelection()\n  const markers = usePortableTextMarkers(path)\n  const memberItem = usePortableTextMemberItem(pathToString(path))\n  const {validation, hasError, hasWarning} = useMemberValidation(memberItem?.node)\n  const hasValidationMarkers = validation.length > 0\n  const [showPopover, setShowPopover] = useState(false)\n\n  const tone = useMemo(() => {\n    if (hasError) {\n      return 'critical'\n    }\n\n    if (hasWarning) {\n      return 'caution'\n    }\n\n    if (selected || focused) {\n      return 'primary'\n    }\n    return undefined\n  }, [focused, hasError, hasWarning, selected])\n\n  useEffect(() => {\n    if (memberItem?.elementRef?.current) {\n      setShowPopover(!readOnly && focused && selected)\n    }\n  }, [focused, selected, editorSelection, memberItem?.elementRef, readOnly])\n\n  const preview = useMemo(\n    () => (\n      <PreviewSpan>\n        {renderPreview({\n          fallbackTitle: 'Click to edit',\n          layout: 'inline',\n          schemaType: type as FIXME,\n          value,\n        })}\n      </PreviewSpan>\n    ),\n\n    [renderPreview, type, value]\n  )\n\n  const markersToolTip = useMemo(\n    () =>\n      markers.length > 0 || validation.length > 0 ? (\n        <Tooltip\n          placement=\"bottom\"\n          portal=\"editor\"\n          content={\n            <TooltipBox padding={2}>\n              <Markers\n                markers={markers}\n                validation={validation}\n                renderCustomMarkers={renderCustomMarkers}\n              />\n            </TooltipBox>\n          }\n        >\n          {preview}\n        </Tooltip>\n      ) : undefined,\n    [Markers, markers, validation, preview, renderCustomMarkers]\n  )\n\n  const handleRemoveClick = useCallback(\n    (event: React.MouseEvent<HTMLButtonElement>): void => {\n      event.preventDefault()\n      event.stopPropagation()\n      setShowPopover(false)\n      const point = {path, offset: 0}\n      const selection = {anchor: point, focus: point}\n      PortableTextEditor.delete(editor, selection, {mode: 'children'})\n      PortableTextEditor.focus(editor)\n    },\n    [editor, path]\n  )\n\n  const handleEditClick = useCallback((): void => {\n    setShowPopover(false)\n    PortableTextEditor.blur(editor)\n    if (memberItem) {\n      onOpenItem(memberItem.node.path)\n    }\n  }, [editor, memberItem, onOpenItem])\n\n  return (\n    <>\n      <Root\n        data-focused={focused || undefined}\n        data-invalid={hasError || undefined}\n        data-warning={hasWarning || undefined}\n        data-selected={selected || undefined}\n        data-read-only={readOnly || undefined}\n        data-markers={hasValidationMarkers || undefined}\n        tone={tone}\n        forwardedAs=\"span\"\n        contentEditable={false}\n        ref={memberItem?.elementRef as React.RefObject<HTMLDivElement>}\n      >\n        <span ref={forwardedRef} onDoubleClick={handleEditClick}>\n          {markersToolTip || preview}\n        </span>\n      </Root>\n      {showPopover && (\n        <InlineObjectToolbarPopover\n          open={showPopover}\n          setOpen={setShowPopover}\n          onDelete={handleRemoveClick}\n          onEdit={handleEditClick}\n          referenceElement={memberItem?.elementRef?.current || null}\n          scrollElement={scrollElement}\n          title={type?.title || type.name}\n        />\n      )}\n    </>\n  )\n})\n","import React, {useState, useRef, useMemo, useEffect, useCallback} from 'react'\nimport {\n  Box,\n  Button,\n  Inline,\n  Popover,\n  PopoverProps,\n  Text,\n  useGlobalKeyDown,\n  useTheme,\n} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {EditIcon, TrashIcon} from '@sanity/icons'\nimport {PortableTextEditor, usePortableTextEditor} from '@sanity/portable-text-editor'\n\nconst ToolbarPopover = styled(Popover)`\n  &[data-popper-reference-hidden='true'] {\n    display: none !important;\n  }\n`\n\nconst POPOVER_FALLBACK_PLACEMENTS: PopoverProps['fallbackPlacements'] = ['top', 'bottom']\n\ninterface AnnotationToolbarPopoverProps {\n  /**\n   * Needed to update the popover position on scroll\n   */\n  focused: boolean\n  scrollElement: HTMLElement | null\n  annotationElement: HTMLElement | null\n  textElement: HTMLElement | null\n  onEdit: (event: React.MouseEvent<HTMLButtonElement>) => void\n  onDelete: (event: React.MouseEvent<HTMLButtonElement>) => void\n  title: string\n}\n\nexport function AnnotationToolbarPopover(props: AnnotationToolbarPopoverProps) {\n  const {scrollElement, annotationElement, focused, textElement, title, onEdit, onDelete} = props\n  const [open, setOpen] = useState<boolean>(false)\n  const [cursorRect, setCursorRect] = useState<DOMRect | null>(null)\n  const [selection, setSelection] = useState<{\n    anchorNode: Node | null\n    anchorOffset: number\n    focusNode: Node | null\n    focusOffset: number\n  } | null>(null)\n  const isClosingRef = useRef<boolean>(false)\n  const rangeRef = useRef<Range | null>(null)\n  const editButtonRef = useRef<HTMLButtonElement | null>(null)\n  const isTabbing = useRef<boolean>(false)\n  const {sanity} = useTheme()\n  const editor = usePortableTextEditor()\n\n  const popoverScheme = sanity.color.dark ? 'light' : 'dark'\n\n  // This is a \"virtual element\" (supported by Popper.js)\n  const cursorElement = useMemo(() => {\n    if (!cursorRect) {\n      return null\n    }\n\n    return {\n      getBoundingClientRect: () => {\n        return cursorRect\n      },\n    }\n  }, [cursorRect])\n\n  useEffect(() => {\n    if (!open) {\n      return undefined\n    }\n\n    const handleScroll = () => {\n      if (rangeRef.current) {\n        setCursorRect(rangeRef.current.getBoundingClientRect())\n      }\n    }\n\n    scrollElement?.addEventListener('scroll', handleScroll, {passive: true})\n\n    return () => {\n      scrollElement?.removeEventListener('scroll', handleScroll)\n    }\n  }, [open, scrollElement])\n\n  // Close floating toolbar on Escape\n  useGlobalKeyDown(\n    useCallback(\n      (event) => {\n        if (!open) {\n          return\n        }\n        if (event.key === 'Escape') {\n          event.preventDefault()\n          event.stopPropagation()\n          setOpen(false)\n          isTabbing.current = false\n          PortableTextEditor.focus(editor)\n        }\n        if (event.key === 'Tab') {\n          if (!isTabbing.current) {\n            event.preventDefault()\n            event.stopPropagation()\n            editButtonRef.current?.focus()\n            isTabbing.current = true\n          }\n        }\n      },\n      [editor, open]\n    )\n  )\n\n  // Detect selection changes\n  useEffect(() => {\n    function handleSelectionChange() {\n      if (!textElement) return\n      const winSelection = window.getSelection()\n\n      if (!winSelection) {\n        return\n      }\n\n      const {anchorNode, anchorOffset, focusNode, focusOffset} = winSelection\n\n      setSelection({\n        anchorNode,\n        anchorOffset,\n        focusNode,\n        focusOffset,\n      })\n    }\n\n    document.addEventListener('selectionchange', handleSelectionChange, {passive: true})\n\n    return () => {\n      document.removeEventListener('selectionchange', handleSelectionChange)\n    }\n  }, [textElement])\n\n  // Open popover when selection is within annotations\n  useEffect(() => {\n    if (!selection) return\n    if (isClosingRef.current) return\n    const {anchorNode, focusNode} = selection\n    // Safari would close the popover by loosing range when button is focused.\n    // If we are focused and currently tabbing to the action buttons, just return here.\n    if (focused && isTabbing.current) {\n      return\n    }\n    if (annotationElement && annotationElement.contains(anchorNode) && anchorNode === focusNode) {\n      const range = window.getSelection()?.getRangeAt(0)\n      const rect = range?.getBoundingClientRect()\n\n      rangeRef.current = range || null\n\n      if (rect) {\n        setCursorRect(rect)\n      }\n      setOpen(true)\n    } else {\n      setOpen(false)\n      setCursorRect(null)\n      rangeRef.current = null\n    }\n  }, [focused, selection, annotationElement])\n\n  return (\n    <ToolbarPopover\n      boundaryElement={scrollElement}\n      constrainSize\n      content={\n        <Box padding={1}>\n          <Inline space={1}>\n            <Box padding={2}>\n              <Text weight=\"semibold\" size={1}>\n                {title}\n              </Text>\n            </Box>\n            <Button\n              ref={editButtonRef}\n              icon={EditIcon}\n              mode=\"bleed\"\n              onClick={onEdit}\n              padding={2}\n              alt=\"Edit annotation\"\n            />\n            <Button\n              icon={TrashIcon}\n              mode=\"bleed\"\n              padding={2}\n              onClick={onDelete}\n              tone=\"critical\"\n              alt=\"Remove annotation\"\n            />\n          </Inline>\n        </Box>\n      }\n      fallbackPlacements={POPOVER_FALLBACK_PLACEMENTS}\n      open={open}\n      placement=\"top\"\n      portal=\"editor\"\n      referenceElement={cursorElement as HTMLElement}\n      scheme={popoverScheme}\n    />\n  )\n}\n","import {hues} from '@sanity/color'\nimport {\n  PortableTextChild,\n  PortableTextEditor,\n  RenderAttributes,\n  usePortableTextEditor,\n  usePortableTextEditorSelection,\n} from '@sanity/portable-text-editor'\nimport {ObjectSchemaType, Path} from '@sanity/types'\nimport {Box, Theme, ThemeColorToneKey, Tooltip} from '@sanity/ui'\nimport React, {SyntheticEvent, useCallback, useEffect, useMemo, useRef, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport {FIXME, RenderCustomMarkers} from '../../../types'\nimport {DefaultMarkers} from '../_legacyDefaultParts/Markers'\nimport {useFormBuilder} from '../../../useFormBuilder'\nimport {useMemberValidation} from '../hooks/useMemberValidation'\nimport {usePortableTextMarkers} from '../hooks/usePortableTextMarkers'\nimport {usePortableTextMemberItem} from '../hooks/usePortableTextMembers'\nimport {pathToString} from '../../../../field/paths'\nimport {AnnotationToolbarPopover} from './AnnotationToolbarPopover'\n\ninterface AnnotationProps {\n  attributes: RenderAttributes\n  children: JSX.Element\n  onOpenItem: (path: Path) => void\n  readOnly?: boolean\n  renderCustomMarkers?: RenderCustomMarkers\n  scrollElement: HTMLElement | null\n  type: ObjectSchemaType\n  value: PortableTextChild\n}\n\nconst Root = styled.span<{$toneKey?: Exclude<ThemeColorToneKey, 'transparent'>}>(\n  (props: {$toneKey?: Exclude<ThemeColorToneKey, 'transparent'>; theme: Theme}) => {\n    const {$toneKey = 'default', theme} = props\n\n    return css`\n      text-decoration: none;\n      display: inline;\n      background-color: ${theme.sanity.color.selectable?.[$toneKey].enabled.bg};\n      border-bottom: 1px dashed ${theme.sanity.color.selectable?.[$toneKey].enabled.fg};\n      color: ${theme.sanity.color.selectable?.[$toneKey].enabled.fg};\n\n      &[data-link] {\n        border-bottom: 1px solid ${theme.sanity.color.selectable?.[$toneKey].enabled.fg};\n      }\n\n      &[data-custom-markers] {\n        background-color: ${theme.sanity.color.dark ? hues.purple[950].hex : hues.purple[50].hex};\n      }\n\n      &[data-warning] {\n        background-color: ${theme.sanity.color.muted.caution.hovered.bg};\n      }\n\n      &[data-error] {\n        background-color: ${theme.sanity.color.muted.critical.hovered.bg};\n      }\n    `\n  }\n)\n\nconst TooltipBox = styled(Box).attrs({forwardedAs: 'span'})`\n  max-width: 250px;\n`\n\nexport const Annotation = function Annotation(props: AnnotationProps) {\n  const {\n    attributes: {focused, path, selected},\n    children,\n    onOpenItem,\n    renderCustomMarkers,\n    scrollElement,\n    readOnly,\n    type,\n    value,\n  } = props\n  const {Markers = DefaultMarkers} = useFormBuilder().__internal.components\n  const annotationRef = useRef<HTMLElement>(null)\n  const editor = usePortableTextEditor()\n  const editorSelection = usePortableTextEditorSelection()\n  const markDefPath = useMemo(\n    () => [path[0]].concat(['markDefs', {_key: value._key}]),\n    [path, value._key]\n  )\n  const [textElement, setTextElement] = useState<HTMLSpanElement | null>(null)\n  const memberItem = usePortableTextMemberItem(pathToString(markDefPath))\n  const {validation, hasError, hasWarning} = useMemberValidation(memberItem?.node)\n  const markers = usePortableTextMarkers(path)\n  const [showPopover, setShowPopover] = useState(false)\n\n  const text = useMemo(\n    () => (\n      <span ref={setTextElement} data-annotation=\"\">\n        {children}\n      </span>\n    ),\n\n    [children]\n  )\n\n  useEffect(() => {\n    setShowPopover(true)\n  }, [editorSelection])\n\n  useEffect(() => {\n    if (memberItem?.elementRef?.current) {\n      setShowPopover(!readOnly && focused && selected)\n    }\n  }, [focused, selected, memberItem?.elementRef, readOnly])\n\n  const markersToolTip = useMemo(\n    () =>\n      validation.length > 0 || markers.length > 0 ? (\n        <Tooltip\n          placement=\"bottom\"\n          portal=\"default\"\n          content={\n            <TooltipBox padding={2}>\n              <Markers\n                markers={markers}\n                renderCustomMarkers={renderCustomMarkers}\n                validation={validation}\n              />\n            </TooltipBox>\n          }\n        >\n          <span>{text}</span>\n        </Tooltip>\n      ) : undefined,\n    [Markers, markers, renderCustomMarkers, text, validation]\n  )\n\n  const handleEditClick = useCallback(\n    (event: SyntheticEvent): void => {\n      setShowPopover(false)\n      PortableTextEditor.blur(editor)\n      event.preventDefault()\n      event.stopPropagation()\n      if (memberItem) {\n        onOpenItem(memberItem.node.path)\n      }\n    },\n    [editor, memberItem, onOpenItem]\n  )\n\n  const handleRemoveClick = useCallback(\n    (event: React.MouseEvent<HTMLButtonElement>): void => {\n      event.preventDefault()\n      event.stopPropagation()\n      PortableTextEditor.removeAnnotation(editor, type as FIXME)\n      PortableTextEditor.focus(editor)\n    },\n    [editor, type]\n  )\n\n  const isLink = type.name === 'link'\n\n  const toneKey = useMemo(() => {\n    if (hasError) {\n      return 'critical'\n    }\n\n    if (hasWarning) {\n      return 'caution'\n    }\n\n    if (isLink) {\n      return 'primary'\n    }\n    return 'default'\n  }, [isLink, hasError, hasWarning])\n\n  const hasCustomMarkers = markers.length > 0\n\n  return (\n    <Root\n      $toneKey={toneKey}\n      ref={annotationRef}\n      data-link={isLink ? '' : undefined}\n      data-error={hasError ? '' : undefined}\n      data-warning={hasWarning ? '' : undefined}\n      data-custom-markers={hasCustomMarkers ? '' : undefined}\n    >\n      <span ref={memberItem?.elementRef}>{markersToolTip || text}</span>\n      {showPopover && (\n        <AnnotationToolbarPopover\n          focused={focused}\n          textElement={textElement}\n          annotationElement={annotationRef?.current}\n          scrollElement={scrollElement}\n          onEdit={handleEditClick}\n          onDelete={handleRemoveClick}\n          title={type?.title || type.name}\n        />\n      )}\n    </Root>\n  )\n}\n","import {ResponsivePaddingProps} from '@sanity/ui'\n\nexport const TEXT_LEVELS = [1, 2, 3, 4, 5, 6, 7, 8, 9]\n\nexport const TEXT_BULLET_MARKERS = ['â—', 'â—‹', 'â– ']\n\nexport const TEXT_NUMBER_FORMATS = ['number', 'lower-alpha', 'lower-roman']\n\nexport const TEXT_DECORATOR_TAGS: Record<string, React.ElementType> = {\n  em: 'em',\n  'strike-through': 's',\n  underline: 'u',\n  strong: 'strong',\n  code: 'code',\n}\n\nexport const TEXT_STYLE_PADDING: Record<string, ResponsivePaddingProps> = {\n  h1: {\n    paddingTop: 5,\n    paddingBottom: 4,\n  },\n  h2: {\n    paddingTop: 4,\n    paddingBottom: 4,\n  },\n  h3: {\n    paddingTop: 4,\n    paddingBottom: 3,\n  },\n  h4: {\n    paddingTop: 4,\n    paddingBottom: 3,\n  },\n  h5: {\n    paddingTop: 4,\n    paddingBottom: 3,\n  },\n  h6: {\n    paddingTop: 4,\n    paddingBottom: 2,\n  },\n  normal: {\n    paddingTop: 2,\n    paddingBottom: 3,\n  },\n  blockquote: {\n    paddingTop: 2,\n    paddingBottom: 3,\n  },\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {TEXT_DECORATOR_TAGS} from './constants'\n\ninterface DecoratorProps {\n  mark: string\n  children: React.ReactNode\n}\n\nconst Root = styled.span`\n  /* Make sure the annotation styling is visible */\n  &[data-mark='code'] {\n    mix-blend-mode: multiply;\n    color: inherit;\n  }\n`\n\nexport function Decorator(props: DecoratorProps) {\n  const {mark, children} = props\n  const tag = TEXT_DECORATOR_TAGS[mark]\n\n  return (\n    <Root as={tag} data-mark={mark}>\n      {children}\n    </Root>\n  )\n}\n","export function createListName(level: number): string {\n  return `list-level-${level}`\n}\n","import {hues} from '@sanity/color'\nimport {Box, Flex, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {TEXT_BULLET_MARKERS, TEXT_NUMBER_FORMATS} from './constants'\nimport {createListName} from './helpers'\n\ninterface TextBlockStyleProps {\n  $level: number\n}\n\nfunction textBlockStyle(props: TextBlockStyleProps & {theme: Theme}) {\n  const {$level, theme} = props\n  const {color, fonts, radius, space} = theme.sanity\n  const numberMarker = TEXT_NUMBER_FORMATS[($level - 1) % TEXT_NUMBER_FORMATS.length]\n  const bulletMarker = TEXT_BULLET_MARKERS[($level - 1) % TEXT_BULLET_MARKERS.length]\n\n  return css`\n    --marker-bg-color: transparent;\n\n    mix-blend-mode: ${color.dark ? 'screen' : 'multiply'};\n    position: relative;\n\n    & > [data-ui='TextBlock_inner'] {\n      position: relative;\n      flex: 1;\n    }\n\n    & > div:before {\n      content: '';\n      position: absolute;\n      top: -${space[1]}px;\n      bottom: -${space[1]}px;\n      left: -${space[1]}px;\n      right: -${space[1]}px;\n      border-radius: ${radius[2]}px;\n      background-color: var(--marker-bg-color);\n    }\n\n    &[data-custom-markers] {\n      --marker-bg-color: ${color.dark ? hues.purple[950].hex : hues.purple[50].hex};\n    }\n\n    &[data-warning] {\n      --card-border-color: ${color.muted.caution.enabled.border};\n      --marker-bg-color: ${color.muted.caution.hovered.bg};\n    }\n\n    &[data-error] {\n      --card-border-color: ${color.muted.critical.enabled.border};\n      --marker-bg-color: ${color.muted.critical.hovered.bg};\n    }\n\n    & [data-list-prefix] {\n      position: absolute;\n      margin-left: -4.5rem;\n      width: 3.75rem;\n      text-align: right;\n      box-sizing: border-box;\n    }\n\n    &[data-list-item='number'] [data-list-prefix] {\n      font-variant-numeric: tabular-nums;\n\n      & > span:before {\n        content: counter(${createListName($level)}) '.';\n        content: counter(${createListName($level)}, ${numberMarker}) '.';\n      }\n    }\n\n    &[data-list-item='bullet'] [data-list-prefix] {\n      & > span {\n        position: relative;\n        top: -0.1875em;\n\n        &:before {\n          content: '${bulletMarker}';\n          font-size: 0.46666em;\n        }\n      }\n    }\n\n    & [data-text] {\n      overflow-wrap: anywhere;\n      text-transform: none;\n      white-space: pre-wrap;\n      font-family: ${fonts.text.family};\n      flex: 1;\n\n      *::selection {\n        background-color: ${color.selectable?.primary.pressed.bg};\n      }\n    }\n  `\n}\n\nexport const TextRoot = styled.div<TextBlockStyleProps>(textBlockStyle)\n\nexport const TextBlockFlexWrapper = styled(Flex)`\n  position: relative;\n`\n\nexport const ListPrefixWrapper = styled.div`\n  user-select: none;\n  white-space: nowrap;\n`\n\nexport const BlockExtrasContainer = styled(Box)`\n  user-select: none;\n`\n\nexport const BlockActionsOuter = styled(Box)`\n  line-height: 0;\n  width: 25px;\n  position: relative;\n`\n\nexport const BlockActionsInner = styled(Flex)(({theme}: {theme: Theme}) => {\n  const {fonts, space} = theme.sanity\n  const textSize1 = fonts.text.sizes[1]\n  const textSize2 = fonts.text.sizes[2]\n  const capHeight1 = textSize1.lineHeight - textSize1.ascenderHeight - textSize1.descenderHeight\n  const capHeight2 = textSize2.lineHeight - textSize2.ascenderHeight - textSize2.descenderHeight\n  const buttonHeight = capHeight1 + space[2] + space[2]\n\n  // This calculates the following:\n  // > var buttonHeight = 25px\n  // > var capHeight2 = 11px\n  // > 0 - (buttonHeight - capHeight2) / 2 = -7px\n  const negativeTop = 0 - (buttonHeight - capHeight2) / 2\n\n  return css`\n    user-select: none;\n    position: absolute;\n    right: 0;\n    top: ${negativeTop}px;\n  `\n})\n\nexport const TooltipBox = styled(Box)`\n  max-width: 250px;\n`\n\nexport const TextFlex = styled(Flex)<{$level?: number}>`\n  position: relative;\n  padding-left: ${({$level}) => ($level ? $level * 32 : 0)}px;\n`\n\nexport const ChangeIndicatorWrapper = styled.div<{$hasChanges: boolean}>(\n  ({theme, $hasChanges}: {theme: Theme; $hasChanges: boolean}) => {\n    const {space} = theme.sanity\n\n    return css`\n      position: absolute;\n      width: ${space[2]}px;\n      right: 0;\n      top: 0;\n      bottom: 0;\n      padding-left: ${space[1]}px;\n      user-select: none;\n\n      ${!$hasChanges &&\n      css`\n        display: none;\n      `}\n    `\n  }\n)\n","import {Heading, Text} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\ntype TextStyleProps = Omit<React.HTMLProps<HTMLDivElement>, 'as' | 'ref'>\ntype BlockQuoteStyleProps = Omit<React.HTMLProps<HTMLQuoteElement>, 'as' | 'ref'>\n\n// Without this container, editing with Android breaks due to how Text is styled via responsiveFont in @sanity/ui\nconst TextContainer = styled.div`\n  display: block;\n`\n\nexport const Normal = ({children, ...rest}: TextStyleProps) => (\n  <Text data-testid=\"text-style--normal\" {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Text>\n)\n\nexport const Heading1 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h1\" data-testid=\"text-style--h1\" size={5} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nexport const Heading2 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h2\" data-testid=\"text-style--h2\" size={4} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nexport const Heading3 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h3\" data-testid=\"text-style--h3\" size={3} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nexport const Heading4 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h4\" data-testid=\"text-style--h4\" size={2} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nexport const Heading5 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h5\" data-testid=\"text-style--h5\" size={1} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nexport const Heading6 = ({children, ...rest}: TextStyleProps) => (\n  <Heading as=\"h6\" data-testid=\"text-style--h6\" size={0} {...rest}>\n    <TextContainer>{children}</TextContainer>\n  </Heading>\n)\n\nconst BlockQuoteRoot = styled.blockquote`\n  position: relative;\n  display: block;\n  margin: 0;\n  padding-left: ${({theme}) => theme.sanity.space[3]}px;\n\n  &::before {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: -4px;\n    bottom: -4px;\n    width: 3px;\n    background: var(--card-border-color);\n  }\n`\n\nexport const BlockQuote = ({children, ...rest}: TextStyleProps) => (\n  // @todo figure out props typings for BlockQuoteStyleProps\n  <BlockQuoteRoot data-testid=\"text-style--blockquote\" {...(rest as any as BlockQuoteStyleProps)}>\n    <Text as=\"p\">{children}</Text>\n  </BlockQuoteRoot>\n)\n\nexport const TEXT_STYLES: Record<string, React.ComponentType<TextStyleProps>> = {\n  normal: Normal,\n  h1: Heading1,\n  h2: Heading2,\n  h3: Heading3,\n  h4: Heading4,\n  h5: Heading5,\n  h6: Heading6,\n  blockquote: BlockQuote,\n}\n","import {PortableTextBlock, RenderAttributes} from '@sanity/portable-text-editor'\nimport {Box, Flex, ResponsivePaddingProps, Tooltip} from '@sanity/ui'\nimport React, {RefObject, useCallback, useMemo, useState} from 'react'\nimport {RenderCustomMarkers} from '../../../types'\nimport {PatchArg} from '../../../patch'\nimport {useFormBuilder} from '../../../useFormBuilder'\nimport {BlockActions} from '../BlockActions'\nimport {ReviewChangesHighlightBlock, StyledChangeIndicatorWithProvidedFullPath} from '../_common'\nimport {RenderBlockActionsCallback} from '../types'\nimport {useMemberValidation} from '../hooks/useMemberValidation'\nimport {usePortableTextMarkers} from '../hooks/usePortableTextMarkers'\nimport {usePortableTextMemberItem} from '../hooks/usePortableTextMembers'\nimport {pathToString} from '../../../../field/paths'\nimport {TEXT_STYLE_PADDING} from './constants'\nimport {\n  BlockActionsInner,\n  BlockActionsOuter,\n  BlockExtrasContainer,\n  ChangeIndicatorWrapper,\n  ListPrefixWrapper,\n  TextBlockFlexWrapper,\n  TextFlex,\n  TextRoot,\n  TooltipBox,\n} from './TextBlock.styles'\nimport {TEXT_STYLES} from './textStyles'\n\nconst DEBUG_RENDERING = false\n\nfunction getRandomColor() {\n  const letters = '0123456789ABCDEF'\n  let color = '#'\n  for (let i = 0; i < 6; i++) {\n    color += letters[Math.floor(Math.random() * 16)]\n  }\n  return color\n}\n\nexport interface TextBlockProps {\n  attributes: RenderAttributes\n  block: PortableTextBlock\n  children: React.ReactNode\n  isFullscreen?: boolean\n  onChange: (...patches: PatchArg[]) => void\n  readOnly?: boolean\n  renderBlockActions?: RenderBlockActionsCallback\n  renderCustomMarkers?: RenderCustomMarkers\n  spellCheck?: boolean\n}\n\nexport function TextBlock(props: TextBlockProps) {\n  const {\n    attributes: {path, focused},\n    block,\n    children,\n    isFullscreen,\n    onChange,\n    readOnly,\n    renderBlockActions,\n    renderCustomMarkers,\n    spellCheck,\n  } = props\n  const {Markers} = useFormBuilder().__internal.components\n  const [reviewChangesHovered, setReviewChangesHovered] = useState<boolean>(false)\n  const markers = usePortableTextMarkers(path)\n  const memberItem = usePortableTextMemberItem(pathToString(path))\n\n  const handleChangeIndicatorMouseEnter = useCallback(() => setReviewChangesHovered(true), [])\n  const handleChangeIndicatorMouseLeave = useCallback(() => setReviewChangesHovered(false), [])\n\n  const {validation, hasError, hasWarning, hasInfo} = useMemberValidation(memberItem?.node)\n\n  const hasMarkers = Boolean(renderCustomMarkers) && markers.length > 0\n\n  const tooltipEnabled = hasError || hasWarning || hasMarkers || hasInfo\n\n  const text = useMemo(() => {\n    const TextStyle = TEXT_STYLES[block.style] || TEXT_STYLES.normal\n\n    return (\n      <TextFlex align=\"flex-start\" $level={block?.level}>\n        {block.listItem && (\n          <ListPrefixWrapper contentEditable={false}>\n            <TextStyle data-list-prefix=\"\" />\n          </ListPrefixWrapper>\n        )}\n\n        <TextStyle data-text=\"\" style={DEBUG_RENDERING ? {color: getRandomColor()} : undefined}>\n          {children}\n        </TextStyle>\n      </TextFlex>\n    )\n  }, [block.style, block.listItem, block.level, children])\n\n  const innerPaddingProps: ResponsivePaddingProps = useMemo(() => {\n    if (isFullscreen && !renderBlockActions) {\n      return {paddingX: 5}\n    }\n\n    if (isFullscreen && renderBlockActions) {\n      return {paddingLeft: 5, paddingRight: 2}\n    }\n\n    if (renderBlockActions) {\n      return {\n        paddingLeft: 3,\n        paddingRight: 2,\n      }\n    }\n\n    return {paddingX: 3}\n  }, [isFullscreen, renderBlockActions])\n\n  const outerPaddingProps: ResponsivePaddingProps = useMemo(() => {\n    if (block.listItem) {\n      return {paddingY: 2}\n    }\n\n    return TEXT_STYLE_PADDING[block.style] || {paddingY: 2}\n  }, [block])\n\n  return (\n    <Box data-testid=\"text-block\" {...outerPaddingProps}>\n      <TextBlockFlexWrapper data-testid=\"text-block__wrapper\">\n        <Flex\n          flex={1}\n          {...innerPaddingProps}\n          ref={memberItem?.elementRef as RefObject<HTMLDivElement>}\n        >\n          <Box flex={1}>\n            <Tooltip\n              placement=\"top\"\n              portal=\"editor\"\n              disabled={!tooltipEnabled}\n              content={\n                tooltipEnabled && (\n                  <TooltipBox padding={2}>\n                    <Markers\n                      markers={markers}\n                      validation={validation}\n                      renderCustomMarkers={renderCustomMarkers}\n                    />\n                  </TooltipBox>\n                )\n              }\n            >\n              <TextRoot\n                $level={block.level}\n                data-error={hasError ? '' : undefined}\n                data-warning={hasWarning ? '' : undefined}\n                data-list-item={block.listItem}\n                // @todo: rename to `data-markers`\n                data-custom-markers={hasMarkers ? '' : undefined}\n                data-testid=\"text-block__text\"\n                spellCheck={spellCheck}\n              >\n                {text}\n              </TextRoot>\n            </Tooltip>\n          </Box>\n\n          <BlockExtrasContainer contentEditable={false}>\n            <BlockActionsOuter marginRight={1}>\n              <BlockActionsInner>\n                {renderBlockActions && focused && !readOnly && (\n                  <BlockActions\n                    onChange={onChange}\n                    block={block}\n                    renderBlockActions={renderBlockActions}\n                  />\n                )}\n              </BlockActionsInner>\n            </BlockActionsOuter>\n\n            {isFullscreen && memberItem && (\n              <ChangeIndicatorWrapper\n                $hasChanges={memberItem.member.item.changed}\n                onMouseEnter={handleChangeIndicatorMouseEnter}\n                onMouseLeave={handleChangeIndicatorMouseLeave}\n              >\n                <StyledChangeIndicatorWithProvidedFullPath\n                  hasFocus={focused}\n                  isChanged={memberItem.member.item.changed}\n                  path={memberItem.member.item.path}\n                  withHoverEffect={false}\n                />\n              </ChangeIndicatorWrapper>\n            )}\n          </BlockExtrasContainer>\n          {reviewChangesHovered && <ReviewChangesHighlightBlock />}\n        </Flex>\n      </TextBlockFlexWrapper>\n    </Box>\n  )\n}\n","import React, {useMemo} from 'react'\nimport styled from 'styled-components'\n\ninterface Props {\n  icon: string\n  active: boolean\n}\n\nconst CustomIconDiv = styled.div`\n  width: 1em;\n  height: 1em;\n  border-radius: inherit;\n  background-origin: content-box;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  transform: scale(0.7);\n`\n\nexport function CustomIcon(props: Props) {\n  const {icon, active} = props\n\n  const inlineStyle = useMemo(\n    () => ({\n      backgroundImage: `url(${icon})`,\n      filter: active ? 'invert(100%)' : 'invert(0%)',\n    }),\n    [active, icon]\n  )\n\n  return <CustomIconDiv style={inlineStyle} />\n}\n","import {\n  BlockElementIcon,\n  BoldIcon,\n  CodeIcon,\n  InlineElementIcon,\n  ItalicIcon,\n  LinkIcon,\n  OlistIcon,\n  StrikethroughIcon,\n  UnderlineIcon,\n  UnknownIcon,\n  UlistIcon,\n} from '@sanity/icons'\nimport {\n  HotkeyOptions,\n  PortableTextEditor,\n  PortableTextFeature,\n  PortableTextFeatures,\n  // Type,\n} from '@sanity/portable-text-editor'\nimport {get} from 'lodash'\nimport React from 'react'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {FIXME} from '../../../types'\nimport {BlockItem, BlockStyleItem, PTEToolbarAction, PTEToolbarActionGroup} from './types'\nimport {CustomIcon} from './CustomIcon'\n\nfunction getPTEFormatActions(\n  editor: PortableTextEditor,\n  disabled: boolean,\n  hotkeyOpts: HotkeyOptions\n): PTEToolbarAction[] {\n  const features = PortableTextEditor.getPortableTextFeatures(editor)\n  return features.decorators.map((decorator) => {\n    const shortCutKey = Object.keys(hotkeyOpts.marks || {}).find(\n      (key) => hotkeyOpts.marks?.[key] === decorator.value\n    )\n\n    let hotkeys: string[] = []\n    if (shortCutKey) {\n      hotkeys = [shortCutKey]\n    }\n\n    return {\n      type: 'format',\n      disabled: disabled,\n      icon: decorator.blockEditor?.icon,\n      key: decorator.value,\n      handle: (): void => {\n        PortableTextEditor.toggleMark(editor, decorator.value)\n        PortableTextEditor.focus(editor)\n      },\n      hotkeys,\n      title: decorator.title,\n    }\n  })\n}\n\nfunction getPTEListActions(editor: PortableTextEditor, disabled: boolean): PTEToolbarAction[] {\n  const features = PortableTextEditor.getPortableTextFeatures(editor)\n  return features.lists.map((listItem: PortableTextFeature) => {\n    return {\n      type: 'listStyle',\n      key: listItem.value,\n      disabled: disabled,\n      icon: listItem.blockEditor?.icon,\n      handle: (): void => {\n        PortableTextEditor.toggleList(editor, listItem.value)\n      },\n      title: listItem.title,\n    }\n  })\n}\n\nfunction getAnnotationIcon(item: PortableTextFeature): React.ComponentType | string | undefined {\n  return (\n    get(item, 'icon') ||\n    get(item, 'blockEditor.icon') ||\n    get(item, 'type.icon') ||\n    get(item, 'type.to.icon') ||\n    get(item, 'type.to[0].icon')\n  )\n}\n\nfunction getPTEAnnotationActions(\n  editor: PortableTextEditor,\n  disabled: boolean,\n  onInsert: (type: ObjectSchemaType) => void\n): PTEToolbarAction[] {\n  const features = PortableTextEditor.getPortableTextFeatures(editor)\n  const focusChild = PortableTextEditor.focusChild(editor)\n  const hasText = focusChild && focusChild.text\n  return features.annotations.map((item) => {\n    return {\n      type: 'annotation',\n      disabled: !hasText || disabled,\n      icon: getAnnotationIcon(item),\n      key: item.value,\n      handle: (active?: boolean): void => {\n        if (active) {\n          PortableTextEditor.removeAnnotation(editor, item.type)\n          PortableTextEditor.focus(editor)\n        } else {\n          onInsert(item.type as FIXME)\n        }\n      },\n      title: item.title,\n    }\n  })\n}\n\nexport function getPTEToolbarActionGroups(\n  editor: PortableTextEditor,\n  disabled: boolean,\n  onInsertAnnotation: (type: ObjectSchemaType) => void,\n  hotkeyOpts: HotkeyOptions\n): PTEToolbarActionGroup[] {\n  return [\n    {name: 'format', actions: getPTEFormatActions(editor, disabled, hotkeyOpts)},\n    {name: 'list', actions: getPTEListActions(editor, disabled)},\n    {name: 'annotation', actions: getPTEAnnotationActions(editor, disabled, onInsertAnnotation)},\n  ]\n}\n\nexport function getBlockStyles(features: PortableTextFeatures): BlockStyleItem[] {\n  return features.styles.map((style: PortableTextFeature) => {\n    return {\n      key: `style-${style.value}`,\n      style: style.value,\n      styleComponent: style && style.blockEditor && style.blockEditor.render,\n      title: style.title,\n    }\n  })\n}\n\nfunction getInsertMenuIcon(\n  type: ObjectSchemaType,\n  fallbackIcon: React.ComponentType\n): React.ComponentType {\n  const referenceIcon = get(type, 'to[0].icon')\n\n  return type.icon || (type.type && type.type.icon) || referenceIcon || fallbackIcon\n}\n\nexport function getInsertMenuItems(\n  features: PortableTextFeatures,\n  disabled: boolean,\n  onInsertBlock: (type: ObjectSchemaType) => void,\n  onInsertInline: (type: ObjectSchemaType) => void\n): BlockItem[] {\n  const blockItems = features.types.blockObjects.map(\n    (type, index): BlockItem => ({\n      handle: () => onInsertBlock(type as FIXME),\n      icon: getInsertMenuIcon(type as FIXME, BlockElementIcon),\n      inline: false,\n      key: `block-${index}`,\n      type: type as FIXME,\n    })\n  )\n\n  const inlineItems = features.types.inlineObjects.map(\n    (type, index): BlockItem => ({\n      handle: () => onInsertInline(type as FIXME),\n      icon: getInsertMenuIcon(type as FIXME, InlineElementIcon),\n      inline: true,\n      key: `inline-${index}`,\n      type: type as FIXME,\n    })\n  )\n\n  // Do not include items that are supposed to be hidden\n  const filteredBlockItems = blockItems.concat(inlineItems).filter((item) => !item.type?.hidden)\n\n  return filteredBlockItems\n}\n\nconst annotationIcons: Record<string, React.ComponentType> = {\n  link: LinkIcon,\n}\n\nconst formatIcons: Record<string, React.ComponentType> = {\n  strong: BoldIcon,\n  em: ItalicIcon,\n  'strike-through': StrikethroughIcon,\n  underline: UnderlineIcon,\n  code: CodeIcon,\n}\n\nconst listStyleIcons: Record<string, React.ComponentType> = {\n  number: OlistIcon,\n  bullet: UlistIcon,\n}\n\nexport function getActionIcon(action: PTEToolbarAction, active: boolean) {\n  if (action.icon) {\n    if (typeof action.icon === 'string') {\n      return <CustomIcon active={active} icon={action.icon} />\n    }\n\n    return action.icon\n  }\n\n  if (action.type === 'annotation') {\n    return annotationIcons[action.key] || UnknownIcon\n  }\n\n  if (action.type === 'listStyle') {\n    return listStyleIcons[action.key] || UnknownIcon\n  }\n\n  return formatIcons[action.key] || UnknownIcon\n}\n","import {\n  HotkeyOptions,\n  PortableTextBlock,\n  PortableTextChild,\n  PortableTextEditor,\n  PortableTextFeatures,\n  usePortableTextEditor,\n  usePortableTextEditorSelection,\n} from '@sanity/portable-text-editor'\nimport {ObjectSchemaType, Path} from '@sanity/types'\nimport {useCallback, useMemo} from 'react'\nimport {useUnique} from '../../../../util'\nimport {FIXME} from '../../../types'\nimport {getPTEToolbarActionGroups} from './helpers'\nimport {BlockStyleItem, PTEToolbarAction, PTEToolbarActionGroup} from './types'\n\nexport function useFocusBlock(): PortableTextBlock | undefined {\n  const editor = usePortableTextEditor()\n  const selection = usePortableTextEditorSelection()\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  return useMemo(() => PortableTextEditor.focusBlock(editor), [editor, selection]) // selection must be an additional dep here\n}\n\nexport function useFocusChild(): PortableTextChild | undefined {\n  const editor = usePortableTextEditor()\n  const selection = usePortableTextEditorSelection()\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  return useMemo(() => PortableTextEditor.focusChild(editor), [editor, selection]) // selection must be an additional dep here\n}\n\nexport function useFeatures(): PortableTextFeatures {\n  const editor = usePortableTextEditor()\n\n  return useMemo(() => PortableTextEditor.getPortableTextFeatures(editor), [editor])\n}\n\nexport function useActionGroups({\n  hotkeys,\n  onExpand,\n  resolveInitialValue,\n  disabled,\n}: {\n  hotkeys: HotkeyOptions\n  onExpand: (path: Path) => void\n  resolveInitialValue: (type: ObjectSchemaType) => any\n  disabled: boolean\n}): PTEToolbarActionGroup[] {\n  const editor = usePortableTextEditor()\n\n  const handleInsertAnnotation = useCallback(\n    async (type: ObjectSchemaType) => {\n      const initialValue = await resolveInitialValue(type)\n      const paths = PortableTextEditor.addAnnotation(editor, type as FIXME, initialValue)\n      if (paths && paths.markDefPath) {\n        PortableTextEditor.blur(editor)\n        onExpand(paths.markDefPath)\n      }\n    },\n    [editor, onExpand, resolveInitialValue]\n  )\n\n  return useMemo(\n    () =>\n      editor ? getPTEToolbarActionGroups(editor, disabled, handleInsertAnnotation, hotkeys) : [],\n    [disabled, editor, handleInsertAnnotation, hotkeys]\n  )\n}\n\nexport function useActiveActionKeys({\n  actions,\n}: {\n  actions: Array<PTEToolbarAction & {firstInGroup?: true}>\n}): string[] {\n  const editor = usePortableTextEditor()\n  const selection = usePortableTextEditorSelection()\n\n  return useUnique(\n    useMemo(\n      () => {\n        const activeAnnotationKeys = PortableTextEditor.activeAnnotations(editor).map(\n          (a) => a._type\n        )\n\n        return actions\n          .filter((a) => {\n            if (a.type === 'annotation') {\n              return activeAnnotationKeys.includes(a.key)\n            }\n\n            if (a.type === 'listStyle') {\n              return PortableTextEditor.hasListStyle(editor, a.key)\n            }\n\n            return PortableTextEditor.isMarkActive(editor, a.key)\n          })\n          .map((a) => a.key)\n      },\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      [\n        editor,\n        // This is needed so that active actions update as `selection` changes\n        selection,\n      ]\n    )\n  )\n}\n\nexport function useActiveStyleKeys({items}: {items: BlockStyleItem[]}): string[] {\n  const editor = usePortableTextEditor()\n  const focusBlock = useFocusBlock()\n  const selection = usePortableTextEditorSelection()\n\n  return useUnique(\n    useMemo(\n      () =>\n        items.filter((i) => PortableTextEditor.hasBlockStyle(editor, i.style)).map((i) => i.style),\n      //  eslint-disable-next-line react-hooks/exhaustive-deps\n      [\n        focusBlock,\n        // This is needed so that active styles update as `selection` changes\n        selection,\n      ]\n    )\n  )\n}\n","import React, {memo, useCallback, useMemo} from 'react'\nimport {Button, ButtonProps, PopoverProps} from '@sanity/ui'\nimport {EllipsisVerticalIcon} from '@sanity/icons'\nimport {PortableTextEditor, usePortableTextEditor} from '@sanity/portable-text-editor'\nimport {CollapseMenuButton, CollapseMenu} from '../../../../components/collapseMenu'\nimport {PTEToolbarAction, PTEToolbarActionGroup} from './types'\nimport {useActiveActionKeys, useFeatures, useFocusBlock} from './hooks'\nimport {getActionIcon} from './helpers'\n\nconst CollapseMenuMemo = memo(CollapseMenu)\n\nconst MENU_POPOVER_PROPS: PopoverProps = {constrainSize: true, portal: true}\nconst COLLAPSE_BUTTON_PROPS: ButtonProps = {padding: 2, mode: 'bleed'}\n\ninterface ActionMenuProps {\n  disabled: boolean\n  groups: PTEToolbarActionGroup[]\n  isFullscreen?: boolean\n  collapsed?: boolean\n}\n\nexport const ActionMenu = memo(function ActionMenu(props: ActionMenuProps) {\n  const {disabled: disabledProp, groups, isFullscreen, collapsed} = props\n  const focusBlock = useFocusBlock()\n  const features = useFeatures()\n  const editor = usePortableTextEditor()\n\n  const isVoidBlock = focusBlock?._type !== features.types.block.name\n  const isEmptyTextBlock =\n    !isVoidBlock && focusBlock?.children.length === 1 && focusBlock?.children[0].text === ''\n\n  const disabled = disabledProp || isVoidBlock\n\n  const actions: Array<PTEToolbarAction & {firstInGroup?: true}> = useMemo(\n    () =>\n      groups.reduce<Array<PTEToolbarAction & {firstInGroup?: true}>>((acc, group) => {\n        return acc.concat(\n          group.actions.map(\n            // eslint-disable-next-line max-nested-callbacks\n            (action: PTEToolbarAction, actionIndex) => {\n              if (actionIndex === 0) return {...action, firstInGroup: true}\n              return action\n            }\n          )\n        )\n      }, []),\n    [groups]\n  )\n\n  const activeKeys = useActiveActionKeys({actions})\n\n  const handleMenuClose = useCallback(() => {\n    PortableTextEditor.focus(editor)\n  }, [editor])\n\n  const children = useMemo(\n    () =>\n      actions.map((action) => {\n        const annotationDisabled = action.type === 'annotation' && isEmptyTextBlock\n        const active = activeKeys.includes(action.key)\n        return (\n          <CollapseMenuButton\n            disabled={disabled || annotationDisabled}\n            {...COLLAPSE_BUTTON_PROPS}\n            dividerBefore={action.firstInGroup}\n            icon={getActionIcon(action, active)}\n            key={action.key}\n            // eslint-disable-next-line react/jsx-no-bind\n            onClick={() => action.handle(active)}\n            selected={active}\n            text={action.title || action.key}\n            tooltipText={action.title || action.key}\n            tooltipProps={{\n              disabled: disabled || annotationDisabled,\n              placement: isFullscreen ? 'bottom' : 'top',\n              portal: 'default',\n            }}\n          />\n        )\n      }),\n    [actions, activeKeys, disabled, isEmptyTextBlock, isFullscreen]\n  )\n\n  const menuButtonProps = useMemo(\n    () => ({\n      button: <Button icon={EllipsisVerticalIcon} mode=\"bleed\" padding={2} disabled={disabled} />,\n      popover: MENU_POPOVER_PROPS,\n    }),\n\n    [disabled]\n  )\n\n  return (\n    <CollapseMenuMemo\n      collapsed={collapsed}\n      disableRestoreFocusOnClose\n      gap={1}\n      menuButtonProps={menuButtonProps}\n      onMenuClose={handleMenuClose}\n    >\n      {children}\n    </CollapseMenuMemo>\n  )\n})\n","import React, {memo, useCallback, useEffect, useMemo, useState} from 'react'\nimport {PortableTextEditor, usePortableTextEditor} from '@sanity/portable-text-editor'\nimport {Button, Menu, MenuButton, MenuButtonProps, MenuItem, Text} from '@sanity/ui'\nimport {SelectIcon} from '@sanity/icons'\nimport styled from 'styled-components'\nimport {\n  Heading1,\n  Heading2,\n  Heading3,\n  Heading4,\n  Heading5,\n  Heading6,\n  BlockQuote,\n  Normal,\n} from '../text/textStyles'\nimport {useActiveStyleKeys, useFeatures, useFocusBlock} from './hooks'\nimport {BlockStyleItem} from './types'\n\nconst MenuButtonMemo = memo(MenuButton)\n\ninterface BlockStyleSelectProps {\n  disabled: boolean\n  items: BlockStyleItem[]\n}\n\nconst StyledMenuItem = styled(MenuItem)`\n  // Change the border color variable used by BlockQuote\n  // to make the border visible when the MenuItem is selected\n  &[data-selected] {\n    [data-option='blockquote'] {\n      --card-border-color: var(--card-muted-fg-color);\n    }\n  }\n`\n\nconst StyledButton = styled(Button)`\n  width: 100%;\n`\n\nconst MENU_POPOVER_PROPS: MenuButtonProps['popover'] = {\n  constrainSize: true,\n  placement: 'bottom-start',\n  portal: 'default',\n}\n\nconst TEXT_STYLE_OPTIONS: Record<string, (title: React.ReactNode) => React.ReactNode> = {\n  h1: (title) => <Heading1>{title}</Heading1>,\n  h2: (title) => <Heading2>{title}</Heading2>,\n  h3: (title) => <Heading3>{title}</Heading3>,\n  h4: (title) => <Heading4>{title}</Heading4>,\n  h5: (title) => <Heading5>{title}</Heading5>,\n  h6: (title) => <Heading6>{title}</Heading6>,\n  normal: (title) => <Normal>{title}</Normal>,\n  blockquote: (title) => <BlockQuote data-option=\"blockquote\">{title}</BlockQuote>,\n}\n\nconst TEXT_STYLE_KEYS = Object.keys(TEXT_STYLE_OPTIONS)\n\nconst preventDefault = (event: React.MouseEvent<HTMLButtonElement>) => event.preventDefault()\n\nconst emptyStyle: BlockStyleItem = {\n  key: 'style-none',\n  style: '',\n  title: 'No style',\n}\n\nexport const BlockStyleSelect = memo(function BlockStyleSelect(\n  props: BlockStyleSelectProps\n): JSX.Element {\n  const {disabled, items: itemsProp} = props\n  const editor = usePortableTextEditor()\n  const features = useFeatures()\n  const focusBlock = useFocusBlock()\n  const [changed, setChanged] = useState(false)\n\n  const _disabled =\n    disabled || (focusBlock ? features.types.block.name !== focusBlock._type : false)\n\n  // @todo: Explain what this does\n  const activeKeys = useActiveStyleKeys({items: itemsProp})\n\n  const {activeItems, items} = useMemo(() => {\n    const _activeItems = itemsProp.filter((item) => activeKeys.includes(item.style))\n\n    let _items = itemsProp\n\n    if (_activeItems.length === 0 && _items.length > 1) {\n      _items = _items.concat([emptyStyle])\n      _activeItems.push(emptyStyle)\n    }\n\n    return {activeItems: _activeItems, items: _items}\n  }, [activeKeys, itemsProp])\n\n  const menuButtonText = useMemo(() => {\n    if (activeItems.length > 1) return 'Multiple'\n    if (activeItems.length === 1) return activeItems[0].title\n    return emptyStyle.title\n  }, [activeItems])\n\n  const handleChange = useCallback(\n    (item: BlockStyleItem): void => {\n      if (focusBlock && item.style !== focusBlock.style) {\n        PortableTextEditor.toggleBlockStyle(editor, item.style)\n      }\n      setChanged(true)\n    },\n    [editor, focusBlock]\n  )\n\n  const renderOption = useCallback((style: string, title: string) => {\n    const hasTextStyle = TEXT_STYLE_KEYS.includes(style)\n    const renderStyle = TEXT_STYLE_OPTIONS[style]\n\n    if (hasTextStyle) {\n      return renderStyle(title)\n    }\n\n    return <Text>{title}</Text>\n  }, [])\n\n  const button = useMemo(\n    () => (\n      <StyledButton\n        disabled={_disabled}\n        iconRight={SelectIcon}\n        mode=\"bleed\"\n        onClick={preventDefault}\n        padding={2}\n        text={menuButtonText}\n      />\n    ),\n    [_disabled, menuButtonText]\n  )\n\n  const menu = useMemo(\n    () => (\n      <Menu disabled={_disabled}>\n        {items.map((item) => {\n          return (\n            <StyledMenuItem\n              key={item.key}\n              pressed={activeItems.includes(item)}\n              // eslint-disable-next-line react/jsx-no-bind\n              onClick={_disabled ? undefined : () => handleChange(item)}\n            >\n              {renderOption(item.style, item?.title || item.style)}\n            </StyledMenuItem>\n          )\n        })}\n      </Menu>\n    ),\n    [_disabled, activeItems, handleChange, items, renderOption]\n  )\n\n  // Set focus back into the editor when the new value get's in\n  // This must be the last registered hook or it will not be able to focus properly.\n  useEffect(() => {\n    if (changed) {\n      PortableTextEditor.focus(editor)\n      setChanged(false)\n    }\n  }, [activeItems, changed, editor])\n\n  return (\n    <MenuButtonMemo\n      popover={MENU_POPOVER_PROPS}\n      id=\"block-style-select\"\n      button={button}\n      menu={menu}\n    />\n  )\n})\n","import React, {memo, useCallback, useMemo} from 'react'\nimport {AddIcon} from '@sanity/icons'\nimport {Button, PopoverProps} from '@sanity/ui'\nimport {PortableTextEditor, usePortableTextEditor} from '@sanity/portable-text-editor'\nimport {CollapseMenu, CollapseMenuButton} from '../../../../components/collapseMenu'\nimport {BlockItem} from './types'\nimport {useFeatures, useFocusBlock} from './hooks'\n\nconst CollapseMenuMemo = memo(CollapseMenu)\n\nconst MENU_POPOVER_PROPS: PopoverProps = {constrainSize: true, portal: true}\ninterface InsertMenuProps {\n  disabled: boolean\n  items: BlockItem[]\n  isFullscreen?: boolean\n  collapsed?: boolean\n}\n\nexport const InsertMenu = memo(function InsertMenu(props: InsertMenuProps) {\n  const {disabled, items, isFullscreen, collapsed} = props\n  const features = useFeatures()\n  const focusBlock = useFocusBlock()\n  const editor = usePortableTextEditor()\n\n  const isVoidFocus = focusBlock && focusBlock._type !== features.types.block.name\n\n  const handleMenuClose = useCallback(() => {\n    PortableTextEditor.focus(editor)\n  }, [editor])\n\n  const children = useMemo(() => {\n    return items.map((item) => {\n      const title = item.type.title || item.type.type?.name\n\n      return (\n        <CollapseMenuButton\n          aria-label={`Insert ${title}${item.inline ? ' (inline)' : ' (block)'}`}\n          padding={2}\n          mode=\"bleed\"\n          disabled={disabled || (isVoidFocus && item.inline === true)}\n          icon={item.icon}\n          key={item.key}\n          // eslint-disable-next-line react/jsx-no-bind, react/jsx-handler-names\n          onClick={item.handle}\n          text={title}\n          tooltipText={`Insert ${title}`}\n          tooltipProps={{\n            disabled,\n            placement: isFullscreen ? 'bottom' : 'top',\n            portal: 'default',\n          }}\n        />\n      )\n    })\n  }, [items, disabled, isVoidFocus, isFullscreen])\n\n  const menuButtonProps = useMemo(\n    () => ({\n      button: <Button icon={AddIcon} mode=\"bleed\" padding={2} disabled={disabled} />,\n      popover: MENU_POPOVER_PROPS,\n    }),\n\n    [disabled]\n  )\n\n  return (\n    <CollapseMenuMemo\n      collapsed={collapsed}\n      collapseText={false}\n      disableRestoreFocusOnClose\n      gap={1}\n      menuButtonProps={menuButtonProps}\n      onMenuClose={handleMenuClose}\n    >\n      {children}\n    </CollapseMenuMemo>\n  )\n})\n","import {\n  HotkeyOptions,\n  usePortableTextEditor,\n  usePortableTextEditorSelection,\n  // Type,\n  PortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport React, {memo, useCallback, useMemo, useState} from 'react'\nimport {ObjectSchemaType, Path, SchemaType} from '@sanity/types'\nimport {Box, Button, Flex, Hotkeys, Text, Tooltip, useElementRect, useToast} from '@sanity/ui'\nimport {CollapseIcon, ExpandIcon} from '@sanity/icons'\nimport styled, {css} from 'styled-components'\nimport {useRovingFocus} from '../../../../components/rovingFocus'\nimport {FIXME} from '../../../types'\nimport {useResolveInitialValueForType} from '../../../../datastores'\nimport {ActionMenu} from './ActionMenu'\nimport {BlockStyleSelect} from './BlockStyleSelect'\nimport {InsertMenu} from './InsertMenu'\nimport {getBlockStyles, getInsertMenuItems} from './helpers'\nimport {useActionGroups, useFeatures} from './hooks'\nimport {BlockItem, BlockStyleItem, PTEToolbarActionGroup} from './types'\n\ninterface ToolbarProps {\n  hotkeys: HotkeyOptions\n  isFullscreen: boolean\n  readOnly?: boolean\n  onExpand: (path: Path) => void\n  onToggleFullscreen: () => void\n}\n\nconst RootFlex = styled(Flex)`\n  width: 100%;\n`\n\nconst StyleSelectBox = styled(Box)`\n  width: 8em;\n`\n\nconst StyleSelectFlex = styled(Flex)`\n  border-right: 1px solid var(--card-border-color);\n`\n\nconst ActionMenuBox = styled(Box)<{$withInsertMenu: boolean}>`\n  ${({$withInsertMenu}) =>\n    $withInsertMenu &&\n    css`\n      max-width: max-content;\n      border-right: 1px solid var(--card-border-color);\n    `}\n`\n\nconst FullscreenButtonBox = styled(Box)`\n  border-left: 1px solid var(--card-border-color);\n`\n\nconst SLOW_INITIAL_VALUE_LIMIT = 300\n\nconst IS_MAC =\n  typeof window != 'undefined' && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform)\n\nconst InnerToolbar = memo(function InnerToolbar({\n  actionGroups,\n  blockStyles,\n  disabled,\n  insertMenuItems,\n  isFullscreen,\n  onToggleFullscreen,\n}: {\n  actionGroups: PTEToolbarActionGroup[]\n  blockStyles: BlockStyleItem[]\n  disabled: boolean\n  insertMenuItems: BlockItem[]\n  isFullscreen: boolean\n  onToggleFullscreen: () => void\n}) {\n  const actionsLen = actionGroups.reduce((acc, x) => acc + x.actions.length, 0)\n  const showActionMenu = actionsLen > 0\n  const showInsertMenu = insertMenuItems.length > 0\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n  const rootElementRect = useElementRect(rootElement)\n\n  const collapsed = rootElementRect ? rootElementRect?.width < 400 : false\n\n  useRovingFocus({\n    rootElement: rootElement,\n  })\n\n  return (\n    <RootFlex align=\"center\" ref={setRootElement}>\n      <StyleSelectFlex flex={collapsed ? 1 : undefined}>\n        <StyleSelectBox padding={isFullscreen ? 2 : 1}>\n          <BlockStyleSelect disabled={disabled} items={blockStyles} />\n        </StyleSelectBox>\n      </StyleSelectFlex>\n\n      <Flex flex={1}>\n        {showActionMenu && (\n          <ActionMenuBox\n            flex={collapsed ? undefined : 1}\n            padding={isFullscreen ? 2 : 1}\n            $withInsertMenu={showInsertMenu}\n          >\n            <ActionMenu\n              disabled={disabled}\n              collapsed={collapsed}\n              groups={actionGroups}\n              isFullscreen={isFullscreen}\n            />\n          </ActionMenuBox>\n        )}\n\n        {showInsertMenu && (\n          <Box flex={collapsed ? undefined : 1} padding={isFullscreen ? 2 : 1}>\n            <InsertMenu\n              disabled={disabled}\n              collapsed={collapsed}\n              items={insertMenuItems}\n              isFullscreen={isFullscreen}\n            />\n          </Box>\n        )}\n      </Flex>\n      <FullscreenButtonBox padding={isFullscreen ? 2 : 1}>\n        <Tooltip\n          content={\n            <Flex align=\"center\" padding={1}>\n              <Box flex={1} paddingX={1}>\n                <Text size={1}>{`${isFullscreen ? 'Collapse' : 'Expand'} editor`}</Text>\n              </Box>\n              <Box marginLeft={1}>\n                <Hotkeys keys={[`${IS_MAC ? 'Cmd' : 'Ctrl'}`, 'Enter']} />\n              </Box>\n            </Flex>\n          }\n          placement={isFullscreen ? 'bottom' : 'top'}\n          portal=\"default\"\n        >\n          <Button\n            padding={2}\n            icon={isFullscreen ? CollapseIcon : ExpandIcon}\n            mode=\"bleed\"\n            onClick={onToggleFullscreen}\n          />\n        </Tooltip>\n      </FullscreenButtonBox>\n    </RootFlex>\n  )\n})\n\nexport function Toolbar(props: ToolbarProps) {\n  const {hotkeys, isFullscreen, readOnly, onExpand, onToggleFullscreen} = props\n  const features = useFeatures()\n  const editor = usePortableTextEditor()\n  const selection = usePortableTextEditorSelection()\n  const resolveInitialValueForType = useResolveInitialValueForType()\n  const disabled = readOnly || !selection\n\n  const {push} = useToast()\n\n  const resolveInitialValue = useCallback(\n    (type: ObjectSchemaType) => {\n      let isSlow = false\n      const slowTimer = setTimeout(() => {\n        isSlow = true\n        push({\n          id: 'resolving-initial-value',\n          status: 'info',\n          title: 'Resolving initial valueâ€¦',\n        })\n      }, SLOW_INITIAL_VALUE_LIMIT)\n      return resolveInitialValueForType(type as unknown as SchemaType, {})\n        .then((value) => {\n          if (isSlow) {\n            // I found no way to close an existing toast, so this will replace the message in the\n            // \"Resolving initial valueâ€¦\"-toast and then make sure it gets closed.\n            push({\n              id: 'resolving-initial-value',\n              status: 'info',\n              duration: 500,\n              title: 'Initial value resolved',\n            })\n          }\n          return value\n        })\n        .catch((error) => {\n          push({\n            title: `Could not resolve initial value`,\n            id: 'resolving-initial-value',\n            description: `Unable to resolve initial value for type: ${type.name}: ${error.message}.`,\n            status: 'error',\n          })\n\n          return undefined\n        })\n        .finally(() => clearTimeout(slowTimer))\n    },\n    [push]\n  )\n\n  const handleInsertBlock = useCallback(\n    async (type: ObjectSchemaType) => {\n      const initialValue = await resolveInitialValue(type)\n      const path = PortableTextEditor.insertBlock(editor, type as FIXME, initialValue)\n      if (path) {\n        PortableTextEditor.blur(editor)\n        onExpand(path)\n      }\n    },\n    [editor, onExpand, resolveInitialValue]\n  )\n\n  const handleInsertInline = useCallback(\n    async (type: ObjectSchemaType) => {\n      const initialValue = await resolveInitialValue(type)\n      const path = PortableTextEditor.insertChild(editor, type as FIXME, initialValue)\n      if (path) {\n        PortableTextEditor.blur(editor)\n        onExpand(path)\n      }\n    },\n    [editor, onExpand, resolveInitialValue]\n  )\n\n  const actionGroups = useActionGroups({\n    hotkeys,\n    onExpand,\n    resolveInitialValue,\n    disabled: true,\n  })\n\n  const blockStyles = useMemo(() => getBlockStyles(features), [features])\n\n  const insertMenuItems = useMemo(\n    () => getInsertMenuItems(features, disabled, handleInsertBlock, handleInsertInline),\n    [disabled, features, handleInsertBlock, handleInsertInline]\n  )\n\n  return (\n    <InnerToolbar\n      actionGroups={actionGroups}\n      blockStyles={blockStyles}\n      disabled={disabled}\n      insertMenuItems={insertMenuItems}\n      isFullscreen={isFullscreen}\n      onToggleFullscreen={onToggleFullscreen}\n    />\n  )\n}\n","import {Card, Container, rem} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {ScrollContainer} from '../../../components/scroll'\nimport {createListName, TEXT_LEVELS} from './text'\n\nexport const Root = styled(Card)<{$fullscreen: boolean}>`\n  height: ${({$fullscreen}) => ($fullscreen ? '100%' : '15em')};\n\n  &:not([hidden]) {\n    display: flex;\n  }\n\n  flex-direction: column;\n`\n\nexport const ToolbarCard = styled(Card)`\n  z-index: 10;\n  line-height: 0;\n`\n\nexport const EditableCard = styled(Card)`\n  position: relative;\n  overflow: hidden;\n\n  & > [data-portal] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    pointer-events: none;\n\n    & > * {\n      pointer-events: initial;\n    }\n  }\n\n  &::selection,\n  *::selection {\n    background-color: transparent;\n  }\n`\n\nexport const Scroller = styled(ScrollContainer)`\n  position: relative;\n  overflow: auto;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n\n  & > * {\n    flex: 1;\n    min-height: auto;\n  }\n`\n\nexport const EditableContainer = styled(Container)`\n  /* @todo: calculate from theme */\n  /* max-width: 728px; */\n`\n\nexport const EditableWrapper = styled(Card)<{$isFullscreen: boolean; $readOnly?: boolean}>`\n  height: 100%;\n  width: 100%;\n  counter-reset: ${TEXT_LEVELS.map((l) => createListName(l)).join(' ')};\n  overflow: hidden;\n\n  & > div {\n    height: 100%;\n  }\n\n  & .pt-editable {\n    display: block;\n    width: 100%;\n    height: 100%;\n\n    ${TEXT_LEVELS.map((l) => {\n      return css`\n        & > .pt-list-item-number[class~='pt-list-item-level-${l}'] {\n          counter-increment: ${createListName(l)};\n        }\n      `\n    })}\n\n    & > .pt-list-item-bullet + .pt-list-item-number,\n    & > .pt-list-item-number + .pt-list-item-bullet {\n      margin-top: ${({theme}) => theme.sanity.space[3]}px;\n      counter-reset: ${TEXT_LEVELS.map((l) => createListName(l)).join(' ')};\n    }\n\n    & > :not(.pt-list-item) + .pt-list-item {\n      margin-top: ${({theme}) => theme.sanity.space[2]}px;\n    }\n\n    /* Reset the list count if the element is not a numbered list item */\n    & > :not(.pt-list-item-number) {\n      counter-reset: ${TEXT_LEVELS.map((l) => createListName(l)).join(' ')};\n    }\n\n    ${TEXT_LEVELS.slice(1).map((l) => {\n      return css`\n        & > .pt-list-item-level-${l} + .pt-list-item-level-${l - 1} {\n          counter-reset: ${createListName(l)};\n        }\n      `\n    })}\n\n    & > .pt-list-item + :not(.pt-list-item) {\n      margin-top: ${({theme}) => theme.sanity.space[3]}px;\n    }\n\n    & > :first-child {\n      padding-top: ${({$isFullscreen, theme}) => theme.sanity.space[$isFullscreen ? 5 : 3]}px;\n    }\n\n    & > :last-child {\n      padding-bottom: ${({$isFullscreen, theme}) => theme.sanity.space[$isFullscreen ? 9 : 5]}px;\n    }\n\n    /* & > .pt-block {\n      & .pt-inline-object {\n      }\n    } */\n\n    & .pt-drop-indicator {\n      pointer-events: none;\n      border: 1px solid var(--card-focus-ring-color) !important;\n      height: 0px !important;\n      border-radius: 1px;\n      margin-top: -3px;\n      left: calc(\n        ${({$isFullscreen, theme}) =>\n            $isFullscreen ? rem(theme.sanity.space[5]) : rem(theme.sanity.space[3])} - 1px\n      );\n      right: calc(\n        ${({$isFullscreen, theme}) =>\n            $isFullscreen ? rem(theme.sanity.space[5]) : rem(theme.sanity.space[3])} - 1px\n      );\n      width: calc(\n        100% -\n          ${({$isFullscreen, theme}) =>\n            $isFullscreen ? rem(theme.sanity.space[5] * 2) : rem(theme.sanity.space[3] * 2)} + 2px\n      ) !important;\n    }\n  }\n`\n","import {usePortableTextEditor} from '@sanity/portable-text-editor'\nimport {useMemo} from 'react'\n\nexport function useSpellcheck(): boolean {\n  const editor = usePortableTextEditor()\n  return useMemo(() => {\n    // Chrome 96. has serious perf. issues with spellchecking\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=1271918\n    // This issue is verified fixed in Chrome 97.\n    const spellCheckOption = editor.portableTextFeatures.types.block.options?.spellCheck\n    const isChrome96 =\n      typeof navigator === 'undefined' ? false : /Chrome\\/96/.test(navigator.userAgent)\n    return spellCheckOption === undefined && isChrome96 === true ? false : spellCheckOption\n  }, [editor])\n}\n","import {PortableTextEditor} from '@sanity/portable-text-editor'\nimport {useMemo} from 'react'\nimport scrollIntoView from 'scroll-into-view-if-needed'\n\n// This hook is used to scroll the editor selection into place when actively editing the document.\nexport function useScrollSelectionIntoView(scrollElement: HTMLElement | null) {\n  return useMemo(\n    () =>\n      (editor: PortableTextEditor, domRange: Range): void => {\n        const selection = PortableTextEditor.getSelection(editor)\n        if (selection) {\n          const leafEl = domRange.startContainer.parentElement\n          if (!leafEl) {\n            return\n          }\n          scrollIntoView(leafEl, {\n            scrollMode: 'if-needed',\n            boundary: scrollElement,\n            block: 'start',\n            inline: 'nearest',\n          })\n        }\n      },\n    [scrollElement]\n  )\n}\n","import {\n  HotkeyOptions,\n  PortableTextEditable,\n  RenderAnnotationFunction,\n  RenderBlockFunction,\n  RenderChildFunction,\n  RenderDecoratorFunction,\n  OnPasteFn,\n  OnCopyFn,\n  EditorSelection,\n} from '@sanity/portable-text-editor'\nimport {Path} from '@sanity/types'\nimport {BoundaryElementProvider, useBoundaryElement, useGlobalKeyDown, useLayer} from '@sanity/ui'\nimport React, {useCallback, useMemo, useRef} from 'react'\nimport {Toolbar} from './toolbar'\nimport {Decorator} from './text'\nimport {\n  EditableCard,\n  EditableContainer,\n  EditableWrapper,\n  Root,\n  Scroller,\n  ToolbarCard,\n} from './Editor.styles'\nimport {useSpellcheck} from './hooks/useSpellCheck'\nimport {useScrollSelectionIntoView} from './hooks/useScrollSelectionIntoView'\n\ninterface EditorProps {\n  initialSelection?: EditorSelection\n  isFullscreen: boolean\n  hotkeys: HotkeyOptions\n  onCopy?: OnCopyFn\n  onOpenItem: (path: Path) => void\n  onPaste?: OnPasteFn\n  onToggleFullscreen: () => void\n  path: Path\n  readOnly?: boolean\n  renderAnnotation: RenderAnnotationFunction\n  renderBlock: RenderBlockFunction\n  renderChild: RenderChildFunction\n  scrollElement: HTMLElement | null\n  setPortalElement?: (portalElement: HTMLDivElement | null) => void\n  setScrollElement: (scrollElement: HTMLElement | null) => void\n}\n\nconst renderDecorator: RenderDecoratorFunction = (mark, mType, attributes, defaultRender) => {\n  return <Decorator mark={mark}>{defaultRender()}</Decorator>\n}\n\nexport function Editor(props: EditorProps) {\n  const {\n    hotkeys,\n    initialSelection,\n    isFullscreen,\n    onCopy,\n    onOpenItem,\n    onPaste,\n    onToggleFullscreen,\n    path,\n    readOnly,\n    renderAnnotation,\n    renderBlock,\n    renderChild,\n    scrollElement,\n    setPortalElement,\n    setScrollElement,\n  } = props\n  const {isTopLayer} = useLayer()\n  const editableRef = useRef<HTMLDivElement | null>(null)\n\n  const {element: boundaryElement} = useBoundaryElement()\n\n  // Let escape close fullscreen mode\n  useGlobalKeyDown(\n    useCallback(\n      (event: KeyboardEvent) => {\n        if (!isTopLayer || !isFullscreen) {\n          return\n        }\n        if (event.key === 'Escape') {\n          onToggleFullscreen()\n        }\n      },\n      [onToggleFullscreen, isFullscreen, isTopLayer]\n    )\n  )\n\n  // Keep the editor focused even though we are clicking on the background or the toolbar of the editor.\n  const handleMouseDown = useCallback((event: React.SyntheticEvent) => {\n    if (event.target instanceof Node && !editableRef.current?.contains(event.target)) {\n      event.preventDefault()\n      event.stopPropagation()\n    }\n  }, [])\n\n  const renderPlaceholder = useCallback(() => <>Empty</>, [])\n  const spellcheck = useSpellcheck()\n\n  const scrollSelectionIntoView = useScrollSelectionIntoView(scrollElement)\n\n  const editable = useMemo(\n    () => (\n      <PortableTextEditable\n        hotkeys={hotkeys}\n        onCopy={onCopy}\n        onPaste={onPaste}\n        ref={editableRef}\n        readOnly={readOnly}\n        renderAnnotation={renderAnnotation}\n        renderBlock={renderBlock}\n        renderChild={renderChild}\n        renderDecorator={renderDecorator}\n        renderPlaceholder={renderPlaceholder}\n        scrollSelectionIntoView={scrollSelectionIntoView}\n        selection={initialSelection}\n        spellCheck={spellcheck}\n      />\n    ),\n    [\n      hotkeys,\n      initialSelection,\n      onCopy,\n      onPaste,\n      readOnly,\n      renderAnnotation,\n      renderBlock,\n      renderChild,\n      renderPlaceholder,\n      scrollSelectionIntoView,\n      spellcheck,\n    ]\n  )\n\n  const handleToolBarOnExpand = useCallback(\n    (relativePath: Path) => {\n      onOpenItem(path.concat(relativePath))\n    },\n    [onOpenItem, path]\n  )\n\n  return (\n    <Root $fullscreen={isFullscreen} data-testid=\"pt-editor\" onMouseDown={handleMouseDown}>\n      {!readOnly && (\n        <ToolbarCard data-testid=\"pt-editor__toolbar-card\" shadow={1}>\n          <Toolbar\n            isFullscreen={isFullscreen}\n            hotkeys={hotkeys}\n            onExpand={handleToolBarOnExpand}\n            readOnly={readOnly}\n            onToggleFullscreen={onToggleFullscreen}\n          />\n        </ToolbarCard>\n      )}\n\n      <EditableCard flex={1}>\n        <Scroller ref={setScrollElement}>\n          <EditableContainer padding={isFullscreen ? 2 : 0} sizing=\"border\" width={1}>\n            <EditableWrapper $isFullscreen={isFullscreen} $readOnly={readOnly}>\n              <BoundaryElementProvider element={isFullscreen ? scrollElement : boundaryElement}>\n                {editable}\n              </BoundaryElementProvider>\n            </EditableWrapper>\n          </EditableContainer>\n        </Scroller>\n\n        <div data-portal=\"\" ref={setPortalElement} />\n      </EditableCard>\n    </Root>\n  )\n}\n","// todo: get these utils from @sanity/ui instead\nexport function focusRingBorderStyle(border: {color: string; width: number}): string {\n  return `inset 0 0 0 ${border.width}px ${border.color}`\n}\n\nexport function focusRingStyle(opts: {\n  base?: {bg: string}\n  border?: {color: string; width: number}\n  focusRing: {offset: number; width: number}\n}): string {\n  const {base, border, focusRing} = opts\n  const focusRingOutsetWidth = focusRing.offset + focusRing.width\n  const focusRingInsetWidth = 0 - focusRing.offset\n  const bgColor = base ? base.bg : 'var(--card-bg-color)'\n\n  return [\n    focusRingInsetWidth > 0 && `inset 0 0 0 ${focusRingInsetWidth}px var(--card-focus-ring-color)`,\n    border && focusRingBorderStyle(border),\n    focusRingInsetWidth < 0 && `0 0 0 ${0 - focusRingInsetWidth}px ${bgColor}`,\n    focusRingOutsetWidth > 0 && `0 0 0 ${focusRingOutsetWidth}px var(--card-focus-ring-color)`,\n  ]\n    .filter(Boolean)\n    .join(',')\n}\n","import {Layer} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {focusRingBorderStyle, focusRingStyle} from '../../components/withFocusRing/helpers'\n\nexport const Root = styled.div(({theme}) => {\n  const {focusRing, input} = theme.sanity\n  const base = theme.sanity.color.base\n  const color = theme.sanity.color.input\n  const border = {\n    color: color.default.enabled.border,\n    width: input.border.width,\n  }\n\n  return css`\n    --input-box-shadow: ${focusRingBorderStyle(border)};\n\n    position: relative;\n\n    & [data-wrapper] {\n      overflow: hidden;\n      position: relative;\n      z-index: 1;\n      padding: ${input.border.width}px;\n    }\n\n    & [data-border] {\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      box-shadow: var(--input-box-shadow);\n      z-index: 2;\n      border-radius: 1px;\n      pointer-events: none;\n    }\n\n    &:not([data-read-only])[data-focused] [data-border] {\n      --input-box-shadow: ${focusRingStyle({\n        base,\n        border,\n        focusRing,\n      })};\n    }\n  `\n})\n\n// This element only wraps the input when in \"fullscreen\" mode\nexport const ExpandedLayer = styled(Layer)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  &:not([data-fullscreen]) {\n    position: relative;\n  }\n`\n","import {useMemo} from 'react'\nimport {\n  HotkeyOptions,\n  PortableTextEditor,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\n\n// This hook will create final hotkeys for the editor from on those from props.\nexport function useHotkeys(hotkeys: HotkeyOptions): HotkeyOptions {\n  const editor = usePortableTextEditor()\n\n  // Guard that hotkeys from props will be a stable object.\n  // If this props is defined inline and is always a new object, there will be issues with key handling and cursor!\n  const initialHotkeys = useMemo(() => hotkeys, [])\n  if (initialHotkeys !== hotkeys) {\n    console.warn(\n      'Make sure that hotkeys are a stable object across renders, or there will be issues with key handling in the Portable Text Editor.'\n    )\n  }\n  return useMemo(() => {\n    const defaultHotkeys: {marks: Record<string, string>} = {marks: {}}\n    const ptFeatures = PortableTextEditor.getPortableTextFeatures(editor)\n    ptFeatures.decorators.forEach((dec) => {\n      switch (dec.value) {\n        case 'strong':\n          defaultHotkeys.marks['mod+b'] = dec.value\n          break\n        case 'em':\n          defaultHotkeys.marks['mod+i'] = dec.value\n          break\n        case 'underline':\n          defaultHotkeys.marks['mod+u'] = dec.value\n          break\n        case 'code':\n          defaultHotkeys.marks[\"mod+'\"] = dec.value\n          break\n        default:\n      }\n    })\n    return {\n      marks: {...defaultHotkeys.marks, ...(initialHotkeys || {}).marks},\n      custom: initialHotkeys.custom,\n    }\n  }, [editor, initialHotkeys])\n}\n\n// If we want to have a hotkey to open up a focused object, we can use this:\n//\n// const handleOpenObjectHotkey = (\n//   event: React.BaseSyntheticEvent,\n//   ptEditor: PortableTextEditor\n// ) => {\n//   const selection = PortableTextEditor.getSelection(ptEditor)\n//   if (selection) {\n//     event.preventDefault()\n//     event.stopPropagation()\n//     const {focus} = selection\n//     const activeAnnotations = PortableTextEditor.activeAnnotations(ptEditor)\n//     const focusBlock = PortableTextEditor.focusBlock(ptEditor)\n//     const focusChild = PortableTextEditor.focusChild(ptEditor)\n//     if (activeAnnotations.length > 0) {\n//       onFocus([\n//         ...focus.path.slice(0, 1),\n//         'markDefs',\n//         {_key: activeAnnotations[0]._key},\n//         FOCUS_TERMINATOR,\n//       ])\n//       return\n//     }\n//     if (focusChild && PortableTextEditor.isVoid(ptEditor, focusChild)) {\n//       onFocus([...focus.path, FOCUS_TERMINATOR])\n//       return\n//     }\n//     if (focusBlock && PortableTextEditor.isVoid(ptEditor, focusBlock)) {\n//       onFocus([...focus.path.slice(0, 1), FOCUS_TERMINATOR])\n//     }\n//   }\n// }\n","import {ObjectSchemaType} from '@sanity/types'\nimport {get} from 'lodash'\nimport {ModalType, ModalWidth} from './renderers/types'\n\nexport interface ModalOption {\n  type?: ModalType\n  width?: ModalWidth\n}\n\nexport function _getModalOption(opts: {schemaType?: ObjectSchemaType}): ModalOption {\n  const {schemaType} = opts\n\n  return (get(schemaType, 'options.modal') || {}) as ModalOption\n}\n","import React from 'react'\nimport {useId} from '@reach/auto-id'\nimport {Box, Dialog, PortalProvider, usePortal} from '@sanity/ui'\nimport {PresenceOverlay} from '../../../../../presence'\nimport {ModalWidth} from './types'\n\ninterface DefaultEditDialogProps {\n  title: string | React.ReactNode\n  onClose: () => void\n  children: React.ReactNode\n  width?: ModalWidth\n}\n\nexport function DefaultEditDialog(props: DefaultEditDialogProps) {\n  const {onClose, children, title, width = 1} = props\n\n  const dialogId = useId()\n  const portal = usePortal()\n\n  return (\n    <Dialog\n      __unstable_autoFocus\n      id={dialogId || ''}\n      onClose={onClose}\n      onClickOutside={onClose}\n      header={title}\n      portal=\"default\"\n      width={width}\n    >\n      <PresenceOverlay margins={[0, 0, 1, 0]}>\n        <Box padding={4}>\n          <PortalProvider element={portal.elements?.default}>{children}</PortalProvider>\n        </Box>\n      </PresenceOverlay>\n    </Dialog>\n  )\n}\n","export const debugElement =\n  process.env.NODE_ENV === 'production'\n    ? null\n    : {\n        getBoundingClientRect: () => {\n          const x = 200\n          const y = 200\n\n          return {\n            left: x,\n            top: y,\n            right: x,\n            bottom: y,\n            width: 0,\n            height: 0,\n          }\n        },\n      }\n","/* eslint-disable react/no-unused-prop-types */\n\nimport {CloseIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Container,\n  Flex,\n  Popover,\n  PopoverProps,\n  PortalProvider,\n  Text,\n  useBoundaryElement,\n  useClickOutside,\n  useGlobalKeyDown,\n  usePortal,\n} from '@sanity/ui'\nimport React, {useCallback, useEffect, useMemo, useState} from 'react'\nimport styled from 'styled-components'\nimport {PresenceOverlay} from '../../../../../presence'\nimport {FIXME} from '../../../../types'\nimport {PortableTextEditorElement} from '../../Compositor'\nimport {debugElement} from './debug'\nimport {ModalWidth} from './types'\n\ninterface PopoverEditDialogProps {\n  children: React.ReactNode\n  elementRef?: React.MutableRefObject<PortableTextEditorElement>\n  onClose: () => void\n  scrollElement: HTMLElement\n  title: string | React.ReactNode\n  width?: ModalWidth\n}\n\nconst RootPopover = styled(Popover)`\n  &[data-popper-reference-hidden='true'] {\n    visibility: hidden;\n    pointer-events: none;\n  }\n\n  & > div {\n    overflow: hidden;\n  }\n`\n\nconst ContentContainer = styled(Container)`\n  &:not([hidden]) {\n    display: flex;\n  }\n  direction: column;\n`\n\nconst ContentScrollerBox = styled(Box)`\n  /* Prevent overflow caused by change indicator */\n  overflow-x: hidden;\n  overflow-y: auto;\n`\n\nconst ContentHeaderBox = styled(Box)`\n  background-color: var(--card-bg-color);\n  box-shadow: 0 1px 0 var(--card-shadow-outline-color);\n  position: relative;\n  z-index: 10;\n  min-height: auto;\n`\n\nconst POPOVER_FALLBACK_PLACEMENTS: PopoverProps['fallbackPlacements'] = ['top', 'bottom']\n\nexport function PopoverEditDialog(props: PopoverEditDialogProps) {\n  const {width, elementRef, onClose, scrollElement} = props\n\n  useGlobalKeyDown(\n    useCallback(\n      (event: KeyboardEvent) => {\n        if (event.key === 'Escape') {\n          onClose()\n        }\n      },\n      [onClose]\n    )\n  )\n\n  const [forceUpdate, setForceUpdate] = useState(0)\n  const virtualElement = useMemo(() => {\n    if (!elementRef?.current?.getBoundingClientRect()) {\n      return null\n    }\n\n    return {\n      contextElement: elementRef.current || undefined,\n      getBoundingClientRect: () => {\n        return elementRef.current?.getBoundingClientRect() || null\n      },\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [elementRef?.current, forceUpdate])\n\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n\n  const handleScrollOrResize = useCallback(() => {\n    setForceUpdate(forceUpdate + 1)\n  }, [forceUpdate])\n\n  useEffect(() => {\n    if (scrollElement) {\n      scrollElement.addEventListener('scroll', handleScrollOrResize, true)\n    }\n    return () => {\n      if (scrollElement) {\n        scrollElement.removeEventListener('scroll', handleScrollOrResize, true)\n      }\n    }\n  }, [handleScrollOrResize, scrollElement])\n\n  return (\n    <RootPopover\n      constrainSize\n      content={<Content {...props} rootElement={rootElement} width={width} />}\n      fallbackPlacements={POPOVER_FALLBACK_PLACEMENTS}\n      placement=\"bottom\"\n      open\n      portal=\"default\"\n      ref={setRootElement}\n      referenceElement={virtualElement || (debugElement as FIXME)}\n    />\n  )\n}\n\nfunction Content(\n  props: PopoverEditDialogProps & {\n    rootElement: HTMLDivElement | null\n  }\n) {\n  const {onClose, rootElement, width = 0, title} = props\n  const {element: boundaryElement} = useBoundaryElement()\n  const portal = usePortal()\n\n  useClickOutside(onClose, [rootElement], boundaryElement)\n\n  return (\n    <ContentContainer width={width}>\n      <Flex direction=\"column\" flex={1}>\n        <ContentHeaderBox padding={1}>\n          <Flex align=\"center\">\n            <Box flex={1} padding={2}>\n              <Text weight=\"semibold\">{title}</Text>\n            </Box>\n\n            <Button icon={CloseIcon} mode=\"bleed\" onClick={onClose} padding={2} />\n          </Flex>\n        </ContentHeaderBox>\n        <ContentScrollerBox flex={1}>\n          <PresenceOverlay margins={[0, 0, 1, 0]}>\n            <Box padding={3}>\n              <PortalProvider element={portal.elements?.default}>{props.children}</PortalProvider>\n            </Box>\n          </PresenceOverlay>\n        </ContentScrollerBox>\n      </Flex>\n    </ContentContainer>\n  )\n}\n","import {\n  EditorSelection,\n  PortableTextEditor,\n  usePortableTextEditor,\n} from '@sanity/portable-text-editor'\nimport React, {useCallback, useEffect, useMemo, useRef, useState} from 'react'\nimport {_getModalOption} from '../helpers'\nimport {PortableTextMemberItem} from '../../PortableTextInput'\nimport {DefaultEditDialog} from './DefaultEditDialog'\nimport {PopoverEditDialog} from './PopoverEditDialog'\nimport {ModalType} from './types'\n\nexport function ObjectEditModal(props: {\n  children: React.ReactNode\n  kind: PortableTextMemberItem['kind']\n  memberItem: PortableTextMemberItem\n  onClose: () => void\n  scrollElement: HTMLElement\n}) {\n  const {memberItem, onClose, scrollElement, kind} = props\n  const {schemaType} = memberItem.node\n  const modalOption = useMemo(() => _getModalOption({schemaType}), [schemaType])\n\n  const modalType: ModalType = useMemo(() => {\n    if (modalOption.type) return modalOption.type\n\n    // If the object is inline or an annotation, then default to \"popover\"\n    if (kind === 'inlineObject' || kind === 'annotation') return 'popover'\n\n    return 'dialog'\n  }, [kind, modalOption])\n\n  const [firstField, setFirstField] = useState<HTMLElement | null>(null)\n  const editor = usePortableTextEditor()\n  const initialSelection = useRef<EditorSelection | null>(PortableTextEditor.getSelection(editor))\n\n  const handleClose = useCallback(() => {\n    onClose()\n    // Force a new selection here as the selection is a callback dep. for showing the popup\n    PortableTextEditor.select(editor, null)\n    PortableTextEditor.focus(editor)\n    PortableTextEditor.select(editor, initialSelection.current)\n  }, [editor, onClose])\n\n  const title = <>Edit {memberItem.node.schemaType.title}</>\n\n  // Set focus on the first field\n  useEffect(() => {\n    if (firstField) {\n      return\n    }\n    const firstFieldMember = memberItem.node.members.find((m) => m.kind === 'field')\n    if (firstFieldMember && firstFieldMember.kind === 'field') {\n      const firstFieldElm = document.getElementById(firstFieldMember.field.id) as HTMLElement | null\n      if (firstFieldElm) {\n        setFirstField(firstFieldElm)\n        firstFieldElm.focus()\n      }\n    }\n  }, [firstField, memberItem])\n\n  if (modalType === 'popover') {\n    return (\n      <PopoverEditDialog\n        elementRef={memberItem.elementRef}\n        onClose={handleClose}\n        scrollElement={scrollElement}\n        title={title}\n      >\n        {props.children}\n      </PopoverEditDialog>\n    )\n  }\n\n  return (\n    <DefaultEditDialog title={title} onClose={handleClose}>\n      {props.children}\n    </DefaultEditDialog>\n  )\n}\n","import {PortableTextEditor, usePortableTextEditor} from '@sanity/portable-text-editor'\nimport {Path} from '@sanity/types'\nimport {useEffect, useMemo} from 'react'\nimport scrollIntoView from 'scroll-into-view-if-needed'\nimport {usePortableTextMemberItems} from './usePortableTextMembers'\n\ninterface Props {\n  editorRootPath: Path\n  hasFocus: boolean\n  scrollElement: HTMLElement | null\n  onCloseItem: () => void\n}\n\n// This hook will scroll to the \"opened\" portable text object's editor dom node.\n// If the opened item is a regular text block, place the cursor there as well.\nexport function useScrollToOpenedMember(props: Props): void {\n  const {editorRootPath, scrollElement, hasFocus, onCloseItem} = props\n  const portableTextMemberItems = usePortableTextMemberItems()\n  const editor = usePortableTextEditor()\n\n  // Find the opened item with the highest path\n  const memberItem = useMemo(() => {\n    return portableTextMemberItems\n      .filter((item) => item.member.open)\n      .sort((a, b) => b.member.item.path.length - a.member.item.path.length)[0]\n  }, [portableTextMemberItems])\n\n  useEffect(() => {\n    // If the editor is already is focused, don't interfere.\n    if (hasFocus) {\n      return\n    }\n    if (memberItem?.elementRef?.current) {\n      scrollIntoView(memberItem.elementRef?.current, {\n        boundary: scrollElement,\n        scrollMode: 'if-needed',\n      })\n      // If this is a text block, place the cursor in the beginning of it.\n      if (memberItem.kind === 'textBlock') {\n        const relativePath = memberItem.member.item.path.slice(editorRootPath.length)\n        PortableTextEditor.select(editor, {\n          anchor: {path: relativePath, offset: 0},\n          focus: {path: relativePath, offset: 0},\n        })\n        PortableTextEditor.focus(editor)\n        // \"auto-close\" regular text blocks or they get sticky here when trying to focus on an other field\n        // There is no natural way of closing them (however opening something else would close them)\n        onCloseItem()\n      }\n    }\n  }, [editor, hasFocus, editorRootPath.length, memberItem, scrollElement, onCloseItem])\n}\n","import React, {useState, useMemo, useCallback} from 'react'\nimport {\n  EditorSelection,\n  OnCopyFn,\n  OnPasteFn,\n  PortableTextBlock,\n  PortableTextEditor,\n  usePortableTextEditor,\n  HotkeyOptions,\n  RenderAttributes,\n} from '@sanity/portable-text-editor'\nimport {ObjectSchemaType, Path} from '@sanity/types'\nimport {\n  BoundaryElementProvider,\n  Portal,\n  PortalProvider,\n  Text,\n  useBoundaryElement,\n  usePortal,\n} from '@sanity/ui'\nimport {ChangeIndicator} from '../../../components/changeIndicators'\nimport {ArrayOfObjectsInputProps, RenderCustomMarkers} from '../../types'\nimport {ActivateOnFocus} from '../../components/ActivateOnFocus/ActivateOnFocus'\nimport {EMPTY_ARRAY} from '../../utils/empty'\nimport {FormInput} from '../../FormInput'\nimport {BlockObject} from './object/BlockObject'\nimport {InlineObject} from './object/InlineObject'\nimport {Annotation, TextBlock} from './text'\nimport {RenderBlockActionsCallback} from './types'\nimport {Editor} from './Editor'\nimport {ExpandedLayer, Root} from './Compositor.styles'\nimport {useHotkeys} from './hooks/useHotKeys'\nimport {ObjectEditModal} from './object/renderers/ObjectEditModal'\nimport {useScrollToOpenedMember} from './hooks/useScrollToOpenedMember'\nimport {usePortableTextMemberItems} from './hooks/usePortableTextMembers'\nimport {_isBlockType} from './_helpers'\n\ninterface InputProps extends ArrayOfObjectsInputProps<PortableTextBlock> {\n  hasFocus: boolean\n  hotkeys?: HotkeyOptions\n  isActive: boolean\n  isFullscreen: boolean\n  onActivate: () => void\n  onCopy?: OnCopyFn\n  onPaste?: OnPasteFn\n  onToggleFullscreen: () => void\n  path: Path\n  renderBlockActions?: RenderBlockActionsCallback\n  renderCustomMarkers?: RenderCustomMarkers\n}\n\nexport type PortableTextEditorElement = HTMLDivElement | HTMLSpanElement | null\n\nfunction isTouchDevice() {\n  return (\n    (typeof window !== 'undefined' && 'ontouchstart' in window) ||\n    (typeof navigator !== 'undefined' && navigator.maxTouchPoints > 0)\n  )\n}\n\nconst activateVerb = isTouchDevice() ? 'Tap' : 'Click'\n\nconst ACTIVATE_ON_FOCUS_MESSAGE = <Text weight=\"semibold\">{activateVerb} to activate</Text>\n\nexport function Compositor(props: InputProps) {\n  const {\n    changed,\n    focusPath = EMPTY_ARRAY,\n    focused,\n    hasFocus,\n    hotkeys,\n    isActive,\n    isFullscreen,\n    onChange,\n    onCopy,\n    onActivate,\n    onOpenItem,\n    onCloseItem,\n    onPaste,\n    onToggleFullscreen,\n    path,\n    renderBlockActions,\n    renderCustomMarkers,\n    value,\n    readOnly,\n    renderPreview,\n  } = props\n\n  const editor = usePortableTextEditor()\n\n  const [wrapperElement, setWrapperElement] = useState<HTMLDivElement | null>(null)\n  const [scrollElement, setScrollElement] = useState<HTMLElement | null>(null)\n  const portableTextMemberItems = usePortableTextMemberItems()\n\n  const {element: boundaryElement} = useBoundaryElement()\n\n  // Scroll to the DOM element of the \"opened\" portable text member when relevant.\n  useScrollToOpenedMember({\n    hasFocus,\n    editorRootPath: path,\n    scrollElement,\n    onCloseItem,\n  })\n\n  const handleToggleFullscreen = useCallback(() => {\n    onToggleFullscreen()\n  }, [onToggleFullscreen])\n\n  const hotkeysWithFullscreenToggle = useMemo(\n    () => ({\n      ...hotkeys,\n      custom: {\n        'mod+enter': onToggleFullscreen,\n        ...(hotkeys?.custom || {}),\n      },\n    }),\n\n    [hotkeys, onToggleFullscreen]\n  )\n\n  const editorHotkeys = useHotkeys(hotkeysWithFullscreenToggle)\n\n  const ptFeatures = useMemo(() => PortableTextEditor.getPortableTextFeatures(editor), [editor])\n  const hasContent = !!value\n\n  const initialSelection = useMemo(\n    (): EditorSelection =>\n      focusPath.length > 0\n        ? {\n            anchor: {path: focusPath, offset: 0},\n            focus: {path: focusPath, offset: 0},\n          }\n        : null,\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [] // Only initial\n  )\n\n  const renderBlock = useCallback(\n    (\n      block: PortableTextBlock,\n      blockType: ObjectSchemaType,\n      attributes: RenderAttributes,\n      defaultRender: (b: PortableTextBlock) => JSX.Element\n    ) => {\n      const isTextBlock = block._type === ptFeatures.types.block.name\n      if (isTextBlock) {\n        return (\n          <TextBlock\n            attributes={attributes}\n            block={block}\n            isFullscreen={isFullscreen}\n            onChange={onChange}\n            readOnly={readOnly}\n            renderBlockActions={hasContent ? renderBlockActions : undefined}\n            renderCustomMarkers={hasContent ? renderCustomMarkers : undefined}\n          >\n            {defaultRender(block)}\n          </TextBlock>\n        )\n      }\n\n      return (\n        <BlockObject\n          attributes={attributes}\n          block={block}\n          isFullscreen={isFullscreen}\n          onChange={onChange}\n          onOpenItem={onOpenItem}\n          readOnly={readOnly}\n          renderBlockActions={hasContent ? renderBlockActions : undefined}\n          renderCustomMarkers={hasContent ? renderCustomMarkers : undefined}\n          renderPreview={renderPreview}\n          type={blockType}\n        />\n      )\n    },\n    [\n      hasContent,\n      isFullscreen,\n      onChange,\n      onOpenItem,\n      ptFeatures.types.block.name,\n      readOnly,\n      renderBlockActions,\n      renderCustomMarkers,\n      renderPreview,\n    ]\n  )\n\n  const renderChild = useCallback(\n    (child, childType, attributes, defaultRender) => {\n      const isSpan = child._type === ptFeatures.types.span.name\n      if (isSpan) {\n        return defaultRender(child)\n      }\n\n      return (\n        <InlineObject\n          attributes={attributes}\n          onOpenItem={onOpenItem}\n          readOnly={readOnly}\n          renderCustomMarkers={renderCustomMarkers}\n          scrollElement={scrollElement}\n          type={childType}\n          value={child}\n          renderPreview={renderPreview}\n        />\n      )\n    },\n    [\n      onOpenItem,\n      ptFeatures.types.span.name,\n      readOnly,\n      renderCustomMarkers,\n      renderPreview,\n      scrollElement,\n    ]\n  )\n\n  const renderAnnotation = useCallback(\n    (annotation, annotationType, attributes, defaultRender) => {\n      return (\n        <Annotation\n          attributes={attributes}\n          onOpenItem={onOpenItem}\n          readOnly={readOnly}\n          renderCustomMarkers={renderCustomMarkers}\n          scrollElement={scrollElement}\n          value={annotation}\n          type={annotationType}\n        >\n          {defaultRender()}\n        </Annotation>\n      )\n    },\n    [onOpenItem, readOnly, renderCustomMarkers, scrollElement]\n  )\n\n  const [portalElement, setPortalElement] = useState<HTMLDivElement | null>(null)\n\n  const openMemberItems = useMemo(\n    () => portableTextMemberItems.filter((m) => m.member.open && !_isBlockType(m.node.schemaType)),\n    [portableTextMemberItems]\n  )\n\n  const editorNode = useMemo(\n    () => (\n      <Editor\n        hotkeys={editorHotkeys}\n        initialSelection={initialSelection}\n        isFullscreen={isFullscreen}\n        onOpenItem={onOpenItem}\n        onCopy={onCopy}\n        onPaste={onPaste}\n        onToggleFullscreen={handleToggleFullscreen}\n        path={path}\n        readOnly={readOnly}\n        renderAnnotation={renderAnnotation}\n        renderBlock={renderBlock}\n        renderChild={renderChild}\n        setPortalElement={setPortalElement}\n        scrollElement={scrollElement}\n        setScrollElement={setScrollElement}\n      />\n    ),\n\n    // Keep only stable ones here!\n    [\n      editorHotkeys,\n      handleToggleFullscreen,\n      initialSelection,\n      isFullscreen,\n      onCopy,\n      onOpenItem,\n      onPaste,\n      path,\n      readOnly,\n      renderAnnotation,\n      renderBlock,\n      renderChild,\n      scrollElement,\n    ]\n  )\n\n  const boundaryElm = isFullscreen ? scrollElement : boundaryElement\n\n  const children = useMemo(\n    () =>\n      boundaryElm && (\n        <>\n          {editorNode}\n          <BoundaryElementProvider element={boundaryElm}>\n            {openMemberItems.map((dMemberItem) => {\n              return (\n                <ObjectEditModal\n                  kind={dMemberItem.kind}\n                  key={dMemberItem.member.key}\n                  memberItem={dMemberItem}\n                  onClose={onCloseItem}\n                  scrollElement={boundaryElm}\n                >\n                  <FormInput absolutePath={dMemberItem.node.path} {...(props as any)} />\n                </ObjectEditModal>\n              )\n            })}\n          </BoundaryElementProvider>\n        </>\n      ),\n    [boundaryElm, editorNode, openMemberItems, onCloseItem, props]\n  )\n\n  const portal = usePortal()\n  const portalElements = useMemo(\n    () => ({\n      collapsed: wrapperElement,\n      default: portal.element,\n      editor: portalElement,\n      expanded: portal.element,\n    }),\n\n    [portal.element, portalElement, wrapperElement]\n  )\n\n  const editorLayer = useMemo(\n    () => (\n      <Portal __unstable_name={isFullscreen ? 'expanded' : 'collapsed'}>\n        <ExpandedLayer data-fullscreen={isFullscreen ? '' : undefined}>{children}</ExpandedLayer>\n      </Portal>\n    ),\n    [children, isFullscreen]\n  )\n  return (\n    <PortalProvider __unstable_elements={portalElements}>\n      <ActivateOnFocus\n        message={ACTIVATE_ON_FOCUS_MESSAGE}\n        onActivate={onActivate}\n        isOverlayActive={!isActive}\n      >\n        <ChangeIndicator\n          disabled={isFullscreen}\n          hasFocus={Boolean(focused)}\n          isChanged={changed}\n          path={path}\n        >\n          <Root data-focused={hasFocus ? '' : undefined} data-read-only={readOnly ? '' : undefined}>\n            <div data-wrapper=\"\" ref={setWrapperElement}>\n              {editorLayer}\n            </div>\n            <div data-border=\"\" />\n          </Root>\n        </ChangeIndicator>\n      </ActivateOnFocus>\n    </PortalProvider>\n  )\n}\n","import {InvalidValueResolution} from '@sanity/portable-text-editor'\nimport {Box, Button, Card, Code, Grid, Stack, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport {Alert} from '../../components/Alert'\n\ninterface InvalidValueProps {\n  onChange: (...args: any[]) => any\n  onIgnore: () => void\n  resolution: InvalidValueResolution\n}\n\nexport function InvalidValue(props: InvalidValueProps) {\n  const {onChange, onIgnore, resolution} = props\n\n  const handleAction = useCallback(() => {\n    if (resolution) {\n      onChange({type: 'mutation', patches: resolution.patches})\n    }\n  }, [onChange, resolution])\n\n  if (!resolution) return null\n\n  return (\n    <Alert\n      suffix={\n        <Stack padding={2}>\n          {resolution.action && (\n            <Grid columns={[1, 2]} gap={1}>\n              <Button mode=\"ghost\" onClick={onIgnore} text=\"Ignore\" />\n              <Button onClick={handleAction} text={resolution.action} tone=\"caution\" />\n            </Grid>\n          )}\n\n          <Box padding={3}>\n            {resolution.action && (\n              <Text as=\"p\" muted size={1}>\n                NOTE: Itâ€™s generally safe to perform the action above, but if you are in doubt, get\n                in touch with those responsible for configuring your studio.\n              </Text>\n            )}\n          </Box>\n        </Stack>\n      }\n      title={<>Invalid block value</>}\n    >\n      <Stack space={3}>\n        <Text as=\"p\" muted size={1}>\n          {resolution.description}\n        </Text>\n\n        <Card border overflow=\"auto\" padding={2} tone=\"inherit\">\n          <Code language=\"json\">{JSON.stringify(resolution.item, null, 2)}</Code>\n        </Card>\n      </Stack>\n    </Alert>\n  )\n}\n","import {Path, PathSegment} from '@sanity/types'\nimport {get, find} from 'lodash'\nimport {useCallback} from 'react'\nimport shallowEquals from 'shallow-equals'\nimport {isRecord} from '../../../util'\nimport {FormPatch} from '../../patch'\nimport {useFormBuilder} from '../../useFormBuilder'\n\n/**\n * @internal\n */\nexport interface PatchesData {\n  patches: Array<FormPatch>\n  shouldReset: boolean\n  snapshot: any\n}\n\n/**\n * @internal\n */\nexport type PatchesSubscriber = (data: PatchesData) => void\n\n/**\n * @internal\n */\nexport function usePatches(props: {path: Path}): {\n  subscribe: (subscriber: PatchesSubscriber) => () => void\n} {\n  const {path} = props\n  const {patchChannel} = useFormBuilder().__internal\n\n  const subscribe = useCallback(\n    (subscriber: PatchesSubscriber) => {\n      return patchChannel.subscribe(({snapshot, patches}) => {\n        const filteredPatches = patches\n          .filter((patch) => _startsWith(patch.path, path))\n          .map((patch) => ({\n            ...patch,\n            path: patch.path.slice(path.length),\n          }))\n\n        if (filteredPatches.length) {\n          subscriber({\n            shouldReset: _shouldReset(path, patches),\n            snapshot: isRecord(snapshot) ? _getValueAtPath(snapshot, path) : {},\n            patches: filteredPatches,\n          })\n        }\n      })\n    },\n    [path, patchChannel]\n  )\n\n  return {subscribe}\n}\n\nfunction _isSegmentEqual(segment1: PathSegment, segment2: PathSegment) {\n  const segment1Type = typeof segment1\n  if (segment1Type !== typeof segment2) {\n    return false\n  }\n  if (segment1Type === 'object') {\n    return shallowEquals(segment1, segment2)\n  }\n  return segment1 === segment2\n}\n\nfunction _startsWith(subjectPath: Path, checkPath: Path) {\n  if (subjectPath === checkPath) {\n    return true\n  }\n  if (!Array.isArray(subjectPath) || !Array.isArray(checkPath)) {\n    return false\n  }\n  if (subjectPath.length < checkPath.length) {\n    return false\n  }\n  for (let i = 0, len = checkPath.length; i < len; i++) {\n    if (!_isSegmentEqual(checkPath[i], subjectPath[i])) {\n      return false\n    }\n  }\n  return true\n}\n\nfunction _isAncestor(path1: Path, path2: Path) {\n  return path1.length === 0 || (_startsWith(path2, path1) && !_startsWith(path1, path2))\n}\n\nfunction _shouldReset(path: Path, patches: FormPatch[]) {\n  return patches.some(\n    (patch) => _isAncestor(patch.path, path) && (patch.type === 'set' || patch.type === 'unset')\n  )\n}\n\nfunction _getValueAtPath(value: Record<string, unknown>, path: Path) {\n  return path.reduce((result, segment) => {\n    if (typeof segment === 'object') {\n      return find(result, segment)\n    }\n\n    return get(result, segment)\n  }, value)\n}\n","import {Button, useLayer} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\ninterface VisibleOnFocusButtonProps {\n  children: React.ReactNode\n  onClick: () => void\n}\n\nconst Root = styled(Button)<{$zIndex: number}>`\n  position: absolute;\n  z-index: ${({$zIndex}) => $zIndex};\n  margin: 1px;\n\n  &:not(:focus) {\n    height: 1px;\n    width: 1px;\n    overflow: hidden;\n    clip: rect(1px, 1px, 1px, 1px);\n  }\n`\n\nexport function VisibleOnFocusButton(props: VisibleOnFocusButtonProps) {\n  const {children, onClick} = props\n  const {zIndex} = useLayer()\n  return (\n    <Root mode=\"ghost\" onClick={onClick} $zIndex={zIndex + 1}>\n      {children}\n    </Root>\n  )\n}\n","import {ArraySchemaType, ObjectSchemaType} from '@sanity/types'\nimport {\n  EditorChange,\n  OnCopyFn,\n  OnPasteFn,\n  Patch as EditorPatch,\n  PortableTextBlock,\n  PortableTextEditor,\n  HotkeyOptions,\n  InvalidValue,\n  EditorSelection,\n} from '@sanity/portable-text-editor'\nimport React, {\n  useEffect,\n  useState,\n  useMemo,\n  useCallback,\n  useRef,\n  useImperativeHandle,\n  createRef,\n} from 'react'\nimport {Subject} from 'rxjs'\nimport {Box, Text, useToast} from '@sanity/ui'\nimport scrollIntoView from 'scroll-into-view-if-needed'\nimport {debounce} from 'lodash'\nimport {FormPatch as FormBuilderPatch} from '../../patch'\nimport {ArrayOfObjectsItemMember, ObjectFormNode} from '../../store'\nimport type {\n  ArrayOfObjectsInputProps,\n  FIXME,\n  PortableTextMarker,\n  RenderCustomMarkers,\n} from '../../types'\nimport {EMPTY_ARRAY} from '../../utils/empty'\nimport {isMemberArrayOfObjects} from '../../members/fields/asserters'\nimport {pathToString} from '../../../field/paths'\nimport {Compositor, PortableTextEditorElement} from './Compositor'\nimport {InvalidValue as RespondToInvalidContent} from './InvalidValue'\nimport {usePatches} from './usePatches'\nimport {VisibleOnFocusButton} from './VisibleOnFocusButton'\nimport {RenderBlockActionsCallback} from './types'\nimport {PortableTextMarkersProvider} from './contexts/PortableTextMarkers'\nimport {PortableTextMemberItemsProvider} from './contexts/PortableTextMembers'\nimport {_isArrayOfObjectsFieldMember, _isBlockType} from './_helpers'\n\nexport type PTObjectMember = ArrayOfObjectsItemMember<\n  ObjectFormNode<\n    {\n      [x: string]: unknown\n    },\n    ObjectSchemaType\n  >\n>\nexport interface PortableTextMemberItem {\n  kind: 'annotation' | 'textBlock' | 'objectBlock' | 'inlineObject'\n  key: string\n  member: PTObjectMember\n  node: ObjectFormNode\n  elementRef?: React.MutableRefObject<PortableTextEditorElement> | undefined\n}\n\n/**\n * @alpha\n */\nexport interface PortableTextInputProps\n  extends ArrayOfObjectsInputProps<PortableTextBlock, ArraySchemaType> {\n  hotkeys?: HotkeyOptions\n  markers?: PortableTextMarker[]\n  onCopy?: OnCopyFn\n  onPaste?: OnPasteFn\n  renderBlockActions?: RenderBlockActionsCallback\n  renderCustomMarkers?: RenderCustomMarkers\n}\n\n/**\n * The root Portable Text Input component\n *\n * @alpha\n */\nexport function PortableTextInput(props: PortableTextInputProps) {\n  const {\n    focused,\n    focusPath,\n    hotkeys,\n    markers = EMPTY_ARRAY,\n    members,\n    onChange,\n    onCopy,\n    onFocusPath,\n    onInsert,\n    onPaste,\n    path,\n    readOnly: readOnlyFromProps,\n    renderBlockActions,\n    renderCustomMarkers,\n    schemaType: type,\n    value,\n    elementProps,\n  } = props\n\n  // Make the PTE focusable from the outside\n  useImperativeHandle(elementProps.ref, () => ({\n    focus() {\n      if (editorRef.current) {\n        PortableTextEditor.focus(editorRef.current)\n      }\n    },\n  }))\n\n  const {subscribe} = usePatches({path})\n  const editorRef = useRef<PortableTextEditor | null>(null)\n  const [hasFocus, setHasFocus] = useState(false)\n  const [ignoreValidationError, setIgnoreValidationError] = useState(false)\n  const [invalidValue, setInvalidValue] = useState<InvalidValue | null>(null)\n  const [isFullscreen, setIsFullscreen] = useState(false)\n  const [isActive, setIsActive] = useState(false)\n\n  const readOnly = useMemo(() => {\n    return isActive ? Boolean(readOnlyFromProps) : true\n  }, [isActive, readOnlyFromProps])\n\n  const toast = useToast()\n  const portableTextMemberItemsRef: React.MutableRefObject<PortableTextMemberItem[]> = useRef([])\n\n  // Memoized patch stream\n  const patchSubject: Subject<{\n    patches: EditorPatch[]\n    snapshot: PortableTextBlock[] | undefined\n  }> = useMemo(() => new Subject(), [])\n  const remotePatch$ = useMemo(() => patchSubject.asObservable(), [patchSubject])\n\n  const innerElementRef = useRef<HTMLDivElement | null>(null)\n\n  const handleToggleFullscreen = useCallback(() => {\n    if (editorRef.current) {\n      const prevSel = PortableTextEditor.getSelection(editorRef.current)\n      setIsFullscreen((v) => !v)\n      setTimeout(() => {\n        if (editorRef.current) {\n          PortableTextEditor.focus(editorRef.current)\n          if (prevSel) {\n            PortableTextEditor.select(editorRef.current, {...prevSel})\n          }\n        }\n      })\n    }\n  }, [])\n\n  // Reset invalidValue if new value is coming in from props\n  useEffect(() => {\n    if (invalidValue && value !== invalidValue.value) {\n      setInvalidValue(null)\n    }\n  }, [invalidValue, value])\n\n  // Subscribe to patches\n  useEffect(() => {\n    return subscribe(({patches, snapshot}): void => {\n      patchSubject.next({patches, snapshot})\n    })\n  }, [patchSubject, subscribe])\n\n  // Populate the portableTextMembers Map\n  const portableTextMemberItems: PortableTextMemberItem[] = useMemo(() => {\n    const result: {\n      kind: PortableTextMemberItem['kind']\n      member: PTObjectMember\n      node: ObjectFormNode\n    }[] = []\n\n    for (const member of members) {\n      if (member.kind === 'item') {\n        if (!_isBlockType(member.item.schemaType)) {\n          result.push({kind: 'objectBlock', member, node: member.item})\n        } else if (member.item.validation.length > 0 || member.item.changed) {\n          // Only text blocks that have validation or changes\n          result.push({kind: 'textBlock', member, node: member.item})\n        }\n\n        if (_isBlockType(member.item.schemaType)) {\n          // Inline objects\n          const childrenField = member.item.members.find(\n            (f) => f.kind === 'field' && f.name === 'children'\n          )\n\n          if (\n            childrenField &&\n            childrenField.kind === 'field' &&\n            isMemberArrayOfObjects(childrenField)\n          ) {\n            // eslint-disable-next-line max-depth\n            for (const child of childrenField.field.members) {\n              // eslint-disable-next-line max-depth\n              if (child.kind === 'item' && child.item.schemaType.name !== 'span') {\n                result.push({kind: 'inlineObject', member: child, node: child.item})\n              }\n            }\n          }\n\n          // Markdefs\n          const markDefArrayMember = member.item.members\n            .filter(_isArrayOfObjectsFieldMember)\n            .find((f) => f.name === 'markDefs')\n\n          if (markDefArrayMember) {\n            // eslint-disable-next-line max-depth\n            for (const child of markDefArrayMember.field.members) {\n              // eslint-disable-next-line max-depth\n              if (child.kind === 'item' && child.item.schemaType.jsonType === 'object') {\n                result.push({\n                  kind: 'annotation',\n                  member: child,\n                  node: child.item,\n                })\n              }\n            }\n          }\n        }\n      }\n    }\n\n    const items: PortableTextMemberItem[] = result.map((r) => {\n      const key = pathToString(r.node.path.slice(path.length))\n      const existingItem = portableTextMemberItemsRef.current.find((ref) => ref.key === key)\n\n      if (existingItem) {\n        existingItem.member = r.member\n        existingItem.node = r.node\n        return existingItem\n      }\n\n      return {\n        kind: r.kind,\n        key,\n        member: r.member,\n        node: r.node,\n        elementRef: createRef<PortableTextEditorElement>(),\n      }\n    })\n\n    portableTextMemberItemsRef.current = items\n\n    return items\n  }, [members, path])\n\n  const hasOpenItem = useMemo(() => {\n    return portableTextMemberItems.some((item) => item.member.open)\n  }, [portableTextMemberItems])\n\n  // Sets the focusPath from editor selection (when typing, moving the cursor, clicking around)\n  // This doesn't need to be immediate, so debounce it as it impacts performance.\n  const setFocusPathDebounced = useMemo(\n    () =>\n      debounce(\n        (sel: EditorSelection) => {\n          if (sel && hasFocus) onFocusPath(sel.focus.path)\n        },\n        500,\n        {trailing: true, leading: false}\n      ),\n    [hasFocus, onFocusPath]\n  )\n\n  // Handle editor changes\n  const handleEditorChange = useCallback(\n    (change: EditorChange): void => {\n      switch (change.type) {\n        case 'mutation':\n          onChange(change.patches as FormBuilderPatch[])\n          break\n        case 'selection':\n          setFocusPathDebounced(change.selection)\n          break\n        case 'focus':\n          setHasFocus(true)\n          break\n        case 'blur':\n          setHasFocus(false)\n          break\n        case 'undo':\n        case 'redo':\n          onChange(change.patches as FormBuilderPatch[])\n          break\n        case 'invalidValue':\n          setInvalidValue(change)\n          break\n        case 'error':\n          toast.push({\n            status: change.level,\n            description: change.description,\n          })\n          break\n        default:\n      }\n    },\n    [onChange, toast, setFocusPathDebounced]\n  )\n\n  const handleFocusSkipperClick = useCallback(() => {\n    if (editorRef.current) {\n      PortableTextEditor.focus(editorRef.current)\n    }\n  }, [editorRef])\n\n  const handleIgnoreInvalidValue = useCallback((): void => {\n    setIgnoreValidationError(true)\n  }, [])\n\n  const respondToInvalidContent = useMemo(() => {\n    if (invalidValue && invalidValue.resolution) {\n      return (\n        <Box marginBottom={2}>\n          <RespondToInvalidContent\n            onChange={handleEditorChange}\n            onIgnore={handleIgnoreInvalidValue}\n            resolution={invalidValue.resolution}\n          />\n        </Box>\n      )\n    }\n    return null\n  }, [handleEditorChange, handleIgnoreInvalidValue, invalidValue])\n\n  const handleActivate = useCallback((): void => {\n    if (!isActive) {\n      setIsActive(true)\n      // Focus the editor in the next tick if needed\n      // Next tick because we are in a re-rendering phase of the editor at this point (activating it).\n      if (!hasFocus) {\n        setTimeout(() => {\n          if (editorRef.current) {\n            PortableTextEditor.focus(editorRef.current)\n          }\n        })\n      }\n    }\n  }, [hasFocus, isActive])\n\n  // If the editor that has an opened item and isn't focused - scroll to the input if needed.\n  useEffect(() => {\n    if (!hasFocus && hasOpenItem && innerElementRef.current) {\n      scrollIntoView(innerElementRef.current, {\n        scrollMode: 'if-needed',\n      })\n    }\n  }, [focused, hasFocus, hasOpenItem])\n\n  return (\n    <Box ref={innerElementRef}>\n      {!readOnly && (\n        <VisibleOnFocusButton onClick={handleFocusSkipperClick}>\n          <Text>Go to content</Text>\n        </VisibleOnFocusButton>\n      )}\n\n      {!ignoreValidationError && respondToInvalidContent}\n      {(!invalidValue || ignoreValidationError) && (\n        <PortableTextMarkersProvider markers={markers}>\n          <PortableTextMemberItemsProvider memberItems={portableTextMemberItems}>\n            <PortableTextEditor\n              ref={editorRef}\n              incomingPatches$={remotePatch$}\n              onChange={handleEditorChange}\n              maxBlocks={undefined} // TODO: from schema?\n              readOnly={readOnly}\n              type={type as FIXME}\n              value={value}\n            >\n              <Compositor\n                {...props}\n                focused={focused}\n                focusPath={focusPath}\n                hasFocus={hasFocus}\n                hotkeys={hotkeys}\n                isActive={isActive}\n                isFullscreen={isFullscreen}\n                onActivate={handleActivate}\n                onChange={onChange}\n                onCopy={onCopy}\n                onInsert={onInsert}\n                onPaste={onPaste}\n                onToggleFullscreen={handleToggleFullscreen}\n                readOnly={readOnly}\n                renderBlockActions={renderBlockActions}\n                renderCustomMarkers={renderCustomMarkers}\n                value={value}\n              />\n            </PortableTextEditor>\n          </PortableTextMemberItemsProvider>\n        </PortableTextMarkersProvider>\n      )}\n    </Box>\n  )\n}\n","import {\n  isArrayOfObjectsSchemaType,\n  isArrayOfPrimitivesSchemaType,\n  isBooleanSchemaType,\n  isNumberSchemaType,\n  isObjectSchemaType,\n  isStringSchemaType,\n} from '@sanity/types'\nimport {\n  ArrayOfObjectsInputProps,\n  ArrayOfPrimitivesInputProps,\n  BooleanInputProps,\n  InputProps,\n  NumberInputProps,\n  ObjectInputProps,\n  StringInputProps,\n} from './inputProps'\nimport {ItemProps, ObjectItemProps} from './itemProps'\n\nexport function isObjectItemProps(item: ItemProps): item is ObjectItemProps {\n  return isObjectSchemaType(item.schemaType)\n}\n\nexport function isObjectInputProps(inputProps: InputProps): inputProps is ObjectInputProps {\n  return isObjectSchemaType(inputProps.schemaType)\n}\n\nexport function isStringInputProps(inputProps: InputProps): inputProps is StringInputProps {\n  return isStringSchemaType(inputProps.schemaType)\n}\n\nexport function isNumberInputProps(inputProps: InputProps): inputProps is NumberInputProps {\n  return isNumberSchemaType(inputProps.schemaType)\n}\n\nexport function isBooleanInputProps(inputProps: InputProps): inputProps is BooleanInputProps {\n  return isBooleanSchemaType(inputProps.schemaType)\n}\n\nexport function isArrayOfObjectsInputProps(\n  inputProps: InputProps\n): inputProps is ArrayOfObjectsInputProps {\n  return isArrayOfObjectsSchemaType(inputProps.schemaType)\n}\n\nexport function isArrayOfPrimitivesInputProps(\n  inputProps: InputProps\n): inputProps is ArrayOfPrimitivesInputProps {\n  return isArrayOfPrimitivesSchemaType(inputProps.schemaType)\n}\n","/* eslint-disable no-nested-ternary */\nimport {ConditionalProperty, CurrentUser} from '@sanity/types'\n\nexport interface ConditionalPropertyCallbackContext {\n  parent?: unknown\n  document?: Record<string, unknown>\n  currentUser: Omit<CurrentUser, 'role'> | null\n  value: unknown\n}\n\nexport function resolveConditionalProperty(\n  property: ConditionalProperty,\n  context: ConditionalPropertyCallbackContext\n) {\n  const {currentUser, document, parent, value} = context\n\n  if (typeof property === 'boolean' || property === undefined) {\n    return Boolean(property)\n  }\n\n  return (\n    property({\n      document: document as any,\n      parent,\n      value,\n      currentUser,\n    }) === true // note: we can't strictly \"trust\" the return value here, so the conditional property should probably be typed as unknown\n  )\n}\n","/**\n * Max supported field depth. Fields deeper than this will be considered hidden.\n */\nexport const MAX_FIELD_DEPTH = 20\n\n/**\n * Start auto-collapsing fields at this nesting level unless schema/field configuration says otherwise\n */\nexport const AUTO_COLLAPSE_DEPTH = 3\n","import {ArraySchemaType, SchemaType} from '@sanity/types'\nimport {resolveTypeName} from '@sanity/util/content'\n\nexport function getItemType(arrayType: ArraySchemaType, item: unknown): SchemaType | undefined {\n  const itemTypeName = resolveTypeName(item)\n\n  return itemTypeName === 'object' && arrayType.of.length === 1\n    ? arrayType.of[0]\n    : arrayType.of.find((memberType) => memberType.name === itemTypeName)\n}\n\nexport function getPrimitiveItemType(\n  arrayType: ArraySchemaType,\n  item: unknown\n): SchemaType | undefined {\n  const itemTypeName = resolveTypeName(item)\n\n  return arrayType?.of.find(\n    (memberType) => memberType.name === itemTypeName || memberType.jsonType === itemTypeName\n  )\n}\n","import {ObjectSchemaTypeWithOptions} from '@sanity/types'\nimport {AUTO_COLLAPSE_DEPTH} from '../constants'\n\ninterface CollapsibleOptions {\n  collapsible: boolean\n  // Initial collapsed state\n  collapsed: boolean\n}\n\n/**\n * Takes an option object that can optionally have a 'collapsed' property\n * (`{collapsed?: boolean, collapsible?: boolean}`)\n * and returns a resolved collapsed state based on configuration and whether it's below a certain nesting level threshold\n - collapsible: boolean - whether the field can be collapsed\n - collapsed: boolean - whether the field is initially collapsed\n * NOTE: If a field is configured with Â´collapsed: trueÂ´, ignore any Â´collapsibleÂ´ configuration and make it collapsible no matter what, otherwise it will be left forever collapsed.\n *\n * If the nesting level is deeper than or equal to AUTO_COLLAPSE_DEPTH, the default for the field/fieldset becomes \"collapsed\"\n *\n * @param options - Whether the field or fieldset should be collapsed\n * @param level - Nesting level\n */\nexport function getCollapsedWithDefaults(\n  options: ObjectSchemaTypeWithOptions['options'] = {},\n  level: number\n): CollapsibleOptions {\n  if (options?.collapsible === false || options?.collapsable === false) {\n    return {collapsible: false, collapsed: false}\n  }\n\n  const collapsed =\n    typeof options?.collapsed === 'boolean' ? options.collapsed : level >= AUTO_COLLAPSE_DEPTH\n\n  const collapsible = collapsed || options?.collapsible === true || options?.collapsable === true\n\n  return {\n    collapsible,\n    collapsed,\n  }\n}\n","import {isArraySchemaType, isObjectSchemaType, SchemaType} from '@sanity/types'\nimport {get} from 'lodash'\n\nexport function getOption(type: SchemaType, optionName: string) {\n  return get(type.options, optionName)\n}\n\nconst PSEUDO_OBJECTS = ['array', 'file', 'image', 'reference', 'slug']\nconst HIDDEN_FIELDS = ['asset', 'crop', 'hotspot', '_ref', '_weak']\nconst NO_LEVEL_LAYOUTS = ['tags']\nconst NO_LEVEL_TYPES = ['slug']\n\nexport function getFieldLevel(schemaType: SchemaType, currentLevel: number) {\n  return isArraySchemaType(schemaType)\n    ? getArrayFieldLevel(schemaType, currentLevel)\n    : getObjectFieldLevel(schemaType, currentLevel)\n}\n\nfunction getObjectFieldLevel(schemaType: SchemaType, currentLevel: number): number {\n  const {type, options} = schemaType\n  const typeIfRelevant = asType(type, PSEUDO_OBJECTS)\n  const fields = schemaType?.jsonType === 'object' ? schemaType.fields : undefined\n\n  const typeName = typeIfRelevant?.name || ''\n\n  if (NO_LEVEL_TYPES.includes(typeName)) {\n    return 0\n  }\n\n  const isPseudoObject = PSEUDO_OBJECTS.includes(typeName)\n  const hasVisibleFields = (fields?.filter((f) => !HIDDEN_FIELDS.includes(f.name)).length ?? 0) > 0\n  const hasListOptions = (options?.list?.length ?? 0) > 0\n\n  if (hasVisibleFields || hasListOptions || !isPseudoObject) {\n    return currentLevel\n  }\n\n  return 0\n}\n\nfunction getArrayFieldLevel(schemaType: SchemaType, currentLevel: number): number {\n  const {options} = schemaType\n\n  const hasListOptions = (options?.list || [])?.length > 0\n  const isNoLevelLayout = NO_LEVEL_LAYOUTS.includes(options?.layout || '')\n\n  if (hasListOptions && !isNoLevelLayout) {\n    return currentLevel\n  }\n\n  return 0\n}\n\nfunction asType(\n  schemaType: SchemaType | undefined,\n  asOneOfTypes: string[]\n): SchemaType | undefined {\n  if (schemaType?.name && asOneOfTypes.includes(schemaType?.name)) {\n    return schemaType\n  }\n  if (!schemaType) {\n    return undefined\n  }\n  return asType(schemaType.type, asOneOfTypes)\n}\n","/* eslint-disable max-statements */\n/* eslint-disable camelcase, no-else-return */\n\nimport {\n  ArraySchemaType,\n  BooleanSchemaType,\n  CurrentUser,\n  FieldGroup,\n  isArrayOfObjectsSchemaType,\n  isArraySchemaType,\n  isObjectSchemaType,\n  NumberSchemaType,\n  ObjectField,\n  ObjectSchemaType,\n  Path,\n  StringSchemaType,\n  ValidationMarker,\n} from '@sanity/types'\n\nimport {castArray, pick, isEqual as _isEqual} from 'lodash'\nimport {isEqual, pathFor, startsWith, toString, trimChildPath} from '@sanity/util/paths'\nimport {resolveTypeName} from '@sanity/util/content'\nimport {FIXME} from '../types'\nimport {FormFieldPresence} from '../../presence'\nimport {isRecord} from '../../util'\nimport {PrimitiveFormNode, StateTree} from './types'\nimport {resolveConditionalProperty} from './conditional-property'\nimport {MAX_FIELD_DEPTH} from './constants'\nimport {getItemType, getPrimitiveItemType} from './utils/getItemType'\nimport {\n  ArrayOfObjectsMember,\n  ArrayOfPrimitivesMember,\n  FieldMember,\n  ObjectMember,\n} from './types/members'\nimport {ArrayOfObjectsFormNode, ArrayOfPrimitivesFormNode, ObjectFormNode} from './types/nodes'\nimport {FormFieldGroup} from './types/fieldGroup'\nimport {getCollapsedWithDefaults} from './utils/getCollapsibleOptions'\nimport {FieldError} from './types/memberErrors'\nimport {getFieldLevel} from '../studio/inputResolver/helpers'\n\ntype PrimitiveSchemaType = BooleanSchemaType | NumberSchemaType | StringSchemaType\n\nconst ALL_FIELDS_GROUP: FieldGroup = {\n  name: 'all-fields',\n  title: 'All fields',\n  hidden: false,\n}\n\nfunction isFieldEnabledByGroupFilter(\n  // the groups config for the \"enclosing object\" type\n  groupsConfig: FormFieldGroup[],\n  field: ObjectField,\n  currentGroup: FormFieldGroup\n) {\n  if (currentGroup.name === ALL_FIELDS_GROUP.name) {\n    return true\n  }\n\n  // if there's no group config for the object type, all fields are visible\n  if (groupsConfig.length === 0) {\n    return true\n  }\n\n  return castArray(field.group).includes(currentGroup.name)\n}\n\nfunction isAcceptedObjectValue(value: any): value is Record<string, unknown> | undefined {\n  return typeof value === 'undefined' || isRecord(value)\n}\n\nfunction isValidArrayOfObjectsValue(value: any): value is unknown[] | undefined {\n  return typeof value === 'undefined' || Array.isArray(value)\n}\n\nfunction isValidArrayOfPrimitivesValue(\n  value: any\n): value is (boolean | number | string)[] | undefined {\n  return typeof value === 'undefined' || Array.isArray(value)\n}\n\nfunction everyItemIsObject(value: unknown[]): value is object[] {\n  return value.length === 0 || value.every((item) => isRecord(item))\n}\n\nfunction findDuplicateKeyEntries(array: {_key: string}[]) {\n  const seenKeys = new Set<string>()\n  return array.reduce((acc: [index: number, key: string][], item, index) => {\n    if (seenKeys.has(item._key)) {\n      acc.push([index, item._key])\n    }\n    seenKeys.add(item._key)\n    return acc\n  }, [])\n}\n\nfunction hasKey<T extends object>(value: T): value is T & {_key: string} {\n  return '_key' in value\n}\nfunction everyItemHasKey<T extends object>(array: T[]): array is (T & {_key: string})[] {\n  return array?.every((item) => isRecord(item) && hasKey(item))\n}\n\nfunction isChangedValue(value: any, comparisonValue: any) {\n  if (value && !comparisonValue) {\n    return true\n  }\n  return !_isEqual(value, comparisonValue)\n}\n\n/*\n * Takes a field in context of a parent object and returns prepared props for it\n */\nfunction prepareFieldMember(props: {\n  field: ObjectField\n  parent: RawState<ObjectSchemaType, unknown>\n  index: number\n}): ObjectMember | null {\n  const {parent, field, index} = props\n  const fieldPath = pathFor([...parent.path, field.name])\n  const fieldLevel = getFieldLevel(field.type, parent.level + 1)\n\n  const parentValue = parent.value\n  const parentComparisonValue = parent.comparisonValue\n  if (!isAcceptedObjectValue(parentValue)) {\n    // Note: we validate each field, before passing it recursively to this function so getting this error means that the\n    // Â´prepareFormStateÂ´ function itself has been called with a non-object value\n    throw new Error('Unexpected non-object value')\n  }\n\n  if (isObjectSchemaType(field.type)) {\n    const fieldValue = parentValue?.[field.name]\n    const fieldComparisonValue = isRecord(parentComparisonValue)\n      ? parentComparisonValue?.[field.name]\n      : undefined\n    if (!isAcceptedObjectValue(fieldValue)) {\n      return {\n        kind: 'error',\n        key: field.name,\n        fieldName: field.name,\n        error: {\n          type: 'INCOMPATIBLE_TYPE',\n          expectedSchemaType: field.type,\n          resolvedValueType: resolveTypeName(fieldValue),\n          value: fieldValue,\n        },\n      }\n    }\n\n    // todo: consider requiring a _type annotation for object values on fields as well\n    // if (resolvedValueType !== field.type.name) {\n    //   return {\n    //     kind: 'error',\n    //     key: field.name,\n    //     error: {\n    //       type: 'TYPE_ANNOTATION_MISMATCH',\n    //       expectedSchemaType: field.type,\n    //       resolvedValueType,\n    //     },\n    //   }\n    // }\n\n    const fieldGroupState = parent.fieldGroupState?.children?.[field.name]\n    const scopedCollapsedPaths = parent.collapsedPaths?.children?.[field.name]\n    const scopedCollapsedFieldsets = parent.collapsedFieldSets?.children?.[field.name]\n\n    const inputState = prepareObjectInputState({\n      schemaType: field.type,\n      currentUser: parent.currentUser,\n      parent: parent.value,\n      document: parent.document,\n      value: fieldValue,\n      changed: isChangedValue(fieldValue, fieldComparisonValue),\n      comparisonValue: fieldComparisonValue,\n      presence: parent.presence,\n      validation: parent.validation,\n      fieldGroupState,\n      path: fieldPath,\n      level: fieldLevel,\n      focusPath: parent.focusPath,\n      openPath: parent.openPath,\n      collapsedPaths: scopedCollapsedPaths,\n      collapsedFieldSets: scopedCollapsedFieldsets,\n      readOnly: parent.readOnly,\n    })\n\n    if (inputState === null) {\n      return null\n    }\n\n    const defaultCollapsedState = getCollapsedWithDefaults(field.type.options as FIXME, fieldLevel)\n    const collapsed = scopedCollapsedPaths\n      ? scopedCollapsedPaths.value\n      : defaultCollapsedState.collapsed\n\n    return {\n      kind: 'field',\n      key: `field-${field.name}`,\n      name: field.name,\n      index: index,\n      open: startsWith(fieldPath, parent.openPath),\n      field: inputState,\n      collapsed,\n      collapsible: defaultCollapsedState.collapsible,\n    }\n  } else if (isArraySchemaType(field.type)) {\n    const fieldValue = parentValue?.[field.name] as unknown[] | undefined\n    const fieldComparisonValue = isRecord(parentComparisonValue)\n      ? parentComparisonValue?.[field.name]\n      : undefined\n    if (isArrayOfObjectsSchemaType(field.type)) {\n      const hasValue = typeof fieldValue !== 'undefined'\n      if (hasValue && !isValidArrayOfObjectsValue(fieldValue)) {\n        const resolvedValueType = resolveTypeName(fieldValue)\n\n        return {\n          kind: 'error',\n          key: field.name,\n          fieldName: field.name,\n          error: {\n            type: 'INCOMPATIBLE_TYPE',\n            expectedSchemaType: field.type,\n            resolvedValueType,\n            value: fieldValue,\n          },\n        }\n      }\n\n      if (hasValue && !everyItemIsObject(fieldValue)) {\n        return {\n          kind: 'error',\n          key: field.name,\n          fieldName: field.name,\n          error: {\n            type: 'MIXED_ARRAY',\n            schemaType: field.type,\n          },\n        }\n      }\n\n      if (hasValue && !everyItemHasKey(fieldValue)) {\n        return {\n          kind: 'error',\n          key: field.name,\n          fieldName: field.name,\n          error: {\n            type: 'MISSING_KEYS',\n            value: fieldValue,\n            schemaType: field.type,\n          },\n        }\n      }\n\n      const duplicateKeyEntries = hasValue ? findDuplicateKeyEntries(fieldValue) : []\n      if (duplicateKeyEntries.length > 0) {\n        return {\n          kind: 'error',\n          key: field.name,\n          fieldName: field.name,\n          error: {\n            type: 'DUPLICATE_KEYS',\n            duplicates: duplicateKeyEntries,\n            schemaType: field.type,\n          },\n        }\n      }\n\n      const fieldGroupState = parent.fieldGroupState?.children?.[field.name]\n      const scopedCollapsedPaths = parent.collapsedPaths?.children?.[field.name]\n      const scopedCollapsedFieldSets = parent.collapsedFieldSets?.children?.[field.name]\n\n      const readOnly =\n        parent.readOnly ||\n        resolveConditionalProperty(field.type.readOnly, {\n          value: fieldValue,\n          parent: parent.value,\n          document: parent.document,\n          currentUser: parent.currentUser,\n        })\n\n      const fieldState = prepareArrayOfObjectsInputState({\n        schemaType: field.type,\n        parent: parent.value,\n        currentUser: parent.currentUser,\n        document: parent.document,\n        value: fieldValue,\n        changed: isChangedValue(fieldValue, fieldComparisonValue),\n        comparisonValue: fieldComparisonValue as FIXME,\n        fieldGroupState,\n        focusPath: parent.focusPath,\n        openPath: parent.openPath,\n        presence: parent.presence,\n        validation: parent.validation,\n        collapsedPaths: scopedCollapsedPaths,\n        collapsedFieldSets: scopedCollapsedFieldSets,\n        level: fieldLevel,\n        path: fieldPath,\n        readOnly,\n      })\n\n      if (fieldState === null) {\n        return null\n      }\n\n      return {\n        kind: 'field',\n        key: `field-${field.name}`,\n        name: field.name,\n        index: index,\n\n        open: startsWith(fieldPath, parent.openPath),\n\n        collapsible: false,\n        collapsed: false,\n        // note: this is what we actually end up passing down as to the next input component\n        field: fieldState,\n      }\n    } else {\n      // array of primitives\n      if (!isValidArrayOfPrimitivesValue(fieldValue)) {\n        const resolvedValueType = resolveTypeName(fieldValue)\n\n        return {\n          kind: 'error',\n          key: field.name,\n          fieldName: field.name,\n          error: {\n            type: 'INCOMPATIBLE_TYPE',\n            expectedSchemaType: field.type,\n            resolvedValueType,\n            value: fieldValue,\n          },\n        }\n      }\n\n      const fieldGroupState = parent.fieldGroupState?.children?.[field.name]\n      const scopedCollapsedPaths = parent.collapsedPaths?.children?.[field.name]\n      const scopedCollapsedFieldSets = parent.collapsedFieldSets?.children?.[field.name]\n\n      const readOnly =\n        parent.readOnly ||\n        resolveConditionalProperty(field.type.readOnly, {\n          value: fieldValue,\n          parent: parent.value,\n          document: parent.document,\n          currentUser: parent.currentUser,\n        })\n\n      const fieldState = prepareArrayOfPrimitivesInputState({\n        changed: isChangedValue(fieldValue, fieldComparisonValue),\n        comparisonValue: fieldComparisonValue as FIXME,\n        schemaType: field.type,\n        parent: parent.value,\n        currentUser: parent.currentUser,\n        document: parent.document,\n        value: fieldValue,\n        fieldGroupState,\n        focusPath: parent.focusPath,\n        openPath: parent.openPath,\n        presence: parent.presence,\n        validation: parent.validation,\n        collapsedPaths: scopedCollapsedPaths,\n        collapsedFieldSets: scopedCollapsedFieldSets,\n        level: fieldLevel,\n        path: fieldPath,\n        readOnly,\n      })\n\n      if (fieldState === null) {\n        return null\n      }\n\n      return {\n        kind: 'field',\n        key: `field-${field.name}`,\n        name: field.name,\n        index: index,\n\n        open: startsWith(fieldPath, parent.openPath),\n\n        // todo: consider support for collapsible arrays\n        collapsible: false,\n        collapsed: false,\n        // note: this is what we actually end up passing down as to the next input component\n        field: fieldState,\n      }\n    }\n  } else {\n    // primitive fields\n\n    const fieldValue = parentValue?.[field.name] as undefined | boolean | string | number\n    const fieldComparisonValue = isRecord(parentComparisonValue)\n      ? parentComparisonValue?.[field.name]\n      : undefined\n\n    const conditionalPropertyContext = {\n      value: fieldValue,\n      parent: parent.value,\n      document: parent.document,\n      currentUser: parent.currentUser,\n    }\n\n    // note: we *only* want to call the conditional props here, as it's handled by the prepare<Object|Array>InputProps otherwise\n    const hidden = resolveConditionalProperty(field.type.hidden, conditionalPropertyContext)\n\n    if (hidden) {\n      return null\n    }\n\n    const readOnly =\n      parent.readOnly || resolveConditionalProperty(field.type.readOnly, conditionalPropertyContext)\n\n    const fieldState = preparePrimitiveInputState({\n      ...parent,\n      comparisonValue: fieldComparisonValue,\n      value: fieldValue as boolean | string | number | undefined,\n      schemaType: field.type as PrimitiveSchemaType,\n      path: fieldPath,\n      readOnly,\n    })\n\n    return {\n      kind: 'field',\n      key: `field-${field.name}`,\n      name: field.name,\n      index: index,\n\n      open: startsWith(fieldPath, parent.openPath),\n\n      // todo: consider support for collapsible primitive fields\n      collapsible: false,\n      collapsed: false,\n      field: fieldState,\n    }\n  }\n}\n\ninterface RawState<SchemaType, T> {\n  schemaType: SchemaType\n  value?: T\n  comparisonValue?: T | null\n  changed?: boolean\n  document: FIXME_SanityDocument\n  currentUser: Omit<CurrentUser, 'role'> | null\n  parent?: unknown\n  hidden?: boolean\n  readOnly?: boolean\n  path: Path\n  openPath: Path\n  focusPath: Path\n  presence: FormFieldPresence[]\n  validation: ValidationMarker[]\n  fieldGroupState?: StateTree<string>\n  collapsedPaths?: StateTree<boolean>\n  collapsedFieldSets?: StateTree<boolean>\n  // nesting level\n  level: number\n}\n\nfunction prepareObjectInputState<T>(\n  props: RawState<ObjectSchemaType, T>,\n  enableHiddenCheck?: false\n): ObjectFormNode\nfunction prepareObjectInputState<T>(\n  props: RawState<ObjectSchemaType, T>,\n  enableHiddenCheck?: true\n): ObjectFormNode | null\nfunction prepareObjectInputState<T>(\n  props: RawState<ObjectSchemaType, T>,\n  enableHiddenCheck = true\n): ObjectFormNode | null {\n  if (props.level === MAX_FIELD_DEPTH) {\n    return null\n  }\n\n  const conditionalPropertyContext = {\n    value: props.value,\n    parent: props.parent,\n    document: props.document,\n    currentUser: props.currentUser,\n  }\n\n  const hidden =\n    enableHiddenCheck &&\n    resolveConditionalProperty(props.schemaType.hidden, conditionalPropertyContext)\n\n  if (hidden) {\n    return null\n  }\n\n  const readOnly =\n    props.readOnly ||\n    resolveConditionalProperty(props.schemaType.readOnly, conditionalPropertyContext)\n\n  const schemaTypeGroupConfig = props.schemaType.groups || []\n  const defaultGroupName = (schemaTypeGroupConfig.find((g) => g.default) || ALL_FIELDS_GROUP)?.name\n\n  const groups = [ALL_FIELDS_GROUP, ...schemaTypeGroupConfig].flatMap((group): FormFieldGroup[] => {\n    const groupHidden = resolveConditionalProperty(group.hidden, conditionalPropertyContext)\n    const selected = group.name === (props.fieldGroupState?.value || defaultGroupName)\n    return groupHidden\n      ? []\n      : [\n          {\n            icon: group?.icon,\n            name: group.name,\n            selected,\n            title: group.title,\n          },\n        ]\n  })\n\n  const selectedGroup = groups.find((group) => group.selected)!\n\n  const parentProps: RawState<ObjectSchemaType, unknown> = {\n    ...props,\n    hidden,\n    readOnly,\n  }\n\n  // note: this is needed because not all object types gets a Â´fieldsetsÂ´ property during schema parsing.\n  // ideally members should be normalized as part of the schema parsing and not here\n  const normalizedSchemaMembers: typeof props.schemaType.fieldsets = props.schemaType.fieldsets\n    ? props.schemaType.fieldsets\n    : props.schemaType.fields.map((field) => ({single: true, field}))\n\n  // create a members array for the object\n  const members = normalizedSchemaMembers.flatMap((fieldSet, index): ObjectMember[] => {\n    if (fieldSet.single) {\n      // \"single\" means not part of a fieldset\n      const fieldMember = prepareFieldMember({\n        field: fieldSet.field,\n        parent: parentProps,\n        index,\n      })\n      if (\n        fieldMember === null ||\n        !isFieldEnabledByGroupFilter(groups, fieldSet.field, selectedGroup)\n      ) {\n        return []\n      }\n      return [fieldMember]\n    }\n\n    // it's an actual fieldset\n    const fieldsetFieldNames = fieldSet.fields.map((f) => f.name)\n    const fieldsetHidden = resolveConditionalProperty(fieldSet.hidden, {\n      currentUser: props.currentUser,\n      document: props.document,\n      parent: props.value,\n      value: pick(props.value, fieldsetFieldNames),\n    })\n\n    if (fieldsetHidden) {\n      return []\n    }\n\n    const fieldsetReadOnly = resolveConditionalProperty(fieldSet.readOnly, {\n      currentUser: props.currentUser,\n      document: props.document,\n      parent: props.value,\n      value: pick(props.value, fieldsetFieldNames),\n    })\n\n    const fieldsetMembers = fieldSet.fields.flatMap((field): (FieldMember | FieldError)[] => {\n      const fieldState = prepareFieldMember({\n        field,\n        parent: parentProps,\n        index,\n\n        // the explicit type cast here is ok - we know that a fieldset can not have fieldsets\n      }) as FieldMember | FieldError | null\n      if (fieldState === null || !isFieldEnabledByGroupFilter(groups, field, selectedGroup)) {\n        return []\n      }\n\n      const fieldStateWithReadOnly = {\n        ...fieldState,\n        field: {\n          ...(fieldState as FieldMember)?.field,\n          readOnly: readOnly || fieldsetReadOnly,\n        },\n      }\n\n      return [fieldStateWithReadOnly]\n    })\n\n    // if all members of the fieldset is hidden, the fieldset should effectively also be hidden\n    if (fieldsetMembers.length === 0) {\n      return []\n    }\n    const defaultCollapsedState = getCollapsedWithDefaults(fieldSet.options, props.level)\n\n    const collapsed =\n      (props.collapsedFieldSets?.children || {})[fieldSet.name]?.value ??\n      defaultCollapsedState.collapsed\n\n    return [\n      {\n        kind: 'fieldSet',\n        key: `fieldset-${fieldSet.name}`,\n        fieldSet: {\n          path: pathFor(props.path.concat(fieldSet.name)),\n          name: fieldSet.name,\n          title: fieldSet.title,\n          description: fieldSet.description,\n          hidden: false,\n          level: props.level + 1,\n          members: fieldsetMembers,\n          collapsible: defaultCollapsedState?.collapsible,\n          collapsed,\n          columns: fieldSet?.options?.columns,\n        },\n      },\n    ]\n  })\n\n  const hasFieldGroups = schemaTypeGroupConfig.length > 0\n\n  const presence = props.presence.filter((item) => isEqual(item.path, props.path))\n\n  const validation = props.validation\n    .filter((item) => isEqual(item.path, props.path))\n    .map((v) => ({level: v.level, message: v.item.message, path: v.path}))\n\n  if (members.length === 0) {\n    return null\n  }\n\n  return {\n    value: props.value as Record<string, unknown> | undefined,\n    changed: isChangedValue(props.value, props.comparisonValue),\n    schemaType: props.schemaType,\n    readOnly: props.readOnly || readOnly,\n    path: props.path,\n    id: toString(props.path),\n    level: props.level,\n    focused: isEqual(props.path, props.focusPath),\n    focusPath: trimChildPath(props.path, props.focusPath),\n    presence,\n    validation,\n    members,\n    groups: hasFieldGroups ? groups : [],\n  }\n}\nfunction prepareArrayOfPrimitivesInputState<T extends (boolean | string | number)[]>(\n  props: RawState<ArraySchemaType, T>\n): ArrayOfPrimitivesFormNode | null {\n  if (props.level === MAX_FIELD_DEPTH) {\n    return null\n  }\n\n  const conditionalPropertyContext = {\n    comparisonValue: props.comparisonValue,\n    value: props.value,\n    parent: props.parent,\n    document: props.document,\n    currentUser: props.currentUser,\n  }\n\n  const hidden = resolveConditionalProperty(props.schemaType.hidden, conditionalPropertyContext)\n\n  if (hidden) {\n    return null\n  }\n\n  const readOnly =\n    props.readOnly ||\n    resolveConditionalProperty(props.schemaType.readOnly, conditionalPropertyContext)\n\n  // Todo: improve error handling at the parent level so that the value here is either undefined or an array\n  const items = Array.isArray(props.value) ? props.value : []\n\n  const presence = props.presence.filter((item) => isEqual(item.path, props.path))\n  const validation = props.validation\n    .filter((item) => isEqual(item.path, props.path))\n    .map((v) => ({level: v.level, message: v.item.message, path: v.path}))\n  const members = items.flatMap((item, index) =>\n    prepareArrayOfPrimitivesMember({arrayItem: item, parent: props, index})\n  )\n  return {\n    changed: members.some((m) => m.kind === 'item' && m.item.changed), // TODO: is this correct? There could be field and fieldsets here?\n    value: props.value as T,\n    readOnly,\n    schemaType: props.schemaType,\n    focused: isEqual(props.path, props.focusPath),\n    focusPath: trimChildPath(props.path, props.focusPath),\n    path: props.path,\n    id: toString(props.path),\n    level: props.level,\n    validation,\n    presence,\n    members,\n  }\n}\n\nfunction prepareArrayOfObjectsInputState<T extends {_key: string}[]>(\n  props: RawState<ArraySchemaType, T>\n): ArrayOfObjectsFormNode | null {\n  if (props.level === MAX_FIELD_DEPTH) {\n    return null\n  }\n\n  const conditionalPropertyContext = {\n    value: props.value,\n    parent: props.parent,\n    document: props.document,\n    currentUser: props.currentUser,\n  }\n  const hidden = resolveConditionalProperty(props.schemaType.hidden, conditionalPropertyContext)\n\n  if (hidden) {\n    return null\n  }\n\n  const readOnly =\n    props.readOnly ||\n    resolveConditionalProperty(props.schemaType.readOnly, conditionalPropertyContext)\n\n  // Todo: improve error handling at the parent level so that the value here is either undefined or an array\n  const items = Array.isArray(props.value) ? props.value : []\n\n  const presence = props.presence.filter((item) => isEqual(item.path, props.path))\n  const validation = props.validation\n    .filter((item) => isEqual(item.path, props.path))\n    .map((v) => ({level: v.level, message: v.item.message, path: v.path}))\n\n  const members = items.flatMap((item, index) =>\n    prepareArrayOfObjectsMember({\n      arrayItem: item,\n      parent: props,\n      index,\n    })\n  )\n\n  return {\n    changed: members.some((m) => m.kind === 'item' && m.item.changed),\n    value: props.value as T,\n    readOnly,\n    schemaType: props.schemaType,\n    focused: isEqual(props.path, props.focusPath),\n    focusPath: trimChildPath(props.path, props.focusPath),\n    path: props.path,\n    id: toString(props.path),\n    level: props.level,\n    validation,\n    presence,\n    members,\n  }\n}\n\n/*\n * Takes a field in context of a parent object and returns prepared props for it\n */\nfunction prepareArrayOfObjectsMember(props: {\n  arrayItem: {_key: string}\n  parent: RawState<ArraySchemaType, unknown>\n  index: number\n}): ArrayOfObjectsMember {\n  const {arrayItem, parent, index} = props\n\n  const itemType = getItemType(parent.schemaType, arrayItem) as ObjectSchemaType\n\n  const key = arrayItem._key\n\n  if (!itemType) {\n    const itemTypeName = resolveTypeName(arrayItem)\n    return {\n      kind: 'error',\n      key,\n      index,\n      error: {\n        type: 'INVALID_ITEM_TYPE',\n        resolvedValueType: itemTypeName,\n        value: arrayItem,\n        validTypes: parent.schemaType.of,\n      },\n    }\n  }\n\n  const itemPath = pathFor([...parent.path, {_key: key}])\n  const itemLevel = parent.level + 1\n\n  const conditionalPropertyContext = {\n    value: parent.value,\n    parent: props.parent,\n    document: parent.document,\n    currentUser: parent.currentUser,\n  }\n  const readOnly =\n    parent.readOnly ||\n    resolveConditionalProperty(parent.schemaType.readOnly, conditionalPropertyContext)\n\n  const collapsedItemPaths = parent.collapsedPaths?.children?.[key]\n  const comparisonValue =\n    (Array.isArray(parent.comparisonValue) &&\n      parent.comparisonValue.find((i) => i._key === arrayItem._key)) ||\n    undefined\n  const itemState = prepareObjectInputState(\n    {\n      schemaType: itemType,\n      level: itemLevel,\n      document: parent.document,\n      value: arrayItem,\n      comparisonValue,\n      changed: isChangedValue(arrayItem, comparisonValue),\n      path: itemPath,\n      focusPath: parent.focusPath,\n      openPath: parent.openPath,\n      currentUser: parent.currentUser,\n      collapsedPaths: collapsedItemPaths,\n      presence: parent.presence,\n      validation: parent.validation,\n      readOnly,\n    },\n    false\n  )\n\n  const defaultCollapsedState = getCollapsedWithDefaults(itemType.options, itemLevel)\n  const collapsed = collapsedItemPaths?.value ?? defaultCollapsedState.collapsed\n  return {\n    kind: 'item',\n    key,\n    index,\n    open: startsWith(itemPath, parent.openPath),\n    collapsed: collapsed,\n    collapsible: true,\n    item: itemState,\n  }\n}\n\n/*\n * Takes a field in context of a parent object and returns prepared props for it\n */\nfunction prepareArrayOfPrimitivesMember(props: {\n  arrayItem: unknown\n  parent: RawState<ArraySchemaType, unknown>\n  index: number\n}): ArrayOfPrimitivesMember {\n  const {arrayItem, parent, index} = props\n  const itemType = getPrimitiveItemType(parent.schemaType, arrayItem)\n\n  const itemPath = pathFor([...parent.path, index])\n  const itemValue = (parent.value as unknown[] | undefined)?.[index] as string | boolean | number\n  const itemComparisonValue = (parent.comparisonValue as unknown[] | undefined)?.[index] as\n    | string\n    | boolean\n    | number\n  const itemLevel = parent.level + 1\n\n  // Best effort attempt to make a stable key for each item in the array\n  // Since items may be reordered and change at any time, there's no way to reliably address each item uniquely\n  // This is a \"best effort\"-attempt at making sure we don't re-use internal state for item inputs\n  // when items are added to or removed from the array\n  const key = `${itemType?.name || 'invalid-type'}-${String(index)}`\n\n  if (!itemType) {\n    return {\n      kind: 'error',\n      key,\n      index,\n      error: {\n        type: 'INVALID_ITEM_TYPE',\n        validTypes: parent.schemaType.of,\n        resolvedValueType: resolveTypeName(itemType),\n        value: itemValue,\n      },\n    }\n  }\n\n  const readOnly =\n    parent.readOnly ||\n    resolveConditionalProperty(itemType.readOnly, {\n      value: itemValue,\n      parent: parent.value,\n      document: parent.document,\n      currentUser: parent.currentUser,\n    })\n\n  const item = preparePrimitiveInputState({\n    ...parent,\n    path: itemPath,\n    schemaType: itemType as PrimitiveSchemaType,\n    level: itemLevel,\n    value: itemValue,\n    comparisonValue: itemComparisonValue,\n    readOnly,\n  })\n\n  return {\n    kind: 'item',\n    key,\n    index,\n    open: isEqual(itemPath, parent.openPath),\n    item,\n  }\n}\n\nfunction preparePrimitiveInputState<SchemaType extends PrimitiveSchemaType>(\n  props: RawState<SchemaType, unknown>\n): PrimitiveFormNode {\n  const presence = props.presence.filter((item) => isEqual(item.path, props.path))\n\n  const validation = props.validation\n    .filter((item) => isEqual(item.path, props.path))\n    .map((v) => ({level: v.level, message: v.item.message, path: v.path}))\n  return {\n    schemaType: props.schemaType,\n    changed: isChangedValue(props.value, props.comparisonValue),\n    value: props.value,\n    level: props.level,\n    id: toString(props.path),\n    readOnly: props.readOnly,\n    focused: isEqual(props.path, props.focusPath),\n    path: props.path,\n    presence,\n    validation,\n  } as PrimitiveFormNode\n}\n\nexport type FIXME_SanityDocument = Record<string, unknown>\n\nexport function prepareFormState<T extends FIXME_SanityDocument>(\n  props: RawState<ObjectSchemaType, T>\n): ObjectFormNode | null {\n  return prepareObjectInputState(props)\n}\n","/**\n * Reconciles two versions of a state tree by iterating over the next and deep comparing against the next towards the previous.\n * Wherever identical values are found, the previous value is kept, preserving object identities for arrays and objects where possible\n * @param previous - the previous value\n * @param next - the next/current value\n */\nexport function immutableReconcile<T>(previous: unknown, next: T): T {\n  return _immutableReconcile(previous, next, new WeakSet())\n}\n\nfunction _immutableReconcile<T>(\n  previous: unknown,\n  next: T,\n  /**\n   * Keep track of visited nodes to prevent infinite recursion in case of circular structures\n   */\n  parents: WeakSet<any>\n): T {\n  if (previous === next) return previous as T\n\n  // eslint-disable-next-line no-eq-null\n  if (previous == null || next == null) return next\n\n  const prevType = typeof previous\n  const nextType = typeof next\n\n  // Different types\n  if (prevType !== nextType) return next\n\n  if (Array.isArray(next)) {\n    parents.add(next)\n\n    assertType<unknown[]>(previous)\n    assertType<unknown[]>(next)\n\n    let allEqual = previous.length === next.length\n    const result = []\n    for (let index = 0; index < next.length; index++) {\n      if (parents.has(next[index])) {\n        return next\n      }\n\n      const nextItem = _immutableReconcile(previous[index], next[index], parents)\n\n      if (nextItem !== previous[index]) {\n        allEqual = false\n      }\n      result[index] = nextItem\n    }\n    return (allEqual ? previous : result) as any\n  }\n\n  if (typeof next === 'object') {\n    parents.add(next)\n    assertType<Record<string, unknown>>(previous)\n    assertType<Record<string, unknown>>(next)\n\n    let allEqual = true\n    const result: Record<string, unknown> = {}\n    for (const key of Object.keys(next)) {\n      if (parents.has(next[key])) {\n        return next\n      }\n      const nextValue = _immutableReconcile(previous[key], next[key]!, parents)\n      if (nextValue !== previous[key]) {\n        allEqual = false\n      }\n      result[key] = nextValue\n    }\n    return (allEqual ? previous : result) as T\n  }\n  return next\n}\n\n// just some typescript trickery get type assertion\n// eslint-disable-next-line @typescript-eslint/no-empty-function, no-empty-function\nfunction assertType<T>(value: unknown): asserts value is T {}\n","/* eslint-disable camelcase */\n\nimport {ObjectSchemaType, Path, ValidationMarker} from '@sanity/types'\nimport {useLayoutEffect, useMemo, useRef} from 'react'\nimport {pathFor} from '@sanity/util/paths'\nimport {useCurrentUser} from '../../datastores'\nimport {FormFieldPresence} from '../../presence'\nimport {StateTree, ObjectFormNode} from './types'\nimport {prepareFormState, FIXME_SanityDocument} from './formState'\nimport {immutableReconcile} from './utils/immutableReconcile'\nimport {DocumentFormNode} from './types/nodes'\n\nexport type FormState<\n  T extends {[key in string]: unknown} = {[key in string]: unknown},\n  S extends ObjectSchemaType = ObjectSchemaType\n> = ObjectFormNode<T, S>\n\nexport function useFormState<\n  T extends {[key in string]: unknown} = {[key in string]: unknown},\n  S extends ObjectSchemaType = ObjectSchemaType\n>(\n  schemaType: ObjectSchemaType,\n  {\n    comparisonValue,\n    value,\n    fieldGroupState,\n    collapsedFieldSets,\n    collapsedPaths,\n    focusPath,\n    openPath,\n    presence,\n    validation,\n  }: {\n    fieldGroupState?: StateTree<string> | undefined\n    collapsedFieldSets?: StateTree<boolean> | undefined\n    collapsedPaths?: StateTree<boolean> | undefined\n    value: Partial<FIXME_SanityDocument>\n    comparisonValue: Partial<FIXME_SanityDocument> | null\n    openPath: Path\n    focusPath: Path\n    presence: FormFieldPresence[]\n    validation: ValidationMarker[]\n  }\n): FormState<T, S> | null {\n  // note: feel free to move these state pieces out of this hook\n  const currentUser = useCurrentUser()\n\n  const prev = useRef<DocumentFormNode | null>(null)\n\n  useLayoutEffect(() => {\n    prev.current = null\n  }, [schemaType])\n\n  return useMemo(() => {\n    // console.time('derive form state')\n    const next = prepareFormState({\n      schemaType,\n      document: value,\n      fieldGroupState,\n      collapsedFieldSets,\n      collapsedPaths,\n      value,\n      comparisonValue,\n      focusPath,\n      openPath,\n      path: pathFor([]),\n      level: 0,\n      currentUser,\n      presence,\n      validation,\n    }) as ObjectFormNode<T, S> // TODO: remove type cast\n\n    const reconciled = immutableReconcile(prev.current, next)\n    prev.current = reconciled\n    // console.timeEnd('derive form state')\n    return reconciled\n  }, [\n    schemaType,\n    value,\n    fieldGroupState,\n    collapsedFieldSets,\n    collapsedPaths,\n    comparisonValue,\n    focusPath,\n    openPath,\n    currentUser,\n    presence,\n    validation,\n  ])\n}\n","import {Path, SanityDocument} from '@sanity/types'\nimport {isEqual} from 'lodash'\nimport {useEffect, useMemo, useState} from 'react'\nimport {Subject} from 'rxjs'\nimport {distinctUntilChanged, map} from 'rxjs/operators'\nimport {getValueAtPath} from '../field/paths'\nimport {useUnique} from '../util'\nimport {useFormBuilder} from './useFormBuilder'\n\n/**\n * @alpha\n */\nexport function useFormValue(path: Path): unknown {\n  const uniquePath = useUnique(path)\n  const {getDocument, patchChannel} = useFormBuilder().__internal\n  const documentValueSubject = useMemo(() => new Subject<SanityDocument | undefined>(), [])\n  const documentValue$ = useMemo(() => documentValueSubject.asObservable(), [documentValueSubject])\n  const [value, setValue] = useState(() => getValueAtPath(getDocument(), uniquePath))\n\n  // Subscribe to all document changes\n  useEffect(\n    () => patchChannel.subscribe(() => documentValueSubject.next(getDocument())),\n    [documentValueSubject, getDocument, patchChannel]\n  )\n\n  // Subscribe to value at `path`\n  useEffect(() => {\n    const value$ = documentValue$.pipe(\n      map((documentValue) =>\n        uniquePath.length === 0 ? documentValue : getValueAtPath(documentValue, uniquePath)\n      ),\n      distinctUntilChanged((x, y) => isEqual(x, y))\n    )\n\n    const sub = value$.subscribe(setValue)\n\n    return () => sub.unsubscribe()\n  }, [documentValue$, uniquePath])\n\n  return value\n}\n","import {arrayToJSONMatchPath} from '@sanity/mutator'\nimport {flatten} from 'lodash'\nimport type {FormPatchOrigin, FormPatch} from '../patch/types'\nimport {decodePath} from './path'\n\n/**\n * @internal\n */\nexport type MutationPatch = Record<string, any> // @todo: complete this typing\n\n/**\n * @internal\n */\nexport function toMutationPatches(patches: FormPatch[]): MutationPatch[] {\n  return patches.map(toMutationPatch)\n}\n\n/**\n * @internal\n */\nexport function fromMutationPatches(\n  origin: FormPatchOrigin,\n  patches: MutationPatch[]\n): FormPatch[] {\n  return flatten(patches.map((patch) => toFormBuilderPatches(origin, patch)))\n}\n\nconst notIn = (values: unknown[]) => (value: unknown) => !values.includes(value)\n\nfunction toFormBuilderPatches(origin: FormPatchOrigin, patch: MutationPatch): FormPatch[] {\n  return flatten(\n    Object.keys(patch)\n      .filter(notIn(['id', 'ifRevisionID', 'query']))\n      .map((type) => {\n        if (type === 'unset') {\n          return patch.unset.map((path: any) => {\n            return {\n              type: 'unset',\n              path: decodePath(path),\n              origin,\n            }\n          })\n        }\n        if (type === 'insert') {\n          const position = 'before' in patch.insert ? 'before' : 'after'\n          return {\n            type: 'insert',\n            position: position,\n            path: decodePath(patch.insert[position]),\n            items: patch.insert.items,\n            origin,\n          }\n        }\n        return Object.keys(patch[type])\n          .map((gradientPath) => {\n            if (type === 'set') {\n              return {\n                type: 'set',\n                path: decodePath(gradientPath),\n                value: patch[type][gradientPath],\n                origin,\n              }\n            }\n            if (type === 'inc' || type === 'dec') {\n              return {\n                type: type,\n                path: decodePath(gradientPath),\n                value: patch[type][gradientPath],\n                origin,\n              }\n            }\n            if (type === 'setIfMissing') {\n              return {\n                type: 'setIfMissing',\n                path: decodePath(gradientPath),\n                value: patch[type][gradientPath],\n                origin,\n              }\n            }\n            if (type === 'diffMatchPatch') {\n              return {\n                type: 'diffMatchPatch',\n                path: decodePath(gradientPath),\n                value: patch[type][gradientPath],\n                origin,\n              }\n            }\n            // eslint-disable-next-line no-console\n            console.warn(new Error(`Unsupported patch type: ${type}`))\n            return null\n          })\n          .filter(Boolean)\n      })\n  )\n}\n\nfunction toMutationPatch(patch: FormPatch): MutationPatch {\n  const matchPath = arrayToJSONMatchPath(patch.path || [])\n  if (patch.type === 'insert') {\n    const {position, items} = patch\n    return {\n      insert: {\n        [position]: matchPath,\n        items: items,\n      },\n    }\n  }\n\n  if (patch.type === 'unset') {\n    return {\n      unset: [matchPath],\n    }\n  }\n\n  if (!patch.type) {\n    throw new Error(`Missing patch type in patch ${JSON.stringify(patch)}`)\n  }\n  if (matchPath) {\n    return {\n      [patch.type]: {\n        [matchPath]: patch.value,\n      },\n    }\n  }\n  return {\n    [patch.type]: patch.value,\n  }\n}\n","import {isIndexSegment, isKeySegment, isIndexTuple, Path, KeyedSegment} from '@sanity/types'\nimport {UserColorManager, UserColor} from '../../../user-color'\nimport {stringToPath, pathToString} from '../../paths/helpers'\nimport {\n  Annotation,\n  Diff,\n  ItemDiff,\n  ArrayDiff,\n  ObjectDiff,\n  StringDiff,\n  StringDiffSegment,\n} from '../../types'\n\nexport function getAnnotationColor(\n  colorManager: UserColorManager,\n  annotation?: Annotation | null\n): UserColor {\n  return colorManager.get(annotation?.author || null)\n}\n\nexport function getAnnotationAtPath(diff: Diff, diffPath: string | Path): Annotation | undefined {\n  const path: Path = Array.isArray(diffPath) ? diffPath : stringToPath(diffPath)\n\n  return getAnnotationAt(diff, path)\n}\n\nexport function getDiffAtPath(diff: Diff, diffPath: string | Path): Diff | undefined {\n  const path: Path = Array.isArray(diffPath) ? diffPath : stringToPath(diffPath)\n  return getDiffAt(diff, path)\n}\n\nfunction getAnnotationAt(diff: Diff, path: Path): Annotation | undefined {\n  const diffAt = getDiffAt(diff, path)\n  if (!diffAt) {\n    return undefined\n  }\n\n  if (diffAt.action === 'unchanged') {\n    return undefined\n  }\n\n  return diffAt.annotation || undefined\n}\n\n// eslint-disable-next-line complexity\nfunction getDiffAt(diff: Diff, path: Path, parentPath: Path = []): Diff | undefined {\n  if (path.length === 0) {\n    return diff\n  }\n\n  const segment = path[0]\n  const tail = path.slice(1)\n\n  if (isIndexTuple(segment)) {\n    throw new Error('Index tuples are not supported in diff paths')\n  }\n\n  if (isIndexSegment(segment) || isKeySegment(segment)) {\n    const location = isIndexSegment(segment) ? `at index ${segment}` : `with key ${segment._key}`\n    if (diff.type !== 'array') {\n      warn(`Failed to get item ${location} at path ${pathToString(parentPath)} (not an array)`)\n      return undefined\n    }\n\n    const itemDiff = diff.items.find(\n      isIndexSegment(segment)\n        ? (item) => item.toIndex === segment\n        : (item) => itemMatchesKey(item, segment)\n    )\n\n    if (!itemDiff) {\n      warn(`Failed to get item ${location} at path ${pathToString(parentPath)} (item missing)`)\n      return undefined\n    }\n\n    return getDiffAt(itemDiff.diff, tail, parentPath.concat(segment))\n  }\n\n  if (diff.type !== 'object') {\n    warn(`Failed to get property ${segment} at path ${pathToString(parentPath)} (not an object)`)\n    return undefined\n  }\n\n  const fieldDiff = diff.fields[segment]\n  if (typeof fieldDiff === 'undefined') {\n    warn(\n      `Failed to get property ${segment} at path ${pathToString(parentPath)} (field did not exist)`\n    )\n    return undefined\n  }\n\n  return getDiffAt(fieldDiff, tail, parentPath.concat(segment))\n}\n\n/* eslint-disable no-console, @typescript-eslint/no-unused-vars */\nfunction warn(msg: string) {\n  //console.warn(msg)\n}\n/* eslint-enable no-console, @typescript-eslint/no-unused-vars */\n\nfunction itemMatchesKey(item: ItemDiff, key: KeyedSegment) {\n  const itemDiff = item.diff\n  return itemDiff.type !== 'object' || !itemDiff.toValue ? false : itemDiff.toValue._key === key\n}\n\nexport type DiffVisitor = (diff: Diff | StringDiffSegment, path: Path) => boolean\n\n/**\n * Visit all diffs in tree, until visitor returns false\n *\n * @param diff Diff to visit\n * @param visitor Visitor function, return false to stop from going deeper\n */\nexport function visitDiff(\n  diff: Diff | StringDiffSegment,\n  visitor: DiffVisitor,\n  path: Path = []\n): void {\n  if (!visitor(diff, path)) {\n    return\n  }\n\n  if (diff.type === 'array') {\n    visitArrayDiff(diff, visitor, path)\n    return\n  }\n\n  if (diff.type === 'object') {\n    visitObjectDiff(diff, visitor, path)\n    return\n  }\n\n  if (diff.type === 'string') {\n    visitStringDiff(diff, visitor, path)\n  }\n}\n\nfunction visitArrayDiff(diff: ArrayDiff, visitor: DiffVisitor, path: Path) {\n  if (diff.action === 'unchanged') {\n    return\n  }\n\n  diff.items.forEach((itemDiff) => {\n    const _key = itemDiff.diff.type === 'object' && (itemDiff.diff.toValue?._key as string)\n    const segment = _key ? {_key} : getItemDiffIndex(itemDiff)\n    visitDiff(itemDiff.diff, visitor, path.concat(segment))\n  })\n}\n\nfunction visitObjectDiff(diff: ObjectDiff, visitor: DiffVisitor, path: Path) {\n  if (diff.action === 'unchanged') {\n    return\n  }\n\n  Object.keys(diff.fields).forEach((fieldName) => {\n    const fieldDiff = diff.fields[fieldName]\n    visitDiff(fieldDiff, visitor, path.concat(fieldName))\n  })\n}\n\nfunction visitStringDiff(diff: StringDiff, visitor: DiffVisitor, path: Path) {\n  if (diff.action === 'unchanged') {\n    return\n  }\n\n  diff.segments.forEach((segment) => {\n    visitDiff(segment, visitor, path)\n  })\n}\n\nfunction getItemDiffIndex(itemDiff: ItemDiff): number {\n  return typeof itemDiff.toIndex === 'undefined' ? itemDiff.fromIndex || 0 : itemDiff.toIndex\n}\n","import {Path} from '@sanity/types'\nimport {useMemo} from 'react'\nimport {UserColor, useUserColorManager} from '../../../user-color'\nimport {Annotation, Diff} from '../../types'\nimport {getAnnotationColor, getAnnotationAtPath} from './helpers'\n\nexport function useAnnotationColor(annotation?: Annotation | null): UserColor {\n  const userColorManager = useUserColorManager()\n\n  return getAnnotationColor(userColorManager, annotation)\n}\n\nexport function useDiffAnnotationColor(diff: Diff, path: string | Path = []): UserColor {\n  const userColorManager = useUserColorManager()\n  const annotation = useMemo(() => getAnnotationAtPath(diff, path), [diff, path])\n\n  return useMemo(\n    () => getAnnotationColor(userColorManager, annotation),\n    [annotation, userColorManager]\n  )\n}\n","import {ConditionalProperty, ConditionalPropertyCallbackContext, CurrentUser} from '@sanity/types'\nimport {omit} from 'lodash'\nimport {useMemo, useRef} from 'react'\nimport {isRecord} from '../util/isRecord'\n\nexport function isThenable(value: unknown): value is Promise<unknown> {\n  return isRecord(value) && typeof value?.then === 'function'\n}\n\nexport function omitDeprecatedRole(user: CurrentUser): Omit<CurrentUser, 'role'> {\n  return omit(user, 'role')\n}\n\nexport function useCheckCondition(\n  checkProperty: ConditionalProperty,\n  checkPropertyName: string,\n  context: ConditionalPropertyCallbackContext\n): boolean {\n  const {currentUser, document, parent, value} = context\n\n  const didWarn = useRef(false)\n\n  return useMemo(() => {\n    let isTrueIsh = false\n\n    if (typeof checkProperty === 'boolean' || checkProperty === undefined) {\n      return checkProperty || false\n    }\n\n    try {\n      isTrueIsh = checkProperty({\n        document,\n        parent,\n        value,\n        currentUser,\n      })\n    } catch (err) {\n      console.error(\n        `An error occurred while running the callback from \\`${checkPropertyName}\\`: ${err.message}`\n      )\n      return false\n    }\n\n    if (isThenable(isTrueIsh) && !didWarn.current) {\n      console.warn(\n        `The \\`${checkPropertyName}\\` option is either a promise or a promise returning function. Async callbacks for \\`${checkPropertyName}\\` option is not currently supported.`\n      )\n      return false\n    }\n\n    if (typeof isTrueIsh === 'undefined') {\n      console.warn(\n        `The \\`${checkPropertyName}\\` option is or returned \\`undefined\\`. \\`${checkPropertyName}\\` should return a boolean.`\n      )\n    }\n\n    return isTrueIsh\n  }, [checkProperty, document, parent, value, currentUser, checkPropertyName])\n}\n","import {SanityDocument, ConditionalProperty} from '@sanity/types'\nimport {useCurrentUser} from '../datastores'\nimport {useUnique} from '../util/useUnique'\nimport {useCheckCondition} from './utils'\n\n/**\n * @internal Not yet a stable API\n */\nexport interface ConditionalPropertyProps {\n  parent?: unknown\n  value: unknown\n  document?: SanityDocument\n  checkProperty: ConditionalProperty\n  checkPropertyKey: string\n}\n\n/**\n * Resolve a callback function to a boolean using the passed arguments\n *\n * @internal Not yet a stable API\n */\nconst useConditionalProperty = (props: ConditionalPropertyProps): boolean => {\n  const {checkProperty = false, checkPropertyKey, document, parent, value: valueProp} = props\n  const value = useUnique(valueProp)\n  const currentUser = useCurrentUser()\n\n  const isPropertyTruthy = useCheckCondition(checkProperty, checkPropertyKey, {\n    currentUser,\n    document,\n    parent,\n    value,\n  })\n\n  return isPropertyTruthy\n}\n\nexport {useConditionalProperty as unstable_useConditionalProperty}\n","import {Path} from '@sanity/types'\nimport {createContext} from 'react'\n\nexport const DiffContext = createContext<{path: Path}>({path: []})\n","import {SchemaType, ObjectSchemaType} from '@sanity/types'\n\nexport interface FieldValueError {\n  message: string\n  value: unknown\n}\n\nexport function getValueError(value: unknown, schemaType: SchemaType): FieldValueError | undefined {\n  const {jsonType} = schemaType\n  const valueType = Array.isArray(value) ? 'array' : typeof value\n\n  if (value === null || valueType === 'undefined') {\n    return undefined\n  }\n\n  if (valueType !== jsonType) {\n    return {message: `Value is ${valueType}, expected ${jsonType}`, value}\n  }\n\n  if (isObjectType(schemaType) && isObjectValue(value)) {\n    for (const field of schemaType.fields) {\n      const fieldError = getValueError(value[field.name], field.type as SchemaType)\n      if (fieldError) {\n        return fieldError\n      }\n    }\n  }\n\n  return undefined\n}\n\nfunction isObjectType(schemaType: SchemaType): schemaType is ObjectSchemaType {\n  return schemaType.jsonType === 'object'\n}\n\nfunction isObjectValue(value: unknown): value is Record<string, unknown> {\n  return value !== null && !Array.isArray(value) && typeof value === 'object'\n}\n","import {ArraySchemaType, isTypedObject, SchemaType} from '@sanity/types'\nimport {Diff} from '../types'\n\nexport function resolveTypeName(value: unknown): string {\n  return isTypedObject(value) ? value._type : resolveJSType(value)\n}\n\nexport function getArrayDiffItemType(\n  diff: Diff,\n  schemaType: ArraySchemaType\n): {fromType?: SchemaType; toType?: SchemaType} {\n  if (diff.action === 'added') {\n    return {\n      toType: resolveArrayMemberType(schemaType, diff.toValue),\n    }\n  }\n\n  if (diff.action === 'changed') {\n    return {\n      fromType: resolveArrayMemberType(schemaType, diff.fromValue),\n      toType: resolveArrayMemberType(schemaType, diff.toValue),\n    }\n  }\n\n  if (diff.action === 'removed') {\n    return {\n      fromType: resolveArrayMemberType(schemaType, diff.fromValue),\n    }\n  }\n\n  // unchanged\n  return {\n    toType: resolveArrayMemberType(schemaType, diff.toValue),\n  }\n}\n\nfunction resolveArrayMemberType(\n  schemaType: ArraySchemaType,\n  value: unknown\n): SchemaType | undefined {\n  const typeName = resolveTypeName(value)\n  const declared = schemaType.of.find((candidate) => candidate.name === typeName)\n  if (declared) {\n    return declared as any\n  }\n\n  return (schemaType.of.length === 1 ? schemaType.of[0] : undefined) as any\n}\n\nfunction resolveJSType(val: unknown) {\n  if (Array.isArray(val)) {\n    return 'array'\n  }\n\n  if (val === null) {\n    return 'null'\n  }\n\n  return typeof val\n}\n","export const ANNOTATION_SYMBOLS = [\n  // [startTag, endTag]\n  ['\\uF050', '\\uF051'],\n  ['\\uF052', '\\uF053'],\n  ['\\uF054', '\\uF055'],\n  ['\\uF056', '\\uF057'],\n  ['\\uF058', '\\uF059'],\n  ['\\uF05A', '\\uF05B'],\n  ['\\uF05C', '\\uF05D'],\n  ['\\uF05F', '\\uF060'],\n  ['\\uF061', '\\uF062'],\n  ['\\uF063', '\\uF064'],\n  ['\\uF065', '\\uF066'],\n  ['\\uF067', '\\uF068'],\n  ['\\uF069', '\\uF06A'],\n  ['\\uF06B', '\\uF06C'],\n  ['\\uF06E', '\\uF06F'],\n  ['\\uF070', '\\uF071'],\n  ['\\uF072', '\\uF073'],\n  ['\\uF074', '\\uF075'],\n  ['\\uF076', '\\uF077'],\n  ['\\uF078', '\\uF079'],\n  ['\\uF07A', '\\uF07B'],\n  ['\\uF07C', '\\uF07D'],\n  ['\\uF07E', '\\uF07F'],\n  ['\\uF080', '\\uF081'],\n  ['\\uF082', '\\uF083'],\n  ['\\uF084', '\\uF085'],\n  ['\\uF086', '\\uF087'],\n  ['\\uF088', '\\uF089'],\n  ['\\uF08A', '\\uF08B'],\n  ['\\uF08C', '\\uF08D'],\n  ['\\uF08E', '\\uF08F'],\n]\n\nexport const CHILD_SYMBOL = '\\uF0D0'\n\nexport const DECORATOR_SYMBOLS = [\n  // [startTag, endTag]\n  ['\\uF000', '\\uF001'],\n  ['\\uF002', '\\uF003'],\n  ['\\uF004', '\\uF005'],\n  ['\\uF006', '\\uF007'],\n  ['\\uF008', '\\uF009'],\n  ['\\uF00A', '\\uF00B'],\n  ['\\uF00C', '\\uF00D'],\n  ['\\uF00F', '\\uF010'],\n  ['\\uF011', '\\uF012'],\n  ['\\uF013', '\\uF014'],\n  ['\\uF015', '\\uF016'],\n  ['\\uF017', '\\uF018'],\n  ['\\uF019', '\\uF01A'],\n  ['\\uF01B', '\\uF01C'],\n  ['\\uF01E', '\\uF01F'],\n  ['\\uF020', '\\uF021'],\n]\n\nexport const EMPTY_BLOCK_SYMBOL = '\\u21B2'\n\nexport const INLINE_SYMBOLS = [\n  '\\uF090',\n  '\\uF091',\n  '\\uF092',\n  '\\uF093',\n  '\\uF094',\n  '\\uF095',\n  '\\uF096',\n  '\\uF097',\n  '\\uF098',\n  '\\uF099',\n  '\\uF09A',\n  '\\uF09B',\n  '\\uF09C',\n  '\\uF09D',\n  '\\uF09E',\n  '\\uF09F',\n  '\\uF0A0',\n  '\\uF0A1',\n  '\\uF0A2',\n  '\\uF0A3',\n  '\\uF0A4',\n  '\\uF0A5',\n  '\\uF0A6',\n  '\\uF0A7',\n  '\\uF0A8',\n  '\\uF0A9',\n  '\\uF0AA',\n  '\\uF0AB',\n  '\\uF0AC',\n  '\\uF0AD',\n  '\\uF0AE',\n  '\\uF0AF',\n  '\\uF0B0',\n  '\\uF0B1',\n  '\\uF0B2',\n  '\\uF0B3',\n  '\\uF0B4',\n  '\\uF0B5',\n  '\\uF0B6',\n  '\\uF0B7',\n  '\\uF0B8',\n  '\\uF0B9',\n  '\\uF0BA',\n  '\\uF0BB',\n  '\\uF0BC',\n  '\\uF0BD',\n  '\\uF0BE',\n  '\\uF0BF',\n]\n\nexport const TRAILING_SPACE_SYMBOL = '\\u205F'\n\nexport const SEGMENT_START_SYMBOL = '\\u2060'\n","import {flatten, isEqual, orderBy} from 'lodash'\nimport {ArraySchemaType, Block, ObjectField, ObjectSchemaType, SchemaType} from '@sanity/types'\nimport {\n  diff_match_patch as DiffMatchPatch,\n  DIFF_DELETE,\n  DIFF_EQUAL,\n  DIFF_INSERT,\n} from 'diff-match-patch'\nimport {\n  ArrayDiff,\n  DiffComponent,\n  DiffComponentOptions,\n  ObjectDiff,\n  StringDiffSegment,\n} from '../../../types'\nimport * as TextSymbols from './symbols'\n\nimport {\n  InlineSymbolMap,\n  MarkSymbolMap,\n  PortableTextBlock,\n  PortableTextDiff,\n  PortableTextChild,\n  SpanTypeSchema,\n} from './types'\n\nconst dmp = new DiffMatchPatch()\n\nexport const UNKNOWN_TYPE_NAME = '_UNKOWN_TYPE_'\n\nexport function hasPTMemberType(schemaType: ArraySchemaType): boolean {\n  return schemaType.of.some(isPTSchemaType)\n}\n\nconst startMarkSymbols = TextSymbols.DECORATOR_SYMBOLS.map((set) => set[0]).concat(\n  TextSymbols.ANNOTATION_SYMBOLS.map((set) => set[0])\n)\nconst endMarkSymbols = TextSymbols.DECORATOR_SYMBOLS.map((set) => set[1]).concat(\n  TextSymbols.ANNOTATION_SYMBOLS.map((set) => set[1])\n)\nconst allSymbols = startMarkSymbols\n  .concat(endMarkSymbols)\n  .concat(TextSymbols.INLINE_SYMBOLS)\n  .concat(TextSymbols.CHILD_SYMBOL)\n  .concat(TextSymbols.SEGMENT_START_SYMBOL)\nconst symbolRegex = new RegExp(`${allSymbols.join('|')}`, 'g')\nconst segmentRegex = new RegExp(`${allSymbols.join('|')}|\\n`, 'g')\n\ninterface BlockSchemaType extends ObjectSchemaType {\n  diffComponent: DiffComponent<ObjectDiff<Block>> | DiffComponentOptions<ObjectDiff<Block>>\n}\n\nexport function isPTSchemaType(schemaType: SchemaType): schemaType is BlockSchemaType {\n  return schemaType.jsonType === 'object' && schemaType.name === 'block'\n}\n\nexport function isHeader(node: PortableTextBlock): boolean {\n  return !!node.style && ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'].includes(node.style)\n}\n\nexport function findChildDiff(diff: ObjectDiff, child: PortableTextChild): ObjectDiff {\n  const childrenDiff = diff.fields.children as ArrayDiff\n  return childrenDiff.items\n    .filter(\n      (item: any) =>\n        item.diff.isChanged && (item.diff.toValue === child || item.diff.fromValue === child)\n    )\n    .map((item: any) => item.diff)\n    .map((childDiff: any) => childDiff as ObjectDiff)[0]\n}\n\nexport function getChildSchemaType(\n  fields: ObjectField<SchemaType>[],\n  child: PortableTextChild\n): ObjectSchemaType | undefined {\n  const childrenField = fields.find((f) => f.name === 'children')\n  const cSchemaType =\n    (childrenField &&\n      childrenField.type &&\n      childrenField.type.jsonType === 'array' &&\n      (childrenField.type.of.find((type) => type.name === child._type) as ObjectSchemaType)) ||\n    undefined\n  return cSchemaType\n}\n\nexport function getDecorators(spanSchemaType: SpanTypeSchema): {title: string; value: string}[] {\n  if (spanSchemaType.decorators) {\n    return orderBy(spanSchemaType.decorators, ['value'], ['asc'])\n  }\n  return []\n}\n\nexport function getAnnotations(spanSchemaType: SpanTypeSchema): ObjectSchemaType[] {\n  if (spanSchemaType.annotations) {\n    return orderBy(spanSchemaType.annotations, ['name'], ['asc'])\n  }\n  return []\n}\n\nexport function isDecorator(name: string, schemaType: SpanTypeSchema): boolean {\n  return getDecorators(schemaType).some((dec) => dec.value === name)\n}\n\nexport function blockToSymbolizedText(\n  diff: ObjectDiff,\n  block: PortableTextBlock | undefined,\n  decoratorMap: MarkSymbolMap,\n  annotationMap: MarkSymbolMap,\n  inlineMap: InlineSymbolMap\n): string {\n  if (!block) {\n    return ''\n  }\n  return block.children\n    .map((child) => {\n      let returned = child.text?.replace(symbolRegex, '') || '' // Make sure symbols aren't in the text already\n      if (child._type === 'span') {\n        // Attatch stringdiff segments\n        const spanDiff = findSpanDiffFromChild(diff, child)\n        const textDiff = spanDiff?.fields.text\n        if (\n          textDiff &&\n          textDiff.toValue === child.text &&\n          textDiff.type === 'string' &&\n          textDiff.action !== 'unchanged'\n        ) {\n          returned = textDiff.segments\n            .filter((seg: any) => seg.action !== 'removed')\n            .map((seg: any) => seg.text.replace(symbolRegex, ''))\n            .join(TextSymbols.SEGMENT_START_SYMBOL)\n        }\n        if (child.marks) {\n          child.marks.forEach((mark) => {\n            const _isDecorator = !!decoratorMap[mark]\n            if (_isDecorator) {\n              returned = `${decoratorMap[mark][0]}${returned}${decoratorMap[mark][1]}`\n            } else if (annotationMap[mark]) {\n              returned = `${annotationMap[mark][0]}${returned}${annotationMap[mark][1]}`\n            }\n          })\n        }\n      } else {\n        returned = inlineMap[child._key]\n      }\n      return `${TextSymbols.CHILD_SYMBOL}${returned}`\n    })\n    .join('')\n}\n\nexport function createPortableTextDiff(\n  diff: ObjectDiff,\n  schemaType: ObjectSchemaType\n): PortableTextDiff {\n  const displayValue =\n    diff.action === 'removed'\n      ? (diff.fromValue as PortableTextBlock)\n      : (diff.toValue as PortableTextBlock)\n  const _diff: PortableTextDiff = {\n    ...diff,\n    origin: diff,\n    displayValue,\n  }\n\n  if (displayValue) {\n    const annotationMap: MarkSymbolMap = {}\n    const decoratorMap: MarkSymbolMap = {}\n    const inlineMap: InlineSymbolMap = {}\n    const spanSchemaType = getChildSchemaType(schemaType.fields, {_key: 'bogus', _type: 'span'})\n    if (spanSchemaType) {\n      getDecorators(spanSchemaType).forEach((dec, index) => {\n        decoratorMap[dec.value] = TextSymbols.DECORATOR_SYMBOLS[index]\n      })\n    }\n    const allMarkDefs = getAllMarkDefs(_diff.origin)\n    allMarkDefs.forEach((markDef, index) => {\n      annotationMap[markDef._key] = TextSymbols.ANNOTATION_SYMBOLS[index]\n    })\n    const inlines = getInlineObjects(_diff.origin)\n    inlines.forEach((inline, index) => {\n      inlineMap[inline._key] = TextSymbols.INLINE_SYMBOLS[index]\n    })\n    const fromText = blockToSymbolizedText(\n      _diff.origin,\n      _diff.fromValue as PortableTextBlock,\n      decoratorMap,\n      annotationMap,\n      inlineMap\n    )\n    const toText = blockToSymbolizedText(\n      _diff.origin,\n      _diff.toValue as PortableTextBlock,\n      decoratorMap,\n      annotationMap,\n      inlineMap\n    )\n    const toPseudoValue = {\n      ...displayValue,\n      children: [\n        {\n          _type: 'span',\n          _key: 'pseudoSpanKey',\n          text: toText,\n          marks: [],\n        },\n      ],\n    }\n    const fromPseudoValue = {\n      displayValue,\n      children: [\n        {\n          _type: 'span',\n          _key: 'pseudoSpanKey',\n          text: fromText,\n          marks: [],\n        },\n      ],\n    }\n    const pseudoDiff = {\n      origin: diff,\n      action: 'changed',\n      type: 'object',\n      displayValue: toPseudoValue,\n      fromValue: fromPseudoValue,\n      toValue: toPseudoValue,\n      isChanged: true,\n      fields: {\n        children: {\n          action: 'changed',\n          type: 'array',\n          isChanged: true,\n          items: [\n            {\n              diff: {\n                action: 'changed',\n                type: 'object',\n                isChanged: true,\n                fields: {\n                  text: {\n                    type: 'string',\n                    action: 'changed',\n                    isChanged: true,\n                    fromValue: fromText,\n                    toValue: toText,\n                    segments: buildSegments(fromText, toText).map((seg) => ({\n                      ...seg,\n                      ...(_diff.action !== 'unchanged' && _diff.annotation\n                        ? {annotation: _diff.annotation} // Fallback if we can't find a spesific original diff\n                        : {}),\n                    })),\n                  },\n                },\n                fromValue: fromPseudoValue.children[0],\n                toValue: toPseudoValue.children[0],\n              },\n              annotation: null,\n              fromIndex: 0,\n              toIndex: 0,\n              hasMoved: false,\n            },\n          ],\n          fromValue: fromPseudoValue.children,\n          toValue: toPseudoValue.children,\n        },\n      },\n    }\n    return pseudoDiff as PortableTextDiff\n  }\n  throw new Error('Can not display this diff')\n}\n\nfunction buildSegments(fromInput: string, toInput: string): StringDiffSegment[] {\n  const segments: StringDiffSegment[] = []\n  const dmpDiffs = dmp.diff_main(fromInput, toInput)\n  dmp.diff_cleanupEfficiency(dmpDiffs)\n\n  let fromIdx = 0\n  let toIdx = 0\n  for (const [op, text] of dmpDiffs) {\n    switch (op) {\n      case DIFF_EQUAL:\n        segments.push({\n          type: 'stringSegment',\n          action: 'unchanged',\n          text,\n        })\n        fromIdx += text.length\n        toIdx += text.length\n        break\n      case DIFF_DELETE:\n        segments.push({\n          type: 'stringSegment',\n          action: 'removed',\n          text: fromInput.substring(fromIdx, fromIdx + text.length),\n          annotation: null,\n        })\n        fromIdx += text.length\n        break\n      case DIFF_INSERT:\n        segments.push({\n          type: 'stringSegment',\n          action: 'added',\n          text: toInput.substring(toIdx, toIdx + text.length),\n          annotation: null,\n        })\n        toIdx += text.length\n        break\n      default:\n      // Do nothing\n    }\n  }\n  // Clean up so that marks / symbols are treated as an own segment\n  return flatten(\n    segments.map((seg) => {\n      const newSegments: StringDiffSegment[] = []\n      if (seg.text.length > 1) {\n        const markMatches = [...seg.text.matchAll(segmentRegex)]\n        let lastIndex = -1\n        markMatches.forEach((match) => {\n          const index = match.index || 0\n          if (index > lastIndex) {\n            newSegments.push({...seg, text: seg.text.substring(lastIndex + 1, index)})\n            newSegments.push({...seg, text: match[0]})\n          }\n          if (match === markMatches[markMatches.length - 1]) {\n            newSegments.push({...seg, text: seg.text.substring(index + 1)})\n          }\n          lastIndex = index\n        })\n        if (markMatches.length === 0) {\n          newSegments.push(seg)\n        }\n      } else {\n        newSegments.push(seg)\n      }\n      return newSegments\n    })\n  )\n}\n\nexport function getInlineObjects(diff: ObjectDiff): PortableTextChild[] {\n  const allChildren = [\n    ...(diff.toValue ? diff.toValue.children.filter((cld: any) => cld._type !== 'span') : []),\n  ]\n  const previousChildren = diff.fromValue\n    ? diff.fromValue.children.filter((cld: any) => cld._type !== 'span')\n    : []\n  previousChildren.forEach((oCld: any) => {\n    if (!allChildren.some((cld) => oCld._key === cld._key)) {\n      allChildren.push(oCld)\n    }\n  })\n  return orderBy(allChildren, ['_key'], ['asc']) as PortableTextChild[]\n}\n\nexport function findSpanDiffFromChild(\n  diff: ObjectDiff,\n  child: PortableTextChild\n): ObjectDiff | undefined {\n  // Find span in original diff which has a string segment similar to the one from the input\n  const candidate =\n    diff.fields.children &&\n    diff.fields.children.action !== 'unchanged' &&\n    diff.fields.children.type === 'array' &&\n    diff.fields.children.items.find(\n      (item: any) =>\n        item.diff &&\n        item.diff.type === 'object' &&\n        (item.diff.action === 'removed'\n          ? item.diff.fromValue && item.diff.fromValue._key === child._key\n          : (item.diff.toValue && item.diff.toValue._key) === child._key)\n    )\n  if (candidate) {\n    return candidate.diff as ObjectDiff\n  }\n  return undefined\n}\n\nexport function findAnnotationDiff(diff: ObjectDiff, markDefKey: string): ObjectDiff | undefined {\n  return (\n    ((diff.fields.markDefs &&\n      diff.fields.markDefs.isChanged &&\n      diff.fields.markDefs.type === 'array' &&\n      diff.fields.markDefs.items.find(\n        (item: any) =>\n          item.diff &&\n          item.diff.type === 'object' &&\n          ((item.diff.toValue && item.diff.toValue._key && item.diff.toValue._key === markDefKey) ||\n            (item.diff.fromValue &&\n              item.diff.fromValue._key &&\n              item.diff.fromValue._key === markDefKey))\n      )?.diff) as ObjectDiff) || undefined\n  )\n}\n\nexport function isEmptyObject(object: PortableTextChild): boolean {\n  return (object && isEqual(Object.keys(object), ['_key', '_type'])) || false\n}\n\nexport function escapeRegExp(text: string): string {\n  return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&')\n}\n\nexport function getAllMarkDefs(diff: ObjectDiff): PortableTextChild[] {\n  const allDefs: PortableTextChild[] = [\n    ...(diff.toValue && diff.toValue.markDefs ? diff.toValue.markDefs : []),\n  ]\n  const oldDefs: PortableTextChild[] =\n    diff.fromValue && diff.fromValue.markDefs ? diff.fromValue.markDefs : []\n  oldDefs.forEach((oDef) => {\n    if (!allDefs.some((def) => oDef._key === def._key)) {\n      allDefs.push(oDef)\n    }\n  })\n  return orderBy(allDefs, ['_key'], ['asc'])\n}\n","import {DiffComponentResolver} from './types'\n\n// import diffResolvers from 'all:part:@sanity/base/diff-resolver'\nexport const diffResolvers: DiffComponentResolver[] = []\n","import React from 'react'\nimport {UserColor} from '../../../../user-color'\nimport {FieldPreviewComponent} from '../../../preview'\n\ntype BooleanProps = {\n  checked: boolean | undefined | null\n  color?: UserColor\n}\n\nexport const BooleanPreview: FieldPreviewComponent<boolean> = function BooleanPreview({\n  value,\n  schemaType,\n  color,\n}) {\n  const Preview = schemaType.options?.layout === 'checkbox' ? Checkbox : Switch\n  return <Preview checked={value} color={color} />\n}\n\nexport function Checkbox({checked, color}: BooleanProps) {\n  return (\n    <svg\n      width=\"17\"\n      height=\"17\"\n      viewBox=\"0 0 17 17\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      fill={color?.background}\n    >\n      <rect x=\"0\" y=\"0\" width=\"17\" height=\"17\" rx=\"2.5\" />\n      {typeof checked === 'undefined' && (\n        <path d=\"M4.07996 8.5H12.92\" stroke={color?.text} strokeWidth=\"2\" />\n      )}\n      {checked && <path d=\"M3.5 8L7 11.5L13.5 5\" stroke={color?.text} strokeWidth=\"2\" />}\n    </svg>\n  )\n}\n\nexport function Switch({checked, color}: BooleanProps) {\n  return (\n    <svg width=\"38\" height=\"22\" viewBox=\"0 0 38 22\" xmlns=\"http://www.w3.org/2000/svg\">\n      <rect width=\"38\" height=\"22\" rx=\"11\" fill={checked ? color?.border : color?.background} />\n      {typeof checked === 'undefined' && (\n        <rect x=\"11\" y=\"3\" width=\"16\" height=\"16\" rx=\"8\" fill=\"white\" />\n      )}\n      {checked && <rect x=\"18\" y=\"3\" width=\"16\" height=\"16\" rx=\"8\" fill=\"white\" />}\n      {typeof checked === 'boolean' && !checked && (\n        <rect x=\"4\" y=\"3\" width=\"16\" height=\"16\" rx=\"8\" fill=\"white\" />\n      )}\n    </svg>\n  )\n}\n","import {Box, Flex, Text} from '@sanity/ui'\nimport React from 'react'\nimport {DiffTooltip, FromToArrow, useDiffAnnotationColor} from '../../../diff'\nimport {BooleanDiff, DiffComponent} from '../../../types'\nimport {Checkbox, Switch} from '../preview'\n\nexport const BooleanFieldDiff: DiffComponent<BooleanDiff> = ({diff, schemaType}) => {\n  const {fromValue, toValue} = diff\n  const {title, options} = schemaType\n  const Preview = options?.layout === 'checkbox' ? Checkbox : Switch\n  const userColor = useDiffAnnotationColor(diff, [])\n\n  const showToValue = toValue !== undefined && toValue !== null\n\n  return (\n    <Flex align=\"center\">\n      <DiffTooltip diff={diff}>\n        <Flex align=\"center\">\n          <Preview checked={fromValue} color={userColor} />\n\n          {showToValue && (\n            <>\n              <Box marginX={2}>\n                <FromToArrow />\n              </Box>\n              <Preview checked={toValue} color={userColor} />\n            </>\n          )}\n        </Flex>\n      </DiffTooltip>\n\n      {showToValue && title && (\n        <Box marginLeft={2}>\n          <Text size={1} weight=\"semibold\">\n            {title}\n          </Text>\n        </Box>\n      )}\n    </Flex>\n  )\n}\n","import {Path, SanityDocument, SchemaType} from '@sanity/types'\nimport {createContext} from 'react'\nimport {ObjectDiff} from '../../types'\n\nexport type DocumentChangeContextInstance = {\n  documentId: string\n  schemaType: SchemaType\n  rootDiff: ObjectDiff | null\n  isComparingCurrent: boolean\n  FieldWrapper: React.ComponentType<{path: Path; children: React.ReactNode; hasHover: boolean}>\n  value: Partial<SanityDocument>\n}\n\nexport const DocumentChangeContext = createContext<DocumentChangeContextInstance | null>(null)\n","import {useContext} from 'react'\nimport {\n  DocumentChangeContext,\n  DocumentChangeContextInstance,\n} from '../contexts/DocumentChangeContext'\n\nexport function useDocumentChange(): DocumentChangeContextInstance {\n  const documentChange = useContext(DocumentChangeContext)\n\n  if (!documentChange) {\n    throw new Error('DocumentChange: missing context value')\n  }\n\n  return documentChange\n}\n","import {useEffect, useState} from 'react'\nimport {useClient} from '../../../hooks'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\n\nexport function useRefValue<T extends Record<string, any> = Record<string, any>>(\n  refId: string | undefined | null\n): T | undefined {\n  const [value, setValue] = useState<T | undefined>(undefined)\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  useEffect(() => {\n    if (!refId) {\n      return undefined\n    }\n\n    const subscription = client.observable.getDocument<T>(refId).subscribe(setValue)\n\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [client, refId])\n\n  // Always return undefined in the case of a falsey ref to prevent bug\n  // when going from an ID to an undefined state\n  return refId ? value : undefined\n}\n","export function getSizeDiff(prev: number | undefined, next: number | undefined): number {\n  if (!prev || !next) {\n    return 0\n  }\n\n  const increase = next - prev\n  const pct = Math.round((increase / prev) * 100)\n\n  return pct\n}\n","import {DocumentIcon} from '@sanity/icons'\nimport React, {useMemo} from 'react'\nimport {Box, Card, Flex, Text} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {DiffCard, DiffTooltip, FromTo, MetaInfo, ChangeList} from '../../../diff'\nimport {DiffComponent, ObjectDiff} from '../../../types'\nimport {useRefValue} from '../../../diff/hooks'\nimport {getSizeDiff} from './helpers'\nimport {File, FileAsset} from './types'\n\nconst SizeDiff = styled.div`\n  ${({theme}) => `\n    --size-diff-positive: ${theme.sanity.color.solid.positive.enabled.bg};\n    --size-diff-negative: ${theme.sanity.color.solid.critical.enabled.bg};\n  `}\n  &:not([hidden]) {\n    display: inline-block;\n  }\n\n  [data-number='positive'] {\n    color: var(--size-diff-positive);\n  }\n\n  [data-number='negative'] {\n    color: var(--size-diff-negative);\n  }\n`\n\nexport const FileFieldDiff: DiffComponent<ObjectDiff<File>> = ({diff, schemaType}) => {\n  const {fromValue, toValue, fields} = diff\n  const fromAsset = fromValue?.asset\n  const toAsset = toValue?.asset\n  const prev = useRefValue<FileAsset>(fromAsset?._ref)\n  const next = useRefValue<FileAsset>(toAsset?._ref)\n\n  const changedFields = Object.entries(fields)\n    .filter(([name, field]) => field.isChanged && name !== '_type')\n    .map(([name]) => name)\n\n  const didAssetChange = changedFields.includes('asset')\n\n  const nestedFields = schemaType.fields\n    .filter((field) => field.name !== 'asset' && changedFields.includes(field.name))\n    .map((field) => field.name)\n\n  // Sizes in MB TODO: improve. Apple uses 1000^2\n  const prevSize = prev?.size && prev.size / 1000 / 1000\n  const nextSize = next?.size && next.size / 1000 / 1000\n  const pctDiff = getSizeDiff(prevSize, nextSize)\n\n  const roundedPrevSize = prevSize ? prevSize.toFixed(2) : undefined\n  const roundedNextSize = nextSize ? nextSize.toFixed(2) : undefined\n\n  const cardStyles = useMemo(() => ({display: 'block', flex: 1}), [])\n\n  const from = prev && (\n    <DiffCard as=\"del\" diff={diff} path=\"asset._ref\" style={cardStyles}>\n      <MetaInfo title={prev.originalFilename || 'Untitled'} icon={DocumentIcon}>\n        <Text size={0} style={{color: 'inherit'}}>{`${roundedPrevSize}MB`}</Text>\n      </MetaInfo>\n    </DiffCard>\n  )\n\n  const to = next && (\n    <DiffCard as=\"ins\" diff={diff} path=\"asset._ref\" style={cardStyles}>\n      <MetaInfo title={next.originalFilename || 'Untitled'} icon={DocumentIcon}>\n        <Flex align=\"center\">\n          <Text size={0} style={{color: 'inherit'}}>{`${roundedNextSize}MB`}</Text>\n          {pctDiff !== 0 && (\n            <Card radius={2} padding={1} as={SizeDiff} marginLeft={2}>\n              <Text size={0} data-number={pctDiff > 0 ? 'positive' : 'negative'}>\n                {pctDiff > 0 && '+'}\n                {pctDiff}%\n              </Text>\n            </Card>\n          )}\n        </Flex>\n      </MetaInfo>\n    </DiffCard>\n  )\n\n  const FileAssetChange = (\n    <>\n      {/* Removed only */}\n      {from && !to && (\n        <DiffTooltip diff={diff} path=\"asset._ref\" description=\"Removed\">\n          {from}\n        </DiffTooltip>\n      )}\n\n      {/* Removed and added */}\n      {from && to && (\n        <DiffTooltip diff={diff} path=\"asset._ref\">\n          <FromTo from={from} layout=\"grid\" to={to} />\n        </DiffTooltip>\n      )}\n\n      {/* Added only */}\n      {!from && to && (\n        <DiffTooltip diff={diff} path=\"asset._ref\" description=\"Added\">\n          {to}\n        </DiffTooltip>\n      )}\n    </>\n  )\n\n  return (\n    <>\n      {didAssetChange && FileAssetChange}\n      {nestedFields.length > 0 && (\n        <Box marginTop={didAssetChange ? 4 : 3}>\n          <ChangeList diff={diff} schemaType={schemaType} fields={nestedFields} />\n        </Box>\n      )}\n    </>\n  )\n}\n","// @todo: use `polished` for this?\nexport function hexToRgba(hex: string, opacity: number): string {\n  const rgba = (/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex) || ([] as string[]))\n    .slice(1)\n    .map((num) => parseInt(num, 16))\n    .concat(opacity)\n  return `rgba(${rgba.join(', ')})`\n}\n\n// @todo: replace this\nexport function simpleHash(str: string): string {\n  let hash = 0\n\n  if (str.length == 0) {\n    return hash.toString()\n  }\n\n  for (let i = 0; i < str.length; i++) {\n    const char = str.charCodeAt(i)\n\n    // eslint-disable-next-line no-bitwise\n    hash = (hash << 5) - hash + char\n\n    // eslint-disable-next-line no-bitwise\n    hash &= hash // Convert to 32bit integer\n  }\n\n  return hash.toString()\n}\n\nexport function getDeviceDpr(): number {\n  const base = Math.ceil(window.devicePixelRatio || 1)\n  return Math.min(3, Math.max(1, base))\n}\n","import {Image, ImageCrop, ImageHotspot} from '@sanity/types'\nimport React from 'react'\nimport {DiffTooltip, useDiffAnnotationColor} from '../../../diff'\nimport {ObjectDiff} from '../../../types'\nimport {hexToRgba} from './helpers'\n\ninterface HotspotCropSVGProps {\n  crop?: ImageCrop\n  diff: ObjectDiff<Image>\n  hash: string\n  hotspot?: ImageHotspot\n  width?: number\n  height?: number\n}\n\nexport function HotspotCropSVG(\n  props: HotspotCropSVGProps & Omit<React.SVGProps<SVGElement>, 'ref' | 'width' | 'height'>\n) {\n  const {crop, diff, hash, hotspot, width = 100, height = 100, ...restProps} = props\n  const cropColor = useDiffAnnotationColor(diff, 'crop')\n  const hotspotColor = useDiffAnnotationColor(diff, 'hotspot')\n\n  return (\n    <svg\n      {...restProps}\n      fill=\"none\"\n      width={width}\n      height={height}\n      viewBox={`0 0 ${width} ${height}`}\n    >\n      <defs>\n        {crop && hotspot && (\n          <mask id={`mask-hotspot-${hash}`}>\n            <rect x={0} y={0} width={width} height={height} fill=\"#fff\" />\n            <HotspotSVG\n              hotspot={hotspot}\n              fill=\"#000\"\n              offset={1}\n              width={width}\n              height={height}\n              stroke=\"#000\"\n              strokeWidth={3}\n            />\n          </mask>\n        )}\n      </defs>\n\n      {crop && (\n        <DiffTooltip diff={diff} path=\"crop\" description=\"Crop changed\">\n          <g>\n            <CropSVG\n              crop={crop}\n              fill={hexToRgba(cropColor.border, 0.25)}\n              mask={hotspot ? `url(#mask-hotspot-${hash})` : undefined}\n              stroke={cropColor.border}\n              strokeWidth={1}\n              width={width}\n              height={height}\n            />\n          </g>\n        </DiffTooltip>\n      )}\n\n      {hotspot && (\n        <DiffTooltip diff={diff} path=\"hotspot\" description=\"Hotspot changed\">\n          <g>\n            <HotspotSVG\n              hotspot={hotspot}\n              fill={hexToRgba(hotspotColor.border, 0.25)}\n              stroke={hotspotColor.border}\n              strokeWidth={1}\n              width={width}\n              height={height}\n            />\n          </g>\n        </DiffTooltip>\n      )}\n    </svg>\n  )\n}\n\nfunction CropSVG({\n  crop,\n  width,\n  height,\n  ...restProps\n}: {crop: ImageCrop; width: number; height: number} & Omit<\n  React.SVGProps<SVGRectElement>,\n  'width' | 'height'\n>) {\n  const rectProps = {\n    x: crop.left * width,\n    y: crop.top * height,\n    width: (1 - crop.right - crop.left) * width,\n    height: (1 - crop.bottom - crop.top) * height,\n  }\n\n  return <rect {...restProps} {...rectProps} style={{vectorEffect: 'non-scaling-stroke'}} />\n}\n\nfunction HotspotSVG({\n  hotspot,\n  offset = 0,\n  width,\n  height,\n  ...restProps\n}: {hotspot: ImageHotspot; offset?: number; width: number; height: number} & Omit<\n  React.SVGProps<SVGEllipseElement>,\n  'width' | 'height'\n>) {\n  const ellipseProps = {\n    cx: hotspot.x * width,\n    cy: hotspot.y * height,\n    rx: (hotspot.width / 2) * width + offset,\n    ry: (hotspot.height / 2) * height + offset,\n  }\n\n  return <ellipse {...restProps} {...ellipseProps} style={{vectorEffect: 'non-scaling-stroke'}} />\n}\n","import React, {SyntheticEvent, useMemo} from 'react'\nimport {getImageDimensions, isDefaultCrop, isDefaultHotspot} from '@sanity/asset-utils'\nimport imageUrlBuilder from '@sanity/image-url'\nimport {ImageIcon} from '@sanity/icons'\nimport {Box, Card, Flex, Text} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {hues} from '@sanity/color'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../studioClient'\nimport {useClient} from '../../../../hooks'\nimport {MetaInfo} from '../../../diff'\nimport {useDocumentValues} from '../../../../datastores'\nimport {getDeviceDpr, simpleHash} from './helpers'\nimport {HotspotCropSVG} from './HotspotCropSVG'\nimport {ImagePreviewProps, MinimalAsset} from './types'\n\nconst ASSET_FIELDS = ['originalFilename']\n\n// To trigger error state, change `src` attribute to random string (\"foo\")\n// To trigger slow loading, use a throttling proxy (charles) or browser devtools\n\n// To trigger deleted state, set `id` to valid, non-existant image asset ID,\n// eg: 'image-1217bc35db5030739b7be571c79d3c401551911d-300x200-png'\n\nexport const NoImagePreview = () => (\n  <Card flex={1} tone=\"transparent\" padding={4} radius={2} height=\"stretch\">\n    <Flex align=\"center\" justify=\"center\" height=\"fill\">\n      <Text size={1} muted>\n        (no image)\n      </Text>\n    </Flex>\n  </Card>\n)\n\nconst ImageWrapper = styled.div`\n  height: 100%;\n  max-height: 190px;\n  position: relative;\n\n  /* Ideally the checkerboard component currently in the form builder should be made available and used here */\n  background-color: ${hues.gray[100].hex};\n  background-image: linear-gradient(45deg, ${hues.gray[50].hex} 25%, transparent 25%),\n    linear-gradient(-45deg, ${hues.gray[50].hex} 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, ${hues.gray[50].hex} 75%),\n    linear-gradient(-45deg, transparent 75%, ${hues.gray[50].hex} 75%);\n  background-size: 16px 16px;\n  background-position: 0 0, 0 8px, 8px -8px, -8px 0;\n\n  &::after {\n    content: '';\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    box-shadow: inset 0 0 0 1px var(--card-border-color);\n    pointer-events: none;\n  }\n\n  &[data-changed] {\n    opacity: 0.45;\n  }\n`\n\nconst Image = styled.img`\n  display: block;\n  flex: 1;\n  min-height: 0;\n  object-fit: contain;\n  width: 100%;\n  height: 100%;\n\n  &[data-action='removed'] {\n    opacity: 0.45;\n  }\n`\n\nconst HotspotDiff = styled.div`\n  svg {\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n`\n\nexport function ImagePreview(props: ImagePreviewProps): React.ReactElement {\n  const {id, action, diff, hotspot, crop, is} = props\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const [imageError, setImageError] = React.useState<SyntheticEvent<HTMLImageElement, Event>>()\n  const {value: asset} = useDocumentValues<MinimalAsset>(id, ASSET_FIELDS)\n  const dimensions = getImageDimensions(id)\n  const imageBuilder = useMemo(() => imageUrlBuilder(client), [client])\n\n  // undefined = still loading, null = its gone\n  const assetIsDeleted = asset === null\n\n  const title = (asset && asset.originalFilename) || 'Untitled'\n  const imageSource = imageBuilder\n    .image(id)\n    .height(190) // Should match container max-height\n    .dpr(getDeviceDpr())\n    .fit('max')\n\n  const assetChanged = diff.fromValue?.asset?._ref !== diff.toValue?.asset?._ref\n\n  const metaAction = action === 'changed' ? undefined : action\n\n  return (\n    <Flex direction=\"column\" height=\"fill\" flex={1}>\n      <Box flex={1} padding={2} paddingBottom={0}>\n        <Flex\n          as={ImageWrapper}\n          direction=\"column\"\n          data-changed={is === 'from' && assetChanged ? '' : undefined}\n          data-error={imageError ? '' : undefined}\n        >\n          {!assetIsDeleted && !imageError && (\n            <Image\n              src={imageSource.toString() || ''}\n              alt={title}\n              data-action={metaAction}\n              onError={setImageError}\n              width={dimensions.width}\n              height={dimensions.height}\n            />\n          )}\n\n          {(assetIsDeleted || imageError) && (\n            <Box paddingY={5}>\n              <Text size={1} muted align=\"center\">\n                {assetIsDeleted ? 'Image is deleted' : 'Error loading image'}\n              </Text>\n            </Box>\n          )}\n\n          <HotspotDiff>\n            <HotspotCropSVG\n              crop={crop && !isDefaultCrop(crop) ? crop : undefined}\n              diff={diff}\n              hash={simpleHash(`${imageSource.toString() || ''}-${is}`)}\n              hotspot={hotspot && !isDefaultHotspot(hotspot) ? hotspot : undefined}\n              width={dimensions.width}\n              height={dimensions.height}\n            />\n          </HotspotDiff>\n        </Flex>\n      </Box>\n\n      <MetaInfo title={title} icon={ImageIcon} markRemoved={assetChanged && is === 'from'}>\n        {metaAction ? (\n          <div>{metaAction}</div>\n        ) : (\n          <div>\n            {dimensions.width} Ã— {dimensions.height}\n          </div>\n        )}\n      </MetaInfo>\n    </Flex>\n  )\n}\n","import {Image} from '@sanity/types'\nimport React from 'react'\nimport {Box, Card, Text} from '@sanity/ui'\nimport {DiffCard, DiffTooltip, ChangeList, getAnnotationAtPath} from '../../../diff'\nimport {DiffComponent, ObjectDiff} from '../../../types'\nimport {FromTo} from '../../../diff/components'\nimport {ImagePreview, NoImagePreview} from './ImagePreview'\n\nconst IMAGE_META_FIELDS = ['crop', 'hotspot']\nconst BASE_IMAGE_FIELDS = ['asset', ...IMAGE_META_FIELDS]\n\nconst CARD_STYLES = {\n  flex: 1,\n}\n\nexport const ImageFieldDiff: DiffComponent<ObjectDiff<Image>> = ({diff, schemaType}) => {\n  const {fromValue, toValue, fields, isChanged} = diff\n  const fromRef = fromValue?.asset?._ref\n  const toRef = toValue?.asset?._ref\n  const assetAnnotation = getAnnotationAtPath(diff, ['asset', '_ref'])\n\n  // Get all the changed fields within this image field\n  const changedFields = Object.keys(fields).filter(\n    (name) => fields[name].isChanged && name !== '_type'\n  )\n\n  const nestedFields = schemaType.fields\n    .filter(\n      (field) => !BASE_IMAGE_FIELDS.includes(field.name) && changedFields.includes(field.name)\n    )\n    .map((field) => field.name)\n\n  let assetAction: 'changed' | 'added' | 'removed' = 'changed'\n  if (!fromRef && toRef) {\n    assetAction = 'added'\n  } else if (!toRef && fromRef) {\n    assetAction = 'removed'\n  }\n\n  const didAssetChange = changedFields.includes('asset')\n  const didCropChange = changedFields.includes('crop')\n  const didHotspotChange = changedFields.includes('hotspot')\n  const didMetaChange = didCropChange || didHotspotChange\n  const showImageDiff = didAssetChange || didMetaChange\n  const showMetaChange = didMetaChange && !didAssetChange\n\n  const from =\n    fromValue && fromRef ? (\n      <DiffCard annotation={assetAnnotation} style={CARD_STYLES}>\n        <ImagePreview\n          is=\"from\"\n          id={fromRef}\n          diff={diff}\n          action={assetAction}\n          hotspot={showMetaChange && didHotspotChange ? fromValue.hotspot : undefined}\n          crop={showMetaChange && didCropChange ? fromValue.crop : undefined}\n        />\n      </DiffCard>\n    ) : (\n      <NoImagePreview />\n    )\n\n  const to =\n    toValue && toRef ? (\n      <DiffCard annotation={assetAnnotation} style={CARD_STYLES}>\n        <ImagePreview\n          is=\"to\"\n          id={toRef}\n          diff={diff}\n          hotspot={showMetaChange && didHotspotChange ? toValue.hotspot : undefined}\n          crop={showMetaChange && didCropChange ? toValue.crop : undefined}\n        />\n      </DiffCard>\n    ) : (\n      <NoImagePreview />\n    )\n\n  if (!from && !to) {\n    return (\n      <Card padding={4} radius={2} tone=\"transparent\">\n        <Text muted size={1} align=\"center\">\n          Image not set\n        </Text>\n      </Card>\n    )\n  }\n\n  if (!isChanged) {\n    return toRef ? (\n      <DiffCard annotation={assetAnnotation} style={CARD_STYLES}>\n        <ImagePreview id={toRef} is=\"to\" diff={diff} />\n      </DiffCard>\n    ) : null\n  }\n\n  const imageDiff = <FromTo align=\"center\" from={from} layout=\"grid\" to={to} />\n\n  return (\n    <>\n      {showImageDiff &&\n        (didAssetChange ? (\n          <DiffTooltip\n            annotations={assetAnnotation ? [assetAnnotation] : []}\n            description={`${assetAction[0].toUpperCase()}${assetAction.slice(1)}`}\n          >\n            {imageDiff}\n          </DiffTooltip>\n        ) : (\n          imageDiff\n        ))}\n      {nestedFields.length > 0 && (\n        <Box marginTop={showImageDiff ? 4 : 3}>\n          <ChangeList diff={diff} schemaType={schemaType} fields={nestedFields} />\n        </Box>\n      )}\n    </>\n  )\n}\n","import {Box} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {FieldPreviewComponent} from '../../../preview'\n\nconst NumberWrapper = styled.div`\n  display: inline-block;\n  word-break: break-all;\n`\n\nexport const NumberPreview: FieldPreviewComponent<string> = (props) => {\n  const {value} = props\n\n  return (\n    <Box as={NumberWrapper} paddingX={2} paddingY={1}>\n      {value}\n    </Box>\n  )\n}\n","import React from 'react'\nimport {DiffFromTo} from '../../../diff'\nimport {DiffComponent, NumberDiff} from '../../../types'\nimport {NumberPreview} from '../preview/NumberPreview'\n\nexport const NumberFieldDiff: DiffComponent<NumberDiff> = ({diff, schemaType}) => {\n  return (\n    <DiffFromTo\n      diff={diff}\n      schemaType={schemaType}\n      previewComponent={NumberPreview}\n      layout=\"inline\"\n    />\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst Quote = styled.blockquote`\n  margin: 0;\n`\n\nexport default function Blockquote({children}: {children: React.ReactNode}): JSX.Element {\n  return (\n    <div>\n      <Quote>{children}</Quote>\n    </div>\n  )\n}\n","import {Heading} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\nconst headingSizes: Record<string, number | undefined> = {\n  h1: 2,\n  h2: 1,\n  h3: 0,\n  h4: 0,\n  h5: 0,\n  h6: 0,\n}\n\nconst StyledHeading = styled(Heading)`\n  &:not([hidden]) {\n    display: inline;\n    text-transform: none;\n    margin: 0;\n\n    &::before,\n    &::after {\n      content: unset;\n    }\n  }\n`\n\nexport default function Header({\n  style,\n  children,\n}: {\n  style: string\n  children: React.ReactNode\n}): JSX.Element {\n  return <StyledHeading size={headingSizes[style]}>{children}</StyledHeading>\n}\n","import React from 'react'\nimport styled from 'styled-components'\n\nconst StyledParagraph = styled.p`\n  text-transform: none;\n  white-space: wrap;\n  overflow-wrap: break-word;\n  margin: 0;\n`\n\nexport default function Paragraph({children}: {children: React.ReactNode}): JSX.Element {\n  return <StyledParagraph>{children}</StyledParagraph>\n}\n","import {Box, Card, Stack, Text} from '@sanity/ui'\nimport {Path} from '@sanity/types'\nimport React, {useCallback, useContext} from 'react'\nimport {ConnectorContext} from '../../../../../components/changeIndicators'\nimport {DiffContext, DiffTooltip, useDiffAnnotationColor} from '../../../../diff'\nimport {isHeader} from '../helpers'\nimport {PortableTextBlock, PortableTextDiff} from '../types'\nimport Blockquote from './Blockquote'\nimport Header from './Header'\nimport Paragraph from './Paragraph'\n\nconst EMPTY_PATH: Path = []\n\nexport default function Block(props: {\n  diff: PortableTextDiff\n  block: PortableTextBlock\n  children: JSX.Element\n}): JSX.Element {\n  const {diff, block, children} = props\n  const color = useDiffAnnotationColor(diff, EMPTY_PATH)\n  const {path: fullPath} = useContext(DiffContext)\n  const {onSetFocus} = useContext(ConnectorContext)\n  const isRemoved = diff.action === 'removed'\n  let returned = children\n\n  const handleClick = useCallback(\n    (event) => {\n      event.stopPropagation()\n\n      if (!isRemoved) {\n        onSetFocus(fullPath)\n      }\n    },\n    [fullPath, isRemoved, onSetFocus]\n  )\n\n  if (block.style === 'blockquote') {\n    returned = <Blockquote>{returned}</Blockquote>\n  } else if (block.style && isHeader(block)) {\n    returned = <Header style={block.style}>{returned}</Header>\n  } else {\n    returned = <Paragraph>{returned}</Paragraph>\n  }\n\n  let fromStyle: string | undefined\n  // If style was changed, indicate that\n  if (\n    diff.origin.action === 'changed' &&\n    diff.origin.fields.style &&\n    diff.origin.fields.style.action === 'changed' &&\n    diff.origin.fields.style.annotation\n  ) {\n    fromStyle = diff?.origin?.fromValue?.style\n\n    const style = color ? {background: color.background, color: color.text} : {}\n\n    returned = (\n      <Card\n        padding={3}\n        border\n        radius={2}\n        style={{borderStyle: 'dotted'}}\n        diff-block-action={diff.action}\n        data-block-note={`changed_from_style_${fromStyle || 'undefined'}`}\n      >\n        <Stack space={2}>\n          <DiffTooltip\n            annotations={[diff.origin.fields.style?.annotation]}\n            diff={diff.origin.fields.style}\n          >\n            <Text size={0}>Changed block style from '{fromStyle}'</Text>\n          </DiffTooltip>\n          <Box style={style}>{returned}</Box>\n        </Stack>\n      </Card>\n    )\n  }\n\n  return (\n    <div\n      onClick={handleClick}\n      diff-block-action={diff.action}\n      data-block-note={`changed_from_style_${fromStyle || 'undefined'}`}\n    >\n      {returned}\n    </div>\n  )\n}\n","import {Box, Text} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const InlineBox = styled(Box)`\n  &:not([hidden]) {\n    display: inline;\n    align-items: center;\n\n    &[data-changed] {\n      cursor: pointer;\n    }\n  }\n`\n\nexport const InlineText = styled(Text)`\n  &:not([hidden]) {\n    display: inline;\n    color: inherit;\n  }\n`\n\nexport const PreviewContainer = styled(Box)`\n  &:not([hidden]) {\n    display: inline-flex;\n    align-items: center;\n\n    ${InlineBox} [data-ui=\"Text\"] {\n      opacity: 0.5;\n    }\n  }\n`\n\nexport const PopoverContainer = styled(Box)`\n  min-width: 160px;\n  max-height: 40vh;\n  overflow-y: auto;\n`\n","import {ChevronDownIcon} from '@sanity/icons'\nimport {useClickOutside, Label, Popover, Flex} from '@sanity/ui'\nimport {toString} from '@sanity/util/paths'\nimport {isKeySegment, ObjectSchemaType, Path} from '@sanity/types'\nimport React, {useCallback, useContext, useEffect, useMemo, useState} from 'react'\nimport styled from 'styled-components'\nimport {ConnectorContext, useReportedValues} from '../../../../../components/changeIndicators'\nimport {ChangeList, DiffContext, DiffTooltip, useDiffAnnotationColor} from '../../../../diff'\nimport {ObjectDiff} from '../../../../types'\nimport {PortableTextChild} from '../types'\nimport {isEmptyObject} from '../helpers'\nimport {InlineBox, InlineText, PopoverContainer, PreviewContainer} from './styledComponents'\n\ninterface AnnotationProps {\n  diff?: ObjectDiff\n  object: PortableTextChild\n  schemaType?: ObjectSchemaType\n  path: Path\n  children: React.ReactNode\n}\n\nconst AnnotationWrapper = styled.div`\n  text-decoration: none;\n  display: inline;\n  position: relative;\n  border: 0;\n  padding: 0;\n  border-bottom: 2px dotted currentColor;\n  box-shadow: inset 0 0 0 1px var(--card-border-color);\n  white-space: nowrap;\n  align-items: center;\n  background-color: color(var(--card-fg-color) a(10%));\n\n  &[data-changed] {\n    cursor: pointer;\n  }\n\n  &[data-removed] {\n    text-decoration: line-through;\n  }\n\n  &:hover ${PreviewContainer} {\n    opacity: 1;\n  }\n`\n\nexport function Annotation({\n  children,\n  diff,\n  object,\n  schemaType,\n  path,\n  ...restProps\n}: AnnotationProps) {\n  if (!schemaType) {\n    return <AnnotationWrapper {...restProps}>Unknown schema type</AnnotationWrapper>\n  }\n  if (diff && diff.action !== 'unchanged') {\n    return (\n      <AnnnotationWithDiff\n        {...restProps}\n        diff={diff}\n        object={object}\n        schemaType={schemaType}\n        path={path}\n      >\n        {children}\n      </AnnnotationWithDiff>\n    )\n  }\n  return <AnnotationWrapper>{children}</AnnotationWrapper>\n}\n\ninterface AnnnotationWithDiffProps {\n  diff: ObjectDiff\n  object: PortableTextChild\n  schemaType: ObjectSchemaType\n  path: Path\n  children?: React.ReactNode\n}\n\nfunction AnnnotationWithDiff({\n  diff,\n  children,\n  object,\n  schemaType,\n  path,\n  ...restProps\n}: AnnnotationWithDiffProps) {\n  const {onSetFocus} = useContext(ConnectorContext)\n  const {path: fullPath} = useContext(DiffContext)\n  const [popoverElement, setPopoverElement] = useState<HTMLDivElement | null>(null)\n  const color = useDiffAnnotationColor(diff, [])\n  const style = useMemo(\n    () => (color ? {background: color.background, color: color.text} : {}),\n    [color]\n  )\n  const isRemoved = diff.action === 'removed'\n  const [open, setOpen] = useState(false)\n  const emptyObject = object && isEmptyObject(object)\n  const markDefPath = useMemo(\n    () => [path[0]].concat(['markDefs', {_key: object._key}]),\n    [object._key, path]\n  )\n  const prefix = useMemo(\n    () =>\n      fullPath.slice(\n        0,\n        fullPath.findIndex((seg) => isKeySegment(seg) && seg._key === object._key)\n      ),\n    [fullPath, object._key]\n  )\n  const annotationPath = useMemo(() => prefix.concat(path), [path, prefix])\n  const myPath = useMemo(() => prefix.concat(markDefPath), [markDefPath, prefix])\n  const myValue = `field-${toString(myPath)}`\n  const values = useReportedValues()\n  const isEditing = useMemo(\n    () => values.filter(([p]) => p.startsWith(myValue)).length > 0,\n    [myValue, values]\n  )\n\n  useEffect(() => {\n    if (!open && isEditing) {\n      setOpen(true)\n      onSetFocus(myPath)\n    }\n  }, [isEditing, myPath, onSetFocus, open])\n\n  const handleOpenPopup = useCallback(\n    (event) => {\n      event.stopPropagation()\n      setOpen(true)\n      if (!isRemoved) {\n        event.preventDefault()\n        onSetFocus(annotationPath) // Go to span first\n        setTimeout(() => onSetFocus(myPath), 10) // Open edit object interface\n      }\n    },\n    [annotationPath, isRemoved, myPath, onSetFocus]\n  )\n\n  const handleClickOutside = useCallback(() => {\n    if (!isEditing) {\n      setOpen(false)\n    }\n  }, [isEditing])\n\n  useClickOutside(handleClickOutside, [popoverElement])\n\n  const annotation = (diff.action !== 'unchanged' && diff.annotation) || null\n  const annotations = useMemo(() => (annotation ? [annotation] : []), [annotation])\n\n  const popoverContent = (\n    <DiffContext.Provider value={{path: myPath}}>\n      <PopoverContainer padding={3}>\n        <div>\n          {emptyObject && (\n            <Label size={1} muted>\n              Empty {schemaType.title}\n            </Label>\n          )}\n          {!emptyObject && <ChangeList diff={diff} schemaType={schemaType} />}\n        </div>\n      </PopoverContainer>\n    </DiffContext.Provider>\n  )\n\n  return (\n    <AnnotationWrapper\n      {...restProps}\n      onClick={handleOpenPopup}\n      style={style}\n      data-changed=\"\"\n      data-removed={diff.action === 'removed' ? '' : undefined}\n    >\n      <Popover content={popoverContent} open={open} ref={setPopoverElement} portal>\n        <PreviewContainer paddingLeft={1}>\n          <DiffTooltip annotations={annotations} description={`${diff.action} annotation`}>\n            <InlineBox style={{display: 'inline-flex'}}>\n              <span>{children}</span>\n              <Flex align=\"center\" paddingX={1}>\n                <InlineText size={0}>\n                  <ChevronDownIcon />\n                </InlineText>\n              </Flex>\n            </InlineBox>\n          </DiffTooltip>\n        </PreviewContainer>\n      </Popover>\n    </AnnotationWrapper>\n  )\n}\n","import {Theme} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\nconst DecoratorWrapper = styled.span`\n  display: inline;\n  ${({theme, decoration}: {theme: Theme; decoration: string}) => {\n    switch (decoration) {\n      case 'strong':\n        return 'font-weight: bold;'\n      case 'em':\n        return 'font-style: italic;'\n      case 'underline':\n        return 'text-decoration: underline;'\n      case 'overline':\n        return 'text-decoration: overline;'\n      case 'strike-through':\n        return 'text-decoration: line-through;'\n      case 'code':\n        return `\n          font-family: ${theme.sanity.fonts.code.family};\n          background: ${theme.sanity.color.muted.default.enabled.bg};\n        `\n      default:\n        return ''\n    }\n  }}\n`\n\nexport default function Decorator({mark, children}: {mark: string; children: JSX.Element}) {\n  return <DecoratorWrapper decoration={mark}>{children}</DecoratorWrapper>\n}\n","import {ChevronDownIcon} from '@sanity/icons'\nimport {isKeySegment, ObjectSchemaType, Path} from '@sanity/types'\nimport {Card, Flex, Label, Popover, useClickOutside} from '@sanity/ui'\nimport {FOCUS_TERMINATOR, toString} from '@sanity/util/paths'\nimport React, {useCallback, useContext, useState, useEffect, useMemo} from 'react'\nimport styled from 'styled-components'\nimport {ConnectorContext, useReportedValues} from '../../../../../components/changeIndicators'\nimport {SanityPreview} from '../../../../../preview'\nimport {ChangeList, DiffContext, DiffTooltip, useDiffAnnotationColor} from '../../../../diff'\nimport {ObjectDiff} from '../../../../types'\nimport {PortableTextChild} from '../types'\nimport {isEmptyObject} from '../helpers'\nimport {InlineBox, InlineText, PopoverContainer, PreviewContainer} from './styledComponents'\n\ninterface InlineObjectProps {\n  diff?: ObjectDiff\n  object: PortableTextChild\n  path: Path\n  schemaType?: ObjectSchemaType\n}\n\nconst InlineObjectWrapper = styled(Card)`\n  &:not([hidden]) {\n    display: inline;\n    cursor: pointer;\n    white-space: nowrap;\n    align-items: center;\n\n    &[data-removed] {\n      text-decoration: line-through;\n    }\n\n    ${InlineBox} {\n      display: inline-flex;\n    }\n  }\n`\n\nexport function InlineObject({diff, object, schemaType, ...restProps}: InlineObjectProps) {\n  if (!schemaType) {\n    return (\n      <InlineObjectWrapper {...restProps} border radius={1}>\n        Unknown schema type: {object._type}\n      </InlineObjectWrapper>\n    )\n  }\n\n  if (diff) {\n    return (\n      <InlineObjectWithDiff {...restProps} diff={diff} object={object} schemaType={schemaType} />\n    )\n  }\n\n  return (\n    <InlineObjectWrapper>\n      <SanityPreview schemaType={schemaType} value={object as any} layout=\"inline\" />\n    </InlineObjectWrapper>\n  )\n}\n\ninterface InlineObjectWithDiffProps {\n  diff: ObjectDiff\n  object: PortableTextChild\n  path: Path\n  schemaType: ObjectSchemaType\n}\n\nfunction InlineObjectWithDiff({\n  diff,\n  object,\n  path,\n  schemaType,\n  ...restProps\n}: InlineObjectWithDiffProps) {\n  const {path: fullPath} = useContext(DiffContext)\n  const {onSetFocus} = useContext(ConnectorContext)\n  const color = useDiffAnnotationColor(diff, [])\n  const style = useMemo(\n    () => (color ? {background: color.background, color: color.text} : {}),\n    [color]\n  )\n  const [open, setOpen] = useState(false)\n  const emptyObject = object && isEmptyObject(object)\n  const isRemoved = diff.action === 'removed'\n  const prefix = fullPath.slice(\n    0,\n    fullPath.findIndex((seg) => isKeySegment(seg) && seg._key === object._key)\n  )\n  const myPath = prefix.concat(path)\n  const myValue = `field-${toString(myPath)}`\n  const values = useReportedValues()\n  const isEditing = values.filter(([p]) => p.startsWith(myValue)).length > 0\n\n  const focusPath = fullPath.slice(0, -1).concat(path).concat([FOCUS_TERMINATOR])\n\n  useEffect(() => {\n    if (isEditing) {\n      setOpen(true)\n      onSetFocus(focusPath)\n    }\n  }, [isEditing])\n\n  const handleOpenPopup = useCallback(\n    (event) => {\n      event.stopPropagation()\n      setOpen(true)\n      if (!isRemoved) {\n        onSetFocus(focusPath)\n        return\n      }\n      event.preventDefault()\n    },\n    [focusPath]\n  )\n\n  const handleClose = useCallback(() => {\n    setOpen(false)\n  }, [])\n\n  const popoverContent = (\n    <DiffContext.Provider value={{path: myPath}}>\n      <PopoverContent\n        diff={diff}\n        emptyObject={emptyObject}\n        onClose={handleClose}\n        schemaType={schemaType}\n      />\n    </DiffContext.Provider>\n  )\n\n  const annotation = (diff.action !== 'unchanged' && diff.annotation) || null\n  const annotations = annotation ? [annotation] : []\n\n  return (\n    <InlineObjectWrapper\n      {...restProps}\n      onClick={handleOpenPopup}\n      style={style}\n      data-removed={diff.action === 'removed' ? '' : undefined}\n      border\n      radius={2}\n    >\n      <Popover content={popoverContent} open={open} portal>\n        <PreviewContainer>\n          <DiffTooltip annotations={annotations} description={`${diff.action} inline object`}>\n            <InlineBox>\n              <SanityPreview schemaType={schemaType} value={object as any} layout=\"inline\" />\n              <Flex align=\"center\" paddingX={1}>\n                <InlineText size={0}>\n                  <ChevronDownIcon />\n                </InlineText>\n              </Flex>\n            </InlineBox>\n          </DiffTooltip>\n        </PreviewContainer>\n      </Popover>\n    </InlineObjectWrapper>\n  )\n}\n\nfunction PopoverContent({\n  diff,\n  emptyObject,\n  onClose,\n  schemaType,\n}: {\n  diff: ObjectDiff\n  emptyObject: boolean\n  onClose: () => void\n  schemaType: ObjectSchemaType\n}) {\n  const [popoverElement, setPopoverElement] = useState<HTMLDivElement | null>(null)\n  // const {isTopLayer} = useLayer()\n\n  const handleClickOutside = useCallback(() => {\n    // Popover doesn't close at all when using this condition\n    // if (!isTopLayer) return\n    onClose()\n  }, [onClose])\n\n  useClickOutside(handleClickOutside, [popoverElement])\n\n  return (\n    <PopoverContainer ref={setPopoverElement} padding={3}>\n      {emptyObject && (\n        <Label size={1} muted>\n          Empty {schemaType.title}\n        </Label>\n      )}\n      {!emptyObject && <ChangeList diff={diff} schemaType={schemaType} />}\n    </PopoverContainer>\n  )\n}\n","import {isKeySegment, Path} from '@sanity/types'\nimport React, {SyntheticEvent, useCallback, useMemo} from 'react'\nimport {startCase} from 'lodash'\nimport {ConnectorContext} from '../../../../../components/changeIndicators'\nimport {DiffCard, DiffContext} from '../../../../diff'\nimport {ObjectDiff, StringDiff, StringDiffSegment} from '../../../../types'\nimport {InlineBox} from './styledComponents'\n\ninterface TextProps {\n  diff?: StringDiff\n  childDiff?: ObjectDiff\n  children: JSX.Element\n  path: Path\n  segment: StringDiffSegment\n}\n\nexport function Text({\n  diff,\n  childDiff,\n  children,\n  path,\n  segment,\n  ...restProps\n}: TextProps & Omit<React.HTMLProps<HTMLSpanElement>, 'onClick'>) {\n  const diffWithFallback = diff || childDiff\n  const hasChanged =\n    diffWithFallback && diffWithFallback.action !== 'unchanged' && segment.action !== 'unchanged'\n  if (hasChanged) {\n    return (\n      <TextWithDiff {...restProps} childDiff={childDiff} diff={diff} segment={segment} path={path}>\n        {children}\n      </TextWithDiff>\n    )\n  }\n  return <InlineBox>{children}</InlineBox>\n}\n\nexport function TextWithDiff({diff, childDiff, children, path, segment, ...restProps}: TextProps) {\n  const {onSetFocus} = React.useContext(ConnectorContext)\n  const {path: fullPath} = React.useContext(DiffContext)\n  const spanSegment = useMemo(() => path.slice(-2, 1)[0], [path])\n  const isRemoved = diff && diff.action === 'removed'\n  const prefix = fullPath.slice(\n    0,\n    fullPath.findIndex(\n      (seg) => isKeySegment(seg) && isKeySegment(spanSegment) && seg._key === spanSegment._key\n    )\n  )\n  const focusPath = prefix.concat(path)\n\n  const handleClick = useCallback(\n    (event: SyntheticEvent) => {\n      event.stopPropagation()\n      if (!isRemoved) {\n        event.preventDefault()\n        onSetFocus(focusPath)\n      }\n    },\n    [focusPath, isRemoved, onSetFocus]\n  )\n  const realSeg = diff && diff.segments.find((rSeg: any) => rSeg.text === segment.text)\n\n  const diffWithFallback = realSeg || diff || childDiff\n  const annotation =\n    (diffWithFallback && diffWithFallback.action !== 'unchanged' && diffWithFallback.annotation) ||\n    null\n  const diffCard =\n    annotation && segment.action !== 'unchanged' ? (\n      <DiffCard\n        annotation={annotation}\n        as={segment.action === 'removed' ? 'del' : 'ins'}\n        tooltip={{description: `${startCase(segment.action)} text`}}\n      >\n        {children}\n      </DiffCard>\n    ) : null\n  return (\n    <InlineBox {...restProps} onClick={handleClick} data-changed=\"\">\n      <span>\n        <>{diffCard || children}</>\n      </span>\n    </InlineBox>\n  )\n}\n","import {ObjectSchemaType, SchemaType} from '@sanity/types'\nimport {startCase, uniq, xor} from 'lodash'\nimport React, {ReactElement, useCallback, useMemo} from 'react'\nimport {DiffCard} from '../../../../diff'\nimport {ArrayDiff, ObjectDiff, StringDiff, StringDiffSegment} from '../../../../types'\nimport {PortableTextBlock, PortableTextChild, PortableTextDiff, SpanTypeSchema} from '../types'\n\nimport * as TextSymbols from '../symbols'\n\nimport {\n  escapeRegExp,\n  getAllMarkDefs,\n  findChildDiff,\n  findAnnotationDiff,\n  findSpanDiffFromChild,\n  getChildSchemaType,\n  getDecorators,\n  getInlineObjects,\n  isDecorator,\n} from '../helpers'\n\nimport Block from './Block'\nimport {Annotation} from './Annotation'\nimport Decorator from './Decorator'\nimport {InlineObject} from './InlineObject'\nimport {Text} from './Text'\n\nconst decoratorSymbolsStart = TextSymbols.DECORATOR_SYMBOLS.map((set) => set[0])\nconst decoratorSymbolsEnd = TextSymbols.DECORATOR_SYMBOLS.map((set) => set[1])\nconst annotationSymbolsStart = TextSymbols.ANNOTATION_SYMBOLS.map((set) => set[0])\nconst annotationSymbolsEnd = TextSymbols.ANNOTATION_SYMBOLS.map((set) => set[1])\n\nconst allSymbolsStart = decoratorSymbolsStart.concat(annotationSymbolsStart)\nconst allSymbolsEnd = decoratorSymbolsEnd.concat(annotationSymbolsEnd)\n\nconst allDecoratorSymbols = decoratorSymbolsStart.concat(decoratorSymbolsEnd)\nconst markRegex = new RegExp(`${allDecoratorSymbols.concat(allSymbolsEnd).join('|')}`, 'g')\n\ntype Props = {\n  diff: PortableTextDiff\n  schemaType: ObjectSchemaType\n}\n\nexport default function PortableText(props: Props): JSX.Element {\n  const {diff, schemaType} = props\n  const block = (diff.origin.toValue || diff.origin.fromValue) as PortableTextBlock\n\n  const inlineObjects = useMemo(\n    () => (diff.origin.toValue ? getInlineObjects(diff.origin) : []),\n    [diff.origin]\n  )\n\n  const renderChild = useCallback(\n    (ptDiffChild: PortableTextChild) => {\n      const spanSchemaType = getChildSchemaType(schemaType.fields, ptDiffChild) as SpanTypeSchema\n      let decoratorTypes: {title: string; value: string}[] = []\n      if (spanSchemaType) {\n        decoratorTypes = getDecorators(spanSchemaType)\n        const childrenDiff = diff.fields.children as ArrayDiff\n        const segments =\n          (childrenDiff.items[0].diff &&\n            childrenDiff.items[0].diff.type === 'object' &&\n            childrenDiff.items[0].diff.fields.text.type === 'string' &&\n            childrenDiff.items[0].diff.fields.text.segments) ||\n          []\n        const returnedChildren: React.ReactNode[] = []\n        const annotationSegments: Record<string, React.ReactNode[]> = {}\n        // Special case for new empty PT-block (single span child with empty text)\n        if (\n          isEmptyTextChange(block, diff) &&\n          (diff.origin.action === 'added' || diff.origin.action === 'removed')\n        ) {\n          const textDiff = findChildDiff(diff.origin, block.children[0]) || diff.origin\n          if (textDiff && textDiff.action !== 'unchanged') {\n            return (\n              <DiffCard\n                annotation={textDiff.annotation}\n                as={textDiff.action === 'removed' ? 'del' : 'ins'}\n                key={`empty-block-${block._key}`}\n                tooltip={{\n                  description: `${startCase(textDiff.action)} empty text`,\n                }}\n              >\n                <span>{TextSymbols.EMPTY_BLOCK_SYMBOL}</span>\n              </DiffCard>\n            )\n          }\n        }\n        // Run through all the segments from the PortableTextDiff\n        let childToIndex = -1\n        let segIndex = -1\n        const activeAnnotations: {mark: string; object: PortableTextChild; symbols: string[]}[] = []\n        let endedAnnotation:\n          | {mark: string; object: PortableTextChild; symbols: string[]}\n          | undefined\n        const allMarkDefs = getAllMarkDefs(diff.origin)\n        segments.forEach((seg) => {\n          segIndex++\n          const isInline = TextSymbols.INLINE_SYMBOLS.includes(seg.text)\n          const isMarkStart = allSymbolsStart.includes(seg.text)\n          const isMarkEnd = allSymbolsEnd.includes(seg.text)\n          const isChildStart = seg.text === TextSymbols.CHILD_SYMBOL\n          const isRemoved = seg.action === 'removed'\n          if (isChildStart) {\n            if (!isRemoved) {\n              childToIndex++\n            }\n            // No output\n          } else if (isMarkStart || isMarkEnd) {\n            if (isMarkStart && annotationSymbolsStart.includes(seg.text)) {\n              const object = allMarkDefs[annotationSymbolsStart.indexOf(seg.text)]\n              if (object) {\n                activeAnnotations.push({\n                  mark: object._key,\n                  symbols: [\n                    seg.text,\n                    annotationSymbolsEnd[annotationSymbolsStart.indexOf(seg.text)],\n                  ],\n                  object,\n                })\n              }\n            }\n            if (isMarkEnd && annotationSymbolsEnd.includes(seg.text)) {\n              endedAnnotation = activeAnnotations.pop()\n            }\n            // No output\n          } else if (isInline) {\n            // Render inline object\n            const indexOfSymbol = TextSymbols.INLINE_SYMBOLS.findIndex((sym) => sym === seg.text)\n            const key = inlineObjects[indexOfSymbol]?._key\n            const originChild = inlineObjects[indexOfSymbol]\n            if (key) {\n              const objectSchemaType = getChildSchemaType(schemaType.fields, originChild)\n              const objectDiff = findChildDiff(diff.origin, originChild)\n              returnedChildren.push(\n                <InlineObject\n                  key={`inline-object-${originChild._key}`}\n                  object={originChild}\n                  path={[{_key: block._key}, 'children', {_key: originChild._key}]}\n                  diff={objectDiff}\n                  schemaType={objectSchemaType}\n                />\n              )\n            }\n          } else if (seg.text) {\n            // TODO: find a better way of getting a removed child\n            const getChildFromFromValue = () =>\n              diff.origin.fromValue?.children.find(\n                (cld: any) => cld.text && cld.text.match(escapeRegExp(seg.text))\n              ) as PortableTextChild\n            const child = block.children[childToIndex] || getChildFromFromValue()\n            const childDiff = child && findSpanDiffFromChild(diff.origin, child)\n            if (!child) {\n              throw new Error('Could not find child')\n            }\n            const textDiff = childDiff?.fields?.text\n              ? (childDiff?.fields?.text as StringDiff)\n              : undefined\n            const text = (\n              <Text\n                diff={textDiff}\n                key={`text-${child._key}-${segIndex}`}\n                path={[{_key: block._key}, 'children', {_key: child._key}]}\n                childDiff={childDiff}\n                segment={seg}\n              >\n                {renderTextSegment({\n                  diff,\n                  child,\n                  decoratorTypes,\n                  seg,\n                  segIndex,\n                  spanSchemaType,\n                })}\n              </Text>\n            )\n\n            // Render annotations text changes within the annotation child\n            if (activeAnnotations.length > 0) {\n              activeAnnotations.forEach((active) => {\n                annotationSegments[active.mark] = annotationSegments[active.mark] || []\n                annotationSegments[active.mark].push(text)\n              })\n            }\n            if (endedAnnotation) {\n              const key = `annotation-${endedAnnotation.object._key}`\n              const lastChild = returnedChildren[returnedChildren.length - 1] as ReactElement\n              if (lastChild && lastChild.key !== key) {\n                const annotationDiff = findAnnotationDiff(diff.origin, endedAnnotation.mark)\n                const objectSchemaType =\n                  endedAnnotation &&\n                  spanSchemaType.annotations &&\n                  spanSchemaType.annotations.find(\n                    (type) =>\n                      endedAnnotation &&\n                      endedAnnotation.object &&\n                      type.name === endedAnnotation.object._type\n                  )\n                returnedChildren.push(\n                  <Annotation\n                    object={endedAnnotation.object}\n                    diff={annotationDiff}\n                    path={[{_key: block._key}, 'children', {_key: child._key}]}\n                    schemaType={objectSchemaType}\n                    key={key}\n                  >\n                    <>{annotationSegments[endedAnnotation.mark]}</>\n                  </Annotation>\n                )\n              }\n              // delete annotationSegments[endedAnnotation.mark]\n              endedAnnotation = undefined\n            }\n            if (activeAnnotations.length === 0) {\n              returnedChildren.push(text)\n            }\n          } // end if seg.text\n        })\n        return React.createElement('div', {key: block._key}, ...returnedChildren)\n      }\n      throw new Error(\"'span' schemaType not found\")\n    },\n    [block, diff, inlineObjects, schemaType]\n  )\n\n  return (\n    <Block block={diff.displayValue} diff={diff}>\n      {<>{(diff.displayValue.children || []).map((child) => renderChild(child))}</>}\n    </Block>\n  )\n}\n\nfunction renderTextSegment({\n  diff,\n  child,\n  decoratorTypes,\n  seg,\n  segIndex,\n  spanSchemaType,\n}: {\n  diff: PortableTextDiff\n  child: PortableTextChild\n  decoratorTypes: {title: string; value: string}[]\n  seg: StringDiffSegment\n  segIndex: number\n  spanSchemaType: SpanTypeSchema\n}): JSX.Element {\n  // Newlines\n  if (seg.text === '\\n') {\n    return <br />\n  }\n  // Make sure we render trailing spaces correctly\n  let children = (\n    <span key={`text-${segIndex}`}>\n      {seg.text.replace(/ /g, TextSymbols.TRAILING_SPACE_SYMBOL)}\n    </span>\n  )\n  const spanDiff = child && findSpanDiffFromChild(diff.origin, child)\n  // Render decorator diff info\n  const activeMarks = child.marks || []\n  if (spanDiff) {\n    children = renderDecorators({\n      activeMarks,\n      decoratorTypes,\n      diff,\n      children,\n      seg,\n      segIndex,\n      spanDiff,\n      spanSchemaType,\n    })\n  }\n  // Render the segment with the active marks\n  if (activeMarks && activeMarks.length > 0) {\n    activeMarks.forEach((mark) => {\n      if (isDecorator(mark, spanSchemaType)) {\n        children = (\n          // eslint-disable-next-line react/no-array-index-key\n          <Decorator mark={mark} key={`decorator-${mark}-${child._key}-${segIndex}`}>\n            {children}\n          </Decorator>\n        )\n      }\n    })\n  }\n  return children\n}\n\nfunction renderDecorators({\n  activeMarks,\n  decoratorTypes,\n  diff,\n  children,\n  seg,\n  segIndex,\n  spanDiff,\n  spanSchemaType,\n}: {\n  activeMarks: string[]\n  decoratorTypes: {title: string; value: string}[]\n  diff: PortableTextDiff\n  children: JSX.Element\n  seg: StringDiffSegment\n  segIndex: number\n  spanDiff: ObjectDiff\n  spanSchemaType: SchemaType\n}): JSX.Element {\n  let returned = <span key={`text-segment-${segIndex}`}>{children}</span>\n  const fromPtDiffText: string =\n    (diff.origin.fromValue && diff.fromValue && diff.fromValue.children[0].text) || '' // Always one child\n\n  // There are cases where we have changed marks, but it's an indirect change in the diff data.\n  // For example when '<>normal-text</><>bold-text</>' and 'bold' is unbolded. Then 'bold' is added to first span,\n  // and 'bold' is removed from the second span: '<>normal-text-bold</><>-text</>'. No marks are changed.\n  // We do however want to indicate to the user that someone removed bold from 'bold'\n  // In these cases, fallback to the diff annotation information in the span itself.\n  const indirectMarksAnnotation =\n    (spanDiff && spanDiff.action !== 'unchanged' && spanDiff.annotation) || undefined\n\n  const marksDiff = spanDiff?.fields?.marks as ArrayDiff\n  const marksAnnotation =\n    (marksDiff && marksDiff.action !== 'unchanged' && marksDiff.annotation) ||\n    indirectMarksAnnotation\n\n  let marksChanged: string[] = []\n  const ptDiffChildren = fromPtDiffText\n    .split(TextSymbols.CHILD_SYMBOL)\n    .filter((text) => !!text)\n    .join('')\n  const ptDiffMatchString = ptDiffChildren\n  const controlString = ptDiffMatchString.substring(\n    0,\n    ptDiffMatchString.indexOf(seg.text) + seg.text.length\n  )\n  const toTest = controlString.substring(0, controlString.indexOf(seg.text))\n  const marks: string[] = []\n  const matches = [...toTest.matchAll(markRegex)]\n  matches.forEach((match) => {\n    const sym = match[0]\n    const set = TextSymbols.DECORATOR_SYMBOLS.concat(TextSymbols.ANNOTATION_SYMBOLS).find(\n      (aSet) => aSet.indexOf(sym) > -1\n    )\n    if (set) {\n      const isMarkStart = sym === set[0]\n      const mark: string =\n        decoratorTypes[\n          isMarkStart ? decoratorSymbolsStart.indexOf(sym) : decoratorSymbolsEnd.indexOf(sym)\n        ]?.value || sym // Annotation marks are uniqe anyway\n      const notClosed = toTest.lastIndexOf(sym) > toTest.lastIndexOf(set[1])\n      if (notClosed) {\n        marks.push(mark)\n      }\n    }\n  })\n  marksChanged = xor(activeMarks, uniq(marks))\n  // Only for decorators, annotations are taken care of elsewhere\n  if (\n    marksAnnotation &&\n    marksChanged.length > 0 &&\n    marksChanged.some((m) => isDecorator(m, spanSchemaType))\n  ) {\n    returned = (\n      <DiffCard\n        annotation={marksAnnotation}\n        key={`diffcard-annotation-${segIndex}-${marksChanged.join('-')}`}\n        as={'ins'}\n        tooltip={{\n          description: 'Changed formatting',\n        }}\n      >\n        {returned}\n      </DiffCard>\n    )\n  }\n  return returned\n}\n\nfunction isEmptyTextChange(block: PortableTextBlock, diff: PortableTextDiff) {\n  return (\n    block.children.length === 1 &&\n    block.children[0]._type === 'span' &&\n    typeof block.children[0].text === 'string' &&\n    block.children[0].text === '' &&\n    diff.origin.action !== 'unchanged'\n  )\n}\n","import React, {useMemo} from 'react'\nimport {DiffComponent, ObjectDiff} from '../../../types'\nimport PortableText from './components/PortableText'\nimport {createPortableTextDiff} from './helpers'\n\nexport const PTDiff: DiffComponent<ObjectDiff> = (props) => {\n  const {diff, schemaType} = props\n\n  const ptDiff = useMemo(() => createPortableTextDiff(diff, schemaType), [diff, schemaType])\n\n  return (\n    <div data-diff-action={diff.action}>\n      <PortableText diff={ptDiff} schemaType={schemaType} />\n    </div>\n  )\n}\n","import {Reference} from '@sanity/types'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {Box} from '@sanity/ui'\nimport {SanityPreview} from '../../../../preview'\nimport {FieldPreviewComponent} from '../../../preview'\n\nconst ReferenceWrapper = styled.div`\n  word-wrap: break-word;\n`\n\nexport const ReferencePreview: FieldPreviewComponent<Reference> = ({value, schemaType}) => (\n  <Box as={ReferenceWrapper} padding={2}>\n    <SanityPreview schemaType={schemaType} value={value} layout=\"default\" />\n  </Box>\n)\n","import React from 'react'\nimport {DiffFromTo} from '../../../diff'\nimport {DiffComponent, ReferenceDiff} from '../../../types'\nimport {ReferencePreview} from '../preview/ReferencePreview'\n\nexport const ReferenceFieldDiff: DiffComponent<ReferenceDiff> = ({diff, schemaType}) => {\n  return (\n    <DiffFromTo\n      align=\"center\"\n      diff={diff}\n      layout=\"grid\"\n      path=\"_ref\"\n      previewComponent={ReferencePreview}\n      schemaType={schemaType}\n    />\n  )\n}\n","import {Box} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {FieldPreviewComponent} from '../../../preview'\n\nconst StringWrapper = styled.div`\n  display: inline-block;\n  word-break: break-all;\n  white-space: pre-wrap;\n`\n\nexport const StringPreview: FieldPreviewComponent<string> = (props) => {\n  const {value} = props\n\n  return (\n    <Box as={StringWrapper} paddingX={2} paddingY={1}>\n      {value}\n    </Box>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {DiffFromTo, DiffString} from '../../../diff'\nimport {DiffComponent, StringDiff} from '../../../types'\nimport {StringPreview} from '../preview/StringPreview'\n\nconst StringWrapper = styled.div`\n  white-space: pre-wrap;\n  word-wrap: break-word;\n`\n\nexport const StringFieldDiff: DiffComponent<StringDiff> = ({diff, schemaType}) => {\n  const {options} = schemaType\n\n  if (options?.list) {\n    // When the string is considered to be an \"enum\", don't show individual\n    // string segment changes, rather treat is as a \"from -> to\" diff\n    return <DiffFromTo diff={diff} previewComponent={StringPreview} schemaType={schemaType} />\n  }\n\n  return (\n    <StringWrapper>\n      <DiffString diff={diff} />\n    </StringWrapper>\n  )\n}\n","import {DiffComponent, DiffComponentOptions} from '../../types'\n\nimport {BooleanFieldDiff} from '../../types/boolean/diff'\nimport {FileFieldDiff} from '../../types/file/diff'\nimport {ImageFieldDiff} from '../../types/image/diff'\nimport {NumberFieldDiff} from '../../types/number/diff'\nimport {PTDiff} from '../../types/portableText/diff'\nimport {ReferenceFieldDiff} from '../../types/reference/diff'\nimport {StringFieldDiff} from '../../types/string/diff'\n\nexport const defaultComponents: Record<\n  string,\n  DiffComponent<any> | DiffComponentOptions<any> | undefined\n> = {\n  block: PTDiff,\n  boolean: {component: BooleanFieldDiff, showHeader: false},\n  file: FileFieldDiff,\n  image: ImageFieldDiff,\n  number: NumberFieldDiff,\n  reference: ReferenceFieldDiff,\n  string: StringFieldDiff,\n}\n","import {ArraySchemaType, ObjectSchemaType, SchemaType} from '@sanity/types'\nimport {ComponentType} from 'react'\nimport {diffResolvers} from '../../TODO'\nimport {Diff, DiffComponent, DiffComponentOptions} from '../../types'\nimport {defaultComponents} from './defaultComponents'\n\nexport function resolveDiffComponent<D extends Diff = any>(\n  type: SchemaType,\n  parentSchemaType?: ArraySchemaType | ObjectSchemaType\n): DiffComponent<D> | DiffComponentOptions | undefined {\n  let itType: SchemaType | undefined = type\n\n  while (itType) {\n    const resolved =\n      itType?.components?.diff ||\n      tryResolve(itType, parentSchemaType) ||\n      defaultComponents[itType.name]\n\n    if (resolved) {\n      return resolved as DiffComponent<any>\n    }\n\n    itType = itType.type\n  }\n\n  return defaultComponents[type.jsonType]\n}\n\nfunction tryResolve(\n  schemaType: SchemaType,\n  parentSchemaType?: ArraySchemaType | ObjectSchemaType\n): DiffComponent<any> | DiffComponentOptions | undefined {\n  const resolvers = diffResolvers\n\n  let resolved: ComponentType | DiffComponentOptions | undefined\n\n  for (const resolver of resolvers) {\n    if (typeof resolver !== 'function') {\n      // eslint-disable-next-line no-console\n      console.error('Diff component resolver is not a function: ', resolver)\n      continue\n    }\n\n    resolved = resolver({schemaType, parentSchemaType})\n\n    if (resolved) {\n      return resolved as DiffComponent\n    }\n  }\n  return undefined\n}\n","import {ChangeNode, Diff, FieldChangeNode, GroupChangeNode, ItemDiff} from '../types'\n\nexport function getChangeVerb(diff: Diff): 'Added' | 'Removed' | 'Changed' {\n  const hadPrevValue = hasValue(diff.fromValue)\n  const hasNextValue = hasValue(diff.toValue)\n  if (!hadPrevValue && hasNextValue) {\n    return 'Added'\n  }\n\n  if (!hasNextValue && hadPrevValue) {\n    return 'Removed'\n  }\n\n  return 'Changed'\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nexport function noop(): void {}\n\nexport function isFieldChange(change: ChangeNode): change is FieldChangeNode {\n  return change.type === 'field'\n}\n\nexport function isGroupChange(change: ChangeNode): change is GroupChangeNode {\n  return change.type === 'group'\n}\n\nexport function isAddedItemDiff(\n  item: ItemDiff\n): item is ItemDiff & {diff: Diff & {action: 'added'}} {\n  return item.diff.action === 'added'\n}\n\nexport function isRemovedItemDiff(\n  item: ItemDiff\n): item is ItemDiff & {diff: Diff & {action: 'removed'}} {\n  return item.diff.action === 'removed'\n}\n\nexport function isUnchangedDiff(diff: Diff): diff is Diff & {action: 'unchanged'} {\n  return diff.action === 'unchanged'\n}\n\nfunction hasValue(value: unknown) {\n  return value !== null && typeof value !== 'undefined' && value !== ''\n}\n","import {\n  Path,\n  MultiFieldSet,\n  ObjectField,\n  ArraySchemaType,\n  ObjectSchemaType,\n  SchemaType,\n} from '@sanity/types'\nimport {pathToString, pathsAreEqual, getItemKeySegment} from '../../paths'\nimport {getValueError} from '../../validation'\nimport {getArrayDiffItemType} from '../../schema/helpers'\nimport {hasPTMemberType} from '../../types/portableText/diff/helpers'\nimport {\n  ArrayDiff,\n  ChangeNode,\n  ChangeTitlePath,\n  Diff,\n  DiffComponent,\n  FieldChangeNode,\n  ItemDiff,\n  ObjectDiff,\n} from '../../types'\nimport {resolveDiffComponent} from '../resolve/resolveDiffComponent'\nimport {isFieldChange} from '../helpers'\n\ninterface DiffContext {\n  itemDiff?: ItemDiff\n  parentDiff?: ArrayDiff | ObjectDiff\n  parentSchema?: ArraySchemaType | ObjectSchemaType\n  fieldFilter?: string[]\n}\n\nexport function buildChangeList(\n  schemaType: SchemaType,\n  diff: Diff,\n  path: Path = [],\n  titlePath: ChangeTitlePath = [],\n  context: DiffContext = {}\n): ChangeNode[] {\n  const diffComponent = resolveDiffComponent(schemaType, context.parentSchema)\n\n  if (!diffComponent) {\n    if (schemaType.jsonType === 'object' && diff.type === 'object') {\n      return buildObjectChangeList(schemaType as ObjectSchemaType, diff, path, titlePath, context)\n    }\n\n    if (schemaType.jsonType === 'array' && diff.type === 'array') {\n      return buildArrayChangeList(schemaType, diff, path, titlePath)\n    }\n  }\n\n  return getFieldChange(schemaType, diff, path, titlePath, context)\n}\n\nexport function buildObjectChangeList(\n  schemaType: ObjectSchemaType,\n  diff: ObjectDiff,\n  path: Path = [],\n  titlePath: ChangeTitlePath = [],\n  diffContext: DiffContext = {}\n): ChangeNode[] {\n  const changes: ChangeNode[] = []\n\n  const childContext: DiffContext = {...diffContext, parentSchema: schemaType}\n  const fieldSets =\n    schemaType.fieldsets || schemaType.fields.map((field) => ({single: true, field}))\n  for (const fieldSet of fieldSets) {\n    if (fieldSet.single) {\n      changes.push(...buildFieldChange(fieldSet.field, diff, path, titlePath, childContext))\n    } else {\n      changes.push(\n        ...buildFieldsetChangeList(fieldSet as MultiFieldSet, diff, path, titlePath, childContext)\n      )\n    }\n  }\n\n  if (changes.length < 2) {\n    return changes\n  }\n\n  return [\n    {\n      type: 'group',\n      key: pathToString(path) || 'root',\n      path,\n      titlePath,\n      changes: reduceTitlePaths(changes, titlePath.length),\n      schemaType,\n    },\n  ]\n}\n\nexport function buildFieldChange(\n  field: ObjectField,\n  diff: ObjectDiff,\n  path: Path,\n  titlePath: ChangeTitlePath,\n  diffContext: DiffContext & {fieldFilter?: string[]} = {}\n): ChangeNode[] {\n  const {fieldFilter, ...context} = diffContext\n  const fieldDiff = diff.fields[field.name]\n  if (!fieldDiff || !fieldDiff.isChanged || (fieldFilter && !fieldFilter.includes(field.name))) {\n    return []\n  }\n\n  const fieldPath = path.concat([field.name])\n  const fieldTitlePath = titlePath.concat([field.type.title || field.name])\n  return buildChangeList(field.type as any, fieldDiff, fieldPath, fieldTitlePath, context)\n}\n\nexport function buildFieldsetChangeList(\n  fieldSet: MultiFieldSet,\n  diff: ObjectDiff,\n  path: Path,\n  titlePath: ChangeTitlePath,\n  diffContext: DiffContext & {fieldFilter?: string[]} = {}\n): ChangeNode[] {\n  const {fields, name, title, readOnly, hidden} = fieldSet\n  const {fieldFilter, ...context} = diffContext\n\n  const fieldSetHidden = hidden\n  const fieldsetReadOnly = readOnly\n\n  const fieldSetTitlePath = titlePath.concat([title || name])\n  const changes: ChangeNode[] = []\n\n  for (const field of fields) {\n    const fieldDiff = diff.fields[field.name]\n    if (!fieldDiff || !fieldDiff.isChanged || (fieldFilter && !fieldFilter.includes(field.name))) {\n      continue\n    }\n\n    const fieldPath = path.concat([field.name])\n    const fieldTitlePath = fieldSetTitlePath.concat([field.type.title || field.name])\n    changes.push(\n      ...buildChangeList(\n        {\n          readOnly: fieldsetReadOnly,\n          hidden: fieldSetHidden,\n          ...field.type,\n        } as any,\n        fieldDiff,\n        fieldPath,\n        fieldTitlePath,\n        context\n      )\n    )\n  }\n\n  if (changes.length < 2) {\n    return changes\n  }\n\n  return [\n    {\n      type: 'group',\n      key: pathToString(path) || 'root',\n      fieldsetName: name,\n      path,\n      titlePath: fieldSetTitlePath,\n      changes: reduceTitlePaths(changes, fieldSetTitlePath.length),\n      readOnly: fieldsetReadOnly,\n      hidden: fieldSetHidden,\n    },\n  ]\n}\n\nexport function buildArrayChangeList(\n  schemaType: ArraySchemaType,\n  diff: ArrayDiff,\n  path: Path = [],\n  titlePath: ChangeTitlePath = []\n): ChangeNode[] {\n  const changedOrMoved = diff.items.filter(\n    (item) => (item.hasMoved && item.fromIndex !== item.toIndex) || item.diff.action !== 'unchanged'\n  )\n\n  if (changedOrMoved.length === 0) {\n    return []\n  }\n\n  const isPortableText = hasPTMemberType(schemaType)\n  const list: ChangeNode[] = []\n  const changes = changedOrMoved.reduce((acc, itemDiff) => {\n    const memberTypes = getArrayDiffItemType(itemDiff.diff, schemaType)\n    const memberType = memberTypes.toType || memberTypes.fromType\n    if (!memberType) {\n      // eslint-disable-next-line no-console\n      console.warn('Could not determine schema type for item at %s', pathToString(path))\n      return acc\n    }\n\n    const segment =\n      getItemKeySegment(itemDiff.diff.fromValue) ||\n      getItemKeySegment(itemDiff.diff.toValue) ||\n      diff.items.indexOf(itemDiff)\n\n    const itemPath = path.concat(segment)\n    const itemContext: DiffContext = {itemDiff, parentDiff: diff, parentSchema: schemaType}\n    const itemTitlePath = titlePath.concat({\n      hasMoved: itemDiff.hasMoved,\n      toIndex: itemDiff.toIndex,\n      fromIndex: itemDiff.fromIndex,\n      annotation:\n        itemDiff.diff.action === 'unchanged' ? itemDiff.annotation : itemDiff.diff.annotation,\n    })\n\n    const attachItemDiff = (change: ChangeNode): ChangeNode => {\n      if (change.type === 'field' && pathsAreEqual(itemPath, change.path)) {\n        change.itemDiff = itemDiff\n      }\n\n      return change\n    }\n\n    const children = buildChangeList(\n      memberType,\n      itemDiff.diff,\n      itemPath,\n      itemTitlePath,\n      itemContext\n    ).map(attachItemDiff)\n\n    if (isPortableText) {\n      children.filter(isFieldChange).forEach((field, index, siblings) => {\n        field.showHeader = siblings.length === 1\n        field.showIndex = itemDiff.fromIndex !== itemDiff.toIndex && itemDiff.hasMoved\n      })\n    }\n\n    if (children.length === 0) {\n      // This can happen when there are no changes to the actual element, it's just been moved\n      acc.push(...getFieldChange(memberType, itemDiff.diff, itemPath, itemTitlePath, itemContext))\n    } else {\n      acc.push(...children)\n    }\n\n    return acc\n  }, list)\n\n  if (changes.length > 1) {\n    return [\n      {\n        type: 'group',\n        key: pathToString(path) || 'root',\n        path,\n        titlePath,\n        changes: reduceTitlePaths(changes, titlePath.length),\n        schemaType,\n      },\n    ]\n  }\n\n  return changes\n}\n\nfunction getFieldChange(\n  schemaType: SchemaType,\n  diff: Diff,\n  path: Path,\n  titlePath: ChangeTitlePath,\n  {itemDiff, parentDiff, parentSchema}: DiffContext = {}\n): FieldChangeNode[] {\n  const {fromValue, toValue, type} = diff\n\n  // Treat undefined => [] as no change\n  if (type === 'array' && isEmpty(fromValue) && isEmpty(toValue)) {\n    return []\n  }\n\n  let error\n  if (typeof fromValue !== 'undefined') {\n    error = getValueError(fromValue, schemaType)\n  }\n\n  if (!error && typeof toValue !== 'undefined') {\n    error = getValueError(toValue, schemaType)\n  }\n\n  let showHeader = true\n  let component: DiffComponent | undefined\n\n  const diffComponent = resolveDiffComponent(schemaType, parentSchema)\n  if (diffComponent && typeof diffComponent === 'function') {\n    // Just a diff component with default options\n    component = diffComponent\n  } else if (diffComponent) {\n    // Diff component with options\n    component = (diffComponent as any).component\n    showHeader =\n      typeof (diffComponent as any).showHeader === 'undefined'\n        ? showHeader\n        : (diffComponent as any).showHeader\n  }\n\n  return [\n    {\n      type: 'field',\n      diff,\n      path,\n      error,\n      itemDiff,\n      parentDiff,\n      titlePath,\n      schemaType,\n      showHeader,\n      showIndex: true,\n      key: pathToString(path) || 'root',\n      diffComponent: error ? undefined : component,\n      parentSchema,\n    },\n  ]\n}\n\nfunction reduceTitlePaths(changes: ChangeNode[], byLength = 1): ChangeNode[] {\n  return changes.map((change) => {\n    change.titlePath = change.titlePath.slice(byLength)\n    return change\n  })\n}\n\nfunction isEmpty(item: unknown): boolean {\n  return (Array.isArray(item) && item.length === 0) || item === null || typeof item === 'undefined'\n}\n","import {Path, PathSegment} from '@sanity/types'\nimport {ChangeNode, FieldChangeNode} from '../../types'\nimport {getItemKey} from '../../paths'\n\nconst isAddedAction = (change: ChangeNode): boolean => {\n  return change.type === 'field' && change.diff.action === 'added'\n}\n\nconst flattenChangeNode = (changeNode: ChangeNode): FieldChangeNode[] => {\n  if (changeNode.type !== 'group') {\n    return [changeNode]\n  }\n\n  const newSubChanges: FieldChangeNode[] = []\n\n  changeNode.changes.forEach((cChange) => {\n    newSubChanges.push(...flattenChangeNode(cChange))\n  })\n\n  return newSubChanges\n}\n\n/**\n * Checks whether a path is under another path within the tree.\n */\nconst isSubpathOf = (subPath: Path, parentPath: Path): boolean => {\n  if (parentPath.length >= subPath.length) {\n    return false\n  }\n\n  for (let i = 0; i < parentPath.length; i++) {\n    if (parentPath[i] !== subPath[i]) {\n      return false\n    }\n  }\n\n  return true\n}\n\nconst pathSegmentOfCorrectType = (item: Record<string, unknown>, child: string): PathSegment => {\n  const nextItem = item[child]\n\n  const key = getItemKey(nextItem)\n\n  if (key) {\n    return {_key: key}\n  }\n\n  const isArray = Array.isArray(item)\n\n  if (isArray) {\n    return parseInt(child, 10)\n  }\n\n  return child\n}\n\nexport {isAddedAction, flattenChangeNode, isSubpathOf, pathSegmentOfCorrectType}\n","import {isIndexSegment, isKeyedObject, isKeySegment, isTypedObject, Path} from '@sanity/types'\nimport {diffItem} from 'sanity-diff-patch'\nimport {isRecord} from '../../../util/isRecord'\nimport {\n  findIndex,\n  getItemKeySegment,\n  getValueAtPath,\n  isEmptyObject,\n  pathToString,\n} from '../../paths'\nimport {\n  ArrayDiff,\n  ChangeNode,\n  Diff,\n  DiffPatch,\n  InsertDiffPatch,\n  ItemDiff,\n  ObjectDiff,\n  FieldOperationsAPI,\n  PatchOperations,\n  SetDiffPatch,\n  UnsetDiffPatch,\n} from '../../types'\nimport {flattenChangeNode, isAddedAction, isSubpathOf, pathSegmentOfCorrectType} from './helpers'\n\nconst diffOptions = {diffMatchPatch: {enabled: false}}\n\nexport function undoChange(\n  change: ChangeNode,\n  rootDiff: ObjectDiff | null,\n  documentOperations: FieldOperationsAPI\n): void {\n  if (!rootDiff) {\n    return\n  }\n\n  const patches: PatchOperations[] = []\n\n  if (change.type === 'group') {\n    const allChanges = flattenChangeNode(change)\n\n    const unsetChanges = allChanges.filter(isAddedAction)\n\n    allChanges\n      .filter((child) => !isAddedAction(child))\n      .forEach((child) => undoChange(child, rootDiff, documentOperations))\n\n    patches.push(\n      ...buildUnsetPatches(\n        rootDiff,\n        unsetChanges.map((unsetChange) => unsetChange.path)\n      )\n    )\n  } else if (change.diff.action === 'added') {\n    // The reverse of an add operation is an unset -\n    // so we don't need to worry about moved items in this case\n    patches.push(...buildUnsetPatches(rootDiff, [change.path]))\n  } else if (\n    change.type === 'field' &&\n    change.itemDiff &&\n    change.parentDiff &&\n    change.parentDiff.type === 'array' &&\n    change.itemDiff.hasMoved\n  ) {\n    // If an array item has moved, we need to unset + insert it again\n    // (we lack a \"move\" patch currently)\n    patches.push(...buildMovePatches(change.itemDiff, change.parentDiff, change.path))\n  } else {\n    // For all other operations, try to find the most optimal case\n    patches.push(...buildUndoPatches(change.diff, rootDiff, change.path))\n  }\n\n  documentOperations.patch.execute(patches)\n}\n\nfunction buildUnsetPatch(rootDiff: ObjectDiff, path: Path, concurrentUnsetPaths: Path[]): Path {\n  const previousValue = rootDiff.toValue as Record<string, unknown>\n\n  return furthestEmptyAncestor(previousValue, path, concurrentUnsetPaths)\n}\n\nfunction buildUnsetPatches(rootDiff: ObjectDiff, paths: Path[]): PatchOperations[] {\n  const patches: Path[] = []\n\n  for (let i = 0; i < paths.length; i++) {\n    const unsetByEarlierPatch = patches.some((patch) => isSubpathOf(paths[i], patch))\n\n    if (unsetByEarlierPatch) {\n      continue\n    }\n\n    patches.push(buildUnsetPatch(rootDiff, paths[i], paths))\n  }\n\n  return [{unset: [...new Set(patches.map(pathToString))]}]\n}\n\n/**\n * Find the path to the furthest empty ancestor that's also a stub.\n *\n * Used for removing all stubs when unsetting a nested value.\n */\nfunction furthestEmptyAncestor(\n  /**\n   * The state of the tree before the change was made.\n   */\n  previousValue: Record<string, unknown>,\n  /**\n   * Path of the value to unset. Used for recursing.\n   */\n  currentPath: Path,\n  /**\n   * An optional list of path to forcefully mark as a stub regardless of what it actually is.\n   */\n  ignorePaths: Path[] = [],\n  /**\n   * Same as the first value of currentPath.\n   */\n  initialPath?: Path\n): Path {\n  if (currentPath.length <= 0) {\n    /*\n     * This means we are at root and no ancestors are stubs. We\n     * can therefore safely unset only the actual value.\n     */\n    if (!initialPath) {\n      /*\n       * Will happen if the function is started with `currentPath = []`.\n       */\n      throw new Error('Root has no ancestor')\n    }\n\n    return initialPath\n  }\n\n  const ancestorPath = currentPath.slice(0, -1)\n  const ancestorValue = getValueAtPath(previousValue, ancestorPath)\n\n  /*\n   * If the ancestor also is a stub we can add it to the ignore-list\n   * so it'll be \"remembered\" as a stub without us having to scan\n   * the whole tree again.\n   */\n  const updatedIgnorePaths = [\n    ancestorPath,\n\n    /*\n     * We can filter out all the subpaths from under this ancestor\n     * because since we ignore it higher up in the tree it doesn't\n     * matter anymore what the values of subpaths are.\n     */\n    ...ignorePaths.filter((path) => !isSubpathOf(path, ancestorPath)),\n  ]\n\n  return isStub(ancestorValue, ancestorPath, ignorePaths)\n    ? furthestEmptyAncestor(previousValue, ancestorPath, updatedIgnorePaths, initialPath)\n    : currentPath\n}\n\nfunction buildMovePatches(\n  itemDiff: ItemDiff,\n  parentDiff: ArrayDiff,\n  path: Path\n): PatchOperations[] {\n  const basePath = path.slice(0, -1)\n  const {parentValue, fromIndex, fromValue} = getFromItem(parentDiff, itemDiff)\n\n  let insertLocation\n  if (fromIndex === 0) {\n    // If it was moved from the beginning, we can use a simple prepend\n    insertLocation = {before: pathToString([...basePath, 0])}\n  } else {\n    // Try to use item key segments where possible, falling back to array indexes\n    const prevIndex = fromIndex - 1\n    const prevItemKey = getItemKeySegment(parentValue[prevIndex])\n    const prevSegment = prevItemKey || prevIndex\n    insertLocation = {after: pathToString([...basePath, prevSegment])}\n  }\n\n  return [\n    {\n      unset: [pathToString(path)],\n    },\n    {\n      insert: {...insertLocation, items: [fromValue]} as any,\n    },\n  ]\n}\n\nfunction buildUndoPatches(diff: Diff, rootDiff: ObjectDiff, path: Path): PatchOperations[] {\n  const patches = diffItem(diff.toValue, diff.fromValue, diffOptions, path) as DiffPatch[]\n\n  const inserts = patches\n    .filter((patch): patch is InsertDiffPatch => patch.op === 'insert')\n    .map(({after, items}) => ({insert: {after: pathToString(after), items}} as any))\n\n  const unsets = patches\n    .filter((patch): patch is UnsetDiffPatch => patch.op === 'unset')\n    .reduce((acc, patch) => acc.concat(pathToString(patch.path)), [] as string[])\n\n  const stubbedPaths = new Set<string>()\n  const stubs: PatchOperations[] = []\n\n  let hasSets = false\n  const sets = patches\n    .filter((patch): patch is SetDiffPatch => patch.op === 'set')\n    .reduce((acc, patch) => {\n      hasSets = true\n      stubs.push(...getParentStubs(patch.path, rootDiff, stubbedPaths))\n      acc[pathToString(patch.path)] = patch.value\n      return acc\n    }, {} as Record<string, unknown>)\n\n  return [\n    ...stubs,\n    ...inserts,\n    ...(unsets.length > 0 ? [{unset: unsets}] : []),\n    ...(hasSets ? [{set: sets}] : []),\n  ]\n}\n\nfunction getParentStubs(path: Path, rootDiff: ObjectDiff, stubbed: Set<string>): PatchOperations[] {\n  const value = rootDiff.fromValue as Record<string, unknown>\n  const nextValue = rootDiff.toValue as Record<string, unknown>\n  const stubs: PatchOperations[] = []\n\n  for (let i = 1; i <= path.length; i++) {\n    const subPath = path.slice(0, i)\n    const pathStr = pathToString(subPath)\n    if (stubbed.has(pathStr)) {\n      continue\n    }\n\n    const nextSegment = path[i]\n    const nextIsArrayElement = isKeySegment(nextSegment) || isIndexSegment(nextSegment)\n    const itemValue = getValueAtPath(value, subPath)\n    const stub = getStubValue(itemValue)\n\n    // If the next array element does not exist, we need to inject an insert stub here\n    if (\n      nextIsArrayElement &&\n      Array.isArray(itemValue) &&\n      !getValueAtPath(nextValue, path.slice(0, i + 1))\n    ) {\n      const indexAtPrev = findIndex(itemValue, nextSegment)\n      const prevItem = itemValue[indexAtPrev - 1]\n      const nextItem = getValueAtPath(value, subPath.concat(nextSegment))\n      const prevSeg = isKeyedObject(prevItem) ? {_key: prevItem._key} : indexAtPrev - 1\n      const after = pathToString(subPath.concat(indexAtPrev < 1 ? 0 : prevSeg))\n      stubs.push({setIfMissing: {[pathStr]: []}})\n      stubs.push({insert: {after, items: [getStubValue(nextItem)]} as any})\n\n      i++\n      continue\n    }\n\n    if (typeof stub === 'undefined') {\n      continue\n    }\n\n    stubbed.add(pathStr)\n    stubs.push({setIfMissing: {[pathStr]: stub as Record<string, unknown>}})\n  }\n  return stubs\n}\n\n/**\n * Check if all items in an object or an array are stubs.\n */\nfunction onlyContainsStubs(\n  /**\n   * The item to check whether is a stub.\n   */\n  item: unknown,\n  /**\n   * The path to the item we're checking.\n   */\n  path: Path,\n  /**\n   * An optional list of path to forcefully mark as a stub regardless of what it actually is.\n   */\n  ignorePaths?: Path[]\n): boolean {\n  /*\n   * If we're trying to check for stubs inside something which isn't an object\n   * or an array we're checking a string for example and it they cannot\n   * contain stubs.\n   */\n  if (!isRecord(item) || !Array.isArray(item)) {\n    return false\n  }\n\n  for (const child in item) {\n    if (!Object.prototype.hasOwnProperty.call(item, child)) {\n      continue\n    }\n\n    /*\n     * _type or _key field alone doesn't affect whether the field is a stub or\n     * not.\n     */\n    if (child === '_type' || child === '_key') {\n      continue\n    }\n\n    const nextPath = [...path, pathSegmentOfCorrectType(item as Record<string, unknown>, child)]\n\n    if (!isStub(item[child], nextPath, ignorePaths)) {\n      return false\n    }\n  }\n\n  return true\n}\n\nfunction isStub(item: unknown, path: Path, ignorePaths?: Path[]): boolean {\n  const isIgnoredPath = ignorePaths?.some(\n    (ignorePath) => pathToString(ignorePath) === pathToString(path)\n  )\n\n  const isEmptyArray = Array.isArray(item) && item.length <= 0\n\n  return (\n    isIgnoredPath ||\n    item === undefined ||\n    item === null ||\n    isEmptyArray ||\n    isEmptyObject(item) ||\n    onlyContainsStubs(item, path, ignorePaths)\n  )\n}\n\nfunction getStubValue(item: unknown): unknown {\n  if (Array.isArray(item)) {\n    return []\n  }\n\n  if (typeof item !== 'object' || item === null) {\n    return undefined\n  }\n\n  const props: Record<string, unknown> = {}\n\n  if (isKeyedObject(item)) {\n    props._key = item._key\n  }\n\n  if (isTypedObject(item)) {\n    props._type = item._type\n  }\n\n  return props\n}\n\nfunction getFromItem(parentDiff: ArrayDiff, itemDiff: ItemDiff) {\n  if (parentDiff.fromValue && typeof itemDiff.fromIndex === 'number') {\n    const fromValue = parentDiff.fromValue[itemDiff.fromIndex]\n    return {\n      parentValue: parentDiff.fromValue,\n      fromIndex: itemDiff.fromIndex,\n      fromValue,\n    }\n  }\n\n  // Shouldn't ever happen\n  throw new Error(`Failed to find item at index ${itemDiff.fromIndex}`)\n}\n","import {createContext} from 'react'\nimport {ConditionalReadOnlyContextValue} from './types'\n\n/**\n * @internal\n */\nexport const ConditionalReadOnlyContext = createContext<ConditionalReadOnlyContextValue | null>(\n  null\n)\n","import {useContext} from 'react'\nimport {ConditionalReadOnlyContext} from './ConditionalReadOnlyContext'\n\n/**\n * @internal\n */\nexport function useConditionalReadOnly(): boolean | null {\n  const context = useContext(ConditionalReadOnlyContext)\n\n  if (!context) {\n    return null\n  }\n\n  return context.readOnly || null\n}\n","import {Path} from '@sanity/types'\nimport React from 'react'\nimport {Tooltip, TooltipProps, Text, Stack, Flex, Inline, Label} from '@sanity/ui'\nimport {LegacyLayerProvider} from '../../../components/transitional'\nimport {UserAvatar} from '../../../components/UserAvatar'\nimport {useTimeAgo} from '../../../hooks'\nimport {AnnotationDetails, Diff} from '../../types'\nimport {getAnnotationAtPath, useAnnotationColor} from '../annotations'\nimport {useUser} from '../../../datastores'\n\nexport interface DiffTooltipProps extends TooltipProps {\n  children: React.ReactElement\n  description?: React.ReactNode\n  diff: Diff\n  path?: Path | string\n}\n\nexport interface DiffTooltipWithAnnotationsProps extends TooltipProps {\n  annotations: AnnotationDetails[]\n  children: React.ReactElement\n  description?: React.ReactNode\n}\n\nexport function DiffTooltip(props: DiffTooltipProps | DiffTooltipWithAnnotationsProps) {\n  if ('diff' in props) {\n    const {diff, path = [], ...restProps} = props\n    const annotation = getAnnotationAtPath(diff, path)\n\n    return <DiffTooltipWithAnnotation {...restProps} annotations={annotation ? [annotation] : []} />\n  }\n\n  return <DiffTooltipWithAnnotation {...props} />\n}\n\nfunction DiffTooltipWithAnnotation(props: DiffTooltipWithAnnotationsProps) {\n  const {annotations, children, description = 'Changed', ...restProps} = props\n\n  if (!annotations) {\n    return children\n  }\n\n  const content = (\n    <Stack padding={3} space={2}>\n      <Label size={1} style={{textTransform: 'uppercase'}} muted>\n        {description}\n      </Label>\n      <Stack space={2}>\n        {annotations.map((annotation, idx) => (\n          <AnnotationItem annotation={annotation} key={idx} />\n        ))}\n      </Stack>\n    </Stack>\n  )\n\n  return (\n    <LegacyLayerProvider zOffset=\"paneFooter\">\n      <Tooltip\n        content={content}\n        // data-placement={restProps.placement}\n        portal\n        allowedAutoPlacements={['top', 'bottom']}\n        {...restProps}\n      >\n        {children}\n      </Tooltip>\n    </LegacyLayerProvider>\n  )\n}\n\nfunction AnnotationItem({annotation}: {annotation: AnnotationDetails}) {\n  const {author, timestamp} = annotation\n  const [user] = useUser(author)\n  const color = useAnnotationColor(annotation)\n  const timeAgo = useTimeAgo(timestamp, {minimal: true})\n\n  return (\n    <Inline space={2}>\n      <Flex\n        align=\"center\"\n        paddingRight={3}\n        style={{\n          backgroundColor: color.background,\n          color: color.text,\n          borderRadius: 'calc(23px / 2)',\n        }}\n      >\n        <UserAvatar user={author} />\n        <Inline paddingLeft={2}>\n          <Text muted size={1} style={{color: color.text}}>\n            {user ? user.displayName : 'Loadingâ€¦'}\n          </Text>\n        </Inline>\n      </Flex>\n      <Text as=\"time\" muted size={1} dateTime={timestamp}>\n        {timeAgo}\n      </Text>\n    </Inline>\n  )\n}\n","import {Path} from '@sanity/types'\nimport React, {forwardRef, useMemo} from 'react'\nimport {Card, rem} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {getAnnotationAtPath, useAnnotationColor} from '../annotations'\nimport {Annotation, Diff} from '../../types'\nimport {DiffTooltip} from './DiffTooltip'\n\nexport interface DiffCardProps {\n  annotation?: Annotation\n  as?: React.ElementType | keyof JSX.IntrinsicElements\n  diff?: Diff\n  disableHoverEffect?: boolean\n  path?: Path | string\n  tooltip?: {description?: React.ReactNode} | boolean\n}\n\nconst StyledCard = styled(Card)`\n  --diff-card-radius: ${({theme}) => rem(theme.sanity.radius[2])};\n  --diff-card-bg-color: ${({theme}) => theme.sanity.color.card.enabled.bg};\n\n  max-width: 100%;\n  position: relative;\n  border-radius: var(--diff-card-radius);\n\n  &:not(del) {\n    text-decoration: none;\n  }\n\n  &[data-hover] {\n    &::after {\n      content: '';\n      display: block;\n      position: absolute;\n      left: 0;\n      right: 0;\n      bottom: 0;\n    }\n\n    &:hover {\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n\n      &::after {\n        bottom: -3px;\n        border-top: 1px solid var(---diff-card-bg-color);\n        border-bottom: 2px solid currentColor;\n        border-bottom-left-radius: var(--diff-card-radius);\n        border-bottom-right-radius: var(--diff-card-radius);\n      }\n    }\n\n    [data-from-to-layout]:hover & {\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n\n      &::after {\n        bottom: -3px;\n        border-top: 1px solid var(---diff-card-bg-color);\n        border-bottom: 2px solid currentColor;\n        border-bottom-left-radius: var(--diff-card-radius);\n        border-bottom-right-radius: var(--diff-card-radius);\n      }\n    }\n  }\n`\n\nconst EMPTY_PATH: Path = []\n\nexport const DiffCard = forwardRef(function DiffCard(\n  props: DiffCardProps & Omit<React.HTMLProps<HTMLElement>, 'as' | 'height'>,\n  ref\n) {\n  const {\n    annotation: annotationProp,\n    as = 'div',\n    children,\n    className,\n    diff,\n    disableHoverEffect,\n    path = EMPTY_PATH,\n    style = {},\n    tooltip,\n    ...restProps\n  } = props\n\n  const annotation = useMemo(\n    () => annotationProp || getAnnotationAtPath(diff!, path),\n    [annotationProp, diff, path]\n  )\n\n  const color = useAnnotationColor(annotation)\n\n  const element = (\n    <StyledCard\n      {...restProps}\n      as={as}\n      className={className}\n      data-hover={disableHoverEffect || !annotation ? undefined : ''}\n      ref={ref}\n      radius={1}\n      style={{\n        ...style,\n        backgroundColor: color.background,\n        color: color.text,\n      }}\n    >\n      {children}\n    </StyledCard>\n  )\n\n  if (tooltip && annotation) {\n    return (\n      <DiffTooltip\n        annotations={[annotation]}\n        description={tooltip && typeof tooltip === 'object' && tooltip.description}\n      >\n        {element}\n      </DiffTooltip>\n    )\n  }\n\n  return element\n})\n","import React from 'react'\nimport {Box, rem, Text} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {FromToIndex, Annotation, FieldChangeNode} from '../../types'\nimport {getAnnotationAtPath} from '../annotations'\nimport {DiffCard} from './DiffCard'\n\nconst RoundedCard = styled.div`\n  border-radius: ${({theme}) => rem(theme.sanity.radius[2])};\n  padding: ${({theme}) => rem(theme.sanity.space[1])};\n`\n\nconst AnnotationText = styled(Text)`\n  &:not([hidden]) {\n    color: inherit;\n  }\n`\n\nexport function ChangeTitleSegment(props: {\n  change?: FieldChangeNode\n  segment: string | FromToIndex\n}) {\n  const {change, segment} = props\n\n  if (typeof segment === 'string') {\n    return (\n      <Box style={segment.length > 30 ? {maxWidth: 100} : {}}>\n        <Text title={segment} size={1} weight=\"semibold\" textOverflow=\"ellipsis\">\n          {segment}\n        </Text>\n      </Box>\n    )\n  }\n\n  const {hasMoved, fromIndex, toIndex, annotation} = segment\n  const created = typeof fromIndex === 'undefined'\n  const deleted = typeof toIndex === 'undefined'\n  if (created) {\n    // Item was created\n    return <CreatedTitleSegment annotation={annotation} change={change} toIndex={toIndex} />\n  }\n\n  if (deleted) {\n    // Item was deleted\n    return <DeletedTitleSegment annotation={annotation} fromIndex={fromIndex} />\n  }\n\n  if (hasMoved && typeof toIndex !== 'undefined' && typeof fromIndex !== 'undefined') {\n    // Item was moved\n    return <MovedTitleSegment annotation={annotation} fromIndex={fromIndex} toIndex={toIndex} />\n  }\n\n  // Changed/unchanged\n  const readableIndex = (toIndex || 0) + 1\n  return (\n    <Box padding={1}>\n      <Text size={1} weight=\"semibold\">\n        #{readableIndex}\n      </Text>\n    </Box>\n  )\n}\n\nfunction CreatedTitleSegment(props: {\n  annotation: Annotation | undefined\n  change?: FieldChangeNode\n  toIndex?: number\n}) {\n  const {annotation: annotationProp, change, toIndex = 0} = props\n  const readableIndex = toIndex + 1\n  const description = `Added in position ${readableIndex}`\n  const content = <>#{readableIndex}</>\n  const diffAnnotation = change?.diff ? getAnnotationAtPath(change.diff, []) : undefined\n  const annotation = diffAnnotation || annotationProp\n\n  if (annotation) {\n    return (\n      <DiffCard annotation={annotation} tooltip={{description}} as={RoundedCard}>\n        <AnnotationText\n          size={1}\n          weight=\"semibold\"\n          forwardedAs=\"ins\"\n          style={{textDecoration: 'none'}}\n        >\n          {content}\n        </AnnotationText>\n      </DiffCard>\n    )\n  }\n\n  return (\n    <Text size={1} weight=\"semibold\">\n      {content}\n    </Text>\n  )\n}\n\nfunction DeletedTitleSegment(props: {annotation: Annotation | undefined; fromIndex?: number}) {\n  const {annotation, fromIndex = 0} = props\n  const readableIndex = fromIndex + 1\n  const description = `Removed from position ${readableIndex}`\n  return (\n    <DiffCard annotation={annotation || null} as={RoundedCard} tooltip={{description}}>\n      <AnnotationText size={1} weight=\"semibold\" forwardedAs=\"del\">\n        #{readableIndex}\n      </AnnotationText>\n    </DiffCard>\n  )\n}\n\nfunction MovedTitleSegment(props: {\n  annotation: Annotation | undefined\n  fromIndex: number\n  toIndex: number\n}) {\n  const {annotation, fromIndex, toIndex} = props\n  const indexDiff = toIndex - fromIndex\n  const indexSymbol = indexDiff < 0 ? 'â†‘' : 'â†“'\n  const positions = Math.abs(indexDiff)\n  const description = `Moved ${positions} position${positions === 1 ? '' : 's'} ${\n    indexDiff < 0 ? 'up' : 'down'\n  }`\n\n  return (\n    <>\n      <Box padding={1}>\n        <AnnotationText size={1} weight=\"semibold\">\n          #{toIndex + 1}\n        </AnnotationText>\n      </Box>\n      <DiffCard annotation={annotation} as={RoundedCard} tooltip={{description}}>\n        <AnnotationText size={1} weight=\"semibold\">\n          {indexSymbol}\n          {Math.abs(indexDiff)}\n        </AnnotationText>\n      </DiffCard>\n    </>\n  )\n}\n","import React from 'react'\nimport {Breadcrumbs, Text} from '@sanity/ui'\nimport {ChangeTitlePath, FieldChangeNode} from '../../types'\nimport {ChangeTitleSegment} from './ChangeTitleSegment'\n\nexport function ChangeBreadcrumb(props: {change?: FieldChangeNode; titlePath: ChangeTitlePath}) {\n  const {change, titlePath} = props\n\n  return (\n    <Breadcrumbs\n      separator={\n        <Text muted size={1}>\n          /\n        </Text>\n      }\n    >\n      {titlePath.map((titleSegment, idx) => {\n        const showSegment = typeof titleSegment === 'string' || !change || change.showIndex\n\n        if (!showSegment) {\n          return null\n        }\n\n        return <ChangeTitleSegment change={change} key={idx} segment={titleSegment} />\n      })}\n    </Breadcrumbs>\n  )\n}\n","import React from 'react'\nimport {ErrorOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Flex, Text} from '@sanity/ui'\nimport {isDev} from '../../../environment'\n\nexport interface DiffErrorBoundaryProps {\n  children: React.ReactNode\n}\n\nexport interface DiffErrorBoundaryState {\n  error?: Error\n}\n\nexport class DiffErrorBoundary extends React.Component<\n  DiffErrorBoundaryProps,\n  DiffErrorBoundaryState\n> {\n  static getDerivedStateFromError(error: Error) {\n    return {error}\n  }\n\n  state: DiffErrorBoundaryState = {}\n\n  // eslint-disable-next-line class-methods-use-this\n  componentDidCatch(error: Error) {\n    console.error('Error rendering diff component: ')\n    console.error(error)\n  }\n\n  render() {\n    const {error} = this.state\n\n    if (!error) {\n      return this.props.children\n    }\n\n    return (\n      <Card padding={3} radius={2} tone=\"critical\">\n        <Flex>\n          <Text size={1}>\n            <ErrorOutlineIcon />\n          </Text>\n\n          <Box paddingLeft={3}>\n            <Text as=\"h3\" size={1} weight=\"medium\">\n              Rendering the changes to this field caused an error\n            </Text>\n\n            {isDev && (\n              <Box marginTop={2}>\n                <Text as=\"p\" size={1}>\n                  Check the developer console for more information\n                </Text>\n              </Box>\n            )}\n          </Box>\n        </Flex>\n      </Card>\n    )\n  }\n}\n","import {Text, TextProps} from '@sanity/ui'\nimport React, {createElement} from 'react'\nimport {ArrowRightIcon, ArrowDownIcon} from '@sanity/icons'\n\nexport type FromToArrowDirection = 'down' | 'right'\n\nconst arrowComponents = {\n  down: ArrowDownIcon,\n  right: ArrowRightIcon,\n}\n\nexport function FromToArrow(\n  props: {direction?: FromToArrowDirection} & TextProps &\n    Omit<React.HTMLProps<HTMLDivElement>, 'children' | 'ref'>\n) {\n  const {direction = 'right', ...restProps} = props\n  const arrowComponent = arrowComponents[direction]\n\n  return (\n    <Text muted size={1} {...restProps}>\n      {createElement(arrowComponent)}\n    </Text>\n  )\n}\n","import {Box, BoxProps, Card, Code, Label, Stack} from '@sanity/ui'\nimport React, {useCallback, useEffect, useRef, useState} from 'react'\nimport styled, {DefaultTheme, StyledComponent} from 'styled-components'\nimport {pathToString} from '../../paths'\nimport {FieldChangeNode} from '../../types'\nimport {FromToArrow} from './FromToArrow'\n\nexport interface DiffInspectWrapperProps {\n  children: React.ReactNode\n  change: FieldChangeNode\n  as?: StyledComponent<'div', DefaultTheme>\n}\n\nconst CodeWrapper = styled.pre`\n  overflow-x: auto;\n  position: relative;\n`\n\nconst Meta = styled.div`\n  position: absolute;\n  top: 0;\n  right: 0;\n`\n\nexport function DiffInspectWrapper(props: DiffInspectWrapperProps & BoxProps): React.ReactElement {\n  const {children, as, change, ...restProps} = props\n  const isHovering = useRef(false)\n  const [isInspecting, setIsInspecting] = useState(false)\n\n  const toggleInspect = useCallback(() => setIsInspecting((state) => !state), [setIsInspecting])\n  const handleMouseEnter = useCallback(() => (isHovering.current = true), [])\n  const handleMouseLeave = useCallback(() => (isHovering.current = false), [isHovering])\n\n  useEffect(() => {\n    function onKeyDown(evt: KeyboardEvent) {\n      const {metaKey, key} = evt\n      if (metaKey && key === 'i' && isHovering.current) {\n        toggleInspect()\n      }\n    }\n\n    window.addEventListener('keydown', onKeyDown, false)\n    return () => window.removeEventListener('keydown', onKeyDown, false)\n  }, [toggleInspect])\n\n  return (\n    <Box as={as} onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave} {...restProps}>\n      {isInspecting ? <DiffInspector change={change} /> : children}\n    </Box>\n  )\n}\n\nconst MetaLabel = ({title}: {title: string}) => (\n  <Box padding={3} display=\"inline-block\" as={Meta}>\n    <Label size={1} muted>\n      {title}\n    </Label>\n  </Box>\n)\n\nfunction DiffInspector({change}: {change: FieldChangeNode}): React.ReactElement | null {\n  return (\n    <Stack space={3}>\n      <Card padding={3} tone=\"transparent\" as={CodeWrapper} radius={1}>\n        <MetaLabel title=\"meta\" />\n        <Code language=\"json\" size={1}>\n          {printMeta({\n            path: pathToString(change.path),\n            fromIndex: change.itemDiff?.fromIndex,\n            toIndex: change.itemDiff?.toIndex,\n            hasMoved: change.itemDiff?.hasMoved,\n            action: change.diff.action,\n            isChanged: change.diff.isChanged,\n          })}\n        </Code>\n      </Card>\n      <Card as={CodeWrapper} tone=\"critical\" padding={3} radius={1}>\n        <MetaLabel title=\"from\" />\n        <Code language=\"json\" size={1}>\n          {jsonify(change.diff.fromValue)}\n        </Code>\n      </Card>\n      <Card>\n        <FromToArrow direction=\"down\" align=\"center\" />\n      </Card>\n      <Card as={CodeWrapper} tone=\"positive\" padding={3} radius={1}>\n        <MetaLabel title=\"to\" />\n        <Code language=\"json\" size={1}>\n          {jsonify(change.diff.toValue)}\n        </Code>\n      </Card>\n    </Stack>\n  )\n}\n\nfunction jsonify(value: unknown) {\n  if (typeof value === 'undefined') {\n    return 'undefined'\n  }\n\n  return JSON.stringify(value, null, 2)\n}\n\nfunction printMeta(keys: Record<string, unknown>) {\n  const lines: string[] = []\n\n  Object.entries(keys).forEach(([key, value]) => {\n    if (typeof value !== 'undefined' && value !== null) {\n      lines.push(`${key}: ${value}`)\n    }\n  })\n\n  return lines.join('\\n')\n}\n","import React, {forwardRef, useMemo} from 'react'\nimport {Flex, Grid, rem, useTheme} from '@sanity/ui'\nimport {FromToArrow} from './FromToArrow'\n\nexport type FromToProps = {\n  align?: 'top' | 'center' | 'bottom'\n  layout?: 'grid' | 'inline'\n  from?: React.ReactNode\n  to?: React.ReactNode\n} & Omit<React.HTMLProps<HTMLDivElement>, 'children' | 'as' | 'height' | 'wrap'>\n\nconst INLINE_COLUMN_STYLES = {flexShrink: 0}\nconst BLOCK_COLUMN_STYLES = {alignItems: 'stretch'}\n\nconst FLEX_ALIGN: Record<string, 'flex-start' | 'center' | 'flex-end'> = {\n  top: 'flex-start',\n  center: 'center',\n  bottom: 'flex-end',\n  default: 'flex-start',\n}\n\nexport const FromTo = forwardRef<HTMLDivElement, FromToProps>(function FromTo(props, ref) {\n  const {align = 'top', layout = 'inline', from, to, style, ...restProps} = props\n  const theme = useTheme()\n\n  const Layout = layout === 'inline' ? Flex : Grid\n  const layoutStyles = useMemo(\n    () => ({\n      ...style,\n      ...(layout === 'inline'\n        ? {maxWidth: '100%', display: 'inline-flex'}\n        : {gridTemplateColumns: `minmax(0, 1fr) ${rem(theme.sanity.space[5])} minmax(0, 1fr)`}),\n    }),\n    [layout, style, theme]\n  )\n\n  const columnStyles = layout === 'inline' ? INLINE_COLUMN_STYLES : BLOCK_COLUMN_STYLES\n\n  return (\n    <Layout {...restProps} ref={ref} style={layoutStyles} data-from-to-layout>\n      {from && (\n        <>\n          <Flex align={FLEX_ALIGN[align]} style={columnStyles}>\n            {from}\n          </Flex>\n          <Flex align=\"center\" justify=\"center\" padding={2}>\n            <FromToArrow />\n          </Flex>\n        </>\n      )}\n      <Flex align={FLEX_ALIGN[align]} style={columnStyles}>\n        {to}\n      </Flex>\n    </Layout>\n  )\n})\n","import {Path, SchemaType} from '@sanity/types'\nimport React, {createElement, CSSProperties} from 'react'\nimport {FieldPreviewComponent} from '../../preview'\nimport {Diff} from '../../types'\nimport {getChangeVerb} from '../helpers'\nimport {DiffCard} from './DiffCard'\nimport {DiffTooltip} from './DiffTooltip'\nimport {FromTo} from './FromTo'\n\nexport interface DiffFromToProps {\n  align?: 'top' | 'center' | 'bottom'\n  cardClassName?: string\n  diff: Diff\n  layout?: 'grid' | 'inline'\n  path?: Path | string\n  previewComponent: FieldPreviewComponent\n  schemaType: SchemaType\n}\n\nconst cardStyles: CSSProperties = {\n  flex: 1,\n  minWidth: 0,\n  display: 'block',\n  whiteSpace: 'break-spaces',\n}\n\nexport function DiffFromTo(props: DiffFromToProps) {\n  const {align, cardClassName, diff, layout, path, previewComponent, schemaType} = props\n  const {action} = diff\n  const changeVerb = getChangeVerb(diff)\n\n  if (action === 'unchanged') {\n    return (\n      <DiffCard className={cardClassName} style={cardStyles}>\n        {createElement(previewComponent, {schemaType, value: diff.toValue})}\n      </DiffCard>\n    )\n  }\n\n  const from = diff.fromValue !== undefined && diff.fromValue !== null && (\n    <DiffCard as=\"del\" className={cardClassName} diff={diff} path={path} style={cardStyles}>\n      {createElement(previewComponent, {schemaType, value: diff.fromValue})}\n    </DiffCard>\n  )\n\n  const to = diff.toValue !== undefined && diff.toValue !== null && (\n    <DiffCard as=\"ins\" className={cardClassName} diff={diff} path={path} style={cardStyles}>\n      {createElement(previewComponent, {schemaType, value: diff.toValue})}\n    </DiffCard>\n  )\n\n  if (from && !to) {\n    return (\n      <DiffTooltip description={changeVerb} diff={diff} path={path}>\n        {from}\n      </DiffTooltip>\n    )\n  }\n\n  if (!from && to) {\n    return (\n      <DiffTooltip description={changeVerb} diff={diff} path={path}>\n        {to}\n      </DiffTooltip>\n    )\n  }\n\n  return (\n    <DiffTooltip description={changeVerb} diff={diff} path={path}>\n      <FromTo align={align} from={from} layout={layout} to={to} />\n    </DiffTooltip>\n  )\n}\n","import React from 'react'\nimport {Box} from '@sanity/ui'\nimport {SanityPreview} from '../../../preview'\nimport {FieldPreviewComponent} from '../../preview'\nimport {Diff, DiffComponent} from '../../types'\nimport {DiffFromTo} from './DiffFromTo'\n\nconst FallbackPreview: FieldPreviewComponent<React.ReactNode> = ({value, schemaType}) => {\n  return (\n    <Box padding={2}>\n      <SanityPreview schemaType={schemaType} value={value as any} layout=\"default\" />\n    </Box>\n  )\n}\n\nexport const FallbackDiff: DiffComponent<Diff<unknown, Record<string, unknown>>> = (props) => {\n  const {diff, schemaType} = props\n\n  return (\n    <DiffFromTo\n      diff={diff}\n      schemaType={schemaType}\n      previewComponent={FallbackPreview}\n      layout=\"grid\"\n    />\n  )\n}\n","import {RevertIcon} from '@sanity/icons'\nimport {Button, ButtonProps} from '@sanity/ui'\nimport React, {forwardRef} from 'react'\nimport styled from 'styled-components'\n\nconst Root = styled(Button)`\n  [data-ui='Text'] {\n    font-weight: normal;\n  }\n\n  div[data-ui='Box'] {\n    display: none;\n  }\n\n  &:not([data-disabled='true']):hover,\n  &:not([data-disabled='true']):focus {\n    --card-fg-color: ${({theme}) => theme.sanity.color.solid.critical.enabled.bg};\n    --card-bg-color: transparent;\n    --card-border-color: transparent;\n\n    div[data-ui='Box'] {\n      display: block;\n    }\n  }\n`\n\nexport const RevertChangesButton = forwardRef(function RevertChangesButton(\n  props: ButtonProps & Omit<React.HTMLProps<HTMLButtonElement>, 'ref'>,\n  ref: React.ForwardedRef<HTMLButtonElement>\n): React.ReactElement {\n  const {selected, ...restProps} = props\n\n  return (\n    <Root\n      icon={RevertIcon}\n      selected={selected}\n      text=\"Revert changes\"\n      mode=\"bleed\"\n      padding={1}\n      fontSize={1}\n      space={2}\n      ref={ref}\n      {...restProps}\n    />\n  )\n})\n","import {ErrorOutlineIcon} from '@sanity/icons'\nimport {Text, Box, Card, Flex} from '@sanity/ui'\nimport React from 'react'\nimport {FieldValueError} from '../../validation'\n\nexport function ValueError({error}: {error: FieldValueError}) {\n  return (\n    <Card tone=\"critical\" padding={3}>\n      <Flex align=\"flex-start\">\n        <Box>\n          <Text>\n            <ErrorOutlineIcon />\n          </Text>\n        </Box>\n        <Box flex={1} paddingLeft={3}>\n          <Text size={1} as=\"p\">\n            Value error: {error.message}\n          </Text>\n        </Box>\n      </Flex>\n    </Card>\n  )\n}\n","import styled from 'styled-components'\nimport {rem, Popover} from '@sanity/ui'\n\nexport const FieldChangeContainer = styled.div`\n  --field-change-error: ${({theme}) => theme.sanity.color.solid.critical.enabled.bg};\n  &[data-revert-all-changes-hover] [data-revert-all-hover]::before {\n    border-left: 2px solid var(--field-change-error);\n  }\n`\n\nexport const DiffBorder = styled.div`\n  --field-change-error: ${({theme}) => theme.sanity.color.solid.critical.enabled.bg};\n  --diff-inspect-padding-xsmall: ${({theme}) => rem(theme.sanity.space[1])};\n  --diff-inspect-padding-small: ${({theme}) => rem(theme.sanity.space[2])};\n\n  position: relative;\n  padding: var(--diff-inspect-padding-xsmall) 0 var(--diff-inspect-padding-xsmall)\n    var(--diff-inspect-padding-small);\n\n  &::before {\n    content: '';\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    border-left: 1px solid var(--card-border-color);\n  }\n\n  &[data-error]:hover::before,\n  &[data-revert-field-hover]:hover::before {\n    border-left: 2px solid var(--field-change-error);\n  }\n`\n\nexport const PopoverWrapper = styled(Popover)`\n  /* hides the popover when the target of it has left the visible part of the window.\n   without it, the popover will be on top of the headers (document title & changes)\n   and footers (changed notifications, publish button etc)*/\n  &[data-popper-reference-hidden='true'] {\n    display: none;\n  }\n`\n","import React, {useCallback, useMemo, useState} from 'react'\nimport {Stack, Box, Button, Text, Grid, useClickOutside} from '@sanity/ui'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {useConditionalReadOnly} from '../../../conditional-property/conditionalReadOnly'\nimport {useDocumentOperation} from '../../../hooks'\nimport {FieldChangeNode, FieldOperationsAPI} from '../../types'\nimport {undoChange} from '../changes/undoChange'\nimport {DiffContext} from '../contexts/DiffContext'\nimport {useDocumentChange} from '../hooks'\nimport {useDocumentPairPermissions} from '../../../datastores'\nimport {ChangeBreadcrumb} from './ChangeBreadcrumb'\nimport {DiffErrorBoundary} from './DiffErrorBoundary'\nimport {DiffInspectWrapper} from './DiffInspectWrapper'\nimport {FallbackDiff} from './FallbackDiff'\nimport {RevertChangesButton} from './RevertChangesButton'\nimport {ValueError} from './ValueError'\nimport {FieldChangeContainer, DiffBorder, PopoverWrapper} from './FieldChange.styled'\n\nexport function FieldChange(\n  props: {\n    change: FieldChangeNode\n    readOnly?: boolean\n    hidden?: boolean\n  } & React.HTMLAttributes<HTMLDivElement>\n) {\n  const {change, hidden, readOnly} = props\n  const conditionalReadOnly = useConditionalReadOnly() ?? readOnly\n  const DiffComponent = change.diffComponent || FallbackDiff\n  const {\n    documentId,\n    schemaType,\n    rootDiff,\n    isComparingCurrent,\n    FieldWrapper = React.Fragment,\n  } = useDocumentChange()\n  const ops = useDocumentOperation(documentId, schemaType.name) as FieldOperationsAPI\n  const [confirmRevertOpen, setConfirmRevertOpen] = useState(false)\n  const [revertHovered, setRevertHovered] = useState(false)\n  const [revertButtonElement, setRevertButtonElement] = useState<HTMLDivElement | null>(null)\n\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id: documentId,\n    type: schemaType.name,\n    permission: 'update',\n  })\n\n  const handleRevertChanges = useCallback(() => {\n    undoChange(change, rootDiff, ops)\n  }, [change, rootDiff, ops])\n\n  const handleRevertChangesConfirm = useCallback(() => {\n    setConfirmRevertOpen(true)\n  }, [])\n\n  const closeRevertChangesConfirmDialog = React.useCallback(() => {\n    setConfirmRevertOpen(false)\n  }, [])\n\n  const handleRevertButtonMouseEnter = useCallback(() => {\n    setRevertHovered(true)\n  }, [])\n\n  const handleRevertButtonMouseLeave = useCallback(() => {\n    setRevertHovered(false)\n  }, [])\n\n  const handleClickOutside = useCallback(() => setConfirmRevertOpen(false), [])\n\n  useClickOutside(handleClickOutside, [revertButtonElement])\n\n  const content = useMemo(\n    () =>\n      hidden ? null : (\n        <Stack space={1} as={FieldChangeContainer}>\n          {change.showHeader && <ChangeBreadcrumb change={change} titlePath={change.titlePath} />}\n\n          <FieldWrapper path={change.path} hasHover={revertHovered}>\n            <DiffInspectWrapper\n              change={change}\n              as={DiffBorder}\n              data-revert-field-hover={revertHovered ? '' : undefined}\n              data-error={change.error ? '' : undefined}\n              data-revert-all-hover\n            >\n              {change.error ? (\n                <ValueError error={change.error} />\n              ) : (\n                <DiffErrorBoundary>\n                  <DiffContext.Provider value={{path: change.path}}>\n                    <DiffComponent\n                      diff={change.diff}\n                      schemaType={change.schemaType as ObjectSchemaType}\n                    />\n                  </DiffContext.Provider>\n                </DiffErrorBoundary>\n              )}\n\n              {isComparingCurrent && !isPermissionsLoading && permissions?.granted && (\n                <PopoverWrapper\n                  content={\n                    <Box padding={3} sizing=\"border\">\n                      Are you sure you want to revert the changes?\n                      <Grid columns={2} gap={2} marginTop={2}>\n                        <Button mode=\"ghost\" onClick={closeRevertChangesConfirmDialog}>\n                          <Text align=\"center\">Cancel</Text>\n                        </Button>\n                        <Button tone=\"critical\" onClick={handleRevertChanges}>\n                          <Text align=\"center\">Revert change</Text>\n                        </Button>\n                      </Grid>\n                    </Box>\n                  }\n                  open={confirmRevertOpen}\n                  portal\n                  placement=\"left\"\n                  ref={setRevertButtonElement}\n                >\n                  <Box flex={1}>\n                    <RevertChangesButton\n                      onClick={handleRevertChangesConfirm}\n                      onMouseEnter={handleRevertButtonMouseEnter}\n                      onMouseLeave={handleRevertButtonMouseLeave}\n                      selected={confirmRevertOpen}\n                      disabled={conditionalReadOnly}\n                      data-testid={`single-change-revert-button-${change?.key}`}\n                    />\n                  </Box>\n                </PopoverWrapper>\n              )}\n            </DiffInspectWrapper>\n          </FieldWrapper>\n        </Stack>\n      ),\n    [\n      change,\n      closeRevertChangesConfirmDialog,\n      conditionalReadOnly,\n      confirmRevertOpen,\n      DiffComponent,\n      FieldWrapper,\n      hidden,\n      handleRevertButtonMouseEnter,\n      handleRevertButtonMouseLeave,\n      handleRevertChanges,\n      handleRevertChangesConfirm,\n      isComparingCurrent,\n      isPermissionsLoading,\n      permissions,\n      revertHovered,\n    ]\n  )\n\n  return content\n}\n","import {useEffect, useRef, useState} from 'react'\n\nexport function useHover<T extends HTMLElement>(): [React.MutableRefObject<T | null>, boolean] {\n  const ref = useRef<T | null>(null)\n  const [value, setValue] = useState(false)\n\n  useEffect(() => {\n    const node = ref.current\n\n    if (!node) {\n      return () => undefined\n    }\n\n    const handleMouseOver = () => setValue(true)\n    const handleMouseOut = () => setValue(false)\n\n    node.addEventListener('mouseover', handleMouseOver)\n    node.addEventListener('mouseout', handleMouseOut)\n\n    return () => {\n      node.removeEventListener('mouseover', handleMouseOver)\n      node.removeEventListener('mouseout', handleMouseOut)\n    }\n  }, [])\n\n  return [ref, value]\n}\n","import {rem, Popover} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const ChangeListWrapper = styled.div`\n  display: grid;\n  grid-template-columns: minmax(0, 1fr);\n`\n\nexport const GroupChangeContainer = styled.div`\n  --field-change-error: ${({theme}) => theme.sanity.color.solid.critical.enabled.bg};\n  --diff-inspect-padding-xsmall: ${({theme}) => rem(theme.sanity.space[1])};\n  --diff-inspect-padding-small: ${({theme}) => rem(theme.sanity.space[2])};\n\n  position: relative;\n  padding: var(--diff-inspect-padding-xsmall) var(--diff-inspect-padding-small);\n\n  &::before {\n    content: '';\n    display: block;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    border-left: 1px solid var(--card-border-color);\n  }\n\n  &[data-error]:hover::before,\n  &[data-revert-group-hover]:hover::before,\n  &[data-revert-all-groups-hover]::before {\n    border-left: 2px solid var(--field-change-error);\n  }\n`\n\nexport const PopoverWrapper = styled(Popover)`\n  /* hides the popover when the target of it has left the visible part of the window.\n   without it, the popover will be on top of the headers (document title & changes)\n   and footers (changed notifications, publish button etc)*/\n  &[data-popper-reference-hidden='true'] {\n    display: none;\n  }\n`\n","import React, {useCallback, useContext, useMemo, useState} from 'react'\nimport {Box, Stack, Button, Grid, Text, useClickOutside} from '@sanity/ui'\nimport {useDocumentOperation} from '../../../hooks'\nimport {undoChange} from '../changes/undoChange'\nimport {isFieldChange} from '../helpers'\nimport {isPTSchemaType} from '../../types/portableText/diff'\nimport {GroupChangeNode, FieldOperationsAPI} from '../../types'\nimport {useHover} from '../../utils/useHover'\nimport {pathsAreEqual} from '../../paths'\nimport {DiffContext} from '../contexts/DiffContext'\nimport {useDocumentChange} from '../hooks'\nimport {useDocumentPairPermissions} from '../../../datastores'\nimport {ChangeBreadcrumb} from './ChangeBreadcrumb'\nimport {ChangeResolver} from './ChangeResolver'\nimport {RevertChangesButton} from './RevertChangesButton'\nimport {ChangeListWrapper, GroupChangeContainer, PopoverWrapper} from './GroupChange.styled'\n\nexport function GroupChange(\n  props: {\n    change: GroupChangeNode\n    readOnly?: boolean\n    hidden?: boolean\n  } & React.HTMLAttributes<HTMLDivElement>\n): React.ReactElement | null {\n  const {\n    change: group,\n    readOnly,\n    hidden,\n    // 'data-revert-all-changes-hover': dataRevertAllChangesHover,\n    ...restProps\n  } = props\n  const {titlePath, changes, path: groupPath} = group\n  const {path: diffPath} = useContext(DiffContext)\n  const {documentId, schemaType, FieldWrapper, rootDiff, isComparingCurrent} = useDocumentChange()\n\n  const isPortableText = changes.every(\n    (change) => isFieldChange(change) && isPTSchemaType(change.schemaType)\n  )\n\n  const isNestedInDiff = pathsAreEqual(diffPath, groupPath)\n  const [revertButtonRef, isRevertButtonHovered] = useHover<HTMLButtonElement>()\n\n  const docOperations = useDocumentOperation(documentId, schemaType.name) as FieldOperationsAPI\n  const [confirmRevertOpen, setConfirmRevertOpen] = useState(false)\n  const [revertPopoverElement, setRevertPopoverElement] = useState<HTMLDivElement | null>(null)\n\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id: documentId,\n    type: schemaType.name,\n    permission: 'update',\n  })\n\n  const handleRevertChanges = useCallback(\n    () => undoChange(group, rootDiff, docOperations),\n    [group, rootDiff, docOperations]\n  )\n\n  const handleRevertChangesConfirm = useCallback(() => {\n    setConfirmRevertOpen(true)\n  }, [])\n\n  const closeRevertChangesConfirmDialog = useCallback(() => {\n    setConfirmRevertOpen(false)\n  }, [])\n\n  useClickOutside(() => setConfirmRevertOpen(false), [revertPopoverElement])\n\n  const content = useMemo(\n    () =>\n      hidden ? null : (\n        <Stack\n          space={1}\n          as={GroupChangeContainer}\n          data-revert-group-hover={isRevertButtonHovered ? '' : undefined}\n          data-portable-text={isPortableText ? '' : undefined}\n          // data-revert-all-groups-hover={\n          //   restProps[] === '' ? '' : undefined\n          // }\n        >\n          <Stack as={ChangeListWrapper} space={5}>\n            {changes.map((change) => (\n              <ChangeResolver\n                key={change.key}\n                change={change}\n                readOnly={readOnly}\n                hidden={hidden}\n              />\n            ))}\n          </Stack>\n          {isComparingCurrent && !isPermissionsLoading && permissions?.granted && (\n            <PopoverWrapper\n              content={\n                <Box>\n                  Are you sure you want to revert the changes?\n                  <Grid columns={2} gap={2} marginTop={2}>\n                    <Button mode=\"ghost\" onClick={closeRevertChangesConfirmDialog}>\n                      <Text align=\"center\">Cancel</Text>\n                    </Button>\n                    <Button tone=\"critical\" onClick={handleRevertChanges}>\n                      <Text align=\"center\">Revert change</Text>\n                    </Button>\n                  </Grid>\n                </Box>\n              }\n              portal\n              padding={4}\n              placement={'left'}\n              open={confirmRevertOpen}\n              ref={setRevertPopoverElement}\n            >\n              <Box>\n                <RevertChangesButton\n                  onClick={handleRevertChangesConfirm}\n                  ref={revertButtonRef}\n                  selected={confirmRevertOpen}\n                  disabled={readOnly}\n                  data-testid={`group-change-revert-button-${group.fieldsetName}`}\n                />\n              </Box>\n            </PopoverWrapper>\n          )}\n        </Stack>\n      ),\n    [\n      changes,\n      closeRevertChangesConfirmDialog,\n      confirmRevertOpen,\n      readOnly,\n      group.fieldsetName,\n      handleRevertChanges,\n      handleRevertChangesConfirm,\n      hidden,\n      isComparingCurrent,\n      isRevertButtonHovered,\n      isPermissionsLoading,\n      isPortableText,\n      permissions,\n      revertButtonRef,\n    ]\n  )\n\n  return hidden ? null : (\n    <Stack space={1} {...restProps}>\n      <ChangeBreadcrumb titlePath={titlePath} />\n      {isNestedInDiff || !FieldWrapper ? (\n        content\n      ) : (\n        <FieldWrapper hasHover={isRevertButtonHovered} path={group.path}>\n          {content}\n        </FieldWrapper>\n      )}\n    </Stack>\n  )\n}\n","import {ConditionalProperty, SanityDocument} from '@sanity/types'\nimport React from 'react'\nimport {Text} from '@sanity/ui'\nimport {unstable_useConditionalProperty as useConditionalProperty} from '../../../conditional-property'\nimport {ChangeNode} from '../../types'\nimport {useDocumentChange} from '../hooks'\nimport {FieldChange} from './FieldChange'\nimport {GroupChange} from './GroupChange'\n\nexport interface ChangeResolverProps {\n  change: ChangeNode\n  readOnly?: ConditionalProperty\n  hidden?: ConditionalProperty\n}\n\nexport function ChangeResolver(props: ChangeResolverProps) {\n  const {change, hidden, readOnly} = props\n  const {value} = useDocumentChange()\n\n  const isHidden = useConditionalProperty({\n    // @todo: is parent missing here?\n    document: value as SanityDocument,\n    checkProperty: hidden || change.schemaType?.hidden,\n    checkPropertyKey: 'hidden',\n    value: change.type === 'field' ? change.diff.toValue : undefined,\n  })\n\n  const isReadOnly = useConditionalProperty({\n    // @todo: is parent missing here?\n    document: value as SanityDocument,\n    checkProperty: readOnly || change.schemaType?.readOnly,\n    checkPropertyKey: 'readOnly',\n    value: change.type === 'field' ? change.diff.toValue : undefined,\n  })\n\n  if (isHidden) return null\n\n  if (change.type === 'field') {\n    return <FieldChange change={change} readOnly={isReadOnly} />\n  }\n\n  if (change.type === 'group') {\n    return (\n      <GroupChange\n        change={change}\n        data-testid={`group-change-${change.fieldsetName}`}\n        readOnly={isReadOnly}\n      />\n    )\n  }\n\n  return (\n    <Text>\n      Unknown change type: <code>{(change as any).type || 'undefined'}</code>\n    </Text>\n  )\n}\n","import {Stack, Text} from '@sanity/ui'\nimport React from 'react'\n\nexport function NoChanges() {\n  return (\n    <Stack space={3}>\n      <Text size={1} weight=\"semibold\" as=\"h3\">\n        There are no changes\n      </Text>\n      <Text as=\"p\" size={1} muted>\n        Edit the document or select an older version in the timeline to see a list of changes appear\n        in this panel.\n      </Text>\n    </Stack>\n  )\n}\n","import {Popover} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const ChangeListWrapper = styled.div`\n  display: grid;\n  grid-template-columns: minmax(0, 1fr);\n`\n\nexport const PopoverWrapper = styled(Popover)`\n  /* hides the popover when the target of it has left the visible part of the window.\n   without it, the popover will be on top of the headers (document title & changes)\n   and footers (changed notifications, publish button etc)*/\n  &[data-popper-reference-hidden='true'] {\n    display: none;\n  }\n`\n","import {Button, Box, Card, Grid, Stack, useClickOutside} from '@sanity/ui'\nimport {RevertIcon} from '@sanity/icons'\nimport React, {useCallback, useContext, useMemo, useState} from 'react'\nimport {SanityDocument} from '@sanity/client'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {unstable_useConditionalProperty as useConditionalProperty} from '../../../conditional-property'\nimport {useDocumentOperation} from '../../../hooks'\nimport {ObjectDiff, ChangeNode, FieldOperationsAPI} from '../../types'\nimport {DiffContext} from '../contexts/DiffContext'\nimport {buildObjectChangeList} from '../changes/buildChangeList'\nimport {undoChange} from '../changes/undoChange'\nimport {useDocumentChange} from '../hooks/useDocumentChange'\nimport {useDocumentPairPermissions} from '../../../datastores'\nimport {ChangeResolver} from './ChangeResolver'\nimport {NoChanges} from './NoChanges'\nimport {ChangeListWrapper, PopoverWrapper} from './ChangeList.styled'\n\nexport interface ChangeListProps {\n  schemaType: ObjectSchemaType\n  diff: ObjectDiff\n  fields?: string[]\n}\n\nexport function ChangeList({diff, fields, schemaType}: ChangeListProps): React.ReactElement | null {\n  const {documentId, isComparingCurrent, value} = useDocumentChange()\n  const docOperations = useDocumentOperation(documentId, schemaType.name) as FieldOperationsAPI\n  const {path} = useContext(DiffContext)\n  const isRoot = path.length === 0\n  const [confirmRevertAllOpen, setConfirmRevertAllOpen] = useState(false)\n  const [confirmRevertAllHover, setConfirmRevertAllHover] = useState(false)\n\n  const isReadOnly = useConditionalProperty({\n    document: value as SanityDocument,\n    value: undefined,\n    checkProperty: schemaType.readOnly,\n    checkPropertyKey: 'readOnly',\n  })\n\n  if (schemaType.jsonType !== 'object') {\n    throw new Error(`Only object schema types are allowed in ChangeList`)\n  }\n\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id: documentId,\n    type: schemaType.name,\n    permission: 'update',\n  })\n\n  const allChanges = useMemo(\n    () => buildObjectChangeList(schemaType, diff, path, [], {fieldFilter: fields}),\n    [schemaType, fields, path, diff]\n  )\n\n  const changes = useMemo(\n    () => (fields && fields.length === 0 ? [] : maybeFlatten(allChanges)),\n    [allChanges, fields]\n  )\n\n  const rootChange = allChanges[0]\n\n  const revertAllChanges = useCallback(() => {\n    undoChange(rootChange, diff, docOperations)\n    setConfirmRevertAllOpen(false)\n  }, [rootChange, diff, docOperations])\n\n  const handleRevertAllChangesClick = useCallback(() => {\n    setConfirmRevertAllOpen(true)\n  }, [])\n\n  const handleRevertAllChangesMouseEnter = useCallback(() => {\n    setConfirmRevertAllHover(true)\n  }, [])\n\n  const handleRevertAllChangesMouseLeave = useCallback(() => {\n    setConfirmRevertAllHover(false)\n  }, [])\n\n  const closeRevertAllChangesConfirmDialog = useCallback(() => {\n    setConfirmRevertAllOpen(false)\n  }, [])\n\n  const [revertAllContainerElement, setRevertAllContainerElement] = useState<HTMLDivElement | null>(\n    null\n  )\n\n  const handleClickOutside = useCallback(() => setConfirmRevertAllOpen(false), [])\n\n  useClickOutside(handleClickOutside, [revertAllContainerElement])\n\n  if (changes.length === 0) {\n    return isRoot ? <NoChanges /> : null\n  }\n\n  const showFooter = isRoot && changes.length > 1\n\n  return (\n    <Card>\n      <Stack space={5}>\n        <Stack as={ChangeListWrapper} space={5}>\n          {changes.map((change) => (\n            <div key={change.key}>\n              <ChangeResolver\n                change={change}\n                key={change.key}\n                data-revert-all-changes-hover={confirmRevertAllHover ? '' : undefined}\n                readOnly={isReadOnly || change?.readOnly}\n                hidden={change?.hidden}\n              />\n            </div>\n          ))}\n        </Stack>\n\n        {showFooter && isComparingCurrent && !isPermissionsLoading && permissions?.granted && (\n          <PopoverWrapper\n            content={\n              <Box>\n                Are you sure you want to revert all {changes.length} changes?\n                <Grid columns={2} gap={2} marginTop={2}>\n                  <Button mode=\"ghost\" text=\"Cancel\" onClick={closeRevertAllChangesConfirmDialog} />\n                  <Button tone=\"critical\" text=\"Revert all\" onClick={revertAllChanges} />\n                </Grid>\n              </Box>\n            }\n            open={confirmRevertAllOpen}\n            padding={4}\n            placement={'left'}\n            portal\n            ref={setRevertAllContainerElement}\n          >\n            <Stack>\n              <Button\n                tone=\"critical\"\n                mode=\"ghost\"\n                text=\"Revert all changes\"\n                icon={RevertIcon}\n                onClick={handleRevertAllChangesClick}\n                onMouseEnter={handleRevertAllChangesMouseEnter}\n                onMouseLeave={handleRevertAllChangesMouseLeave}\n                disabled={isReadOnly}\n              />\n            </Stack>\n          </PopoverWrapper>\n        )}\n      </Stack>\n    </Card>\n  )\n}\n\nfunction maybeFlatten(changes: ChangeNode[]) {\n  return changes.length === 1 && changes[0].type === 'group' && changes[0].path.length === 0\n    ? changes[0].changes\n    : changes\n}\n","import {Text, Card, rem} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {StringDiffSegment, StringDiff} from '../../types'\nimport {DiffCard} from './DiffCard'\n\nconst RoundedCard = styled.span`\n  border-radius: ${({theme}) => rem(theme.sanity.radius[1])};\n`\n\nconst ChangeSegment = styled(Text)`\n  &:not([hidden]) {\n    display: inline;\n    line-height: calc(1.25em + 2px);\n  }\n\n  &:hover {\n    background-color: none !important;\n    background-image: linear-gradient(\n      to bottom,\n      var(--card-bg-color) 0,\n      var(--card-bg-color) 33.333%,\n      currentColor 33.333%,\n      currentColor 100%\n    );\n    background-size: 1px 3px;\n    background-repeat: repeat-x;\n    background-position-y: bottom;\n    padding-bottom: 3px;\n    box-shadow: 0 0 0 1px var(--card-bg-color);\n    z-index: 1;\n  }\n`\n\nexport function DiffStringSegment(props: {segment: StringDiffSegment}): React.ReactElement {\n  const {segment} = props\n  const {text} = segment\n\n  if (segment.action === 'added') {\n    return (\n      <DiffCard\n        annotation={segment.annotation}\n        disableHoverEffect\n        tooltip={{description: 'Added'}}\n        as={RoundedCard}\n      >\n        <ChangeSegment as=\"ins\" style={{textDecoration: 'none'}}>\n          {text}\n        </ChangeSegment>\n      </DiffCard>\n    )\n  }\n\n  if (segment.action === 'removed') {\n    return (\n      <DiffCard\n        annotation={segment.annotation}\n        as={RoundedCard}\n        disableHoverEffect\n        tooltip={{description: 'Removed'}}\n      >\n        <ChangeSegment as=\"del\">{text}</ChangeSegment>\n      </DiffCard>\n    )\n  }\n\n  return (\n    <Card as=\"span\" radius={2} style={{display: 'inline'}}>\n      {text}\n    </Card>\n  )\n}\n\nexport function DiffString(props: {diff: StringDiff}) {\n  const {diff} = props\n\n  return (\n    <>\n      {(diff.segments || []).map((segment, segmentIndex) => (\n        <DiffStringSegment\n          // eslint-disable-next-line react/no-array-index-key\n          key={segmentIndex}\n          segment={segment}\n        />\n      ))}\n    </>\n  )\n}\n","import {Text, Box, Flex, Stack} from '@sanity/ui'\nimport React, {createElement} from 'react'\nimport styled from 'styled-components'\n\nexport interface MetaInfoProps {\n  title: string\n  action?: string\n  icon?: React.ComponentType\n  children?: React.ReactNode\n  markRemoved?: boolean\n}\n\nconst MetaText = styled(Text)`\n  color: inherit;\n`\n\nexport function MetaInfo(props: MetaInfoProps) {\n  const {title, action, icon, children, markRemoved} = props\n\n  return (\n    <Flex padding={2} align=\"center\">\n      {icon && (\n        <Box padding={2}>\n          <MetaText size={4} forwardedAs={markRemoved ? 'del' : 'div'}>\n            {createElement(icon)}\n          </MetaText>\n        </Box>\n      )}\n\n      <Stack space={2} paddingLeft={2}>\n        <MetaText\n          size={1}\n          weight=\"semibold\"\n          forwardedAs={markRemoved ? 'del' : 'h3'}\n          textOverflow=\"ellipsis\"\n        >\n          {title}\n        </MetaText>\n\n        {action && <div>{action}</div>}\n\n        <MetaText size={0} textOverflow=\"ellipsis\">\n          {children}\n        </MetaText>\n      </Stack>\n    </Flex>\n  )\n}\n","import * as legacyDateFormat from '@sanity/util/legacyDateFormat'\nimport {StringSchemaType} from '@sanity/types'\nimport {Box} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {FieldPreviewComponent} from '../../../preview'\n\nconst DEFAULT_DATE_FORMAT = 'YYYY-MM-DD'\nconst DEFAULT_TIME_FORMAT = 'HH:mm'\n\nconst DatetimeWrapper = styled.div`\n  display: inline-block;\n  word-wrap: break-word;\n`\n\nexport const DatetimePreview: FieldPreviewComponent<string> = function DatetimePreview({\n  value,\n  schemaType,\n}) {\n  return (\n    <Box as={DatetimeWrapper} paddingX={2} paddingY={1}>\n      {formatDateTime(value, schemaType)}\n    </Box>\n  )\n}\n\nfunction formatDateTime(value: string, schemaType: StringSchemaType): string {\n  const {options, name} = schemaType\n  const dateFormat = options?.dateFormat || DEFAULT_DATE_FORMAT\n  const timeFormat = options?.timeFormat || DEFAULT_TIME_FORMAT\n\n  return legacyDateFormat.format(\n    new Date(value),\n    name === 'date' ? dateFormat : `${dateFormat} ${timeFormat}`\n  )\n}\n","import {Box} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {Slug} from '@sanity/types'\nimport {FieldPreviewComponent} from '../../../preview'\n\nconst SlugWrapper = styled.div`\n  display: inline-block;\n  word-break: break-all;\n  white-space: pre-wrap;\n`\n\nexport const SlugPreview: FieldPreviewComponent<Slug> = (props) => {\n  const {value} = props\n\n  return (\n    <Box as={SlugWrapper} paddingX={2} paddingY={1}>\n      {value.current}\n    </Box>\n  )\n}\n","import {\n  TrashIcon,\n  EditIcon,\n  IconComponent,\n  PublishIcon,\n  UnpublishIcon,\n  CloseIcon,\n  AddCircleIcon,\n} from '@sanity/icons'\n\nexport const TIMELINE_LABELS: {[key: string]: string | undefined} = {\n  create: 'created',\n  delete: 'deleted',\n  discardDraft: 'discarded draft',\n  initial: 'created',\n  editDraft: 'edited',\n  editLive: 'live edited',\n  publish: 'published',\n  unpublish: 'unpublished',\n}\n\nexport const TIMELINE_ICON_COMPONENTS: {[key: string]: IconComponent | undefined} = {\n  create: AddCircleIcon,\n  delete: TrashIcon,\n  discardDraft: CloseIcon,\n  initial: AddCircleIcon,\n  editDraft: EditIcon,\n  editLive: EditIcon,\n  publish: PublishIcon,\n  unpublish: UnpublishIcon,\n}\n","import {IconComponent} from '@sanity/icons'\nimport {ChunkType, Chunk} from '../../../../field'\nimport {TIMELINE_ICON_COMPONENTS, TIMELINE_LABELS} from './constants'\n\nexport function formatTimelineEventLabel(type: ChunkType): string | undefined {\n  return TIMELINE_LABELS[type]\n}\n\nexport function getTimelineEventIconComponent(type: ChunkType): IconComponent | undefined {\n  return TIMELINE_ICON_COMPONENTS[type]\n}\n\nexport function sinceTimelineProps(\n  since: Chunk,\n  rev: Chunk\n): {\n  topSelection: Chunk\n  bottomSelection: Chunk\n  disabledBeforeSelection: boolean\n} {\n  return {\n    topSelection: rev,\n    bottomSelection: since,\n    disabledBeforeSelection: true,\n  }\n}\n\nexport function revTimelineProps(rev: Chunk): {\n  topSelection: Chunk\n  bottomSelection: Chunk\n} {\n  return {\n    topSelection: rev,\n    bottomSelection: rev,\n  }\n}\n","import React from 'react'\nimport {AvatarStack} from '@sanity/ui'\nimport {UserAvatar} from '../../../../components/UserAvatar'\n\ninterface UserAvatarStackProps {\n  maxLength?: number\n  userIds: string[]\n}\n\nexport function UserAvatarStack({maxLength, userIds}: UserAvatarStackProps) {\n  return (\n    <AvatarStack maxLength={maxLength}>\n      {userIds.map((userId) => (\n        <UserAvatar key={userId} user={userId} withTooltip />\n      ))}\n    </AvatarStack>\n  )\n}\n","import {Text, Box, MenuItem, Theme, Flex} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {TimelineItemState} from './types'\n\nexport interface IconWrapperProps {\n  theme: Theme\n}\n\nexport interface TimelineItemProps {\n  state: TimelineItemState\n  theme: Theme\n  isHovered: boolean\n}\n\nexport const IconWrapper = styled(Flex)(({theme}: IconWrapperProps) => {\n  const borderColor = theme.sanity.color.base.skeleton?.from\n\n  return css`\n    --timeline-hairline-width: 1px;\n    position: relative;\n    z-index: 2;\n    margin: 0;\n    padding: 0;\n\n    &::before {\n      position: absolute;\n      content: '';\n      height: 100%;\n      width: var(--timeline-hairline-width);\n      background: ${borderColor};\n      top: 0;\n      left: calc((100% - var(--timeline-hairline-width)) / 2);\n      z-index: 1;\n    }\n  `\n})\n\nexport const Root = styled(MenuItem)(({state = 'enabled', isHovered, theme}: TimelineItemProps) => {\n  const {color} = theme.sanity\n\n  const selectedState = color.button.default.primary.enabled\n  return css`\n    position: relative;\n    min-width: 244px;\n\n    ${state === 'selected' &&\n    css`\n      --card-bg-color: ${selectedState.bg};\n      --card-fg-color: ${selectedState.fg};\n      --card-muted-fg-color: ${selectedState.muted};\n      --card-border-color: ${selectedState.bg};\n      &:not([data-selection-bottom='true']) {\n        border-top-left-radius: 0;\n        border-top-right-radius: 0;\n      }\n    `}\n\n    ${state === 'withinSelection' &&\n    css`\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n      box-shadow: 0px 3px 0px 0px var(--card-bg-color);\n      &:not([data-selection-top='true']) {\n        border-radius: 0;\n      }\n\n      ${IconWrapper} {\n        &::before {\n          background: var(--card-hairline-soft-color);\n        }\n      }\n    `}\n\n      ${state === 'disabled' &&\n    css`\n      [data-ui='Avatar'] {\n        opacity: 0.2;\n      }\n    `}\n\n    // line styling ðŸ‘‡\n      &:first-child ${IconWrapper}::before {\n      height: 50%;\n      top: unset;\n      bottom: 0;\n    }\n\n    &:last-child ${IconWrapper}::before {\n      height: 50%;\n    }\n\n    ${(isHovered || state === 'selected') &&\n    css`\n      ${IconWrapper}::before {\n        background: transparent;\n      }\n    `}\n\n    // Remove timeline lines when using the keyboard to navigate timeline items\n    &:focus ${IconWrapper}::before {\n      background: transparent;\n    }\n  `\n})\n\nexport const IconBox = styled(Box)`\n  background: var(--card-bg-color);\n  border-radius: 50px;\n  position: relative;\n  z-index: 2;\n`\n\nexport const EventLabel = styled(Text)`\n  text-transform: capitalize;\n`\n","import React, {useCallback, createElement, useState} from 'react'\nimport {Box, Flex, Stack, Text, ButtonTone} from '@sanity/ui'\nimport {ChunkType, Chunk} from '../../../../field'\nimport {useTimeAgo} from '../../../../hooks'\nimport {formatTimelineEventLabel, getTimelineEventIconComponent} from './helpers'\nimport {TimelineItemState} from './types'\nimport {UserAvatarStack} from './userAvatarStack'\n\nimport {EventLabel, IconBox, IconWrapper, Root} from './timelineItem.styled'\n\nconst TIMELINE_ITEM_EVENT_TONE: Record<ChunkType | 'withinSelection', ButtonTone> = {\n  initial: 'primary',\n  create: 'primary',\n  publish: 'positive',\n  editLive: 'caution',\n  editDraft: 'caution',\n  unpublish: 'critical',\n  discardDraft: 'critical',\n  delete: 'critical',\n  withinSelection: 'primary',\n}\n\nexport function TimelineItem(props: {\n  isSelectionBottom: boolean\n  isSelectionTop: boolean\n  state: TimelineItemState\n  onSelect: (chunk: Chunk) => void\n  chunk: Chunk\n  timestamp: string\n  type: ChunkType\n}) {\n  const {isSelectionBottom, isSelectionTop, state, onSelect, timestamp, chunk, type} = props\n  const iconComponent = getTimelineEventIconComponent(type)\n  const authorUserIds = Array.from(chunk.authors)\n  const timeAgo = useTimeAgo(timestamp, {minimal: true})\n\n  const isSelected = state === 'selected'\n  const isWithinSelection = state === 'withinSelection'\n\n  const [isHovered, setHovered] = useState(false)\n\n  const handleClick = useCallback(\n    (evt: React.MouseEvent<HTMLDivElement>) => {\n      evt.preventDefault()\n      evt.stopPropagation()\n      onSelect(chunk)\n    },\n    [onSelect, chunk]\n  )\n\n  return (\n    <Root\n      data-ui=\"timelineItem\"\n      radius={2}\n      data-chunk-id={chunk.id}\n      paddingY={0}\n      paddingX={2}\n      tone={\n        isHovered || isSelected || isWithinSelection ? 'default' : TIMELINE_ITEM_EVENT_TONE[type]\n      }\n      pressed={isWithinSelection}\n      state={state}\n      selected={isSelected}\n      isHovered={isHovered}\n      disabled={state === 'disabled'}\n      data-selection-bottom={isSelectionBottom}\n      data-selection-top={isSelectionTop}\n      onClick={handleClick}\n    >\n      <div\n        // eslint-disable-next-line react/jsx-no-bind\n        onMouseEnter={() => setHovered(true)}\n        // eslint-disable-next-line react/jsx-no-bind\n        onMouseLeave={() => setHovered(false)}\n      >\n        <Flex align=\"stretch\">\n          <IconWrapper align=\"center\">\n            <IconBox padding={2}>\n              <Text size={2}>{iconComponent && createElement(iconComponent)}</Text>\n            </IconBox>\n          </IconWrapper>\n\n          <Stack space={2} margin={2}>\n            <Box>\n              <EventLabel size={1} weight=\"medium\">\n                {formatTimelineEventLabel(type) || <code>{type}</code>}\n              </EventLabel>\n            </Box>\n            <Text size={0} muted>\n              {timeAgo}\n            </Text>\n          </Stack>\n          <Flex flex={1} justify=\"flex-end\" align=\"center\">\n            <UserAvatarStack maxLength={3} userIds={authorUserIds} />\n          </Flex>\n        </Flex>\n      </div>\n    </Root>\n  )\n}\n","import {Box, Menu, Stack} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const Root = styled(Box)`\n  overflow: auto;\n  -webkit-overflow-scrolling: touch;\n`\nexport const StackWrapper = styled(Stack)`\n  max-width: 200px;\n`\n\nexport const MenuWrapper = styled(Menu)`\n  overflow: auto;\n  box-sizing: border-box;\n  max-height: calc(100vh - 198px);\n`\n","import React, {useCallback, useEffect, useRef, useState} from 'react'\nimport {Text, Spinner, Flex} from '@sanity/ui'\nimport {Timeline as TimelineModel} from '../../../../datastores'\nimport {Chunk} from '../../../../field'\nimport {TimelineItem} from './timelineItem'\nimport {TimelineItemState} from './types'\nimport {Root, StackWrapper, MenuWrapper} from './timeline.styled'\n\ninterface TimelineProps {\n  timeline: TimelineModel\n  onSelect: (chunk: Chunk) => void\n  onLoadMore: (state: boolean) => void\n\n  /** Are the chunks above the topSelection enabled? */\n  disabledBeforeSelection?: boolean\n  /** The first chunk of the selection. */\n  topSelection: Chunk\n  /** The final chunk of the selection. */\n  bottomSelection: Chunk\n}\n\n// Must be a positive number\nconst LOAD_MORE_OFFSET = 20\n\nexport const Timeline = ({\n  timeline,\n  disabledBeforeSelection,\n  topSelection,\n  bottomSelection,\n  onSelect,\n  onLoadMore,\n}: TimelineProps) => {\n  const rootRef = useRef<HTMLDivElement | null>(null)\n  const listRef = useRef<HTMLDivElement | null>(null)\n  const [loadingElement, setLoadingElement] = useState<HTMLDivElement | null>(null)\n\n  let state: TimelineItemState = disabledBeforeSelection ? 'disabled' : 'enabled'\n\n  const checkIfLoadIsNeeded = useCallback(() => {\n    const rootEl = rootRef.current\n\n    if (loadingElement && rootEl) {\n      const {offsetHeight, scrollTop} = rootEl\n      const bottomPosition = offsetHeight + scrollTop + LOAD_MORE_OFFSET\n      const isVisible = loadingElement.offsetTop < bottomPosition\n\n      if (isVisible) {\n        // @todo: find out why, for some reason, it won't load without RAF wrapper\n        requestAnimationFrame(() => onLoadMore(isVisible))\n      }\n    }\n  }, [onLoadMore, loadingElement])\n\n  // Load whenever it's needed\n  useEffect(checkIfLoadIsNeeded, [checkIfLoadIsNeeded])\n\n  return (\n    <Root ref={rootRef as any} onScroll={checkIfLoadIsNeeded} data-ui=\"timeline\">\n      {timeline.chunkCount === 0 && (\n        <StackWrapper padding={3} space={3}>\n          <Text size={1} weight=\"semibold\">\n            No document history\n          </Text>\n          <Text muted size={1}>\n            When changing the content of the document, the document versions will appear in this\n            menu.\n          </Text>\n        </StackWrapper>\n      )}\n\n      {timeline.chunkCount > 0 && (\n        <MenuWrapper ref={listRef} padding={1} space={0}>\n          {timeline.mapChunks((chunk) => {\n            const isSelectionTop = topSelection === chunk\n            const isSelectionBottom = bottomSelection === chunk\n\n            if (isSelectionTop) {\n              state = 'withinSelection'\n            }\n\n            if (isSelectionBottom) {\n              state = 'selected'\n            }\n\n            const item = (\n              <TimelineItem\n                chunk={chunk}\n                isSelectionBottom={isSelectionBottom}\n                isSelectionTop={isSelectionTop}\n                key={chunk.id}\n                state={state}\n                onSelect={onSelect}\n                type={chunk.type}\n                timestamp={chunk.endTimestamp}\n              />\n            )\n\n            // Flip it back to normal after we've rendered the active one.\n            if (state === 'selected') {\n              state = 'enabled'\n            }\n\n            return item\n          })}\n        </MenuWrapper>\n      )}\n\n      {!timeline.reachedEarliestEntry && (\n        <Flex align=\"center\" justify=\"center\" padding={4} ref={setLoadingElement}>\n          <Spinner muted />\n        </Flex>\n      )}\n    </Root>\n  )\n}\n\nTimeline.displayName = 'Timeline'\n","import {\n  ValidationMarker,\n  Path,\n  SanityDocument,\n  ObjectSchemaType,\n  SanityDocumentLike,\n} from '@sanity/types'\nimport {createContext} from 'react'\nimport {_DocumentLanguageFilterComponent} from '../../../config'\nimport {EditStateFor, TimelineController, Timeline} from '../../../datastores'\nimport {PatchEvent, StateTree} from '../../../form'\nimport {DocumentActionComponent} from '../../actions'\nimport {DocumentBadgeComponent} from '../../badges'\nimport {PaneView, PaneMenuItem, PaneMenuItemGroup} from '../../types'\nimport {DocumentFormNode} from '../../../form/store/types/nodes'\nimport {TimelineMode} from './types'\n\nexport interface DocumentPaneContextValue {\n  actions: DocumentActionComponent[] | null\n  activeViewId: string | null\n  badges: DocumentBadgeComponent[] | null\n  changesOpen: boolean\n  collapsedFieldSets: StateTree<boolean> | undefined\n  collapsedPaths: StateTree<boolean> | undefined\n  compareValue: Partial<SanityDocument> | null\n  connectionState: 'connecting' | 'reconnecting' | 'connected'\n  displayed: Partial<SanityDocument> | null\n  documentId: string\n  documentIdRaw: string\n  documentType: string\n  editState: EditStateFor | null\n  focusPath: Path\n  // TODO: rename this for consistency\n  historyController: TimelineController\n  index: number\n  inspectOpen: boolean\n  menuItemGroups: PaneMenuItemGroup[]\n  menuItems: PaneMenuItem[]\n  onBlur: (blurredPath: Path) => void\n  onChange: (event: PatchEvent) => void\n  onFocus: (pathOrEvent: Path) => void\n  onHistoryClose: () => void\n  onHistoryOpen: () => void\n  onInspectClose: () => void\n  onKeyUp: (event: React.KeyboardEvent<HTMLDivElement>) => void\n  onMenuAction: (item: PaneMenuItem) => void\n  onPaneClose: () => void\n  onPaneSplit?: () => void\n  onPathOpen: (path: Path) => void\n  onSetActiveFieldGroup: (path: Path, groupName: string) => void\n  onSetCollapsedPath: (path: Path, expanded: boolean) => void\n  onSetCollapsedFieldSet: (path: Path, expanded: boolean) => void\n  paneKey: string\n  previewUrl?: string | null\n  ready: boolean\n  schemaType: ObjectSchemaType\n  setTimelineMode: (mode: TimelineMode) => void\n  setTimelineRange(since: string | null, rev: string | null): void\n  source?: string\n  timeline: Timeline\n  timelineMode: TimelineMode\n  title: string | null\n  validation: ValidationMarker[]\n  value: SanityDocumentLike\n  views: PaneView[]\n  formState: DocumentFormNode | null\n  unstable_languageFilter: _DocumentLanguageFilterComponent[]\n}\n\nexport const DocumentPaneContext = createContext<DocumentPaneContextValue | null>(null)\n","import {useContext} from 'react'\nimport {DocumentPaneContext, DocumentPaneContextValue} from './DocumentPaneContext'\n\nexport function useDocumentPane(): DocumentPaneContextValue {\n  const documentPane = useContext(DocumentPaneContext)\n\n  if (!documentPane) {\n    throw new Error('DocumentPane: missing context value')\n  }\n\n  return documentPane\n}\n","import {SelectIcon} from '@sanity/icons'\nimport {useClickOutside, Button, Popover} from '@sanity/ui'\nimport {upperFirst} from 'lodash'\nimport React, {useCallback, useState} from 'react'\nimport styled from 'styled-components'\nimport {Chunk} from '../../../../field'\nimport {useTimeAgo} from '../../../../hooks'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {sinceTimelineProps, revTimelineProps, formatTimelineEventLabel} from './helpers'\nimport {Timeline} from './timeline'\n\ninterface TimelineMenuProps {\n  chunk: Chunk | null\n  mode: 'rev' | 'since'\n}\n\nconst Root = styled(Popover)`\n  & > div {\n    display: flex;\n    flex-direction: column;\n\n    & > [data-ui='Card'] {\n      flex: 1;\n      min-height: 0;\n      display: flex;\n      flex-direction: column;\n\n      /* This is the scrollable container rendered by <Timeline /> */\n      & > div {\n        flex: 1;\n        min-height: 0;\n      }\n    }\n  }\n`\n\nexport function TimelineMenu({chunk, mode}: TimelineMenuProps) {\n  const {historyController, setTimelineRange, setTimelineMode, timeline, ready} = useDocumentPane()\n  const [open, setOpen] = useState(false)\n  const [buttonRef, setButtonRef] = useState<HTMLButtonElement | null>(null)\n  const [menuContent, setMenuContent] = useState<HTMLDivElement | null>(null)\n\n  const handleOpen = useCallback(() => {\n    setTimelineMode(mode)\n    setOpen(true)\n  }, [mode, setTimelineMode])\n\n  const handleClose = useCallback(() => {\n    setTimelineMode('closed')\n    setOpen(false)\n  }, [setTimelineMode])\n\n  const handleClickOutside = useCallback(() => {\n    handleClose()\n  }, [handleClose])\n\n  useClickOutside(handleClickOutside, [menuContent, buttonRef])\n\n  const selectRev = useCallback(\n    (revChunk: Chunk) => {\n      const [sinceId, revId] = historyController.findRangeForNewRev(revChunk)\n      setTimelineMode('closed')\n      setOpen(false)\n      setTimelineRange(sinceId, revId)\n    },\n    [historyController, setTimelineMode, setTimelineRange]\n  )\n\n  const selectSince = useCallback(\n    (sinceChunk: Chunk) => {\n      const [sinceId, revId] = historyController.findRangeForNewSince(sinceChunk)\n      setTimelineMode('closed')\n      setOpen(false)\n      setTimelineRange(sinceId, revId)\n    },\n    [historyController, setTimelineMode, setTimelineRange]\n  )\n\n  const loadMoreHistory = useCallback(\n    (state: boolean) => {\n      historyController.setLoadMore(state)\n    },\n    [historyController]\n  )\n\n  const content = open && (\n    <div ref={setMenuContent}>\n      {mode === 'rev' ? (\n        <Timeline\n          onSelect={selectRev}\n          onLoadMore={loadMoreHistory}\n          timeline={timeline}\n          {...revTimelineProps(historyController.realRevChunk)}\n        />\n      ) : (\n        <Timeline\n          onSelect={selectSince}\n          onLoadMore={loadMoreHistory}\n          timeline={timeline}\n          {...sinceTimelineProps(historyController.sinceTime!, historyController.realRevChunk)}\n        />\n      )}\n    </div>\n  )\n\n  const timeAgo = useTimeAgo(chunk?.endTimestamp || '', {agoSuffix: true})\n\n  const revLabel = chunk\n    ? `${upperFirst(formatTimelineEventLabel(chunk.type))} ${timeAgo}`\n    : 'Current version'\n\n  const sinceLabel = chunk\n    ? `Since ${formatTimelineEventLabel(chunk.type)} ${timeAgo}`\n    : 'Since unknown version'\n\n  const openLabel = mode === 'rev' ? 'Select version' : 'Review changes since'\n  const buttonLabel = mode === 'rev' ? revLabel : sinceLabel\n\n  return (\n    <Root\n      constrainSize\n      content={content}\n      data-ui=\"versionMenu\"\n      open={open}\n      portal\n      referenceElement={buttonRef}\n    >\n      <Button\n        disabled={!ready}\n        mode=\"bleed\"\n        fontSize={1}\n        padding={2}\n        iconRight={SelectIcon}\n        onClick={open ? handleClose : handleOpen}\n        ref={setButtonRef}\n        selected={open}\n        text={open ? openLabel : buttonLabel}\n      />\n    </Root>\n  )\n}\n","import {AnnotationDetails, visitDiff, Diff} from '../../../../field'\n\nexport function collectLatestAuthorAnnotations(diff: Diff): AnnotationDetails[] {\n  const authorMap = new Map<string, AnnotationDetails>()\n  visitDiff(diff, (child) => {\n    if (child.action === 'unchanged' || !('annotation' in child) || !child.annotation) {\n      return true\n    }\n\n    const {author, timestamp} = child.annotation\n    const previous = authorMap.get(author)\n    if (!previous || previous.timestamp < timestamp) {\n      authorMap.set(author, child.annotation)\n    }\n\n    return true\n  })\n\n  return Array.from(authorMap.values()).sort((a, b) => (a.timestamp < b.timestamp ? 1 : -1))\n}\n","import React from 'react'\nimport {Box, Flex, Spinner, Text} from '@sanity/ui'\n\nexport function LoadingContent() {\n  return (\n    <Flex align=\"center\" justify=\"center\">\n      <Spinner muted />\n      <Box marginTop={3}>\n        <Text align=\"center\">Loading changesâ€¦</Text>\n      </Box>\n    </Flex>\n  )\n}\n","import {CloseIcon} from '@sanity/icons'\nimport {AvatarStack, BoundaryElementProvider, Box, Button, Flex} from '@sanity/ui'\nimport React, {useRef} from 'react'\nimport styled from 'styled-components'\nimport {ObjectDiff} from '@sanity/diff'\nimport {\n  DocumentChangeContextInstance,\n  DiffTooltip,\n  NoChanges,\n  DocumentChangeContext,\n  ChangeList,\n} from '../../../../field'\nimport {PaneContent, PaneHeader, usePane} from '../../../components'\nimport {TimelineMenu} from '../timeline'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {ScrollContainer} from '../../../../components/scroll'\nimport {ChangeFieldWrapper} from '../../../../components/changeIndicators'\nimport {UserAvatar} from '../../../../components/UserAvatar'\nimport {collectLatestAuthorAnnotations} from './helpers'\nimport {LoadingContent} from './content/LoadingContent'\n\nconst Scroller = styled(ScrollContainer)`\n  height: 100%;\n  overflow: auto;\n  position: relative;\n  scroll-behavior: smooth;\n`\n\nexport function ChangesPanel(): React.ReactElement | null {\n  const {documentId, onHistoryClose, historyController, schemaType, value} = useDocumentPane()\n  const {collapsed} = usePane()\n  const scrollRef = useRef<HTMLDivElement | null>(null)\n  const historyState = historyController.selectionState\n  const loading = historyState === 'loading'\n  const since = historyController.sinceTime\n  const diff: ObjectDiff<any> | null = historyController.currentObjectDiff()\n  const isComparingCurrent = !historyController.onOlderRevision()\n\n  const documentContext: DocumentChangeContextInstance = React.useMemo(\n    () => ({\n      documentId,\n      schemaType,\n      FieldWrapper: ChangeFieldWrapper,\n      rootDiff: diff,\n      isComparingCurrent,\n      value,\n    }),\n    [documentId, diff, isComparingCurrent, schemaType, value]\n  )\n\n  const changeAnnotations = React.useMemo(\n    () => (diff ? collectLatestAuthorAnnotations(diff) : []),\n    [diff]\n  )\n\n  if (collapsed) {\n    return null\n  }\n\n  return (\n    <Flex\n      direction=\"column\"\n      flex={1}\n      style={{\n        borderLeft: '1px dashed var(--card-border-color)',\n        overflow: 'hidden',\n        minWidth: 320,\n      }}\n      data-testid=\"review-changes-pane\"\n    >\n      <PaneHeader\n        actions={\n          <Button\n            icon={CloseIcon}\n            mode=\"bleed\"\n            onClick={onHistoryClose}\n            padding={3}\n            title=\"Hide changes panel\"\n          />\n        }\n        subActions={\n          changeAnnotations.length > 0 && (\n            <Box paddingRight={1}>\n              <DiffTooltip\n                annotations={changeAnnotations}\n                description=\"Changes by\"\n                placement=\"bottom-end\"\n              >\n                <AvatarStack maxLength={4}>\n                  {changeAnnotations.map(({author}) => (\n                    <UserAvatar key={author} user={author} />\n                  ))}\n                </AvatarStack>\n              </DiffTooltip>\n            </Box>\n          )\n        }\n        tabs={<TimelineMenu mode=\"since\" chunk={since} />}\n        title=\"Changes\"\n      />\n\n      <PaneContent>\n        <BoundaryElementProvider element={scrollRef.current}>\n          <Scroller data-ui=\"Scroller\" ref={scrollRef}>\n            <Box flex={1} padding={4}>\n              <Content diff={diff} documentContext={documentContext} loading={loading} />\n            </Box>\n          </Scroller>\n        </BoundaryElementProvider>\n      </PaneContent>\n    </Flex>\n  )\n}\n\nfunction Content({\n  diff,\n  documentContext,\n  loading,\n}: {\n  diff: ObjectDiff<any> | null\n  documentContext: DocumentChangeContextInstance\n  loading: boolean\n}) {\n  const {schemaType} = useDocumentPane()\n\n  if (loading) {\n    return <LoadingContent />\n  }\n\n  if (!diff) {\n    return <NoChanges />\n  }\n\n  return (\n    <DocumentChangeContext.Provider value={documentContext}>\n      <ChangeList diff={diff} schemaType={schemaType} />\n    </DocumentChangeContext.Provider>\n  )\n}\n","import {useCallback, useEffect, useMemo, useState} from 'react'\nimport {useSettingsStore} from '../datastores'\n\n/**\n * @internal\n */\nexport function useDeskToolSetting<ValueType>(\n  namespace: string | null,\n  key: string,\n  defaultValue?: ValueType\n): [ValueType | undefined, (_value: ValueType) => void] {\n  const settingsStore = useSettingsStore()\n  const [value, setValue] = useState<ValueType | undefined>(defaultValue)\n\n  const deskToolSettings = useMemo(() => settingsStore.forNamespace('desk-tool'), [settingsStore])\n\n  const settings = useMemo(() => {\n    if (namespace) {\n      return deskToolSettings.forNamespace(namespace).forKey(key)\n    }\n\n    return deskToolSettings.forKey(key)\n  }, [deskToolSettings, namespace, key])\n\n  useEffect(() => {\n    const sub = settings.listen(defaultValue).subscribe({\n      next: setValue as any,\n    })\n\n    return () => sub?.unsubscribe()\n  }, [defaultValue, key, namespace, settings])\n\n  const set = useCallback(\n    (newValue: ValueType) => {\n      setValue(newValue)\n      settings.set(newValue as any)\n    },\n    [settings]\n  )\n\n  return useMemo(() => [value, set], [set, value])\n}\n","export const VIEW_MODE_PARSED = {id: 'parsed', title: 'Parsed'}\nexport const VIEW_MODE_RAW = {id: 'raw', title: 'Raw JSON'}\nexport const VIEW_MODES = [VIEW_MODE_PARSED, VIEW_MODE_RAW]\n","import {SanityDocumentLike} from '@sanity/types'\nimport HLRU from 'hashlru'\nimport {isRecord, isString} from '../../../../util'\n\nconst lru = HLRU(1000)\n\nexport function isExpanded(keyPath: any, value: any): any {\n  const cached = lru.get(keyPath)\n\n  if (cached === undefined) {\n    lru.set(keyPath, Array.isArray(value) || isRecord(value))\n    return isExpanded(keyPath, value)\n  }\n\n  return cached\n}\n\nexport function toggleExpanded(event: any): void {\n  const {path} = event\n  const current = lru.get(path)\n\n  if (current === undefined) {\n    // something is wrong\n    return\n  }\n\n  lru.set(path, !current)\n}\n\nexport function selectElement(element: HTMLElement): void {\n  const sel = window.getSelection()\n\n  if (sel) {\n    const range = document.createRange()\n\n    sel.removeAllRanges()\n    range.selectNodeContents(element)\n    sel.addRange(range)\n  }\n}\n\nexport function select(event: any): void {\n  selectElement(event.currentTarget)\n}\n\nexport function maybeSelectAll(event: any): void {\n  const selectAll = event.keyCode === 65 && (event.metaKey || event.ctrlKey)\n\n  if (!selectAll) {\n    return\n  }\n\n  event.preventDefault()\n\n  selectElement(event.currentTarget)\n}\n\nexport function isDocumentLike(value: unknown): value is SanityDocumentLike {\n  return isRecord(value) && isString(value._id) && isString(value._type)\n}\n","import {rem, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const JSONInspectorWrapper = styled.div(({theme}: {theme: Theme}) => {\n  const {color, fonts, space} = theme.sanity\n\n  return css`\n    & .json-inspector,\n    & .json-inspector .json-inspector__selection {\n      font-family: ${fonts.code.family};\n      font-size: ${fonts.code.sizes[2].fontSize}px;\n      line-height: ${fonts.code.sizes[2].lineHeight}px;\n      color: var(--card-code-fg-color);\n    }\n\n    & .json-inspector .json-inspector__leaf {\n      padding-left: ${rem(space[4])};\n    }\n\n    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {\n      padding-top: ${rem(space[3])};\n      padding-left: 0;\n    }\n\n    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {\n      display: none;\n    }\n\n    & .json-inspector .json-inspector__line {\n      display: block;\n      position: relative;\n      cursor: default;\n    }\n\n    & .json-inspector .json-inspector__line::after {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: -200px;\n      right: -50px;\n      bottom: 0;\n      z-index: -1;\n      pointer-events: none;\n    }\n\n    & .json-inspector .json-inspector__line:hover::after {\n      background: var(--card-code-bg-color);\n    }\n\n    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {\n      cursor: pointer;\n    }\n\n    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {\n      content: 'â–¸ ';\n      margin-left: calc(0 - ${rem(space[4])} + 3px);\n      font-size: ${fonts.code.sizes[2].fontSize}px;\n      line-height: ${fonts.code.sizes[2].lineHeight}px;\n    }\n\n    &\n      .json-inspector\n      .json-inspector__leaf_expanded.json-inspector__leaf_composite\n      > .json-inspector__line::before {\n      content: 'â–¾ ';\n      font-size: ${fonts.code.sizes[2].fontSize}px;\n      line-height: ${fonts.code.sizes[2].lineHeight}px;\n    }\n\n    & .json-inspector .json-inspector__radio,\n    & .json-inspector .json-inspector__flatpath {\n      display: none;\n    }\n\n    & .json-inspector .json-inspector__value {\n      margin-left: ${rem(space[4] / 2)};\n    }\n\n    &\n      .json-inspector\n      > .json-inspector__leaf_root\n      > .json-inspector__line\n      > .json-inspector__key\n      + .json-inspector__value {\n      margin: 0;\n    }\n\n    & .json-inspector .json-inspector__key {\n      color: ${color.syntax.property};\n    }\n\n    & .json-inspector .json-inspector__value_helper,\n    & .json-inspector .json-inspector__value_null {\n      color: ${color.syntax.constant};\n    }\n\n    & .json-inspector .json-inspector__not-found {\n      padding-top: ${rem(space[3])};\n    }\n\n    & .json-inspector .json-inspector__value_string {\n      color: ${color.syntax.string};\n    }\n\n    & .json-inspector .json-inspector__value_boolean {\n      color: ${color.syntax.boolean};\n    }\n\n    & .json-inspector .json-inspector__value_number {\n      color: ${color.syntax.number};\n    }\n\n    & .json-inspector .json-inspector__show-original {\n      display: inline-block;\n      padding: 0 6px;\n      cursor: pointer;\n    }\n\n    & .json-inspector .json-inspector__show-original:hover {\n      color: inherit;\n    }\n\n    & .json-inspector .json-inspector__show-original::before {\n      content: 'â†”';\n    }\n\n    & .json-inspector .json-inspector__show-original:hover::after {\n      content: ' expand';\n    }\n  `\n})\n","import {SearchIcon} from '@sanity/icons'\nimport {TextInput} from '@sanity/ui'\nimport React, {useCallback} from 'react'\n\nexport function Search(props: {onChange: (q: string) => void; query: string}) {\n  const {onChange, query} = props\n\n  const handleChange = useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => onChange(event.target.value),\n    [onChange]\n  )\n\n  return (\n    <TextInput\n      icon={SearchIcon}\n      onChange={handleChange}\n      placeholder=\"Search\"\n      radius={2}\n      value={query || ''}\n    />\n  )\n}\n","import {SanityDocument} from '@sanity/types'\nimport {Card, Code, Dialog, Flex, Tab, TabList, TabPanel} from '@sanity/ui'\nimport React, {useCallback} from 'react'\nimport JSONInspector from '@rexxars/react-json-inspector'\nimport {DocTitle} from '../../../components'\nimport {useDeskToolSetting} from '../../../useDeskToolSetting'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {VIEW_MODE_PARSED, VIEW_MODE_RAW, VIEW_MODES} from './constants'\nimport {isDocumentLike, isExpanded, maybeSelectAll, select, toggleExpanded} from './helpers'\nimport {JSONInspectorWrapper} from './InspectDialog.styles'\nimport {Search} from './Search'\n\ninterface InspectDialogProps {\n  value: Partial<SanityDocument> | null\n}\n\nexport function InspectDialog(props: InspectDialogProps) {\n  const {value} = props\n  const {onInspectClose, paneKey} = useDocumentPane()\n  const dialogIdPrefix = `${paneKey}_inspect_`\n\n  /* this creates a view mode (the default that it opens with is the parsed tab) that is saved based on the paneKey\n  where the inspect dialog lives.\n  This also means that when a page is loaded, the state of the tabs remains and doesn't revert to the pane tab */\n  const [viewModeId, onViewModeChange] = useDeskToolSetting(\n    'desk-tool',\n    `inspect-view-preferred-view-mode-${paneKey}`,\n    'parsed'\n  )\n\n  /* based on the view mode it shows the right tab content */\n  const viewMode = VIEW_MODES.find((mode) => mode.id === viewModeId)\n\n  const setParsedViewMode = useCallback(() => {\n    onViewModeChange(VIEW_MODE_PARSED.id)\n  }, [onViewModeChange])\n\n  const setRawViewMode = useCallback(() => {\n    onViewModeChange(VIEW_MODE_RAW.id)\n  }, [onViewModeChange])\n\n  return (\n    <Dialog\n      id={`${dialogIdPrefix}dialog`}\n      header={\n        isDocumentLike(value) ? (\n          <>\n            Inspecting{' '}\n            <em>\n              <DocTitle document={value} />\n            </em>\n          </>\n        ) : (\n          <em>No value</em>\n        )\n      }\n      onClose={onInspectClose}\n      width={3}\n    >\n      <Flex direction=\"column\" height=\"fill\">\n        <Card padding={3} shadow={1} style={{position: 'sticky', bottom: 0, zIndex: 3}}>\n          <TabList space={1}>\n            <Tab\n              aria-controls={`${dialogIdPrefix}tabpanel`}\n              fontSize={1}\n              id={`${dialogIdPrefix}tab-${VIEW_MODE_PARSED.id}`}\n              label={VIEW_MODE_PARSED.title}\n              onClick={setParsedViewMode}\n              selected={viewMode === VIEW_MODE_PARSED}\n            />\n            <Tab\n              aria-controls={`${dialogIdPrefix}tabpanel`}\n              fontSize={1}\n              id={`${dialogIdPrefix}tab-${VIEW_MODE_RAW.id}`}\n              label={VIEW_MODE_RAW.title}\n              onClick={setRawViewMode}\n              selected={viewMode === VIEW_MODE_RAW}\n            />\n          </TabList>\n        </Card>\n\n        <TabPanel\n          aria-labelledby={`${dialogIdPrefix}tab-${viewModeId}`}\n          flex={1}\n          id={`${dialogIdPrefix}tabpanel`}\n          overflow=\"auto\"\n          padding={4}\n          style={{outline: 'none'}}\n        >\n          {viewMode === VIEW_MODE_PARSED && (\n            <JSONInspectorWrapper>\n              <JSONInspector\n                data={value}\n                isExpanded={isExpanded}\n                onClick={toggleExpanded}\n                search={Search}\n              />\n            </JSONInspectorWrapper>\n          )}\n\n          {viewMode === VIEW_MODE_RAW && (\n            <Code\n              language=\"json\"\n              tabIndex={0}\n              onKeyDown={maybeSelectAll}\n              onDoubleClick={select}\n              onFocus={select}\n            >\n              {JSON.stringify(value, null, 2)}\n            </Code>\n          )}\n        </TabPanel>\n      </Flex>\n    </Dialog>\n  )\n}\n","import {Box, Button, Card, Container, Flex, Text} from '@sanity/ui'\nimport {WarningOutlineIcon, SyncIcon, CloseIcon} from '@sanity/icons'\nimport React, {memo, useCallback, useMemo} from 'react'\nimport styled from 'styled-components'\nimport {fromString as pathFromString, get as pathGet} from '@sanity/util/paths'\nimport {KeyedSegment, Reference} from '@sanity/types'\nimport {debounceTime, map} from 'rxjs/operators'\nimport {concat, Observable, of} from 'rxjs'\nimport {useMemoObservable} from 'react-rx'\nimport {RouterPaneGroup} from '../../../types'\nimport {useDocumentPreviewStore} from '../../../../datastores'\nimport {DocumentAvailability} from '../../../../preview'\nimport {getPublishedId} from '../../../../util'\nimport {usePaneRouter} from '../../../components'\n\nconst Root = styled(Card)`\n  position: relative;\n  z-index: 50;\n`\n\nconst TextOneLine = styled(Text)`\n  & > * {\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  }\n`\n\ninterface ParentReferenceInfo {\n  loading: boolean\n  result?: {\n    availability: {draft: DocumentAvailability; published: DocumentAvailability}\n    refValue: string | undefined\n  }\n}\n\nexport const ReferenceChangedBanner = memo(() => {\n  const documentPreviewStore = useDocumentPreviewStore()\n  const {params, groupIndex, routerPanesState, replaceCurrent, BackLink} = usePaneRouter()\n  const routerReferenceId = routerPanesState[groupIndex]?.[0].id\n  const parentGroup = routerPanesState[groupIndex - 1] as RouterPaneGroup | undefined\n  const parentSibling = parentGroup?.[0]\n  const parentId = parentSibling?.id\n  const hasHistoryOpen = Boolean(parentSibling?.params?.rev)\n  const parentRefPath = useMemo(() => {\n    return (params?.parentRefPath && pathFromString(params.parentRefPath)) || null\n  }, [params?.parentRefPath])\n\n  /**\n   * Loads information regarding the reference field of the parent pane. This\n   * is only applicable to child references (aka references-in-place).\n   *\n   * It utilizes the pane ID of the parent pane (which is a document ID) along\n   * with the `parentRefPath` router param on the current pane to find the\n   * current value of the reference field on the parent document.\n   *\n   * This is used to compare with the current pane's document ID. If the IDs\n   * don't match then this banner should reveal itself\n   */\n  const referenceInfo = useMemoObservable(\n    (): Observable<ParentReferenceInfo> => {\n      const parentRefPathSegment = parentRefPath?.[0] as string | undefined\n\n      // short-circuit: this document pane is not a child reference pane\n      if (!parentId || !parentRefPathSegment || !parentRefPath) {\n        return of({loading: false})\n      }\n\n      const publishedId = getPublishedId(parentId)\n      const path = pathFromString(parentRefPathSegment)\n\n      // note: observePaths doesn't support keyed path segments, so we need to select the nearest parent\n      const keyedSegmentIndex = path.findIndex(\n        (p): p is KeyedSegment => typeof p == 'object' && '_key' in p\n      )\n\n      return concat(\n        // emit a loading state instantly\n        of({loading: true}),\n        // then emit the values from watching the published ID's path\n        documentPreviewStore\n          .unstable_observePathsDocumentPair(\n            {_type: 'reference', _ref: publishedId},\n            (keyedSegmentIndex === -1 ? path : path.slice(0, keyedSegmentIndex)) as string[][]\n          )\n          .pipe(\n            // this debounce time is needed to prevent flashing banners due to\n            // the router state updating faster than the content-lake state. we\n            // debounce to wait for more emissions because the value pulled\n            // initially could be stale.\n            debounceTime(750),\n            map(\n              ({draft, published}): ParentReferenceInfo => ({\n                loading: false,\n                result: {\n                  availability: {\n                    draft: draft.availability,\n                    published: published.availability,\n                  },\n                  refValue: pathGet<Reference>(draft.snapshot || published.snapshot, parentRefPath)\n                    ?._ref,\n                },\n              })\n            )\n          )\n      )\n    },\n    [parentId, parentRefPath],\n    {loading: true}\n  )\n\n  const handleReloadReference = useCallback(() => {\n    if (referenceInfo.loading) return\n\n    if (referenceInfo.result?.refValue) {\n      replaceCurrent({\n        id: referenceInfo.result.refValue,\n        params: params as Record<string, string>,\n      })\n    }\n  }, [referenceInfo.loading, referenceInfo.result, replaceCurrent, params])\n\n  const shouldHide =\n    // if `parentId` or `parentRefPath` is not present then this banner is n/a\n    !parentId ||\n    !parentRefPath ||\n    // if viewing this pane via history, then hide\n    hasHistoryOpen ||\n    // if loading, hide\n    referenceInfo.loading ||\n    // if the parent document is not available (e.g. due to permission denied or\n    // not found) we don't want to display a warning here, but instead rely on the\n    // parent view to display the appropriate message\n    (!referenceInfo.result?.availability.draft.available &&\n      !referenceInfo.result?.availability.published.available) ||\n    // if the references are the same, then hide the reference changed banner\n    referenceInfo.result?.refValue === routerReferenceId\n\n  if (shouldHide) return null\n\n  return (\n    <Root shadow={1} tone=\"caution\" data-testid=\"reference-changed-banner\">\n      <Container paddingX={4} paddingY={2} sizing=\"border\" width={1}>\n        <Flex align=\"center\">\n          <Text size={1}>\n            <WarningOutlineIcon />\n          </Text>\n\n          {referenceInfo.result?.refValue ? (\n            <>\n              <Box flex={1} marginLeft={3}>\n                <TextOneLine title=\"This reference has changed since you opened it.\" size={1}>\n                  This reference has changed since you opened it.\n                </TextOneLine>\n              </Box>\n              <Box marginLeft={3}>\n                <Button\n                  onClick={handleReloadReference}\n                  icon={SyncIcon}\n                  fontSize={1}\n                  mode=\"ghost\"\n                  padding={2}\n                  space={2}\n                  text=\"Reload reference\"\n                />\n              </Box>\n            </>\n          ) : (\n            <>\n              <Box flex={1} marginLeft={3}>\n                <TextOneLine title=\"This reference has been removed since you opened it.\" size={1}>\n                  This reference has been removed since you opened it.\n                </TextOneLine>\n              </Box>\n              <Box marginLeft={3}>\n                <Button\n                  as={BackLink}\n                  icon={CloseIcon}\n                  fontSize={1}\n                  mode=\"ghost\"\n                  padding={2}\n                  space={2}\n                  text=\"Close reference\"\n                />\n              </Box>\n            </>\n          )}\n        </Flex>\n      </Container>\n    </Root>\n  )\n})\n\nReferenceChangedBanner.displayName = 'ReferenceChangedBanner'\n","import React from 'react'\nimport {Box, Card, Container, Flex, Text} from '@sanity/ui'\nimport {ReadOnlyIcon} from '@sanity/icons'\nimport styled from 'styled-components'\nimport {useCurrentUser} from '../../../../datastores'\n\nconst Root = styled(Card)`\n  position: relative;\n  z-index: 50;\n`\n\ninterface PermissionCheckBannerProps {\n  granted: boolean\n  requiredPermission: string\n}\n\nexport function PermissionCheckBanner({granted, requiredPermission}: PermissionCheckBannerProps) {\n  const currentUser = useCurrentUser()\n  const plural = currentUser?.roles?.length !== 1\n\n  const roles = join(\n    currentUser?.roles?.map((r) => <code key={r.name}>{r.title}</code>) || [],\n    ', '\n  )\n\n  if (granted) return null\n\n  return (\n    <Root data-testid=\"permission-check-banner\" shadow={1} tone=\"transparent\">\n      <Container paddingX={4} paddingY={3} sizing=\"border\" width={1}>\n        <Flex align=\"flex-start\">\n          <Text size={1}>\n            <ReadOnlyIcon />\n          </Text>\n\n          <Box flex={1} marginLeft={3}>\n            <Text size={1}>\n              Your role{plural && 's'} {roles} {plural ? 'do' : 'does'} not have permissions to{' '}\n              {requiredPermission} this document.\n            </Text>\n          </Box>\n        </Flex>\n      </Container>\n    </Root>\n  )\n}\n\nfunction join<T, S>(array: Array<T>, sep: S): Array<T | S> | null {\n  return array.reduce((result: Array<T | S> | null, item: T | S) => {\n    if (result === null) {\n      return [item]\n    }\n\n    return result.concat([sep, item])\n  }, null)\n}\n","/* eslint-disable no-nested-ternary */\n\nimport {isActionEnabled} from '@sanity/schema/_internal'\nimport {Box, Container, Flex, Spinner, Text} from '@sanity/ui'\nimport React, {useCallback, useEffect, useMemo} from 'react'\nimport {tap} from 'rxjs/operators'\nimport {useDocumentPane} from '../../useDocumentPane'\nimport {Delay} from '../../../../components/Delay'\nimport {useDocumentPresence, useDocumentStore} from '../../../../../datastores'\nimport {\n  createPatchChannel,\n  fromMutationPatches,\n  PatchEvent,\n  PatchMsg,\n  StudioFormBuilder,\n} from '../../../../../form'\nimport {PresenceOverlay} from '../../../../../presence'\nimport {\n  DocumentMutationEvent,\n  DocumentRebaseEvent,\n} from '../../../../../datastores/document/buffered-doc/types'\n\ninterface FormViewProps {\n  granted: boolean\n  hidden: boolean\n  margins: [number, number, number, number]\n}\n\n// interface FormViewState {\n//   filterField: FormBuilderFilterFieldFn\n// }\n\n// const INITIAL_STATE: FormViewState = {\n//   filterField: () => true,\n// }\n\nconst preventDefault = (ev: React.FormEvent) => ev.preventDefault()\n\nexport function FormView(props: FormViewProps) {\n  const {hidden, margins, granted} = props\n\n  const {\n    collapsedFieldSets,\n    collapsedPaths,\n    displayed: value,\n    documentId,\n    documentType,\n    onChange: _handleChange,\n    historyController,\n    validation,\n    ready,\n    // changesOpen,\n    formState,\n    onFocus,\n    onBlur,\n    onSetCollapsedPath,\n    onPathOpen,\n    onSetCollapsedFieldSet,\n    onSetActiveFieldGroup,\n    schemaType,\n  } = useDocumentPane()\n  const documentStore = useDocumentStore()\n  const {revTime: rev} = historyController\n  // const [{filterField}, setState] = useState<FormViewState>(INITIAL_STATE)\n\n  const hasTypeMismatch = value !== null && value._type !== schemaType.name\n  const isNonExistent = !value || !value._id\n  const presence = useDocumentPresence(documentId)\n\n  // The `patchChannel` is an INTERNAL publish/subscribe channel that we use to notify form-builder\n  // nodes about both remote and local patches.\n  // - Used by the Portable Text input to modify selections.\n  // - Used by `withDocument` to reset value.\n  const patchChannel = useMemo(() => createPatchChannel(), [])\n\n  const isReadOnly = useMemo(() => {\n    return (\n      formState === null ||\n      formState.readOnly ||\n      !ready ||\n      rev !== null ||\n      !granted ||\n      !isActionEnabled(schemaType, 'update') ||\n      (isNonExistent && !isActionEnabled(schemaType, 'create'))\n    )\n  }, [formState, ready, rev, granted, isNonExistent, schemaType])\n\n  const handleChange = useCallback(\n    (patchEvent: PatchEvent) => {\n      if (!isReadOnly) _handleChange(patchEvent)\n    },\n    [_handleChange, isReadOnly]\n  )\n\n  // useEffect(() => {\n  //   if (!filterFieldFn$) return undefined\n\n  //   const sub = filterFieldFn$.subscribe((nextFilterField) =>\n  //     setState({filterField: nextFilterField})\n  //   )\n\n  //   return () => sub.unsubscribe()\n  // }, [])\n\n  useEffect(() => {\n    const sub = documentStore.pair\n      .documentEvents(documentId, documentType)\n      .pipe(\n        tap((event) => {\n          if (event.type === 'mutation') {\n            patchChannel.publish(prepareMutationEvent(event))\n          }\n\n          if (event.type === 'rebase') {\n            patchChannel.publish(prepareRebaseEvent(event))\n          }\n        })\n      )\n      .subscribe()\n\n    return () => {\n      sub.unsubscribe()\n    }\n  }, [documentId, documentStore, documentType, patchChannel])\n\n  const hasRev = Boolean(value?._rev)\n  useEffect(() => {\n    if (hasRev) {\n      // this is a workaround for an issue that caused the document pushed to withDocument to get\n      // stuck at the first initial value.\n      // This effect is triggered only when the document goes from not having a revision, to getting one\n      // so it will kick in as soon as the document is received from the backend\n      patchChannel.publish({\n        type: 'mutation',\n        patches: [],\n        snapshot: value,\n      })\n    }\n    // React to changes in hasRev only\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [hasRev])\n\n  // const after = useMemo(\n  //   () =>\n  //     Array.isArray(afterEditorComponents) &&\n  //     afterEditorComponents.map(\n  //       (AfterEditorComponent: React.ComponentType<{documentId: string}>, idx: number) => (\n  //         <AfterEditorComponent key={String(idx)} documentId={documentId} />\n  //       )\n  //     ),\n  //   [documentId]\n  // )\n\n  return (\n    <Container\n      hidden={hidden}\n      paddingX={4}\n      paddingTop={5}\n      paddingBottom={9}\n      sizing=\"border\"\n      width={1}\n    >\n      <PresenceOverlay margins={margins}>\n        <Box as=\"form\" onSubmit={preventDefault}>\n          {ready ? (\n            formState === null ? (\n              <Box padding={2}>\n                <Text>This form is hidden</Text>\n              </Box>\n            ) : (\n              <StudioFormBuilder\n                __internal_patchChannel={patchChannel}\n                collapsedFieldSets={collapsedFieldSets}\n                collapsedPaths={collapsedPaths}\n                focusPath={formState.focusPath}\n                changed={formState.changed}\n                focused={formState.focused}\n                groups={formState.groups}\n                id=\"root\"\n                members={formState.members}\n                onChange={handleChange}\n                onFieldGroupSelect={onSetActiveFieldGroup}\n                onPathBlur={onBlur}\n                onPathFocus={onFocus}\n                onPathOpen={onPathOpen}\n                onSetFieldSetCollapsed={onSetCollapsedFieldSet}\n                onSetPathCollapsed={onSetCollapsedPath}\n                presence={presence}\n                readOnly={isReadOnly}\n                schemaType={formState.schemaType}\n                validation={validation}\n                value={formState.value}\n              />\n            )\n          ) : (\n            <Delay ms={300}>\n              <Flex align=\"center\" direction=\"column\" height=\"fill\" justify=\"center\">\n                <Spinner muted />\n\n                <Box marginTop={3}>\n                  <Text align=\"center\" muted size={1}>\n                    Loading document\n                  </Text>\n                </Box>\n              </Flex>\n            </Delay>\n          )}\n        </Box>\n      </PresenceOverlay>\n    </Container>\n  )\n}\n\nfunction prepareMutationEvent(event: DocumentMutationEvent): PatchMsg {\n  const patches = event.mutations.map((mut) => mut.patch).filter(Boolean)\n\n  return {\n    type: 'mutation',\n    snapshot: event.document,\n    patches: fromMutationPatches(event.origin, patches),\n  }\n}\n\nfunction prepareRebaseEvent(event: DocumentRebaseEvent): PatchMsg {\n  const remotePatches = event.remoteMutations.map((mut) => mut.patch).filter(Boolean)\n  const localPatches = event.localMutations.map((mut) => mut.patch).filter(Boolean)\n\n  return {\n    type: 'rebase',\n    snapshot: event.document,\n    patches: fromMutationPatches('remote', remotePatches).concat(\n      fromMutationPatches('local', localPatches)\n    ),\n  }\n}\n","import React, {useCallback} from 'react'\nimport {Tab, TabList} from '@sanity/ui'\nimport {useDocumentPane} from '../../useDocumentPane'\nimport {usePaneRouter} from '../../../../components'\n\nexport function DocumentHeaderTabs() {\n  const {activeViewId, paneKey, views} = useDocumentPane()\n  const tabPanelId = `${paneKey}tabpanel`\n\n  return (\n    <TabList space={1}>\n      {views.map((view, index) => (\n        <DocumentHeaderTab\n          icon={view.icon}\n          id={`${paneKey}tab-${view.id}`}\n          isActive={activeViewId === view.id}\n          key={view.id}\n          label={<>{view.title}</>}\n          tabPanelId={tabPanelId}\n          viewId={index === 0 ? null : view.id ?? null}\n        />\n      ))}\n    </TabList>\n  )\n}\n\nfunction DocumentHeaderTab(props: {\n  icon?: React.ComponentType | React.ReactNode\n  id: string\n  isActive: boolean\n  label: React.ReactNode\n  tabPanelId: string\n  viewId: string | null\n}) {\n  const {icon, id, isActive, label, tabPanelId, viewId} = props\n  const {ready} = useDocumentPane()\n  const {setView} = usePaneRouter()\n  const handleClick = useCallback(() => setView(viewId), [setView, viewId])\n\n  return (\n    <Tab\n      aria-controls={tabPanelId}\n      disabled={!ready}\n      fontSize={1}\n      icon={icon}\n      id={id}\n      selected={isActive}\n      label={label as any}\n      onClick={handleClick}\n    />\n  )\n}\n","import {ValidationMarker, Path} from '@sanity/types'\nimport React, {useCallback, useMemo} from 'react'\nimport {WarningOutlineIcon, ErrorOutlineIcon, InfoOutlineIcon} from '@sanity/icons'\nimport {Box, Text, MenuItem, Stack, Flex, ButtonTone} from '@sanity/ui'\nimport styled from 'styled-components'\n\ninterface ValidationListItemProps {\n  marker: ValidationMarker\n  onClick?: (path?: Path) => void\n  path: string\n  truncate?: boolean\n}\n\nconst StyledText = styled(Text)`\n  white-space: initial;\n`\n\nconst MENU_ITEM_TONES: Record<'error' | 'warning' | 'info', ButtonTone> = {\n  error: 'critical',\n  warning: 'caution',\n  info: 'primary',\n}\n\nexport function ListItem(props: ValidationListItemProps) {\n  const {marker, onClick, path, truncate} = props\n\n  const handleClick = useCallback(() => {\n    if (onClick) {\n      onClick(marker.path)\n    }\n  }, [marker.path, onClick])\n\n  const menuItemTone = MENU_ITEM_TONES[marker?.level] || undefined\n\n  const children = (\n    <Flex>\n      <Box>\n        <Text size={1}>\n          {marker.level === 'error' && <ErrorOutlineIcon />}\n          {marker.level === 'warning' && <WarningOutlineIcon />}\n          {marker.level === 'info' && <InfoOutlineIcon />}\n        </Text>\n      </Box>\n\n      <Stack space={2} flex={1} paddingLeft={3}>\n        {path && (\n          <StyledText size={1} weight=\"semibold\">\n            {path}\n          </StyledText>\n        )}\n        {marker.item.message && (\n          <StyledText muted size={1} textOverflow={truncate ? 'ellipsis' : undefined}>\n            {marker.item.message}\n          </StyledText>\n        )}\n      </Stack>\n    </Flex>\n  )\n  return (\n    <MenuItem padding={1} onClick={handleClick} radius={2} tone={menuItemTone}>\n      <Box padding={2}>{children}</Box>\n    </MenuItem>\n  )\n}\n","import React, {useCallback} from 'react'\nimport {\n  ObjectSchemaType,\n  Path,\n  ValidationMarker,\n  isValidationErrorMarker,\n  isValidationWarningMarker,\n  isValidationInfoMarker,\n} from '@sanity/types'\nimport {Container} from '@sanity/ui'\nimport {ListItem} from './listItem'\n\nexport interface ValidationListProps {\n  documentType?: ObjectSchemaType\n  kind?: 'simple'\n  validation: ValidationMarker[]\n  onFocus?: (path: Path) => void\n  onClose?: () => void\n  truncate?: boolean\n}\n\nexport function ValidationList(props: ValidationListProps) {\n  const {documentType, kind, validation, onFocus, onClose, truncate} = props\n  const errors = validation.filter(isValidationErrorMarker)\n  const warnings = validation.filter(isValidationWarningMarker)\n  const info = validation.filter(isValidationInfoMarker)\n\n  const handleClick = useCallback(\n    (path: Path = []) => {\n      if (onFocus) onFocus(path)\n      if (onClose) onClose()\n    },\n    [onFocus, onClose]\n  )\n\n  const resolvePathTitle = (path: Path) => {\n    const fields = documentType && documentType.fields\n    const field = fields && fields.find((curr) => curr.name === path[0])\n\n    return (field && field.type.title) || ''\n  }\n\n  const hasErrors = errors.length > 0\n  const hasWarnings = warnings.length > 0\n  const hasInfo = info.length > 0\n\n  if (!hasErrors && !hasWarnings && !hasInfo) {\n    return null\n  }\n\n  return (\n    <Container width={0} data-kind={kind} data-testid=\"validation-list\">\n      {hasErrors &&\n        errors.map((_error, i) => (\n          <ListItem\n            // eslint-disable-next-line react/no-array-index-key\n            key={i}\n            truncate={truncate}\n            path={resolvePathTitle(_error.path)}\n            marker={_error}\n            onClick={handleClick}\n          />\n        ))}\n      {hasWarnings &&\n        warnings.map((_warning, i) => (\n          <ListItem\n            // eslint-disable-next-line react/no-array-index-key\n            key={i}\n            truncate={truncate}\n            path={resolvePathTitle(_warning.path)}\n            marker={_warning}\n            onClick={handleClick}\n          />\n        ))}\n      {hasInfo &&\n        info.map((_info, i) => (\n          <ListItem\n            // eslint-disable-next-line react/no-array-index-key\n            key={i}\n            truncate={truncate}\n            path={resolvePathTitle(_info.path)}\n            marker={_info}\n            onClick={handleClick}\n          />\n        ))}\n    </Container>\n  )\n}\n","import {useId} from '@reach/auto-id'\nimport {ErrorOutlineIcon, InfoOutlineIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {\n  isValidationInfoMarker,\n  isValidationWarningMarker,\n  isValidationErrorMarker,\n} from '@sanity/types'\nimport {Button, ButtonProps, Menu, MenuButton} from '@sanity/ui'\nimport React, {useCallback, useMemo} from 'react'\nimport {ValidationList} from '../../../../../components/validation'\nimport {useDocumentPane} from '../../useDocumentPane'\n\nexport interface ValidationMenuProps {\n  boundaryElement: HTMLDivElement | null\n  isOpen: boolean\n  setOpen: (val: boolean) => void\n}\n\nconst BUTTON_PROPS: Record<'error' | 'warning' | 'info', ButtonProps> = {\n  error: {\n    tone: 'critical',\n    icon: ErrorOutlineIcon,\n  },\n  warning: {\n    tone: 'caution',\n    icon: WarningOutlineIcon,\n  },\n  info: {\n    tone: 'primary',\n    icon: InfoOutlineIcon,\n  },\n}\n\nexport function ValidationMenu(props: ValidationMenuProps) {\n  const {boundaryElement, isOpen, setOpen} = props\n  const {onFocus, onPathOpen, schemaType, validation} = useDocumentPane()\n  const id = useId()\n  const hasValidationMarkers = validation.length > 0\n  const hasErrorMarkers = validation.some(isValidationErrorMarker)\n  const hasWarningMarkers = validation.some(isValidationWarningMarker)\n  const hasInfoMarkers = validation.some(isValidationInfoMarker)\n\n  const buttonProps = useMemo(() => {\n    if (hasErrorMarkers) return BUTTON_PROPS.error\n    if (hasWarningMarkers) return BUTTON_PROPS.warning\n    if (hasInfoMarkers) return BUTTON_PROPS.info\n    return undefined\n  }, [hasErrorMarkers, hasInfoMarkers, hasWarningMarkers])\n\n  const handleClose = useCallback(() => setOpen(false), [setOpen])\n\n  if (!hasValidationMarkers) return null\n\n  return (\n    <MenuButton\n      id={id || ''}\n      button={\n        <Button\n          {...buttonProps}\n          title=\"Show validation issues\"\n          mode=\"bleed\"\n          data-testid=\"validation-list-button\"\n        />\n      }\n      menu={\n        <Menu open={isOpen}>\n          <ValidationList\n            documentType={schemaType}\n            validation={validation}\n            onClose={handleClose}\n            onFocus={onPathOpen}\n          />\n        </Menu>\n      }\n      popover={{\n        portal: true,\n        boundaryElement: boundaryElement,\n        constrainSize: true,\n        preventOverflow: true,\n        width: 0,\n      }}\n      placement=\"bottom-end\"\n    />\n  )\n}\n","import React, {ReactElement} from 'react'\nimport {useDocumentPane} from '../../useDocumentPane'\nimport {unstable_useDocumentPreview as useDocumentPreview} from '../../../../../preview'\n\nexport function DocumentHeaderTitle(): ReactElement {\n  const {connectionState, schemaType, title, value: documentValue} = useDocumentPane()\n  const subscribed = Boolean(documentValue) && connectionState === 'connected'\n\n  const {error, value} = useDocumentPreview({\n    enabled: subscribed,\n    schemaType,\n    value: documentValue,\n  })\n\n  if (connectionState !== 'connected') {\n    return <></>\n  }\n\n  if (!documentValue) {\n    return <>New {schemaType?.title || schemaType?.name}</>\n  }\n\n  if (subscribed) {\n    if (error) {\n      return <>Error: {error.message}</>\n    }\n\n    return (\n      <>{value?.title || <span style={{color: 'var(--card-muted-fg-color)'}}>Untitled</span>}</>\n    )\n  }\n\n  return <>{title}</>\n}\n","import {ArrowLeftIcon, CloseIcon, SplitVerticalIcon} from '@sanity/icons'\nimport {Button, Inline} from '@sanity/ui'\nimport {negate} from 'lodash'\nimport React, {createElement, memo, forwardRef, useMemo} from 'react'\nimport {PaneMenuItem} from '../../../../types'\nimport {PaneHeader, PaneContextMenuButton, usePaneRouter} from '../../../../components'\nimport {TimelineMenu} from '../../timeline'\nimport {useDocumentPane} from '../../useDocumentPane'\nimport {useDeskTool} from '../../../../useDeskTool'\nimport {DocumentHeaderTabs} from './DocumentHeaderTabs'\nimport {ValidationMenu} from './ValidationMenu'\nimport {DocumentHeaderTitle} from './DocumentHeaderTitle'\n\nexport interface DocumentPanelHeaderProps {\n  // TODO:\n  // eslint-disable-next-line react/no-unused-prop-types\n  rootElement: HTMLDivElement | null\n}\n\nconst isActionButton = (item: PaneMenuItem) => Boolean(item.showAsAction)\nconst isMenuButton = negate(isActionButton)\n\nexport const DocumentPanelHeader = memo(\n  forwardRef(({rootElement}: DocumentPanelHeaderProps, ref: React.ForwardedRef<HTMLDivElement>) => {\n    const {\n      onMenuAction,\n      onPaneClose,\n      onPaneSplit,\n      historyController,\n      validation,\n      menuItems,\n      menuItemGroups,\n      schemaType,\n      ready,\n      views,\n      unstable_languageFilter,\n    } = useDocumentPane()\n    const {revTime: rev} = historyController\n    const {features} = useDeskTool()\n    const {index, BackLink, hasGroupSiblings} = usePaneRouter()\n    const contextMenuItems = useMemo(() => menuItems.filter(isMenuButton), [menuItems])\n    const [isValidationOpen, setValidationOpen] = React.useState<boolean>(false)\n    const showTabs = views.length > 1\n    const showVersionMenu = features.reviewChanges\n\n    // there are three kinds of buttons possible:\n    //\n    // 1. split pane - creates a new split pane\n    // 2. close split pane â€” closes the current split pane\n    // 3. close pane group â€” closes the current pane group\n\n    // show the split pane button if they're enabled and there is more than one\n    // view available to use to create a split view\n    const showSplitPaneButton = features.splitViews && onPaneSplit && views.length > 1\n\n    // show the split pane button close button if the split button is showing\n    // and there is more than one split pane open (aka has-siblings)\n    const showSplitPaneCloseButton = showSplitPaneButton && hasGroupSiblings\n\n    // show the pane group close button if the `showSplitPaneCloseButton` is\n    // _not_ showing (the split pane button replaces the group close button)\n    // and if the back button is not showing (the back button and the close\n    // button) do the same thing and shouldn't be shown at the same time)\n    const showPaneGroupCloseButton = !showSplitPaneCloseButton && !features.backButton\n\n    return (\n      <PaneHeader\n        ref={ref}\n        loading={!ready}\n        title={<DocumentHeaderTitle />}\n        tabs={showTabs && <DocumentHeaderTabs />}\n        backButton={\n          features.backButton &&\n          index > 0 && <Button as={BackLink} data-as=\"a\" icon={ArrowLeftIcon} mode=\"bleed\" />\n        }\n        subActions={showVersionMenu && <TimelineMenu chunk={rev} mode=\"rev\" />}\n        actions={\n          <Inline space={1}>\n            {unstable_languageFilter.length > 0 && (\n              <>\n                {unstable_languageFilter.map((languageFilterComponent, idx) => {\n                  return createElement(languageFilterComponent, {\n                    // eslint-disable-next-line react/no-array-index-key\n                    key: `language-filter-${idx}`,\n                    schemaType,\n                  })\n                })}\n              </>\n            )}\n\n            {validation.length > 0 && (\n              <ValidationMenu\n                boundaryElement={rootElement}\n                isOpen={isValidationOpen}\n                key=\"validation-menu\"\n                setOpen={setValidationOpen}\n              />\n            )}\n\n            <PaneContextMenuButton\n              itemGroups={menuItemGroups}\n              items={contextMenuItems}\n              key=\"context-menu\"\n              onAction={onMenuAction}\n            />\n\n            {showSplitPaneButton && (\n              <Button\n                icon={SplitVerticalIcon}\n                key=\"split-pane-button\"\n                mode=\"bleed\"\n                onClick={onPaneSplit}\n                title=\"Split pane right\"\n              />\n            )}\n\n            {showSplitPaneCloseButton && (\n              <Button\n                icon={CloseIcon}\n                key=\"close-view-button\"\n                mode=\"bleed\"\n                onClick={onPaneClose}\n                title=\"Close split pane\"\n              />\n            )}\n\n            {showPaneGroupCloseButton && (\n              <Button\n                icon={CloseIcon}\n                key=\"close-view-button\"\n                mode=\"bleed\"\n                title=\"Close pane group\"\n                as={BackLink}\n              />\n            )}\n          </Inline>\n        }\n      />\n    )\n  })\n)\n\nDocumentPanelHeader.displayName = 'DocumentPanelHeader'\n","import {BoundaryElementProvider, Flex, PortalProvider, usePortal, useElementRect} from '@sanity/ui'\nimport React, {createElement, useEffect, useMemo, useRef, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport {PaneContent, usePaneLayout} from '../../../components'\nimport {ScrollContainer} from '../../../../components/scroll'\nimport {useDocumentValuePermissions} from '../../../../datastores'\nimport {getPublishedId, getDraftId} from '../../../../util'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {InspectDialog} from '../inspectDialog'\nimport {useSchema} from '../../../../hooks'\nimport {useDeskTool} from '../../../useDeskTool'\nimport {ReferenceChangedBanner} from './ReferenceChangedBanner'\nimport {PermissionCheckBanner} from './PermissionCheckBanner'\nimport {FormView} from './documentViews'\nimport {DocumentPanelHeader} from './header'\n\ninterface DocumentPanelProps {\n  footerHeight: number | null\n  rootElement: HTMLDivElement | null\n  isInspectOpen: boolean\n}\n\nconst Scroller = styled(ScrollContainer)<{$disabled: boolean}>(({$disabled}) => {\n  if ($disabled) {\n    return {height: '100%'}\n  }\n\n  return css`\n    height: 100%;\n    overflow: auto;\n    position: relative;\n    scroll-behavior: smooth;\n    outline: none;\n  `\n})\n\nexport const DocumentPanel = function DocumentPanel(props: DocumentPanelProps) {\n  const {footerHeight, isInspectOpen, rootElement} = props\n  const schema = useSchema()\n  const {\n    activeViewId,\n    displayed,\n    documentId,\n    documentType,\n    editState,\n    value,\n    views,\n    ready,\n    schemaType,\n  } = useDocumentPane()\n  const {collapsed: layoutCollapsed} = usePaneLayout()\n  const parentPortal = usePortal()\n  const {features} = useDeskTool()\n  const [headerElement, setHeaderElement] = useState<HTMLDivElement | null>(null)\n  const headerRect = useElementRect(headerElement)\n  const portalRef = useRef<HTMLDivElement | null>(null)\n  const [documentScrollElement, setDocumentScrollElement] = useState<HTMLDivElement | null>(null)\n\n  const requiredPermission = value._createdAt ? 'update' : 'create'\n  const liveEdit = useMemo(\n    () => Boolean(schema.get(documentType)?.liveEdit),\n    [documentType, schema]\n  )\n  const docId = value._id ? value._id : 'dummy-id'\n  const docPermissionsInput = useMemo(() => {\n    return {\n      ...value,\n      _id: liveEdit ? getPublishedId(docId) : getDraftId(docId),\n    }\n  }, [liveEdit, value, docId])\n  const [permissions, isPermissionsLoading] = useDocumentValuePermissions({\n    document: docPermissionsInput,\n    permission: requiredPermission,\n  })\n\n  const activeView = useMemo(\n    () => views.find((view) => view.id === activeViewId) || views[0] || {type: 'form'},\n    [activeViewId, views]\n  )\n\n  // Use a local portal container when split panes is supported\n  const portalElement: HTMLElement | null = features.splitPanes\n    ? portalRef.current || parentPortal.element\n    : parentPortal.element\n\n  // Calculate the height of the header\n  const margins: [number, number, number, number] = useMemo(() => {\n    if (layoutCollapsed) {\n      return [headerRect?.height || 0, 0, footerHeight ? footerHeight + 2 : 2, 0]\n    }\n\n    return [0, 0, 2, 0]\n  }, [layoutCollapsed, footerHeight, headerRect])\n\n  const formViewHidden = activeView.type !== 'form'\n\n  const activeViewNode = useMemo(\n    () =>\n      activeView.type === 'component' &&\n      activeView.component &&\n      createElement(activeView.component, {\n        document: {\n          draft: editState?.draft || null,\n          displayed: displayed || value,\n          historical: displayed,\n          published: editState?.published || null,\n        },\n        documentId,\n        options: activeView.options,\n        schemaType,\n      }),\n    [activeView, displayed, documentId, editState?.draft, editState?.published, schemaType, value]\n  )\n\n  // Scroll to top as `documentId` changes\n  useEffect(() => {\n    if (!documentScrollElement?.scrollTo) return\n    documentScrollElement.scrollTo(0, 0)\n  }, [documentId, documentScrollElement])\n\n  const inspectDialog = useMemo(() => {\n    return isInspectOpen ? <InspectDialog value={displayed || value} /> : null\n  }, [isInspectOpen, displayed, value])\n\n  return (\n    <Flex direction=\"column\" flex={2} overflow={layoutCollapsed ? undefined : 'hidden'}>\n      <DocumentPanelHeader rootElement={rootElement} ref={setHeaderElement} />\n\n      <PaneContent>\n        <PortalProvider\n          element={portalElement}\n          __unstable_elements={{documentScrollElement: documentScrollElement}}\n        >\n          <BoundaryElementProvider element={documentScrollElement}>\n            {activeView.type === 'form' && !isPermissionsLoading && ready && (\n              <>\n                <PermissionCheckBanner\n                  granted={Boolean(permissions?.granted)}\n                  requiredPermission={requiredPermission}\n                />\n                <ReferenceChangedBanner />\n              </>\n            )}\n\n            <Scroller\n              $disabled={layoutCollapsed || false}\n              data-testid=\"document-panel-scroller\"\n              ref={setDocumentScrollElement}\n            >\n              <FormView\n                hidden={formViewHidden}\n                key={documentId + (ready ? '_ready' : '_pending')}\n                margins={margins}\n                granted={Boolean(permissions?.granted)}\n              />\n              {activeViewNode}\n            </Scroller>\n\n            {inspectDialog}\n\n            <div data-testid=\"document-panel-portal\" ref={portalRef} />\n          </BoundaryElementProvider>\n        </PortalProvider>\n      </PaneContent>\n    </Flex>\n  )\n}\n","import {useToast} from '@sanity/ui'\nimport React, {memo, useEffect} from 'react'\nimport {useDocumentOperationEvent} from '../../../hooks'\nimport {useDocumentPane} from './useDocumentPane'\n\nfunction getOpErrorTitle(op: string): string {\n  if (op === 'delete') {\n    return `An error occurred while attempting to delete this document.\n      This usually means that there are other documents that refers to it.`\n  }\n  if (op === 'unpublish') {\n    return `An error occurred while attempting to unpublish this document.\n      This usually means that there are other documents that refers to it.`\n  }\n  return `An error occurred during ${op}`\n}\n\nfunction getOpSuccessTitle(op: string): string {\n  if (op === 'publish') {\n    return `The document was published`\n  }\n  if (op === 'unpublish') {\n    return `The document was unpublished. A draft has been created from the latest published version.`\n  }\n  if (op === 'discardChanges') {\n    return `All changes since last publish has now been discarded. The discarded draft can still be recovered from history`\n  }\n  if (op === 'delete') {\n    return `This document was deleted. It can still be recovered from history and if you continue editing it will be recreated.`\n  }\n  return `Successfully performed ${op} on document`\n}\n\nconst IGNORE_OPS = ['patch', 'commit']\n\nexport const DocumentOperationResults = memo(function DocumentOperationResults() {\n  const {push: pushToast} = useToast()\n  const {documentId, documentType} = useDocumentPane()\n  const event: any = useDocumentOperationEvent(documentId, documentType)\n\n  useEffect(() => {\n    if (!event) return\n\n    if (event.type === 'error') {\n      pushToast({\n        closable: true,\n        duration: 30000, // 30s\n        status: 'error',\n        title: getOpErrorTitle(event.op),\n        description: (\n          <details>\n            <summary>Details</summary>\n            {event.error.message}\n          </details>\n        ),\n      })\n    }\n\n    if (event.type === 'success' && !IGNORE_OPS.includes(event.op)) {\n      pushToast({\n        closable: true,\n        status: 'success',\n        title: getOpSuccessTitle(event.op),\n      })\n    }\n  }, [event, pushToast])\n\n  return null\n})\n","import {DialogProps, Placement} from '@sanity/ui'\n\nexport const POPOVER_FALLBACK_PLACEMENTS: Placement[] = ['left', 'bottom']\n\nexport const DIALOG_WIDTH_TO_UI_WIDTH: {[key: string]: DialogProps['width']} = {\n  small: 0,\n  medium: 1,\n  large: 2,\n  full: 'auto',\n}\n","import {\n  Box,\n  Button,\n  Flex,\n  Grid,\n  Popover,\n  useClickOutside,\n  useGlobalKeyDown,\n  useLayer,\n} from '@sanity/ui'\nimport React, {useCallback, useState} from 'react'\nimport {DocumentActionConfirmModalProps} from '../../../../actions'\nimport {POPOVER_FALLBACK_PLACEMENTS} from './constants'\n\nexport function ConfirmDialog(props: {\n  modal: DocumentActionConfirmModalProps\n  referenceElement: HTMLElement | null\n}) {\n  const {modal, referenceElement} = props\n\n  return (\n    <Popover\n      content={<ConfirmDialogContent modal={modal} />}\n      fallbackPlacements={POPOVER_FALLBACK_PLACEMENTS}\n      open\n      placement=\"top\"\n      portal\n      preventOverflow\n      referenceElement={referenceElement}\n    />\n  )\n}\n\nfunction ConfirmDialogContent(props: {modal: DocumentActionConfirmModalProps}) {\n  const {modal} = props\n  const {\n    cancelButtonIcon,\n    cancelButtonText,\n    confirmButtonIcon,\n    confirmButtonText,\n    // color,\n    message,\n    onCancel,\n    onConfirm,\n    tone,\n  } = modal\n  const {isTopLayer} = useLayer()\n  const [element, setElement] = useState<HTMLElement | null>(null)\n\n  const handleClickOutside = useCallback(() => {\n    if (isTopLayer) onCancel()\n  }, [isTopLayer, onCancel])\n\n  const handleGlobalKeyDown = useCallback(\n    (event) => {\n      if (event.key === 'Escape' && isTopLayer) onCancel()\n    },\n    [isTopLayer, onCancel]\n  )\n\n  useClickOutside(handleClickOutside, [element])\n  useGlobalKeyDown(handleGlobalKeyDown)\n\n  return (\n    <Flex direction=\"column\" ref={setElement} style={{minWidth: 320 - 16, maxWidth: 400}}>\n      <Box flex={1} overflow=\"auto\" padding={4}>\n        {message}\n      </Box>\n      <Box paddingX={4} paddingY={3} style={{borderTop: '1px solid var(--card-border-color)'}}>\n        <Grid columns={2} gap={2}>\n          <Button\n            icon={cancelButtonIcon}\n            onClick={onCancel}\n            mode=\"ghost\"\n            text={cancelButtonText || 'Cancel'}\n          />\n          <Button\n            icon={confirmButtonIcon}\n            onClick={onConfirm}\n            text={confirmButtonText || 'Confirm'}\n            tone={tone}\n          />\n        </Grid>\n      </Box>\n    </Flex>\n  )\n}\n","import {useId} from '@reach/auto-id'\nimport {Box, Dialog} from '@sanity/ui'\nimport React from 'react'\nimport {LegacyLayerProvider} from '../../../../../components/transitional'\nimport {DocumentActionDialogModalProps} from '../../../../actions'\nimport {DIALOG_WIDTH_TO_UI_WIDTH} from './constants'\n\nexport function ModalDialog(props: {modal: DocumentActionDialogModalProps}) {\n  const {modal} = props\n  const modalId = useId() || ''\n\n  const footer = modal.footer && (\n    <Box paddingX={4} paddingY={3}>\n      {modal.footer}\n    </Box>\n  )\n\n  return (\n    <LegacyLayerProvider zOffset=\"fullscreen\">\n      <Dialog\n        __unstable_hideCloseButton={modal.showCloseButton === false}\n        footer={footer}\n        header={modal.header}\n        id={modalId}\n        // eslint-disable-next-line react/jsx-handler-names\n        onClose={modal.onClose}\n        // eslint-disable-next-line react/jsx-handler-names\n        onClickOutside={modal.onClose}\n        width={modal.width === undefined ? 1 : DIALOG_WIDTH_TO_UI_WIDTH[modal.width]}\n      >\n        <Box padding={4}>{modal.content}</Box>\n      </Dialog>\n    </LegacyLayerProvider>\n  )\n}\n","import {Popover, useClickOutside, useGlobalKeyDown, useLayer} from '@sanity/ui'\nimport React, {useCallback, useState} from 'react'\nimport {DocumentActionPopoverModalProps} from '../../../../actions'\nimport {POPOVER_FALLBACK_PLACEMENTS} from './constants'\n\nexport function PopoverDialog(props: {\n  modal: DocumentActionPopoverModalProps\n  referenceElement: HTMLElement | null\n}) {\n  const {modal, referenceElement} = props\n\n  return (\n    <Popover\n      content={<PopoverDialogContent modal={modal} />}\n      fallbackPlacements={POPOVER_FALLBACK_PLACEMENTS}\n      open\n      placement=\"top\"\n      portal\n      preventOverflow\n      referenceElement={referenceElement}\n    />\n  )\n}\n\nfunction PopoverDialogContent(props: {modal: DocumentActionPopoverModalProps}) {\n  const {modal} = props\n  const {content, onClose} = modal\n  const {isTopLayer} = useLayer()\n  const [element, setElement] = useState<HTMLElement | null>(null)\n\n  const handleClickOutside = useCallback(() => {\n    if (isTopLayer) onClose()\n  }, [isTopLayer, onClose])\n\n  const handleGlobalKeyDown = useCallback(\n    (event) => {\n      if (event.key === 'Escape' && isTopLayer) onClose()\n    },\n    [isTopLayer, onClose]\n  )\n\n  useClickOutside(handleClickOutside, [element])\n  useGlobalKeyDown(handleGlobalKeyDown)\n\n  return <div ref={setElement}>{content}</div>\n}\n","import {useId} from '@reach/auto-id'\nimport {Box, Dialog} from '@sanity/ui'\nimport React from 'react'\nimport {DocumentActionModalProps} from '../../../actions'\nimport {ConfirmDialog} from './dialogs/ConfirmDialog'\n// import {DeprecatedErrorDialog} from './dialogs/DeprecatedErrorDialog'\n// import {DeprecatedSuccessDialog} from './dialogs/DeprecatedSuccessDialog'\nimport {ModalDialog} from './dialogs/ModalDialog'\nimport {PopoverDialog} from './dialogs/PopoverDialog'\n\nexport interface ActionStateDialogProps {\n  modal: DocumentActionModalProps\n  referenceElement?: HTMLElement | null\n}\n\nexport function ActionStateDialog(props: ActionStateDialogProps) {\n  const {modal, referenceElement = null} = props\n  const modalId = useId() || ''\n\n  // @todo: rename this type type \"component\" or \"node\"?\n  // if (modal.type === 'legacy') {\n  //   return <>{modal.content}</>\n  // }\n\n  if (modal.type === 'confirm') {\n    return <ConfirmDialog modal={modal} referenceElement={referenceElement} />\n  }\n\n  if (modal.type === 'dialog') {\n    return <ModalDialog modal={modal} />\n  }\n\n  if (modal.type === 'popover') {\n    return <PopoverDialog modal={modal} referenceElement={referenceElement} />\n  }\n\n  // if (modal.type === 'success') {\n  //   return <DeprecatedSuccessDialog modal={modal} />\n  // }\n\n  // if (modal.type === 'error') {\n  //   return <DeprecatedErrorDialog modal={modal} />\n  // }\n\n  // @todo: add validation?\n  const unknownModal: any = modal\n\n  // eslint-disable-next-line no-console\n  console.warn(`Unsupported modal type ${unknownModal.type}`)\n\n  return (\n    <Dialog\n      id={modalId}\n      // eslint-disable-next-line react/jsx-handler-names\n      onClose={unknownModal.onClose}\n      // eslint-disable-next-line react/jsx-handler-names\n      onClickOutside={unknownModal.onClose}\n      width={2}\n    >\n      <Box padding={4}>\n        {unknownModal.content || (\n          <>\n            Unexpected modal type (<code>{unknownModal.type}</code>)\n          </>\n        )}\n      </Box>\n    </Dialog>\n  )\n}\n","import {useId} from '@reach/auto-id'\nimport {ChevronDownIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Flex,\n  Hotkeys,\n  Menu,\n  MenuButton,\n  MenuItem,\n  PopoverProps,\n  Text,\n  Tooltip,\n} from '@sanity/ui'\nimport React, {createElement, isValidElement, useCallback, useRef, useState, useMemo} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {LegacyLayerProvider} from '../../../../components/transitional'\nimport {DocumentActionDescription} from '../../../actions'\nimport {ActionStateDialog} from './ActionStateDialog'\n\nexport interface ActionMenuButtonProps {\n  actionStates: DocumentActionDescription[]\n  disabled: boolean\n}\n\nexport function ActionMenuButton(props: ActionMenuButtonProps) {\n  const {actionStates, disabled} = props\n  const idPrefix = useId() || ''\n  const buttonRef = useRef<HTMLButtonElement | null>(null)\n  const [actionIndex, setActionIndex] = useState(-1)\n  const [referenceElement, setReferenceElement] = useState<HTMLButtonElement | null>(null)\n\n  const handleAction = useCallback((idx: number) => {\n    setActionIndex(idx)\n  }, [])\n\n  const popoverProps: PopoverProps = useMemo(\n    () => ({\n      placement: 'top-end',\n      portal: true,\n      preventOverflow: true,\n    }),\n    []\n  )\n\n  const currentAction = actionStates[actionIndex]\n\n  return (\n    <>\n      <MenuButton\n        id={`${idPrefix}-action-menu`}\n        button={\n          <Button\n            data-testid=\"action-menu-button\"\n            aria-label=\"Open document actions\"\n            disabled={disabled}\n            icon={ChevronDownIcon}\n            mode=\"ghost\"\n            ref={buttonRef}\n          />\n        }\n        menu={\n          <Menu padding={1}>\n            {actionStates.map((actionState, idx) => (\n              <ActionMenuListItem\n                actionState={actionState}\n                disabled={disabled}\n                index={idx}\n                // eslint-disable-next-line react/no-array-index-key\n                key={idx}\n                onAction={handleAction}\n              />\n            ))}\n          </Menu>\n        }\n        popover={popoverProps}\n        ref={setReferenceElement}\n      />\n\n      {currentAction && currentAction.modal && (\n        <LegacyLayerProvider zOffset=\"paneFooter\">\n          <ActionStateDialog modal={currentAction.modal} referenceElement={referenceElement} />\n        </LegacyLayerProvider>\n      )}\n    </>\n  )\n}\n\ninterface ActionMenuListItemProps {\n  actionState: DocumentActionDescription\n  disabled: boolean\n  index: number\n  onAction: (idx: number) => void\n}\n\nfunction ActionMenuListItem(props: ActionMenuListItemProps) {\n  const {actionState, disabled, index, onAction} = props\n  const {onHandle} = actionState\n\n  const handleClick = useCallback(() => {\n    onAction(index)\n    if (onHandle) onHandle()\n  }, [index, onAction, onHandle])\n\n  const tooltipContent = actionState.title && (\n    <Box padding={2}>\n      <Text size={1}>{actionState.title}</Text>\n    </Box>\n  )\n\n  return (\n    <MenuItem\n      data-testid={`action-${actionState.label.replace(' ', '')}`}\n      disabled={disabled || Boolean(actionState.disabled)}\n      onClick={handleClick}\n      padding={0}\n      tone={actionState.tone}\n    >\n      <Tooltip\n        content={tooltipContent}\n        disabled={!tooltipContent}\n        fallbackPlacements={['left', 'bottom']}\n        placement=\"top\"\n        portal\n      >\n        <Flex align=\"center\" paddingX={3}>\n          <Flex flex={1} paddingY={3}>\n            {actionState.icon && (\n              <Box marginRight={3}>\n                <Text>\n                  {isValidElement(actionState.icon) && actionState.icon}\n                  {isValidElementType(actionState.icon) && createElement(actionState.icon)}\n                </Text>\n              </Box>\n            )}\n\n            <Text>{actionState.label}</Text>\n          </Flex>\n\n          {actionState.shortcut && (\n            <Box marginLeft={3}>\n              <Hotkeys\n                keys={String(actionState.shortcut)\n                  .split('+')\n                  .map((s) => s.slice(0, 1).toUpperCase() + s.slice(1))}\n              />\n            </Box>\n          )}\n        </Flex>\n      </Tooltip>\n    </MenuItem>\n  )\n}\n","import React, {\n  memo,\n  // useCallback,\n  useMemo,\n  useState,\n} from 'react'\nimport {Box, Flex, Tooltip, Stack, Button, Hotkeys, LayerProvider, Text} from '@sanity/ui'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {\n  DocumentActionDescription,\n  RenderActionCollectionState,\n  HistoryRestoreAction,\n} from '../../../actions'\nimport {ActionMenuButton} from './ActionMenuButton'\nimport {ActionStateDialog} from './ActionStateDialog'\n\ninterface DocumentStatusBarActionsInnerProps {\n  disabled: boolean\n  showMenu: boolean\n  states: DocumentActionDescription[]\n}\n\nfunction DocumentStatusBarActionsInner(props: DocumentStatusBarActionsInnerProps) {\n  const {disabled, showMenu, states} = props\n  const [firstActionState, ...menuActionStates] = states\n  const [buttonElement, setButtonElement] = useState<HTMLButtonElement | null>(null)\n\n  const tooltipContent = useMemo(() => {\n    if (!firstActionState || (!firstActionState.title && !firstActionState.shortcut)) return null\n\n    return (\n      <Flex padding={2} style={{maxWidth: 300}} align=\"center\">\n        <Text size={1}>{firstActionState.title}</Text>\n        {firstActionState.shortcut && (\n          <Box marginLeft={firstActionState.title ? 2 : 0}>\n            <Hotkeys\n              keys={String(firstActionState.shortcut)\n                .split('+')\n                .map((s) => s.slice(0, 1).toUpperCase() + s.slice(1).toLowerCase())}\n            />\n          </Box>\n        )}\n      </Flex>\n    )\n  }, [firstActionState])\n\n  return (\n    <Flex>\n      {firstActionState && (\n        <LayerProvider zOffset={200}>\n          <Tooltip disabled={!tooltipContent} content={tooltipContent} portal placement=\"top\">\n            <Stack flex={1}>\n              <Button\n                data-testid={`action-${firstActionState.label}`}\n                disabled={disabled || Boolean(firstActionState.disabled)}\n                icon={firstActionState.icon}\n                // eslint-disable-next-line react/jsx-handler-names\n                onClick={firstActionState.onHandle}\n                ref={setButtonElement}\n                text={firstActionState.label}\n                tone={firstActionState.tone || 'primary'}\n              />\n            </Stack>\n          </Tooltip>\n        </LayerProvider>\n      )}\n\n      {showMenu && menuActionStates.length > 0 && (\n        <Box marginLeft={1}>\n          <ActionMenuButton actionStates={menuActionStates} disabled={disabled} />\n        </Box>\n      )}\n\n      {firstActionState && firstActionState.modal && (\n        <ActionStateDialog modal={firstActionState.modal} referenceElement={buttonElement} />\n      )}\n    </Flex>\n  )\n}\n\nexport const DocumentStatusBarActions = memo(function DocumentStatusBarActions() {\n  const {actions, connectionState, editState} = useDocumentPane()\n  // const [isMenuOpen, setMenuOpen] = useState(false)\n  // const handleMenuOpen = useCallback(() => setMenuOpen(true), [])\n  // const handleMenuClose = useCallback(() => setMenuOpen(false), [])\n  // const handleActionComplete = useCallback(() => setMenuOpen(false), [])\n\n  if (!actions || !editState) {\n    return null\n  }\n\n  return (\n    <RenderActionCollectionState\n      // component={}\n      // onActionComplete={handleActionComplete}\n      actions={actions}\n      // @ts-expect-error TODO: fix the document actions\n      actionProps={editState}\n    >\n      {({states}) => (\n        <DocumentStatusBarActionsInner\n          disabled={connectionState !== 'connected'}\n          // isMenuOpen={isMenuOpen}\n          // onMenuOpen={handleMenuOpen}\n          // onMenuClose={handleMenuClose}\n          showMenu={actions.length > 1}\n          states={states}\n        />\n      )}\n    </RenderActionCollectionState>\n  )\n})\n\nexport const HistoryStatusBarActions = memo(function HistoryStatusBarActions() {\n  const {connectionState, editState, historyController} = useDocumentPane()\n  const revision = historyController.revTime?.id || ''\n  const disabled = (editState?.draft || editState?.published || {})._rev === revision\n  const actionProps = useMemo(() => ({...(editState || {}), revision}), [editState, revision])\n  const historyActions = useMemo(() => [HistoryRestoreAction], [])\n\n  return (\n    <RenderActionCollectionState actions={historyActions} actionProps={actionProps as any}>\n      {({states}) => (\n        <DocumentStatusBarActionsInner\n          disabled={connectionState !== 'connected' || Boolean(disabled)}\n          showMenu={false}\n          states={states}\n        />\n      )}\n    </RenderActionCollectionState>\n  )\n})\n","import React from 'react'\nimport type {EditStateFor} from '../../datastores'\nimport {GetHookCollectionState} from '../actions/GetHookCollectionState'\nimport type {DocumentBadgeDescription, DocumentBadgeProps} from './types'\n\ninterface Badge<Args, Description> {\n  (args: Args): Description | null\n}\n\ninterface RenderBadgeCollectionProps {\n  badges: Badge<DocumentBadgeProps, DocumentBadgeDescription>[]\n  badgeProps: EditStateFor\n  children: (props: {states: DocumentBadgeDescription[]}) => React.ReactNode\n  onActionComplete?: () => void\n}\n\nexport const RenderBadgeCollectionState = (props: RenderBadgeCollectionProps) => {\n  const {badges, children, badgeProps, ...rest} = props\n\n  return (\n    <GetHookCollectionState {...rest} hooks={badges} args={badgeProps}>\n      {children}\n    </GetHookCollectionState>\n  )\n}\n","import type {DocumentBadgeComponent} from '../types'\n\nexport const LiveEditBadge: DocumentBadgeComponent = (props) => {\n  const {liveEdit} = props\n\n  if (liveEdit) {\n    return {\n      label: 'Live',\n      color: 'danger',\n    }\n  }\n\n  return null\n}\n","import {Badge, BadgeTone, Box, Inline, Text, Tooltip} from '@sanity/ui'\nimport React from 'react'\nimport {DocumentBadgeDescription, RenderBadgeCollectionState} from '../../../../badges'\nimport {useDocumentPane} from '../../useDocumentPane'\n\ninterface DocumentBadgesInnerProps {\n  states: DocumentBadgeDescription[]\n}\n\nconst BADGE_TONES: Record<string, BadgeTone | undefined> = {\n  primary: 'primary',\n  success: 'positive',\n  warning: 'caution',\n  danger: 'critical',\n}\n\nfunction DocumentBadgesInner({states}: DocumentBadgesInnerProps) {\n  return (\n    <Inline space={1}>\n      {states.map((badge, index) => (\n        <Tooltip\n          content={\n            badge.title && (\n              <Box padding={2}>\n                <Text size={1}>{badge.title}</Text>\n              </Box>\n            )\n          }\n          disabled={!badge.title}\n          key={String(index)}\n          placement=\"top\"\n          portal\n        >\n          <Badge\n            fontSize={1}\n            mode=\"outline\"\n            paddingX={2}\n            paddingY={1}\n            radius={4}\n            tone={badge.color ? BADGE_TONES[badge.color] : undefined}\n            style={{whiteSpace: 'nowrap'}}\n          >\n            {badge.label}\n          </Badge>\n        </Tooltip>\n      ))}\n    </Inline>\n  )\n}\n\nexport function DocumentBadges() {\n  const {badges, editState} = useDocumentPane()\n\n  if (!editState || !badges) return null\n\n  return (\n    <RenderBadgeCollectionState badges={badges} badgeProps={editState as any}>\n      {({states}) => <DocumentBadgesInner states={states} />}\n    </RenderBadgeCollectionState>\n  )\n}\n","import {Box, Button, Flex, Stack, Text, Tooltip} from '@sanity/ui'\nimport {PlayIcon, PublishIcon} from '@sanity/icons'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {useTimeAgo} from '../../../../../hooks'\n\ninterface PublishStatusProps {\n  collapsed?: boolean\n  disabled: boolean\n  lastPublished?: string\n  lastUpdated?: string\n  liveEdit: boolean\n}\n\nconst Root = styled(Flex)`\n  cursor: default;\n`\n\nexport function PublishStatus(props: PublishStatusProps) {\n  const {collapsed, disabled, lastPublished, lastUpdated, liveEdit} = props\n\n  const lastPublishedTimeAgo = useTimeAgo(lastPublished || '', {minimal: true, agoSuffix: true})\n  const lastPublishedTime = useTimeAgo(lastPublished || '', {minimal: true})\n\n  const lastUpdatedTimeAgo = useTimeAgo(lastUpdated || '', {minimal: true, agoSuffix: true})\n  const lastUpdatedTime = useTimeAgo(lastUpdated || '', {minimal: true})\n\n  return (\n    <Root align=\"center\" data-ui=\"SessionLayout\" sizing=\"border\">\n      <Tooltip\n        portal\n        content={\n          <Stack padding={3} space={3}>\n            <Text size={1} muted>\n              {liveEdit ? (\n                <>Last updated {lastUpdated ? lastUpdatedTimeAgo : lastPublishedTimeAgo}</>\n              ) : (\n                <>Last published {lastPublishedTimeAgo}</>\n              )}\n            </Text>\n          </Stack>\n        }\n      >\n        <Button\n          mode=\"bleed\"\n          tone={liveEdit ? 'critical' : 'positive'}\n          tabIndex={-1}\n          disabled={disabled}\n        >\n          <Flex align=\"center\">\n            <Box marginRight={collapsed ? 0 : 3}>\n              <Text size={2}>{liveEdit ? <PlayIcon /> : <PublishIcon />}</Text>\n            </Box>\n            {!collapsed && (\n              <Text size={1} weight=\"medium\">\n                {liveEdit ? (\n                  <>{lastUpdated ? lastUpdatedTime : lastPublishedTime}</>\n                ) : (\n                  lastPublishedTime\n                )}\n              </Text>\n            )}\n          </Flex>\n        </Button>\n      </Tooltip>\n    </Root>\n  )\n}\n","import React, {ComponentProps} from 'react'\nimport {motion} from 'framer-motion'\nimport styled, {keyframes} from 'styled-components'\n\nconst StyledMotionPath = styled(motion.path)`\n  transform-origin: center;\n`\n\ntype MotionCircleProps = Omit<ComponentProps<typeof motion.circle>, 'd'>\ntype MotionPathProps = Omit<ComponentProps<typeof motion.path>, 'd'>\n\nconst Circle = (props: MotionCircleProps) => (\n  <motion.circle fill=\"none\" r=\"8\" cx=\"12.5\" cy=\"12.5\" strokeWidth=\"1.2\" {...props} />\n)\nconst Arrows = (props: MotionPathProps) => (\n  <StyledMotionPath\n    fill=\"none\"\n    d=\"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811\"\n    {...props}\n  />\n)\nconst Checkmark = (props: MotionPathProps) => (\n  <motion.path d=\"M9.5 12.1316L11.7414 14.5L16 10\" {...props} />\n)\nconst Edit = (props: MotionPathProps) => (\n  <motion.path d=\"M15 7L18 10M6 19L7 15L17 5L20 8L10 18L6 19Z\" {...props} />\n)\n\nconst rotateAnimation = keyframes`\n  0% {\n    transform: rotate(0);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n`\nconst RotateGroup = styled.g`\n  transform-origin: center;\n\n  &[data-rotate] {\n    animation: ${rotateAnimation} 1s ease-in-out infinite;\n  }\n`\n\nconst root = {\n  syncing: {\n    scale: 1,\n    transition: {\n      duration: 0,\n    },\n  },\n  saved: {\n    scale: [1, 0.8, 1.2, 0.9, 1.1, 0.95, 1.05, 0.99, 1],\n    transition: {\n      duration: 0.5,\n      delay: 0.2,\n    },\n  },\n  changes: {transition: {duration: 0}},\n}\n\nconst circle = {\n  syncing: {\n    strokeDasharray: '0, 0, 23, 3, 23, 3',\n    strokeDashoffset: 10,\n    opacity: 1,\n    transition: {\n      duration: 0,\n    },\n  },\n  saved: {\n    strokeDasharray: '0, 0, 23, 0, 23, 0',\n    strokeDashoffset: 10,\n    opacity: 1,\n    transition: {\n      duration: 0.2,\n    },\n  },\n  changes: {\n    strokeDasharray: '0, 60, 23, 0, 23, 0',\n    strokeDashoffset: 0,\n    opacity: 0,\n    transition: {\n      duration: 0.5,\n    },\n  },\n}\n\nconst arrows = {\n  syncing: {\n    opacity: 1,\n    transition: {\n      duration: 0,\n    },\n  },\n  saved: {\n    opacity: 0,\n    transition: {\n      duration: 0.2,\n    },\n  },\n  changes: {\n    opacity: 0,\n  },\n}\n\nconst checkmark = {\n  syncing: {\n    pathLength: 0,\n    transition: {duration: 0},\n  },\n  saved: {\n    pathLength: 1,\n    transition: {\n      delay: 0.4,\n      duration: 0.3,\n    },\n  },\n  changes: {\n    pathLength: 0,\n    transition: {\n      duration: 0.2,\n    },\n  },\n}\n\nconst edit = {\n  syncing: {\n    pathLength: 0,\n    transition: {duration: 0},\n  },\n  saved: {\n    pathLength: 0,\n    transition: {duration: 0},\n  },\n  changes: {\n    pathLength: 1,\n    transition: {\n      duration: 0.4,\n      delay: 0.5,\n    },\n  },\n}\n\ninterface AnimatedStatusIconProps {\n  status?: 'changes' | 'saved' | 'syncing'\n}\n\nexport function AnimatedStatusIcon(props: AnimatedStatusIconProps) {\n  const {status} = props\n\n  if (!status) {\n    return null\n  }\n\n  return (\n    <svg\n      width=\"1em\"\n      height=\"1em\"\n      viewBox=\"0 0 25 25\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.2\"\n      data-sanity-icon=\"\"\n    >\n      <motion.g variants={root} initial={status} animate={status}>\n        <RotateGroup data-rotate={status === 'changes' ? undefined : ''}>\n          <Arrows variants={arrows} initial={status} animate={status} />\n          <Circle variants={circle} initial={status} animate={status} />\n        </RotateGroup>\n        <Checkmark variants={checkmark} initial={status} animate={status} />\n        <Edit variants={edit} initial={status} animate={status} />\n      </motion.g>\n    </svg>\n  )\n}\n","import React, {useMemo} from 'react'\nimport {Box, Button, ButtonProps, Flex, Stack, Text, Tooltip} from '@sanity/ui'\nimport {useTimeAgo} from '../../../../../../hooks'\nimport {AnimatedStatusIcon} from './AnimatedStatusIcon'\n\ninterface ReviewChangesButtonProps extends React.HTMLProps<HTMLButtonElement> {\n  status?: 'changes' | 'saved' | 'syncing'\n  lastUpdated?: string\n  collapsed?: boolean\n}\n\nconst ReviewButton = React.forwardRef(function ReviewButton(\n  props: ReviewChangesButtonProps & ButtonProps,\n  ref: React.ForwardedRef<HTMLButtonElement>\n) {\n  const {collapsed, status, lastUpdated, ...rest} = props\n  const lastUpdatedTime = useTimeAgo(lastUpdated || '', {minimal: true})\n  const lastUpdatedTimeAgo = useTimeAgo(lastUpdated || '', {minimal: true, agoSuffix: true})\n\n  const buttonProps: ButtonProps = useMemo(() => {\n    if (status === 'syncing') {\n      return {\n        text: 'Saving...',\n        tone: undefined,\n      }\n    }\n    if (status === 'changes') {\n      return {\n        text: lastUpdatedTime,\n        tone: 'caution',\n      }\n    }\n    if (status === 'saved') {\n      return {\n        text: 'Saved!',\n        tone: 'positive',\n      }\n    }\n\n    return {}\n  }, [status, lastUpdatedTime])\n\n  if (!status) {\n    return null\n  }\n\n  return (\n    <Tooltip\n      portal\n      disabled={status !== 'changes'}\n      content={\n        <Stack padding={3} space={3}>\n          <Text size={1} weight=\"semibold\">\n            Review changes\n          </Text>\n          <Text size={1} muted>\n            Changes saved {lastUpdatedTimeAgo}\n          </Text>\n        </Stack>\n      }\n    >\n      <Button\n        mode=\"bleed\"\n        justify=\"flex-start\"\n        tone={buttonProps?.tone}\n        {...rest}\n        data-testid=\"review-changes-button\"\n        ref={ref}\n      >\n        <Flex align=\"center\">\n          <Box marginRight={collapsed ? 0 : 3}>\n            <Text>\n              <AnimatedStatusIcon status={status} />\n            </Text>\n          </Box>\n          {!collapsed && (\n            <Text size={1} weight=\"medium\">\n              {buttonProps?.text}\n            </Text>\n          )}\n        </Flex>\n      </Button>\n    </Tooltip>\n  )\n})\n\nexport const ReviewChangesButton = React.memo(ReviewButton)\n","import {Box, Flex, useElementRect} from '@sanity/ui'\nimport React, {useEffect, useMemo, useState, memo, useLayoutEffect} from 'react'\nimport {useSyncState} from '../../../../../hooks'\nimport {useDocumentPane} from '../../useDocumentPane'\nimport {DocumentBadges} from './DocumentBadges'\nimport {PublishStatus} from './PublishStatus'\nimport {ReviewChangesButton} from './ReviewChangesButton'\n\nconst SYNCING_TIMEOUT = 1000\nconst SAVED_TIMEOUT = 3000\n\nexport const DocumentSparkline = memo(function DocumentSparkline() {\n  const {\n    changesOpen,\n    documentId,\n    documentType,\n    editState,\n    onHistoryClose,\n    onHistoryOpen,\n    historyController,\n    value,\n  } = useDocumentPane()\n  const syncState = useSyncState(documentId, documentType)\n\n  const lastUpdated = value?._updatedAt\n  const lastPublished = editState?.published?._updatedAt\n  const showingRevision = historyController.onOlderRevision()\n  const liveEdit = Boolean(editState?.liveEdit)\n  const published = Boolean(editState?.published)\n  const changed = Boolean(editState?.draft)\n\n  const [rootFlexElement, setRootFlexElement] = useState<HTMLDivElement | null>(null)\n  const rootFlexRect = useElementRect(rootFlexElement)\n  const collapsed = !rootFlexRect || rootFlexRect?.width < 300\n\n  const [status, setStatus] = useState<'saved' | 'syncing' | null>(null)\n\n  // eslint-disable-next-line consistent-return\n  useEffect(() => {\n    if (status === 'syncing') {\n      // status changed to 'syncing', schedule an update to set it to 'saved'\n      const timerId = setTimeout(() => setStatus('saved'), SYNCING_TIMEOUT)\n      return () => clearTimeout(timerId)\n    }\n    if (status === 'saved') {\n      // status changed to 'saved', schedule an update to clear it\n      const timerId = setTimeout(() => setStatus(null), SAVED_TIMEOUT)\n      return () => clearTimeout(timerId)\n    }\n  }, [status, lastUpdated])\n\n  useLayoutEffect(() => {\n    // clear sync status when documentId changes\n    setStatus(null)\n  }, [documentId])\n\n  // set status to 'syncing' when lastUpdated changes and we go from not syncing to syncing\n  useLayoutEffect(() => {\n    if (syncState.isSyncing) {\n      setStatus('syncing')\n    }\n  }, [syncState.isSyncing, lastUpdated])\n\n  const reviewButton = useMemo(\n    () => (\n      <ReviewChangesButton\n        lastUpdated={lastUpdated}\n        status={status || (changed ? 'changes' : undefined)}\n        onClick={changesOpen ? onHistoryClose : onHistoryOpen}\n        disabled={showingRevision}\n        selected={changesOpen}\n        collapsed={collapsed}\n      />\n    ),\n    [\n      changed,\n      changesOpen,\n      onHistoryClose,\n      onHistoryOpen,\n      lastUpdated,\n      showingRevision,\n      status,\n      collapsed,\n    ]\n  )\n\n  const publishStatus = useMemo(\n    () =>\n      (liveEdit || published) && (\n        <Box marginRight={1}>\n          <PublishStatus\n            disabled={showingRevision}\n            lastPublished={lastPublished}\n            lastUpdated={lastUpdated}\n            liveEdit={liveEdit}\n            collapsed={collapsed}\n          />\n        </Box>\n      ),\n    [collapsed, lastPublished, lastUpdated, liveEdit, published, showingRevision]\n  )\n\n  return (\n    <Flex align=\"center\" data-ui=\"DocumentSparkline\" ref={setRootFlexElement}>\n      {publishStatus}\n\n      <Flex align=\"center\" flex={1}>\n        {reviewButton}\n        {!collapsed && (\n          <Box marginLeft={3}>\n            <DocumentBadges />\n          </Box>\n        )}\n      </Flex>\n    </Flex>\n  )\n})\n","import React, {useMemo} from 'react'\nimport styled from 'styled-components'\nimport {Box, Flex} from '@sanity/ui'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {DocumentStatusBarActions, HistoryStatusBarActions} from './DocumentStatusBarActions'\nimport {DocumentSparkline} from './sparkline/DocumentSparkline'\n\nexport interface DocumentStatusBarProps {\n  actionsBoxRef?: React.Ref<HTMLDivElement>\n}\n\nconst DocumentActionsBox = styled(Box)`\n  min-width: 10em;\n  max-width: 16em;\n`\n\nexport function DocumentStatusBar(props: DocumentStatusBarProps) {\n  const {actionsBoxRef} = props\n  const {badges, historyController} = useDocumentPane()\n  const showingRevision = historyController.onOlderRevision()\n\n  return useMemo(\n    () => (\n      <Box paddingLeft={2} paddingRight={[2, 3]} paddingY={2}>\n        <Flex align=\"center\">\n          <Box flex={[1, 2]}>{badges && <DocumentSparkline />}</Box>\n\n          <DocumentActionsBox flex={1} marginLeft={[1, 3]} ref={actionsBoxRef}>\n            {showingRevision ? <HistoryStatusBarActions /> : <DocumentStatusBarActions />}\n          </DocumentActionsBox>\n        </Flex>\n      </Box>\n    ),\n    [actionsBoxRef, badges, showingRevision]\n  )\n}\n","import isHotkey from 'is-hotkey'\nimport React, {useCallback, useMemo, useState} from 'react'\nimport {ActionStateDialog} from '../statusBar'\nimport {Pane} from '../../../components'\nimport {useDocumentPane} from '../useDocumentPane'\nimport {\n  DocumentActionDescription,\n  DocumentActionProps,\n  RenderActionCollectionState,\n} from '../../../actions'\nimport {LegacyLayerProvider} from '../../../../components/transitional'\n\nexport interface KeyboardShortcutResponderProps {\n  actionsBoxElement: HTMLElement | null\n  activeIndex: number\n  currentMinWidth?: number\n  flex?: number\n  id: string\n  minWidth?: number\n  onActionStart: (index: number) => void\n  rootRef: React.Ref<HTMLDivElement>\n  states: DocumentActionDescription[]\n}\n\nfunction KeyboardShortcutResponder(\n  props: KeyboardShortcutResponderProps & Omit<React.HTMLProps<HTMLDivElement>, 'height'>\n) {\n  const {\n    actionsBoxElement,\n    activeIndex,\n    children,\n    id,\n    onActionStart,\n    onKeyDown,\n    rootRef,\n    states,\n    ...rest\n  } = props\n\n  const activeAction = states[activeIndex]\n\n  const handleKeyDown = useCallback(\n    (event) => {\n      const matchingStates = states.filter(\n        (state) => state.shortcut && isHotkey(state.shortcut, event)\n      )\n\n      const matchingState = matchingStates[0]\n\n      if (matchingStates.length > 1) {\n        // eslint-disable-next-line no-console\n        console.warn(\n          `Keyboard shortcut conflict: More than one document action matches the shortcut \"${matchingState.shortcut}\"`\n        )\n      }\n\n      if (matchingState && !matchingState.disabled && matchingState.onHandle) {\n        event.preventDefault()\n        matchingState.onHandle()\n        onActionStart(states.indexOf(matchingState))\n        return\n      }\n\n      if (onKeyDown) {\n        onKeyDown(event)\n      }\n    },\n    [onActionStart, onKeyDown, states]\n  )\n\n  return (\n    <Pane id={id} onKeyDown={handleKeyDown} tabIndex={-1} {...rest} ref={rootRef}>\n      {children}\n\n      {activeAction && activeAction.modal && (\n        <LegacyLayerProvider zOffset=\"paneFooter\">\n          <ActionStateDialog modal={activeAction.modal} referenceElement={actionsBoxElement} />\n        </LegacyLayerProvider>\n      )}\n    </Pane>\n  )\n}\n\nexport interface DocumentActionShortcutsProps {\n  actionsBoxElement: HTMLElement | null\n  currentMinWidth?: number\n  debug?: boolean\n  flex: number\n  id: string\n  minWidth: number\n  rootRef: React.Ref<HTMLDivElement>\n}\n\nexport const DocumentActionShortcuts = React.memo(\n  (props: DocumentActionShortcutsProps & React.HTMLProps<HTMLDivElement>) => {\n    const {actionsBoxElement, children, ...rest} = props\n    const {actions, editState} = useDocumentPane()\n    const [activeIndex, setActiveIndex] = useState(-1)\n\n    const onActionStart = useCallback((idx: number) => {\n      setActiveIndex(idx)\n    }, [])\n\n    const actionProps: DocumentActionProps | null = useMemo(\n      () =>\n        editState && {\n          ...editState,\n\n          // @todo: what to call here?\n          onComplete: () => undefined,\n\n          // @todo: get revision string\n          revision: undefined,\n        },\n      [editState]\n    )\n\n    if (!actionProps || !actions) return null\n\n    return (\n      <RenderActionCollectionState actionProps={actionProps} actions={actions}>\n        {({states}) => (\n          <KeyboardShortcutResponder\n            {...rest}\n            activeIndex={activeIndex}\n            actionsBoxElement={actionsBoxElement}\n            onActionStart={onActionStart}\n            states={states}\n          >\n            {children}\n          </KeyboardShortcutResponder>\n        )}\n      </RenderActionCollectionState>\n    )\n  }\n)\n\nDocumentActionShortcuts.displayName = 'DocumentActionShortcuts'\n","import {isKeySegment, Path} from '@sanity/types'\nimport {StateTree} from './types'\n\nexport function setAtPath<T>(\n  currentTree: StateTree<T> | undefined,\n  path: Path,\n  value: T\n): StateTree<T> {\n  if (path.length === 0) {\n    return {...(currentTree || {}), value}\n  }\n  const [head, ...tail] = path\n  const key = isKeySegment(head) ? head._key : String(head)\n  const children = currentTree?.children ?? {}\n  return {\n    value: currentTree?.value,\n    children: {...children, [key]: setAtPath(children[key] || {}, tail, value)},\n  }\n}\n","import {isKeySegment, isObjectSchemaType, Path} from '@sanity/types'\nimport {castArray} from 'lodash'\nimport {\n  ArrayOfObjectsFormNode,\n  ArrayOfObjectsItemMember,\n  FieldMember,\n  FieldSetMember,\n  ObjectFormNode,\n} from '../../../form'\nimport {isMemberArrayOfObjects} from '../../members/fields/asserters'\n\n// eslint-disable-next-line @typescript-eslint/ban-types\ninterface ExpandPathOperation {\n  type: 'expandPath'\n  path: Path\n}\n\ninterface ExpandFieldSetOperation {\n  type: 'expandFieldSet'\n  path: Path\n}\n\ninterface SetActiveGroup {\n  type: 'setSelectedGroup'\n  path: Path\n  groupName: string\n}\n\ntype Operation = ExpandPathOperation | ExpandFieldSetOperation | SetActiveGroup\n\n/**\n * This takes a form state and returns a list of operations required to open a node at a particular path\n * @param state - The form state\n * @param path - The path to open\n */\nexport function getExpandOperations(state: ObjectFormNode, path: Path): Operation[] {\n  // start at the root and make sure all groups/paths are expanded/activated along the way\n  const [fieldName, ...rest] = path\n\n  const fieldsetMember = state.members.find(\n    (member): member is FieldSetMember =>\n      member.kind === 'fieldSet' &&\n      member.fieldSet.members.some(\n        (field): field is FieldMember => field.kind === 'field' && field.name === fieldName\n      )\n  )\n\n  const ops: Operation[] = [{type: 'expandPath', path}]\n  if (fieldsetMember) {\n    ops.push({type: 'expandFieldSet', path: fieldsetMember.fieldSet.path})\n  }\n\n  const fieldMember = state.members.find(\n    (member): member is FieldMember => member.kind === 'field' && member.name === fieldName\n  )\n\n  const schemaField = state.schemaType.fields.find((field) => field.name === fieldName)\n  const selectedGroupName = state.groups.find((group) => group.selected)?.name\n  const inSelectedGroup =\n    selectedGroupName &&\n    (selectedGroupName === 'all-fields' ||\n      (schemaField && castArray(schemaField.group).includes(selectedGroupName)))\n\n  if (!inSelectedGroup) {\n    ops.push({type: 'setSelectedGroup', path: state.path, groupName: 'all-fields'})\n  }\n\n  if (fieldMember) {\n    ops.push({type: 'expandPath', path: fieldMember.field.path})\n  }\n\n  if (rest.length === 0) {\n    return ops\n  }\n\n  if (fieldMember && isMemberArrayOfObjects(fieldMember)) {\n    return ops.concat([\n      {type: 'expandPath', path: fieldMember.field.path},\n      ...expandArrayPath(fieldMember.field, rest),\n    ])\n  }\n  return ops\n}\n\nfunction expandArrayPath(state: ArrayOfObjectsFormNode, path: Path): Operation[] {\n  // start at the root and make sure all groups/paths are expanded/activated along the way\n  const [segment, ...rest] = path\n  if (!isKeySegment(segment)) {\n    throw new Error('Expected path segment to be an object with a _key property')\n  }\n\n  const foundMember = state.members.find(\n    (member): member is ArrayOfObjectsItemMember => member.key === segment._key\n  )\n\n  if (!foundMember) {\n    // tried to open a member that does not exist in the form state - it's likely hidden\n    return []\n  }\n  return [{type: 'expandPath', path: path}, ...getExpandOperations(foundMember.item, rest)]\n}\n","import {EarthAmericasIcon, BinaryDocumentIcon, RestoreIcon} from '@sanity/icons'\nimport {DeskToolFeatures, PaneMenuItem} from '../../types'\n\ninterface Params {\n  features: DeskToolFeatures\n  changesOpen: boolean\n  hasValue: boolean\n  previewUrl?: string | null\n}\n\nconst getHistoryMenuItem = (params: Params): PaneMenuItem | null => {\n  const {features, hasValue, changesOpen} = params\n\n  if (!features.reviewChanges) return null\n\n  return {\n    action: 'reviewChanges',\n    title: 'Review changes',\n    icon: RestoreIcon,\n    isDisabled: changesOpen || !hasValue,\n  }\n}\n\nconst getInspectItem = ({hasValue}: Params): PaneMenuItem => ({\n  action: 'inspect',\n  title: 'Inspect',\n  icon: BinaryDocumentIcon,\n  isDisabled: !hasValue,\n  shortcut: 'Ctrl+Alt+I',\n})\n\nexport const getProductionPreviewItem = ({previewUrl}: Params): PaneMenuItem | null => {\n  if (!previewUrl) return null\n\n  return {\n    action: 'production-preview',\n    title: 'Open preview',\n    icon: EarthAmericasIcon,\n    shortcut: 'Ctrl+Alt+O',\n  }\n}\n\nexport const getMenuItems = (params: Params): PaneMenuItem[] => {\n  const items = [getProductionPreviewItem, getHistoryMenuItem, getInspectItem]\n    .filter(Boolean)\n    .map((fn) => fn(params))\n\n  return items.filter((i) => i !== null) as PaneMenuItem[]\n}\n","import {useEffect, useState} from 'react'\nimport {SanityDocument} from '@sanity/types'\nimport {useAsObservable} from 'react-rx'\nimport {debounceTime, switchMap, catchError} from 'rxjs/operators'\nimport {from, of} from 'rxjs'\nimport {useSource} from '../../../studio'\nimport {isRecord} from '../../../util'\n\nconst isSanityDocument = (value: unknown): value is SanityDocument =>\n  isRecord(value) && typeof value._id === 'string' && typeof value._type === 'string'\n\nexport function usePreviewUrl(value: Partial<SanityDocument> | undefined): string | undefined {\n  const [previewUrl, setPreviewUrl] = useState<string | undefined>(undefined)\n  const [error, setError] = useState<unknown>(null)\n  const {resolveProductionUrl} = useSource().document\n  const value$ = useAsObservable(value)\n\n  if (error) throw error\n\n  useEffect(() => {\n    value$\n      .pipe(\n        // this so that the preview URL isn't fetched on every keystroke\n        debounceTime(500),\n        switchMap((document) =>\n          isSanityDocument(document) ? from(resolveProductionUrl({document})) : of(undefined)\n        ),\n        catchError((e) => {\n          const message = isRecord(e) && typeof e.message === 'string' ? e.message : 'Unknown error'\n          throw new Error(`An error was thrown while trying to get your preview url: ${message}`)\n        })\n      )\n      .subscribe({\n        next: setPreviewUrl,\n        error: setError,\n      })\n  }, [resolveProductionUrl, value$])\n\n  return previewUrl\n}\n","import {Template} from '../../../templates'\n\ninterface InitialValueOptions {\n  documentType: string\n  panePayload?: unknown\n  templateName?: string\n  templateParams?: Record<string, unknown>\n  urlTemplate?: string\n}\n\n/**\n * @internal\n */\nexport function getInitialValueTemplateOpts(\n  templates: Template[],\n  opts: InitialValueOptions\n): {templateName: string; templateParams: Record<string, unknown>} {\n  const payload = opts.panePayload || {}\n  const structureNodeTemplate = opts.templateName\n\n  if (opts.urlTemplate && structureNodeTemplate && structureNodeTemplate !== opts.urlTemplate) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      `Conflicting templates: URL says \"${opts.urlTemplate}\", structure node says \"${structureNodeTemplate}\". Using \"${structureNodeTemplate}\".`\n    )\n  }\n\n  const template = structureNodeTemplate || opts.urlTemplate\n  const typeTemplates = templates.filter((t) => t.schemaType === opts.documentType)\n\n  const templateParams = {\n    ...opts.templateParams,\n    ...(typeof payload === 'object' ? payload || {} : {}),\n  }\n\n  let templateName = template\n\n  // If we have not specified a specific template, and we only have a single\n  // template available for a schema type, use it\n  if (!template && typeTemplates.length === 1) {\n    templateName = typeTemplates[0].id\n  }\n\n  return {templateName: templateName!, templateParams}\n}\n","import React, {memo, useCallback, useEffect, useMemo, useRef, useState} from 'react'\nimport {ObjectSchemaType, Path, SanityDocument, SanityDocumentLike} from '@sanity/types'\nimport {omit} from 'lodash'\nimport {useToast} from '@sanity/ui'\nimport {fromString as pathFromString} from '@sanity/util/paths'\nimport isHotkey from 'is-hotkey'\nimport {useMemoObservable} from 'react-rx'\nimport {PaneMenuItem} from '../../types'\nimport {\n  DocumentPresence,\n  useHistoryStore,\n  useInitialValue,\n  usePresenceStore,\n} from '../../../datastores'\nimport {\n  useClient,\n  useConnectionState,\n  useDocumentOperation,\n  useEditState,\n  useSchema,\n  useTemplates,\n  useValidationStatus,\n} from '../../../hooks'\nimport {isDev} from '../../../environment'\nimport {useSource} from '../../../studio'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {getPublishedId, useUnique} from '../../../util'\nimport {usePaneRouter} from '../../components'\nimport {PatchEvent, StateTree, toMutationPatches} from '../../../form'\nimport {useFormState} from '../../../form/store/useFormState'\nimport {setAtPath} from '../../../form/store/stateTreeHelper'\nimport {getExpandOperations} from '../../../form/store/utils/getExpandOperations'\nimport {useDeskTool} from '../../useDeskTool'\nimport {DocumentPaneContext, DocumentPaneContextValue} from './DocumentPaneContext'\nimport {getMenuItems} from './menuItems'\nimport {DocumentPaneProviderProps} from './types'\nimport {usePreviewUrl} from './usePreviewUrl'\nimport {getInitialValueTemplateOpts} from './getInitialValueTemplateOpts'\n\nconst emptyObject = {} as Record<string, string | undefined>\n\n/**\n * @internal\n */\n// eslint-disable-next-line complexity, max-statements\nexport const DocumentPaneProvider = memo((props: DocumentPaneProviderProps) => {\n  const {children, index, pane, paneKey} = props\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const schema = useSchema()\n  const templates = useTemplates()\n  const {\n    actions: documentActions,\n    badges: documentBadges,\n    unstable_languageFilter: languageFilterResolver,\n  } = useSource().document\n  const historyStore = useHistoryStore()\n  const presenceStore = usePresenceStore()\n  const paneRouter = usePaneRouter()\n  const {features} = useDeskTool()\n  const {push: pushToast} = useToast()\n  const {options, menuItemGroups, title = null, views: viewsProp = []} = pane\n  const paneOptions = useUnique(options)\n  const documentIdRaw = paneOptions.id\n  const documentId = getPublishedId(documentIdRaw)\n  const documentType = options.type\n  const paneParams = useUnique(paneRouter.params)\n  const panePayload = useUnique(paneRouter.payload)\n  const {templateName, templateParams} = useMemo(\n    () =>\n      getInitialValueTemplateOpts(templates, {\n        documentType,\n        templateName: paneOptions.template,\n        templateParams: paneOptions.templateParameters,\n        panePayload,\n        urlTemplate: paneParams?.template,\n      }),\n    [documentType, paneOptions, paneParams, panePayload, templates]\n  )\n  const initialValueRaw = useInitialValue({\n    documentId,\n    documentType,\n    templateName,\n    templateParams,\n  })\n  const initialValue = useUnique(initialValueRaw)\n  const {patch}: any = useDocumentOperation(documentId, documentType)\n  const editState = useEditState(documentId, documentType)\n  const {validation: validationRaw} = useValidationStatus(documentId, documentType)\n  const connectionState = useConnectionState(documentId, documentType)\n  const schemaType = schema.get(documentType) as ObjectSchemaType | undefined\n  const value: SanityDocumentLike = editState?.draft || editState?.published || initialValue.value\n\n  // Resolve document actions\n  const actions = useMemo(\n    () => documentActions({schemaType: documentType, documentId}),\n    [documentActions, documentId, documentType]\n  )\n\n  // Resolve document badges\n  const badges = useMemo(\n    () => documentBadges({schemaType: documentType, documentId}),\n    [documentBadges, documentId, documentType]\n  )\n\n  // Resolve document language filter\n  const languageFilter = useMemo(\n    () => languageFilterResolver({schemaType: documentType, documentId}),\n    [documentId, documentType, languageFilterResolver]\n  )\n\n  const validation = useUnique(validationRaw)\n  const views = useUnique(viewsProp)\n  const params = paneRouter.params || emptyObject\n  const [focusPath, setFocusPath] = useState<Path>(() =>\n    params.path ? pathFromString(params.path) : []\n  )\n  const activeViewId = params.view || (views[0] && views[0].id) || null\n  const timeline = useMemo(\n    () => historyStore.getTimeline({publishedId: documentId, enableTrace: isDev}),\n    [documentId, historyStore]\n  )\n  const [timelineMode, setTimelineMode] = useState<'since' | 'rev' | 'closed'>('closed')\n  // NOTE: this emits sync so can never be null\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  const {historyController} = useMemoObservable(\n    () => historyStore.getTimelineController({client, documentId, documentType, timeline}),\n    [client, documentId, documentType, timeline]\n  )!\n\n  // @todo: this will now happen on each render, but should be refactored so it happens only when\n  // the `rev`, `since` or `historyController` values change.\n  historyController.setRange(params.since || null, params.rev || null)\n  const changesOpen = historyController.changesPanelActive()\n\n  // TODO: this may cause a lot of churn. May be a good idea to prevent these\n  // requests unless the menu is open somehow\n  const previewUrl = usePreviewUrl(value)\n\n  const [presence, setPresence] = useState<DocumentPresence[]>([])\n  useEffect(() => {\n    const subscription = presenceStore.documentPresence(documentId).subscribe((nextPresence) => {\n      setPresence(nextPresence)\n    })\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [documentId, presenceStore])\n\n  const hasValue = Boolean(value)\n  const menuItems = useMemo(\n    () => getMenuItems({features, hasValue, changesOpen, previewUrl}),\n    [features, hasValue, changesOpen, previewUrl]\n  )\n  const inspectOpen = params.inspect === 'on'\n  const compareValue: Partial<SanityDocument> | null = changesOpen\n    ? historyController.sinceAttributes()\n    : editState?.published || null\n  const ready = connectionState === 'connected' && editState.ready\n  const viewOlderVersion = historyController.onOlderRevision()\n  const displayed: Partial<SanityDocument> | null = useMemo(\n    () => (viewOlderVersion ? historyController.displayed() : value),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [historyController, params.rev, params.since, value, viewOlderVersion]\n  )\n\n  const setTimelineRange = useCallback(\n    (newSince: string, newRev: string | null) => {\n      paneRouter.setParams({\n        ...paneRouter.params,\n        since: newSince,\n        rev: newRev || undefined,\n      })\n    },\n    [paneRouter]\n  )\n\n  const handleFocus = useCallback(\n    (nextFocusPath: Path) => {\n      setFocusPath(nextFocusPath)\n      presenceStore.setLocation([\n        {\n          type: 'document',\n          documentId,\n          path: nextFocusPath,\n          lastActiveAt: new Date().toISOString(),\n        },\n      ])\n    },\n    [documentId, presenceStore, setFocusPath]\n  )\n\n  const handleBlur = useCallback(\n    (blurredPath: Path) => {\n      setFocusPath([])\n      // note: we're deliberately not syncing presence here since it would make the user avatar disappear when a\n      // user clicks outside a field without focusing another one\n    },\n    [setFocusPath]\n  )\n\n  const patchRef = useRef<(event: PatchEvent) => void>(() => {\n    throw new Error('Nope')\n  })\n\n  patchRef.current = (event: PatchEvent) => {\n    patch.execute(toMutationPatches(event.patches), initialValue.value)\n  }\n\n  const handleChange = useCallback((event) => patchRef.current(event), [])\n\n  const handleHistoryClose = useCallback(() => {\n    paneRouter.setParams({...params, since: undefined})\n  }, [paneRouter, params])\n\n  const handleHistoryOpen = useCallback(() => {\n    paneRouter.setParams({...params, since: '@lastPublished'})\n  }, [paneRouter, params])\n\n  const handlePaneClose = useCallback(() => paneRouter.closeCurrent(), [paneRouter])\n\n  const handlePaneSplit = useCallback(() => paneRouter.duplicateCurrent(), [paneRouter])\n\n  const toggleInspect = useCallback(\n    (toggle = !inspectOpen) => {\n      if (toggle) {\n        paneRouter.setParams({...params, inspect: 'on'})\n      } else {\n        paneRouter.setParams(omit(params, 'inspect'))\n      }\n    },\n    [inspectOpen, paneRouter, params]\n  )\n\n  const handleMenuAction = useCallback(\n    (item: PaneMenuItem) => {\n      if (item.action === 'production-preview' && previewUrl) {\n        window.open(previewUrl)\n        return true\n      }\n\n      if (item.action === 'inspect') {\n        toggleInspect(true)\n        return true\n      }\n\n      if (item.action === 'reviewChanges') {\n        handleHistoryOpen()\n        return true\n      }\n\n      return false\n    },\n    [handleHistoryOpen, previewUrl, toggleInspect]\n  )\n\n  const handleKeyUp = useCallback(\n    (event: React.KeyboardEvent<HTMLDivElement>) => {\n      for (const item of menuItems) {\n        if (item.shortcut) {\n          if (isHotkey(item.shortcut, event)) {\n            event.preventDefault()\n            event.stopPropagation()\n            handleMenuAction(item)\n            return\n          }\n        }\n      }\n    },\n    [handleMenuAction, menuItems]\n  )\n\n  const handleInspectClose = useCallback(() => toggleInspect(false), [toggleInspect])\n\n  const [openPath, onSetOpenPath] = useState<Path>([])\n  const [fieldGroupState, onSetFieldGroupState] = useState<StateTree<string>>()\n  const [collapsedPaths, onSetCollapsedPath] = useState<StateTree<boolean>>()\n  const [collapsedFieldSets, onSetCollapsedFieldSets] = useState<StateTree<boolean>>()\n\n  const handleOnSetCollapsedPath = useCallback((path: Path, collapsed: boolean) => {\n    onSetCollapsedPath((prevState) => setAtPath(prevState, path, collapsed))\n  }, [])\n\n  const handleOnSetCollapsedFieldSet = useCallback((path: Path, collapsed: boolean) => {\n    onSetCollapsedFieldSets((prevState) => setAtPath(prevState, path, collapsed))\n  }, [])\n\n  const handleSetActiveFieldGroup = useCallback(\n    (path: Path, groupName: string) =>\n      onSetFieldGroupState((prevState) => setAtPath(prevState, path, groupName)),\n    []\n  )\n\n  const formState = useFormState(schemaType!, {\n    value,\n    comparisonValue: compareValue,\n    focusPath,\n    openPath,\n    collapsedPaths,\n    presence,\n    validation,\n    collapsedFieldSets: collapsedFieldSets,\n    fieldGroupState,\n  })\n\n  const formStateRef = useRef(formState)\n  formStateRef.current = formState\n\n  const handleOpenPath = useCallback(\n    (path: Path) => {\n      const ops = getExpandOperations(formStateRef.current!, path)\n      ops.forEach((op) => {\n        if (op.type === 'expandPath') {\n          onSetCollapsedPath((prevState) => setAtPath(prevState, op.path, false))\n        }\n        if (op.type === 'expandFieldSet') {\n          onSetCollapsedFieldSets((prevState) => setAtPath(prevState, op.path, false))\n        }\n        if (op.type === 'setSelectedGroup') {\n          onSetFieldGroupState((prevState) => setAtPath(prevState, op.path, op.groupName))\n        }\n      })\n      onSetOpenPath(path)\n    },\n    [formStateRef]\n  )\n\n  const documentPane: DocumentPaneContextValue = {\n    actions,\n    activeViewId,\n    badges,\n    changesOpen,\n    collapsedFieldSets,\n    collapsedPaths,\n    compareValue,\n    connectionState,\n    displayed,\n    documentId,\n    documentIdRaw,\n    documentType,\n    editState,\n    focusPath,\n    menuItems,\n    onBlur: handleBlur,\n    onChange: handleChange,\n    onFocus: handleFocus,\n    onPathOpen: handleOpenPath,\n    onHistoryClose: handleHistoryClose,\n    onHistoryOpen: handleHistoryOpen,\n    onInspectClose: handleInspectClose,\n    onKeyUp: handleKeyUp,\n    onMenuAction: handleMenuAction,\n    onPaneClose: handlePaneClose,\n    onPaneSplit: handlePaneSplit,\n    onSetActiveFieldGroup: handleSetActiveFieldGroup,\n    onSetCollapsedPath: handleOnSetCollapsedPath,\n    onSetCollapsedFieldSet: handleOnSetCollapsedFieldSet,\n    historyController,\n    index,\n    inspectOpen,\n    validation,\n    menuItemGroups: menuItemGroups || [],\n    paneKey,\n    previewUrl,\n    ready,\n    schemaType: schemaType!,\n    setTimelineMode,\n    setTimelineRange,\n    timeline,\n    timelineMode,\n    title,\n    value,\n    views,\n    formState,\n    unstable_languageFilter: languageFilter,\n  }\n\n  useEffect(() => {\n    if (connectionState === 'reconnecting') {\n      pushToast({\n        id: 'sanity/desk/reconnecting',\n        status: 'warning',\n        title: <>Connection lost. Reconnectingâ€¦</>,\n      })\n    }\n  }, [connectionState, pushToast])\n\n  // Reset `focusPath` when `documentId` or `params.path` changes\n  useEffect(() => {\n    // Reset focus path\n    setFocusPath(params.path ? pathFromString(params.path) : [])\n  }, [documentId, params.path])\n\n  return (\n    <DocumentPaneContext.Provider value={documentPane}>{children}</DocumentPaneContext.Provider>\n  )\n})\n\nDocumentPaneProvider.displayName = 'DocumentPaneProvider'\n","import {\n  BoundaryElementProvider,\n  Card,\n  Code,\n  DialogProvider,\n  DialogProviderProps,\n  Flex,\n  Stack,\n  Text,\n  useElementRect,\n} from '@sanity/ui'\nimport React, {memo, useCallback, useMemo, useState} from 'react'\nimport styled from 'styled-components'\nimport {fromString as pathFromString} from '@sanity/util/paths'\nimport {Path} from '@sanity/types'\nimport {DocumentPaneNode} from '../../types'\nimport {PaneFooter} from '../../components/pane'\nimport {usePaneLayout} from '../../components/pane/usePaneLayout'\nimport {ErrorPane} from '../error'\nimport {LoadingPane} from '../loading'\nimport {ChangeConnectorRoot} from '../../../components/changeIndicators'\nimport {useZIndex} from '../../../components/zOffsets'\nimport {isDev} from '../../../environment'\nimport {useTemplates} from '../../../hooks'\nimport {useSource, SourceProvider} from '../../../studio'\nimport {usePaneRouter} from '../../components'\nimport {useDocumentType, useTemplatePermissions} from '../../../datastores'\nimport {ReferenceInputOptionsProvider} from '../../../form'\nimport {useDeskTool} from '../../useDeskTool'\nimport {ChangesPanel} from './changesPanel'\nimport {DocumentPanel} from './documentPanel'\nimport {DocumentOperationResults} from './DocumentOperationResults'\nimport {DocumentActionShortcuts} from './keyboardShortcuts'\nimport {DocumentStatusBar} from './statusBar'\nimport {useDocumentPane} from './useDocumentPane'\nimport {DocumentPaneProvider} from './DocumentPaneProvider'\nimport {DocumentPaneProviderProps} from './types'\n\ntype DocumentPaneOptions = DocumentPaneNode['options']\n\nconst DOCUMENT_PANEL_MIN_WIDTH = 320\nconst DOCUMENT_PANEL_INITIAL_MIN_WIDTH = 600\nconst CHANGES_PANEL_MIN_WIDTH = 320\n\nconst DIALOG_PROVIDER_POSITION: DialogProviderProps['position'] = [\n  // We use the `position: fixed` for dialogs on narrow screens (< 512px).\n  'fixed',\n  // And we use the `position: absolute` strategy (within panes) on wide screens.\n  'absolute',\n]\n\nconst StyledChangeConnectorRoot = styled(ChangeConnectorRoot)`\n  flex: 1;\n  display: flex;\n  min-height: 0;\n  min-width: 0;\n`\n\nexport const DocumentPane = memo(function DocumentPane(props: DocumentPaneProviderProps) {\n  const {name: parentSourceName} = useSource()\n\n  return (\n    <SourceProvider name={props.pane.source || parentSourceName}>\n      <DocumentPaneInner {...props} />\n    </SourceProvider>\n  )\n})\n\nfunction DocumentPaneInner(props: DocumentPaneProviderProps) {\n  const {pane, paneKey} = props\n  const {resolveNewDocumentOptions} = useSource().document\n  const paneRouter = usePaneRouter()\n  const options = usePaneOptions(pane.options, paneRouter.params)\n  const {documentType, isLoaded: isDocumentLoaded} = useDocumentType(options.id, options.type)\n\n  const templateItems = useMemo(() => {\n    return resolveNewDocumentOptions({\n      type: 'global',\n    })\n  }, [resolveNewDocumentOptions])\n\n  const [templatePermissions, isTemplatePermissionsLoading] = useTemplatePermissions({\n    templateItems,\n  })\n  const isLoaded = isDocumentLoaded && !isTemplatePermissionsLoading\n\n  const providerProps = useMemo(() => {\n    return isLoaded && documentType && options.type !== documentType\n      ? mergeDocumentType(props, options, documentType)\n      : props\n  }, [props, documentType, isLoaded, options])\n\n  const {ReferenceChildLink, handleEditReference, groupIndex, routerPanesState} = paneRouter\n  const childParams = routerPanesState[groupIndex + 1]?.[0].params || {}\n  const routerPanesStateLength = routerPanesState.length\n  const {parentRefPath} = childParams\n\n  const activePath: {path: Path; state: 'selected' | 'pressed' | 'none'} = useMemo(() => {\n    return parentRefPath\n      ? {\n          path: pathFromString(parentRefPath),\n          state:\n            // eslint-disable-next-line no-nested-ternary\n            groupIndex >= routerPanesStateLength - 1\n              ? 'none'\n              : groupIndex >= routerPanesStateLength - 2\n              ? 'selected'\n              : 'pressed',\n        }\n      : {path: [], state: 'none'}\n  }, [parentRefPath, groupIndex, routerPanesStateLength])\n\n  if (options.type === '*' && !isLoaded) {\n    return <LoadingPane flex={2.5} minWidth={320} paneKey={paneKey} title=\"Loading documentâ€¦\" />\n  }\n\n  if (!documentType) {\n    return (\n      <ErrorPane\n        flex={2.5}\n        minWidth={320}\n        paneKey={paneKey}\n        title={<>The document was not found</>}\n      >\n        <Stack space={4}>\n          <Text as=\"p\">\n            The document type is not defined, and a document with the <code>{options.id}</code>{' '}\n            identifier could not be found.\n          </Text>\n        </Stack>\n      </ErrorPane>\n    )\n  }\n\n  return (\n    <DocumentPaneProvider {...providerProps}>\n      {/* NOTE: this is a temporary location for this provider until we */}\n      {/* stabilize the reference input options formally in the form builder */}\n      {/* eslint-disable-next-line react/jsx-pascal-case */}\n      <ReferenceInputOptionsProvider\n        EditReferenceLinkComponent={ReferenceChildLink as any}\n        onEditReference={handleEditReference as any}\n        initialValueTemplateItems={templatePermissions}\n        activePath={activePath}\n      >\n        <InnerDocumentPane />\n      </ReferenceInputOptionsProvider>\n    </DocumentPaneProvider>\n  )\n}\n\nfunction usePaneOptions(\n  options: DocumentPaneOptions,\n  params: Record<string, string | undefined> = {}\n): DocumentPaneOptions {\n  const templates = useTemplates()\n\n  return useMemo(() => {\n    // The document type is provided, so return\n    if (options.type && options.type !== '*') {\n      return options\n    }\n\n    // Attempt to derive document type from the template configuration\n    const templateName = options.template || params.template\n    const template = templateName ? templates.find((t) => t.id === templateName) : undefined\n    const documentType = template?.schemaType\n\n    // No document type was found in a template\n    if (!documentType) {\n      return options\n    }\n\n    // The template provided the document type, so modify the paneâ€™s `options` property\n    return {...options, type: documentType}\n  }, [options, params.template, templates])\n}\n\nfunction mergeDocumentType(\n  props: DocumentPaneProviderProps,\n  options: DocumentPaneOptions,\n  documentType: string\n): DocumentPaneProviderProps {\n  return {\n    ...props,\n    pane: {\n      ...props.pane,\n      options: {...options, type: documentType},\n    },\n  }\n}\n\nfunction InnerDocumentPane() {\n  const {\n    changesOpen,\n    documentType,\n    onFocus,\n    onPathOpen,\n    onHistoryOpen,\n    onKeyUp,\n    inspectOpen,\n    paneKey,\n    schemaType,\n    value,\n  } = useDocumentPane()\n  const {features} = useDeskTool()\n  const {collapsed: layoutCollapsed} = usePaneLayout()\n  const zOffsets = useZIndex()\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n  const [footerElement, setFooterElement] = useState<HTMLDivElement | null>(null)\n  const [actionsBoxElement, setActionsBoxElement] = useState<HTMLDivElement | null>(null)\n  const footerRect = useElementRect(footerElement)\n  const footerH = footerRect?.height\n\n  const documentPanel = useMemo(\n    () => (\n      <DocumentPanel\n        footerHeight={footerH || null}\n        rootElement={rootElement}\n        isInspectOpen={inspectOpen}\n      />\n    ),\n    [footerH, rootElement, inspectOpen]\n  )\n\n  const footer = useMemo(\n    () => (\n      <PaneFooter ref={setFooterElement}>\n        <DocumentStatusBar actionsBoxRef={setActionsBoxElement} />\n      </PaneFooter>\n    ),\n    []\n  )\n\n  const changesPanel = useMemo(() => {\n    if (!features.reviewChanges) return null\n    if (!changesOpen) return null\n\n    return (\n      <BoundaryElementProvider element={rootElement}>\n        <ChangesPanel />\n      </BoundaryElementProvider>\n    )\n  }, [changesOpen, features.reviewChanges, rootElement])\n\n  const onConnectorSetFocus = useCallback(\n    (path: Path) => {\n      onPathOpen(path)\n      onFocus(path)\n    },\n    [onPathOpen, onFocus]\n  )\n\n  const children = useMemo(() => {\n    if (!schemaType) {\n      return (\n        <ErrorPane\n          flex={2.5}\n          minWidth={320}\n          paneKey={paneKey}\n          title={\n            <>\n              Unknown document type: <code>{documentType}</code>\n            </>\n          }\n          tone=\"caution\"\n        >\n          <Stack space={4}>\n            {documentType && (\n              <Text as=\"p\">\n                This document has the schema type <code>{documentType}</code>, which is not defined\n                as a type in the local content studio schema.\n              </Text>\n            )}\n\n            {!documentType && (\n              <Text as=\"p\">\n                This document does not exist, and no schema type was specified for it.\n              </Text>\n            )}\n\n            {isDev && value && (\n              <>\n                <Text as=\"p\">Here is the JSON representation of the document:</Text>\n                <Card padding={3} overflow=\"auto\" radius={2} shadow={1} tone=\"inherit\">\n                  <Code language=\"json\" size={[1, 1, 2]}>\n                    {JSON.stringify(value, null, 2)}\n                  </Code>\n                </Card>\n              </>\n            )}\n          </Stack>\n        </ErrorPane>\n      )\n    }\n\n    return (\n      <>\n        <DialogProvider position={DIALOG_PROVIDER_POSITION} zOffset={zOffsets.portal}>\n          <Flex direction=\"column\" flex={1} height={layoutCollapsed ? undefined : 'fill'}>\n            <StyledChangeConnectorRoot\n              data-testid=\"change-connector-root\"\n              isReviewChangesOpen={changesOpen}\n              onOpenReviewChanges={onHistoryOpen}\n              onSetFocus={onConnectorSetFocus}\n            >\n              {documentPanel}\n              {changesPanel}\n            </StyledChangeConnectorRoot>\n          </Flex>\n        </DialogProvider>\n        {footer}\n        <DocumentOperationResults />\n      </>\n    )\n  }, [\n    changesOpen,\n    changesPanel,\n    documentPanel,\n    documentType,\n    footer,\n    onConnectorSetFocus,\n    onHistoryOpen,\n    layoutCollapsed,\n    paneKey,\n    schemaType,\n    value,\n    zOffsets.portal,\n  ])\n\n  const currentMinWidth = changesOpen\n    ? DOCUMENT_PANEL_INITIAL_MIN_WIDTH + CHANGES_PANEL_MIN_WIDTH\n    : DOCUMENT_PANEL_INITIAL_MIN_WIDTH\n\n  const minWidth = changesOpen\n    ? DOCUMENT_PANEL_MIN_WIDTH + CHANGES_PANEL_MIN_WIDTH\n    : DOCUMENT_PANEL_MIN_WIDTH\n\n  return (\n    <DocumentActionShortcuts\n      actionsBoxElement={actionsBoxElement}\n      currentMinWidth={currentMinWidth}\n      data-testid=\"document-pane\"\n      flex={2.5}\n      id={paneKey}\n      minWidth={minWidth}\n      onKeyUp={onKeyUp}\n      rootRef={setRootElement}\n    >\n      {children}\n    </DocumentActionShortcuts>\n  )\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Container, Flex, Stack, Text} from '@sanity/ui'\nimport React from 'react'\n\nexport function NoDocumentTypesScreen() {\n  return (\n    <Card height=\"fill\">\n      <Flex align=\"center\" height=\"fill\" justify=\"center\" padding={4} sizing=\"border\">\n        <Container width={0}>\n          <Card padding={4} radius={2} shadow={1} tone=\"caution\">\n            <Flex>\n              <Box>\n                <Text size={1}>\n                  <WarningOutlineIcon />\n                </Text>\n              </Box>\n              <Stack flex={1} marginLeft={3} space={3}>\n                <Text as=\"h1\" size={1} weight=\"bold\">\n                  No document types\n                </Text>\n                <Text as=\"p\" muted size={1}>\n                  Please define at least one document type in your schema.\n                </Text>\n                <Text as=\"p\" muted size={1}>\n                  <a\n                    href=\"https://beta.sanity.io/docs/platform/studio/config\"\n                    target=\"_blank\"\n                    rel=\"noreferrer\"\n                  >\n                    Learn how to add a document type &rarr;\n                  </a>\n                </Text>\n              </Stack>\n            </Flex>\n          </Card>\n        </Container>\n      </Flex>\n    </Card>\n  )\n}\n","import {PortalProvider, useToast} from '@sanity/ui'\nimport React, {memo, Fragment, useState, useEffect, useCallback} from 'react'\nimport styled from 'styled-components'\nimport isHotkey from 'is-hotkey'\nimport {useSchema} from '../../../hooks'\nimport {useRouter} from '../../../router'\nimport {LOADING_PANE} from '../../constants'\nimport {LoadingPane, DeskToolPane} from '../../panes'\nimport {getWaitMessages} from '../../panes/loading/getWaitMessages'\nimport {useResolvedPanes} from '../../structureResolvers'\nimport {PaneNode} from '../../types'\nimport {PaneLayout} from '../pane'\nimport {useDeskTool} from '../../useDeskTool'\nimport {_isCustomDocumentTypeDefinition} from '../../../util'\nimport {NoDocumentTypesScreen} from './NoDocumentTypesScreen'\n\ninterface DeskToolProps {\n  onPaneChange: (panes: Array<PaneNode | typeof LOADING_PANE>) => void\n}\n\nconst StyledPaneLayout = styled(PaneLayout)`\n  min-height: 100%;\n  min-width: 320px;\n`\n\nconst isSaveHotkey = isHotkey('mod+s')\n\n/**\n * @internal\n */\nexport const DeskTool = memo(function DeskTool({onPaneChange}: DeskToolProps) {\n  const {navigate} = useRouter()\n  const {push: pushToast} = useToast()\n  const schema = useSchema()\n  const {layoutCollapsed, setLayoutCollapsed} = useDeskTool()\n  const {paneDataItems, resolvedPanes, routerPanes} = useResolvedPanes()\n\n  const [portalElement, setPortalElement] = useState<HTMLDivElement | null>(null)\n\n  const handleRootCollapse = useCallback(() => setLayoutCollapsed(true), [setLayoutCollapsed])\n  const handleRootExpand = useCallback(() => setLayoutCollapsed(false), [setLayoutCollapsed])\n\n  useEffect(() => {\n    // we check for length before emitting here to skip the initial empty array\n    // state from the `useResolvedPanes` hook. there should always be a root\n    // pane emitted on subsequent emissions\n    if (resolvedPanes.length) {\n      onPaneChange(resolvedPanes)\n    }\n  }, [onPaneChange, resolvedPanes])\n\n  // The pane layout is \"collapsed\" on small screens, and only shows 1 pane at a time.\n  // Remove pane siblings (i.e. split panes) as the pane layout collapses.\n  useEffect(() => {\n    if (!layoutCollapsed) return\n    const hasSiblings = routerPanes.some((group) => group.length > 1)\n\n    if (!hasSiblings) return\n    const withoutSiblings = routerPanes.map((group) => [group[0]])\n\n    navigate({panes: withoutSiblings}, {replace: true})\n  }, [navigate, layoutCollapsed, routerPanes])\n\n  useEffect(() => {\n    const handleGlobalKeyDown = (event: KeyboardEvent) => {\n      // Prevent `Cmd+S`\n      if (isSaveHotkey(event)) {\n        event.preventDefault()\n\n        pushToast({\n          closable: true,\n          id: 'auto-save-message',\n          status: 'info',\n          title: 'Your work is automatically saved!',\n          duration: 4000,\n        })\n      }\n    }\n\n    window.addEventListener('keydown', handleGlobalKeyDown)\n    return () => window.removeEventListener('keydown', handleGlobalKeyDown)\n  }, [pushToast])\n\n  const hasDefinedDocumentTypes = schema._original?.types.some(_isCustomDocumentTypeDefinition)\n\n  if (!hasDefinedDocumentTypes) {\n    return <NoDocumentTypesScreen />\n  }\n\n  return (\n    <PortalProvider element={portalElement || null}>\n      <StyledPaneLayout\n        flex={1}\n        height={layoutCollapsed ? undefined : 'fill'}\n        minWidth={512}\n        onCollapse={handleRootCollapse}\n        onExpand={handleRootExpand}\n      >\n        {paneDataItems.map(\n          ({\n            active,\n            childItemId,\n            groupIndex,\n            itemId,\n            key: paneKey,\n            pane,\n            index: paneIndex,\n            params: paneParams,\n            path,\n            payload,\n            siblingIndex,\n            selected,\n          }) => (\n            <Fragment key={`${pane === LOADING_PANE ? 'loading' : pane.type}-${paneIndex}`}>\n              {pane === LOADING_PANE ? (\n                <LoadingPane paneKey={paneKey} path={path} selected={selected} />\n              ) : (\n                <DeskToolPane\n                  active={active}\n                  groupIndex={groupIndex}\n                  index={paneIndex}\n                  pane={pane}\n                  childItemId={childItemId}\n                  itemId={itemId}\n                  paneKey={paneKey}\n                  params={paneParams}\n                  payload={payload}\n                  selected={selected}\n                  siblingIndex={siblingIndex}\n                />\n              )}\n            </Fragment>\n          )\n        )}\n      </StyledPaneLayout>\n      <div data-portal=\"\" ref={setPortalElement} />\n    </PortalProvider>\n  )\n})\n","import {SanityDocumentLike} from '@sanity/types'\nimport React from 'react'\nimport {useSchema} from '../../hooks'\nimport {unstable_useDocumentPreview as useDocumentPreview} from '../../preview'\n\nexport interface DocTitleProps {\n  document: SanityDocumentLike\n}\n\nexport function DocTitle(props: DocTitleProps) {\n  const {document: documentValue} = props\n  const schema = useSchema()\n  const schemaType = schema.get(documentValue._type)\n\n  const {error, value} = useDocumentPreview({\n    schemaType: schemaType!,\n    value: documentValue,\n  })\n\n  if (!schemaType) {\n    return <code>Unknown schema type: {documentValue._type}</code>\n  }\n\n  if (error) {\n    return <>Error: {error.message}</>\n  }\n\n  return <>{value?.title || <span style={{color: 'var(--card-muted-fg-color)'}}>Untitled</span>}</>\n}\n","import {useMemo} from 'react'\nimport {ClientError, SanityClient} from '@sanity/client'\nimport {Observable, timer, fromEvent, EMPTY, of, forkJoin} from 'rxjs'\nimport {\n  map,\n  startWith,\n  distinctUntilChanged,\n  switchMap,\n  shareReplay,\n  catchError,\n} from 'rxjs/operators'\nimport {\n  CrossProjectTokenStore,\n  DocumentStore,\n  useDocumentStore,\n  useCrossProjectTokenStore,\n} from '../../../datastores'\nimport {useClient} from '../../../hooks'\nimport {createHookFromObservableFactory, getPublishedId, getDraftId} from '../../../util'\nimport type {AvailabilityResponse} from '../../../preview'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\n\n// this is used in place of `instanceof` so the matching can be more robust and\n// won't have any issues with dual packages etc\n// https://nodejs.org/api/packages.html#dual-package-hazard\nfunction isClientError(e: unknown): e is ClientError {\n  if (typeof e !== 'object') return false\n  if (!e) return false\n  return 'statusCode' in e && 'response' in e\n}\n\nconst POLL_INTERVAL = 5000\n\n// only fetches when the document is visible\nlet visiblePoll$: Observable<number>\nconst getVisiblePoll$ = () => {\n  if (!visiblePoll$) {\n    visiblePoll$ = fromEvent(document, 'visibilitychange').pipe(\n      // add empty emission to have this fire on creation\n      startWith(null),\n      map(() => document.visibilityState === 'visible'),\n      distinctUntilChanged(),\n      switchMap((visible) =>\n        visible\n          ? // using timer instead of interval since timer will emit on creation\n            timer(0, POLL_INTERVAL)\n          : EMPTY\n      ),\n      shareReplay({refCount: true, bufferSize: 1})\n    )\n  }\n  return visiblePoll$\n}\n\nexport type ReferringDocuments = {\n  isLoading: boolean\n  totalCount: number\n  projectIds: string[]\n  internalReferences?: {\n    totalCount: number\n    references: Array<{_id: string; _type: string}>\n  }\n  crossDatasetReferences?: {\n    totalCount: number\n    references: Array<{\n      /**\n       * The project ID of the document that is currently referencing the subject\n       * document. Unlike `documentId` and `datasetName`, this should always be\n       * defined.\n       */\n      projectId: string\n      /**\n       * The ID of the document that is currently referencing the subject\n       * document. This will be omitted if there is no access to the current\n       * project and dataset pair (e.g. if no `sanity-project-token` were\n       * configured)\n       */\n      documentId?: string\n      /**\n       * The dataset name that is currently referencing the subject document.\n       * This will be omitted if there is no access to the current project and\n       * dataset pair (e.g. if no `sanity-project-token` were configured)\n       */\n      datasetName?: string\n    }>\n  }\n}\n\nfunction getDocumentExistence(\n  documentId: string,\n  {versionedClient}: {versionedClient: SanityClient}\n): Observable<string | undefined> {\n  const draftId = getDraftId(documentId)\n  const publishedId = getPublishedId(documentId)\n  const requestOptions = {\n    uri: versionedClient.getDataUrl('doc', `${draftId},${publishedId}`),\n    json: true,\n    query: {excludeContent: 'true'},\n    tag: 'use-referring-documents.document-existence',\n  }\n  return versionedClient.observable.request<AvailabilityResponse>(requestOptions).pipe(\n    map(({omitted}) => {\n      const nonExistant = omitted.filter((doc) => doc.reason === 'existence')\n      if (nonExistant.length === 2) {\n        // None of the documents exist\n        return undefined\n      }\n\n      if (nonExistant.length === 0) {\n        // Both exist, so use the published one\n        return publishedId\n      }\n\n      // If the draft does not exist, use the published ID, and vice versa\n      return nonExistant.some((doc) => doc.id === draftId) ? publishedId : draftId\n    })\n  )\n}\n\n/**\n * fetches the cross-dataset references using the client observable.request\n * method (for that requests can be automatically cancelled)\n */\nfunction fetchCrossDatasetReferences(\n  documentId: string,\n  context: {versionedClient: SanityClient; crossProjectTokenStore: CrossProjectTokenStore}\n): Observable<ReferringDocuments['crossDatasetReferences']> {\n  const {crossProjectTokenStore, versionedClient} = context\n\n  return getVisiblePoll$().pipe(\n    switchMap(() =>\n      forkJoin({\n        checkDocumentId: getDocumentExistence(documentId, context),\n        crossProjectTokens: crossProjectTokenStore.fetchAllCrossProjectTokens(),\n      })\n    ),\n    switchMap(({checkDocumentId, crossProjectTokens}) => {\n      if (!checkDocumentId) {\n        return of({totalCount: 0, references: []})\n      }\n\n      const currentDataset = versionedClient.config().dataset\n      const headers: Record<string, string> =\n        crossProjectTokens.length > 0\n          ? {\n              'sanity-project-tokens': crossProjectTokens\n                .map((t) => `${t.projectId}=${t.token}`)\n                .join(','),\n            }\n          : {}\n\n      return versionedClient.observable\n        .request({\n          url: `/data/references/${currentDataset}/documents/${checkDocumentId}/to?excludeInternalReferences=true&excludePaths=true`,\n          headers,\n          tag: 'use-referring-documents.external',\n        })\n        .pipe(\n          catchError((e) => {\n            // it's possible that referencing document doesn't exist yet so the\n            // API will return a 404. In those cases, we want to catch and return\n            // a response with no references\n            if (isClientError(e) && e.statusCode === 404) {\n              return of({totalCount: 0, references: []})\n            }\n\n            throw e\n          })\n        )\n    })\n  )\n}\n\nconst useInternalReferences = createHookFromObservableFactory(\n  (documentId: string, context: {documentStore: DocumentStore}) => {\n    const {documentStore} = context\n    const referencesClause = '*[references($documentId)][0...100]{_id,_type}'\n    const totalClause = 'count(*[references($documentId)])'\n    const fetchQuery = `{\"references\":${referencesClause},\"totalCount\":${totalClause}}`\n    const listenQuery = '*[references($documentId)]'\n\n    return documentStore.listenQuery(\n      {fetch: fetchQuery, listen: listenQuery},\n      {documentId},\n      {tag: 'use-referring-documents', transitions: ['appear', 'disappear'], throttleTime: 5000}\n    ) as Observable<ReferringDocuments['internalReferences']>\n  }\n)\n\nconst useCrossDatasetReferences = createHookFromObservableFactory(\n  (\n    documentId: string,\n    context: {crossProjectTokenStore: CrossProjectTokenStore},\n    versionedClient: SanityClient\n  ) => {\n    const {crossProjectTokenStore} = context\n\n    return getVisiblePoll$().pipe(\n      switchMap(() =>\n        fetchCrossDatasetReferences(documentId, {\n          versionedClient,\n          crossProjectTokenStore,\n        })\n      )\n    )\n  }\n)\n\nexport function useReferringDocuments(documentId: string): ReferringDocuments {\n  const versionedClient = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  const documentStore = useDocumentStore()\n  const crossProjectTokenStore = useCrossProjectTokenStore()\n  const publishedId = getPublishedId(documentId)\n\n  const [internalReferences, isInternalReferencesLoading] = useInternalReferences(publishedId, {\n    documentStore,\n  })\n\n  const [crossDatasetReferences, isCrossDatasetReferencesLoading] = useCrossDatasetReferences(\n    publishedId,\n    {crossProjectTokenStore},\n    versionedClient\n  )\n\n  const projectIds = useMemo(() => {\n    return Array.from(\n      new Set(\n        crossDatasetReferences?.references\n          .map((crossDatasetReference) => crossDatasetReference.projectId)\n          .filter(Boolean)\n      )\n    ).sort()\n  }, [crossDatasetReferences?.references])\n\n  return {\n    totalCount: (internalReferences?.totalCount || 0) + (crossDatasetReferences?.totalCount || 0),\n    projectIds,\n    internalReferences,\n    crossDatasetReferences,\n    isLoading: isInternalReferencesLoading || isCrossDatasetReferencesLoading,\n  }\n}\n","import styled, {css} from 'styled-components'\nimport {ButtonTone, Text, Theme} from '@sanity/ui'\nimport React, {ComponentProps} from 'react'\n\nexport interface TextWithToneProps extends ComponentProps<typeof Text> {\n  tone: ButtonTone\n  dimmed?: boolean\n}\n\nexport const TextWithToneStyle = styled(Text)(\n  ({$tone, theme}: {$tone: ButtonTone; theme: Theme}) => {\n    const tone = theme.sanity.color.muted[$tone]\n\n    return css`\n      &:not([data-muted]) {\n        --card-fg-color: ${tone ? tone.enabled.fg : undefined};\n      }\n\n      &[data-dimmed] {\n        opacity: 0.3;\n      }\n    `\n  }\n)\n\nexport const TextWithTone = React.forwardRef(function TextWithTone(\n  props: TextWithToneProps,\n  ref: React.Ref<HTMLDivElement>\n) {\n  const {tone, dimmed, muted, ...rest} = props\n\n  return (\n    <TextWithToneStyle\n      data-ui=\"TextWithTone\"\n      data-dimmed={dimmed ? '' : undefined}\n      data-muted={muted ? '' : undefined}\n      $tone={tone}\n      muted={muted}\n      ref={ref}\n      {...rest}\n    />\n  )\n})\n","import React from 'react'\nimport {useTimeAgo} from '../../hooks'\n\nexport interface TimeAgoProps {\n  time: string | Date\n}\n\nexport function TimeAgo({time}: TimeAgoProps) {\n  const timeAgo = useTimeAgo(time)\n\n  return <span title={timeAgo}>{timeAgo} ago</span>\n}\n","import React from 'react'\nimport {PublishIcon} from '@sanity/icons'\nimport {PreviewValue, SanityDocument} from '@sanity/types'\nimport {Box, Text, Tooltip} from '@sanity/ui'\nimport {TextWithTone} from '../../components/TextWithTone'\nimport {TimeAgo} from './TimeAgo'\n\nexport function PublishedStatus(props: {document?: PreviewValue | Partial<SanityDocument> | null}) {\n  const {document} = props\n  const updatedAt = document && '_updatedAt' in document && document._updatedAt\n\n  return (\n    <Tooltip\n      portal\n      content={\n        <Box padding={2}>\n          <Text size={1}>\n            {document ? (\n              <>Published {updatedAt && <TimeAgo time={updatedAt} />}</>\n            ) : (\n              <>Not published</>\n            )}\n          </Text>\n        </Box>\n      }\n    >\n      <TextWithTone tone=\"positive\" dimmed={!document} muted={!document} size={1}>\n        <PublishIcon />\n      </TextWithTone>\n    </Tooltip>\n  )\n}\n","import React from 'react'\nimport {EditIcon} from '@sanity/icons'\nimport {PreviewValue, SanityDocument} from '@sanity/types'\nimport {Box, Text, Tooltip} from '@sanity/ui'\nimport {TextWithTone} from '../../components/TextWithTone'\nimport {TimeAgo} from './TimeAgo'\n\nexport function DraftStatus(props: {document?: PreviewValue | Partial<SanityDocument> | null}) {\n  const {document} = props\n  const updatedAt = document && '_updatedAt' in document && document._updatedAt\n\n  return (\n    <Tooltip\n      portal\n      content={\n        <Box padding={2}>\n          <Text size={1}>\n            {document ? (\n              <>Edited {updatedAt && <TimeAgo time={updatedAt} />}</>\n            ) : (\n              <>No unpublished edits</>\n            )}\n          </Text>\n        </Box>\n      }\n    >\n      <TextWithTone tone=\"caution\" dimmed={!document} muted={!document} size={1}>\n        <EditIcon />\n      </TextWithTone>\n    </Tooltip>\n  )\n}\n","import {WarningOutlineIcon} from '@sanity/icons'\nimport {PreviewValue, SanityDocument, SchemaType} from '@sanity/types'\nimport {assignWith} from 'lodash'\nimport React from 'react'\nimport {combineLatest, Observable, of} from 'rxjs'\nimport {map, startWith} from 'rxjs/operators'\nimport {DocumentPreviewStore} from '../../../preview'\nimport {getDraftId, getPublishedId} from '../../../util'\nimport {PaneItemPreviewState} from './types'\n\nexport const isLiveEditEnabled = (schemaType: SchemaType) => schemaType.liveEdit === true\n\nexport const getMissingDocumentFallback = (item: SanityDocument): PreviewValue => ({\n  title: <em>{item.title ? String(item.title) : 'Missing document'}</em>,\n  subtitle: <em>{item.title ? `Missing document ID: ${item._id}` : `Document ID: ${item._id}`}</em>,\n  media: WarningOutlineIcon,\n})\n\nexport const getValueWithFallback = ({\n  value,\n  draft,\n  published,\n}: {\n  value: SanityDocument\n  draft?: Partial<SanityDocument> | PreviewValue | null\n  published?: Partial<SanityDocument> | PreviewValue | null\n}): PreviewValue => {\n  const snapshot = draft || published\n\n  if (!snapshot) {\n    return getMissingDocumentFallback(value)\n  }\n\n  return assignWith({}, snapshot, value, (objValue, srcValue) => {\n    return typeof srcValue === 'undefined' ? objValue : srcValue\n  }) as PreviewValue\n}\n\nexport function getPreviewStateObservable(\n  documentPreviewStore: DocumentPreviewStore,\n  schemaType: SchemaType,\n  documentId: string,\n  title: React.ReactNode\n): Observable<PaneItemPreviewState> {\n  const draft$ = isLiveEditEnabled(schemaType)\n    ? of({snapshot: null})\n    : documentPreviewStore.observeForPreview(\n        {_type: 'reference', _ref: getDraftId(documentId)},\n        schemaType\n      )\n\n  const published$ = documentPreviewStore.observeForPreview(\n    {_type: 'reference', _ref: getPublishedId(documentId)},\n    schemaType\n  )\n\n  return combineLatest([draft$, published$]).pipe(\n    map(([draft, published]) => ({\n      draft: draft.snapshot ? {title, ...(draft.snapshot || {})} : null,\n      isLoading: false,\n      published: published.snapshot ? {title, ...(published.snapshot || {})} : null,\n    })),\n    startWith({draft: null, isLoading: true, published: null})\n  )\n}\n","import {SanityDocument, SchemaType} from '@sanity/types'\nimport React, {isValidElement} from 'react'\nimport {Subscription} from 'rxjs'\nimport {isNumber, isString} from 'lodash'\nimport {Inline} from '@sanity/ui'\nimport {PublishedStatus} from '../PublishedStatus'\nimport {DraftStatus} from '../DraftStatus'\nimport {GeneralPreviewLayoutKey} from '../../../components/previews'\nimport {DocumentPreviewPresence} from '../../../presence'\nimport {DocumentPreviewStore, SanityDefaultPreview} from '../../../preview'\nimport {isRecord} from '../../../util'\nimport {DocumentPresence} from '../../../datastores'\nimport {PaneItemPreviewState} from './types'\nimport {getPreviewStateObservable, getValueWithFallback} from './helpers'\n\nexport interface PaneItemPreviewProps {\n  documentPreviewStore: DocumentPreviewStore\n  icon: React.ComponentType | false\n  layout: GeneralPreviewLayoutKey\n  presence?: DocumentPresence[]\n  schemaType: SchemaType\n  value: SanityDocument\n}\n\nexport class PaneItemPreview extends React.Component<PaneItemPreviewProps, PaneItemPreviewState> {\n  state: PaneItemPreviewState = {}\n\n  subscription: Subscription\n\n  constructor(props: PaneItemPreviewProps) {\n    super(props)\n\n    const {value, schemaType} = props\n    // const {title} = value\n    const title =\n      (isRecord(value.title) && isValidElement(value.title)) ||\n      isString(value.title) ||\n      isNumber(value.title)\n        ? value.title\n        : null\n\n    let sync = true\n\n    this.subscription = getPreviewStateObservable(\n      props.documentPreviewStore,\n      schemaType,\n      value._id,\n      title\n    ).subscribe((state) => {\n      if (sync) {\n        this.state = state\n      } else {\n        this.setState(state)\n      }\n    })\n\n    sync = false\n  }\n\n  componentWillUnmount() {\n    if (this.subscription) {\n      this.subscription.unsubscribe()\n    }\n  }\n\n  render() {\n    const {icon, layout, presence, value} = this.props\n    const {draft, published, isLoading} = this.state\n\n    const status = isLoading ? null : (\n      <Inline space={4}>\n        {presence && presence.length > 0 && <DocumentPreviewPresence presence={presence} />}\n        <PublishedStatus document={published} />\n        <DraftStatus document={draft} />\n      </Inline>\n    )\n\n    return (\n      <SanityDefaultPreview\n        {...getValueWithFallback({value, draft, published})}\n        isPlaceholder={isLoading}\n        icon={icon}\n        layout={layout}\n        status={status}\n      />\n    )\n  }\n}\n","import React, {useCallback} from 'react'\nimport type {SanityDocument, SchemaType} from '@sanity/types'\nimport {getPublishedId} from '../../../util'\nimport {PreviewCard} from '../../../components/PreviewCard'\nimport {useDocumentPresence, useDocumentPreviewStore} from '../../../datastores'\nimport {PaneItemPreview} from '../paneItem/PaneItemPreview'\nimport {usePaneRouter} from '../paneRouter'\n\nconst EMPTY_ARRAY: [] = []\n\ninterface ReferencePreviewLinkProps {\n  onClick?: () => void\n  type: SchemaType & {icon?: any}\n  value: SanityDocument\n}\n\nexport function ReferencePreviewLink(props: ReferencePreviewLinkProps) {\n  const {onClick, type, value} = props\n  const publishedId = getPublishedId(value?._id)\n  const documentPresence = useDocumentPresence(publishedId)\n  const documentPreviewStore = useDocumentPreviewStore()\n  const {ReferenceChildLink} = usePaneRouter()\n\n  const Link = useCallback(\n    (linkProps: {children: React.ReactNode}) => (\n      <ReferenceChildLink\n        documentId={value?._id}\n        documentType={type?.name}\n        parentRefPath={EMPTY_ARRAY}\n        {...linkProps}\n      />\n    ),\n    [ReferenceChildLink, type?.name, value?._id]\n  )\n\n  return (\n    <PreviewCard\n      __unstable_focusRing\n      as={Link}\n      data-as=\"a\"\n      onClick={onClick}\n      padding={2}\n      radius={2}\n    >\n      <PaneItemPreview\n        documentPreviewStore={documentPreviewStore}\n        icon={type?.icon}\n        layout=\"default\"\n        presence={documentPresence?.length > 0 ? documentPresence : EMPTY_ARRAY}\n        schemaType={type}\n        value={value}\n      />\n    </PreviewCard>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {rem, Text, Card, Box, Tooltip, Container, Inline} from '@sanity/ui'\nimport {InfoOutlineIcon} from '@sanity/icons'\n\nexport const ChevronWrapper = styled(Box)`\n  margin-left: auto;\n`\n\nexport const CrossDatasetReferencesDetails = styled.details`\n  flex: none;\n\n  &[open] ${ChevronWrapper} {\n    transform: rotate(180deg);\n  }\n`\n\nexport const CrossDatasetReferencesSummary = styled.summary`\n  list-style: none;\n\n  &::-webkit-details-marker {\n    display: none;\n  }\n`\n\nexport const TableContainer = styled(Box).attrs({paddingX: 2, paddingBottom: 2})`\n  overflow: auto;\n  max-height: 150px;\n`\n\nexport const Table = styled.table`\n  width: 100%;\n  text-align: left;\n  padding: 0 ${({theme}) => rem(theme.sanity.space[2])};\n  border-collapse: collapse;\n\n  th {\n    padding: ${({theme}) => rem(theme.sanity.space[1])};\n  }\n\n  thead > tr {\n    position: sticky;\n    top: 0;\n    background: var(--card-bg-color);\n    z-index: 1;\n  }\n\n  td {\n    padding: 0 ${({theme}) => rem(theme.sanity.space[1])};\n  }\n\n  tr > *:last-child {\n    text-align: right;\n  }\n`\n\nexport const ReferencesCard = styled(Card).attrs({\n  radius: 2,\n  shadow: 1,\n  marginBottom: 4,\n  flex: 'auto',\n})`\n  overflow: hidden;\n  min-height: 150px;\n`\n\nexport const OtherReferenceCount = (props: {totalCount: number; references: unknown[]}) => {\n  const difference = props.totalCount - props.references.length\n\n  if (!difference) return null\n\n  return (\n    <Inline space={2}>\n      <Text size={1} muted>\n        {difference} other reference{difference === 1 ? '' : 's'} not shown{' '}\n      </Text>\n\n      <Tooltip\n        portal\n        placement=\"top\"\n        content={\n          <Container width={0}>\n            <Box padding={2}>\n              <Text size={1}>\n                We can't show metadata about these references because no token with access to the\n                datasets they are in was found.\n              </Text>\n            </Box>\n          </Container>\n        }\n      >\n        <Text size={1} muted>\n          <InfoOutlineIcon />\n        </Text>\n      </Tooltip>\n    </Inline>\n  )\n}\n","import React, {useCallback} from 'react'\nimport {\n  WarningOutlineIcon,\n  DocumentsIcon,\n  ClipboardIcon,\n  UnknownIcon,\n  ChevronDownIcon,\n} from '@sanity/icons'\nimport {useToast, Text, Box, Button, Flex, Label, Card, Stack} from '@sanity/ui'\nimport {CopyToClipboard} from 'react-copy-to-clipboard'\nimport {useSchema} from '../../../hooks'\nimport {SanityDefaultPreview} from '../../../preview'\nimport {ReferencePreviewLink} from './ReferencePreviewLink'\nimport {ReferringDocuments} from './useReferringDocuments'\nimport {\n  ReferencesCard,\n  OtherReferenceCount,\n  CrossDatasetReferencesDetails,\n  CrossDatasetReferencesSummary,\n  TableContainer,\n  Table,\n  ChevronWrapper,\n} from './ConfirmDeleteDialogBody.styles'\n\ntype DeletionConfirmationDialogBodyProps = Required<ReferringDocuments> & {\n  documentTitle: React.ReactNode\n  action: string\n  onReferenceLinkClick?: () => void\n}\n\n/**\n * The inner part of the `ConfirmDeleteDialog`. This is ran when both the\n * `crossDatasetReferences` and `internalReferences` are loaded.\n */\nexport function ConfirmDeleteDialogBody({\n  crossDatasetReferences,\n  internalReferences,\n  documentTitle,\n  totalCount,\n  action,\n  projectIds,\n  onReferenceLinkClick,\n}: DeletionConfirmationDialogBodyProps) {\n  const schema = useSchema()\n  const toast = useToast()\n\n  const renderPreviewItem = useCallback(\n    (item) => {\n      const type = schema.get(item._type)\n      if (type) {\n        return <ReferencePreviewLink type={type} value={item} onClick={onReferenceLinkClick} />\n      }\n\n      return (\n        // Padding added to match the ReferencePreviewLink styling\n        <Box padding={2}>\n          <SanityDefaultPreview\n            icon={UnknownIcon}\n            title=\"Preview Unavailable\"\n            subtitle={`ID: ${item._id}`}\n            layout=\"default\"\n          />\n        </Box>\n      )\n    },\n    [schema, onReferenceLinkClick]\n  )\n\n  if (internalReferences?.totalCount === 0 && crossDatasetReferences?.totalCount === 0) {\n    return (\n      <Text as=\"p\">\n        Are you sure you want to delete <strong>â€œ{documentTitle}â€</strong>?\n      </Text>\n    )\n  }\n\n  const documentCount =\n    crossDatasetReferences.totalCount === 1\n      ? '1 document'\n      : `${crossDatasetReferences.totalCount.toLocaleString()} documents`\n  const projectCount = projectIds.length === 1 ? 'another project' : `${projectIds.length} projects`\n  const projectIdList = `Project ID${projectIds.length === 1 ? '' : 's'}: ${projectIds.join(', ')}`\n\n  return (\n    <>\n      <Card padding={3} radius={2} tone=\"caution\" marginBottom={4} flex=\"none\">\n        <Flex>\n          <Text aria-hidden=\"true\" size={1}>\n            <WarningOutlineIcon />\n          </Text>\n          <Box flex={1} marginLeft={3}>\n            <Text size={1}>\n              {totalCount === 1 ? (\n                <>1 document refers to â€œ{documentTitle}â€</>\n              ) : (\n                <>\n                  {totalCount.toLocaleString()} documents refer to â€œ{documentTitle}â€\n                </>\n              )}\n            </Text>\n          </Box>\n        </Flex>\n      </Card>\n\n      <Box flex=\"none\" marginBottom={4}>\n        <Text>\n          You may not be able to {action} â€œ{documentTitle}â€ because the following documents refer to\n          it:\n        </Text>\n      </Box>\n\n      <ReferencesCard>\n        <Flex direction=\"column\" height=\"fill\">\n          {internalReferences.totalCount > 0 && (\n            <Stack as=\"ul\" padding={3} space={3} overflow=\"auto\" data-testid=\"internal-references\">\n              {internalReferences?.references.map((item) => (\n                <Box as=\"li\" key={item._id}>\n                  {renderPreviewItem(item)}\n                </Box>\n              ))}\n\n              {internalReferences.totalCount > internalReferences.references.length && (\n                <Box as=\"li\" padding={3}>\n                  <OtherReferenceCount {...internalReferences} />\n                </Box>\n              )}\n            </Stack>\n          )}\n\n          {crossDatasetReferences.totalCount > 0 && (\n            <CrossDatasetReferencesDetails\n              data-testid=\"cross-dataset-references\"\n              style={{\n                // only add the border if needed\n                borderTop:\n                  internalReferences.totalCount > 0\n                    ? '1px solid var(--card-shadow-outline-color)'\n                    : undefined,\n              }}\n            >\n              <CrossDatasetReferencesSummary>\n                <Flex padding={4} align=\"center\">\n                  <Box marginRight={4}>\n                    <Text size={3}>\n                      <DocumentsIcon />\n                    </Text>\n                  </Box>\n                  <Flex marginRight={4} direction=\"column\">\n                    <Box marginBottom={2}>\n                      <Text>\n                        {documentCount} in {projectCount}\n                      </Text>\n                    </Box>\n                    <Box>\n                      <Text title={projectIdList} textOverflow=\"ellipsis\" size={1} muted>\n                        {projectIdList}\n                      </Text>\n                    </Box>\n                  </Flex>\n                  <ChevronWrapper>\n                    <Text muted>\n                      <ChevronDownIcon />\n                    </Text>\n                  </ChevronWrapper>\n                </Flex>\n              </CrossDatasetReferencesSummary>\n\n              <TableContainer>\n                <Table>\n                  <thead>\n                    <tr>\n                      <th>\n                        <Label muted size={0}>\n                          Project ID\n                        </Label>\n                      </th>\n                      <th>\n                        <Label muted size={0}>\n                          Dataset\n                        </Label>\n                      </th>\n                      <th>\n                        <Label muted size={0}>\n                          Document ID\n                        </Label>\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {crossDatasetReferences.references\n                      .filter((reference): reference is Required<typeof reference> => {\n                        return (\n                          'projectId' in reference &&\n                          'datasetName' in reference &&\n                          'documentId' in reference\n                        )\n                      })\n                      .map(({projectId, datasetName, documentId}, index) => (\n                        // eslint-disable-next-line react/no-array-index-key\n                        <tr key={`${documentId}-${index}`}>\n                          <td>\n                            <Text size={1}>{projectId}</Text>\n                          </td>\n                          <td>\n                            <Text size={1}>{datasetName}</Text>\n                          </td>\n                          <td>\n                            <Flex align=\"center\" gap={2} justify=\"flex-end\">\n                              <Text textOverflow=\"ellipsis\" size={1}>\n                                {documentId}\n                              </Text>\n                              <CopyToClipboard\n                                text={documentId}\n                                // eslint-disable-next-line react/jsx-no-bind\n                                onCopy={() => {\n                                  // TODO: this isn't visible with the dialog open\n                                  toast.push({\n                                    title: 'Copied document ID to clipboard!',\n                                    status: 'success',\n                                  })\n                                }}\n                              >\n                                <Button\n                                  title=\"Copy ID to clipboard\"\n                                  mode=\"bleed\"\n                                  icon={ClipboardIcon}\n                                  fontSize={0}\n                                />\n                              </CopyToClipboard>\n                            </Flex>\n                          </td>\n                        </tr>\n                      ))}\n                  </tbody>\n                </Table>\n                <Box padding={2}>\n                  <OtherReferenceCount {...crossDatasetReferences} />\n                </Box>\n              </TableContainer>\n            </CrossDatasetReferencesDetails>\n          )}\n        </Flex>\n      </ReferencesCard>\n\n      <Box flex=\"none\">\n        <Text>\n          If you {action} this document, documents that refer to it will no longer be able to access\n          it.\n        </Text>\n      </Box>\n    </>\n  )\n}\n","import React, {useMemo} from 'react'\nimport styled from 'styled-components'\nimport {Box, Dialog, Button, Text, Spinner, Grid, Flex} from '@sanity/ui'\nimport {useId} from '@reach/auto-id'\nimport {DocTitle} from '../DocTitle'\nimport {useReferringDocuments} from './useReferringDocuments'\nimport {ConfirmDeleteDialogBody} from './ConfirmDeleteDialogBody'\n\nexport const DialogBody = styled(Flex).attrs({\n  padding: 4,\n  direction: 'column',\n  height: 'fill',\n})`\n  box-sizing: border-box;\n`\n\nexport const LoadingContainer = styled(Flex).attrs({\n  align: 'center',\n  direction: 'column',\n  justify: 'center',\n})`\n  height: 300px;\n`\n\nexport interface ConfirmDeleteDialogProps {\n  /**\n   * Incoming document ID used to find other referencing documents. This\n   * field respects draft IDs (e.g. if you pass in a published ID when one\n   * doesn't exist the document title may not show up).\n   */\n  id: string\n  /**\n   * The schema typename of the incoming document\n   */\n  type: string\n  /**\n   * The name of the action being done. (e.g. the `'unpublish'` action requires\n   * the same document deletion confirmation).\n   */\n  action?: string\n  onCancel: () => void\n  onConfirm: () => void\n}\n\n/**\n * A confirmation dialog used to prevent unwanted document deletes. Loads all\n * the referencing internal and cross-data references prior to showing the\n * delete button.\n */\nexport function ConfirmDeleteDialog({\n  id,\n  type,\n  action = 'delete',\n  onCancel,\n  onConfirm,\n}: ConfirmDeleteDialogProps) {\n  const dialogId = `deletion-confirmation-${useId()}`\n  const {internalReferences, crossDatasetReferences, isLoading, totalCount, projectIds} =\n    useReferringDocuments(id)\n  const capitalizedAction = `${action.substring(0, 1).toUpperCase()}${action.substring(1)}`\n\n  const documentTitle = <DocTitle document={useMemo(() => ({_id: id, _type: type}), [id, type])} />\n  const showConfirmButton = !isLoading\n\n  return (\n    <Dialog\n      width={1}\n      id={dialogId}\n      header={`${capitalizedAction} document?`}\n      footer={\n        <Grid columns={showConfirmButton ? 2 : 1} gap={2} paddingX={4} paddingY={3}>\n          <Button mode=\"ghost\" onClick={onCancel} text=\"Cancel\" />\n\n          {showConfirmButton && (\n            <Button\n              data-testid=\"confirm-delete-button\"\n              text={totalCount > 0 ? `${capitalizedAction} anyway` : `${capitalizedAction} now`}\n              tone=\"critical\"\n              onClick={onConfirm}\n            />\n          )}\n        </Grid>\n      }\n      onClose={onCancel}\n      onClickOutside={onCancel}\n    >\n      <DialogBody>\n        {crossDatasetReferences && internalReferences && !isLoading ? (\n          <ConfirmDeleteDialogBody\n            crossDatasetReferences={crossDatasetReferences}\n            internalReferences={internalReferences}\n            documentTitle={documentTitle}\n            isLoading={isLoading}\n            totalCount={totalCount}\n            action={action}\n            projectIds={projectIds}\n            onReferenceLinkClick={onCancel}\n          />\n        ) : (\n          <LoadingContainer data-testid=\"loading-container\">\n            <Spinner muted />\n            <Box marginTop={3}>\n              <Text align=\"center\" muted size={1}>\n                Looking for referring documentsâ€¦\n              </Text>\n            </Box>\n          </LoadingContainer>\n        )}\n      </DialogBody>\n    </Dialog>\n  )\n}\n","import React, {useCallback, useState} from 'react'\nimport {Box, Flex, Button, Dialog, Text, ErrorBoundary} from '@sanity/ui'\nimport {useId} from '@reach/auto-id'\nimport {ConfirmDeleteDialog, ConfirmDeleteDialogProps} from './ConfirmDeleteDialog'\n\nexport type {ConfirmDeleteDialogProps}\n\ntype ArgType<T> = T extends (arg: infer U) => unknown ? U : never\ntype ErrorInfo = ArgType<React.ComponentProps<typeof ErrorBoundary>['onCatch']>\n\nfunction ConfirmDeleteDialogContainer(props: ConfirmDeleteDialogProps) {\n  const id = useId()\n  const [error, setError] = useState<ErrorInfo | null>(null)\n  const handleRetry = useCallback(() => setError(null), [])\n\n  return error ? (\n    <Dialog\n      id={`dialog-error-${id}`}\n      data-testid=\"confirm-delete-error-dialog\"\n      header=\"Error\"\n      footer={\n        <Flex paddingX={4} paddingY={3} direction=\"column\">\n          <Button mode=\"ghost\" text=\"Retry\" onClick={handleRetry} />\n        </Flex>\n      }\n      onClose={props.onCancel}\n    >\n      <Box padding={4}>\n        <Text>An error occurred while loading referencing documents.</Text>\n      </Box>\n    </Dialog>\n  ) : (\n    <ErrorBoundary onCatch={setError}>\n      <ConfirmDeleteDialog {...props} />\n    </ErrorBoundary>\n  )\n}\n\nexport {ConfirmDeleteDialogContainer as ConfirmDeleteDialog}\n","import {TrashIcon} from '@sanity/icons'\nimport React, {useCallback, useState} from 'react'\nimport {InsufficientPermissionsMessage} from '../../../components/InsufficientPermissionsMessage'\nimport {useCurrentUser, useDocumentPairPermissions} from '../../../datastores'\nimport {useDocumentOperation} from '../../../hooks'\nimport {ConfirmDeleteDialog} from '../../components'\nimport {DocumentActionComponent} from '../types'\n\nconst DISABLED_REASON_TITLE = {\n  NOTHING_TO_DELETE: 'This document doesnâ€™t yet exist or is already deleted',\n}\n\nexport const DeleteAction: DocumentActionComponent = ({id, type, draft, onComplete}) => {\n  const {delete: deleteOp} = useDocumentOperation(id, type)\n  const [isDeleting, setIsDeleting] = useState(false)\n  const [isConfirmDialogOpen, setConfirmDialogOpen] = useState(false)\n\n  const handleCancel = useCallback(() => {\n    setConfirmDialogOpen(false)\n    onComplete()\n  }, [onComplete])\n\n  const handleConfirm = useCallback(() => {\n    setIsDeleting(true)\n    setConfirmDialogOpen(false)\n    deleteOp.execute()\n    onComplete()\n  }, [deleteOp, onComplete])\n\n  const handle = useCallback(() => {\n    setConfirmDialogOpen(true)\n  }, [])\n\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id,\n    type,\n    permission: 'delete',\n  })\n\n  const currentUser = useCurrentUser()\n\n  if (!isPermissionsLoading && !permissions?.granted) {\n    return {\n      tone: 'critical',\n      icon: TrashIcon,\n      disabled: true,\n      label: 'Delete',\n      title: (\n        <InsufficientPermissionsMessage\n          operationLabel=\"delete this document\"\n          currentUser={currentUser}\n        />\n      ),\n    }\n  }\n\n  return {\n    tone: 'critical',\n    icon: TrashIcon,\n    disabled: isDeleting || Boolean(deleteOp.disabled) || isPermissionsLoading,\n    title:\n      (deleteOp.disabled &&\n        DISABLED_REASON_TITLE[deleteOp.disabled as keyof typeof DISABLED_REASON_TITLE]) ||\n      '',\n    label: isDeleting ? 'Deletingâ€¦' : 'Delete',\n    shortcut: 'Ctrl+Alt+D',\n    onHandle: handle,\n    modal: isConfirmDialogOpen && {\n      type: 'dialog',\n      onClose: onComplete,\n      content: (\n        <ConfirmDeleteDialog\n          action=\"delete\"\n          id={draft?._id || id}\n          type={type}\n          onCancel={handleCancel}\n          onConfirm={handleConfirm}\n        />\n      ),\n    },\n  }\n}\n\nDeleteAction.action = 'delete'\n","import {ResetIcon} from '@sanity/icons'\nimport React, {useCallback, useMemo, useState} from 'react'\nimport {DocumentActionComponent, DocumentActionModalProps} from '../types'\nimport {useDocumentOperation} from '../../../hooks'\nimport {InsufficientPermissionsMessage} from '../../../components/InsufficientPermissionsMessage'\nimport {useCurrentUser, useDocumentPairPermissions} from '../../../datastores'\n\nconst DISABLED_REASON_TITLE = {\n  NO_CHANGES: 'This document has no unpublished changes',\n  NOT_PUBLISHED: 'This document is not published',\n}\n\nexport const DiscardChangesAction: DocumentActionComponent = ({\n  id,\n  type,\n  published,\n  liveEdit,\n  onComplete,\n}) => {\n  const {discardChanges} = useDocumentOperation(id, type)\n  const [isConfirmDialogOpen, setConfirmDialogOpen] = useState(false)\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id,\n    type,\n    permission: 'discardDraft',\n  })\n  const currentUser = useCurrentUser()\n\n  const handleConfirm = useCallback(() => {\n    discardChanges.execute()\n    onComplete()\n  }, [discardChanges, onComplete])\n\n  const handle = useCallback(() => {\n    setConfirmDialogOpen(true)\n  }, [])\n\n  const modal: DocumentActionModalProps | false = useMemo(\n    () =>\n      isConfirmDialogOpen && {\n        type: 'confirm',\n        tone: 'critical',\n        onCancel: onComplete,\n        onConfirm: handleConfirm,\n        message: <>Are you sure you want to discard all changes since last published?</>,\n      },\n    [handleConfirm, isConfirmDialogOpen, onComplete]\n  )\n\n  if (!published || liveEdit) {\n    return null\n  }\n\n  if (!isPermissionsLoading && !permissions?.granted) {\n    return {\n      tone: 'critical',\n      icon: ResetIcon,\n      disabled: true,\n      label: 'Discard changes',\n      title: (\n        <InsufficientPermissionsMessage\n          operationLabel=\"discard changes in this document\"\n          currentUser={currentUser}\n        />\n      ),\n    }\n  }\n\n  return {\n    tone: 'critical',\n    icon: ResetIcon,\n    disabled: Boolean(discardChanges.disabled) || isPermissionsLoading,\n    title:\n      (discardChanges.disabled &&\n        DISABLED_REASON_TITLE[discardChanges.disabled as keyof typeof DISABLED_REASON_TITLE]) ||\n      '',\n    label: 'Discard changes',\n    onHandle: handle,\n    modal,\n  }\n}\n\nDiscardChangesAction.action = 'discardChanges'\n","import {CopyIcon} from '@sanity/icons'\nimport {uuid} from '@sanity/uuid'\nimport React, {useCallback, useState} from 'react'\nimport {InsufficientPermissionsMessage} from '../../../components/InsufficientPermissionsMessage'\nimport {useCurrentUser, useDocumentPairPermissions} from '../../../datastores'\nimport {useDocumentOperation} from '../../../hooks'\nimport {useRouter} from '../../../router'\nimport {DocumentActionComponent} from '../types'\n\nconst DISABLED_REASON_TITLE = {\n  NOTHING_TO_DUPLICATE: 'This document doesnâ€™t yet exist so thereâ€˜s nothing to duplicate',\n}\n\nexport const DuplicateAction: DocumentActionComponent = ({id, type, onComplete}) => {\n  const {duplicate} = useDocumentOperation(id, type)\n  const router = useRouter()\n  const [isDuplicating, setDuplicating] = useState(false)\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id,\n    type,\n    permission: 'duplicate',\n  })\n\n  const currentUser = useCurrentUser()\n\n  const handle = useCallback(() => {\n    const dupeId = uuid()\n\n    setDuplicating(true)\n    ;(duplicate.execute as any)(dupeId)\n    router.navigateIntent('edit', {id: dupeId, type})\n    onComplete()\n  }, [duplicate, onComplete, router, type])\n\n  if (!isPermissionsLoading && !permissions?.granted) {\n    return {\n      icon: CopyIcon,\n      disabled: true,\n      label: 'Duplicate',\n      title: (\n        <InsufficientPermissionsMessage\n          operationLabel=\"duplicate this document\"\n          currentUser={currentUser}\n        />\n      ),\n    }\n  }\n\n  return {\n    icon: CopyIcon,\n    disabled: isDuplicating || Boolean(duplicate.disabled) || isPermissionsLoading,\n    label: isDuplicating ? 'Duplicatingâ€¦' : 'Duplicate',\n    title:\n      (duplicate.disabled &&\n        DISABLED_REASON_TITLE[duplicate.disabled as keyof typeof DISABLED_REASON_TITLE]) ||\n      '',\n    onHandle: handle,\n  }\n}\n\nDuplicateAction.action = 'duplicate'\n","import {RestoreIcon} from '@sanity/icons'\nimport React, {useCallback, useMemo, useState} from 'react'\nimport {useDocumentOperation} from '../../../hooks'\nimport {useRouter} from '../../../router'\nimport {DocumentActionComponent, DocumentActionModalProps} from '../types'\n\nexport const HistoryRestoreAction: DocumentActionComponent = ({id, type, revision, onComplete}) => {\n  const {restore}: any = useDocumentOperation(id, type)\n  const router = useRouter()\n  const [isConfirmDialogOpen, setConfirmDialogOpen] = useState(false)\n\n  const handleConfirm = useCallback(() => {\n    restore.execute(revision)\n    router.navigateIntent('edit', {id, type})\n    onComplete()\n  }, [revision, restore, router, onComplete, id, type])\n\n  const handle = useCallback(() => {\n    setConfirmDialogOpen(true)\n  }, [])\n\n  const modal: DocumentActionModalProps | null = useMemo(() => {\n    if (isConfirmDialogOpen) {\n      return {\n        type: 'confirm',\n        tone: 'critical',\n        onCancel: onComplete,\n        onConfirm: handleConfirm,\n        message: <>Are you sure you want to restore this document?</>,\n      }\n    }\n\n    return null\n  }, [handleConfirm, isConfirmDialogOpen, onComplete])\n\n  const isRevisionInitialVersion = revision === '@initial'\n\n  return {\n    label: 'Restore',\n    color: 'primary',\n    onHandle: handle,\n    title: isRevisionInitialVersion\n      ? \"You can't restore to the initial version\"\n      : 'Restore to this version',\n    icon: RestoreIcon,\n    modal,\n    disabled: isRevisionInitialVersion,\n  }\n}\n\nHistoryRestoreAction.action = 'restore'\n","import {CheckmarkIcon, PublishIcon} from '@sanity/icons'\nimport React, {useCallback, useEffect, useState} from 'react'\nimport {isValidationErrorMarker} from '@sanity/types'\nimport {useSyncState, useDocumentOperation, useValidationStatus} from '../../../hooks'\nimport {DocumentActionComponent} from '../types'\nimport {InsufficientPermissionsMessage} from '../../../components/InsufficientPermissionsMessage'\nimport {TimeAgo} from '../../components'\nimport {useDocumentPane} from '../../panes/document/useDocumentPane'\nimport {useCurrentUser, useDocumentPairPermissions} from '../../../datastores'\n\nconst DISABLED_REASON_TITLE = {\n  LIVE_EDIT_ENABLED: 'Cannot publish since liveEdit is enabled for this document type',\n  ALREADY_PUBLISHED: 'Already published',\n  NO_CHANGES: 'No unpublished changes',\n}\n\nfunction getDisabledReason(\n  reason: keyof typeof DISABLED_REASON_TITLE,\n  publishedAt: string | undefined\n) {\n  if (reason === 'ALREADY_PUBLISHED' && publishedAt) {\n    return (\n      <>\n        <span>\n          Published <TimeAgo time={publishedAt} />\n        </span>\n      </>\n    )\n  }\n  return DISABLED_REASON_TITLE[reason]\n}\n\n// eslint-disable-next-line complexity\nexport const PublishAction: DocumentActionComponent = (props) => {\n  const {id, type, liveEdit, draft, published} = props\n  const [publishState, setPublishState] = useState<'publishing' | 'published' | null>(null)\n  const {publish}: any = useDocumentOperation(id, type)\n  const validationStatus = useValidationStatus(id, type)\n  const syncState = useSyncState(id, type)\n  const {changesOpen, onHistoryOpen} = useDocumentPane()\n  const hasValidationErrors = validationStatus.validation.some(isValidationErrorMarker)\n  // we use this to \"schedule\" publish after pending tasks (e.g. validation and sync) has completed\n  const [publishScheduled, setPublishScheduled] = useState<boolean>(false)\n  const isNeitherSyncingNorValidating = !syncState.isSyncing && !validationStatus.isValidating\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id,\n    type,\n    permission: 'publish',\n  })\n\n  const currentUser = useCurrentUser()\n\n  // eslint-disable-next-line no-nested-ternary\n  const title = publish.disabled\n    ? getDisabledReason(publish.disabled, (published || {})._updatedAt) || ''\n    : hasValidationErrors\n    ? 'There are validation errors that need to be fixed before this document can be published'\n    : ''\n\n  const hasDraft = Boolean(draft)\n\n  const doPublish = useCallback(() => {\n    publish.execute()\n    setPublishState('publishing')\n  }, [publish])\n\n  useEffect(() => {\n    if (publishScheduled && isNeitherSyncingNorValidating) {\n      if (!hasValidationErrors) {\n        doPublish()\n      }\n\n      setPublishScheduled(false)\n    }\n  }, [isNeitherSyncingNorValidating, doPublish, hasValidationErrors, publishScheduled])\n\n  useEffect(() => {\n    const didPublish = publishState === 'publishing' && !hasDraft\n    if (didPublish) {\n      if (changesOpen) {\n        // Re-open the panel\n        onHistoryOpen()\n      }\n    }\n    const nextState = didPublish ? 'published' : null\n    const delay = didPublish ? 200 : 4000\n    const timer = setTimeout(() => {\n      setPublishState(nextState)\n    }, delay)\n    return () => clearTimeout(timer)\n  }, [changesOpen, publishState, hasDraft, onHistoryOpen])\n\n  const handle = useCallback(() => {\n    if (syncState.isSyncing || validationStatus.isValidating) {\n      setPublishScheduled(true)\n    } else {\n      doPublish()\n    }\n  }, [syncState.isSyncing, validationStatus.isValidating, doPublish])\n\n  if (liveEdit) {\n    return {\n      tone: 'positive',\n      label: 'Publish',\n      title:\n        'Live Edit is enabled for this content type and publishing happens automatically as you make changes',\n      disabled: true,\n    }\n  }\n\n  if (!isPermissionsLoading && !permissions?.granted) {\n    return {\n      tone: 'positive',\n      label: 'Publish',\n      title: (\n        <InsufficientPermissionsMessage\n          operationLabel=\"publish this document\"\n          currentUser={currentUser}\n        />\n      ),\n      disabled: true,\n    }\n  }\n\n  const disabled = Boolean(\n    publishScheduled ||\n      publishState === 'publishing' ||\n      publishState === 'published' ||\n      hasValidationErrors ||\n      publish.disabled\n  )\n\n  return {\n    disabled: disabled || isPermissionsLoading,\n    tone: 'positive',\n    label:\n      // eslint-disable-next-line no-nested-ternary\n      publishState === 'published'\n        ? 'Published'\n        : publishScheduled || publishState === 'publishing'\n        ? 'Publishingâ€¦'\n        : 'Publish',\n    // @todo: Implement loading state, to show a `<Button loading />` state\n    // loading: publishScheduled || publishState === 'publishing',\n    icon: publishState === 'published' ? CheckmarkIcon : PublishIcon,\n    // eslint-disable-next-line no-nested-ternary\n    title: publishScheduled\n      ? 'Waiting for tasks to finish before publishing'\n      : publishState === 'published' || publishState === 'publishing'\n      ? null\n      : title,\n    shortcut: disabled || publishScheduled ? null : 'Ctrl+Alt+P',\n    onHandle: handle,\n  }\n}\n\nPublishAction.action = 'publish'\n","import {UnpublishIcon} from '@sanity/icons'\nimport React, {useCallback, useMemo, useState} from 'react'\nimport {InsufficientPermissionsMessage} from '../../../components/InsufficientPermissionsMessage'\nimport {useCurrentUser, useDocumentPairPermissions} from '../../../datastores'\nimport {useDocumentOperation} from '../../../hooks'\nimport {ConfirmDeleteDialog} from '../../components'\nimport {DocumentActionComponent, DocumentActionModalProps} from '../types'\n\nconst DISABLED_REASON_TITLE = {\n  NOT_PUBLISHED: 'This document is not published',\n}\n\nexport const UnpublishAction: DocumentActionComponent = ({\n  id,\n  type,\n  draft,\n  onComplete,\n  liveEdit,\n}) => {\n  const {unpublish} = useDocumentOperation(id, type)\n  const [isConfirmDialogOpen, setConfirmDialogOpen] = useState(false)\n  const [permissions, isPermissionsLoading] = useDocumentPairPermissions({\n    id,\n    type,\n    permission: 'unpublish',\n  })\n  const currentUser = useCurrentUser()\n\n  const handleCancel = useCallback(() => {\n    setConfirmDialogOpen(false)\n    onComplete()\n  }, [onComplete])\n\n  const handleConfirm = useCallback(() => {\n    setConfirmDialogOpen(false)\n    unpublish.execute()\n    onComplete()\n  }, [onComplete, unpublish])\n\n  const modal: DocumentActionModalProps | null = useMemo(() => {\n    if (isConfirmDialogOpen) {\n      return {\n        type: 'dialog',\n        onClose: onComplete,\n        content: (\n          <ConfirmDeleteDialog\n            id={draft?._id || id}\n            type={type}\n            action=\"unpublish\"\n            onCancel={handleCancel}\n            onConfirm={handleConfirm}\n          />\n        ),\n      }\n    }\n\n    return null\n  }, [draft, id, handleCancel, handleConfirm, isConfirmDialogOpen, onComplete, type])\n\n  if (liveEdit) {\n    return null\n  }\n\n  if (!isPermissionsLoading && !permissions?.granted) {\n    return {\n      tone: 'critical',\n      icon: UnpublishIcon,\n      label: 'Unpublish',\n      title: (\n        <InsufficientPermissionsMessage\n          operationLabel=\"unpublish this document\"\n          currentUser={currentUser}\n        />\n      ),\n      disabled: true,\n    }\n  }\n\n  return {\n    tone: 'critical',\n    icon: UnpublishIcon,\n    disabled: Boolean(unpublish.disabled) || isPermissionsLoading,\n    label: 'Unpublish',\n    title: unpublish.disabled\n      ? DISABLED_REASON_TITLE[unpublish.disabled as keyof typeof DISABLED_REASON_TITLE]\n      : '',\n    onHandle: () => setConfirmDialogOpen(true),\n    modal,\n  }\n}\n\nUnpublishAction.action = 'unpublish'\n","import type {Schema, AssetSource} from '@sanity/types'\nimport type {Template, TemplateResponse} from '../templates'\nimport {\n  DeleteAction,\n  DiscardChangesAction,\n  DocumentActionComponent,\n  DuplicateAction,\n  PublishAction,\n  UnpublishAction,\n} from '../desk/actions'\nimport {DocumentBadgeComponent, LiveEditBadge} from '../desk/badges'\nimport type {\n  _DocumentLanguageFilterComponent,\n  _DocumentLanguageFilterContext,\n  AsyncConfigPropertyReducer,\n  ConfigContext,\n  ConfigPropertyReducer,\n  DocumentActionsContext,\n  DocumentBadgesContext,\n  NewDocumentOptionsContext,\n  ResolveProductionUrlContext,\n  Tool,\n} from './types'\n\nexport const initialDocumentBadges = [LiveEditBadge]\n\nexport const initialDocumentActions = [\n  PublishAction,\n  DiscardChangesAction,\n  UnpublishAction,\n  DuplicateAction,\n  DeleteAction,\n]\n\nexport const initialLanguageFilter: _DocumentLanguageFilterComponent[] = []\n\nexport const schemaTypesReducer: ConfigPropertyReducer<\n  Schema.TypeDefinition[],\n  Omit<ConfigContext, 'schema' | 'currentUser' | 'client' | 'getClient'>\n> = (prev, {schema}, context) => {\n  const schemaTypes = schema?.types\n\n  if (!schemaTypes) return prev\n  if (typeof schemaTypes === 'function') return schemaTypes(prev, context)\n  if (Array.isArray(schemaTypes)) return [...prev, ...schemaTypes]\n\n  throw new Error(\n    `Expected \\`schema.types\\` to an array or a function but found ${typeof schemaTypes} instead.`\n  )\n}\n\nexport const resolveProductionUrlReducer: AsyncConfigPropertyReducer<\n  string | undefined,\n  ResolveProductionUrlContext\n> = async (prev, {document}, context) => {\n  const resolveProductionUrl = document?.productionUrl\n  // the redundant await is useful for error logging because the error is caught\n  // in this stack vs somewhere down stream\n  // eslint-disable-next-line no-return-await\n  if (resolveProductionUrl) return await resolveProductionUrl(prev, context)\n  return prev\n}\n\nexport const toolsReducer: ConfigPropertyReducer<Tool[], ConfigContext> = (\n  prev,\n  {tools},\n  context\n) => {\n  if (!tools) return prev\n  if (typeof tools === 'function') return tools(prev, context)\n  if (Array.isArray(tools)) return [...prev, ...tools]\n\n  throw new Error(`Expected \\`tools\\` to an array or a function but found ${typeof tools} instead.`)\n}\n\nexport const schemaTemplatesReducer: ConfigPropertyReducer<Template[], ConfigContext> = (\n  prev,\n  {schema},\n  context\n) => {\n  const schemaTemplates = schema?.templates\n  if (!schemaTemplates) return prev\n  if (typeof schemaTemplates === 'function') return schemaTemplates(prev, context)\n  if (Array.isArray(schemaTemplates)) return [...prev, ...schemaTemplates]\n\n  throw new Error(\n    `Expected \\`schema.templates\\` to an array or a function but found ${typeof schemaTemplates} instead.`\n  )\n}\n\nexport const documentBadgesReducer: ConfigPropertyReducer<\n  DocumentBadgeComponent[],\n  DocumentBadgesContext\n> = (prev, {document}, context) => {\n  const documentBadges = document?.badges\n  if (!documentBadges) return prev\n\n  if (typeof documentBadges === 'function') return documentBadges(prev, context)\n  if (Array.isArray(documentBadges)) return [...prev, ...documentBadges]\n\n  throw new Error(\n    `Expected \\`document.actions\\` to an array or a function but found ${typeof documentBadges} instead.`\n  )\n}\n\nexport const documentActionsReducer: ConfigPropertyReducer<\n  DocumentActionComponent[],\n  DocumentActionsContext\n> = (prev, {document}, context) => {\n  const documentActions = document?.actions\n  if (!documentActions) return prev\n\n  if (typeof documentActions === 'function') return documentActions(prev, context)\n  if (Array.isArray(documentActions)) return [...prev, ...documentActions]\n\n  throw new Error(\n    `Expected \\`document.actions\\` to an array or a function but found ${typeof documentActions} instead.`\n  )\n}\n\nexport const newDocumentOptionsResolver: ConfigPropertyReducer<\n  TemplateResponse[],\n  NewDocumentOptionsContext\n> = (prev, {document}, context) => {\n  const resolveNewDocumentOptions = document?.newDocumentOptions\n  if (!resolveNewDocumentOptions) return prev\n\n  if (typeof resolveNewDocumentOptions !== 'function') {\n    throw new Error(\n      `Expected \\`document.resolveNewDocumentOptions\\` a function but found ${typeof resolveNewDocumentOptions} instead.`\n    )\n  }\n\n  return resolveNewDocumentOptions(prev, context)\n}\n\nexport const fileAssetSourceResolver: ConfigPropertyReducer<AssetSource[], ConfigContext> = (\n  prev,\n  {form},\n  context\n) => {\n  const assetSources = form?.file?.assetSources\n  if (!assetSources) return prev\n\n  if (typeof assetSources === 'function') return assetSources(prev, context)\n  if (Array.isArray(assetSources)) return [...prev, ...assetSources]\n\n  throw new Error(\n    `Expected \\`file.assetSources\\` to an array or a function but found ${typeof assetSources} instead.`\n  )\n}\n\nexport const imageAssetSourceResolver: ConfigPropertyReducer<AssetSource[], ConfigContext> = (\n  prev,\n  {form},\n  context\n) => {\n  const assetSources = form?.image?.assetSources\n  if (!assetSources) return prev\n\n  if (typeof assetSources === 'function') return assetSources(prev, context)\n  if (Array.isArray(assetSources)) return [...prev, ...assetSources]\n\n  throw new Error(\n    `Expected \\`image.assetSources\\` to an array or a function but found ${typeof assetSources} instead.`\n  )\n}\n\n/**\n * @internal\n */\nexport const _documentLanguageFilterReducer: ConfigPropertyReducer<\n  _DocumentLanguageFilterComponent[],\n  _DocumentLanguageFilterContext\n> = (prev, {document}, context) => {\n  const resolveDocumentLanguageFilter = document?.unstable_languageFilter\n  if (!resolveDocumentLanguageFilter) return prev\n\n  if (typeof resolveDocumentLanguageFilter === 'function')\n    return resolveDocumentLanguageFilter(prev, context)\n\n  if (Array.isArray(resolveDocumentLanguageFilter))\n    return [...prev, ...resolveDocumentLanguageFilter]\n\n  throw new Error(\n    `Expected \\`document.actions\\` to an array or a function but found ${typeof resolveDocumentLanguageFilter} instead.`\n  )\n}\n","import {isRecord} from '../util'\n\nexport interface ConfigPropertyErrorOptions {\n  propertyName: string\n  path: string[]\n  cause: unknown\n}\n\nexport class ConfigPropertyError extends Error {\n  propertyName: string\n  path: string[]\n  cause: unknown\n\n  constructor({propertyName, path, cause}: ConfigPropertyErrorOptions) {\n    const message =\n      isRecord(cause) && typeof cause?.message === 'string' ? `: ${cause.message}` : ''\n\n    super(\n      `An error occurred while resolving \\`${propertyName}\\` from ${path.join(' > ')}${message}`\n    )\n\n    this.propertyName = propertyName\n    this.cause = cause\n    this.path = path\n  }\n}\n","import {ConfigPropertyError} from './ConfigPropertyError'\nimport {PluginOptions, ConfigPropertyReducer, AsyncConfigPropertyReducer} from './types'\n\nconst flattenConfig = (\n  {plugins = [], ...currentConfig}: PluginOptions,\n  path: string[]\n): Array<{config: PluginOptions; path: string[]}> => {\n  return [\n    {config: currentConfig, path: [...path, currentConfig.name]},\n    ...plugins.flatMap((config) => flattenConfig(config, [...path, currentConfig.name])),\n  ]\n}\n\ninterface ResolveConfigPropertyOptions<TValue, TContext> {\n  propertyName: string\n  config: PluginOptions\n  context: TContext\n  initialValue: TValue\n  reducer: ConfigPropertyReducer<TValue, TContext>\n}\ninterface AsyncResolveConfigPropertyOptions<TValue, TContext> {\n  propertyName: string\n  config: PluginOptions\n  context: TContext\n  initialValue: TValue\n  asyncReducer: AsyncConfigPropertyReducer<TValue, TContext>\n}\n\nexport function resolveConfigProperty<TValue, TContext>(\n  options: ResolveConfigPropertyOptions<TValue, TContext>\n): TValue\nexport function resolveConfigProperty<TValue, TContext>(\n  options: AsyncResolveConfigPropertyOptions<TValue, TContext>\n): Promise<TValue>\nexport function resolveConfigProperty<TValue, TContext>({\n  config: inputConfig,\n  context,\n  initialValue,\n  propertyName,\n  ...reducers\n}:\n  | ResolveConfigPropertyOptions<TValue, TContext>\n  | AsyncResolveConfigPropertyOptions<TValue, TContext>): TValue | Promise<TValue> {\n  const configs = flattenConfig(inputConfig, [])\n\n  if ('reducer' in reducers) {\n    return configs.reduce((acc, {config, path}) => {\n      try {\n        return reducers.reducer(acc, config, context)\n      } catch (e) {\n        throw new ConfigPropertyError({\n          propertyName,\n          path: path,\n          cause: e,\n        })\n      }\n    }, initialValue)\n  }\n\n  const reducer = reducers.asyncReducer\n  return (async () => {\n    let current = initialValue\n    for (const {config, path} of configs) {\n      try {\n        current = await reducer(current, config, context)\n      } catch (e) {\n        throw new ConfigPropertyError({\n          propertyName,\n          path,\n          cause: e,\n        })\n      }\n    }\n    return current\n  })()\n}\n","import {isRecord} from '../util'\n\nexport interface ConfigResolutionErrorOptions {\n  name: string\n  type: string\n  causes: Array<ConfigResolutionError | Error | unknown>\n}\n\nexport class ConfigResolutionError extends Error {\n  name: string\n  type: string\n  causes: unknown[]\n\n  constructor({causes, name, type}: ConfigResolutionErrorOptions) {\n    const messages = causes\n      .filter(Boolean)\n      .map((cause) =>\n        isRecord(cause) && typeof cause?.message === 'string' ? cause.message : String(cause)\n      )\n\n    super(\n      `Could not resolve ${type}${name ? ` \\`${name}\\`` : ''}:\\n${messages\n        .map((message) => `\\t- ${message}`)\n        .join('\\n')}\\n\\n`\n    )\n\n    this.name = name\n    this.causes = causes\n    this.type = type\n  }\n}\n","import {Schema} from '@sanity/types'\n\n// TODO: consider removing this error in favor of the `ConfigResolutionError`\nexport class SchemaError extends Error {\n  constructor(public schema: Schema) {\n    super('SchemaError')\n  }\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {COLOR_HUES, hues} from '@sanity/color'\nimport {darken, lighten, hasBadContrast, readableColor} from 'color2k'\n\nfunction pseudoRandomNumber(seed: string) {\n  const hashCode = seed\n    .split('')\n    // eslint-disable-next-line no-bitwise\n    .reduce((prevHash, currVal) => ((prevHash << 5) - prevHash + currVal.charCodeAt(0)) | 0, 0)\n  return Math.abs((hashCode * 16807) % 2147483647) / 2147483647\n}\n\nconst SvgText = styled.text`\n  font-family: ${({theme}) => theme.sanity.fonts.heading.family};\n  font-weight: ${({theme}) => theme.sanity.fonts.heading.weights.bold};\n  font-size: 16px;\n  transform: translateY(1px);\n`\n\n/**\n * Creates an icon element based on the input title\n */\nexport function createDefaultIcon(title: string, subtitle: string) {\n  const rng1 = pseudoRandomNumber(`${title} ${subtitle}`)\n\n  const huesWithoutGray = COLOR_HUES.filter((hue) => hue !== 'gray')\n  const colorHue = huesWithoutGray[Math.floor(rng1 * huesWithoutGray.length)]\n  const possibleTints = ['300', '400', '500', '600', '700'] as const\n  const rng2 = pseudoRandomNumber(rng1.toString())\n  const tint = possibleTints[Math.floor(rng2 * possibleTints.length)]\n  const color = hues[colorHue][tint].hex\n\n  const letters = title\n    // split by whitespace\n    .split(/\\s/g)\n    // replace all non-word characters with empty string\n    .map((word) => word.replace(/\\\\W/g, ''))\n    // remove empty strings\n    .filter(Boolean)\n    // take the first two words\n    .slice(0, 2)\n    // grab the first letter and make it upper case\n    .map((i) => i.charAt(0).toUpperCase())\n\n  const darkened = darken(color, 0.4)\n  const lightened = lighten(color, 0.4)\n\n  /* eslint-disable no-negated-condition */\n  // eslint-disable-next-line no-nested-ternary\n  const textColor = !hasBadContrast(color, 'readable', darkened)\n    ? darkened\n    : !hasBadContrast(color, 'readable', lightened)\n    ? lightened\n    : readableColor(color)\n  /* eslint-enable no-negated-condition */\n\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\">\n      <rect width={32} height={32} rx={2} fill={color} />\n      <SvgText\n        x=\"50%\"\n        y=\"50%\"\n        textAnchor=\"middle\"\n        alignmentBaseline=\"middle\"\n        dominantBaseline=\"middle\"\n        fill={textColor}\n      >\n        {letters}\n      </SvgText>\n    </svg>\n  )\n}\n","import {map, mergeMap, startWith, switchMap} from 'rxjs/operators'\nimport {ReferenceFilterSearchOptions, ReferenceSchemaType} from '@sanity/types'\nimport {combineLatest, EMPTY, Observable, of} from 'rxjs'\nimport {SanityClient} from '@sanity/client'\nimport {DocumentPreviewStore, getPreviewPaths, prepareForPreview} from '../../../../preview'\nimport {createWeightedSearch} from '../../../../search'\nimport {getIdPair, CollatedHit, getDraftId, collate, isRecord} from '../../../../util'\nimport {ReferenceInfo, ReferenceSearchHit} from '../../../inputs/ReferenceInput/types'\n\nconst READABLE = {\n  available: true,\n  reason: 'READABLE',\n} as const\n\nconst PERMISSION_DENIED = {\n  available: false,\n  reason: 'PERMISSION_DENIED',\n} as const\n\nconst NOT_FOUND = {\n  available: false,\n  reason: 'NOT_FOUND',\n} as const\n\n/**\n * Takes an id and a reference schema type, returns metadata about it\n */\nexport function getReferenceInfo(\n  documentPreviewStore: DocumentPreviewStore,\n  id: string,\n  referenceType: ReferenceSchemaType\n): Observable<ReferenceInfo> {\n  const {publishedId, draftId} = getIdPair(id)\n\n  const pairAvailability$ = documentPreviewStore.unstable_observeDocumentPairAvailability({\n    _type: 'reference',\n    _ref: id,\n  })\n\n  return pairAvailability$.pipe(\n    switchMap((pairAvailability) => {\n      if (!pairAvailability.draft.available && !pairAvailability.published.available) {\n        // combine availability of draft + published\n        const availability =\n          pairAvailability.draft.reason === 'PERMISSION_DENIED' ||\n          pairAvailability.published.reason === 'PERMISSION_DENIED'\n            ? PERMISSION_DENIED\n            : NOT_FOUND\n\n        // short circuit, neither draft nor published is available so no point in trying to get preview\n        return of({\n          id,\n          type: undefined,\n          availability,\n          preview: {\n            draft: undefined,\n            published: undefined,\n          },\n        } as const)\n      }\n\n      const draftRef = {_type: 'reference', _ref: draftId}\n      const publishedRef = {_type: 'reference', _ref: publishedId}\n\n      const typeName$ = combineLatest([\n        documentPreviewStore.observeDocumentTypeFromId(draftId),\n        documentPreviewStore.observeDocumentTypeFromId(publishedId),\n      ]).pipe(\n        // assume draft + published are always same type\n        map(([draftTypeName, publishedTypeName]) => draftTypeName || publishedTypeName)\n      )\n\n      return typeName$.pipe(\n        switchMap((typeName) => {\n          if (!typeName) {\n            // we have already asserted that either the draft or the published document is readable, so\n            // if we get here we can't read the _type, so we're likely to be in an inconsistent state\n            // waiting for an update to reach the client. Since we're in the context of a reactive stream based on\n            // the _type we'll get it eventually\n            return EMPTY\n          }\n\n          // get schema type for the referenced document\n          const refSchemaType = referenceType.to.find((memberType) => memberType.name === typeName)!\n\n          if (!refSchemaType) {\n            return EMPTY\n          }\n\n          const previewPaths = [\n            ...(getPreviewPaths(refSchemaType?.preview) || []),\n            ['_updatedAt'],\n            ['_createdAt'],\n          ]\n\n          const draftPreview$ = documentPreviewStore.observePaths(draftRef, previewPaths).pipe(\n            map((result) =>\n              result\n                ? {\n                    _id: draftId,\n                    ...prepareForPreview(result, refSchemaType),\n                  }\n                : undefined\n            ),\n            startWith(undefined)\n          )\n\n          const publishedPreview$ = documentPreviewStore\n            .observePaths(publishedRef, previewPaths)\n            .pipe(\n              map((result) =>\n                result\n                  ? {\n                      _id: publishedId,\n                      ...prepareForPreview(result, refSchemaType),\n                    }\n                  : undefined\n              ),\n              startWith(undefined)\n            )\n\n          const value$ = combineLatest([draftPreview$, publishedPreview$]).pipe(\n            map(([draft, published]) => ({draft, published}))\n          )\n\n          return value$.pipe(\n            map((value): ReferenceInfo => {\n              const availability =\n                // eslint-disable-next-line no-nested-ternary\n                pairAvailability.draft.available || pairAvailability.published.available\n                  ? READABLE\n                  : pairAvailability.draft.reason === 'PERMISSION_DENIED' ||\n                    pairAvailability.published.reason === 'PERMISSION_DENIED'\n                  ? PERMISSION_DENIED\n                  : NOT_FOUND\n\n              return {\n                type: typeName,\n                id: publishedId,\n                availability,\n                preview: {\n                  draft: isRecord(value.draft) ? value.draft : undefined,\n                  published: isRecord(value.published) ? value.published : undefined,\n                },\n              }\n            })\n          )\n        })\n      )\n    })\n  )\n}\n\n/**\n * when we get a search result it may not include all [draft, published] id pairs for documents matching the\n * query. For example: searching for \"potato\" may yield a hit in the draft, but not the published (or vice versa)\n *\n * This method takes a list of collated search hits and returns an array of the missing \"counterpart\" ids\n */\nfunction getCounterpartIds(collatedHits: CollatedHit[]): string[] {\n  return collatedHits\n    .filter(\n      (collatedHit) =>\n        // we're interested in hits where either draft or published is missing\n        !collatedHit.draft || !collatedHit.published\n    )\n    .map((collatedHit) =>\n      // if we have the draft, return the published id or vice versa\n      collatedHit.draft ? collatedHit.id : getDraftId(collatedHit.id)\n    )\n}\n\nfunction getExistingCounterparts(client: SanityClient, ids: string[]) {\n  return ids.length === 0\n    ? of([])\n    : client.observable.fetch(`*[_id in $ids]._id`, {ids}, {tag: 'get-counterpart-ids'})\n}\n\nexport function referenceSearch(\n  client: SanityClient,\n  textTerm: string,\n  type: ReferenceSchemaType,\n  options: ReferenceFilterSearchOptions\n): Observable<ReferenceSearchHit[]> {\n  const searchWeighted = createWeightedSearch(type.to, client, options)\n  return searchWeighted(textTerm, {includeDrafts: true}).pipe(\n    map((results) => results.map((result) => result.hit)),\n    map(collate),\n    // pick the 100 best matches\n    map((collated) => collated.slice(0, 100)),\n    mergeMap((collated) => {\n      // Note: It might seem like this step is redundant, but it's here for a reason:\n      // The list of search hits returned from here will be passed as options to the reference input's autocomplete. When\n      // one of them gets selected by the user, it will then be passed as the argument to the `onChange` handler in the\n      // Reference Input. This handler will then look at the passed value to determine whether to make a link to a\n      // draft (using _strengthenOnPublish) or a published document.\n      //\n      // Without this step, in a case where both a draft and a published version exist but only the draft matches\n      // the search term, we'd end up making a reference with `_strengthenOnPublish: true`, when we instead should be\n      // making a normal reference to the published id\n      return getExistingCounterparts(client, getCounterpartIds(collated)).pipe(\n        map((existingCounterpartIds) => {\n          return collated.map((entry) => {\n            const draftId = getDraftId(entry.id)\n            return {\n              id: entry.id,\n              type: entry.type,\n              draft:\n                entry.draft || existingCounterpartIds.includes(draftId)\n                  ? {_id: draftId, _type: entry.type}\n                  : undefined,\n              published:\n                entry.published || existingCounterpartIds.includes(entry.id)\n                  ? {_id: entry.id, _type: entry.type}\n                  : undefined,\n            }\n          })\n        })\n      )\n    })\n  )\n}\n","export function isNonNullable<T>(value: T): value is NonNullable<T> {\n  return !(value === null || value === undefined)\n}\n","import {ErrorOutlineIcon, WarningOutlineIcon, InfoOutlineIcon} from '@sanity/icons'\nimport {Box, Card, CardProps, Flex} from '@sanity/ui'\nimport React from 'react'\nimport {Details} from './Details'\n\ninterface AlertProps extends Omit<CardProps, 'title'> {\n  title: React.ReactNode\n  status?: 'warning' | 'error' | 'info'\n}\n\nconst STATUS_TONES = {\n  warning: 'caution',\n  error: 'critical',\n  info: 'positive',\n} as const\n\nconst STATUS_ICONS = {\n  warning: <WarningOutlineIcon />,\n  error: <ErrorOutlineIcon />,\n  info: <InfoOutlineIcon />,\n}\n\nexport function AlertStrip(props: AlertProps & Omit<React.HTMLProps<HTMLDivElement>, 'ref'>) {\n  const {children, status = 'warning', title, ...rest} = props\n\n  return (\n    <Card radius={2} tone={STATUS_TONES[status]} {...rest} data-ui=\"Alert\">\n      <Flex padding={1}>\n        {children && (\n          <Box flex={1}>\n            <Details icon={STATUS_ICONS[status]} title={title}>\n              <Box marginLeft={3} marginTop={3}>\n                {children}\n              </Box>\n            </Details>\n          </Box>\n        )}\n      </Flex>\n    </Card>\n  )\n}\n","import {RefObject, useEffect} from 'react'\n\n// This is a modified version of https://usehooks.com/useOnClickOutside that can take multiple element refs\n// There is currently a bug in the `useClickOutside` hook from @sanity/ui that requires the refs to be passed as\n// actual HTML elements instead of mutable refs. This requires the consumer to store elements in component state\n// which adds quite a bit of cruft and isn't always feasible\nexport function useOnClickOutside(\n  refs: RefObject<HTMLElement>[],\n  handler: (event: Event) => void\n): void {\n  useEffect(() => {\n    const listener = (event: Event) => {\n      const target = event.target\n      if (target instanceof HTMLElement) {\n        if (refs.some((ref) => ref.current?.contains(target))) {\n          return\n        }\n        handler(event)\n      }\n    }\n    document.addEventListener('mousedown', listener)\n    document.addEventListener('touchstart', listener)\n    return () => {\n      document.removeEventListener('mousedown', listener)\n      document.removeEventListener('touchstart', listener)\n    }\n  }, [refs, handler])\n}\n","import {useCallback, useMemo} from 'react'\nimport {catchError, concatMap, map, startWith} from 'rxjs/operators'\nimport {concat, Observable, of, Subject} from 'rxjs'\nimport {useObservable} from 'react-rx'\nimport {usePrevious} from '../../hooks/usePrevious'\nimport {ReferenceInfo} from './types'\n\nconst noop = () => undefined\n\nconst INITIAL_LOADING_STATE: Loadable<ReferenceInfo> = {\n  isLoading: true,\n  result: undefined,\n  error: undefined,\n  retry: noop,\n}\n\nconst EMPTY_STATE: Loadable<any> = {\n  isLoading: false,\n  result: undefined,\n  error: undefined,\n  retry: noop,\n}\n\nexport type Loadable<T> =\n  | {isLoading: true; result: undefined; error: undefined; retry: () => void}\n  | {isLoading: false; result: T; error: undefined; retry: () => void}\n  | {isLoading: false; result: undefined; error: Error; retry: () => void}\n\ntype GetReferenceInfo = (id: string) => Observable<ReferenceInfo>\n\nexport function useReferenceInfo(\n  id: string | undefined,\n  getReferenceInfo: GetReferenceInfo\n): Loadable<ReferenceInfo> {\n  // NOTE: this is a small message queue to handle retries\n  const msgSubject = useMemo(() => new Subject<{type: 'retry'}>(), [])\n  const msg$ = useMemo(() => msgSubject.asObservable(), [msgSubject])\n\n  const retry = useCallback(() => {\n    msgSubject.next({type: 'retry'})\n  }, [msgSubject])\n\n  const stream$ = useMemo(\n    () =>\n      concat(of(null), msg$).pipe(\n        map(() => id),\n        concatMap((refId: string | undefined) =>\n          refId\n            ? getReferenceInfo(refId).pipe(\n                map((result) => {\n                  return {\n                    isLoading: false,\n                    result,\n                    error: undefined,\n                    retry,\n                  } as const\n                }),\n                startWith(INITIAL_LOADING_STATE),\n                catchError((err: Error) => {\n                  console.error(err)\n                  return of({isLoading: false, result: undefined, error: err, retry} as const)\n                })\n              )\n            : of(EMPTY_STATE)\n        )\n      ),\n    [getReferenceInfo, id, retry, msg$]\n  )\n\n  const referenceInfo = useObservable(stream$, INITIAL_LOADING_STATE)\n\n  // const referenceInfo = useMemoObservable(\n  //   () => stream$,\n  //   [retryAttempt, getReferenceInfo, id, retry],\n  //   INITIAL_LOADING_STATE\n  // )\n\n  // workaround for a \"bug\" with useMemoObservable that doesn't\n  // return the initial value upon resubscription\n  const previousId = usePrevious(id, id)\n  if (id && previousId !== id) {\n    return INITIAL_LOADING_STATE\n  }\n  return referenceInfo\n}\n","import React, {useEffect, useReducer} from 'react'\nimport formatDistanceToNow from 'date-fns/formatDistanceToNow'\n\nfunction useInterval(ms: number) {\n  const [tick, update] = useReducer((n) => n + 1, 0)\n\n  useEffect(() => {\n    const i = setInterval(update, ms)\n    return () => clearInterval(i)\n  }, [ms])\n  return tick\n}\n\nexport function TimeAgo({time}: {time: string}) {\n  useInterval(1000)\n  const timeSince = formatDistanceToNow(new Date(time))\n  return <span title={timeSince}>{timeSince} ago</span>\n}\n","import React, {ComponentType, ReactNode, useMemo} from 'react'\nimport {ObjectSchemaType} from '@sanity/types'\nimport {Box, Flex, Inline, Label, Text, Tooltip, useRootTheme} from '@sanity/ui'\nimport {AccessDeniedIcon, EditIcon, HelpCircleIcon, PublishIcon} from '@sanity/icons'\nimport {TextWithTone} from '../../../components/TextWithTone'\nimport {DocumentPreviewPresence} from '../../../presence'\nimport {DocumentAvailability} from '../../../preview'\nimport {RenderPreviewCallback} from '../../types'\nimport {PreviewLayoutKey} from '../../../components/previews'\nimport {useDocumentPresence} from '../../../datastores'\nimport {TimeAgo} from './utils/TimeAgo'\nimport {ReferenceInfo} from './types'\n\nfunction UnavailableMessage(props: {icon: ComponentType; children: ReactNode; title: ReactNode}) {\n  const Icon = props.icon\n  return (\n    <Flex padding={3}>\n      <Box>\n        <Text size={1}>\n          <Icon />\n        </Text>\n      </Box>\n      <Box flex={1} marginLeft={3}>\n        <Text size={1} weight=\"semibold\">\n          {props.title}\n        </Text>\n\n        <Box marginTop={3}>\n          <Text as=\"p\" muted size={1}>\n            {props.children}\n          </Text>\n        </Box>\n      </Box>\n    </Flex>\n  )\n}\n\n/**\n * Used to preview a referenced type\n * Takes the reference type as props\n */\nexport function ReferencePreview(props: {\n  availability: DocumentAvailability\n  id: string\n  preview: ReferenceInfo['preview']\n  refType: ObjectSchemaType\n  layout: PreviewLayoutKey\n  renderPreview: RenderPreviewCallback\n  showTypeLabel: boolean\n}) {\n  const {availability, id, layout, preview, refType, renderPreview, showTypeLabel} = props\n\n  const theme = useRootTheme()\n  const documentPresence = useDocumentPresence(id)\n\n  const notFound = availability.reason === 'NOT_FOUND'\n  const insufficientPermissions = availability.reason === 'PERMISSION_DENIED'\n\n  const previewId =\n    preview.draft?._id ||\n    preview.published?._id ||\n    // note: during publish of the referenced document we might have both a missing draft and a missing published version\n    // this happens because the preview system tries to optimistically re-fetch as soon as it sees a mutation, but\n    // when publishing, the draft is deleted, and therefore both the draft and the published may be missing for a brief\n    // moment before the published version appears. In this case, it's safe to fallback to the given id, which is always\n    // the published id\n    id\n\n  // Note: we can't pass the preview values as-is to the Preview-component here since it's a \"prepared\" value and the\n  // Preview component expects the \"raw\"/unprepared value. By passing only _id and _type we make sure the Preview-component\n  // resolve the preview value it needs (this is cached in the runtime, so not likely to cause any fetch overhead)\n  const previewStub = useMemo(\n    () => ({_id: previewId, _type: refType.name}),\n    [previewId, refType.name]\n  )\n\n  return (\n    <Flex align=\"center\">\n      {availability.available ? (\n        <Box flex={1}>\n          {renderPreview({\n            layout,\n            schemaType: refType,\n            value: previewStub,\n          })}\n        </Box>\n      ) : (\n        <Box flex={1}>\n          <Flex align=\"center\">\n            <Box flex={1} paddingY={2}>\n              <Text muted>Document unavailable</Text>\n            </Box>\n          </Flex>\n        </Box>\n      )}\n\n      <Box paddingLeft={3}>\n        <Inline space={3}>\n          {showTypeLabel && (\n            <Label size={1} muted>\n              {refType.title}\n            </Label>\n          )}\n\n          {insufficientPermissions || notFound ? (\n            <Box>\n              <Tooltip\n                portal\n                content={\n                  notFound ? (\n                    <UnavailableMessage title=\"Not found\" icon={HelpCircleIcon}>\n                      The referenced document does not exist\n                      <br />\n                      (id: <code>{id}</code>)\n                    </UnavailableMessage>\n                  ) : (\n                    <UnavailableMessage title=\"Insufficcient permissions\" icon={AccessDeniedIcon}>\n                      The referenced document could not be accessed due to insufficient permissions\n                    </UnavailableMessage>\n                  )\n                }\n              >\n                <TextWithTone tone=\"default\">\n                  <HelpCircleIcon />\n                </TextWithTone>\n              </Tooltip>\n            </Box>\n          ) : null}\n\n          {documentPresence && documentPresence.length > 0 && (\n            <DocumentPreviewPresence presence={documentPresence} />\n          )}\n\n          <Inline space={4}>\n            <Box>\n              <Tooltip\n                content={\n                  <Box padding={2}>\n                    <Text size={1}>\n                      {preview.published?._updatedAt ? (\n                        <>\n                          Published <TimeAgo time={preview.published._updatedAt} />\n                        </>\n                      ) : (\n                        <>Not published</>\n                      )}\n                    </Text>\n                  </Box>\n                }\n              >\n                <TextWithTone\n                  tone={theme.tone === 'default' ? 'positive' : 'default'}\n                  size={1}\n                  dimmed={!preview.published}\n                  muted={!preview.published}\n                >\n                  <PublishIcon />\n                </TextWithTone>\n              </Tooltip>\n            </Box>\n\n            <Box>\n              <Tooltip\n                content={\n                  <Box padding={2}>\n                    <Text size={1}>\n                      {preview.draft?._updatedAt ? (\n                        <>\n                          Edited <TimeAgo time={preview.draft._updatedAt} />\n                        </>\n                      ) : (\n                        <>No unpublished edits</>\n                      )}\n                    </Text>\n                  </Box>\n                }\n              >\n                <TextWithTone\n                  tone={theme.tone === 'default' ? 'caution' : 'default'}\n                  size={1}\n                  dimmed={!preview.draft}\n                  muted={!preview.draft}\n                >\n                  <EditIcon />\n                </TextWithTone>\n              </Tooltip>\n            </Box>\n          </Inline>\n        </Inline>\n      </Box>\n    </Flex>\n  )\n}\n","/* eslint-disable max-nested-callbacks */\n/* eslint-disable no-nested-ternary */\n\nimport React from 'react'\nimport {ReferenceSchemaType} from '@sanity/types'\nimport {Stack, Text, TextSkeleton} from '@sanity/ui'\nimport {Observable} from 'rxjs'\nimport {Alert} from '../../components/Alert'\nimport {RenderPreviewCallback} from '../../types'\nimport {ReferenceInfo} from './types'\nimport {useReferenceInfo} from './useReferenceInfo'\nimport {ReferencePreview} from './ReferencePreview'\n\n/**\n * Used to preview a referenced type\n * Takes the reference type as props\n */\nexport function OptionPreview(props: {\n  id: string\n  type: ReferenceSchemaType\n  getReferenceInfo: (id: string) => Observable<ReferenceInfo>\n  renderPreview: RenderPreviewCallback\n}) {\n  const {getReferenceInfo, id: documentId, renderPreview} = props\n  const {isLoading, result: referenceInfo, error} = useReferenceInfo(documentId, getReferenceInfo)\n\n  if (isLoading) {\n    return (\n      <Stack space={2} padding={1}>\n        <TextSkeleton style={{maxWidth: 320}} radius={1} animated />\n        <TextSkeleton style={{maxWidth: 200}} radius={1} size={1} animated />\n      </Stack>\n    )\n  }\n\n  if (error) {\n    return (\n      <Stack space={2} padding={1}>\n        <Alert title=\"Failed to load referenced document\">\n          <Text muted size={1}>\n            Error: {error.message}\n          </Text>\n        </Alert>\n      </Stack>\n    )\n  }\n\n  if (!referenceInfo) {\n    return null\n  }\n\n  if (referenceInfo.availability.reason === 'PERMISSION_DENIED') {\n    return (\n      <Stack space={2} padding={1}>\n        Insufficient permissions to view this document\n      </Stack>\n    )\n  }\n\n  const refType = props.type.to.find((toType) => toType.name === referenceInfo.type)\n\n  if (!refType) {\n    return (\n      <Stack space={2} padding={1}>\n        Search returned a type that's not valid for this reference: \"${referenceInfo.type}\"\n      </Stack>\n    )\n  }\n\n  return (\n    referenceInfo &&\n    refType && (\n      <ReferencePreview\n        availability={referenceInfo.availability}\n        id={referenceInfo.id}\n        layout=\"default\"\n        preview={referenceInfo.preview}\n        refType={refType}\n        renderPreview={renderPreview}\n        showTypeLabel={props.type.to.length > 1}\n      />\n    )\n  )\n}\n","import React from 'react'\nimport {Reference, ReferenceSchemaType} from '@sanity/types'\nimport {Box, Flex, Inline, Label, Stack} from '@sanity/ui'\nimport {RenderPreviewCallback} from '../../types'\nimport {SanityDefaultPreview} from '../../../preview'\nimport {ReferencePreview} from './ReferencePreview'\nimport {Loadable} from './useReferenceInfo'\nimport {ReferenceInfo} from './types'\n\nexport function PreviewReferenceValue(props: {\n  referenceInfo: Loadable<ReferenceInfo>\n  renderPreview: RenderPreviewCallback\n  type: ReferenceSchemaType\n  value: Reference\n}) {\n  const {referenceInfo, renderPreview, type, value} = props\n\n  if (referenceInfo.isLoading || referenceInfo.error) {\n    return <SanityDefaultPreview isPlaceholder />\n  }\n\n  const showTypeLabel = type.to.length > 1\n\n  if (referenceInfo.result?.availability.reason === 'NOT_FOUND' && value._strengthenOnPublish) {\n    const refType = type.to.find((toType) => toType.name === value?._strengthenOnPublish?.type)\n    if (!refType) {\n      return <div>Invalid reference type</div>\n    }\n    if (value._strengthenOnPublish) {\n      const stub = value._strengthenOnPublish?.type\n        ? {\n            _id: value._ref,\n            _type: value._strengthenOnPublish?.type,\n          }\n        : value\n\n      return (\n        <Flex align=\"center\">\n          <Box flex={1}>\n            {renderPreview({\n              layout: 'default',\n              schemaType: refType,\n              value: stub,\n            })}\n          </Box>\n          <Box>\n            <Inline space={4}>\n              {showTypeLabel && (\n                <Label size={1} muted>\n                  {refType.title}\n                </Label>\n              )}\n            </Inline>\n          </Box>\n        </Flex>\n      )\n    }\n  }\n\n  const refTypeName = referenceInfo.result?.type\n  const refType = type.to.find((toType) => toType.name === refTypeName)\n\n  if (!refType) {\n    return (\n      <Stack space={2} padding={2}>\n        The referenced document is of invalid type: ({refTypeName || 'unknown'})\n        <pre>{JSON.stringify(value, null, 2)}</pre>\n      </Stack>\n    )\n  }\n\n  return (\n    <ReferencePreview\n      availability={referenceInfo.result?.availability}\n      id={value._ref}\n      layout=\"default\"\n      preview={referenceInfo.result?.preview}\n      refType={refType}\n      renderPreview={renderPreview}\n      showTypeLabel={showTypeLabel}\n    />\n  )\n}\n","/* eslint-disable complexity */\n/* eslint-disable max-nested-callbacks,no-nested-ternary */\n\nimport React, {ComponentProps} from 'react'\nimport {AddIcon} from '@sanity/icons'\nimport {Box, Button, Menu, MenuButton, MenuItem, Tooltip} from '@sanity/ui'\nimport {InsufficientPermissionsMessage} from '../../../components/InsufficientPermissionsMessage'\nimport {CreateReferenceOption} from './types'\n\ninterface Props extends ComponentProps<typeof Button> {\n  id: string\n  createOptions: CreateReferenceOption[]\n  menuRef: React.RefObject<HTMLDivElement>\n  onCreate: (option: CreateReferenceOption) => void\n}\n\nfunction ConditionalTooltip(\n  props: ComponentProps<typeof Tooltip> & {enabled: boolean}\n): React.ReactElement {\n  const {enabled, ...rest} = props\n  return enabled ? <Tooltip {...rest} /> : <>{props.children}</>\n}\n\nconst INLINE_BLOCK_STYLE = {display: 'inline-flex'}\nconst FULL_WIDTH = {width: '100%'}\n\nexport function CreateButton(props: Props) {\n  const {createOptions, onCreate, id, ...rest} = props\n\n  const canCreateAny = createOptions.some((option) => option.permission.granted)\n  if (!canCreateAny) {\n    return (\n      <Tooltip\n        content={\n          <Box padding={2}>\n            <InsufficientPermissionsMessage operationLabel=\"create a new reference\" />\n          </Box>\n        }\n      >\n        {/* this wrapper div is needed because disabled button doesn't trigger mouse events */}\n        <div style={INLINE_BLOCK_STYLE}>\n          <Button text=\"Create new\" mode=\"ghost\" disabled icon={AddIcon} style={FULL_WIDTH} />\n        </div>\n      </Tooltip>\n    )\n  }\n\n  return createOptions.length > 1 ? (\n    <MenuButton\n      button={<Button {...rest} text=\"Create newâ€¦\" mode=\"ghost\" icon={AddIcon} />}\n      id={id}\n      menu={\n        <Menu ref={props.menuRef}>\n          {createOptions.map((createOption) => (\n            <ConditionalTooltip\n              enabled={!createOption.permission.granted}\n              key={createOption.id}\n              content={\n                <Box padding={2}>\n                  <InsufficientPermissionsMessage operationLabel=\"create this type of document\" />\n                </Box>\n              }\n              portal\n            >\n              {/* this wrapper div is needed because disabled button doesn't trigger mouse events */}\n              <div>\n                <MenuItem\n                  disabled={!createOption.permission.granted}\n                  icon={createOption.icon}\n                  text={createOption.title}\n                  onClick={() => onCreate(createOption)}\n                />\n              </div>\n            </ConditionalTooltip>\n          ))}\n        </Menu>\n      }\n      placement=\"right\"\n      popover={{portal: true, tone: 'default', constrainSize: true}}\n    />\n  ) : (\n    <Button\n      {...rest}\n      text=\"Create new\"\n      mode=\"ghost\"\n      disabled={!createOptions[0].permission.granted}\n      onClick={() => onCreate(createOptions[0])}\n      icon={AddIcon}\n    />\n  )\n}\n","import React, {forwardRef, useCallback} from 'react'\nimport {Autocomplete, Box, Flex, Popover, Text} from '@sanity/ui'\nimport styled from 'styled-components'\n\nconst StyledPopover = styled(Popover)`\n  & > div {\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n`\n\nconst StyledText = styled(Text)`\n  word-break: break-word;\n`\n\nexport const ReferenceAutocomplete = forwardRef(function ReferenceAutocomplete(\n  props: React.ComponentProps<typeof Autocomplete> & {\n    referenceElement: HTMLDivElement | null\n    searchString?: string\n    portalRef?: React.RefObject<HTMLDivElement>\n  },\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const hasResults = props.options && props.options.length > 0\n  const renderPopover = useCallback(\n    (\n      {\n        content,\n        hidden,\n        inputElement,\n        onMouseEnter,\n        onMouseLeave,\n      }: {\n        content: React.ReactElement | null\n        hidden: boolean\n        inputElement: HTMLInputElement | null\n        onMouseEnter: () => void\n        onMouseLeave: () => void\n      },\n      contentRef: React.Ref<HTMLDivElement>\n    ) => (\n      <StyledPopover\n        placement=\"bottom-start\"\n        arrow={false}\n        constrainSize\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n        content={\n          <div ref={contentRef}>\n            {hasResults ? (\n              content\n            ) : (\n              <Box padding={4}>\n                <Flex align=\"center\" height=\"fill\" justify=\"center\">\n                  <StyledText align=\"center\" muted>\n                    No results for <strong>â€œ{props.searchString}â€</strong>\n                    {props.searchString?.toLowerCase() === 'capybara' ? (\n                      <>. What a shame. There should be more Capybaras.</>\n                    ) : null}\n                  </StyledText>\n                </Flex>\n              </Box>\n            )}\n          </div>\n        }\n        open={!props.loading && !hidden}\n        ref={props.portalRef}\n        portal\n        referenceElement={props.referenceElement || inputElement}\n        matchReferenceWidth\n      />\n    ),\n    [hasResults, props.searchString, props.loading, props.portalRef, props.referenceElement]\n  )\n  return <Autocomplete {...props} ref={ref} renderPopover={renderPopover} />\n})\n","import {Grid, useElementRect} from '@sanity/ui'\nimport React, {ReactNode, ForwardedRef, forwardRef, useCallback, useState} from 'react'\nimport styled, {css} from 'styled-components'\n\nconst NARROW_LAYOUT = css`\n  grid-template-columns: minmax(0px, 1fr);\n`\n\nconst WIDE_LAYOUT = css`\n  grid-template-columns: 1fr min-content;\n`\n\nconst Root = styled(Grid)<{$narrow: boolean}>((props: {$narrow: boolean}) =>\n  props.$narrow ? NARROW_LAYOUT : WIDE_LAYOUT\n)\n\nexport const AutocompleteContainer = forwardRef(function AutocompleteContainer(\n  props: {\n    children: ReactNode\n  },\n  forwardedRef: ForwardedRef<HTMLDivElement>\n) {\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n\n  const handleNewRef = useCallback(\n    (element: HTMLDivElement) => {\n      // there's a bit of \"double bookkeeping\" here. since useElementRect needs to re-run whenever the ref updates,\n      // and thus we need to keep it in the state\n      setForwardedRef(forwardedRef, element)\n      setRootElement(element)\n    },\n    [forwardedRef]\n  )\n\n  const inputWrapperRect = useElementRect(rootElement)\n\n  return (\n    <Root ref={handleNewRef} gap={1} $narrow={(inputWrapperRect?.width || 0) < 480}>\n      {props.children}\n    </Root>\n  )\n})\n\nfunction setForwardedRef<T>(ref: ForwardedRef<T>, instance: T) {\n  if (typeof ref === 'function') {\n    ref(instance)\n  } else if (ref) {\n    ref.current = instance\n  }\n}\n","/* eslint-disable complexity */\n/* eslint-disable max-nested-callbacks,no-nested-ternary */\nimport React, {\n  ComponentProps,\n  ForwardedRef,\n  forwardRef,\n  useCallback,\n  useMemo,\n  useRef,\n  useState,\n} from 'react'\n// import {isValidationErrorMarker, Reference} from '@sanity/types'\nimport {\n  EllipsisVerticalIcon,\n  LaunchIcon as OpenInNewTabIcon,\n  ResetIcon as ClearIcon,\n  SyncIcon as ReplaceIcon,\n} from '@sanity/icons'\nimport {concat, Observable, of} from 'rxjs'\nimport {useId} from '@reach/auto-id'\nimport {catchError, distinctUntilChanged, filter, map, scan, switchMap, tap} from 'rxjs/operators'\nimport {\n  Box,\n  Button,\n  Card,\n  Flex,\n  Inline,\n  Menu,\n  MenuButton,\n  MenuDivider,\n  MenuItem,\n  Stack,\n  Text,\n  useForwardedRef,\n  useToast,\n} from '@sanity/ui'\nimport {useObservableCallback} from 'react-rx'\nimport {uuid} from '@sanity/uuid'\nimport styled from 'styled-components'\n// import {ChangeIndicatorForFieldPath, FormField, PreviewCard} from '../../../components'\nimport {ChangeIndicator} from '../../../components/changeIndicators'\nimport {PreviewCard} from '../../../components/PreviewCard'\nimport {set, setIfMissing, unset} from '../../patch'\nimport {EMPTY_ARRAY} from '../../utils/empty'\n// import {useDidUpdate} from '../../hooks/useDidUpdate'\nimport {isNonNullable} from '../../utils/isNonNullable'\nimport {AlertStrip} from '../../components/AlertStrip'\nimport {Alert} from '../../components/Alert'\nimport {useOnClickOutside} from '../../hooks/useOnClickOutside'\nimport {FIXME} from '../../types'\nimport {getPublishedId} from '../../../util'\nimport {IntentLink} from '../../../router'\nimport {ReferenceInputProps, CreateReferenceOption, ReferenceSearchState} from './types'\nimport {OptionPreview} from './OptionPreview'\nimport {useReferenceInfo} from './useReferenceInfo'\nimport {PreviewReferenceValue} from './PreviewReferenceValue'\nimport {CreateButton} from './CreateButton'\nimport {ReferenceAutocomplete} from './ReferenceAutocomplete'\nimport {AutocompleteContainer} from './AutocompleteContainer'\n\nconst StyledPreviewCard = styled(PreviewCard)`\n  /* this is a hack to avoid layout jumps while previews are loading\n  there's probably better ways of solving this */\n  min-height: 36px;\n`\n\nconst INITIAL_SEARCH_STATE: ReferenceSearchState = {\n  hits: [],\n  isLoading: false,\n}\n\nconst NO_FILTER = () => true\n\nfunction nonNullable<T>(v: T): v is NonNullable<T> {\n  return v !== null\n}\n\nconst REF_PATH = ['_ref']\nexport function ReferenceInput(props: ReferenceInputProps) {\n  const {\n    createOptions,\n    editReferenceLinkComponent: EditReferenceLink,\n    focusPath = EMPTY_ARRAY,\n    focused,\n    path,\n    getReferenceInfo,\n    liveEdit,\n    onChange,\n    onEditReference,\n    onSearch,\n    selectedState,\n    schemaType,\n    changed,\n    readOnly,\n    onFocusPath,\n    validation,\n    value,\n    renderPreview,\n    elementProps,\n  } = props\n\n  const [searchState, setSearchState] = useState<ReferenceSearchState>(INITIAL_SEARCH_STATE)\n\n  const handleCreateNew = useCallback(\n    (option: CreateReferenceOption) => {\n      const id = uuid()\n\n      const patches = [\n        setIfMissing({}),\n        set(schemaType.name, ['_type']),\n        set(id, ['_ref']),\n        set(true, ['_weak']),\n        set({type: option.type, weak: schemaType.weak, template: option.template}, [\n          '_strengthenOnPublish',\n        ]),\n      ].filter(isNonNullable)\n\n      onChange(patches)\n\n      onEditReference({id, type: option.type, template: option.template})\n      onFocusPath([])\n    },\n    [onChange, onEditReference, onFocusPath, schemaType]\n  )\n\n  const handleChange = useCallback(\n    (id: string) => {\n      if (!id) {\n        onChange(unset())\n        onFocusPath([])\n        return\n      }\n\n      const hit = searchState.hits.find((h) => h.id === id)\n\n      if (!hit) {\n        throw new Error('Selected an item that wasnt part of the result set')\n      }\n      // if there's no published version of this document, set the reference to weak\n\n      const patches = [\n        setIfMissing({}),\n        set(schemaType.name, ['_type']),\n        set(getPublishedId(id), ['_ref']),\n        hit.published && !schemaType.weak ? unset(['_weak']) : set(true, ['_weak']),\n        hit.published\n          ? unset(['_strengthenOnPublish'])\n          : set({type: hit?.type, weak: schemaType.weak}, ['_strengthenOnPublish']),\n      ].filter(isNonNullable)\n\n      onChange(patches)\n      onFocusPath([])\n    },\n    [searchState.hits, schemaType.name, schemaType.weak, onChange, onFocusPath]\n  )\n\n  const handleClear = useCallback(() => {\n    onChange(unset())\n  }, [onChange])\n\n  const handlePreviewKeyPress = useCallback(\n    (event) => {\n      if (event.key !== 'Enter' && event.key !== 'Space') {\n        // enable \"search for reference\"-mode\n        onFocusPath(['_ref'])\n      }\n    },\n    [onFocusPath]\n  )\n\n  const handleAutocompleteKeyDown = useCallback(\n    (event) => {\n      // escape\n      if (event.keyCode === 27) {\n        onFocusPath([])\n      }\n    },\n    [onFocusPath]\n  )\n\n  const getReferenceInfoMemo = useCallback(\n    (id) => getReferenceInfo(id, schemaType),\n    [getReferenceInfo, schemaType]\n  )\n\n  const loadableReferenceInfo = useReferenceInfo(value?._ref, getReferenceInfoMemo)\n\n  const refTypeName = loadableReferenceInfo.result?.type || value?._strengthenOnPublish?.type\n  const refType = refTypeName ? schemaType.to.find((toType) => toType.name === refTypeName) : null\n\n  const autocompletePopoverReferenceElementRef = useRef<HTMLDivElement | null>(null)\n\n  // --- focus handling\n  const hasFocusAtRef = focusPath.length === 1 && focusPath[0] === '_ref'\n  // todo: fixme\n  const forwardedRef = elementProps.ref\n  // useDidUpdate({hasFocusAt: hasFocusAtRef, ref: value?._ref}, (prev, current) => {\n  //   const refUpdated = prev?.ref !== current.ref\n  //   const focusAtUpdated = prev?.hasFocusAt !== current.hasFocusAt\n\n  //   if ((focusAtUpdated || refUpdated) && current.hasFocusAt) {\n  //     // if search mode changed and we're having focus always ensure the\n  //     // ref element gets focus\n  //     forwardedRef.current?.focus()\n  //   }\n  // })\n\n  const weakIs = value?._weak ? 'weak' : 'strong'\n  const weakShouldBe = schemaType.weak === true ? 'weak' : 'strong'\n\n  const hasRef = Boolean(value?._ref)\n\n  // If the reference value is marked with _strengthenOnPublish,\n  // we allow weak references if the reference points to a document that has a draft but not a published\n  // In all other cases we should display a \"weak mismatch\" warning\n  const weakWarningOverride =\n    hasRef && !loadableReferenceInfo.isLoading && value?._strengthenOnPublish\n\n  const handleFixStrengthMismatch = useCallback(() => {\n    onChange(schemaType.weak === true ? set(true, ['_weak']) : unset(['_weak']))\n  }, [onChange, schemaType])\n\n  const referenceExists = hasRef && loadableReferenceInfo.result?.preview?.published?._id\n\n  const handleRemoveStrengthenOnPublish = useCallback(() => {\n    onChange([\n      schemaType.weak === true ? set(true, ['_weak']) : unset(['_weak']),\n      unset(['_strengthenOnPublish']),\n    ])\n  }, [onChange, schemaType])\n\n  const {push} = useToast()\n\n  const errors = useMemo(() => validation.filter((item) => item.level === 'error'), [validation])\n\n  const pressed = selectedState === 'pressed'\n  const selected = selectedState === 'selected'\n\n  const handleQueryChange = useObservableCallback((inputValue$: Observable<string | null>) => {\n    return inputValue$.pipe(\n      filter(nonNullable),\n      distinctUntilChanged(),\n      switchMap((searchString) =>\n        concat(\n          of({isLoading: true}),\n          onSearch(searchString).pipe(\n            map((hits) => ({hits, searchString, isLoading: false})),\n            catchError((error) => {\n              push({\n                title: 'Reference search failed',\n                description: error.message,\n                status: 'error',\n                id: `reference-search-fail-${inputId}`,\n              })\n\n              console.error(error)\n              return of({hits: []})\n            })\n          )\n        )\n      ),\n\n      scan(\n        (prevState, nextState): ReferenceSearchState => ({...prevState, ...nextState}),\n        INITIAL_SEARCH_STATE\n      ),\n\n      tap(setSearchState)\n    )\n  }, [])\n\n  const handleAutocompleteOpenButtonClick = useCallback(() => {\n    handleQueryChange('')\n  }, [handleQueryChange])\n\n  const showWeakRefMismatch =\n    !loadableReferenceInfo.isLoading && hasRef && weakIs !== weakShouldBe && !weakWarningOverride\n\n  const inputId = useId()\n\n  const handleCreateButtonKeyDown = useCallback(\n    (e) => {\n      if (e.key === 'Escape') {\n        forwardedRef?.current?.focus()\n      }\n    },\n    [forwardedRef]\n  )\n\n  const renderOption = useCallback(\n    (option) => {\n      const id = option.hit.draft?._id || option.hit.published?._id\n\n      return (\n        <StyledPreviewCard forwardedAs=\"button\" type=\"button\" radius={2} tone=\"inherit\">\n          <Box paddingX={3} paddingY={1}>\n            <OptionPreview\n              getReferenceInfo={getReferenceInfoMemo}\n              id={id}\n              renderPreview={renderPreview}\n              type={schemaType}\n            />\n          </Box>\n        </StyledPreviewCard>\n      )\n    },\n    [schemaType, getReferenceInfoMemo, renderPreview]\n  )\n\n  const OpenLink = useMemo(\n    () =>\n      // eslint-disable-next-line @typescript-eslint/no-shadow\n      forwardRef(function OpenLink(\n        restProps: ComponentProps<typeof IntentLink>,\n        _ref: ForwardedRef<HTMLAnchorElement>\n      ) {\n        const template = (value?._strengthenOnPublish || {}).template\n        return (\n          <IntentLink\n            {...restProps}\n            intent=\"edit\"\n            params={[\n              {id: value?._ref, type: refType?.name, template: template?.id},\n              {params: template?.params},\n            ]}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            ref={_ref}\n          />\n        )\n      }),\n    [refType?.name, value?._ref, value?._strengthenOnPublish]\n  )\n\n  const preview =\n    loadableReferenceInfo.result?.preview.draft || loadableReferenceInfo.result?.preview.published\n\n  const isWeakRefToNonexistent =\n    loadableReferenceInfo?.result?.availability?.reason === 'NOT_FOUND' &&\n    !value?._strengthenOnPublish &&\n    value?._weak\n\n  const isEditing = hasFocusAtRef || !value?._ref\n\n  // --- click outside handling\n  const clickOutsideBoundaryRef = useRef<HTMLDivElement | null>(null)\n  const autocompletePortalRef = useRef<HTMLDivElement | null>(null)\n  const createButtonMenuPortalRef = useRef<HTMLDivElement | null>(null)\n  useOnClickOutside(\n    [clickOutsideBoundaryRef, autocompletePortalRef, createButtonMenuPortalRef],\n    () => {\n      if (hasFocusAtRef) {\n        onFocusPath([])\n      }\n    }\n  )\n\n  const handleReplaceClick = useCallback(() => {\n    onFocusPath(['_ref'])\n  }, [onFocusPath])\n\n  return (\n    <Stack\n      space={1}\n      // marginY={isEditing ? 2 : 0}\n    >\n      {isEditing || isWeakRefToNonexistent ? (\n        <Stack space={2} ref={clickOutsideBoundaryRef}>\n          {isWeakRefToNonexistent ? (\n            <Alert\n              data-testid=\"alert-nonexistent-document\"\n              title=\"Nonexistent document reference\"\n              suffix={\n                <Stack padding={2}>\n                  <Button text=\"Clear\" onClick={handleClear} />\n                </Stack>\n              }\n            >\n              <Text size={1}>\n                This field is currently referencing a document that doesn't exist (ID:\n                <code>{value._ref}</code>). You can either remove the reference or replace it with\n                another document.\n              </Text>\n            </Alert>\n          ) : null}\n          <ChangeIndicator path={REF_PATH} hasFocus={!!focused} isChanged={changed}>\n            <AutocompleteContainer ref={autocompletePopoverReferenceElementRef}>\n              <ReferenceAutocomplete\n                {...elementProps}\n                data-testid=\"autocomplete\"\n                loading={searchState.isLoading}\n                referenceElement={autocompletePopoverReferenceElementRef.current}\n                portalRef={autocompletePortalRef}\n                options={searchState.hits.map((hit) => ({\n                  value: hit.id,\n                  hit: hit,\n                }))}\n                radius={1}\n                placeholder=\"Type to search\"\n                onKeyDown={handleAutocompleteKeyDown}\n                readOnly={readOnly}\n                disabled={loadableReferenceInfo.isLoading}\n                onQueryChange={handleQueryChange}\n                searchString={searchState.searchString}\n                onChange={handleChange}\n                filterOption={NO_FILTER}\n                renderOption={renderOption}\n                openButton={{onClick: handleAutocompleteOpenButtonClick}}\n              />\n\n              {!readOnly && createOptions.length > 0 && (\n                <CreateButton\n                  id={`${inputId}-selectTypeMenuButton`}\n                  createOptions={createOptions}\n                  onCreate={handleCreateNew}\n                  onKeyDown={handleCreateButtonKeyDown}\n                  menuRef={createButtonMenuPortalRef}\n                />\n              )}\n            </AutocompleteContainer>\n          </ChangeIndicator>\n        </Stack>\n      ) : (\n        <ChangeIndicator path={path} hasFocus={!!focused} isChanged={changed}>\n          <Card\n            border\n            radius={1}\n            tone={\n              readOnly\n                ? 'transparent'\n                : loadableReferenceInfo.error || errors.length > 0\n                ? 'critical'\n                : 'inherit'\n            }\n          >\n            <Flex align=\"center\" padding={1}>\n              <StyledPreviewCard\n                {...elementProps}\n                __unstable_focusRing\n                forwardedAs={EditReferenceLink as FIXME} // @todo: fix typing\n                data-as=\"a\"\n                data-pressed={pressed ? true : undefined}\n                data-selected={selected ? true : undefined}\n                documentId={value?._ref}\n                documentType={refType?.name}\n                flex={1}\n                onKeyPress={handlePreviewKeyPress}\n                padding={1}\n                paddingRight={3}\n                pressed={pressed}\n                radius={2}\n                selected={selected}\n                tabIndex={0}\n                tone={selected ? 'default' : 'inherit'}\n              >\n                <PreviewReferenceValue\n                  referenceInfo={loadableReferenceInfo}\n                  renderPreview={renderPreview}\n                  type={schemaType}\n                  value={value}\n                />\n              </StyledPreviewCard>\n              <Inline paddingX={1}>\n                <MenuButton\n                  button={<Button padding={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n                  id={`${inputId}-menuButton`}\n                  menu={\n                    <Menu>\n                      {!readOnly && (\n                        <>\n                          <MenuItem\n                            text=\"Clear\"\n                            tone=\"critical\"\n                            icon={ClearIcon}\n                            onClick={handleClear}\n                          />\n\n                          <MenuItem\n                            text=\"Replace\"\n                            icon={ReplaceIcon}\n                            onClick={handleReplaceClick}\n                          />\n\n                          <MenuDivider />\n                        </>\n                      )}\n\n                      <MenuItem\n                        as={OpenLink}\n                        data-as=\"a\"\n                        text=\"Open in new tab\"\n                        icon={OpenInNewTabIcon}\n                      />\n                    </Menu>\n                  }\n                  placement=\"right\"\n                  popover={{portal: true, tone: 'default'}}\n                />\n              </Inline>\n            </Flex>\n            {liveEdit && referenceExists && value._strengthenOnPublish && (\n              <AlertStrip\n                padding={1}\n                title={schemaType.weak ? 'Finalize reference' : 'Convert to strong reference'}\n                status=\"info\"\n                data-testid=\"alert-reference-published\"\n              >\n                <Stack space={3}>\n                  <Text as=\"p\" muted size={1}>\n                    <strong>{loadableReferenceInfo.result?.preview.published?.title}</strong> is\n                    published and this reference should now be{' '}\n                    {schemaType.weak ? <>finalized</> : <>converted to a strong reference</>}.\n                  </Text>\n                  <Button\n                    onClick={handleRemoveStrengthenOnPublish}\n                    text={<>Convert to strong reference</>}\n                    tone=\"positive\"\n                  />\n                </Stack>\n              </AlertStrip>\n            )}\n\n            {showWeakRefMismatch && (\n              <AlertStrip\n                padding={1}\n                title=\"Reference strength mismatch\"\n                status=\"warning\"\n                data-testid=\"alert-reference-strength-mismatch\"\n              >\n                <Stack space={3}>\n                  <Text as=\"p\" muted size={1}>\n                    This reference is <em>{weakIs}</em>, but according to the current schema it\n                    should be <em>{weakShouldBe}.</em>\n                  </Text>\n\n                  <Text as=\"p\" muted size={1}>\n                    {schemaType.weak ? (\n                      <>\n                        It will not be possible to delete the \"{preview?.title}\"-document without\n                        first removing this reference.\n                      </>\n                    ) : (\n                      <>\n                        This makes it possible to delete the \"{preview?.title}\"-document without\n                        first deleting this reference, leaving this field referencing a nonexisting\n                        document.\n                      </>\n                    )}\n                  </Text>\n                  <Button\n                    onClick={handleFixStrengthMismatch}\n                    text={<>Convert to {weakShouldBe} reference</>}\n                    tone=\"caution\"\n                  />\n                </Stack>\n              </AlertStrip>\n            )}\n\n            {loadableReferenceInfo.error && (\n              <AlertStrip\n                padding={1}\n                title=\"Unable to load reference metadata\"\n                status=\"warning\"\n                data-testid=\"alert-reference-info-failed\"\n              >\n                <Stack space={3}>\n                  <Text as=\"p\" muted size={1}>\n                    Error: {loadableReferenceInfo.error.message}\n                  </Text>\n                  <Button onClick={loadableReferenceInfo.retry!} text={<>Retry</>} tone=\"primary\" />\n                </Stack>\n              </AlertStrip>\n            )}\n          </Card>\n        </ChangeIndicator>\n      )}\n    </Stack>\n  )\n}\n","import {\n  Path,\n  Reference,\n  ReferenceFilterSearchOptions,\n  ReferenceOptions,\n  ReferenceSchemaType,\n  SanityDocument,\n} from '@sanity/types'\nimport * as PathUtils from '@sanity/util/paths'\nimport {get} from '@sanity/util/paths'\nimport React, {ComponentProps, ForwardedRef, forwardRef, useCallback, useMemo, useRef} from 'react'\nimport {from, throwError} from 'rxjs'\nimport {catchError, mergeMap} from 'rxjs/operators'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../studioClient'\nimport {isNonNullable} from '../../../../util'\nimport * as adapter from '../client-adapters/reference'\nimport {ReferenceInput} from '../../../inputs/ReferenceInput/ReferenceInput'\nimport {CreateReferenceOption, EditReferenceEvent} from '../../../inputs/ReferenceInput/types'\nimport {useDocumentPreviewStore} from '../../../../datastores'\nimport {useClient, useSchema} from '../../../../hooks'\nimport {useReferenceInputOptions} from '../../contexts'\nimport {FIXME, ObjectInputProps} from '../../../types'\nimport {useFormValue} from '../../../useFormValue'\n\n// eslint-disable-next-line require-await\nasync function resolveUserDefinedFilter(\n  options: ReferenceOptions | undefined,\n  document: SanityDocument,\n  valuePath: Path\n): Promise<ReferenceFilterSearchOptions> {\n  if (!options) {\n    return {}\n  }\n\n  if (typeof options.filter === 'function') {\n    const parentPath = valuePath.slice(0, -1)\n    const parent = get(document, parentPath) as Record<string, unknown>\n    return options.filter({document, parentPath, parent})\n  }\n\n  return {\n    filter: options.filter,\n    params: 'filterParams' in options ? options.filterParams : undefined,\n  }\n}\n\nexport type StudioReferenceInputProps = ObjectInputProps<Reference, ReferenceSchemaType>\n\nfunction useValueRef<T>(value: T): {current: T} {\n  const ref = useRef(value)\n  ref.current = value\n  return ref\n}\n\ntype SearchError = {\n  message: string\n  details?: {\n    type: string\n    description: string\n  }\n}\n\nexport function StudioReferenceInput(props: StudioReferenceInputProps) {\n  const searchClient = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const schema = useSchema()\n  const documentPreviewStore = useDocumentPreviewStore()\n  const {path, schemaType} = props\n  const {EditReferenceLinkComponent, onEditReference, activePath, initialValueTemplateItems} =\n    useReferenceInputOptions()\n\n  const documentValue = useFormValue([]) as FIXME\n  const documentRef = useValueRef(documentValue)\n  const documentTypeName = documentRef.current?._type\n  const refType = schema.get(documentTypeName)\n\n  const isDocumentLiveEdit = useMemo(() => refType?.liveEdit, [refType])\n\n  const disableNew = schemaType.options?.disableNew === true\n\n  const handleSearch = useCallback(\n    (searchString: string) =>\n      from(resolveUserDefinedFilter(schemaType.options, documentRef.current, path)).pipe(\n        mergeMap(({filter, params}) =>\n          adapter.referenceSearch(searchClient, searchString, schemaType, {\n            ...schemaType.options,\n            filter,\n            params,\n            tag: 'search.reference',\n          })\n        ),\n\n        catchError((err: SearchError) => {\n          const isQueryError = err.details && err.details.type === 'queryParseError'\n          if (schemaType.options?.filter && isQueryError) {\n            err.message = `Invalid reference filter, please check the custom \"filter\" option`\n          }\n          return throwError(err)\n        })\n      ),\n\n    [documentRef, path, searchClient, schemaType]\n  )\n\n  const template = props.value?._strengthenOnPublish?.template\n  const EditReferenceLink = useMemo(\n    () =>\n      forwardRef(function EditReferenceLink_(\n        _props: ComponentProps<NonNullable<typeof EditReferenceLinkComponent>>,\n        forwardedRef: ForwardedRef<'a'>\n      ) {\n        return EditReferenceLinkComponent ? (\n          <EditReferenceLinkComponent\n            {..._props}\n            ref={forwardedRef}\n            parentRefPath={path}\n            template={template}\n          />\n        ) : null\n      }),\n    [EditReferenceLinkComponent, path, template]\n  )\n\n  const handleEditReference = useCallback(\n    (event: EditReferenceEvent) => {\n      onEditReference?.({\n        parentRefPath: path,\n        id: event.id,\n        type: event.type,\n        template: event.template,\n      })\n    },\n    [onEditReference, path]\n  )\n\n  const selectedState = PathUtils.startsWith(path, activePath?.path || [])\n    ? activePath?.state\n    : 'none'\n\n  const createOptions = useMemo(() => {\n    if (disableNew) {\n      return []\n    }\n    return (\n      (initialValueTemplateItems || [])\n        // eslint-disable-next-line max-nested-callbacks\n        .filter((i) => {\n          return schemaType.to.some((_refType) => {\n            return _refType.name === i.template?.schemaType\n          })\n        })\n        .map((item): CreateReferenceOption | undefined =>\n          item.template?.schemaType\n            ? {\n                id: item.id,\n                title:\n                  item.title || `${item.template.schemaType} from template ${item.template?.id}`,\n                type: item.template.schemaType,\n                icon: item.icon,\n                template: {\n                  id: item.template?.id,\n                  params: item.parameters,\n                },\n\n                permission: {granted: item.granted, reason: item.reason},\n              }\n            : undefined\n        )\n        .filter(isNonNullable)\n    )\n  }, [disableNew, initialValueTemplateItems, schemaType.to])\n\n  const getReferenceInfo = useCallback(\n    (id, _type) => adapter.getReferenceInfo(documentPreviewStore, id, _type),\n    [documentPreviewStore]\n  )\n\n  return (\n    <ReferenceInput\n      {...props}\n      onSearch={handleSearch}\n      liveEdit={isDocumentLiveEdit}\n      getReferenceInfo={getReferenceInfo}\n      selectedState={selectedState}\n      editReferenceLinkComponent={EditReferenceLink}\n      createOptions={createOptions}\n      onEditReference={handleEditReference}\n    />\n  )\n}\n","import {ReferenceSchemaType} from '@sanity/types'\nimport {once} from 'lodash'\nimport {StudioReferenceInput} from '../inputs/reference/StudioReferenceInput'\n\n/* eslint-disable no-console */\nconst warnInputTypeNotSupported = once(() =>\n  console.warn('The option \"inputType\" on references is removed.')\n)\nconst warnSearchableOptionNotSupported = once(() =>\n  console.warn('The option \"searchable\" on references has been removed.')\n)\n\n/* eslint-enable no-console */\n\nexport function resolveReferenceInput(type: ReferenceSchemaType) {\n  const options = type.options || {}\n  if ('inputType' in options) {\n    warnInputTypeNotSupported()\n  }\n  if ('searchable' in options) {\n    warnSearchableOptionNotSupported()\n  }\n  return StudioReferenceInput\n}\n","import React from 'react'\nimport type {SortableContainerProps} from 'react-sortable-hoc'\nimport {SortableContainer, SortableElement, SortableHandle} from 'react-sortable-hoc'\nimport {FIXME} from '../../../types'\n\nexport const MOVING_ITEM_CLASS_NAME = 'moving'\nexport const DRAG_HANDLE_ATTRIBUTE = 'data-drag-handle'\n\n// higher order components to make a sortable list/item components\ntype ExposedSortableProps = {\n  onSortStart?: () => void\n  onSortEnd?: (event: {newIndex: number; oldIndex: number}) => void\n}\n\nexport function sortableHandle<Props>(\n  Component: React.ComponentType<Props>\n): React.ComponentType<Props> {\n  return SortableHandle(Component)\n}\n\n// Wrapper to avoid accidental leaking of react-sortable-hoc props\nexport function sortableItem<Props>(\n  Component: React.ComponentType<Props>\n): React.ComponentType<Props & {index: number}> {\n  return SortableElement(Component)\n}\n\n// Wrapper to avoid accidental leaking of react-sortable-hoc props\nfunction sortableContainer<Props>(\n  Component: React.ComponentType<Props>,\n  options: SortableContainerProps\n) {\n  const Container = SortableContainer(\n    React.forwardRef(function Sortable(\n      props: Props & ExposedSortableProps,\n      forwardedRef: React.ForwardedRef<React.ComponentType<Props>>\n    ) {\n      return <Component {...props} ref={forwardedRef} />\n    })\n  ) as FIXME as React.ComponentType<SortableContainerProps> // there are some wonky typings from react-sortable-hoc\n\n  return React.forwardRef(function SortableList(\n    props: Props & ExposedSortableProps,\n    ref: React.ForwardedRef<React.ComponentType<Props>>\n  ) {\n    return <Container {...props} {...options} ref={ref} />\n  })\n}\n\nconst KeyCode = {\n  Space: 32,\n  Enter: 13,\n  Esc: 27,\n  Up: 38,\n  Left: 37,\n  Right: 39,\n  Down: 40,\n}\n\nconst KEYCODES = {\n  lift: [KeyCode.Space, KeyCode.Enter],\n  drop: [KeyCode.Space, KeyCode.Enter],\n  cancel: [KeyCode.Esc],\n  up: [KeyCode.Left, KeyCode.Up],\n  down: [KeyCode.Right, KeyCode.Down],\n}\n\nexport function sortableGrid<Props>(Component: React.ComponentType<Props>) {\n  return sortableContainer(Component, {\n    helperClass: MOVING_ITEM_CLASS_NAME,\n    keyCodes: KEYCODES,\n    axis: 'xy',\n    lockAxis: 'xy',\n    useDragHandle: true,\n    shouldCancelStart,\n  })\n}\n\nexport function sortableList<Props>(Component: React.ComponentType<Props>) {\n  return sortableContainer(Component, {\n    helperClass: MOVING_ITEM_CLASS_NAME,\n    keyCodes: KEYCODES,\n    axis: 'y',\n    lockAxis: 'y',\n    useDragHandle: true,\n    shouldCancelStart,\n  })\n}\n\n// Cancel sorting if the event target is not drag handle\nfunction shouldCancelStart(event: React.UIEvent<HTMLElement>) {\n  return !isDragHandle(event.target as HTMLElement)\n}\n\nfunction isDragHandle(element: HTMLElement) {\n  return element.matches(`[${DRAG_HANDLE_ATTRIBUTE}=\"true\"],[${DRAG_HANDLE_ATTRIBUTE}=\"true\"] *`)\n}\n","import {Card, Grid, Theme} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\nimport {MOVING_ITEM_CLASS_NAME, sortableGrid, sortableItem, sortableList} from './sortable'\n\nconst ListItem = styled(Card)`\n  &.${MOVING_ITEM_CLASS_NAME} {\n    z-index: 10000;\n    border-radius: ${({theme}) => theme.sanity.radius[2]}px;\n    box-shadow: 0 0 0 0, 0 8px 17px 2px var(--card-shadow-umbra-color),\n      0 3px 14px 2px var(--card-shadow-penumbra-color),\n      0 5px 5px -3px var(--card-shadow-ambient-color);\n\n    // Used inside CellItem\n    [data-ui='DragHandleCard'] {\n      opacity: 1;\n    }\n\n    [data-ui='DragHandleButton'] {\n      background-color: ${({theme}: {theme: Theme}) =>\n        theme.sanity.color.button.bleed.primary.pressed.bg};\n      color: ${({theme}: {theme: Theme}) => theme.sanity.color.button.bleed.primary.pressed.fg};\n      [data-ui='Text'] {\n        color: inherit;\n      }\n    }\n  }\n`\nconst GridItem = ListItem\n\nconst SortableList = sortableList(Grid)\nconst SortableListItem = sortableItem(ListItem)\n\nconst SortableGrid = sortableGrid(Grid)\nconst SortableGridItem = SortableListItem\n\ntype ListProps = {\n  isSortable?: boolean\n  isGrid?: boolean\n  onSortEnd?: (event: {newIndex: number; oldIndex: number}) => void\n  children?: React.ReactNode\n  tabIndex?: number\n}\n\nexport function List(props: ListProps) {\n  const {isSortable, isGrid, onSortEnd, ...rest} = props\n\n  if (isGrid) {\n    return isSortable ? (\n      <SortableGrid columns={[2, 3, 4]} gap={3} onSortEnd={onSortEnd} {...rest} />\n    ) : (\n      <Grid columns={[2, 3, 4]} gap={3} {...rest} />\n    )\n  }\n\n  return isSortable ? (\n    <SortableList gap={1} onSortEnd={onSortEnd} {...rest} />\n  ) : (\n    <Grid gap={1} {...rest} />\n  )\n}\n\ntype ItemProps = {isSortable?: boolean; isGrid?: boolean; children?: React.ReactNode; index: number}\n\nexport function Item(props: ItemProps) {\n  const {isSortable, isGrid, ...rest} = props\n  if (isGrid) {\n    const ItemComponent = isSortable ? SortableGridItem : GridItem\n    return <ItemComponent {...rest} />\n  }\n  const ItemComponent = isSortable ? SortableListItem : ListItem\n  return <ItemComponent {...rest} />\n}\n","export function isLegacyOptionsItem(item: any) {\n  if (item && typeof item === 'object') {\n    const keys = Object.keys(item)\n    if (keys.length <= 2 && 'value' in item) {\n      return true\n    }\n  }\n  return false\n}\n\nexport function resolveValueWithLegacyOptionsSupport(item: any) {\n  return isLegacyOptionsItem(item) ? item.value : item\n}\n","import React from 'react'\nimport {get, startCase} from 'lodash'\nimport {Box, Checkbox, Flex, Text} from '@sanity/ui'\nimport {resolveTypeName} from '@sanity/util/content'\nimport {set, unset} from '../../../patch'\nimport {ArrayOfPrimitivesInputProps, FIXME} from '../../../types'\nimport {ItemWithMissingType} from '../ArrayOfObjectsInput/item/ItemWithMissingType'\nimport {Item, List} from '../common/list'\nimport {isLegacyOptionsItem, resolveValueWithLegacyOptionsSupport} from './legacyOptionsSupport'\n\nfunction isEqual(item: any, otherItem: any): boolean {\n  if (isLegacyOptionsItem(item) || isLegacyOptionsItem(otherItem)) {\n    return item.value === otherItem.value\n  }\n  if (item === otherItem) {\n    return true\n  }\n  if (typeof item !== typeof otherItem) {\n    return false\n  }\n  if (typeof item !== 'object' && !Array.isArray(item)) {\n    return item === otherItem\n  }\n  if (item._key && item._key === otherItem._key) {\n    return true\n  }\n  if (Array.isArray(item)) {\n    if (!item.length !== otherItem.length) {\n      return false\n    }\n    return item.every((it, i) => isEqual(item[i], otherItem[i]))\n  }\n  const keys = Object.keys(item)\n  const otherKeys = Object.keys(item)\n  if (keys.length !== otherKeys.length) {\n    return false\n  }\n  return keys.every((keyName) => isEqual(item[keyName], otherItem[keyName]))\n}\n\nfunction inArray(array: unknown[], candidate: unknown) {\n  return array ? array.some((item) => isEqual(item, candidate)) : false\n}\n\ntype OptionsArrayInputProps = ArrayOfPrimitivesInputProps\n\nexport class OptionsArrayInput extends React.PureComponent<OptionsArrayInputProps> {\n  _element: HTMLElement | null = null\n\n  handleChange = (isChecked: boolean, optionValue: any) => {\n    const {schemaType, value = []} = this.props\n    const list = get(schemaType.options, 'list') as FIXME[]\n    if (!isChecked && optionValue._key) {\n      // This is an optimization that only works if list items are _keyed\n      this.props.onChange(unset([{_key: optionValue._key}]))\n    }\n    const nextValue = list\n      .filter((item) =>\n        isEqual(optionValue, item)\n          ? isChecked\n          : inArray(value, resolveValueWithLegacyOptionsSupport(item))\n      )\n      .map(resolveValueWithLegacyOptionsSupport)\n    this.props.onChange(nextValue.length > 0 ? set(nextValue) : unset())\n  }\n\n  getMemberTypeOfItem(option: any) {\n    const {schemaType} = this.props\n    return schemaType.of.find(\n      (memberType) =>\n        memberType.name === resolveTypeName(resolveValueWithLegacyOptionsSupport(option))\n    )\n  }\n\n  setElement = (el: HTMLElement | null) => {\n    this._element = el\n  }\n\n  focus() {\n    if (this._element) {\n      this._element.focus()\n    }\n  }\n\n  handleFocus = (index: number) => {\n    const {onFocusIndex} = this.props\n    onFocusIndex(index)\n  }\n\n  render() {\n    const {renderPreview, schemaType, value, readOnly, elementProps} = this.props\n    const options: any[] = schemaType.options?.list || []\n\n    // note: direction was never documented and makes more sense to use \"grid\" for it too\n    const isGrid =\n      schemaType.options?.direction === 'horizontal' || schemaType.options?.layout === 'grid'\n\n    return (\n      <List isGrid={isGrid} tabIndex={0} {...elementProps}>\n        {options.map((option, index) => {\n          const optionType = this.getMemberTypeOfItem(option)\n          const checked = inArray(value || [], resolveValueWithLegacyOptionsSupport(option))\n          const disabled = !optionType\n          const title = option?.title || startCase(option?.value) || option\n\n          return (\n            <Item index={index} isGrid={isGrid} key={index}>\n              <Flex align=\"center\" as=\"label\" muted={disabled}>\n                <WrappedCheckbox\n                  disabled={disabled}\n                  checked={checked}\n                  onChange={(e) => this.handleChange(e.currentTarget.checked, option)}\n                  onFocus={() => this.handleFocus(index)}\n                  readOnly={readOnly}\n                />\n\n                {optionType &&\n                  (title ? (\n                    <Box padding={2}>\n                      <Text>{title}</Text>\n                    </Box>\n                  ) : (\n                    <Box marginLeft={2}>\n                      {renderPreview({\n                        layout: 'media',\n                        schemaType: optionType,\n                        value: resolveValueWithLegacyOptionsSupport(option),\n                      })}\n                    </Box>\n                  ))}\n\n                {!optionType && (\n                  <ItemWithMissingType value={option} onFocus={() => this.handleFocus(index)} />\n                )}\n              </Flex>\n            </Item>\n          )\n        })}\n      </List>\n    )\n  }\n}\n\nconst WrappedCheckbox = (props: React.HTMLProps<HTMLInputElement>) => {\n  const {disabled, checked, onChange, onFocus, readOnly, onBlur} = props\n\n  return (\n    <Checkbox\n      disabled={disabled}\n      checked={checked}\n      readOnly={readOnly}\n      onChange={onChange}\n      onFocus={onFocus}\n      onBlur={onBlur}\n    />\n  )\n}\n","export function focusRingBorderStyle(border: {color: string; width: number}): string {\n  return `inset 0 0 0 ${border.width}px ${border.color}`\n}\n\nexport function focusRingStyle(opts: {\n  base?: {bg: string}\n  border?: {color: string; width: number}\n  focusRing: {offset: number; width: number}\n}): string {\n  const {base, border, focusRing} = opts\n  const focusRingOutsetWidth = focusRing.offset + focusRing.width\n  const focusRingInsetWidth = 0 - focusRing.offset\n  const bgColor = base ? base.bg : 'var(--card-bg-color)'\n\n  return [\n    focusRingInsetWidth > 0 && `inset 0 0 0 ${focusRingInsetWidth}px var(--card-focus-ring-color)`,\n    border && focusRingBorderStyle(border),\n    focusRingInsetWidth < 0 && `0 0 0 ${0 - focusRingInsetWidth}px ${bgColor}`,\n    focusRingOutsetWidth > 0 && `0 0 0 ${focusRingOutsetWidth}px var(--card-focus-ring-color)`,\n  ]\n    .filter(Boolean)\n    .join(',')\n}\n","import {CloseIcon} from '@sanity/icons'\nimport {Box, Button, Card, Flex, isHTMLElement, rem, Text, Theme, useForwardedRef} from '@sanity/ui'\nimport React, {forwardRef, useCallback, useEffect, useMemo, useRef, useState} from 'react'\nimport styled, {css} from 'styled-components'\nimport type {CSSObject} from 'styled-components'\nimport {focusRingBorderStyle, focusRingStyle} from './styles'\n\nconst Root = styled(Box)((props: {theme: Theme}): CSSObject => {\n  const {theme} = props\n  const {focusRing, input, radius} = theme.sanity\n  const color = theme.sanity.color.input\n  const space = rem(theme.sanity.space[1])\n\n  return {\n    position: 'relative',\n    borderRadius: `${radius[1]}px`,\n    color: color.default.enabled.fg,\n    backgroundColor: color.default.enabled.bg,\n    boxShadow: focusRingBorderStyle({\n      color: color.default.enabled.border,\n      width: input.border.width,\n    }),\n\n    '& > .content': {\n      position: 'relative',\n      lineHeight: 0,\n      margin: `-${space} 0 0 -${space}`,\n    },\n\n    '& > .content > div': {\n      display: 'inline-block',\n      verticalAlign: 'top',\n      padding: `${space} 0 0 ${space}`,\n    },\n\n    // enabled\n    '&:not([data-read-only])': {\n      cursor: 'text',\n    },\n\n    // hovered\n    '@media(hover:hover)': {\n      '&:not([data-disabled]):not([data-read-only]):hover': {\n        borderColor: color.default.hovered.border,\n      },\n    },\n\n    // focused\n    '&:not([data-disabled]):not([data-read-only])[data-focused]': {\n      boxShadow: focusRingStyle({\n        border: {\n          color: color.default.enabled.border,\n          width: input.border.width,\n        },\n        focusRing,\n      }),\n    },\n\n    // disabled\n    '*:disabled + &': {\n      color: color.default.disabled.fg,\n      backgroundColor: color.default.disabled.bg,\n      boxShadow: focusRingBorderStyle({\n        color: color.default.disabled.border,\n        width: input.border.width,\n      }),\n    },\n  }\n})\n\nconst Input = styled.input((props: {theme: Theme}): CSSObject => {\n  const {theme} = props\n  const font = theme.sanity.fonts.text\n  const color = theme.sanity.color.input\n  const p = theme.sanity.space[2]\n  const size = theme.sanity.fonts.text.sizes[2]\n\n  return {\n    appearance: 'none',\n    background: 'none',\n    border: 0,\n    borderRadius: 0,\n    outline: 'none',\n    fontSize: rem(size.fontSize),\n    lineHeight: size.lineHeight / size.fontSize,\n    fontFamily: font.family,\n    fontWeight: font.weights.regular,\n    margin: 0,\n    display: 'block',\n    minWidth: '1px',\n    maxWidth: '100%',\n    boxSizing: 'border-box',\n    paddingTop: rem(p - size.ascenderHeight),\n    paddingRight: rem(p),\n    paddingBottom: rem(p - size.descenderHeight),\n    paddingLeft: rem(p),\n\n    // enabled\n    '&:not(:invalid):not(:disabled)': {\n      color: color.default.enabled.fg,\n    },\n\n    // disabled\n    '&:not(:invalid):disabled': {\n      color: color.default.disabled.fg,\n    },\n  }\n})\n\nconst Placeholder = styled(Box)((props: {theme: Theme}) => {\n  const {theme} = props\n  const color = theme.sanity.color.input\n\n  return css`\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    pointer-events: none;\n    --card-fg-color: ${color.default.enabled.placeholder};\n  `\n})\n\nexport const TagInput = forwardRef(\n  (\n    props: {\n      readOnly?: boolean\n      onChange?: (newValue: {value: string}[]) => void\n      onFocus?: (event: React.FocusEvent) => void\n      placeholder?: string\n      value?: {value: string}[]\n    } & Omit<React.HTMLProps<HTMLInputElement>, 'as' | 'onChange' | 'onFocus' | 'ref' | 'value'>,\n    ref: React.Ref<HTMLInputElement>\n  ) => {\n    const {\n      disabled,\n      onChange,\n      onFocus,\n      placeholder: placeholderProp,\n      readOnly,\n      value = [],\n      ...restProps\n    } = props\n    const placeholder = useMemo(() => {\n      if (placeholderProp) return placeholderProp\n      if (typeof window !== 'undefined' && 'ontouchstart' in window) {\n        return 'Enter tagâ€¦'\n      }\n      return 'Enter tag and press ENTERâ€¦'\n    }, [placeholderProp])\n    const [inputValue, setInputValue] = useState('')\n    const enabled = !disabled && !readOnly\n    const [focused, setFocused] = useState(false)\n    const forwardedRef = useForwardedRef(ref)\n    const rootRef = useRef<HTMLDivElement | null>(null)\n\n    const handleRootPointerDown = useCallback(\n      (event: React.PointerEvent<HTMLDivElement>) => {\n        const isTagElement = isHTMLElement(event.target) && event.target.closest('[data-ui=\"Tag\"]')\n\n        if (isTagElement) return\n\n        const inputElement = forwardedRef.current\n\n        if (inputElement) {\n          setTimeout(() => inputElement.focus(), 0)\n        }\n      },\n      [forwardedRef]\n    )\n\n    const handleInputBlur = useCallback(() => {\n      setFocused(false)\n    }, [])\n\n    const handleInputChange = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n      setInputValue(event.currentTarget.value)\n    }, [])\n\n    const handleInputFocus = useCallback(\n      (event: React.FocusEvent) => {\n        setFocused(true)\n        if (onFocus) onFocus(event)\n      },\n      [onFocus]\n    )\n\n    const handleInputKeyDown = useCallback(\n      (event: React.KeyboardEvent<HTMLInputElement>) => {\n        if (event.key === 'Enter') {\n          event.preventDefault()\n          event.stopPropagation()\n\n          if (onChange && inputValue) {\n            const newValue = value.concat([{value: inputValue}])\n\n            setInputValue('')\n\n            if (onChange) onChange(newValue)\n          }\n        }\n      },\n      [inputValue, onChange, value]\n    )\n\n    const handleTagRemove = useCallback(\n      (index: number) => {\n        if (!onChange) return\n\n        const newValue = value.slice(0)\n\n        newValue.splice(index, 1)\n\n        onChange(newValue)\n      },\n      [onChange, value]\n    )\n\n    useEffect(() => {\n      const inputElement = forwardedRef.current\n\n      if (inputElement) {\n        inputElement.style.width = '0'\n        inputElement.style.width = `${inputElement.scrollWidth}px`\n      }\n    }, [forwardedRef, inputValue])\n\n    return (\n      <Root\n        data-disabled={disabled ? '' : undefined}\n        data-focused={focused ? '' : undefined}\n        data-read-only={readOnly ? '' : undefined}\n        data-ui=\"TagInput\"\n        onPointerDown={handleRootPointerDown}\n        padding={1}\n        ref={rootRef}\n      >\n        {enabled && (\n          <Placeholder hidden={Boolean(inputValue || value.length)} padding={3}>\n            <Text textOverflow=\"ellipsis\">{placeholder}</Text>\n          </Placeholder>\n        )}\n\n        <div className=\"content\">\n          {value.map((tag, tagIndex) => (\n            // eslint-disable-next-line react/no-array-index-key\n            <div key={`tag-${tagIndex}`}>\n              <Tag\n                enabled={enabled}\n                index={tagIndex}\n                muted={disabled}\n                onRemove={handleTagRemove}\n                tag={tag}\n              />\n            </div>\n          ))}\n\n          <div key=\"tag-input\">\n            <Input\n              {...restProps}\n              disabled={!enabled}\n              onBlur={handleInputBlur}\n              onChange={handleInputChange}\n              onFocus={handleInputFocus}\n              onKeyDown={handleInputKeyDown}\n              ref={forwardedRef}\n              type=\"text\"\n              value={inputValue}\n            />\n          </div>\n        </div>\n      </Root>\n    )\n  }\n)\n\nTagInput.displayName = 'TagInput'\n\nfunction Tag(props: {\n  enabled: boolean\n  index: number\n  muted?: boolean\n  onRemove: (index: number) => void\n  tag: {value: string}\n}) {\n  const {enabled, index, muted, onRemove, tag} = props\n\n  const handleRemoveClick = useCallback(() => {\n    onRemove(index)\n  }, [index, onRemove])\n\n  return (\n    <Card data-ui=\"Tag\" padding={1} radius={2} tone=\"transparent\">\n      <Flex align=\"center\">\n        <Box flex={1} padding={1}>\n          <Text muted={muted}>{tag.value}</Text>\n        </Box>\n\n        {enabled && (\n          <Box marginLeft={1}>\n            <Button icon={CloseIcon} mode=\"bleed\" onClick={handleRemoveClick} padding={1} />\n          </Box>\n        )}\n      </Flex>\n    </Card>\n  )\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {set, unset} from '../patch'\nimport {TagInput} from '../components/tagInput'\nimport {ArrayOfPrimitivesInputProps} from '../types'\n\nexport type TagsArrayInputProps = ArrayOfPrimitivesInputProps<string[]>\n\nexport function TagsArrayInput(props: TagsArrayInputProps) {\n  const {onChange, readOnly, value = [], elementProps} = props\n  const tagInputValue = useMemo(() => value?.map((v) => ({value: v})), [value])\n\n  const handleChange = useCallback(\n    (nextValue: {value: string}[]) => {\n      onChange(nextValue.length === 0 ? unset() : set(nextValue.map((v) => v.value)))\n    },\n    [onChange]\n  )\n\n  return (\n    <TagInput onChange={handleChange} readOnly={readOnly} value={tagInputValue} {...elementProps} />\n  )\n}\n","// Takes a observable-returning function and returns a new function that limits on the number of\n// concurrent observables.\nimport {first, mergeMap} from 'rxjs/operators'\nimport {Subject, Subscription, Observable, from as observableFrom} from 'rxjs'\nimport {FIXME} from '../../types'\n\nconst DEFAULT_CONCURRENCY = 4\n\nfunction remove<T>(array: Array<T>, item: T): Array<T> {\n  const index = array.indexOf(item)\n  if (index > -1) {\n    array.splice(index, 1)\n  }\n  return array\n}\n\nexport function withMaxConcurrency<Args extends any[], Ret>(\n  func: (...args: Args) => Observable<Ret>,\n  concurrency: number = DEFAULT_CONCURRENCY\n) {\n  const throttler = createThrottler(concurrency)\n  return (...args: Args) => observableFrom(throttler(func(...args))) as Observable<Ret>\n}\n\nexport function createThrottler(concurrency: number = DEFAULT_CONCURRENCY) {\n  const currentSubscriptions: Array<Subscription> = []\n  const pendingObservables: Array<Observable<any>> = []\n  const ready$ = new Subject()\n\n  return request\n\n  function request(observable: Observable<unknown>): Observable<unknown> {\n    return new Observable((observer) => {\n      if (currentSubscriptions.length >= concurrency) {\n        return scheduleAndWait(observable)\n          .pipe(mergeMap(request) as FIXME)\n          .subscribe(observer)\n      }\n      const subscription = observable.subscribe(observer)\n      currentSubscriptions.push(subscription)\n      return () => {\n        remove(currentSubscriptions, subscription)\n        remove(pendingObservables, observable)\n        subscription.unsubscribe()\n        check()\n      }\n    })\n  }\n\n  function scheduleAndWait(observable: Observable<unknown>) {\n    pendingObservables.push(observable)\n    return ready$.asObservable().pipe(first((obs) => obs === observable))\n  }\n\n  function check() {\n    while (pendingObservables.length > 0 && currentSubscriptions.length < concurrency) {\n      ready$.next(pendingObservables.shift())\n    }\n  }\n}\n","import {mergeMap, map, catchError} from 'rxjs/operators'\nimport {Observable, of as observableOf} from 'rxjs'\nimport {FileAsset, ImageAsset} from '@sanity/types'\nimport {SanityClient, ProgressEvent, SanityAssetDocument} from '@sanity/client'\nimport {withMaxConcurrency} from '../../utils'\nimport {DocumentPreviewStore} from '../../../../preview'\nimport {UploadOptions} from '../../uploads/types'\n\nconst MAX_CONCURRENT_UPLOADS = 4\n\ntype UploadEvent = ProgressEvent | {type: 'complete'; id: string; asset: SanityAssetDocument}\n\nfunction uploadSanityAsset(\n  client: SanityClient,\n  assetType: 'file' | 'image',\n  file: File | Blob,\n  options: UploadOptions = {}\n): Observable<UploadEvent> {\n  const extract = options.metadata\n  const preserveFilename = options.storeOriginalFilename\n  const {label, title, description, creditLine, source} = options\n  return hashFile(file).pipe(\n    catchError(() =>\n      // ignore if hashing fails for some reason\n      observableOf(null)\n    ),\n\n    mergeMap((hash) =>\n      // note: the sanity api will still dedupe unique files, but this saves us from uploading the asset file entirely\n      hash ? fetchExisting(client, `sanity.${assetType}Asset`, hash) : observableOf(null)\n    ),\n\n    mergeMap((existing: SanityAssetDocument | null) => {\n      if (existing) {\n        return observableOf({\n          // complete with the existing asset document\n          type: 'complete' as const,\n          id: existing._id,\n          asset: existing,\n        })\n      }\n      return client.observable.assets\n        .upload(assetType, file, {\n          tag: 'asset.upload',\n          extract,\n          preserveFilename,\n          label,\n          title,\n          description,\n          creditLine,\n          source,\n        })\n        .pipe(\n          map((event) =>\n            event.type === 'response'\n              ? {\n                  // rewrite to a 'complete' event\n                  type: 'complete' as const,\n                  id: event.body.document._id,\n                  asset: event.body.document,\n                }\n              : event\n          )\n        )\n    })\n  )\n}\n\nconst uploadAsset = withMaxConcurrency(uploadSanityAsset, MAX_CONCURRENT_UPLOADS)\n\nexport const uploadImageAsset = (\n  client: SanityClient,\n  file: File | Blob,\n  options?: UploadOptions\n) => uploadAsset(client, 'image', file, options)\n\nexport const uploadFileAsset = (client: SanityClient, file: File | Blob, options?: UploadOptions) =>\n  uploadAsset(client, 'file', file, options)\n\n// note: there's currently 100% overlap between the ImageAsset document and the FileAsset documents as per interface required by the image and file input\nfunction observeAssetDoc(documentPreviewStore: DocumentPreviewStore, id: string) {\n  return documentPreviewStore.observePaths({_type: 'reference', _ref: id}, [\n    'originalFilename',\n    'url',\n    'metadata',\n    'label',\n    'title',\n    'description',\n    'creditLine',\n    'source',\n    'size',\n  ])\n}\n\nexport function observeImageAsset(documentPreviewStore: DocumentPreviewStore, id: string) {\n  return observeAssetDoc(documentPreviewStore, id) as Observable<ImageAsset>\n}\n\nexport function observeFileAsset(documentPreviewStore: DocumentPreviewStore, id: string) {\n  return observeAssetDoc(documentPreviewStore, id) as Observable<FileAsset>\n}\n\nfunction fetchExisting(\n  client: SanityClient,\n  type: string,\n  hash: string\n): Observable<ImageAsset | FileAsset | null> {\n  return client.observable.fetch(\n    '*[_type == $documentType && sha1hash == $hash][0]',\n    {documentType: type, hash},\n    {tag: 'asset.find-duplicate'}\n  )\n}\n\nfunction readFile(file: Blob | File): Observable<ArrayBuffer> {\n  return new Observable((subscriber) => {\n    const reader = new FileReader()\n    reader.onload = () => {\n      subscriber.next(reader.result as ArrayBuffer)\n      subscriber.complete()\n    }\n    reader.onerror = (err) => {\n      subscriber.error(err)\n    }\n    reader.readAsArrayBuffer(file)\n    return () => {\n      reader.abort()\n    }\n  })\n}\n\nfunction hashFile(file: File | Blob): Observable<string | null> {\n  if (!window.crypto || !window.crypto.subtle || !window.FileReader) {\n    return observableOf(null)\n  }\n  return readFile(file).pipe(\n    mergeMap((arrayBuffer) => crypto.subtle.digest('SHA-1', arrayBuffer)),\n    map(hexFromBuffer)\n  )\n}\n\nfunction hexFromBuffer(buffer: ArrayBuffer): string {\n  return Array.prototype.map\n    .call(new Uint8Array(buffer), (x) => `00${x.toString(16)}`.slice(-2))\n    .join('')\n}\n","import {Observable, of as observableOf, from as observableFrom} from 'rxjs'\nimport {map, catchError} from 'rxjs/operators'\nimport exif from 'exif-component'\n\nfunction readFileAsArrayBuffer(\n  file: File,\n  length: number\n): Observable<string | ArrayBuffer | null> {\n  return new Observable((observer) => {\n    const reader = new window.FileReader()\n    reader.onerror = (err) => observer.error(err)\n    reader.onload = () => {\n      observer.next(reader.result)\n      observer.complete()\n    }\n    reader.readAsArrayBuffer(length === undefined ? file : file.slice(0, length))\n    return () => reader.abort()\n  })\n}\n\nconst SKIP_EXIF_ERROR_RE = /(invalid image format)|(No exif data)/i\n\n// 128k should be enough for exif data according to https://github.com/mattiasw/ExifReader#tips\nconst EXIF_BUFFER_LENGTH = 128000\n\nexport function readExif(file: File) {\n  return observableFrom(readFileAsArrayBuffer(file, EXIF_BUFFER_LENGTH)).pipe(\n    map((buf) => exif(buf)),\n    catchError((error) => {\n      if (!SKIP_EXIF_ERROR_RE.test(error.message)) {\n        // Exif read failed, we do not want to fail hard\n        console.warn(`Exif read failed, continuing anyway: ${error.message}`) // eslint-disable-line no-console\n      }\n      return observableOf({})\n    })\n  )\n}\n","import {Observable} from 'rxjs'\n\n/* eslint-disable */\n\n/**\n * Check if we need to change dims.\n */\nfunction rotated(n: number) {\n  return [5, 6, 7, 8].indexOf(n) > -1\n}\n\ntype RotateOpts = {\n  degrees?: number\n  x: number\n  y: number\n}\n\n// Based on github.com/component/rotate\nfunction rotate(ctx: CanvasRenderingContext2D | null, options: RotateOpts) {\n  const x = options.x\n  const y = options.y\n\n  const radians = (options.degrees || 0) * (Math.PI / 180)\n\n  ctx?.translate(x, y)\n  ctx?.rotate(radians)\n  ctx?.translate(-x, -y)\n}\n\n// Based on github.com/component/flip\nfunction flip(canvas: HTMLCanvasElement, x: boolean, y: boolean) {\n  const ctx = canvas.getContext('2d')\n  ctx?.translate(x ? canvas.width : 0, y ? canvas.height : 0)\n  ctx?.scale(x ? -1 : 1, y ? -1 : 1)\n}\n\nconst ORIENTATION_OPS = [\n  {op: 'none', degrees: 0},\n  {op: 'flip-x', degrees: 0},\n  {\n    op: 'none',\n    degrees: 180,\n  },\n  {op: 'flip-y', degrees: 0},\n  {op: 'flip-x', degrees: 90},\n  {op: 'none', degrees: 90},\n  {\n    op: 'flip-x',\n    degrees: -90,\n  },\n  {op: 'none', degrees: -90},\n]\n\nexport type Orientation =\n  | 'top-left'\n  | 'top-right'\n  | 'bottom-right'\n  | 'bottom-left'\n  | 'left-top'\n  | 'right-top'\n  | 'right-bottom'\n  | 'left-bottom'\n\nconst ORIENTATIONS: Array<Orientation> = [\n  'top-left',\n  'top-right',\n  'bottom-right',\n  'bottom-left',\n  'left-top',\n  'right-top',\n  'right-bottom',\n  'left-bottom',\n]\n\nexport const DEFAULT_ORIENTATION: Orientation = 'top-left'\n\nconst THUMB_SIZE = 120\n\n// Based on github.com/component/exif-rotate\nfunction _orient(img: HTMLImageElement, orientationNumber: number): HTMLCanvasElement {\n  const orientation = ORIENTATION_OPS[orientationNumber - 1]\n\n  const ratio = img.height / img.width\n  img.width = THUMB_SIZE / ratio\n  img.height = img.width * ratio\n\n  // canvas\n  const canvas = document.createElement('canvas')\n  const ctx = canvas.getContext('2d')\n\n  // dims\n  if (rotated(orientationNumber)) {\n    canvas.height = img.width\n    canvas.width = img.height\n  } else {\n    canvas.width = img.width\n    canvas.height = img.height\n  }\n\n  // flip\n  if (orientation.op === 'flip-x') {\n    flip(canvas, true, false)\n  }\n  if (orientation.op === 'flip-y') {\n    flip(canvas, false, true)\n  }\n\n  // rotate\n  if (orientation.degrees) {\n    rotate(ctx, {\n      degrees: orientation.degrees,\n      x: canvas.width / 2,\n      y: canvas.height / 2,\n    })\n\n    if (rotated(orientationNumber)) {\n      const d = canvas.width - canvas.height\n      ctx?.translate(d / 2, -d / 2)\n    }\n  }\n\n  ctx?.drawImage(img, 0, 0, img.width, img.height)\n  return canvas\n}\n\n/* eslint-enable */\nexport function orient(image: HTMLImageElement, orientationId: Orientation) {\n  return new Observable((observer) => {\n    // console.time('canvas to blob')\n    const orientation = ORIENTATIONS.indexOf(orientationId) + 1\n    const canvas = _orient(image, orientation)\n    observer.next(canvas.toDataURL('image/jpeg', 0.1))\n    observer.complete()\n  })\n}\n","import {Observable} from 'rxjs'\nimport {mergeMap} from 'rxjs/operators'\nimport {orient, Orientation} from './orient'\n\nfunction loadImage(url: string): Observable<HTMLImageElement> {\n  return new Observable((observer) => {\n    const image = new window.Image()\n    //console.time(\"read image\");\n    image.onerror = () => {\n      observer.error(\n        new Error(`Could not load image from url \"${url}\". Image may be of an unsupported format`)\n      )\n    }\n    image.onload = () => {\n      //console.timeEnd(\"read image\");\n      observer.next(image)\n      observer.complete()\n    }\n    image.src = url\n    return () => {\n      // todo: cancel loading (if possible?)\n    }\n  })\n}\n\nexport function rotateImage(file: File, orientation: Orientation) {\n  return loadImage(window.URL.createObjectURL(file)).pipe(\n    mergeMap((image) => orient(image, orientation))\n  )\n}\n","export const UPLOAD_STATUS_KEY = '_upload'\n","import {FormPatch, set, setIfMissing, unset} from '../../patch'\nimport {UploadEvent} from './types'\nimport {UPLOAD_STATUS_KEY} from './constants'\n\nconst UNSET_UPLOAD_PATCH = unset([UPLOAD_STATUS_KEY])\n\nexport function createUploadEvent(patches: FormPatch[] = []): UploadEvent {\n  return {\n    type: 'uploadEvent',\n    patches,\n  }\n}\n\nexport const CLEANUP_EVENT = createUploadEvent([UNSET_UPLOAD_PATCH])\n\nexport function createInitialUploadEvent(file: File) {\n  const now = new Date().toISOString()\n  const value = {\n    progress: 2,\n    initiated: now,\n    updated: now,\n    file: {name: file.name, type: file.type},\n  }\n\n  return createUploadEvent([\n    setIfMissing({[UPLOAD_STATUS_KEY]: value}, []),\n    set(value, [UPLOAD_STATUS_KEY]),\n  ])\n}\n","import {from as observableFrom, of as observableOf, Observable} from 'rxjs'\nimport {catchError, concat, filter, map, merge, mergeMap} from 'rxjs/operators'\nimport type {SanityClient} from '@sanity/client'\nimport {set} from '../../patch'\nimport {uploadImageAsset} from '../inputs/client-adapters/assets'\nimport {readExif} from './image/readExif'\nimport {rotateImage} from './image/rotateImage'\nimport {DEFAULT_ORIENTATION, Orientation} from './image/orient'\nimport {UploadEvent, UploadOptions} from './types'\nimport {UPLOAD_STATUS_KEY} from './constants'\nimport {CLEANUP_EVENT, createInitialUploadEvent, createUploadEvent} from './utils'\n\ntype Exif = {\n  orientation: Orientation\n}\n\nexport function uploadImage(\n  client: SanityClient,\n  file: File,\n  options?: UploadOptions\n): Observable<UploadEvent> {\n  const upload$ = uploadImageAsset(client, file, options).pipe(\n    filter((event: any) => event.stage !== 'download'),\n    map((event) => ({\n      ...event,\n      progress: 2 + (event.percent / 100) * 98,\n    })),\n\n    map((event: any) => {\n      if (event.type === 'complete') {\n        return createUploadEvent([\n          set({_type: 'reference', _ref: event.asset._id}, ['asset']),\n          set(100, [UPLOAD_STATUS_KEY, 'progress']),\n          set(new Date().toISOString(), [UPLOAD_STATUS_KEY, 'updated']),\n        ])\n      }\n      return createUploadEvent([\n        set(event.percent, [UPLOAD_STATUS_KEY, 'progress']),\n        set(new Date().toISOString(), [UPLOAD_STATUS_KEY, 'updated']),\n      ])\n    })\n  )\n\n  const setPreviewUrl$ = readExif(file).pipe(\n    mergeMap((exifData: unknown) =>\n      rotateImage(file, (exifData as Exif).orientation || DEFAULT_ORIENTATION)\n    ),\n\n    catchError((error) => {\n      // eslint-disable-next-line no-console\n      console.warn(\n        'Image preprocessing failed for \"%s\" with the error: %s',\n        file.name,\n        error.message\n      )\n\n      // something went wrong, but continue still\n      return observableOf(null)\n    }),\n    filter(Boolean),\n    map((imageUrl) => createUploadEvent([set(imageUrl, [UPLOAD_STATUS_KEY, 'previewImage'])]))\n  )\n\n  return observableOf(createInitialUploadEvent(file)).pipe(\n    concat(observableFrom(upload$).pipe(merge(setPreviewUrl$))),\n    concat(observableOf(CLEANUP_EVENT))\n  )\n}\n","import {of as observableOf, Observable} from 'rxjs'\nimport {map, concat} from 'rxjs/operators'\nimport {SanityClient} from '@sanity/client'\nimport {set} from '../../patch'\nimport {uploadFileAsset} from '../inputs/client-adapters/assets'\nimport {UploadEvent, UploadOptions} from './types'\nimport {UPLOAD_STATUS_KEY} from './constants'\nimport {createUploadEvent, createInitialUploadEvent, CLEANUP_EVENT} from './utils'\n\nexport function uploadFile(\n  client: SanityClient,\n  file: File,\n  options?: UploadOptions\n): Observable<UploadEvent> {\n  const upload$ = uploadFileAsset(client, file, options).pipe(\n    map((event) => {\n      if (event.type === 'complete') {\n        return createUploadEvent([\n          set({_type: 'reference', _ref: event.asset._id}, ['asset']),\n          set(100, [UPLOAD_STATUS_KEY, 'progress']),\n          set(new Date().toISOString(), [UPLOAD_STATUS_KEY, 'updated']),\n        ])\n      }\n      return createUploadEvent([\n        set(event.percent, [UPLOAD_STATUS_KEY, 'progress']),\n        set(new Date().toISOString(), [UPLOAD_STATUS_KEY, 'updated']),\n      ])\n    })\n  )\n\n  return observableOf(createInitialUploadEvent(file)).pipe(\n    concat(upload$),\n    concat(observableOf(CLEANUP_EVENT))\n  )\n}\n","import {SchemaType} from '@sanity/types'\nimport {map} from 'rxjs/operators'\nimport {SanityClient} from '@sanity/client'\nimport {set} from '../../patch'\nimport {uploadImage} from './uploadImage'\nimport {uploadFile} from './uploadFile'\nimport {Uploader, UploaderDef, UploadOptions} from './types'\n\nconst UPLOAD_IMAGE: UploaderDef = {\n  type: 'image',\n  accepts: 'image/*',\n  upload: (client: SanityClient, file: File, type?: SchemaType, options?: UploadOptions) =>\n    uploadImage(client, file, options),\n}\n\nconst UPLOAD_FILE: UploaderDef = {\n  type: 'file',\n  accepts: '',\n  upload: (client: SanityClient, file: File, type: SchemaType, options?: UploadOptions) =>\n    uploadFile(client, file, options),\n}\n\nconst UPLOAD_TEXT: UploaderDef = {\n  type: 'string',\n  accepts: 'text/*',\n  upload: (client: SanityClient, file: File, type: SchemaType, options?: UploadOptions) =>\n    uploadFile(client, file, options).pipe(\n      map((content) => ({\n        type: 'uploadEvent',\n        patches: [set(content)],\n      }))\n    ),\n\n  // Todo: promote this to a \"first-class\" form-builder abstraction\n  // and make it possible to register custom uploaders\n}\n\nexport const uploaders: Array<Uploader> = [UPLOAD_IMAGE, UPLOAD_TEXT, UPLOAD_FILE].map(\n  (uploader, i) => ({\n    ...uploader,\n    priority: i,\n  })\n)\n","import type {FileLike} from './types'\n\n/**\n * Check if the provided file type should be accepted by the input with accept attribute.\n * https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Input#attr-accept\n *\n * Inspired by https://github.com/enyo/dropzone (MIT) (c) 2021 Matias Meno\n * Based on https://github.com/react-dropzone/attr-accept (MIT) (c) 2015 Andrey Okonetchnikov\n *\n * @param file - https://developer.mozilla.org/en-US/docs/Web/API/File\n * @param acceptedFiles - List of accepted mime types (comma-separated string or array)\n * @returns True if file is accepted, false otherwise\n */\nexport function accepts(file: FileLike, acceptedFiles: string | string[]): boolean {\n  if (!file || !acceptedFiles) {\n    return true\n  }\n\n  const acceptedFilesArray = Array.isArray(acceptedFiles)\n    ? acceptedFiles // eg `['image/png', 'image/jpeg']`\n    : acceptedFiles.split(',') // eg `image/png,image/jpeg`\n\n  const fileName = file.name || ''\n  const mimeType = (file.type || '').toLowerCase()\n  const baseMimeType = mimeType.replace(/\\/.*$/, '')\n\n  return acceptedFilesArray.some((type) => {\n    const validType = type.trim().toLowerCase()\n\n    if (validType.charAt(0) === '.') {\n      return fileName.toLowerCase().endsWith(validType)\n    }\n\n    if (validType.endsWith('/*')) {\n      // This is something like a image/* mime type\n      return baseMimeType === validType.replace(/\\/.*$/, '')\n    }\n\n    return mimeType === validType\n  })\n}\n","import type {SchemaType} from '@sanity/types'\nimport type {FIXME} from '../../types'\nimport * as is from '../../utils/is'\nimport type {FileLike, Uploader} from './types'\nimport {uploaders} from './uploaders'\nimport {accepts} from './accepts'\n\nexport function resolveUploader(type: SchemaType, file: FileLike): Uploader | null {\n  return (\n    uploaders.find((uploader) => {\n      return (\n        is.type(uploader.type, type) &&\n        accepts(file, uploader.accepts) &&\n        accepts(file, (type.options as FIXME)?.accept || '')\n      )\n    }) || null\n  )\n}\n","import type {SchemaType} from '@sanity/types'\n\n/**\n * Get the most specific defined title of a schema type\n * If not set directly on the given type, it will traverse up the tree until it\n * finds one, falling back to the _name_ of the type.\n *\n * @param type - The schema type to get the title of\n * @returns A title, alternatively the schema type _name_\n * @internal\n */\nexport function getSchemaTypeTitle(type: SchemaType): string {\n  if (typeof type.title === 'string') {\n    return type.title\n  }\n\n  if (type.type) {\n    return getSchemaTypeTitle(type.type)\n  }\n\n  return type.name || type.jsonType\n}\n","export const BEFORE = 'before'\nexport const AFTER = 'after'\n\nexport function arrayInsert(\n  array: unknown[],\n  position: 'after' | 'before',\n  index: number,\n  ...args: unknown[][]\n) {\n  if (position !== BEFORE && position !== AFTER) {\n    throw new Error(`Invalid position \"${position}\", must be either ${BEFORE} or ${AFTER}`)\n  }\n\n  const items = flatten(...args)\n\n  if (array.length === 0) {\n    return items\n  }\n\n  const len = array.length\n  const idx = Math.abs((len + index) % len) % len\n\n  const normalizedIdx = position === 'after' ? idx + 1 : idx\n\n  const copy = array.slice()\n  copy.splice(normalizedIdx, 0, ...flatten(items))\n  return copy\n}\n\nfunction flatten(...values: unknown[][]) {\n  return values.reduce((prev, item) => prev.concat(item), [])\n}\n","import {findIndex} from 'lodash'\nimport {FIXME} from '../types'\nimport {applyPatch} from './applyPatch'\nimport {arrayInsert} from './arrayInsert'\n\nconst hasOwn = (obj: Record<string, unknown>, property: string) =>\n  Object.prototype.hasOwnProperty.call(obj, property)\n\nfunction move(arr: unknown[], from: number, to: number) {\n  const nextValue = arr.slice()\n  const val = nextValue[from]\n  nextValue.splice(from, 1)\n  nextValue.splice(to, 0, val)\n  return nextValue\n}\n\nfunction findTargetIndex(array: unknown[], pathSegment: FIXME) {\n  if (typeof pathSegment === 'number') {\n    return pathSegment\n  }\n  const index = findIndex(array, pathSegment)\n  return index === -1 ? false : index\n}\n\nexport function _arrayApply(value: FIXME, patch: FIXME) {\n  const nextValue = value.slice() // make a copy for internal mutation\n\n  if (patch.path.length === 0) {\n    // its directed to me\n    if (patch.type === 'setIfMissing') {\n      if (!Array.isArray(patch.value)) {\n        // eslint-disable-line max-depth\n        throw new Error('Cannot set value of an array to a non-array')\n      }\n      return value === undefined ? patch.value : value\n    } else if (patch.type === 'set') {\n      if (!Array.isArray(patch.value)) {\n        // eslint-disable-line max-depth\n        throw new Error('Cannot set value of an array to a non-array')\n      }\n      return patch.value\n    } else if (patch.type === 'unset') {\n      return undefined\n    } else if (patch.type === 'move') {\n      if (!patch.value || !hasOwn(patch.value, 'from') || !hasOwn(patch.value, 'to')) {\n        // eslint-disable-line max-depth\n        throw new Error(\n          `Invalid value of 'move' patch. Expected a value with \"from\" and \"to\" indexes, instead got: ${JSON.stringify(\n            patch.value\n          )}`\n        )\n      }\n      return move(nextValue, patch.value.from, patch.value.to)\n    }\n    throw new Error(`Invalid array operation: ${patch.type}`)\n  }\n\n  const [head, ...tail] = patch.path\n\n  const index = findTargetIndex(value, head)\n\n  // If the given selector could not be found, return as-is\n  if (index === false) {\n    return nextValue\n  }\n\n  if (tail.length === 0) {\n    if (patch.type === 'insert') {\n      const {position, items} = patch\n      return arrayInsert(value, position, index, items)\n    } else if (patch.type === 'unset') {\n      if (typeof index !== 'number') {\n        throw new Error(`Expected array index to be a number, instead got \"${index}\"`)\n      }\n      nextValue.splice(index, 1)\n      return nextValue\n    }\n  }\n\n  // The patch is not directed to me\n  nextValue[index] = applyPatch(nextValue[index], {\n    ...patch,\n    path: tail,\n  })\n  return nextValue\n}\n","import {omit, clone, isObject} from 'lodash'\nimport {FIXME} from '../types'\nimport {applyPatch} from './applyPatch'\n\nexport function _objectApply(value: FIXME, patch: FIXME) {\n  const nextValue = clone(value)\n  if (patch.path.length === 0) {\n    // its directed to me\n    if (patch.type === 'set') {\n      if (!isObject(patch.value)) {\n        // eslint-disable-line max-depth\n        throw new Error('Cannot set value of an object to a non-object')\n      }\n      return patch.value\n    } else if (patch.type === 'unset') {\n      return undefined\n    } else if (patch.type === 'setIfMissing') {\n      // console.log('IS IT missing?', value)\n      return value === undefined ? patch.value : value\n    }\n    throw new Error(`Invalid object operation: ${patch.type}`)\n  }\n\n  // The patch is not directed to me\n  const [head, ...tail] = patch.path\n  if (typeof head !== 'string') {\n    throw new Error(`Expected field name to be a string, instad got: ${head}`)\n  }\n\n  if (tail.length === 0 && patch.type === 'unset') {\n    return omit(nextValue, head)\n  }\n\n  nextValue[head] = applyPatch(nextValue[head], {\n    ...patch,\n    path: tail,\n  })\n  return nextValue\n}\n","import {FIXME} from '../types'\n\nconst OPERATIONS = {\n  replace(currentValue: FIXME, nextValue: FIXME) {\n    return nextValue\n  },\n  set(currentValue: FIXME, nextValue: FIXME) {\n    return nextValue\n  },\n  setIfMissing(currentValue: FIXME, nextValue: FIXME) {\n    return currentValue === undefined ? nextValue : currentValue\n  },\n  unset(currentValue: FIXME, nextValue: FIXME) {\n    return undefined\n  },\n  inc(currentValue: FIXME, nextValue: FIXME) {\n    return currentValue + nextValue\n  },\n  dec(currentValue: FIXME, nextValue: FIXME) {\n    return currentValue - nextValue\n  },\n}\n\nconst SUPPORTED_PATCH_TYPES = Object.keys(OPERATIONS)\n\nexport function _primitiveApply(value: FIXME, patch: FIXME) {\n  if (!SUPPORTED_PATCH_TYPES.includes(patch.type)) {\n    throw new Error(\n      `Received patch of unsupported type \"${patch.type}\" for primitives. This is most likely a bug.`\n    )\n  }\n\n  if (patch.path.length > 0) {\n    throw new Error(\n      `Cannot apply deep operations on primitive values. Received patch with type \"${\n        patch.type\n      }\" and path \"${patch.path\n        .map((path: FIXME) => JSON.stringify(path))\n        .join('.')} that targeted the value \"${JSON.stringify(value)}\"`\n    )\n  }\n\n  return (OPERATIONS as FIXME)[patch.type](value, patch.value)\n}\n","import * as DMP from 'diff-match-patch'\nimport {FormPatch} from '../patch'\nimport {FIXME} from '../types'\n\n// eslint-disable-next-line new-cap\nconst dmp = new DMP.diff_match_patch()\n\nconst OPERATIONS = {\n  replace(currentValue: unknown, nextValue: unknown) {\n    return nextValue\n  },\n  set(currentValue: unknown, nextValue: unknown) {\n    return nextValue\n  },\n  setIfMissing(currentValue: unknown, nextValue: unknown) {\n    return currentValue === undefined ? nextValue : currentValue\n  },\n  unset(currentValue: unknown, nextValue: unknown) {\n    return undefined\n  },\n  diffMatchPatch(currentValue: string, nextValue: string) {\n    return dmp.patch_apply(dmp.patch_fromText(nextValue), currentValue)[0]\n  },\n}\n\nconst SUPPORTED_PATCH_TYPES = Object.keys(OPERATIONS)\n\nexport function _stringApply(value: unknown, patch: FormPatch) {\n  if (!SUPPORTED_PATCH_TYPES.includes(patch.type)) {\n    throw new Error(\n      `Received patch of unsupported type: \"${JSON.stringify(\n        patch.type\n      )}\" for string. This is most likely a bug.`\n    )\n  }\n\n  if (patch.path.length > 0) {\n    throw new Error(\n      `Cannot apply deep operations on string values. Received patch with type \"${\n        patch.type\n      }\" and path \"${patch.path.join('.')} that targeted the value \"${JSON.stringify(value)}\"`\n    )\n  }\n\n  return (OPERATIONS as FIXME)[patch.type](value, (patch as FIXME).value)\n}\n","import {isObject, isString} from 'lodash'\nimport {PatchArg} from '../../_exports'\nimport {FIXME} from '../types'\nimport {_arrayApply} from './array'\nimport {_objectApply} from './object'\nimport {_primitiveApply} from './primitive'\nimport {_stringApply} from './string'\n\nexport function applyAll(value: FIXME, patches: PatchArg[]) {\n  return patches.reduce(applyPatch, value)\n}\n\nfunction _applyPatch(value: FIXME, patch: FIXME) {\n  if (Array.isArray(value)) {\n    return _arrayApply(value, patch)\n  }\n  if (isString(value)) {\n    return _stringApply(value, patch)\n  }\n  if (isObject(value)) {\n    return _objectApply(value, patch)\n  }\n  return _primitiveApply(value, patch)\n}\n\nexport function applyPatch(value: FIXME, patch: FIXME) {\n  const res = _applyPatch(value, patch)\n  // console.log('applyPatch(%o, %o) : %o (noop? %o)', value, patch, res, value === res)\n  return res\n}\n","import styled, {css} from 'styled-components'\nimport {rem, Theme} from '@sanity/ui'\nimport {ComponentType} from 'react'\nimport {focusRingBorderStyle, focusRingStyle} from './helpers'\n\nexport function withFocusRing<Props>(component: ComponentType<Props>) {\n  return styled(component)<Props & {$border?: boolean}>(\n    (props: {theme: Theme; $border?: boolean}) => {\n      const border = {width: props.$border ? 1 : 0, color: 'var(--card-border-color)'}\n\n      return css`\n        --card-focus-box-shadow: ${focusRingBorderStyle(border)};\n\n        border-radius: ${rem(props.theme.sanity.radius[1])};\n        outline: none;\n        box-shadow: var(--card-focus-box-shadow);\n\n        &:focus {\n          --card-focus-box-shadow: ${focusRingStyle({\n            base: props.theme.sanity.color.base,\n            border,\n            focusRing: props.theme.sanity.focusRing,\n          })};\n        }\n      `\n    }\n  )\n}\n","/**\n * Utilities for extracting files from dataTransfer in a predictable cross-browser fashion.\n * Also recursively extracts files from a directory\n * Inspired by https://github.com/component/normalized-upload\n */\n\nimport {flatten} from 'lodash'\nimport {FIXME} from '../../../../types'\n\nexport function extractPastedFiles(dataTransfer: DataTransfer): Promise<File[]> {\n  if (dataTransfer.files && dataTransfer.files.length > 0) {\n    return Promise.resolve(Array.from(dataTransfer.files || []))\n  }\n  return normalizeItems(Array.from(dataTransfer.items || [])).then(flatten)\n}\n\nexport function extractDroppedFiles(dataTransfer: DataTransfer) {\n  const files: File[] = Array.from(dataTransfer.files || [])\n  const items: DataTransferItem[] = Array.from(dataTransfer.items || [])\n  if (files && files.length > 0) {\n    return Promise.resolve(files)\n  }\n  return normalizeItems(items).then(flatten)\n}\n\nfunction toArray<T>(v: T | null): T[] {\n  return v === null ? [] : [v]\n}\n\nfunction normalizeItems(items: DataTransferItem[]) {\n  return Promise.all(\n    items.map((item) => {\n      // directory\n      if (item.kind === 'file' && item.webkitGetAsEntry) {\n        let entry\n        // Edge throws\n        try {\n          entry = item.webkitGetAsEntry()\n        } catch (err) {\n          return toArray(item.getAsFile())\n        }\n        if (!entry) {\n          return []\n        }\n        return entry.isDirectory ? walk(entry as FIXME) : toArray(item.getAsFile())\n      }\n\n      if (item.kind === 'file') {\n        const file = item.getAsFile()\n        return Promise.resolve(file ? [file] : [])\n      }\n\n      if (item.kind === 'string') {\n        // We previously had support for reading datatransfer of strings here but decided to remove it since we don't handle it in higher up in the stack yet.\n        // If one day we want to support data transfer from a string value (e.g. copy+paste from a field to another), an earlier\n        // version of this file includes an implementation that uses DataTransferItem.getAsString to read the string value into a File\n        console.warn('DataTransfer with kind=\"string\" is currently not supported')\n        return Promise.resolve([])\n      }\n\n      console.warn('Unknown DataTransferItem.kind: %s', item.kind)\n      return Promise.resolve([])\n    })\n  )\n}\n\n// Warning: experimental API: https://wicg.github.io/entries-api\ntype WebKitFileEntry = {\n  isFile: true\n  isDirectory: false\n  name: string\n  fullPath: string\n  file: (fileCallback: (file: File) => void, errorCallback?: (error: Error) => void) => void\n}\n\ntype WebKitDirectoryEntry = {\n  isFile: false\n  isDirectory: true\n  name: string\n  fullPath: string\n  createReader: () => DirectoryReader\n}\n\ntype Entry = WebKitFileEntry | WebKitDirectoryEntry\n\ntype DirectoryReader = {\n  readEntries: (\n    successCallback: (entries: Entry[]) => void,\n    errorCallback?: (error: Error) => void\n  ) => void\n}\n\nfunction walk(entry: Entry): Promise<File[]> {\n  if (entry.isFile) {\n    return new Promise<File>((resolve, reject) => entry.file(resolve, reject)).then(\n      (file: File) => [file]\n    )\n  }\n\n  if (entry.isDirectory) {\n    const dir = entry.createReader()\n    return new Promise<Entry[]>((resolve, reject) => dir.readEntries(resolve, reject))\n      .then((entries) => entries.filter((entr) => !entr.name.startsWith('.')))\n      .then((entries) => Promise.all(entries.map(walk)).then(flatten))\n  }\n  return Promise.resolve([])\n}\n","export function imageUrlToBlob(\n  imageUrl: string,\n  format = 'image/jpeg',\n  quality = 1\n): Promise<Blob | null> {\n  if (imageUrl.match(/^webkit-fake-url:\\/\\//)) {\n    return Promise.reject(new Error('Cannot read image contents from webkit fake url'))\n  }\n  return new Promise((resolve, reject) => {\n    const loader = new Image()\n    loader.crossOrigin = 'anonymous'\n    loader.referrerPolicy = 'strict-origin-when-cross-origin'\n    loader.onload = () => {\n      const canvas = document.createElement('canvas')\n      canvas.width = loader.width\n      canvas.height = loader.height\n      const ctx = canvas.getContext('2d')\n      ctx?.drawImage(loader, 0, 0, canvas.width, canvas.height)\n      try {\n        canvas.toBlob(resolve, format, quality)\n      } catch (error) {\n        reject(error)\n      }\n    }\n    loader.src = imageUrl\n  })\n}\n","import React, {useCallback} from 'react'\nimport {useForwardedRef} from '@sanity/ui'\nimport {extractDroppedFiles, extractPastedFiles} from './utils/extractFiles'\nimport {imageUrlToBlob} from './utils/imageUrlToBlob'\n\nexport type FileInfo = {\n  kind: DataTransferItem['kind'] // 'file' or 'string'\n  type: DataTransferItem['type'] // mime type of file or string\n}\n\ntype Props = {\n  // Triggered when the target component receives one or more files, either originating from a drop event or a paste event\n  onFiles?: (files: File[]) => void\n\n  // Triggered by the user dragging files over the target component\n  // Note: We can potentially also support reading from clipboard events here: https://developer.mozilla.org/en-US/docs/Web/API/Clipboard\n  onFilesOver?: (files: FileInfo[]) => void\n\n  // Triggered by the user dragging files out of the target component\n  onFilesOut?: () => void\n\n  disabled?: boolean\n}\n\n// These are managed and can't be passed to the composed component\ntype ManagedProps =\n  | 'onDrop'\n  | 'onDragOver'\n  | 'onPaste'\n  | 'onDragEnter'\n  | 'onDragLeave'\n  | 'onKeyDown'\n\nconst PASTE_INPUT_STYLE = {opacity: 0, position: 'absolute'} as const\n\n/**\n * Higher order component that creates a file target from a given component.\n * Returns a component that acts both as a drop target and a paste target, emitting a list of Files upon drop or paste\n */\nexport function fileTarget<ComponentProps>(Component: React.ComponentType<ComponentProps>) {\n  return React.forwardRef(function FileTarget(\n    props: Omit<ComponentProps, ManagedProps> & Props,\n    ref: React.ForwardedRef<HTMLElement>\n  ) {\n    const {onFiles, onFilesOver, onFilesOut, disabled, ...rest} = props\n\n    const [showPasteInput, setShowPasteInput] = React.useState(false)\n\n    const pasteInput = React.useRef<HTMLDivElement | null>(null)\n    const forwardedRef = useForwardedRef(ref)\n\n    const enteredElements = React.useRef<Element[]>([])\n\n    const emitFiles = useCallback(\n      (files: File[]) => {\n        onFiles?.(files)\n      },\n      [onFiles]\n    )\n\n    const handleKeyDown = useCallback(\n      (event: React.KeyboardEvent) => {\n        if (\n          event.target === forwardedRef.current &&\n          (event.ctrlKey || event.metaKey) &&\n          event.key === 'v'\n        ) {\n          setShowPasteInput(true)\n        }\n      },\n      [forwardedRef]\n    )\n    const handlePaste = useCallback(\n      (event: React.ClipboardEvent) => {\n        extractPastedFiles(event.clipboardData)\n          .then((files) => {\n            if (!pasteInput.current) {\n              return []\n            }\n            return files.length > 0\n              ? files\n              : // Invoke Safari hack if we didn't get any files\n                convertImagesToFilesAndClearContentEditable(pasteInput.current, 'image/jpeg')\n          })\n          .then((files) => {\n            emitFiles(files)\n            setShowPasteInput(false)\n            forwardedRef.current?.focus()\n          })\n      },\n      [emitFiles, forwardedRef]\n    )\n    const handleDrop = useCallback(\n      (event: React.DragEvent) => {\n        enteredElements.current = []\n        event.preventDefault()\n        event.stopPropagation()\n        const dataTransfer = event.nativeEvent.dataTransfer\n        if (onFiles && dataTransfer) {\n          extractDroppedFiles(dataTransfer).then((files) => {\n            if (files) {\n              emitFiles(files)\n            }\n          })\n        }\n        onFilesOut?.()\n      },\n      [emitFiles, onFiles, onFilesOut]\n    )\n\n    const handleDragOver = useCallback(\n      (event: React.DragEvent) => {\n        if (onFiles) {\n          event.preventDefault()\n          event.stopPropagation()\n        }\n      },\n      [onFiles]\n    )\n\n    const handleDragEnter = useCallback(\n      (event: React.DragEvent) => {\n        event.stopPropagation()\n\n        if (onFilesOver && forwardedRef.current === event.currentTarget) {\n          /* this is a (hackish) work around to have the drag and drop work when the file is hovered back and forth over it\n          as part of the refactor and adding more components to the \"hover\" state, it didn't recognise that it just kept adding the same\n          element over and over, so when it tried to remove them on the handleDragLeave, it only removed the last instance.\n        */\n          enteredElements.current = [...new Set(enteredElements.current), event.currentTarget]\n\n          const fileTypes = Array.from(event.dataTransfer.items).map((item) => ({\n            type: item.type,\n            kind: item.kind,\n          }))\n          onFilesOver(fileTypes)\n        }\n      },\n      [onFilesOver, forwardedRef]\n    )\n\n    const handleDragLeave = useCallback(\n      (event: React.DragEvent) => {\n        event.stopPropagation()\n        const idx = enteredElements.current.indexOf(event.currentTarget)\n        if (idx > -1) {\n          enteredElements.current.splice(idx, 1)\n        }\n        if (enteredElements.current.length === 0) {\n          onFilesOut?.()\n        }\n      },\n      [onFilesOut]\n    )\n\n    const prevShowPasteInput = React.useRef(false)\n    React.useEffect(() => {\n      if (!prevShowPasteInput.current && showPasteInput && pasteInput.current) {\n        pasteInput.current.focus()\n        select(pasteInput.current) // Needed by Edge\n      } else if (prevShowPasteInput.current && !showPasteInput) {\n        pasteInput.current?.focus()\n      }\n      prevShowPasteInput.current = showPasteInput\n    }, [showPasteInput])\n\n    return (\n      <>\n        <Component\n          {...(rest as ComponentProps)}\n          ref={forwardedRef}\n          onKeyDown={disabled ? undefined : handleKeyDown}\n          onDragOver={disabled ? undefined : handleDragOver}\n          onDragEnter={disabled ? undefined : handleDragEnter}\n          onDragLeave={disabled ? undefined : handleDragLeave}\n          onDrop={disabled ? undefined : handleDrop}\n        />\n        {!disabled && showPasteInput && (\n          <div contentEditable onPaste={handlePaste} ref={pasteInput} style={PASTE_INPUT_STYLE} />\n        )}\n      </>\n    )\n  })\n}\n\n// this is a hack for Safari that reads pasted image(s) from an ContentEditable div instead of the onpaste event\nfunction convertImagesToFilesAndClearContentEditable(\n  element: HTMLElement,\n  targetFormat = 'image/jpeg'\n): Promise<File[]> {\n  if (!element.isContentEditable) {\n    return Promise.reject(\n      new Error(\n        `Expected element to be contentEditable=\"true\". Instead found a non contenteditable ${element.tagName}`\n      )\n    )\n  }\n  return new Promise((resolve) => setTimeout(resolve, 10)) // add a delay so the paste event can finish\n    .then(() => Array.from(element.querySelectorAll('img')))\n    .then((imageElements) => {\n      element.innerHTML = '' // clear\n      return imageElements\n    })\n    .then((images) => Promise.all(images.map((img) => imageUrlToBlob(img.src))))\n    .then((imageBlobs) =>\n      imageBlobs.map((blob) => new File([blob!], 'pasted-image.jpg', {type: targetFormat}))\n    )\n}\n\n// needed by Edge\nfunction select(el: Element) {\n  const range = document.createRange()\n  range.selectNodeContents(el)\n  const sel = window.getSelection()\n  sel?.removeAllRanges()\n  sel?.addRange(range)\n}\n","import React from 'react'\nimport {SchemaType} from '@sanity/types'\nimport {Box, Text, Inline} from '@sanity/ui'\nimport {AccessDeniedIcon, UploadIcon} from '@sanity/icons'\nimport {FileLike, UploaderResolver} from '../../../studio/uploads/types'\n\ninterface Props {\n  hoveringFiles: FileLike[]\n  types: SchemaType[]\n  resolveUploader: UploaderResolver\n}\n\nexport function DropMessage(props: Props) {\n  const {hoveringFiles, types, resolveUploader} = props\n  const acceptedFiles = hoveringFiles.filter((file) =>\n    types.some((type) => resolveUploader(type, file))\n  )\n  const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n  const multiple = types.length > 1\n  return (\n    <>\n      {acceptedFiles.length > 0 ? (\n        <>\n          <Inline space={2}>\n            <Text>\n              <UploadIcon />\n            </Text>\n            <Text>\n              Drop to upload{' '}\n              {multiple && (\n                <>\n                  {acceptedFiles.length} file{acceptedFiles.length > 1 ? 's' : ''}\n                </>\n              )}\n            </Text>\n          </Inline>\n          {rejectedFilesCount > 0 && (\n            <Box marginTop={4}>\n              <Inline space={2}>\n                <Text muted size={1}>\n                  <AccessDeniedIcon />\n                </Text>\n                <Text muted size={1}>\n                  {rejectedFilesCount} file\n                  {rejectedFilesCount > 1 ? 's' : ''} can't be uploaded here\n                </Text>\n              </Inline>\n            </Box>\n          )}\n        </>\n      ) : (\n        <Inline space={2}>\n          <Text>\n            <AccessDeniedIcon />\n          </Text>\n          <Text>\n            Can't upload {hoveringFiles.length > 1 ? 'any of these files' : 'this file'} here\n          </Text>\n        </Inline>\n      )}\n    </>\n  )\n}\n","import styled from 'styled-components'\nimport {Layer} from '@sanity/ui'\n\nexport const Overlay = styled(Layer)`\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  top: -2px;\n  left: -2px;\n  right: -2px;\n  bottom: -2px;\n  background-color: var(--card-bg-color);\n  opacity: 0.8;\n`\n","import {Box, Flex, Text, useToast} from '@sanity/ui'\nimport React from 'react'\nimport {SchemaType} from '@sanity/types'\nimport {sortBy} from 'lodash'\nimport styled from 'styled-components'\nimport {\n  FileLike,\n  ResolvedUploader,\n  Uploader,\n  UploaderResolver,\n} from '../../../../studio/uploads/types'\nimport {FileInfo, fileTarget} from '../../../common/fileTarget'\nimport {DropMessage} from '../../../files/common/DropMessage'\nimport {Overlay} from './styles'\n\ntype UploadTargetProps = {\n  types: SchemaType[]\n  resolveUploader?: UploaderResolver\n  onUpload?: (event: {type: SchemaType; file: File; uploader: Uploader}) => void\n  children?: React.ReactNode\n}\n// todo: define and export this as a core interface in this package\ntype UploadTask = {\n  file: File\n  uploaderCandidates: ResolvedUploader[]\n}\n\nconst Root = styled.div`\n  position: relative;\n`\n\nfunction getUploadCandidates(\n  types: SchemaType[],\n  resolveUploader: UploaderResolver,\n  file: FileLike\n) {\n  return types\n    .map((memberType) => ({\n      type: memberType,\n      uploader: resolveUploader(memberType, file),\n    }))\n    .filter((member) => member.uploader) as ResolvedUploader[]\n}\nexport function uploadTarget<Props>(Component: React.ComponentType<Props>) {\n  const FileTarget = fileTarget<any>(Component)\n\n  return React.forwardRef(function UploadTarget(\n    props: UploadTargetProps & Props,\n    forwardedRef: React.ForwardedRef<HTMLElement>\n  ) {\n    const {children, resolveUploader, onUpload, types, ...rest} = props\n    const {push: pushToast} = useToast()\n\n    const uploadFile = React.useCallback(\n      (file: File, resolvedUploader: ResolvedUploader) => {\n        const {type, uploader} = resolvedUploader\n        onUpload?.({file, type, uploader})\n      },\n      [onUpload]\n    )\n\n    const handleFiles = React.useCallback(\n      (files: File[]) => {\n        if (!resolveUploader) {\n          return\n        }\n        const tasks: UploadTask[] = files.map((file) => ({\n          file,\n          uploaderCandidates: getUploadCandidates(types, resolveUploader, file),\n        }))\n        const ready = tasks.filter((task) => task.uploaderCandidates.length > 0)\n        const rejected: UploadTask[] = tasks.filter((task) => task.uploaderCandidates.length === 0)\n\n        if (rejected.length > 0) {\n          const plural = rejected.length > 1\n          pushToast({\n            closable: true,\n            status: 'warning',\n            title: `The following item${\n              plural ? 's' : ''\n            } can't be uploaded because there's no known conversion from content type${\n              plural ? 's' : ''\n            } to array item:`,\n            description: rejected.map((task, i) => (\n              <Flex key={i} padding={2}>\n                <Box marginLeft={1}>\n                  <Text weight=\"semibold\">{task.file.name}</Text>\n                </Box>\n                <Box paddingLeft={2}>\n                  <Text size={1}>({task.file.type})</Text>\n                </Box>\n              </Flex>\n            )),\n          })\n        }\n\n        // todo: consider if we should to ask the user here\n        // the list of candidates is sorted by their priority and the first one is selected\n        // const ambiguous = tasks\n        //   .filter(task => task.uploaderCandidates.length > 1)\n        ready.forEach((task) => {\n          uploadFile(\n            task.file,\n            // eslint-disable-next-line max-nested-callbacks\n            sortBy(task.uploaderCandidates, (candidate) => candidate.uploader.priority)[0]\n          )\n        })\n      },\n      [pushToast, resolveUploader, types, uploadFile]\n    )\n\n    const [hoveringFiles, setHoveringFiles] = React.useState<FileInfo[]>([])\n    const handleFilesOut = React.useCallback(() => setHoveringFiles([]), [])\n\n    return (\n      <Root>\n        <FileTarget\n          {...rest}\n          ref={forwardedRef}\n          onFiles={handleFiles}\n          onFilesOver={setHoveringFiles}\n          onFilesOut={handleFilesOut}\n        >\n          {resolveUploader && hoveringFiles.length > 0 && (\n            <Overlay zOffset={10}>\n              <DropMessage\n                hoveringFiles={hoveringFiles}\n                types={types}\n                resolveUploader={resolveUploader}\n              />\n            </Overlay>\n          )}\n          {children}\n        </FileTarget>\n      </Root>\n    )\n  })\n}\n","import {useCallback} from 'react'\nimport scrollIntoView from 'scroll-into-view-if-needed'\nimport {useDidUpdate} from './useDidUpdate'\n\nconst SCROLL_OPTIONS = {scrollMode: 'if-needed'} as const\n\n/**\n * A hook to help make sure the parent element of a value edited in a dialog (or \"out of band\") stays\n visible in the background\n * @param elementRef The element to scroll into view when the proivided focusWithin changes from true to false\n * @param hasFocusWithin A boolean indicating whether we have has focus within the currently edited value\n */\nexport function useScrollIntoViewOnFocusWithin(\n  elementRef: {current: HTMLElement | null},\n  hasFocusWithin: boolean\n): void {\n  return useDidUpdate(\n    hasFocusWithin,\n    useCallback(\n      (hadFocus, hasFocus) => {\n        if (elementRef.current && !hadFocus && hasFocus) {\n          scrollIntoView(elementRef.current, SCROLL_OPTIONS)\n        }\n      },\n      [elementRef]\n    )\n  )\n}\n","import styled from 'styled-components'\nimport {Button, ButtonProps} from '@sanity/ui'\nimport React from 'react'\nimport {DragHandleIcon} from '@sanity/icons'\nimport {DRAG_HANDLE_ATTRIBUTE, sortableHandle} from './sortable'\n\nconst DragHandleButton = styled(Button)<{grid?: boolean}>`\n  cursor: ${(props) => (props.grid ? 'move' : 'ns-resize')};\n`\n\nconst DRAG_HANDLE_PROPS = {[DRAG_HANDLE_ATTRIBUTE]: true}\n\nexport const DragHandle = sortableHandle(function DragHandle(\n  props: {\n    grid?: boolean\n  } & ButtonProps\n) {\n  return (\n    <DragHandleButton\n      icon={DragHandleIcon}\n      mode=\"bleed\"\n      tabIndex={0}\n      data-ui=\"DragHandleButton\"\n      {...props}\n      {...DRAG_HANDLE_PROPS}\n    />\n  )\n})\n","/* eslint-disable react/jsx-no-bind */\nimport {SchemaType} from '@sanity/types'\nimport React, {ComponentProps, memo} from 'react'\nimport {MenuGroup, MenuItem, PopoverProps} from '@sanity/ui'\nimport {InsertAboveIcon, InsertBelowIcon} from '@sanity/icons'\n\ninterface Props {\n  types?: SchemaType[]\n  onInsert: (pos: 'before' | 'after', type: SchemaType) => void\n}\n\nconst MENU_POPOVER_PROPS: PopoverProps = {\n  portal: true,\n  tone: 'default',\n  placement: 'left',\n  constrainSize: true,\n} as const\n\nexport const InsertMenu = memo(function InsertMenu(props: Props) {\n  const {types, onInsert} = props\n  return (\n    <>\n      <InsertMenuGroup\n        pos=\"before\"\n        types={types}\n        onInsert={onInsert}\n        text=\"Add item before\"\n        icon={InsertAboveIcon}\n      />\n      <InsertMenuGroup\n        pos=\"after\"\n        types={types}\n        onInsert={onInsert}\n        text=\"Add item after\"\n        icon={InsertBelowIcon}\n      />\n    </>\n  )\n})\n\nfunction InsertMenuGroup(\n  props: Props & {\n    pos: 'before' | 'after'\n    text: ComponentProps<typeof MenuItem>['text']\n    icon: ComponentProps<typeof MenuItem>['icon']\n  }\n) {\n  const {types, onInsert, pos, text, icon} = props\n\n  if (types?.length === 1) {\n    return <MenuItem key={pos} text={text} icon={icon} onClick={() => onInsert(pos, types[0])} />\n  }\n  return (\n    <MenuGroup text={text} key={pos} popover={MENU_POPOVER_PROPS}>\n      {types?.map((insertableType) => (\n        <MenuItem\n          key={insertableType.name}\n          icon={insertableType.icon}\n          text={insertableType.title}\n          onClick={() => onInsert(pos, insertableType)}\n        />\n      ))}\n    </MenuGroup>\n  )\n}\n","import React, {ComponentProps} from 'react'\nimport {Card} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {MOVING_ITEM_CLASS_NAME} from '../../../common/sortable'\n\nconst Root = styled(Card)`\n  position: relative;\n  border: 1px solid transparent;\n  .dragHandle {\n    color: var(--card-shadow-umbra-color);\n  }\n  &:hover {\n    border-color: var(--card-shadow-umbra-color);\n    .dragHandle {\n      color: inherit;\n    }\n  }\n  &[aria-selected='true'] {\n    border-color: var(--card-focus-ring-color);\n  }\n  .${MOVING_ITEM_CLASS_NAME} & {\n    box-shadow: 0 0 0 0, 0 8px 17px 2px var(--card-shadow-umbra-color),\n      0 3px 14px 2px var(--card-shadow-penumbra-color),\n      0 5px 5px -3px var(--card-shadow-ambient-color);\n  }\n`\n\nexport const RowWrapper = React.forwardRef(function RowWrapper(\n  props: ComponentProps<typeof Card>,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {children, ...rest} = props\n  return (\n    <Root\n      {...rest}\n      ref={ref}\n      tone={props.tone}\n      /*prevent clicks in children from triggering onFocus on surrounding array input*/\n      tabIndex={-1}\n    >\n      {children}\n    </Root>\n  )\n})\n","/* eslint-disable no-nested-ternary */\nimport React, {useCallback} from 'react'\nimport {\n  Badge,\n  Box,\n  Button,\n  Card,\n  CardTone,\n  Flex,\n  Menu,\n  MenuButton,\n  MenuItem,\n  Text,\n  Tooltip,\n} from '@sanity/ui'\nimport {CopyIcon as DuplicateIcon, EllipsisVerticalIcon, TrashIcon} from '@sanity/icons'\nimport {useId} from '@reach/auto-id'\nimport {SchemaType} from '@sanity/types'\nimport {FormFieldValidationStatus} from '../../../../components/formField'\nimport {FieldPresence} from '../../../../../presence'\nimport {DragHandle} from '../../common/DragHandle'\nimport {randomKey} from '../../common/randomKey'\nimport {createProtoValue} from '../ArrayInput'\nimport {InsertMenu} from '../InsertMenu'\nimport {EMPTY_ARRAY} from '../../../../utils/empty'\nimport {ItemWithMissingType} from './ItemWithMissingType'\nimport {ItemLayoutProps} from './ItemLayoutProps'\nimport {RowWrapper} from './components/RowWrapper'\n\nconst dragHandle = <DragHandle paddingX={1} paddingY={3} />\n\nconst MENU_POPOVER_PROPS = {portal: true, tone: 'default'} as const\n\nexport const RowItem = React.forwardRef(function RegularItem(\n  props: ItemLayoutProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const focusRef = React.useRef<HTMLDivElement | null>(null)\n  const {\n    isSortable,\n    value,\n    onClick,\n    onFocus,\n    type,\n    readOnly,\n    presence,\n    onInsert,\n    insertableTypes,\n    onRemove,\n    renderPreview,\n    validation = EMPTY_ARRAY,\n    ...rest\n  } = props\n\n  const hasErrors = validation.some((v) => v.level === 'error')\n  const hasWarnings = validation.some((v) => v.level === 'warning')\n\n  const handleDuplicate = useCallback(() => {\n    onInsert({\n      items: [{...value, _key: randomKey()}],\n      position: 'after',\n    })\n  }, [onInsert, value])\n\n  const handleInsert = useCallback(\n    (pos: 'before' | 'after', insertType: SchemaType) => {\n      onInsert({\n        items: [{...createProtoValue(insertType), _key: randomKey()}],\n        position: pos,\n      })\n    },\n    [onInsert]\n  )\n  const id = useId()\n  return (\n    <RowWrapper\n      {...rest}\n      ref={ref}\n      radius={2}\n      padding={1}\n      tone={\n        (readOnly\n          ? 'transparent'\n          : hasErrors\n          ? 'critical'\n          : hasWarnings\n          ? 'caution'\n          : 'default') as CardTone\n      }\n    >\n      <Flex align=\"center\">\n        {isSortable && (\n          <Card className=\"dragHandle\" tone=\"inherit\" marginRight={1}>\n            {dragHandle}\n          </Card>\n        )}\n\n        {type ? (\n          <Card\n            as=\"button\"\n            type=\"button\"\n            tone=\"inherit\"\n            radius={2}\n            padding={1}\n            flex={1}\n            onClick={onClick}\n            ref={focusRef}\n            onFocus={onFocus}\n            __unstable_focusRing\n          >\n            {renderPreview({\n              layout:\n                type.options && 'layout' in type.options && type.options?.layout === 'grid'\n                  ? 'media'\n                  : 'default',\n              schemaType: type,\n              value,\n            })}\n          </Card>\n        ) : (\n          <Box flex={1}>\n            <ItemWithMissingType value={value} onFocus={onFocus} />\n          </Box>\n        )}\n\n        <Flex align=\"center\">\n          {!readOnly && presence.length > 0 && (\n            <Box marginLeft={1}>\n              <FieldPresence presence={presence} maxAvatars={1} />\n            </Box>\n          )}\n\n          {validation.length > 0 && (\n            <Box marginLeft={1} paddingX={1} paddingY={3}>\n              <FormFieldValidationStatus __unstable_showSummary={!value?._ref} />\n            </Box>\n          )}\n\n          {!readOnly && (\n            <MenuButton\n              button={<Button padding={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n              id={`${id}-menuButton`}\n              menu={\n                <Menu>\n                  <MenuItem text=\"Remove\" tone=\"critical\" icon={TrashIcon} onClick={onRemove} />\n                  <MenuItem text=\"Duplicate\" icon={DuplicateIcon} onClick={handleDuplicate} />\n                  <InsertMenu types={insertableTypes} onInsert={handleInsert} />\n                </Menu>\n              }\n              placement=\"right\"\n              popover={MENU_POPOVER_PROPS}\n            />\n          )}\n\n          {!value._key && (\n            <Box marginLeft={1}>\n              <Tooltip\n                content={\n                  <Box padding={2}>\n                    <Text muted size={1}>\n                      This item is missing the required <code>_key</code> property.\n                    </Text>\n                  </Box>\n                }\n                placement=\"top\"\n              >\n                <Badge mode=\"outline\" tone=\"caution\">\n                  Missing key\n                </Badge>\n              </Tooltip>\n            </Box>\n          )}\n        </Flex>\n      </Flex>\n    </RowWrapper>\n  )\n})\n","import {\n  CopyIcon as DuplicateIcon,\n  EllipsisVerticalIcon,\n  TrashIcon,\n  WarningOutlineIcon,\n} from '@sanity/icons'\nimport React, {useCallback, useMemo} from 'react'\nimport {Badge, Box, Button, Card, Flex, Menu, MenuButton, MenuItem, Text, Tooltip} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {useId} from '@reach/auto-id'\nimport {SchemaType} from '@sanity/types'\nimport {FormFieldValidationStatus} from '../../../../components/formField'\nimport {FieldPresence} from '../../../../../presence'\nimport {DragHandle} from '../../common/DragHandle'\nimport {randomKey} from '../../common/randomKey'\nimport {createProtoValue} from '../ArrayInput'\nimport {InsertMenu} from '../InsertMenu'\nimport {FIXME} from '../../../../types'\nimport {EMPTY_ARRAY} from '../../../../utils/empty'\nimport {ItemWithMissingType} from './ItemWithMissingType'\nimport {ItemLayoutProps} from './ItemLayoutProps'\n\nconst dragHandle = <DragHandle grid padding={2} mode=\"ghost\" />\n\nconst DragHandleCard = styled(Card)`\n  position: absolute;\n  top: 0;\n  left: 0;\n`\nconst PresenceFlex = styled(Flex)`\n  position: absolute;\n  top: 0;\n  right: 0;\n  height: 35px;\n`\n\nconst Root = styled(Card)`\n  transition: border-color 250ms;\n  position: relative;\n\n  @media (hover: hover) {\n    ${DragHandleCard} {\n      opacity: 0;\n    }\n\n    &:hover,\n    &:focus-within {\n      ${DragHandleCard} {\n        opacity: 1;\n      }\n    }\n  }\n\n  &[aria-selected='true'] {\n    box-shadow: 0 0 0 2px var(--card-focus-ring-color);\n  }\n`\n\nconst FooterFlex = styled(Flex)`\n  min-height: 35px;\n`\n\nconst PreviewCard = styled(Card)`\n  border-top-right-radius: inherit;\n  border-top-left-radius: inherit;\n  height: 100%;\n\n  @media (hover: hover) {\n    &:hover {\n      filter: brightness(95%);\n    }\n  }\n\n  &:focus:focus-visible {\n    box-shadow: 0 0 0 2px var(--card-focus-ring-color);\n  }\n`\nconst MissingTypeBox = styled(Box)`\n  padding-bottom: 100%;\n`\n\nconst StyledItemWithMissingType = styled(ItemWithMissingType)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n`\n\nexport const CellItem = React.forwardRef(function ItemCell(\n  props: ItemLayoutProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const focusRef = React.useRef<HTMLDivElement | null>(null)\n  const {\n    isSortable,\n    value,\n    onClick,\n    onFocus,\n    onInsert,\n    insertableTypes,\n    type,\n    readOnly,\n    presence,\n    onRemove,\n    renderPreview,\n    validation = EMPTY_ARRAY,\n    ...rest\n  } = props\n\n  const hasError = validation.filter((item) => item.level === 'error').length > 0\n  const hasWarning = validation.filter((item) => item.level === 'warning').length > 0\n\n  const tone = useMemo(() => {\n    if (!value._key) {\n      return 'caution'\n    }\n\n    if (hasError) {\n      return 'critical'\n    }\n    if (hasWarning) {\n      return 'caution'\n    }\n\n    return undefined\n  }, [hasError, hasWarning, value._key])\n\n  const handleDuplicate = useCallback(() => {\n    onInsert?.({\n      items: [{...value, _key: randomKey()}],\n      position: 'after',\n    })\n  }, [onInsert, value])\n\n  const handleInsert = useCallback(\n    (pos: 'before' | 'after', insertType: SchemaType) => {\n      onInsert?.({\n        items: [createProtoValue(insertType)],\n        position: pos,\n      })\n    },\n    [onInsert, value._key]\n  )\n\n  const id = useId()\n\n  return (\n    <Root {...rest} radius={2} ref={ref} border tone={tone}>\n      {/* Preview */}\n      {type ? (\n        <PreviewCard\n          tone=\"inherit\"\n          data-ui=\"PreviewCard\"\n          forwardedAs={'button' as FIXME}\n          type=\"button\"\n          overflow=\"auto\"\n          flex={1}\n          tabIndex={0}\n          onClick={onClick}\n          ref={focusRef}\n          onFocus={onFocus}\n          __unstable_focusRing\n        >\n          {renderPreview({\n            layout: 'media',\n            schemaType: type,\n            value,\n            withBorder: false,\n            withRadius: false,\n          })}\n        </PreviewCard>\n      ) : (\n        <MissingTypeBox flex={1}>\n          <StyledItemWithMissingType value={value} onFocus={onFocus} vertical />\n        </MissingTypeBox>\n      )}\n\n      <DragHandleCard margin={1} radius={2} display=\"flex\" tone=\"inherit\" data-ui=\"DragHandleCard\">\n        {!readOnly && isSortable && dragHandle}\n      </DragHandleCard>\n\n      <PresenceFlex align=\"center\" marginX={1}>\n        {!readOnly && <FieldPresence presence={presence} maxAvatars={1} />}\n      </PresenceFlex>\n\n      {/* Footer */}\n      <FooterFlex align=\"center\" paddingX={1} sizing=\"border\" justify=\"space-between\">\n        <Flex>\n          {/* Validation status */}\n          {value?._key && validation.length > 0 && (\n            <Box marginLeft={1} paddingX={1} paddingY={3}>\n              <FormFieldValidationStatus\n                validation={validation}\n                __unstable_showSummary={!value?._ref}\n                placement=\"bottom\"\n                portal\n              />\n            </Box>\n          )}\n\n          {/* Badge: missing key */}\n          {!value._key && (\n            <Tooltip\n              portal\n              content={\n                <Card padding={2}>\n                  <Text size={1}>\n                    This item is missing a required <code>_key</code> property.\n                  </Text>\n                </Card>\n              }\n            >\n              <Badge mode=\"outline\" tone=\"caution\" margin={1} padding={2} fontSize={1}>\n                <WarningOutlineIcon /> key\n              </Badge>\n            </Tooltip>\n          )}\n        </Flex>\n        {/* Menu */}\n        {!readOnly && (\n          <Box>\n            <MenuButton\n              button={<Button padding={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n              id={`${id}-menuButton`}\n              portal\n              menu={\n                <Menu>\n                  <MenuItem text=\"Remove\" tone=\"critical\" icon={TrashIcon} onClick={onRemove} />\n                  <MenuItem text=\"Duplicate\" icon={DuplicateIcon} onClick={handleDuplicate} />\n                  <InsertMenu types={insertableTypes} onInsert={handleInsert} />\n                </Menu>\n              }\n            />\n          </Box>\n        )}\n      </FooterFlex>\n    </Root>\n  )\n})\n","/* eslint-disable camelcase */\n\nimport {isReferenceSchemaType, Path, SchemaType} from '@sanity/types'\nimport {Box} from '@sanity/ui'\nimport React, {memo, useCallback, useRef} from 'react'\nimport {ChangeIndicator} from '../../../../../components/changeIndicators'\nimport {_ArrayInput_ArrayMember} from '../types'\nimport {useScrollIntoViewOnFocusWithin} from '../../../../hooks/useScrollIntoViewOnFocusWithin'\nimport {useDidUpdate} from '../../../../hooks/useDidUpdate'\nimport {FIXME, RenderPreviewCallback} from '../../../../types'\nimport {useChildPresence} from '../../../../studio/contexts/Presence'\nimport {RowItem} from './RowItem'\nimport {CellItem} from './CellItem'\n\nexport interface ArrayItemProps {\n  children: React.ReactNode\n  focused?: boolean\n  changed: boolean\n  layout?: 'grid'\n  index: number\n  insertableTypes: SchemaType[]\n  onClick: () => void\n  onFocus: (event: React.FocusEvent) => void\n  onInsert: (event: {items: unknown[]; position: 'before' | 'after'}) => void\n  onRemove: (value: _ArrayInput_ArrayMember) => void\n  open: boolean\n  path: Path\n  presence: FIXME[]\n  readOnly?: boolean\n  renderPreview: RenderPreviewCallback\n  schemaType: SchemaType\n  validation: FIXME[]\n  value: _ArrayInput_ArrayMember\n}\n\n// This renders the item / preview of unexpanded array items\nexport const ArrayItem = memo(function ArrayItem(props: ArrayItemProps) {\n  const {\n    changed,\n    value,\n    insertableTypes,\n    schemaType,\n    index,\n    open,\n    path,\n    onClick,\n    layout,\n    readOnly,\n    presence = [],\n    validation = [],\n    focused,\n    onRemove,\n    onInsert,\n    onFocus,\n    children,\n    renderPreview,\n  } = props\n\n  const innerElementRef = useRef<HTMLDivElement | null>(null)\n\n  // this is here to make sure the item is visible if it's being edited behind a modal\n  useScrollIntoViewOnFocusWithin(innerElementRef, open)\n\n  useDidUpdate(focused, (hadFocus, hasFocus) => {\n    if (!hadFocus && hasFocus && innerElementRef.current) {\n      // Note: if editing an inline item, focus is handled by the item input itself and no ref is being set\n      innerElementRef.current?.focus()\n    }\n  })\n\n  const childPresence = useChildPresence(path)\n\n  const handleRemove = useCallback(() => onRemove(value!), [onRemove, value])\n\n  const options = schemaType.options || {}\n  const isSortable = !readOnly && options.sortable !== false\n\n  const isGrid = layout === 'grid'\n  const ItemComponent = isGrid ? CellItem : RowItem\n\n  const isReference = schemaType && isReferenceSchemaType(schemaType)\n\n  const item = (\n    <ItemComponent\n      aria-selected={open}\n      index={index}\n      onFocus={onFocus}\n      value={value}\n      readOnly={readOnly}\n      type={schemaType}\n      insertableTypes={insertableTypes}\n      presence={open ? presence : childPresence}\n      validation={validation}\n      isSortable={isSortable}\n      onInsert={onInsert}\n      onClick={onClick}\n      onRemove={handleRemove}\n      ref={innerElementRef}\n      renderPreview={renderPreview}\n    />\n  )\n\n  return (\n    <>\n      <ChangeIndicator\n        path={path}\n        disabled={open && !isReference}\n        isChanged={changed}\n        hasFocus={!!focused}\n      >\n        {isGrid ? (\n          // grid should be rendered without a margin\n          item\n        ) : (\n          <Box marginX={1}>{item}</Box>\n        )}\n      </ChangeIndicator>\n      {children}\n    </>\n  )\n})\n","/* eslint-disable camelcase */\n/* eslint-disable react/default-props-match-prop-types */\n/* eslint-disable react/jsx-handler-names */\n\nimport {\n  isKeySegment,\n  isObjectSchemaType,\n  isReferenceSchemaType,\n  KeyedSegment,\n  SchemaType,\n} from '@sanity/types'\nimport {isPlainObject} from 'lodash'\nimport {Box, Button, Card, Dialog, Flex, Spinner, Stack, Text, ToastParams} from '@sanity/ui'\nimport React from 'react'\nimport {map} from 'rxjs/operators'\nimport {Subscription} from 'rxjs'\nimport {randomKey, resolveTypeName} from '@sanity/util/content'\nimport {SanityClient} from '@sanity/client'\nimport {Uploader, UploaderResolver, UploadEvent} from '../../../studio/uploads/types'\nimport {getSchemaTypeTitle} from '../../../../schema/helpers'\nimport {isDev} from '../../../../environment'\nimport {Alert} from '../../../components/Alert'\nimport {Details} from '../../../components/Details'\nimport {Item, List} from '../common/list'\nimport {applyAll} from '../../../patch/applyPatch'\nimport {PatchEvent, unset} from '../../../patch'\nimport {ItemProps} from '../../../types/itemProps'\nimport {DefaultArrayInputFunctions} from '../common/ArrayFunctions'\nimport {ArrayOfObjectsMember} from '../../../store'\nimport {ArrayOfObjectsInputProps} from '../../../types'\nimport {isObjectItemProps} from '../../../types/asserters'\nimport {withFocusRing} from '../../../components/withFocusRing'\nimport {ArrayOfObjectsItem, MemberItemError} from '../../../members'\nimport type {_ArrayInput_ArrayMember, _InsertEvent} from './types'\nimport {uploadTarget} from './uploadTarget/uploadTarget'\nimport {isEmpty} from './item/helpers'\nimport {ArrayItem} from './item/ArrayItem'\n\ntype Toast = {push: (params: ToastParams) => void}\n\nexport function createProtoValue(type: SchemaType): _ArrayInput_ArrayMember {\n  if (!isObjectSchemaType(type)) {\n    throw new Error(\n      `Invalid item type: \"${type.type}\". Default array input can only contain objects (for now)`\n    )\n  }\n\n  const _key = randomKey(12)\n  return type.name === 'object' ? {_key} : {_type: type.name, _key}\n}\n\n/**\n * @internal\n */\nexport interface _ArrayInputState {\n  isResolvingInitialValue: boolean\n}\n\nconst UploadTarget = uploadTarget(withFocusRing(Card))\n\nexport interface ArrayInputProps extends ArrayOfObjectsInputProps<_ArrayInput_ArrayMember> {\n  resolveUploader: UploaderResolver\n  client: SanityClient\n}\n\nexport class ArrayInput extends React.PureComponent<ArrayInputProps> {\n  _focusArea: HTMLElement | null = null\n  toast: any | null = null\n\n  uploadSubscriptions: Record<string, Subscription> = {}\n  state: _ArrayInputState = {\n    isResolvingInitialValue: false,\n  }\n\n  insert = (\n    item: _ArrayInput_ArrayMember,\n    position: 'before' | 'after',\n    referenceItem: number | KeyedSegment\n  ) => {\n    const {onInsert} = this.props\n    onInsert({items: [item], position, referenceItem})\n  }\n\n  handlePrepend = (value: _ArrayInput_ArrayMember) => {\n    this.handleInsert({item: value, position: 'before', referenceItem: 0})\n  }\n\n  handleAppend = (value: _ArrayInput_ArrayMember) => {\n    this.handleInsert({item: value, position: 'after', referenceItem: -1})\n  }\n\n  handleInsert = (event: _InsertEvent) => {\n    const {onFocusPath, onOpenItem, resolveInitialValue} = this.props\n    this.setState({isResolvingInitialValue: true})\n    const memberType = this.getMemberTypeOfItem(event.item)\n\n    if (!memberType) {\n      throw new Error(`Type \"${event.item._type}\" not valid for this array`)\n    }\n\n    const resolvedInitialValue =\n      isEmpty(event.item) && resolveInitialValue\n        ? resolveInitialValue(memberType, event.item)\n        : Promise.resolve({})\n\n    resolvedInitialValue\n      .then((initial) => ({...event.item, ...initial}))\n      .then(\n        (value) => {\n          this.insert(value, event.position, event.referenceItem)\n        },\n        (error) => {\n          this.toast?.push({\n            title: `Could not resolve initial value`,\n            description: `Unable to resolve initial value for type: ${memberType.name}: ${error.message}.`,\n            status: 'error',\n          })\n\n          this.insert(event.item, event.position, event.referenceItem)\n        }\n      )\n      .finally(() => {\n        this.setState({isResolvingInitialValue: false})\n        if (event.edit !== false) {\n          onOpenItem(this.props.path.concat([{_key: event.item._key}]))\n        }\n        onFocusPath([{_key: event.item._key}])\n      })\n  }\n\n  getMemberTypeOfItem(item: _ArrayInput_ArrayMember): SchemaType | undefined {\n    const {schemaType} = this.props\n    const itemTypeName = resolveTypeName(item)\n    return schemaType.of.find((memberType) => memberType.name === itemTypeName)\n  }\n\n  handleRemoveItem = (item: _ArrayInput_ArrayMember) => {\n    this.removeItem(item)\n  }\n\n  removeItem(item: _ArrayInput_ArrayMember) {\n    const {onChange, onFocusPath, value} = this.props\n\n    // create a patch for removing the item\n    const patch = unset(isKeySegment(item) ? [{_key: item._key}] : [value?.indexOf(item) || -1])\n\n    // apply the patch to the current value\n    const result = applyAll(value || [], [patch])\n\n    // if the result is an empty array\n    if (Array.isArray(result) && !result.length) {\n      // then unset the value\n      onChange(unset())\n    } else {\n      // otherwise apply the patch\n      onChange(patch)\n    }\n\n    if (item._key in this.uploadSubscriptions) {\n      this.uploadSubscriptions[item._key].unsubscribe()\n    }\n\n    // move focus to the nearest sibling\n    const idx = value?.indexOf(item) || -1\n    const nearestSibling = value?.[idx + 1] || value?.[idx - 1]\n\n    // if there's no siblings we want to focus the input itself\n    onFocusPath(nearestSibling ? [{_key: nearestSibling._key}] : [])\n  }\n\n  handleSortEnd = (event: {newIndex: number; oldIndex: number}) => {\n    const {value, onMoveItem} = this.props\n    const item = value?.[event.oldIndex]\n    const refItem = value?.[event.newIndex]\n\n    if (!item?._key || !refItem?._key) {\n      // eslint-disable-next-line no-console\n      console.error(\n        'Neither the item you are moving nor the item you are moving to have a key. Cannot continue.'\n      )\n\n      return\n    }\n\n    if (event.oldIndex === event.newIndex || item._key === refItem._key) {\n      return\n    }\n\n    onMoveItem({fromIndex: event.oldIndex, toIndex: event.newIndex})\n  }\n\n  focus() {\n    if (this._focusArea) {\n      this._focusArea.focus()\n    }\n  }\n\n  setFocusArea = (el: HTMLElement | null) => {\n    this._focusArea = el\n  }\n\n  setToast = (toast: any | null) => {\n    this.toast = toast\n  }\n  handleRemoveNonObjectValues = () => {\n    const {onChange, value} = this.props\n    const nonObjects = (value || [])\n      .reduce((acc: number[], val, i) => (isPlainObject(val) ? acc : acc.concat(i)), [])\n      .reverse()\n    const patches = nonObjects.map((index) => unset([index]))\n\n    onChange(patches)\n  }\n\n  handleUpload = ({file, type, uploader}: {file: File; type: SchemaType; uploader: Uploader}) => {\n    const {onChange, client} = this.props\n    const item = createProtoValue(type)\n    const key = item._key\n\n    this.insert(item, 'after', -1)\n\n    const events$ = uploader\n      .upload(client, file, type)\n      .pipe(\n        map((uploadEvent: UploadEvent) =>\n          PatchEvent.from(uploadEvent.patches || []).prefixAll({_key: key})\n        )\n      )\n\n    this.uploadSubscriptions = {\n      ...this.uploadSubscriptions,\n      [key]: events$.subscribe((event) => onChange(event.patches)),\n    }\n  }\n\n  renderItem = (itemProps: ItemProps) => {\n    if (!isObjectItemProps(itemProps)) {\n      throw new Error('Expected item to be of object type')\n    }\n\n    const {id, renderPreview, schemaType} = this.props\n\n    if (isReferenceSchemaType(itemProps.schemaType)) {\n      return itemProps.children\n    }\n\n    // We only want to enable focus on the array item when it is not open.\n    // This is because we want to remove the risk of focus being removed\n    // from focusable elements that you interact with inside the dialog.\n    const focused = itemProps.focused && !itemProps.open\n    const typeTitle = getSchemaTypeTitle(itemProps.schemaType)\n    return (\n      <ArrayItem\n        changed={itemProps.changed}\n        validation={itemProps.validation}\n        readOnly={itemProps.readOnly}\n        onInsert={itemProps.onInsert}\n        onRemove={itemProps.onRemove}\n        onFocus={itemProps.onFocus}\n        index={itemProps.index}\n        schemaType={itemProps.schemaType}\n        layout={schemaType.options?.layout}\n        insertableTypes={schemaType.of}\n        value={itemProps.value as _ArrayInput_ArrayMember}\n        focused={focused}\n        open={itemProps.open}\n        path={itemProps.path}\n        onClick={itemProps.onOpen}\n        presence={itemProps.presence}\n        renderPreview={renderPreview}\n      >\n        {itemProps.open ? (\n          <Dialog\n            width={1}\n            header={`Edit ${typeTitle}`}\n            id={`${id}-item-${itemProps.key}-dialog`}\n            onClose={itemProps.onClose}\n          >\n            <Box padding={4}>{itemProps.children}</Box>\n          </Dialog>\n        ) : null}\n      </ArrayItem>\n    )\n  }\n\n  renderMember(member: ArrayOfObjectsMember) {\n    const {renderField, renderInput, renderPreview} = this.props\n    if (member.kind === 'item') {\n      return (\n        <ArrayOfObjectsItem\n          member={member}\n          renderItem={this.renderItem}\n          renderField={renderField}\n          renderInput={renderInput}\n          renderPreview={renderPreview}\n        />\n      )\n    }\n\n    if (member.kind === 'error') {\n      return <MemberItemError member={member} />\n    }\n    //@ts-expect-error all possible cases should be covered\n    return <>Unknown member kind: ${member.kind}</>\n  }\n\n  render() {\n    const {\n      schemaType,\n      onChange,\n      value = [],\n      readOnly,\n      members,\n      elementProps,\n      resolveUploader,\n    } = this.props\n\n    const {isResolvingInitialValue} = this.state\n\n    const hasNonObjectValues = (value || []).some((item) => !isPlainObject(item))\n\n    if (hasNonObjectValues) {\n      return (\n        <Alert\n          status=\"error\"\n          suffix={\n            <Stack padding={2}>\n              <Button\n                onClick={this.handleRemoveNonObjectValues}\n                text=\"Remove non-object values\"\n                tone=\"critical\"\n              />\n            </Stack>\n          }\n          title={<>Invalid list values</>}\n        >\n          <Text as=\"p\" muted size={1}>\n            Some items in this list are not objects. This must be fixed in order to edit the list.\n          </Text>\n\n          <Details marginTop={4} open={isDev} title={<>Developer info</>}>\n            <Stack space={3}>\n              <Text as=\"p\" muted size={1}>\n                This usually happens when items are created using an API client, or when a custom\n                input component has added invalid data to the list.\n              </Text>\n            </Stack>\n          </Details>\n        </Alert>\n      )\n    }\n\n    const options = schemaType.options || {}\n    const isSortable = options.sortable !== false\n    const isGrid = options.layout === 'grid'\n    return (\n      <Stack space={3}>\n        <UploadTarget\n          types={schemaType.of}\n          resolveUploader={resolveUploader}\n          onUpload={this.handleUpload}\n          {...elementProps}\n          tabIndex={0}\n        >\n          <Stack data-ui=\"ArrayInput__content\" space={3}>\n            {members?.length === 0 && (\n              <Card padding={3} border style={{borderStyle: 'dashed'}} radius={2}>\n                <Text align=\"center\" muted size={1}>\n                  {schemaType.placeholder || <>No items</>}\n                </Text>\n              </Card>\n            )}\n            {(members?.length > 0 || isResolvingInitialValue) && (\n              <Card border radius={1} paddingY={isGrid ? 2 : 1} paddingX={isGrid ? 2 : undefined}>\n                <List onSortEnd={this.handleSortEnd} isSortable={isSortable} isGrid={isGrid}>\n                  {members.map((member, index) => {\n                    return (\n                      <Item key={member.key} isSortable={isSortable} isGrid={isGrid} index={index}>\n                        {this.renderMember(member)}\n                      </Item>\n                    )\n                  })}\n                  {isResolvingInitialValue && (\n                    <Item isGrid={isGrid} index={-1}>\n                      <Card radius={1} padding={1}>\n                        <Flex align=\"center\" justify=\"center\" padding={3}>\n                          <Box marginX={3}>\n                            <Spinner muted />\n                          </Box>\n                          <Text>Resolving initial valueâ€¦</Text>\n                        </Flex>\n                      </Card>\n                    </Item>\n                  )}\n                </List>\n              </Card>\n            )}\n          </Stack>\n        </UploadTarget>\n\n        <DefaultArrayInputFunctions\n          type={schemaType}\n          value={value}\n          readOnly={readOnly}\n          onAppendItem={this.handleAppend}\n          onPrependItem={this.handlePrepend}\n          onCreateValue={createProtoValue}\n          onChange={onChange}\n        />\n      </Stack>\n    )\n  }\n}\n","/**\n * Find the index of the nearest element with the same value. Starts at given index and looks incrementally in either direction for the searchElement\n * It's *NOT* inclusive: If the element matches the element at the startIdx, startIdx will be returned\n * It prefers matches in the first half. If there's a tie it will pick the first element that comes before\n * @param array\n * @param startIdx\n * @param searchElement\n */\nexport function nearestIndexOf<T>(array: T[], startIdx: number, searchElement: T) {\n  return nearestIndex(array, startIdx, (element) => element === searchElement)\n}\n\n/**\n * Find the index of the nearest element matching the predicate. Starts at given index and looks incrementally in either direction\n * It's *NOT* inclusive: If the predicate matches the element at the startIdx, startIdx will be returned\n * It prefers matches in the first half. If there's a tie it will pick the first element that comes before\n * @param array\n * @param startIdx\n * @param predicate\n */\nexport function nearestIndex<T>(\n  array: T[],\n  startIdx: number,\n  predicate: (element: T, index: number) => boolean\n) {\n  let lowerIdx = startIdx - 1\n  let upperIdx = startIdx\n  const len = array.length\n  while (lowerIdx > -1 || upperIdx < len) {\n    const upper = array[upperIdx]\n    if (upperIdx < len && predicate(upper, upperIdx)) {\n      return upperIdx\n    }\n    const lower = array[lowerIdx]\n    if (lowerIdx > -1 && predicate(lower, lowerIdx)) {\n      return lowerIdx\n    }\n    lowerIdx--\n    upperIdx++\n  }\n  return -1\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {Box, Button, Card, Flex, Menu, MenuButton, MenuItem} from '@sanity/ui'\nimport {SchemaType} from '@sanity/types'\nimport {CopyIcon as DuplicateIcon, EllipsisVerticalIcon, TrashIcon} from '@sanity/icons'\nimport {useId} from '@reach/auto-id'\nimport {FormFieldValidationStatus} from '../../../components/formField'\nimport {DragHandle} from '../common/DragHandle'\nimport {ItemWithMissingType} from '../ArrayOfObjectsInput/item/ItemWithMissingType'\nimport {InsertMenu} from '../ArrayOfObjectsInput/InsertMenu'\nimport {PrimitiveItemProps} from '../../../types/itemProps'\nimport {getEmptyValue} from './getEmptyValue'\n\nconst dragHandle = <DragHandle paddingX={1} paddingY={3} />\n\nexport type DefaultItemProps = PrimitiveItemProps & {\n  insertableTypes: SchemaType[]\n  onEnterKey: (item: number) => void\n  onEscapeKey: (item: number) => void\n  index: number\n  isSortable: boolean\n}\n\nexport const ItemRow = React.forwardRef(function ItemRow(\n  props: DefaultItemProps,\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {\n    isSortable,\n    value,\n    index,\n    onEscapeKey,\n    onEnterKey,\n    insertableTypes,\n    onInsert,\n    onRemove,\n    readOnly,\n    onFocus,\n    validation,\n    schemaType,\n  } = props\n\n  const hasError = validation.filter((item) => item.level === 'error').length > 0\n  const hasWarning = validation.filter((item) => item.level === 'warning').length > 0\n\n  const showValidationStatus = !readOnly && validation.length > 0 && !schemaType?.title\n\n  const handleRemove = useCallback(() => {\n    onRemove()\n  }, [onRemove])\n\n  const handleInsert = useCallback(\n    (pos: 'before' | 'after', insertType: SchemaType) => {\n      onInsert({position: pos, items: [getEmptyValue(insertType)]})\n    },\n    [onInsert]\n  )\n\n  const handleDuplicate = useCallback(() => {\n    if (value) onInsert({position: 'after', items: [value]})\n  }, [onInsert, value])\n\n  const handleKeyPress = useCallback(\n    (event: React.KeyboardEvent) => {\n      if (event.key === 'Enter') {\n        onEnterKey(index)\n      }\n    },\n    [index, onEnterKey]\n  )\n\n  const handleKeyUp = useCallback(\n    (event: React.KeyboardEvent<any>) => {\n      if (event.shiftKey && event.key === 'Backspace' && value === '') {\n        onRemove()\n      }\n\n      if (event.key === 'Escape') {\n        onEscapeKey(index)\n      }\n    },\n    [index, onEscapeKey, onRemove, value]\n  )\n\n  const tone = useMemo(() => {\n    if (hasError) {\n      return 'critical'\n    }\n    if (hasWarning) {\n      return 'caution'\n    }\n\n    return undefined\n  }, [hasError, hasWarning])\n\n  const id = useId()\n\n  return (\n    <Card tone={tone} radius={2} paddingX={1} paddingY={2}>\n      <Flex align={schemaType ? 'flex-end' : 'center'} ref={ref}>\n        {schemaType ? (\n          <Flex align=\"flex-end\" flex={1}>\n            {isSortable && <Box marginRight={1}>{dragHandle}</Box>}\n\n            <Box flex={1} marginRight={2}>\n              {props.children}\n            </Box>\n          </Flex>\n        ) : (\n          <Box flex={1}>\n            <ItemWithMissingType value={value} onFocus={onFocus} />\n          </Box>\n        )}\n\n        <Flex align=\"center\" marginLeft={2}>\n          {showValidationStatus && (\n            <Box marginRight={3}>\n              <FormFieldValidationStatus validation={validation} />\n            </Box>\n          )}\n\n          {/*{showPresence && (*/}\n          {/*  // if title is set on type, presence avatars will be shown in the input' formfield instead*/}\n          {/*  <Box marginRight={1}>*/}\n          {/*    <FieldPresence presence={presence} maxAvatars={1} />*/}\n          {/*  </Box>*/}\n          {/*)}*/}\n\n          {!readOnly && (\n            <Box paddingY={1}>\n              <MenuButton\n                button={<Button padding={2} mode=\"bleed\" icon={EllipsisVerticalIcon} />}\n                id={`${id}-menuButton`}\n                portal\n                popover={{portal: true, tone: 'default'}}\n                menu={\n                  <Menu>\n                    <MenuItem\n                      text=\"Remove\"\n                      tone=\"critical\"\n                      icon={TrashIcon}\n                      onClick={handleRemove}\n                    />\n\n                    <MenuItem text=\"Duplicate\" icon={DuplicateIcon} onClick={handleDuplicate} />\n                    <InsertMenu types={insertableTypes} onInsert={handleInsert} />\n                  </Menu>\n                }\n              />\n            </Box>\n          )}\n        </Flex>\n      </Flex>\n    </Card>\n  )\n})\n","/* eslint-disable react/no-unused-prop-types */\n\nimport {ArraySchemaType, isReferenceSchemaType} from '@sanity/types'\nimport {AddIcon} from '@sanity/icons'\nimport React, {useMemo} from 'react'\nimport {Box, Button, Grid, Menu, MenuButton, MenuItem, Tooltip, Text} from '@sanity/ui'\nimport {useId} from '@reach/auto-id'\nimport {FormArrayInputFunctionsProps} from '../../../types'\n\nexport function ArrayOfPrimitivesFunctions<\n  SchemaType extends ArraySchemaType,\n  MemberType extends string | boolean | number\n>(props: FormArrayInputFunctionsProps<SchemaType, MemberType>) {\n  const {type, readOnly, children, onCreateValue, onAppendItem} = props\n  const menuButtonId = useId()\n\n  const insertItem = React.useCallback(\n    (itemType) => {\n      onAppendItem(onCreateValue(itemType))\n    },\n    [onCreateValue, onAppendItem]\n  )\n\n  const handleAddBtnClick = React.useCallback(() => {\n    insertItem(type.of[0])\n  }, [type, insertItem])\n\n  const popoverProps = useMemo(() => ({constrainSize: true, portal: true}), [])\n\n  if (readOnly) {\n    return (\n      <Tooltip\n        portal\n        content={\n          <Box padding={2} sizing=\"border\">\n            <Text size={1} muted>\n              This field is read-only\n            </Text>\n          </Box>\n        }\n      >\n        <Grid>\n          <Button\n            icon={AddIcon}\n            mode=\"ghost\"\n            disabled\n            text={type.of.length === 1 ? 'Add item' : 'Add item...'}\n          />\n        </Grid>\n      </Tooltip>\n    )\n  }\n\n  return (\n    <Grid gap={1} style={{gridTemplateColumns: 'repeat(auto-fit, minmax(100px, 1fr))'}}>\n      {type.of.length === 1 ? (\n        <Button icon={AddIcon} mode=\"ghost\" onClick={handleAddBtnClick} text=\"Add item\" />\n      ) : (\n        <MenuButton\n          button={<Button icon={AddIcon} mode=\"ghost\" text=\"Add itemâ€¦\" />}\n          id={menuButtonId || ''}\n          menu={\n            <Menu>\n              {type.of.map((memberDef, i) => {\n                // Use reference icon if reference is to one type only\n                const referenceIcon =\n                  isReferenceSchemaType(memberDef) &&\n                  (memberDef.to || []).length === 1 &&\n                  memberDef.to[0].icon\n\n                const icon = memberDef.icon || memberDef.type?.icon || referenceIcon\n                return (\n                  <MenuItem\n                    key={i}\n                    text={memberDef.title || memberDef.type?.name}\n                    onClick={() => insertItem(memberDef)}\n                    icon={icon}\n                  />\n                )\n              })}\n            </Menu>\n          }\n          popover={popoverProps}\n        />\n      )}\n\n      {children}\n    </Grid>\n  )\n}\n\nArrayOfPrimitivesFunctions.__SANITY_INTERNAL_IMPLEMENTATION = true\n","import React from 'react'\nimport {get} from 'lodash'\nimport {ArraySchemaType} from '@sanity/types'\nimport {Card, Stack} from '@sanity/ui'\nimport {ArrayOfPrimitivesInputProps, FormArrayInputFunctionsProps} from '../../../types'\nimport {Item, List} from '../common/list'\nimport {PrimitiveItemProps} from '../../../types/itemProps'\nimport {MemberItemError, ArrayOfPrimitivesItem} from '../../../members'\nimport {getEmptyValue} from './getEmptyValue'\n\nimport {PrimitiveValue} from './types'\nimport {nearestIndexOf} from './utils/nearestIndex'\nimport {ItemRow} from './ItemRow'\nimport {ArrayOfPrimitivesFunctions} from './ArrayOfPrimitivesFunctions'\n\nexport interface DefaultArrayOfPrimitivesInputProps extends ArrayOfPrimitivesInputProps {\n  ArrayFunctionsImpl: React.ComponentType<\n    FormArrayInputFunctionsProps<ArraySchemaType<PrimitiveValue[]>, PrimitiveValue>\n  >\n}\n\nexport class ArrayOfPrimitivesInput extends React.PureComponent<DefaultArrayOfPrimitivesInputProps> {\n  _element: HTMLElement | null = null\n  _lastAddedIndex = -1\n\n  handleAppend = (itemValue: PrimitiveValue) => {\n    const {value = [], onFocusIndex, onAppendItem} = this.props\n    onAppendItem(itemValue)\n    onFocusIndex(value.length)\n  }\n\n  handlePrepend = (itemValue: PrimitiveValue) => {\n    const {onFocusIndex, value = [], onPrependItem} = this.props\n    onPrependItem(itemValue)\n    onFocusIndex(value.length)\n  }\n  handleItemEnterKey = (index: number) => {\n    const {schemaType, onInsert} = this.props\n    const firstType = schemaType?.of[0]\n    if (firstType) {\n      onInsert({\n        referenceIndex: index,\n        position: 'after',\n        items: [getEmptyValue(firstType)],\n      })\n      this._lastAddedIndex = index + 1\n    }\n  }\n\n  handleItemEscapeKey = (index: number) => {\n    const {value, onRemoveItem} = this.props\n    if (index === this._lastAddedIndex && value?.[index] === '') {\n      onRemoveItem(index)\n    }\n  }\n\n  handleSortEnd = (event: {oldIndex: number; newIndex: number}) => {\n    const {onFocusIndex, onMoveItem, value} = this.props\n    if (value) onMoveItem({fromIndex: event.oldIndex, toIndex: event.newIndex})\n    onFocusIndex(event.newIndex)\n  }\n\n  setElement = (el: HTMLElement | null) => {\n    this._element = el\n  }\n\n  focus() {\n    if (this._element) {\n      this._element.focus()\n    }\n  }\n\n  getSnapshotBeforeUpdate(prevProps: ArrayOfPrimitivesInputProps) {\n    const {focusPath: prevFocusPath = [], value: prevValue = []} = prevProps\n    const {focusPath = [], value = []} = this.props\n    if (prevFocusPath[0] === focusPath[0] && prevValue.length !== value.length) {\n      // the length of the array has changed, but the focus path has not, which may happen if someone inserts or removes a new item above the one currently in focus\n      const focusIndex = focusPath[0]\n\n      const selection = window.getSelection()\n      if (!(selection?.focusNode instanceof HTMLElement)) {\n        return null\n      }\n\n      const input = selection.focusNode?.querySelector('input,textarea')\n\n      return input instanceof HTMLInputElement\n        ? {\n            prevFocusedIndex: focusIndex,\n            restoreSelection: {\n              text: selection.toString(),\n              start: input.selectionStart,\n              end: input.selectionEnd,\n              value: input.value,\n            },\n          }\n        : {}\n    }\n\n    return null\n  }\n\n  componentDidUpdate(\n    prevProps: ArrayOfPrimitivesInputProps,\n    prevState: Record<string, unknown>,\n    snapshot?: {restoreSelection: {start: number; end: number}; prevFocusedIndex: number}\n  ) {\n    const {onFocusIndex} = this.props\n    if (snapshot?.restoreSelection && prevProps.value) {\n      const prevFocusedValue = prevProps.value[snapshot.prevFocusedIndex]\n\n      const nearestIndex = nearestIndexOf(\n        this.props.value || [],\n        snapshot.prevFocusedIndex,\n        prevFocusedValue\n      )\n\n      if (nearestIndex === -1) {\n        return\n      }\n      const newInput = this._element?.querySelector(\n        `[data-item-index='${nearestIndex}'] input,textarea`\n      )\n\n      if (newInput instanceof HTMLInputElement) {\n        newInput.focus()\n        try {\n          newInput.setSelectionRange(snapshot.restoreSelection.start, snapshot.restoreSelection.end)\n        } catch {\n          // not all inputs supports selection (e.g. <input type=\"number\" />)\n        }\n      }\n      onFocusIndex(nearestIndex)\n    }\n  }\n\n  renderItem = (props: PrimitiveItemProps) => {\n    const {schemaType, readOnly} = this.props\n    const isSortable = !readOnly && get(schemaType, 'options.sortable') !== false\n\n    return (\n      <ItemRow\n        {...props}\n        isSortable={isSortable}\n        insertableTypes={schemaType.of}\n        onEnterKey={this.handleItemEnterKey}\n        onEscapeKey={this.handleItemEscapeKey}\n      />\n    )\n  }\n\n  render() {\n    const {schemaType, members, readOnly, value, onChange, renderInput} = this.props\n\n    const isSortable = !readOnly && get(schemaType, 'options.sortable') !== false\n\n    return (\n      <Stack space={3}>\n        <Stack space={1}>\n          {members.length > 0 && (\n            <Card padding={1} border>\n              <List onSortEnd={this.handleSortEnd} isSortable={isSortable}>\n                {members.map((member, index) => {\n                  if (member.kind === 'item') {\n                    return (\n                      <Item\n                        key={member.key}\n                        index={index}\n                        data-item-index={index}\n                        isSortable={isSortable}\n                      >\n                        <ArrayOfPrimitivesItem\n                          member={member}\n                          renderInput={renderInput}\n                          renderItem={this.renderItem}\n                        />\n                      </Item>\n                    )\n                  }\n                  if (member.kind === 'error') {\n                    return <MemberItemError key={member.key} member={member} />\n                  }\n                  //@ts-expect-error all possible cases should be covered\n                  return <>Unknown member kind: ${member.kind}</>\n                })}\n              </List>\n            </Card>\n          )}\n        </Stack>\n\n        <ArrayOfPrimitivesFunctions\n          type={schemaType}\n          value={value}\n          readOnly={readOnly}\n          onAppendItem={this.handleAppend}\n          onPrependItem={this.handlePrepend}\n          onCreateValue={getEmptyValue}\n          onChange={onChange}\n        />\n      </Stack>\n    )\n  }\n}\n","import React, {ForwardedRef, forwardRef, useCallback} from 'react'\nimport {SchemaType} from '@sanity/types'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {resolveUploader as defaultResolveUploader} from '../uploads/resolveUploader'\nimport {ArrayInput} from '../../inputs/arrays/ArrayOfObjectsInput'\nimport {ArrayOfPrimitivesInput} from '../../inputs/arrays/ArrayOfPrimitivesInput'\nimport * as is from '../../utils/is'\nimport {useFormBuilder} from '../../useFormBuilder'\nimport {useClient} from '../../../hooks'\nimport {ArrayOfObjectsInputProps, ArrayOfPrimitivesInputProps} from '../../types'\nimport {FileLike} from '../uploads/types'\nimport {useResolveInitialValueForType} from '../../../datastores'\n\nexport function StudioArrayInput(props: ArrayOfObjectsInputProps) {\n  const formBuilder = useFormBuilder()\n  // todo abstract the client away\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const supportsImageUploads = formBuilder.__internal.image.directUploads\n  const supportsFileUploads = formBuilder.__internal.file.directUploads\n\n  const resolveUploader = useCallback(\n    (type: SchemaType, file: FileLike) => {\n      if (is.type('image', type) && !supportsImageUploads) {\n        return null\n      }\n      if (is.type('file', type) && !supportsFileUploads) {\n        return null\n      }\n\n      return defaultResolveUploader(type, file)\n    },\n    [supportsFileUploads, supportsImageUploads]\n  )\n\n  const resolveInitialValue = useResolveInitialValueForType()\n\n  return (\n    <ArrayInput\n      {...props}\n      resolveInitialValue={resolveInitialValue}\n      resolveUploader={resolveUploader}\n      client={client}\n    />\n  )\n}\n\nexport const StudioArrayOfPrimitivesInput = forwardRef(function StudioArrayOfPrimitivesInput(\n  props: Omit<ArrayOfPrimitivesInputProps, 'ArrayFunctionsImpl'>,\n  ref: ForwardedRef<ArrayOfPrimitivesInput>\n) {\n  const formBuilder = useFormBuilder()\n\n  return (\n    <ArrayOfPrimitivesInput\n      {...props}\n      ArrayFunctionsImpl={formBuilder.__internal.components.ArrayFunctions}\n      ref={ref}\n    />\n  )\n})\n","import {ArraySchemaType} from '@sanity/types'\nimport {ComponentType} from 'react'\nimport * as is from '../../utils/is'\nimport {OptionsArrayInput as OptionsArray} from '../../inputs/arrays/OptionsArrayInput'\nimport {PortableTextInput} from '../../inputs/PortableText/PortableTextInput'\nimport {TagsArrayInput} from '../../inputs/TagsArrayInput'\nimport {StudioArrayInput, StudioArrayOfPrimitivesInput} from '../inputs/StudioArrayInput'\n\nconst PRIMITIVES = ['string', 'number', 'boolean']\n\nexport function isArrayOfPrimitives(type: ArraySchemaType): boolean {\n  return type.of.every((ofType) => PRIMITIVES.includes(ofType.jsonType))\n}\n\nfunction isStringArray(type: ArraySchemaType): type is ArraySchemaType<string> {\n  return type.of.length === 1 && is.type('string', type.of[0])\n}\n\nfunction isTagsArray(type: ArraySchemaType<string>): boolean {\n  return type.options?.layout === 'tags'\n}\n\nfunction isPortableText(type: ArraySchemaType): boolean {\n  // TODO: better testing here, not only for type 'block' !\n  return type.of.some((memberType) => is.type('block', memberType))\n}\n\nexport function hasOptionsList(type: ArraySchemaType): boolean {\n  return Boolean(type.options?.list)\n}\n\nexport function resolveArrayInput(type: ArraySchemaType): ComponentType<any> {\n  if (isStringArray(type) && isTagsArray(type)) {\n    return TagsArrayInput\n  }\n\n  // Schema provides predefines list\n  if (hasOptionsList(type)) {\n    return OptionsArray\n  }\n\n  // Special component for array of primitive values\n  if (isArrayOfPrimitives(type)) {\n    return StudioArrayOfPrimitivesInput\n  }\n\n  // Use Portable Text editor if portable text.\n  if (isPortableText(type)) {\n    return PortableTextInput\n  }\n\n  // use default\n  return StudioArrayInput\n}\n","import {useId} from '@reach/auto-id'\nimport {isTitledListValue, TitledListValue} from '@sanity/types'\nimport {Box, Card, Flex, Inline, Radio, Select, Stack, Text} from '@sanity/ui'\nimport {capitalize} from 'lodash'\nimport React, {forwardRef, useCallback, useMemo} from 'react'\nimport {ChangeIndicator} from '../../components/changeIndicators'\nimport {PatchEvent, set, unset} from '../patch'\nimport {StringInputProps} from '../types'\n\nfunction toSelectItem(\n  option: TitledListValue<string | number> | string | number\n): TitledListValue<string | number> {\n  return isTitledListValue(option) ? option : {title: capitalize(`${option}`), value: option}\n}\n\nconst EMPTY_ITEM = {title: '', value: undefined}\n\nexport function SelectInput(props: StringInputProps) {\n  const {\n    value,\n    readOnly,\n    validationError,\n    schemaType,\n    onChange,\n    path,\n    changed,\n    focused,\n    elementProps,\n  } = props\n  const items = useMemo(\n    () => (schemaType.options?.list || []).map(toSelectItem),\n    [schemaType.options?.list]\n  )\n  const currentItem = items.find((item) => item.value === value)\n  const isRadio = schemaType.options && schemaType.options.layout === 'radio'\n\n  const itemFromOptionValue = useCallback(\n    (optionValue) => {\n      const index = Number(optionValue)\n\n      return items[index]\n    },\n    [items]\n  )\n\n  const optionValueFromItem = useCallback(\n    (item) => {\n      return String(items.indexOf(item))\n    },\n    [items]\n  )\n\n  const inputId = useId()\n\n  const handleChange = React.useCallback(\n    (nextItem: TitledListValue<string | number> | null) => {\n      onChange(\n        PatchEvent.from(typeof nextItem?.value === 'undefined' ? unset() : set(nextItem.value))\n      )\n    },\n    [onChange]\n  )\n\n  const handleSelectChange = useCallback(\n    (event: React.ChangeEvent<HTMLSelectElement>) => {\n      const nextItem = itemFromOptionValue(event.currentTarget.value)\n\n      if (!nextItem) {\n        handleChange(EMPTY_ITEM)\n        return\n      }\n\n      handleChange(nextItem)\n    },\n    [handleChange, itemFromOptionValue]\n  )\n\n  const content = isRadio ? (\n    <RadioSelect\n      {...elementProps}\n      value={currentItem}\n      inputId={inputId}\n      items={items}\n      direction={schemaType.options?.direction || 'vertical'}\n      customValidity={validationError}\n      onChange={handleChange}\n    />\n  ) : (\n    <Select\n      {...elementProps}\n      customValidity={validationError}\n      value={optionValueFromItem(currentItem)}\n      onChange={handleSelectChange}\n    >\n      {[EMPTY_ITEM, ...items].map((item, i) => (\n        <option key={`${i - 1}`} value={i - 1}>\n          {item.title}\n        </option>\n      ))}\n    </Select>\n  )\n  return (\n    <ChangeIndicator path={path} isChanged={changed} hasFocus={!!focused}>\n      {content}\n    </ChangeIndicator>\n  )\n}\n\nconst RadioSelect = forwardRef(function RadioSelect(\n  props: {\n    items: TitledListValue<string | number>[]\n    value?: TitledListValue<string | number>\n    direction: 'horizontal' | 'vertical'\n    readOnly?: boolean\n    onChange: (value: TitledListValue<string | number> | null) => void\n    onFocus: (event: React.FocusEvent<HTMLElement>) => void\n    customValidity?: string\n    inputId?: string\n  },\n\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const {items, value, onChange, onFocus, readOnly, customValidity, direction, inputId} = props\n\n  const Layout = direction === 'horizontal' ? Inline : Stack\n  return (\n    <Card border padding={3} radius={1}>\n      <Layout space={3} role=\"group\">\n        {items.map((item, index) => (\n          <RadioSelectItem\n            customValidity={customValidity}\n            inputId={inputId}\n            item={item}\n            key={index}\n            onChange={onChange}\n            onFocus={onFocus}\n            readOnly={readOnly}\n            ref={index === 0 ? ref : null}\n            value={value}\n          />\n        ))}\n      </Layout>\n    </Card>\n  )\n})\n\nconst RadioSelectItem = forwardRef(function RadioSelectItem(\n  props: {\n    customValidity?: string\n    inputId?: string\n    item: TitledListValue<string | number>\n    onChange: (value: TitledListValue<string | number> | null) => void\n    onFocus: (event: React.FocusEvent<HTMLElement>) => void\n    readOnly?: boolean\n    value?: TitledListValue<string | number>\n  },\n\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const {customValidity, inputId, item, onChange, onFocus, readOnly, value} = props\n\n  const handleChange = useCallback(() => {\n    onChange(item)\n  }, [item, onChange])\n\n  return (\n    <Flex as=\"label\" align=\"center\">\n      <Radio\n        ref={ref}\n        checked={value === item}\n        onChange={handleChange}\n        onFocus={onFocus}\n        readOnly={readOnly}\n        customValidity={customValidity}\n        name={inputId}\n      />\n\n      <Box marginLeft={2}>\n        <Text size={1} weight=\"semibold\">\n          {item.title}\n        </Text>\n      </Box>\n    </Flex>\n  )\n})\n","import React from 'react'\nimport {TextInput} from '@sanity/ui'\nimport {StringInputProps} from '../types'\n\nexport function StringInput(props: StringInputProps) {\n  const {validationError, elementProps} = props\n  return <TextInput {...elementProps} customValidity={validationError} />\n}\n","import {StringSchemaType} from '@sanity/types'\nimport {SelectInput} from '../../inputs/SelectInput'\nimport {StringInput} from '../../inputs/StringInput'\nimport {getOption} from './helpers'\n\nexport function resolveStringInput(type: StringSchemaType) {\n  return getOption(type, 'list') ? SelectInput : StringInput\n}\n","import type {SchemaType, RuleSpec, SchemaValidationValue, Rule} from '@sanity/types'\n\nconst normalizeRules = (\n  validation: SchemaValidationValue | undefined,\n  type?: SchemaType\n): Rule[] => {\n  if (typeof validation === 'function') {\n    throw new Error(\n      `Schema type \"${\n        type?.name || '<not-found>'\n      }\"'s \\`validation\\` was not run though \\`inferFromSchema\\``\n    )\n  }\n  if (!validation) return []\n  if (Array.isArray(validation)) return validation as Rule[]\n  return [validation]\n}\n\n/**\n * Finds the first matching validation rule spec from a Rule class instance.\n *\n * @internal\n * Note: This accesses private fields of the rule.\n */\nexport function getValidationRule<RuleFlag extends RuleSpec['flag']>(\n  type: SchemaType | undefined,\n  ruleName: RuleFlag\n): Extract<RuleSpec, {flag: RuleFlag}> | null {\n  for (const rule of normalizeRules(type?.validation, type)) {\n    for (const ruleSpec of rule._rules) {\n      if (ruleSpec.flag === ruleName) {\n        return ruleSpec as Extract<RuleSpec, {flag: RuleFlag}>\n      }\n    }\n  }\n\n  return null\n}\n","import React from 'react'\n\nimport {TextInput} from '@sanity/ui'\nimport {getValidationRule} from '../utils/getValidationRule'\nimport {NumberInputProps} from '../types'\n\nexport function NumberInput(props: NumberInputProps) {\n  const {schemaType, validationError, value, elementProps} = props\n\n  // Show numpad on mobile if only positive numbers is preferred\n  const minRule = getValidationRule(schemaType, 'min')\n  const onlyPositiveNumber = (minRule?.constraint || 0) >= 0\n\n  return (\n    <TextInput\n      {...elementProps}\n      type=\"number\"\n      step=\"any\"\n      inputMode={onlyPositiveNumber ? 'numeric' : 'text'}\n      customValidity={validationError}\n      value={value}\n      placeholder={schemaType.placeholder}\n      pattern={onlyPositiveNumber ? '[d]*' : undefined}\n    />\n  )\n}\n","import {NumberSchemaType} from '@sanity/types'\nimport {SelectInput} from '../../inputs/SelectInput'\nimport {NumberInput} from '../../inputs/NumberInput'\nimport {getOption} from './helpers'\n\nexport function resolveNumberInput(type: NumberSchemaType) {\n  return getOption(type, 'list') ? SelectInput : NumberInput\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport {Box, Card, Checkbox, Flex, Switch} from '@sanity/ui'\nimport {BooleanInputProps} from '../types'\nimport {FormFieldHeaderText} from '../components/formField/FormFieldHeaderText'\nimport {FormFieldStatus} from '../components/formField/FormFieldStatus'\n\nconst CenterAlignedBox = styled(Box)`\n  align-self: center;\n`\n\nconst ZeroLineHeightBox = styled(Box)`\n  line-height: 0;\n`\n\nexport function BooleanInput(props: BooleanInputProps) {\n  const {id, value, schemaType, readOnly, elementProps} = props\n  const layout = schemaType.options?.layout || 'switch'\n\n  const indeterminate = typeof value !== 'boolean'\n  const checked = value || false\n\n  const LayoutSpecificInput = layout === 'checkbox' ? Checkbox : Switch\n\n  return (\n    <Card border radius={1}>\n      <Flex>\n        <ZeroLineHeightBox padding={3}>\n          <LayoutSpecificInput\n            label={schemaType.title}\n            {...elementProps}\n            indeterminate={indeterminate}\n            checked={checked}\n            style={{margin: -4}}\n            disabled={readOnly}\n          />\n        </ZeroLineHeightBox>\n        <Box flex={1} paddingY={3}>\n          <FormFieldHeaderText\n            description={schemaType.description}\n            inputId={id}\n            // validation={validation}\n            title={schemaType.title}\n          />\n        </Box>\n        <CenterAlignedBox paddingX={3} paddingY={1}>\n          <FormFieldStatus maxAvatars={1} position=\"top\">\n            {/*<FieldPresence maxAvatars={1} presence={presence} />*/}\n          </FormFieldStatus>\n        </CenterAlignedBox>\n      </Flex>\n    </Card>\n  )\n}\n","import React from 'react'\nimport {TextInput} from '@sanity/ui'\nimport {StringInputProps} from '../types'\n\nexport type EmailInputProps = StringInputProps\n\nexport function EmailInput(props: EmailInputProps) {\n  const {validationError, elementProps} = props\n  return (\n    <TextInput {...elementProps} type=\"email\" inputMode=\"email\" customValidity={validationError} />\n  )\n}\n","import React, {useCallback} from 'react'\nimport {Box, Button, Card, Code, Stack, Text} from '@sanity/ui'\nimport {TrashIcon} from '@sanity/icons'\nimport {isDev} from '../../../environment'\nimport {FormPatch, PatchArg, PatchEvent, unset} from '../../patch'\nimport {Details} from '../../components/Details'\nimport {Alert} from '../../components/Alert'\n\ntype Props = {\n  fieldNames: string[]\n  value?: Record<string, unknown>\n  onChange(patch: FormPatch): void\n  onChange(patch: FormPatch[]): void\n  onChange(patch: PatchEvent): void\n  readOnly?: boolean\n}\n\nexport function UnknownFields(props: Props) {\n  const {fieldNames, onChange, readOnly, value} = props\n  const fieldsLen = fieldNames.length\n\n  const handleUnsetClick = useCallback(\n    (fieldName) => {\n      onChange(unset([fieldName]))\n    },\n    [onChange]\n  )\n\n  return (\n    <Alert\n      status=\"warning\"\n      title={\n        <>\n          {fieldsLen === 1 && <>Unknown field found</>}\n          {fieldsLen > 1 && <>Unknown fields found</>}\n        </>\n      }\n    >\n      <Text as=\"p\" muted size={1}>\n        {fieldsLen === 1 ? (\n          <>Encountered a field that is not defined in the schema.</>\n        ) : (\n          <>Encountered {fieldsLen} fields that are not defined in the schema.</>\n        )}\n      </Text>\n\n      <Details marginTop={4} open={isDev} title={<>Developer info</>}>\n        <Box marginBottom={3}>\n          <Text as=\"p\" muted size={1}>\n            {fieldsLen === 1 ? (\n              <>\n                This field is not defined in the schema, which could mean that the field definition\n                has been removed or that someone else has added it to their own local project and\n                have not deployed their changes yet.\n              </>\n            ) : (\n              <>\n                These fields are not defined in the documentâ€™s schema, which could mean that the\n                field definitions have been removed or that someone else has added them to their own\n                local project and have not deployed their changes yet.\n              </>\n            )}\n          </Text>\n        </Box>\n\n        <Stack as=\"ul\" space={3}>\n          {fieldNames.map((fieldName) => {\n            return (\n              <UnknownField\n                key={fieldName}\n                fieldName={fieldName}\n                onUnsetClick={handleUnsetClick}\n                readOnly={readOnly}\n                value={value?.[fieldName]}\n              />\n            )\n          })}\n        </Stack>\n      </Details>\n    </Alert>\n  )\n}\n\nfunction UnknownField({\n  fieldName,\n  onUnsetClick,\n  readOnly,\n  value,\n}: {\n  fieldName: string\n  onUnsetClick: (fieldName: string) => void\n  readOnly?: boolean\n  value: unknown\n}) {\n  const handleUnsetClick = useCallback(() => {\n    onUnsetClick(fieldName)\n  }, [fieldName, onUnsetClick])\n\n  return (\n    <Card as=\"li\" padding={3} radius={2} shadow={1} tone=\"caution\">\n      <Stack space={2}>\n        <Card border radius={1}>\n          <Card borderBottom padding={3}>\n            <Code weight=\"medium\">{fieldName}</Code>\n          </Card>\n          <Box overflow=\"auto\" padding={3}>\n            <Code language=\"json\">{JSON.stringify(value, null, 2)}</Code>\n          </Box>\n        </Card>\n\n        {readOnly && (\n          <Text as=\"p\" muted size={1}>\n            This field is <strong>read only</strong> according to the documentâ€™s schema and cannot\n            be unset. If you want to be able to unset this in Studio, make sure you remove the{' '}\n            <code>readOnly</code> field from the enclosing type in the schema.\n          </Text>\n        )}\n\n        {!readOnly && (\n          <Button\n            icon={TrashIcon}\n            onClick={handleUnsetClick}\n            tone=\"critical\"\n            text={<>Remove field</>}\n          />\n        )}\n      </Stack>\n    </Card>\n  )\n}\n","import {Card} from '@sanity/ui'\nimport styled from 'styled-components'\n\n// The negative margins here removes the extra space between the tabs and the fields when inside of a grid\nexport const FieldGroupTabsWrapper = styled(Card)<{$level?: number}>`\n  margin-bottom: ${({$level, theme}) => ($level === 0 ? 0 : theme.sanity.space[5] * -1)}px;\n  padding-bottom: ${({$level, theme}) =>\n    $level === 0 ? theme.sanity.space[4] : theme.sanity.space[4]}px;\n`\n","import React, {forwardRef} from 'react'\nimport {Tab} from '@sanity/ui'\n\ninterface GroupType {\n  'aria-controls': string\n  autoFocus?: boolean\n  disabled?: boolean\n  icon?: React.ComponentType\n  name: string\n  onClick?: (value: string) => void\n  selected: boolean\n  title: string\n}\n\nexport const GroupTab = forwardRef(function GroupTab(\n  props: GroupType,\n  ref: React.Ref<HTMLButtonElement>\n) {\n  // Separate props for resolving conditional hidden groups\n  const {onClick} = props\n\n  // Here goes the content of our component\n  const handleClick = React.useCallback(() => {\n    onClick?.(props.name)\n  }, [props.name, onClick])\n\n  return (\n    <Tab\n      data-testid={`group-tab-${name}`}\n      size={1}\n      id={`${props.name}-tab`}\n      label={props.title}\n      ref={ref}\n      {...props}\n      onClick={handleClick}\n    />\n  )\n})\n\nexport const GroupOption = (props: Omit<GroupType, 'onClick' | 'autoFocus'>) => {\n  const {name, title, ...rest} = props\n  const {selected} = props\n\n  return (\n    <option\n      title={title}\n      value={name}\n      id={`${name}-tab`}\n      aria-controls={rest['aria-controls']}\n      data-testid={`group-select-${name}`}\n      aria-selected={selected ? 'true' : 'false'}\n    >\n      {title || name}\n    </option>\n  )\n}\n","import React, {useCallback} from 'react'\nimport {ElementQuery, Select, TabList} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {FormFieldGroup} from '../../../types'\nimport {GroupOption, GroupTab} from './GroupTab'\n\ninterface FieldGroupTabsProps {\n  inputId?: string\n  groups: FormFieldGroup[]\n  shouldAutoFocus?: boolean\n  onClick?: (name: string) => void\n  disabled?: boolean\n}\n\nconst Root = styled(ElementQuery)`\n  /* Hide on small screens */\n  &[data-eq-max~='0'] [data-ui='TabList'] {\n    display: none;\n  }\n\n  /* Hide on medium to large screens */\n  [data-ui='Select'] {\n    display: none;\n  }\n\n  /* Show on small screens */\n  &[data-eq-max~='0'] [data-ui='Select'] {\n    display: block;\n  }\n`\n\n/* For medium to large screens, use TabList and Tab from Sanity UI  */\nconst GroupTabs = ({\n  inputId,\n  groups,\n  onClick,\n  shouldAutoFocus = true,\n  disabled,\n}: FieldGroupTabsProps) => (\n  <TabList space={2} data-testid=\"field-group-tabs\">\n    {groups\n      .map((group) => {\n        return (\n          <GroupTab\n            aria-controls={`${inputId}-field-group-fields`}\n            autoFocus={shouldAutoFocus && group.selected}\n            disabled={disabled}\n            icon={group?.icon}\n            key={`${inputId}-${group.name}-tab`}\n            name={group.name}\n            onClick={onClick}\n            selected={Boolean(group.selected)}\n            title={group.title || group.name}\n          />\n        )\n      })\n      .filter(Boolean)}\n  </TabList>\n)\n\n/* For small screens, use Select from Sanity UI  */\nconst GroupSelect = ({\n  groups,\n  inputId,\n  onSelect,\n  shouldAutoFocus = true,\n  disabled,\n}: Omit<FieldGroupTabsProps, 'onClick'> & {onSelect: (name: string) => void}) => {\n  const handleSelect = useCallback(\n    (event: React.ChangeEvent<HTMLSelectElement>) => {\n      onSelect(event.currentTarget.value)\n    },\n    [onSelect]\n  )\n\n  return (\n    <Select\n      fontSize={2}\n      onChange={handleSelect}\n      muted\n      data-testid=\"field-group-select\"\n      aria-label=\"Field groups\"\n      autoFocus={shouldAutoFocus}\n      disabled={disabled}\n      value={groups.find((g) => g.selected)?.name}\n    >\n      {groups.map((group) => {\n        // Separate hidden in order to resolve it to a boolean type\n        return (\n          <GroupOption\n            key={`${inputId}-${group.name}-tab`}\n            aria-controls={`${inputId}-field-group-fields`}\n            selected={Boolean(group.selected)}\n            disabled={group.disabled}\n            name={group.name}\n            title={group.title || group.name}\n          />\n        )\n      })}\n    </Select>\n  )\n}\n\nexport const FieldGroupTabs = React.memo(function FieldGroupTabs({\n  onClick,\n  disabled = false,\n  ...props\n}: FieldGroupTabsProps) {\n  const handleClick = useCallback(\n    (groupName) => {\n      onClick?.(groupName)\n    },\n    [onClick]\n  )\n\n  return (\n    <Root data-testid=\"field-group-root\">\n      <GroupTabs {...props} disabled={disabled} onClick={handleClick} />\n      <GroupSelect {...props} disabled={disabled} onSelect={handleClick} />\n    </Root>\n  )\n})\n","import React, {memo, useCallback, useMemo} from 'react'\nimport {Grid, Stack} from '@sanity/ui'\nimport {ObjectInputProps} from '../../types'\nimport {ObjectMembers} from '../../members'\nimport {UnknownFields} from './UnknownFields'\nimport {FieldGroupTabsWrapper} from './ObjectInput.styled'\nimport {FieldGroupTabs} from './fieldGroups/FieldGroupTabs'\n\nexport const ObjectInput = memo(function ObjectInput(props: ObjectInputProps) {\n  const {\n    schemaType,\n    groups,\n    members,\n    onChange,\n    renderInput,\n    renderField,\n    renderItem,\n    renderPreview,\n    level,\n    value,\n    id,\n    path,\n    onFieldGroupSelect,\n  } = props\n\n  const {columns} = schemaType.options || {}\n\n  const renderedUnknownFields = useMemo(() => {\n    if (!schemaType.fields) {\n      return null\n    }\n\n    const knownFieldNames = schemaType.fields.map((field) => field.name)\n    const unknownFields = Object.keys(value || {}).filter(\n      (key) => !key.startsWith('_') && !knownFieldNames.includes(key)\n    )\n\n    if (unknownFields.length === 0) {\n      return null\n    }\n\n    return <UnknownFields fieldNames={unknownFields} value={value} onChange={onChange} />\n  }, [onChange, schemaType.fields, value])\n\n  const renderObjectMembers = useCallback(\n    () => (\n      <ObjectMembers\n        members={members}\n        renderInput={renderInput}\n        renderField={renderField}\n        renderItem={renderItem}\n        renderPreview={renderPreview}\n      />\n    ),\n    [members, renderField, renderInput, renderItem, renderPreview]\n  )\n\n  if (members.length === 0) {\n    return null\n  }\n  return (\n    <Stack space={5}>\n      {groups.length > 0 ? (\n        <FieldGroupTabsWrapper $level={level} data-testid=\"field-groups\">\n          <FieldGroupTabs\n            inputId={id}\n            onClick={onFieldGroupSelect}\n            groups={groups}\n            shouldAutoFocus={path.length === 0}\n          />\n        </FieldGroupTabsWrapper>\n      ) : null}\n\n      {columns ? (\n        <Grid columns={columns} gap={4} marginTop={1}>\n          {renderObjectMembers()}\n        </Grid>\n      ) : (\n        renderObjectMembers()\n      )}\n\n      {renderedUnknownFields}\n    </Stack>\n  )\n})\n","import {Card, Text} from '@sanity/ui'\nimport React, {useCallback} from 'react'\n\ninterface CalendarDayProps {\n  date: Date\n  focused?: boolean\n  onSelect: (date: Date) => void\n  isCurrentMonth?: boolean\n  isToday: boolean\n  selected?: boolean\n}\n\nexport function CalendarDay(props: CalendarDayProps) {\n  const {date, focused, isCurrentMonth, isToday, onSelect, selected} = props\n\n  const handleClick = useCallback(() => {\n    onSelect(date)\n  }, [date, onSelect])\n\n  return (\n    <div aria-selected={selected} data-ui=\"CalendarDay\">\n      <Card\n        aria-label={date.toDateString()}\n        aria-pressed={selected}\n        as=\"button\"\n        __unstable_focusRing\n        data-weekday\n        data-focused={focused ? 'true' : ''}\n        role=\"button\"\n        tabIndex={-1}\n        onClick={handleClick}\n        padding={3}\n        radius={2}\n        selected={selected}\n        tone={isToday || selected ? 'primary' : 'default'}\n      >\n        <Text\n          muted={!selected && !isCurrentMonth}\n          style={{textAlign: 'center'}}\n          weight={isCurrentMonth ? 'medium' : 'regular'}\n        >\n          {date.getDate()}\n        </Text>\n      </Card>\n    </div>\n  )\n}\n","import {range} from 'lodash'\n\nexport const MONTH_NAMES = [\n  'January',\n  'February',\n  'March',\n  'April',\n  'May',\n  'June',\n  'July',\n  'August',\n  'September',\n  'October',\n  'November',\n  'December',\n]\n\nexport const WEEK_DAY_NAMES = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n\nexport const HOURS_24 = range(0, 24)\n\nexport const ARROW_KEYS = ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight']\n\nexport const DEFAULT_TIME_PRESETS = [\n  [0, 0],\n  [6, 0],\n  [12, 0],\n  [18, 0],\n  [23, 59],\n]\n\n// all weekdays except first\nexport const TAIL_WEEKDAYS = [1, 2, 3, 4, 5, 6]\n","import {addDays, eachWeekOfInterval, getWeek, lastDayOfMonth, startOfMonth} from 'date-fns'\nimport {TAIL_WEEKDAYS} from './constants'\n\nexport const getWeekStartsOfMonth = (date: Date): Date[] => {\n  const firstDay = startOfMonth(date)\n  return eachWeekOfInterval({\n    start: firstDay,\n    end: lastDayOfMonth(firstDay),\n  })\n}\n\nexport const getWeekDaysFromWeekStarts = (weekStarts: Date[]): Date[][] => {\n  return weekStarts.map((weekStart) => [\n    weekStart,\n    ...TAIL_WEEKDAYS.map((d) => addDays(weekStart, d)),\n  ])\n}\n\ntype Week = {\n  number: number\n  days: Date[]\n}\n\nexport const getWeeksOfMonth = (date: Date): Week[] =>\n  getWeekDaysFromWeekStarts(getWeekStartsOfMonth(date)).map(\n    (days): Week => ({\n      number: getWeek(days[0]),\n      days,\n    })\n  )\n\nexport const formatTime = (hours: number, minutes: number): string =>\n  `${`${hours}`.padStart(2, '0')}:${`${minutes}`.padStart(2, '0')}`\n","import {Box, Grid, Text} from '@sanity/ui'\nimport {isSameDay, isSameMonth} from 'date-fns'\nimport React from 'react'\nimport {CalendarDay} from './CalendarDay'\nimport {WEEK_DAY_NAMES} from './constants'\nimport {getWeeksOfMonth} from './utils'\n\ninterface CalendarMonthProps {\n  date: Date\n  focused?: Date\n  selected?: Date\n  onSelect: (date: Date) => void\n  hidden?: boolean\n}\n\nexport function CalendarMonth(props: CalendarMonthProps) {\n  return (\n    <Box aria-hidden={props.hidden || false} data-ui=\"CalendarMonth\">\n      <Grid gap={1} style={{gridTemplateColumns: 'repeat(7, minmax(44px, 46px))'}}>\n        {WEEK_DAY_NAMES.map((weekday) => (\n          <Box key={weekday} paddingY={2}>\n            <Text size={1} weight=\"medium\" style={{textAlign: 'center'}}>\n              {weekday}\n            </Text>\n          </Box>\n        ))}\n\n        {getWeeksOfMonth(props.date).map((week, weekIdx) =>\n          week.days.map((date, dayIdx) => {\n            const focused = props.focused && isSameDay(date, props.focused)\n            const selected = props.selected && isSameDay(date, props.selected)\n            const isToday = isSameDay(date, new Date())\n            const isCurrentMonth = props.focused && isSameMonth(date, props.focused)\n\n            return (\n              <CalendarDay\n                date={date}\n                focused={focused}\n                isCurrentMonth={isCurrentMonth}\n                isToday={isToday}\n                // eslint-disable-next-line react/no-array-index-key\n                key={`${weekIdx}-${dayIdx}`}\n                onSelect={props.onSelect}\n                selected={selected}\n              />\n            )\n          })\n        )}\n      </Grid>\n    </Box>\n  )\n}\n","export const features = {\n  dayPresets: false,\n  timePresets: false,\n}\n","import React from 'react'\nimport {TextInput} from '@sanity/ui'\n\ntype TextInputProps = React.ComponentProps<typeof TextInput>\n\n// todo: delete this when v0.34 of @sanity/ui is out\ntype Workaround = any\n\ntype Props = Workaround &\n  Omit<TextInputProps, 'onChange'> & {\n    onChange?: (\n      event: React.FocusEvent<HTMLInputElement> | React.ChangeEvent<HTMLInputElement>\n    ) => void\n  }\n\n/**\n * A TextInput that only emit onChange when it has to\n * By default it will only emit onChange when: 1) user hits enter or 2) user leaves the\n * field (e.g. onBlur) and the input value at this time is different from the given `value` prop\n */\nexport const LazyTextInput = React.forwardRef(function LazyTextInput(\n  {onChange, onBlur, onKeyPress, value, ...rest}: Props,\n  forwardedRef: React.ForwardedRef<HTMLInputElement>\n) {\n  const [inputValue, setInputValue] = React.useState<string>()\n\n  const handleChange = React.useCallback((event) => {\n    setInputValue(event.currentTarget.value)\n  }, [])\n\n  const checkEvent = React.useCallback(\n    (event) => {\n      const currentValue = event.currentTarget.value\n      if (currentValue !== `${value}`) {\n        if (onChange) {\n          onChange(event)\n        }\n      }\n      setInputValue(undefined)\n    },\n    [onChange, value]\n  )\n\n  const handleBlur = React.useCallback(\n    (e) => {\n      checkEvent(e)\n      if (onBlur) {\n        onBlur(e)\n      }\n    },\n    [checkEvent, onBlur]\n  )\n\n  const handleKeyPress = React.useCallback(\n    (e: React.KeyboardEvent<HTMLInputElement>) => {\n      if (e.key === 'Enter') {\n        checkEvent(e)\n      }\n      if (onKeyPress) {\n        onKeyPress(e)\n      }\n    },\n    [checkEvent, onKeyPress]\n  )\n\n  return (\n    <TextInput\n      {...rest}\n      data-testid=\"date-input\"\n      ref={forwardedRef}\n      value={inputValue === undefined ? value : inputValue}\n      onChange={handleChange}\n      onBlur={handleBlur}\n      onKeyPress={handleKeyPress}\n    />\n  )\n})\n","import React from 'react'\nimport {TextInput} from '@sanity/ui'\nimport {LazyTextInput} from '../LazyTextInput'\n\ntype Props = Omit<React.ComponentProps<typeof TextInput>, 'onChange' | 'value'> & {\n  value?: number\n  onChange: (year: number) => void\n}\n\nexport const YearInput = ({onChange, ...props}: Props) => {\n  const handleChange = React.useCallback(\n    (event: React.FocusEvent<HTMLInputElement> | React.ChangeEvent<HTMLInputElement>) => {\n      const numericValue = parseInt(event.currentTarget.value, 10)\n      if (!isNaN(numericValue)) {\n        onChange(numericValue)\n      }\n    },\n    [onChange]\n  )\n\n  return <LazyTextInput {...props} onChange={handleChange} inputMode=\"numeric\" />\n}\n","import {Box, Button, Flex, Grid, Select, Text, useForwardedRef} from '@sanity/ui'\nimport {ChevronLeftIcon, ChevronRightIcon} from '@sanity/icons'\nimport {addDays, addMonths, setDate, setHours, setMinutes, setMonth, setYear} from 'date-fns'\nimport {range} from 'lodash'\nimport React, {forwardRef, useCallback, useEffect} from 'react'\nimport {CalendarMonth} from './CalendarMonth'\nimport {ARROW_KEYS, HOURS_24, MONTH_NAMES, DEFAULT_TIME_PRESETS} from './constants'\nimport {features} from './features'\nimport {formatTime} from './utils'\nimport {YearInput} from './YearInput'\n\ntype CalendarProps = Omit<React.ComponentProps<'div'>, 'onSelect'> & {\n  selectTime?: boolean\n  selectedDate?: Date\n  timeStep?: number\n  onSelect: (date: Date) => void\n  focusedDate: Date\n  onFocusedDateChange: (index: Date) => void\n}\n\n// This is used to maintain focus on a child element of the calendar-grid between re-renders\n// When using arrow keys to move focus from a day in one month to another we are setting focus at the button for the day\n// after it has changed but *only* if we *already* had focus inside the calendar grid (e.g not if focus was on the \"next\n// year\" button, or any of the other controls)\n// When moving from the last day of a month that displays 6 weeks in the grid to a month that displays 5 weeks, current\n// focus gets lost on render, so this provides us with a stable element to help us preserve focus on a child element of\n// the calendar grid between re-renders\nconst PRESERVE_FOCUS_ELEMENT = (\n  <span\n    data-preserve-focus\n    style={{overflow: 'hidden', position: 'absolute', outline: 'none'}}\n    tabIndex={-1}\n  />\n)\n\nexport const Calendar = forwardRef(function Calendar(\n  props: CalendarProps,\n  forwardedRef: React.ForwardedRef<HTMLDivElement>\n) {\n  const {\n    selectTime,\n    onFocusedDateChange,\n    selectedDate = new Date(),\n    focusedDate = selectedDate,\n    timeStep = 1,\n    onSelect,\n    ...restProps\n  } = props\n\n  const setFocusedDate = useCallback(\n    (date: Date) => onFocusedDateChange(date),\n    [onFocusedDateChange]\n  )\n\n  const setFocusedDateMonth = useCallback(\n    (month: number) => setFocusedDate(setDate(setMonth(focusedDate, month), 1)),\n    [focusedDate, setFocusedDate]\n  )\n\n  const handleFocusedMonthChange = useCallback(\n    (e: React.FormEvent<HTMLSelectElement>) => setFocusedDateMonth(Number(e.currentTarget.value)),\n    [setFocusedDateMonth]\n  )\n\n  const moveFocusedDate = useCallback(\n    (by: number) => setFocusedDate(addMonths(focusedDate, by)),\n    [focusedDate, setFocusedDate]\n  )\n\n  const setFocusedDateYear = useCallback(\n    (year: number) => setFocusedDate(setYear(focusedDate, year)),\n    [focusedDate, setFocusedDate]\n  )\n\n  const handleDateChange = useCallback(\n    (date: Date) => {\n      onSelect(setMinutes(setHours(date, selectedDate.getHours()), selectedDate.getMinutes()))\n    },\n    [onSelect, selectedDate]\n  )\n\n  const handleMinutesChange = useCallback(\n    (event: React.FormEvent<HTMLSelectElement>) => {\n      const m = Number(event.currentTarget.value)\n      onSelect(setMinutes(selectedDate, m))\n    },\n    [onSelect, selectedDate]\n  )\n\n  const handleHoursChange = useCallback(\n    (event: React.FormEvent<HTMLSelectElement>) => {\n      const m = Number(event.currentTarget.value)\n      onSelect(setHours(selectedDate, m))\n    },\n    [onSelect, selectedDate]\n  )\n\n  const handleTimeChange = useCallback(\n    (hours: number, mins: number) => {\n      onSelect(setHours(setMinutes(selectedDate, mins), hours))\n    },\n    [onSelect, selectedDate]\n  )\n\n  const ref = useForwardedRef(forwardedRef)\n\n  const focusCurrentWeekDay = useCallback(() => {\n    ref.current?.querySelector<HTMLElement>(`[data-focused=\"true\"]`)?.focus()\n  }, [ref])\n\n  const handleKeyDown = useCallback(\n    (event) => {\n      if (!ARROW_KEYS.includes(event.key)) {\n        return\n      }\n      event.preventDefault()\n      if (event.target.hasAttribute('data-calendar-grid')) {\n        focusCurrentWeekDay()\n        return\n      }\n      if (event.key === 'ArrowUp') {\n        onFocusedDateChange(addDays(focusedDate, -7))\n      }\n      if (event.key === 'ArrowDown') {\n        onFocusedDateChange(addDays(focusedDate, 7))\n      }\n      if (event.key === 'ArrowLeft') {\n        onFocusedDateChange(addDays(focusedDate, -1))\n      }\n      if (event.key === 'ArrowRight') {\n        onFocusedDateChange(addDays(focusedDate, 1))\n      }\n      // set focus temporarily on this element to make sure focus is still inside the calendar-grid after re-render\n      ref.current?.querySelector<HTMLElement>('[data-preserve-focus]')?.focus()\n    },\n    [ref, focusCurrentWeekDay, onFocusedDateChange, focusedDate]\n  )\n\n  useEffect(() => {\n    focusCurrentWeekDay()\n  }, [focusCurrentWeekDay])\n\n  useEffect(() => {\n    const currentFocusInCalendarGrid = document.activeElement?.matches(\n      '[data-calendar-grid], [data-calendar-grid] [data-preserve-focus]'\n    )\n    if (\n      // Only move focus if it's currently in the calendar grid\n      currentFocusInCalendarGrid\n    ) {\n      focusCurrentWeekDay()\n    }\n  }, [ref, focusCurrentWeekDay, focusedDate])\n\n  const handleYesterdayClick = useCallback(\n    () => handleDateChange(addDays(new Date(), -1)),\n    [handleDateChange]\n  )\n\n  const handleTodayClick = useCallback(() => handleDateChange(new Date()), [handleDateChange])\n\n  const handleTomorrowClick = useCallback(\n    () => handleDateChange(addDays(new Date(), 1)),\n    [handleDateChange]\n  )\n\n  const handleNowClick = useCallback(() => onSelect(new Date()), [onSelect])\n\n  return (\n    <Box data-ui=\"Calendar\" {...restProps} ref={ref}>\n      {/* Select date */}\n      <Box padding={2}>\n        {/* Day presets */}\n        {features.dayPresets && (\n          <Grid columns={3} data-ui=\"CalendaryDayPresets\" gap={1}>\n            <Button text=\"Yesterday\" mode=\"bleed\" fontSize={1} onClick={handleYesterdayClick} />\n            <Button text=\"Today\" mode=\"bleed\" fontSize={1} onClick={handleTodayClick} />\n            <Button text=\"Tomorrow\" mode=\"bleed\" fontSize={1} onClick={handleTomorrowClick} />\n          </Grid>\n        )}\n\n        {/* Select month and year */}\n        <Flex>\n          <Box flex={1}>\n            <CalendarMonthSelect\n              moveFocusedDate={moveFocusedDate}\n              onChange={handleFocusedMonthChange}\n              value={focusedDate?.getMonth()}\n            />\n          </Box>\n          <Box marginLeft={2}>\n            <CalendarYearSelect\n              moveFocusedDate={moveFocusedDate}\n              onChange={setFocusedDateYear}\n              value={focusedDate.getFullYear()}\n            />\n          </Box>\n        </Flex>\n\n        {/* Selected month (grid of days) */}\n        <Box\n          data-calendar-grid\n          onKeyDown={handleKeyDown}\n          marginTop={2}\n          overflow=\"hidden\"\n          tabIndex={0}\n        >\n          <CalendarMonth\n            date={focusedDate}\n            focused={focusedDate}\n            onSelect={handleDateChange}\n            selected={selectedDate}\n          />\n          {PRESERVE_FOCUS_ELEMENT}\n        </Box>\n      </Box>\n\n      {/* Select time */}\n      {selectTime && (\n        <Box padding={2} style={{borderTop: '1px solid var(--card-border-color)'}}>\n          <Flex align=\"center\">\n            <Flex align=\"center\" flex={1}>\n              <Box>\n                <Select\n                  aria-label=\"Select hour\"\n                  value={selectedDate?.getHours()}\n                  onChange={handleHoursChange}\n                >\n                  {HOURS_24.map((h) => (\n                    <option key={h} value={h}>\n                      {`${h}`.padStart(2, '0')}\n                    </option>\n                  ))}\n                </Select>\n              </Box>\n\n              <Box paddingX={1}>\n                <Text>:</Text>\n              </Box>\n\n              <Box>\n                <Select\n                  aria-label=\"Select minutes\"\n                  value={selectedDate?.getMinutes()}\n                  onChange={handleMinutesChange}\n                >\n                  {range(0, 60, timeStep).map((m) => (\n                    <option key={m} value={m}>\n                      {`${m}`.padStart(2, '0')}\n                    </option>\n                  ))}\n                </Select>\n              </Box>\n            </Flex>\n\n            <Box marginLeft={2}>\n              <Button text=\"Set to current time\" mode=\"bleed\" onClick={handleNowClick} />\n            </Box>\n          </Flex>\n\n          {features.timePresets && (\n            <Flex direction=\"row\" justify=\"center\" align=\"center\" style={{marginTop: 5}}>\n              {DEFAULT_TIME_PRESETS.map(([hours, minutes]) => {\n                return (\n                  <CalendarTimePresetButton\n                    key={`${hours}-${minutes}`}\n                    hours={hours}\n                    minutes={minutes}\n                    onTimeChange={handleTimeChange}\n                    selectedDate={selectedDate}\n                  />\n                )\n              })}\n            </Flex>\n          )}\n        </Box>\n      )}\n    </Box>\n  )\n})\n\nfunction CalendarTimePresetButton(props: {\n  hours: number\n  minutes: number\n  onTimeChange: (hours: number, minutes: number) => void\n  selectedDate: Date\n}) {\n  const {hours, minutes, onTimeChange, selectedDate} = props\n  const formatted = formatTime(hours, minutes)\n\n  const handleClick = useCallback(() => {\n    onTimeChange(hours, minutes)\n  }, [hours, minutes, onTimeChange])\n\n  return (\n    <Button\n      text={formatted}\n      aria-label={`${formatted} on ${selectedDate.toDateString()}`}\n      mode=\"bleed\"\n      fontSize={1}\n      onClick={handleClick}\n    />\n  )\n}\n\nfunction CalendarMonthSelect(props: {\n  moveFocusedDate: (by: number) => void\n  onChange: (e: React.FormEvent<HTMLSelectElement>) => void\n  value?: number\n}) {\n  const {moveFocusedDate, onChange, value} = props\n\n  const handlePrevMonthClick = useCallback(() => moveFocusedDate(-1), [moveFocusedDate])\n\n  const handleNextMonthClick = useCallback(() => moveFocusedDate(1), [moveFocusedDate])\n\n  return (\n    <Flex flex={1}>\n      <Button\n        aria-label=\"Go to previous month\"\n        onClick={handlePrevMonthClick}\n        mode=\"bleed\"\n        icon={ChevronLeftIcon}\n        paddingX={2}\n        radius={0}\n      />\n      <Box flex={1}>\n        <Select radius={0} value={value} onChange={onChange}>\n          {MONTH_NAMES.map((m, i) => (\n            // eslint-disable-next-line react/no-array-index-key\n            <option key={i} value={i}>\n              {m}\n            </option>\n          ))}\n        </Select>\n      </Box>\n      <Button\n        aria-label=\"Go to next month\"\n        mode=\"bleed\"\n        icon={ChevronRightIcon}\n        onClick={handleNextMonthClick}\n        paddingX={2}\n        radius={0}\n      />\n    </Flex>\n  )\n}\n\nfunction CalendarYearSelect(props: {\n  moveFocusedDate: (by: number) => void\n  onChange: (year: number) => void\n  value?: number\n}) {\n  const {moveFocusedDate, onChange, value} = props\n\n  const handlePrevYearClick = useCallback(() => moveFocusedDate(-12), [moveFocusedDate])\n\n  const handleNextYearClick = useCallback(() => moveFocusedDate(12), [moveFocusedDate])\n\n  return (\n    <Flex>\n      <Button\n        aria-label=\"Previous year\"\n        onClick={handlePrevYearClick}\n        mode=\"bleed\"\n        icon={ChevronLeftIcon}\n        paddingX={2}\n        radius={0}\n      />\n      <YearInput value={value} onChange={onChange} radius={0} style={{width: 65}} />\n      <Button\n        aria-label=\"Next year\"\n        onClick={handleNextYearClick}\n        mode=\"bleed\"\n        icon={ChevronRightIcon}\n        paddingX={2}\n        radius={0}\n      />\n    </Flex>\n  )\n}\n","import React from 'react'\nimport {Calendar} from './calendar/Calendar'\n\nexport const DatePicker = React.forwardRef(function DatePicker(\n  props: Omit<React.ComponentProps<'div'>, 'onChange'> & {\n    value?: Date\n    onChange: (nextDate: Date) => void\n    selectTime?: boolean\n    timeStep?: number\n  },\n  ref: React.ForwardedRef<HTMLDivElement>\n) {\n  const {value = new Date(), onChange, ...rest} = props\n  const [focusedDate, setFocusedDay] = React.useState<Date>()\n\n  const handleSelect = React.useCallback(\n    (nextDate) => {\n      onChange(nextDate)\n      setFocusedDay(undefined)\n    },\n    [onChange]\n  )\n\n  return (\n    <Calendar\n      {...rest}\n      ref={ref}\n      selectedDate={value}\n      onSelect={handleSelect}\n      focusedDate={focusedDate || value}\n      onFocusedDateChange={setFocusedDay}\n    />\n  )\n})\n","import React, {forwardRef, useCallback, useRef, useState} from 'react'\nimport FocusLock from 'react-focus-lock'\nimport {Box, Button, LayerProvider, Popover, useClickOutside, useForwardedRef} from '@sanity/ui'\nimport {CalendarIcon} from '@sanity/icons'\nimport {DatePicker} from './DatePicker'\nimport {LazyTextInput} from './LazyTextInput'\n\nexport interface DateTimeInputProps {\n  customValidity?: string\n  id?: string\n  inputValue?: string\n  onChange: (date: Date | null) => void\n  onInputChange?: (event: React.FocusEvent<HTMLInputElement>) => void\n  placeholder?: string\n  readOnly?: boolean\n  selectTime?: boolean\n  timeStep?: number\n  value?: Date\n}\n\nexport const DateTimeInput = forwardRef(function DateTimeInput(\n  props: DateTimeInputProps,\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const {value, inputValue, onInputChange, onChange, selectTime, timeStep, ...rest} = props\n  const [popoverRef, setPopoverRef] = useState<HTMLElement | null>(null)\n  const forwardedRef = useForwardedRef(ref)\n  const buttonRef = useRef(null)\n\n  const [isPickerOpen, setPickerOpen] = useState(false)\n\n  useClickOutside(() => setPickerOpen(false), [popoverRef])\n\n  const handleDeactivation = useCallback(() => {\n    forwardedRef.current?.focus()\n    forwardedRef.current?.select()\n  }, [forwardedRef])\n\n  const handleKeyUp = useCallback((e) => {\n    if (e.key === 'Escape') {\n      setPickerOpen(false)\n    }\n  }, [])\n\n  const handleClick = useCallback(() => setPickerOpen(true), [])\n\n  const suffix = (\n    <Box padding={1}>\n      <Button\n        ref={buttonRef}\n        icon={CalendarIcon}\n        mode=\"bleed\"\n        padding={2}\n        onClick={handleClick}\n        style={{display: 'block'}}\n        data-testid=\"select-date-button\"\n      />\n    </Box>\n  )\n\n  return (\n    <LazyTextInput\n      ref={forwardedRef}\n      {...rest}\n      value={inputValue}\n      onChange={onInputChange}\n      suffix={\n        isPickerOpen ? (\n          // Note: we're conditionally inserting the popover here due to an\n          // issue with popovers rendering incorrectly on subsequent renders\n          // see https://github.com/sanity-io/design/issues/519\n          <LayerProvider zOffset={1000}>\n            <Popover\n              constrainSize\n              data-testid=\"date-input-dialog\"\n              portal\n              content={\n                <Box overflow=\"auto\">\n                  <FocusLock onDeactivation={handleDeactivation}>\n                    <DatePicker\n                      selectTime={selectTime}\n                      timeStep={timeStep}\n                      onKeyUp={handleKeyUp}\n                      value={value}\n                      onChange={onChange}\n                    />\n                  </FocusLock>\n                </Box>\n              }\n              open\n              placement=\"bottom-end\"\n              ref={setPopoverRef}\n              radius={2}\n            >\n              {suffix}\n            </Popover>\n          </LayerProvider>\n        ) : (\n          suffix\n        )\n      }\n    />\n  )\n})\n","/* eslint-disable no-nested-ternary */\n\nimport React, {useEffect} from 'react'\n\nimport {TextInput, useForwardedRef} from '@sanity/ui'\nimport {DateTimeInput} from './base/DateTimeInput'\nimport {ParseResult} from './types'\n\nexport interface CommonDateTimeInputProps {\n  id: string\n  deserialize: (value: string) => ParseResult\n  formatInputValue: (date: Date) => string\n  onChange: (nextDate: string | null) => void\n  parseInputValue: (inputValue: string) => ParseResult\n  placeholder?: string\n  readOnly: boolean | undefined\n  selectTime?: boolean\n  serialize: (date: Date) => string\n  timeStep?: number\n  value: string | undefined\n}\n\nconst DEFAULT_PLACEHOLDER_TIME = new Date()\n\nexport const CommonDateTimeInput = React.forwardRef(function CommonDateTimeInput(\n  props: CommonDateTimeInputProps,\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const {\n    id,\n    deserialize,\n    formatInputValue,\n    onChange,\n    parseInputValue,\n    placeholder,\n    readOnly,\n    selectTime,\n    serialize,\n    timeStep,\n    value,\n    ...restProps\n  } = props\n\n  const [localValue, setLocalValue] = React.useState<string | null>(null)\n\n  useEffect(() => {\n    setLocalValue(null)\n  }, [value])\n\n  const handleDatePickerInputChange = React.useCallback(\n    (event) => {\n      const nextInputValue = event.currentTarget.value\n      const result = nextInputValue === '' ? null : parseInputValue(nextInputValue)\n\n      if (result === null) {\n        onChange(null)\n\n        // If the field value is undefined and we are clearing the invalid value\n        // the above useEffect won't trigger, so we do some extra clean up here\n        if (typeof value === 'undefined' && localValue) {\n          setLocalValue(null)\n        }\n      } else if (result.isValid) {\n        onChange(serialize(result.date))\n      } else {\n        setLocalValue(nextInputValue)\n      }\n    },\n    [localValue, serialize, onChange, parseInputValue]\n  )\n\n  const handleDatePickerChange = React.useCallback(\n    (nextDate: Date | null) => {\n      onChange(nextDate ? serialize(nextDate) : null)\n    },\n    [serialize, onChange]\n  )\n\n  const forwardedRef = useForwardedRef(ref)\n\n  const parseResult = localValue ? parseInputValue(localValue) : value ? deserialize(value) : null\n\n  const inputValue = localValue\n    ? localValue\n    : parseResult?.isValid\n    ? formatInputValue(parseResult.date)\n    : value\n\n  return readOnly ? (\n    <TextInput value={inputValue} readOnly />\n  ) : (\n    <DateTimeInput\n      {...restProps}\n      id={id}\n      selectTime={selectTime}\n      timeStep={timeStep}\n      placeholder={placeholder || `e.g. ${formatInputValue(DEFAULT_PLACEHOLDER_TIME)}`}\n      ref={forwardedRef}\n      value={parseResult?.date}\n      inputValue={inputValue || ''}\n      readOnly={Boolean(readOnly)}\n      onInputChange={handleDatePickerInputChange}\n      onChange={handleDatePickerChange}\n      customValidity={parseResult?.error}\n    />\n  )\n})\n","export function isValidDate(date: Date) {\n  return date instanceof Date && !isNaN(date.valueOf())\n}\n","import {format, parse} from '@sanity/util/legacyDateFormat'\nimport {getMinutes, setMinutes, parseISO} from 'date-fns'\nimport React, {useCallback} from 'react'\nimport {ChangeIndicator} from '../../../components/changeIndicators'\nimport {set, unset} from '../../patch'\nimport {StringInputProps} from '../../types'\nimport {CommonDateTimeInput} from './CommonDateTimeInput'\nimport {ParseResult} from './types'\nimport {isValidDate} from './utils'\n\ninterface ParsedOptions {\n  dateFormat: string\n  timeFormat: string\n  timeStep: number\n  calendarTodayLabel: string\n}\n\ninterface SchemaOptions {\n  dateFormat?: string\n  timeFormat?: string\n  timeStep?: number\n  calendarTodayLabel?: string\n}\n\nexport type DateTimeInputProps = StringInputProps\n\nconst DEFAULT_DATE_FORMAT = 'YYYY-MM-DD'\nconst DEFAULT_TIME_FORMAT = 'HH:mm'\n\nfunction parseOptions(options: SchemaOptions = {}): ParsedOptions {\n  return {\n    dateFormat: options.dateFormat || DEFAULT_DATE_FORMAT,\n    timeFormat: options.timeFormat || DEFAULT_TIME_FORMAT,\n    timeStep: ('timeStep' in options && Number(options.timeStep)) || 1,\n    calendarTodayLabel: options.calendarTodayLabel || 'Today',\n  }\n}\n\nfunction serialize(date: Date) {\n  return date.toISOString()\n}\nfunction deserialize(isoString: string): ParseResult {\n  const deserialized = new Date(isoString)\n  if (isValidDate(deserialized)) {\n    return {isValid: true, date: deserialized}\n  }\n  return {isValid: false, error: `Invalid date value: \"${isoString}\"`}\n}\n\n// enforceTimeStep takes a dateString and datetime schema options and enforces the time\n// to be within the configured timeStep\nfunction enforceTimeStep(dateString: string, timeStep: number) {\n  if (!timeStep || timeStep === 1) {\n    return dateString\n  }\n\n  const date = parseISO(dateString)\n  const minutes = getMinutes(date)\n  const leftOver = minutes % timeStep\n  if (leftOver !== 0) {\n    return serialize(setMinutes(date, minutes - leftOver))\n  }\n\n  return serialize(date)\n}\n\nexport function DateTimeInput(props: DateTimeInputProps) {\n  const {onChange, schemaType, value, elementProps} = props\n\n  const {dateFormat, timeFormat, timeStep} = parseOptions(schemaType.options)\n\n  const handleChange = useCallback(\n    (nextDate: string | null) => {\n      let date = nextDate\n      if (date !== null && timeStep > 1) {\n        date = enforceTimeStep(date, timeStep)\n      }\n\n      onChange(date === null ? unset() : set(date))\n    },\n    [onChange, timeStep]\n  )\n\n  const formatInputValue = React.useCallback(\n    (date: Date) => format(date, `${dateFormat} ${timeFormat}`),\n    [dateFormat, timeFormat]\n  )\n\n  const parseInputValue = React.useCallback(\n    (inputValue: string) => parse(inputValue, `${dateFormat} ${timeFormat}`),\n    [dateFormat, timeFormat]\n  )\n\n  return (\n    <CommonDateTimeInput\n      {...elementProps}\n      onChange={handleChange}\n      deserialize={deserialize}\n      formatInputValue={formatInputValue}\n      parseInputValue={parseInputValue}\n      placeholder={schemaType.placeholder}\n      selectTime\n      serialize={serialize}\n      timeStep={timeStep}\n      value={value}\n    />\n  )\n}\n","import React, {useCallback} from 'react'\nimport {format, parse} from '@sanity/util/legacyDateFormat'\nimport {set, unset} from '../../patch'\nimport {StringInputProps} from '../../types'\nimport {ChangeIndicator} from '../../../components/changeIndicators'\nimport {CommonDateTimeInput} from './CommonDateTimeInput'\n\ninterface ParsedOptions {\n  dateFormat: string\n  calendarTodayLabel: string\n}\n\ninterface SchemaOptions {\n  dateFormat?: string\n  calendarTodayLabel?: string\n}\n\nexport type DateInputProps = StringInputProps\n\n// This is the format dates are stored on\nconst VALUE_FORMAT = 'YYYY-MM-DD'\n// default to how they are stored\nconst DEFAULT_DATE_FORMAT = VALUE_FORMAT\n\nfunction parseOptions(options: SchemaOptions = {}): ParsedOptions {\n  return {\n    dateFormat: options.dateFormat || DEFAULT_DATE_FORMAT,\n    calendarTodayLabel: options.calendarTodayLabel || 'Today',\n  }\n}\n\nconst deserialize = (value: string) => parse(value, VALUE_FORMAT)\nconst serialize = (date: Date) => format(date, VALUE_FORMAT)\n\nexport function DateInput(props: DateInputProps) {\n  const {readOnly, onChange, schemaType, elementProps, value} = props\n  const {dateFormat} = parseOptions(schemaType.options)\n\n  const handleChange = useCallback(\n    (nextDate: string | null) => {\n      onChange(nextDate === null ? unset() : set(nextDate))\n    },\n    [onChange]\n  )\n\n  const formatInputValue = useCallback((date: Date) => format(date, dateFormat), [dateFormat])\n\n  const parseInputValue = useCallback(\n    (inputValue: string) => parse(inputValue, dateFormat),\n    [dateFormat]\n  )\n\n  return (\n    <CommonDateTimeInput\n      {...elementProps}\n      deserialize={deserialize}\n      formatInputValue={formatInputValue}\n      onChange={handleChange}\n      parseInputValue={parseInputValue}\n      placeholder={schemaType.placeholder}\n      readOnly={readOnly}\n      selectTime={false}\n      serialize={serialize}\n      value={value}\n    />\n  )\n}\n","import React from 'react'\nimport {TextSchemaType} from '@sanity/types'\nimport {TextArea} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {StringInputProps} from '../types'\n\nexport type TextInputProps = StringInputProps<TextSchemaType>\n\nconst StyledTextArea = styled(TextArea)`\n  &[data-as='textarea'] {\n    resize: vertical;\n  }\n`\n\nexport function TextInput(props: TextInputProps) {\n  const {schemaType, validationError, value, elementProps} = props\n\n  return (\n    <StyledTextArea\n      customValidity={validationError}\n      value={value || ''}\n      placeholder={schemaType.placeholder}\n      rows={typeof schemaType.rows === 'number' ? schemaType.rows : 10}\n      {...elementProps}\n    />\n  )\n}\n","import {TextInput} from '@sanity/ui'\nimport React from 'react'\nimport {getValidationRule} from '../utils/getValidationRule'\nimport {StringInputProps} from '../types'\n\nexport type UrlInputProps = StringInputProps\n\n// @todo Rename to `URLInput`?\nexport function UrlInput(props: UrlInputProps) {\n  const {schemaType, validationError, elementProps} = props\n\n  const uriRule = getValidationRule(schemaType, 'uri')\n  const inputType = uriRule?.constraint?.options?.allowRelative ? 'text' : 'url'\n  return (\n    <TextInput\n      type={inputType}\n      inputMode=\"url\"\n      customValidity={validationError}\n      {...elementProps}\n    />\n  )\n}\n","import {SlugSchemaType} from '@sanity/types'\nimport speakingurl from 'speakingurl'\nimport {FIXME} from '../../../types'\n\n// Fallback slugify function if not defined in field options\nconst defaultSlugify = (value: FIXME, type: SlugSchemaType): string => {\n  const maxLength = type.options?.maxLength\n  const slugifyOpts = {truncate: typeof maxLength === 'number' ? maxLength : 200, symbols: true}\n  return value ? speakingurl(value, slugifyOpts) : ''\n}\n\nexport function slugify(sourceValue: FIXME, type: SlugSchemaType): Promise<string> {\n  if (!sourceValue) {\n    return Promise.resolve(sourceValue)\n  }\n\n  const slugifier = type.options?.slugify || defaultSlugify\n\n  return Promise.resolve(slugifier(sourceValue, type))\n}\n","import React from 'react'\n\nexport type AsyncCompleteState<T> = {\n  status: 'complete'\n  result: T\n}\nexport type AsyncPendingState = {\n  status: 'pending'\n}\nexport type AsyncErrorState = {\n  status: 'error'\n  error: Error\n}\n\nexport type AsyncState<T> = AsyncPendingState | AsyncCompleteState<T> | AsyncErrorState\n\n/**\n * Takes an async function and returns a [AsyncState<value>, callback] pair.\n * Whenever the callback is invoked, a new AsyncState is returned.\n * If the returned callback is called again before the previous callback has settled, the resolution of the previous one will be ignored, thus preventing race conditions.\n * @param fn an async function that returns a value\n * @param dependencies list of dependencies that will return a new [value, callback] pair\n */\nexport function useAsync<T, U>(\n  fn: (arg: U) => Promise<T>,\n  dependencies: React.DependencyList\n): [null | AsyncState<T>, (arg: U) => void] {\n  const [state, setState] = React.useState<AsyncState<T> | null>(null)\n\n  const lastId = React.useRef(0)\n\n  const wrappedCallback = React.useCallback(\n    (arg: U) => {\n      const asyncId = ++lastId.current\n      setState({status: 'pending'})\n\n      Promise.resolve()\n        .then(() => fn(arg))\n        .then(\n          (res) => {\n            if (asyncId === lastId.current) {\n              setState({status: 'complete', result: res})\n            }\n          },\n          (err) => {\n            if (asyncId === lastId.current) {\n              setState({status: 'error', error: err})\n            }\n          }\n        )\n    },\n    [fn, ...dependencies]\n  )\n\n  return [state, wrappedCallback]\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {Path, SanityDocument, SlugParent, SlugSchemaType, SlugSourceFn} from '@sanity/types'\nimport * as PathUtils from '@sanity/util/paths'\nimport {Box, Button, Card, Flex, Stack, TextInput} from '@sanity/ui'\nimport {PatchEvent, set, setIfMissing, unset} from '../../patch'\nimport {ObjectInputProps} from '../../types'\nimport {useFormBuilder} from '../../useFormBuilder'\nimport {slugify} from './utils/slugify'\nimport {useAsync} from './utils/useAsync'\n\nexport type Slug = {\n  _type: 'slug'\n  current?: string\n}\n\nexport type SlugInputProps = ObjectInputProps<Slug, SlugSchemaType>\n\nfunction getNewFromSource(\n  source: string | Path | SlugSourceFn,\n  valuePath: Path,\n  document: SanityDocument\n) {\n  const parentPath = valuePath.slice(0, -1)\n  const parent = PathUtils.get(document, parentPath) as SlugParent\n  return Promise.resolve(\n    typeof source === 'function'\n      ? source(document, {parentPath, parent})\n      : (PathUtils.get(document, source) as string | undefined)\n  )\n}\n\nexport function SlugInput(props: SlugInputProps) {\n  const {getDocument} = useFormBuilder().__internal\n  const {path, value, schemaType, validation, onChange, onFocusPath, readOnly, elementProps} = props\n  const sourceField = schemaType.options?.source\n  const errors = useMemo(() => validation.filter((item) => item.level === 'error'), [validation])\n\n  const updateSlug = useCallback(\n    (nextSlug) => {\n      if (!nextSlug) {\n        onChange(PatchEvent.from(unset([])))\n        return\n      }\n\n      onChange(\n        PatchEvent.from([setIfMissing({_type: schemaType.name}), set(nextSlug, ['current'])])\n      )\n    },\n    [onChange, schemaType.name]\n  )\n\n  const [generateState, handleGenerateSlug] = useAsync(() => {\n    if (!sourceField) {\n      return Promise.reject(\n        new Error(`Source is missing. Check source on type \"${schemaType.name}\" in schema`)\n      )\n    }\n\n    return getNewFromSource(\n      sourceField,\n      path,\n      getDocument() || ({_type: schemaType.name} as SanityDocument)\n    )\n      .then((newFromSource) => slugify(newFromSource || '', schemaType))\n      .then((newSlug) => updateSlug(newSlug))\n  }, [path, updateSlug, document, schemaType])\n\n  const isUpdating = generateState?.status === 'pending'\n\n  const handleChange = React.useCallback(\n    (event) => updateSlug(event.currentTarget.value),\n    [updateSlug]\n  )\n\n  return (\n    <Stack space={3}>\n      <Flex>\n        <Box flex={1}>\n          <TextInput\n            customValidity={errors.length > 0 ? errors[0].message : ''}\n            disabled={isUpdating}\n            onChange={handleChange}\n            value={value?.current || ''}\n            readOnly={readOnly}\n            {...elementProps}\n          />\n\n          {generateState?.status === 'error' && (\n            <Card padding={2} tone=\"critical\">\n              {generateState.error.message}\n            </Card>\n          )}\n        </Box>\n        {sourceField && (\n          <Box marginLeft={1}>\n            <Button\n              mode=\"ghost\"\n              type=\"button\"\n              disabled={readOnly || isUpdating}\n              onClick={handleGenerateSlug}\n              text={generateState?.status === 'pending' ? 'Generatingâ€¦' : 'Generate'}\n            />\n          </Box>\n        )}\n      </Flex>\n    </Stack>\n  )\n}\n","import {Button, Theme} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {focusRingStyle} from '../../../../components/withFocusRing/helpers'\n\nexport const FileButton = styled(Button).attrs({forwardedAs: 'label'})(\n  ({theme}: {theme: Theme}) => {\n    const {focusRing} = theme.sanity\n    const base = theme.sanity.color.base\n    const border = {width: 1, color: 'var(--card-border-color)'}\n\n    return css`\n      &:not([data-disabled='true']) {\n        &:focus-within {\n          box-shadow: ${focusRingStyle({base, border, focusRing})};\n        }\n      }\n\n      & input {\n        overflow: hidden;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        min-width: 0;\n        display: block;\n        appearance: none;\n        padding: 0;\n        margin: 0;\n        border: 0;\n        opacity: 0;\n      }\n    `\n  }\n)\n","import React, {createElement, isValidElement} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {useId} from '@reach/auto-id'\nimport {Box, ButtonProps, Flex, Text, useTheme} from '@sanity/ui'\nimport {FileButton} from './styles'\n\nexport interface FileInputButtonProps extends ButtonProps {\n  accept?: string\n  capture?: 'user' | 'environment'\n  multiple?: boolean\n  onSelect?: (files: File[]) => void\n  disabled?: boolean\n}\n\nexport const FileInputButton = React.forwardRef(function FileInputButton(\n  props: FileInputButtonProps &\n    Omit<React.HTMLProps<HTMLButtonElement>, 'as' | 'ref' | 'type' | 'value' | 'onSelect'>,\n  forwardedRef: React.ForwardedRef<HTMLInputElement>\n) {\n  const {\n    icon,\n    id: idProp,\n    accept,\n    capture,\n    fontSize,\n    multiple,\n    onSelect,\n    padding = 3,\n    space = 3,\n    textAlign,\n    text,\n    disabled,\n    ...rest\n  } = props\n  const id = useId(idProp)\n  const theme = useTheme()\n\n  const handleChange = React.useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      if (onSelect && event.target.files) {\n        onSelect(Array.from(event.target.files))\n      }\n    },\n    [onSelect]\n  )\n\n  const content = (\n    <Flex align=\"center\" justify=\"center\" padding={padding}>\n      {/* Icon */}\n      {icon && (\n        <Box marginRight={text ? space : undefined}>\n          <Text size={fontSize}>\n            {isValidElement(icon) && icon}\n            {isValidElementType(icon) && createElement(icon)}\n          </Text>\n        </Box>\n      )}\n\n      {/* Text */}\n      {text && (\n        <Text\n          align={textAlign}\n          size={fontSize}\n          textOverflow=\"ellipsis\"\n          weight={theme.sanity.button.textWeight}\n        >\n          {text}\n        </Text>\n      )}\n    </Flex>\n  )\n\n  return (\n    <FileButton {...rest} htmlFor={id} padding={0} fontSize={2} disabled={disabled}>\n      {content}\n\n      {/* Visibly hidden input */}\n      <input\n        data-testid=\"file-button-input\"\n        accept={accept}\n        capture={capture}\n        id={id}\n        multiple={multiple}\n        onChange={handleChange}\n        ref={forwardedRef}\n        type=\"file\"\n        value=\"\"\n        disabled={disabled}\n      />\n    </FileButton>\n  )\n})\n","import React, {useMemo} from 'react'\nimport {BinaryDocumentIcon, AccessDeniedIcon, ImageIcon, ReadOnlyIcon} from '@sanity/icons'\nimport {Flex, Text} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {FileLike} from '../../../studio/uploads/types'\n\ninterface Props {\n  readOnly?: boolean\n  hoveringFiles: FileLike[]\n  type: string\n  acceptedFiles: FileLike[]\n  rejectedFilesCount: number\n  directUploads?: boolean\n}\n\nconst RootFlex = styled(Flex)`\n  pointer-events: none;\n`\n\nexport function PlaceholderText(props: Props) {\n  const {hoveringFiles, type, readOnly, acceptedFiles, rejectedFilesCount, directUploads} = props\n  const isFileType = type === 'file'\n\n  const messageIcon = useMemo(() => {\n    if (readOnly) {\n      return <ReadOnlyIcon />\n    }\n\n    if ((hoveringFiles && rejectedFilesCount > 0) || !directUploads) {\n      return <AccessDeniedIcon />\n    }\n\n    return isFileType ? <BinaryDocumentIcon /> : <ImageIcon />\n  }, [directUploads, hoveringFiles, isFileType, readOnly, rejectedFilesCount])\n\n  const messageText = useMemo(() => {\n    let message = `Drag or paste ${type} here`\n\n    if (!directUploads) {\n      return `Can't upload files here`\n    }\n\n    if (readOnly) {\n      message = 'Read only'\n    }\n\n    if (hoveringFiles && directUploads && !readOnly) {\n      if (acceptedFiles.length > 0) {\n        message = `Drop to upload ${type}`\n      }\n      if (rejectedFilesCount > 0) {\n        message = `Can't upload ${rejectedFilesCount} file${rejectedFilesCount > 1 ? 's' : ''} here`\n      }\n    }\n\n    return message\n  }, [acceptedFiles.length, directUploads, hoveringFiles, readOnly, rejectedFilesCount, type])\n\n  return (\n    <RootFlex align=\"center\" gap={2} justify=\"center\">\n      <Text muted>{messageIcon}</Text>\n\n      <Text size={1} muted>\n        {messageText}\n      </Text>\n    </RootFlex>\n  )\n}\n","import React from 'react'\nimport {UploadIcon} from '@sanity/icons'\nimport {Flex, Inline} from '@sanity/ui'\nimport {FileLike} from '../../../studio/uploads/types'\nimport {FileInputButton} from './FileInputButton/FileInputButton'\nimport {PlaceholderText} from './PlaceholderText'\n\ntype UploadPlaceholderProps = {\n  onUpload?: (files: File[]) => void\n  browse?: React.ReactNode\n  readOnly?: boolean\n  type: string\n  hoveringFiles: FileLike[]\n  acceptedFiles: FileLike[]\n  rejectedFilesCount: number\n  accept: string\n  directUploads?: boolean\n}\n\nexport const UploadPlaceholder = React.memo(function UploadPlaceholder({\n  browse,\n  onUpload,\n  readOnly,\n  type,\n  hoveringFiles,\n  acceptedFiles,\n  rejectedFilesCount,\n  accept,\n  directUploads,\n}: UploadPlaceholderProps) {\n  return (\n    <Flex\n      align=\"center\"\n      justify=\"space-between\"\n      gap={4}\n      direction={['column', 'column', 'row']}\n      paddingY={[2, 2, 0]}\n    >\n      <Flex align=\"center\" justify=\"center\" gap={2} flex={1}>\n        <PlaceholderText\n          readOnly={readOnly}\n          hoveringFiles={hoveringFiles}\n          acceptedFiles={acceptedFiles}\n          rejectedFilesCount={rejectedFilesCount}\n          type={type}\n          directUploads={directUploads}\n        />\n      </Flex>\n      <Inline space={2}>\n        <FileInputButton\n          icon={UploadIcon}\n          mode=\"ghost\"\n          onSelect={onUpload}\n          accept={accept}\n          text=\"Upload\"\n          data-testid=\"file-input-upload-button\"\n          disabled={readOnly || !directUploads}\n        />\n        {browse}\n      </Inline>\n    </Flex>\n  )\n})\n","import React, {ReactNode} from 'react'\nimport {Observable} from 'rxjs'\nimport {Reference} from '@sanity/types'\nimport {useMemoObservable} from 'react-rx'\n\ninterface Props<AssetDoc> {\n  reference: Reference\n  observeAsset: (assetId: string) => Observable<AssetDoc>\n  children: (assetDocument: AssetDoc) => ReactNode\n  waitPlaceholder?: ReactNode\n}\n\nexport function WithReferencedAsset<Asset>(props: Props<Asset>) {\n  const {reference, children, observeAsset, waitPlaceholder} = props\n  const documentId = reference?._ref\n  const asset = useMemoObservable(() => observeAsset(documentId), [documentId])\n  return <>{documentId && asset ? children(asset) : waitPlaceholder}</>\n}\n","/* eslint-disable import/named */\n\nimport {Card} from '@sanity/ui'\nimport {fileTarget} from '../../common/fileTarget'\nimport {withFocusRing} from '../../../components/withFocusRing'\n\nexport type {FileInfo} from '../../common/fileTarget'\n\n// Note: FileTarget needs its own focusRing because we need show it on click, not only when :focus-visible\nexport const FileTarget = fileTarget(withFocusRing(Card))\n","import {Card, Flex, Stack, Code} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const CardWrapper = styled(Card)`\n  min-height: 82px;\n  box-sizing: border-box;\n`\n\nexport const FlexWrapper = styled(Flex)`\n  text-overflow: ellipsis;\n  overflow: hidden;\n`\n\nexport const LeftSection = styled(Stack)`\n  position: relative;\n  width: 60%;\n`\n\nexport const CodeWrapper = styled(Code)`\n  position: relative;\n  width: 100%;\n\n  code {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    position: relative;\n    max-width: 200px;\n  }\n`\n","import React, {useEffect} from 'react'\nimport {Flex, Text, Button, Inline, Card} from '@sanity/ui'\nimport {UploadState} from '@sanity/types'\nimport {LinearProgress} from '../../../../components/progress'\nimport {CardWrapper, FlexWrapper, LeftSection, CodeWrapper} from './UploadProgress.styled'\n\ntype Props = {\n  uploadState: UploadState\n  onCancel?: () => void\n  onStale?: () => void\n  height?: number\n}\n\n// If it's more than this amount of milliseconds since last time upload state was reported,\n// the upload will be marked as stale/interrupted.\nconst STALE_UPLOAD_MS = 1000 * 60 * 2 // 2 minutes\n\nconst elapsedMs = (date: string): number => new Date().getTime() - new Date(date).getTime()\n\nexport function UploadProgress({uploadState, onCancel, onStale, height}: Props) {\n  const filename = uploadState.file.name\n\n  useEffect(() => {\n    if (elapsedMs(uploadState.updated) > STALE_UPLOAD_MS) {\n      onStale?.()\n    }\n  }, [uploadState.updated, onStale])\n\n  return (\n    <CardWrapper tone=\"primary\" padding={4} border style={{height: `${height}px`}}>\n      <FlexWrapper align=\"center\" justify=\"space-between\" height=\"fill\" direction=\"row\" gap={2}>\n        <LeftSection>\n          <Flex justify=\"center\" gap={[3, 3, 2, 2]} direction={['column', 'column', 'row']}>\n            <Text size={1}>\n              <Inline space={2}>\n                Uploading\n                <CodeWrapper size={1}>{filename ? filename : '...'}</CodeWrapper>\n              </Inline>\n            </Text>\n          </Flex>\n\n          <Card marginTop={3} radius={5} shadow={1}>\n            <LinearProgress value={uploadState.progress} />\n          </Card>\n        </LeftSection>\n\n        {onCancel ? (\n          <Button\n            fontSize={2}\n            text=\"Cancel upload\"\n            mode=\"ghost\"\n            tone=\"critical\"\n            onClick={onCancel}\n          />\n        ) : null}\n      </FlexWrapper>\n    </CardWrapper>\n  )\n}\n","import {uuid} from '@sanity/uuid'\nimport {FIXME} from '../../../../types'\n\nexport function urlToFile(url: string, filename?: string): Promise<File> {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest()\n    xhr.onload = () => {\n      const reader = new FileReader()\n      reader.onloadend = () => {\n        const string = reader.result?.toString()\n        const ext = string?.substring('data:image/'.length, string.indexOf(';base64'))\n        if (!ext && !filename) {\n          reject(new Error('Could not find mime type for image'))\n          return\n        }\n        resolve(dataURLtoFile(reader.result as FIXME, filename || `${uuid()}.${ext}`))\n      }\n      reader.readAsDataURL(xhr.response)\n    }\n    xhr.onerror = (error) => {\n      reject(error)\n    }\n    xhr.open('GET', url)\n    xhr.responseType = 'blob'\n    xhr.send()\n  })\n}\n\nexport function base64ToFile(base64Data: string | ArrayBuffer, filename?: string): Promise<File> {\n  return new Promise((resolve, reject) => {\n    const string = base64Data.toString()\n    const ext = string.substring('data:image/'.length, string.indexOf(';base64'))\n    if (!ext && !filename) {\n      reject(new Error('Could not find mime type for image'))\n      return\n    }\n    resolve(dataURLtoFile(base64Data as FIXME, filename || `${uuid()}.${ext}`))\n  })\n}\n\nfunction dataURLtoFile(dataurl: string, filename: string) {\n  const arr = dataurl.split(',')\n  const mime = arr[0].match(/:(.*?);/)?.[1]\n  const bstr = atob(arr[1])\n  let n = bstr.length\n  const u8arr = new Uint8Array(n)\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n)\n  }\n  return new File([u8arr], filename, {type: mime})\n}\n","import {AssetFromSource, FileSchemaType} from '@sanity/types'\nimport {get} from 'lodash'\nimport {FormPatch, PatchArg, PatchEvent, set, setIfMissing, unset} from '../../../patch'\nimport {Uploader, UploaderResolver, UploadOptions} from '../../../studio/uploads/types'\nimport {base64ToFile, urlToFile} from '../ImageInput/utils/image'\nimport {FIXME} from '../../../types'\n\n// We alias DOM File type here to distinguish it from the type of the File value\ntype DOMFile = globalThis.File\n\ninterface Props {\n  assetFromSource: AssetFromSource[]\n  onChange: (patch: FormPatch | FormPatch[] | PatchEvent) => void\n  type: FileSchemaType\n  resolveUploader: UploaderResolver\n  uploadWith: (uploader: Uploader, file: DOMFile, assetDocumentProps?: UploadOptions) => void\n  isImage?: boolean\n}\n\nexport function handleSelectAssetFromSource({\n  assetFromSource,\n  onChange,\n  type,\n  resolveUploader,\n  uploadWith,\n  isImage,\n}: Props): void {\n  // const {onChange, type, resolveUploader} = this.props\n  if (!assetFromSource) {\n    throw new Error('No asset given')\n  }\n  if (!Array.isArray(assetFromSource) || assetFromSource.length === 0) {\n    throw new Error('Returned value must be an array with at least one item (asset)')\n  }\n  const firstAsset = assetFromSource[0]\n  const originalFilename = get(firstAsset, 'assetDocumentProps.originalFilename')\n  const label = get(firstAsset, 'assetDocumentProps.label')\n  const title = get(firstAsset, 'assetDocumentProps.title')\n  const description = get(firstAsset, 'assetDocumentProps.description')\n  const creditLine = get(firstAsset, 'assetDocumentProps.creditLine')\n  const source = get(firstAsset, 'assetDocumentProps.source')\n  const imagePatches = isImage ? [unset(['hotspot']), unset(['crop'])] : []\n  switch (firstAsset.kind) {\n    case 'assetDocumentId':\n      onChange([\n        setIfMissing({\n          _type: type.name,\n        }),\n        ...imagePatches,\n        set(\n          {\n            _type: 'reference',\n            _ref: firstAsset.value,\n          },\n\n          ['asset']\n        ),\n      ])\n\n      break\n    case 'file': {\n      const uploader = resolveUploader(type, firstAsset.value as FIXME)\n      if (uploader) {\n        uploadWith(uploader, firstAsset.value as FIXME, {\n          label,\n          title,\n          description,\n          creditLine,\n          source,\n        })\n      }\n      break\n    }\n    case 'base64':\n      base64ToFile(firstAsset.value as FIXME, originalFilename).then((file) => {\n        const uploader = resolveUploader(type, file)\n        if (uploader) {\n          uploadWith(uploader, file, {label, title, description, creditLine, source})\n        }\n      })\n      break\n    case 'url':\n      urlToFile(firstAsset.value as FIXME, originalFilename).then((file) => {\n        const uploader = resolveUploader(type, file)\n        if (uploader) {\n          uploadWith(uploader, file, {label, title, description, creditLine, source})\n        }\n      })\n      break\n    default: {\n      throw new Error('Invalid value returned from asset source plugin')\n    }\n  }\n}\n","import {Theme, MenuItem} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\nimport {focusRingStyle} from '../../../../components/withFocusRing/helpers'\n\nexport const FileButton = styled(MenuItem)(({theme}: {theme: Theme}) => {\n  const {focusRing} = theme.sanity\n  const base = theme.sanity.color.base\n  const border = {width: 1, color: 'var(--card-border-color)'}\n\n  return css`\n    position: relative;\n\n    &:not([data-disabled='true']) {\n      &:focus-within {\n        box-shadow: ${focusRingStyle({base, border, focusRing})};\n      }\n    }\n\n    & input {\n      overflow: hidden;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      min-width: 0;\n      display: block;\n      appearance: none;\n      padding: 0;\n      margin: 0;\n      border: 0;\n      opacity: 0;\n    }\n  `\n})\n","import React, {createElement, isValidElement} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {useId} from '@reach/auto-id'\nimport {Box, ButtonProps, Flex, Text} from '@sanity/ui'\nimport {FileButton} from './FileInputMenuItem.styled'\n\nexport interface FileInputMenuItemProps extends ButtonProps {\n  accept?: string\n  capture?: 'user' | 'environment'\n  multiple?: boolean\n  onSelect?: (files: File[]) => void\n  disabled?: boolean\n}\n\nexport const FileInputMenuItem = React.forwardRef(function FileInputMenuItem(\n  props: FileInputMenuItemProps &\n    Omit<React.HTMLProps<HTMLButtonElement>, 'as' | 'ref' | 'type' | 'value' | 'onSelect'>,\n  forwardedRef: React.ForwardedRef<HTMLInputElement>\n) {\n  const {\n    icon,\n    id: idProp,\n    accept,\n    capture,\n    fontSize,\n    multiple,\n    onSelect,\n    padding = 3,\n    space = 3,\n    textAlign,\n    text,\n    disabled,\n    ...rest\n  } = props\n  const id = useId(idProp)\n\n  const handleChange = React.useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      if (onSelect && event.target.files) {\n        onSelect(Array.from(event.target.files))\n      }\n    },\n    [onSelect]\n  )\n\n  const content = (\n    <Flex align=\"center\" justify=\"flex-start\" padding={padding}>\n      {/* Icon */}\n      {icon && (\n        <Box marginRight={text ? space : undefined}>\n          <Text size={fontSize}>\n            {isValidElement(icon) && icon}\n            {isValidElementType(icon) && createElement(icon)}\n          </Text>\n        </Box>\n      )}\n\n      {/* Text */}\n      {text && (\n        <Text align={textAlign} size={fontSize} textOverflow=\"ellipsis\">\n          {text}\n        </Text>\n      )}\n    </Flex>\n  )\n\n  return (\n    <FileButton\n      {...rest}\n      htmlFor={id}\n      padding={0}\n      fontSize={2}\n      disabled={disabled}\n      ref={forwardedRef}\n    >\n      {content}\n\n      {/* Visibly hidden input */}\n      <input\n        data-testid=\"file-button-input\"\n        accept={accept}\n        capture={capture}\n        id={id}\n        multiple={multiple}\n        onChange={handleChange}\n        type=\"file\"\n        value=\"\"\n        disabled={disabled}\n      />\n    </FileButton>\n  )\n})\n","import React, {MouseEventHandler, useCallback} from 'react'\n\nimport {UploadIcon, ClipboardIcon, ResetIcon, DownloadIcon} from '@sanity/icons'\nimport {Box, MenuItem, MenuDivider, Label, useToast} from '@sanity/ui'\nimport {FileInputMenuItem} from './FileInputMenuItem/FileInputMenuItem'\n\ninterface Props {\n  onUpload: (files: File[]) => void\n  browse: React.ReactNode\n  readOnly?: boolean\n  onReset: MouseEventHandler<HTMLDivElement>\n  accept: string\n  directUploads?: boolean\n  downloadUrl?: string\n  copyUrl?: string\n}\n\nexport function ActionsMenu(props: Props) {\n  const {onUpload, onReset, readOnly, accept, directUploads, browse, downloadUrl, copyUrl} = props\n\n  const {push: pushToast} = useToast()\n\n  const handleCopyURL = useCallback(() => {\n    navigator.clipboard.writeText(copyUrl || '')\n    pushToast({closable: true, status: 'success', title: 'The url is copied to the clipboard'})\n  }, [pushToast, copyUrl])\n\n  return (\n    <>\n      <Box padding={2}>\n        <Label muted size={1}>\n          Replace\n        </Label>\n      </Box>\n      <FileInputMenuItem\n        icon={UploadIcon}\n        mode=\"bleed\"\n        onSelect={onUpload}\n        accept={accept}\n        text=\"Upload\"\n        data-testid=\"file-input-upload-button\"\n        disabled={readOnly || !directUploads}\n        fontSize={2}\n      />\n      {browse}\n\n      {(downloadUrl || copyUrl) && <MenuDivider />}\n      {downloadUrl && <MenuItem as=\"a\" icon={DownloadIcon} text=\"Download\" href={downloadUrl} />}\n      {copyUrl && <MenuItem icon={ClipboardIcon} text=\"Copy URL\" onClick={handleCopyURL} />}\n\n      <MenuDivider />\n      <MenuItem\n        tone=\"critical\"\n        icon={ResetIcon}\n        text=\"Clear field\"\n        onClick={onReset}\n        disabled={readOnly}\n        data-testid=\"file-input-clear\"\n      />\n    </>\n  )\n}\n","import {ResetIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Card, Flex, Box, Text, Stack, Button} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\ntype Props = {\n  onClearStale?: () => void\n}\n\nconst ButtonWrapper = styled(Button)`\n  width: 100%;\n`\n\nexport function UploadWarning({onClearStale}: Props) {\n  return (\n    <Card tone=\"caution\" padding={4} border radius={2}>\n      <Flex gap={4} marginBottom={4}>\n        <Box>\n          <Text size={1}>\n            <WarningOutlineIcon />\n          </Text>\n        </Box>\n        <Stack space={3}>\n          <Text size={1} weight=\"semibold\">\n            Incomplete upload\n          </Text>\n          <Text size={1}>\n            An upload has made no progress in the last 6m and likely got interrupted. You can safely\n            clear the incomplete upload and try uploading again.\n          </Text>\n        </Stack>\n      </Flex>\n      <ButtonWrapper icon={ResetIcon} text=\"Clear upload\" onClick={onClearStale} mode=\"ghost\" />\n    </Card>\n  )\n}\n","import {Box} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const RatioBox = styled(Box)<{ratio?: number}>`\n  position: relative;\n  padding-bottom: calc(${({ratio = 3 / 2}) => 1 / ratio} * 100%);\n\n  & > div {\n    position: absolute;\n    top: ${({padding = 0}) => padding}px;\n    left: ${({padding = 0}) => padding}px;\n    right: ${({padding = 0}) => padding}px;\n    bottom: ${({padding = 0}) => padding}px;\n  }\n`\n","import React from 'react'\n\ninterface ImageLoaderProps {\n  src: string\n  children: (props: {\n    isLoading: boolean\n    image: HTMLImageElement | null\n    error: Error | null\n  }) => React.ReactNode\n}\ninterface ImageLoaderState {\n  isLoading: boolean\n  image: HTMLImageElement | null\n  error: Error | null\n}\n\nexport class ImageLoader extends React.Component<ImageLoaderProps, ImageLoaderState> {\n  state: ImageLoaderState = {\n    isLoading: true,\n    image: null,\n    error: null,\n  }\n\n  UNSAFE_componentWillMount() {\n    this.loadImage(this.props.src)\n  }\n\n  loadImage(src: string) {\n    const image = new Image()\n    this.setState({\n      image: null,\n      error: null,\n    })\n\n    image.onload = () => {\n      this.setState({\n        image: image,\n        error: null,\n        isLoading: false,\n      })\n    }\n\n    image.onerror = () => {\n      this.setState({\n        error: new Error(`Could not load image from ${JSON.stringify(this.props.src)}`),\n        isLoading: false,\n      })\n    }\n\n    image.referrerPolicy = 'strict-origin-when-cross-origin'\n    image.src = src\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps: ImageLoaderProps) {\n    if (nextProps.src !== this.props.src) {\n      this.loadImage(nextProps.src)\n    }\n  }\n\n  render() {\n    const {error, image, isLoading} = this.state\n    return this.props.children({image, error, isLoading})\n  }\n}\n","const testProperties = ['', 'webkit', 'moz', 'ms', 'o'].map(\n  (prefix) => `${prefix}backingStoreRatio`\n)\nlet foundProperty: number | string | undefined = -1\n\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function getBackingStoreRatio(context: CanvasRenderingContext2D) {\n  if (foundProperty === -1) {\n    foundProperty = testProperties.find((testProperty) => testProperty in context)\n  }\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  //@ts-ignore\n  return foundProperty && context[foundProperty]\n}\n","import type {Coordinate} from '../types'\nimport type {Rect} from './shapes'\n\nexport function isPointInEllipse(point: Coordinate, ellipse: Rect): boolean {\n  const center = {x: ellipse.center.x, y: ellipse.center.y}\n  const xradius = ellipse.width / 2\n  const yradius = ellipse.height / 2\n\n  if (xradius <= 0 || yradius <= 0) {\n    return false\n  }\n\n  const normalized = {x: point.x - center.x, y: point.y - center.y}\n\n  return (\n    Math.pow(normalized.x, 2) / Math.pow(xradius, 2) +\n      Math.pow(normalized.y, 2) / Math.pow(yradius, 2) <=\n    1\n  )\n}\n\nexport function isPointInCircle(\n  {x, y}: Coordinate,\n  circle: Coordinate & {radius: number}\n): boolean {\n  return Math.pow(x - circle.x, 2) + Math.pow(y - circle.y, 2) < Math.pow(circle.radius, 2)\n}\n\nexport function isPointInRect(point: Coordinate, rect: Rect): boolean {\n  return (\n    point.x >= rect.left &&\n    point.x <= rect.left + rect.width &&\n    point.y >= rect.top &&\n    point.y <= rect.top + rect.height\n  )\n}\n\nexport function getPointAtCircumference(radians: number, ellipse: Rect): Coordinate {\n  return {\n    x: ellipse.center.x - (ellipse.width / 2) * Math.cos(radians),\n    y: ellipse.center.y - (ellipse.height / 2) * Math.sin(radians),\n  }\n}\n","import type {Crop} from '../types'\n\nexport class Size {\n  height: number\n  width: number\n  constructor(height: number, width: number) {\n    this.height = height\n    this.width = width\n  }\n}\nexport class Point {\n  x: number\n  y: number\n  constructor(x: number, y: number) {\n    this.x = x\n    this.y = y\n  }\n}\n\nclass HLine {\n  y: number\n  _left: number\n  _right: number\n  constructor(y: number, left: number, right: number) {\n    this.y = y\n    this._left = left\n    this._right = right\n  }\n\n  get right() {\n    return new Point(this._right, this.y)\n  }\n\n  get left() {\n    return new Point(this._left, this.y)\n  }\n\n  get length() {\n    return this._right - this._left\n  }\n}\n\nclass Corners {\n  rect: Rect\n  constructor(rect: Rect) {\n    this.rect = rect\n  }\n\n  get top() {\n    return new HLine(this.rect.top, this.rect.left, this.rect.right)\n  }\n\n  get bottom() {\n    return new HLine(this.rect.bottom, this.rect.left, this.rect.right)\n  }\n}\n\nexport class Rect {\n  left: number\n  top: number\n  width: number\n  height: number\n  // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n  static fromEdges({left, right, top, bottom}: Crop) {\n    return new Rect(left, top, 1 - left - right, 1 - top - bottom)\n  }\n\n  constructor(left = 0, top = 0, width = 0, height = 0) {\n    this.left = left\n    this.top = top\n    this.width = width\n    this.height = height\n  }\n\n  setTopLeft(left: number | undefined, top: number | undefined): Rect {\n    return new Rect(left, top, this.width || 0, this.height || 0)\n  }\n\n  setSize(width: number | undefined, height: number | undefined): Rect {\n    return new Rect(this.left || 0, this.top || 0, width, height)\n  }\n\n  setCenter(x: number, y: number): Rect {\n    const width = this.width || 0\n    const height = this.height || 0\n    return new Rect(x - width / 2, y - height / 2, width || 0, height || 0)\n  }\n\n  get center(): Point {\n    return new Point(this.left + this.width / 2, this.top + this.height / 2)\n  }\n\n  get corners(): Corners {\n    return new Corners(this)\n  }\n\n  get right(): number {\n    return this.left + this.width\n  }\n\n  get bottom(): number {\n    return this.top + this.height\n  }\n\n  multiply(rect: Rect): Rect {\n    return new Rect(\n      (this.left || 0) + this.width * rect.left,\n      (this.top || 0) + this.height * rect.top,\n      this.width * rect.width,\n      this.height * rect.height\n    )\n  }\n\n  grow(delta: number): Rect {\n    return new Rect(\n      this.left - delta,\n      this.top - delta,\n      this.width + delta * 2,\n      this.height + delta * 2\n    )\n  }\n\n  shrink(delta: number): Rect {\n    return this.grow(-delta)\n  }\n\n  cropRelative(crop: Rect): Rect {\n    const top = this.top + crop.top * this.height\n    const left = this.left + crop.left * this.width\n    const height = this.height * crop.height\n    const width = this.width * crop.width\n    return new Rect(left, top, width, height)\n  }\n\n  clamp(bounds: Rect): Rect {\n    // always try to fit the whole rect inside given bounds\n    // adjust top, left if we can, resize if we must\n    let {left, top, width, height} = this\n    if (bounds.width < width) {\n      width = bounds.width\n      left = bounds.left\n    }\n    if (bounds.height < height) {\n      height = bounds.height\n      top = bounds.top\n    }\n\n    if (left + width > bounds.left + bounds.width) {\n      left = bounds.right - width\n    }\n\n    if (top + height > bounds.top + bounds.height) {\n      top = bounds.bottom - height\n    }\n\n    return new Rect(Math.max(left, bounds.left), Math.max(top, bounds.top), width, height)\n  }\n}\n","import React from 'react'\nimport Debug from 'debug'\nimport type {Coordinate} from './types'\n\nconst debug = Debug('sanity-imagetool')\nconst supportsTouch = typeof window !== 'undefined' && 'ontouchstart' in window\n\ntype PositionableEvent =\n  | {touches: React.TouchEvent['touches'] | TouchEvent['touches']}\n  | {clientX: number; clientY: number}\n\n// Returns a component that emits `onDragStart, `onDrag` and `onDragEnd` events.\n// It handles mouse/touch events the same way\n// - `onDragStart` is called with the {x, y} positions relative from the dom node (e.g. where the mousedown event happened)\n// - `onDrag` and `onDragEnd` are both called with the {x, y} difference from the previous position\nexport interface DragAwareProps {\n  onDragStart: (pos: {x: number; y: number}) => void\n  onDrag: (pos: {x: number; y: number}) => void\n  onDragEnd: (pos: {x: number; y: number}) => void\n  readOnly?: boolean\n  [key: string]: unknown | undefined\n}\n\nexport function makeDragAware(Component: 'canvas') {\n  return class DragAware extends React.PureComponent<DragAwareProps> {\n    domNode: HTMLCanvasElement | null = null\n    currentPos: Coordinate | null = null\n    isDragging = false\n\n    componentDidMount() {\n      if (supportsTouch) {\n        document.body.addEventListener('touchmove', this.handleTouchMove, {passive: false})\n        document.body.addEventListener('touchend', this.handleDragEnd)\n        document.body.addEventListener('touchcancel', this.handleDragCancel)\n      } else {\n        document.body.addEventListener('mousemove', this.handleDrag)\n        document.body.addEventListener('mouseup', this.handleDragEnd)\n        document.body.addEventListener('mouseleave', this.handleDragCancel)\n      }\n    }\n\n    componentWillUnmount() {\n      if (supportsTouch) {\n        document.body.removeEventListener('touchmove', this.handleTouchMove)\n        document.body.removeEventListener('touchend', this.handleDragEnd)\n        document.body.removeEventListener('touchcancel', this.handleDragCancel)\n      } else {\n        document.body.removeEventListener('mousemove', this.handleDrag)\n        document.body.removeEventListener('mouseup', this.handleDragEnd)\n        document.body.removeEventListener('mouseleave', this.handleDragCancel)\n      }\n    }\n\n    handleTouchMove = (event: TouchEvent | MouseEvent) => {\n      // Disables mobile scroll by touch\n      if (this.isDragging) {\n        event.preventDefault()\n      }\n    }\n\n    handleDragStart = (event: PositionableEvent) => {\n      const {onDragStart, readOnly} = this.props\n\n      if (readOnly || !this.domNode) {\n        return\n      }\n\n      if (this.isDragging) {\n        debug('Start cancelled, already a drag in progress')\n        return\n      }\n\n      this.isDragging = true\n      const nextPos = getPos(event)\n      debug('Drag started %o', nextPos)\n      onDragStart(\n        getPositionRelativeToRect(nextPos.x, nextPos.y, this.domNode.getBoundingClientRect())\n      )\n\n      this.currentPos = nextPos\n    }\n\n    handleDrag = (event: PositionableEvent) => {\n      if (!this.isDragging || this.props.readOnly || !this.currentPos) {\n        return\n      }\n\n      const {onDrag} = this.props\n      const nextPos = getPos(event)\n      const diff = diffPos(nextPos, this.currentPos)\n      onDrag(diff)\n      debug('moving by %o', diff)\n      this.currentPos = nextPos\n    }\n\n    handleDragEnd = (event: MouseEvent | TouchEvent) => {\n      const {onDragEnd, readOnly} = this.props\n      if (!this.isDragging || readOnly || !this.domNode) {\n        return\n      }\n      const nextPos = getPos(event)\n      onDragEnd(\n        getPositionRelativeToRect(nextPos.x, nextPos.y, this.domNode.getBoundingClientRect())\n      )\n      this.isDragging = false\n      this.currentPos = null\n      debug('Done moving %o', nextPos)\n    }\n\n    handleDragCancel = () => {\n      if (!this.isDragging || this.props.readOnly || !this.currentPos || !this.domNode) {\n        return\n      }\n\n      const {onDragEnd} = this.props\n      this.isDragging = false\n      onDragEnd(\n        getPositionRelativeToRect(\n          this.currentPos.x,\n          this.currentPos.y,\n          this.domNode.getBoundingClientRect()\n        )\n      )\n\n      this.currentPos = null\n    }\n\n    setDomNode = (node: HTMLCanvasElement) => {\n      this.domNode = node\n    }\n\n    render() {\n      const {readOnly, onDragStart, onDragEnd, onDrag, ...rest} = this.props\n      return (\n        <Component\n          ref={this.setDomNode}\n          onTouchStart={readOnly ? undefined : this.handleDragStart}\n          onMouseDown={readOnly ? undefined : this.handleDragStart}\n          onTouchMove={readOnly ? undefined : this.handleDrag}\n          {...rest}\n        />\n      )\n    }\n  }\n}\n\nfunction getPositionRelativeToRect(x: number, y: number, rect: {left: number; top: number}) {\n  return {\n    x: x - rect.left,\n    y: y - rect.top,\n  }\n}\n\nfunction getPos(event: PositionableEvent): Coordinate {\n  if ('touches' in event) {\n    return event.touches.length > 0\n      ? {x: event.touches[0].clientX, y: event.touches[0].clientY}\n      : {x: 0, y: 0}\n  }\n\n  return {\n    x: event.clientX,\n    y: event.clientY,\n  }\n}\n\nfunction diffPos(pos: Coordinate, otherPos: Coordinate): Coordinate {\n  return {\n    x: pos.x - otherPos.x,\n    y: pos.y - otherPos.y,\n  }\n}\n","import styled from 'styled-components'\nimport {makeDragAware} from './makeDragAware'\n\nexport const DragAwareCanvas = makeDragAware('canvas')\n\nexport const RootContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\n\nexport const CanvasContainer = styled(DragAwareCanvas)`\n  display: block;\n  position: relative;\n  max-width: calc(100% - 0.5em); /* to prevent overlap with change bar */\n  max-height: calc(100% + 1em);\n  user-select: none;\n`\n","/* eslint-disable max-len */\n\nexport const OPEN_HAND =\n  'data:image/png;base64,AAACAAEAICACAAcABQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAEAAAAAAAAAAAAAAgAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8AAAA/AAAAfwAAAP+AAAH/gAAB/8AAA//AAAd/wAAGf+AAAH9gAADbYAAA2yAAAZsAAAGbAAAAGAAAAAAAAA//////////////////////////////////////////////////////////////////////////////////////gH///4B///8Af//+AD///AA///wAH//4AB//8AAf//AAD//5AA///gAP//4AD//8AF///AB///5A////5///8='\n\nexport const CLOSE_HAND =\n  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAABdSURBVEjH7ZA7DsAwCEMN6v2vTCdESpLKQRl5gxfzMQDNRQyWlEK83QAIRh3cH/QbIhQwMDl8gORl7A16WD/xxAdq6N6SgycKUblf41+wbFBT44RiCi11NU3TLHgBxRUUD4ITqnIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTUtMDEtMjFUMDA6MTM6NDMrMDE6MDC74T7AAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDEyLTA0LTAyVDA0OjEzOjM3KzAyOjAwQJ35wQAAAABJRU5ErkJggg=='\n","import type {Crop, Hotspot} from './types'\n\nexport const DEFAULT_HOTSPOT: Hotspot = {\n  x: 0.5,\n  y: 0.5,\n  height: 1,\n  width: 1,\n}\n\nexport const DEFAULT_CROP: Crop = {\n  top: 0,\n  left: 0,\n  right: 0,\n  bottom: 0,\n}\n","import React, {MouseEvent} from 'react'\nimport {memoize} from 'lodash'\nimport {getBackingStoreRatio} from './getBackingStoreRatio'\nimport * as utils2d from './2d/utils'\nimport {Rect} from './2d/shapes'\nimport {RootContainer, CanvasContainer} from './ToolCanvas.styles'\n\nimport * as cursors from './cursors'\nimport {DEFAULT_CROP, DEFAULT_HOTSPOT} from './constants'\nimport type {\n  Coordinate,\n  Crop,\n  CropAndHotspot,\n  CropHandles,\n  Dimensions,\n  Hotspot,\n  Offsets,\n  ToolCanvasProps,\n  ToolCanvasState,\n} from './types'\n\n// The margin available in all directions for drawing the crop tool\nconst MARGIN_PX = 8\nconst CROP_HANDLE_SIZE = 12\nconst HOTSPOT_HANDLE_SIZE = 10\n\nfunction normalizeRect(rect: Rect) {\n  const flippedY = rect.top > rect.bottom\n  const flippedX = rect.left > rect.right\n  return {\n    top: flippedY ? rect.bottom : rect.top,\n    bottom: flippedY ? rect.top : rect.bottom,\n    left: flippedX ? rect.right : rect.left,\n    right: flippedX ? rect.left : rect.right,\n  }\n}\n\nfunction checkCropBoundaries(value: Partial<CropAndHotspot>, delta: Offsets) {\n  // Make the experience a little better. Still offsets when dragging back from outside\n  if (\n    !value ||\n    !value.crop ||\n    value.crop.top + delta.top < 0 ||\n    value.crop.left + delta.left < 0 ||\n    value.crop.right + delta.right < 0 ||\n    value.crop.bottom + delta.bottom < 0\n  ) {\n    return false\n  }\n  return true\n}\n\nfunction limitToBoundaries(value: Partial<CropAndHotspot>, delta: Offsets) {\n  const {top, right, bottom, left} = value.crop || DEFAULT_CROP\n\n  const newValue = {\n    hotspot: value.hotspot,\n    crop: {\n      top: top + (delta.top || 0) > 0 ? top : 0,\n      right: right + (delta.right || 0) > 0 ? right : 0,\n      bottom: bottom + (delta.bottom || 0) > 0 ? bottom : 0,\n      left: left + (delta.left || 0) > 0 ? left : 0,\n    },\n  }\n\n  const newDelta = {\n    top: top + (delta.top || 0) > 0 ? delta.top || 0 : 0,\n    right: right + (delta.right || 0) > 0 ? delta.right || 0 : 0,\n    bottom: bottom + (delta.bottom || 0) > 0 ? delta.bottom || 0 : 0,\n    left: left + (delta.left || 0) > 0 ? delta.left || 0 : 0,\n  }\n\n  return {value: newValue, delta: newDelta}\n}\n\nfunction getCropCursorForHandle(handle: keyof CropHandles | boolean) {\n  switch (handle) {\n    case 'left':\n    case 'right':\n      return 'col-resize'\n\n    case 'top':\n    case 'bottom':\n      return 'row-resize'\n\n    case 'topRight':\n    case 'bottomLeft':\n      return 'nesw-resize'\n\n    case 'topLeft':\n    case 'bottomRight':\n      return 'nwse-resize'\n    default:\n      return null\n  }\n}\n\nconst getDevicePixelRatio = memoize(() => {\n  const devicePixelRatio = window.devicePixelRatio || 1\n  const ctx = document.createElement('canvas').getContext('2d')\n  const backingStoreRatio = (ctx && getBackingStoreRatio(ctx)) || 1\n  return devicePixelRatio / backingStoreRatio\n})\n\nconst cropHandleKeys: (keyof CropHandles)[] = [\n  'left',\n  'right',\n  'top',\n  'topLeft',\n  'topRight',\n  'bottom',\n  'bottomLeft',\n  'bottomRight',\n]\n\nexport class ToolCanvas extends React.PureComponent<ToolCanvasProps, ToolCanvasState> {\n  state: ToolCanvasState = {\n    cropping: false,\n    cropMoving: false,\n    moving: false,\n    resizing: false,\n    mousePosition: null,\n  }\n\n  canvas?: {domNode: HTMLCanvasElement}\n\n  getHotspotRect() {\n    const {value, image} = this.props\n\n    const hotspot: Hotspot = value.hotspot || DEFAULT_HOTSPOT\n    const hotspotRect = new Rect()\n      .setSize(hotspot.width, hotspot.height)\n      .setCenter(hotspot.x, hotspot.y)\n\n    return new Rect()\n      .setSize(image.width, image.height)\n      .shrink(MARGIN_PX * this.getScale())\n      .multiply(hotspotRect)\n  }\n\n  getCropRect() {\n    const {value, image} = this.props\n\n    return new Rect()\n      .setSize(image.width, image.height)\n      .shrink(MARGIN_PX * this.getScale())\n      .cropRelative(Rect.fromEdges(value.crop || DEFAULT_CROP).clamp(new Rect(0, 0, 1, 1)))\n  }\n\n  getCropHandles(): CropHandles {\n    const inner = this.getCropRect()\n\n    const handleSize = CROP_HANDLE_SIZE * this.getScale()\n\n    const halfCropHandleSize = handleSize / 2\n\n    const cropHandle = new Rect(0, 0, handleSize, handleSize)\n    return {\n      left: cropHandle.setTopLeft(\n        inner.left - halfCropHandleSize,\n        inner.center.y - halfCropHandleSize\n      ),\n      right: cropHandle.setTopLeft(\n        inner.right - halfCropHandleSize,\n        inner.center.y - halfCropHandleSize\n      ),\n\n      top: cropHandle.setTopLeft(\n        inner.center.x - halfCropHandleSize,\n        inner.top - halfCropHandleSize\n      ),\n      topLeft: cropHandle.setTopLeft(\n        inner.left - halfCropHandleSize,\n        inner.top - halfCropHandleSize\n      ),\n      topRight: cropHandle.setTopLeft(\n        inner.right - halfCropHandleSize,\n        inner.top - halfCropHandleSize\n      ),\n\n      bottom: cropHandle.setTopLeft(\n        inner.center.x - halfCropHandleSize,\n        inner.bottom - halfCropHandleSize\n      ),\n      bottomLeft: cropHandle.setTopLeft(\n        inner.left - halfCropHandleSize,\n        inner.bottom - halfCropHandleSize\n      ),\n      bottomRight: cropHandle.setTopLeft(\n        inner.right - halfCropHandleSize,\n        inner.bottom - halfCropHandleSize\n      ),\n    }\n  }\n\n  getActiveCropHandleFor({x, y}: Coordinate) {\n    const cropHandles = this.getCropHandles()\n    for (const position of cropHandleKeys) {\n      if (utils2d.isPointInRect({x, y}, cropHandles[position])) {\n        return position\n      }\n    }\n    return false\n  }\n\n  emitMove(pos: Coordinate) {\n    const {image, value, onChange} = this.props\n    const scale = this.getScale()\n    const delta = {\n      x: (pos.x * scale) / image.width,\n      y: (pos.y * scale) / image.height,\n    }\n\n    onChange(applyHotspotMoveBy(value, delta))\n  }\n\n  emitCropMove(pos: Coordinate) {\n    const {image, onChange, value} = this.props\n    const scale = this.getScale()\n    const left = (pos.x * scale) / image.width\n    const right = (-pos.x * scale) / image.width\n    const top = (pos.y * scale) / image.height\n    const bottom = (-pos.y * scale) / image.height\n    const delta = {left, right, top, bottom}\n\n    if (checkCropBoundaries(value, delta)) {\n      onChange(applyCropMoveBy(value, delta))\n    }\n  }\n\n  emitCrop(side: string | boolean, pos: Coordinate) {\n    const {image, onChange, value} = this.props\n    const scale = this.getScale()\n    let left = 0\n    let right = 0\n    let top = 0\n    let bottom = 0\n\n    if (side == 'left' || side === 'topLeft' || side === 'bottomLeft') {\n      left = (pos.x * scale) / image.width\n    } else if (side == 'right' || side === 'topRight' || side === 'bottomRight') {\n      right = (-pos.x * scale) / image.width\n    }\n\n    if (side == 'top' || side === 'topLeft' || side === 'topRight') {\n      top = (pos.y * scale) / image.height\n    } else if (side == 'bottom' || side === 'bottomLeft' || side === 'bottomRight') {\n      bottom = (-pos.y * scale) / image.height\n    }\n\n    const delta = {left, right, top, bottom}\n    const newValue = limitToBoundaries(value, delta).value\n    const newDelta = limitToBoundaries(value, delta).delta\n\n    onChange(applyCropMoveBy(newValue, newDelta))\n  }\n\n  emitResize(pos: Coordinate) {\n    const {image, onChange, value} = this.props\n    const scale = this.getScale()\n\n    const delta = {\n      x: (pos.x * scale * 2) / image.width,\n      y: (pos.y * scale * 2) / image.height,\n    }\n    onChange(applyHotspotResizeBy(value, {height: delta.y, width: delta.x}))\n  }\n\n  getClampedValue() {\n    const value = this.props.value\n\n    const crop = Rect.fromEdges(value.crop || DEFAULT_CROP).clamp(new Rect(0, 0, 1, 1))\n\n    const hotspot = value.hotspot || DEFAULT_HOTSPOT\n    const hotspotRect = new Rect(0, 0, 1, 1)\n      .setSize(hotspot.width, hotspot.height)\n      .setCenter(hotspot.x, hotspot.y)\n      .clamp(crop)\n\n    return {crop: crop, hotspot: hotspotRect}\n  }\n\n  paintHotspot(context: CanvasRenderingContext2D, opacity: number) {\n    const {image, readOnly} = this.props\n\n    const imageRect = new Rect().setSize(image.width, image.height)\n\n    const {hotspot, crop} = this.getClampedValue()\n\n    const scale = this.getScale()\n    const margin = MARGIN_PX * scale\n\n    context.save()\n    drawBackdrop()\n    drawEllipse()\n    context.clip()\n    drawHole()\n    context.restore()\n    if (!readOnly) {\n      drawDragHandle(Math.PI * 1.25)\n    }\n\n    function drawEllipse() {\n      context.save()\n\n      const dest = imageRect.shrink(margin).multiply(hotspot)\n\n      const scaleY = dest.height / dest.width\n\n      context.scale(1, scaleY)\n      context.beginPath()\n      context.globalAlpha = opacity\n      context.arc(\n        dest.center.x,\n        dest.center.y / scaleY,\n        Math.abs(dest.width / 2),\n        0,\n        2 * Math.PI,\n        false\n      )\n      context.strokeStyle = 'white'\n      context.lineWidth = 1.5 * scale\n      context.stroke()\n      context.closePath()\n\n      context.restore()\n    }\n\n    // eslint-disable-next-line max-params\n    function drawImage(\n      srcLeft: number,\n      srcTop: number,\n      srcWidth: number,\n      srcHeight: number,\n      destLeft: number,\n      destTop: number,\n      destWidth: number,\n      destHeight: number\n    ) {\n      context.save()\n      context.drawImage(\n        image,\n        srcLeft,\n        srcTop,\n        srcWidth,\n        srcHeight,\n        destLeft,\n        destTop,\n        destWidth,\n        destHeight\n      )\n      context.restore()\n    }\n\n    function drawHole() {\n      const src = imageRect.multiply(hotspot)\n\n      const dest = imageRect.shrink(margin).multiply(hotspot)\n\n      drawImage(\n        src.left,\n        src.top,\n        src.width,\n        src.height,\n        dest.left,\n        dest.top,\n        dest.width,\n        dest.height\n      )\n    }\n\n    function drawBackdrop() {\n      const src = imageRect.cropRelative(crop)\n\n      const dest = imageRect.shrink(margin).cropRelative(crop)\n\n      context.save()\n      drawImage(\n        src.left,\n        src.top,\n        src.width,\n        src.height,\n        dest.left,\n        dest.top,\n        dest.width,\n        dest.height\n      )\n      context.globalAlpha = 0.5\n      context.fillStyle = 'black'\n      context.fillRect(dest.left, dest.top, dest.width, dest.height)\n      context.restore()\n    }\n\n    function drawDragHandle(radians: number) {\n      context.save()\n\n      const radius = HOTSPOT_HANDLE_SIZE * scale\n      const dest = imageRect.shrink(margin).multiply(hotspot)\n\n      const point = utils2d.getPointAtCircumference(radians, dest)\n\n      context.beginPath()\n      context.arc(point.x, point.y, radius, 0, 2 * Math.PI, false)\n      context.fillStyle = 'rgb(255,255,255)'\n      context.fill()\n      context.closePath()\n      context.restore()\n\n      context.beginPath()\n      context.arc(point.x, point.y, radius, 0, 2 * Math.PI, false)\n      context.strokeStyle = 'rgb(0, 0, 0)'\n      context.lineWidth = 0.5 * scale\n      context.stroke()\n      context.closePath()\n    }\n  }\n\n  getActualSize() {\n    const node = this.canvas?.domNode\n    return node ? {height: node.clientHeight, width: node.clientWidth} : {height: 0, width: 0}\n  }\n\n  getDragHandleCoords() {\n    const bbox = this.getHotspotRect()\n    const point = utils2d.getPointAtCircumference(Math.PI * 1.25, bbox)\n    return {\n      x: point.x,\n      y: point.y,\n      radius: 8 * this.getScale(),\n    }\n  }\n\n  debug(context: CanvasRenderingContext2D) {\n    context.save()\n\n    const {image} = this.props\n\n    const bbox = this.getHotspotRect()\n    const scale = this.getScale()\n    const margin = MARGIN_PX * scale\n\n    // IE 10 doesn't support context.setLineDash\n    if (context.setLineDash) {\n      context.setLineDash([2 * scale, 2 * scale])\n    }\n    context.lineWidth = 0.5 * scale\n\n    context.strokeStyle = 'rgba(200, 200, 200, 0.5)'\n\n    // --- center line x\n    vline(bbox.center.x)\n    // --- center line y\n    hline(bbox.center.y)\n\n    context.strokeStyle = 'rgba(150, 150, 150, 0.5)'\n    // --- line top\n    hline(bbox.top)\n\n    // --- line bottom\n    hline(bbox.bottom)\n\n    // --- line left\n    vline(bbox.left)\n    // --- line right\n    vline(bbox.right)\n\n    context.restore()\n\n    function vline(x: number) {\n      line(x, margin, x, image.height - margin)\n    }\n\n    function hline(y: number) {\n      line(margin, y, image.width - margin, y)\n    }\n\n    function line(x1: number, y1: number, x2: number, y2: number) {\n      context.beginPath()\n      context.moveTo(x1, y1)\n      context.lineTo(x2, y2)\n      context.stroke()\n      context.closePath()\n    }\n  }\n\n  paintBackground(context: CanvasRenderingContext2D) {\n    const {image} = this.props\n    const inner = new Rect().setSize(image.width, image.height).shrink(MARGIN_PX * this.getScale())\n\n    context.save()\n    context.fillStyle = 'white'\n    context.clearRect(0, 0, image.width, image.height)\n\n    context.globalAlpha = 0.3\n    //context.globalCompositeOperation = 'lighten';\n\n    context.drawImage(image, inner.left, inner.top, inner.width, inner.height)\n    context.restore()\n  }\n\n  paint(context: CanvasRenderingContext2D) {\n    const {readOnly} = this.props\n    context.save()\n\n    const pxratio = getDevicePixelRatio()\n    context.scale(pxratio, pxratio)\n\n    const opacity = !readOnly && this.state.mousePosition ? 0.8 : 0.2\n\n    this.paintBackground(context)\n    //return context.restore();\n    this.paintHotspot(context, opacity)\n    //this.paintDragHandle(context);\n    this.debug(context)\n    this.paintCropBorder(context)\n\n    if (!readOnly) {\n      this.highlightCropHandles(context, opacity)\n    }\n\n    if (this.state.mousePosition) {\n      // this.paintMousePosition(context)\n    }\n\n    context.restore()\n  }\n\n  paintMousePosition(context: CanvasRenderingContext2D) {\n    if (!this.state.mousePosition) {\n      return\n    }\n\n    const {x, y} = this.state.mousePosition\n    context.beginPath()\n    context.arc(x, y, 14 * this.getScale(), 0, 2 * Math.PI, false)\n    context.fillStyle = 'lightblue'\n    context.fill()\n    context.restore()\n  }\n\n  paintCropBorder(context: CanvasRenderingContext2D) {\n    const cropRect = this.getCropRect()\n    context.save()\n    context.beginPath()\n    context.fillStyle = 'rgba(66, 66, 66, 0.9)'\n    context.lineWidth = 1\n    context.rect(cropRect.left, cropRect.top, cropRect.width, cropRect.height)\n    context.stroke()\n    context.closePath()\n    context.restore()\n  }\n\n  highlightCropHandles(context: CanvasRenderingContext2D, opacity: number) {\n    context.save()\n    const cropHandles = this.getCropHandles()\n\n    //context.globalCompositeOperation = \"difference\";\n\n    cropHandleKeys.forEach((handle) => {\n      context.fillStyle =\n        this.state.cropping === handle\n          ? `rgba(202, 54, 53, ${opacity})`\n          : `rgba(230, 230, 230, ${opacity + 0.4})`\n      const {left, top, height, width} = cropHandles[handle]\n      context.fillRect(left, top, width, height)\n      context.beginPath()\n      context.fillStyle = `rgba(66, 66, 66, ${opacity})`\n      context.rect(left, top, width, height)\n      context.closePath()\n      context.stroke()\n    })\n    context.restore()\n  }\n\n  getScale() {\n    const actualSize = this.getActualSize()\n    return this.props.image.width / actualSize.width\n  }\n\n  getCursor() {\n    const {mousePosition} = this.state\n    const {readOnly} = this.props\n    if (!mousePosition || readOnly) {\n      return 'auto'\n    }\n\n    const activeCropArea = this.state.cropping || this.getActiveCropHandleFor(mousePosition)\n    if (activeCropArea) {\n      return getCropCursorForHandle(activeCropArea) || 'auto'\n    }\n\n    const mouseOverDragHandle = utils2d.isPointInCircle(mousePosition, this.getDragHandleCoords())\n\n    if (this.state.resizing || mouseOverDragHandle) {\n      return 'move'\n    }\n\n    if (this.state.moving || this.state.cropMoving) {\n      return `url(${cursors.CLOSE_HAND}), move`\n    }\n\n    const mouseoverHotspot = utils2d.isPointInEllipse(mousePosition, this.getHotspotRect())\n    const mouseoverCropRect = utils2d.isPointInRect(mousePosition, this.getCropRect())\n    if (mouseoverHotspot || mouseoverCropRect) {\n      return `url(${cursors.OPEN_HAND}), move`\n    }\n\n    return 'auto'\n  }\n\n  componentDidMount() {\n    this.draw()\n  }\n\n  componentDidUpdate() {\n    this.draw()\n  }\n\n  draw() {\n    if (!this.canvas) {\n      return\n    }\n\n    const domNode = this.canvas.domNode\n    const context = domNode.getContext('2d')\n    if (!context) {\n      return\n    }\n\n    this.paint(context)\n    const currentCursor = domNode.style.cursor\n    const newCursor = this.getCursor()\n    if (currentCursor !== newCursor) {\n      domNode.style.cursor = newCursor\n    }\n  }\n\n  handleDragStart = ({x, y}: Coordinate) => {\n    const mousePosition = {x: x * this.getScale(), y: y * this.getScale()}\n\n    const inHotspot = utils2d.isPointInEllipse(mousePosition, this.getHotspotRect())\n\n    const inDragHandle = utils2d.isPointInCircle(mousePosition, this.getDragHandleCoords())\n\n    const activeCropHandle = this.getActiveCropHandleFor(mousePosition)\n\n    const inCropRect = utils2d.isPointInRect(mousePosition, this.getCropRect())\n\n    if (activeCropHandle) {\n      this.setState({cropping: activeCropHandle})\n    } else if (inDragHandle) {\n      this.setState({resizing: true})\n    } else if (inHotspot) {\n      this.setState({moving: true})\n    } else if (inCropRect) {\n      this.setState({cropMoving: true})\n    }\n  }\n\n  handleDrag = (pos: Coordinate) => {\n    if (this.state.cropping) {\n      this.emitCrop(this.state.cropping, pos)\n    } else if (this.state.cropMoving) {\n      this.emitCropMove(pos)\n    } else if (this.state.moving) {\n      this.emitMove(pos)\n    } else if (this.state.resizing) {\n      this.emitResize(pos)\n    }\n  }\n\n  handleDragEnd = () => {\n    const {onChange, onChangeEnd} = this.props\n    this.setState({moving: false, resizing: false, cropping: false, cropMoving: false})\n    const {hotspot, crop: rawCrop} = this.getClampedValue()\n\n    const crop = normalizeRect(rawCrop)\n\n    const finalValue = {\n      crop: {\n        top: crop.top,\n        bottom: 1 - crop.bottom,\n        left: crop.left,\n        right: 1 - crop.right,\n      },\n      hotspot: {\n        x: hotspot.center.x,\n        y: hotspot.center.y,\n        height: Math.abs(hotspot.height),\n        width: Math.abs(hotspot.width),\n      },\n    }\n    onChange(finalValue)\n    if (onChangeEnd) {\n      onChangeEnd(finalValue)\n    }\n  }\n\n  handleMouseOut = () => {\n    this.setState({mousePosition: null})\n  }\n\n  handleMouseMove = (event: MouseEvent<HTMLCanvasElement>) => {\n    const clientRect = event.currentTarget.getBoundingClientRect()\n    this.setState({\n      mousePosition: {\n        x: (event.clientX - clientRect.left) * this.getScale(),\n        y: (event.clientY - clientRect.top) * this.getScale(),\n      },\n    })\n  }\n\n  setCanvas = (node: {domNode: HTMLCanvasElement}) => {\n    this.canvas = node\n  }\n\n  render() {\n    const {image, readOnly} = this.props\n    const ratio = getDevicePixelRatio()\n    return (\n      <RootContainer>\n        <CanvasContainer\n          readOnly={readOnly}\n          ref={this.setCanvas}\n          onDrag={this.handleDrag}\n          onDragStart={this.handleDragStart}\n          onDragEnd={this.handleDragEnd}\n          onMouseMove={this.handleMouseMove}\n          onMouseOut={this.handleMouseOut}\n          height={image.height * ratio}\n          width={image.width * ratio}\n        />\n      </RootContainer>\n    )\n  }\n}\n\nfunction applyHotspotMoveBy(value: Partial<CropAndHotspot>, delta: Coordinate): {hotspot: Hotspot} {\n  const currentHotspot = (value && value.hotspot) || DEFAULT_HOTSPOT\n\n  return {\n    ...value,\n    hotspot: {\n      ...currentHotspot,\n      x: currentHotspot.x + delta.x,\n      y: currentHotspot.y + delta.y,\n    },\n  }\n}\n\nfunction applyHotspotResizeBy(\n  value: Partial<CropAndHotspot>,\n  delta: Dimensions\n): {hotspot: Hotspot} {\n  const currentHotspot = (value && value.hotspot) || DEFAULT_HOTSPOT\n  return {\n    ...value,\n    hotspot: {\n      ...currentHotspot,\n      height: currentHotspot.height + delta.height,\n      width: currentHotspot.width + delta.width,\n    },\n  }\n}\n\nfunction applyCropMoveBy(value: Partial<CropAndHotspot>, delta: Offsets): {crop: Crop} {\n  const currentCrop = (value && value.crop) || DEFAULT_CROP\n  return {\n    ...value,\n    crop: {\n      left: currentCrop.left + (delta.left || 0),\n      right: currentCrop.right + (delta.right || 0),\n      top: currentCrop.top + (delta.top || 0),\n      bottom: currentCrop.bottom + (delta.bottom || 0),\n    },\n  }\n}\n","import React from 'react'\n\nexport interface ResizeProps {\n  image: HTMLImageElement\n  maxHeight: number\n  maxWidth: number\n  children: (canvas: HTMLCanvasElement) => React.ReactNode\n}\n\nexport class Resize extends React.Component<ResizeProps> {\n  _canvas: HTMLCanvasElement | null = null\n\n  componentWillUnmount() {\n    if (this._canvas) {\n      document.body.removeChild(this._canvas)\n    }\n  }\n\n  getCanvas() {\n    if (!this._canvas) {\n      this._canvas = document.createElement('canvas')\n      document.body.appendChild(this._canvas)\n      this._canvas.style.display = 'none'\n    }\n    return this._canvas\n  }\n\n  resize(image: HTMLImageElement, maxHeight: number, maxWidth: number) {\n    const canvas = this.getCanvas()\n    const ratio = image.width / image.height\n    const width = Math.min(image.width, maxWidth)\n    const height = Math.min(image.height, maxHeight)\n\n    const landscape = image.width > image.height\n    const targetWidth = landscape ? width : height * ratio\n    const targetHeight = landscape ? width / ratio : height\n\n    canvas.width = targetWidth\n    canvas.height = targetHeight\n\n    const ctx = canvas.getContext('2d')\n    if (ctx) {\n      ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, targetWidth, targetHeight)\n    }\n\n    return canvas\n  }\n\n  render() {\n    const {image, maxHeight, maxWidth, children} = this.props\n    return children(this.resize(image, maxHeight, maxWidth))\n  }\n}\n","import React from 'react'\nimport {ImageLoader} from './ImageLoader'\nimport {ToolCanvas} from './ToolCanvas'\nimport {Resize} from './Resize'\nimport type {ToolCanvasProps} from './types'\n\nexport interface ImageToolProps extends Omit<ToolCanvasProps, 'image'> {\n  image?: HTMLCanvasElement\n  src: string\n}\n\nexport function ImageTool(props: ImageToolProps) {\n  return (\n    <ImageLoader src={props.src}>\n      {({isLoading, image, error}) => {\n        if (isLoading) {\n          return <div>Loading...</div>\n        }\n        if (error) {\n          return <div>{error.message}</div>\n        }\n        if (image) {\n          return (\n            <Resize image={image} maxHeight={ImageTool.maxHeight} maxWidth={ImageTool.maxWidth}>\n              {(canvas) => <ToolCanvas image={canvas} {...props} />}\n            </Resize>\n          )\n        }\n        return null\n      }}\n    </ImageLoader>\n  )\n}\n\nImageTool.maxHeight = 500\nImageTool.maxWidth = 1000\n","import type {CSSProperties} from 'react'\nimport {DEFAULT_HOTSPOT, DEFAULT_CROP} from './constants'\nimport {Crop, Hotspot, CropMethod, CropAndHotspot} from './types'\n\ninterface Options {\n  image?: {aspectRatio: number} | {height: number; width: number}\n  container?: {aspectRatio: number} | {height: number; width: number}\n  hotspot?: Hotspot\n  crop?: Crop\n  align?: CropAlignment\n}\n\ninterface CSSBox {\n  width: number\n  height: number\n  left: number\n  top: number\n}\n\ninterface CropAlignment {\n  x: 'left' | 'right' | 'center'\n  y: 'top' | 'bottom' | 'center'\n}\n\ninterface HotspotCropStyleResult {\n  crop: CSSBox\n  image: CSSBox\n  method: CropMethod\n}\n\nexport interface CalculatedStyles {\n  container: CSSProperties\n  padding: CSSProperties\n  crop: CSSProperties\n  image: CSSProperties\n  debug: {\n    result: HotspotCropStyleResult\n  }\n}\n\nexport function calculateStyles(options: Options = {}): CalculatedStyles {\n  const imageAspect = readAspectRatio(options.image) || 1\n\n  const hotspot = options.hotspot || DEFAULT_HOTSPOT\n  const crop = options.crop || DEFAULT_CROP\n  const containerAspect = readAspectRatio(options.container) || imageAspect * readCropAspect(crop)\n\n  const align = options.align || {x: 'center', y: 'center'}\n\n  const result = calculateHotSpotCrop(\n    imageAspect,\n    {hotspot, crop},\n    {aspect: containerAspect, align}\n  )\n\n  const containerHeight = styleFormat(round(100 / containerAspect))\n\n  return {\n    debug: {\n      result,\n    },\n    container: {\n      //outline: '1px solid cyan',\n      overflow: 'hidden',\n      position: 'relative',\n      width: '100%',\n      height: containerHeight,\n    },\n    padding: {\n      marginTop: containerHeight,\n    },\n    crop: {\n      position: 'absolute',\n      overflow: 'hidden',\n      height: toStylePercentage(result.crop.height),\n      width: toStylePercentage(result.crop.width),\n      top: toStylePercentage(result.crop.top),\n      left: toStylePercentage(result.crop.left),\n    },\n    image: {\n      position: 'absolute',\n      height: toStylePercentage(result.image.height),\n      width: toStylePercentage(result.image.width),\n      top: toStylePercentage(result.image.top),\n      left: toStylePercentage(result.image.left),\n    },\n  }\n}\n\nfunction readAspectRatio(opts: Options['image']): number | null {\n  if (!opts) {\n    return null\n  }\n\n  if ('aspectRatio' in opts) {\n    return opts.aspectRatio\n  }\n\n  if ('height' in opts || 'width' in opts) {\n    if (typeof opts.height !== 'number' && typeof opts.width !== 'number') {\n      throw new Error(`Height and width must be numbers, got ${JSON.stringify(opts)}`)\n    }\n\n    return opts.width / opts.height\n  }\n\n  return null\n}\n\nfunction round(num: number, decimals = 2): number {\n  const multiplier = Math.pow(10, decimals)\n  return Math.round(num * multiplier) / multiplier\n}\n\nfunction calculateHotSpotCrop(\n  sourceAspect: number,\n  descriptor: CropAndHotspot,\n  spec: {aspect: number; align: CropAlignment}\n): HotspotCropStyleResult {\n  const crop = descriptor.crop\n  const viewportAspect = spec.aspect\n  const alignment = spec.align\n\n  // The rational aspect of the cropped image\n  const netWidth = 1.0 - crop.left - crop.right\n  const netHeight = 1.0 - crop.top - crop.bottom\n\n  // Places the image inside the crop box\n  const outImg = {\n    top: -crop.top / netHeight,\n    left: -crop.left / netWidth,\n    width: 1 / netWidth,\n    height: 1 / netHeight,\n  }\n\n  // The rational aspect is the aspect ration of the crop in ratios of the image size meaning the image\n  // is always considered having the size 1.0*1.0\n  const cropRationalAspect = netWidth / netHeight\n\n  // cropAspect is the real aspect ratio of the crop box in pixel-space\n  const cropAspect = cropRationalAspect * sourceAspect\n\n  // Now we transform the hotspot to be expressed in ratios of the cropped area, not the\n  // full image:\n  const hotspot = {\n    x: (descriptor.hotspot.x - crop.left) / netWidth,\n    y: (descriptor.hotspot.y - crop.top) / netHeight,\n    height: descriptor.hotspot.height / netHeight,\n    width: descriptor.hotspot.width / netWidth,\n  }\n\n  // Lets calculate the maximum scale the image may be presented at without cropping the hotspot. A scale of\n  // 1.0 means the cropped image exactly fill the width of the viewport.\n\n  // The scale at which the hotspot would fill the viewport exactly in the X direction\n  const maxHotspotXScale = 1.0 / hotspot.width\n  // The scale at which the hotspot would fill the veiwport exactly in the Y direction\n  const maxHotspotYScale = ((1.0 / hotspot.height) * cropAspect) / viewportAspect\n  // This is the largest scale the image can have while still not cropping the hotspot:\n  const maxScale = Math.min(maxHotspotXScale, maxHotspotYScale)\n\n  // Now lets find the minimum scale we can have while maintaining full bleed (no letterboxing)\n  let minFullBleedScale\n  const cropIsTaller = cropAspect <= viewportAspect\n  if (cropIsTaller) {\n    // Crop is taller than viewport\n    minFullBleedScale = 1.0 // By definition 1.0 fills the width of the viewport exactly with the viewport cutting away from the height of the cropbox\n  } else {\n    // Image is wider than viewport\n    minFullBleedScale = cropAspect / viewportAspect // At this scale the viewport is filled exactly in the height while cutting away from the sides\n  }\n\n  let method: CropMethod\n  let outCrop: CSSBox\n\n  // Do we have to letterbox this image in order to leave the hotspot area uncropped?\n  if (minFullBleedScale > maxScale) {\n    // Yes :-( There is no way to protect the hot spot and still have full bleed, so we are letterboxing it\n    method = 'letterbox'\n    let letterboxScale\n    const diff = minFullBleedScale - maxScale\n\n    // Determine a scale where the image fills one dimension of the container\n    if (cropIsTaller) {\n      letterboxScale = 1.0 - diff\n    } else {\n      letterboxScale = maxScale\n    }\n\n    outCrop = {\n      width: letterboxScale,\n      height: (letterboxScale / cropAspect) * viewportAspect,\n\n      // Gets overwritten further down\n      left: 0,\n      top: 0,\n    }\n\n    const hotspotLeft = hotspot.x * outCrop.width - (hotspot.width * outCrop.width) / 2\n    switch (alignment.x) {\n      case 'left':\n        outCrop.left = cropIsTaller ? 0 : -hotspotLeft\n        break\n      case 'right':\n        // todo: broken atm\n        outCrop.left = cropIsTaller ? 1 - outCrop.width : hotspotLeft\n        break\n      case 'center':\n        outCrop.left = cropIsTaller ? (1 - outCrop.width) / 2 : -hotspotLeft\n        break\n      default:\n        throw new Error(\n          `Invalid x alignment: '${alignment.x}'. Must be either 'left', 'right' or 'center'`\n        )\n    }\n    const hotspotTop = hotspot.y * outCrop.height - (hotspot.height * outCrop.height) / 2\n    switch (alignment.y) {\n      case 'top':\n        outCrop.top = cropIsTaller ? -hotspotTop : 0\n        break\n      case 'bottom':\n        // todo: broken atm\n        outCrop.top = hotspotTop\n        break\n      case 'center':\n        outCrop.top = cropIsTaller ? -hotspotTop : (1 - outCrop.height) / 2\n        break\n      default:\n        throw new Error(\n          `Invalid y alignment: '${alignment.y}'. Must be either 'top', 'bottom' or 'center'`\n        )\n    }\n  } else if (cropIsTaller) {\n    // TODO: Clamp hotspot offset to avoid moving image off canvas\n    method = 'full_width'\n\n    let top = (-hotspot.y / cropAspect) * viewportAspect + 0.5\n    const height = (minFullBleedScale / cropAspect) * viewportAspect\n    // Clamp top so that we will not move the image off of the viewport\n    if (top > 0) {\n      top = 0\n    } else if (-top > height - 1.0) {\n      top = -(height - 1.0)\n    }\n\n    outCrop = {\n      width: minFullBleedScale,\n      height,\n      left: 0,\n      // Place the Y center of the hotspot near the center of the viewport\n      top,\n    }\n  } else {\n    // crop is wider\n    method = 'full_height'\n\n    const width = minFullBleedScale\n    let left = 0.5 - hotspot.x * minFullBleedScale\n    if (left > 0) {\n      left = 0\n    } else if (-left > width - 1.0) {\n      left = -(width - 1.0)\n    }\n    // Clamp left so that we will not move the image off of the viewport.\n    outCrop = {\n      width,\n      height: (minFullBleedScale / cropAspect) * viewportAspect,\n      top: 0,\n      // Place the X center of the hotspot at the center of the viewport\n      left,\n    }\n  }\n\n  return {\n    method,\n    crop: outCrop,\n    image: outImg,\n  }\n}\n\nfunction readCropAspect(crop: Crop) {\n  const height = 1 - crop.top - crop.bottom\n  const width = 1 - crop.left - crop.right\n  return width / height\n}\n\nfunction styleFormat(num: number) {\n  return num === 0 ? 0 : `${num}%`\n}\n\nfunction toStylePercentage(num: number) {\n  return styleFormat(round(num * 100))\n}\n","import styled from 'styled-components'\n\nexport const HotspotImageContainer = styled.div`\n  position: relative;\n  width: 100%;\n`\n","import React from 'react'\nimport Debug from 'debug'\nimport {debounce} from 'lodash'\nimport {calculateStyles} from './calculateStyles'\nimport {DEFAULT_HOTSPOT, DEFAULT_CROP} from './constants'\nimport {HotspotImageContainer} from './HotspotImage.styles'\nimport type {Crop, Hotspot} from './types'\n\nconst debug = Debug('sanity-imagetool')\n\nfunction getCropAspect(crop: Crop, srcAspect: number) {\n  const origHeight = 1 / srcAspect\n  const origWidth = srcAspect * origHeight\n  const cropWidth = origWidth - (crop.left + crop.right) * origWidth\n  const cropHeight = origHeight - (crop.top + crop.bottom) * origHeight\n  return cropWidth / cropHeight\n}\n\nexport interface HotspotImageProps {\n  src: string\n  srcAspectRatio: number\n  srcSet?: string\n  hotspot?: Hotspot\n  crop?: Crop\n  aspectRatio?: number | 'auto' | 'none'\n  alignX?: 'left' | 'center' | 'right'\n  alignY?: 'top' | 'center' | 'bottom'\n  className?: string\n  style?: React.CSSProperties\n  alt?: string\n  onError?: (event: React.SyntheticEvent<HTMLImageElement, Event>) => void\n  onLoad?: () => void\n}\nexport interface HotspotImageState {\n  containerAspect: number | null\n}\nexport class HotspotImage extends React.PureComponent<HotspotImageProps, HotspotImageState> {\n  static defaultProps = {\n    alignX: 'center',\n    alignY: 'center',\n    className: '',\n    crop: DEFAULT_CROP,\n    hotspot: DEFAULT_HOTSPOT,\n    aspectRatio: 'none',\n  }\n\n  state: HotspotImageState = {\n    containerAspect: null,\n  }\n\n  containerElement: HTMLDivElement | null = null\n  imageElement: HTMLImageElement | null = null\n\n  componentDidMount() {\n    const imageElement = this.imageElement\n\n    // Fixes issues that may happen if the component is rendered on server and mounted after the image has finished loading\n    // In these situations, neither the onLoad or the onError events will be called.\n    // Derived from http://imagesloaded.desandro.com/\n    const alreadyLoaded =\n      imageElement &&\n      imageElement.src &&\n      imageElement.complete &&\n      imageElement.naturalWidth !== undefined\n\n    if (alreadyLoaded) {\n      debug(\n        \"Image '%s' already loaded, refreshing (from cache) to trigger onLoad / onError\",\n        this.props.src\n      )\n      // eslint-disable-next-line no-self-assign\n      imageElement.src = imageElement.src\n    }\n\n    this.updateContainerAspect(this.props)\n\n    if (typeof window !== 'undefined') {\n      window.addEventListener('resize', this.handleResize)\n    }\n  }\n\n  componentWillUnmount() {\n    if (typeof window !== 'undefined') {\n      window.removeEventListener('resize', this.handleResize)\n    }\n  }\n\n  // eslint-disable-next-line camelcase\n  UNSAFE_componentWillReceiveProps(nextProps: HotspotImageProps) {\n    if (nextProps.aspectRatio !== this.props.aspectRatio) {\n      this.updateContainerAspect(nextProps)\n    }\n  }\n\n  updateContainerAspect(props: HotspotImageProps) {\n    if (!this.containerElement) return\n    if (props.aspectRatio === 'auto') {\n      const parentNode = this.containerElement.parentNode as HTMLElement\n      this.setState({\n        containerAspect: parentNode.offsetWidth / parentNode.offsetHeight,\n      })\n    } else {\n      this.setState({\n        containerAspect: null,\n      })\n    }\n  }\n\n  getTargetAspectValue() {\n    const {aspectRatio, srcAspectRatio, crop} = this.props\n\n    if (aspectRatio === 'none') {\n      return crop ? getCropAspect(crop, srcAspectRatio) : srcAspectRatio\n    }\n\n    if (aspectRatio === 'auto') {\n      return this.state.containerAspect\n    }\n\n    return aspectRatio || null\n  }\n\n  setImageElement = (el: HTMLImageElement | null) => {\n    this.imageElement = el\n  }\n\n  handleResize = debounce(() => this.updateContainerAspect(this.props))\n\n  setContainerElement = (el: HTMLDivElement | null) => {\n    this.containerElement = el\n  }\n\n  render() {\n    const {\n      srcAspectRatio,\n      crop,\n      hotspot,\n      src,\n      srcSet,\n      alignX = 'center',\n      alignY = 'center',\n      className,\n      style,\n      alt,\n      onError,\n      onLoad,\n    } = this.props\n\n    const targetAspect = this.getTargetAspectValue()\n\n    const targetStyles = calculateStyles({\n      container: {aspectRatio: targetAspect || srcAspectRatio},\n      image: {aspectRatio: srcAspectRatio},\n      hotspot,\n      crop,\n      align: {\n        x: alignX,\n        y: alignY,\n      },\n    })\n    return (\n      <HotspotImageContainer\n        className={`${className}`}\n        style={style}\n        ref={this.setContainerElement}\n      >\n        <div style={targetStyles.container}>\n          <div style={targetStyles.padding} />\n          <div style={targetStyles.crop}>\n            <img\n              ref={this.setImageElement}\n              src={src}\n              alt={alt}\n              srcSet={srcSet}\n              onLoad={onLoad}\n              onError={onError}\n              style={targetStyles.image}\n            />\n          </div>\n        </div>\n      </HotspotImageContainer>\n    )\n  }\n}\n","import {Observable} from 'rxjs'\nimport {useEffect, useState} from 'react'\n\n// http://probablyprogramming.com/2009/03/15/the-tiniest-gif-ever\nconst PROBABLY_THE_TINIEST_GIF_EVER = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs='\n\nfunction isBlob(src: string) {\n  return src.startsWith('blob:')\n}\n\nexport function loadImage(src: string): Observable<HTMLImageElement> {\n  return new Observable((subscriber) => {\n    const image = document.createElement('img')\n\n    let completed = false\n    const onload = () => {\n      completed = true\n      subscriber.next(image)\n      subscriber.complete()\n    }\n\n    const onerror = () => {\n      completed = true\n      subscriber.error(new Error(`Could not load image from ${isBlob(src) ? 'blob' : src}`))\n    }\n\n    image.onload = onload\n    image.onerror = onerror\n    image.src = src\n\n    return () => {\n      image.onload = null\n      image.onerror = null\n\n      if (!completed) {\n        // if we unsubscribe before it's loaded this will cancel the image loading\n        image.src = PROBABLY_THE_TINIEST_GIF_EVER\n      }\n    }\n  })\n}\n\ntype ImageLoadState = {\n  isLoading: boolean\n  image?: HTMLImageElement\n  error?: Error\n}\n\nconst INITIAL_STATE = {isLoading: true}\n\nexport function useLoadImage(url: string): ImageLoadState {\n  const [state, setState] = useState<ImageLoadState>(INITIAL_STATE)\n\n  useEffect(() => {\n    setState(INITIAL_STATE)\n    const subscription = loadImage(url)\n      // .pipe(delay(2000))\n      .subscribe({\n        error: (err) => {\n          setState({isLoading: false, error: err})\n        },\n        next: (image) => {\n          setState({image, isLoading: false})\n        },\n      })\n    return () => {\n      subscription.unsubscribe()\n    }\n  }, [url])\n\n  return state\n}\n","import React, {useCallback, useEffect, useState} from 'react'\nimport type {Image, ImageSchemaType} from '@sanity/types'\nimport {Box, Card, Flex, Text, Grid, Heading} from '@sanity/ui'\nimport styled from 'styled-components'\nimport {ChangeIndicator} from '../../../../components/changeIndicators'\nimport {FormField} from '../../../components/formField'\nimport {set} from '../../../patch'\nimport {RatioBox} from '../common/RatioBox'\nimport {EMPTY_ARRAY} from '../../../utils/empty'\nimport type {ObjectInputProps} from '../../../types'\nimport {useDidUpdate} from '../../../hooks/useDidUpdate'\nimport {ImageTool, HotspotImage, DEFAULT_CROP, DEFAULT_HOTSPOT} from './imagetool'\nimport {useLoadImage} from './useLoadImage'\n\nexport interface ImageToolInputProps\n  extends Omit<ObjectInputProps<Image, ImageSchemaType>, 'markers'> {\n  imageUrl: string\n}\n\nconst HOTSPOT_PATH = ['hotspot']\n\nconst PREVIEW_ASPECT_RATIOS = [\n  ['3:4', 3 / 4],\n  ['Square', 1 / 1],\n  ['16:9', 16 / 9],\n  ['Panorama', 4 / 1],\n] as const\n\nconst DEFAULT_VALUE: Partial<Image> = {\n  crop: DEFAULT_CROP,\n  hotspot: DEFAULT_HOTSPOT,\n}\n\nconst Placeholder = styled.div`\n  min-height: 6em;\n`\n\nfunction LoadStatus(props: {children: React.ReactNode}) {\n  return (\n    <Flex align=\"center\" justify=\"center\" padding={4} style={{overflowWrap: 'break-word'}}>\n      {props.children}\n    </Flex>\n  )\n}\n\nexport function ImageToolInput(props: ImageToolInputProps) {\n  const {\n    imageUrl,\n    value,\n    changed,\n    level,\n    path,\n    focusPath = EMPTY_ARRAY,\n    presence,\n    onChange,\n    schemaType,\n    onFocusPath,\n    readOnly,\n    elementProps,\n  } = props\n\n  const [localValue, setLocalValue] = useState(value || DEFAULT_VALUE)\n\n  const {image, isLoading: isImageLoading, error: imageLoadError} = useLoadImage(imageUrl)\n\n  const handleFocus = useCallback(() => {\n    onFocusPath(HOTSPOT_PATH)\n  }, [onFocusPath])\n\n  useEffect(() => {\n    setLocalValue(value || DEFAULT_VALUE)\n  }, [value])\n\n  const hasFocus = focusPath[0] === 'hotspot'\n\n  useDidUpdate(hasFocus, (hadFocus) => {\n    if (!hadFocus && hasFocus) {\n      elementProps.ref.current?.focus()\n    }\n  })\n\n  const handleChangeEnd = useCallback(\n    (finalValue) => {\n      if (readOnly) {\n        return\n      }\n      // For backwards compatibility, where hotspot/crop might not have a named type yet\n      const cropField = schemaType.fields.find(\n        (field) => field.name === 'crop' && field.type.name !== 'object'\n      )\n\n      const hotspotField = schemaType.fields.find(\n        (field) => field.type.name !== 'object' && field.name === 'hotspot'\n      )\n\n      // Note: when either hotspot or crop change we fill in the default if the other is missing\n      // (we can't have one without the other)\n      const crop = cropField\n        ? {_type: cropField.type.name, ...(finalValue.crop || DEFAULT_CROP)}\n        : finalValue.crop\n\n      const hotspot = hotspotField\n        ? {_type: hotspotField.type.name, ...(finalValue.hotspot || DEFAULT_HOTSPOT)}\n        : finalValue.hotspot\n\n      onChange([set(crop, ['crop']), set(hotspot, ['hotspot'])])\n    },\n    [onChange, readOnly, schemaType.fields]\n  )\n\n  return (\n    <FormField\n      title=\"Hotspot &amp; crop\"\n      level={level}\n      description=\"Adjust the rectangle to crop image. Adjust the circle to specify the area that should always be visible.\"\n      __unstable_presence={presence}\n    >\n      <div>\n        <Card\n          __unstable_checkered\n          __unstable_focusRing\n          tabIndex={0}\n          ref={elementProps.ref}\n          onFocus={handleFocus}\n        >\n          <ChangeIndicator\n            path={path.concat(HOTSPOT_PATH)}\n            hasFocus={focusPath[0] === 'hotspot'}\n            isChanged={changed}\n          >\n            <RatioBox ratio={3 / 2}>\n              {(isImageLoading || imageLoadError) && (\n                <LoadStatus>\n                  {imageLoadError ? (\n                    <Card padding={4} radius={2} tone=\"critical\" border>\n                      <Text>Error: {imageLoadError.message}</Text>\n                    </Card>\n                  ) : (\n                    <Text muted>Loading imageâ€¦ </Text>\n                  )}\n                </LoadStatus>\n              )}\n\n              {!isImageLoading && image && (\n                <Box margin={1}>\n                  <ImageTool\n                    value={localValue}\n                    src={image.src}\n                    readOnly={Boolean(readOnly)}\n                    onChangeEnd={handleChangeEnd}\n                    onChange={setLocalValue}\n                  />\n                </Box>\n              )}\n            </RatioBox>\n          </ChangeIndicator>\n        </Card>\n        <Box marginTop={3}>\n          <Grid columns={PREVIEW_ASPECT_RATIOS.length} gap={1}>\n            {PREVIEW_ASPECT_RATIOS.map(([title, ratio]) => (\n              <div key={ratio}>\n                <Heading as=\"h4\" size={0}>\n                  {title}\n                </Heading>\n                <Box marginTop={2}>\n                  <RatioBox ratio={ratio}>\n                    <Card __unstable_checkered>\n                      {!isImageLoading && image ? (\n                        <HotspotImage\n                          aspectRatio={ratio}\n                          src={image.src}\n                          srcAspectRatio={image.width / image.height}\n                          hotspot={localValue.hotspot || DEFAULT_HOTSPOT}\n                          crop={localValue.crop || DEFAULT_CROP}\n                        />\n                      ) : (\n                        <Placeholder />\n                      )}\n                    </Card>\n                  </RatioBox>\n                </Box>\n              </div>\n            ))}\n          </Grid>\n        </Box>\n      </div>\n    </FormField>\n  )\n}\n","import styled from 'styled-components'\n\nimport {Button, Inline} from '@sanity/ui'\n\nexport const ButtonContainer = styled(Button)`\n  z-index: 100;\n`\n\nexport const MenuActionsWrapper = styled(Inline)`\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 1;\n`\n","import React, {MouseEventHandler, ReactNode, useCallback, useState} from 'react'\n\nimport {EllipsisVerticalIcon, CropIcon} from '@sanity/icons'\nimport {Menu, Popover, useClickOutside, useGlobalKeyDown} from '@sanity/ui'\nimport {MenuActionsWrapper, ButtonContainer} from './ImageActionsMenu.styled'\n\ninterface Props {\n  children: ReactNode\n  onEdit: MouseEventHandler<HTMLButtonElement>\n  showEdit: boolean\n  isMenuOpen: boolean\n  onMenuOpen: (v: boolean) => void\n}\n\nexport function ImageActionsMenu(props: Props) {\n  const {onEdit, children, showEdit, isMenuOpen, onMenuOpen} = props\n  const [menuElement, setMenuRef] = useState<HTMLDivElement | null>(null)\n  const [menuButtonRef, setMenuButtonRef] = useState<HTMLButtonElement | null>(null)\n\n  const handleClick = React.useCallback(() => onMenuOpen(true), [onMenuOpen])\n\n  const handleClickOutside = useCallback(() => {\n    onMenuOpen(false)\n  }, [onMenuOpen])\n\n  const handleGlobalKeyDown = useCallback(\n    (e) => {\n      if (e.key === 'Escape') {\n        onMenuOpen(false)\n        menuButtonRef?.focus()\n      }\n    },\n    [menuButtonRef, onMenuOpen]\n  )\n\n  useClickOutside(handleClickOutside, [menuElement])\n  useGlobalKeyDown(handleGlobalKeyDown)\n\n  return (\n    <MenuActionsWrapper data-buttons space={1} padding={2}>\n      {showEdit && (\n        <ButtonContainer\n          icon={CropIcon}\n          mode=\"ghost\"\n          onClick={onEdit}\n          data-testid=\"options-menu-edit-details\"\n        />\n      )}\n      <Popover\n        content={\n          <Menu ref={setMenuRef} shouldFocus=\"first\">\n            {children}\n          </Menu>\n        }\n        portal\n        constrainSize\n        open={isMenuOpen}\n      >\n        <ButtonContainer\n          icon={EllipsisVerticalIcon}\n          mode=\"ghost\"\n          data-testid=\"options-menu-button\"\n          onClick={handleClick}\n          ref={setMenuButtonRef}\n        />\n      </Popover>\n    </MenuActionsWrapper>\n  )\n}\n","import {studioTheme, rgba, Card, Flex, CardTone, Spinner} from '@sanity/ui'\nimport styled, {css} from 'styled-components'\n\nexport const MAX_DEFAULT_HEIGHT = 30\n\nexport const RatioBox = styled(Card)`\n  position: relative;\n  width: 100%;\n  overflow: hidden;\n  min-height: 3.75rem;\n  max-height: 20rem;\n\n  & > div[data-container] {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    display: flex !important;\n    align-items: center;\n    justify-content: center;\n  }\n\n  & img {\n    max-width: 100%;\n    max-height: 100%;\n  }\n`\n\nexport const SpinnerWrapper = styled(Spinner)`\n  position: absolute;\n`\n\nexport const Overlay = styled(Flex)(\n  ({tone, drag}: {tone: Exclude<CardTone, 'inherit'>; drag: boolean}) => {\n    const textColor = studioTheme.color.light[tone].card.enabled.fg\n    const backgroundColor = rgba(studioTheme.color.light[tone].card.enabled.bg, 0.8)\n\n    return css`\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      backdrop-filter: ${drag ? 'blur(10px)' : ''};\n      color: ${tone ? textColor : ''};\n      background-color: ${drag ? backgroundColor : 'transparent'};\n    `\n  }\n)\n\nexport const FlexOverlay = styled(Flex)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n`\n","import React, {ComponentProps, useCallback, useEffect, useState} from 'react'\n\nimport {AccessDeniedIcon, ImageIcon, ReadOnlyIcon} from '@sanity/icons'\nimport {Box, Card, CardTone, Heading, Text, useElementRect} from '@sanity/ui'\nimport {\n  MAX_DEFAULT_HEIGHT,\n  RatioBox,\n  Overlay,\n  FlexOverlay,\n  SpinnerWrapper,\n} from './ImagePreview.styled'\n\ninterface Props {\n  readOnly?: boolean | null\n  drag: boolean\n  isRejected: boolean\n  src: string\n  alt: string\n}\n\n/*\n  Used for setting the initial image height - specifically for images\n  that are small and so can take less space in the document\n*/\nconst getImageSize = (src: string): number[] => {\n  const imageUrlParams = new URLSearchParams(src.split('?')[1])\n  const rect = imageUrlParams.get('rect')\n\n  if (rect) {\n    return [rect.split(',')[2], rect.split(',')[3]].map(Number)\n  }\n\n  return src.split('-')[1].split('.')[0].split('x').map(Number)\n}\n\nexport function ImagePreview(props: ComponentProps<typeof Card> & Props) {\n  const {drag, readOnly, isRejected, src, ...rest} = props\n  const [isLoaded, setLoaded] = useState(false)\n  const [rootElement, setRootElement] = useState<HTMLDivElement | null>(null)\n  const rootRect = useElementRect(rootElement)\n  const rootWidth = rootRect?.width || 0\n  const acceptTone = isRejected || readOnly ? 'critical' : 'primary'\n  const tone = drag ? acceptTone : 'default'\n\n  const maxHeightToPx = (MAX_DEFAULT_HEIGHT * document.documentElement.clientHeight) / 100 // convert from vh to px, max height of the input\n\n  const [imageWidth, imageHeight] = getImageSize(src)\n\n  const imageRatio = imageWidth / imageHeight\n\n  // is the image wider than root? if so calculate the resized height\n  const renderedImageHeight = imageWidth > rootWidth ? rootWidth / imageRatio : imageHeight\n\n  /*\n    if the rendered image is smaller than the max height then it doesn't require a height set\n    otherwise, set the max height (to prevent a large image in the document)\n  */\n  const rootHeight = renderedImageHeight < maxHeightToPx ? null : `${MAX_DEFAULT_HEIGHT}vh`\n\n  useEffect(() => {\n    /* set for when the src is being switched when the image input already had a image src\n    - meaning it already had an asset */\n    setLoaded(false)\n  }, [src])\n\n  const onLoadChange = useCallback(() => {\n    setLoaded(true)\n  }, [])\n\n  return (\n    <RatioBox {...rest} ref={setRootElement} style={{height: rootHeight}} tone=\"transparent\">\n      <Card data-container tone=\"inherit\">\n        {!isLoaded && <OverlayComponent cardTone=\"transparent\" drag content={<SpinnerWrapper />} />}\n        <img\n          src={src}\n          data-testid=\"hotspot-image-input\"\n          alt={props.alt}\n          onLoad={onLoadChange}\n          referrerPolicy=\"strict-origin-when-cross-origin\"\n        />\n      </Card>\n\n      {drag && (\n        <OverlayComponent\n          cardTone={tone}\n          drag={drag}\n          content={\n            <>\n              <Box marginBottom={3}>\n                <Heading>\n                  <HoverIcon isRejected={isRejected} readOnly={readOnly} />\n                </Heading>\n              </Box>\n              <HoverText isRejected={isRejected} readOnly={readOnly} />\n            </>\n          }\n        />\n      )}\n    </RatioBox>\n  )\n}\n\nfunction HoverIcon({isRejected, readOnly}: {isRejected: boolean; readOnly?: boolean}) {\n  if (isRejected) {\n    return <AccessDeniedIcon />\n  }\n  if (readOnly) {\n    return <ReadOnlyIcon />\n  }\n  return <ImageIcon />\n}\n\nfunction HoverText({isRejected, readOnly}: {isRejected: boolean; readOnly?: boolean}) {\n  let message = 'Drop image to upload'\n  if (isRejected) {\n    message = 'Cannot upload this file here'\n  }\n  if (readOnly) {\n    message = 'This field is read only'\n  }\n\n  return <Text size={1}>{message}</Text>\n}\n\nfunction OverlayComponent({\n  cardTone,\n  drag,\n  content,\n}: {\n  cardTone: Exclude<CardTone, 'inherit'>\n  drag: boolean\n  content: React.ReactNode\n}) {\n  return (\n    <Overlay justify=\"flex-end\" padding={3} tone={cardTone} drag={drag}>\n      <FlexOverlay direction=\"column\" align=\"center\" justify=\"center\">\n        {content}\n      </FlexOverlay>\n    </Overlay>\n  )\n}\n","import {ResetIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Card, Flex, Box, Text, Stack, Button} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\ntype Props = {\n  onClearValue?: () => void\n}\n\nconst ButtonWrapper = styled(Button)`\n  width: 100%;\n`\n\nexport function InvalidImageWarning({onClearValue}: Props) {\n  return (\n    <Card tone=\"caution\" padding={4} border radius={2}>\n      <Flex gap={4} marginBottom={4}>\n        <Box>\n          <Text size={1}>\n            <WarningOutlineIcon />\n          </Text>\n        </Box>\n        <Stack space={3}>\n          <Text size={1} weight=\"semibold\">\n            Invalid image value\n          </Text>\n          <Text size={1}>\n            The value of this field is not a valid image. Resetting this field will let you choose a\n            new image.\n          </Text>\n        </Stack>\n      </Flex>\n      <ButtonWrapper icon={ResetIcon} text=\"Reset value\" onClick={onClearValue} mode=\"ghost\" />\n    </Card>\n  )\n}\n","/* eslint-disable import/no-unresolved,react/jsx-handler-names */\n\nimport {\n  Box,\n  Button,\n  Card,\n  Dialog,\n  Menu,\n  MenuButton,\n  MenuButtonProps,\n  MenuItem,\n  Stack,\n  ToastParams,\n} from '@sanity/ui'\nimport {get} from 'lodash'\nimport {Observable, Subscription} from 'rxjs'\nimport {ChevronDownIcon, ImageIcon, SearchIcon} from '@sanity/icons'\nimport {\n  AssetFromSource,\n  AssetSource,\n  Image as BaseImage,\n  ImageAsset,\n  ImageSchemaType,\n  Path,\n  UploadState,\n} from '@sanity/types'\nimport React, {ReactNode} from 'react'\nimport deepCompare from 'react-fast-compare'\nimport {SanityClient} from '@sanity/client'\nimport {PatchEvent, setIfMissing, unset} from '../../../patch'\nimport {FieldMember} from '../../../store'\nimport {FIXME, InputProps, ObjectInputProps} from '../../../types'\nimport {PresenceOverlay} from '../../../../presence'\nimport {ImperativeToast} from '../../../../components/transitional'\nimport {\n  ResolvedUploader,\n  Uploader,\n  UploaderResolver,\n  UploadOptions,\n} from '../../../studio/uploads/types'\nimport {UploadPlaceholder} from '../common/UploadPlaceholder'\nimport {WithReferencedAsset} from '../../../utils/WithReferencedAsset'\nimport {FileTarget} from '../common/styles'\nimport {ImageUrlBuilder} from '../types'\nimport {UploadProgress} from '../common/UploadProgress'\nimport {handleSelectAssetFromSource} from '../common/assetSource'\nimport {ActionsMenu} from '../common/ActionsMenu'\nimport {UploadWarning} from '../common/UploadWarning'\nimport {ImageToolInput} from '../ImageToolInput'\nimport {ChangeIndicator} from '../../../../components/changeIndicators'\nimport {FormInput} from '../../../FormInput'\nimport {MemberField, MemberFieldError, MemberFieldSet} from '../../../members'\nimport {ImageActionsMenu} from './ImageActionsMenu'\nimport {ImagePreview} from './ImagePreview'\nimport {isImageSource} from '@sanity/asset-utils'\nimport {InvalidImageWarning} from './InvalidImageWarning'\n\nexport interface Image extends Partial<BaseImage> {\n  _upload?: UploadState\n}\n\nexport interface ImageInputProps extends ObjectInputProps<Image, ImageSchemaType> {\n  assetSources: AssetSource[]\n  directUploads?: boolean\n  imageUrlBuilder: ImageUrlBuilder\n  observeAsset: (documentId: string) => Observable<ImageAsset>\n  resolveUploader: UploaderResolver\n  client: SanityClient\n}\n\nconst getDevicePixelRatio = () => {\n  if (typeof window === 'undefined' || !window.devicePixelRatio) {\n    return 1\n  }\n  return Math.round(Math.max(1, window.devicePixelRatio))\n}\n\ntype FileInfo = {\n  type: string // mime type\n  kind: string // 'file' or 'string'\n}\n\ntype ImageInputState = {\n  isUploading: boolean\n  selectedAssetSource: AssetSource | null\n  // Metadata about files currently over the drop area\n  hoveringFiles: FileInfo[]\n  isStale: boolean\n  isMenuOpen: boolean\n}\n\ntype Focusable = {\n  focus: () => void\n  offsetHeight: number\n}\n\nfunction passThrough({children}: {children?: React.ReactNode}) {\n  return children\n}\n\nconst ASSET_FIELD_PATH = ['asset']\n\nconst ASSET_IMAGE_MENU_POPOVER: MenuButtonProps['popover'] = {portal: true}\n\nexport class ImageInput extends React.PureComponent<ImageInputProps, ImageInputState> {\n  _assetElementRef: null | Focusable = null\n  _assetPath: Path\n  uploadSubscription: null | Subscription = null\n\n  state: ImageInputState = {\n    isUploading: false,\n    selectedAssetSource: null,\n    hoveringFiles: [],\n    isStale: false,\n    isMenuOpen: false,\n  }\n\n  constructor(props: ImageInputProps) {\n    super(props)\n    this._assetPath = props.path.concat(ASSET_FIELD_PATH)\n  }\n\n  toast: {push: (params: ToastParams) => void} | null = null\n\n  focus() {\n    if (this._assetElementRef) {\n      this._assetElementRef.focus()\n    }\n  }\n\n  setFocusElement = (el: HTMLElement | null) => {\n    this._assetElementRef = el\n  }\n\n  isImageToolEnabled() {\n    return get(this.props.schemaType, 'options.hotspot') === true\n  }\n\n  clearUploadStatus() {\n    if (this.props.value?._upload) {\n      this.props.onChange(unset(['_upload']))\n    }\n  }\n\n  cancelUpload() {\n    if (this.uploadSubscription) {\n      this.uploadSubscription.unsubscribe()\n      this.clearUploadStatus()\n    }\n  }\n\n  getUploadOptions = (file: File): ResolvedUploader[] => {\n    const {schemaType, resolveUploader} = this.props\n    const uploader = resolveUploader && resolveUploader(schemaType, file)\n    return uploader ? [{type: schemaType, uploader}] : []\n  }\n\n  uploadFirstAccepted(files: File[]) {\n    const {schemaType, resolveUploader} = this.props\n\n    const match = files\n      .map((file) => ({file, uploader: resolveUploader(schemaType, file)}))\n      .find((result) => result.uploader)\n\n    if (match) {\n      this.uploadWith(match.uploader!, match.file)\n    }\n\n    this.setState({isMenuOpen: false})\n  }\n\n  uploadWith = (uploader: Uploader, file: File, assetDocumentProps: UploadOptions = {}) => {\n    const {schemaType, onChange, client} = this.props\n    const {label, title, description, creditLine, source} = assetDocumentProps\n    const options = {\n      metadata: get(schemaType, 'options.metadata'),\n      storeOriginalFilename: get(schemaType, 'options.storeOriginalFilename'),\n      label,\n      title,\n      description,\n      creditLine,\n      source,\n    }\n\n    this.cancelUpload()\n    this.setState({isUploading: true})\n    onChange(setIfMissing({_type: schemaType.name}))\n    this.uploadSubscription = uploader.upload(client, file, schemaType, options).subscribe({\n      next: (uploadEvent) => {\n        if (uploadEvent.patches) {\n          onChange(uploadEvent.patches)\n        }\n      },\n      error: (err) => {\n        // eslint-disable-next-line no-console\n        console.error(err)\n        this.toast?.push({\n          status: 'error',\n          description: 'The upload could not be completed at this time.',\n          title: 'Upload failed',\n        })\n\n        this.clearUploadStatus()\n      },\n      complete: () => {\n        onChange([unset(['hotspot']), unset(['crop'])])\n        this.setState({isUploading: false})\n        // this.toast.push({\n        //   status: 'success',\n        //   title: 'Upload completed',\n        // })\n      },\n    })\n  }\n\n  handleRemoveButtonClick = () => {\n    const {value} = this.props\n\n    // When removing the image, we should also remove any crop and hotspot\n    // _type and _key are \"meta\"-properties and are not significant unless\n    // other properties are present. Thus, we want to remove the entire\n    // \"container\" object if these are the only properties present, BUT\n    // only if we're not an array element, as removing the array element\n    // will close the selection dialog. Instead, when closing the dialog,\n    // the array logic will check for an \"empty\" value and remove it for us\n    const allKeys = Object.keys(value || {})\n    const remainingKeys = allKeys.filter(\n      (key) => !['_type', '_key', '_upload', 'asset', 'crop', 'hotspot'].includes(key)\n    )\n\n    const isEmpty = remainingKeys.length === 0\n    const removeKeys = ['asset']\n      .concat(allKeys.filter((key) => ['crop', 'hotspot', '_upload'].includes(key)))\n      .map((key) => unset([key]))\n\n    this.props.onChange(isEmpty && !this.valueIsArrayElement() ? unset() : removeKeys)\n  }\n\n  handleFieldChange = (event: PatchEvent) => {\n    const {onChange, schemaType} = this.props\n\n    // When editing a metadata field for an image (eg `altText`), and no asset\n    // is currently selected, we want to unset the entire image field if the\n    // field we are currently editing goes blank and gets unset.\n    //\n    // For instance:\n    // An image field with an `altText` and a `title` subfield, where the image\n    // `asset` and the `title` field is empty, and we are erasing the `alt` field.\n    // We do _not_ however want to clear the field if any content is present in\n    // the other fields - but we do not consider `crop` and `hotspot`.\n    //\n    // Also, we don't want to use this logic for array items, since the parent will\n    // take care of it when closing the array dialog\n    if (!this.valueIsArrayElement() && this.eventIsUnsettingLastFilledField(event)) {\n      onChange(unset())\n      return\n    }\n\n    onChange(\n      event.prepend(\n        setIfMissing({\n          _type: schemaType.name,\n        })\n      ).patches\n    )\n  }\n\n  eventIsUnsettingLastFilledField = (event: PatchEvent): boolean => {\n    const patch = event.patches[0]\n    if (event.patches.length !== 1 || patch.type !== 'unset') {\n      return false\n    }\n\n    const allKeys = Object.keys(this.props.value || {})\n    const remainingKeys = allKeys.filter(\n      (key) => !['_type', '_key', 'crop', 'hotspot'].includes(key)\n    )\n\n    const isEmpty =\n      event.patches[0].path.length === 1 &&\n      remainingKeys.length === 1 &&\n      remainingKeys[0] === event.patches[0].path[0]\n\n    return isEmpty\n  }\n\n  valueIsArrayElement = () => {\n    const {path} = this.props\n    const parentPathSegment = path.slice(-1)[0]\n\n    // String path segment mean an object path, while a number or a\n    // keyed segment means we're a direct child of an array\n    return typeof parentPathSegment !== 'string'\n  }\n\n  handleOpenDialog = () => {\n    const {onOpenField} = this.props\n    onOpenField('hotspot')\n  }\n\n  handleCloseDialog = () => {\n    const {onCloseField} = this.props\n    onCloseField('hotspot')\n  }\n\n  handleSelectAssetFromSource = (assetFromSource: AssetFromSource[]) => {\n    const {onChange, schemaType, resolveUploader} = this.props\n    handleSelectAssetFromSource({\n      assetFromSource,\n      onChange,\n      type: schemaType,\n      resolveUploader,\n      uploadWith: this.uploadWith,\n      isImage: true,\n    })\n\n    this.setState({selectedAssetSource: null})\n  }\n\n  handleFilesOver = (hoveringFiles: FileInfo[]) => {\n    this.setState({\n      hoveringFiles,\n    })\n  }\n  handleFilesOut = () => {\n    this.setState({\n      hoveringFiles: [],\n    })\n  }\n\n  handleCancelUpload = () => {\n    this.cancelUpload()\n  }\n\n  handleClearUploadState = () => {\n    this.setState({isStale: false})\n    this.clearUploadStatus()\n  }\n\n  handleStaleUpload = () => {\n    this.setState({isStale: true})\n  }\n\n  handleClearField = () => {\n    this.props.onChange([unset(['asset']), unset(['crop']), unset(['hotspot'])])\n  }\n\n  handleSelectFiles = (files: File[]) => {\n    const {directUploads, readOnly} = this.props\n    const {hoveringFiles} = this.state\n\n    if (directUploads && !readOnly) {\n      this.uploadFirstAccepted(files)\n    } else if (hoveringFiles.length > 0) {\n      this.handleFilesOut()\n    }\n  }\n\n  handleSelectImageFromAssetSource = (source: AssetSource) => {\n    this.setState({selectedAssetSource: source})\n  }\n\n  handleAssetSourceClosed = () => {\n    this.setState({selectedAssetSource: null})\n  }\n\n  renderHotspotInput = (hotspotInputProps: InputProps) => {\n    const {value, changed, id, imageUrlBuilder} = this.props\n\n    const withImageTool = this.isImageToolEnabled() && value && value.asset\n\n    return (\n      <Dialog\n        header=\"Edit hotspot and crop\"\n        id={`${id}_dialog`}\n        onClose={this.handleCloseDialog}\n        width={1}\n        __unstable_autoFocus={false}\n      >\n        <PresenceOverlay>\n          <Box padding={4}>\n            <Stack space={5}>\n              {withImageTool && value?.asset && (\n                <ImageToolInput\n                  {...this.props}\n                  imageUrl={imageUrlBuilder.image(value.asset).url()}\n                  value={value as FIXME}\n                  presence={hotspotInputProps.presence}\n                  changed={changed}\n                />\n              )}\n            </Stack>\n          </Box>\n        </PresenceOverlay>\n      </Dialog>\n    )\n  }\n\n  renderPreview = () => {\n    const {value, schemaType, readOnly, directUploads, imageUrlBuilder, resolveUploader} =\n      this.props\n\n    if (!value || !isImageSource(value)) {\n      return null\n    }\n\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n    const imageUrl = imageUrlBuilder\n      .width(2000)\n      .fit('max')\n      .image(value)\n      .dpr(getDevicePixelRatio())\n      .auto('format')\n      .url()\n\n    return (\n      <ImagePreview\n        drag={!value?._upload && hoveringFiles.length > 0}\n        isRejected={rejectedFilesCount > 0 || !directUploads}\n        readOnly={readOnly}\n        src={imageUrl}\n        alt=\"Preview of uploaded image\"\n      />\n    )\n  }\n\n  renderAssetMenu() {\n    const {\n      value,\n      assetSources,\n      schemaType,\n      readOnly,\n      directUploads,\n      imageUrlBuilder,\n      observeAsset,\n    } = this.props\n    const {isMenuOpen} = this.state\n\n    const asset = value?.asset\n    if (!asset) {\n      return null\n    }\n\n    const accept = get(schemaType, 'options.accept', 'image/*')\n\n    const showAdvancedEditButton = value && asset && this.isImageToolEnabled()\n\n    let browseMenuItem: ReactNode =\n      assetSources && assetSources.length === 0 ? null : (\n        <MenuItem\n          icon={SearchIcon}\n          text=\"Select\"\n          onClick={() => {\n            this.setState({isMenuOpen: false})\n            this.handleSelectImageFromAssetSource(assetSources[0])\n          }}\n          disabled={readOnly}\n          data-testid=\"file-input-browse-button\"\n        />\n      )\n\n    if (assetSources && assetSources.length > 1) {\n      browseMenuItem = assetSources.map((assetSource) => {\n        return (\n          <MenuItem\n            key={assetSource.name}\n            text={assetSource.title}\n            onClick={() => {\n              this.setState({isMenuOpen: false})\n              this.handleSelectImageFromAssetSource(assetSource)\n            }}\n            icon={assetSource.icon || ImageIcon}\n            data-testid={`file-input-browse-button-${assetSource.name}`}\n            disabled={readOnly}\n          />\n        )\n      })\n    }\n\n    return (\n      <WithReferencedAsset observeAsset={observeAsset} reference={asset}>\n        {({_id, originalFilename, extension}) => {\n          let copyUrl: string | undefined\n          let downloadUrl: string | undefined\n\n          if (isImageSource(value)) {\n            const filename = originalFilename || `download.${extension}`\n            downloadUrl = imageUrlBuilder.image(_id).forceDownload(filename).url()\n            copyUrl = imageUrlBuilder.image(_id).url()\n          }\n\n          return (\n            <ImageActionsMenu\n              isMenuOpen={isMenuOpen}\n              onEdit={this.handleOpenDialog}\n              showEdit={showAdvancedEditButton}\n              onMenuOpen={(isOpen) => this.setState({isMenuOpen: isOpen})}\n            >\n              <ActionsMenu\n                onUpload={this.handleSelectFiles}\n                browse={browseMenuItem}\n                onReset={this.handleRemoveButtonClick}\n                downloadUrl={downloadUrl}\n                copyUrl={copyUrl}\n                readOnly={readOnly}\n                directUploads={directUploads}\n                accept={accept}\n              />\n            </ImageActionsMenu>\n          )\n        }}\n      </WithReferencedAsset>\n    )\n  }\n\n  renderBrowser() {\n    const {assetSources, readOnly, directUploads, id} = this.props\n\n    if (assetSources && assetSources.length === 0) return null\n\n    if (assetSources && assetSources.length > 1 && !readOnly && directUploads) {\n      return (\n        <MenuButton\n          id={`${id}_assetImageButton`}\n          button={\n            <Button\n              mode=\"ghost\"\n              text=\"Select\"\n              data-testid=\"file-input-multi-browse-button\"\n              icon={SearchIcon}\n              iconRight={ChevronDownIcon}\n            />\n          }\n          menu={\n            <Menu>\n              {assetSources.map((assetSource) => {\n                return (\n                  <MenuItem\n                    key={assetSource.name}\n                    text={assetSource.title}\n                    onClick={() => {\n                      this.setState({isMenuOpen: false})\n                      this.handleSelectImageFromAssetSource(assetSource)\n                    }}\n                    icon={assetSource.icon || ImageIcon}\n                    disabled={readOnly}\n                    data-testid={`file-input-browse-button-${assetSource.name}`}\n                  />\n                )\n              })}\n            </Menu>\n          }\n          popover={ASSET_IMAGE_MENU_POPOVER}\n        />\n      )\n    }\n\n    return (\n      <Button\n        fontSize={2}\n        text=\"Select\"\n        icon={SearchIcon}\n        mode=\"ghost\"\n        onClick={() => {\n          this.setState({isMenuOpen: false})\n          this.handleSelectImageFromAssetSource(assetSources[0])\n        }}\n        data-testid=\"file-input-browse-button\"\n        disabled={readOnly}\n      />\n    )\n  }\n\n  renderUploadPlaceholder() {\n    const {schemaType, readOnly, directUploads, resolveUploader} = this.props\n\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n\n    const accept = get(schemaType, 'options.accept', 'image/*')\n\n    return (\n      <div style={{padding: 1}}>\n        <Card\n          tone={readOnly ? 'transparent' : 'inherit'}\n          border\n          padding={3}\n          style={\n            hoveringFiles.length === 0\n              ? {borderStyle: 'dashed'}\n              : {borderStyle: 'dashed', borderColor: 'transparent'}\n          }\n        >\n          <UploadPlaceholder\n            browse={this.renderBrowser()}\n            onUpload={this.handleSelectFiles}\n            readOnly={readOnly}\n            hoveringFiles={hoveringFiles}\n            acceptedFiles={acceptedFiles}\n            rejectedFilesCount={rejectedFilesCount}\n            type=\"image\"\n            accept={accept}\n            directUploads={directUploads}\n          />\n        </Card>\n      </div>\n    )\n  }\n\n  renderUploadState(uploadState: UploadState) {\n    const {isUploading} = this.state\n    const elementHeight = this._assetElementRef?.offsetHeight\n    const height = elementHeight === 0 ? undefined : elementHeight\n\n    return (\n      <UploadProgress\n        uploadState={uploadState}\n        onCancel={isUploading ? this.handleCancelUpload : undefined}\n        onStale={this.handleStaleUpload}\n        height={height}\n      />\n    )\n  }\n\n  renderAssetSource() {\n    const {selectedAssetSource} = this.state\n    const {value, observeAsset} = this.props\n    if (!selectedAssetSource) {\n      return null\n    }\n    const Component = selectedAssetSource.component\n    if (value && value.asset) {\n      return (\n        <WithReferencedAsset observeAsset={observeAsset} reference={value.asset}>\n          {(imageAsset) => (\n            <Component\n              selectedAssets={[imageAsset]}\n              assetType=\"image\"\n              selectionType=\"single\"\n              onClose={this.handleAssetSourceClosed}\n              onSelect={this.handleSelectAssetFromSource}\n            />\n          )}\n        </WithReferencedAsset>\n      )\n    }\n    return (\n      <Component\n        selectedAssets={[]}\n        selectionType=\"single\"\n        assetType=\"image\"\n        onClose={this.handleAssetSourceClosed}\n        onSelect={this.handleSelectAssetFromSource}\n      />\n    )\n  }\n\n  setToast = (toast: {push: (params: ToastParams) => void}) => {\n    this.toast = toast\n  }\n\n  getFileTone() {\n    const {schemaType, value, readOnly, directUploads, resolveUploader} = this.props\n\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n\n    if (hoveringFiles.length > 0) {\n      if (rejectedFilesCount > 0 || !directUploads) {\n        return 'critical'\n      }\n    }\n\n    if (!value?._upload && !readOnly && hoveringFiles.length > 0) {\n      return 'primary'\n    }\n\n    if (readOnly) {\n      return 'transparent'\n    }\n\n    return value?._upload && value?.asset ? 'transparent' : 'default'\n  }\n\n  renderAsset() {\n    const {value, readOnly, elementProps} = this.props\n\n    const {hoveringFiles, isStale} = this.state\n\n    const hasValueOrUpload = Boolean(value?._upload || value?.asset)\n\n    if (value && typeof value.asset !== 'undefined' && !value?._upload && !isImageSource(value)) {\n      return () => <InvalidImageWarning onClearValue={this.handleClearField} />\n    }\n\n    // todo: convert this to a functional component and use this with useCallback\n    //  it currently has to return a new function on every render in order to pick up state from this component\n    return (inputProps: InputProps) => (\n      <>\n        {isStale && (\n          <Box marginBottom={2}>\n            <UploadWarning onClearStale={this.handleClearUploadState} />\n          </Box>\n        )}\n\n        <ChangeIndicator\n          path={inputProps.path.concat(ASSET_FIELD_PATH)}\n          hasFocus={!!inputProps.focused}\n          isChanged={inputProps.changed}\n        >\n          {/* not uploading */}\n          {!value?._upload && (\n            <FileTarget\n              {...elementProps}\n              tabIndex={0}\n              disabled={Boolean(readOnly)}\n              ref={this.setFocusElement}\n              onFiles={this.handleSelectFiles}\n              onFilesOver={this.handleFilesOver}\n              onFilesOut={this.handleFilesOut}\n              tone={this.getFileTone()}\n              $border={hasValueOrUpload || hoveringFiles.length > 0}\n              style={{padding: 1}}\n              sizing=\"border\"\n              radius={2}\n            >\n              {!value?.asset && this.renderUploadPlaceholder()}\n              {!value?._upload && value?.asset && (\n                <div style={{position: 'relative'}}>\n                  {this.renderAssetMenu()}\n                  {this.renderPreview()}\n                </div>\n              )}\n            </FileTarget>\n          )}\n\n          {/* uploading */}\n          {value?._upload && this.renderUploadState(value._upload)}\n        </ChangeIndicator>\n      </>\n    )\n  }\n\n  render() {\n    const {members, renderInput, renderField, renderItem, renderPreview} = this.props\n\n    const {selectedAssetSource} = this.state\n\n    // we use the hotspot field as the \"owner\" of both hotspot and crop\n    const hotspotField = members.find(\n      (member): member is FieldMember => member.kind === 'field' && member.name === 'hotspot'\n    )\n\n    return (\n      <>\n        <ImperativeToast ref={this.setToast} />\n\n        {members.map((member) => {\n          if (member.kind === 'field' && (member.name === 'crop' || member.name === 'hotspot')) {\n            // we're rendering these separately\n            return null\n          }\n\n          if (member.kind === 'field') {\n            return (\n              <MemberField\n                key={member.key}\n                member={member}\n                renderInput={member.name === 'asset' ? this.renderAsset() : renderInput}\n                renderField={member.name === 'asset' ? passThrough : renderField}\n                renderItem={renderItem}\n                renderPreview={renderPreview}\n              />\n            )\n          }\n\n          if (member.kind === 'fieldSet') {\n            return (\n              <MemberFieldSet\n                key={member.key}\n                member={member}\n                renderInput={renderInput}\n                renderField={renderField}\n                renderItem={renderItem}\n                renderPreview={renderPreview}\n              />\n            )\n          }\n          if (member.kind === 'error') {\n            return <MemberFieldError member={member} />\n          }\n          //@ts-expect-error all possible cases should be covered\n          return <>Unknown member kind: ${member.kind}</>\n        })}\n        {hotspotField?.open && (\n          <FormInput\n            {...this.props}\n            absolutePath={hotspotField.field.path}\n            renderInput={this.renderHotspotInput}\n          />\n        )}\n        {selectedAssetSource && this.renderAssetSource()}\n      </>\n    )\n  }\n}\n","import React, {useCallback} from 'react'\nimport imageUrlBuilder from '@sanity/image-url'\nimport {SchemaType} from '@sanity/types'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {ImageInput, ImageInputProps} from '../../inputs/files/ImageInput'\nimport {useFormBuilder} from '../../useFormBuilder'\nimport {useDocumentPreviewStore} from '../../../datastores'\nimport {useClient} from '../../../hooks'\nimport {resolveUploader as defaultResolveUploader} from '../uploads/resolveUploader'\nimport {FileLike} from '../uploads/types'\nimport {observeImageAsset} from './client-adapters/assets'\n\nexport type StudioImageInputProps = Omit<\n  ImageInputProps,\n  | 'assetSources'\n  | 'directUploads'\n  | 'imageUrlBuilder'\n  | 'observeAsset'\n  | 'client'\n  | 'resolveUploader'\n>\n\nexport function StudioImageInput(props: StudioImageInputProps) {\n  const sourcesFromSchema = props.schemaType.options?.sources\n  const {image} = useFormBuilder().__internal\n  const documentPreviewStore = useDocumentPreviewStore()\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const formBuilder = useFormBuilder()\n  const supportsImageUploads = formBuilder.__internal.image.directUploads\n\n  const resolveUploader = useCallback(\n    (type: SchemaType, file: FileLike) => {\n      if (!supportsImageUploads) {\n        return null\n      }\n      return defaultResolveUploader(type, file)\n    },\n    [supportsImageUploads]\n  )\n\n  // note: type.options.sources may be an empty array and in that case we're\n  // disabling selecting images from asset source  (it's a feature, not a bug)\n  const assetSources = React.useMemo(\n    () => sourcesFromSchema || image.assetSources,\n    [image, sourcesFromSchema]\n  )\n\n  const builder = React.useMemo(() => imageUrlBuilder(client), [client])\n\n  const observeAsset = useCallback(\n    (id: string) => observeImageAsset(documentPreviewStore, id),\n    [documentPreviewStore]\n  )\n\n  return (\n    <ImageInput\n      {...props}\n      client={client}\n      assetSources={assetSources}\n      directUploads={image.directUploads}\n      imageUrlBuilder={builder}\n      observeAsset={observeAsset}\n      resolveUploader={resolveUploader}\n    />\n  )\n}\n","import {Card, Flex} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const CardOverlay = styled(Card)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n`\n\nexport const FlexContainer = styled(Flex)`\n  height: 100%;\n`\n","/* method which returns a file size in a readable format */\nexport function formatBytes(bytes: number, decimals = 2) {\n  if (bytes === 0) return '0 Bytes'\n\n  const k = 1024\n  const dm = decimals < 0 ? 0 : decimals\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n\n  return `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`\n}\n","import {BinaryDocumentIcon, EllipsisVerticalIcon} from '@sanity/icons'\nimport React, {ReactNode, useState} from 'react'\n\nimport {Box, Button, Card, Flex, Menu, Popover, Stack, Text, useClickOutside} from '@sanity/ui'\nimport {formatBytes} from '../../common/helper'\n\ntype Props = {\n  children: ReactNode\n  size: number\n  originalFilename: string\n  onClick?: () => void\n  muted?: boolean\n  disabled?: boolean\n  isMenuOpen: boolean\n  onMenuOpen: (flag: boolean) => void\n}\n\nexport function FileDetails(props: Props) {\n  const {originalFilename, size, children, muted, disabled, onClick, isMenuOpen, onMenuOpen} = props\n\n  const [menuElement, setMenuRef] = useState<HTMLDivElement | null>(null)\n\n  const handleClick = React.useCallback(() => onMenuOpen(true), [onMenuOpen])\n\n  useClickOutside(\n    React.useCallback(() => onMenuOpen(false), [onMenuOpen]),\n    [menuElement]\n  )\n\n  return (\n    <Flex wrap=\"nowrap\" justify=\"space-between\" align=\"center\">\n      <Card\n        as={muted || disabled ? undefined : 'button'}\n        tabIndex={disabled ? undefined : 0}\n        __unstable_focusRing\n        radius={2}\n        padding={2}\n        tone=\"inherit\"\n        onClick={onClick}\n      >\n        <Flex wrap=\"nowrap\" align=\"center\">\n          <Card padding={3} tone=\"transparent\" shadow={1} radius={1}>\n            <Text muted={muted}>\n              <BinaryDocumentIcon />\n            </Text>\n          </Card>\n          <Stack flex={1} space={2} marginLeft={3}>\n            <Text size={2} textOverflow=\"ellipsis\" muted={muted} data-testid=\"file-name\">\n              {originalFilename}\n            </Text>\n            <Text size={1} muted data-testid=\"file-size\">\n              {formatBytes(size)}\n            </Text>\n          </Stack>\n        </Flex>\n      </Card>\n      <Box padding={2}>\n        <Flex justify=\"center\">\n          <Popover content={<Menu ref={setMenuRef}>{children}</Menu>} portal open={isMenuOpen}>\n            <Button\n              icon={EllipsisVerticalIcon}\n              mode=\"bleed\"\n              data-testid=\"options-menu-button\"\n              onClick={handleClick}\n            />\n          </Popover>\n        </Flex>\n      </Box>\n    </Flex>\n  )\n}\n","import React from 'react'\nimport {Skeleton, Flex, Stack, LabelSkeleton} from '@sanity/ui'\n\nexport function FileSkeleton() {\n  return (\n    <Flex align=\"center\" justify=\"flex-start\" padding={2}>\n      <Skeleton padding={3} radius={1} animated />\n      <Stack flex={1} space={2} marginLeft={3}>\n        <LabelSkeleton style={{width: '100%'}} radius={1} animated />\n        <LabelSkeleton style={{width: '100%'}} radius={1} animated />\n      </Stack>\n    </Flex>\n  )\n}\n","import {ResetIcon, WarningOutlineIcon} from '@sanity/icons'\nimport {Card, Flex, Box, Text, Stack, Button} from '@sanity/ui'\nimport React from 'react'\nimport styled from 'styled-components'\n\ntype Props = {\n  onClearValue?: () => void\n}\n\nconst ButtonWrapper = styled(Button)`\n  width: 100%;\n`\n\nexport function InvalidFileWarning({onClearValue}: Props) {\n  return (\n    <Card tone=\"caution\" padding={4} border radius={2}>\n      <Flex gap={4} marginBottom={4}>\n        <Box>\n          <Text size={1}>\n            <WarningOutlineIcon />\n          </Text>\n        </Box>\n        <Stack space={3}>\n          <Text size={1} weight=\"semibold\">\n            Invalid file value\n          </Text>\n          <Text size={1}>\n            The value of this field is not a valid file. Resetting this field will let you choose a\n            new file.\n          </Text>\n        </Stack>\n      </Flex>\n      <ButtonWrapper icon={ResetIcon} text=\"Reset value\" onClick={onClearValue} mode=\"ghost\" />\n    </Card>\n  )\n}\n","/* eslint-disable no-undef, import/no-unresolved */\n\nimport React, {ReactNode} from 'react'\nimport {Observable, Subscription} from 'rxjs'\nimport {get} from 'lodash'\nimport {\n  AssetFromSource,\n  AssetSource,\n  File as BaseFile,\n  FileAsset,\n  FileSchemaType,\n  Path,\n  UploadState,\n} from '@sanity/types'\nimport {ImageIcon, SearchIcon} from '@sanity/icons'\nimport {\n  Box,\n  Button,\n  Card,\n  Menu,\n  MenuButton,\n  MenuItem,\n  ThemeColorToneKey,\n  ToastParams,\n} from '@sanity/ui'\nimport {SanityClient} from '@sanity/client'\nimport {WithReferencedAsset} from '../../../utils/WithReferencedAsset'\nimport {Uploader, UploaderResolver, UploadOptions} from '../../../studio/uploads/types'\nimport {FileInfo, FileTarget} from '../common/styles'\nimport {UploadProgress} from '../common/UploadProgress'\nimport {handleSelectAssetFromSource} from '../common/assetSource'\nimport {ActionsMenu} from '../common/ActionsMenu'\nimport {PlaceholderText} from '../common/PlaceholderText'\nimport {UploadPlaceholder} from '../common/UploadPlaceholder'\nimport {UploadWarning} from '../common/UploadWarning'\nimport {FIXME, InputProps, ObjectInputProps} from '../../../types'\nimport {ImperativeToast} from '../../../../components/transitional'\nimport {PatchEvent, setIfMissing, unset} from '../../../patch'\nimport {MemberField, MemberFieldError, MemberFieldSet} from '../../../members'\nimport {ChangeIndicator} from '../../../../components/changeIndicators'\nimport {CardOverlay, FlexContainer} from './styles'\nimport {FileDetails} from './FileDetails'\nimport {FileSkeleton} from './FileSkeleton'\nimport {isFileSource} from '@sanity/asset-utils'\nimport {InvalidFileWarning} from './InvalidFileWarning'\n\n// We alias DOM File type here to distinguish it from the type of the File value\ntype DOMFile = globalThis.File\n\nexport interface File extends Partial<BaseFile> {\n  _upload?: UploadState\n}\n\nfunction passThrough({children}: {children?: React.ReactNode}) {\n  return children\n}\nexport interface FileInputProps extends ObjectInputProps<File, FileSchemaType> {\n  assetSources: AssetSource[]\n  directUploads?: boolean\n  observeAsset: (documentId: string) => Observable<FileAsset>\n  resolveUploader: UploaderResolver\n  client: SanityClient\n}\ntype FileInputState = {\n  isUploading: boolean\n  selectedAssetSource: AssetSource | null\n  hoveringFiles: FileInfo[]\n  isStale: boolean\n  isMenuOpen: boolean\n}\n\ntype Focusable = {\n  focus: () => void\n}\nconst ASSET_FIELD_PATH = ['asset']\n\nexport class FileInput extends React.PureComponent<FileInputProps, FileInputState> {\n  _focusRef: Focusable | null = null\n  _assetFieldPath: Path\n  uploadSubscription: Subscription | null = null\n\n  state: FileInputState = {\n    isUploading: false,\n    selectedAssetSource: null,\n    hoveringFiles: [],\n    isStale: false,\n    isMenuOpen: false,\n  }\n\n  constructor(props: FileInputProps) {\n    super(props)\n    this._assetFieldPath = props.path.concat(ASSET_FIELD_PATH)\n  }\n\n  toast: {push: (params: ToastParams) => void} | null = null\n\n  handleRemoveButtonClick = () => {\n    const {path, value} = this.props\n    const parentPathSegment = path.slice(-1)[0]\n\n    // String path segment mean an object path, while a number or a\n    // keyed segment means we're a direct child of an array\n    const isArrayElement = typeof parentPathSegment !== 'string'\n\n    // When removing the file, _type and _key are \"meta\"-properties and\n    // are not significant unless other properties are present. Thus, we\n    // want to remove the entire \"container\" object if these are the only\n    // properties present, BUT only if we're not an array element, as\n    // removing the array element will close the selection dialog. Instead,\n    // when closing the dialog, the array logic will check for an \"empty\"\n    // value and remove it for us\n    const allKeys = Object.keys(value || {})\n    const remainingKeys = allKeys.filter(\n      (key) => !['_type', '_key', '_upload', 'asset'].includes(key)\n    )\n\n    const isEmpty = remainingKeys.length === 0\n    const removeKeys = ['asset']\n      .concat(allKeys.filter((key) => ['_upload'].includes(key)))\n      .map((key) => unset([key]))\n\n    this.props.onChange(PatchEvent.from(isEmpty && !isArrayElement ? unset() : removeKeys))\n  }\n\n  clearUploadStatus() {\n    // todo: this is kind of hackish\n    if (this.props.value?._upload) {\n      this.props.onChange(PatchEvent.from([unset(['_upload'])]))\n    }\n  }\n\n  cancelUpload() {\n    if (this.uploadSubscription) {\n      this.uploadSubscription.unsubscribe()\n      this.clearUploadStatus()\n    }\n  }\n\n  handleCancelUpload = () => {\n    this.cancelUpload()\n  }\n\n  handleClearUploadState = () => {\n    this.setState({isStale: false})\n    this.clearUploadStatus()\n  }\n\n  handleStaleUpload = () => {\n    this.setState({isStale: true})\n  }\n\n  handleClearField = () => {\n    this.props.onChange(unset(['asset']))\n  }\n\n  handleSelectFiles = (files: DOMFile[]) => {\n    const {directUploads, readOnly} = this.props\n    const {hoveringFiles} = this.state\n    if (directUploads && !readOnly) {\n      this.uploadFirstAccepted(files)\n    } else if (hoveringFiles.length > 0) {\n      this.handleFilesOut()\n    }\n  }\n\n  handleSelectFileFromAssetSource = (source: AssetSource) => {\n    this.setState({selectedAssetSource: source})\n  }\n\n  handleAssetSourceClosed = () => {\n    this.setState({selectedAssetSource: null})\n  }\n\n  uploadFirstAccepted(files: DOMFile[]) {\n    const {schemaType} = this.props\n\n    const match = files\n      .map((file) => ({file, uploader: this.props.resolveUploader?.(schemaType, file)}))\n      .find((result) => result.uploader)\n\n    if (match) {\n      this.uploadWith(match.uploader!, match.file)\n    }\n\n    this.setState({isMenuOpen: false})\n  }\n\n  uploadWith = (uploader: Uploader, file: DOMFile, assetDocumentProps: UploadOptions = {}) => {\n    const {schemaType, onChange, client} = this.props\n    const {source} = assetDocumentProps\n    const options = {\n      metadata: get(schemaType, 'options.metadata'),\n      storeOriginalFilename: get(schemaType, 'options.storeOriginalFilename'),\n      source,\n    }\n    this.cancelUpload()\n    this.setState({isUploading: true})\n    onChange(PatchEvent.from([setIfMissing({_type: schemaType.name})]))\n    this.uploadSubscription = uploader.upload(client, file, schemaType, options).subscribe({\n      next: (uploadEvent) => {\n        if (uploadEvent.patches) {\n          onChange(PatchEvent.from(uploadEvent.patches))\n        }\n      },\n      error: (err) => {\n        // eslint-disable-next-line no-console\n        console.error(err)\n        this.toast?.push({\n          status: 'error',\n          description: 'The upload could not be completed at this time.',\n          title: 'Upload failed',\n        })\n        this.clearUploadStatus()\n      },\n      complete: () => {\n        this.setState({isUploading: false})\n      },\n    })\n  }\n\n  renderUploadState(uploadState: UploadState) {\n    const {isUploading} = this.state\n\n    return (\n      <UploadProgress\n        uploadState={uploadState}\n        onCancel={isUploading ? this.handleCancelUpload : undefined}\n        onStale={this.handleStaleUpload}\n      />\n    )\n  }\n\n  renderAssetSource() {\n    const {selectedAssetSource} = this.state\n    const {value, observeAsset} = this.props\n    if (!selectedAssetSource) {\n      return null\n    }\n    const Component = selectedAssetSource.component\n    if (value && value.asset) {\n      return (\n        <WithReferencedAsset\n          observeAsset={observeAsset}\n          reference={value.asset}\n          waitPlaceholder={<FileSkeleton />}\n        >\n          {(fileAsset) => (\n            <Component\n              selectedAssets={[fileAsset]}\n              selectionType=\"single\"\n              assetType=\"file\"\n              dialogHeaderTitle=\"Select file\"\n              onClose={this.handleAssetSourceClosed}\n              onSelect={this.handleSelectAssetFromSource}\n            />\n          )}\n        </WithReferencedAsset>\n      )\n    }\n    return (\n      <Component\n        selectedAssets={[]}\n        selectionType=\"single\"\n        assetType=\"file\"\n        dialogHeaderTitle=\"Select file\"\n        onClose={this.handleAssetSourceClosed}\n        onSelect={this.handleSelectAssetFromSource}\n      />\n    )\n  }\n\n  handleSelectAssetFromSource = (assetFromSource: AssetFromSource[]) => {\n    const {onChange, schemaType, resolveUploader} = this.props\n    handleSelectAssetFromSource({\n      assetFromSource,\n      onChange,\n      type: schemaType,\n      resolveUploader,\n      uploadWith: this.uploadWith,\n    })\n    this.setState({selectedAssetSource: null})\n  }\n\n  hasFileTargetFocus() {\n    return this.props.focusPath?.[0] === 'asset'\n  }\n\n  handleFileTargetFocus = (event: FIXME) => {\n    // We want to handle focus when the file target element *itself* receives\n    // focus, not when an interactive child element receives focus. Since React has decided\n    // to let focus bubble, so this workaround is needed\n    // Background: https://github.com/facebook/react/issues/6410#issuecomment-671915381\n    if (event.currentTarget === event.target && event.currentTarget === this._focusRef) {\n      this.props.onFocusPath(['asset'])\n    }\n  }\n\n  handleFilesOver = (fileInfo: FileInfo[]) => {\n    this.setState({\n      hoveringFiles: fileInfo,\n    })\n  }\n  handleFilesOut = () => {\n    this.setState({\n      hoveringFiles: [],\n    })\n  }\n\n  renderAsset() {\n    const {value, changed, readOnly, elementProps} = this.props\n    const {hoveringFiles, isStale} = this.state\n    const hasValueOrUpload = Boolean(value?._upload || value?.asset)\n\n    if (value && typeof value.asset !== 'undefined' && !value?._upload && !isFileSource(value)) {\n      return () => <InvalidFileWarning onClearValue={this.handleClearField} />\n    }\n\n    // todo: convert this to a functional component and use this with useCallback\n    //  it currently has to return a new function on every render in order to pick up state from this component\n    return (inputProps: InputProps) => (\n      <>\n        {isStale && (\n          <Box marginBottom={2}>\n            <UploadWarning onClearStale={this.handleClearUploadState} />\n          </Box>\n        )}\n        <ChangeIndicator\n          path={this._assetFieldPath}\n          hasFocus={!!inputProps.focused}\n          isChanged={changed}\n        >\n          {/* not uploading */}\n          {!value?._upload && (\n            <FileTarget\n              {...elementProps}\n              tabIndex={0}\n              disabled={Boolean(readOnly)}\n              ref={this.setFocusElement}\n              onFiles={this.handleSelectFiles}\n              onFilesOver={this.handleFilesOver}\n              onFilesOut={this.handleFilesOut}\n              tone={this.getFileTone()}\n              $border={hasValueOrUpload || hoveringFiles.length > 0}\n              style={{padding: 1}}\n              sizing=\"border\"\n              radius={2}\n            >\n              <div style={{position: 'relative'}}>\n                {!value?.asset && this.renderUploadPlaceholder()}\n                {value?.asset && hoveringFiles.length > 0\n                  ? this.renderAssetMenu(this.getFileTone())\n                  : null}\n                {!value?._upload && value?.asset && this.renderPreview()}\n              </div>\n            </FileTarget>\n          )}\n\n          {/* uploading */}\n          {value?._upload && this.renderUploadState(value._upload)}\n        </ChangeIndicator>\n      </>\n    )\n  }\n\n  renderPreview() {\n    const {value, readOnly, assetSources, schemaType, directUploads, observeAsset} = this.props\n    const {isMenuOpen} = this.state\n    const asset = value?.asset\n    if (!asset) {\n      return null\n    }\n\n    const accept = get(schemaType, 'options.accept', '')\n\n    let browseMenuItem: ReactNode =\n      assetSources && assetSources?.length === 0 ? null : (\n        <MenuItem\n          icon={SearchIcon}\n          text=\"Browse\"\n          onClick={() => {\n            this.setState({isMenuOpen: false})\n            this.handleSelectFileFromAssetSource(assetSources[0])\n          }}\n          disabled={readOnly}\n          data-testid=\"file-input-browse-button\"\n        />\n      )\n\n    if (assetSources.length > 1) {\n      browseMenuItem = assetSources.map((assetSource) => {\n        return (\n          <MenuItem\n            key={assetSource.name}\n            text={assetSource.title}\n            onClick={() => {\n              this.setState({isMenuOpen: false})\n              this.handleSelectFileFromAssetSource(assetSource)\n            }}\n            icon={assetSource.icon || ImageIcon}\n            disabled={readOnly}\n            data-testid={`file-input-browse-button-${assetSource.name}`}\n          />\n        )\n      })\n    }\n\n    return (\n      <WithReferencedAsset\n        reference={asset}\n        observeAsset={observeAsset}\n        waitPlaceholder={<FileSkeleton />}\n      >\n        {({originalFilename, extension, url, size}) => {\n          const filename = originalFilename || `download.${extension}`\n          let copyUrl: string | undefined\n          let downloadUrl: string | undefined\n\n          if (isFileSource(value)) {\n            downloadUrl = `${url}?dl`\n            copyUrl = url\n          }\n\n          return (\n            <FileDetails\n              size={size}\n              originalFilename={filename}\n              muted={!readOnly}\n              onMenuOpen={(isOpen) => this.setState({isMenuOpen: isOpen})}\n              isMenuOpen={isMenuOpen}\n            >\n              <ActionsMenu\n                onUpload={this.handleSelectFiles}\n                browse={browseMenuItem}\n                onReset={this.handleRemoveButtonClick}\n                downloadUrl={downloadUrl}\n                copyUrl={copyUrl}\n                readOnly={readOnly}\n                accept={accept}\n                directUploads={directUploads}\n              />\n            </FileDetails>\n          )\n        }}\n      </WithReferencedAsset>\n    )\n  }\n\n  renderAssetMenu(tone: ThemeColorToneKey) {\n    const {schemaType, readOnly, directUploads, resolveUploader} = this.props\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader?.(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n\n    return (\n      <CardOverlay tone={tone}>\n        <FlexContainer align=\"center\" justify=\"center\" gap={2} flex={1}>\n          <PlaceholderText\n            readOnly={readOnly}\n            hoveringFiles={hoveringFiles}\n            acceptedFiles={acceptedFiles}\n            rejectedFilesCount={rejectedFilesCount}\n            directUploads={directUploads}\n            type=\"file\"\n          />\n        </FlexContainer>\n      </CardOverlay>\n    )\n  }\n\n  renderBrowser() {\n    const {assetSources, readOnly, directUploads, id} = this.props\n\n    if (assetSources.length === 0) return null\n\n    if (assetSources.length > 1 && !readOnly && directUploads) {\n      return (\n        <MenuButton\n          id={`${id}_assetFileButton`}\n          button={\n            <Button\n              mode=\"ghost\"\n              text=\"Select\"\n              data-testid=\"file-input-multi-browse-button\"\n              icon={SearchIcon}\n            />\n          }\n          data-testid=\"input-select-button\"\n          menu={\n            <Menu>\n              {assetSources.map((assetSource) => {\n                return (\n                  <MenuItem\n                    key={assetSource.name}\n                    text={assetSource.title}\n                    onClick={() => {\n                      this.setState({isMenuOpen: false})\n                      this.handleSelectFileFromAssetSource(assetSource)\n                    }}\n                    icon={assetSource.icon || ImageIcon}\n                    disabled={readOnly}\n                    data-testid={`file-input-browse-button-${assetSource.name}`}\n                  />\n                )\n              })}\n            </Menu>\n          }\n        />\n      )\n    }\n\n    return (\n      <Button\n        fontSize={2}\n        text=\"Browse\"\n        icon={SearchIcon}\n        mode=\"ghost\"\n        onClick={() => {\n          this.setState({isMenuOpen: false})\n          this.handleSelectFileFromAssetSource(assetSources[0])\n        }}\n        data-testid=\"file-input-browse-button\"\n        disabled={readOnly}\n      />\n    )\n  }\n\n  renderUploadPlaceholder() {\n    const {readOnly, schemaType, directUploads, resolveUploader} = this.props\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader?.(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n\n    const accept = get(schemaType, 'options.accept', '')\n\n    return (\n      <div style={{padding: 1}}>\n        <Card\n          tone={readOnly ? 'transparent' : 'inherit'}\n          border\n          padding={3}\n          style={\n            hoveringFiles.length === 0\n              ? {borderStyle: 'dashed'}\n              : {borderStyle: 'dashed', borderColor: 'transparent'}\n          }\n        >\n          <UploadPlaceholder\n            browse={this.renderBrowser()}\n            onUpload={this.handleSelectFiles}\n            readOnly={readOnly}\n            hoveringFiles={hoveringFiles}\n            acceptedFiles={acceptedFiles}\n            rejectedFilesCount={rejectedFilesCount}\n            type=\"file\"\n            accept={accept}\n            directUploads={directUploads}\n          />\n        </Card>\n      </div>\n    )\n  }\n\n  focus() {\n    if (this._focusRef) {\n      this._focusRef.focus()\n    }\n  }\n\n  setFocusElement = (ref: Focusable | null) => {\n    this._focusRef = ref\n  }\n\n  handleUpload = ({file, uploader}: {file: DOMFile; uploader: Uploader}) => {\n    this.uploadWith(uploader, file)\n  }\n\n  setToast = (toast: {push: (params: ToastParams) => void}) => {\n    this.toast = toast\n  }\n  getFileTone() {\n    const {directUploads, schemaType, value, readOnly, resolveUploader} = this.props\n    const {hoveringFiles} = this.state\n\n    const acceptedFiles = hoveringFiles.filter((file) => resolveUploader?.(schemaType, file))\n    const rejectedFilesCount = hoveringFiles.length - acceptedFiles.length\n\n    if (hoveringFiles.length > 0) {\n      if (rejectedFilesCount > 0 || !directUploads) {\n        return 'critical'\n      }\n    }\n\n    if (!value?._upload && !readOnly && hoveringFiles.length > 0) {\n      return 'primary'\n    }\n    return value?._upload && value?.asset && readOnly ? 'transparent' : 'default'\n  }\n\n  render() {\n    const {members, renderItem, renderInput, renderField, renderPreview} = this.props\n    const {selectedAssetSource} = this.state\n\n    return (\n      <>\n        <ImperativeToast ref={this.setToast} />\n        {members.map((member) => {\n          if (member.kind === 'field' && (member.name === 'crop' || member.name === 'hotspot')) {\n            // we're rendering these separately\n            return null\n          }\n\n          if (member.kind === 'field') {\n            return (\n              <MemberField\n                key={member.key}\n                member={member}\n                renderInput={member.name === 'asset' ? this.renderAsset() : renderInput}\n                renderField={member.name === 'asset' ? passThrough : renderField}\n                renderItem={renderItem}\n                renderPreview={renderPreview}\n              />\n            )\n          }\n          if (member.kind === 'fieldSet') {\n            return (\n              <MemberFieldSet\n                key={member.key}\n                member={member}\n                renderInput={renderInput}\n                renderField={renderField}\n                renderItem={renderItem}\n                renderPreview={renderPreview}\n              />\n            )\n          }\n          if (member.kind === 'error') {\n            return <MemberFieldError member={member} />\n          }\n          //@ts-expect-error all possible cases should be covered\n          return <>Unknown member kind: ${member.kind}</>\n        })}\n        {selectedAssetSource && this.renderAssetSource()}\n      </>\n    )\n  }\n}\n","import React, {useCallback, useMemo} from 'react'\nimport {SchemaType} from '@sanity/types'\nimport {FileInput, FileInputProps} from '../../inputs/files/FileInput'\nimport {resolveUploader as defaultResolveUploader} from '../uploads/resolveUploader'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../studioClient'\nimport {useFormBuilder} from '../../useFormBuilder'\nimport {useDocumentPreviewStore} from '../../../datastores'\nimport {useClient} from '../../../hooks'\nimport {FileLike} from '../uploads/types'\nimport {observeFileAsset} from './client-adapters/assets'\n\nexport type StudioFileInputProps = Omit<\n  FileInputProps,\n  'assetSources' | 'directUploads' | 'observeAsset' | 'resolveUploader' | 'client'\n>\n\nexport function StudioFileInput(props: StudioFileInputProps) {\n  const sourcesFromSchema = props.schemaType.options?.sources\n  const documentPreviewStore = useDocumentPreviewStore()\n  const {file: fileConfig} = useFormBuilder().__internal\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n\n  const resolveUploader = useCallback(\n    (type: SchemaType, file: FileLike) => {\n      if (!fileConfig.directUploads) {\n        return null\n      }\n      return defaultResolveUploader(type, file)\n    },\n    [fileConfig.directUploads]\n  )\n  // NOTE: type.options.sources may be an empty array and in that case we're\n  // disabling selecting images from asset source  (it's a feature, not a bug)\n  const assetSources = useMemo(\n    () => sourcesFromSchema || fileConfig.assetSources,\n    [fileConfig, sourcesFromSchema]\n  )\n\n  const observeAsset = useCallback(\n    (id: string) => observeFileAsset(documentPreviewStore, id),\n    [documentPreviewStore]\n  )\n\n  return (\n    <FileInput\n      {...props}\n      client={client}\n      assetSources={assetSources}\n      directUploads={fileConfig.directUploads}\n      observeAsset={observeAsset}\n      resolveUploader={resolveUploader}\n    />\n  )\n}\n","import {useCallback, useState} from 'react'\nimport {catchError, map, startWith} from 'rxjs/operators'\nimport {Observable, of} from 'rxjs'\nimport {useMemoObservable} from 'react-rx'\nimport {usePrevious} from '../../hooks/usePrevious'\nimport {CrossDatasetReferenceInfo} from './types'\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst noop = () => {}\n\nconst INITIAL_LOADING_STATE: Loadable<CrossDatasetReferenceInfo> = {\n  isLoading: true,\n  result: undefined,\n  error: undefined,\n  retry: noop,\n}\n\nconst EMPTY_STATE: Loadable<any> = {\n  isLoading: false,\n  result: undefined,\n  error: undefined,\n  retry: noop,\n}\n\nexport type Loadable<T> =\n  | {isLoading: true; result: undefined; error: undefined; retry: () => void}\n  | {isLoading: false; result: T; error: undefined; retry: () => void}\n  | {isLoading: false; result: undefined; error: Error; retry: () => void}\n\nexport type GetReferenceInfoFn = (doc: {\n  _id: string\n  _type?: string\n}) => Observable<CrossDatasetReferenceInfo>\n\nexport function useReferenceInfo(\n  doc: {_id: string; _type?: string},\n  getReferenceInfo: GetReferenceInfoFn\n): Loadable<CrossDatasetReferenceInfo> {\n  const [retryAttempt, setRetryAttempt] = useState<number>(0)\n\n  const retry = useCallback(() => {\n    setRetryAttempt((current) => current + 1)\n  }, [])\n\n  const referenceInfo = useMemoObservable(\n    () =>\n      doc._id\n        ? getReferenceInfo(doc).pipe(\n            map(\n              (result) =>\n                ({\n                  isLoading: false,\n                  result,\n                  error: undefined,\n                  retry,\n                } as const)\n            ),\n            startWith(INITIAL_LOADING_STATE),\n            catchError((err: Error) => {\n              console.error(err)\n              return of({isLoading: false, result: undefined, error: err, retry} as const)\n            })\n          )\n        : of(EMPTY_STATE),\n    [retryAttempt, getReferenceInfo, doc?._id, doc?._type, retry],\n    INITIAL_LOADING_STATE\n  )\n\n  // workaround for a \"bug\" with useMemoObservable that doesn't\n  // return the initial value upon resubscription\n  const previousId = usePrevious(doc._id, doc._id)\n  if (previousId !== doc._id) {\n    return INITIAL_LOADING_STATE\n  }\n  return referenceInfo\n}\n","import React, {ComponentType, createElement, ReactNode, useMemo} from 'react'\nimport {CrossDatasetType, PreviewValue} from '@sanity/types'\nimport {Box, Flex, Inline, Label, Text, Tooltip} from '@sanity/ui'\nimport {AccessDeniedIcon, HelpCircleIcon, LaunchIcon} from '@sanity/icons'\nimport imageUrlBuilder from '@sanity/image-url'\nimport {DefaultPreview, PreviewMediaDimensions} from '../../../components/previews'\nimport {TextWithTone} from '../../../components/TextWithTone'\nimport {FIXME} from '../../types'\nimport {DocumentAvailability} from '../../../preview'\n\nfunction UnavailableMessage(props: {icon: ComponentType; children: ReactNode; title: ReactNode}) {\n  const Icon = props.icon\n  return (\n    <Flex padding={3}>\n      <Box>\n        <Text size={1}>\n          <Icon />\n        </Text>\n      </Box>\n      <Box flex={1} marginLeft={3}>\n        <Text size={1} weight=\"semibold\">\n          {props.title}\n        </Text>\n\n        <Box marginTop={3}>\n          <Text as=\"p\" muted size={1}>\n            {props.children}\n          </Text>\n        </Box>\n      </Box>\n    </Flex>\n  )\n}\n\n/**\n * Used to preview a referenced type\n * Takes the reference type as props\n */\nexport function CrossDatasetReferencePreview(props: {\n  availability: DocumentAvailability | null\n  id: string\n  hasStudioUrl?: boolean\n  showStudioUrlIcon?: boolean\n  preview: {published: PreviewValue | undefined}\n  dataset: string\n  projectId: string\n  refType?: CrossDatasetType\n  showTypeLabel: boolean\n}) {\n  const {\n    refType,\n    showStudioUrlIcon,\n    hasStudioUrl,\n    showTypeLabel,\n    availability,\n    preview,\n    id,\n    dataset,\n    projectId,\n  } = props\n  const notFound = availability?.reason === 'NOT_FOUND'\n  const insufficientPermissions = availability?.reason === 'PERMISSION_DENIED'\n\n  const previewMedia = preview.published?.media\n\n  const media = useMemo(() => {\n    if (previewMedia) {\n      return function MediaPreview({dimensions}: {dimensions: PreviewMediaDimensions}) {\n        return React.isValidElement(previewMedia) ? (\n          previewMedia\n        ) : (\n          <img\n            src={imageUrlBuilder({dataset, projectId})\n              .image(previewMedia as FIXME)\n              .withOptions(dimensions)\n              .url()}\n            alt=\"Image preview of referenced document\"\n            referrerPolicy=\"strict-origin-when-cross-origin\"\n          />\n        )\n      }\n    }\n    return refType?.icon ? createElement(refType.icon) : null\n  }, [previewMedia, dataset, projectId, refType?.icon])\n\n  return (\n    <Flex align=\"center\" data-testid=\"preview\">\n      {availability?.available ? (\n        <Box flex={1} paddingX={2} paddingY={1}>\n          <DefaultPreview\n            title={preview.published?.title}\n            subtitle={preview.published?.subtitle}\n            media={media || false}\n          />\n        </Box>\n      ) : (\n        <Box flex={1} padding={2}>\n          <Flex align=\"center\" justify=\"center\">\n            <Box flex={1} paddingY={2}>\n              <Text muted>Document unavailable</Text>\n            </Box>\n          </Flex>\n        </Box>\n      )}\n\n      <Box paddingLeft={3}>\n        <Inline space={4}>\n          {refType && showTypeLabel && (\n            <Label size={1} muted>\n              {refType.title || refType.type}\n            </Label>\n          )}\n\n          {(insufficientPermissions || notFound) && (\n            <Box>\n              <Tooltip\n                portal\n                content={\n                  notFound ? (\n                    <UnavailableMessage title=\"Not found\" icon={HelpCircleIcon}>\n                      The referenced document does not exist\n                      <br />\n                      (id: <code>{id}</code>)\n                    </UnavailableMessage>\n                  ) : (\n                    <UnavailableMessage title=\"Insufficient permissions\" icon={AccessDeniedIcon}>\n                      The referenced document could not be accessed due to insufficient permissions\n                    </UnavailableMessage>\n                  )\n                }\n              >\n                <TextWithTone tone=\"default\">\n                  {insufficientPermissions ? <AccessDeniedIcon /> : <HelpCircleIcon />}\n                </TextWithTone>\n              </Tooltip>\n            </Box>\n          )}\n\n          {!(notFound || insufficientPermissions) && showStudioUrlIcon && (\n            <Box>\n              <Tooltip\n                portal\n                content={\n                  <Box padding={2}>\n                    {hasStudioUrl ? (\n                      <Text size={1}>This document opens in another Studio</Text>\n                    ) : (\n                      <Text size={1}>\n                        This document cannot be opened (unable to resolve URL to Studio)\n                      </Text>\n                    )}\n                  </Box>\n                }\n              >\n                <TextWithTone size={1} tone=\"default\" muted={!hasStudioUrl}>\n                  <LaunchIcon />\n                </TextWithTone>\n              </Tooltip>\n            </Box>\n          )}\n        </Inline>\n      </Box>\n    </Flex>\n  )\n}\n","/* eslint-disable max-nested-callbacks,no-nested-ternary */\nimport React from 'react'\nimport {CrossDatasetReferenceSchemaType} from '@sanity/types'\nimport {Stack, TextSkeleton} from '@sanity/ui'\nimport {Observable} from 'rxjs'\nimport {Alert} from '../../components/Alert'\nimport {CrossDatasetReferenceInfo} from './types'\nimport {useReferenceInfo} from './useReferenceInfo'\nimport {CrossDatasetReferencePreview} from './CrossDatasetReferencePreview'\n\n/**\n * Used to preview a referenced type\n * Takes as props the referenced document, the reference type and a hook to subscribe to\n * in order to listen for the reference info\n * @param props\n * @constructor\n */\nexport function OptionPreview(props: {\n  document: {_id: string; _type: string}\n  referenceType: CrossDatasetReferenceSchemaType\n  getReferenceInfo: (doc: {_id: string; _type?: string}) => Observable<CrossDatasetReferenceInfo>\n}) {\n  const {\n    isLoading,\n    result: referenceInfo,\n    error,\n  } = useReferenceInfo(props.document, props.getReferenceInfo)\n\n  if (isLoading) {\n    return (\n      <Stack space={2} padding={1}>\n        <TextSkeleton style={{maxWidth: 320}} radius={1} animated />\n        <TextSkeleton style={{maxWidth: 200}} radius={1} size={1} animated />\n      </Stack>\n    )\n  }\n\n  if (error) {\n    return (\n      <Stack space={2} padding={1}>\n        <Alert title=\"Failed to load referenced document\">Error: {error.message}</Alert>\n      </Stack>\n    )\n  }\n\n  if (!referenceInfo) {\n    return null\n  }\n\n  if (referenceInfo.availability?.reason === 'PERMISSION_DENIED') {\n    return (\n      <Stack space={2} padding={1}>\n        Insufficient permissions to view this document\n      </Stack>\n    )\n  }\n\n  const refType = props.referenceType.to.find((toEntry) => toEntry.type === referenceInfo.type)\n  if (!refType) {\n    return (\n      <Stack space={2} padding={1}>\n        Search returned a type that's not valid for this reference: \"${referenceInfo.type}\"\n      </Stack>\n    )\n  }\n  return (\n    referenceInfo &&\n    refType && (\n      <CrossDatasetReferencePreview\n        id={referenceInfo.id}\n        availability={referenceInfo.availability}\n        preview={referenceInfo.preview}\n        refType={refType}\n        dataset={props.referenceType.dataset}\n        projectId={props.referenceType.projectId}\n        showTypeLabel={props.referenceType.to.length > 1}\n      />\n    )\n  )\n}\n","import React from 'react'\nimport {CrossDatasetReference, CrossDatasetReferenceSchemaType} from '@sanity/types'\nimport {Stack, Text, TextSkeleton} from '@sanity/ui'\nimport {Loadable} from './useReferenceInfo'\nimport {CrossDatasetReferenceInfo} from './types'\nimport {CrossDatasetReferencePreview} from './CrossDatasetReferencePreview'\n\nexport function PreviewReferenceValue(props: {\n  value: CrossDatasetReference\n  showStudioUrlIcon?: boolean\n  hasStudioUrl?: boolean\n  type: CrossDatasetReferenceSchemaType\n  referenceInfo: Loadable<CrossDatasetReferenceInfo>\n}) {\n  const {value, type, showStudioUrlIcon, hasStudioUrl, referenceInfo} = props\n\n  if (referenceInfo.isLoading || referenceInfo.error) {\n    return (\n      <Stack space={2} padding={1}>\n        <TextSkeleton style={{maxWidth: 320}} radius={1} animated={!referenceInfo.error} />\n        <TextSkeleton style={{maxWidth: 200}} radius={1} size={1} animated={!referenceInfo.error} />\n      </Stack>\n    )\n  }\n  const showTypeLabel = type.to.length > 1\n\n  const refTypeName = referenceInfo.result?.type\n  const refType = type.to.find((toType) => toType.type === refTypeName)\n\n  if (referenceInfo.result.availability?.available && !refType) {\n    return (\n      <Stack space={2} padding={2}>\n        <Text as=\"p\">\n          The referenced document is of invalid type: ({refTypeName || 'unknown'})\n          <pre>{JSON.stringify(value, null, 2)}</pre>\n        </Text>\n      </Stack>\n    )\n  }\n\n  return (\n    <CrossDatasetReferencePreview\n      availability={referenceInfo.result.availability}\n      hasStudioUrl={hasStudioUrl}\n      showStudioUrlIcon={showStudioUrlIcon}\n      preview={referenceInfo.result.preview}\n      refType={refType}\n      projectId={type.projectId}\n      dataset={type.dataset}\n      id={value._ref}\n      showTypeLabel={showTypeLabel}\n    />\n  )\n}\n","import React, {forwardRef, useCallback} from 'react'\nimport {Autocomplete, Box, Flex, Popover, Text} from '@sanity/ui'\nimport styled from 'styled-components'\n\nconst StyledPopover = styled(Popover)`\n  & > div {\n    overflow: auto;\n    -webkit-overflow-scrolling: touch;\n  }\n`\n\nconst StyledText = styled(Text)`\n  word-break: break-word;\n`\n\nexport const ReferenceAutocomplete = forwardRef(function ReferenceAutocomplete(\n  props: React.ComponentProps<typeof Autocomplete> & {\n    referenceElement: HTMLDivElement | null\n    searchString?: string\n    portalRef?: React.RefObject<HTMLDivElement>\n  },\n  ref: React.ForwardedRef<HTMLInputElement>\n) {\n  const hasResults = props.options && props.options.length > 0\n  const renderPopover = useCallback(\n    (\n      {\n        content,\n        hidden,\n        inputElement,\n        onMouseEnter,\n        onMouseLeave,\n      }: {\n        content: React.ReactElement | null\n        hidden: boolean\n        inputElement: HTMLInputElement | null\n        onMouseEnter: () => void\n        onMouseLeave: () => void\n      },\n      contentRef: React.Ref<HTMLDivElement>\n    ) => (\n      <StyledPopover\n        data-testid=\"autocomplete-popover\"\n        placement=\"bottom-start\"\n        arrow={false}\n        constrainSize\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n        content={\n          <div ref={contentRef}>\n            {hasResults ? (\n              content\n            ) : (\n              <Box padding={4}>\n                <Flex align=\"center\" height=\"fill\" justify=\"center\">\n                  <StyledText align=\"center\" muted>\n                    No results for <strong>â€œ{props.searchString}â€</strong>\n                  </StyledText>\n                </Flex>\n              </Box>\n            )}\n          </div>\n        }\n        open={!props.loading && !hidden}\n        ref={props.portalRef}\n        portal\n        referenceElement={props.referenceElement || inputElement}\n        matchReferenceWidth\n      />\n    ),\n    [hasResults, props.searchString, props.loading, props.portalRef, props.referenceElement]\n  )\n  return <Autocomplete {...props} ref={ref} renderPopover={renderPopover} />\n})\n","import {Card} from '@sanity/ui'\nimport styled from 'styled-components'\n\nexport const PreviewCard = styled(Card)`\n  /* this is a hack to avoid layout jumps while previews are loading\n  there's probably better ways of solving this */\n  min-height: 36px;\n\n  /* TextWithTone uses its own logic to set color, and we therefore need\n  to override this logic in order to set the correct color in different states */\n  &[data-selected],\n  &[data-pressed],\n  &:active {\n    [data-ui='TextWithTone'] {\n      color: inherit;\n    }\n  }\n`\n","/* eslint-disable complexity, max-nested-callbacks, no-nested-ternary */\n\nimport React, {useCallback, useMemo, useRef, useState} from 'react'\nimport {CrossDatasetReference, CrossDatasetReferenceSchemaType} from '@sanity/types'\nimport {EllipsisVerticalIcon, ResetIcon as ClearIcon, SyncIcon as ReplaceIcon} from '@sanity/icons'\nimport {concat, Observable, of} from 'rxjs'\nimport {useId} from '@reach/auto-id'\nimport {catchError, distinctUntilChanged, filter, map, scan, switchMap, tap} from 'rxjs/operators'\nimport {\n  Box,\n  Button,\n  Card,\n  Flex,\n  Inline,\n  Menu,\n  MenuButton,\n  MenuItem,\n  Stack,\n  Text,\n  useForwardedRef,\n  useToast,\n} from '@sanity/ui'\nimport {useObservableCallback} from 'react-rx'\nimport {FIXME, ObjectInputProps} from '../../types'\nimport {set, unset} from '../../patch'\nimport {AlertStrip} from '../../components/AlertStrip'\nimport {useOnClickOutside} from '../../hooks/useOnClickOutside'\nimport {isNonNullable} from '../../utils/isNonNullable'\nimport {getPublishedId} from '../../../util'\nimport {ChangeIndicator} from '../../../components/changeIndicators'\nimport {CrossDatasetReferenceInfo, CrossDatasetSearchHit, SearchState} from './types'\nimport {OptionPreview} from './OptionPreview'\nimport {GetReferenceInfoFn, useReferenceInfo} from './useReferenceInfo'\nimport {PreviewReferenceValue} from './PreviewReferenceValue'\nimport {ReferenceAutocomplete} from './ReferenceAutocomplete'\nimport {PreviewCard} from './PreviewCard'\n\nconst INITIAL_SEARCH_STATE: SearchState = {\n  hits: [],\n  isLoading: false,\n}\n\nexport interface CrossDatasetReferenceInputProps\n  extends ObjectInputProps<CrossDatasetReference, CrossDatasetReferenceSchemaType> {\n  getReferenceInfo: (\n    doc: {_id: string; _type?: string},\n    type: CrossDatasetReferenceSchemaType\n  ) => Observable<CrossDatasetReferenceInfo>\n  onSearch: (query: string) => Observable<CrossDatasetSearchHit[]>\n}\n\nconst NO_FILTER = () => true\n\nconst REF_PATH = ['_ref']\n\nexport function CrossDatasetReferenceInput(props: CrossDatasetReferenceInputProps) {\n  const {\n    changed,\n    focused,\n    focusPath,\n    getReferenceInfo,\n    onChange,\n    onFocusPath,\n    onSearch,\n    path,\n    readOnly,\n    schemaType,\n    validation,\n    value,\n    elementProps,\n  } = props\n\n  const [searchState, setSearchState] = useState<SearchState>(INITIAL_SEARCH_STATE)\n\n  const handleChange = useCallback(\n    (id: string) => {\n      if (!id) {\n        onChange(unset())\n        onFocusPath([])\n        return\n      }\n\n      const hit = searchState.hits.find((h) => h.id === id)\n\n      if (!hit) {\n        throw new Error('Selected an item that wasnt part of the result set')\n      }\n\n      onChange(\n        set({\n          _type: schemaType.name,\n          _ref: getPublishedId(id),\n          _projectId: schemaType.projectId,\n          _dataset: schemaType.dataset,\n          _weak: schemaType.weak,\n          // persist _key between mutations if the value is in an array\n          _key: value?._key,\n        })\n      )\n\n      onFocusPath([])\n    },\n    [\n      value?._key,\n      searchState.hits,\n      schemaType.name,\n      schemaType.projectId,\n      schemaType.dataset,\n      schemaType.weak,\n      onChange,\n      onFocusPath,\n    ]\n  )\n\n  const handleClear = useCallback(() => {\n    onChange(unset())\n  }, [onChange])\n\n  const handleAutocompleteKeyDown = useCallback(\n    (event) => {\n      // escape\n      if (event.keyCode === 27) {\n        onFocusPath?.([])\n      }\n    },\n    [onFocusPath]\n  )\n\n  const getReferenceInfoMemo: GetReferenceInfoFn = useCallback(\n    (doc) => getReferenceInfo(doc, schemaType),\n    [getReferenceInfo, schemaType]\n  )\n\n  const refDoc = useMemo(() => ({_id: value?._ref}), [value?._ref])\n\n  const loadableReferenceInfo = useReferenceInfo(refDoc as FIXME, getReferenceInfoMemo)\n\n  const autocompletePopoverReferenceElementRef = useRef<HTMLDivElement | null>(null)\n\n  const hasFocusAtRef = focusPath.length === 1 && focusPath[0] === '_ref'\n\n  // --- focus handling\n  // const focusElementRef = useForwardedRef(forwardedRef)\n  // useDidUpdate({hasFocusAt: hasFocusAtRef, ref: value?._ref}, (prev, current) => {\n  //   const refUpdated = prev?.ref !== current.ref\n  //   const focusAtUpdated = prev?.hasFocusAt !== current.hasFocusAt\n\n  //   if ((focusAtUpdated || refUpdated) && current.hasFocusAt) {\n  //     // if search mode changed and we're having focus always ensure the\n  //     // ref element gets focus\n  //     focusElementRef.current?.focus()\n  //   }\n  // })\n\n  const weakIs = value?._weak ? 'weak' : 'strong'\n  const weakShouldBe = schemaType.weak === true ? 'weak' : 'strong'\n\n  const hasRef = Boolean(value?._ref)\n\n  const handleFixStrengthMismatch = useCallback(() => {\n    onChange(schemaType.weak === true ? set(true, ['_weak']) : unset(['_weak']))\n  }, [onChange, schemaType])\n\n  const {push} = useToast()\n\n  const errors = useMemo(() => validation.filter((item) => item.level === 'error'), [validation])\n\n  const handleFocus = useCallback(\n    (event) => {\n      if (onFocusPath && event.currentTarget === elementProps.ref.current) {\n        onFocusPath([])\n      }\n    },\n    [elementProps.ref, onFocusPath]\n  )\n\n  const handleAutocompleteFocus = useCallback(\n    (event) => {\n      if (onFocusPath && event.currentTarget === elementProps.ref.current) {\n        onFocusPath(REF_PATH)\n      }\n    },\n    [elementProps.ref, onFocusPath]\n  )\n\n  const handleQueryChange = useObservableCallback((inputValue$: Observable<string | null>) => {\n    return inputValue$.pipe(\n      filter(isNonNullable),\n      distinctUntilChanged(),\n      switchMap((searchString) =>\n        concat(\n          of({isLoading: true}),\n          onSearch(searchString).pipe(\n            map((hits) => ({hits, searchString, isLoading: false})),\n            catchError((error) => {\n              push({\n                title: 'Reference search failed',\n                description: error.message,\n                status: 'error',\n                id: `reference-search-fail-${inputId}`,\n              })\n\n              console.error(error)\n              return of({hits: []})\n            })\n          )\n        )\n      ),\n\n      scan(\n        (prevState, nextState): SearchState => ({...prevState, ...nextState}),\n        INITIAL_SEARCH_STATE\n      ),\n\n      tap(setSearchState)\n    )\n  }, [])\n\n  const handleAutocompleteOpenButtonClick = useCallback(() => {\n    handleQueryChange('')\n  }, [handleQueryChange])\n\n  const showWeakRefMismatch = !loadableReferenceInfo.isLoading && hasRef && weakIs !== weakShouldBe\n\n  const inputId = useId()\n\n  const studioUrl =\n    (value?._ref &&\n      schemaType.studioUrl?.({\n        id: value?._ref,\n        type: loadableReferenceInfo?.result?.type,\n      })) ||\n    null\n\n  const renderOption = useCallback(\n    (option) => {\n      return (\n        <PreviewCard forwardedAs=\"button\" type=\"button\" radius={2}>\n          <Box paddingX={3} paddingY={1}>\n            <OptionPreview\n              referenceType={schemaType}\n              document={option.hit.published}\n              getReferenceInfo={getReferenceInfoMemo}\n            />\n          </Box>\n        </PreviewCard>\n      )\n    },\n    [schemaType, getReferenceInfoMemo]\n  )\n\n  const preview = loadableReferenceInfo.result?.preview.published\n\n  const isEditing = hasFocusAtRef || !value?._ref\n\n  // --- click outside handling\n  const clickOutsideBoundaryRef = useRef<HTMLDivElement | null>(null)\n  const autocompletePortalRef = useRef<HTMLDivElement | null>(null)\n  const createButtonMenuPortalRef = useRef<HTMLDivElement | null>(null)\n  useOnClickOutside(\n    [clickOutsideBoundaryRef, autocompletePortalRef, createButtonMenuPortalRef],\n    () => {\n      if (hasFocusAtRef) {\n        onFocusPath([])\n      }\n    }\n  )\n\n  return (\n    <Stack space={1} marginY={isEditing ? 2 : 0}>\n      {isEditing ? (\n        <Stack space={2} ref={clickOutsideBoundaryRef}>\n          <ChangeIndicator path={path} isChanged={changed} hasFocus={!!focused}>\n            <div ref={autocompletePopoverReferenceElementRef}>\n              <ReferenceAutocomplete\n                {...elementProps}\n                data-testid=\"autocomplete\"\n                loading={searchState.isLoading}\n                referenceElement={autocompletePopoverReferenceElementRef.current}\n                portalRef={autocompletePortalRef}\n                id={inputId || ''}\n                options={searchState.hits.map((hit) => ({\n                  value: hit.id,\n                  hit: hit,\n                }))}\n                onFocus={handleAutocompleteFocus}\n                radius={1}\n                placeholder=\"Type to search\"\n                onKeyDown={handleAutocompleteKeyDown}\n                readOnly={readOnly}\n                disabled={loadableReferenceInfo.isLoading}\n                onQueryChange={handleQueryChange}\n                searchString={searchState.searchString}\n                onChange={handleChange}\n                filterOption={NO_FILTER}\n                renderOption={renderOption}\n                openButton={{onClick: handleAutocompleteOpenButtonClick}}\n              />\n            </div>\n          </ChangeIndicator>\n        </Stack>\n      ) : (\n        <ChangeIndicator path={path} isChanged={changed} hasFocus={!!focused}>\n          <Card\n            padding={0}\n            border\n            radius={1}\n            tone={\n              readOnly\n                ? 'transparent'\n                : loadableReferenceInfo.error || errors.length > 0\n                ? 'critical'\n                : 'default'\n            }\n          >\n            <Flex align=\"center\" padding={1}>\n              {studioUrl ? (\n                <PreviewCard\n                  forwardedAs=\"a\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  href={studioUrl}\n                  data-as=\"a\"\n                  flex={1}\n                  padding={1}\n                  paddingRight={3}\n                  radius={2}\n                  tone=\"inherit\"\n                  __unstable_focusRing\n                  tabIndex={0}\n                  onFocus={handleFocus}\n                  ref={elementProps.ref}\n                >\n                  <PreviewReferenceValue\n                    value={value}\n                    referenceInfo={loadableReferenceInfo}\n                    showStudioUrlIcon\n                    hasStudioUrl={!!studioUrl}\n                    type={schemaType}\n                  />\n                </PreviewCard>\n              ) : (\n                <PreviewCard\n                  flex={1}\n                  padding={1}\n                  paddingRight={3}\n                  radius={2}\n                  tone=\"inherit\"\n                  __unstable_focusRing\n                  tabIndex={0}\n                  onFocus={handleFocus}\n                  ref={elementProps.ref}\n                >\n                  <PreviewReferenceValue\n                    value={value}\n                    referenceInfo={loadableReferenceInfo}\n                    showStudioUrlIcon\n                    type={schemaType}\n                  />\n                </PreviewCard>\n              )}\n\n              <Inline paddingX={1}>\n                <MenuButton\n                  button={\n                    <Button\n                      padding={2}\n                      mode=\"bleed\"\n                      icon={EllipsisVerticalIcon}\n                      data-testid=\"menu-button\"\n                    />\n                  }\n                  id={`${inputId}-menuButton`}\n                  menu={\n                    <Menu>\n                      {!readOnly && (\n                        <>\n                          <MenuItem\n                            text=\"Clear\"\n                            tone=\"critical\"\n                            icon={ClearIcon}\n                            data-testid=\"menu-item-clear\"\n                            onClick={handleClear}\n                          />\n\n                          <MenuItem\n                            text=\"Replace\"\n                            icon={ReplaceIcon}\n                            data-testid=\"menu-item-replace\"\n                            onClick={() => {\n                              onFocusPath(REF_PATH)\n                            }}\n                          />\n                        </>\n                      )}\n                    </Menu>\n                  }\n                  placement=\"right\"\n                  popover={{portal: true, tone: 'default'}}\n                />\n              </Inline>\n            </Flex>\n            {showWeakRefMismatch && (\n              <AlertStrip\n                padding={1}\n                title=\"Reference strength mismatch\"\n                status=\"warning\"\n                data-testid=\"alert-reference-strength-mismatch\"\n              >\n                <Stack space={3}>\n                  <Text as=\"p\" muted size={1}>\n                    This reference is <em>{weakIs}</em>, but according to the current schema it\n                    should be <em>{weakShouldBe}.</em>\n                  </Text>\n\n                  <Text as=\"p\" muted size={1}>\n                    {schemaType.weak ? (\n                      <>\n                        It will not be possible to delete the \"{preview?.title}\"-document without\n                        first removing this reference.\n                      </>\n                    ) : (\n                      <>\n                        This makes it possible to delete the \"{preview?.title}\"-document without\n                        first deleting this reference, leaving this field referencing a nonexisting\n                        document.\n                      </>\n                    )}\n                  </Text>\n                  <Button\n                    onClick={handleFixStrengthMismatch}\n                    text={<>Convert to {weakShouldBe} reference</>}\n                    tone=\"caution\"\n                  />\n                </Stack>\n              </AlertStrip>\n            )}\n\n            {loadableReferenceInfo.error && (\n              <AlertStrip\n                padding={1}\n                title=\"Unable to load reference metadata\"\n                status=\"warning\"\n                data-testid=\"alert-reference-info-failed\"\n              >\n                <Stack space={3}>\n                  <Text as=\"p\" muted size={1}>\n                    Error: {loadableReferenceInfo.error.message}\n                  </Text>\n                  <Button onClick={loadableReferenceInfo.retry!} text={<>Retry</>} tone=\"primary\" />\n                </Stack>\n              </AlertStrip>\n            )}\n          </Card>\n        </ChangeIndicator>\n      )}\n    </Stack>\n  )\n}\n","import {map} from 'rxjs/operators'\n\nimport {CrossDatasetReferenceSchemaType, ReferenceFilterSearchOptions} from '@sanity/types'\nimport {Observable} from 'rxjs'\n\n// eslint-disable-next-line camelcase\nimport {SanityClient} from '@sanity/client'\nimport {collate} from '../../../../../util'\nimport {createWeightedSearch} from '../../../../../search'\n\ninterface SearchHit {\n  id: string\n  type: string\n  published: undefined | {_id: string; _type: string}\n}\n\nexport function search(\n  client: SanityClient,\n  textTerm: string,\n  type: CrossDatasetReferenceSchemaType,\n  options: ReferenceFilterSearchOptions\n): Observable<SearchHit[]> {\n  const searchWeighted = createWeightedSearch(\n    type.to.map((crossDatasetType) => ({\n      name: crossDatasetType.type,\n      // eslint-disable-next-line camelcase\n      __experimental_search: crossDatasetType.__experimental_search,\n    })),\n\n    client,\n    options\n  )\n\n  return searchWeighted(textTerm, {includeDrafts: false}).pipe(\n    // pick the 100 best matches\n    map((results) => results.map((result) => result.hit)),\n    map(collate),\n    map((collated) =>\n      collated.map((entry) => ({\n        id: entry.id,\n        type: entry.type,\n        published: entry.published,\n      }))\n    )\n  )\n}\n","import {map, switchMap} from 'rxjs/operators'\nimport {CrossDatasetReferenceSchemaType} from '@sanity/types'\nimport {combineLatest, Observable, of} from 'rxjs'\nimport {SanityClient} from '@sanity/client'\nimport {keyBy} from 'lodash'\nimport {\n  DocumentPreviewStore,\n  getPreviewPaths,\n  prepareForPreview,\n  DocumentAvailability,\n  Previewable,\n} from '../../../../../preview'\nimport {CrossDatasetReferenceInfo} from '../../../../inputs/CrossDatasetReferenceInput/types'\nimport {FIXME} from '../../../../types'\nimport {isRecord} from '../../../../../util'\n\nconst REQUEST_TAG_BASE = 'cross-dataset-refs'\n\nconst AVAILABILITY_READABLE = {\n  available: true,\n  reason: 'READABLE',\n} as const\n\nconst AVAILABILITY_PERMISSION_DENIED = {\n  available: false,\n  reason: 'PERMISSION_DENIED',\n} as const\n\nconst AVAILABILITY_NOT_FOUND = {\n  available: false,\n  reason: 'NOT_FOUND',\n} as const\n\n/**\n * Takes a client instance and returns a function that can be called to retrieve reference information\n */\nexport function createGetReferenceInfo(context: {\n  client: SanityClient\n  documentPreviewStore: DocumentPreviewStore\n}) {\n  const {client, documentPreviewStore} = context\n  const {dataset, projectId} = client.config()\n  const apiConfig = dataset && projectId ? {dataset, projectId} : undefined\n\n  /**\n   * Takes an id and a reference schema type, returns metadata about it\n   * Assumption: _id is always published id\n   */\n  return function getReferenceInfo(\n    doc: {_id: string; _type?: string}, // pass {_id, _type} instead and we can skip the `fetchType`\n    referenceType: CrossDatasetReferenceSchemaType\n  ): Observable<CrossDatasetReferenceInfo> {\n    return (\n      doc._type\n        ? of(doc)\n        : documentPreviewStore\n            .observeDocumentTypeFromId(doc._id, apiConfig)\n            .pipe(map((docType): {_id: string; _type?: string} => ({_id: doc._id, _type: docType})))\n    ).pipe(\n      switchMap((resolvedDoc) => {\n        if (!resolvedDoc._type) {\n          // we still can't read the type of the referenced document. This may be due to either 1) lack of access 2) lack of existence\n          // we want to display a reason to the end user, so we're fetching metadata about it\n          return fetchDocumentAvailability(client, doc._id).pipe(\n            map((availability) => ({\n              id: doc._id,\n              type: undefined,\n              availability,\n              preview: {published: undefined},\n            }))\n          )\n        }\n        const refSchemaType = referenceType.to.find(\n          (candidate) => candidate.type === resolvedDoc._type\n        )\n\n        const previewPaths = [\n          ...(getPreviewPaths(refSchemaType?.preview) || []),\n          ['_updatedAt'],\n          ['_createdAt'],\n        ]\n\n        const publishedPreview$ = documentPreviewStore\n          .observePaths(doc as Previewable, previewPaths, apiConfig)\n          .pipe(\n            map((result) => (result ? prepareForPreview(result, refSchemaType as FIXME) : result))\n          )\n\n        return combineLatest([publishedPreview$]).pipe(\n          map(([publishedPreview]) => {\n            return {\n              type: resolvedDoc._type,\n              id: doc._id,\n              availability: AVAILABILITY_READABLE,\n              preview: {\n                published: isRecord(publishedPreview) ? publishedPreview : undefined,\n              },\n            }\n          })\n        )\n      })\n    )\n  }\n}\n\nfunction fetchDocumentAvailability(\n  client: SanityClient,\n  id: string\n): Observable<DocumentAvailability | null> {\n  const requestOptions = {\n    uri: client.getDataUrl('doc', id),\n    json: true,\n    query: {excludeContent: 'true'},\n    tag: `${REQUEST_TAG_BASE}.availability`,\n  }\n\n  return client.observable.request(requestOptions).pipe(\n    map((response) => {\n      const omitted = keyBy(response.omitted || [], (entry) => entry.id)\n      const omittedEntry = omitted[id]\n      if (!omittedEntry) {\n        // it's not omitted, so it exists and is readable\n        return AVAILABILITY_READABLE\n      }\n      // omitted because it doesn't exist\n      if (omittedEntry.reason === 'existence') {\n        return AVAILABILITY_NOT_FOUND\n      }\n      if (omittedEntry.reason === 'permission') {\n        // omitted because it's not readable\n        return AVAILABILITY_PERMISSION_DENIED\n      }\n      return null\n    })\n  )\n}\n","import {SanityClient} from '@sanity/client'\nimport {useMemoObservable} from 'react-rx'\nimport {map, startWith} from 'rxjs/operators'\nimport {useCrossProjectTokenStore, useDocumentPreviewStore} from '../../../../../datastores'\nimport {isRecord} from '../../../../../util'\n\ntype LoadState<T> =\n  | {status: 'loading'}\n  | {\n      status: 'loaded'\n      result: T | undefined\n    }\n  | {status: 'error'; error: Error}\n\nexport function useCrossProjectToken(\n  client: SanityClient,\n  {projectId, tokenId}: {tokenId?: string; projectId: string}\n): LoadState<string> | undefined {\n  const documentPreviewStore = useDocumentPreviewStore()\n  const crossProjectTokenStore = useCrossProjectTokenStore()\n\n  return useMemoObservable(() => {\n    return documentPreviewStore\n      .observePaths(\n        {\n          _type: 'reference',\n          _ref: crossProjectTokenStore.getTokenDocumentId({projectId, tokenId}),\n        },\n        ['token']\n      )\n      .pipe(\n        map((documentValue) => {\n          const value: Record<string, unknown> | undefined = isRecord(documentValue)\n            ? documentValue\n            : undefined\n\n          return {\n            status: 'loaded',\n            result: typeof value?.token === 'string' ? value?.token : undefined,\n          } as const\n        }),\n        startWith({status: 'loading'} as const)\n      )\n  }, [client, crossProjectTokenStore, documentPreviewStore, projectId, tokenId])\n}\n","import React, {useCallback, useMemo, useRef} from 'react'\nimport {\n  CrossDatasetReference,\n  CrossDatasetReferenceSchemaType,\n  Path,\n  ReferenceFilterOptions,\n  ReferenceFilterSearchOptions,\n  SanityDocument,\n} from '@sanity/types'\nimport {get} from '@sanity/util/paths'\nimport {from, throwError} from 'rxjs'\nimport {catchError, mergeMap} from 'rxjs/operators'\nimport {Box, Stack, Text, TextSkeleton} from '@sanity/ui'\nimport {DEFAULT_STUDIO_CLIENT_OPTIONS} from '../../../../studioClient'\nimport {CrossDatasetReferenceInput} from '../../../inputs/CrossDatasetReferenceInput'\nimport {Alert} from '../../../components/Alert'\nimport {useDocumentPreviewStore} from '../../../../datastores'\nimport {useClient, useProjectId} from '../../../../hooks'\nimport {FIXME, ObjectInputProps} from '../../../types'\nimport {useFormValue} from '../../../useFormValue'\nimport {search} from './datastores/search'\nimport {createGetReferenceInfo} from './datastores/getReferenceInfo'\nimport {useCrossProjectToken} from './datastores/useCrossProjectToken'\n\n// eslint-disable-next-line require-await\nasync function resolveUserDefinedFilter(\n  options: ReferenceFilterOptions | undefined,\n  document: SanityDocument,\n  valuePath: Path\n): Promise<ReferenceFilterSearchOptions> {\n  if (!options) {\n    return {}\n  }\n\n  if (typeof options.filter === 'function') {\n    const parentPath = valuePath.slice(0, -1)\n    const parent = get(document, parentPath) as Record<string, unknown>\n    return options.filter({document, parentPath, parent})\n  }\n\n  return {\n    filter: options.filter,\n    params: 'filterParams' in options ? options.filterParams : undefined,\n  }\n}\n\nexport type StudioCrossDatasetReferenceInputProps = ObjectInputProps<\n  CrossDatasetReference,\n  CrossDatasetReferenceSchemaType\n>\n\nfunction useValueRef<T>(value: T): {current: T} {\n  const ref = useRef(value)\n  ref.current = value\n  return ref\n}\n\ntype SearchError = {\n  message: string\n  details?: {\n    type: string\n    description: string\n  }\n}\n\nexport function StudioCrossDatasetReferenceInput(props: StudioCrossDatasetReferenceInputProps) {\n  const {path, schemaType} = props\n  const client = useClient(DEFAULT_STUDIO_CLIENT_OPTIONS)\n  const projectId = useProjectId()\n  const documentPreviewStore = useDocumentPreviewStore()\n\n  const isCurrentProject = projectId === schemaType.projectId\n  const loadableToken = useCrossProjectToken(client, {\n    projectId: schemaType.projectId,\n    tokenId: schemaType.tokenId,\n  })\n\n  const crossDatasetClient = useMemo(() => {\n    const token = isCurrentProject\n      ? undefined\n      : loadableToken?.status === 'loaded' && loadableToken.result\n\n    return (\n      client\n        .withConfig({\n          projectId: schemaType.projectId,\n          dataset: schemaType.dataset,\n          apiVersion: '2022-03-07',\n          token: token || undefined,\n          ignoreBrowserTokenWarning: true,\n        })\n\n        // seems like this is required to prevent this client from sometimes magically get mutated with a new projectId and dataset\n        .clone()\n    )\n  }, [client, isCurrentProject, loadableToken, schemaType.projectId, schemaType.dataset])\n\n  const documentValue = useFormValue([]) as FIXME\n  const documentRef = useValueRef(documentValue)\n\n  const handleSearch = useCallback(\n    (searchString: string) =>\n      from(resolveUserDefinedFilter(schemaType.options, documentRef.current, path)).pipe(\n        mergeMap(({filter, params}) =>\n          search(crossDatasetClient, searchString, schemaType, {\n            ...schemaType.options,\n            filter,\n            params,\n            tag: 'search.cross-dataset-reference',\n          })\n        ),\n\n        catchError((err: SearchError) => {\n          const isQueryError = err.details && err.details.type === 'queryParseError'\n          if (schemaType.options?.filter && isQueryError) {\n            err.message = `Invalid reference filter, please check the custom \"filter\" option`\n          }\n          return throwError(err)\n        })\n      ),\n\n    [crossDatasetClient, documentRef, path, schemaType]\n  )\n\n  const getReferenceInfo = useMemo(\n    () => createGetReferenceInfo({client: crossDatasetClient, documentPreviewStore}),\n    [crossDatasetClient, documentPreviewStore]\n  )\n\n  if (loadableToken?.status === 'loading') {\n    return (\n      <Box padding={2}>\n        <Stack space={2}>\n          <Stack space={2} padding={1}>\n            <TextSkeleton style={{maxWidth: 320}} radius={1} />\n            <TextSkeleton style={{maxWidth: 200}} radius={1} size={1} />\n          </Stack>\n        </Stack>\n      </Box>\n    )\n  }\n\n  if (!isCurrentProject && loadableToken?.status === 'loaded' && !loadableToken.result) {\n    return (\n      <Stack space={2} marginY={2}>\n        <Text size={1} weight=\"semibold\">\n          {schemaType.title}\n        </Text>\n        <Alert title=\"No cross dataset read token found\" size={1} muted>\n          <Stack space={3}>\n            <Text size={1}>\n              This cross dataset reference field requires a cross dataset token to be registered.\n              Please configure a token{' '}\n              {schemaType.tokenId ? (\n                <>\n                  with ID <b>{schemaType.tokenId}</b>\n                </>\n              ) : null}{' '}\n              for project <b>{schemaType.projectId}</b> that has read access to the{' '}\n              <b>{schemaType.dataset}</b>\n              -dataset.\n            </Text>\n            <Text size={1}>\n              See the documentation for{' '}\n              <a href=\"https://www.sanity.io/docs/cross-dataset-references\">\n                Cross Dataset References\n              </a>{' '}\n              for more details.\n            </Text>\n          </Stack>\n        </Alert>\n      </Stack>\n    )\n  }\n\n  return (\n    <CrossDatasetReferenceInput\n      {...props}\n      getReferenceInfo={getReferenceInfo}\n      onSearch={handleSearch}\n    />\n  )\n}\n","import React from 'react'\nimport {BooleanInput} from '../../inputs/BooleanInput'\nimport {EmailInput} from '../../inputs/EmailInput'\nimport {NumberInput} from '../../inputs/NumberInput'\nimport {ObjectInput} from '../../inputs/ObjectInput'\nimport {StringInput} from '../../inputs/StringInput'\nimport {DateTimeInput, DateInput} from '../../inputs/DateInputs'\nimport {TextInput} from '../../inputs/TextInput'\nimport {UrlInput} from '../../inputs/UrlInput'\nimport {SlugInput} from '../../inputs/Slug/SlugInput'\nimport {StudioArrayInput} from '../inputs/StudioArrayInput'\nimport {StudioImageInput} from '../inputs/StudioImageInput'\nimport {StudioFileInput} from '../inputs/StudioFileInput'\nimport {StudioCrossDatasetReferenceInput} from '../inputs/crossDatasetReference/StudioCrossDatasetReferenceInput'\nimport {FIXME} from '../../types'\n\nexport const defaultInputs: Record<string, React.ComponentType<FIXME>> = {\n  document: ObjectInput,\n  object: ObjectInput,\n  array: StudioArrayInput,\n  boolean: BooleanInput,\n  number: NumberInput,\n  text: TextInput,\n  email: EmailInput,\n  datetime: DateTimeInput,\n  date: DateInput,\n  url: UrlInput,\n  image: StudioImageInput,\n  file: StudioFileInput,\n  string: StringInput,\n  slug: SlugInput,\n  crossDatasetReference: StudioCrossDatasetReferenceInput,\n}\n","/* eslint-disable react/jsx-handler-names */\nimport {\n  ArraySchemaType,\n  isBooleanSchemaType,\n  NumberSchemaType,\n  ReferenceSchemaType,\n  SchemaType,\n  StringSchemaType,\n} from '@sanity/types'\nimport React from 'react'\nimport {FieldMember} from '../../store'\nimport {\n  ArrayFieldProps,\n  FieldProps,\n  FIXME,\n  InputProps,\n  ItemProps,\n  ObjectFieldProps,\n} from '../../types'\nimport * as is from '../../utils/is'\nimport {FormField, FormFieldSet} from '../../components/formField'\nimport {PreviewProps} from '../../../components/previews'\nimport {SanityPreview} from '../../../preview'\nimport {ChangeIndicator} from '../../../components/changeIndicators'\nimport {resolveReferenceInput} from './resolveReferenceInput'\nimport {resolveArrayInput} from './resolveArrayInput'\nimport {resolveStringInput} from './resolveStringInput'\nimport {resolveNumberInput} from './resolveNumberInput'\nimport {defaultInputs} from './defaultInputs'\n\nfunction resolveComponentFromTypeVariants(\n  type: SchemaType\n): React.ComponentType<FIXME> | undefined {\n  if (is.type('array', type)) {\n    return resolveArrayInput(type as ArraySchemaType)\n  }\n\n  if (is.type('reference', type)) {\n    return resolveReferenceInput(type as ReferenceSchemaType)\n  }\n\n  // String input with a select\n  if (is.type('string', type)) {\n    return resolveStringInput(type as StringSchemaType)\n  }\n\n  if (is.type('number', type)) {\n    return resolveNumberInput(type as NumberSchemaType)\n  }\n\n  return undefined\n}\n\nfunction getTypeChain(type: SchemaType | undefined, visited: Set<SchemaType>): SchemaType[] {\n  if (!type) return []\n  if (visited.has(type)) return []\n\n  visited.add(type)\n\n  const next = type.type ? getTypeChain(type.type, visited) : []\n  return [type, ...next]\n}\n\nexport function defaultResolveInputComponent(\n  schemaType: SchemaType\n): React.ComponentType<InputProps> {\n  if (schemaType.components?.input) return schemaType.components.input\n\n  const componentFromTypeVariants = resolveComponentFromTypeVariants(schemaType)\n  if (componentFromTypeVariants) {\n    return componentFromTypeVariants\n  }\n\n  const typeChain = getTypeChain(schemaType, new Set())\n  const deduped = typeChain.reduce((acc, type) => {\n    acc[type.name] = type\n    return acc\n  }, {} as Record<string, SchemaType>)\n\n  // using an object + Object.values to de-dupe the type chain by type name\n  const subType = Object.values(deduped).find((t) => defaultInputs[t.name])\n\n  if (subType) {\n    return defaultInputs[subType.name]\n  }\n\n  throw new Error(`Could not find input component for schema type \\`${schemaType.name}\\``)\n}\n\nfunction NoopField({children}: {children: React.ReactNode}) {\n  return <>{children}</>\n}\n\nfunction PrimitiveField(field: FieldProps) {\n  return (\n    <FormField\n      data-testid={`field-${field.inputId}`}\n      level={field.level}\n      title={field.title}\n      description={field.description}\n      validation={field.validation}\n      __unstable_presence={field.presence}\n    >\n      <ChangeIndicator\n        path={field.path}\n        hasFocus={Boolean(field.inputProps.focused)}\n        isChanged={field.inputProps.changed}\n      >\n        {field.children}\n      </ChangeIndicator>\n    </FormField>\n  )\n}\n\nfunction ObjectOrArrayField(field: ObjectFieldProps | ArrayFieldProps) {\n  return (\n    <FormFieldSet\n      data-testid={`field-${field.inputId}`}\n      level={field.level}\n      title={field.title}\n      description={field.description}\n      collapsed={field.collapsed}\n      collapsible={field.collapsible}\n      onCollapse={field.onCollapse}\n      onExpand={field.onExpand}\n      validation={field.validation}\n      __unstable_presence={field.presence}\n    >\n      {field.children}\n    </FormFieldSet>\n  )\n}\n\nfunction ImageOrFileField(field: ObjectFieldProps) {\n  // unless the hotspot tool dialog is open we want to show whoever is in there as the field presence\n  const hotspotField = field.inputProps.members.find(\n    (member): member is FieldMember => member.kind === 'field' && member.name === 'hotspot'\n  )\n  const presence = hotspotField?.open\n    ? field.presence\n    : field.presence.concat(hotspotField?.field.presence || [])\n\n  return (\n    <FormFieldSet\n      level={field.level}\n      title={field.title}\n      description={field.description}\n      collapsed={field.collapsed}\n      collapsible={field.collapsible}\n      onCollapse={field.onCollapse}\n      onExpand={field.onExpand}\n      validation={field.validation}\n      __unstable_presence={presence}\n    >\n      {field.children}\n    </FormFieldSet>\n  )\n}\n\nexport function defaultResolveFieldComponent(\n  schemaType: SchemaType\n): React.ComponentType<FieldProps> {\n  if (schemaType.components?.field) return schemaType.components.field\n\n  if (isBooleanSchemaType(schemaType)) {\n    return NoopField\n  }\n\n  if (getTypeChain(schemaType, new Set()).some((t) => t.name === 'image' || t.name === 'file')) {\n    return ImageOrFileField as React.ComponentType<FieldProps>\n  }\n\n  if (schemaType.jsonType !== 'object' && schemaType.jsonType !== 'array') {\n    return PrimitiveField\n  }\n\n  return ObjectOrArrayField as React.ComponentType<FieldProps>\n}\n\nexport function defaultResolveItemComponent(\n  schemaType: SchemaType\n): React.ComponentType<ItemProps> {\n  if (schemaType.components?.item) return schemaType.components.item\n\n  return NoopField\n}\n\nexport function defaultResolvePreviewComponent(): React.ComponentType<PreviewProps> {\n  return SanityPreview as any\n}\n","import {createElement} from 'react'\nimport {\n  RenderFieldCallback,\n  RenderInputCallback,\n  RenderItemCallback,\n  RenderPreviewCallback,\n} from '../types'\nimport {\n  defaultResolveFieldComponent,\n  defaultResolveInputComponent,\n  defaultResolveItemComponent,\n  defaultResolvePreviewComponent,\n} from './inputResolver/inputResolver'\n\nexport const defaultRenderField: RenderFieldCallback = (props) => {\n  return createElement(defaultResolveFieldComponent(props.schemaType), props)\n}\n\nexport const defaultRenderInput: RenderInputCallback = (props) => {\n  return createElement(defaultResolveInputComponent(props.schemaType), props)\n}\n\nexport const defaultRenderItem: RenderItemCallback = (props) => {\n  return createElement(defaultResolveItemComponent(props.schemaType), props)\n}\n\nexport const defaultRenderPreview: RenderPreviewCallback = (props) => {\n  return createElement(defaultResolvePreviewComponent(), props)\n}\n","import {FieldProps, RenderFieldCallback} from '../../form'\nimport {defaultRenderField} from '../../form/studio/defaults'\nimport {PluginOptions, SourceOptions} from '../types'\nimport {_RenderMiddleware} from './_types'\n\nfunction _collectMiddleware(\n  middlewares: _RenderMiddleware<FieldProps, RenderFieldCallback>[],\n  plugins: PluginOptions[]\n) {\n  for (const plugin of plugins) {\n    // Recursive\n    if (plugin.plugins) {\n      _collectMiddleware(middlewares, plugin.plugins)\n    }\n\n    if (plugin.form?.renderField) {\n      middlewares.push(plugin.form?.renderField)\n    }\n  }\n}\n\n/**\n * @internal\n */\nexport function _createRenderField(config: SourceOptions): RenderFieldCallback {\n  return (props) => {\n    const middlewares: _RenderMiddleware<FieldProps, RenderFieldCallback>[] = []\n\n    if (config.plugins) {\n      _collectMiddleware(middlewares, config.plugins)\n    }\n\n    if (config.form?.renderField) {\n      middlewares.push(config.form?.renderField)\n    }\n\n    // Initialize the callback chain\n    let next = defaultRenderField\n\n    for (const middleware of middlewares) {\n      const defaultRender = next\n\n      next = (fieldProps: FieldProps) => {\n        return middleware(fieldProps, defaultRender) || defaultRender(fieldProps)\n      }\n    }\n\n    return next(props)\n  }\n}\n","import {InputProps, RenderInputCallback} from '../../form'\nimport {defaultRenderInput} from '../../form/studio/defaults'\nimport {PluginOptions, SourceOptions} from '../types'\nimport {_RenderMiddleware} from './_types'\n\nfunction _collectMiddleware(\n  middlewares: _RenderMiddleware<InputProps, RenderInputCallback>[],\n  plugins: PluginOptions[]\n) {\n  for (const plugin of plugins) {\n    // Recursive\n    if (plugin.plugins) {\n      _collectMiddleware(middlewares, plugin.plugins)\n    }\n\n    if (plugin.form?.renderInput) {\n      middlewares.push(plugin.form?.renderInput)\n    }\n  }\n}\n\n/**\n * @internal\n */\nexport function _createRenderInput(config: SourceOptions): RenderInputCallback {\n  return (props) => {\n    const middlewares: _RenderMiddleware<InputProps, RenderInputCallback>[] = []\n\n    if (config.plugins) {\n      _collectMiddleware(middlewares, config.plugins)\n    }\n\n    if (config.form?.renderInput) {\n      middlewares.push(config.form?.renderInput)\n    }\n\n    // Initialize the callback chain\n    let next = defaultRenderInput\n\n    for (const middleware of middlewares) {\n      const defaultRender = next\n\n      next = (inputProps: InputProps) => {\n        return middleware(inputProps, defaultRender) || defaultRender(inputProps)\n      }\n    }\n\n    return next(props)\n  }\n}\n","import {ItemProps, RenderItemCallback} from '../../form'\nimport {defaultRenderItem} from '../../form/studio/defaults'\nimport {PluginOptions, SourceOptions} from '../types'\nimport {_RenderMiddleware} from './_types'\n\nfunction _collectMiddleware(\n  middlewares: _RenderMiddleware<ItemProps, RenderItemCallback>[],\n  plugins: PluginOptions[]\n) {\n  for (const plugin of plugins) {\n    // Recursive\n    if (plugin.plugins) {\n      _collectMiddleware(middlewares, plugin.plugins)\n    }\n\n    if (plugin.form?.renderItem) {\n      middlewares.push(plugin.form?.renderItem)\n    }\n  }\n}\n\n/**\n * @internal\n */\nexport function _createRenderItem(config: SourceOptions): RenderItemCallback {\n  return (props) => {\n    const middlewares: _RenderMiddleware<ItemProps, RenderItemCallback>[] = []\n\n    if (config.plugins) {\n      _collectMiddleware(middlewares, config.plugins)\n    }\n\n    if (config.form?.renderItem) {\n      middlewares.push(config.form?.renderItem)\n    }\n\n    // Initialize the callback chain\n    let next = defaultRenderItem\n\n    for (const middleware of middlewares) {\n      const defaultRender = next\n\n      next = (itemProps: ItemProps) => {\n        return middleware(itemProps, defaultRender) || defaultRender(itemProps)\n      }\n    }\n\n    return next(props)\n  }\n}\n","import {SchemaType} from '@sanity/types'\nimport {PreviewProps} from '../../components/previews'\nimport {RenderPreviewCallback} from '../../form'\nimport {defaultRenderPreview} from '../../form/studio/defaults'\nimport {PluginOptions, SourceOptions} from '../types'\nimport {_RenderMiddleware} from './_types'\n\nfunction _collectMiddleware(\n  middlewares: _RenderMiddleware<PreviewProps & {schemaType: SchemaType}, RenderPreviewCallback>[],\n  plugins: PluginOptions[]\n) {\n  for (const plugin of plugins) {\n    // Recursive\n    if (plugin.plugins) {\n      _collectMiddleware(middlewares, plugin.plugins)\n    }\n\n    if (plugin.form?.renderPreview) {\n      middlewares.push(plugin.form?.renderPreview)\n    }\n  }\n}\n\n/**\n * @internal\n */\nexport function _createRenderPreview(config: SourceOptions): RenderPreviewCallback {\n  return (props) => {\n    const middlewares: _RenderMiddleware<\n      PreviewProps & {schemaType: SchemaType},\n      RenderPreviewCallback\n    >[] = []\n\n    if (config.plugins) {\n      _collectMiddleware(middlewares, config.plugins)\n    }\n\n    if (config.form?.renderPreview) {\n      middlewares.push(config.form?.renderPreview)\n    }\n\n    // Initialize the callback chain\n    let next = defaultRenderPreview\n\n    for (const middleware of middlewares) {\n      const defaultRender = next\n\n      next = (previewProps: PreviewProps & {schemaType: SchemaType}) => {\n        return middleware(previewProps, defaultRender) || defaultRender(previewProps)\n      }\n    }\n\n    return next(props)\n  }\n}\n","/* eslint-disable max-nested-callbacks */\nimport type {SanityClient} from '@sanity/client'\nimport {map, shareReplay} from 'rxjs/operators'\nimport {CurrentUser, Schema} from '@sanity/types'\nimport {studioTheme} from '@sanity/ui'\nimport {startCase} from 'lodash'\nimport {fromUrl} from '@sanity/bifur-client'\nimport {createElement, isValidElement} from 'react'\nimport {isValidElementType} from 'react-is'\nimport {createSchema} from '../schema'\nimport {AuthStore, createAuthStore} from '../datastores'\nimport {InitialValueTemplateItem, Template, TemplateResponse} from '../templates'\nimport {isNonNullable} from '../util'\nimport {defaultFileAssetSources, defaultImageAssetSources} from '../form/defaults'\nimport {validateWorkspaces} from '../studio/workspaces/validateWorkspaces'\nimport {\n  Config,\n  PreparedConfig,\n  SingleWorkspace,\n  Source,\n  SourceClientOptions,\n  SourceOptions,\n  WorkspaceOptions,\n  WorkspaceSummary,\n} from './types'\nimport {\n  _documentLanguageFilterReducer,\n  documentActionsReducer,\n  documentBadgesReducer,\n  fileAssetSourceResolver,\n  imageAssetSourceResolver,\n  initialDocumentActions,\n  initialDocumentBadges,\n  initialLanguageFilter,\n  newDocumentOptionsResolver,\n  resolveProductionUrlReducer,\n  schemaTemplatesReducer,\n  schemaTypesReducer,\n  toolsReducer,\n} from './configPropertyReducers'\nimport {resolveConfigProperty} from './resolveConfigProperty'\nimport {ConfigResolutionError} from './ConfigResolutionError'\nimport {SchemaError} from './SchemaError'\nimport {createDefaultIcon} from './createDefaultIcon'\nimport {_createRenderField} from './form/_renderField'\nimport {_createRenderInput} from './form/_renderInput'\nimport {_createRenderItem} from './form/_renderItem'\nimport {_createRenderPreview} from './form/_renderPreview'\n\ntype InternalSource = WorkspaceSummary['__internal']['sources'][number]\n\nfunction normalizeLogo(\n  logo: React.ComponentType | React.ElementType | undefined\n): JSX.Element | undefined {\n  if (isValidElementType(logo)) return createElement(logo)\n  if (isValidElement(logo)) return logo\n  return undefined\n}\n\nfunction normalizeIcon(\n  icon: React.ComponentType | React.ElementType | undefined,\n  title: string,\n  subtitle = ''\n): JSX.Element {\n  if (isValidElementType(icon)) return createElement(icon)\n  if (isValidElement(icon)) return icon\n  return createDefaultIcon(title, subtitle)\n}\n\n/**\n * Takes in a config (created from the `createConfig` function) and returns\n * an array of `WorkspaceSummary`. Note: this only partially resolves a config.\n *\n * For usage inside the Studio, it's preferred to pull the pre-resolved\n * workspaces and sources via `useWorkspace` or `useSource`. For usage outside\n * the Studio or for testing, use `resolveConfig`.\n */\nexport function prepareConfig(config: Config): PreparedConfig {\n  const workspaceOptions: WorkspaceOptions[] | [SingleWorkspace] = Array.isArray(config)\n    ? config\n    : [config]\n\n  try {\n    validateWorkspaces({workspaces: workspaceOptions})\n  } catch (e) {\n    throw new ConfigResolutionError({\n      name: '',\n      type: 'workspace',\n      causes: [e.message],\n    })\n  }\n\n  const workspaces = workspaceOptions.map(\n    ({unstable_sources: nestedSources = [], ...rootSource}): WorkspaceSummary => {\n      const sources = [rootSource as SourceOptions, ...nestedSources]\n\n      const resolvedSources = sources.map((source): InternalSource => {\n        const projectId = source.projectId\n        const dataset = source.dataset\n\n        const auth = source.auth || createAuthStore({dataset, projectId})\n\n        let schemaTypes\n        try {\n          schemaTypes = resolveConfigProperty({\n            propertyName: 'schema.types',\n            config: source,\n            context: {projectId, dataset},\n            initialValue: [],\n            reducer: schemaTypesReducer,\n          })\n        } catch (e) {\n          throw new ConfigResolutionError({\n            name: source.name,\n            type: 'source',\n            causes: [e],\n          })\n        }\n\n        const schema = createSchema({\n          name: source.name,\n          types: schemaTypes,\n        })\n\n        const schemaValidationProblemGroups = schema._validation\n        const schemaErrors = schemaValidationProblemGroups?.filter((msg) =>\n          msg.problems.some((p) => p.severity === 'error')\n        )\n\n        if (schemaValidationProblemGroups && schemaErrors?.length) {\n          // TODO: consider using the `ConfigResolutionError`\n          throw new SchemaError(schema)\n        }\n\n        const source$ = auth.state.pipe(\n          map(({client, authenticated, currentUser}) => {\n            return resolveSource({\n              config: source,\n              client,\n              currentUser,\n              schema,\n              authenticated,\n              auth,\n            })\n          }),\n          shareReplay(1)\n        )\n\n        return Object.assign(source$, {\n          name: source.name,\n          projectId: source.projectId,\n          dataset: source.dataset,\n          title: source.title || startCase(source.name),\n          auth,\n          schema,\n        })\n      })\n\n      const title = rootSource.title || startCase(rootSource.name)\n\n      const workspaceSummary: WorkspaceSummary = {\n        type: 'workspace-summary',\n        auth: resolvedSources[0].auth,\n        basePath: rootSource.basePath || '/',\n        dataset: rootSource.dataset,\n        schema: resolvedSources[0].schema,\n        logo: normalizeLogo(rootSource.logo),\n        icon: normalizeIcon(\n          rootSource.icon,\n          title,\n          `${rootSource.projectId} ${rootSource.dataset}`\n        ),\n        name: rootSource.name || 'default',\n        projectId: rootSource.projectId,\n        theme: rootSource.theme || studioTheme,\n        title,\n        subtitle: rootSource.subtitle,\n        __internal: {\n          sources: resolvedSources,\n        },\n      }\n\n      return workspaceSummary\n    }\n  )\n\n  return {type: 'prepared-config', workspaces}\n}\n\ninterface ResolveSourceOptions {\n  config: SourceOptions\n  schema: Schema\n  client: SanityClient\n  currentUser: CurrentUser | null\n  authenticated: boolean\n  auth: AuthStore\n}\n\nfunction getBifurClient(client: SanityClient, auth: AuthStore) {\n  const bifurVersionedClient = client.withConfig({apiVersion: '2022-06-30'})\n  const dataset = bifurVersionedClient.config().dataset\n\n  const url = bifurVersionedClient.getUrl(`/socket/${dataset}`).replace(/^http/, 'ws')\n\n  const options = auth.token ? {token$: auth.token} : {}\n  return fromUrl(url, options)\n}\n\nfunction resolveSource({\n  config,\n  client,\n  currentUser,\n  schema,\n  authenticated,\n  auth,\n}: ResolveSourceOptions): Source {\n  const {dataset, projectId} = config\n  const bifur = getBifurClient(client, auth)\n  const errors: unknown[] = []\n  const clients: Record<string, SanityClient> = {}\n  const getClient = (options: SourceClientOptions): SanityClient => {\n    if (!options || !options.apiVersion) {\n      throw new Error('Missing required `apiVersion` option')\n    }\n\n    if (!clients[options.apiVersion]) {\n      clients[options.apiVersion] = client.withConfig(options)\n    }\n\n    return clients[options.apiVersion]\n  }\n\n  const context = {\n    client,\n    getClient,\n    currentUser,\n    dataset,\n    projectId,\n    schema,\n  }\n\n  // <TEMPORARY UGLY HACK TO PRINT DEPRECATION WARNINGS ON USE>\n  /* eslint-disable no-proto */\n  const wrappedClient = client as any\n  context.client = [...Object.keys(client), ...Object.keys(wrappedClient.__proto__)].reduce(\n    (acc, key) => {\n      const original = Object.hasOwnProperty.call(client, key)\n        ? wrappedClient[key]\n        : wrappedClient.__proto__[key]\n\n      return Object.defineProperty(acc, key, {\n        get() {\n          console.warn(\n            '`configContext.client` is deprecated and will be removed in the next release! Use `context.getClient({apiVersion: \"2021-06-07\"})` instead'\n          )\n          return original\n        },\n      })\n    },\n    {}\n  ) as any as SanityClient\n  /* eslint-enable no-proto */\n  // </TEMPORARY UGLY HACK TO PRINT DEPRECATION WARNINGS ON USE>\n\n  let templates!: Source['templates']\n  try {\n    templates = resolveConfigProperty({\n      config,\n      context,\n      propertyName: 'schema.templates',\n      reducer: schemaTemplatesReducer,\n      initialValue: schema\n        .getTypeNames()\n        .filter((typeName) => !/^sanity\\./.test(typeName))\n        .map((typeName) => schema.get(typeName))\n        .filter(isNonNullable)\n        .filter((schemaType) => schemaType.type?.name === 'document')\n        .map((schemaType) => {\n          const template: Template = {\n            id: schemaType.name,\n            schemaType: schemaType.name,\n            title: schemaType.title || schemaType.name,\n            icon: schemaType.icon,\n            value: schemaType.initialValue || {_type: schemaType.name},\n          }\n\n          return template\n        }),\n    })\n    // TODO: validate templates\n    // TODO: validate that each one has a unique template ID\n  } catch (e) {\n    errors.push(e)\n  }\n\n  let tools!: Source['tools']\n  try {\n    tools = resolveConfigProperty({\n      config,\n      context,\n      initialValue: [],\n      propertyName: 'tools',\n      reducer: toolsReducer,\n    })\n  } catch (e) {\n    errors.push(e)\n  }\n\n  const initialTemplatesResponses = templates\n    // filter out the ones with parameters to fill\n    .filter((template) => !template.parameters?.length)\n    .map(\n      (template): TemplateResponse => ({\n        templateId: template.id,\n        description: template.description,\n        icon: template.icon,\n        title: template.title,\n      })\n    )\n\n  const templateMap = templates.reduce((acc, template) => {\n    acc.set(template.id, template)\n    return acc\n  }, new Map<string, Template>())\n\n  // TODO: extract this function\n  const resolveNewDocumentOptions: Source['document']['resolveNewDocumentOptions'] = (\n    creationContext\n  ) => {\n    const {schemaType: schemaTypeName} = creationContext\n\n    const templateResponses = resolveConfigProperty({\n      config,\n      context: {...context, creationContext},\n      initialValue: initialTemplatesResponses,\n      propertyName: 'document.resolveNewDocumentOptions',\n      reducer: newDocumentOptionsResolver,\n    })\n\n    const templateErrors: unknown[] = []\n\n    // TODO: validate template responses\n    // ensure there is a matching template per each one\n    if (templateErrors.length) {\n      throw new ConfigResolutionError({\n        name: config.name,\n        // TODO: figure out this name\n        type: 'source',\n        causes: templateErrors,\n      })\n    }\n\n    return (\n      templateResponses\n        // take the template responses and transform them into the formal\n        // `InitialValueTemplateItem`\n        .map((response, index): InitialValueTemplateItem => {\n          const template = templateMap.get(response.templateId)\n          if (!template) {\n            throw new Error(`Could not find template with ID \\`${response.templateId}\\``)\n          }\n\n          const schemaType = schema.get(template.schemaType)\n\n          if (!schemaType) {\n            throw new Error(\n              `Could not find matching schema type \\`${template.schemaType}\\` for template \\`${template.id}\\``\n            )\n          }\n\n          const title = response.title || template.title\n          // Don't show the type name as subtitle if it's the same as the template name\n          const defaultSubtitle = schemaType?.title === title ? undefined : schemaType?.title\n\n          return {\n            id: `${response.templateId}-${index}`,\n            templateId: response.templateId,\n            type: 'initialValueTemplateItem',\n            title,\n            subtitle: response.subtitle || defaultSubtitle,\n            description: response.description || template.description,\n            icon: response.icon || template.icon || schemaType?.icon,\n            initialDocumentId: response.initialDocumentId,\n            parameters: response.parameters,\n            schemaType: template.schemaType,\n          }\n        })\n        .filter((item) => {\n          // if we are in a creationContext where there is no schema type,\n          // then keep everything\n          if (!schemaTypeName) return true\n\n          // else only keep the `schemaType`s that match the creationContext\n          return schemaTypeName === templateMap.get(item.templateId)?.schemaType\n        })\n    )\n  }\n\n  let staticInitialValueTemplateItems!: InitialValueTemplateItem[]\n  try {\n    staticInitialValueTemplateItems = resolveNewDocumentOptions({type: 'global'})\n  } catch (e) {\n    errors.push(e)\n  }\n\n  if (errors.length) {\n    throw new ConfigResolutionError({\n      name: config.name,\n      type: 'source',\n      causes: errors,\n    })\n  }\n\n  const source: Source = {\n    type: 'source',\n    name: config.name,\n    title: config.title || startCase(config.name),\n    schema,\n    getClient,\n    dataset,\n    projectId,\n    tools,\n    currentUser,\n    authenticated,\n    templates,\n    auth,\n    document: {\n      actions: (partialContext) =>\n        resolveConfigProperty({\n          config,\n          context: {...context, ...partialContext},\n          initialValue: initialDocumentActions,\n          propertyName: 'document.actions',\n          reducer: documentActionsReducer,\n        }),\n      badges: (partialContext) =>\n        resolveConfigProperty({\n          config,\n          context: {...context, ...partialContext},\n          initialValue: initialDocumentBadges,\n          propertyName: 'document.badges',\n          reducer: documentBadgesReducer,\n        }),\n      resolveProductionUrl: (partialContext) =>\n        resolveConfigProperty({\n          config,\n          context: {...context, ...partialContext},\n          initialValue: undefined,\n          propertyName: 'resolveProductionUrl',\n          asyncReducer: resolveProductionUrlReducer,\n        }),\n      resolveNewDocumentOptions,\n      unstable_languageFilter: (partialContext) =>\n        resolveConfigProperty({\n          config,\n          context: {...context, ...partialContext},\n          initialValue: initialLanguageFilter,\n          propertyName: 'document.unstable_languageFilter',\n          reducer: _documentLanguageFilterReducer,\n        }),\n    },\n    form: {\n      renderField: _createRenderField(config),\n      renderInput: _createRenderInput(config),\n      renderItem: _createRenderItem(config),\n      renderPreview: _createRenderPreview(config),\n      file: {\n        assetSources: resolveConfigProperty({\n          config,\n          context,\n          initialValue: defaultFileAssetSources,\n          propertyName: 'formBuilder.file.assetSources',\n          reducer: fileAssetSourceResolver,\n        }),\n        directUploads:\n          // TODO: consider refactoring this to `noDirectUploads` or similar\n          // default value for this is `true`\n          config.form?.file?.directUploads === undefined ? true : config.form.file.directUploads,\n      },\n      image: {\n        assetSources: resolveConfigProperty({\n          config,\n          context,\n          initialValue: defaultImageAssetSources,\n          propertyName: 'formBuilder.image.assetSources',\n          reducer: imageAssetSourceResolver,\n        }),\n        directUploads:\n          // TODO: consider refactoring this to `noDirectUploads` or similar\n          // default value for this is `true`\n          config.form?.file?.directUploads === undefined ? true : config.form.file.directUploads,\n      },\n    },\n\n    __internal: {\n      bifur,\n      staticInitialValueTemplateItems,\n    },\n  }\n\n  return source\n}\n"],"names":["SANITY_VERSION","slug","title","name","type","fields","hidden","geopoint","imageCrop","imageHotspot","assetSourceData","description","imageAsset","fieldsets","readOnly","fieldset","preview","select","id","mimeType","size","prepare","doc","path","split","slice","media","asset","_ref","subtitle","Number","toFixed","orderings","by","field","direction","imagePalette","imagePaletteSwatch","imageDimensions","imageMetadata","options","collapsable","fileAsset","isError","problem","severity","builtinTypes","createSchema","schemaDef","validated","validateSchema","types","getTypes","validation","groupProblems","hasErrors","some","group","problems","compiled","SchemaBuilder","compile","filter","Boolean","_validation","inferValidation","CorsOriginError","Error","constructor","projectId","useUnique","value","valueRef","useRef","isEqual","current","defaultArgsAreEqual","prev","next","length","i","shallowEquals","createHookFromObservableFactory","observableFactory","initialValue","argsAreEqual","initialLoadingTuple","asLoadingTuple","args$","pipe","distinctUntilChanged","switchMap","distinctArgs","concat","of","map","scan","prevValue","prevIsLoading","nextValue","nextIsLoading","tuple","catchError","error","useLoadableFromCreateLoadable","args","_args","tuple$","useAsObservable","result","useObservable","isNonNullable","DRAFTS_FOLDER","DRAFTS_PREFIX","isDraftId","startsWith","getIdPair","draftId","getDraftId","publishedId","getPublishedId","collate","documents","byId","reduce","res","_id","entry","get","_type","published","draft","set","Map","Array","from","values","removeDupes","isRecord","isArray","isString","ResizeObserver","document","window","Polyfill","createSharedResizeObserver","event","createPubSub","resizeObserver","entries","publish","observe","element","observer","unsubscribe","subscribe","find","e","target","unobserve","BUNDLED_DOC_TYPES","_isSanityDocumentTypeDefinition","def","includes","_isCustomDocumentTypeDefinition","GROQ_KEYWORDS","VALID_FIELD","fieldNeedsEscape","fieldName","test","escapeField","escapeFirst","isEmptyArray","joinPath","pathArray","pathSegment","isFirst","needsEscape","LOADING_STATE","isLoading","useLoadable","value$","initial","useMemoObservable","asLoadable","useThrottledCallback","callback","wait","throttledCallback","useMemo","throttle","useEffect","flush","supportsLocalStorage","key","localStorage","setItem","removeItem","err","memStore","getItem","createBroadcastChannel","namespace","storageEvents$","fromEvent","storageKey","broadcastedMessages$","Subject","messages$","merge","newValue","JSON","parse","shareReplay","broadcast","message","storage.setItem","stringify","storage.removeItem","messages","sidPattern","consumeSessionId","location","hash","sidParam","match","sid","indexOf","newHash","replace","newUrl","URL","href","history","replaceState","sessionId","GithubRoot","styled","svg","theme","fg","sanity","color","base","css","GithubLogo","jsx","width","height","xmlns","viewBox","children","d","GoogleLogo","jsxs","fill","CustomLogo","props","provider","logo","src","alt","providerLogos","google","github","custom","getProviders","client","mode","providers","customProviders","thirdPartyLogin","sso","request","uri","isOfficial","official","url","isSupported","Object","supported","createHrefForProvider","loginMethod","basePath","params","URLSearchParams","origin","createLoginComponent","getClient","redirectOnSingle","providerOptions","useClient","LoginComponent","setProviders","useState","setError","then","catch","redirectUrl","loading","Flex","align","gap","justify","padding","sizing","Text","muted","Spinner","Stack","space","Heading","index","Button","icon","as","text","getStorageKey","getToken","item","storage.getItem","token","console","clearToken","saveToken","time","Date","toISOString","getCurrentUser","broadcastToken","_a","user","withCredentials","tag","statusCode","config","invalidCorsConfig","isNetworkError","host","_createAuthStore","dataset","token$","startWith","state$","createClient","apiVersion","useCdn","requestTagPrefix","ignoreBrowserTokenWarning","allowReconfigure","defer","currentUser","authenticated","handleCallbackUrl","requestClient","method","query","logout","auth","state","fromEntries","sort","a","b","localeCompare","k","v","createAuthStore","memoize","catchWithCount","selector","input$","errors","errorOp","caught","push","tap","onOnline$","onOffline$","expBackoff","retryCount","Math","pow","CONNECTING","onRetry$","onRetry","observableCallback","createErrorStatus","isOffline","attemptNo","retryAt","createConnectionStatusStore","bifur","connectionStatus$","heartbeats","mergeMapTo","throwError","ts","lastHeartbeat","successiveErrorsCount","timeUntilRetry","min","getTime","expiry$","timer","navigator","onLine","initialErrorStatus","triggerRetry$","NEVER","takeUntil","take","TOKEN_DOCUMENT_ID_BASE","__tmp_wrap_crossProjectToken","_client","versionedClient","withConfig","fetchTokenDocument","observable","fetch","getTokenDocumentId","getProjectIdFromTokenDocumentId","fetchCrossProjectToken","fetchAllCrossProjectTokens","tokenId","join","tokenDoc","mergeMap","tokenDocs","toArray","MENU_BUTTON_POPOVER_PROPS","portal","constrainSize","CollapseOverflowMenu","disableRestoreFocusOnClose","menuButton","menuButtonProps","menuOptionsArray","onMenuClose","MenuButton","__unstable_disableRestoreFocusOnClose","onClose","popover","button","menu","Menu","c","collapsedProps","expandedProps","tooltipProps","tooltipText","dividerBefore","fontSize","selected","rest","React","Fragment","MenuDivider","MenuItem","pressed","ObserveElement","el","setEl","io","IntersectionObserver","disconnect","ref","DividerDiv","div","CollapseMenuDivider","FOCUS_RING_PADDING","OPTION_STYLE","OuterFlex","RootFlex","RowFlex","OptionObserveElement","OptionHiddenFlex","_isReactElement","node","CollapseMenu","forwardRef","childrenProp","collapsed","collapseText","rootEl","setRootEl","hiddenRowEl","setHiddenRowEl","rootRect","useElementRect","menuOptions","setMenuOptions","hasOverflow","scrollWidth","EllipsisVerticalIcon","intersectionOptions","root","threshold","rootMargin","Children","o","menuIsVisible","isInMenu","useCallback","childKey","handleIntersection","child","exists","isIntersecting","updatedOptions","items","modeProps","cloneElement","overflow","flex","Tooltip","disabled","content","Box","marginLeft","CollapseMenuButton","MUTATION_ATTRIBUTE_FILTER","FOCUSABLE","getFocusableElements","querySelectorAll","hasAttribute","getAttribute","useRovingFocus","initialFocus","loop","navigation","pause","rootElement","focusedIndex","setFocusedIndex","focusableElements","setFocusableElements","focusableLen","lastFocusableIndex","nextKey","prevKey","handleSetElements","els","handleFocus","handleKeyDown","focusPrev","preventDefault","prevIndex","focusNext","shiftKey","mo","MutationObserver","childList","subtree","attributeFilter","forEach","setAttribute","focus","onfocus","onblur","initialIndex","addEventListener","removeEventListener","ColorSchemeContext","createContext","ColorSchemeProvider","onSchemeChange","scheme","schemeProp","prefersDark","usePrefersDark","setScheme","nextScheme","colorScheme","Provider","ThemeProvider","studioTheme","useColorScheme","useContext","RouterContext","useRouter","router","isLeftClickEvent","isModifiedEvent","metaKey","altKey","ctrlKey","useLink","onClick","onClickProp","navigateUrl","isDefaultPrevented","useIntentLink","intent","resolveIntentLink","IntentLink","restProps","Link","_hasOWn","prototype","hasOwnProperty","hasOwn","call","bind","isEmpty","object","addScope","routerState","scope","scopedState","RouteScope","parent","resolvePathFromState","parent_resolvePathFromState","navigate","parent_navigate","nextState","nextStateScoped","nextScopedState","scopedRouter","RouterProvider","onNavigate","routerProp","stateProp","setState","stateRef","opts","intentName","parameters","payload","encode","navigateIntent","prevState","EMPTY_STATE","useStateLink","toIndex","StateLink","VALID_PARAM_SEGMENT","createSegment","segment","paramName","substring","addendum","_parseRoute","route","pathname","segments","raw","debug","Debug","arrayify","val","matchPath","parts","segmentsLength","isMatching","every","transform","toState","childState","childNode","mergedState","_resolveStateFromPath","pathMatch","createMatchResult","nodes","missing","remaining","_findMatchingRoutes","_state","requiredParams","seg","stateKeys","keys","consumedParams","intersection","missingParams","difference","remainingParams","remainingState","pick","matchingChild","_resolvePathFromState","relative","flatten","matchNode","toPath","decodeJsonParams","pathsegment","decodeURIComponent","atob","warn","encodeJsonParams","btoa","decodeParams","pair","encodeParams","encodeURIComponent","create","createRoute","routeScope","intents","routeIntents","normalizeChildren","isRoute","normalizeArgs","childrenOrOpts","routeOrOpts","createNode","scopeName","normalize","paths","acc","isRoot","TypeError","parsedRoute","_isRoute","decode","_path","isNotFound","getBasePath","getRedirectBase","useRouterState","identity","selectedState","withRouter","Component","WithRouter","displayName","ToolLink","tool","ToolCollapseMenu","activeToolName","tools","collapseMenuEl","setCollapseMenuEl","startCase","linkProps","UnknownIcon","ToolVerticalMenu","isVisible","PlugIcon","tabIndex","ToolMenu","context","isDrawerOpen","UserColorManagerContext","useUserColorManager","userColorManager","useUserColor","userId","manager","listen","empty","defaultCurrentUserHue","USER_COLOR_EXCLUDE_HUES","defaultHues","COLOR_HUES","hue","defaultColors","colors","background","hues","hex","border","tints","defaultAnonymousColor","gray","createUserColorManager","userColors","anonymousColor","currentUserColor","userColorKeys","subscriptions","previouslyAssigned","assignedCounts","counts","assigned","currentUserId","userStore","me","setCurrentUser","getUserHue","assignedHue","prevHue","hasUnusedColor","assignHue","preferredHue","getPreferredHue","getLeastUsedHue","subscription","getObservableColor","unassignHue","delete","getUnusedColor","colorHue","tieBreakerPreference","leastUses","Infinity","leastUsed","uses","Observable","subscriber","userColor","refCount","charCodeAt","abs","UserColorManagerProvider","managerFromProps","createMultiKeyWeakMap","rootMap","WeakMap","idCache","randomId","floor","random","toString","padStart","assignId","cachedId","arrangeKeys","Set","getDeep","firstKey","restOfKeys","setDeep","ResourceCacheContext","ResourceCacheProvider","resourceCache","namespaces","nullReplacer","dependencies","dependenciesWithoutNull","dep","namespaceMap","useResourceCache","cache","ActiveWorkspaceMatcherContext","WorkspacesContext","useWorkspaces","workspaces","WorkspacesProvider","prepareConfig","matchWorkspace","normalized","workspace","firstWorkspace","RegExp","escapeRegExp","workspaceSegments","commonBasePath","commonSegments","commonSegment","toLowerCase","createCommonBasePathRegex","first","createHistory","createMemoryHistory","createBrowserHistory","ActiveWorkspaceMatcher","LoadingComponent","NotFoundComponent","unstable_history","historyProp","activeWorkspace","setActiveWorkspace","notFound","setNotFound","pathname$","unlisten","setActiveWorkspaceName","workspaceName","foundWorkspace","defaultWorkspaceName","handleNavigateToDefaultWorkspace","__internal","onNavigateToDefaultWorkspace","useActiveWorkspace","StudioThemeProvider","LayerProvider","getGlobalScope","globalThis","self","global","globalScope","LoadingScreen","Card","TONES","warning","SegmentSpan","code","ErrorMessageText","SchemaProblemGroups","problemGroups","ret","problemGroup","isWarning","schemaType","getTypeInfo","radius","tone","marginRight","ErrorOutlineIcon","WarningOutlineIcon","weight","capitalize","marginTop","Breadcrumbs","separator","j","kind","_renderSegmentName","helpId","generateHelpUrl","rel","str","renderPath","reportWarnings","schema","groupsWithWarnings","groupCollapsed","log","groupEnd","SchemaErrorsScreen","groupsWithErrors","paddingY","paddingX","Container","NotFoundScreen","display","Inline","STATE_TITLES","MediaCard","createIcon","isValidElementType","createElement","isValidElement","WorkspacePreview","iconRight","iconComponent","iconRightComponent","textOverflow","paddingLeft","paddingRight","CheckmarkIcon","useWorkspaceAuthStates","combineLatest","workspacesDocsUrl","LINKS","StyledText","Layout","footer","header","borderTop","borderBottom","SanityLogo","link","WorkspaceAuth","authStates","selectedWorkspaceName","setSelectedWorkspaceName","selectedWorkspace","handleBack","ArrowLeftIcon","paddingBottom","paddingTop","omit","AddIcon","authState","handleSelectWorkspace","ChevronRightIcon","StyledMenu","FooterCard","WorkspaceMenuButton","popoverProps","SelectIcon","Label","AuthenticateScreen","ConfigErrorsScreen","getProviderTitle","NotAuthenticatedScreen","handleError","handleLogout","_b","providerTitle","providerHelp","Dialog","email","CorsOriginErrorScreen","corsUrl","handleRetry","reload","errorChannel","__sanityErrorChannel","isKnownError","SchemaError","StudioErrorBoundary","pushToast","useToast","stack","handleResetError","useHotModuleReload","msg","closable","duration","status","Code","ErrorBoundary","onCatch","attrs","createRouter","toolRoute","toolParams","getOrderedTools","pluginConfig","toolSwitcher","order","keyed","existing","toolIndex","tool1","tool2","toolA","toolB","indexA","indexB","resolveUrlStateWithDefaultTool","orderedTools","defaultTool","assign","makeBackwardsCompatible","resolveDefaultState","urlStateWithDefaultTool","resolveIntentState","currentState","intentState","currentTool","matchingTool","canHandleIntent","getIntentState","toolState","decodeUrlState","rootRouter","createRouterEventStream","maybeHandleIntent","prevEvent","currentEvent","redirectState","EMPTY","maybeRedirectDefaultState","defaultState","routerBasePath","mergeScan","WorkspaceContext","WorkspaceProvider","useWorkspace","SourceContext","SourceProvider","parentSource","unstable_sources","sources","source","s","useSource","isStateEvent","initialState","WorkspaceLoader","setWorkspace","handleNavigate","ConfigResolutionError","results","causes","rootSource","restOfSources","WorkspaceLoaderBoundary","ConfigErrorsComponent","AuthBoundary","AuthenticateComponent","NotAuthenticatedComponent","loggedIn","setLoggedIn","roles","Z_OFFSET","toast","Refractor","registerLanguage","bash","javascript","json","typescript","StudioProvider","unstable_noAuthBoundary","noAuthBoundary","ConditionalAuthBoundary","ToastProvider","zOffset","isDev","process","env","NODE_ENV","isProd","symbols","whitespace","LEGACY_TO_UI_AVATAR_SIZES","small","medium","large","nameToInitials","fullName","namesArray","charAt","toUpperCase","UserAvatar","withTooltip","TooltipUserAvatar","StaticUserAvatar","UserAvatarLoader","placement","style","animateArrowFrom","position","imageLoadError","setImageLoadError","imageUrl","Avatar","arrowPosition","initials","onImageLoadError","loadedProps","useUser","Root","Google","clipPath","GitHub","Saml","LoginProviderLogo","isSaml","logoName","SanityMonogram","AvatarBox","UserMenu","preventOverflow","handleToggleScheme","ChevronDownIcon","marginBottom","SunIcon","MoonIcon","CogIcon","LeaveIcon","PREVIEW_MEDIA_SIZE","block","blockImage","default","detail","inline","PREVIEW_ICON_SIZE","MediaWrapper","span","$dimensions","$layout","$radius","$responsive","iconSize","rem","Media","dimensions","layout","responsive","styles","className","renderMedia","mediaString","renderPreviewMedia","renderPreviewNode","fallbackNode","DEFAULT_MEDIA_DIMENSIONS","aspect","fit","dpr","getDevicePixelRatio","TitleSkeleton","TextSkeleton","animated","SubtitleSkeleton","DefaultPreview","isPlaceholder","rootClassName","classNames","hasSubtitle","statusNode","placeholder","Skeleton","heading","StatusBox","MediaSkeleton","DescriptionSkeleton","DescriptionText","fonts","textSize1","sizes","maxLines","maxHeight","lineHeight","DetailPreview","mediaDimensions","SIZE","STROKE_WIDTH","BgCircle","circle","dark","ProgressCircle","blue","CircularProgress","valueProp","max","circ","PI","offset","cx","cy","r","strokeDasharray","strokeDashoffset","Bar","LinearProgress","RootBox","MediaFlex","ProgressFlex","TooltipContentStack","MediaPreview","progress","withBorder","withRadius","STYLES_PADDER","tooltipContent","HeaderFlex","$ratio","getRatio","BlockImagePreview","actions","fallbackTitle","__unstable_checkered","BlockPreview","RootSpan","MediaSpan","TextSpan","forwardedAs","textFont","textSize","weights","InlinePreview","DEFAULT_MEDIA_DIMENSION","TemplatePreview","whiteSpace","InsufficientPermissionsMessage","operationLabel","plural","AccessDeniedIcon","array","sep","DocumentButton","TooltipContentBox","DisabledButtonWrapper","NewDocumentButton","newDocumentButtonEl","setNewDocumentButtonEl","open","setOpen","staticInitialValueTemplateItems","permissions","useTemplatePermissions","templateItems","keyedPermissions","hasNewDocumentOptions","canCreateDocument","t","granted","handleOpen","handleClose","handleLinkClick","ComposeIcon","cursor","onClickOutside","Grid","columns","template","templateId","dot","StatusButton","active","statusTone","selectable","bg","showDot","AvatarCard","PresenceMenuItem","memo","presence","lastActiveLocation","orderBy","locations","documentId","hasLink","LinkComponent","PathUtils","LinkIcon","MAX_AVATARS","AvatarStackCard","FooterStack","PresenceMenu","collapse","useGlobalPresence","hasPresence","UsersIcon","AvatarStack","maxLength","Layer","Backdrop","InnerCard","NavDrawer","isOpen","closeButtonElement","setCloseButtonElement","innerCardElement","setInnerCardElement","navbar","DefaultToolMenu","components","useGlobalKeyDown","shadow","CloseIcon","closeDrawer","isDocumentType","isSanityType","getSearchableTypes","getTypeNames","typeName","SPECIAL_CHARS","STRIP_EDGE_CHARS","tokenize","string","calculateScore","searchTerms","uniqueValueTerms","uniq","compact","words","toLower","uniqueSearchTerms","matches","all","union","fieldScore","applyWeights","searchSpec","hits","terms","specByType","keyBy","spec","hit","typeSpec","stories","pathSpec","idx","score","why","totalScore","rank","resultIndex","combinePaths","flow","toGroqParams","term","pathWithMapper","mapWith","createWeightedSearch","__experimental_search","combinedSearchPaths","configForType","opt","selections","constraint","selection","cfg","search","queryString","searchOpts","constraints","joinedPath","filters","includeDrafts","__types","__limit","limit","unique","sortBy","createSearch","searchClient","DEFAULT_STUDIO_CLIENT_OPTIONS","DEBOUNCE_VALUE","useDocumentSearchResults","useSchema","queryProp","paramsSubject","asObservable","share","sub","StyledCard","SearchFullscreenContent","Portal","PreviewCardContext","usePreviewCard","PreviewCard","PRESENCE_MENU_POPOVER_PROPS","$selected","getTooltipText","DocumentPreviewPresence","useTheme","invertedScheme","uniqueUsers","MAX_AVATARS_DOCK","DEFAULT_MAX_AVATARS_FIELDS","AVATAR_DISTANCE","AVATAR_SIZE","AVATAR_ARROW_HEIGHT","INTERSECTION_THRESHOLDS","INTERSECTION_ELEMENT_PADDING","SNAP_TO_DOCK_DISTANCE_TOP","SNAP_TO_DOCK_DISTANCE_BOTTOM","SLIDE_RIGHT_THRESHOLD_TOP","SLIDE_RIGHT_THRESHOLD_BOTTOM","DEBUG","splitRight","indexFromMax","FlexWrapper","InnerBox","FormFieldPresenceContext","PresenceTooltip","isFunc","read","noop","createUseReporter","Context","useReporter","is","add","update","remove","previous","useLayoutEffect","createStore","reportedValues","createPubsub","debouncedPublish","debounce","trailing","has","didWarn","useReporterGuard","useReportedValueGuard","useSubscribeGuard","DEFAULT_CONTEXT","getNextId","createScope","useReportedValues","setValues","Tracker","store","useAutoIdReporter","FieldPresence","FieldPresenceWithOverlay","contextPresence","maxAvatars","useId","minWidth","minHeight","FieldPresenceWithoutOverlay","FieldPresenceInner","calcAvatarStackWidth","len","uniquePresence","uniqBy","sorted","_presence","lastActiveAt","visible","avatars","reverse","_visible","AvatarCounter","count","maxWidth","currWidth","av","transitionProperty","transitionDuration","transitionTimingFunction","zIndex","createIntersectionObserver","entries$","intersectionObserver","WithIntersection","onIntersection","RootWrapper","OverlayWrapper","RegionWrapper","TopRegionWrapper","$debug","margins","MiddleRegionWrapper","BottomRegionWrapper","toPx","num","negate","RegionsWithIntersections","regions","render","marginsProp","overlayRef","intersections","setIntersections","top","bottom","regionsWithIntersectionDetails","region","boundsBottom","boundsTop","boundingClientRect","aboveTop","belowBottom","distanceTop","intersectionRect","distanceBottom","offsetWidth","forceWidth","rect","left","ITEM_TRANSITION","withSpacerHeight","withIntersection","_regionsWithIntersectionDetails","prevRect","prevBottom","spacerHeight","orderByTop","plus","sum","regionsWithSpacerHeight","grouped","inside","groupBy","_withSpacerHeight","grp","indent","w","_withIntersection","Spacer","DEFAULT_MARGINS","getOffsetsTo","scrollTop","offsetTop","offsetLeft","offsetParent","HTMLElement","getRelativeRect","offsetHeight","regionsWithComputedRects","StickyOverlay","EMPTY_ARRAY","renderCallback","containerWidth","topSpacing","n","bottomSpacing","_counts","nearTop","nearBottom","PresenceDock","closeCount","PresenceInside","dir","allPresenceItems","topMargin","rightMargin","bottomMargin","leftMargin","leftOffset","margin","flexDirection","alignItems","originalLeft","diffRight","pointerEvents","DebugValue","PassThrough","OverlayEnabled","OverlayDisabled","PresenceOverlay","_extractUploadState","_upload","restValue","_resolveUploadValue","initiated","updated","fileName","file","fileType","previewImage","_previewComponents","FallbackIcon","DocumentIcon","SanityDefaultPreview","descriptionProp","mediaProp","subtitleProp","titleProp","imageBuilder","imageUrlBuilder","component","String","isImage","referrerPolicy","image","renderIcon","isReference","useDocumentPreview","enabled","ordering","previewValue","observeForPreview","useDocumentPreviewStore","setValue","snapshotEvent$","nextError","snapshot","resize$","scroll$","passive","capture","orientationChange$","ROOT_MARGIN_PX","isIntersectionObserverSupported","IntersectionObserverEntry","defineProperty","intersectionRatio","intersectionObservableFor","createIntersectionObserverBased","createLegacyBased","intersectionObserverEntriesSubject","ev","getViewport","right","innerWidth","innerHeight","intersects","viewport","inViewport","getBoundingClientRect","isElementInViewport","observableOf","visibilityChange$","useVisibility","hideDelay","setVisible","isDocumentVisible$","Document","inViewport$","visible$","isDocumentVisible","delay","_HIDE_DELAY","_resolvePreviewComponent","SanityPreview","styleProp","setElement","isPTE","visibility","setRef","refValue","getPreviewPaths","INCLUDE_FIELDS_QUERY","INCLUDE_FIELDS","AVAILABILITY_READABLE","available","reason","AVAILABILITY_PERMISSION_DENIED","AVAILABILITY_NOT_FOUND","INVALID_PREVIEW_FALLBACK","isPortableTextArray","blocks","isBlock","extractTextFromBlocks","firstBlock","isSpan","keysOf","PRESERVE_KEYS","errorCollector","errorsByType","getAll","clear","reportErrors","uniqueErrors","errorCount","uniqued","hasPrepare","isRenderable","assignType","inspect","FIELD_NAME_VALIDATORS","date","prefixType","ellipse","prefix","validateFieldValue","fieldValue","validator","validatePreparedValue","preparedValue","isPlainObject","validateReturnedPreview","returnValue","defaultPrepare","invokePrepare","viewOptions","withErrors","selectedValue","hasEnumListOptions","listOptions","list","getListOptions","option","isTitledListValue","prepareForPreview","rawValue","hasCustomPrepare","targetKeys","typeWithFields","targetFieldName","valueField","f","selectedOption","prepareResult","returnValueResult","setKey","keyObservables","isObservable","observableFrom","combineAll","pairs","mergeAll","createEmpty","resolveMissingHeads","observePaths","observeFields","apiConfig","currentValue","_weak","_dataset","_projectId","_strengthenOnPublish","pathsWithMissingHeads","nextHeads","refApiConfig","leads","head","tail","tails","normalizePaths","createPathObserver","createPreviewObserver","observeDocumentTypeFromId","isCrossDatasetReferenceSchemaType","isCrossDatasetReference","refType","to","toType","isReferenceSchemaType","debounceCollect","fn","queue","debounced","obs","clearTimeout","setTimeout","queueItem","completed","currentlyFlushingQueue","queueItemIds","collectedArgs","complete","combineSelections","output","ids","stringifyId","maybeEscape","toSubQuery","allFields","toQuery","combinedSelections","reassemble","queryResult","reprojected","subResult","resultIdx","found","hasEqualFields","otherObject","isUniqueBy","itemSelector","prevItem","currItem","create_preview_observeFields","crossProjectTokenStore","_globalListener","getGlobalEvents","allEvents$","events","includeResult","welcome$","publishReplay","mutations$","globalEvents","fetchAllDocumentPathsWith","headers","fetchAllDocumentPath","fetchDocumentPathsFast","fetchDocumentPathsSlow","currentDatasetListenFields","CACHE","getBatchFetcherForDataset","fetchAll","CROSS_DATASET_PREVIEW_POLL_INTERVAL","visiblePoll$","visibilityState","crossDatasetListenFields","batchFetcher","createCachedFieldObserver","latest","changes$","cachedObserveFields","cacheKey","existingObservers","missingFields","cachedFieldObserver","cachedFieldObservers","cached","snapshots","_rev","pickFrom","objects","getFirstFieldValue","MAX_DOCUMENT_ID_CHUNK_SIZE","chunkDocumentIds","documentIds","chunk","chunkSize","chunks","create_preview_availability","observeDocumentPairAvailability","observeDocumentAvailability","draftReadability","publishedReadability","hasRev","fetchDocumentReadability","uniqueIds","fetchDocumentReadabilityChunked","requestOptions","getDataUrl","excludeContent","response","omitted","omittedEntry","create_preview_documentPair","ALWAYS_INCLUDED_SNAPSHOT_PATHS","observePathsDocumentPair","availability","snapshotPaths","draftSnapshot","publishedSnapshot","createDocumentPreviewStore","__proxy_observePaths","unstable_observeDocumentPairAvailability","unstable_observePathsDocumentPair","SearchItem","documentType","documentPresence","useDocumentPresence","ResultsPopover","Popover","SearchPopoverContent","arrow","matchReferenceWidth","filterOption","SearchField","fullScreen","onSearchItemClick","portalElement","relatedElements","setSearchInputElement","setQuery","handleClickItem","renderOption","data","renderPopoverFullscreen","renderPopover","referenceElement","inputElement","autoComplete","Autocomplete","SearchIcon","listBox","onQueryChange","PortalProvider","listStyles","SpaceBox","ListBoxOuter","ListBox","ImageCard","$aspectRatio","$lqip","Image","project","getProject","urlBuilder","auto","caption","lqip","metadata","aspectRatio","marginY","language","h1","h2","h3","h4","h5","h6","normal","bullet","number","listItem","PortableTextContent","PortableText","LABELS","bugfix","feature","ChangelogItem","changeType","label","ChangelogList","changeItems","isLatest","version","features","bugfixes","bugFixesDescription","flat","Badge","change","StickyBox","ChangelogDialog","changelog","currentVersion","dialogProps","latestVersion","changelogWithChangeItems","hasChangelog","showDivider","sanityModuleVersions","CACHED_LOOKUPS","checkModuleStatus","moduleVersions","getInstalledModules","buildQueryString","hashQuery","m","request$","installed","versions","pkg","useModuleStatus","moduleStatus$","COMMANDS","Icon","ToggleArrowRightIcon","ChangelogAccordion","defaultOpen","handleClick","role","ChangelogButton","buttonElement","setButtonElement","isUpToDate","PackageIcon","ConfigIssuesButton","dialogId","isDialogOpen","setDialogOpen","RootLayer","SearchCard","LeftFlex","Navbar","fullscreenSearchPortalEl","onSearchOpenChange","rootHref","handleRootClick","mediaIndex","useMediaIndex","searchOpen","setSearchOpen","drawerOpen","setDrawerOpen","routerStateRef","workspaceNameRef","drawerButtonEl","setDrawerButtonEl","searchInputElement","searchOpenButtonEl","setSearchOpenButtonEl","searchCloseButtonEl","setSearchCloseButtonEl","shouldRender","brandingCenter","collapsedPresenceMenu","loginStatus","searchFullscreen","configIssues","formattedName","handleCloseSearch","handleOpenSearch","handleCloseDrawer","handleOpenDrawer","rootLinkContent","brandingComponent","searchRelatedElements","MenuIcon","borderRight","marginX","NoToolsScreen","ToolNotFoundScreen","toolName","SearchFullscreenPortalCard","StudioLayout","activeTool","toolError","setToolError","setFullscreenSearchPortalEl","documentTitle","mainTitle","handleSearchOpenChange","resetToolError","info","componentStack","Suspense","fallback","LoadingTool","clientOptions","useDataset","useProjectId","useTemplates","templates","FIVE_SECONDS","TWENTY_SECONDS","ONE_MINUTE","ONE_HOUR","useTimeAgo","minimal","agoSuffix","resolved","setResolved","formatRelativeTime","isFinite","refreshInterval","setInterval","clearInterval","timestamp","parsedDate","now","diffMonths","differenceInMonths","diffYears","differenceInYears","format","diffWeeks","differenceInWeeks","weekSuffix","pluralize","diffDays","differenceInDays","daysSuffix","daysSince","diffHours","differenceInHours","hoursSuffix","diffMins","differenceInMinutes","minsSuffix","diffSeconds","differenceInSeconds","secsSuffix","INITIAL","useConnectionState","publishedDocId","docTypeName","documentStore","useDocumentStore","documentEvents","eventType","isConnected","mapTo","useDocumentOperation","operations$","editOperations","useDocumentOperationEvent","operationEvents","useEditState","editState","SYNCING","isSyncing","NOT_SYNCING","useSyncState","consistencyStatus","isConsistent","isValidating","useValidationStatus","getUpdatedSnapshot","bufferedDocument","LOCAL","HEAD","_updatedAt","toSnapshotEvent","getDocument","createObservableBufferedDocument","listenerEvent$","commitMutations","actions$","consistency$","BehaviorSubject","rebase$","remoteMutations","createInitialBufferedDocument","initialSnapshot","BufferedDocument","onMutation","mutation","remote","mutations","onRemoteMutation","transactionId","author","effects","onRebase","edge","nextRemoteMutations","localMutations","onConsistencyChanged","commitHandler","resultRev","success","isBadRequest","cancel","failure","Promise","reject","currentBufferedDocument$","listenerEvent","commit","snapshotAfterSync$","withLatestFrom","mutationEvent","arrive","Mutation","actionHandler$","action","emitAction","addMutations","addMutation","snapshot$","remoteSnapshot$","updates$","createBufferedDocument","prepareDoc","DELETE","patch","patches","createIfNotExists","createOrReplace","mutate","getPairListener","idPair","effectFormat","concatMap","fetchInitialDocumentSnapshots","createSnapshotEvent","getDocuments","isEventForDocId","dataRequest","returnDocuments","setVersion","checkoutPair","listenerEvents$","reconnect$","mut","keyGen","MEMO","memoizedPair","_typeName","isSnapshotEvent","withSnapshots","snapshots$","snapshotPair","operationArgs","ctx","_ctx","isLiveEditEnabled","liveEdit","ready","del","execute","tx","transaction","skipCrossDatasetReferenceValidation","strengthenOnPublish","obj","weak","unset","ifRevisionID","discardChanges","unpublish","omitProps","duplicate","dupeId","restore","fromRevision","historyStore","targetId","draftIsConsistent","publishedIsConsistent","maybeObservable","operationImpls","operationName","operationArguments","extraArgs","operation","last","operationCalls$","emitOperation","REQUIRES_CONSISTENCY","listenerCache","getOperationEvents","result$","op","groups$","requiresConsistency","isConsistent$","ready$","AUTOCOMMIT_INTERVAL","autoCommit$","throttleTime","asyncScheduler","leading","listener","createOperationGuard","opName","GUARDED","createEmitter","executeArgs","wrap","createOperationsAPI","remoteSnapshots","INITIAL_VALIDATION_STATUS","findReferenceIds","reduceJSON","listenDocumentExists","previewStore","getDocumentExists","documentPreviewStore","toPromise","document$","debounceTime","referenceIds$","curr","referencedDocumentUpdate$","idSet","currKeys","nextKeys","markers","validateDocument","operationResults$","operationArgs$","filterResponse","isWelcomeEvent","listenQuery","fetchQuery","listenerQuery","fetchOnce$","events$","mutationAndReconnect$","partition","isRelevantEvent","transitions","transition","exhaustMapToWithTrailing","resolveTypeForDocument","specifiedType","ALLOWED_REF_PROPS","quote","validateInitialObjectValue","contextError","validateValue","parentIsArray","pathToString","_key","randomKey","validateReference","disallowed","deepAssign","sourceVal","targetVal","isBuilder","serialize","resolveValue","initialValueOpt","resolveInitialValue","schemaTypeName","resolvedValue","resolveInitialValueForType","DEFAULT_MAX_RECURSION_DEPTH","getItemType","arrayType","itemTypeName","resolveTypeName","memberType","maxDepth","resolve","isObjectSchemaType","resolveInitialObjectValue","isArraySchemaType","resolveInitialArrayValue","initialArray","initialItem","itemType","initialObject","fieldValues","initialFieldValue","merged","LOADING_MSG","getInitialValueStream","initialValueTemplates","draft$","published$","templateName","isResolving","initialValueWithParams$","templateParams","resolveError","getIdPairFromPublished","createDocumentStore","caches","ops","isLoaded","useDocumentType","isResolved","SYNC_RESOLVED_STATE","resolvedState","setDocumentType","useDocumentValues","documentValues$","useUserViaUserStore","getUser","useUserStore","useCurrentUser","createUserStore","userLoader","DataLoader","userIds","users","batchScheduleFn","cb","raf","userFromCurrentUser","profileImage","prime","load","getUsers","loadMany","useInitialValue","templateParamsRaw","useInitialValueResolverContext","defaultValue","initialValueOptions","initialValueMsg$","useResolveInitialValueForType","initialValueContext","getSchemaType","getPairPermissions","grantsStore","permission","effectiveVersion","effectiveVersionType","checkDocumentPermission","getDocumentPairPermissions","pairPermissions","permissionResults","permissionResult","useDocumentPairPermissionsFromHookFactory","useDocumentPairPermissions","useGrantsStore","getDocumentValuePermissions","useDocumentValuePermissionsFromHookFactory","useDocumentValuePermissions","getTemplatePermissions","resolvedInitialValue","promise","initialDocumentId","useTemplatePermissionsFromHookFactory","DEBUG_PREFIX","hashchange$","debugParams$","p","param","debugRolesParam$","arg","trim","administrator","editor","developer","contributor","viewer","requiresApproval","restricted","DEBUG_ROLE_GRANTS_MAP","grants.administrator","grants.editor","grants.developer","grants.contributor","grants.viewer","grants.restricted","grants.requiresApproval","write","debugGrants$","flatMap","roleName","getDatasetGrants","grants","getParams","PARSED_FILTERS_MEMO","matchesFilter","parsed","evaluate","createGrantsStore","datasetGrants$","currentUserDatasetGrants","debugGrants","refCountDelay","grantsPermissionOn","matchingGrants","grant","foundMatch","getJsonStream","Authorization","credentials","getStream","body","reader","cancelled","ReadableStream","start","controller","getReader","decoder","TextDecoder","buffer","processResult","done","close","enqueue","stream","lines","line","emptyVersionState","hasAttrs","rev","aligned","findIndex","evt","startFromSnapshot","Aligner","timeline","earliestTransactionId","_states","appendRemoteSnapshotEvent","_maybeInvalidateHistory","_apply","addRemoteMutation","prependHistoryEvent","acceptsHistory","_alignAtIndex","addTranslogEntry","didReachEarliestEntry","isAligned","_isComplete","currentDocument","mutEvt","applyPatch","apply","reset","Reconstruction","end","same","endAttributes","getAttrs","endDocument","_endDocument","replayBackwardsUntil","startAttributes","startDocument","_startDocument","replayBackwardsBetween","diff","_diff","calculateDiff","TRANSLOG_ENTRY_LIMIT","TimelineController","selectionState","_fetchMore","_fetchAtLeast","_isRunning","_didErr","_since","_sinceTime","_revTime","handler","_aligner","markChange","clearRange","setRange","since","setRevTime","setSinceTime","targetRev","lastChunk","setReconstruction","setLoadMore","flag","sinceTime","revTime","realRevChunk","onOlderRevision","changesPanelActive","findRangeForNewRev","revTimeId","isLatestChunk","createTimeId","sinceChunk","findRangeForNewSince","revChunk","parseTimeId","findLastPublishedBefore","sinceAttributes","_reconstruction","displayed","currentDiff","currentObjectDiff","handleRemoteMutation","tick","shouldFetchMore","reachedEarliestEntry","chunkCount","fetchMoreTransactions","queryParams","tid","getUrl","updateChunks","createObservableController","innerController","historyController","isSameAnnotation","ArrayContentWrapper","annotation","extractor","elements","at","input","wrapValue","annotationAt","meta","metas","fromMeta","ObjectContentWrapper","StringContentWrapper","sliceAnnotation","lst","part","subStart","subEnd","fromValue","extractAnnotationForFromInput","firstChunk","annotationForTransactionIndex","transactionIndex","extractAnnotationForToInput","chunkIdx","transactionByIndex","chunkByTransactionIndex","diffValue","fromRaw","toRaw","fromInput","endMeta","toInput","startMeta","diffInput","TwoEndedArray","_postive","_negative","addToEnd","elem","addToBeginning","mergeAtEnd","merger","lastIdx","mergeAtBeginning","firstIdx","removeFromEnd","shift","pop","canMergeEdit","CHUNK_WINDOW","isWithinMergeWindow","mergeChunk","draftState","combineState","publishedState","endTimestamp","startTimestamp","authors","getChunkState","effect","modified","deleted","isDeletePatch","getChunkType","draftEffect","publishedEffect","chunkFromTransaction","modifiedDraft","modifiedPublished","draftDeleted","publishedDeleted","Timeline","_transactions","_chunks","_possiblePendingTransactions","enableTrace","_trace","__sanityTimelineTrace","mapChunks","mapper","_recreateTransactionsFrom","pending","_invalidateTransactionFrom","_removeInvalidatedChunks","_addChunksFromTransactions","_createInitialChunk","nextTransactionToChunk","firstTransactionChunked","firstTx","initialChunk","timestampStr","chunkId","currentChunk","valueOf","startChunkIdx","revert","initialDoc","finalDoc","draftValue","incremental","publishedValue","getValue","initialAttributes","preDraftValue","prePublishedValue","didHaveDriaft","getType","haveDraft","havePublished","rebaseValue","finalValue","finalAttributes","documentRevisionCache","getHistory","revision","clientConfig","getDocumentAtRevision","getTransactions","includeIdentifiedDocumentsOnly","transactions","getAllRefIds","jsonReduce","jsonMap","mapFn","mappedValue","mapRefNodes","removeMissingReferences","existingIds","refNode","documentExists","targetDocumentId","documentAtRevision","existingIdsQuery","refId","restoredDraft","createHistoryStore","getTimeline","getTimelineController","USERIDS","PATHS","mock$","sample","handleIncomingMessage","session","createBifurTransport","incomingEvents$","dispatchMessage","KEY","generate","nanoid","getSessionId","sessionStorage","setSessionId","SESSION_ID","__tmp_wrap_presenceStore","connectionStatusStore","presenceEvents$","sendMessage","currentLocation$","locationChange$","setLocation","nextLocation","reportLocations","requestRollCall","rollCallRequests$","REPORT_MIN_INTERVAL","reportLocationInterval$","reportLocation$","auditTime","myRollCall$","connectionChange$","statusType","debugPresenceParam$","useMock$","switchMapTo","debugIntrospect$","syncEvent$","stateEventToSession","stateEvent","states$","allSessions$","keyedSessions","sessions","sess","userSessionPairHasUser","bufferSize","globalPresence$","userAndSessions","debugIntrospect","userAndSession","isCurrent","setPresence","presenceStore","usePresenceStore","createProjectStore","getDatasets","tryParse","defValue","localStorageBackend","DB","memoryBackend","testKey","resolveBackend","createSettingsStore","storageBackend","set$","prefixNamespace","ns","forNamespace","forKey","namespacedKey","useHistoryStore","useCrossProjectTokenStore","useConnectionStatusStore","useProjectStore","projectStore","useSettingsStore","settingsStore","FullscreenLayer","FullscreenSpinner","WithReferringDocuments","withPropsStream","connect","_WithReferringDocuments","receivedProps$","receivedProps","referringDocuments","docId","docs","SpinnerWithText","DocumentList","assetType","hasResults","filenamePlaceholder","originalFilename","DocumentLink","STYLE_ASSET_IMAGE","objectFit","objectPosition","STYLE_CONFIRM_CARD","gridColumn","alignSelf","justifyContent","STYLE_IMAGE_WRAPPER","ConfirmMessage","MODE_CONFIRM_DELETE","MODE_LIST_USAGE","AssetUsageDialog","InnerAssetUsageDialog","assetIsLoading","isDeleting","onDelete","isListMode","defaultHeaderTitle","canDelete","setCanDelete","isLoadingParent","setIsLoadingParent","publishedDocuments","setPublishedDocuments","showActionFooter","showDocumentList","noPaddingOnStack","TrashIcon","drafts","documentsWithoutDrafts","__unstable_autoFocus","AssetMenu","isSelected","onAction","triggerButtonMode","triggerButtonTone","DPI","devicePixelRatio","round","img","MenuContainer","AssetThumb","deleteRef$","onKeyPress","onDeleteFinished","showUsageDialog","setShowUsageDialog","showDeleteDialog","setShowDeleteDialog","setIsDeleting","handleConfirmDelete","handleDialogClose","handleToggleUsageDialog","handleDeleteError","handleDeleteSuccess","handleDeleteAsset","handleMenuAction","imgH","BYTE_UNITS","BIBYTE_UNITS","BIT_UNITS","BIBIT_UNITS","toLocaleString","locale","prettyBytes","bits","binary","signed","minimumFractionDigits","maximumFractionDigits","UNITS","isNegative","localeOptions","numberString","exponent","log10","toPrecision","unit","MIME_TYPES","convertMimeTypeToSomethingNice","formatMimeType","CardIconWrapper","CustomFlex","CustomText","CustomCard","RowButton","STYLES_ROW_CARD","STYLES_ICON_CARD","flexShrink","STYLES_BUTTON_TEXT","STYLES_ASSETMENU_WRAPPER","DISABLED_DELETE_TITLE","AssetRow","setIsOpen","isMobile","_createdAt","formattedTime","formattedMimeType","formattedSize","showTooltip","handleToggleOpen","gridTemplateColumns","opacity","ChevronUpIcon","fallbackPlacements","dateTime","STYLES_FILENAME","STYLES_GRID","TableList","assets","selectedAssets","PER_PAGE","ASSET_TYPE_IMAGE","ASSET_TYPE_FILE","buildQuery","ThumbGrid","CardLoadMore","DefaultAssetSource","_elementId","uniqueId","currentPageNumber","fetch$","setAssets","isLastPage","setIsLastPage","hasResetAutoFocus","setHasResetFocus","setIsLoading","dialogHeaderTitle","onSelect","fetchPage","pageNumber","isImageAssetType","assetTypeParam","handleDeleteFinished","selectedSource","handleItemClick","currentTarget","handleItemKeyPress","handleFetchNextPage","renderedThumbView","renderedTableView","DownloadIcon","DefaultSource","ImageSource","ImageIcon","FileSource","DocumentsIcon","defaultFileAssetSources","defaultImageAssetSources","WorkspaceValidationError","identifier","getWorkspaceIdentifier","getIdentifier","validateWorkspaces","validateNames","validateBasePaths","isSingleWorkspace","names","rawName","thisIdentifier","getNamelessIdentifier","existingWorkspace","prevIdentifier","hasBasePath","validateBasePath","restOfWorkspaces","firstWorkspaceSegmentCount","workspaceSegmentCount","basePaths","withTitle","actionIds","counter","getHookId","actionHook","useShallowCompareMemoize","useShallowCompareEffect","HookStateContainer","hook","onNext","onReset","onRequestUpdate","hookState","onComplete","requestIdleCallbackShim","didTimeout","timeRemaining","cancelIdleCallbackShim","handle","_requestIdleCallback","requestIdleCallback","_cancelIdleCallback","cancelIdleCallback","GetHookCollectionState","hooks","statesRef","tickId","setTick","setKeys","mountedRef","ricHandle","handleRequestUpdate","handleRequestUpdateThrottled","handleNext","handleReset","currentKeys","hookIds","states","RenderActionCollectionState","actionProps","onActionComplete","CONTEXT_MENU_POPOVER_PROPS","PaneContextMenuButton","itemGroups","groups","defaultGroup","groupMap","g","groupIndex","itemIndex","PaneContextMenuItem","hotkeys","shortcut","IntentButtonOrActionButton","linkRef","ImperativeToast","_","useImperativeHandle","defaults","navbarPopover","navbarDialog","pane","paneHeader","paneFooter","paneResizer","modal","movingItem","drawershade","drawer","fullscreen","dropdown","navbarFixed","fullscreenEdit","popoverBackground","tooltip","modalBackground","spinner","ZIndexContext","useZIndex","LegacyLayerProvider","zOffsetKey","PANE_DEBUG","PANE_COLLAPSED_WIDTH","PANE_DEFAULT_MIN_WIDTH","PaneContext","PaneLayoutContext","usePaneLayout","PaneDivider","resize","dragging","setDragging","handleMouseDown","startX","pageX","handleMouseMove","deltaX","handleMouseUp","onMouseDown","Pane","_c","currentMinWidth","currentMinWidthProp","currentMaxWidth","currentMaxWidthProp","flexProp","minWidthProp","maxWidthProp","setRootElement","layoutCollapsed","expand","expandedElement","mount","panes","paneIndex","nextPane","isLast","nextCollapsed","forwardedRef","useForwardedRef","handleCollapse","handleExpand","contextValue","divider","BoundaryElementProvider","usePane","PaneContent","RootCard","PaneFooter","TitleBox","TitleTextSkeleton","TitleText","TABS_SCROLL_PADDING","TabsBox","rgba","PaneHeader","backButton","subActions","tabs","paneElement","paneRect","layoutStyle","handleTitleClick","handleLayoutClick","_calcPaneResize","leftMinWidth","rightMinWidth","leftMaxWidth","rightMaxWidth","minDeltaX","rightMinDeltaX","maxDeltaX","leftMaxDeltaX","_deltaX","leftW","rightW","leftFlex","rightFlex","_getDOMPath","parentElement","childNodes","unshift","EMPTY_PATH","_sortElements","_sortByElementPath","aIndex","bIndex","createPaneLayoutController","observers","optionsMap","userCollapsedElementSet","rootWidth","resizeDataMap","resizing","_notifyObservers","original","splice","leftElement","_d","leftIndex","leftOptions","rightElement","rightOptions","leftResizeData","rightResizeData","nextRootElement","setRootWidth","nextRootWidth","_elements","dataMap","lastElement","collapsedWidth","remaingWidth","userCollapsed","sizeCollapsed","resizeData","PaneLayout","onCollapse","onExpand","paneLayout","IntentButton","InsufficientPermissionsMessageTooltip","reveal","POPOVER_PROPS","getIntent","baseParams","PaneHeaderCreateButton","templatePermissions","isTemplatePermissionsLoading","nothingGranted","permissionsById","firstItem","emptyArray","emptyObject","hashObject","sortObject","keyA","keyB","PaneHeaderActions","initialValueTemplateItems","initialValueTemplateItemsFromStructure","menuItems","menuItemGroups","actionHandlers","handleAction","actionMenuItems","contextMenuItems","nonCreateMenuItem","showAsAction","initialValueTemplateItemFromMenuItems","menuItemIndex","intentParams","initialValueTemplateItem","combinedInitialValueTemplates","actionItem","actionIndex","DeskToolContext","SerializeError","parentPath","hint","withHelpUrl","HELP_URL","IMPLICIT_FIELDS","joinReferences","schemaField","refTypes","tailFields","tailWrapper","getExtendedProjection","ORDER_BY_UPDATED_AT","ORDER_BY_CREATED_AT","DEFAULT_SELECTED_ORDERING_OPTION","DEFAULT_ORDERING_OPTIONS","maybeSerializeMenuItem","MenuItemBuilder","_context","clone","getAction","getTitle","getGroup","getIcon","getShowAsAction","TITLE_REQUIRED","ACTION_OR_INTENT_REQUIRED","ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE","withSpec","builder","getOrderingMenuItem","extendedProjection","SortIcon","getOrderingMenuItemsForSchemaType","maybeSerializeMenuItemGroup","MenuItemGroupBuilder","_title","getId","ID_REQUIRED","disallowedPattern","validateId","disallowedChar","GenericViewBuilder","kebabCase","isSerializable","view","maybeSerializeView","isComponentSpec","ComponentViewBuilder","componentOrSpec","userComponent","getComponent","getOptions","COMPONENT_REQUIRED","FormViewBuilder","form","createDocumentChildResolver","resolveDocumentNode","itemId","currentSegment","DocumentBuilder","camelCase","getChild","paneId","getDocumentId","initialValueTemplate","templateParameters","getInitialValueTemplate","getInitialValueTemplateParameters","views","getViews","urlId","DOCUMENT_ID_REQUIRED","viewIds","dupes","viewId","getDocumentOptions","documentFromEditor","documentFromEditorWithInitialValue","layoutOptions","DEFAULT_INTENT_HANDLER","Symbol","defaultIntentChecker","isEdit","isCreate","typedSpec","paneFilter","paneParams","typeNames","getTypeNamesFromFilter","tpl","InitialValueTemplateItemBuilder","getDescription","getTemplateId","getParameters","defaultInitialValueTemplateItems","getStructureBuilder","ordered","maybeSerializeInitialValueTemplateItem","menuItemsFromInitialValueTemplateItems","pickBy","noChildResolver","shallowIntentChecker","GenericListBuilder","initialValueTemplatesSpecified","defaultLayout","getDefaultLayout","getMenuItems","getMenuItemGroups","getCanHandleIntent","showIcons","displayOptions","getShowIcons","getInitialValueTemplates","validateFilter","QUERY_PROVIDED_FOR_FILTER","createDocumentChildResolverForItem","parentItem","DocumentListBuilder","getApiVersion","getFilter","defaultOrdering","getDefaultOrdering","FILTER_REQUIRED","inferInitialValueTemplates","inferTypeName","getSpec","resolveNewDocumentOptions","getTypeNamesFromEqualityFilter","getTypeNamesFromInTypesFilter","pattern","exec","candidate","_DEBUG","EMPTY_PARAMS","LOADING_PANE","PaneResolutionError","cause","randomIdCache","cachedValue","bindCache","memoBind","methodKey","boundMethods","bound","isSubscribable","thing","rethrowWithPaneResolutionErrors","unresolvedPane","flatIndex","wrapWithPublishReplay","createPaneResolver","middleware","resolvePane","useDeskTool","deskTool","fallbackEditorChild","nodeId","structureContext","defaultDocumentBuilder","hashContext","parentId","splitIndex","serializeOptionsIndex","serializeOptions","serializeOptionsPath","hashResolvedPaneMeta","routerPaneSibling","siblingIndex","paneNode","resolvePaneTree","flattenedRouterPanes","resolvedPaneMeta","loadingPanes","restIndex","loadingPanePath","currentIndex","loadingPane","nextStream","nextResolvedPanes","createResolvedPaneNodeStream","routerPanesStream","rootPaneNode","initialCacheState","cacheKeysByFlatIndex","resolvedPaneCache","resolvedPanes$","rawRouterPanes","routerPanes","routerPaneGroup","pairwise","currValue","diffIndex","beforeDiffIndex","afterDiffIndex","keysToKeep","keySet","keysToDelete","nextFn","cachedResolvedPane","cacheKeySet","prevPane","useRouterPanesStream","routerStateSubject","ReplaySubject","routerPanes$","_routerState","useResolvedPanes","setData","paneDataItems","resolvedPanes","currentGroup","groupsLen","nextGroup","paneDataItem","childItemId","Delay","ms","setReady","timeoutId","PathSegment","formatStack","StructureError","showStack","handleReload","SyncIcon","missingContext","PaneRouterContext","hasGroupSiblings","groupLength","routerPanesState","BackLink","ChildLink","ReferenceChildLink","handleEditReference","ParameterizedLink","replaceCurrent","closeCurrent","duplicateCurrent","setView","setParams","setPayload","childId","childPayload","childParameters","parentRefPath","currentPanes","nextParams","nextPayload","currentSibling","nextSibling","nextPanes","PaneRouterProvider","routerPaneGroups","modifyCurrentGroup","modifier","currentItem","nextRouterState","siblings","sibling","duplicatedItem","restParams","usePaneRouter","UnknownPane","paneKey","getWaitMessages","thresholds","DEFAULT_MESSAGE","Content","LoadingPane","messageProp","resolvedMessage","currentMessage","setCurrentMessage","contentElement","setContentElement","mounted","setMounted","_raf2","paneMap","lazy","require","documentList","DeskToolPane","PaneComponent","isActive","prevParams","prevPayload","ErrorPane","CORNER_RADIUS","INTERACTIVE_STROKE_WIDTH","CONNECTOR_MARGIN","ARROW_MARGIN_X","ARROW_MARGIN_Y","ARROW_SIZE","ARROW_THRESHOLD","DEBUG_LAYER_BOUNDS","ConnectorContext","isReviewChangesOpen","onOpenReviewChanges","onSetFocus","ChangeFieldWrapper","isHover","setHover","onMouseEnter","onMouseLeave","isChanged","hasFocus","hasHover","hasRevertHover","deepCompare","setFocusWithStopPropagation","stopPropagation","freeze","animationSpeed","ChangeBarWrapper","changed","isReviewChangeOpen","ChangeBar","ChangeBarButton","FieldWrapper","$zIndex","ChangeBarMarker","notSelectedColor","spot","yellow","screenMedium","$withHoverEffect","ElementWithChangeBar","withHoverEffect","hover","useLayer","handleMouseEnter","handleMouseLeave","changeBar","layer","ChangeIndicator","ChangeIndicatorContext","fullPath","focusPath","ScrollContext","useOnScroll","parentContext","ScrollContainer","onScroll","childContext","handleScroll","ScrollMonitor","findMostSpecificTarget","targetType","pathString","fromString","exactId","mostSpecific","numEqual","numEqualSegments","lastPathSegment","pathOnlyDiffersByKey","isKeyedObject","isChangeBar","hasOverflowScroll","getComputedStyle","isScrollable","scrollableContent","scrollHeight","SCROLL_INTO_VIEW_TOP_PADDING","scrollIntoView","parentElementWithScroll","scroll","bounds","behavior","foundScrollContainer","contains","scrollLeft","arrowPath","x","y","moveTo","lineTo","strings","delim","quadCurve","x1","y1","generateConnectorPath","fromX","fromY","toX","toY","cmds","r1","isAbove","isBelow","getConnectorLinePoint","centerY","startY","endY","outOfBounds","mapConnectorToLine","connector","fromBounds","toBounds","maxStartY","ClampedRect","ConnectorPath","strokeColor","InteractivePath","RightBarWrapper","Connector","linePathDescription","strokeWidth","useResizeObserver","onResize","SvgWrapper","getState","allReportedValues","hovered","changeBarsWithHover","changeBarsWithFocus","reportedChangeBar","isHoverConnector","changeBars","connectors","ConnectorsOverlay","setHovered","visibleConnectors","handleScrollOrResize","ConnectorGroup","onConnectorClick","EnabledChangeConnectorRoot","DisabledChangeConnectorRoot","ChangeConnectorRoot","ReviewChangesContext","useReferenceInputOptions","ReferenceInputOptionsProvider","activePath","EditReferenceLinkComponent","onEditReference","createPatchChannel","_subscribers","setIfMissing","insert","inc","amount","dec","prefixPath","PatchEvent","prepend","append","prefixAll","FormBuilderContext","useFormBuilder","formBuilder","DefaultArrayInputFunctions","onCreateValue","onAppendItem","menuButtonId","insertItem","handleAddBtnClick","memberDef","referenceIcon","__SANITY_INTERNAL_IMPLEMENTATION","level","InfoOutlineIcon","IconText","primary","caution","critical","DefaultMarkers","renderCustomMarkers","CustomMarkers","DefaultCustomMarkers","FormCallbacksContext","FormCallbacksProvider","useFormCallbacks","PresenceContext","PresenceProvider","useFormFieldPresence","useChildPresence","ValidationContext","ValidationProvider","useValidationMarkers","useChildValidation","marker","missingPatchChannel","FormBuilderProvider","__internal_patchChannel","patchChannel","autoFocus","changesOpen","collapsedFieldSets","collapsedPaths","filterField","focused","members","onChange","onFieldGroupSelect","onPathBlur","onPathFocus","onPathOpen","onSetFieldSetCollapsed","onSetPathCollapsed","renderField","renderInput","renderItem","renderPreview","unstable","documentValue","documentValueRef","ArrayFunctions","Markers","assetSources","_ensureArrayOfSources","directUploads","StudioFormBuilderProvider","StudioFormBuilder","RootInput","handleCollapseField","handleExpandField","handleBlur","handleChange","focusRef","handleSelectFieldGroup","groupName","handleOpenField","handleCloseField","handleCollapseFieldSet","fieldSetName","handleExpandFieldSet","rootInputProps","elementProps","onBlur","onFocus","onCloseField","onCollapseField","onCollapseFieldSet","onExpandField","onExpandFieldSet","onFocusPath","onOpenField","IS_NUMERIC","unquote","splitAttr","attr","coerce","parseGradientPath","focusPathStr","encodePath","formBuilderPath","arrayToJSONMatchPath","decodePath","gradientPath","isMemberObject","member","isMemberArrayOfPrimitives","ofType","isPrimitiveSchemaType","isMemberArrayOfObjects","rePropName","reKeySegment","segmentType","isKeySegment","getValueAtPath","rootValue","isIndexSegment","stringToPath","normalizePathSegment","normalizeIndexSegment","normalizeKeySegment","isIndexTuple","normalizeIndexTupleSegment","pathsAreEqual","pathA","pathB","segmentA","segmentB","getItemKey","arrayItem","getItemKeySegment","isEmptyObject","OverlayContainer","ContentContainer","CardContainer","FlexContainer","ActivateOnFocus","onActivate","isOverlayActive","isObjectInputProps","inputProps","isArrayInputProps","usePrevious","useDidUpdate","didUpdate","compare","whatwgRNG","rnds8","Uint8Array","getRandomValues","getByteHexTable","table","ensureKey","ArrayOfObjectsField","hadFocus","handleInsert","referenceItem","handleMoveItem","fromIndex","refItem","handlePrependItem","handleAppendItem","handleCollapseItem","itemKey","handleExpandItem","handleOpenItem","handleCloseItem","handleRemoveItem","handleFocusChildPath","onExpandItem","onCollapseItem","onCloseItem","onOpenItem","onInsert","onMoveItem","onRemoveItem","onPrependItem","renderedInput","fieldProps","collapsible","inputId","PrimitiveField","handleNativeChange","inputValue","isNumberSchemaType","valueAsNumber","isBooleanSchemaType","checked","hasEmptyValue","isNaN","validationError","createProtoValue","jsonType","ObjectField","fieldsetName","onOpen","move","arr","copy","insertAfter","ArrayOfPrimitivesField","handleSetCollapsed","handleAppend","itemValue","handlePrepend","insertIndex","referenceIndex","handleFocusIndex","onSetCollapsed","onFocusIndex","MemberField","STATUS_TONES","SuffixBox","Alert","suffix","HeaderButton","ToggleArrow","Header","IconBox","Details","openProp","handleToggle","TRUTHY_STRINGS","FALSEY_STRINGS","BOOL_STRINGS","TRUE","prop","toLocalDate","newDate","getTimezoneOffset","hours","getHours","setHours","getTZName","Intl","DateTimeFormat","resolvedOptions","timeZone","converters","convert","boolean","richDate","isValidDate","local","toJSON","utc","timezone","datetime","SetMissingTypeButton","UnsetItemButton","validTypes","UntypedValueInput","isSingleValidType","isHoistedType","validType","getConverters","actualType","CONVERTERS","converter","InvalidValueInput","handleClearClick","handleConvertTo","converted","ConvertButton","onConvert","VALIDATION_COLORS","red","VALIDATION_ICONS","FormFieldValidationStatus","__unstable_showSummary","showSummary","warnings","hasWarnings","hasInfo","statusIcon","statusColor","FormFieldValidationSummary","FormFieldValidationStatusItem","errorMarkers","warningMarkers","errorLen","warningLen","errorsStr","warningsStr","errorText","warningText","hasBoth","FormFieldHeaderText","hasValidations","htmlFor","FormFieldHeader","__unstable_presence","FormField","focusRingBorderStyle","focusRingStyle","focusRing","focusRingOutsetWidth","focusRingInsetWidth","bgColor","legend","ToggleButton","ToggleIconBox","FormFieldSetLegend","getChildren","$borderLeft","FormFieldSet","hasValidationMarkers","gapX","gapY","FormFieldStatus","MissingKeysAlert","handleFixMissingKeys","DuplicateKeysAlert","handleFixDuplicateKeys","duplicates","MemberFieldError","resolvedValueType","expectedSchemaType","MemberFieldSet","fieldSet","fieldsetMember","IGNORE_KEYS","ArrayOfObjectsItem","onRemove","isEmptyValue","itemProps","getEmptyValue","ArrayOfPrimitivesItem","PopoverCard","container","ItemWithMissingType","vertical","showDetails","setShowDetails","popoverRef","setPopoverRef","useClickOutside","handleShowDetails","onKeyDown","BulbOutlineIcon","MemberItemError","ObjectMembers","pass","hasAbsolutePath","FormInput","absolutePath","relativePath","FormInputInner","destinationRenderField","destinationRenderInput","destinationRenderItem","destinationRenderPreview","isDestinationReached","shouldRenderField","includeField","childPath","trimLeft","itemMember","fieldMember","createInsertCallback","allowedDecorators","toInsert","givenBlock","blk","normalizeBlock","createSetCallback","createUnsetCallback","BlockActions","usePortableTextEditor","renderBlockActions","decoratorValues","PortableTextEditor","getPortableTextFeatures","decorators","blockActions","blockActionProps","blur","contentEditable","ReviewChangesHighlightBlock","StyledChangeIndicatorWithProvidedFullPath","_isBlockType","_isArrayOfObjectsFieldMember","NONEXISTENT_PATH","useMemberValidation","memberValidation","childValidation","hasError","hasWarning","PortableTextMarkersContext","PortableTextMarkersProvider","usePortableTextMarkers","PortableTextMemberItemsContext","PortableTextMemberItemsProvider","memberItems","usePortableTextMemberItem","usePortableTextMemberItems","BlockObjectPreview","onClickingEdit","onClickingDelete","isTopLayer","isTabbing","isCustomPreviewComponent","isImageType","referenceLink","ReferenceLink","EyeOpenIcon","EditIcon","overlay","purple","invalid","PreviewContainer","ChangeIndicatorWrapper","$hasChanges","InnerFlex","BlockActionsOuter","BlockActionsInner","TooltipBox","BlockObject","attributes","isFullscreen","elementRef","reviewChangesHovered","setReviewChangesHovered","memberItem","handleMouseOver","handleMouseOut","handleEdit","handleDoubleClickToOpen","handleDelete","sel","anchor","blockPreview","innerPaddingProps","hasMarkers","isImagePreview","tooltipEnabled","onDoubleClick","onMouseOver","onMouseOut","ToolbarPopover","POPOVER_FALLBACK_PLACEMENTS","InlineObjectToolbarPopover","onEdit","scrollElement","editButtonRef","popoverScheme","boundaryElement","rootStyle","PreviewSpan","InlineObject","editorSelection","usePortableTextEditorSelection","showPopover","setShowPopover","markersToolTip","handleRemoveClick","point","handleEditClick","AnnotationToolbarPopover","annotationElement","textElement","cursorRect","setCursorRect","setSelection","isClosingRef","rangeRef","cursorElement","handleSelectionChange","winSelection","getSelection","anchorNode","anchorOffset","focusNode","focusOffset","range","getRangeAt","$toneKey","Annotation","annotationRef","markDefPath","setTextElement","removeAnnotation","isLink","toneKey","hasCustomMarkers","TEXT_LEVELS","TEXT_BULLET_MARKERS","TEXT_NUMBER_FORMATS","TEXT_DECORATOR_TAGS","em","underline","strong","TEXT_STYLE_PADDING","blockquote","Decorator","mark","createListName","textBlockStyle","$level","numberMarker","bulletMarker","family","TextRoot","TextBlockFlexWrapper","ListPrefixWrapper","BlockExtrasContainer","textSize2","capHeight1","ascenderHeight","descenderHeight","capHeight2","buttonHeight","negativeTop","TextFlex","TextContainer","Normal","Heading1","Heading2","Heading3","Heading4","Heading5","Heading6","BlockQuoteRoot","BlockQuote","TEXT_STYLES","TextBlock","spellCheck","handleChangeIndicatorMouseEnter","handleChangeIndicatorMouseLeave","TextStyle","outerPaddingProps","CustomIconDiv","CustomIcon","inlineStyle","backgroundImage","getPTEFormatActions","hotkeyOpts","decorator","shortCutKey","marks","blockEditor","toggleMark","getPTEListActions","lists","toggleList","getAnnotationIcon","getPTEAnnotationActions","focusChild","hasText","annotations","getPTEToolbarActionGroups","onInsertAnnotation","getBlockStyles","styleComponent","getInsertMenuIcon","fallbackIcon","getInsertMenuItems","onInsertBlock","onInsertInline","blockItems","blockObjects","BlockElementIcon","inlineItems","inlineObjects","InlineElementIcon","filteredBlockItems","annotationIcons","formatIcons","BoldIcon","ItalicIcon","StrikethroughIcon","UnderlineIcon","CodeIcon","listStyleIcons","OlistIcon","UlistIcon","getActionIcon","useFocusBlock","focusBlock","useFeatures","useActionGroups","handleInsertAnnotation","addAnnotation","useActiveActionKeys","activeAnnotationKeys","activeAnnotations","hasListStyle","isMarkActive","useActiveStyleKeys","hasBlockStyle","CollapseMenuMemo","MENU_POPOVER_PROPS","COLLAPSE_BUTTON_PROPS","ActionMenu","disabledProp","isVoidBlock","isEmptyTextBlock","firstInGroup","activeKeys","handleMenuClose","annotationDisabled","MenuButtonMemo","StyledMenuItem","StyledButton","TEXT_STYLE_OPTIONS","TEXT_STYLE_KEYS","emptyStyle","BlockStyleSelect","itemsProp","setChanged","_disabled","activeItems","_activeItems","_items","menuButtonText","toggleBlockStyle","hasTextStyle","renderStyle","InsertMenu","isVoidFocus","StyleSelectBox","StyleSelectFlex","ActionMenuBox","$withInsertMenu","FullscreenButtonBox","SLOW_INITIAL_VALUE_LIMIT","IS_MAC","platform","InnerToolbar","actionGroups","blockStyles","insertMenuItems","onToggleFullscreen","actionsLen","showActionMenu","showInsertMenu","rootElementRect","Hotkeys","CollapseIcon","ExpandIcon","Toolbar","isSlow","slowTimer","finally","handleInsertBlock","insertBlock","handleInsertInline","insertChild","$fullscreen","ToolbarCard","EditableCard","Scroller","EditableContainer","EditableWrapper","l","$isFullscreen","useSpellcheck","spellCheckOption","portableTextFeatures","isChrome96","userAgent","useScrollSelectionIntoView","domRange","leafEl","startContainer","scrollMode","boundary","renderDecorator","mType","defaultRender","Editor","initialSelection","onCopy","onPaste","renderAnnotation","renderBlock","renderChild","setPortalElement","setScrollElement","editableRef","useBoundaryElement","Node","renderPlaceholder","spellcheck","scrollSelectionIntoView","editable","PortableTextEditable","handleToolBarOnExpand","$readOnly","ExpandedLayer","useHotkeys","initialHotkeys","defaultHotkeys","ptFeatures","_getModalOption","DefaultEditDialog","usePortal","debugElement","RootPopover","ContentScrollerBox","ContentHeaderBox","PopoverEditDialog","forceUpdate","setForceUpdate","virtualElement","contextElement","ObjectEditModal","modalOption","modalType","firstField","setFirstField","firstFieldMember","firstFieldElm","getElementById","useScrollToOpenedMember","editorRootPath","portableTextMemberItems","isTouchDevice","maxTouchPoints","activateVerb","ACTIVATE_ON_FOCUS_MESSAGE","Compositor","wrapperElement","setWrapperElement","handleToggleFullscreen","hotkeysWithFullscreenToggle","editorHotkeys","hasContent","blockType","isTextBlock","childType","annotationType","openMemberItems","editorNode","boundaryElm","dMemberItem","portalElements","expanded","editorLayer","__unstable_name","__unstable_elements","InvalidValue","onIgnore","resolution","usePatches","filteredPatches","_startsWith","shouldReset","_shouldReset","_getValueAtPath","_isSegmentEqual","segment1","segment2","segment1Type","subjectPath","checkPath","_isAncestor","path1","path2","VisibleOnFocusButton","PortableTextInput","readOnlyFromProps","editorRef","setHasFocus","ignoreValidationError","setIgnoreValidationError","invalidValue","setInvalidValue","setIsFullscreen","setIsActive","portableTextMemberItemsRef","patchSubject","remotePatch$","innerElementRef","prevSel","childrenField","markDefArrayMember","existingItem","createRef","hasOpenItem","setFocusPathDebounced","handleEditorChange","handleFocusSkipperClick","handleIgnoreInvalidValue","respondToInvalidContent","RespondToInvalidContent","handleActivate","incomingPatches$","maxBlocks","isObjectItemProps","isStringInputProps","isStringSchemaType","isNumberInputProps","isBooleanInputProps","isArrayOfObjectsInputProps","isArrayOfObjectsSchemaType","isArrayOfPrimitivesInputProps","isArrayOfPrimitivesSchemaType","resolveConditionalProperty","property","MAX_FIELD_DEPTH","AUTO_COLLAPSE_DEPTH","getPrimitiveItemType","getCollapsedWithDefaults","getOption","optionName","PSEUDO_OBJECTS","HIDDEN_FIELDS","NO_LEVEL_LAYOUTS","NO_LEVEL_TYPES","getFieldLevel","currentLevel","getArrayFieldLevel","getObjectFieldLevel","typeIfRelevant","asType","isPseudoObject","hasVisibleFields","hasListOptions","isNoLevelLayout","asOneOfTypes","ALL_FIELDS_GROUP","isFieldEnabledByGroupFilter","groupsConfig","castArray","isAcceptedObjectValue","isValidArrayOfObjectsValue","isValidArrayOfPrimitivesValue","everyItemIsObject","findDuplicateKeyEntries","seenKeys","hasKey","everyItemHasKey","isChangedValue","comparisonValue","_isEqual","prepareFieldMember","_e","_f","_g","_h","_i","_j","_k","_l","_m","_n","_o","_p","_q","_r","fieldPath","pathFor","fieldLevel","parentValue","parentComparisonValue","fieldComparisonValue","fieldGroupState","scopedCollapsedPaths","scopedCollapsedFieldsets","inputState","prepareObjectInputState","openPath","defaultCollapsedState","hasValue","duplicateKeyEntries","scopedCollapsedFieldSets","fieldState","prepareArrayOfObjectsInputState","prepareArrayOfPrimitivesInputState","conditionalPropertyContext","preparePrimitiveInputState","enableHiddenCheck","schemaTypeGroupConfig","defaultGroupName","groupHidden","selectedGroup","parentProps","normalizedSchemaMembers","single","fieldsetFieldNames","fieldsetHidden","fieldsetReadOnly","fieldsetMembers","fieldStateWithReadOnly","hasFieldGroups","trimChildPath","prepareArrayOfPrimitivesMember","prepareArrayOfObjectsMember","itemPath","itemLevel","collapsedItemPaths","itemState","itemComparisonValue","prepareFormState","immutableReconcile","_immutableReconcile","WeakSet","parents","prevType","nextType","allEqual","nextItem","useFormState","reconciled","useFormValue","uniquePath","documentValueSubject","documentValue$","toMutationPatches","toMutationPatch","fromMutationPatches","toFormBuilderPatches","notIn","getAnnotationColor","colorManager","getAnnotationAtPath","diffPath","getAnnotationAt","getDiffAtPath","getDiffAt","diffAt","itemDiff","itemMatchesKey","fieldDiff","toValue","visitDiff","visitor","visitArrayDiff","visitObjectDiff","visitStringDiff","getItemDiffIndex","useAnnotationColor","useDiffAnnotationColor","isThenable","useCheckCondition","checkProperty","checkPropertyName","isTrueIsh","useConditionalProperty","checkPropertyKey","isPropertyTruthy","DiffContext","getValueError","valueType","isObjectType","isObjectValue","fieldError","isTypedObject","resolveJSType","getArrayDiffItemType","resolveArrayMemberType","fromType","declared","ANNOTATION_SYMBOLS","CHILD_SYMBOL","DECORATOR_SYMBOLS","EMPTY_BLOCK_SYMBOL","INLINE_SYMBOLS","TRAILING_SPACE_SYMBOL","SEGMENT_START_SYMBOL","dmp","DiffMatchPatch","hasPTMemberType","isPTSchemaType","startMarkSymbols","TextSymbols.DECORATOR_SYMBOLS","TextSymbols.ANNOTATION_SYMBOLS","endMarkSymbols","allSymbols","TextSymbols.INLINE_SYMBOLS","TextSymbols.CHILD_SYMBOL","TextSymbols.SEGMENT_START_SYMBOL","symbolRegex","segmentRegex","isHeader","findChildDiff","childrenDiff","childDiff","getChildSchemaType","cSchemaType","getDecorators","spanSchemaType","isDecorator","blockToSymbolizedText","decoratorMap","annotationMap","inlineMap","returned","spanDiff","findSpanDiffFromChild","textDiff","_isDecorator","createPortableTextDiff","displayValue","allMarkDefs","getAllMarkDefs","markDef","inlines","getInlineObjects","fromText","toText","toPseudoValue","fromPseudoValue","pseudoDiff","buildSegments","hasMoved","dmpDiffs","diff_main","diff_cleanupEfficiency","fromIdx","toIdx","DIFF_EQUAL","DIFF_DELETE","DIFF_INSERT","newSegments","markMatches","matchAll","lastIndex","allChildren","cld","previousChildren","oCld","findAnnotationDiff","markDefKey","markDefs","allDefs","oldDefs","oDef","diffResolvers","Checkbox","rx","stroke","Switch","BooleanFieldDiff","Preview","showToValue","DiffTooltip","FromToArrow","DocumentChangeContext","useDocumentChange","documentChange","useRefValue","getSizeDiff","increase","pct","SizeDiff","solid","positive","FileFieldDiff","fromAsset","toAsset","changedFields","didAssetChange","nestedFields","prevSize","nextSize","pctDiff","roundedPrevSize","roundedNextSize","cardStyles","DiffCard","MetaInfo","FileAssetChange","FromTo","ChangeList","hexToRgba","parseInt","simpleHash","char","getDeviceDpr","ceil","HotspotCropSVG","crop","hotspot","cropColor","hotspotColor","HotspotSVG","CropSVG","mask","rectProps","vectorEffect","ellipseProps","ry","ASSET_FIELDS","NoImagePreview","ImageWrapper","HotspotDiff","ImagePreview","imageError","setImageError","getImageDimensions","assetIsDeleted","imageSource","assetChanged","metaAction","onError","isDefaultCrop","isDefaultHotspot","markRemoved","IMAGE_META_FIELDS","BASE_IMAGE_FIELDS","CARD_STYLES","ImageFieldDiff","fromRef","toRef","assetAnnotation","assetAction","didCropChange","didHotspotChange","didMetaChange","showImageDiff","showMetaChange","imageDiff","NumberWrapper","NumberPreview","NumberFieldDiff","DiffFromTo","previewComponent","Quote","Blockquote","headingSizes","StyledHeading","StyledParagraph","Paragraph","Block","isRemoved","fromStyle","borderStyle","InlineBox","InlineText","PopoverContainer","AnnotationWrapper","AnnnotationWithDiff","popoverElement","setPopoverElement","annotationPath","myPath","myValue","isEditing","handleOpenPopup","handleClickOutside","popoverContent","DecoratorWrapper","decoration","InlineObjectWrapper","InlineObjectWithDiff","FOCUS_TERMINATOR","PopoverContent","diffWithFallback","hasChanged","TextWithDiff","spanSegment","realSeg","rSeg","diffCard","decoratorSymbolsStart","decoratorSymbolsEnd","annotationSymbolsStart","annotationSymbolsEnd","allSymbolsStart","allSymbolsEnd","allDecoratorSymbols","markRegex","ptDiffChild","decoratorTypes","returnedChildren","annotationSegments","isEmptyTextChange","TextSymbols.EMPTY_BLOCK_SYMBOL","childToIndex","segIndex","endedAnnotation","isInline","isMarkStart","isMarkEnd","isChildStart","indexOfSymbol","sym","originChild","objectSchemaType","objectDiff","getChildFromFromValue","renderTextSegment","lastChild","annotationDiff","TextSymbols.TRAILING_SPACE_SYMBOL","activeMarks","renderDecorators","fromPtDiffText","indirectMarksAnnotation","marksDiff","marksAnnotation","marksChanged","ptDiffChildren","ptDiffMatchString","controlString","toTest","aSet","notClosed","lastIndexOf","xor","PTDiff","ptDiff","ReferenceWrapper","ReferencePreview","ReferenceFieldDiff","StringWrapper","StringPreview","StringFieldDiff","DiffString","defaultComponents","showHeader","reference","resolveDiffComponent","parentSchemaType","itType","tryResolve","resolvers","resolver","getChangeVerb","hadPrevValue","hasNextValue","isFieldChange","isGroupChange","isAddedItemDiff","isRemovedItemDiff","isUnchangedDiff","buildChangeList","titlePath","diffComponent","parentSchema","buildObjectChangeList","buildArrayChangeList","getFieldChange","diffContext","changes","fieldSets","buildFieldChange","buildFieldsetChangeList","reduceTitlePaths","fieldFilter","fieldTitlePath","fieldSetHidden","fieldSetTitlePath","changedOrMoved","isPortableText","memberTypes","itemContext","parentDiff","itemTitlePath","attachItemDiff","showIndex","byLength","isAddedAction","flattenChangeNode","changeNode","newSubChanges","cChange","isSubpathOf","subPath","pathSegmentOfCorrectType","diffOptions","diffMatchPatch","undoChange","rootDiff","documentOperations","allChanges","unsetChanges","buildUnsetPatches","unsetChange","buildMovePatches","buildUndoPatches","buildUnsetPatch","concurrentUnsetPaths","previousValue","furthestEmptyAncestor","unsetByEarlierPatch","currentPath","ignorePaths","initialPath","ancestorPath","ancestorValue","updatedIgnorePaths","isStub","getFromItem","insertLocation","before","prevItemKey","prevSegment","after","diffItem","inserts","unsets","stubbedPaths","stubs","hasSets","sets","getParentStubs","stubbed","pathStr","nextSegment","nextIsArrayElement","stub","getStubValue","indexAtPrev","prevSeg","onlyContainsStubs","nextPath","isIgnoredPath","ignorePath","ConditionalReadOnlyContext","useConditionalReadOnly","DiffTooltipWithAnnotation","textTransform","AnnotationItem","allowedAutoPlacements","timeAgo","backgroundColor","borderRadius","card","annotationProp","disableHoverEffect","RoundedCard","AnnotationText","ChangeTitleSegment","created","CreatedTitleSegment","DeletedTitleSegment","MovedTitleSegment","readableIndex","diffAnnotation","textDecoration","indexDiff","indexSymbol","positions","ChangeBreadcrumb","titleSegment","showSegment","DiffErrorBoundary","arguments","getDerivedStateFromError","componentDidCatch","arrowComponents","down","ArrowDownIcon","ArrowRightIcon","arrowComponent","CodeWrapper","pre","Meta","DiffInspectWrapper","isHovering","isInspecting","setIsInspecting","toggleInspect","DiffInspector","MetaLabel","printMeta","jsonify","INLINE_COLUMN_STYLES","BLOCK_COLUMN_STYLES","FLEX_ALIGN","center","layoutStyles","columnStyles","cardClassName","changeVerb","FallbackPreview","FallbackDiff","RevertChangesButton","RevertIcon","ValueError","FieldChangeContainer","DiffBorder","PopoverWrapper","FieldChange","conditionalReadOnly","DiffComponent","isComparingCurrent","confirmRevertOpen","setConfirmRevertOpen","revertHovered","setRevertHovered","revertButtonElement","setRevertButtonElement","isPermissionsLoading","handleRevertChanges","handleRevertChangesConfirm","closeRevertChangesConfirmDialog","handleRevertButtonMouseEnter","handleRevertButtonMouseLeave","useHover","ChangeListWrapper","GroupChangeContainer","GroupChange","groupPath","isNestedInDiff","revertButtonRef","isRevertButtonHovered","docOperations","revertPopoverElement","setRevertPopoverElement","ChangeResolver","isHidden","isReadOnly","NoChanges","confirmRevertAllOpen","setConfirmRevertAllOpen","confirmRevertAllHover","setConfirmRevertAllHover","maybeFlatten","rootChange","revertAllChanges","handleRevertAllChangesClick","handleRevertAllChangesMouseEnter","handleRevertAllChangesMouseLeave","closeRevertAllChangesConfirmDialog","revertAllContainerElement","setRevertAllContainerElement","showFooter","ChangeSegment","DiffStringSegment","segmentIndex","MetaText","DEFAULT_DATE_FORMAT","DEFAULT_TIME_FORMAT","DatetimeWrapper","DatetimePreview","formatDateTime","dateFormat","timeFormat","legacyDateFormat","SlugWrapper","SlugPreview","TIMELINE_LABELS","discardDraft","editDraft","editLive","TIMELINE_ICON_COMPONENTS","AddCircleIcon","PublishIcon","UnpublishIcon","formatTimelineEventLabel","getTimelineEventIconComponent","sinceTimelineProps","topSelection","bottomSelection","disabledBeforeSelection","revTimelineProps","UserAvatarStack","IconWrapper","borderColor","skeleton","isHovered","EventLabel","TIMELINE_ITEM_EVENT_TONE","withinSelection","TimelineItem","isSelectionBottom","isSelectionTop","authorUserIds","isWithinSelection","StackWrapper","MenuWrapper","LOAD_MORE_OFFSET","onLoadMore","rootRef","listRef","loadingElement","setLoadingElement","checkIfLoadIsNeeded","bottomPosition","requestAnimationFrame","DocumentPaneContext","useDocumentPane","documentPane","TimelineMenu","setTimelineRange","setTimelineMode","buttonRef","setButtonRef","menuContent","setMenuContent","selectRev","sinceId","revId","selectSince","loadMoreHistory","revLabel","upperFirst","sinceLabel","openLabel","buttonLabel","collectLatestAuthorAnnotations","authorMap","LoadingContent","ChangesPanel","onHistoryClose","scrollRef","historyState","documentContext","changeAnnotations","borderLeft","useDeskToolSetting","deskToolSettings","settings","VIEW_MODE_PARSED","VIEW_MODE_RAW","VIEW_MODES","lru","HLRU","isExpanded","keyPath","toggleExpanded","selectElement","createRange","removeAllRanges","selectNodeContents","addRange","maybeSelectAll","selectAll","keyCode","isDocumentLike","JSONInspectorWrapper","syntax","constant","Search","TextInput","InspectDialog","onInspectClose","dialogIdPrefix","viewModeId","onViewModeChange","viewMode","setParsedViewMode","setRawViewMode","DocTitle","TabList","Tab","TabPanel","outline","JSONInspector","TextOneLine","ReferenceChangedBanner","routerReferenceId","parentGroup","parentSibling","hasHistoryOpen","pathFromString","referenceInfo","parentRefPathSegment","keyedSegmentIndex","pathGet","handleReloadReference","shouldHide","PermissionCheckBanner","requiredPermission","ReadOnlyIcon","FormView","_handleChange","formState","onSetCollapsedPath","onSetCollapsedFieldSet","onSetActiveFieldGroup","isNonExistent","isActionEnabled","patchEvent","prepareMutationEvent","prepareRebaseEvent","onSubmit","remotePatches","localPatches","DocumentHeaderTabs","activeViewId","tabPanelId","DocumentHeaderTab","MENU_ITEM_TONES","ListItem","truncate","menuItemTone","ValidationList","isValidationErrorMarker","isValidationWarningMarker","isValidationInfoMarker","resolvePathTitle","_error","_warning","_info","BUTTON_PROPS","ValidationMenu","hasErrorMarkers","hasWarningMarkers","hasInfoMarkers","buttonProps","DocumentHeaderTitle","connectionState","subscribed","isActionButton","isMenuButton","DocumentPanelHeader","onMenuAction","onPaneClose","onPaneSplit","unstable_languageFilter","isValidationOpen","setValidationOpen","showTabs","showVersionMenu","reviewChanges","showSplitPaneButton","splitViews","showSplitPaneCloseButton","showPaneGroupCloseButton","languageFilterComponent","SplitVerticalIcon","$disabled","DocumentPanel","footerHeight","isInspectOpen","parentPortal","headerElement","setHeaderElement","headerRect","portalRef","documentScrollElement","setDocumentScrollElement","docPermissionsInput","activeView","splitPanes","formViewHidden","activeViewNode","historical","scrollTo","inspectDialog","getOpErrorTitle","getOpSuccessTitle","IGNORE_OPS","DocumentOperationResults","DIALOG_WIDTH_TO_UI_WIDTH","full","ConfirmDialog","ConfirmDialogContent","cancelButtonIcon","cancelButtonText","confirmButtonIcon","confirmButtonText","onCancel","onConfirm","handleGlobalKeyDown","ModalDialog","modalId","__unstable_hideCloseButton","showCloseButton","PopoverDialog","PopoverDialogContent","ActionStateDialog","unknownModal","ActionMenuButton","actionStates","idPrefix","setActionIndex","setReferenceElement","currentAction","actionState","ActionMenuListItem","onHandle","DocumentStatusBarActionsInner","showMenu","firstActionState","menuActionStates","DocumentStatusBarActions","HistoryStatusBarActions","historyActions","HistoryRestoreAction","RenderBadgeCollectionState","badges","badgeProps","LiveEditBadge","BADGE_TONES","danger","DocumentBadgesInner","badge","DocumentBadges","PublishStatus","lastPublished","lastUpdated","lastPublishedTimeAgo","lastPublishedTime","lastUpdatedTimeAgo","lastUpdatedTime","PlayIcon","StyledMotionPath","motion","Circle","Arrows","Checkmark","Edit","rotateAnimation","keyframes","RotateGroup","syncing","scale","saved","arrows","checkmark","pathLength","edit","AnimatedStatusIcon","variants","animate","ReviewButton","ReviewChangesButton","SYNCING_TIMEOUT","SAVED_TIMEOUT","DocumentSparkline","onHistoryOpen","syncState","showingRevision","rootFlexElement","setRootFlexElement","rootFlexRect","setStatus","timerId","reviewButton","publishStatus","DocumentActionsBox","DocumentStatusBar","actionsBoxRef","KeyboardShortcutResponder","actionsBoxElement","activeIndex","onActionStart","activeAction","matchingStates","isHotkey","matchingState","DocumentActionShortcuts","setActiveIndex","setAtPath","currentTree","getExpandOperations","selectedGroupName","inSelectedGroup","expandArrayPath","foundMember","getHistoryMenuItem","RestoreIcon","isDisabled","getInspectItem","BinaryDocumentIcon","getProductionPreviewItem","previewUrl","EarthAmericasIcon","isSanityDocument","usePreviewUrl","setPreviewUrl","resolveProductionUrl","getInitialValueTemplateOpts","panePayload","structureNodeTemplate","urlTemplate","typeTemplates","DocumentPaneProvider","documentActions","documentBadges","languageFilterResolver","paneRouter","viewsProp","paneOptions","documentIdRaw","initialValueRaw","validationRaw","languageFilter","setFocusPath","timelineMode","nextPresence","inspectOpen","compareValue","viewOlderVersion","newSince","newRev","nextFocusPath","blurredPath","patchRef","handleHistoryClose","handleHistoryOpen","handlePaneClose","handlePaneSplit","toggle","handleKeyUp","handleInspectClose","onSetOpenPath","onSetFieldGroupState","onSetCollapsedFieldSets","handleOnSetCollapsedPath","handleOnSetCollapsedFieldSet","handleSetActiveFieldGroup","formStateRef","handleOpenPath","onKeyUp","DOCUMENT_PANEL_MIN_WIDTH","DOCUMENT_PANEL_INITIAL_MIN_WIDTH","CHANGES_PANEL_MIN_WIDTH","DIALOG_PROVIDER_POSITION","StyledChangeConnectorRoot","DocumentPane","parentSourceName","DocumentPaneInner","usePaneOptions","isDocumentLoaded","providerProps","mergeDocumentType","childParams","routerPanesStateLength","InnerDocumentPane","zOffsets","footerElement","setFooterElement","setActionsBoxElement","footerRect","footerH","documentPanel","changesPanel","onConnectorSetFocus","DialogProvider","NoDocumentTypesScreen","StyledPaneLayout","isSaveHotkey","DeskTool","onPaneChange","setLayoutCollapsed","handleRootCollapse","handleRootExpand","hasSiblings","withoutSiblings","hasDefinedDocumentTypes","_original","isClientError","POLL_INTERVAL","getVisiblePoll$","getDocumentExistence","nonExistant","fetchCrossDatasetReferences","forkJoin","checkDocumentId","crossProjectTokens","totalCount","references","currentDataset","useInternalReferences","referencesClause","totalClause","useCrossDatasetReferences","useReferringDocuments","internalReferences","isInternalReferencesLoading","crossDatasetReferences","isCrossDatasetReferencesLoading","projectIds","crossDatasetReference","TextWithToneStyle","$tone","TextWithTone","dimmed","TimeAgo","PublishedStatus","updatedAt","DraftStatus","getMissingDocumentFallback","getValueWithFallback","assignWith","objValue","srcValue","getPreviewStateObservable","PaneItemPreview","isNumber","sync","componentWillUnmount","ReferencePreviewLink","__unstable_focusRing","ChevronWrapper","CrossDatasetReferencesDetails","details","CrossDatasetReferencesSummary","summary","TableContainer","Table","ReferencesCard","OtherReferenceCount","ConfirmDeleteDialogBody","onReferenceLinkClick","renderPreviewItem","documentCount","projectCount","projectIdList","datasetName","CopyToClipboard","ClipboardIcon","DialogBody","LoadingContainer","ConfirmDeleteDialog","capitalizedAction","showConfirmButton","ConfirmDeleteDialogContainer","DISABLED_REASON_TITLE","NOTHING_TO_DELETE","DeleteAction","deleteOp","isConfirmDialogOpen","setConfirmDialogOpen","handleCancel","handleConfirm","NO_CHANGES","NOT_PUBLISHED","DiscardChangesAction","ResetIcon","NOTHING_TO_DUPLICATE","DuplicateAction","isDuplicating","setDuplicating","uuid","CopyIcon","isRevisionInitialVersion","LIVE_EDIT_ENABLED","ALREADY_PUBLISHED","getDisabledReason","publishedAt","PublishAction","publishState","setPublishState","validationStatus","hasValidationErrors","publishScheduled","setPublishScheduled","isNeitherSyncingNorValidating","hasDraft","doPublish","didPublish","UnpublishAction","initialDocumentBadges","initialDocumentActions","initialLanguageFilter","schemaTypesReducer","schemaTypes","resolveProductionUrlReducer","productionUrl","toolsReducer","schemaTemplatesReducer","schemaTemplates","documentBadgesReducer","documentActionsReducer","newDocumentOptionsResolver","newDocumentOptions","fileAssetSourceResolver","imageAssetSourceResolver","_documentLanguageFilterReducer","resolveDocumentLanguageFilter","ConfigPropertyError","propertyName","flattenConfig","plugins","currentConfig","resolveConfigProperty","inputConfig","reducers","configs","reducer","asyncReducer","pseudoRandomNumber","seed","hashCode","prevHash","currVal","SvgText","bold","createDefaultIcon","rng1","huesWithoutGray","possibleTints","rng2","tint","letters","word","darkened","darken","lightened","lighten","textColor","hasBadContrast","readableColor","textAnchor","alignmentBaseline","dominantBaseline","READABLE","PERMISSION_DENIED","NOT_FOUND","getReferenceInfo","referenceType","pairAvailability$","pairAvailability","draftRef","publishedRef","typeName$","draftTypeName","publishedTypeName","refSchemaType","previewPaths","draftPreview$","publishedPreview$","getCounterpartIds","collatedHits","collatedHit","getExistingCounterparts","referenceSearch","textTerm","searchWeighted","collated","existingCounterpartIds","STATUS_ICONS","AlertStrip","useOnClickOutside","refs","INITIAL_LOADING_STATE","retry","useReferenceInfo","msgSubject","msg$","stream$","previousId","useInterval","useReducer","timeSince","formatDistanceToNow","UnavailableMessage","showTypeLabel","useRootTheme","insufficientPermissions","previewId","previewStub","HelpCircleIcon","OptionPreview","PreviewReferenceValue","refTypeName","ConditionalTooltip","INLINE_BLOCK_STYLE","FULL_WIDTH","CreateButton","createOptions","onCreate","canCreateAny","menuRef","createOption","StyledPopover","ReferenceAutocomplete","contentRef","searchString","NARROW_LAYOUT","WIDE_LAYOUT","$narrow","AutocompleteContainer","handleNewRef","setForwardedRef","inputWrapperRect","instance","StyledPreviewCard","INITIAL_SEARCH_STATE","NO_FILTER","nonNullable","REF_PATH","ReferenceInput","editReferenceLinkComponent","EditReferenceLink","onSearch","searchState","setSearchState","handleCreateNew","h","handleClear","handlePreviewKeyPress","handleAutocompleteKeyDown","getReferenceInfoMemo","loadableReferenceInfo","autocompletePopoverReferenceElementRef","hasFocusAtRef","weakIs","weakShouldBe","hasRef","weakWarningOverride","handleFixStrengthMismatch","referenceExists","handleRemoveStrengthenOnPublish","handleQueryChange","useObservableCallback","inputValue$","handleAutocompleteOpenButtonClick","showWeakRefMismatch","handleCreateButtonKeyDown","OpenLink","isWeakRefToNonexistent","clickOutsideBoundaryRef","autocompletePortalRef","createButtonMenuPortalRef","handleReplaceClick","openButton","ClearIcon","ReplaceIcon","OpenInNewTabIcon","LaunchIcon","resolveUserDefinedFilter","valuePath","filterParams","useValueRef","StudioReferenceInput","documentRef","documentTypeName","isDocumentLiveEdit","disableNew","handleSearch","adapter.referenceSearch","isQueryError","EditReferenceLink_","_props","_refType","adapter.getReferenceInfo","warnInputTypeNotSupported","once","warnSearchableOptionNotSupported","resolveReferenceInput","MOVING_ITEM_CLASS_NAME","DRAG_HANDLE_ATTRIBUTE","sortableHandle","SortableHandle","sortableItem","SortableElement","sortableContainer","SortableContainer","Sortable","SortableList","KeyCode","Space","Enter","Esc","Up","Left","Right","Down","KEYCODES","lift","drop","up","sortableGrid","helperClass","keyCodes","axis","lockAxis","useDragHandle","shouldCancelStart","sortableList","isDragHandle","bleed","GridItem","SortableListItem","SortableGrid","SortableGridItem","List","isSortable","isGrid","onSortEnd","Item","ItemComponent","isLegacyOptionsItem","resolveValueWithLegacyOptionsSupport","otherItem","it","otherKeys","keyName","inArray","OptionsArrayInput","PureComponent","_element","isChecked","optionValue","getMemberTypeOfItem","optionType","WrappedCheckbox","boxShadow","verticalAlign","Input","font","appearance","fontFamily","fontWeight","regular","boxSizing","Placeholder","TagInput","placeholderProp","setInputValue","setFocused","handleRootPointerDown","isTagElement","isHTMLElement","closest","handleInputBlur","handleInputChange","handleInputFocus","handleInputKeyDown","handleTagRemove","onPointerDown","tagIndex","Tag","TagsArrayInput","tagInputValue","DEFAULT_CONCURRENCY","withMaxConcurrency","func","concurrency","throttler","createThrottler","currentSubscriptions","pendingObservables","scheduleAndWait","check","MAX_CONCURRENT_UPLOADS","uploadSanityAsset","extract","preserveFilename","storeOriginalFilename","creditLine","hashFile","fetchExisting","upload","uploadAsset","uploadImageAsset","uploadFileAsset","observeAssetDoc","observeImageAsset","observeFileAsset","readFile","FileReader","onload","onerror","readAsArrayBuffer","abort","crypto","subtle","arrayBuffer","digest","hexFromBuffer","readFileAsArrayBuffer","SKIP_EXIF_ERROR_RE","EXIF_BUFFER_LENGTH","readExif","buf","exif","rotated","rotate","radians","degrees","translate","flip","canvas","getContext","ORIENTATION_OPS","ORIENTATIONS","DEFAULT_ORIENTATION","THUMB_SIZE","_orient","orientationNumber","orientation","ratio","drawImage","orient","orientationId","toDataURL","loadImage","rotateImage","createObjectURL","UPLOAD_STATUS_KEY","UNSET_UPLOAD_PATCH","createUploadEvent","CLEANUP_EVENT","createInitialUploadEvent","uploadImage","upload$","stage","percent","setPreviewUrl$","exifData","uploadFile","UPLOAD_IMAGE","accepts","UPLOAD_FILE","UPLOAD_TEXT","uploaders","uploader","priority","acceptedFiles","acceptedFilesArray","baseMimeType","endsWith","resolveUploader","is.type","accept","getSchemaTypeTitle","BEFORE","AFTER","arrayInsert","normalizedIdx","findTargetIndex","_arrayApply","_objectApply","isObject","OPERATIONS","SUPPORTED_PATCH_TYPES","_primitiveApply","DMP","diff_match_patch","patch_apply","patch_fromText","_stringApply","applyAll","_applyPatch","withFocusRing","$border","extractPastedFiles","dataTransfer","files","normalizeItems","extractDroppedFiles","webkitGetAsEntry","getAsFile","isDirectory","walk","isFile","createReader","readEntries","entr","imageUrlToBlob","quality","loader","crossOrigin","toBlob","PASTE_INPUT_STYLE","fileTarget","FileTarget","onFiles","onFilesOver","onFilesOut","showPasteInput","setShowPasteInput","pasteInput","enteredElements","emitFiles","handlePaste","clipboardData","convertImagesToFilesAndClearContentEditable","handleDrop","nativeEvent","handleDragOver","handleDragEnter","fileTypes","handleDragLeave","prevShowPasteInput","onDragOver","onDragEnter","onDragLeave","onDrop","targetFormat","isContentEditable","tagName","imageElements","innerHTML","images","imageBlobs","blob","File","DropMessage","hoveringFiles","rejectedFilesCount","multiple","UploadIcon","Overlay","getUploadCandidates","uploadTarget","UploadTarget","onUpload","resolvedUploader","handleFiles","tasks","uploaderCandidates","task","rejected","setHoveringFiles","handleFilesOut","SCROLL_OPTIONS","useScrollIntoViewOnFocusWithin","hasFocusWithin","DragHandleButton","grid","DRAG_HANDLE_PROPS","DragHandle","DragHandleIcon","InsertMenuGroup","pos","InsertAboveIcon","InsertBelowIcon","MenuGroup","insertableType","RowWrapper","dragHandle","RowItem","RegularItem","insertableTypes","handleDuplicate","insertType","DuplicateIcon","DragHandleCard","PresenceFlex","FooterFlex","MissingTypeBox","StyledItemWithMissingType","CellItem","ItemCell","ArrayItem","childPresence","handleRemove","sortable","ArrayInput","_focusArea","uploadSubscriptions","isResolvingInitialValue","handleSortEnd","oldIndex","newIndex","setFocusArea","setToast","handleRemoveNonObjectValues","nonObjects","handleUpload","uploadEvent","typeTitle","nearestSibling","renderMember","hasNonObjectValues","nearestIndexOf","startIdx","searchElement","nearestIndex","predicate","lowerIdx","upperIdx","upper","lower","ItemRow","onEscapeKey","onEnterKey","showValidationStatus","ArrayOfPrimitivesFunctions","ArrayOfPrimitivesInput","_lastAddedIndex","handleItemEnterKey","firstType","handleItemEscapeKey","getSnapshotBeforeUpdate","prevProps","prevFocusPath","focusIndex","querySelector","HTMLInputElement","prevFocusedIndex","restoreSelection","selectionStart","selectionEnd","componentDidUpdate","prevFocusedValue","newInput","setSelectionRange","StudioArrayInput","supportsImageUploads","supportsFileUploads","defaultResolveUploader","StudioArrayOfPrimitivesInput","ArrayFunctionsImpl","PRIMITIVES","isArrayOfPrimitives","isStringArray","isTagsArray","hasOptionsList","resolveArrayInput","OptionsArray","toSelectItem","EMPTY_ITEM","SelectInput","isRadio","itemFromOptionValue","optionValueFromItem","handleSelectChange","RadioSelect","customValidity","Select","RadioSelectItem","Radio","StringInput","resolveStringInput","normalizeRules","getValidationRule","ruleName","rule","ruleSpec","_rules","NumberInput","minRule","onlyPositiveNumber","step","inputMode","resolveNumberInput","CenterAlignedBox","ZeroLineHeightBox","BooleanInput","indeterminate","LayoutSpecificInput","EmailInput","UnknownFields","fieldNames","fieldsLen","handleUnsetClick","UnknownField","onUnsetClick","FieldGroupTabsWrapper","GroupTab","GroupOption","ElementQuery","GroupTabs","shouldAutoFocus","GroupSelect","handleSelect","FieldGroupTabs","ObjectInput","renderedUnknownFields","knownFieldNames","unknownFields","renderObjectMembers","CalendarDay","isCurrentMonth","isToday","toDateString","textAlign","getDate","MONTH_NAMES","WEEK_DAY_NAMES","HOURS_24","ARROW_KEYS","TAIL_WEEKDAYS","getWeekStartsOfMonth","firstDay","startOfMonth","eachWeekOfInterval","lastDayOfMonth","getWeekDaysFromWeekStarts","weekStarts","weekStart","addDays","getWeeksOfMonth","days","getWeek","CalendarMonth","weekday","week","weekIdx","dayIdx","isSameDay","isSameMonth","dayPresets","timePresets","LazyTextInput","checkEvent","handleKeyPress","YearInput","numericValue","PRESERVE_FOCUS_ELEMENT","Calendar","selectTime","onFocusedDateChange","selectedDate","focusedDate","timeStep","setFocusedDate","setFocusedDateMonth","month","setDate","setMonth","handleFocusedMonthChange","moveFocusedDate","addMonths","setFocusedDateYear","year","setYear","handleDateChange","setMinutes","getMinutes","handleMinutesChange","handleHoursChange","mins","focusCurrentWeekDay","currentFocusInCalendarGrid","activeElement","handleNowClick","CalendarMonthSelect","getMonth","CalendarYearSelect","getFullYear","handlePrevMonthClick","handleNextMonthClick","ChevronLeftIcon","handlePrevYearClick","handleNextYearClick","DatePicker","setFocusedDay","nextDate","DateTimeInput","onInputChange","isPickerOpen","setPickerOpen","handleDeactivation","CalendarIcon","FocusLock","onDeactivation","DEFAULT_PLACEHOLDER_TIME","CommonDateTimeInput","deserialize","formatInputValue","parseInputValue","localValue","setLocalValue","handleDatePickerInputChange","nextInputValue","isValid","handleDatePickerChange","parseResult","parseOptions","calendarTodayLabel","isoString","deserialized","enforceTimeStep","dateString","parseISO","minutes","leftOver","VALUE_FORMAT","DateInput","StyledTextArea","TextArea","rows","UrlInput","uriRule","inputType","allowRelative","defaultSlugify","slugifyOpts","speakingurl","slugify","sourceValue","slugifier","useAsync","lastId","wrappedCallback","asyncId","getNewFromSource","SlugInput","sourceField","updateSlug","nextSlug","generateState","handleGenerateSlug","newFromSource","newSlug","isUpdating","FileButton","FileInputButton","idProp","textWeight","PlaceholderText","isFileType","messageIcon","messageText","UploadPlaceholder","browse","WithReferencedAsset","observeAsset","waitPlaceholder","CardWrapper","LeftSection","STALE_UPLOAD_MS","elapsedMs","UploadProgress","uploadState","onStale","filename","urlToFile","xhr","XMLHttpRequest","onloadend","ext","dataURLtoFile","readAsDataURL","responseType","send","base64ToFile","base64Data","dataurl","mime","bstr","u8arr","handleSelectAssetFromSource","assetFromSource","uploadWith","firstAsset","imagePatches","FileInputMenuItem","ActionsMenu","downloadUrl","copyUrl","handleCopyURL","clipboard","writeText","ButtonWrapper","UploadWarning","onClearStale","RatioBox","ImageLoader","UNSAFE_componentWillMount","UNSAFE_componentWillReceiveProps","nextProps","testProperties","foundProperty","getBackingStoreRatio","testProperty","isPointInEllipse","xradius","yradius","isPointInCircle","isPointInRect","getPointAtCircumference","cos","sin","Point","HLine","_left","_right","Corners","Rect","fromEdges","setTopLeft","setSize","setCenter","corners","multiply","grow","delta","shrink","cropRelative","clamp","supportsTouch","makeDragAware","DragAware","domNode","currentPos","isDragging","handleTouchMove","handleDragStart","onDragStart","nextPos","getPos","getPositionRelativeToRect","handleDrag","onDrag","diffPos","handleDragEnd","onDragEnd","handleDragCancel","setDomNode","componentDidMount","onTouchStart","onTouchMove","touches","clientX","clientY","otherPos","DragAwareCanvas","RootContainer","CanvasContainer","OPEN_HAND","CLOSE_HAND","DEFAULT_HOTSPOT","DEFAULT_CROP","MARGIN_PX","CROP_HANDLE_SIZE","HOTSPOT_HANDLE_SIZE","normalizeRect","flippedY","flippedX","checkCropBoundaries","limitToBoundaries","newDelta","getCropCursorForHandle","backingStoreRatio","cropHandleKeys","ToolCanvas","cropping","cropMoving","moving","mousePosition","getScale","inHotspot","utils2d.isPointInEllipse","getHotspotRect","inDragHandle","utils2d.isPointInCircle","getDragHandleCoords","activeCropHandle","getActiveCropHandleFor","inCropRect","utils2d.isPointInRect","getCropRect","emitCrop","emitCropMove","emitMove","emitResize","onChangeEnd","rawCrop","getClampedValue","clientRect","setCanvas","hotspotRect","getCropHandles","inner","handleSize","halfCropHandleSize","cropHandle","topLeft","topRight","bottomLeft","bottomRight","cropHandles","applyHotspotMoveBy","applyCropMoveBy","side","applyHotspotResizeBy","paintHotspot","imageRect","save","drawBackdrop","drawEllipse","clip","drawHole","drawDragHandle","dest","scaleY","beginPath","globalAlpha","arc","strokeStyle","lineWidth","closePath","srcLeft","srcTop","srcWidth","srcHeight","destLeft","destTop","destWidth","destHeight","fillStyle","fillRect","utils2d.getPointAtCircumference","getActualSize","clientHeight","clientWidth","bbox","setLineDash","vline","hline","x2","y2","paintBackground","clearRect","paint","pxratio","paintCropBorder","highlightCropHandles","paintMousePosition","cropRect","actualSize","getCursor","activeCropArea","mouseOverDragHandle","cursors.CLOSE_HAND","mouseoverHotspot","mouseoverCropRect","cursors.OPEN_HAND","draw","currentCursor","newCursor","onMouseMove","currentHotspot","currentCrop","Resize","_canvas","removeChild","getCanvas","appendChild","landscape","targetWidth","targetHeight","ImageTool","calculateStyles","imageAspect","readAspectRatio","containerAspect","readCropAspect","calculateHotSpotCrop","containerHeight","styleFormat","toStylePercentage","decimals","multiplier","sourceAspect","descriptor","viewportAspect","alignment","netWidth","netHeight","outImg","cropRationalAspect","cropAspect","maxHotspotXScale","maxHotspotYScale","maxScale","minFullBleedScale","cropIsTaller","outCrop","letterboxScale","hotspotLeft","hotspotTop","HotspotImageContainer","getCropAspect","srcAspect","origHeight","origWidth","cropWidth","cropHeight","HotspotImage","containerElement","imageElement","setImageElement","handleResize","updateContainerAspect","setContainerElement","alreadyLoaded","naturalWidth","parentNode","getTargetAspectValue","srcAspectRatio","srcSet","alignX","alignY","onLoad","targetAspect","targetStyles","defaultProps","PROBABLY_THE_TINIEST_GIF_EVER","isBlob","INITIAL_STATE","useLoadImage","HOTSPOT_PATH","PREVIEW_ASPECT_RATIOS","DEFAULT_VALUE","LoadStatus","overflowWrap","ImageToolInput","isImageLoading","handleChangeEnd","cropField","hotspotField","ButtonContainer","MenuActionsWrapper","ImageActionsMenu","showEdit","isMenuOpen","onMenuOpen","menuElement","setMenuRef","menuButtonRef","setMenuButtonRef","CropIcon","shouldFocus","MAX_DEFAULT_HEIGHT","SpinnerWrapper","drag","light","FlexOverlay","getImageSize","imageUrlParams","isRejected","setLoaded","acceptTone","maxHeightToPx","documentElement","imageWidth","imageHeight","imageRatio","renderedImageHeight","rootHeight","onLoadChange","OverlayComponent","cardTone","HoverIcon","HoverText","InvalidImageWarning","onClearValue","passThrough","ASSET_FIELD_PATH","ASSET_IMAGE_MENU_POPOVER","ImageInput","_assetElementRef","uploadSubscription","isUploading","selectedAssetSource","isStale","setFocusElement","getUploadOptions","assetDocumentProps","cancelUpload","clearUploadStatus","handleRemoveButtonClick","allKeys","remainingKeys","removeKeys","valueIsArrayElement","handleFieldChange","eventIsUnsettingLastFilledField","parentPathSegment","handleOpenDialog","handleCloseDialog","handleFilesOver","handleCancelUpload","handleClearUploadState","handleStaleUpload","handleClearField","handleSelectFiles","uploadFirstAccepted","handleSelectImageFromAssetSource","handleAssetSourceClosed","renderHotspotInput","hotspotInputProps","withImageTool","isImageToolEnabled","isImageSource","_assetPath","renderAssetMenu","showAdvancedEditButton","browseMenuItem","assetSource","extension","forceDownload","renderBrowser","renderUploadPlaceholder","renderUploadState","elementHeight","renderAssetSource","selectionType","getFileTone","renderAsset","hasValueOrUpload","StudioImageInput","sourcesFromSchema","CardOverlay","formatBytes","bytes","dm","parseFloat","FileDetails","FileSkeleton","LabelSkeleton","InvalidFileWarning","FileInput","_focusRef","isArrayElement","handleSelectFileFromAssetSource","handleFileTargetFocus","fileInfo","_assetFieldPath","hasFileTargetFocus","isFileSource","StudioFileInput","fileConfig","retryAttempt","setRetryAttempt","CrossDatasetReferencePreview","showStudioUrlIcon","hasStudioUrl","previewMedia","withOptions","toEntry","CrossDatasetReferenceInput","refDoc","handleAutocompleteFocus","studioUrl","crossDatasetType","REQUEST_TAG_BASE","createGetReferenceInfo","docType","resolvedDoc","fetchDocumentAvailability","publishedPreview","useCrossProjectToken","StudioCrossDatasetReferenceInput","isCurrentProject","loadableToken","crossDatasetClient","defaultInputs","resolveComponentFromTypeVariants","getTypeChain","visited","defaultResolveInputComponent","componentFromTypeVariants","typeChain","deduped","subType","NoopField","ObjectOrArrayField","ImageOrFileField","defaultResolveFieldComponent","defaultResolveItemComponent","defaultResolvePreviewComponent","defaultRenderField","defaultRenderInput","defaultRenderItem","defaultRenderPreview","_collectMiddleware","middlewares","plugin","_createRenderField","_createRenderInput","_createRenderItem","_createRenderPreview","previewProps","normalizeLogo","normalizeIcon","workspaceOptions","nestedSources","resolvedSources","schemaValidationProblemGroups","schemaErrors","source$","resolveSource","workspaceSummary","getBifurClient","bifurVersionedClient","fromUrl","clients","wrappedClient","__proto__","initialTemplatesResponses","templateMap","creationContext","templateResponses","templateErrors","defaultSubtitle","partialContext"],"mappings":"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"}