'use strict';

const _excluded = ["index", "pane", "paneKey"],
      _excluded2 = ["child", "component", "menuItems", "menuItemGroups", "title", "type", "__preserveInstance"];

var _templateObject;

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }

function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }

function _taggedTemplateLiteral(strings, raw) { if (!raw) { raw = strings.slice(0); } return Object.freeze(Object.defineProperties(strings, { raw: { value: Object.freeze(raw) } })); }

var jsxRuntime = require('react/jsx-runtime');

var React = require('react');

var reactIs = require('react-is');

require('@reach/auto-id');

var icons = require('@sanity/icons');

var ui = require('@sanity/ui');

var prepareConfig = require('./_prepareConfig-2f1df9bf.cjs');

require('lodash');

require('react-rx');

require('rxjs');

require('rxjs/operators');

require('shallow-equals');

require('history');

require('@sanity/bifur-client');

require('@sanity/schema');

require('@sanity/schema/_internal');

require('@sanity/validation');

require('date-fns');

require('pluralize-esm');

require('@sanity/image-url');

require('@sanity/types');

require('@sanity/mutator');

require('json-reduce');

require('rxjs-exhaustmap-with-trailing');

require('@sanity/util/content');

require('@sanity/util/paths');

require('dataloader');

require('raf');

require('groq-js');

require('rxjs-etc/operators');

require('mendoza');

require('@sanity/diff');

require('@sanity/color');

require('react-fast-compare');

require('@sanity/portable-text-editor');

require('scroll-into-view-if-needed');

require('@sanity/util/legacyDateFormat');

require('speakingurl');

require('@sanity/uuid');

require('get-random-values-esm');

require('@sanity/asset-utils');

require('exif-component');

require('react-dom');

require('nanoid');

require('@sanity/generate-help-url');

var styled = require('styled-components');

require('@sanity/client');

require('@juggle/resize-observer');

require('nano-pubsub');

require('observable-callback');

require('debug');

require('react-refractor');

require('refractor/lang/bash');

require('refractor/lang/javascript');

require('refractor/lang/json');

require('refractor/lang/jsx');

require('refractor/lang/typescript');

require('use-hot-module-reload');

require('classnames');

require('use-device-pixel-ratio');

require('color2k');

require('react-sortable-hoc');

require('@sanity/block-tools');

require('diff-match-patch');

require('date-fns/isValid');

require('react-focus-lock');

require('date-fns/formatDistanceToNow');

require('is-hotkey');

require('react-copy-to-clipboard');

require('sanity-diff-patch');

require('@rexxars/react-json-inspector');

require('hashlru');

require('framer-motion');

require('react-props-stream');

require('@sanity/logos');

require('@portabletext/react');

function _interopDefaultLegacy(e) {
  return e && typeof e === 'object' && 'default' in e ? e : {
    'default': e
  };
}

var styled__default = /*#__PURE__*/_interopDefaultLegacy(styled);

function UserComponentPaneHeader(props) {
  const {
    actionHandlers,
    index,
    menuItems,
    menuItemGroups,
    title
  } = props;
  const {
    features
  } = prepareConfig.useDeskTool();

  if (!(menuItems == null ? void 0 : menuItems.length) && !title) {
    return null;
  }

  return /* @__PURE__ */jsxRuntime.jsx(prepareConfig.PaneHeader, {
    actions: /* @__PURE__ */jsxRuntime.jsx(prepareConfig.PaneHeaderActions, {
      menuItems,
      menuItemGroups,
      actionHandlers
    }),
    backButton: features.backButton && index > 0 && /* @__PURE__ */jsxRuntime.jsx(ui.Button, {
      as: prepareConfig.BackLink,
      "data-as": "a",
      icon: icons.ArrowLeftIcon,
      mode: "bleed"
    }),
    title
  });
}

const Root = styled__default["default"](ui.Box)(_templateObject || (_templateObject = _taggedTemplateLiteral(["\n  position: relative;\n"])));

function UserComponentPaneContent(props) {
  const {
    children
  } = props;
  const {
    collapsed
  } = prepareConfig.usePane();
  return /* @__PURE__ */jsxRuntime.jsx(Root, {
    hidden: collapsed,
    height: "fill",
    overflow: "auto",
    children
  });
}

function UserComponentPane(props) {
  const {
    index,
    pane,
    paneKey
  } = props,
        restProps = _objectWithoutProperties(props, _excluded);

  const {
    params
  } = prepareConfig.usePaneRouter();

  const {
    child,
    component,
    menuItems,
    menuItemGroups,
    title = "",
    type: _unused,
    __preserveInstance = false
  } = pane,
        restPane = _objectWithoutProperties(pane, _excluded2);

  const [ref, setRef] = React.useState(null);
  return /* @__PURE__ */jsxRuntime.jsxs(prepareConfig.Pane, {
    id: paneKey,
    minWidth: 320,
    selected: restProps.isSelected,
    children: [/* @__PURE__ */jsxRuntime.jsx(UserComponentPaneHeader, {
      actionHandlers: ref == null ? void 0 : ref.actionHandlers,
      index,
      menuItems,
      menuItemGroups,
      title
    }), /* @__PURE__ */jsxRuntime.jsxs(UserComponentPaneContent, {
      children: [reactIs.isValidElementType(component) && React.createElement(component, _objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, !__preserveInstance && {
        key: "".concat(restProps.itemId, "-").concat(restProps.childItemId)
      }), restProps), restPane), {
        ref: setRef
      }), {}, {
        child,
        paneKey,
        urlParams: params
      })), React.isValidElement(component) && component]
    })]
  });
}

exports["default"] = UserComponentPane;
//# sourceMappingURL=_index-8ccf3995.cjs.map
