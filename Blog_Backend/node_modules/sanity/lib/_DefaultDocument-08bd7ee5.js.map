{"version":3,"file":"_DefaultDocument-08bd7ee5.js","sources":["../src/components/Favicons.tsx","../src/components/globalErrorHandler/GlobalErrorHandler.tsx","../src/components/NoJavascript.tsx","../src/components/DefaultDocument.tsx"],"sourcesContent":["import React from 'react'\n\nexport interface FaviconProps {\n  basePath: string\n}\n\nexport function Favicons({basePath}: FaviconProps) {\n  const base = `${basePath.replace(/\\/+$/, '')}/static`\n  return (\n    <>\n      <link rel=\"icon\" href={`${base}/favicon.ico`} sizes=\"any\" />\n      <link rel=\"icon\" href={`${base}/favicon.svg`} type=\"image/svg+xml\" />\n      <link rel=\"apple-touch-icon\" href={`${base}/apple-touch-icon.png`} />\n      <link rel=\"manifest\" href={`${base}/manifest.webmanifest`} />\n    </>\n  )\n}\n","import React from 'react'\n\nconst errorHandlerScript = `\n;(function () {\n  var _caughtErrors = []\n\n  var errorChannel = (function () {\n    var subscribers = []\n\n    function publish(msg) {\n      for (var i = 0; i < subscribers.length; i += 1) {\n        subscribers[i](msg)\n      }\n    }\n\n    function subscribe(subscriber) {\n      subscribers.push(subscriber)\n\n      return function () {\n        var idx = subscribers.indexOf(subscriber)\n\n        if (idx > -1) {\n          subscribers.splice(idx, 1)\n        }\n      }\n    }\n\n    return {publish, subscribe, subscribers}\n  })()\n\n  // NOTE: Store the error channel instance in the global scope so that the Studio application can\n  // access it and subscribe to errors.\n  window.__sanityErrorChannel = {\n    subscribe: errorChannel.subscribe,\n  }\n\n  function _nextTick(callback) {\n    setTimeout(callback, 0)\n  }\n\n  function _handleError(error, params) {\n    _nextTick(function () {\n      // - If there are error channel subscribers, then we notify them (no console error).\n      // - If there are no subscribers, then we log the error to the console and render the error overlay.\n      if (errorChannel.subscribers.length) {\n        errorChannel.publish({error, params})\n      } else {\n        console.error(error)\n\n        _renderErrorOverlay(error, params)\n      }\n    })\n  }\n\n  var ERROR_BOX_STYLE = [\n    'background: #fff',\n    'border-radius: 6px',\n    'box-sizing: border-box',\n    'color: #121923',\n    'flex: 1',\n    \"font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue','Liberation Sans',Helvetica,Arial,system-ui,sans-serif\",\n    'font-size: 16px',\n    'line-height: 21px',\n    'margin: 0 auto',\n    'max-width: 960px',\n    'overflow: auto',\n    'padding: 20px',\n    'width: 100%',\n  ].join(';')\n\n  var ERROR_CODE_STYLE = [\n    'color: #972E2A',\n    \"font-family: -apple-system-ui-monospace, 'SF Mono', Menlo, Monaco, Consolas, monospace\",\n    'font-size: 13px',\n    'line-height: 17px',\n    'margin: 0',\n  ].join(';')\n\n  function _renderErrorOverlay(error, params) {\n    var errorElement = document.querySelector('#__sanityError') || document.createElement('div')\n    var colno = params.event.colno\n    var lineno = params.event.lineno\n    var filename = params.event.filename\n\n    errorElement.id = '__sanityError'\n    errorElement.innerHTML = [\n      '<div style=\"' + ERROR_BOX_STYLE + '\">',\n      '<div style=\"font-weight: 700;\">Uncaught error: ' + error.message + '</div>',\n      '<div style=\"color: #515E72; font-size: 13px; line-height: 17px; margin: 10px 0;\">' +\n        filename +\n        ':' +\n        lineno +\n        ':' +\n        colno +\n        '</div>',\n      '<pre style=\"' + ERROR_CODE_STYLE + '\">' + error.stack + '</pre>',\n      '</div>',\n    ].join('')\n\n    errorElement.style.position = 'fixed'\n    errorElement.style.zIndex = 1000000\n    errorElement.style.top = 0\n    errorElement.style.left = 0\n    errorElement.style.right = 0\n    errorElement.style.bottom = 0\n    errorElement.style.padding = '20px'\n    errorElement.style.background = 'rgba(16,17,18,0.66)'\n    errorElement.style.display = 'flex'\n    errorElement.style.alignItems = 'center'\n    errorElement.style.justifyContent = 'center'\n\n    document.body.appendChild(errorElement)\n  }\n\n  // NOTE:\n  // Yes â€“ we're attaching 2 error listeners below ðŸ‘€\n  // This is because React makes the same error throw twice (in development mode).\n  // See: https://github.com/facebook/react/issues/10384\n\n  // Error listener #1\n  window.onerror = function (event, source, lineno, colno, error) {\n    _nextTick(function () {\n      if (_caughtErrors.indexOf(error) !== -1) return\n\n      _caughtErrors.push(error)\n\n      _handleError(error, {\n        event,\n        lineno,\n        colno,\n        source,\n      })\n\n      _nextTick(function () {\n        var idx = _caughtErrors.indexOf(error)\n\n        if (idx > -1) _caughtErrors.splice(idx, 1)\n      })\n    })\n\n    // IMPORTANT: this callback must return \\`true\\` to prevent the error from being rendered in\n    // the browserâ€™s console.\n    return true\n  }\n\n  // Error listener #2\n  window.addEventListener('error', function (event) {\n    if (_caughtErrors.indexOf(event.error) !== -1) return true\n\n    _caughtErrors.push(event.error)\n\n    _handleError(event.error, {\n      event,\n      lineno: event.lineno,\n      colno: event.colno,\n    })\n\n    _nextTick(function () {\n      _nextTick(function () {\n        var idx = _caughtErrors.indexOf(event.error)\n\n        if (idx > -1) _caughtErrors.splice(idx, 1)\n      })\n    })\n\n    return true\n  })\n})()\n`\n\nexport function GlobalErrorHandler() {\n  // eslint-disable-next-line react/no-danger\n  return <script dangerouslySetInnerHTML={{__html: errorHandlerScript}} />\n}\n","import React from 'react'\n\nconst NoJsStyles = `\n.sanity-app-no-js__root {\n  position: absolute;\n  top: 0;\n  right: 0;\n  left: 0;\n  bottom: 0;\n  background: #fff;\n}\n\n.sanity-app-no-js__content {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n  font-family: helvetica, arial, sans-serif;\n}\n`\n\nexport function NoJavascript() {\n  return (\n    <noscript>\n      <div className=\"sanity-app-no-js__root\">\n        <div className=\"sanity-app-no-js__content\">\n          <style type=\"text/css\">{NoJsStyles}</style>\n          <h1>JavaScript disabled</h1>\n          <p>\n            Please <a href=\"https://www.enable-javascript.com/\">enable JavaScript</a> in your\n            browser and reload the page to proceed.\n          </p>\n        </div>\n      </div>\n    </noscript>\n  )\n}\n","import React from 'react'\nimport {Favicons} from './Favicons'\nimport {GlobalErrorHandler} from './globalErrorHandler'\nimport {NoJavascript} from './NoJavascript'\n\nconst globalStyles = `\n  html {\n    background-color: #f1f3f6;\n  }\n  html,\n  body,\n  #sanity {\n    height: 100%;\n  }\n  body {\n    margin: 0;\n    -webkit-font-smoothing: antialiased;\n  }\n`\n\nexport interface DefaultDocumentProps {\n  entryPath: string\n  css?: string[]\n  basePath?: string\n}\n\nconst EMPTY_ARRAY: never[] = []\n\nexport function DefaultDocument(props: DefaultDocumentProps): React.ReactElement {\n  const {entryPath, css = EMPTY_ARRAY, basePath = '/'} = props\n  return (\n    <html lang=\"en\">\n      <head>\n        <meta charSet=\"utf-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, viewport-fit=cover\" />\n        <meta name=\"robots\" content=\"noindex\" />\n        <meta name=\"referrer\" content=\"same-origin\" />\n\n        <Favicons basePath={basePath} />\n\n        <title>Sanity Studio</title>\n\n        <GlobalErrorHandler />\n\n        {css.map((href) => (\n          <link key={href} rel=\"stylesheet\" href={href} />\n        ))}\n        <style>{globalStyles}</style>\n      </head>\n      <body>\n        <div id=\"sanity\" />\n        <script type=\"module\" src={entryPath} />\n        <NoJavascript />\n      </body>\n    </html>\n  )\n}\n"],"names":["Favicons","basePath","base","replace","jsxs","Fragment","children","jsx","rel","href","sizes","type","errorHandlerScript","GlobalErrorHandler","dangerouslySetInnerHTML","__html","NoJsStyles","NoJavascript","className","globalStyles","EMPTY_ARRAY","DefaultDocument","props","entryPath","css","lang","charSet","name","content","map","id","src"],"mappings":"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"}